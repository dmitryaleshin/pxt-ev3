"use strict";var __assign=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])});return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,debugObjectHost=(!function(e){var t;(t=e.SyntaxKind||(e.SyntaxKind={}))[t.Unknown=0]="Unknown",t[t.EndOfFileToken=1]="EndOfFileToken",t[t.SingleLineCommentTrivia=2]="SingleLineCommentTrivia",t[t.MultiLineCommentTrivia=3]="MultiLineCommentTrivia",t[t.NewLineTrivia=4]="NewLineTrivia",t[t.WhitespaceTrivia=5]="WhitespaceTrivia",t[t.ShebangTrivia=6]="ShebangTrivia",t[t.ConflictMarkerTrivia=7]="ConflictMarkerTrivia",t[t.NumericLiteral=8]="NumericLiteral",t[t.StringLiteral=9]="StringLiteral",t[t.JsxText=10]="JsxText",t[t.JsxTextAllWhiteSpaces=11]="JsxTextAllWhiteSpaces",t[t.RegularExpressionLiteral=12]="RegularExpressionLiteral",t[t.NoSubstitutionTemplateLiteral=13]="NoSubstitutionTemplateLiteral",t[t.TemplateHead=14]="TemplateHead",t[t.TemplateMiddle=15]="TemplateMiddle",t[t.TemplateTail=16]="TemplateTail",t[t.OpenBraceToken=17]="OpenBraceToken",t[t.CloseBraceToken=18]="CloseBraceToken",t[t.OpenParenToken=19]="OpenParenToken",t[t.CloseParenToken=20]="CloseParenToken",t[t.OpenBracketToken=21]="OpenBracketToken",t[t.CloseBracketToken=22]="CloseBracketToken",t[t.DotToken=23]="DotToken",t[t.DotDotDotToken=24]="DotDotDotToken",t[t.SemicolonToken=25]="SemicolonToken",t[t.CommaToken=26]="CommaToken",t[t.LessThanToken=27]="LessThanToken",t[t.LessThanSlashToken=28]="LessThanSlashToken",t[t.GreaterThanToken=29]="GreaterThanToken",t[t.LessThanEqualsToken=30]="LessThanEqualsToken",t[t.GreaterThanEqualsToken=31]="GreaterThanEqualsToken",t[t.EqualsEqualsToken=32]="EqualsEqualsToken",t[t.ExclamationEqualsToken=33]="ExclamationEqualsToken",t[t.EqualsEqualsEqualsToken=34]="EqualsEqualsEqualsToken",t[t.ExclamationEqualsEqualsToken=35]="ExclamationEqualsEqualsToken",t[t.EqualsGreaterThanToken=36]="EqualsGreaterThanToken",t[t.PlusToken=37]="PlusToken",t[t.MinusToken=38]="MinusToken",t[t.AsteriskToken=39]="AsteriskToken",t[t.AsteriskAsteriskToken=40]="AsteriskAsteriskToken",t[t.SlashToken=41]="SlashToken",t[t.PercentToken=42]="PercentToken",t[t.PlusPlusToken=43]="PlusPlusToken",t[t.MinusMinusToken=44]="MinusMinusToken",t[t.LessThanLessThanToken=45]="LessThanLessThanToken",t[t.GreaterThanGreaterThanToken=46]="GreaterThanGreaterThanToken",t[t.GreaterThanGreaterThanGreaterThanToken=47]="GreaterThanGreaterThanGreaterThanToken",t[t.AmpersandToken=48]="AmpersandToken",t[t.BarToken=49]="BarToken",t[t.CaretToken=50]="CaretToken",t[t.ExclamationToken=51]="ExclamationToken",t[t.TildeToken=52]="TildeToken",t[t.AmpersandAmpersandToken=53]="AmpersandAmpersandToken",t[t.BarBarToken=54]="BarBarToken",t[t.QuestionToken=55]="QuestionToken",t[t.ColonToken=56]="ColonToken",t[t.AtToken=57]="AtToken",t[t.EqualsToken=58]="EqualsToken",t[t.PlusEqualsToken=59]="PlusEqualsToken",t[t.MinusEqualsToken=60]="MinusEqualsToken",t[t.AsteriskEqualsToken=61]="AsteriskEqualsToken",t[t.AsteriskAsteriskEqualsToken=62]="AsteriskAsteriskEqualsToken",t[t.SlashEqualsToken=63]="SlashEqualsToken",t[t.PercentEqualsToken=64]="PercentEqualsToken",t[t.LessThanLessThanEqualsToken=65]="LessThanLessThanEqualsToken",t[t.GreaterThanGreaterThanEqualsToken=66]="GreaterThanGreaterThanEqualsToken",t[t.GreaterThanGreaterThanGreaterThanEqualsToken=67]="GreaterThanGreaterThanGreaterThanEqualsToken",t[t.AmpersandEqualsToken=68]="AmpersandEqualsToken",t[t.BarEqualsToken=69]="BarEqualsToken",t[t.CaretEqualsToken=70]="CaretEqualsToken",t[t.Identifier=71]="Identifier",t[t.BreakKeyword=72]="BreakKeyword",t[t.CaseKeyword=73]="CaseKeyword",t[t.CatchKeyword=74]="CatchKeyword",t[t.ClassKeyword=75]="ClassKeyword",t[t.ConstKeyword=76]="ConstKeyword",t[t.ContinueKeyword=77]="ContinueKeyword",t[t.DebuggerKeyword=78]="DebuggerKeyword",t[t.DefaultKeyword=79]="DefaultKeyword",t[t.DeleteKeyword=80]="DeleteKeyword",t[t.DoKeyword=81]="DoKeyword",t[t.ElseKeyword=82]="ElseKeyword",t[t.EnumKeyword=83]="EnumKeyword",t[t.ExportKeyword=84]="ExportKeyword",t[t.ExtendsKeyword=85]="ExtendsKeyword",t[t.FalseKeyword=86]="FalseKeyword",t[t.FinallyKeyword=87]="FinallyKeyword",t[t.ForKeyword=88]="ForKeyword",t[t.FunctionKeyword=89]="FunctionKeyword",t[t.IfKeyword=90]="IfKeyword",t[t.ImportKeyword=91]="ImportKeyword",t[t.InKeyword=92]="InKeyword",t[t.InstanceOfKeyword=93]="InstanceOfKeyword",t[t.NewKeyword=94]="NewKeyword",t[t.NullKeyword=95]="NullKeyword",t[t.ReturnKeyword=96]="ReturnKeyword",t[t.SuperKeyword=97]="SuperKeyword",t[t.SwitchKeyword=98]="SwitchKeyword",t[t.ThisKeyword=99]="ThisKeyword",t[t.ThrowKeyword=100]="ThrowKeyword",t[t.TrueKeyword=101]="TrueKeyword",t[t.TryKeyword=102]="TryKeyword",t[t.TypeOfKeyword=103]="TypeOfKeyword",t[t.VarKeyword=104]="VarKeyword",t[t.VoidKeyword=105]="VoidKeyword",t[t.WhileKeyword=106]="WhileKeyword",t[t.WithKeyword=107]="WithKeyword",t[t.ImplementsKeyword=108]="ImplementsKeyword",t[t.InterfaceKeyword=109]="InterfaceKeyword",t[t.LetKeyword=110]="LetKeyword",t[t.PackageKeyword=111]="PackageKeyword",t[t.PrivateKeyword=112]="PrivateKeyword",t[t.ProtectedKeyword=113]="ProtectedKeyword",t[t.PublicKeyword=114]="PublicKeyword",t[t.StaticKeyword=115]="StaticKeyword",t[t.YieldKeyword=116]="YieldKeyword",t[t.AbstractKeyword=117]="AbstractKeyword",t[t.AsKeyword=118]="AsKeyword",t[t.AnyKeyword=119]="AnyKeyword",t[t.AsyncKeyword=120]="AsyncKeyword",t[t.AwaitKeyword=121]="AwaitKeyword",t[t.BooleanKeyword=122]="BooleanKeyword",t[t.ConstructorKeyword=123]="ConstructorKeyword",t[t.DeclareKeyword=124]="DeclareKeyword",t[t.GetKeyword=125]="GetKeyword",t[t.IsKeyword=126]="IsKeyword",t[t.KeyOfKeyword=127]="KeyOfKeyword",t[t.ModuleKeyword=128]="ModuleKeyword",t[t.NamespaceKeyword=129]="NamespaceKeyword",t[t.NeverKeyword=130]="NeverKeyword",t[t.ReadonlyKeyword=131]="ReadonlyKeyword",t[t.RequireKeyword=132]="RequireKeyword",t[t.NumberKeyword=133]="NumberKeyword",t[t.ObjectKeyword=134]="ObjectKeyword",t[t.SetKeyword=135]="SetKeyword",t[t.StringKeyword=136]="StringKeyword",t[t.SymbolKeyword=137]="SymbolKeyword",t[t.TypeKeyword=138]="TypeKeyword",t[t.UndefinedKeyword=139]="UndefinedKeyword",t[t.FromKeyword=140]="FromKeyword",t[t.GlobalKeyword=141]="GlobalKeyword",t[t.OfKeyword=142]="OfKeyword",t[t.QualifiedName=143]="QualifiedName",t[t.ComputedPropertyName=144]="ComputedPropertyName",t[t.TypeParameter=145]="TypeParameter",t[t.Parameter=146]="Parameter",t[t.Decorator=147]="Decorator",t[t.PropertySignature=148]="PropertySignature",t[t.PropertyDeclaration=149]="PropertyDeclaration",t[t.MethodSignature=150]="MethodSignature",t[t.MethodDeclaration=151]="MethodDeclaration",t[t.Constructor=152]="Constructor",t[t.GetAccessor=153]="GetAccessor",t[t.SetAccessor=154]="SetAccessor",t[t.CallSignature=155]="CallSignature",t[t.ConstructSignature=156]="ConstructSignature",t[t.IndexSignature=157]="IndexSignature",t[t.TypePredicate=158]="TypePredicate",t[t.TypeReference=159]="TypeReference",t[t.FunctionType=160]="FunctionType",t[t.ConstructorType=161]="ConstructorType",t[t.TypeQuery=162]="TypeQuery",t[t.TypeLiteral=163]="TypeLiteral",t[t.ArrayType=164]="ArrayType",t[t.TupleType=165]="TupleType",t[t.UnionType=166]="UnionType",t[t.IntersectionType=167]="IntersectionType",t[t.ParenthesizedType=168]="ParenthesizedType",t[t.ThisType=169]="ThisType",t[t.TypeOperator=170]="TypeOperator",t[t.IndexedAccessType=171]="IndexedAccessType",t[t.MappedType=172]="MappedType",t[t.LiteralType=173]="LiteralType",t[t.ObjectBindingPattern=174]="ObjectBindingPattern",t[t.ArrayBindingPattern=175]="ArrayBindingPattern",t[t.BindingElement=176]="BindingElement",t[t.ArrayLiteralExpression=177]="ArrayLiteralExpression",t[t.ObjectLiteralExpression=178]="ObjectLiteralExpression",t[t.PropertyAccessExpression=179]="PropertyAccessExpression",t[t.ElementAccessExpression=180]="ElementAccessExpression",t[t.CallExpression=181]="CallExpression",t[t.NewExpression=182]="NewExpression",t[t.TaggedTemplateExpression=183]="TaggedTemplateExpression",t[t.TypeAssertionExpression=184]="TypeAssertionExpression",t[t.ParenthesizedExpression=185]="ParenthesizedExpression",t[t.FunctionExpression=186]="FunctionExpression",t[t.ArrowFunction=187]="ArrowFunction",t[t.DeleteExpression=188]="DeleteExpression",t[t.TypeOfExpression=189]="TypeOfExpression",t[t.VoidExpression=190]="VoidExpression",t[t.AwaitExpression=191]="AwaitExpression",t[t.PrefixUnaryExpression=192]="PrefixUnaryExpression",t[t.PostfixUnaryExpression=193]="PostfixUnaryExpression",t[t.BinaryExpression=194]="BinaryExpression",t[t.ConditionalExpression=195]="ConditionalExpression",t[t.TemplateExpression=196]="TemplateExpression",t[t.YieldExpression=197]="YieldExpression",t[t.SpreadElement=198]="SpreadElement",t[t.ClassExpression=199]="ClassExpression",t[t.OmittedExpression=200]="OmittedExpression",t[t.ExpressionWithTypeArguments=201]="ExpressionWithTypeArguments",t[t.AsExpression=202]="AsExpression",t[t.NonNullExpression=203]="NonNullExpression",t[t.MetaProperty=204]="MetaProperty",t[t.TemplateSpan=205]="TemplateSpan",t[t.SemicolonClassElement=206]="SemicolonClassElement",t[t.Block=207]="Block",t[t.VariableStatement=208]="VariableStatement",t[t.EmptyStatement=209]="EmptyStatement",t[t.ExpressionStatement=210]="ExpressionStatement",t[t.IfStatement=211]="IfStatement",t[t.DoStatement=212]="DoStatement",t[t.WhileStatement=213]="WhileStatement",t[t.ForStatement=214]="ForStatement",t[t.ForInStatement=215]="ForInStatement",t[t.ForOfStatement=216]="ForOfStatement",t[t.ContinueStatement=217]="ContinueStatement",t[t.BreakStatement=218]="BreakStatement",t[t.ReturnStatement=219]="ReturnStatement",t[t.WithStatement=220]="WithStatement",t[t.SwitchStatement=221]="SwitchStatement",t[t.LabeledStatement=222]="LabeledStatement",t[t.ThrowStatement=223]="ThrowStatement",t[t.TryStatement=224]="TryStatement",t[t.DebuggerStatement=225]="DebuggerStatement",t[t.VariableDeclaration=226]="VariableDeclaration",t[t.VariableDeclarationList=227]="VariableDeclarationList",t[t.FunctionDeclaration=228]="FunctionDeclaration",t[t.ClassDeclaration=229]="ClassDeclaration",t[t.InterfaceDeclaration=230]="InterfaceDeclaration",t[t.TypeAliasDeclaration=231]="TypeAliasDeclaration",t[t.EnumDeclaration=232]="EnumDeclaration",t[t.ModuleDeclaration=233]="ModuleDeclaration",t[t.ModuleBlock=234]="ModuleBlock",t[t.CaseBlock=235]="CaseBlock",t[t.NamespaceExportDeclaration=236]="NamespaceExportDeclaration",t[t.ImportEqualsDeclaration=237]="ImportEqualsDeclaration",t[t.ImportDeclaration=238]="ImportDeclaration",t[t.ImportClause=239]="ImportClause",t[t.NamespaceImport=240]="NamespaceImport",t[t.NamedImports=241]="NamedImports",t[t.ImportSpecifier=242]="ImportSpecifier",t[t.ExportAssignment=243]="ExportAssignment",t[t.ExportDeclaration=244]="ExportDeclaration",t[t.NamedExports=245]="NamedExports",t[t.ExportSpecifier=246]="ExportSpecifier",t[t.MissingDeclaration=247]="MissingDeclaration",t[t.ExternalModuleReference=248]="ExternalModuleReference",t[t.JsxElement=249]="JsxElement",t[t.JsxSelfClosingElement=250]="JsxSelfClosingElement",t[t.JsxOpeningElement=251]="JsxOpeningElement",t[t.JsxClosingElement=252]="JsxClosingElement",t[t.JsxAttribute=253]="JsxAttribute",t[t.JsxAttributes=254]="JsxAttributes",t[t.JsxSpreadAttribute=255]="JsxSpreadAttribute",t[t.JsxExpression=256]="JsxExpression",t[t.CaseClause=257]="CaseClause",t[t.DefaultClause=258]="DefaultClause",t[t.HeritageClause=259]="HeritageClause",t[t.CatchClause=260]="CatchClause",t[t.PropertyAssignment=261]="PropertyAssignment",t[t.ShorthandPropertyAssignment=262]="ShorthandPropertyAssignment",t[t.SpreadAssignment=263]="SpreadAssignment",t[t.EnumMember=264]="EnumMember",t[t.SourceFile=265]="SourceFile",t[t.Bundle=266]="Bundle",t[t.JSDocTypeExpression=267]="JSDocTypeExpression",t[t.JSDocAllType=268]="JSDocAllType",t[t.JSDocUnknownType=269]="JSDocUnknownType",t[t.JSDocNullableType=270]="JSDocNullableType",t[t.JSDocNonNullableType=271]="JSDocNonNullableType",t[t.JSDocOptionalType=272]="JSDocOptionalType",t[t.JSDocFunctionType=273]="JSDocFunctionType",t[t.JSDocVariadicType=274]="JSDocVariadicType",t[t.JSDocComment=275]="JSDocComment",t[t.JSDocTag=276]="JSDocTag",t[t.JSDocAugmentsTag=277]="JSDocAugmentsTag",t[t.JSDocClassTag=278]="JSDocClassTag",t[t.JSDocParameterTag=279]="JSDocParameterTag",t[t.JSDocReturnTag=280]="JSDocReturnTag",t[t.JSDocTypeTag=281]="JSDocTypeTag",t[t.JSDocTemplateTag=282]="JSDocTemplateTag",t[t.JSDocTypedefTag=283]="JSDocTypedefTag",t[t.JSDocPropertyTag=284]="JSDocPropertyTag",t[t.JSDocTypeLiteral=285]="JSDocTypeLiteral",t[t.SyntaxList=286]="SyntaxList",t[t.NotEmittedStatement=287]="NotEmittedStatement",t[t.PartiallyEmittedExpression=288]="PartiallyEmittedExpression",t[t.CommaListExpression=289]="CommaListExpression",t[t.MergeDeclarationMarker=290]="MergeDeclarationMarker",t[t.EndOfDeclarationMarker=291]="EndOfDeclarationMarker",t[t.Count=292]="Count",t[t.FirstAssignment=58]="FirstAssignment",t[t.LastAssignment=70]="LastAssignment",t[t.FirstCompoundAssignment=59]="FirstCompoundAssignment",t[t.LastCompoundAssignment=70]="LastCompoundAssignment",t[t.FirstReservedWord=72]="FirstReservedWord",t[t.LastReservedWord=107]="LastReservedWord",t[t.FirstKeyword=72]="FirstKeyword",t[t.LastKeyword=142]="LastKeyword",t[t.FirstFutureReservedWord=108]="FirstFutureReservedWord",t[t.LastFutureReservedWord=116]="LastFutureReservedWord",t[t.FirstTypeNode=158]="FirstTypeNode",t[t.LastTypeNode=173]="LastTypeNode",t[t.FirstPunctuation=17]="FirstPunctuation",t[t.LastPunctuation=70]="LastPunctuation",t[t.FirstToken=0]="FirstToken",t[t.LastToken=142]="LastToken",t[t.FirstTriviaToken=2]="FirstTriviaToken",t[t.LastTriviaToken=7]="LastTriviaToken",t[t.FirstLiteralToken=8]="FirstLiteralToken",t[t.LastLiteralToken=13]="LastLiteralToken",t[t.FirstTemplateToken=13]="FirstTemplateToken",t[t.LastTemplateToken=16]="LastTemplateToken",t[t.FirstBinaryOperator=27]="FirstBinaryOperator",t[t.LastBinaryOperator=70]="LastBinaryOperator",t[t.FirstNode=143]="FirstNode",t[t.FirstJSDocNode=267]="FirstJSDocNode",t[t.LastJSDocNode=285]="LastJSDocNode",t[t.FirstJSDocTagNode=276]="FirstJSDocTagNode",t[t.LastJSDocTagNode=285]="LastJSDocTagNode",(t=e.NodeFlags||(e.NodeFlags={}))[t.None=0]="None",t[t.Let=1]="Let",t[t.Const=2]="Const",t[t.NestedNamespace=4]="NestedNamespace",t[t.Synthesized=8]="Synthesized",t[t.Namespace=16]="Namespace",t[t.ExportContext=32]="ExportContext",t[t.ContainsThis=64]="ContainsThis",t[t.HasImplicitReturn=128]="HasImplicitReturn",t[t.HasExplicitReturn=256]="HasExplicitReturn",t[t.GlobalAugmentation=512]="GlobalAugmentation",t[t.HasAsyncFunctions=1024]="HasAsyncFunctions",t[t.DisallowInContext=2048]="DisallowInContext",t[t.YieldContext=4096]="YieldContext",t[t.DecoratorContext=8192]="DecoratorContext",t[t.AwaitContext=16384]="AwaitContext",t[t.ThisNodeHasError=32768]="ThisNodeHasError",t[t.JavaScriptFile=65536]="JavaScriptFile",t[t.ThisNodeOrAnySubNodesHasError=131072]="ThisNodeOrAnySubNodesHasError",t[t.HasAggregatedChildData=262144]="HasAggregatedChildData",t[t.PossiblyContainsDynamicImport=524288]="PossiblyContainsDynamicImport",t[t.JSDoc=1048576]="JSDoc",t[t.BlockScoped=3]="BlockScoped",t[t.ReachabilityCheckFlags=384]="ReachabilityCheckFlags",t[t.ReachabilityAndEmitFlags=1408]="ReachabilityAndEmitFlags",t[t.ContextFlags=96256]="ContextFlags",t[t.TypeExcludesFlags=20480]="TypeExcludesFlags",(t=e.ModifierFlags||(e.ModifierFlags={}))[t.None=0]="None",t[t.Export=1]="Export",t[t.Ambient=2]="Ambient",t[t.Public=4]="Public",t[t.Private=8]="Private",t[t.Protected=16]="Protected",t[t.Static=32]="Static",t[t.Readonly=64]="Readonly",t[t.Abstract=128]="Abstract",t[t.Async=256]="Async",t[t.Default=512]="Default",t[t.Const=2048]="Const",t[t.HasComputedFlags=536870912]="HasComputedFlags",t[t.AccessibilityModifier=28]="AccessibilityModifier",t[t.ParameterPropertyModifier=92]="ParameterPropertyModifier",t[t.NonPublicAccessibilityModifier=24]="NonPublicAccessibilityModifier",t[t.TypeScriptModifier=2270]="TypeScriptModifier",t[t.ExportDefault=513]="ExportDefault",(t=e.JsxFlags||(e.JsxFlags={}))[t.None=0]="None",t[t.IntrinsicNamedElement=1]="IntrinsicNamedElement",t[t.IntrinsicIndexedElement=2]="IntrinsicIndexedElement",t[t.IntrinsicElement=3]="IntrinsicElement",(t=e.RelationComparisonResult||(e.RelationComparisonResult={}))[t.Succeeded=1]="Succeeded",t[t.Failed=2]="Failed",t[t.FailedAndReported=3]="FailedAndReported",(t=e.GeneratedIdentifierKind||(e.GeneratedIdentifierKind={}))[t.None=0]="None",t[t.Auto=1]="Auto",t[t.Loop=2]="Loop",t[t.Unique=3]="Unique",t[t.Node=4]="Node",(t=e.NumericLiteralFlags||(e.NumericLiteralFlags={}))[t.None=0]="None",t[t.Scientific=2]="Scientific",t[t.Octal=4]="Octal",t[t.HexSpecifier=8]="HexSpecifier",t[t.BinarySpecifier=16]="BinarySpecifier",t[t.OctalSpecifier=32]="OctalSpecifier",t[t.BinaryOrOctalSpecifier=48]="BinaryOrOctalSpecifier",(t=e.FlowFlags||(e.FlowFlags={}))[t.Unreachable=1]="Unreachable",t[t.Start=2]="Start",t[t.BranchLabel=4]="BranchLabel",t[t.LoopLabel=8]="LoopLabel",t[t.Assignment=16]="Assignment",t[t.TrueCondition=32]="TrueCondition",t[t.FalseCondition=64]="FalseCondition",t[t.SwitchClause=128]="SwitchClause",t[t.ArrayMutation=256]="ArrayMutation",t[t.Referenced=512]="Referenced",t[t.Shared=1024]="Shared",t[t.PreFinally=2048]="PreFinally",t[t.AfterFinally=4096]="AfterFinally",t[t.Label=12]="Label",t[t.Condition=96]="Condition";e.OperationCanceledException=function(){},(t=e.StructureIsReused||(e.StructureIsReused={}))[t.Not=0]="Not",t[t.SafeModules=1]="SafeModules",t[t.Completely=2]="Completely",(t=e.ExitStatus||(e.ExitStatus={}))[t.Success=0]="Success",t[t.DiagnosticsPresent_OutputsSkipped=1]="DiagnosticsPresent_OutputsSkipped",t[t.DiagnosticsPresent_OutputsGenerated=2]="DiagnosticsPresent_OutputsGenerated",(t=e.NodeBuilderFlags||(e.NodeBuilderFlags={}))[t.None=0]="None",t[t.NoTruncation=1]="NoTruncation",t[t.WriteArrayAsGenericType=2]="WriteArrayAsGenericType",t[t.WriteTypeArgumentsOfSignature=32]="WriteTypeArgumentsOfSignature",t[t.UseFullyQualifiedType=64]="UseFullyQualifiedType",t[t.SuppressAnyReturnType=256]="SuppressAnyReturnType",t[t.WriteTypeParametersInQualifiedName=512]="WriteTypeParametersInQualifiedName",t[t.AllowThisInObjectLiteral=1024]="AllowThisInObjectLiteral",t[t.AllowQualifedNameInPlaceOfIdentifier=2048]="AllowQualifedNameInPlaceOfIdentifier",t[t.AllowAnonymousIdentifier=8192]="AllowAnonymousIdentifier",t[t.AllowEmptyUnionOrIntersection=16384]="AllowEmptyUnionOrIntersection",t[t.AllowEmptyTuple=32768]="AllowEmptyTuple",t[t.IgnoreErrors=60416]="IgnoreErrors",t[t.InObjectTypeLiteral=1048576]="InObjectTypeLiteral",t[t.InTypeAlias=8388608]="InTypeAlias",(t=e.TypeFormatFlags||(e.TypeFormatFlags={}))[t.None=0]="None",t[t.WriteArrayAsGenericType=1]="WriteArrayAsGenericType",t[t.UseTypeOfFunction=4]="UseTypeOfFunction",t[t.NoTruncation=8]="NoTruncation",t[t.WriteArrowStyleSignature=16]="WriteArrowStyleSignature",t[t.WriteOwnNameForAnyLike=32]="WriteOwnNameForAnyLike",t[t.WriteTypeArgumentsOfSignature=64]="WriteTypeArgumentsOfSignature",t[t.InElementType=128]="InElementType",t[t.UseFullyQualifiedType=256]="UseFullyQualifiedType",t[t.InFirstTypeArgument=512]="InFirstTypeArgument",t[t.InTypeAlias=1024]="InTypeAlias",t[t.SuppressAnyReturnType=4096]="SuppressAnyReturnType",t[t.AddUndefined=8192]="AddUndefined",t[t.WriteClassExpressionAsTypeLiteral=16384]="WriteClassExpressionAsTypeLiteral",t[t.InArrayType=32768]="InArrayType",t[t.UseAliasDefinedOutsideCurrentScope=65536]="UseAliasDefinedOutsideCurrentScope",(t=e.SymbolFormatFlags||(e.SymbolFormatFlags={}))[t.None=0]="None",t[t.WriteTypeParametersOrArguments=1]="WriteTypeParametersOrArguments",t[t.UseOnlyExternalAliasing=2]="UseOnlyExternalAliasing",(t=e.SymbolAccessibility||(e.SymbolAccessibility={}))[t.Accessible=0]="Accessible",t[t.NotAccessible=1]="NotAccessible",t[t.CannotBeNamed=2]="CannotBeNamed",(t=e.SyntheticSymbolKind||(e.SyntheticSymbolKind={}))[t.UnionOrIntersection=0]="UnionOrIntersection",t[t.Spread=1]="Spread",(t=e.TypePredicateKind||(e.TypePredicateKind={}))[t.This=0]="This",t[t.Identifier=1]="Identifier",(t=e.TypeReferenceSerializationKind||(e.TypeReferenceSerializationKind={}))[t.Unknown=0]="Unknown",t[t.TypeWithConstructSignatureAndValue=1]="TypeWithConstructSignatureAndValue",t[t.VoidNullableOrNeverType=2]="VoidNullableOrNeverType",t[t.NumberLikeType=3]="NumberLikeType",t[t.StringLikeType=4]="StringLikeType",t[t.BooleanType=5]="BooleanType",t[t.ArrayLikeType=6]="ArrayLikeType",t[t.ESSymbolType=7]="ESSymbolType",t[t.Promise=8]="Promise",t[t.TypeWithCallSignature=9]="TypeWithCallSignature",t[t.ObjectType=10]="ObjectType",(t=e.SymbolFlags||(e.SymbolFlags={}))[t.None=0]="None",t[t.FunctionScopedVariable=1]="FunctionScopedVariable",t[t.BlockScopedVariable=2]="BlockScopedVariable",t[t.Property=4]="Property",t[t.EnumMember=8]="EnumMember",t[t.Function=16]="Function",t[t.Class=32]="Class",t[t.Interface=64]="Interface",t[t.ConstEnum=128]="ConstEnum",t[t.RegularEnum=256]="RegularEnum",t[t.ValueModule=512]="ValueModule",t[t.NamespaceModule=1024]="NamespaceModule",t[t.TypeLiteral=2048]="TypeLiteral",t[t.ObjectLiteral=4096]="ObjectLiteral",t[t.Method=8192]="Method",t[t.Constructor=16384]="Constructor",t[t.GetAccessor=32768]="GetAccessor",t[t.SetAccessor=65536]="SetAccessor",t[t.Signature=131072]="Signature",t[t.TypeParameter=262144]="TypeParameter",t[t.TypeAlias=524288]="TypeAlias",t[t.ExportValue=1048576]="ExportValue",t[t.Alias=2097152]="Alias",t[t.Prototype=4194304]="Prototype",t[t.ExportStar=8388608]="ExportStar",t[t.Optional=16777216]="Optional",t[t.Transient=33554432]="Transient",t[t.Enum=384]="Enum",t[t.Variable=3]="Variable",t[t.Value=107455]="Value",t[t.Type=793064]="Type",t[t.Namespace=1920]="Namespace",t[t.Module=1536]="Module",t[t.Accessor=98304]="Accessor",t[t.FunctionScopedVariableExcludes=107454]="FunctionScopedVariableExcludes",t[t.BlockScopedVariableExcludes=107455]="BlockScopedVariableExcludes",t[t.ParameterExcludes=107455]="ParameterExcludes",t[t.PropertyExcludes=0]="PropertyExcludes",t[t.EnumMemberExcludes=900095]="EnumMemberExcludes",t[t.FunctionExcludes=106927]="FunctionExcludes",t[t.ClassExcludes=899519]="ClassExcludes",t[t.InterfaceExcludes=792968]="InterfaceExcludes",t[t.RegularEnumExcludes=899327]="RegularEnumExcludes",t[t.ConstEnumExcludes=899967]="ConstEnumExcludes",t[t.ValueModuleExcludes=106639]="ValueModuleExcludes",t[t.NamespaceModuleExcludes=0]="NamespaceModuleExcludes",t[t.MethodExcludes=99263]="MethodExcludes",t[t.GetAccessorExcludes=41919]="GetAccessorExcludes",t[t.SetAccessorExcludes=74687]="SetAccessorExcludes",t[t.TypeParameterExcludes=530920]="TypeParameterExcludes",t[t.TypeAliasExcludes=793064]="TypeAliasExcludes",t[t.AliasExcludes=2097152]="AliasExcludes",t[t.ModuleMember=2623475]="ModuleMember",t[t.ExportHasLocal=944]="ExportHasLocal",t[t.HasExports=1952]="HasExports",t[t.HasMembers=6240]="HasMembers",t[t.BlockScoped=418]="BlockScoped",t[t.PropertyOrAccessor=98308]="PropertyOrAccessor",t[t.ClassMember=106500]="ClassMember",t[t.Classifiable=788448]="Classifiable",(t=e.EnumKind||(e.EnumKind={}))[t.Numeric=0]="Numeric",t[t.Literal=1]="Literal",(t=e.CheckFlags||(e.CheckFlags={}))[t.Instantiated=1]="Instantiated",t[t.SyntheticProperty=2]="SyntheticProperty",t[t.SyntheticMethod=4]="SyntheticMethod",t[t.Readonly=8]="Readonly",t[t.Partial=16]="Partial",t[t.HasNonUniformType=32]="HasNonUniformType",t[t.ContainsPublic=64]="ContainsPublic",t[t.ContainsProtected=128]="ContainsProtected",t[t.ContainsPrivate=256]="ContainsPrivate",t[t.ContainsStatic=512]="ContainsStatic",t[t.Synthetic=6]="Synthetic",(t=e.InternalSymbolName||(e.InternalSymbolName={})).Call="__call",t.Constructor="__constructor",t.New="__new",t.Index="__index",t.ExportStar="__export",t.Global="__global",t.Missing="__missing",t.Type="__type",t.Object="__object",t.JSXAttributes="__jsxAttributes",t.Class="__class",t.Function="__function",t.Computed="__computed",t.Resolving="__resolving__",t.ExportEquals="export=",t.Default="default",(t=e.NodeCheckFlags||(e.NodeCheckFlags={}))[t.TypeChecked=1]="TypeChecked",t[t.LexicalThis=2]="LexicalThis",t[t.CaptureThis=4]="CaptureThis",t[t.CaptureNewTarget=8]="CaptureNewTarget",t[t.SuperInstance=256]="SuperInstance",t[t.SuperStatic=512]="SuperStatic",t[t.ContextChecked=1024]="ContextChecked",t[t.AsyncMethodWithSuper=2048]="AsyncMethodWithSuper",t[t.AsyncMethodWithSuperBinding=4096]="AsyncMethodWithSuperBinding",t[t.CaptureArguments=8192]="CaptureArguments",t[t.EnumValuesComputed=16384]="EnumValuesComputed",t[t.LexicalModuleMergesWithClass=32768]="LexicalModuleMergesWithClass",t[t.LoopWithCapturedBlockScopedBinding=65536]="LoopWithCapturedBlockScopedBinding",t[t.CapturedBlockScopedBinding=131072]="CapturedBlockScopedBinding",t[t.BlockScopedBindingInLoop=262144]="BlockScopedBindingInLoop",t[t.ClassWithBodyScopedClassBinding=524288]="ClassWithBodyScopedClassBinding",t[t.BodyScopedClassBinding=1048576]="BodyScopedClassBinding",t[t.NeedsLoopOutParameter=2097152]="NeedsLoopOutParameter",t[t.AssignmentsMarked=4194304]="AssignmentsMarked",t[t.ClassWithConstructorReference=8388608]="ClassWithConstructorReference",t[t.ConstructorReferenceInClass=16777216]="ConstructorReferenceInClass",(t=e.TypeFlags||(e.TypeFlags={}))[t.Any=1]="Any",t[t.String=2]="String",t[t.Number=4]="Number",t[t.Boolean=8]="Boolean",t[t.Enum=16]="Enum",t[t.StringLiteral=32]="StringLiteral",t[t.NumberLiteral=64]="NumberLiteral",t[t.BooleanLiteral=128]="BooleanLiteral",t[t.EnumLiteral=256]="EnumLiteral",t[t.ESSymbol=512]="ESSymbol",t[t.Void=1024]="Void",t[t.Undefined=2048]="Undefined",t[t.Null=4096]="Null",t[t.Never=8192]="Never",t[t.TypeParameter=16384]="TypeParameter",t[t.Object=32768]="Object",t[t.Union=65536]="Union",t[t.Intersection=131072]="Intersection",t[t.Index=262144]="Index",t[t.IndexedAccess=524288]="IndexedAccess",t[t.FreshLiteral=1048576]="FreshLiteral",t[t.ContainsWideningType=2097152]="ContainsWideningType",t[t.ContainsObjectLiteral=4194304]="ContainsObjectLiteral",t[t.ContainsAnyFunctionType=8388608]="ContainsAnyFunctionType",t[t.NonPrimitive=16777216]="NonPrimitive",t[t.JsxAttributes=33554432]="JsxAttributes",t[t.MarkerType=67108864]="MarkerType",t[t.Nullable=6144]="Nullable",t[t.Literal=224]="Literal",t[t.Unit=6368]="Unit",t[t.StringOrNumberLiteral=96]="StringOrNumberLiteral",t[t.DefinitelyFalsy=7392]="DefinitelyFalsy",t[t.PossiblyFalsy=7406]="PossiblyFalsy",t[t.Intrinsic=16793231]="Intrinsic",t[t.Primitive=8190]="Primitive",t[t.StringLike=262178]="StringLike",t[t.NumberLike=84]="NumberLike",t[t.BooleanLike=136]="BooleanLike",t[t.EnumLike=272]="EnumLike",t[t.UnionOrIntersection=196608]="UnionOrIntersection",t[t.StructuredType=229376]="StructuredType",t[t.StructuredOrTypeVariable=1032192]="StructuredOrTypeVariable",t[t.TypeVariable=540672]="TypeVariable",t[t.Narrowable=17810175]="Narrowable",t[t.NotUnionOrUnit=16810497]="NotUnionOrUnit",t[t.RequiresWidening=6291456]="RequiresWidening",t[t.PropagatingFlags=14680064]="PropagatingFlags",(t=e.ObjectFlags||(e.ObjectFlags={}))[t.Class=1]="Class",t[t.Interface=2]="Interface",t[t.Reference=4]="Reference",t[t.Tuple=8]="Tuple",t[t.Anonymous=16]="Anonymous",t[t.Mapped=32]="Mapped",t[t.Instantiated=64]="Instantiated",t[t.ObjectLiteral=128]="ObjectLiteral",t[t.EvolvingArray=256]="EvolvingArray",t[t.ObjectLiteralPatternWithComputedProperties=512]="ObjectLiteralPatternWithComputedProperties",t[t.ClassOrInterface=3]="ClassOrInterface",(t=e.Variance||(e.Variance={}))[t.Invariant=0]="Invariant",t[t.Covariant=1]="Covariant",t[t.Contravariant=2]="Contravariant",t[t.Bivariant=3]="Bivariant",t[t.Independent=4]="Independent",(t=e.SignatureKind||(e.SignatureKind={}))[t.Call=0]="Call",t[t.Construct=1]="Construct",(t=e.IndexKind||(e.IndexKind={}))[t.String=0]="String",t[t.Number=1]="Number",(t=e.InferencePriority||(e.InferencePriority={}))[t.Contravariant=1]="Contravariant",t[t.NakedTypeVariable=2]="NakedTypeVariable",t[t.MappedType=4]="MappedType",t[t.ReturnType=8]="ReturnType",(t=e.InferenceFlags||(e.InferenceFlags={}))[t.InferUnionTypes=1]="InferUnionTypes",t[t.NoDefault=2]="NoDefault",t[t.AnyDefault=4]="AnyDefault",(t=e.Ternary||(e.Ternary={}))[t.False=0]="False",t[t.Maybe=1]="Maybe",t[t.True=-1]="True",(t=e.SpecialPropertyAssignmentKind||(e.SpecialPropertyAssignmentKind={}))[t.None=0]="None",t[t.ExportsProperty=1]="ExportsProperty",t[t.ModuleExports=2]="ModuleExports",t[t.PrototypeProperty=3]="PrototypeProperty",t[t.ThisProperty=4]="ThisProperty",t[t.Property=5]="Property",(t=e.DiagnosticCategory||(e.DiagnosticCategory={}))[t.Warning=0]="Warning",t[t.Error=1]="Error",t[t.Message=2]="Message",(t=e.ModuleResolutionKind||(e.ModuleResolutionKind={}))[t.Classic=1]="Classic",t[t.NodeJs=2]="NodeJs",(t=e.ModuleKind||(e.ModuleKind={}))[t.None=0]="None",t[t.CommonJS=1]="CommonJS",t[t.AMD=2]="AMD",t[t.UMD=3]="UMD",t[t.System=4]="System",t[t.ES2015=5]="ES2015",t[t.ESNext=6]="ESNext",(t=e.JsxEmit||(e.JsxEmit={}))[t.None=0]="None",t[t.Preserve=1]="Preserve",t[t.React=2]="React",t[t.ReactNative=3]="ReactNative",(t=e.NewLineKind||(e.NewLineKind={}))[t.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",t[t.LineFeed=1]="LineFeed",(t=e.ScriptKind||(e.ScriptKind={}))[t.Unknown=0]="Unknown",t[t.JS=1]="JS",t[t.JSX=2]="JSX",t[t.TS=3]="TS",t[t.TSX=4]="TSX",t[t.External=5]="External",t[t.JSON=6]="JSON",(t=e.ScriptTarget||(e.ScriptTarget={}))[t.ES3=0]="ES3",t[t.ES5=1]="ES5",t[t.ES2015=2]="ES2015",t[t.ES2016=3]="ES2016",t[t.ES2017=4]="ES2017",t[t.ESNext=5]="ESNext",t[t.Latest=5]="Latest",(t=e.LanguageVariant||(e.LanguageVariant={}))[t.Standard=0]="Standard",t[t.JSX=1]="JSX",(t=e.DiagnosticStyle||(e.DiagnosticStyle={}))[t.Simple=0]="Simple",t[t.Pretty=1]="Pretty",(t=e.WatchDirectoryFlags||(e.WatchDirectoryFlags={}))[t.None=0]="None",t[t.Recursive=1]="Recursive",(t=e.CharacterCodes||(e.CharacterCodes={}))[t.nullCharacter=0]="nullCharacter",t[t.maxAsciiCharacter=127]="maxAsciiCharacter",t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.lineSeparator=8232]="lineSeparator",t[t.paragraphSeparator=8233]="paragraphSeparator",t[t.nextLine=133]="nextLine",t[t.space=32]="space",t[t.nonBreakingSpace=160]="nonBreakingSpace",t[t.enQuad=8192]="enQuad",t[t.emQuad=8193]="emQuad",t[t.enSpace=8194]="enSpace",t[t.emSpace=8195]="emSpace",t[t.threePerEmSpace=8196]="threePerEmSpace",t[t.fourPerEmSpace=8197]="fourPerEmSpace",t[t.sixPerEmSpace=8198]="sixPerEmSpace",t[t.figureSpace=8199]="figureSpace",t[t.punctuationSpace=8200]="punctuationSpace",t[t.thinSpace=8201]="thinSpace",t[t.hairSpace=8202]="hairSpace",t[t.zeroWidthSpace=8203]="zeroWidthSpace",t[t.narrowNoBreakSpace=8239]="narrowNoBreakSpace",t[t.ideographicSpace=12288]="ideographicSpace",t[t.mathematicalSpace=8287]="mathematicalSpace",t[t.ogham=5760]="ogham",t[t._=95]="_",t[t.$=36]="$",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.ampersand=38]="ampersand",t[t.asterisk=42]="asterisk",t[t.at=64]="at",t[t.backslash=92]="backslash",t[t.backtick=96]="backtick",t[t.bar=124]="bar",t[t.caret=94]="caret",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.closeParen=41]="closeParen",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.equals=61]="equals",t[t.exclamation=33]="exclamation",t[t.greaterThan=62]="greaterThan",t[t.hash=35]="hash",t[t.lessThan=60]="lessThan",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.openParen=40]="openParen",t[t.percent=37]="percent",t[t.plus=43]="plus",t[t.question=63]="question",t[t.semicolon=59]="semicolon",t[t.singleQuote=39]="singleQuote",t[t.slash=47]="slash",t[t.tilde=126]="tilde",t[t.backspace=8]="backspace",t[t.formFeed=12]="formFeed",t[t.byteOrderMark=65279]="byteOrderMark",t[t.tab=9]="tab",t[t.verticalTab=11]="verticalTab",(t=e.Extension||(e.Extension={})).Ts=".ts",t.Tsx=".tsx",t.Dts=".d.ts",t.Js=".js",t.Jsx=".jsx",t.Json=".json",(t=e.TransformFlags||(e.TransformFlags={}))[t.None=0]="None",t[t.TypeScript=1]="TypeScript",t[t.ContainsTypeScript=2]="ContainsTypeScript",t[t.ContainsJsx=4]="ContainsJsx",t[t.ContainsESNext=8]="ContainsESNext",t[t.ContainsES2017=16]="ContainsES2017",t[t.ContainsES2016=32]="ContainsES2016",t[t.ES2015=64]="ES2015",t[t.ContainsES2015=128]="ContainsES2015",t[t.Generator=256]="Generator",t[t.ContainsGenerator=512]="ContainsGenerator",t[t.DestructuringAssignment=1024]="DestructuringAssignment",t[t.ContainsDestructuringAssignment=2048]="ContainsDestructuringAssignment",t[t.ContainsDecorators=4096]="ContainsDecorators",t[t.ContainsPropertyInitializer=8192]="ContainsPropertyInitializer",t[t.ContainsLexicalThis=16384]="ContainsLexicalThis",t[t.ContainsCapturedLexicalThis=32768]="ContainsCapturedLexicalThis",t[t.ContainsLexicalThisInComputedPropertyName=65536]="ContainsLexicalThisInComputedPropertyName",t[t.ContainsDefaultValueAssignments=131072]="ContainsDefaultValueAssignments",t[t.ContainsParameterPropertyAssignments=262144]="ContainsParameterPropertyAssignments",t[t.ContainsSpread=524288]="ContainsSpread",t[t.ContainsObjectSpread=1048576]="ContainsObjectSpread",t[t.ContainsRest=524288]="ContainsRest",t[t.ContainsObjectRest=1048576]="ContainsObjectRest",t[t.ContainsComputedPropertyName=2097152]="ContainsComputedPropertyName",t[t.ContainsBlockScopedBinding=4194304]="ContainsBlockScopedBinding",t[t.ContainsBindingPattern=8388608]="ContainsBindingPattern",t[t.ContainsYield=16777216]="ContainsYield",t[t.ContainsHoistedDeclarationOrCompletion=33554432]="ContainsHoistedDeclarationOrCompletion",t[t.ContainsDynamicImport=67108864]="ContainsDynamicImport",t[t.HasComputedFlags=536870912]="HasComputedFlags",t[t.AssertTypeScript=3]="AssertTypeScript",t[t.AssertJsx=4]="AssertJsx",t[t.AssertESNext=8]="AssertESNext",t[t.AssertES2017=16]="AssertES2017",t[t.AssertES2016=32]="AssertES2016",t[t.AssertES2015=192]="AssertES2015",t[t.AssertGenerator=768]="AssertGenerator",t[t.AssertDestructuringAssignment=3072]="AssertDestructuringAssignment",t[t.NodeExcludes=536872257]="NodeExcludes",t[t.ArrowFunctionExcludes=601249089]="ArrowFunctionExcludes",t[t.FunctionExcludes=601281857]="FunctionExcludes",t[t.ConstructorExcludes=601015617]="ConstructorExcludes",t[t.MethodOrAccessorExcludes=601015617]="MethodOrAccessorExcludes",t[t.ClassExcludes=539358529]="ClassExcludes",t[t.ModuleExcludes=574674241]="ModuleExcludes",t[t.TypeExcludes=-3]="TypeExcludes",t[t.ObjectLiteralExcludes=540087617]="ObjectLiteralExcludes",t[t.ArrayLiteralOrCallOrNewExcludes=537396545]="ArrayLiteralOrCallOrNewExcludes",t[t.VariableDeclarationListExcludes=546309441]="VariableDeclarationListExcludes",t[t.ParameterExcludes=536872257]="ParameterExcludes",t[t.CatchClauseExcludes=537920833]="CatchClauseExcludes",t[t.BindingPatternExcludes=537396545]="BindingPatternExcludes",t[t.TypeScriptClassSyntaxMask=274432]="TypeScriptClassSyntaxMask",t[t.ES2015FunctionSyntaxMask=163840]="ES2015FunctionSyntaxMask",(t=e.EmitFlags||(e.EmitFlags={}))[t.SingleLine=1]="SingleLine",t[t.AdviseOnEmitNode=2]="AdviseOnEmitNode",t[t.NoSubstitution=4]="NoSubstitution",t[t.CapturesThis=8]="CapturesThis",t[t.NoLeadingSourceMap=16]="NoLeadingSourceMap",t[t.NoTrailingSourceMap=32]="NoTrailingSourceMap",t[t.NoSourceMap=48]="NoSourceMap",t[t.NoNestedSourceMaps=64]="NoNestedSourceMaps",t[t.NoTokenLeadingSourceMaps=128]="NoTokenLeadingSourceMaps",t[t.NoTokenTrailingSourceMaps=256]="NoTokenTrailingSourceMaps",t[t.NoTokenSourceMaps=384]="NoTokenSourceMaps",t[t.NoLeadingComments=512]="NoLeadingComments",t[t.NoTrailingComments=1024]="NoTrailingComments",t[t.NoComments=1536]="NoComments",t[t.NoNestedComments=2048]="NoNestedComments",t[t.HelperName=4096]="HelperName",t[t.ExportName=8192]="ExportName",t[t.LocalName=16384]="LocalName",t[t.InternalName=32768]="InternalName",t[t.Indented=65536]="Indented",t[t.NoIndentation=131072]="NoIndentation",t[t.AsyncFunctionBody=262144]="AsyncFunctionBody",t[t.ReuseTempVariableScope=524288]="ReuseTempVariableScope",t[t.CustomPrologue=1048576]="CustomPrologue",t[t.NoHoisting=2097152]="NoHoisting",t[t.HasEndOfDeclarationMarker=4194304]="HasEndOfDeclarationMarker",t[t.Iterator=8388608]="Iterator",t[t.NoAsciiEscaping=16777216]="NoAsciiEscaping",t[t.TypeScriptClassWrapper=33554432]="TypeScriptClassWrapper",(t=e.ExternalEmitHelpers||(e.ExternalEmitHelpers={}))[t.Extends=1]="Extends",t[t.Assign=2]="Assign",t[t.Rest=4]="Rest",t[t.Decorate=8]="Decorate",t[t.Metadata=16]="Metadata",t[t.Param=32]="Param",t[t.Awaiter=64]="Awaiter",t[t.Generator=128]="Generator",t[t.Values=256]="Values",t[t.Read=512]="Read",t[t.Spread=1024]="Spread",t[t.Await=2048]="Await",t[t.AsyncGenerator=4096]="AsyncGenerator",t[t.AsyncDelegator=8192]="AsyncDelegator",t[t.AsyncValues=16384]="AsyncValues",t[t.ExportStar=32768]="ExportStar",t[t.MakeTemplateObject=65536]="MakeTemplateObject",t[t.FirstEmitHelper=1]="FirstEmitHelper",t[t.LastEmitHelper=65536]="LastEmitHelper",t[t.ForOfIncludes=256]="ForOfIncludes",t[t.ForAwaitOfIncludes=16384]="ForAwaitOfIncludes",t[t.AsyncGeneratorIncludes=6144]="AsyncGeneratorIncludes",t[t.AsyncDelegatorIncludes=26624]="AsyncDelegatorIncludes",t[t.SpreadIncludes=1536]="SpreadIncludes",(t=e.EmitHint||(e.EmitHint={}))[t.SourceFile=0]="SourceFile",t[t.Expression=1]="Expression",t[t.IdentifierName=2]="IdentifierName",t[t.MappedTypeParameter=3]="MappedTypeParameter",t[t.Unspecified=4]="Unspecified"}(ts=ts||{}),(ts||(ts={})).timestamp="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now||function(){return+new Date},function(o){var e,t,r,i,n,s,a;e=o.performance||(o.performance={}),n="function"==typeof onProfilerEvent&&!0===onProfilerEvent.profiler?onProfilerEvent:function(e){},s=!1,a=0,e.mark=function(e){s&&(r.set(e,o.timestamp()),t.set(e,(t.get(e)||0)+1),n(e))},e.measure=function(e,t,n){s&&(n=n&&r.get(n)||o.timestamp(),t=t&&r.get(t)||a,i.set(e,(i.get(e)||0)+(n-t)))},e.getCount=function(e){return t&&t.get(e)||0},e.getDuration=function(e){return i&&i.get(e)||0},e.forEachMeasure=function(n){i.forEach(function(e,t){n(t,e)})},e.enable=function(){t=o.createMap(),r=o.createMap(),i=o.createMap(),s=!0,a=o.timestamp()},e.disable=function(){s=!1}}(ts=ts||{}),function(e){e.versionMajorMinor="2.6",e.version=e.versionMajorMinor+".1"}(ts=ts||{}),function(t){t.isExternalModuleNameRelative=function(e){return t.pathIsRelative(e)||t.isRootedDiskPath(e)}}(ts=ts||{}),function(m){function L(){var e=Object.create(null);return e.__=void 0,delete e.__,e}function f(){return new o}m.collator="object"==typeof Intl&&"function"==typeof Intl.Collator?new Intl.Collator(void 0,{usage:"sort",sensitivity:"accent"}):void 0,m.localeCompareIsCorrect=m.collator&&m.collator.compare("a","B")<0,m.createMap=f,m.createUnderscoreEscapedMap=function(){return new o},m.createSymbolTable=function(e){var t=f();if(e)for(var n=0,o=e;n<o.length;n++){var r=o[n];t.set(r.escapedName,r)}return t},m.createMapFromTemplate=function(e){var t,n=new o;for(t in e)l.call(e,t)&&n.set(t,e[t]);return n};var e,o="undefined"!=typeof Map&&"entries"in Map.prototype?Map:(M.prototype.next=function(){var e=this.index;return e<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[e]),done:!1}):{value:void 0,done:!0}},e=M,t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,t){return this.has(e)||this.size++,this.data[e]=t,this},t.prototype.has=function(e){return e in this.data},t.prototype.delete=function(e){return!!this.has(e)&&(this.size--,delete this.data[e],!0)},t.prototype.clear=function(){this.data=L(),this.size=0},t.prototype.keys=function(){return new e(this.data,function(e,t){return t})},t.prototype.values=function(){return new e(this.data,function(e,t){return e[t]})},t.prototype.entries=function(){return new e(this.data,function(e,t){return[t,e[t]]})},t.prototype.forEach=function(e){for(var t in this.data)e(this.data[t],t)},t);function t(){this.data=L(),this.size=0}function M(e,t){this.index=0,this.data=e,this.selector=t,this.keys=Object.keys(e)}function n(e,t){if(e)for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o)return o}}function r(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(t(o,n))return o}}function F(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return n;return-1}function i(e,t){if(e)for(var n=0,o=e;n<o.length;n++)if(o[n]===t)return!0;return!1}function U(e,t,n){for(var o=n||0;o<e.length;o++)if(i(t,e.charCodeAt(o)))return o;return-1}function H(e,t){for(var n=0,o=0;o<e.length;o++)t(e[o],o,e)&&(e[n]=e[o],n++);e.length=n}function y(e,t){if(e)for(var n=[],o=0;o<e.length;o++)n.push(t(e[o],o));return n}function V(e){if(e)for(var t=[],n=0,o=e;n<o.length;n++){var r=o[n];r&&(c(r)?a(t,r):t.push(r))}return t}function W(e,t){if(e)for(var n=[],o=0;o<e.length;o++){var r=t(e[o],o);r&&(c(r)?a(n,r):n.push(r))}return n}function k(e,t){if(e){if(!t)return 0<e.length;for(var n=0,o=e;n<o.length;n++)if(t(o[n]))return!0}return!1}function G(e,t){var n;if(e){n=[];e:for(var o=0,r=e;o<r.length;o++){for(var i=r[o],s=0,a=n;s<a.length;s++){var l=a[s];if(t?t(l,i):l===i)continue e}n.push(i)}}return n}function s(e,t,n){if(!e||!t)return e===t;if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!(n?n(e[o],t[o]):e[o]===t[o]))return!1;return!0}function K(e,t){return t<0?e.length+t:t}function a(e,t,n,o){if(void 0!==t&&0!==t.length){if(void 0===e)return t.slice(n,o);n=void 0===n?0:K(t,n),o=void 0===o?t.length:K(t,o);for(var r=n;r<o&&r<t.length;r++)void 0!==t[r]&&e.push(t[r])}return e}function j(e,t){return!i(e,t)&&(e.push(t),!0)}function z(e,t){if(e&&(t=K(e,t))<e.length)return e[t]}function b(e){return z(e,-1)}function X(e,t,n,o,r){if(e&&0<e.length){var i=e.length;if(0<i){var s=void 0===o||o<0?0:o,a=void 0===r||i-1<s+r?i-1:s+r,l=void 0;for(arguments.length<=2?(l=e[s],s++):l=n;s<=a;)l=t(l,e[s],s),s++;return l}}return n}m.toPath=function(e,t,n){return n(S(e)?E(e):he(e,t))},(O=m.Comparison||(m.Comparison={}))[O.LessThan=-1]="LessThan",O[O.EqualTo=0]="EqualTo",O[O.GreaterThan=1]="GreaterThan",m.length=function(e){return e?e.length:0},m.forEach=n,m.firstDefined=function(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(void 0!==o)return o}},m.findAncestor=function(e,t){for(;e;){var n=t(e);if("quit"===n)return;if(n)return e;e=e.parent}},m.zipWith=function(e,t,n){var o=[];N.assert(e.length===t.length);for(var r=0;r<e.length;r++)o.push(n(e[r],t[r],r));return o},m.zipToMap=function(e,t){N.assert(e.length===t.length);for(var n=f(),o=0;o<e.length;++o)n.set(e[o],t[o]);return n},m.every=function(e,t){if(e)for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0},m.find=r,m.findLast=function(e,t){for(var n=e.length-1;0<=n;n--){var o=e[n];if(t(o,n))return o}},m.findIndex=F,m.findMap=function(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o)return o}N.fail()},m.contains=i,m.indexOf=function(e,t){if(e)for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},m.indexOfAnyCharCode=U,m.countWhere=function(e,t){var n=0;if(e)for(var o=0;o<e.length;o++)t(e[o],o)&&n++;return n},m.filter=function(e,t){if(e){for(var n=e.length,o=0;o<n&&t(e[o]);)o++;if(o<n){var r=e.slice(0,o);for(o++;o<n;){var i=e[o];t(i)&&r.push(i),o++}return r}}return e},m.filterMutate=H,m.clear=function(e){e.length=0},m.map=y,m.sameMap=function(e,t){var n,o;if(e)for(var r=0;r<e.length;r++)n?n.push(t(e[r],r)):(o=e[r])!==(o=t(o,r))&&(n=e.slice(0,r)).push(o);return n||e},m.flatten=V,m.flatMap=W,m.flatMapIter=function(e,t){for(var n=[];;){var o=e.next(),r=o.value;if(o.done)break;o=t(r);o&&(c(o)?n.push.apply(n,o):n.push(o))}return n},m.sameFlatMap=function(e,t){var n;if(e)for(var o=0;o<e.length;o++){var r=e[o],i=t(r,o);(n||r!==i||c(i))&&(n=n||e.slice(0,o),c(i)?a(n,i):n.push(i))}return n||e},m.mapDefined=function(e,t){var n=[];if(e)for(var o=0;o<e.length;o++){var r=t(e[o],o);void 0!==r&&n.push(r)}return n},m.mapDefinedIter=function(e,t){for(var n=[];;){var o=e.next(),r=o.value;if(o.done)break;o=t(r);void 0!==o&&n.push(o)}return n},m.span=function(e,t){if(e){for(var n=0;n<e.length;n++)if(!t(e[n],n))return[e.slice(0,n),e.slice(n)];return[e.slice(0),[]]}},m.spanMap=function(e,t,n){if(e)for(var o,r=[],i=e.length,s=void 0,a=void 0,l=0,c=0;l<i;){for(;c<i;){if(a=t(e[c],c),0===c)s=a;else if(a!==s)break;c++}l<c&&((o=n(e.slice(l,c),s,l,c))&&r.push(o),l=c),s=a,c++}return r},m.mapEntries=function(e,n){var o;if(e)return o=f(),e.forEach(function(e,t){t=n(t,e),e=t[0],t=t[1];o.set(e,t)}),o},m.some=k,m.concatenate=function(e,t){return k(t)?k(e)?e.concat(t):t:e},m.deduplicate=G,m.arrayIsEqualTo=s,m.changesAffectModuleResolution=function(e,t){return!(e&&e.module===t.module&&e.moduleResolution===t.moduleResolution&&e.noResolve===t.noResolve&&e.target===t.target&&e.noLib===t.noLib&&e.jsx===t.jsx&&e.allowJs===t.allowJs&&e.rootDir===t.rootDir&&e.configFilePath===t.configFilePath&&e.baseUrl===t.baseUrl&&e.maxNodeModuleJsDepth===t.maxNodeModuleJsDepth&&s(e.lib,t.lib)&&s(e.typeRoots,t.typeRoots)&&s(e.rootDirs,t.rootDirs)&&q(e.paths,t.paths))},m.compact=function(e){var t;if(e)for(var n=0;n<e.length;n++){var o=e[n];!t&&o||(t=t||e.slice(0,n),o&&t.push(o))}return t||e},m.relativeComplement=function(e,t,n,o,r){if(void 0===n&&(n=h),void 0===o&&(o=0),void 0===r&&(r=0),!t||!e||0===t.length||0===e.length)return t;var i=[];e:for(;r<t.length;r++){t:for(;o<e.length;o++)switch(n(t[r],e[o])){case-1:break t;case 0:continue e;case 1:continue}i.push(t[r])}return i},m.sum=function(e,t){for(var n=0,o=0,r=e;o<r.length;o++)n+=r[o][t];return n},m.append=function(e,t){return void 0===t?e:void 0===e?[t]:(e.push(t),e)},m.addRange=a,m.pushIfUnique=j,m.appendIfUnique=function(e,t){return e?(j(e,t),e):[t]},m.stableSort=function(n,o){return void 0===o&&(o=h),n.map(function(e,t){return t}).sort(function(e,t){return o(n[e],n[t])||h(e,t)}).map(function(e){return n[e]})},m.rangeEquals=function(e,t,n,o){for(;n<o;){if(e[n]!==t[n])return!1;n++}return!0},m.elementAt=z,m.firstOrUndefined=function(e){return z(e,0)},m.first=function(e){return N.assert(0!==e.length),e[0]},m.lastOrUndefined=b,m.last=function(e){return N.assert(0!==e.length),e[e.length-1]},m.singleOrUndefined=function(e){return e&&1===e.length?e[0]:void 0},m.singleOrMany=function(e){return e&&1===e.length?e[0]:e},m.replaceElement=function(e,t,n){e=e.slice(0);return e[t]=n,e},m.binarySearch=function(e,t,n,o){if(!e||0===e.length)return-1;var r=o||0,i=e.length-1;for(n=void 0!==n?n:function(e,t){return e<t?-1:t<e?1:0};r<=i;){var s=r+(i-r>>1),a=e[s];if(0===n(a,t))return s;0<n(a,t)?i=s-1:r=s+1}return~r},m.reduceLeft=X,m.reduceRight=function(e,t,n,o,r){if(e){var i=e.length;if(0<i){var s=void 0===o||i-1<o?i-1:o,a=void 0===r||s-r<0?0:s-r,l=void 0;for(arguments.length<=2?(l=e[s],s--):l=n;a<=s;)l=t(l,e[s],s),s--;return l}}return n};var l=Object.prototype.hasOwnProperty;function $(e,t){return l.call(e,t)}function Y(e,n){e.forEach(function(e,t){n.set(t,e)})}function q(e,t,n){if(e!==t){if(!e||!t)return!1;for(var o in e)if(l.call(e,o)&&(l.call(t,o),n?!n(e[o],t[o]):e[o]!==t[o]))return!1;for(var o in t)if(l.call(t,o)&&!l.call(e,o))return!1}return!0}function J(e,t,n){for(var o=f(),r=0,i=e;r<i.length;r++){var s=i[r];o.set(t(s),n?n(s):s)}return o}function Q(e,t){var n=this.get(e);return n?n.push(t):this.set(e,n=[t]),n}function Z(e,t){var n=this.get(e);n&&(qe(n,t),n.length||this.delete(e))}function c(e){return Array.isArray?Array.isArray(e):e instanceof Array}function u(e){return"string"==typeof e}function ee(e){var t;return function(){return e&&(t=e(),e=void 0),t}}function d(t,n,o,r,e){if(e){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return function(e){return X(i,function(e,t){return t(e)},e)}}return r?function(e){return r(o(n(t(e))))}:o?function(e){return o(n(t(e)))}:n?function(e){return n(t(e))}:t?function(e){return t(e)}:function(e){return e}}function p(e,n,o){return o=o||0,e.replace(/{(\d+)}/g,function(e,t){return n[+t+o]})}function g(e){return m.localizedDiagnosticMessages&&m.localizedDiagnosticMessages[e.key]||e.message}function h(e,t){return e===t?0:void 0===e||void 0!==t&&e<t?-1:1}function v(e,t,n){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;if(n){if(m.collator)return(n=m.localeCompareIsCorrect?m.collator.compare(e,t):e.localeCompare(t,void 0,{usage:"sort",sensitivity:"accent"}))<0?-1:0<n?1:0;if((e=e.toUpperCase())===(t=t.toUpperCase()))return 0}return e<t?-1:1}function te(e,t){return v(e,t,!0)}function ne(e){return e.file?e.file.fileName:void 0}function oe(e,t){return h(ne(e),ne(t))||h(e.start,t.start)||h(e.length,t.length)||h(e.code,t.code)||function(e,t){for(;e&&t;){var n=h(u(e)?e:e.messageText,u(t)?t:t.messageText);if(n)return n;e=u(e)?void 0:e.next,t=u(t)?void 0:t.next}return e||t?e?1:-1:0}(e.messageText,t.messageText)||0}function re(e){if(e.length<2)return e;for(var t=[e[0]],n=e[0],o=1;o<e.length;o++){var r=e[o];0!==oe(r,n)&&(t.push(r),n=r)}return t}function _(e){return e.replace(/\\/g,"/")}function T(e){var t,n;return 47===e.charCodeAt(0)?47!==e.charCodeAt(1)?1:(n=e.indexOf("/",2))<0?2:(t=e.indexOf("/",n+1))<0?n+1:t+1:58===e.charCodeAt(1)?47===e.charCodeAt(2)?3:2:0===e.lastIndexOf("file:///",0)?"file:///".length:-1!==(n=e.indexOf("://"))?n+"://".length:0}function ie(e,t){for(var n=[],o=0,r=e.substr(t).split(m.directorySeparator);o<r.length;o++){var i=r[o];"."!==i&&(".."===i&&0<n.length&&".."!==b(n)?n.pop():i&&n.push(i))}return n}function E(e){return se(e).path}function se(e){var t,n=T(e=_(e)),o=e.substr(0,n),n=ie(e,n);return n.length?(t=o+n.join(m.directorySeparator),{path:ae(e)?t+m.directorySeparator:t,parts:n}):{path:o,parts:n}}function ae(e){return 47===e.charCodeAt(e.length-1)}function le(e){return e.substr(0,Math.max(T(e),e.lastIndexOf(m.directorySeparator)))}function ce(e){return e&&!S(e)&&ve(e,"://")}function ue(e){return e.target||0}function de(e){return"number"==typeof e.module?e.module:2<=ue(e)?m.ModuleKind.ES2015:m.ModuleKind.CommonJS}function pe(e){for(var t=!1,n=0;n<e.length;n++)if(42===e.charCodeAt(n)){if(t)return!1;t=!0}return!0}function S(e){return e&&0!==T(e)}function ge(e,t){var n=ie(e,t);return[e.substr(0,t)].concat(n)}function C(e,t){var n=T(e=_(e));return 0===n&&(n=T(e=B(_(t),e))),ge(e,n)}function he(e,t){return _e(C(e,t))}function _e(e){if(e&&e.length)return e[0]+e.slice(1).join(m.directorySeparator)}function me(e,t){if(ce(e)){for(var n,o=e,r=o.length,i=o.indexOf("://")+"://".length;i<r&&47===o.charCodeAt(i);)i++;return i===r?[o]:-1!==(n=o.indexOf(m.directorySeparator,i))?ge(o,i=n+1):[o+m.directorySeparator]}return C(e,t)}function fe(e,t,n,o,r){var i,s=me(t,n),a=me(e,n);for(1<a.length&&""===b(a)&&a.pop(),i=0;i<s.length&&i<a.length&&o(a[i])===o(s[i]);i++);if(i){for(var l="",t=s.slice(i,s.length);i<a.length;i++)""!==a[i]&&(l=l+".."+m.directorySeparator);return l+t.join(m.directorySeparator)}e=_e(s);return e=r&&S(e)?"file:///"+e:e}function x(e){var t;if(void 0!==e)return(t=e.lastIndexOf(m.directorySeparator))<0?e:e.substring(t+1)}function B(e,t){return e&&e.length?t&&t.length?0!==T(t)?t:e.charAt(e.length-1)===m.directorySeparator?e+t:e+m.directorySeparator+t:e:t}function A(e){return e.charAt(e.length-1)===m.directorySeparator?e.substr(0,e.length-1):e}function ye(e,t,n,o){if(void 0===e||void 0===t)return!1;if(e!==t&&(e=A(e))!==(t=A(t))){var r=C(e,n),i=C(t,n);if(i.length<r.length)return!1;for(var s=0;s<r.length;s++)if(0!==v(r[s],i[s],o))return!1}return!0}function ke(e,t){return 0===e.lastIndexOf(t,0)}function be(e,t){var n=e.length-t.length;return 0<=n&&e.indexOf(t,n)===n}function ve(e,t){return-1!==e.indexOf(t)}function Te(e){return ve(x(e),".")}function I(e,t){return e.length>t.length&&be(e,t)}function Ee(e,t){for(var n=0,o=t;n<o.length;n++)if(I(e,o[n]))return!0;return!1}m.hasProperty=$,m.getProperty=function(e,t){return l.call(e,t)?e[t]:void 0},m.getOwnKeys=function(e){var t,n=[];for(t in e)l.call(e,t)&&n.push(t);return n},m.getOwnValues=function(e){var t,n=[];for(t in e)l.call(e,t)&&n.push(e[t]);return n},m.arrayFrom=function(e,t){for(var n,o=[],r=e.next(),i=r.value,s=r.done;!s;i=(n=e.next()).value,s=n.done)o.push(t?t(i):i);return o},m.forEachEntry=function(e,t){for(var n=e.entries(),e=n.next(),o=e.value,r=e.done;!r;o=(i=n.next()).value,r=i.done){var i=o[0],i=t(o[1],i);if(i)return i}},m.forEachKey=function(e,t){for(var n=e.keys(),e=n.next(),o=e.value,r=e.done;!r;o=(i=n.next()).value,r=i.done){var i=t(o);if(i)return i}},m.copyEntries=Y,m.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var o=0,r=t;o<r.length;o++){var i,s=r[o];for(i in s)$(s,i)&&(e[i]=s[i])}return e},m.equalOwnProperties=q,m.arrayToMap=J,m.arrayToNumericMap=function(e,t){for(var n=[],o=0,r=e;o<r.length;o++){var i=r[o];n[t(i)]=i}return n},m.arrayToSet=function(e,t){return J(e,t||function(e){return e},function(){return!0})},m.cloneMap=function(e){var t=f();return Y(e,t),t},m.clone=function(e){var t,n={};for(t in e)l.call(e,t)&&(n[t]=e[t]);return n},m.extend=function(e,t){var n,o={};for(n in t)l.call(t,n)&&(o[n]=t[n]);for(n in e)l.call(e,n)&&(o[n]=e[n]);return o},m.createMultiMap=function(){var e=f();return e.add=Q,e.remove=Z,e},m.isArray=c,m.isString=u,m.tryCast=function(e,t){return void 0!==e&&t(e)?e:void 0},m.cast=function(e,t){if(void 0!==e&&t(e))return e;N.fail("Invalid cast. The supplied value did not pass the test '"+N.getFunctionName(t)+"'.")},m.noop=function(){},m.returnFalse=function(){return!1},m.returnTrue=function(){return!0},m.identity=function(e){return e},m.notImplemented=function(){throw new Error("Not implemented")},m.memoize=ee,m.chain=function(t,n,o,r,e){if(e){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return function(t){return d.apply(void 0,y(i,function(e){return e(t)}))}}return r?function(e){return d(t(e),n(e),o(e),r(e))}:o?function(e){return d(t(e),n(e),o(e))}:n?function(e){return d(t(e),n(e))}:t?function(e){return d(t(e))}:function(e){return function(e){return e}}},m.compose=d,m.formatStringFromArgs=p,m.localizedDiagnosticMessages=void 0,m.getLocaleSpecificMessage=g,m.createFileDiagnostic=function(e,t,n,o){N.assertGreaterThanOrEqual(t,0),N.assertGreaterThanOrEqual(n,0),e&&(N.assertLessThanOrEqual(t,e.text.length),N.assertLessThanOrEqual(t+n,e.text.length));var r=g(o);return{file:e,start:t,length:n,messageText:r=4<arguments.length?p(r,arguments,4):r,category:o.category,code:o.code}},m.formatMessage=function(e,t){t=g(t);return t=2<arguments.length?p(t,arguments,2):t},m.createCompilerDiagnostic=function(e){var t=g(e);return{file:void 0,start:void 0,length:void 0,messageText:t=1<arguments.length?p(t,arguments,1):t,category:e.category,code:e.code}},m.createCompilerDiagnosticFromMessageChain=function(e){return{file:void 0,start:void 0,length:void 0,code:e.code,category:e.category,messageText:e.next?e:e.messageText}},m.chainDiagnosticMessages=function(e,t){var n=g(t);return{messageText:n=2<arguments.length?p(n,arguments,2):n,category:t.category,code:t.code,next:e}},m.concatenateDiagnosticMessageChains=function(e,t){for(var n=e;n.next;)n=n.next;return n.next=t,e},m.compareValues=h,m.compareStrings=v,m.compareStringsCaseInsensitive=te,m.compareDiagnostics=oe,m.sortAndDeduplicateDiagnostics=function(e){return re(e.sort(oe))},m.deduplicateSortedDiagnostics=re,m.normalizeSlashes=_,m.getRootLength=T,m.directorySeparator="/",m.normalizePath=E,m.normalizePathAndParts=se,m.pathEndsWithDirectorySeparator=ae,m.getDirectoryPath=le,m.isUrl=ce,m.pathIsRelative=function(e){return/^\.\.?($|[\\/])/.test(e)},m.moduleHasNonRelativeName=function(e){return!m.isExternalModuleNameRelative(e)},m.getEmitScriptTarget=ue,m.getEmitModuleKind=de,m.getEmitModuleResolutionKind=function(e){var t=e.moduleResolution;return t=void 0===t?de(e)===m.ModuleKind.CommonJS?m.ModuleResolutionKind.NodeJs:m.ModuleResolutionKind.Classic:t},m.hasZeroOrOneAsteriskCharacter=pe,m.isRootedDiskPath=S,m.convertToRelativePath=function(e,t,n){return S(e)?fe(t,e,t,n,!1):e},m.getNormalizedPathComponents=C,m.getNormalizedAbsolutePath=he,m.getNormalizedPathFromPathComponents=_e,m.getRelativePathToDirectoryOrUrl=fe,m.getBaseFileName=x,m.combinePaths=B,m.removeTrailingDirectorySeparator=A,m.ensureTrailingDirectorySeparator=function(e){return e.charAt(e.length-1)!==m.directorySeparator?e+m.directorySeparator:e},m.comparePaths=function(e,t,n,o){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;e=A(e),t=A(t);for(var r=C(e,n),i=C(t,n),s=Math.min(r.length,i.length),a=0;a<s;a++){var l=v(r[a],i[a],o);if(0!==l)return l}return h(r.length,i.length)},m.containsPath=ye,m.startsWith=ke,m.removePrefix=function(e,t){return ke(e,t)?e.substr(t.length):e},m.endsWith=be,m.stringContains=ve,m.hasExtension=Te,m.fileExtensionIs=I,m.fileExtensionIsOneOf=Ee;var Se=/[^\w\s\/]/g,Ce=[42,63],xe=(m.commonPackageFolders=["node_modules","bower_components","jspm_packages"],"(?!("+m.commonPackageFolders.join("|")+")(/|$))"),Be={singleAsteriskRegexFragment:"([^./]|(\\.(?!min\\.js$))?)*",doubleAsteriskRegexFragment:"(/"+xe+"[^/.][^/]*)*?",replaceWildcardCharacter:function(e){return Oe(e,Be.singleAsteriskRegexFragment)}},Ae={singleAsteriskRegexFragment:"[^/]*",doubleAsteriskRegexFragment:"(/"+xe+"[^/.][^/]*)*?",replaceWildcardCharacter:function(e){return Oe(e,Ae.singleAsteriskRegexFragment)}},Ie={singleAsteriskRegexFragment:"[^/]*",doubleAsteriskRegexFragment:"(/.+?)?",replaceWildcardCharacter:function(e){return Oe(e,Ie.singleAsteriskRegexFragment)}},De={files:Be,directories:Ae,exclude:Ie};function D(e,t,n){e=Ne(e,t,n);if(e&&e.length)return"^("+e.map(function(e){return"("+e+")"}).join("|")+")"+("exclude"===n?"($|/)":"$")}function Ne(e,_,t){if(void 0!==e&&0!==e.length)return W(e,function(h){return h&&function(e,t){var n=t.singleAsteriskRegexFragment,o=t.doubleAsteriskRegexFragment,r=t.replaceWildcardCharacter,i="",s=!1,a=!1,t=C(h,_),l=b(t);if("exclude"===e||"**"!==l){t[0]=A(t[0]),we(l)&&t.push("**","*");for(var c=0,u=0,d=t;u<d.length;u++){var p,g=d[u];if("**"===g){if(s)return;i+=o,s=!0}else"directories"===e&&(i+="(",c++),a&&(i+=m.directorySeparator),"exclude"!==e?(p="",42===g.charCodeAt(0)?(p+="([^./]"+n+")?",g=g.substr(1)):63===g.charCodeAt(0)&&(p+="[^./]",g=g.substr(1)),(p+=g.replace(Se,r))!==g&&(i+=xe),i+=p):i+=g.replace(Se,r);a=!0}for(;0<c;)i+=")?",c--;return i}}(t,De[t])})}function we(e){return!/[.*?]/.test(e)}function Oe(e,t){return"*"===e?t:"?"===e?"[^/]":"\\"+e}function Re(e,t,n,o,r){e=E(e);r=B(r=E(r),e);return{includeFilePatterns:y(Ne(n,r,"files"),function(e){return"^"+e+"$"}),includeFilePattern:D(n,r,"files"),includeDirectoryPattern:D(n,r,"directories"),excludePattern:D(t,r,"exclude"),basePaths:function(n,e,o){var r=[n];if(e){for(var t=[],i=0,s=e;i<s.length;i++){var a=s[i],a=S(a)?a:E(B(n,a));t.push(function(e){var t=U(e,Ce);return t<0?Te(e)?A(le(e)):e:e.substring(0,e.lastIndexOf(m.directorySeparator,t))}(a))}t.sort(o?v:te);for(var l=0,c=t;l<c.length;l++)!function(t){m.every(r,function(e){return!ye(e,t,n,!o)})&&r.push(t)}(c[l])}return r}(e,n,o)}}function Pe(e,h,t,n,o,r,i,_){for(var e=Re(e=E(e),t,n,o,r=E(r)),s=o?"":"i",m=e.includeFilePatterns&&e.includeFilePatterns.map(function(e){return new RegExp(e,s)}),f=e.includeDirectoryPattern&&new RegExp(e.includeDirectoryPattern,s),y=e.excludePattern&&new RegExp(e.excludePattern,s),k=m?m.map(function(){return[]}):[[]],b=o?v:te,a=0,l=e.basePaths;a<l.length;a++){var c=l[a];!function e(o,r,t){for(var n=_(o),i=n.files,n=n.directories,s=function(e){var t=B(o,e),n=B(r,e);return h&&!Ee(t,h)||y&&y.test(n)?"continue":void(m?-1!==(e=F(m,function(e){return e.test(n)}))&&k[e].push(t):k[0].push(t))},a=0,l=i=i.slice().sort(b);a<l.length;a++)s(d=l[a]);if(void 0===t||0!=--t)for(var c=0,u=n=n.slice().sort(b);c<u.length;c++){var d=u[c],p=B(o,d),g=B(r,d);f&&!f.test(g)||y&&y.test(g)||e(p,g,t)}}(c,B(r,c),i)}return V(k)}function Le(e){switch(e.substr(e.lastIndexOf(".")).toLowerCase()){case".js":return 1;case".jsx":return 2;case".ts":return 3;case".tsx":return 4;case".json":return 6;default:return 0}}m.getRegularExpressionForWildcard=D,m.isImplicitGlob=we,m.getFileMatcherPatterns=Re,m.matchFiles=Pe,m.ensureScriptKind=function(e,t){return t||Le(e)||3},m.getScriptKindFromFileName=Le,m.supportedTypeScriptExtensions=[".ts",".tsx",".d.ts"],m.supportedTypescriptExtensionsForExtractExtension=[".d.ts",".ts",".tsx"],m.supportedJavascriptExtensions=[".js",".jsx"];var Me=m.supportedTypeScriptExtensions.concat(m.supportedJavascriptExtensions);function Fe(e,t){e=e&&e.allowJs;return t&&0!==t.length&&e?G(Me.concat(t.map(function(e){return e.extension}))):e?Me:m.supportedTypeScriptExtensions}function Ue(e,t){return e<2?0:e<t.length?2:t.length}m.getSupportedExtensions=Fe,m.hasJavaScriptFileExtension=function(t){return n(m.supportedJavascriptExtensions,function(e){return I(t,e)})},m.hasTypeScriptFileExtension=function(t){return n(m.supportedTypeScriptExtensions,function(e){return I(t,e)})},m.isSupportedSourceFileName=function(e,t,n){if(e)for(var o=0,r=Fe(t,n);o<r.length;o++)if(I(e,r[o]))return!0;return!1},(O=m.ExtensionPriority||(m.ExtensionPriority={}))[O.TypeScriptFiles=0]="TypeScriptFiles",O[O.DeclarationAndJavaScriptFiles=2]="DeclarationAndJavaScriptFiles",O[O.Highest=0]="Highest",O[O.Lowest=2]="Lowest",m.getExtensionPriority=function(e,t){for(var n=t.length-1;0<=n;n--)if(I(e,t[n]))return Ue(n,t);return 0},m.adjustExtensionPriority=Ue,m.getNextLowestExtensionPriority=function(e,t){return e<2?2:t.length};var N,w,O,He=[".d.ts",".ts",".js",".tsx",".jsx"];function Ve(e){for(var t=0,n=He;t<n.length;t++){var o=We(e,n[t]);if(void 0!==o)return o}return e}function We(e,t){return I(e,t)?Ge(e,t):void 0}function Ge(e,t){return e.substring(0,e.length-t.length)}function Ke(e,t){this.flags=e,this.escapedName=t,this.declarations=void 0}function je(e,t){this.flags=t,N.isDebugging&&(this.checker=e)}function ze(){}function R(e,t,n){this.id=0,this.kind=e,this.pos=t,this.end=n,this.flags=0,this.modifierFlagsCache=0,this.transformFlags=0,this.parent=void 0,this.original=void 0}function Xe(e,t,n){this.fileName=e,this.text=t,this.skipTrivia=n||function(e){return e}}function $e(e,t){for(var n=t;n<e.length-1;n++)e[n]=e[n+1];e.pop()}function Ye(e,t){e[t]=e[e.length-1],e.pop()}function qe(e,t){for(var n=e,o=0;o<n.length;o++)if(n[o]===t){Ye(n,o);break}}function Je(e){return e?function(e){return e}:function(e){return e.toLowerCase()}}function Qe(e,t,n){for(var o=void 0,r=-1,i=0,s=e;i<s.length;i++){var a=s[i],l=t(a);Ze(l,n)&&l.prefix.length>r&&(r=l.prefix.length,o=a)}return o}function Ze(e,t){var n=e.prefix,e=e.suffix;return t.length>=n.length+e.length&&ke(t,n)&&be(t,e)}function et(e){N.assert(pe(e));var t=e.indexOf("*");return-1===t?void 0:{prefix:e.substr(0,t),suffix:e.substr(t+1)}}function tt(t){return r(m.supportedTypescriptExtensionsForExtractExtension,function(e){return I(t,e)})||r(m.supportedJavascriptExtensions,function(e){return I(t,e)})}function P(e,t){e=new Error(e?"Debug Failure. "+e:"Debug Failure.");throw Error.captureStackTrace&&Error.captureStackTrace(e,t||P),e}m.removeFileExtension=Ve,m.tryRemoveExtension=We,m.removeExtension=Ge,m.changeExtension=function(e,t){return Ve(e)+t},m.objectAllocator={getNodeConstructor:function(){return R},getTokenConstructor:function(){return R},getIdentifierConstructor:function(){return R},getSourceFileConstructor:function(){return R},getSymbolConstructor:function(){return Ke},getTypeConstructor:function(){return je},getSignatureConstructor:function(){return ze},getSourceMapSourceConstructor:function(){return Xe}},(O=m.AssertionLevel||(m.AssertionLevel={}))[O.None=0]="None",O[O.Normal=1]="Normal",O[O.Aggressive=2]="Aggressive",O[O.VeryAggressive=3]="VeryAggressive",(w=N=m.Debug||(m.Debug={})).currentAssertionLevel=0,w.isDebugging=!1,w.shouldAssert=function(e){return w.currentAssertionLevel>=e},w.assert=function e(t,n,o,r){t||(o&&(n+="\r\nVerbose Debug Information: "+("string"==typeof o?o:o())),P(n?"False expression: "+n:"False expression.",r||e))},w.assertEqual=function(e,t,n,o){e!==t&&P("Expected "+e+" === "+t+". "+(n?o?n+" "+o:n:""))},w.assertLessThan=function(e,t,n){t<=e&&P("Expected "+e+" < "+t+". "+(n||""))},w.assertLessThanOrEqual=function(e,t){t<e&&P("Expected "+e+" <= "+t)},w.assertGreaterThanOrEqual=function(e,t){e<t&&P("Expected "+e+" >= "+t)},w.fail=P,w.assertNever=function e(t,n,o){return P(n||"Illegal value: "+t,o||e)},w.getFunctionName=function(e){return"function"!=typeof e?"":e.hasOwnProperty("name")?e.name:(e=Function.prototype.toString.call(e),(e=/^function\s+([\w\$]+)\s*\(/.exec(e))?e[1]:"")},m.orderedRemoveItem=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return $e(e,n),!0;return!1},m.orderedRemoveItemAt=$e,m.unorderedRemoveItemAt=Ye,m.unorderedRemoveItem=qe,m.createGetCanonicalFileName=Je,m.matchPatternOrExact=function(e,t){for(var n=[],o=0,r=e;o<r.length;o++){var i=r[o],s=et(i);if(s)n.push(s);else if(i===t)return i}return Qe(n,function(e){return e},t)},m.patternText=function(e){return e.prefix+"*"+e.suffix},m.matchedText=function(e,t){return N.assert(Ze(e,t)),t.substr(e.prefix.length,t.length-e.suffix.length)},m.findBestPatternMatch=Qe,m.tryParsePattern=et,m.positionIsSynthesized=function(e){return!(0<=e)},m.extensionIsTypeScript=function(e){return".ts"===e||".tsx"===e||".d.ts"===e},m.extensionFromPath=function(e){var t=tt(e);if(void 0!==t)return t;N.fail("File "+e+" has unknown extension.")},m.isAnySupportedFileExtension=function(e){return void 0!==tt(e)},m.tryGetExtensionFromPath=tt,m.getAnyExtensionFromPath=function(e){var e=x(e),t=e.lastIndexOf(".");if(0<=t)return e.substring(t)},m.isCheckJsEnabledForFile=function(e,t){return e.checkJsDirective?e.checkJsDirective.enabled:t.checkJs},m.and=function(t,n){return function(e){return t(e)&&n(e)}},m.assertTypeIsNever=function(e){},m.createCachedDirectoryStructureHost=function(a){var o=f(),l=ee(function(){return a.getCurrentDirectory()}),n=Je(a.useCaseSensitiveFileNames);return{useCaseSensitiveFileNames:a.useCaseSensitiveFileNames,newLine:a.newLine,readFile:function(e,t){return a.readFile(e,t)},write:function(e){return a.write(e)},writeFile:function(e,t,n){var o=r(c(e));return o&&_(o,i(e),!0),a.writeFile(e,t,n)},fileExists:function(e){var t=r(c(e));return t&&g(t.files,i(e))||a.fileExists(e)},directoryExists:function(e){var t=c(e);return o.has(t)||a.directoryExists(e)},createDirectory:function(e){var t=r(c(e)),n=i(e);t&&h(t.directories,n,!0),a.createDirectory(e)},getCurrentDirectory:l,getDirectories:function(e){var t=p(e,c(e));return t?t.directories.slice():a.getDirectories(e)},readDirectory:function(e,t,n,o,r){var i=c(e),s=p(e,i);return s?Pe(e,t,n,o,a.useCaseSensitiveFileNames,l(),r,function(e){var t=c(e);return t===i?s:u(t)||d(e,t)}):a.readDirectory(e,t,n,o,r)},addOrDeleteFileOrDirectory:function(e,t){if(u(t))a.directoryExists(e)||o.delete(t);else{var n=r(t);if(n){e=i(e);if(n)return _(n,e,(t={fileExists:a.fileExists(t),directoryExists:a.directoryExists(t)}).fileExists),h(n.directories,e,t.directoryExists),t}}},addOrDeleteFile:function(e,t,n){n!==m.FileWatcherEventKind.Changed&&(t=r(t))&&_(t,i(e),n===m.FileWatcherEventKind.Created)},clearCache:function(){o.clear()},exit:function(e){return a.exit(e)}};function c(e){return m.toPath(e,l(),n)}function u(e){return o.get(e)}function r(e){return u(le(e))}function i(e){return x(E(e))}function d(e,t){e={files:y(a.readDirectory(e,void 0,void 0,["*.*"]),i)||[],directories:a.getDirectories(e)||[]};return o.set(t,e),e}function p(e,t){var n=u(t);if(n)return n;try{return d(e,t)}catch(e){N.assert(!o.has(t))}}function s(e,t){return n(e)===n(t)}function g(e,t){return k(e,function(e){return s(e,t)})}function h(e,t,n){g(e,t)?n||H(e,function(e){return!s(e,t)}):n&&e.push(t)}function _(e,t,n){h(e.files,t,n)}}}(ts=ts||{}),function(c){var l,r,i,o,a,u,t,n,s,d,p,e,g,h,_;function m(){if("undefined"!=typeof process){var e=process.version;if(e){var t=e.indexOf(".");if(-1!==t)return parseInt(e.substring(1,t))}}}function f(r,i,e){return u.watchFile(r,{persistent:!0,interval:e||250},t),{close:function(){return u.unwatchFile(r,t)}};function t(e,t){var n=0==+e.mtime,o=0==+t.mtime,n=!n&&o?l.Created:n&&!o?l.Deleted:l.Changed;n===l.Changed&&+e.mtime<=+t.mtime||i(r,n)}}function y(n,o,t){var r,i=(T(n)?s:a)();return{close:function(){i.close()}};function s(){void 0===r&&(r=!p||"win32"!==process.platform&&"darwin"!==process.platform?{persistent:!0}:{persistent:!0,recursive:!!t});var e=u.watch(n,r,o);return e.on("error",function(){T(n)||(i=a(),o("rename",""))}),e}function a(){return f(n,function(e,t){t===l.Created&&T(n)&&(i.close(),i=s(),o("rename",""))})}}function k(e){try{for(var t=u.readdirSync(e||".").sort(),n=[],o=[],r=0,i=t;r<i.length;r++){var s=i[r];if("."!==s&&".."!==s){var a=c.combinePaths(e,s),l=void 0;try{l=u.statSync(a)}catch(e){continue}l.isFile()?n.push(s):l.isDirectory()&&o.push(s)}}return{files:n,directories:o}}catch(e){return{files:[],directories:[]}}}function b(e,t){try{var n=u.statSync(e);switch(t){case 0:return n.isFile();case 1:return n.isDirectory()}}catch(e){return!1}}function v(e){return b(e,0)}function T(e){return b(e,1)}c.setStackTraceLimit=function(){Error.stackTraceLimit<100&&(Error.stackTraceLimit=100)},(_=l=c.FileWatcherEventKind||(c.FileWatcherEventKind={}))[_.Created=0]="Created",_[_.Changed=1]="Changed",_[_.Deleted=2]="Deleted",c.getNodeMajorVersion=m,c.sys=("undefined"!=typeof ChakraHost?r={newLine:ChakraHost.newLine||"\r\n",args:ChakraHost.args,useCaseSensitiveFileNames:!!ChakraHost.useCaseSensitiveFileNames,write:ChakraHost.echo,readFile:function(e,t){return ChakraHost.readFile(e)},writeFile:function(e,t,n){n&&(t="\ufeff"+t),ChakraHost.writeFile(e,t)},resolvePath:ChakraHost.resolvePath,fileExists:ChakraHost.fileExists,directoryExists:ChakraHost.directoryExists,createDirectory:ChakraHost.createDirectory,getExecutingFilePath:function(){return ChakraHost.executingFile},getCurrentDirectory:function(){return ChakraHost.currentDirectory},getDirectories:ChakraHost.getDirectories,getEnvironmentVariable:ChakraHost.getEnvironmentVariable||function(){return""},readDirectory:function(e,t,n,o,r){n=c.getFileMatcherPatterns(e,n,o,!!ChakraHost.useCaseSensitiveFileNames,ChakraHost.currentDirectory);return ChakraHost.readDirectory(e,t,n.basePaths,n.excludePattern,n.includeFilePattern,n.includeDirectoryPattern)},exit:ChakraHost.quit,realpath:ChakraHost.realpath&&function(e){return ChakraHost.realpath(e)}}:"undefined"!=typeof process&&process.nextTick&&!process.browser&&"undefined"!=typeof require&&(u=require("fs"),t=require("path"),_=require("os"),n=require("crypto"),s=process.env.TSC_NONPOLLING_WATCHER,o=c.createMap(),a=c.createMultiMap(),d={addFile:function(e,t){return a.add(e,t),s=c.getDirectoryPath(e),(n=o.get(s))?n.referenceCount+=1:((n=y(s||".",function(e,t){var n=s,o=c.isString(t)?c.getNormalizedAbsolutePath(t,n):void 0;if("change"===e||"rename"===e){t=a.get(o);if(t)for(var r=0,i=t;r<i.length;r++)(0,i[r])(o,l.Changed)}})).referenceCount=1,o.set(s,n)),{fileName:e,callback:t};var s,n},removeFile:function(e){var t=e.fileName,n=e.callback;a.remove(t,n),t=e.fileName,n=c.getDirectoryPath(t),(e=o.get(n))&&(--e.referenceCount,e.referenceCount<=0)&&(e.close(),o.delete(n))}},p=4<=m(),e=_.platform(),g="win32"!==e&&"win64"!==e&&!v(__filename.replace(/\w/g,function(e){var t=e.toUpperCase();return e===t?e.toLowerCase():t})),h={args:process.argv.slice(2),newLine:_.EOL,useCaseSensitiveFileNames:g,write:function(e){process.stdout.write(e)},readFile:function(e,t){if(v(e)){var n=u.readFileSync(e),o=n.length;if(2<=o&&254===n[0]&&255===n[1]){o&=-2;for(var r=0;r<o;r+=2){var i=n[r];n[r]=n[r+1],n[r+1]=i}return n.toString("utf16le",2)}return 2<=o&&255===n[0]&&254===n[1]?n.toString("utf16le",2):3<=o&&239===n[0]&&187===n[1]&&191===n[2]?n.toString("utf8",3):n.toString("utf8")}},writeFile:function(e,t,n){var o;n&&(t="\ufeff"+t);try{o=u.openSync(e,"w"),u.writeSync(o,t,void 0,"utf8")}finally{void 0!==o&&u.closeSync(o)}},watchFile:function(e,t,n){var o;return s?(o=d.addFile(e,t),{close:function(){return d.removeFile(o)}}):f(e,t,n)},watchDirectory:function(n,o,e){return y(n,function(e,t){"rename"===e&&o(t&&c.normalizePath(c.combinePaths(n,t)))},e)},resolvePath:function(e){return t.resolve(e)},fileExists:v,directoryExists:T,createDirectory:function(e){h.directoryExists(e)||u.mkdirSync(e)},getExecutingFilePath:function(){return __filename},getCurrentDirectory:function(){return process.cwd()},getDirectories:function(t){return c.filter(u.readdirSync(t),function(e){return b(c.combinePaths(t,e),1)})},getEnvironmentVariable:function(e){return process.env[e]||""},readDirectory:function(e,t,n,o,r){return c.matchFiles(e,t,n,o,g,process.cwd(),r,k)},getModifiedTime:function(e){try{return u.statSync(e).mtime}catch(e){}},createHash:function(e){var t=n.createHash("md5");return t.update(e),t.digest("hex")},getMemoryUsage:function(){return global.gc&&global.gc(),process.memoryUsage().heapUsed},getFileSize:function(e){try{var t=u.statSync(e);if(t.isFile())return t.size}catch(e){}return 0},exit:function(e){process.exit(e)},realpath:function(e){return u.realpathSync(e)},debugMode:c.some(process.execArgv,function(e){return/^--(inspect|debug)(-brk)?(=\d+)?$/i.test(e)}),tryEnableSourceMapsForHost:function(){try{require("source-map-support").install()}catch(e){}},setTimeout:setTimeout,clearTimeout:clearTimeout},r=h),r&&(i=r.writeFile,r.writeFile=function(e,t,n){var o=c.getDirectoryPath(c.normalizeSlashes(e));o&&!r.directoryExists(o)&&function e(t,n){var o=c.getDirectoryPath(t),r=""!==o&&t!==o&&!n.directoryExists(o);r&&e(o,n),!r&&n.directoryExists(t)||n.createDirectory(t)}(o,r),i.call(r,e,t,n)}),r),c.sys&&c.sys.getEnvironmentVariable&&(c.Debug.currentAssertionLevel=/^development$/i.test(c.sys.getEnvironmentVariable("NODE_ENV"))?1:0),c.sys&&c.sys.debugMode&&(c.Debug.isDebugging=!0)}(ts=ts||{}),function(e){function t(e,t,n,o){return{code:e,category:t,key:n,message:o}}e.Diagnostics={Unterminated_string_literal:t(1002,e.DiagnosticCategory.Error,"Unterminated_string_literal_1002","Unterminated string literal."),Identifier_expected:t(1003,e.DiagnosticCategory.Error,"Identifier_expected_1003","Identifier expected."),_0_expected:t(1005,e.DiagnosticCategory.Error,"_0_expected_1005","'{0}' expected."),A_file_cannot_have_a_reference_to_itself:t(1006,e.DiagnosticCategory.Error,"A_file_cannot_have_a_reference_to_itself_1006","A file cannot have a reference to itself."),Trailing_comma_not_allowed:t(1009,e.DiagnosticCategory.Error,"Trailing_comma_not_allowed_1009","Trailing comma not allowed."),Asterisk_Slash_expected:t(1010,e.DiagnosticCategory.Error,"Asterisk_Slash_expected_1010","'*/' expected."),Unexpected_token:t(1012,e.DiagnosticCategory.Error,"Unexpected_token_1012","Unexpected token."),A_rest_parameter_must_be_last_in_a_parameter_list:t(1014,e.DiagnosticCategory.Error,"A_rest_parameter_must_be_last_in_a_parameter_list_1014","A rest parameter must be last in a parameter list."),Parameter_cannot_have_question_mark_and_initializer:t(1015,e.DiagnosticCategory.Error,"Parameter_cannot_have_question_mark_and_initializer_1015","Parameter cannot have question mark and initializer."),A_required_parameter_cannot_follow_an_optional_parameter:t(1016,e.DiagnosticCategory.Error,"A_required_parameter_cannot_follow_an_optional_parameter_1016","A required parameter cannot follow an optional parameter."),An_index_signature_cannot_have_a_rest_parameter:t(1017,e.DiagnosticCategory.Error,"An_index_signature_cannot_have_a_rest_parameter_1017","An index signature cannot have a rest parameter."),An_index_signature_parameter_cannot_have_an_accessibility_modifier:t(1018,e.DiagnosticCategory.Error,"An_index_signature_parameter_cannot_have_an_accessibility_modifier_1018","An index signature parameter cannot have an accessibility modifier."),An_index_signature_parameter_cannot_have_a_question_mark:t(1019,e.DiagnosticCategory.Error,"An_index_signature_parameter_cannot_have_a_question_mark_1019","An index signature parameter cannot have a question mark."),An_index_signature_parameter_cannot_have_an_initializer:t(1020,e.DiagnosticCategory.Error,"An_index_signature_parameter_cannot_have_an_initializer_1020","An index signature parameter cannot have an initializer."),An_index_signature_must_have_a_type_annotation:t(1021,e.DiagnosticCategory.Error,"An_index_signature_must_have_a_type_annotation_1021","An index signature must have a type annotation."),An_index_signature_parameter_must_have_a_type_annotation:t(1022,e.DiagnosticCategory.Error,"An_index_signature_parameter_must_have_a_type_annotation_1022","An index signature parameter must have a type annotation."),An_index_signature_parameter_type_must_be_string_or_number:t(1023,e.DiagnosticCategory.Error,"An_index_signature_parameter_type_must_be_string_or_number_1023","An index signature parameter type must be 'string' or 'number'."),readonly_modifier_can_only_appear_on_a_property_declaration_or_index_signature:t(1024,e.DiagnosticCategory.Error,"readonly_modifier_can_only_appear_on_a_property_declaration_or_index_signature_1024","'readonly' modifier can only appear on a property declaration or index signature."),Accessibility_modifier_already_seen:t(1028,e.DiagnosticCategory.Error,"Accessibility_modifier_already_seen_1028","Accessibility modifier already seen."),_0_modifier_must_precede_1_modifier:t(1029,e.DiagnosticCategory.Error,"_0_modifier_must_precede_1_modifier_1029","'{0}' modifier must precede '{1}' modifier."),_0_modifier_already_seen:t(1030,e.DiagnosticCategory.Error,"_0_modifier_already_seen_1030","'{0}' modifier already seen."),_0_modifier_cannot_appear_on_a_class_element:t(1031,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_class_element_1031","'{0}' modifier cannot appear on a class element."),super_must_be_followed_by_an_argument_list_or_member_access:t(1034,e.DiagnosticCategory.Error,"super_must_be_followed_by_an_argument_list_or_member_access_1034","'super' must be followed by an argument list or member access."),Only_ambient_modules_can_use_quoted_names:t(1035,e.DiagnosticCategory.Error,"Only_ambient_modules_can_use_quoted_names_1035","Only ambient modules can use quoted names."),Statements_are_not_allowed_in_ambient_contexts:t(1036,e.DiagnosticCategory.Error,"Statements_are_not_allowed_in_ambient_contexts_1036","Statements are not allowed in ambient contexts."),A_declare_modifier_cannot_be_used_in_an_already_ambient_context:t(1038,e.DiagnosticCategory.Error,"A_declare_modifier_cannot_be_used_in_an_already_ambient_context_1038","A 'declare' modifier cannot be used in an already ambient context."),Initializers_are_not_allowed_in_ambient_contexts:t(1039,e.DiagnosticCategory.Error,"Initializers_are_not_allowed_in_ambient_contexts_1039","Initializers are not allowed in ambient contexts."),_0_modifier_cannot_be_used_in_an_ambient_context:t(1040,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_in_an_ambient_context_1040","'{0}' modifier cannot be used in an ambient context."),_0_modifier_cannot_be_used_with_a_class_declaration:t(1041,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_with_a_class_declaration_1041","'{0}' modifier cannot be used with a class declaration."),_0_modifier_cannot_be_used_here:t(1042,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_here_1042","'{0}' modifier cannot be used here."),_0_modifier_cannot_appear_on_a_data_property:t(1043,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_data_property_1043","'{0}' modifier cannot appear on a data property."),_0_modifier_cannot_appear_on_a_module_or_namespace_element:t(1044,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_module_or_namespace_element_1044","'{0}' modifier cannot appear on a module or namespace element."),A_0_modifier_cannot_be_used_with_an_interface_declaration:t(1045,e.DiagnosticCategory.Error,"A_0_modifier_cannot_be_used_with_an_interface_declaration_1045","A '{0}' modifier cannot be used with an interface declaration."),A_declare_modifier_is_required_for_a_top_level_declaration_in_a_d_ts_file:t(1046,e.DiagnosticCategory.Error,"A_declare_modifier_is_required_for_a_top_level_declaration_in_a_d_ts_file_1046","A 'declare' modifier is required for a top level declaration in a .d.ts file."),A_rest_parameter_cannot_be_optional:t(1047,e.DiagnosticCategory.Error,"A_rest_parameter_cannot_be_optional_1047","A rest parameter cannot be optional."),A_rest_parameter_cannot_have_an_initializer:t(1048,e.DiagnosticCategory.Error,"A_rest_parameter_cannot_have_an_initializer_1048","A rest parameter cannot have an initializer."),A_set_accessor_must_have_exactly_one_parameter:t(1049,e.DiagnosticCategory.Error,"A_set_accessor_must_have_exactly_one_parameter_1049","A 'set' accessor must have exactly one parameter."),A_set_accessor_cannot_have_an_optional_parameter:t(1051,e.DiagnosticCategory.Error,"A_set_accessor_cannot_have_an_optional_parameter_1051","A 'set' accessor cannot have an optional parameter."),A_set_accessor_parameter_cannot_have_an_initializer:t(1052,e.DiagnosticCategory.Error,"A_set_accessor_parameter_cannot_have_an_initializer_1052","A 'set' accessor parameter cannot have an initializer."),A_set_accessor_cannot_have_rest_parameter:t(1053,e.DiagnosticCategory.Error,"A_set_accessor_cannot_have_rest_parameter_1053","A 'set' accessor cannot have rest parameter."),A_get_accessor_cannot_have_parameters:t(1054,e.DiagnosticCategory.Error,"A_get_accessor_cannot_have_parameters_1054","A 'get' accessor cannot have parameters."),Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value:t(1055,e.DiagnosticCategory.Error,"Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Prom_1055","Type '{0}' is not a valid async function return type in ES5/ES3 because it does not refer to a Promise-compatible constructor value."),Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher:t(1056,e.DiagnosticCategory.Error,"Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher_1056","Accessors are only available when targeting ECMAScript 5 and higher."),An_async_function_or_method_must_have_a_valid_awaitable_return_type:t(1057,e.DiagnosticCategory.Error,"An_async_function_or_method_must_have_a_valid_awaitable_return_type_1057","An async function or method must have a valid awaitable return type."),The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1058,e.DiagnosticCategory.Error,"The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_t_1058","The return type of an async function must either be a valid promise or must not contain a callable 'then' member."),A_promise_must_have_a_then_method:t(1059,e.DiagnosticCategory.Error,"A_promise_must_have_a_then_method_1059","A promise must have a 'then' method."),The_first_parameter_of_the_then_method_of_a_promise_must_be_a_callback:t(1060,e.DiagnosticCategory.Error,"The_first_parameter_of_the_then_method_of_a_promise_must_be_a_callback_1060","The first parameter of the 'then' method of a promise must be a callback."),Enum_member_must_have_initializer:t(1061,e.DiagnosticCategory.Error,"Enum_member_must_have_initializer_1061","Enum member must have initializer."),Type_is_referenced_directly_or_indirectly_in_the_fulfillment_callback_of_its_own_then_method:t(1062,e.DiagnosticCategory.Error,"Type_is_referenced_directly_or_indirectly_in_the_fulfillment_callback_of_its_own_then_method_1062","Type is referenced directly or indirectly in the fulfillment callback of its own 'then' method."),An_export_assignment_cannot_be_used_in_a_namespace:t(1063,e.DiagnosticCategory.Error,"An_export_assignment_cannot_be_used_in_a_namespace_1063","An export assignment cannot be used in a namespace."),The_return_type_of_an_async_function_or_method_must_be_the_global_Promise_T_type:t(1064,e.DiagnosticCategory.Error,"The_return_type_of_an_async_function_or_method_must_be_the_global_Promise_T_type_1064","The return type of an async function or method must be the global Promise<T> type."),In_ambient_enum_declarations_member_initializer_must_be_constant_expression:t(1066,e.DiagnosticCategory.Error,"In_ambient_enum_declarations_member_initializer_must_be_constant_expression_1066","In ambient enum declarations member initializer must be constant expression."),Unexpected_token_A_constructor_method_accessor_or_property_was_expected:t(1068,e.DiagnosticCategory.Error,"Unexpected_token_A_constructor_method_accessor_or_property_was_expected_1068","Unexpected token. A constructor, method, accessor, or property was expected."),_0_modifier_cannot_appear_on_a_type_member:t(1070,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_type_member_1070","'{0}' modifier cannot appear on a type member."),_0_modifier_cannot_appear_on_an_index_signature:t(1071,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_an_index_signature_1071","'{0}' modifier cannot appear on an index signature."),A_0_modifier_cannot_be_used_with_an_import_declaration:t(1079,e.DiagnosticCategory.Error,"A_0_modifier_cannot_be_used_with_an_import_declaration_1079","A '{0}' modifier cannot be used with an import declaration."),Invalid_reference_directive_syntax:t(1084,e.DiagnosticCategory.Error,"Invalid_reference_directive_syntax_1084","Invalid 'reference' directive syntax."),Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher_Use_the_syntax_0:t(1085,e.DiagnosticCategory.Error,"Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher_Use_the_syntax_0_1085","Octal literals are not available when targeting ECMAScript 5 and higher. Use the syntax '{0}'."),An_accessor_cannot_be_declared_in_an_ambient_context:t(1086,e.DiagnosticCategory.Error,"An_accessor_cannot_be_declared_in_an_ambient_context_1086","An accessor cannot be declared in an ambient context."),_0_modifier_cannot_appear_on_a_constructor_declaration:t(1089,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_constructor_declaration_1089","'{0}' modifier cannot appear on a constructor declaration."),_0_modifier_cannot_appear_on_a_parameter:t(1090,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_parameter_1090","'{0}' modifier cannot appear on a parameter."),Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement:t(1091,e.DiagnosticCategory.Error,"Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement_1091","Only a single variable declaration is allowed in a 'for...in' statement."),Type_parameters_cannot_appear_on_a_constructor_declaration:t(1092,e.DiagnosticCategory.Error,"Type_parameters_cannot_appear_on_a_constructor_declaration_1092","Type parameters cannot appear on a constructor declaration."),Type_annotation_cannot_appear_on_a_constructor_declaration:t(1093,e.DiagnosticCategory.Error,"Type_annotation_cannot_appear_on_a_constructor_declaration_1093","Type annotation cannot appear on a constructor declaration."),An_accessor_cannot_have_type_parameters:t(1094,e.DiagnosticCategory.Error,"An_accessor_cannot_have_type_parameters_1094","An accessor cannot have type parameters."),A_set_accessor_cannot_have_a_return_type_annotation:t(1095,e.DiagnosticCategory.Error,"A_set_accessor_cannot_have_a_return_type_annotation_1095","A 'set' accessor cannot have a return type annotation."),An_index_signature_must_have_exactly_one_parameter:t(1096,e.DiagnosticCategory.Error,"An_index_signature_must_have_exactly_one_parameter_1096","An index signature must have exactly one parameter."),_0_list_cannot_be_empty:t(1097,e.DiagnosticCategory.Error,"_0_list_cannot_be_empty_1097","'{0}' list cannot be empty."),Type_parameter_list_cannot_be_empty:t(1098,e.DiagnosticCategory.Error,"Type_parameter_list_cannot_be_empty_1098","Type parameter list cannot be empty."),Type_argument_list_cannot_be_empty:t(1099,e.DiagnosticCategory.Error,"Type_argument_list_cannot_be_empty_1099","Type argument list cannot be empty."),Invalid_use_of_0_in_strict_mode:t(1100,e.DiagnosticCategory.Error,"Invalid_use_of_0_in_strict_mode_1100","Invalid use of '{0}' in strict mode."),with_statements_are_not_allowed_in_strict_mode:t(1101,e.DiagnosticCategory.Error,"with_statements_are_not_allowed_in_strict_mode_1101","'with' statements are not allowed in strict mode."),delete_cannot_be_called_on_an_identifier_in_strict_mode:t(1102,e.DiagnosticCategory.Error,"delete_cannot_be_called_on_an_identifier_in_strict_mode_1102","'delete' cannot be called on an identifier in strict mode."),A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator:t(1103,e.DiagnosticCategory.Error,"A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator_1103","A 'for-await-of' statement is only allowed within an async function or async generator."),A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement:t(1104,e.DiagnosticCategory.Error,"A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement_1104","A 'continue' statement can only be used within an enclosing iteration statement."),A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement:t(1105,e.DiagnosticCategory.Error,"A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement_1105","A 'break' statement can only be used within an enclosing iteration or switch statement."),Jump_target_cannot_cross_function_boundary:t(1107,e.DiagnosticCategory.Error,"Jump_target_cannot_cross_function_boundary_1107","Jump target cannot cross function boundary."),A_return_statement_can_only_be_used_within_a_function_body:t(1108,e.DiagnosticCategory.Error,"A_return_statement_can_only_be_used_within_a_function_body_1108","A 'return' statement can only be used within a function body."),Expression_expected:t(1109,e.DiagnosticCategory.Error,"Expression_expected_1109","Expression expected."),Type_expected:t(1110,e.DiagnosticCategory.Error,"Type_expected_1110","Type expected."),A_default_clause_cannot_appear_more_than_once_in_a_switch_statement:t(1113,e.DiagnosticCategory.Error,"A_default_clause_cannot_appear_more_than_once_in_a_switch_statement_1113","A 'default' clause cannot appear more than once in a 'switch' statement."),Duplicate_label_0:t(1114,e.DiagnosticCategory.Error,"Duplicate_label_0_1114","Duplicate label '{0}'."),A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement:t(1115,e.DiagnosticCategory.Error,"A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement_1115","A 'continue' statement can only jump to a label of an enclosing iteration statement."),A_break_statement_can_only_jump_to_a_label_of_an_enclosing_statement:t(1116,e.DiagnosticCategory.Error,"A_break_statement_can_only_jump_to_a_label_of_an_enclosing_statement_1116","A 'break' statement can only jump to a label of an enclosing statement."),An_object_literal_cannot_have_multiple_properties_with_the_same_name_in_strict_mode:t(1117,e.DiagnosticCategory.Error,"An_object_literal_cannot_have_multiple_properties_with_the_same_name_in_strict_mode_1117","An object literal cannot have multiple properties with the same name in strict mode."),An_object_literal_cannot_have_multiple_get_Slashset_accessors_with_the_same_name:t(1118,e.DiagnosticCategory.Error,"An_object_literal_cannot_have_multiple_get_Slashset_accessors_with_the_same_name_1118","An object literal cannot have multiple get/set accessors with the same name."),An_object_literal_cannot_have_property_and_accessor_with_the_same_name:t(1119,e.DiagnosticCategory.Error,"An_object_literal_cannot_have_property_and_accessor_with_the_same_name_1119","An object literal cannot have property and accessor with the same name."),An_export_assignment_cannot_have_modifiers:t(1120,e.DiagnosticCategory.Error,"An_export_assignment_cannot_have_modifiers_1120","An export assignment cannot have modifiers."),Octal_literals_are_not_allowed_in_strict_mode:t(1121,e.DiagnosticCategory.Error,"Octal_literals_are_not_allowed_in_strict_mode_1121","Octal literals are not allowed in strict mode."),A_tuple_type_element_list_cannot_be_empty:t(1122,e.DiagnosticCategory.Error,"A_tuple_type_element_list_cannot_be_empty_1122","A tuple type element list cannot be empty."),Variable_declaration_list_cannot_be_empty:t(1123,e.DiagnosticCategory.Error,"Variable_declaration_list_cannot_be_empty_1123","Variable declaration list cannot be empty."),Digit_expected:t(1124,e.DiagnosticCategory.Error,"Digit_expected_1124","Digit expected."),Hexadecimal_digit_expected:t(1125,e.DiagnosticCategory.Error,"Hexadecimal_digit_expected_1125","Hexadecimal digit expected."),Unexpected_end_of_text:t(1126,e.DiagnosticCategory.Error,"Unexpected_end_of_text_1126","Unexpected end of text."),Invalid_character:t(1127,e.DiagnosticCategory.Error,"Invalid_character_1127","Invalid character."),Declaration_or_statement_expected:t(1128,e.DiagnosticCategory.Error,"Declaration_or_statement_expected_1128","Declaration or statement expected."),Statement_expected:t(1129,e.DiagnosticCategory.Error,"Statement_expected_1129","Statement expected."),case_or_default_expected:t(1130,e.DiagnosticCategory.Error,"case_or_default_expected_1130","'case' or 'default' expected."),Property_or_signature_expected:t(1131,e.DiagnosticCategory.Error,"Property_or_signature_expected_1131","Property or signature expected."),Enum_member_expected:t(1132,e.DiagnosticCategory.Error,"Enum_member_expected_1132","Enum member expected."),Variable_declaration_expected:t(1134,e.DiagnosticCategory.Error,"Variable_declaration_expected_1134","Variable declaration expected."),Argument_expression_expected:t(1135,e.DiagnosticCategory.Error,"Argument_expression_expected_1135","Argument expression expected."),Property_assignment_expected:t(1136,e.DiagnosticCategory.Error,"Property_assignment_expected_1136","Property assignment expected."),Expression_or_comma_expected:t(1137,e.DiagnosticCategory.Error,"Expression_or_comma_expected_1137","Expression or comma expected."),Parameter_declaration_expected:t(1138,e.DiagnosticCategory.Error,"Parameter_declaration_expected_1138","Parameter declaration expected."),Type_parameter_declaration_expected:t(1139,e.DiagnosticCategory.Error,"Type_parameter_declaration_expected_1139","Type parameter declaration expected."),Type_argument_expected:t(1140,e.DiagnosticCategory.Error,"Type_argument_expected_1140","Type argument expected."),String_literal_expected:t(1141,e.DiagnosticCategory.Error,"String_literal_expected_1141","String literal expected."),Line_break_not_permitted_here:t(1142,e.DiagnosticCategory.Error,"Line_break_not_permitted_here_1142","Line break not permitted here."),or_expected:t(1144,e.DiagnosticCategory.Error,"or_expected_1144","'{' or ';' expected."),Declaration_expected:t(1146,e.DiagnosticCategory.Error,"Declaration_expected_1146","Declaration expected."),Import_declarations_in_a_namespace_cannot_reference_a_module:t(1147,e.DiagnosticCategory.Error,"Import_declarations_in_a_namespace_cannot_reference_a_module_1147","Import declarations in a namespace cannot reference a module."),Cannot_use_imports_exports_or_module_augmentations_when_module_is_none:t(1148,e.DiagnosticCategory.Error,"Cannot_use_imports_exports_or_module_augmentations_when_module_is_none_1148","Cannot use imports, exports, or module augmentations when '--module' is 'none'."),File_name_0_differs_from_already_included_file_name_1_only_in_casing:t(1149,e.DiagnosticCategory.Error,"File_name_0_differs_from_already_included_file_name_1_only_in_casing_1149","File name '{0}' differs from already included file name '{1}' only in casing."),new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead:t(1150,e.DiagnosticCategory.Error,"new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead_1150","'new T[]' cannot be used to create an array. Use 'new Array<T>()' instead."),const_declarations_must_be_initialized:t(1155,e.DiagnosticCategory.Error,"const_declarations_must_be_initialized_1155","'const' declarations must be initialized."),const_declarations_can_only_be_declared_inside_a_block:t(1156,e.DiagnosticCategory.Error,"const_declarations_can_only_be_declared_inside_a_block_1156","'const' declarations can only be declared inside a block."),let_declarations_can_only_be_declared_inside_a_block:t(1157,e.DiagnosticCategory.Error,"let_declarations_can_only_be_declared_inside_a_block_1157","'let' declarations can only be declared inside a block."),Unterminated_template_literal:t(1160,e.DiagnosticCategory.Error,"Unterminated_template_literal_1160","Unterminated template literal."),Unterminated_regular_expression_literal:t(1161,e.DiagnosticCategory.Error,"Unterminated_regular_expression_literal_1161","Unterminated regular expression literal."),An_object_member_cannot_be_declared_optional:t(1162,e.DiagnosticCategory.Error,"An_object_member_cannot_be_declared_optional_1162","An object member cannot be declared optional."),A_yield_expression_is_only_allowed_in_a_generator_body:t(1163,e.DiagnosticCategory.Error,"A_yield_expression_is_only_allowed_in_a_generator_body_1163","A 'yield' expression is only allowed in a generator body."),Computed_property_names_are_not_allowed_in_enums:t(1164,e.DiagnosticCategory.Error,"Computed_property_names_are_not_allowed_in_enums_1164","Computed property names are not allowed in enums."),A_computed_property_name_in_an_ambient_context_must_directly_refer_to_a_built_in_symbol:t(1165,e.DiagnosticCategory.Error,"A_computed_property_name_in_an_ambient_context_must_directly_refer_to_a_built_in_symbol_1165","A computed property name in an ambient context must directly refer to a built-in symbol."),A_computed_property_name_in_a_class_property_declaration_must_directly_refer_to_a_built_in_symbol:t(1166,e.DiagnosticCategory.Error,"A_computed_property_name_in_a_class_property_declaration_must_directly_refer_to_a_built_in_symbol_1166","A computed property name in a class property declaration must directly refer to a built-in symbol."),A_computed_property_name_in_a_method_overload_must_directly_refer_to_a_built_in_symbol:t(1168,e.DiagnosticCategory.Error,"A_computed_property_name_in_a_method_overload_must_directly_refer_to_a_built_in_symbol_1168","A computed property name in a method overload must directly refer to a built-in symbol."),A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol:t(1169,e.DiagnosticCategory.Error,"A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol_1169","A computed property name in an interface must directly refer to a built-in symbol."),A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol:t(1170,e.DiagnosticCategory.Error,"A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol_1170","A computed property name in a type literal must directly refer to a built-in symbol."),A_comma_expression_is_not_allowed_in_a_computed_property_name:t(1171,e.DiagnosticCategory.Error,"A_comma_expression_is_not_allowed_in_a_computed_property_name_1171","A comma expression is not allowed in a computed property name."),extends_clause_already_seen:t(1172,e.DiagnosticCategory.Error,"extends_clause_already_seen_1172","'extends' clause already seen."),extends_clause_must_precede_implements_clause:t(1173,e.DiagnosticCategory.Error,"extends_clause_must_precede_implements_clause_1173","'extends' clause must precede 'implements' clause."),Classes_can_only_extend_a_single_class:t(1174,e.DiagnosticCategory.Error,"Classes_can_only_extend_a_single_class_1174","Classes can only extend a single class."),implements_clause_already_seen:t(1175,e.DiagnosticCategory.Error,"implements_clause_already_seen_1175","'implements' clause already seen."),Interface_declaration_cannot_have_implements_clause:t(1176,e.DiagnosticCategory.Error,"Interface_declaration_cannot_have_implements_clause_1176","Interface declaration cannot have 'implements' clause."),Binary_digit_expected:t(1177,e.DiagnosticCategory.Error,"Binary_digit_expected_1177","Binary digit expected."),Octal_digit_expected:t(1178,e.DiagnosticCategory.Error,"Octal_digit_expected_1178","Octal digit expected."),Unexpected_token_expected:t(1179,e.DiagnosticCategory.Error,"Unexpected_token_expected_1179","Unexpected token. '{' expected."),Property_destructuring_pattern_expected:t(1180,e.DiagnosticCategory.Error,"Property_destructuring_pattern_expected_1180","Property destructuring pattern expected."),Array_element_destructuring_pattern_expected:t(1181,e.DiagnosticCategory.Error,"Array_element_destructuring_pattern_expected_1181","Array element destructuring pattern expected."),A_destructuring_declaration_must_have_an_initializer:t(1182,e.DiagnosticCategory.Error,"A_destructuring_declaration_must_have_an_initializer_1182","A destructuring declaration must have an initializer."),An_implementation_cannot_be_declared_in_ambient_contexts:t(1183,e.DiagnosticCategory.Error,"An_implementation_cannot_be_declared_in_ambient_contexts_1183","An implementation cannot be declared in ambient contexts."),Modifiers_cannot_appear_here:t(1184,e.DiagnosticCategory.Error,"Modifiers_cannot_appear_here_1184","Modifiers cannot appear here."),Merge_conflict_marker_encountered:t(1185,e.DiagnosticCategory.Error,"Merge_conflict_marker_encountered_1185","Merge conflict marker encountered."),A_rest_element_cannot_have_an_initializer:t(1186,e.DiagnosticCategory.Error,"A_rest_element_cannot_have_an_initializer_1186","A rest element cannot have an initializer."),A_parameter_property_may_not_be_declared_using_a_binding_pattern:t(1187,e.DiagnosticCategory.Error,"A_parameter_property_may_not_be_declared_using_a_binding_pattern_1187","A parameter property may not be declared using a binding pattern."),Only_a_single_variable_declaration_is_allowed_in_a_for_of_statement:t(1188,e.DiagnosticCategory.Error,"Only_a_single_variable_declaration_is_allowed_in_a_for_of_statement_1188","Only a single variable declaration is allowed in a 'for...of' statement."),The_variable_declaration_of_a_for_in_statement_cannot_have_an_initializer:t(1189,e.DiagnosticCategory.Error,"The_variable_declaration_of_a_for_in_statement_cannot_have_an_initializer_1189","The variable declaration of a 'for...in' statement cannot have an initializer."),The_variable_declaration_of_a_for_of_statement_cannot_have_an_initializer:t(1190,e.DiagnosticCategory.Error,"The_variable_declaration_of_a_for_of_statement_cannot_have_an_initializer_1190","The variable declaration of a 'for...of' statement cannot have an initializer."),An_import_declaration_cannot_have_modifiers:t(1191,e.DiagnosticCategory.Error,"An_import_declaration_cannot_have_modifiers_1191","An import declaration cannot have modifiers."),Module_0_has_no_default_export:t(1192,e.DiagnosticCategory.Error,"Module_0_has_no_default_export_1192","Module '{0}' has no default export."),An_export_declaration_cannot_have_modifiers:t(1193,e.DiagnosticCategory.Error,"An_export_declaration_cannot_have_modifiers_1193","An export declaration cannot have modifiers."),Export_declarations_are_not_permitted_in_a_namespace:t(1194,e.DiagnosticCategory.Error,"Export_declarations_are_not_permitted_in_a_namespace_1194","Export declarations are not permitted in a namespace."),Catch_clause_variable_cannot_have_a_type_annotation:t(1196,e.DiagnosticCategory.Error,"Catch_clause_variable_cannot_have_a_type_annotation_1196","Catch clause variable cannot have a type annotation."),Catch_clause_variable_cannot_have_an_initializer:t(1197,e.DiagnosticCategory.Error,"Catch_clause_variable_cannot_have_an_initializer_1197","Catch clause variable cannot have an initializer."),An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive:t(1198,e.DiagnosticCategory.Error,"An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive_1198","An extended Unicode escape value must be between 0x0 and 0x10FFFF inclusive."),Unterminated_Unicode_escape_sequence:t(1199,e.DiagnosticCategory.Error,"Unterminated_Unicode_escape_sequence_1199","Unterminated Unicode escape sequence."),Line_terminator_not_permitted_before_arrow:t(1200,e.DiagnosticCategory.Error,"Line_terminator_not_permitted_before_arrow_1200","Line terminator not permitted before arrow."),Import_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_import_Asterisk_as_ns_from_mod_import_a_from_mod_import_d_from_mod_or_another_module_format_instead:t(1202,e.DiagnosticCategory.Error,"Import_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_import_Asterisk_as_1202","Import assignment cannot be used when targeting ECMAScript modules. Consider using 'import * as ns from \"mod\"', 'import {a} from \"mod\"', 'import d from \"mod\"', or another module format instead."),Export_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_export_default_or_another_module_format_instead:t(1203,e.DiagnosticCategory.Error,"Export_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_export_default_or__1203","Export assignment cannot be used when targeting ECMAScript modules. Consider using 'export default' or another module format instead."),Cannot_re_export_a_type_when_the_isolatedModules_flag_is_provided:t(1205,e.DiagnosticCategory.Error,"Cannot_re_export_a_type_when_the_isolatedModules_flag_is_provided_1205","Cannot re-export a type when the '--isolatedModules' flag is provided."),Decorators_are_not_valid_here:t(1206,e.DiagnosticCategory.Error,"Decorators_are_not_valid_here_1206","Decorators are not valid here."),Decorators_cannot_be_applied_to_multiple_get_Slashset_accessors_of_the_same_name:t(1207,e.DiagnosticCategory.Error,"Decorators_cannot_be_applied_to_multiple_get_Slashset_accessors_of_the_same_name_1207","Decorators cannot be applied to multiple get/set accessors of the same name."),Cannot_compile_namespaces_when_the_isolatedModules_flag_is_provided:t(1208,e.DiagnosticCategory.Error,"Cannot_compile_namespaces_when_the_isolatedModules_flag_is_provided_1208","Cannot compile namespaces when the '--isolatedModules' flag is provided."),Ambient_const_enums_are_not_allowed_when_the_isolatedModules_flag_is_provided:t(1209,e.DiagnosticCategory.Error,"Ambient_const_enums_are_not_allowed_when_the_isolatedModules_flag_is_provided_1209","Ambient const enums are not allowed when the '--isolatedModules' flag is provided."),Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode:t(1210,e.DiagnosticCategory.Error,"Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode_1210","Invalid use of '{0}'. Class definitions are automatically in strict mode."),A_class_declaration_without_the_default_modifier_must_have_a_name:t(1211,e.DiagnosticCategory.Error,"A_class_declaration_without_the_default_modifier_must_have_a_name_1211","A class declaration without the 'default' modifier must have a name."),Identifier_expected_0_is_a_reserved_word_in_strict_mode:t(1212,e.DiagnosticCategory.Error,"Identifier_expected_0_is_a_reserved_word_in_strict_mode_1212","Identifier expected. '{0}' is a reserved word in strict mode."),Identifier_expected_0_is_a_reserved_word_in_strict_mode_Class_definitions_are_automatically_in_strict_mode:t(1213,e.DiagnosticCategory.Error,"Identifier_expected_0_is_a_reserved_word_in_strict_mode_Class_definitions_are_automatically_in_stric_1213","Identifier expected. '{0}' is a reserved word in strict mode. Class definitions are automatically in strict mode."),Identifier_expected_0_is_a_reserved_word_in_strict_mode_Modules_are_automatically_in_strict_mode:t(1214,e.DiagnosticCategory.Error,"Identifier_expected_0_is_a_reserved_word_in_strict_mode_Modules_are_automatically_in_strict_mode_1214","Identifier expected. '{0}' is a reserved word in strict mode. Modules are automatically in strict mode."),Invalid_use_of_0_Modules_are_automatically_in_strict_mode:t(1215,e.DiagnosticCategory.Error,"Invalid_use_of_0_Modules_are_automatically_in_strict_mode_1215","Invalid use of '{0}'. Modules are automatically in strict mode."),Identifier_expected_esModule_is_reserved_as_an_exported_marker_when_transforming_ECMAScript_modules:t(1216,e.DiagnosticCategory.Error,"Identifier_expected_esModule_is_reserved_as_an_exported_marker_when_transforming_ECMAScript_modules_1216","Identifier expected. '__esModule' is reserved as an exported marker when transforming ECMAScript modules."),Export_assignment_is_not_supported_when_module_flag_is_system:t(1218,e.DiagnosticCategory.Error,"Export_assignment_is_not_supported_when_module_flag_is_system_1218","Export assignment is not supported when '--module' flag is 'system'."),Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_to_remove_this_warning:t(1219,e.DiagnosticCategory.Error,"Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_t_1219","Experimental support for decorators is a feature that is subject to change in a future release. Set the 'experimentalDecorators' option to remove this warning."),Generators_are_only_available_when_targeting_ECMAScript_2015_or_higher:t(1220,e.DiagnosticCategory.Error,"Generators_are_only_available_when_targeting_ECMAScript_2015_or_higher_1220","Generators are only available when targeting ECMAScript 2015 or higher."),Generators_are_not_allowed_in_an_ambient_context:t(1221,e.DiagnosticCategory.Error,"Generators_are_not_allowed_in_an_ambient_context_1221","Generators are not allowed in an ambient context."),An_overload_signature_cannot_be_declared_as_a_generator:t(1222,e.DiagnosticCategory.Error,"An_overload_signature_cannot_be_declared_as_a_generator_1222","An overload signature cannot be declared as a generator."),_0_tag_already_specified:t(1223,e.DiagnosticCategory.Error,"_0_tag_already_specified_1223","'{0}' tag already specified."),Signature_0_must_be_a_type_predicate:t(1224,e.DiagnosticCategory.Error,"Signature_0_must_be_a_type_predicate_1224","Signature '{0}' must be a type predicate."),Cannot_find_parameter_0:t(1225,e.DiagnosticCategory.Error,"Cannot_find_parameter_0_1225","Cannot find parameter '{0}'."),Type_predicate_0_is_not_assignable_to_1:t(1226,e.DiagnosticCategory.Error,"Type_predicate_0_is_not_assignable_to_1_1226","Type predicate '{0}' is not assignable to '{1}'."),Parameter_0_is_not_in_the_same_position_as_parameter_1:t(1227,e.DiagnosticCategory.Error,"Parameter_0_is_not_in_the_same_position_as_parameter_1_1227","Parameter '{0}' is not in the same position as parameter '{1}'."),A_type_predicate_is_only_allowed_in_return_type_position_for_functions_and_methods:t(1228,e.DiagnosticCategory.Error,"A_type_predicate_is_only_allowed_in_return_type_position_for_functions_and_methods_1228","A type predicate is only allowed in return type position for functions and methods."),A_type_predicate_cannot_reference_a_rest_parameter:t(1229,e.DiagnosticCategory.Error,"A_type_predicate_cannot_reference_a_rest_parameter_1229","A type predicate cannot reference a rest parameter."),A_type_predicate_cannot_reference_element_0_in_a_binding_pattern:t(1230,e.DiagnosticCategory.Error,"A_type_predicate_cannot_reference_element_0_in_a_binding_pattern_1230","A type predicate cannot reference element '{0}' in a binding pattern."),An_export_assignment_can_only_be_used_in_a_module:t(1231,e.DiagnosticCategory.Error,"An_export_assignment_can_only_be_used_in_a_module_1231","An export assignment can only be used in a module."),An_import_declaration_can_only_be_used_in_a_namespace_or_module:t(1232,e.DiagnosticCategory.Error,"An_import_declaration_can_only_be_used_in_a_namespace_or_module_1232","An import declaration can only be used in a namespace or module."),An_export_declaration_can_only_be_used_in_a_module:t(1233,e.DiagnosticCategory.Error,"An_export_declaration_can_only_be_used_in_a_module_1233","An export declaration can only be used in a module."),An_ambient_module_declaration_is_only_allowed_at_the_top_level_in_a_file:t(1234,e.DiagnosticCategory.Error,"An_ambient_module_declaration_is_only_allowed_at_the_top_level_in_a_file_1234","An ambient module declaration is only allowed at the top level in a file."),A_namespace_declaration_is_only_allowed_in_a_namespace_or_module:t(1235,e.DiagnosticCategory.Error,"A_namespace_declaration_is_only_allowed_in_a_namespace_or_module_1235","A namespace declaration is only allowed in a namespace or module."),The_return_type_of_a_property_decorator_function_must_be_either_void_or_any:t(1236,e.DiagnosticCategory.Error,"The_return_type_of_a_property_decorator_function_must_be_either_void_or_any_1236","The return type of a property decorator function must be either 'void' or 'any'."),The_return_type_of_a_parameter_decorator_function_must_be_either_void_or_any:t(1237,e.DiagnosticCategory.Error,"The_return_type_of_a_parameter_decorator_function_must_be_either_void_or_any_1237","The return type of a parameter decorator function must be either 'void' or 'any'."),Unable_to_resolve_signature_of_class_decorator_when_called_as_an_expression:t(1238,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_class_decorator_when_called_as_an_expression_1238","Unable to resolve signature of class decorator when called as an expression."),Unable_to_resolve_signature_of_parameter_decorator_when_called_as_an_expression:t(1239,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_parameter_decorator_when_called_as_an_expression_1239","Unable to resolve signature of parameter decorator when called as an expression."),Unable_to_resolve_signature_of_property_decorator_when_called_as_an_expression:t(1240,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_property_decorator_when_called_as_an_expression_1240","Unable to resolve signature of property decorator when called as an expression."),Unable_to_resolve_signature_of_method_decorator_when_called_as_an_expression:t(1241,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_method_decorator_when_called_as_an_expression_1241","Unable to resolve signature of method decorator when called as an expression."),abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration:t(1242,e.DiagnosticCategory.Error,"abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration_1242","'abstract' modifier can only appear on a class, method, or property declaration."),_0_modifier_cannot_be_used_with_1_modifier:t(1243,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_with_1_modifier_1243","'{0}' modifier cannot be used with '{1}' modifier."),Abstract_methods_can_only_appear_within_an_abstract_class:t(1244,e.DiagnosticCategory.Error,"Abstract_methods_can_only_appear_within_an_abstract_class_1244","Abstract methods can only appear within an abstract class."),Method_0_cannot_have_an_implementation_because_it_is_marked_abstract:t(1245,e.DiagnosticCategory.Error,"Method_0_cannot_have_an_implementation_because_it_is_marked_abstract_1245","Method '{0}' cannot have an implementation because it is marked abstract."),An_interface_property_cannot_have_an_initializer:t(1246,e.DiagnosticCategory.Error,"An_interface_property_cannot_have_an_initializer_1246","An interface property cannot have an initializer."),A_type_literal_property_cannot_have_an_initializer:t(1247,e.DiagnosticCategory.Error,"A_type_literal_property_cannot_have_an_initializer_1247","A type literal property cannot have an initializer."),A_class_member_cannot_have_the_0_keyword:t(1248,e.DiagnosticCategory.Error,"A_class_member_cannot_have_the_0_keyword_1248","A class member cannot have the '{0}' keyword."),A_decorator_can_only_decorate_a_method_implementation_not_an_overload:t(1249,e.DiagnosticCategory.Error,"A_decorator_can_only_decorate_a_method_implementation_not_an_overload_1249","A decorator can only decorate a method implementation, not an overload."),Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5:t(1250,e.DiagnosticCategory.Error,"Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_1250","Function declarations are not allowed inside blocks in strict mode when targeting 'ES3' or 'ES5'."),Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Class_definitions_are_automatically_in_strict_mode:t(1251,e.DiagnosticCategory.Error,"Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Class_d_1251","Function declarations are not allowed inside blocks in strict mode when targeting 'ES3' or 'ES5'. Class definitions are automatically in strict mode."),Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Modules_are_automatically_in_strict_mode:t(1252,e.DiagnosticCategory.Error,"Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Modules_1252","Function declarations are not allowed inside blocks in strict mode when targeting 'ES3' or 'ES5'. Modules are automatically in strict mode."),_0_tag_cannot_be_used_independently_as_a_top_level_JSDoc_tag:t(1253,e.DiagnosticCategory.Error,"_0_tag_cannot_be_used_independently_as_a_top_level_JSDoc_tag_1253","'{0}' tag cannot be used independently as a top level JSDoc tag."),A_const_initializer_in_an_ambient_context_must_be_a_string_or_numeric_literal:t(1254,e.DiagnosticCategory.Error,"A_const_initializer_in_an_ambient_context_must_be_a_string_or_numeric_literal_1254","A 'const' initializer in an ambient context must be a string or numeric literal."),with_statements_are_not_allowed_in_an_async_function_block:t(1300,e.DiagnosticCategory.Error,"with_statements_are_not_allowed_in_an_async_function_block_1300","'with' statements are not allowed in an async function block."),await_expression_is_only_allowed_within_an_async_function:t(1308,e.DiagnosticCategory.Error,"await_expression_is_only_allowed_within_an_async_function_1308","'await' expression is only allowed within an async function."),can_only_be_used_in_an_object_literal_property_inside_a_destructuring_assignment:t(1312,e.DiagnosticCategory.Error,"can_only_be_used_in_an_object_literal_property_inside_a_destructuring_assignment_1312","'=' can only be used in an object literal property inside a destructuring assignment."),The_body_of_an_if_statement_cannot_be_the_empty_statement:t(1313,e.DiagnosticCategory.Error,"The_body_of_an_if_statement_cannot_be_the_empty_statement_1313","The body of an 'if' statement cannot be the empty statement."),Global_module_exports_may_only_appear_in_module_files:t(1314,e.DiagnosticCategory.Error,"Global_module_exports_may_only_appear_in_module_files_1314","Global module exports may only appear in module files."),Global_module_exports_may_only_appear_in_declaration_files:t(1315,e.DiagnosticCategory.Error,"Global_module_exports_may_only_appear_in_declaration_files_1315","Global module exports may only appear in declaration files."),Global_module_exports_may_only_appear_at_top_level:t(1316,e.DiagnosticCategory.Error,"Global_module_exports_may_only_appear_at_top_level_1316","Global module exports may only appear at top level."),A_parameter_property_cannot_be_declared_using_a_rest_parameter:t(1317,e.DiagnosticCategory.Error,"A_parameter_property_cannot_be_declared_using_a_rest_parameter_1317","A parameter property cannot be declared using a rest parameter."),An_abstract_accessor_cannot_have_an_implementation:t(1318,e.DiagnosticCategory.Error,"An_abstract_accessor_cannot_have_an_implementation_1318","An abstract accessor cannot have an implementation."),A_default_export_can_only_be_used_in_an_ECMAScript_style_module:t(1319,e.DiagnosticCategory.Error,"A_default_export_can_only_be_used_in_an_ECMAScript_style_module_1319","A default export can only be used in an ECMAScript-style module."),Type_of_await_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1320,e.DiagnosticCategory.Error,"Type_of_await_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member_1320","Type of 'await' operand must either be a valid promise or must not contain a callable 'then' member."),Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1321,e.DiagnosticCategory.Error,"Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_cal_1321","Type of 'yield' operand in an async generator must either be a valid promise or must not contain a callable 'then' member."),Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1322,e.DiagnosticCategory.Error,"Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_con_1322","Type of iterated elements of a 'yield*' operand must either be a valid promise or must not contain a callable 'then' member."),Dynamic_import_cannot_be_used_when_targeting_ECMAScript_2015_modules:t(1323,e.DiagnosticCategory.Error,"Dynamic_import_cannot_be_used_when_targeting_ECMAScript_2015_modules_1323","Dynamic import cannot be used when targeting ECMAScript 2015 modules."),Dynamic_import_must_have_one_specifier_as_an_argument:t(1324,e.DiagnosticCategory.Error,"Dynamic_import_must_have_one_specifier_as_an_argument_1324","Dynamic import must have one specifier as an argument."),Specifier_of_dynamic_import_cannot_be_spread_element:t(1325,e.DiagnosticCategory.Error,"Specifier_of_dynamic_import_cannot_be_spread_element_1325","Specifier of dynamic import cannot be spread element."),Dynamic_import_cannot_have_type_arguments:t(1326,e.DiagnosticCategory.Error,"Dynamic_import_cannot_have_type_arguments_1326","Dynamic import cannot have type arguments"),String_literal_with_double_quotes_expected:t(1327,e.DiagnosticCategory.Error,"String_literal_with_double_quotes_expected_1327","String literal with double quotes expected."),Property_value_can_only_be_string_literal_numeric_literal_true_false_null_object_literal_or_array_literal:t(1328,e.DiagnosticCategory.Error,"Property_value_can_only_be_string_literal_numeric_literal_true_false_null_object_literal_or_array_li_1328","Property value can only be string literal, numeric literal, 'true', 'false', 'null', object literal or array literal."),_0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0:t(1329,e.DiagnosticCategory.Error,"_0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write__1329","'{0}' accepts too few arguments to be used as a decorator here. Did you mean to call it first and write '@{0}()'?"),Duplicate_identifier_0:t(2300,e.DiagnosticCategory.Error,"Duplicate_identifier_0_2300","Duplicate identifier '{0}'."),Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor:t(2301,e.DiagnosticCategory.Error,"Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor_2301","Initializer of instance member variable '{0}' cannot reference identifier '{1}' declared in the constructor."),Static_members_cannot_reference_class_type_parameters:t(2302,e.DiagnosticCategory.Error,"Static_members_cannot_reference_class_type_parameters_2302","Static members cannot reference class type parameters."),Circular_definition_of_import_alias_0:t(2303,e.DiagnosticCategory.Error,"Circular_definition_of_import_alias_0_2303","Circular definition of import alias '{0}'."),Cannot_find_name_0:t(2304,e.DiagnosticCategory.Error,"Cannot_find_name_0_2304","Cannot find name '{0}'."),Module_0_has_no_exported_member_1:t(2305,e.DiagnosticCategory.Error,"Module_0_has_no_exported_member_1_2305","Module '{0}' has no exported member '{1}'."),File_0_is_not_a_module:t(2306,e.DiagnosticCategory.Error,"File_0_is_not_a_module_2306","File '{0}' is not a module."),Cannot_find_module_0:t(2307,e.DiagnosticCategory.Error,"Cannot_find_module_0_2307","Cannot find module '{0}'."),Module_0_has_already_exported_a_member_named_1_Consider_explicitly_re_exporting_to_resolve_the_ambiguity:t(2308,e.DiagnosticCategory.Error,"Module_0_has_already_exported_a_member_named_1_Consider_explicitly_re_exporting_to_resolve_the_ambig_2308","Module {0} has already exported a member named '{1}'. Consider explicitly re-exporting to resolve the ambiguity."),An_export_assignment_cannot_be_used_in_a_module_with_other_exported_elements:t(2309,e.DiagnosticCategory.Error,"An_export_assignment_cannot_be_used_in_a_module_with_other_exported_elements_2309","An export assignment cannot be used in a module with other exported elements."),Type_0_recursively_references_itself_as_a_base_type:t(2310,e.DiagnosticCategory.Error,"Type_0_recursively_references_itself_as_a_base_type_2310","Type '{0}' recursively references itself as a base type."),A_class_may_only_extend_another_class:t(2311,e.DiagnosticCategory.Error,"A_class_may_only_extend_another_class_2311","A class may only extend another class."),An_interface_may_only_extend_a_class_or_another_interface:t(2312,e.DiagnosticCategory.Error,"An_interface_may_only_extend_a_class_or_another_interface_2312","An interface may only extend a class or another interface."),Type_parameter_0_has_a_circular_constraint:t(2313,e.DiagnosticCategory.Error,"Type_parameter_0_has_a_circular_constraint_2313","Type parameter '{0}' has a circular constraint."),Generic_type_0_requires_1_type_argument_s:t(2314,e.DiagnosticCategory.Error,"Generic_type_0_requires_1_type_argument_s_2314","Generic type '{0}' requires {1} type argument(s)."),Type_0_is_not_generic:t(2315,e.DiagnosticCategory.Error,"Type_0_is_not_generic_2315","Type '{0}' is not generic."),Global_type_0_must_be_a_class_or_interface_type:t(2316,e.DiagnosticCategory.Error,"Global_type_0_must_be_a_class_or_interface_type_2316","Global type '{0}' must be a class or interface type."),Global_type_0_must_have_1_type_parameter_s:t(2317,e.DiagnosticCategory.Error,"Global_type_0_must_have_1_type_parameter_s_2317","Global type '{0}' must have {1} type parameter(s)."),Cannot_find_global_type_0:t(2318,e.DiagnosticCategory.Error,"Cannot_find_global_type_0_2318","Cannot find global type '{0}'."),Named_property_0_of_types_1_and_2_are_not_identical:t(2319,e.DiagnosticCategory.Error,"Named_property_0_of_types_1_and_2_are_not_identical_2319","Named property '{0}' of types '{1}' and '{2}' are not identical."),Interface_0_cannot_simultaneously_extend_types_1_and_2:t(2320,e.DiagnosticCategory.Error,"Interface_0_cannot_simultaneously_extend_types_1_and_2_2320","Interface '{0}' cannot simultaneously extend types '{1}' and '{2}'."),Excessive_stack_depth_comparing_types_0_and_1:t(2321,e.DiagnosticCategory.Error,"Excessive_stack_depth_comparing_types_0_and_1_2321","Excessive stack depth comparing types '{0}' and '{1}'."),Type_0_is_not_assignable_to_type_1:t(2322,e.DiagnosticCategory.Error,"Type_0_is_not_assignable_to_type_1_2322","Type '{0}' is not assignable to type '{1}'."),Cannot_redeclare_exported_variable_0:t(2323,e.DiagnosticCategory.Error,"Cannot_redeclare_exported_variable_0_2323","Cannot redeclare exported variable '{0}'."),Property_0_is_missing_in_type_1:t(2324,e.DiagnosticCategory.Error,"Property_0_is_missing_in_type_1_2324","Property '{0}' is missing in type '{1}'."),Property_0_is_private_in_type_1_but_not_in_type_2:t(2325,e.DiagnosticCategory.Error,"Property_0_is_private_in_type_1_but_not_in_type_2_2325","Property '{0}' is private in type '{1}' but not in type '{2}'."),Types_of_property_0_are_incompatible:t(2326,e.DiagnosticCategory.Error,"Types_of_property_0_are_incompatible_2326","Types of property '{0}' are incompatible."),Property_0_is_optional_in_type_1_but_required_in_type_2:t(2327,e.DiagnosticCategory.Error,"Property_0_is_optional_in_type_1_but_required_in_type_2_2327","Property '{0}' is optional in type '{1}' but required in type '{2}'."),Types_of_parameters_0_and_1_are_incompatible:t(2328,e.DiagnosticCategory.Error,"Types_of_parameters_0_and_1_are_incompatible_2328","Types of parameters '{0}' and '{1}' are incompatible."),Index_signature_is_missing_in_type_0:t(2329,e.DiagnosticCategory.Error,"Index_signature_is_missing_in_type_0_2329","Index signature is missing in type '{0}'."),Index_signatures_are_incompatible:t(2330,e.DiagnosticCategory.Error,"Index_signatures_are_incompatible_2330","Index signatures are incompatible."),this_cannot_be_referenced_in_a_module_or_namespace_body:t(2331,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_a_module_or_namespace_body_2331","'this' cannot be referenced in a module or namespace body."),this_cannot_be_referenced_in_current_location:t(2332,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_current_location_2332","'this' cannot be referenced in current location."),this_cannot_be_referenced_in_constructor_arguments:t(2333,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_constructor_arguments_2333","'this' cannot be referenced in constructor arguments."),this_cannot_be_referenced_in_a_static_property_initializer:t(2334,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_a_static_property_initializer_2334","'this' cannot be referenced in a static property initializer."),super_can_only_be_referenced_in_a_derived_class:t(2335,e.DiagnosticCategory.Error,"super_can_only_be_referenced_in_a_derived_class_2335","'super' can only be referenced in a derived class."),super_cannot_be_referenced_in_constructor_arguments:t(2336,e.DiagnosticCategory.Error,"super_cannot_be_referenced_in_constructor_arguments_2336","'super' cannot be referenced in constructor arguments."),Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors:t(2337,e.DiagnosticCategory.Error,"Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors_2337","Super calls are not permitted outside constructors or in nested functions inside constructors."),super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_derived_class:t(2338,e.DiagnosticCategory.Error,"super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_der_2338","'super' property access is permitted only in a constructor, member function, or member accessor of a derived class."),Property_0_does_not_exist_on_type_1:t(2339,e.DiagnosticCategory.Error,"Property_0_does_not_exist_on_type_1_2339","Property '{0}' does not exist on type '{1}'."),Only_public_and_protected_methods_of_the_base_class_are_accessible_via_the_super_keyword:t(2340,e.DiagnosticCategory.Error,"Only_public_and_protected_methods_of_the_base_class_are_accessible_via_the_super_keyword_2340","Only public and protected methods of the base class are accessible via the 'super' keyword."),Property_0_is_private_and_only_accessible_within_class_1:t(2341,e.DiagnosticCategory.Error,"Property_0_is_private_and_only_accessible_within_class_1_2341","Property '{0}' is private and only accessible within class '{1}'."),An_index_expression_argument_must_be_of_type_string_number_symbol_or_any:t(2342,e.DiagnosticCategory.Error,"An_index_expression_argument_must_be_of_type_string_number_symbol_or_any_2342","An index expression argument must be of type 'string', 'number', 'symbol', or 'any'."),This_syntax_requires_an_imported_helper_named_1_but_module_0_has_no_exported_member_1:t(2343,e.DiagnosticCategory.Error,"This_syntax_requires_an_imported_helper_named_1_but_module_0_has_no_exported_member_1_2343","This syntax requires an imported helper named '{1}', but module '{0}' has no exported member '{1}'."),Type_0_does_not_satisfy_the_constraint_1:t(2344,e.DiagnosticCategory.Error,"Type_0_does_not_satisfy_the_constraint_1_2344","Type '{0}' does not satisfy the constraint '{1}'."),Argument_of_type_0_is_not_assignable_to_parameter_of_type_1:t(2345,e.DiagnosticCategory.Error,"Argument_of_type_0_is_not_assignable_to_parameter_of_type_1_2345","Argument of type '{0}' is not assignable to parameter of type '{1}'."),Call_target_does_not_contain_any_signatures:t(2346,e.DiagnosticCategory.Error,"Call_target_does_not_contain_any_signatures_2346","Call target does not contain any signatures."),Untyped_function_calls_may_not_accept_type_arguments:t(2347,e.DiagnosticCategory.Error,"Untyped_function_calls_may_not_accept_type_arguments_2347","Untyped function calls may not accept type arguments."),Value_of_type_0_is_not_callable_Did_you_mean_to_include_new:t(2348,e.DiagnosticCategory.Error,"Value_of_type_0_is_not_callable_Did_you_mean_to_include_new_2348","Value of type '{0}' is not callable. Did you mean to include 'new'?"),Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures:t(2349,e.DiagnosticCategory.Error,"Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatur_2349","Cannot invoke an expression whose type lacks a call signature. Type '{0}' has no compatible call signatures."),Only_a_void_function_can_be_called_with_the_new_keyword:t(2350,e.DiagnosticCategory.Error,"Only_a_void_function_can_be_called_with_the_new_keyword_2350","Only a void function can be called with the 'new' keyword."),Cannot_use_new_with_an_expression_whose_type_lacks_a_call_or_construct_signature:t(2351,e.DiagnosticCategory.Error,"Cannot_use_new_with_an_expression_whose_type_lacks_a_call_or_construct_signature_2351","Cannot use 'new' with an expression whose type lacks a call or construct signature."),Type_0_cannot_be_converted_to_type_1:t(2352,e.DiagnosticCategory.Error,"Type_0_cannot_be_converted_to_type_1_2352","Type '{0}' cannot be converted to type '{1}'."),Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1:t(2353,e.DiagnosticCategory.Error,"Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1_2353","Object literal may only specify known properties, and '{0}' does not exist in type '{1}'."),This_syntax_requires_an_imported_helper_but_module_0_cannot_be_found:t(2354,e.DiagnosticCategory.Error,"This_syntax_requires_an_imported_helper_but_module_0_cannot_be_found_2354","This syntax requires an imported helper but module '{0}' cannot be found."),A_function_whose_declared_type_is_neither_void_nor_any_must_return_a_value:t(2355,e.DiagnosticCategory.Error,"A_function_whose_declared_type_is_neither_void_nor_any_must_return_a_value_2355","A function whose declared type is neither 'void' nor 'any' must return a value."),An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type:t(2356,e.DiagnosticCategory.Error,"An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type_2356","An arithmetic operand must be of type 'any', 'number' or an enum type."),The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access:t(2357,e.DiagnosticCategory.Error,"The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access_2357","The operand of an increment or decrement operator must be a variable or a property access."),The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_parameter:t(2358,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_paramete_2358","The left-hand side of an 'instanceof' expression must be of type 'any', an object type or a type parameter."),The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_Function_interface_type:t(2359,e.DiagnosticCategory.Error,"The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_F_2359","The right-hand side of an 'instanceof' expression must be of type 'any' or of a type assignable to the 'Function' interface type."),The_left_hand_side_of_an_in_expression_must_be_of_type_any_string_number_or_symbol:t(2360,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_in_expression_must_be_of_type_any_string_number_or_symbol_2360","The left-hand side of an 'in' expression must be of type 'any', 'string', 'number', or 'symbol'."),The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter:t(2361,e.DiagnosticCategory.Error,"The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter_2361","The right-hand side of an 'in' expression must be of type 'any', an object type or a type parameter."),The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type:t(2362,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type_2362","The left-hand side of an arithmetic operation must be of type 'any', 'number' or an enum type."),The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type:t(2363,e.DiagnosticCategory.Error,"The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type_2363","The right-hand side of an arithmetic operation must be of type 'any', 'number' or an enum type."),The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access:t(2364,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access_2364","The left-hand side of an assignment expression must be a variable or a property access."),Operator_0_cannot_be_applied_to_types_1_and_2:t(2365,e.DiagnosticCategory.Error,"Operator_0_cannot_be_applied_to_types_1_and_2_2365","Operator '{0}' cannot be applied to types '{1}' and '{2}'."),Function_lacks_ending_return_statement_and_return_type_does_not_include_undefined:t(2366,e.DiagnosticCategory.Error,"Function_lacks_ending_return_statement_and_return_type_does_not_include_undefined_2366","Function lacks ending return statement and return type does not include 'undefined'."),Type_parameter_name_cannot_be_0:t(2368,e.DiagnosticCategory.Error,"Type_parameter_name_cannot_be_0_2368","Type parameter name cannot be '{0}'."),A_parameter_property_is_only_allowed_in_a_constructor_implementation:t(2369,e.DiagnosticCategory.Error,"A_parameter_property_is_only_allowed_in_a_constructor_implementation_2369","A parameter property is only allowed in a constructor implementation."),A_rest_parameter_must_be_of_an_array_type:t(2370,e.DiagnosticCategory.Error,"A_rest_parameter_must_be_of_an_array_type_2370","A rest parameter must be of an array type."),A_parameter_initializer_is_only_allowed_in_a_function_or_constructor_implementation:t(2371,e.DiagnosticCategory.Error,"A_parameter_initializer_is_only_allowed_in_a_function_or_constructor_implementation_2371","A parameter initializer is only allowed in a function or constructor implementation."),Parameter_0_cannot_be_referenced_in_its_initializer:t(2372,e.DiagnosticCategory.Error,"Parameter_0_cannot_be_referenced_in_its_initializer_2372","Parameter '{0}' cannot be referenced in its initializer."),Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it:t(2373,e.DiagnosticCategory.Error,"Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it_2373","Initializer of parameter '{0}' cannot reference identifier '{1}' declared after it."),Duplicate_string_index_signature:t(2374,e.DiagnosticCategory.Error,"Duplicate_string_index_signature_2374","Duplicate string index signature."),Duplicate_number_index_signature:t(2375,e.DiagnosticCategory.Error,"Duplicate_number_index_signature_2375","Duplicate number index signature."),A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_properties_or_has_parameter_properties:t(2376,e.DiagnosticCategory.Error,"A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_proper_2376","A 'super' call must be the first statement in the constructor when a class contains initialized properties or has parameter properties."),Constructors_for_derived_classes_must_contain_a_super_call:t(2377,e.DiagnosticCategory.Error,"Constructors_for_derived_classes_must_contain_a_super_call_2377","Constructors for derived classes must contain a 'super' call."),A_get_accessor_must_return_a_value:t(2378,e.DiagnosticCategory.Error,"A_get_accessor_must_return_a_value_2378","A 'get' accessor must return a value."),Getter_and_setter_accessors_do_not_agree_in_visibility:t(2379,e.DiagnosticCategory.Error,"Getter_and_setter_accessors_do_not_agree_in_visibility_2379","Getter and setter accessors do not agree in visibility."),get_and_set_accessor_must_have_the_same_type:t(2380,e.DiagnosticCategory.Error,"get_and_set_accessor_must_have_the_same_type_2380","'get' and 'set' accessor must have the same type."),A_signature_with_an_implementation_cannot_use_a_string_literal_type:t(2381,e.DiagnosticCategory.Error,"A_signature_with_an_implementation_cannot_use_a_string_literal_type_2381","A signature with an implementation cannot use a string literal type."),Specialized_overload_signature_is_not_assignable_to_any_non_specialized_signature:t(2382,e.DiagnosticCategory.Error,"Specialized_overload_signature_is_not_assignable_to_any_non_specialized_signature_2382","Specialized overload signature is not assignable to any non-specialized signature."),Overload_signatures_must_all_be_exported_or_non_exported:t(2383,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_exported_or_non_exported_2383","Overload signatures must all be exported or non-exported."),Overload_signatures_must_all_be_ambient_or_non_ambient:t(2384,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_ambient_or_non_ambient_2384","Overload signatures must all be ambient or non-ambient."),Overload_signatures_must_all_be_public_private_or_protected:t(2385,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_public_private_or_protected_2385","Overload signatures must all be public, private or protected."),Overload_signatures_must_all_be_optional_or_required:t(2386,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_optional_or_required_2386","Overload signatures must all be optional or required."),Function_overload_must_be_static:t(2387,e.DiagnosticCategory.Error,"Function_overload_must_be_static_2387","Function overload must be static."),Function_overload_must_not_be_static:t(2388,e.DiagnosticCategory.Error,"Function_overload_must_not_be_static_2388","Function overload must not be static."),Function_implementation_name_must_be_0:t(2389,e.DiagnosticCategory.Error,"Function_implementation_name_must_be_0_2389","Function implementation name must be '{0}'."),Constructor_implementation_is_missing:t(2390,e.DiagnosticCategory.Error,"Constructor_implementation_is_missing_2390","Constructor implementation is missing."),Function_implementation_is_missing_or_not_immediately_following_the_declaration:t(2391,e.DiagnosticCategory.Error,"Function_implementation_is_missing_or_not_immediately_following_the_declaration_2391","Function implementation is missing or not immediately following the declaration."),Multiple_constructor_implementations_are_not_allowed:t(2392,e.DiagnosticCategory.Error,"Multiple_constructor_implementations_are_not_allowed_2392","Multiple constructor implementations are not allowed."),Duplicate_function_implementation:t(2393,e.DiagnosticCategory.Error,"Duplicate_function_implementation_2393","Duplicate function implementation."),Overload_signature_is_not_compatible_with_function_implementation:t(2394,e.DiagnosticCategory.Error,"Overload_signature_is_not_compatible_with_function_implementation_2394","Overload signature is not compatible with function implementation."),Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local:t(2395,e.DiagnosticCategory.Error,"Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local_2395","Individual declarations in merged declaration '{0}' must be all exported or all local."),Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters:t(2396,e.DiagnosticCategory.Error,"Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters_2396","Duplicate identifier 'arguments'. Compiler uses 'arguments' to initialize rest parameters."),Declaration_name_conflicts_with_built_in_global_identifier_0:t(2397,e.DiagnosticCategory.Error,"Declaration_name_conflicts_with_built_in_global_identifier_0_2397","Declaration name conflicts with built-in global identifier '{0}'."),Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference:t(2399,e.DiagnosticCategory.Error,"Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference_2399","Duplicate identifier '_this'. Compiler uses variable declaration '_this' to capture 'this' reference."),Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference:t(2400,e.DiagnosticCategory.Error,"Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference_2400","Expression resolves to variable declaration '_this' that compiler uses to capture 'this' reference."),Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference:t(2401,e.DiagnosticCategory.Error,"Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference_2401","Duplicate identifier '_super'. Compiler uses '_super' to capture base class reference."),Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference:t(2402,e.DiagnosticCategory.Error,"Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference_2402","Expression resolves to '_super' that compiler uses to capture base class reference."),Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2:t(2403,e.DiagnosticCategory.Error,"Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_t_2403","Subsequent variable declarations must have the same type.  Variable '{0}' must be of type '{1}', but here has type '{2}'."),The_left_hand_side_of_a_for_in_statement_cannot_use_a_type_annotation:t(2404,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_cannot_use_a_type_annotation_2404","The left-hand side of a 'for...in' statement cannot use a type annotation."),The_left_hand_side_of_a_for_in_statement_must_be_of_type_string_or_any:t(2405,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_must_be_of_type_string_or_any_2405","The left-hand side of a 'for...in' statement must be of type 'string' or 'any'."),The_left_hand_side_of_a_for_in_statement_must_be_a_variable_or_a_property_access:t(2406,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_must_be_a_variable_or_a_property_access_2406","The left-hand side of a 'for...in' statement must be a variable or a property access."),The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter:t(2407,e.DiagnosticCategory.Error,"The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter_2407","The right-hand side of a 'for...in' statement must be of type 'any', an object type or a type parameter."),Setters_cannot_return_a_value:t(2408,e.DiagnosticCategory.Error,"Setters_cannot_return_a_value_2408","Setters cannot return a value."),Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class:t(2409,e.DiagnosticCategory.Error,"Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class_2409","Return type of constructor signature must be assignable to the instance type of the class."),The_with_statement_is_not_supported_All_symbols_in_a_with_block_will_have_type_any:t(2410,e.DiagnosticCategory.Error,"The_with_statement_is_not_supported_All_symbols_in_a_with_block_will_have_type_any_2410","The 'with' statement is not supported. All symbols in a 'with' block will have type 'any'."),Property_0_of_type_1_is_not_assignable_to_string_index_type_2:t(2411,e.DiagnosticCategory.Error,"Property_0_of_type_1_is_not_assignable_to_string_index_type_2_2411","Property '{0}' of type '{1}' is not assignable to string index type '{2}'."),Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2:t(2412,e.DiagnosticCategory.Error,"Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2_2412","Property '{0}' of type '{1}' is not assignable to numeric index type '{2}'."),Numeric_index_type_0_is_not_assignable_to_string_index_type_1:t(2413,e.DiagnosticCategory.Error,"Numeric_index_type_0_is_not_assignable_to_string_index_type_1_2413","Numeric index type '{0}' is not assignable to string index type '{1}'."),Class_name_cannot_be_0:t(2414,e.DiagnosticCategory.Error,"Class_name_cannot_be_0_2414","Class name cannot be '{0}'."),Class_0_incorrectly_extends_base_class_1:t(2415,e.DiagnosticCategory.Error,"Class_0_incorrectly_extends_base_class_1_2415","Class '{0}' incorrectly extends base class '{1}'."),Class_static_side_0_incorrectly_extends_base_class_static_side_1:t(2417,e.DiagnosticCategory.Error,"Class_static_side_0_incorrectly_extends_base_class_static_side_1_2417","Class static side '{0}' incorrectly extends base class static side '{1}'."),Class_0_incorrectly_implements_interface_1:t(2420,e.DiagnosticCategory.Error,"Class_0_incorrectly_implements_interface_1_2420","Class '{0}' incorrectly implements interface '{1}'."),A_class_may_only_implement_another_class_or_interface:t(2422,e.DiagnosticCategory.Error,"A_class_may_only_implement_another_class_or_interface_2422","A class may only implement another class or interface."),Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_accessor:t(2423,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_access_2423","Class '{0}' defines instance member function '{1}', but extended class '{2}' defines it as instance member accessor."),Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_property:t(2424,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_proper_2424","Class '{0}' defines instance member function '{1}', but extended class '{2}' defines it as instance member property."),Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_function:t(2425,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_functi_2425","Class '{0}' defines instance member property '{1}', but extended class '{2}' defines it as instance member function."),Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_function:t(2426,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_functi_2426","Class '{0}' defines instance member accessor '{1}', but extended class '{2}' defines it as instance member function."),Interface_name_cannot_be_0:t(2427,e.DiagnosticCategory.Error,"Interface_name_cannot_be_0_2427","Interface name cannot be '{0}'."),All_declarations_of_0_must_have_identical_type_parameters:t(2428,e.DiagnosticCategory.Error,"All_declarations_of_0_must_have_identical_type_parameters_2428","All declarations of '{0}' must have identical type parameters."),Interface_0_incorrectly_extends_interface_1:t(2430,e.DiagnosticCategory.Error,"Interface_0_incorrectly_extends_interface_1_2430","Interface '{0}' incorrectly extends interface '{1}'."),Enum_name_cannot_be_0:t(2431,e.DiagnosticCategory.Error,"Enum_name_cannot_be_0_2431","Enum name cannot be '{0}'."),In_an_enum_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_its_first_enum_element:t(2432,e.DiagnosticCategory.Error,"In_an_enum_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_its_first_enu_2432","In an enum with multiple declarations, only one declaration can omit an initializer for its first enum element."),A_namespace_declaration_cannot_be_in_a_different_file_from_a_class_or_function_with_which_it_is_merged:t(2433,e.DiagnosticCategory.Error,"A_namespace_declaration_cannot_be_in_a_different_file_from_a_class_or_function_with_which_it_is_merg_2433","A namespace declaration cannot be in a different file from a class or function with which it is merged."),A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged:t(2434,e.DiagnosticCategory.Error,"A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged_2434","A namespace declaration cannot be located prior to a class or function with which it is merged."),Ambient_modules_cannot_be_nested_in_other_modules_or_namespaces:t(2435,e.DiagnosticCategory.Error,"Ambient_modules_cannot_be_nested_in_other_modules_or_namespaces_2435","Ambient modules cannot be nested in other modules or namespaces."),Ambient_module_declaration_cannot_specify_relative_module_name:t(2436,e.DiagnosticCategory.Error,"Ambient_module_declaration_cannot_specify_relative_module_name_2436","Ambient module declaration cannot specify relative module name."),Module_0_is_hidden_by_a_local_declaration_with_the_same_name:t(2437,e.DiagnosticCategory.Error,"Module_0_is_hidden_by_a_local_declaration_with_the_same_name_2437","Module '{0}' is hidden by a local declaration with the same name."),Import_name_cannot_be_0:t(2438,e.DiagnosticCategory.Error,"Import_name_cannot_be_0_2438","Import name cannot be '{0}'."),Import_or_export_declaration_in_an_ambient_module_declaration_cannot_reference_module_through_relative_module_name:t(2439,e.DiagnosticCategory.Error,"Import_or_export_declaration_in_an_ambient_module_declaration_cannot_reference_module_through_relati_2439","Import or export declaration in an ambient module declaration cannot reference module through relative module name."),Import_declaration_conflicts_with_local_declaration_of_0:t(2440,e.DiagnosticCategory.Error,"Import_declaration_conflicts_with_local_declaration_of_0_2440","Import declaration conflicts with local declaration of '{0}'."),Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module:t(2441,e.DiagnosticCategory.Error,"Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_2441","Duplicate identifier '{0}'. Compiler reserves name '{1}' in top level scope of a module."),Types_have_separate_declarations_of_a_private_property_0:t(2442,e.DiagnosticCategory.Error,"Types_have_separate_declarations_of_a_private_property_0_2442","Types have separate declarations of a private property '{0}'."),Property_0_is_protected_but_type_1_is_not_a_class_derived_from_2:t(2443,e.DiagnosticCategory.Error,"Property_0_is_protected_but_type_1_is_not_a_class_derived_from_2_2443","Property '{0}' is protected but type '{1}' is not a class derived from '{2}'."),Property_0_is_protected_in_type_1_but_public_in_type_2:t(2444,e.DiagnosticCategory.Error,"Property_0_is_protected_in_type_1_but_public_in_type_2_2444","Property '{0}' is protected in type '{1}' but public in type '{2}'."),Property_0_is_protected_and_only_accessible_within_class_1_and_its_subclasses:t(2445,e.DiagnosticCategory.Error,"Property_0_is_protected_and_only_accessible_within_class_1_and_its_subclasses_2445","Property '{0}' is protected and only accessible within class '{1}' and its subclasses."),Property_0_is_protected_and_only_accessible_through_an_instance_of_class_1:t(2446,e.DiagnosticCategory.Error,"Property_0_is_protected_and_only_accessible_through_an_instance_of_class_1_2446","Property '{0}' is protected and only accessible through an instance of class '{1}'."),The_0_operator_is_not_allowed_for_boolean_types_Consider_using_1_instead:t(2447,e.DiagnosticCategory.Error,"The_0_operator_is_not_allowed_for_boolean_types_Consider_using_1_instead_2447","The '{0}' operator is not allowed for boolean types. Consider using '{1}' instead."),Block_scoped_variable_0_used_before_its_declaration:t(2448,e.DiagnosticCategory.Error,"Block_scoped_variable_0_used_before_its_declaration_2448","Block-scoped variable '{0}' used before its declaration."),Class_0_used_before_its_declaration:t(2449,e.DiagnosticCategory.Error,"Class_0_used_before_its_declaration_2449","Class '{0}' used before its declaration."),Enum_0_used_before_its_declaration:t(2450,e.DiagnosticCategory.Error,"Enum_0_used_before_its_declaration_2450","Enum '{0}' used before its declaration."),Cannot_redeclare_block_scoped_variable_0:t(2451,e.DiagnosticCategory.Error,"Cannot_redeclare_block_scoped_variable_0_2451","Cannot redeclare block-scoped variable '{0}'."),An_enum_member_cannot_have_a_numeric_name:t(2452,e.DiagnosticCategory.Error,"An_enum_member_cannot_have_a_numeric_name_2452","An enum member cannot have a numeric name."),The_type_argument_for_type_parameter_0_cannot_be_inferred_from_the_usage_Consider_specifying_the_type_arguments_explicitly:t(2453,e.DiagnosticCategory.Error,"The_type_argument_for_type_parameter_0_cannot_be_inferred_from_the_usage_Consider_specifying_the_typ_2453","The type argument for type parameter '{0}' cannot be inferred from the usage. Consider specifying the type arguments explicitly."),Variable_0_is_used_before_being_assigned:t(2454,e.DiagnosticCategory.Error,"Variable_0_is_used_before_being_assigned_2454","Variable '{0}' is used before being assigned."),Type_argument_candidate_1_is_not_a_valid_type_argument_because_it_is_not_a_supertype_of_candidate_0:t(2455,e.DiagnosticCategory.Error,"Type_argument_candidate_1_is_not_a_valid_type_argument_because_it_is_not_a_supertype_of_candidate_0_2455","Type argument candidate '{1}' is not a valid type argument because it is not a supertype of candidate '{0}'."),Type_alias_0_circularly_references_itself:t(2456,e.DiagnosticCategory.Error,"Type_alias_0_circularly_references_itself_2456","Type alias '{0}' circularly references itself."),Type_alias_name_cannot_be_0:t(2457,e.DiagnosticCategory.Error,"Type_alias_name_cannot_be_0_2457","Type alias name cannot be '{0}'."),An_AMD_module_cannot_have_multiple_name_assignments:t(2458,e.DiagnosticCategory.Error,"An_AMD_module_cannot_have_multiple_name_assignments_2458","An AMD module cannot have multiple name assignments."),Type_0_has_no_property_1_and_no_string_index_signature:t(2459,e.DiagnosticCategory.Error,"Type_0_has_no_property_1_and_no_string_index_signature_2459","Type '{0}' has no property '{1}' and no string index signature."),Type_0_has_no_property_1:t(2460,e.DiagnosticCategory.Error,"Type_0_has_no_property_1_2460","Type '{0}' has no property '{1}'."),Type_0_is_not_an_array_type:t(2461,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_2461","Type '{0}' is not an array type."),A_rest_element_must_be_last_in_a_destructuring_pattern:t(2462,e.DiagnosticCategory.Error,"A_rest_element_must_be_last_in_a_destructuring_pattern_2462","A rest element must be last in a destructuring pattern."),A_binding_pattern_parameter_cannot_be_optional_in_an_implementation_signature:t(2463,e.DiagnosticCategory.Error,"A_binding_pattern_parameter_cannot_be_optional_in_an_implementation_signature_2463","A binding pattern parameter cannot be optional in an implementation signature."),A_computed_property_name_must_be_of_type_string_number_symbol_or_any:t(2464,e.DiagnosticCategory.Error,"A_computed_property_name_must_be_of_type_string_number_symbol_or_any_2464","A computed property name must be of type 'string', 'number', 'symbol', or 'any'."),this_cannot_be_referenced_in_a_computed_property_name:t(2465,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_a_computed_property_name_2465","'this' cannot be referenced in a computed property name."),super_cannot_be_referenced_in_a_computed_property_name:t(2466,e.DiagnosticCategory.Error,"super_cannot_be_referenced_in_a_computed_property_name_2466","'super' cannot be referenced in a computed property name."),A_computed_property_name_cannot_reference_a_type_parameter_from_its_containing_type:t(2467,e.DiagnosticCategory.Error,"A_computed_property_name_cannot_reference_a_type_parameter_from_its_containing_type_2467","A computed property name cannot reference a type parameter from its containing type."),Cannot_find_global_value_0:t(2468,e.DiagnosticCategory.Error,"Cannot_find_global_value_0_2468","Cannot find global value '{0}'."),The_0_operator_cannot_be_applied_to_type_symbol:t(2469,e.DiagnosticCategory.Error,"The_0_operator_cannot_be_applied_to_type_symbol_2469","The '{0}' operator cannot be applied to type 'symbol'."),Symbol_reference_does_not_refer_to_the_global_Symbol_constructor_object:t(2470,e.DiagnosticCategory.Error,"Symbol_reference_does_not_refer_to_the_global_Symbol_constructor_object_2470","'Symbol' reference does not refer to the global Symbol constructor object."),A_computed_property_name_of_the_form_0_must_be_of_type_symbol:t(2471,e.DiagnosticCategory.Error,"A_computed_property_name_of_the_form_0_must_be_of_type_symbol_2471","A computed property name of the form '{0}' must be of type 'symbol'."),Spread_operator_in_new_expressions_is_only_available_when_targeting_ECMAScript_5_and_higher:t(2472,e.DiagnosticCategory.Error,"Spread_operator_in_new_expressions_is_only_available_when_targeting_ECMAScript_5_and_higher_2472","Spread operator in 'new' expressions is only available when targeting ECMAScript 5 and higher."),Enum_declarations_must_all_be_const_or_non_const:t(2473,e.DiagnosticCategory.Error,"Enum_declarations_must_all_be_const_or_non_const_2473","Enum declarations must all be const or non-const."),In_const_enum_declarations_member_initializer_must_be_constant_expression:t(2474,e.DiagnosticCategory.Error,"In_const_enum_declarations_member_initializer_must_be_constant_expression_2474","In 'const' enum declarations member initializer must be constant expression."),const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_import_declaration_or_export_assignment:t(2475,e.DiagnosticCategory.Error,"const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475","'const' enums can only be used in property or index access expressions or the right hand side of an import declaration or export assignment."),A_const_enum_member_can_only_be_accessed_using_a_string_literal:t(2476,e.DiagnosticCategory.Error,"A_const_enum_member_can_only_be_accessed_using_a_string_literal_2476","A const enum member can only be accessed using a string literal."),const_enum_member_initializer_was_evaluated_to_a_non_finite_value:t(2477,e.DiagnosticCategory.Error,"const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477","'const' enum member initializer was evaluated to a non-finite value."),const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN:t(2478,e.DiagnosticCategory.Error,"const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478","'const' enum member initializer was evaluated to disallowed value 'NaN'."),Property_0_does_not_exist_on_const_enum_1:t(2479,e.DiagnosticCategory.Error,"Property_0_does_not_exist_on_const_enum_1_2479","Property '{0}' does not exist on 'const' enum '{1}'."),let_is_not_allowed_to_be_used_as_a_name_in_let_or_const_declarations:t(2480,e.DiagnosticCategory.Error,"let_is_not_allowed_to_be_used_as_a_name_in_let_or_const_declarations_2480","'let' is not allowed to be used as a name in 'let' or 'const' declarations."),Cannot_initialize_outer_scoped_variable_0_in_the_same_scope_as_block_scoped_declaration_1:t(2481,e.DiagnosticCategory.Error,"Cannot_initialize_outer_scoped_variable_0_in_the_same_scope_as_block_scoped_declaration_1_2481","Cannot initialize outer scoped variable '{0}' in the same scope as block scoped declaration '{1}'."),The_left_hand_side_of_a_for_of_statement_cannot_use_a_type_annotation:t(2483,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_of_statement_cannot_use_a_type_annotation_2483","The left-hand side of a 'for...of' statement cannot use a type annotation."),Export_declaration_conflicts_with_exported_declaration_of_0:t(2484,e.DiagnosticCategory.Error,"Export_declaration_conflicts_with_exported_declaration_of_0_2484","Export declaration conflicts with exported declaration of '{0}'."),The_left_hand_side_of_a_for_of_statement_must_be_a_variable_or_a_property_access:t(2487,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_of_statement_must_be_a_variable_or_a_property_access_2487","The left-hand side of a 'for...of' statement must be a variable or a property access."),Type_must_have_a_Symbol_iterator_method_that_returns_an_iterator:t(2488,e.DiagnosticCategory.Error,"Type_must_have_a_Symbol_iterator_method_that_returns_an_iterator_2488","Type must have a '[Symbol.iterator]()' method that returns an iterator."),An_iterator_must_have_a_next_method:t(2489,e.DiagnosticCategory.Error,"An_iterator_must_have_a_next_method_2489","An iterator must have a 'next()' method."),The_type_returned_by_the_next_method_of_an_iterator_must_have_a_value_property:t(2490,e.DiagnosticCategory.Error,"The_type_returned_by_the_next_method_of_an_iterator_must_have_a_value_property_2490","The type returned by the 'next()' method of an iterator must have a 'value' property."),The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern:t(2491,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern_2491","The left-hand side of a 'for...in' statement cannot be a destructuring pattern."),Cannot_redeclare_identifier_0_in_catch_clause:t(2492,e.DiagnosticCategory.Error,"Cannot_redeclare_identifier_0_in_catch_clause_2492","Cannot redeclare identifier '{0}' in catch clause."),Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2:t(2493,e.DiagnosticCategory.Error,"Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2_2493","Tuple type '{0}' with length '{1}' cannot be assigned to tuple with length '{2}'."),Using_a_string_in_a_for_of_statement_is_only_supported_in_ECMAScript_5_and_higher:t(2494,e.DiagnosticCategory.Error,"Using_a_string_in_a_for_of_statement_is_only_supported_in_ECMAScript_5_and_higher_2494","Using a string in a 'for...of' statement is only supported in ECMAScript 5 and higher."),Type_0_is_not_an_array_type_or_a_string_type:t(2495,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_or_a_string_type_2495","Type '{0}' is not an array type or a string type."),The_arguments_object_cannot_be_referenced_in_an_arrow_function_in_ES3_and_ES5_Consider_using_a_standard_function_expression:t(2496,e.DiagnosticCategory.Error,"The_arguments_object_cannot_be_referenced_in_an_arrow_function_in_ES3_and_ES5_Consider_using_a_stand_2496","The 'arguments' object cannot be referenced in an arrow function in ES3 and ES5. Consider using a standard function expression."),Module_0_resolves_to_a_non_module_entity_and_cannot_be_imported_using_this_construct:t(2497,e.DiagnosticCategory.Error,"Module_0_resolves_to_a_non_module_entity_and_cannot_be_imported_using_this_construct_2497","Module '{0}' resolves to a non-module entity and cannot be imported using this construct."),Module_0_uses_export_and_cannot_be_used_with_export_Asterisk:t(2498,e.DiagnosticCategory.Error,"Module_0_uses_export_and_cannot_be_used_with_export_Asterisk_2498","Module '{0}' uses 'export =' and cannot be used with 'export *'."),An_interface_can_only_extend_an_identifier_Slashqualified_name_with_optional_type_arguments:t(2499,e.DiagnosticCategory.Error,"An_interface_can_only_extend_an_identifier_Slashqualified_name_with_optional_type_arguments_2499","An interface can only extend an identifier/qualified-name with optional type arguments."),A_class_can_only_implement_an_identifier_Slashqualified_name_with_optional_type_arguments:t(2500,e.DiagnosticCategory.Error,"A_class_can_only_implement_an_identifier_Slashqualified_name_with_optional_type_arguments_2500","A class can only implement an identifier/qualified-name with optional type arguments."),A_rest_element_cannot_contain_a_binding_pattern:t(2501,e.DiagnosticCategory.Error,"A_rest_element_cannot_contain_a_binding_pattern_2501","A rest element cannot contain a binding pattern."),_0_is_referenced_directly_or_indirectly_in_its_own_type_annotation:t(2502,e.DiagnosticCategory.Error,"_0_is_referenced_directly_or_indirectly_in_its_own_type_annotation_2502","'{0}' is referenced directly or indirectly in its own type annotation."),Cannot_find_namespace_0:t(2503,e.DiagnosticCategory.Error,"Cannot_find_namespace_0_2503","Cannot find namespace '{0}'."),Type_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator:t(2504,e.DiagnosticCategory.Error,"Type_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator_2504","Type must have a '[Symbol.asyncIterator]()' method that returns an async iterator."),A_generator_cannot_have_a_void_type_annotation:t(2505,e.DiagnosticCategory.Error,"A_generator_cannot_have_a_void_type_annotation_2505","A generator cannot have a 'void' type annotation."),_0_is_referenced_directly_or_indirectly_in_its_own_base_expression:t(2506,e.DiagnosticCategory.Error,"_0_is_referenced_directly_or_indirectly_in_its_own_base_expression_2506","'{0}' is referenced directly or indirectly in its own base expression."),Type_0_is_not_a_constructor_function_type:t(2507,e.DiagnosticCategory.Error,"Type_0_is_not_a_constructor_function_type_2507","Type '{0}' is not a constructor function type."),No_base_constructor_has_the_specified_number_of_type_arguments:t(2508,e.DiagnosticCategory.Error,"No_base_constructor_has_the_specified_number_of_type_arguments_2508","No base constructor has the specified number of type arguments."),Base_constructor_return_type_0_is_not_a_class_or_interface_type:t(2509,e.DiagnosticCategory.Error,"Base_constructor_return_type_0_is_not_a_class_or_interface_type_2509","Base constructor return type '{0}' is not a class or interface type."),Base_constructors_must_all_have_the_same_return_type:t(2510,e.DiagnosticCategory.Error,"Base_constructors_must_all_have_the_same_return_type_2510","Base constructors must all have the same return type."),Cannot_create_an_instance_of_the_abstract_class_0:t(2511,e.DiagnosticCategory.Error,"Cannot_create_an_instance_of_the_abstract_class_0_2511","Cannot create an instance of the abstract class '{0}'."),Overload_signatures_must_all_be_abstract_or_non_abstract:t(2512,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_abstract_or_non_abstract_2512","Overload signatures must all be abstract or non-abstract."),Abstract_method_0_in_class_1_cannot_be_accessed_via_super_expression:t(2513,e.DiagnosticCategory.Error,"Abstract_method_0_in_class_1_cannot_be_accessed_via_super_expression_2513","Abstract method '{0}' in class '{1}' cannot be accessed via super expression."),Classes_containing_abstract_methods_must_be_marked_abstract:t(2514,e.DiagnosticCategory.Error,"Classes_containing_abstract_methods_must_be_marked_abstract_2514","Classes containing abstract methods must be marked abstract."),Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2:t(2515,e.DiagnosticCategory.Error,"Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2_2515","Non-abstract class '{0}' does not implement inherited abstract member '{1}' from class '{2}'."),All_declarations_of_an_abstract_method_must_be_consecutive:t(2516,e.DiagnosticCategory.Error,"All_declarations_of_an_abstract_method_must_be_consecutive_2516","All declarations of an abstract method must be consecutive."),Cannot_assign_an_abstract_constructor_type_to_a_non_abstract_constructor_type:t(2517,e.DiagnosticCategory.Error,"Cannot_assign_an_abstract_constructor_type_to_a_non_abstract_constructor_type_2517","Cannot assign an abstract constructor type to a non-abstract constructor type."),A_this_based_type_guard_is_not_compatible_with_a_parameter_based_type_guard:t(2518,e.DiagnosticCategory.Error,"A_this_based_type_guard_is_not_compatible_with_a_parameter_based_type_guard_2518","A 'this'-based type guard is not compatible with a parameter-based type guard."),An_async_iterator_must_have_a_next_method:t(2519,e.DiagnosticCategory.Error,"An_async_iterator_must_have_a_next_method_2519","An async iterator must have a 'next()' method."),Duplicate_identifier_0_Compiler_uses_declaration_1_to_support_async_functions:t(2520,e.DiagnosticCategory.Error,"Duplicate_identifier_0_Compiler_uses_declaration_1_to_support_async_functions_2520","Duplicate identifier '{0}'. Compiler uses declaration '{1}' to support async functions."),Expression_resolves_to_variable_declaration_0_that_compiler_uses_to_support_async_functions:t(2521,e.DiagnosticCategory.Error,"Expression_resolves_to_variable_declaration_0_that_compiler_uses_to_support_async_functions_2521","Expression resolves to variable declaration '{0}' that compiler uses to support async functions."),The_arguments_object_cannot_be_referenced_in_an_async_function_or_method_in_ES3_and_ES5_Consider_using_a_standard_function_or_method:t(2522,e.DiagnosticCategory.Error,"The_arguments_object_cannot_be_referenced_in_an_async_function_or_method_in_ES3_and_ES5_Consider_usi_2522","The 'arguments' object cannot be referenced in an async function or method in ES3 and ES5. Consider using a standard function or method."),yield_expressions_cannot_be_used_in_a_parameter_initializer:t(2523,e.DiagnosticCategory.Error,"yield_expressions_cannot_be_used_in_a_parameter_initializer_2523","'yield' expressions cannot be used in a parameter initializer."),await_expressions_cannot_be_used_in_a_parameter_initializer:t(2524,e.DiagnosticCategory.Error,"await_expressions_cannot_be_used_in_a_parameter_initializer_2524","'await' expressions cannot be used in a parameter initializer."),Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value:t(2525,e.DiagnosticCategory.Error,"Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value_2525","Initializer provides no value for this binding element and the binding element has no default value."),A_this_type_is_available_only_in_a_non_static_member_of_a_class_or_interface:t(2526,e.DiagnosticCategory.Error,"A_this_type_is_available_only_in_a_non_static_member_of_a_class_or_interface_2526","A 'this' type is available only in a non-static member of a class or interface."),The_inferred_type_of_0_references_an_inaccessible_this_type_A_type_annotation_is_necessary:t(2527,e.DiagnosticCategory.Error,"The_inferred_type_of_0_references_an_inaccessible_this_type_A_type_annotation_is_necessary_2527","The inferred type of '{0}' references an inaccessible 'this' type. A type annotation is necessary."),A_module_cannot_have_multiple_default_exports:t(2528,e.DiagnosticCategory.Error,"A_module_cannot_have_multiple_default_exports_2528","A module cannot have multiple default exports."),Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_containing_async_functions:t(2529,e.DiagnosticCategory.Error,"Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_containing_async_func_2529","Duplicate identifier '{0}'. Compiler reserves name '{1}' in top level scope of a module containing async functions."),Property_0_is_incompatible_with_index_signature:t(2530,e.DiagnosticCategory.Error,"Property_0_is_incompatible_with_index_signature_2530","Property '{0}' is incompatible with index signature."),Object_is_possibly_null:t(2531,e.DiagnosticCategory.Error,"Object_is_possibly_null_2531","Object is possibly 'null'."),Object_is_possibly_undefined:t(2532,e.DiagnosticCategory.Error,"Object_is_possibly_undefined_2532","Object is possibly 'undefined'."),Object_is_possibly_null_or_undefined:t(2533,e.DiagnosticCategory.Error,"Object_is_possibly_null_or_undefined_2533","Object is possibly 'null' or 'undefined'."),A_function_returning_never_cannot_have_a_reachable_end_point:t(2534,e.DiagnosticCategory.Error,"A_function_returning_never_cannot_have_a_reachable_end_point_2534","A function returning 'never' cannot have a reachable end point."),Enum_type_0_has_members_with_initializers_that_are_not_literals:t(2535,e.DiagnosticCategory.Error,"Enum_type_0_has_members_with_initializers_that_are_not_literals_2535","Enum type '{0}' has members with initializers that are not literals."),Type_0_cannot_be_used_to_index_type_1:t(2536,e.DiagnosticCategory.Error,"Type_0_cannot_be_used_to_index_type_1_2536","Type '{0}' cannot be used to index type '{1}'."),Type_0_has_no_matching_index_signature_for_type_1:t(2537,e.DiagnosticCategory.Error,"Type_0_has_no_matching_index_signature_for_type_1_2537","Type '{0}' has no matching index signature for type '{1}'."),Type_0_cannot_be_used_as_an_index_type:t(2538,e.DiagnosticCategory.Error,"Type_0_cannot_be_used_as_an_index_type_2538","Type '{0}' cannot be used as an index type."),Cannot_assign_to_0_because_it_is_not_a_variable:t(2539,e.DiagnosticCategory.Error,"Cannot_assign_to_0_because_it_is_not_a_variable_2539","Cannot assign to '{0}' because it is not a variable."),Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property:t(2540,e.DiagnosticCategory.Error,"Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property_2540","Cannot assign to '{0}' because it is a constant or a read-only property."),The_target_of_an_assignment_must_be_a_variable_or_a_property_access:t(2541,e.DiagnosticCategory.Error,"The_target_of_an_assignment_must_be_a_variable_or_a_property_access_2541","The target of an assignment must be a variable or a property access."),Index_signature_in_type_0_only_permits_reading:t(2542,e.DiagnosticCategory.Error,"Index_signature_in_type_0_only_permits_reading_2542","Index signature in type '{0}' only permits reading."),Duplicate_identifier_newTarget_Compiler_uses_variable_declaration_newTarget_to_capture_new_target_meta_property_reference:t(2543,e.DiagnosticCategory.Error,"Duplicate_identifier_newTarget_Compiler_uses_variable_declaration_newTarget_to_capture_new_target_me_2543","Duplicate identifier '_newTarget'. Compiler uses variable declaration '_newTarget' to capture 'new.target' meta-property reference."),Expression_resolves_to_variable_declaration_newTarget_that_compiler_uses_to_capture_new_target_meta_property_reference:t(2544,e.DiagnosticCategory.Error,"Expression_resolves_to_variable_declaration_newTarget_that_compiler_uses_to_capture_new_target_meta__2544","Expression resolves to variable declaration '_newTarget' that compiler uses to capture 'new.target' meta-property reference."),A_mixin_class_must_have_a_constructor_with_a_single_rest_parameter_of_type_any:t(2545,e.DiagnosticCategory.Error,"A_mixin_class_must_have_a_constructor_with_a_single_rest_parameter_of_type_any_2545","A mixin class must have a constructor with a single rest parameter of type 'any[]'."),Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1:t(2546,e.DiagnosticCategory.Error,"Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1_2546","Property '{0}' has conflicting declarations and is inaccessible in type '{1}'."),The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value_property:t(2547,e.DiagnosticCategory.Error,"The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value__2547","The type returned by the 'next()' method of an async iterator must be a promise for a type with a 'value' property."),Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:t(2548,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator_2548","Type '{0}' is not an array type or does not have a '[Symbol.iterator]()' method that returns an iterator."),Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:t(2549,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns__2549","Type '{0}' is not an array type or a string type or does not have a '[Symbol.iterator]()' method that returns an iterator."),Generic_type_instantiation_is_excessively_deep_and_possibly_infinite:t(2550,e.DiagnosticCategory.Error,"Generic_type_instantiation_is_excessively_deep_and_possibly_infinite_2550","Generic type instantiation is excessively deep and possibly infinite."),Property_0_does_not_exist_on_type_1_Did_you_mean_2:t(2551,e.DiagnosticCategory.Error,"Property_0_does_not_exist_on_type_1_Did_you_mean_2_2551","Property '{0}' does not exist on type '{1}'. Did you mean '{2}'?"),Cannot_find_name_0_Did_you_mean_1:t(2552,e.DiagnosticCategory.Error,"Cannot_find_name_0_Did_you_mean_1_2552","Cannot find name '{0}'. Did you mean '{1}'?"),Computed_values_are_not_permitted_in_an_enum_with_string_valued_members:t(2553,e.DiagnosticCategory.Error,"Computed_values_are_not_permitted_in_an_enum_with_string_valued_members_2553","Computed values are not permitted in an enum with string valued members."),Expected_0_arguments_but_got_1:t(2554,e.DiagnosticCategory.Error,"Expected_0_arguments_but_got_1_2554","Expected {0} arguments, but got {1}."),Expected_at_least_0_arguments_but_got_1:t(2555,e.DiagnosticCategory.Error,"Expected_at_least_0_arguments_but_got_1_2555","Expected at least {0} arguments, but got {1}."),Expected_0_arguments_but_got_a_minimum_of_1:t(2556,e.DiagnosticCategory.Error,"Expected_0_arguments_but_got_a_minimum_of_1_2556","Expected {0} arguments, but got a minimum of {1}."),Expected_at_least_0_arguments_but_got_a_minimum_of_1:t(2557,e.DiagnosticCategory.Error,"Expected_at_least_0_arguments_but_got_a_minimum_of_1_2557","Expected at least {0} arguments, but got a minimum of {1}."),Expected_0_type_arguments_but_got_1:t(2558,e.DiagnosticCategory.Error,"Expected_0_type_arguments_but_got_1_2558","Expected {0} type arguments, but got {1}."),Type_0_has_no_properties_in_common_with_type_1:t(2559,e.DiagnosticCategory.Error,"Type_0_has_no_properties_in_common_with_type_1_2559","Type '{0}' has no properties in common with type '{1}'."),Value_of_type_0_has_no_properties_in_common_with_type_1_Did_you_mean_to_call_it:t(2560,e.DiagnosticCategory.Error,"Value_of_type_0_has_no_properties_in_common_with_type_1_Did_you_mean_to_call_it_2560","Value of type '{0}' has no properties in common with type '{1}'. Did you mean to call it?"),Object_literal_may_only_specify_known_properties_but_0_does_not_exist_in_type_1_Did_you_mean_to_write_2:t(2561,e.DiagnosticCategory.Error,"Object_literal_may_only_specify_known_properties_but_0_does_not_exist_in_type_1_Did_you_mean_to_writ_2561","Object literal may only specify known properties, but '{0}' does not exist in type '{1}'. Did you mean to write '{2}'?"),Base_class_expressions_cannot_reference_class_type_parameters:t(2562,e.DiagnosticCategory.Error,"Base_class_expressions_cannot_reference_class_type_parameters_2562","Base class expressions cannot reference class type parameters."),The_containing_function_or_module_body_is_too_large_for_control_flow_analysis:t(2563,e.DiagnosticCategory.Error,"The_containing_function_or_module_body_is_too_large_for_control_flow_analysis_2563","The containing function or module body is too large for control flow analysis."),JSX_element_attributes_type_0_may_not_be_a_union_type:t(2600,e.DiagnosticCategory.Error,"JSX_element_attributes_type_0_may_not_be_a_union_type_2600","JSX element attributes type '{0}' may not be a union type."),The_return_type_of_a_JSX_element_constructor_must_return_an_object_type:t(2601,e.DiagnosticCategory.Error,"The_return_type_of_a_JSX_element_constructor_must_return_an_object_type_2601","The return type of a JSX element constructor must return an object type."),JSX_element_implicitly_has_type_any_because_the_global_type_JSX_Element_does_not_exist:t(2602,e.DiagnosticCategory.Error,"JSX_element_implicitly_has_type_any_because_the_global_type_JSX_Element_does_not_exist_2602","JSX element implicitly has type 'any' because the global type 'JSX.Element' does not exist."),Property_0_in_type_1_is_not_assignable_to_type_2:t(2603,e.DiagnosticCategory.Error,"Property_0_in_type_1_is_not_assignable_to_type_2_2603","Property '{0}' in type '{1}' is not assignable to type '{2}'."),JSX_element_type_0_does_not_have_any_construct_or_call_signatures:t(2604,e.DiagnosticCategory.Error,"JSX_element_type_0_does_not_have_any_construct_or_call_signatures_2604","JSX element type '{0}' does not have any construct or call signatures."),JSX_element_type_0_is_not_a_constructor_function_for_JSX_elements:t(2605,e.DiagnosticCategory.Error,"JSX_element_type_0_is_not_a_constructor_function_for_JSX_elements_2605","JSX element type '{0}' is not a constructor function for JSX elements."),Property_0_of_JSX_spread_attribute_is_not_assignable_to_target_property:t(2606,e.DiagnosticCategory.Error,"Property_0_of_JSX_spread_attribute_is_not_assignable_to_target_property_2606","Property '{0}' of JSX spread attribute is not assignable to target property."),JSX_element_class_does_not_support_attributes_because_it_does_not_have_a_0_property:t(2607,e.DiagnosticCategory.Error,"JSX_element_class_does_not_support_attributes_because_it_does_not_have_a_0_property_2607","JSX element class does not support attributes because it does not have a '{0}' property."),The_global_type_JSX_0_may_not_have_more_than_one_property:t(2608,e.DiagnosticCategory.Error,"The_global_type_JSX_0_may_not_have_more_than_one_property_2608","The global type 'JSX.{0}' may not have more than one property."),JSX_spread_child_must_be_an_array_type:t(2609,e.DiagnosticCategory.Error,"JSX_spread_child_must_be_an_array_type_2609","JSX spread child must be an array type."),Cannot_augment_module_0_with_value_exports_because_it_resolves_to_a_non_module_entity:t(2649,e.DiagnosticCategory.Error,"Cannot_augment_module_0_with_value_exports_because_it_resolves_to_a_non_module_entity_2649","Cannot augment module '{0}' with value exports because it resolves to a non-module entity."),A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums:t(2651,e.DiagnosticCategory.Error,"A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_memb_2651","A member initializer in a enum declaration cannot reference members declared after it, including members defined in other enums."),Merged_declaration_0_cannot_include_a_default_export_declaration_Consider_adding_a_separate_export_default_0_declaration_instead:t(2652,e.DiagnosticCategory.Error,"Merged_declaration_0_cannot_include_a_default_export_declaration_Consider_adding_a_separate_export_d_2652","Merged declaration '{0}' cannot include a default export declaration. Consider adding a separate 'export default {0}' declaration instead."),Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1:t(2653,e.DiagnosticCategory.Error,"Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1_2653","Non-abstract class expression does not implement inherited abstract member '{0}' from class '{1}'."),Exported_external_package_typings_file_cannot_contain_tripleslash_references_Please_contact_the_package_author_to_update_the_package_definition:t(2654,e.DiagnosticCategory.Error,"Exported_external_package_typings_file_cannot_contain_tripleslash_references_Please_contact_the_pack_2654","Exported external package typings file cannot contain tripleslash references. Please contact the package author to update the package definition."),Exported_external_package_typings_file_0_is_not_a_module_Please_contact_the_package_author_to_update_the_package_definition:t(2656,e.DiagnosticCategory.Error,"Exported_external_package_typings_file_0_is_not_a_module_Please_contact_the_package_author_to_update_2656","Exported external package typings file '{0}' is not a module. Please contact the package author to update the package definition."),JSX_expressions_must_have_one_parent_element:t(2657,e.DiagnosticCategory.Error,"JSX_expressions_must_have_one_parent_element_2657","JSX expressions must have one parent element."),Type_0_provides_no_match_for_the_signature_1:t(2658,e.DiagnosticCategory.Error,"Type_0_provides_no_match_for_the_signature_1_2658","Type '{0}' provides no match for the signature '{1}'."),super_is_only_allowed_in_members_of_object_literal_expressions_when_option_target_is_ES2015_or_higher:t(2659,e.DiagnosticCategory.Error,"super_is_only_allowed_in_members_of_object_literal_expressions_when_option_target_is_ES2015_or_highe_2659","'super' is only allowed in members of object literal expressions when option 'target' is 'ES2015' or higher."),super_can_only_be_referenced_in_members_of_derived_classes_or_object_literal_expressions:t(2660,e.DiagnosticCategory.Error,"super_can_only_be_referenced_in_members_of_derived_classes_or_object_literal_expressions_2660","'super' can only be referenced in members of derived classes or object literal expressions."),Cannot_export_0_Only_local_declarations_can_be_exported_from_a_module:t(2661,e.DiagnosticCategory.Error,"Cannot_export_0_Only_local_declarations_can_be_exported_from_a_module_2661","Cannot export '{0}'. Only local declarations can be exported from a module."),Cannot_find_name_0_Did_you_mean_the_static_member_1_0:t(2662,e.DiagnosticCategory.Error,"Cannot_find_name_0_Did_you_mean_the_static_member_1_0_2662","Cannot find name '{0}'. Did you mean the static member '{1}.{0}'?"),Cannot_find_name_0_Did_you_mean_the_instance_member_this_0:t(2663,e.DiagnosticCategory.Error,"Cannot_find_name_0_Did_you_mean_the_instance_member_this_0_2663","Cannot find name '{0}'. Did you mean the instance member 'this.{0}'?"),Invalid_module_name_in_augmentation_module_0_cannot_be_found:t(2664,e.DiagnosticCategory.Error,"Invalid_module_name_in_augmentation_module_0_cannot_be_found_2664","Invalid module name in augmentation, module '{0}' cannot be found."),Invalid_module_name_in_augmentation_Module_0_resolves_to_an_untyped_module_at_1_which_cannot_be_augmented:t(2665,e.DiagnosticCategory.Error,"Invalid_module_name_in_augmentation_Module_0_resolves_to_an_untyped_module_at_1_which_cannot_be_augm_2665","Invalid module name in augmentation. Module '{0}' resolves to an untyped module at '{1}', which cannot be augmented."),Exports_and_export_assignments_are_not_permitted_in_module_augmentations:t(2666,e.DiagnosticCategory.Error,"Exports_and_export_assignments_are_not_permitted_in_module_augmentations_2666","Exports and export assignments are not permitted in module augmentations."),Imports_are_not_permitted_in_module_augmentations_Consider_moving_them_to_the_enclosing_external_module:t(2667,e.DiagnosticCategory.Error,"Imports_are_not_permitted_in_module_augmentations_Consider_moving_them_to_the_enclosing_external_mod_2667","Imports are not permitted in module augmentations. Consider moving them to the enclosing external module."),export_modifier_cannot_be_applied_to_ambient_modules_and_module_augmentations_since_they_are_always_visible:t(2668,e.DiagnosticCategory.Error,"export_modifier_cannot_be_applied_to_ambient_modules_and_module_augmentations_since_they_are_always__2668","'export' modifier cannot be applied to ambient modules and module augmentations since they are always visible."),Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_declarations:t(2669,e.DiagnosticCategory.Error,"Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_2669","Augmentations for the global scope can only be directly nested in external modules or ambient module declarations."),Augmentations_for_the_global_scope_should_have_declare_modifier_unless_they_appear_in_already_ambient_context:t(2670,e.DiagnosticCategory.Error,"Augmentations_for_the_global_scope_should_have_declare_modifier_unless_they_appear_in_already_ambien_2670","Augmentations for the global scope should have 'declare' modifier unless they appear in already ambient context."),Cannot_augment_module_0_because_it_resolves_to_a_non_module_entity:t(2671,e.DiagnosticCategory.Error,"Cannot_augment_module_0_because_it_resolves_to_a_non_module_entity_2671","Cannot augment module '{0}' because it resolves to a non-module entity."),Cannot_assign_a_0_constructor_type_to_a_1_constructor_type:t(2672,e.DiagnosticCategory.Error,"Cannot_assign_a_0_constructor_type_to_a_1_constructor_type_2672","Cannot assign a '{0}' constructor type to a '{1}' constructor type."),Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration:t(2673,e.DiagnosticCategory.Error,"Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration_2673","Constructor of class '{0}' is private and only accessible within the class declaration."),Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration:t(2674,e.DiagnosticCategory.Error,"Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration_2674","Constructor of class '{0}' is protected and only accessible within the class declaration."),Cannot_extend_a_class_0_Class_constructor_is_marked_as_private:t(2675,e.DiagnosticCategory.Error,"Cannot_extend_a_class_0_Class_constructor_is_marked_as_private_2675","Cannot extend a class '{0}'. Class constructor is marked as private."),Accessors_must_both_be_abstract_or_non_abstract:t(2676,e.DiagnosticCategory.Error,"Accessors_must_both_be_abstract_or_non_abstract_2676","Accessors must both be abstract or non-abstract."),A_type_predicate_s_type_must_be_assignable_to_its_parameter_s_type:t(2677,e.DiagnosticCategory.Error,"A_type_predicate_s_type_must_be_assignable_to_its_parameter_s_type_2677","A type predicate's type must be assignable to its parameter's type."),Type_0_is_not_comparable_to_type_1:t(2678,e.DiagnosticCategory.Error,"Type_0_is_not_comparable_to_type_1_2678","Type '{0}' is not comparable to type '{1}'."),A_function_that_is_called_with_the_new_keyword_cannot_have_a_this_type_that_is_void:t(2679,e.DiagnosticCategory.Error,"A_function_that_is_called_with_the_new_keyword_cannot_have_a_this_type_that_is_void_2679","A function that is called with the 'new' keyword cannot have a 'this' type that is 'void'."),A_0_parameter_must_be_the_first_parameter:t(2680,e.DiagnosticCategory.Error,"A_0_parameter_must_be_the_first_parameter_2680","A '{0}' parameter must be the first parameter."),A_constructor_cannot_have_a_this_parameter:t(2681,e.DiagnosticCategory.Error,"A_constructor_cannot_have_a_this_parameter_2681","A constructor cannot have a 'this' parameter."),get_and_set_accessor_must_have_the_same_this_type:t(2682,e.DiagnosticCategory.Error,"get_and_set_accessor_must_have_the_same_this_type_2682","'get' and 'set' accessor must have the same 'this' type."),this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation:t(2683,e.DiagnosticCategory.Error,"this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_2683","'this' implicitly has type 'any' because it does not have a type annotation."),The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1:t(2684,e.DiagnosticCategory.Error,"The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1_2684","The 'this' context of type '{0}' is not assignable to method's 'this' of type '{1}'."),The_this_types_of_each_signature_are_incompatible:t(2685,e.DiagnosticCategory.Error,"The_this_types_of_each_signature_are_incompatible_2685","The 'this' types of each signature are incompatible."),_0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead:t(2686,e.DiagnosticCategory.Error,"_0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead_2686","'{0}' refers to a UMD global, but the current file is a module. Consider adding an import instead."),All_declarations_of_0_must_have_identical_modifiers:t(2687,e.DiagnosticCategory.Error,"All_declarations_of_0_must_have_identical_modifiers_2687","All declarations of '{0}' must have identical modifiers."),Cannot_find_type_definition_file_for_0:t(2688,e.DiagnosticCategory.Error,"Cannot_find_type_definition_file_for_0_2688","Cannot find type definition file for '{0}'."),Cannot_extend_an_interface_0_Did_you_mean_implements:t(2689,e.DiagnosticCategory.Error,"Cannot_extend_an_interface_0_Did_you_mean_implements_2689","Cannot extend an interface '{0}'. Did you mean 'implements'?"),An_import_path_cannot_end_with_a_0_extension_Consider_importing_1_instead:t(2691,e.DiagnosticCategory.Error,"An_import_path_cannot_end_with_a_0_extension_Consider_importing_1_instead_2691","An import path cannot end with a '{0}' extension. Consider importing '{1}' instead."),_0_is_a_primitive_but_1_is_a_wrapper_object_Prefer_using_0_when_possible:t(2692,e.DiagnosticCategory.Error,"_0_is_a_primitive_but_1_is_a_wrapper_object_Prefer_using_0_when_possible_2692","'{0}' is a primitive, but '{1}' is a wrapper object. Prefer using '{0}' when possible."),_0_only_refers_to_a_type_but_is_being_used_as_a_value_here:t(2693,e.DiagnosticCategory.Error,"_0_only_refers_to_a_type_but_is_being_used_as_a_value_here_2693","'{0}' only refers to a type, but is being used as a value here."),Namespace_0_has_no_exported_member_1:t(2694,e.DiagnosticCategory.Error,"Namespace_0_has_no_exported_member_1_2694","Namespace '{0}' has no exported member '{1}'."),Left_side_of_comma_operator_is_unused_and_has_no_side_effects:t(2695,e.DiagnosticCategory.Error,"Left_side_of_comma_operator_is_unused_and_has_no_side_effects_2695","Left side of comma operator is unused and has no side effects."),The_Object_type_is_assignable_to_very_few_other_types_Did_you_mean_to_use_the_any_type_instead:t(2696,e.DiagnosticCategory.Error,"The_Object_type_is_assignable_to_very_few_other_types_Did_you_mean_to_use_the_any_type_instead_2696","The 'Object' type is assignable to very few other types. Did you mean to use the 'any' type instead?"),An_async_function_or_method_must_return_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option:t(2697,e.DiagnosticCategory.Error,"An_async_function_or_method_must_return_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_in_2697","An async function or method must return a 'Promise'. Make sure you have a declaration for 'Promise' or include 'ES2015' in your `--lib` option."),Spread_types_may_only_be_created_from_object_types:t(2698,e.DiagnosticCategory.Error,"Spread_types_may_only_be_created_from_object_types_2698","Spread types may only be created from object types."),Static_property_0_conflicts_with_built_in_property_Function_0_of_constructor_function_1:t(2699,e.DiagnosticCategory.Error,"Static_property_0_conflicts_with_built_in_property_Function_0_of_constructor_function_1_2699","Static property '{0}' conflicts with built-in property 'Function.{0}' of constructor function '{1}'."),Rest_types_may_only_be_created_from_object_types:t(2700,e.DiagnosticCategory.Error,"Rest_types_may_only_be_created_from_object_types_2700","Rest types may only be created from object types."),The_target_of_an_object_rest_assignment_must_be_a_variable_or_a_property_access:t(2701,e.DiagnosticCategory.Error,"The_target_of_an_object_rest_assignment_must_be_a_variable_or_a_property_access_2701","The target of an object rest assignment must be a variable or a property access."),_0_only_refers_to_a_type_but_is_being_used_as_a_namespace_here:t(2702,e.DiagnosticCategory.Error,"_0_only_refers_to_a_type_but_is_being_used_as_a_namespace_here_2702","'{0}' only refers to a type, but is being used as a namespace here."),The_operand_of_a_delete_operator_must_be_a_property_reference:t(2703,e.DiagnosticCategory.Error,"The_operand_of_a_delete_operator_must_be_a_property_reference_2703","The operand of a delete operator must be a property reference."),The_operand_of_a_delete_operator_cannot_be_a_read_only_property:t(2704,e.DiagnosticCategory.Error,"The_operand_of_a_delete_operator_cannot_be_a_read_only_property_2704","The operand of a delete operator cannot be a read-only property."),An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option:t(2705,e.DiagnosticCategory.Error,"An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_de_2705","An async function or method in ES5/ES3 requires the 'Promise' constructor.  Make sure you have a declaration for the 'Promise' constructor or include 'ES2015' in your `--lib` option."),Required_type_parameters_may_not_follow_optional_type_parameters:t(2706,e.DiagnosticCategory.Error,"Required_type_parameters_may_not_follow_optional_type_parameters_2706","Required type parameters may not follow optional type parameters."),Generic_type_0_requires_between_1_and_2_type_arguments:t(2707,e.DiagnosticCategory.Error,"Generic_type_0_requires_between_1_and_2_type_arguments_2707","Generic type '{0}' requires between {1} and {2} type arguments."),Cannot_use_namespace_0_as_a_value:t(2708,e.DiagnosticCategory.Error,"Cannot_use_namespace_0_as_a_value_2708","Cannot use namespace '{0}' as a value."),Cannot_use_namespace_0_as_a_type:t(2709,e.DiagnosticCategory.Error,"Cannot_use_namespace_0_as_a_type_2709","Cannot use namespace '{0}' as a type."),_0_are_specified_twice_The_attribute_named_0_will_be_overwritten:t(2710,e.DiagnosticCategory.Error,"_0_are_specified_twice_The_attribute_named_0_will_be_overwritten_2710","'{0}' are specified twice. The attribute named '{0}' will be overwritten."),A_dynamic_import_call_returns_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option:t(2711,e.DiagnosticCategory.Error,"A_dynamic_import_call_returns_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES20_2711","A dynamic import call returns a 'Promise'. Make sure you have a declaration for 'Promise' or include 'ES2015' in your `--lib` option."),A_dynamic_import_call_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option:t(2712,e.DiagnosticCategory.Error,"A_dynamic_import_call_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declarat_2712","A dynamic import call in ES5/ES3 requires the 'Promise' constructor.  Make sure you have a declaration for the 'Promise' constructor or include 'ES2015' in your `--lib` option."),Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1:t(2713,e.DiagnosticCategory.Error,"Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_p_2713","Cannot access '{0}.{1}' because '{0}' is a type, but not a namespace. Did you mean to retrieve the type of the property '{1}' in '{0}' with '{0}[\"{1}\"]'?"),The_expression_of_an_export_assignment_must_be_an_identifier_or_qualified_name_in_an_ambient_context:t(2714,e.DiagnosticCategory.Error,"The_expression_of_an_export_assignment_must_be_an_identifier_or_qualified_name_in_an_ambient_context_2714","The expression of an export assignment must be an identifier or qualified name in an ambient context."),Type_parameter_0_has_a_circular_default:t(2716,e.DiagnosticCategory.Error,"Type_parameter_0_has_a_circular_default_2716","Type parameter '{0}' has a circular default."),Import_declaration_0_is_using_private_name_1:t(4e3,e.DiagnosticCategory.Error,"Import_declaration_0_is_using_private_name_1_4000","Import declaration '{0}' is using private name '{1}'."),Type_parameter_0_of_exported_class_has_or_is_using_private_name_1:t(4002,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_class_has_or_is_using_private_name_1_4002","Type parameter '{0}' of exported class has or is using private name '{1}'."),Type_parameter_0_of_exported_interface_has_or_is_using_private_name_1:t(4004,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_interface_has_or_is_using_private_name_1_4004","Type parameter '{0}' of exported interface has or is using private name '{1}'."),Type_parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1:t(4006,e.DiagnosticCategory.Error,"Type_parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1_4006","Type parameter '{0}' of constructor signature from exported interface has or is using private name '{1}'."),Type_parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1:t(4008,e.DiagnosticCategory.Error,"Type_parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1_4008","Type parameter '{0}' of call signature from exported interface has or is using private name '{1}'."),Type_parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:t(4010,e.DiagnosticCategory.Error,"Type_parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1_4010","Type parameter '{0}' of public static method from exported class has or is using private name '{1}'."),Type_parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:t(4012,e.DiagnosticCategory.Error,"Type_parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1_4012","Type parameter '{0}' of public method from exported class has or is using private name '{1}'."),Type_parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1:t(4014,e.DiagnosticCategory.Error,"Type_parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1_4014","Type parameter '{0}' of method from exported interface has or is using private name '{1}'."),Type_parameter_0_of_exported_function_has_or_is_using_private_name_1:t(4016,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_function_has_or_is_using_private_name_1_4016","Type parameter '{0}' of exported function has or is using private name '{1}'."),Implements_clause_of_exported_class_0_has_or_is_using_private_name_1:t(4019,e.DiagnosticCategory.Error,"Implements_clause_of_exported_class_0_has_or_is_using_private_name_1_4019","Implements clause of exported class '{0}' has or is using private name '{1}'."),extends_clause_of_exported_class_0_has_or_is_using_private_name_1:t(4020,e.DiagnosticCategory.Error,"extends_clause_of_exported_class_0_has_or_is_using_private_name_1_4020","'extends' clause of exported class '{0}' has or is using private name '{1}'."),extends_clause_of_exported_interface_0_has_or_is_using_private_name_1:t(4022,e.DiagnosticCategory.Error,"extends_clause_of_exported_interface_0_has_or_is_using_private_name_1_4022","'extends' clause of exported interface '{0}' has or is using private name '{1}'."),Exported_variable_0_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4023,e.DiagnosticCategory.Error,"Exported_variable_0_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named_4023","Exported variable '{0}' has or is using name '{1}' from external module {2} but cannot be named."),Exported_variable_0_has_or_is_using_name_1_from_private_module_2:t(4024,e.DiagnosticCategory.Error,"Exported_variable_0_has_or_is_using_name_1_from_private_module_2_4024","Exported variable '{0}' has or is using name '{1}' from private module '{2}'."),Exported_variable_0_has_or_is_using_private_name_1:t(4025,e.DiagnosticCategory.Error,"Exported_variable_0_has_or_is_using_private_name_1_4025","Exported variable '{0}' has or is using private name '{1}'."),Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4026,e.DiagnosticCategory.Error,"Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot__4026","Public static property '{0}' of exported class has or is using name '{1}' from external module {2} but cannot be named."),Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:t(4027,e.DiagnosticCategory.Error,"Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2_4027","Public static property '{0}' of exported class has or is using name '{1}' from private module '{2}'."),Public_static_property_0_of_exported_class_has_or_is_using_private_name_1:t(4028,e.DiagnosticCategory.Error,"Public_static_property_0_of_exported_class_has_or_is_using_private_name_1_4028","Public static property '{0}' of exported class has or is using private name '{1}'."),Public_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4029,e.DiagnosticCategory.Error,"Public_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_name_4029","Public property '{0}' of exported class has or is using name '{1}' from external module {2} but cannot be named."),Public_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:t(4030,e.DiagnosticCategory.Error,"Public_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2_4030","Public property '{0}' of exported class has or is using name '{1}' from private module '{2}'."),Public_property_0_of_exported_class_has_or_is_using_private_name_1:t(4031,e.DiagnosticCategory.Error,"Public_property_0_of_exported_class_has_or_is_using_private_name_1_4031","Public property '{0}' of exported class has or is using private name '{1}'."),Property_0_of_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4032,e.DiagnosticCategory.Error,"Property_0_of_exported_interface_has_or_is_using_name_1_from_private_module_2_4032","Property '{0}' of exported interface has or is using name '{1}' from private module '{2}'."),Property_0_of_exported_interface_has_or_is_using_private_name_1:t(4033,e.DiagnosticCategory.Error,"Property_0_of_exported_interface_has_or_is_using_private_name_1_4033","Property '{0}' of exported interface has or is using private name '{1}'."),Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4034,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_name_1_from_private_4034","Parameter '{0}' of public static property setter from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_name_1:t(4035,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_name_1_4035","Parameter '{0}' of public static property setter from exported class has or is using private name '{1}'."),Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4036,e.DiagnosticCategory.Error,"Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_4036","Parameter '{0}' of public property setter from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_name_1:t(4037,e.DiagnosticCategory.Error,"Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_name_1_4037","Parameter '{0}' of public property setter from exported class has or is using private name '{1}'."),Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4038,e.DiagnosticCategory.Error,"Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_externa_4038","Return type of public static property getter from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4039,e.DiagnosticCategory.Error,"Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_private_4039","Return type of public static property getter from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_name_0:t(4040,e.DiagnosticCategory.Error,"Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_name_0_4040","Return type of public static property getter from exported class has or is using private name '{0}'."),Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4041,e.DiagnosticCategory.Error,"Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_external_modul_4041","Return type of public property getter from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4042,e.DiagnosticCategory.Error,"Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_4042","Return type of public property getter from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_name_0:t(4043,e.DiagnosticCategory.Error,"Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_name_0_4043","Return type of public property getter from exported class has or is using private name '{0}'."),Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4044,e.DiagnosticCategory.Error,"Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_name_0_from_private_mod_4044","Return type of constructor signature from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_0:t(4045,e.DiagnosticCategory.Error,"Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_0_4045","Return type of constructor signature from exported interface has or is using private name '{0}'."),Return_type_of_call_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4046,e.DiagnosticCategory.Error,"Return_type_of_call_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1_4046","Return type of call signature from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_name_0:t(4047,e.DiagnosticCategory.Error,"Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_name_0_4047","Return type of call signature from exported interface has or is using private name '{0}'."),Return_type_of_index_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4048,e.DiagnosticCategory.Error,"Return_type_of_index_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1_4048","Return type of index signature from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_name_0:t(4049,e.DiagnosticCategory.Error,"Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_name_0_4049","Return type of index signature from exported interface has or is using private name '{0}'."),Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4050,e.DiagnosticCategory.Error,"Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_external_module__4050","Return type of public static method from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4051,e.DiagnosticCategory.Error,"Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_private_module_1_4051","Return type of public static method from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_name_0:t(4052,e.DiagnosticCategory.Error,"Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_name_0_4052","Return type of public static method from exported class has or is using private name '{0}'."),Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4053,e.DiagnosticCategory.Error,"Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_c_4053","Return type of public method from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4054,e.DiagnosticCategory.Error,"Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_private_module_1_4054","Return type of public method from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_method_from_exported_class_has_or_is_using_private_name_0:t(4055,e.DiagnosticCategory.Error,"Return_type_of_public_method_from_exported_class_has_or_is_using_private_name_0_4055","Return type of public method from exported class has or is using private name '{0}'."),Return_type_of_method_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4056,e.DiagnosticCategory.Error,"Return_type_of_method_from_exported_interface_has_or_is_using_name_0_from_private_module_1_4056","Return type of method from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_method_from_exported_interface_has_or_is_using_private_name_0:t(4057,e.DiagnosticCategory.Error,"Return_type_of_method_from_exported_interface_has_or_is_using_private_name_0_4057","Return type of method from exported interface has or is using private name '{0}'."),Return_type_of_exported_function_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4058,e.DiagnosticCategory.Error,"Return_type_of_exported_function_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named_4058","Return type of exported function has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_exported_function_has_or_is_using_name_0_from_private_module_1:t(4059,e.DiagnosticCategory.Error,"Return_type_of_exported_function_has_or_is_using_name_0_from_private_module_1_4059","Return type of exported function has or is using name '{0}' from private module '{1}'."),Return_type_of_exported_function_has_or_is_using_private_name_0:t(4060,e.DiagnosticCategory.Error,"Return_type_of_exported_function_has_or_is_using_private_name_0_4060","Return type of exported function has or is using private name '{0}'."),Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4061,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_can_4061","Parameter '{0}' of constructor from exported class has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4062,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_private_module_2_4062","Parameter '{0}' of constructor from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_name_1:t(4063,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_name_1_4063","Parameter '{0}' of constructor from exported class has or is using private name '{1}'."),Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4064,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_name_1_from_private_mod_4064","Parameter '{0}' of constructor signature from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1:t(4065,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1_4065","Parameter '{0}' of constructor signature from exported interface has or is using private name '{1}'."),Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4066,e.DiagnosticCategory.Error,"Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2_4066","Parameter '{0}' of call signature from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1:t(4067,e.DiagnosticCategory.Error,"Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1_4067","Parameter '{0}' of call signature from exported interface has or is using private name '{1}'."),Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4068,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_external_module__4068","Parameter '{0}' of public static method from exported class has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4069,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_private_module_2_4069","Parameter '{0}' of public static method from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:t(4070,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1_4070","Parameter '{0}' of public static method from exported class has or is using private name '{1}'."),Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4071,e.DiagnosticCategory.Error,"Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_c_4071","Parameter '{0}' of public method from exported class has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4072,e.DiagnosticCategory.Error,"Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_private_module_2_4072","Parameter '{0}' of public method from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:t(4073,e.DiagnosticCategory.Error,"Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1_4073","Parameter '{0}' of public method from exported class has or is using private name '{1}'."),Parameter_0_of_method_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4074,e.DiagnosticCategory.Error,"Parameter_0_of_method_from_exported_interface_has_or_is_using_name_1_from_private_module_2_4074","Parameter '{0}' of method from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1:t(4075,e.DiagnosticCategory.Error,"Parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1_4075","Parameter '{0}' of method from exported interface has or is using private name '{1}'."),Parameter_0_of_exported_function_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4076,e.DiagnosticCategory.Error,"Parameter_0_of_exported_function_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named_4076","Parameter '{0}' of exported function has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_exported_function_has_or_is_using_name_1_from_private_module_2:t(4077,e.DiagnosticCategory.Error,"Parameter_0_of_exported_function_has_or_is_using_name_1_from_private_module_2_4077","Parameter '{0}' of exported function has or is using name '{1}' from private module '{2}'."),Parameter_0_of_exported_function_has_or_is_using_private_name_1:t(4078,e.DiagnosticCategory.Error,"Parameter_0_of_exported_function_has_or_is_using_private_name_1_4078","Parameter '{0}' of exported function has or is using private name '{1}'."),Exported_type_alias_0_has_or_is_using_private_name_1:t(4081,e.DiagnosticCategory.Error,"Exported_type_alias_0_has_or_is_using_private_name_1_4081","Exported type alias '{0}' has or is using private name '{1}'."),Default_export_of_the_module_has_or_is_using_private_name_0:t(4082,e.DiagnosticCategory.Error,"Default_export_of_the_module_has_or_is_using_private_name_0_4082","Default export of the module has or is using private name '{0}'."),Type_parameter_0_of_exported_type_alias_has_or_is_using_private_name_1:t(4083,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_type_alias_has_or_is_using_private_name_1_4083","Type parameter '{0}' of exported type alias has or is using private name '{1}'."),Conflicting_definitions_for_0_found_at_1_and_2_Consider_installing_a_specific_version_of_this_library_to_resolve_the_conflict:t(4090,e.DiagnosticCategory.Message,"Conflicting_definitions_for_0_found_at_1_and_2_Consider_installing_a_specific_version_of_this_librar_4090","Conflicting definitions for '{0}' found at '{1}' and '{2}'. Consider installing a specific version of this library to resolve the conflict."),Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4091,e.DiagnosticCategory.Error,"Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2_4091","Parameter '{0}' of index signature from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_private_name_1:t(4092,e.DiagnosticCategory.Error,"Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_private_name_1_4092","Parameter '{0}' of index signature from exported interface has or is using private name '{1}'."),Property_0_of_exported_class_expression_may_not_be_private_or_protected:t(4094,e.DiagnosticCategory.Error,"Property_0_of_exported_class_expression_may_not_be_private_or_protected_4094","Property '{0}' of exported class expression may not be private or protected."),The_current_host_does_not_support_the_0_option:t(5001,e.DiagnosticCategory.Error,"The_current_host_does_not_support_the_0_option_5001","The current host does not support the '{0}' option."),Cannot_find_the_common_subdirectory_path_for_the_input_files:t(5009,e.DiagnosticCategory.Error,"Cannot_find_the_common_subdirectory_path_for_the_input_files_5009","Cannot find the common subdirectory path for the input files."),File_specification_cannot_end_in_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0:t(5010,e.DiagnosticCategory.Error,"File_specification_cannot_end_in_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0_5010","File specification cannot end in a recursive directory wildcard ('**'): '{0}'."),File_specification_cannot_contain_multiple_recursive_directory_wildcards_Asterisk_Asterisk_Colon_0:t(5011,e.DiagnosticCategory.Error,"File_specification_cannot_contain_multiple_recursive_directory_wildcards_Asterisk_Asterisk_Colon_0_5011","File specification cannot contain multiple recursive directory wildcards ('**'): '{0}'."),Cannot_read_file_0_Colon_1:t(5012,e.DiagnosticCategory.Error,"Cannot_read_file_0_Colon_1_5012","Cannot read file '{0}': {1}."),Failed_to_parse_file_0_Colon_1:t(5014,e.DiagnosticCategory.Error,"Failed_to_parse_file_0_Colon_1_5014","Failed to parse file '{0}': {1}."),Unknown_compiler_option_0:t(5023,e.DiagnosticCategory.Error,"Unknown_compiler_option_0_5023","Unknown compiler option '{0}'."),Compiler_option_0_requires_a_value_of_type_1:t(5024,e.DiagnosticCategory.Error,"Compiler_option_0_requires_a_value_of_type_1_5024","Compiler option '{0}' requires a value of type {1}."),Could_not_write_file_0_Colon_1:t(5033,e.DiagnosticCategory.Error,"Could_not_write_file_0_Colon_1_5033","Could not write file '{0}': {1}."),Option_project_cannot_be_mixed_with_source_files_on_a_command_line:t(5042,e.DiagnosticCategory.Error,"Option_project_cannot_be_mixed_with_source_files_on_a_command_line_5042","Option 'project' cannot be mixed with source files on a command line."),Option_isolatedModules_can_only_be_used_when_either_option_module_is_provided_or_option_target_is_ES2015_or_higher:t(5047,e.DiagnosticCategory.Error,"Option_isolatedModules_can_only_be_used_when_either_option_module_is_provided_or_option_target_is_ES_5047","Option 'isolatedModules' can only be used when either option '--module' is provided or option 'target' is 'ES2015' or higher."),Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided:t(5051,e.DiagnosticCategory.Error,"Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided_5051","Option '{0} can only be used when either option '--inlineSourceMap' or option '--sourceMap' is provided."),Option_0_cannot_be_specified_without_specifying_option_1:t(5052,e.DiagnosticCategory.Error,"Option_0_cannot_be_specified_without_specifying_option_1_5052","Option '{0}' cannot be specified without specifying option '{1}'."),Option_0_cannot_be_specified_with_option_1:t(5053,e.DiagnosticCategory.Error,"Option_0_cannot_be_specified_with_option_1_5053","Option '{0}' cannot be specified with option '{1}'."),A_tsconfig_json_file_is_already_defined_at_Colon_0:t(5054,e.DiagnosticCategory.Error,"A_tsconfig_json_file_is_already_defined_at_Colon_0_5054","A 'tsconfig.json' file is already defined at: '{0}'."),Cannot_write_file_0_because_it_would_overwrite_input_file:t(5055,e.DiagnosticCategory.Error,"Cannot_write_file_0_because_it_would_overwrite_input_file_5055","Cannot write file '{0}' because it would overwrite input file."),Cannot_write_file_0_because_it_would_be_overwritten_by_multiple_input_files:t(5056,e.DiagnosticCategory.Error,"Cannot_write_file_0_because_it_would_be_overwritten_by_multiple_input_files_5056","Cannot write file '{0}' because it would be overwritten by multiple input files."),Cannot_find_a_tsconfig_json_file_at_the_specified_directory_Colon_0:t(5057,e.DiagnosticCategory.Error,"Cannot_find_a_tsconfig_json_file_at_the_specified_directory_Colon_0_5057","Cannot find a tsconfig.json file at the specified directory: '{0}'."),The_specified_path_does_not_exist_Colon_0:t(5058,e.DiagnosticCategory.Error,"The_specified_path_does_not_exist_Colon_0_5058","The specified path does not exist: '{0}'."),Invalid_value_for_reactNamespace_0_is_not_a_valid_identifier:t(5059,e.DiagnosticCategory.Error,"Invalid_value_for_reactNamespace_0_is_not_a_valid_identifier_5059","Invalid value for '--reactNamespace'. '{0}' is not a valid identifier."),Option_paths_cannot_be_used_without_specifying_baseUrl_option:t(5060,e.DiagnosticCategory.Error,"Option_paths_cannot_be_used_without_specifying_baseUrl_option_5060","Option 'paths' cannot be used without specifying '--baseUrl' option."),Pattern_0_can_have_at_most_one_Asterisk_character:t(5061,e.DiagnosticCategory.Error,"Pattern_0_can_have_at_most_one_Asterisk_character_5061","Pattern '{0}' can have at most one '*' character."),Substitution_0_in_pattern_1_in_can_have_at_most_one_Asterisk_character:t(5062,e.DiagnosticCategory.Error,"Substitution_0_in_pattern_1_in_can_have_at_most_one_Asterisk_character_5062","Substitution '{0}' in pattern '{1}' in can have at most one '*' character."),Substitutions_for_pattern_0_should_be_an_array:t(5063,e.DiagnosticCategory.Error,"Substitutions_for_pattern_0_should_be_an_array_5063","Substitutions for pattern '{0}' should be an array."),Substitution_0_for_pattern_1_has_incorrect_type_expected_string_got_2:t(5064,e.DiagnosticCategory.Error,"Substitution_0_for_pattern_1_has_incorrect_type_expected_string_got_2_5064","Substitution '{0}' for pattern '{1}' has incorrect type, expected 'string', got '{2}'."),File_specification_cannot_contain_a_parent_directory_that_appears_after_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0:t(5065,e.DiagnosticCategory.Error,"File_specification_cannot_contain_a_parent_directory_that_appears_after_a_recursive_directory_wildca_5065","File specification cannot contain a parent directory ('..') that appears after a recursive directory wildcard ('**'): '{0}'."),Substitutions_for_pattern_0_shouldn_t_be_an_empty_array:t(5066,e.DiagnosticCategory.Error,"Substitutions_for_pattern_0_shouldn_t_be_an_empty_array_5066","Substitutions for pattern '{0}' shouldn't be an empty array."),Invalid_value_for_jsxFactory_0_is_not_a_valid_identifier_or_qualified_name:t(5067,e.DiagnosticCategory.Error,"Invalid_value_for_jsxFactory_0_is_not_a_valid_identifier_or_qualified_name_5067","Invalid value for 'jsxFactory'. '{0}' is not a valid identifier or qualified-name."),Concatenate_and_emit_output_to_single_file:t(6001,e.DiagnosticCategory.Message,"Concatenate_and_emit_output_to_single_file_6001","Concatenate and emit output to single file."),Generates_corresponding_d_ts_file:t(6002,e.DiagnosticCategory.Message,"Generates_corresponding_d_ts_file_6002","Generates corresponding '.d.ts' file."),Specify_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations:t(6003,e.DiagnosticCategory.Message,"Specify_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations_6003","Specify the location where debugger should locate map files instead of generated locations."),Specify_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations:t(6004,e.DiagnosticCategory.Message,"Specify_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations_6004","Specify the location where debugger should locate TypeScript files instead of source locations."),Watch_input_files:t(6005,e.DiagnosticCategory.Message,"Watch_input_files_6005","Watch input files."),Redirect_output_structure_to_the_directory:t(6006,e.DiagnosticCategory.Message,"Redirect_output_structure_to_the_directory_6006","Redirect output structure to the directory."),Do_not_erase_const_enum_declarations_in_generated_code:t(6007,e.DiagnosticCategory.Message,"Do_not_erase_const_enum_declarations_in_generated_code_6007","Do not erase const enum declarations in generated code."),Do_not_emit_outputs_if_any_errors_were_reported:t(6008,e.DiagnosticCategory.Message,"Do_not_emit_outputs_if_any_errors_were_reported_6008","Do not emit outputs if any errors were reported."),Do_not_emit_comments_to_output:t(6009,e.DiagnosticCategory.Message,"Do_not_emit_comments_to_output_6009","Do not emit comments to output."),Do_not_emit_outputs:t(6010,e.DiagnosticCategory.Message,"Do_not_emit_outputs_6010","Do not emit outputs."),Allow_default_imports_from_modules_with_no_default_export_This_does_not_affect_code_emit_just_typechecking:t(6011,e.DiagnosticCategory.Message,"Allow_default_imports_from_modules_with_no_default_export_This_does_not_affect_code_emit_just_typech_6011","Allow default imports from modules with no default export. This does not affect code emit, just typechecking."),Skip_type_checking_of_declaration_files:t(6012,e.DiagnosticCategory.Message,"Skip_type_checking_of_declaration_files_6012","Skip type checking of declaration files."),Do_not_resolve_the_real_path_of_symlinks:t(6013,e.DiagnosticCategory.Message,"Do_not_resolve_the_real_path_of_symlinks_6013","Do not resolve the real path of symlinks."),Specify_ECMAScript_target_version_Colon_ES3_default_ES5_ES2015_ES2016_ES2017_or_ESNEXT:t(6015,e.DiagnosticCategory.Message,"Specify_ECMAScript_target_version_Colon_ES3_default_ES5_ES2015_ES2016_ES2017_or_ESNEXT_6015","Specify ECMAScript target version: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017', or 'ESNEXT'."),Specify_module_code_generation_Colon_none_commonjs_amd_system_umd_es2015_or_ESNext:t(6016,e.DiagnosticCategory.Message,"Specify_module_code_generation_Colon_none_commonjs_amd_system_umd_es2015_or_ESNext_6016","Specify module code generation: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015', or 'ESNext'."),Print_this_message:t(6017,e.DiagnosticCategory.Message,"Print_this_message_6017","Print this message."),Print_the_compiler_s_version:t(6019,e.DiagnosticCategory.Message,"Print_the_compiler_s_version_6019","Print the compiler's version."),Compile_the_project_given_the_path_to_its_configuration_file_or_to_a_folder_with_a_tsconfig_json:t(6020,e.DiagnosticCategory.Message,"Compile_the_project_given_the_path_to_its_configuration_file_or_to_a_folder_with_a_tsconfig_json_6020","Compile the project given the path to its configuration file, or to a folder with a 'tsconfig.json'."),Syntax_Colon_0:t(6023,e.DiagnosticCategory.Message,"Syntax_Colon_0_6023","Syntax: {0}"),options:t(6024,e.DiagnosticCategory.Message,"options_6024","options"),file:t(6025,e.DiagnosticCategory.Message,"file_6025","file"),Examples_Colon_0:t(6026,e.DiagnosticCategory.Message,"Examples_Colon_0_6026","Examples: {0}"),Options_Colon:t(6027,e.DiagnosticCategory.Message,"Options_Colon_6027","Options:"),Version_0:t(6029,e.DiagnosticCategory.Message,"Version_0_6029","Version {0}"),Insert_command_line_options_and_files_from_a_file:t(6030,e.DiagnosticCategory.Message,"Insert_command_line_options_and_files_from_a_file_6030","Insert command line options and files from a file."),File_change_detected_Starting_incremental_compilation:t(6032,e.DiagnosticCategory.Message,"File_change_detected_Starting_incremental_compilation_6032","File change detected. Starting incremental compilation..."),KIND:t(6034,e.DiagnosticCategory.Message,"KIND_6034","KIND"),FILE:t(6035,e.DiagnosticCategory.Message,"FILE_6035","FILE"),VERSION:t(6036,e.DiagnosticCategory.Message,"VERSION_6036","VERSION"),LOCATION:t(6037,e.DiagnosticCategory.Message,"LOCATION_6037","LOCATION"),DIRECTORY:t(6038,e.DiagnosticCategory.Message,"DIRECTORY_6038","DIRECTORY"),STRATEGY:t(6039,e.DiagnosticCategory.Message,"STRATEGY_6039","STRATEGY"),FILE_OR_DIRECTORY:t(6040,e.DiagnosticCategory.Message,"FILE_OR_DIRECTORY_6040","FILE OR DIRECTORY"),Compilation_complete_Watching_for_file_changes:t(6042,e.DiagnosticCategory.Message,"Compilation_complete_Watching_for_file_changes_6042","Compilation complete. Watching for file changes."),Generates_corresponding_map_file:t(6043,e.DiagnosticCategory.Message,"Generates_corresponding_map_file_6043","Generates corresponding '.map' file."),Compiler_option_0_expects_an_argument:t(6044,e.DiagnosticCategory.Error,"Compiler_option_0_expects_an_argument_6044","Compiler option '{0}' expects an argument."),Unterminated_quoted_string_in_response_file_0:t(6045,e.DiagnosticCategory.Error,"Unterminated_quoted_string_in_response_file_0_6045","Unterminated quoted string in response file '{0}'."),Argument_for_0_option_must_be_Colon_1:t(6046,e.DiagnosticCategory.Error,"Argument_for_0_option_must_be_Colon_1_6046","Argument for '{0}' option must be: {1}."),Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1:t(6048,e.DiagnosticCategory.Error,"Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1_6048","Locale must be of the form <language> or <language>-<territory>. For example '{0}' or '{1}'."),Unsupported_locale_0:t(6049,e.DiagnosticCategory.Error,"Unsupported_locale_0_6049","Unsupported locale '{0}'."),Unable_to_open_file_0:t(6050,e.DiagnosticCategory.Error,"Unable_to_open_file_0_6050","Unable to open file '{0}'."),Corrupted_locale_file_0:t(6051,e.DiagnosticCategory.Error,"Corrupted_locale_file_0_6051","Corrupted locale file {0}."),Raise_error_on_expressions_and_declarations_with_an_implied_any_type:t(6052,e.DiagnosticCategory.Message,"Raise_error_on_expressions_and_declarations_with_an_implied_any_type_6052","Raise error on expressions and declarations with an implied 'any' type."),File_0_not_found:t(6053,e.DiagnosticCategory.Error,"File_0_not_found_6053","File '{0}' not found."),File_0_has_unsupported_extension_The_only_supported_extensions_are_1:t(6054,e.DiagnosticCategory.Error,"File_0_has_unsupported_extension_The_only_supported_extensions_are_1_6054","File '{0}' has unsupported extension. The only supported extensions are {1}."),Suppress_noImplicitAny_errors_for_indexing_objects_lacking_index_signatures:t(6055,e.DiagnosticCategory.Message,"Suppress_noImplicitAny_errors_for_indexing_objects_lacking_index_signatures_6055","Suppress noImplicitAny errors for indexing objects lacking index signatures."),Do_not_emit_declarations_for_code_that_has_an_internal_annotation:t(6056,e.DiagnosticCategory.Message,"Do_not_emit_declarations_for_code_that_has_an_internal_annotation_6056","Do not emit declarations for code that has an '@internal' annotation."),Specify_the_root_directory_of_input_files_Use_to_control_the_output_directory_structure_with_outDir:t(6058,e.DiagnosticCategory.Message,"Specify_the_root_directory_of_input_files_Use_to_control_the_output_directory_structure_with_outDir_6058","Specify the root directory of input files. Use to control the output directory structure with --outDir."),File_0_is_not_under_rootDir_1_rootDir_is_expected_to_contain_all_source_files:t(6059,e.DiagnosticCategory.Error,"File_0_is_not_under_rootDir_1_rootDir_is_expected_to_contain_all_source_files_6059","File '{0}' is not under 'rootDir' '{1}'. 'rootDir' is expected to contain all source files."),Specify_the_end_of_line_sequence_to_be_used_when_emitting_files_Colon_CRLF_dos_or_LF_unix:t(6060,e.DiagnosticCategory.Message,"Specify_the_end_of_line_sequence_to_be_used_when_emitting_files_Colon_CRLF_dos_or_LF_unix_6060","Specify the end of line sequence to be used when emitting files: 'CRLF' (dos) or 'LF' (unix)."),NEWLINE:t(6061,e.DiagnosticCategory.Message,"NEWLINE_6061","NEWLINE"),Option_0_can_only_be_specified_in_tsconfig_json_file:t(6064,e.DiagnosticCategory.Error,"Option_0_can_only_be_specified_in_tsconfig_json_file_6064","Option '{0}' can only be specified in 'tsconfig.json' file."),Enables_experimental_support_for_ES7_decorators:t(6065,e.DiagnosticCategory.Message,"Enables_experimental_support_for_ES7_decorators_6065","Enables experimental support for ES7 decorators."),Enables_experimental_support_for_emitting_type_metadata_for_decorators:t(6066,e.DiagnosticCategory.Message,"Enables_experimental_support_for_emitting_type_metadata_for_decorators_6066","Enables experimental support for emitting type metadata for decorators."),Enables_experimental_support_for_ES7_async_functions:t(6068,e.DiagnosticCategory.Message,"Enables_experimental_support_for_ES7_async_functions_6068","Enables experimental support for ES7 async functions."),Specify_module_resolution_strategy_Colon_node_Node_js_or_classic_TypeScript_pre_1_6:t(6069,e.DiagnosticCategory.Message,"Specify_module_resolution_strategy_Colon_node_Node_js_or_classic_TypeScript_pre_1_6_6069","Specify module resolution strategy: 'node' (Node.js) or 'classic' (TypeScript pre-1.6)."),Initializes_a_TypeScript_project_and_creates_a_tsconfig_json_file:t(6070,e.DiagnosticCategory.Message,"Initializes_a_TypeScript_project_and_creates_a_tsconfig_json_file_6070","Initializes a TypeScript project and creates a tsconfig.json file."),Successfully_created_a_tsconfig_json_file:t(6071,e.DiagnosticCategory.Message,"Successfully_created_a_tsconfig_json_file_6071","Successfully created a tsconfig.json file."),Suppress_excess_property_checks_for_object_literals:t(6072,e.DiagnosticCategory.Message,"Suppress_excess_property_checks_for_object_literals_6072","Suppress excess property checks for object literals."),Stylize_errors_and_messages_using_color_and_context_experimental:t(6073,e.DiagnosticCategory.Message,"Stylize_errors_and_messages_using_color_and_context_experimental_6073","Stylize errors and messages using color and context (experimental)."),Do_not_report_errors_on_unused_labels:t(6074,e.DiagnosticCategory.Message,"Do_not_report_errors_on_unused_labels_6074","Do not report errors on unused labels."),Report_error_when_not_all_code_paths_in_function_return_a_value:t(6075,e.DiagnosticCategory.Message,"Report_error_when_not_all_code_paths_in_function_return_a_value_6075","Report error when not all code paths in function return a value."),Report_errors_for_fallthrough_cases_in_switch_statement:t(6076,e.DiagnosticCategory.Message,"Report_errors_for_fallthrough_cases_in_switch_statement_6076","Report errors for fallthrough cases in switch statement."),Do_not_report_errors_on_unreachable_code:t(6077,e.DiagnosticCategory.Message,"Do_not_report_errors_on_unreachable_code_6077","Do not report errors on unreachable code."),Disallow_inconsistently_cased_references_to_the_same_file:t(6078,e.DiagnosticCategory.Message,"Disallow_inconsistently_cased_references_to_the_same_file_6078","Disallow inconsistently-cased references to the same file."),Specify_library_files_to_be_included_in_the_compilation_Colon:t(6079,e.DiagnosticCategory.Message,"Specify_library_files_to_be_included_in_the_compilation_Colon_6079","Specify library files to be included in the compilation: "),Specify_JSX_code_generation_Colon_preserve_react_native_or_react:t(6080,e.DiagnosticCategory.Message,"Specify_JSX_code_generation_Colon_preserve_react_native_or_react_6080","Specify JSX code generation: 'preserve', 'react-native', or 'react'."),File_0_has_an_unsupported_extension_so_skipping_it:t(6081,e.DiagnosticCategory.Message,"File_0_has_an_unsupported_extension_so_skipping_it_6081","File '{0}' has an unsupported extension, so skipping it."),Only_amd_and_system_modules_are_supported_alongside_0:t(6082,e.DiagnosticCategory.Error,"Only_amd_and_system_modules_are_supported_alongside_0_6082","Only 'amd' and 'system' modules are supported alongside --{0}."),Base_directory_to_resolve_non_absolute_module_names:t(6083,e.DiagnosticCategory.Message,"Base_directory_to_resolve_non_absolute_module_names_6083","Base directory to resolve non-absolute module names."),Deprecated_Use_jsxFactory_instead_Specify_the_object_invoked_for_createElement_when_targeting_react_JSX_emit:t(6084,e.DiagnosticCategory.Message,"Deprecated_Use_jsxFactory_instead_Specify_the_object_invoked_for_createElement_when_targeting_react__6084","[Deprecated] Use '--jsxFactory' instead. Specify the object invoked for createElement when targeting 'react' JSX emit"),Enable_tracing_of_the_name_resolution_process:t(6085,e.DiagnosticCategory.Message,"Enable_tracing_of_the_name_resolution_process_6085","Enable tracing of the name resolution process."),Resolving_module_0_from_1:t(6086,e.DiagnosticCategory.Message,"Resolving_module_0_from_1_6086","======== Resolving module '{0}' from '{1}'. ========"),Explicitly_specified_module_resolution_kind_Colon_0:t(6087,e.DiagnosticCategory.Message,"Explicitly_specified_module_resolution_kind_Colon_0_6087","Explicitly specified module resolution kind: '{0}'."),Module_resolution_kind_is_not_specified_using_0:t(6088,e.DiagnosticCategory.Message,"Module_resolution_kind_is_not_specified_using_0_6088","Module resolution kind is not specified, using '{0}'."),Module_name_0_was_successfully_resolved_to_1:t(6089,e.DiagnosticCategory.Message,"Module_name_0_was_successfully_resolved_to_1_6089","======== Module name '{0}' was successfully resolved to '{1}'. ========"),Module_name_0_was_not_resolved:t(6090,e.DiagnosticCategory.Message,"Module_name_0_was_not_resolved_6090","======== Module name '{0}' was not resolved. ========"),paths_option_is_specified_looking_for_a_pattern_to_match_module_name_0:t(6091,e.DiagnosticCategory.Message,"paths_option_is_specified_looking_for_a_pattern_to_match_module_name_0_6091","'paths' option is specified, looking for a pattern to match module name '{0}'."),Module_name_0_matched_pattern_1:t(6092,e.DiagnosticCategory.Message,"Module_name_0_matched_pattern_1_6092","Module name '{0}', matched pattern '{1}'."),Trying_substitution_0_candidate_module_location_Colon_1:t(6093,e.DiagnosticCategory.Message,"Trying_substitution_0_candidate_module_location_Colon_1_6093","Trying substitution '{0}', candidate module location: '{1}'."),Resolving_module_name_0_relative_to_base_url_1_2:t(6094,e.DiagnosticCategory.Message,"Resolving_module_name_0_relative_to_base_url_1_2_6094","Resolving module name '{0}' relative to base url '{1}' - '{2}'."),Loading_module_as_file_Slash_folder_candidate_module_location_0_target_file_type_1:t(6095,e.DiagnosticCategory.Message,"Loading_module_as_file_Slash_folder_candidate_module_location_0_target_file_type_1_6095","Loading module as file / folder, candidate module location '{0}', target file type '{1}'."),File_0_does_not_exist:t(6096,e.DiagnosticCategory.Message,"File_0_does_not_exist_6096","File '{0}' does not exist."),File_0_exist_use_it_as_a_name_resolution_result:t(6097,e.DiagnosticCategory.Message,"File_0_exist_use_it_as_a_name_resolution_result_6097","File '{0}' exist - use it as a name resolution result."),Loading_module_0_from_node_modules_folder_target_file_type_1:t(6098,e.DiagnosticCategory.Message,"Loading_module_0_from_node_modules_folder_target_file_type_1_6098","Loading module '{0}' from 'node_modules' folder, target file type '{1}'."),Found_package_json_at_0:t(6099,e.DiagnosticCategory.Message,"Found_package_json_at_0_6099","Found 'package.json' at '{0}'."),package_json_does_not_have_a_0_field:t(6100,e.DiagnosticCategory.Message,"package_json_does_not_have_a_0_field_6100","'package.json' does not have a '{0}' field."),package_json_has_0_field_1_that_references_2:t(6101,e.DiagnosticCategory.Message,"package_json_has_0_field_1_that_references_2_6101","'package.json' has '{0}' field '{1}' that references '{2}'."),Allow_javascript_files_to_be_compiled:t(6102,e.DiagnosticCategory.Message,"Allow_javascript_files_to_be_compiled_6102","Allow javascript files to be compiled."),Option_0_should_have_array_of_strings_as_a_value:t(6103,e.DiagnosticCategory.Error,"Option_0_should_have_array_of_strings_as_a_value_6103","Option '{0}' should have array of strings as a value."),Checking_if_0_is_the_longest_matching_prefix_for_1_2:t(6104,e.DiagnosticCategory.Message,"Checking_if_0_is_the_longest_matching_prefix_for_1_2_6104","Checking if '{0}' is the longest matching prefix for '{1}' - '{2}'."),Expected_type_of_0_field_in_package_json_to_be_string_got_1:t(6105,e.DiagnosticCategory.Message,"Expected_type_of_0_field_in_package_json_to_be_string_got_1_6105","Expected type of '{0}' field in 'package.json' to be 'string', got '{1}'."),baseUrl_option_is_set_to_0_using_this_value_to_resolve_non_relative_module_name_1:t(6106,e.DiagnosticCategory.Message,"baseUrl_option_is_set_to_0_using_this_value_to_resolve_non_relative_module_name_1_6106","'baseUrl' option is set to '{0}', using this value to resolve non-relative module name '{1}'."),rootDirs_option_is_set_using_it_to_resolve_relative_module_name_0:t(6107,e.DiagnosticCategory.Message,"rootDirs_option_is_set_using_it_to_resolve_relative_module_name_0_6107","'rootDirs' option is set, using it to resolve relative module name '{0}'."),Longest_matching_prefix_for_0_is_1:t(6108,e.DiagnosticCategory.Message,"Longest_matching_prefix_for_0_is_1_6108","Longest matching prefix for '{0}' is '{1}'."),Loading_0_from_the_root_dir_1_candidate_location_2:t(6109,e.DiagnosticCategory.Message,"Loading_0_from_the_root_dir_1_candidate_location_2_6109","Loading '{0}' from the root dir '{1}', candidate location '{2}'."),Trying_other_entries_in_rootDirs:t(6110,e.DiagnosticCategory.Message,"Trying_other_entries_in_rootDirs_6110","Trying other entries in 'rootDirs'."),Module_resolution_using_rootDirs_has_failed:t(6111,e.DiagnosticCategory.Message,"Module_resolution_using_rootDirs_has_failed_6111","Module resolution using 'rootDirs' has failed."),Do_not_emit_use_strict_directives_in_module_output:t(6112,e.DiagnosticCategory.Message,"Do_not_emit_use_strict_directives_in_module_output_6112","Do not emit 'use strict' directives in module output."),Enable_strict_null_checks:t(6113,e.DiagnosticCategory.Message,"Enable_strict_null_checks_6113","Enable strict null checks."),Unknown_option_excludes_Did_you_mean_exclude:t(6114,e.DiagnosticCategory.Error,"Unknown_option_excludes_Did_you_mean_exclude_6114","Unknown option 'excludes'. Did you mean 'exclude'?"),Raise_error_on_this_expressions_with_an_implied_any_type:t(6115,e.DiagnosticCategory.Message,"Raise_error_on_this_expressions_with_an_implied_any_type_6115","Raise error on 'this' expressions with an implied 'any' type."),Resolving_type_reference_directive_0_containing_file_1_root_directory_2:t(6116,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_1_root_directory_2_6116","======== Resolving type reference directive '{0}', containing file '{1}', root directory '{2}'. ========"),Resolving_using_primary_search_paths:t(6117,e.DiagnosticCategory.Message,"Resolving_using_primary_search_paths_6117","Resolving using primary search paths..."),Resolving_from_node_modules_folder:t(6118,e.DiagnosticCategory.Message,"Resolving_from_node_modules_folder_6118","Resolving from node_modules folder..."),Type_reference_directive_0_was_successfully_resolved_to_1_primary_Colon_2:t(6119,e.DiagnosticCategory.Message,"Type_reference_directive_0_was_successfully_resolved_to_1_primary_Colon_2_6119","======== Type reference directive '{0}' was successfully resolved to '{1}', primary: {2}. ========"),Type_reference_directive_0_was_not_resolved:t(6120,e.DiagnosticCategory.Message,"Type_reference_directive_0_was_not_resolved_6120","======== Type reference directive '{0}' was not resolved. ========"),Resolving_with_primary_search_path_0:t(6121,e.DiagnosticCategory.Message,"Resolving_with_primary_search_path_0_6121","Resolving with primary search path '{0}'."),Root_directory_cannot_be_determined_skipping_primary_search_paths:t(6122,e.DiagnosticCategory.Message,"Root_directory_cannot_be_determined_skipping_primary_search_paths_6122","Root directory cannot be determined, skipping primary search paths."),Resolving_type_reference_directive_0_containing_file_1_root_directory_not_set:t(6123,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_1_root_directory_not_set_6123","======== Resolving type reference directive '{0}', containing file '{1}', root directory not set. ========"),Type_declaration_files_to_be_included_in_compilation:t(6124,e.DiagnosticCategory.Message,"Type_declaration_files_to_be_included_in_compilation_6124","Type declaration files to be included in compilation."),Looking_up_in_node_modules_folder_initial_location_0:t(6125,e.DiagnosticCategory.Message,"Looking_up_in_node_modules_folder_initial_location_0_6125","Looking up in 'node_modules' folder, initial location '{0}'."),Containing_file_is_not_specified_and_root_directory_cannot_be_determined_skipping_lookup_in_node_modules_folder:t(6126,e.DiagnosticCategory.Message,"Containing_file_is_not_specified_and_root_directory_cannot_be_determined_skipping_lookup_in_node_mod_6126","Containing file is not specified and root directory cannot be determined, skipping lookup in 'node_modules' folder."),Resolving_type_reference_directive_0_containing_file_not_set_root_directory_1:t(6127,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_not_set_root_directory_1_6127","======== Resolving type reference directive '{0}', containing file not set, root directory '{1}'. ========"),Resolving_type_reference_directive_0_containing_file_not_set_root_directory_not_set:t(6128,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_not_set_root_directory_not_set_6128","======== Resolving type reference directive '{0}', containing file not set, root directory not set. ========"),Resolving_real_path_for_0_result_1:t(6130,e.DiagnosticCategory.Message,"Resolving_real_path_for_0_result_1_6130","Resolving real path for '{0}', result '{1}'."),Cannot_compile_modules_using_option_0_unless_the_module_flag_is_amd_or_system:t(6131,e.DiagnosticCategory.Error,"Cannot_compile_modules_using_option_0_unless_the_module_flag_is_amd_or_system_6131","Cannot compile modules using option '{0}' unless the '--module' flag is 'amd' or 'system'."),File_name_0_has_a_1_extension_stripping_it:t(6132,e.DiagnosticCategory.Message,"File_name_0_has_a_1_extension_stripping_it_6132","File name '{0}' has a '{1}' extension - stripping it."),_0_is_declared_but_its_value_is_never_read:t(6133,e.DiagnosticCategory.Error,"_0_is_declared_but_its_value_is_never_read_6133","'{0}' is declared but its value is never read."),Report_errors_on_unused_locals:t(6134,e.DiagnosticCategory.Message,"Report_errors_on_unused_locals_6134","Report errors on unused locals."),Report_errors_on_unused_parameters:t(6135,e.DiagnosticCategory.Message,"Report_errors_on_unused_parameters_6135","Report errors on unused parameters."),The_maximum_dependency_depth_to_search_under_node_modules_and_load_JavaScript_files:t(6136,e.DiagnosticCategory.Message,"The_maximum_dependency_depth_to_search_under_node_modules_and_load_JavaScript_files_6136","The maximum dependency depth to search under node_modules and load JavaScript files."),Cannot_import_type_declaration_files_Consider_importing_0_instead_of_1:t(6137,e.DiagnosticCategory.Error,"Cannot_import_type_declaration_files_Consider_importing_0_instead_of_1_6137","Cannot import type declaration files. Consider importing '{0}' instead of '{1}'."),Property_0_is_declared_but_its_value_is_never_read:t(6138,e.DiagnosticCategory.Error,"Property_0_is_declared_but_its_value_is_never_read_6138","Property '{0}' is declared but its value is never read."),Import_emit_helpers_from_tslib:t(6139,e.DiagnosticCategory.Message,"Import_emit_helpers_from_tslib_6139","Import emit helpers from 'tslib'."),Auto_discovery_for_typings_is_enabled_in_project_0_Running_extra_resolution_pass_for_module_1_using_cache_location_2:t(6140,e.DiagnosticCategory.Error,"Auto_discovery_for_typings_is_enabled_in_project_0_Running_extra_resolution_pass_for_module_1_using__6140","Auto discovery for typings is enabled in project '{0}'. Running extra resolution pass for module '{1}' using cache location '{2}'."),Parse_in_strict_mode_and_emit_use_strict_for_each_source_file:t(6141,e.DiagnosticCategory.Message,"Parse_in_strict_mode_and_emit_use_strict_for_each_source_file_6141",'Parse in strict mode and emit "use strict" for each source file.'),Module_0_was_resolved_to_1_but_jsx_is_not_set:t(6142,e.DiagnosticCategory.Error,"Module_0_was_resolved_to_1_but_jsx_is_not_set_6142","Module '{0}' was resolved to '{1}', but '--jsx' is not set."),Module_0_was_resolved_as_locally_declared_ambient_module_in_file_1:t(6144,e.DiagnosticCategory.Message,"Module_0_was_resolved_as_locally_declared_ambient_module_in_file_1_6144","Module '{0}' was resolved as locally declared ambient module in file '{1}'."),Module_0_was_resolved_as_ambient_module_declared_in_1_since_this_file_was_not_modified:t(6145,e.DiagnosticCategory.Message,"Module_0_was_resolved_as_ambient_module_declared_in_1_since_this_file_was_not_modified_6145","Module '{0}' was resolved as ambient module declared in '{1}' since this file was not modified."),Specify_the_JSX_factory_function_to_use_when_targeting_react_JSX_emit_e_g_React_createElement_or_h:t(6146,e.DiagnosticCategory.Message,"Specify_the_JSX_factory_function_to_use_when_targeting_react_JSX_emit_e_g_React_createElement_or_h_6146","Specify the JSX factory function to use when targeting 'react' JSX emit, e.g. 'React.createElement' or 'h'."),Resolution_for_module_0_was_found_in_cache:t(6147,e.DiagnosticCategory.Message,"Resolution_for_module_0_was_found_in_cache_6147","Resolution for module '{0}' was found in cache."),Directory_0_does_not_exist_skipping_all_lookups_in_it:t(6148,e.DiagnosticCategory.Message,"Directory_0_does_not_exist_skipping_all_lookups_in_it_6148","Directory '{0}' does not exist, skipping all lookups in it."),Show_diagnostic_information:t(6149,e.DiagnosticCategory.Message,"Show_diagnostic_information_6149","Show diagnostic information."),Show_verbose_diagnostic_information:t(6150,e.DiagnosticCategory.Message,"Show_verbose_diagnostic_information_6150","Show verbose diagnostic information."),Emit_a_single_file_with_source_maps_instead_of_having_a_separate_file:t(6151,e.DiagnosticCategory.Message,"Emit_a_single_file_with_source_maps_instead_of_having_a_separate_file_6151","Emit a single file with source maps instead of having a separate file."),Emit_the_source_alongside_the_sourcemaps_within_a_single_file_requires_inlineSourceMap_or_sourceMap_to_be_set:t(6152,e.DiagnosticCategory.Message,"Emit_the_source_alongside_the_sourcemaps_within_a_single_file_requires_inlineSourceMap_or_sourceMap__6152","Emit the source alongside the sourcemaps within a single file; requires '--inlineSourceMap' or '--sourceMap' to be set."),Transpile_each_file_as_a_separate_module_similar_to_ts_transpileModule:t(6153,e.DiagnosticCategory.Message,"Transpile_each_file_as_a_separate_module_similar_to_ts_transpileModule_6153","Transpile each file as a separate module (similar to 'ts.transpileModule')."),Print_names_of_generated_files_part_of_the_compilation:t(6154,e.DiagnosticCategory.Message,"Print_names_of_generated_files_part_of_the_compilation_6154","Print names of generated files part of the compilation."),Print_names_of_files_part_of_the_compilation:t(6155,e.DiagnosticCategory.Message,"Print_names_of_files_part_of_the_compilation_6155","Print names of files part of the compilation."),The_locale_used_when_displaying_messages_to_the_user_e_g_en_us:t(6156,e.DiagnosticCategory.Message,"The_locale_used_when_displaying_messages_to_the_user_e_g_en_us_6156","The locale used when displaying messages to the user (e.g. 'en-us')"),Do_not_generate_custom_helper_functions_like_extends_in_compiled_output:t(6157,e.DiagnosticCategory.Message,"Do_not_generate_custom_helper_functions_like_extends_in_compiled_output_6157","Do not generate custom helper functions like '__extends' in compiled output."),Do_not_include_the_default_library_file_lib_d_ts:t(6158,e.DiagnosticCategory.Message,"Do_not_include_the_default_library_file_lib_d_ts_6158","Do not include the default library file (lib.d.ts)."),Do_not_add_triple_slash_references_or_imported_modules_to_the_list_of_compiled_files:t(6159,e.DiagnosticCategory.Message,"Do_not_add_triple_slash_references_or_imported_modules_to_the_list_of_compiled_files_6159","Do not add triple-slash references or imported modules to the list of compiled files."),Deprecated_Use_skipLibCheck_instead_Skip_type_checking_of_default_library_declaration_files:t(6160,e.DiagnosticCategory.Message,"Deprecated_Use_skipLibCheck_instead_Skip_type_checking_of_default_library_declaration_files_6160","[Deprecated] Use '--skipLibCheck' instead. Skip type checking of default library declaration files."),List_of_folders_to_include_type_definitions_from:t(6161,e.DiagnosticCategory.Message,"List_of_folders_to_include_type_definitions_from_6161","List of folders to include type definitions from."),Disable_size_limitations_on_JavaScript_projects:t(6162,e.DiagnosticCategory.Message,"Disable_size_limitations_on_JavaScript_projects_6162","Disable size limitations on JavaScript projects."),The_character_set_of_the_input_files:t(6163,e.DiagnosticCategory.Message,"The_character_set_of_the_input_files_6163","The character set of the input files."),Emit_a_UTF_8_Byte_Order_Mark_BOM_in_the_beginning_of_output_files:t(6164,e.DiagnosticCategory.Message,"Emit_a_UTF_8_Byte_Order_Mark_BOM_in_the_beginning_of_output_files_6164","Emit a UTF-8 Byte Order Mark (BOM) in the beginning of output files."),Do_not_truncate_error_messages:t(6165,e.DiagnosticCategory.Message,"Do_not_truncate_error_messages_6165","Do not truncate error messages."),Output_directory_for_generated_declaration_files:t(6166,e.DiagnosticCategory.Message,"Output_directory_for_generated_declaration_files_6166","Output directory for generated declaration files."),A_series_of_entries_which_re_map_imports_to_lookup_locations_relative_to_the_baseUrl:t(6167,e.DiagnosticCategory.Message,"A_series_of_entries_which_re_map_imports_to_lookup_locations_relative_to_the_baseUrl_6167","A series of entries which re-map imports to lookup locations relative to the 'baseUrl'."),List_of_root_folders_whose_combined_content_represents_the_structure_of_the_project_at_runtime:t(6168,e.DiagnosticCategory.Message,"List_of_root_folders_whose_combined_content_represents_the_structure_of_the_project_at_runtime_6168","List of root folders whose combined content represents the structure of the project at runtime."),Show_all_compiler_options:t(6169,e.DiagnosticCategory.Message,"Show_all_compiler_options_6169","Show all compiler options."),Deprecated_Use_outFile_instead_Concatenate_and_emit_output_to_single_file:t(6170,e.DiagnosticCategory.Message,"Deprecated_Use_outFile_instead_Concatenate_and_emit_output_to_single_file_6170","[Deprecated] Use '--outFile' instead. Concatenate and emit output to single file"),Command_line_Options:t(6171,e.DiagnosticCategory.Message,"Command_line_Options_6171","Command-line Options"),Basic_Options:t(6172,e.DiagnosticCategory.Message,"Basic_Options_6172","Basic Options"),Strict_Type_Checking_Options:t(6173,e.DiagnosticCategory.Message,"Strict_Type_Checking_Options_6173","Strict Type-Checking Options"),Module_Resolution_Options:t(6174,e.DiagnosticCategory.Message,"Module_Resolution_Options_6174","Module Resolution Options"),Source_Map_Options:t(6175,e.DiagnosticCategory.Message,"Source_Map_Options_6175","Source Map Options"),Additional_Checks:t(6176,e.DiagnosticCategory.Message,"Additional_Checks_6176","Additional Checks"),Experimental_Options:t(6177,e.DiagnosticCategory.Message,"Experimental_Options_6177","Experimental Options"),Advanced_Options:t(6178,e.DiagnosticCategory.Message,"Advanced_Options_6178","Advanced Options"),Provide_full_support_for_iterables_in_for_of_spread_and_destructuring_when_targeting_ES5_or_ES3:t(6179,e.DiagnosticCategory.Message,"Provide_full_support_for_iterables_in_for_of_spread_and_destructuring_when_targeting_ES5_or_ES3_6179","Provide full support for iterables in 'for-of', spread, and destructuring when targeting 'ES5' or 'ES3'."),Enable_all_strict_type_checking_options:t(6180,e.DiagnosticCategory.Message,"Enable_all_strict_type_checking_options_6180","Enable all strict type-checking options."),List_of_language_service_plugins:t(6181,e.DiagnosticCategory.Message,"List_of_language_service_plugins_6181","List of language service plugins."),Scoped_package_detected_looking_in_0:t(6182,e.DiagnosticCategory.Message,"Scoped_package_detected_looking_in_0_6182","Scoped package detected, looking in '{0}'"),Reusing_resolution_of_module_0_to_file_1_from_old_program:t(6183,e.DiagnosticCategory.Message,"Reusing_resolution_of_module_0_to_file_1_from_old_program_6183","Reusing resolution of module '{0}' to file '{1}' from old program."),Reusing_module_resolutions_originating_in_0_since_resolutions_are_unchanged_from_old_program:t(6184,e.DiagnosticCategory.Message,"Reusing_module_resolutions_originating_in_0_since_resolutions_are_unchanged_from_old_program_6184","Reusing module resolutions originating in '{0}' since resolutions are unchanged from old program."),Disable_strict_checking_of_generic_signatures_in_function_types:t(6185,e.DiagnosticCategory.Message,"Disable_strict_checking_of_generic_signatures_in_function_types_6185","Disable strict checking of generic signatures in function types."),Enable_strict_checking_of_function_types:t(6186,e.DiagnosticCategory.Message,"Enable_strict_checking_of_function_types_6186","Enable strict checking of function types."),Variable_0_implicitly_has_an_1_type:t(7005,e.DiagnosticCategory.Error,"Variable_0_implicitly_has_an_1_type_7005","Variable '{0}' implicitly has an '{1}' type."),Parameter_0_implicitly_has_an_1_type:t(7006,e.DiagnosticCategory.Error,"Parameter_0_implicitly_has_an_1_type_7006","Parameter '{0}' implicitly has an '{1}' type."),Member_0_implicitly_has_an_1_type:t(7008,e.DiagnosticCategory.Error,"Member_0_implicitly_has_an_1_type_7008","Member '{0}' implicitly has an '{1}' type."),new_expression_whose_target_lacks_a_construct_signature_implicitly_has_an_any_type:t(7009,e.DiagnosticCategory.Error,"new_expression_whose_target_lacks_a_construct_signature_implicitly_has_an_any_type_7009","'new' expression, whose target lacks a construct signature, implicitly has an 'any' type."),_0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type:t(7010,e.DiagnosticCategory.Error,"_0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type_7010","'{0}', which lacks return-type annotation, implicitly has an '{1}' return type."),Function_expression_which_lacks_return_type_annotation_implicitly_has_an_0_return_type:t(7011,e.DiagnosticCategory.Error,"Function_expression_which_lacks_return_type_annotation_implicitly_has_an_0_return_type_7011","Function expression, which lacks return-type annotation, implicitly has an '{0}' return type."),Construct_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type:t(7013,e.DiagnosticCategory.Error,"Construct_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type_7013","Construct signature, which lacks return-type annotation, implicitly has an 'any' return type."),Element_implicitly_has_an_any_type_because_index_expression_is_not_of_type_number:t(7015,e.DiagnosticCategory.Error,"Element_implicitly_has_an_any_type_because_index_expression_is_not_of_type_number_7015","Element implicitly has an 'any' type because index expression is not of type 'number'."),Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type:t(7016,e.DiagnosticCategory.Error,"Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type_7016","Could not find a declaration file for module '{0}'. '{1}' implicitly has an 'any' type."),Element_implicitly_has_an_any_type_because_type_0_has_no_index_signature:t(7017,e.DiagnosticCategory.Error,"Element_implicitly_has_an_any_type_because_type_0_has_no_index_signature_7017","Element implicitly has an 'any' type because type '{0}' has no index signature."),Object_literal_s_property_0_implicitly_has_an_1_type:t(7018,e.DiagnosticCategory.Error,"Object_literal_s_property_0_implicitly_has_an_1_type_7018","Object literal's property '{0}' implicitly has an '{1}' type."),Rest_parameter_0_implicitly_has_an_any_type:t(7019,e.DiagnosticCategory.Error,"Rest_parameter_0_implicitly_has_an_any_type_7019","Rest parameter '{0}' implicitly has an 'any[]' type."),Call_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type:t(7020,e.DiagnosticCategory.Error,"Call_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type_7020","Call signature, which lacks return-type annotation, implicitly has an 'any' return type."),_0_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_and_is_referenced_directly_or_indirectly_in_its_own_initializer:t(7022,e.DiagnosticCategory.Error,"_0_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_and_is_referenced_directly_or__7022","'{0}' implicitly has type 'any' because it does not have a type annotation and is referenced directly or indirectly in its own initializer."),_0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions:t(7023,e.DiagnosticCategory.Error,"_0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_reference_7023","'{0}' implicitly has return type 'any' because it does not have a return type annotation and is referenced directly or indirectly in one of its return expressions."),Function_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions:t(7024,e.DiagnosticCategory.Error,"Function_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_ref_7024","Function implicitly has return type 'any' because it does not have a return type annotation and is referenced directly or indirectly in one of its return expressions."),Generator_implicitly_has_type_0_because_it_does_not_yield_any_values_Consider_supplying_a_return_type:t(7025,e.DiagnosticCategory.Error,"Generator_implicitly_has_type_0_because_it_does_not_yield_any_values_Consider_supplying_a_return_typ_7025","Generator implicitly has type '{0}' because it does not yield any values. Consider supplying a return type."),JSX_element_implicitly_has_type_any_because_no_interface_JSX_0_exists:t(7026,e.DiagnosticCategory.Error,"JSX_element_implicitly_has_type_any_because_no_interface_JSX_0_exists_7026","JSX element implicitly has type 'any' because no interface 'JSX.{0}' exists."),Unreachable_code_detected:t(7027,e.DiagnosticCategory.Error,"Unreachable_code_detected_7027","Unreachable code detected."),Unused_label:t(7028,e.DiagnosticCategory.Error,"Unused_label_7028","Unused label."),Fallthrough_case_in_switch:t(7029,e.DiagnosticCategory.Error,"Fallthrough_case_in_switch_7029","Fallthrough case in switch."),Not_all_code_paths_return_a_value:t(7030,e.DiagnosticCategory.Error,"Not_all_code_paths_return_a_value_7030","Not all code paths return a value."),Binding_element_0_implicitly_has_an_1_type:t(7031,e.DiagnosticCategory.Error,"Binding_element_0_implicitly_has_an_1_type_7031","Binding element '{0}' implicitly has an '{1}' type."),Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation:t(7032,e.DiagnosticCategory.Error,"Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation_7032","Property '{0}' implicitly has type 'any', because its set accessor lacks a parameter type annotation."),Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation:t(7033,e.DiagnosticCategory.Error,"Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation_7033","Property '{0}' implicitly has type 'any', because its get accessor lacks a return type annotation."),Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined:t(7034,e.DiagnosticCategory.Error,"Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined_7034","Variable '{0}' implicitly has type '{1}' in some locations where its type cannot be determined."),Try_npm_install_types_Slash_0_if_it_exists_or_add_a_new_declaration_d_ts_file_containing_declare_module_0:t(7035,e.DiagnosticCategory.Error,"Try_npm_install_types_Slash_0_if_it_exists_or_add_a_new_declaration_d_ts_file_containing_declare_mod_7035","Try `npm install @types/{0}` if it exists or add a new declaration (.d.ts) file containing `declare module '{0}';`"),Dynamic_import_s_specifier_must_be_of_type_string_but_here_has_type_0:t(7036,e.DiagnosticCategory.Error,"Dynamic_import_s_specifier_must_be_of_type_string_but_here_has_type_0_7036","Dynamic import's specifier must be of type 'string', but here has type '{0}'."),You_cannot_rename_this_element:t(8e3,e.DiagnosticCategory.Error,"You_cannot_rename_this_element_8000","You cannot rename this element."),You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library:t(8001,e.DiagnosticCategory.Error,"You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library_8001","You cannot rename elements that are defined in the standard TypeScript library."),import_can_only_be_used_in_a_ts_file:t(8002,e.DiagnosticCategory.Error,"import_can_only_be_used_in_a_ts_file_8002","'import ... =' can only be used in a .ts file."),export_can_only_be_used_in_a_ts_file:t(8003,e.DiagnosticCategory.Error,"export_can_only_be_used_in_a_ts_file_8003","'export=' can only be used in a .ts file."),type_parameter_declarations_can_only_be_used_in_a_ts_file:t(8004,e.DiagnosticCategory.Error,"type_parameter_declarations_can_only_be_used_in_a_ts_file_8004","'type parameter declarations' can only be used in a .ts file."),implements_clauses_can_only_be_used_in_a_ts_file:t(8005,e.DiagnosticCategory.Error,"implements_clauses_can_only_be_used_in_a_ts_file_8005","'implements clauses' can only be used in a .ts file."),interface_declarations_can_only_be_used_in_a_ts_file:t(8006,e.DiagnosticCategory.Error,"interface_declarations_can_only_be_used_in_a_ts_file_8006","'interface declarations' can only be used in a .ts file."),module_declarations_can_only_be_used_in_a_ts_file:t(8007,e.DiagnosticCategory.Error,"module_declarations_can_only_be_used_in_a_ts_file_8007","'module declarations' can only be used in a .ts file."),type_aliases_can_only_be_used_in_a_ts_file:t(8008,e.DiagnosticCategory.Error,"type_aliases_can_only_be_used_in_a_ts_file_8008","'type aliases' can only be used in a .ts file."),_0_can_only_be_used_in_a_ts_file:t(8009,e.DiagnosticCategory.Error,"_0_can_only_be_used_in_a_ts_file_8009","'{0}' can only be used in a .ts file."),types_can_only_be_used_in_a_ts_file:t(8010,e.DiagnosticCategory.Error,"types_can_only_be_used_in_a_ts_file_8010","'types' can only be used in a .ts file."),type_arguments_can_only_be_used_in_a_ts_file:t(8011,e.DiagnosticCategory.Error,"type_arguments_can_only_be_used_in_a_ts_file_8011","'type arguments' can only be used in a .ts file."),parameter_modifiers_can_only_be_used_in_a_ts_file:t(8012,e.DiagnosticCategory.Error,"parameter_modifiers_can_only_be_used_in_a_ts_file_8012","'parameter modifiers' can only be used in a .ts file."),non_null_assertions_can_only_be_used_in_a_ts_file:t(8013,e.DiagnosticCategory.Error,"non_null_assertions_can_only_be_used_in_a_ts_file_8013","'non-null assertions' can only be used in a .ts file."),enum_declarations_can_only_be_used_in_a_ts_file:t(8015,e.DiagnosticCategory.Error,"enum_declarations_can_only_be_used_in_a_ts_file_8015","'enum declarations' can only be used in a .ts file."),type_assertion_expressions_can_only_be_used_in_a_ts_file:t(8016,e.DiagnosticCategory.Error,"type_assertion_expressions_can_only_be_used_in_a_ts_file_8016","'type assertion expressions' can only be used in a .ts file."),Octal_literal_types_must_use_ES2015_syntax_Use_the_syntax_0:t(8017,e.DiagnosticCategory.Error,"Octal_literal_types_must_use_ES2015_syntax_Use_the_syntax_0_8017","Octal literal types must use ES2015 syntax. Use the syntax '{0}'."),Octal_literals_are_not_allowed_in_enums_members_initializer_Use_the_syntax_0:t(8018,e.DiagnosticCategory.Error,"Octal_literals_are_not_allowed_in_enums_members_initializer_Use_the_syntax_0_8018","Octal literals are not allowed in enums members initializer. Use the syntax '{0}'."),Report_errors_in_js_files:t(8019,e.DiagnosticCategory.Message,"Report_errors_in_js_files_8019","Report errors in .js files."),JSDoc_types_can_only_be_used_inside_documentation_comments:t(8020,e.DiagnosticCategory.Error,"JSDoc_types_can_only_be_used_inside_documentation_comments_8020","JSDoc types can only be used inside documentation comments."),JSDoc_typedef_tag_should_either_have_a_type_annotation_or_be_followed_by_property_or_member_tags:t(8021,e.DiagnosticCategory.Error,"JSDoc_typedef_tag_should_either_have_a_type_annotation_or_be_followed_by_property_or_member_tags_8021","JSDoc '@typedef' tag should either have a type annotation or be followed by '@property' or '@member' tags."),JSDoc_0_is_not_attached_to_a_class:t(8022,e.DiagnosticCategory.Error,"JSDoc_0_is_not_attached_to_a_class_8022","JSDoc '@{0}' is not attached to a class."),JSDoc_0_1_does_not_match_the_extends_2_clause:t(8023,e.DiagnosticCategory.Error,"JSDoc_0_1_does_not_match_the_extends_2_clause_8023","JSDoc '@{0} {1}' does not match the 'extends {2}' clause."),JSDoc_param_tag_has_name_0_but_there_is_no_parameter_with_that_name:t(8024,e.DiagnosticCategory.Error,"JSDoc_param_tag_has_name_0_but_there_is_no_parameter_with_that_name_8024","JSDoc '@param' tag has name '{0}', but there is no parameter with that name."),Class_declarations_cannot_have_more_than_one_augments_or_extends_tag:t(8025,e.DiagnosticCategory.Error,"Class_declarations_cannot_have_more_than_one_augments_or_extends_tag_8025","Class declarations cannot have more than one `@augments` or `@extends` tag."),Only_identifiers_Slashqualified_names_with_optional_type_arguments_are_currently_supported_in_a_class_extends_clause:t(9002,e.DiagnosticCategory.Error,"Only_identifiers_Slashqualified_names_with_optional_type_arguments_are_currently_supported_in_a_clas_9002","Only identifiers/qualified-names with optional type arguments are currently supported in a class 'extends' clause."),class_expressions_are_not_currently_supported:t(9003,e.DiagnosticCategory.Error,"class_expressions_are_not_currently_supported_9003","'class' expressions are not currently supported."),Language_service_is_disabled:t(9004,e.DiagnosticCategory.Error,"Language_service_is_disabled_9004","Language service is disabled."),JSX_attributes_must_only_be_assigned_a_non_empty_expression:t(17e3,e.DiagnosticCategory.Error,"JSX_attributes_must_only_be_assigned_a_non_empty_expression_17000","JSX attributes must only be assigned a non-empty 'expression'."),JSX_elements_cannot_have_multiple_attributes_with_the_same_name:t(17001,e.DiagnosticCategory.Error,"JSX_elements_cannot_have_multiple_attributes_with_the_same_name_17001","JSX elements cannot have multiple attributes with the same name."),Expected_corresponding_JSX_closing_tag_for_0:t(17002,e.DiagnosticCategory.Error,"Expected_corresponding_JSX_closing_tag_for_0_17002","Expected corresponding JSX closing tag for '{0}'."),JSX_attribute_expected:t(17003,e.DiagnosticCategory.Error,"JSX_attribute_expected_17003","JSX attribute expected."),Cannot_use_JSX_unless_the_jsx_flag_is_provided:t(17004,e.DiagnosticCategory.Error,"Cannot_use_JSX_unless_the_jsx_flag_is_provided_17004","Cannot use JSX unless the '--jsx' flag is provided."),A_constructor_cannot_contain_a_super_call_when_its_class_extends_null:t(17005,e.DiagnosticCategory.Error,"A_constructor_cannot_contain_a_super_call_when_its_class_extends_null_17005","A constructor cannot contain a 'super' call when its class extends 'null'."),An_unary_expression_with_the_0_operator_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses:t(17006,e.DiagnosticCategory.Error,"An_unary_expression_with_the_0_operator_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_ex_17006","An unary expression with the '{0}' operator is not allowed in the left-hand side of an exponentiation expression. Consider enclosing the expression in parentheses."),A_type_assertion_expression_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses:t(17007,e.DiagnosticCategory.Error,"A_type_assertion_expression_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Con_17007","A type assertion expression is not allowed in the left-hand side of an exponentiation expression. Consider enclosing the expression in parentheses."),JSX_element_0_has_no_corresponding_closing_tag:t(17008,e.DiagnosticCategory.Error,"JSX_element_0_has_no_corresponding_closing_tag_17008","JSX element '{0}' has no corresponding closing tag."),super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class:t(17009,e.DiagnosticCategory.Error,"super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class_17009","'super' must be called before accessing 'this' in the constructor of a derived class."),Unknown_type_acquisition_option_0:t(17010,e.DiagnosticCategory.Error,"Unknown_type_acquisition_option_0_17010","Unknown type acquisition option '{0}'."),super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class:t(17011,e.DiagnosticCategory.Error,"super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class_17011","'super' must be called before accessing a property of 'super' in the constructor of a derived class."),_0_is_not_a_valid_meta_property_for_keyword_1_Did_you_mean_2:t(17012,e.DiagnosticCategory.Error,"_0_is_not_a_valid_meta_property_for_keyword_1_Did_you_mean_2_17012","'{0}' is not a valid meta-property for keyword '{1}'. Did you mean '{2}'?"),Meta_property_0_is_only_allowed_in_the_body_of_a_function_declaration_function_expression_or_constructor:t(17013,e.DiagnosticCategory.Error,"Meta_property_0_is_only_allowed_in_the_body_of_a_function_declaration_function_expression_or_constru_17013","Meta-property '{0}' is only allowed in the body of a function declaration, function expression, or constructor."),Circularity_detected_while_resolving_configuration_Colon_0:t(18e3,e.DiagnosticCategory.Error,"Circularity_detected_while_resolving_configuration_Colon_0_18000","Circularity detected while resolving configuration: {0}"),A_path_in_an_extends_option_must_be_relative_or_rooted_but_0_is_not:t(18001,e.DiagnosticCategory.Error,"A_path_in_an_extends_option_must_be_relative_or_rooted_but_0_is_not_18001","A path in an 'extends' option must be relative or rooted, but '{0}' is not."),The_files_list_in_config_file_0_is_empty:t(18002,e.DiagnosticCategory.Error,"The_files_list_in_config_file_0_is_empty_18002","The 'files' list in config file '{0}' is empty."),No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2:t(18003,e.DiagnosticCategory.Error,"No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2_18003","No inputs were found in config file '{0}'. Specified 'include' paths were '{1}' and 'exclude' paths were '{2}'."),Add_missing_super_call:t(90001,e.DiagnosticCategory.Message,"Add_missing_super_call_90001","Add missing 'super()' call."),Make_super_call_the_first_statement_in_the_constructor:t(90002,e.DiagnosticCategory.Message,"Make_super_call_the_first_statement_in_the_constructor_90002","Make 'super()' call the first statement in the constructor."),Change_extends_to_implements:t(90003,e.DiagnosticCategory.Message,"Change_extends_to_implements_90003","Change 'extends' to 'implements'."),Remove_declaration_for_Colon_0:t(90004,e.DiagnosticCategory.Message,"Remove_declaration_for_Colon_0_90004","Remove declaration for: '{0}'."),Implement_interface_0:t(90006,e.DiagnosticCategory.Message,"Implement_interface_0_90006","Implement interface '{0}'."),Implement_inherited_abstract_class:t(90007,e.DiagnosticCategory.Message,"Implement_inherited_abstract_class_90007","Implement inherited abstract class."),Add_this_to_unresolved_variable:t(90008,e.DiagnosticCategory.Message,"Add_this_to_unresolved_variable_90008","Add 'this.' to unresolved variable."),Adding_a_tsconfig_json_file_will_help_organize_projects_that_contain_both_TypeScript_and_JavaScript_files_Learn_more_at_https_Colon_Slash_Slashaka_ms_Slashtsconfig:t(90009,e.DiagnosticCategory.Error,"Adding_a_tsconfig_json_file_will_help_organize_projects_that_contain_both_TypeScript_and_JavaScript__90009","Adding a tsconfig.json file will help organize projects that contain both TypeScript and JavaScript files. Learn more at https://aka.ms/tsconfig."),Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated:t(90010,e.DiagnosticCategory.Error,"Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated_90010","Type '{0}' is not assignable to type '{1}'. Two different types with this name exist, but they are unrelated."),Import_0_from_1:t(90013,e.DiagnosticCategory.Message,"Import_0_from_1_90013","Import '{0}' from \"{1}\"."),Change_0_to_1:t(90014,e.DiagnosticCategory.Message,"Change_0_to_1_90014","Change '{0}' to '{1}'."),Add_0_to_existing_import_declaration_from_1:t(90015,e.DiagnosticCategory.Message,"Add_0_to_existing_import_declaration_from_1_90015","Add '{0}' to existing import declaration from \"{1}\"."),Declare_property_0:t(90016,e.DiagnosticCategory.Message,"Declare_property_0_90016","Declare property '{0}'."),Add_index_signature_for_property_0:t(90017,e.DiagnosticCategory.Message,"Add_index_signature_for_property_0_90017","Add index signature for property '{0}'."),Disable_checking_for_this_file:t(90018,e.DiagnosticCategory.Message,"Disable_checking_for_this_file_90018","Disable checking for this file."),Ignore_this_error_message:t(90019,e.DiagnosticCategory.Message,"Ignore_this_error_message_90019","Ignore this error message."),Initialize_property_0_in_the_constructor:t(90020,e.DiagnosticCategory.Message,"Initialize_property_0_in_the_constructor_90020","Initialize property '{0}' in the constructor."),Initialize_static_property_0:t(90021,e.DiagnosticCategory.Message,"Initialize_static_property_0_90021","Initialize static property '{0}'."),Change_spelling_to_0:t(90022,e.DiagnosticCategory.Message,"Change_spelling_to_0_90022","Change spelling to '{0}'."),Declare_method_0:t(90023,e.DiagnosticCategory.Message,"Declare_method_0_90023","Declare method '{0}'."),Declare_static_method_0:t(90024,e.DiagnosticCategory.Message,"Declare_static_method_0_90024","Declare static method '{0}'."),Prefix_0_with_an_underscore:t(90025,e.DiagnosticCategory.Message,"Prefix_0_with_an_underscore_90025","Prefix '{0}' with an underscore."),Rewrite_as_the_indexed_access_type_0:t(90026,e.DiagnosticCategory.Message,"Rewrite_as_the_indexed_access_type_0_90026","Rewrite as the indexed access type '{0}'."),Declare_static_property_0:t(90027,e.DiagnosticCategory.Message,"Declare_static_property_0_90027","Declare static property '{0}'."),Call_decorator_expression:t(90028,e.DiagnosticCategory.Message,"Call_decorator_expression_90028","Call decorator expression."),Convert_function_to_an_ES2015_class:t(95001,e.DiagnosticCategory.Message,"Convert_function_to_an_ES2015_class_95001","Convert function to an ES2015 class"),Convert_function_0_to_class:t(95002,e.DiagnosticCategory.Message,"Convert_function_0_to_class_95002","Convert function '{0}' to class"),Extract_symbol:t(95003,e.DiagnosticCategory.Message,"Extract_symbol_95003","Extract symbol"),Extract_to_0_in_1:t(95004,e.DiagnosticCategory.Message,"Extract_to_0_in_1_95004","Extract to {0} in {1}"),Extract_function:t(95005,e.DiagnosticCategory.Message,"Extract_function_95005","Extract function"),Extract_constant:t(95006,e.DiagnosticCategory.Message,"Extract_constant_95006","Extract constant"),Extract_to_0_in_enclosing_scope:t(95007,e.DiagnosticCategory.Message,"Extract_to_0_in_enclosing_scope_95007","Extract to {0} in enclosing scope"),Extract_to_0_in_1_scope:t(95008,e.DiagnosticCategory.Message,"Extract_to_0_in_1_scope_95008","Extract to {0} in {1} scope"),Annotate_with_type_from_JSDoc:t(95009,e.DiagnosticCategory.Message,"Annotate_with_type_from_JSDoc_95009","Annotate with type from JSDoc"),Annotate_with_types_from_JSDoc:t(95010,e.DiagnosticCategory.Message,"Annotate_with_types_from_JSDoc_95010","Annotate with types from JSDoc"),Infer_type_of_0_from_usage:t(95011,e.DiagnosticCategory.Message,"Infer_type_of_0_from_usage_95011","Infer type of '{0}' from usage."),Infer_parameter_types_from_usage:t(95012,e.DiagnosticCategory.Message,"Infer_parameter_types_from_usage_95012","Infer parameter types from usage.")}}(ts=ts||{}),function(P){function e(e){return 71<=e}P.tokenIsIdentifierOrKeyword=e;var L=P.createMapFromTemplate({abstract:117,any:119,as:118,boolean:122,break:72,case:73,catch:74,class:75,continue:77,const:76,constructor:123,debugger:78,declare:124,default:79,delete:80,do:81,else:82,enum:83,export:84,extends:85,false:86,finally:87,for:88,from:140,function:89,get:125,if:90,implements:108,import:91,in:92,instanceof:93,interface:109,is:126,keyof:127,let:110,module:128,namespace:129,never:130,new:94,null:95,number:133,object:134,package:111,private:112,protected:113,public:114,readonly:131,require:132,global:141,return:96,set:135,static:115,string:136,super:97,switch:98,symbol:137,this:99,throw:100,true:101,try:102,type:138,typeof:103,undefined:139,var:104,void:105,while:106,with:107,yield:116,async:120,await:121,of:142,"{":17,"}":18,"(":19,")":20,"[":21,"]":22,".":23,"...":24,";":25,",":26,"<":27,">":29,"<=":30,">=":31,"==":32,"!=":33,"===":34,"!==":35,"=>":36,"+":37,"-":38,"**":40,"*":39,"/":41,"%":42,"++":43,"--":44,"<<":45,"</":28,">>":46,">>>":47,"&":48,"|":49,"^":50,"!":51,"~":52,"&&":53,"||":54,"?":55,":":56,"=":58,"+=":59,"-=":60,"*=":61,"**=":62,"/=":63,"%=":64,"<<=":65,">>=":66,">>>=":67,"&=":68,"|=":69,"^=":70,"@":57}),n=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1569,1594,1600,1610,1649,1747,1749,1749,1765,1766,1786,1788,1808,1808,1810,1836,1920,1957,2309,2361,2365,2365,2384,2384,2392,2401,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2784,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2877,2877,2908,2909,2911,2913,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3294,3294,3296,3297,3333,3340,3342,3344,3346,3368,3370,3385,3424,3425,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3946,3976,3979,4096,4129,4131,4135,4137,4138,4176,4181,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6067,6176,6263,6272,6312,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8319,8319,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12329,12337,12341,12344,12346,12353,12436,12445,12446,12449,12538,12540,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65138,65140,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],o=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,768,846,864,866,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1155,1158,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1425,1441,1443,1465,1467,1469,1471,1471,1473,1474,1476,1476,1488,1514,1520,1522,1569,1594,1600,1621,1632,1641,1648,1747,1749,1756,1759,1768,1770,1773,1776,1788,1808,1836,1840,1866,1920,1968,2305,2307,2309,2361,2364,2381,2384,2388,2392,2403,2406,2415,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2492,2494,2500,2503,2504,2507,2509,2519,2519,2524,2525,2527,2531,2534,2545,2562,2562,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2649,2652,2654,2654,2662,2676,2689,2691,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2784,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2876,2883,2887,2888,2891,2893,2902,2903,2908,2909,2911,2913,2918,2927,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3006,3010,3014,3016,3018,3021,3031,3031,3047,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3134,3140,3142,3144,3146,3149,3157,3158,3168,3169,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3262,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3297,3302,3311,3330,3331,3333,3340,3342,3344,3346,3368,3370,3385,3390,3395,3398,3400,3402,3405,3415,3415,3424,3425,3430,3439,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3805,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3946,3953,3972,3974,3979,3984,3991,3993,4028,4038,4038,4096,4129,4131,4135,4137,4138,4140,4146,4150,4153,4160,4169,4176,4185,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,4969,4977,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6099,6112,6121,6160,6169,6176,6263,6272,6313,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8255,8256,8319,8319,8400,8412,8417,8417,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12335,12337,12341,12344,12346,12353,12436,12441,12442,12445,12446,12449,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65056,65059,65075,65076,65101,65103,65136,65138,65140,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65381,65470,65474,65479,65482,65487,65490,65495,65498,65500],r=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2208,2208,2210,2220,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7413,7414,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],i=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1319,1329,1366,1369,1369,1377,1415,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1520,1522,1552,1562,1568,1641,1646,1747,1749,1756,1759,1768,1770,1788,1791,1791,1808,1866,1869,1969,1984,2037,2042,2042,2048,2093,2112,2139,2208,2208,2210,2220,2276,2302,2304,2403,2406,2415,2417,2423,2425,2431,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2902,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3140,3142,3144,3146,3149,3157,3158,3160,3161,3168,3171,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3299,3302,3311,3313,3314,3330,3331,3333,3340,3342,3344,3346,3386,3389,3396,3398,3400,3402,3406,3415,3415,3424,3427,3430,3439,3450,3455,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5908,5920,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6157,6160,6169,6176,6263,6272,6314,6320,6389,6400,6428,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6912,6987,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7376,7378,7380,7414,7424,7654,7676,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8204,8205,8255,8256,8276,8276,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42647,42655,42737,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43047,43072,43123,43136,43204,43216,43225,43232,43255,43259,43259,43264,43309,43312,43347,43360,43388,43392,43456,43471,43481,43520,43574,43584,43597,43600,43609,43616,43638,43642,43643,43648,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65062,65075,65076,65101,65103,65136,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500];function s(e,t){if(!(e<t[0]))for(var n,o=0,r=t.length;o+1<r;){if(n=o+(r-o)/2,t[n-=n%2]<=e&&e<=t[1+n])return!0;e<t[n]?r=n:o=2+n}return!1}function a(e,t){return s(e,1<=t?r:n)}P.isUnicodeIdentifierStart=a;l=[],L.forEach(function(e,t){l[e]=t});var l,t=l;function c(e){for(var t=new Array,n=0,o=0;n<e.length;){var r=e.charCodeAt(n);switch(n++,r){case 13:10===e.charCodeAt(n)&&n++;case 10:t.push(o),o=n;break;default:127<r&&U(r)&&(t.push(o),o=n)}}return t.push(o),t}function u(e,t,n,o){P.Debug.assert(0<=t&&t<e.length);n=e[t]+n;return t<e.length-1?P.Debug.assert(n<e[t+1]):void 0!==o&&P.Debug.assert(n<=o.length),n}function d(e){return e.lineMap||(e.lineMap=c(e.text))}function p(e,t){var n=P.binarySearch(e,t);return n<0&&P.Debug.assert(-1!==(n=~n-1),"position cannot precede the beginning of the file"),{line:n,character:t-e[n]}}function M(e){return F(e)||U(e)}function F(e){return 32===e||9===e||11===e||12===e||160===e||133===e||5760===e||8192<=e&&e<=8203||8239===e||8287===e||12288===e||65279===e}function U(e){return 10===e||13===e||8232===e||8233===e}function H(e){return 48<=e&&e<=57}function V(e){return 48<=e&&e<=55}P.tokenToString=function(e){return t[e]},P.stringToToken=function(e){return L.get(e)},P.computeLineStarts=c,P.getPositionOfLineAndCharacter=function(e,t,n){return u(d(e),t,n,e.text)},P.computePositionOfLineAndCharacter=u,P.getLineStarts=d,P.computeLineAndCharacterOfPosition=p,P.getLineAndCharacterOfPosition=function(e,t){return p(d(e),t)},P.isWhiteSpaceLike=M,P.isWhiteSpaceSingleLine=F,P.isLineBreak=U,P.isOctalDigit=V,P.couldStartTrivia=function(e,t){var n=e.charCodeAt(t);switch(n){case 13:case 10:case 9:case 11:case 12:case 32:case 47:case 60:case 124:case 61:case 62:return!0;case 35:return 0===t;default:return 127<n}},P.skipTrivia=function(e,t,n,o){if(void 0===o&&(o=!1),P.positionIsSynthesized(t))return t;for(;;){var r=e.charCodeAt(t);switch(r){case 13:10===e.charCodeAt(t+1)&&t++;case 10:if(t++,n)return t;continue;case 9:case 11:case 12:case 32:t++;continue;case 47:if(o)break;if(47===e.charCodeAt(t+1)){for(t+=2;t<e.length&&!U(e.charCodeAt(t));)t++;continue}if(42!==e.charCodeAt(t+1))break;for(t+=2;t<e.length;){if(42===e.charCodeAt(t)&&47===e.charCodeAt(t+1)){t+=2;break}t++}continue;case 60:case 124:case 61:case 62:if(W(e,t)){t=G(e,t);continue}break;case 35:if(0===t&&K(e,t)){t=j(e,t);continue}break;default:if(127<r&&M(r)){t++;continue}}return t}};var g="<<<<<<<".length;function W(e,t){if(P.Debug.assert(0<=t),0===t||U(e.charCodeAt(t-1))){var n=e.charCodeAt(t);if(t+g<e.length){for(var o=0;o<g;o++)if(e.charCodeAt(t+o)!==n)return;return 61===n||32===e.charCodeAt(t+g)}}}function G(e,t,n){n&&n(P.Diagnostics.Merge_conflict_marker_encountered,g);var o=e.charCodeAt(t),r=e.length;if(60===o||62===o)for(;t<r&&!U(e.charCodeAt(t));)t++;else for(P.Debug.assert(124===o||61===o);t<r;){var i=e.charCodeAt(t);if((61===i||62===i)&&i!==o&&W(e,t))break;t++}return t}var h=/^#!.*/;function K(e,t){return P.Debug.assert(0===t),h.test(e)}function j(e,t){return t+h.exec(e)[0].length}function _(e,t,n,o,r,i,s){var a,l,c,u,d=!1,p=o||0===n,g=s;e:for(;0<=n&&n<t.length;){var h=t.charCodeAt(n);switch(h){case 13:10===t.charCodeAt(n+1)&&n++;case 10:if(n++,o)break e;p=!0,d&&(u=!0);continue;case 9:case 11:case 12:case 32:n++;continue;case 47:var _=t.charCodeAt(n+1),m=!1;if(47!==_&&42!==_)break e;var f=47===_?2:3,y=n;if(n+=2,47===_)for(;n<t.length;){if(U(t.charCodeAt(n))){m=!0;break}n++}else for(;n<t.length;){if(42===t.charCodeAt(n)&&47===t.charCodeAt(n+1)){n+=2;break}n++}if(p){if(d){if(g=r(a,l,c,u,i,g),!e&&g)return g;d=!1}a=y,l=n,c=f,u=m,d=!0}continue;default:if(127<h&&M(h)){d&&U(h)&&(u=!0),n++;continue}break e}}return g=d?r(a,l,c,u,i,g):g}function m(e,t,n,o,r){return _(!0,e,t,!1,n,o,r)}function f(e,t,n,o,r){return _(!0,e,t,!0,n,o,r)}function y(e,t,n,o,r,i){return(i=i||[]).push({kind:n,pos:e,end:t,hasTrailingNewLine:o}),i}function z(e,t){return 65<=e&&e<=90||97<=e&&e<=122||36===e||95===e||127<e&&a(e,t)}function X(e,t){return 65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||36===e||95===e||127<e&&s(e,1<=t?i:o)}P.forEachLeadingCommentRange=function(e,t,n,o){return _(!1,e,t,!1,n,o)},P.forEachTrailingCommentRange=function(e,t,n,o){return _(!1,e,t,!0,n,o)},P.reduceEachLeadingCommentRange=m,P.reduceEachTrailingCommentRange=f,P.getLeadingCommentRanges=function(e,t){return m(e,t,y,void 0,void 0)},P.getTrailingCommentRanges=function(e,t){return f(e,t,y,void 0,void 0)},P.getShebang=function(e){e=h.exec(e);if(e)return e[0]},P.isIdentifierStart=z,P.isIdentifierPart=X,P.isIdentifierText=function(e,t){if(!z(e.charCodeAt(0),t))return!1;for(var n=1;n<e.length;n++)if(!X(e.charCodeAt(n),t))return!1;return!0},P.createScanner=function(i,s,a,p,n,e,t){var g,h,_,m,f,y,k,b,v,l;return void 0===a&&(a=0),O(p,e,t),{getStartPos:function(){return _},getTextPos:function(){return g},getToken:function(){return f},getTokenPos:function(){return m},getTokenText:function(){return p.substring(m,g)},getTokenValue:function(){return y},hasExtendedUnicodeEscape:function(){return b},hasPrecedingLineBreak:function(){return k},isIdentifier:function(){return 71===f||107<f},isReservedWord:function(){return 72<=f&&f<=107},isUnterminated:function(){return v},getNumericLiteralFlags:function(){return l},reScanGreaterToken:function(){if(29===f){if(62===p.charCodeAt(g))return f=62===p.charCodeAt(g+1)?61===p.charCodeAt(g+2)?(g+=3,67):(g+=2,47):61===p.charCodeAt(g+1)?(g+=2,66):(g++,46);if(61===p.charCodeAt(g))return g++,f=31}return f},reScanSlashToken:function(){if(41===f||63===f){for(var e=m+1,t=!1,n=!1;;){if(h<=e){v=!0,c(P.Diagnostics.Unterminated_regular_expression_literal);break}var o=p.charCodeAt(e);if(U(o)){v=!0,c(P.Diagnostics.Unterminated_regular_expression_literal);break}if(t)t=!1;else{if(47===o&&!n){e++;break}91===o?n=!0:92===o?t=!0:93===o&&(n=!1)}e++}for(;e<h&&X(p.charCodeAt(e),i);)e++;g=e,y=p.substring(m,g),f=12}return f},reScanTemplateToken:function(){return P.Debug.assert(18===f,"'reScanTemplateToken' should only be called on a '}'"),g=m,f=E()},scanJsxIdentifier:function(){if(71<=f){for(var e=g;g<h;){var t=p.charCodeAt(g);if(45!==t&&!(e===g?z:X)(t,i))break;g++}y+=p.substr(e,g-e)}return f},scanJsxAttributeValue:function(){switch(_=g,p.charCodeAt(g)){case 34:case 39:return y=T(!1),f=9;default:return D()}},reScanJsxToken:function(){return g=m=_,f=N()},scanJsxToken:N,scanJSDocToken:function(){if(h<=g)return f=1;m=_=g;var e=p.charCodeAt(g);switch(e){case 9:case 11:case 12:case 32:for(;g<h&&F(p.charCodeAt(g));)g++;return f=5;case 64:return g++,f=57;case 10:case 13:return g++,f=4;case 42:return g++,f=39;case 123:return g++,f=17;case 125:return g++,f=18;case 91:return g++,f=21;case 93:return g++,f=22;case 60:return g++,f=27;case 62:return g++,f=29;case 61:return g++,f=58;case 44:return g++,f=26;case 46:return g++,f=23}if(z(e,5)){for(g++;X(p.charCodeAt(g),5)&&g<h;)g++;return f=71}return g+=1,f=0},scan:D,getText:function(){return p},setText:O,setScriptTarget:function(e){i=e},setLanguageVariant:function(e){a=e},setOnError:function(e){n=e},setTextPos:R,tryScan:function(e){return w(e,!1)},lookAhead:function(e){return w(e,!0)},scanRange:function(e,t,n){var o=h,r=g,i=_,s=m,a=f,l=k,c=y,u=b,d=v,e=(O(p,e,t),n());return h=o,g=r,_=i,m=s,f=a,k=l,y=c,b=u,v=d,e}};function c(e,t){n&&n(e,t||0)}function u(){for(var e=g;H(p.charCodeAt(g));)g++;if(46===p.charCodeAt(g))for(g++;H(p.charCodeAt(g));)g++;var t=g;if(69===p.charCodeAt(g)||101===p.charCodeAt(g))if(g++,l=2,43!==p.charCodeAt(g)&&45!==p.charCodeAt(g)||g++,H(p.charCodeAt(g))){for(g++;H(p.charCodeAt(g));)g++;t=g}else c(P.Diagnostics.Digit_expected);return""+ +p.substring(e,t)}function o(e){return r(e,!1)}function d(e){return r(e,!0)}function r(e,t){for(var n=0,o=0;n<e||t;){var r=p.charCodeAt(g);if(48<=r&&r<=57)o=16*o+r-48;else if(65<=r&&r<=70)o=16*o+r-65+10;else{if(!(97<=r&&r<=102))break;o=16*o+r-97+10}g++,n++}return o=n<e?-1:o}function T(e){void 0===e&&(e=!0);for(var t=p.charCodeAt(g),n="",o=++g;;){if(h<=g){n+=p.substring(o,g),v=!0,c(P.Diagnostics.Unterminated_string_literal);break}var r=p.charCodeAt(g);if(r===t){n+=p.substring(o,g),g++;break}if(92===r&&e)n=(n+=p.substring(o,g))+S(),o=g;else{if(U(r)){n+=p.substring(o,g),v=!0,c(P.Diagnostics.Unterminated_string_literal);break}g++}}return n}function E(){for(var e,t=96===p.charCodeAt(g),n=++g,o="";;){if(h<=g){o+=p.substring(n,g),v=!0,c(P.Diagnostics.Unterminated_template_literal),e=t?13:16;break}var r=p.charCodeAt(g);if(96===r){o+=p.substring(n,g),g++,e=t?13:16;break}if(36===r&&g+1<h&&123===p.charCodeAt(g+1)){o+=p.substring(n,g),g+=2,e=t?14:15;break}92!==r?13!==r?g++:(o+=p.substring(n,g),++g<h&&10===p.charCodeAt(g)&&g++,o+="\n",n=g):(o=(o+=p.substring(n,g))+S(),n=g)}return P.Debug.assert(void 0!==e),y=o,e}function S(){if(++g>=h)return c(P.Diagnostics.Unexpected_end_of_text),"";var e,t,n=p.charCodeAt(g);switch(g++,n){case 48:return"\0";case 98:return"\b";case 116:return"\t";case 110:return"\n";case 118:return"\v";case 102:return"\f";case 114:return"\r";case 39:return"'";case 34:return'"';case 117:return g<h&&123===p.charCodeAt(g)?(b=!0,g++,e=d(1),t=!1,e<0?(c(P.Diagnostics.Hexadecimal_digit_expected),t=!0):1114111<e&&(c(P.Diagnostics.An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive),t=!0),h<=g?(c(P.Diagnostics.Unexpected_end_of_text),t=!0):125===p.charCodeAt(g)?g++:(c(P.Diagnostics.Unterminated_Unicode_escape_sequence),t=!0),t?"":(t=e,P.Debug.assert(0<=t&&t<=1114111),t<=65535?String.fromCharCode(t):(e=Math.floor((t-65536)/1024)+55296,String.fromCharCode(e,(t-65536)%1024+56320)))):C(4);case 120:return C(2);case 13:g<h&&10===p.charCodeAt(g)&&g++;case 10:case 8232:case 8233:return"";default:return String.fromCharCode(n)}}function C(e){e=o(e);return 0<=e?String.fromCharCode(e):(c(P.Diagnostics.Hexadecimal_digit_expected),"")}function x(){var e,t;return g+5<h&&117===p.charCodeAt(g+1)?(e=g,g+=2,t=o(4),g=e,t):-1}function B(){for(var e="",t=g;g<h;){var n=p.charCodeAt(g);if(X(n,i))g++;else{if(92!==n)break;if(!(0<=(n=x())&&X(n,i)))break;e=(e+=p.substring(t,g))+String.fromCharCode(n),t=g+=6}}return e+p.substring(t,g)}function A(){var e=y.length;if(2<=e&&e<=11){e=y.charCodeAt(0);if(97<=e&&e<=122&&void 0!==(f=L.get(y)))return f}return f=71}function I(e){P.Debug.assert(2===e||8===e,"Expected either base 2 or base 8");for(var t=0,n=0;;){var o=p.charCodeAt(g),r=o-48;if(!H(o)||e<=r)break;t=t*e+r,g++,n++}return 0===n?-1:t}function D(){for(_=g,v=k=b=!1,l=0;;){if(h<=(m=g))return f=1;var e,t=p.charCodeAt(g);if(35===t&&0===g&&K(p,g)){if(g=j(p,g),s)continue;return f=6}switch(t){case 10:case 13:if(k=!0,s){g++;continue}return 13===t&&g+1<h&&10===p.charCodeAt(g+1)?g+=2:g++,f=4;case 9:case 11:case 12:case 32:if(s){g++;continue}for(;g<h&&F(p.charCodeAt(g));)g++;return f=5;case 33:return f=61===p.charCodeAt(g+1)?61===p.charCodeAt(g+2)?(g+=3,35):(g+=2,33):(g++,51);case 34:case 39:return y=T(),f=9;case 96:return f=E();case 37:return f=61===p.charCodeAt(g+1)?(g+=2,64):(g++,42);case 38:return f=38===p.charCodeAt(g+1)?(g+=2,53):61===p.charCodeAt(g+1)?(g+=2,68):(g++,48);case 40:return g++,f=19;case 41:return g++,f=20;case 42:return f=61===p.charCodeAt(g+1)?(g+=2,61):42===p.charCodeAt(g+1)?61===p.charCodeAt(g+2)?(g+=3,62):(g+=2,40):(g++,39);case 43:return f=43===p.charCodeAt(g+1)?(g+=2,43):61===p.charCodeAt(g+1)?(g+=2,59):(g++,37);case 44:return g++,f=26;case 45:return f=45===p.charCodeAt(g+1)?(g+=2,44):61===p.charCodeAt(g+1)?(g+=2,60):(g++,38);case 46:return f=H(p.charCodeAt(g+1))?(y=u(),8):46===p.charCodeAt(g+1)&&46===p.charCodeAt(g+2)?(g+=3,24):(g++,23);case 47:if(47===p.charCodeAt(g+1)){for(g+=2;g<h&&!U(p.charCodeAt(g));)g++;if(s)continue;return f=2}if(42!==p.charCodeAt(g+1))return f=61===p.charCodeAt(g+1)?(g+=2,63):(g++,41);g+=2;for(var n=!1;g<h;){var o=p.charCodeAt(g);if(42===o&&47===p.charCodeAt(g+1)){g+=2,n=!0;break}U(o)&&(k=!0),g++}if(n||c(P.Diagnostics.Asterisk_Slash_expected),s)continue;return v=!n,f=3;case 48:if(g+2<h&&(88===p.charCodeAt(g+1)||120===p.charCodeAt(g+1)))return g+=2,(e=d(1))<0&&(c(P.Diagnostics.Hexadecimal_digit_expected),e=0),y=""+e,f=l=8;if(g+2<h&&(66===p.charCodeAt(g+1)||98===p.charCodeAt(g+1)))return g+=2,(e=I(2))<0&&(c(P.Diagnostics.Binary_digit_expected),e=0),y=""+e,l=16,f=8;if(g+2<h&&(79===p.charCodeAt(g+1)||111===p.charCodeAt(g+1)))return g+=2,(e=I(8))<0&&(c(P.Diagnostics.Octal_digit_expected),e=0),y=""+e,l=32,f=8;if(g+1<h&&V(p.charCodeAt(g+1)))return y=""+function(){for(var e=g;V(p.charCodeAt(g));)g++;return+p.substring(e,g)}(),l=4,f=8;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return y=u(),f=8;case 58:return g++,f=56;case 59:return g++,f=25;case 60:if(W(p,g)){if(g=G(p,g,c),s)continue;return f=7}return f=60===p.charCodeAt(g+1)?61===p.charCodeAt(g+2)?(g+=3,65):(g+=2,45):61===p.charCodeAt(g+1)?(g+=2,30):1===a&&47===p.charCodeAt(g+1)&&42!==p.charCodeAt(g+2)?(g+=2,28):(g++,27);case 61:if(W(p,g)){if(g=G(p,g,c),s)continue;return f=7}return f=61===p.charCodeAt(g+1)?61===p.charCodeAt(g+2)?(g+=3,34):(g+=2,32):62===p.charCodeAt(g+1)?(g+=2,36):(g++,58);case 62:if(W(p,g)){if(g=G(p,g,c),s)continue;return f=7}return g++,f=29;case 63:return g++,f=55;case 91:return g++,f=21;case 93:return g++,f=22;case 94:return f=61===p.charCodeAt(g+1)?(g+=2,70):(g++,50);case 123:return g++,f=17;case 124:if(W(p,g)){if(g=G(p,g,c),s)continue;return f=7}return f=124===p.charCodeAt(g+1)?(g+=2,54):61===p.charCodeAt(g+1)?(g+=2,69):(g++,49);case 125:return g++,f=18;case 126:return g++,f=52;case 64:return g++,f=57;case 92:var r=x();return f=0<=r&&z(r,i)?(g+=6,y=String.fromCharCode(r)+B(),A()):(c(P.Diagnostics.Invalid_character),g++,0);default:if(z(t,i)){for(g++;g<h&&X(t=p.charCodeAt(g),i);)g++;return y=p.substring(m,g),92===t&&(y+=B()),f=A()}if(F(t)){g++;continue}if(U(t)){k=!0,g++;continue}return c(P.Diagnostics.Invalid_character),g++,f=0}}}function N(){if(_=m=g,h<=g)return f=1;var e=p.charCodeAt(g);if(60===e)return f=47===p.charCodeAt(g+1)?(g+=2,28):(g++,27);if(123===e)return g++,f=17;for(var t=0;g<h&&123!==(e=p.charCodeAt(g));){if(60===e){if(W(p,g))return g=G(p,g,c),f=7;break}U(e)&&0===t?t=-1:M(e)||(t=g),g++}return-1===t?11:10}function w(e,t){var n=g,o=_,r=m,i=f,s=y,a=k,e=e();return e&&!t||(g=n,_=o,m=r,f=i,y=s,k=a),e}function O(e,t,n){p=e||"",h=void 0===n?p.length:t+n,R(t||0)}function R(e){P.Debug.assert(0<=e),m=_=g=e,y=void(f=0),v=b=k=!1}}}(ts=ts||{}),function(k){k.emptyArray=[],k.emptyMap=k.createMap(),k.externalHelpersModuleNameText="tslib",k.getDeclarationOfKind=function(e,t){e=e.declarations;if(e)for(var n=0,o=e;n<o.length;n++){var r=o[n];if(r.kind===t)return r}};t="";var t,n={string:function(){return t},writeKeyword:e=function(e){return t+=e},writeOperator:e,writePunctuation:e,writeSpace:e,writeStringLiteral:e,writeParameter:e,writeProperty:e,writeSymbol:e,writeLine:function(){return t+=" "},increaseIndent:k.noop,decreaseIndent:k.noop,clear:function(){return t=""},trackSymbol:k.noop,reportInaccessibleThisError:k.noop,reportPrivateInBaseOfClassExpression:k.noop};function o(e){return e.end-e.pos}function i(e){for(;e&&265!==e.kind;)e=e.parent;return e}function L(e,t){k.Debug.assert(0<=e);var n=k.getLineStarts(t),o=t.text;if(e+1===n.length)return o.length-1;var r=n[e],i=n[e+1]-1;for(k.Debug.assert(k.isLineBreak(o.charCodeAt(i)));r<=i&&k.isLineBreak(o.charCodeAt(i));)i--;return i}function l(e){return void 0===e||e.pos===e.end&&0<=e.pos&&1!==e.kind}function M(e){return!l(e)}function F(e,t){return 42===e.charCodeAt(t.pos+1)&&33===e.charCodeAt(t.pos+2)}function r(e,t,n){return l(e)?e.pos:k.isJSDocNode(e)?k.skipTrivia((t||i(e)).text,e.pos,!1,!0):n&&k.hasJSDocNodes(e)?r(e.jsDoc[0]):286===e.kind&&0<e._children.length?r(e._children[0],t,n):k.skipTrivia((t||i(e)).text,e.pos)}function s(e,t,n){return void 0===n&&(n=!1),l(t)?"":(e=e.text).substring(n?t.pos:k.skipTrivia(e,t.pos),t.end)}function U(e,t){return l(t)?"":e.substring(k.skipTrivia(e,t.pos),t.end)}function a(e,t){return void 0===t&&(t=!1),s(i(e),e,t)}function H(e,t){e=e.pos,t=t.pos;return e<t?-1:t<e?1:0}function V(e){e=e.emitNode;return e&&e.flags}function c(e){return 2<=e.length&&95===e.charCodeAt(0)&&95===e.charCodeAt(1)?"_"+e:e}function W(e){e=be(e);return 226===e.kind&&260===e.parent.kind}function u(e){return e&&233===e.kind&&(9===e.name.kind||K(e))}function G(e){return k.isModuleDeclaration(e)&&9===e.name.kind}function K(e){return!!(512&e.flags)}function j(e,t){switch(e.kind){case 265:case 235:case 260:case 233:case 214:case 215:case 216:case 152:case 151:case 153:case 154:case 228:case 186:case 187:return!0;case 207:return t&&!k.isFunctionLike(t)}return!1}function z(e){return 0===o(e)?"(Missing)":a(e)}function X(e){switch(e.kind){case 71:return e.escapedText;case 9:case 8:return c(e.text);case 144:if(T(e.expression))return c(e.expression.text)}}function $(e,t,n,o,r,i){t=p(e,t);return k.createFileDiagnostic(e,t.start,t.length,n,o,r,i)}function d(e,t){e=k.createScanner(e.languageVersion,!0,e.languageVariant,e.text,void 0,t),e.scan(),t=e.getTokenPos();return k.createTextSpanFromBounds(t,e.getTextPos())}function p(e,t){var n,o=t;switch(t.kind){case 265:var r=k.skipTrivia(e.text,0,!1);return r===e.text.length?k.createTextSpan(0,0):d(e,r);case 226:case 176:case 229:case 199:case 230:case 233:case 232:case 264:case 228:case 186:case 151:case 153:case 154:case 231:o=t.name;break;case 187:var r=e,i=t,s=k.skipTrivia(r.text,i.pos);if(i.body&&207===i.body.kind){var a=k.getLineAndCharacterOfPosition(r,i.body.pos).line;if(a<k.getLineAndCharacterOfPosition(r,i.body.end).line)return k.createTextSpan(s,L(a,r)-s+1)}return k.createTextSpanFromBounds(s,i.end)}return void 0===o?d(e,t.pos):(n=l(o)?o.pos:k.skipTrivia(e.text,o.pos),k.createTextSpanFromBounds(n,o.end))}function Y(e){return!!(2&k.getCombinedNodeFlags(e))||!!(2048&k.getCombinedModifierFlags(e))}k.usingSingleLineStringWriter=function(e){var t=n.string();try{return e(n),n.string()}finally{n.clear(),n.writeKeyword(t)}},k.getFullWidth=o,k.getResolvedModule=function(e,t){return e&&e.resolvedModules&&e.resolvedModules.get(t)},k.setResolvedModule=function(e,t,n){e.resolvedModules||(e.resolvedModules=k.createMap()),e.resolvedModules.set(t,n)},k.setResolvedTypeReferenceDirective=function(e,t,n){e.resolvedTypeReferenceDirectiveNames||(e.resolvedTypeReferenceDirectiveNames=k.createMap()),e.resolvedTypeReferenceDirectiveNames.set(t,n)},k.moduleResolutionIsEqualTo=function(e,t){return e.isExternalLibraryImport===t.isExternalLibraryImport&&e.extension===t.extension&&e.resolvedFileName===t.resolvedFileName&&((e=e.packageId)===(t=t.packageId)||e&&t&&e.name===t.name&&e.subModuleName===t.subModuleName&&e.version===t.version)},k.typeDirectiveIsEqualTo=function(e,t){return e.resolvedFileName===t.resolvedFileName&&e.primary===t.primary},k.hasChangesInResolutions=function(e,t,n,o){k.Debug.assert(e.length===t.length);for(var r=0;r<e.length;r++){var i=t[r],s=n&&n.get(e[r]);if(s?!i||!o(s,i):i)return!0}return!1},k.containsParseError=function e(t){return 262144&(n=t).flags||(0==(32768&n.flags)&&!k.forEachChild(n,e)||(n.flags|=131072),n.flags|=262144),0!=(131072&t.flags);var n},k.getSourceFileOfNode=i,k.isStatementWithLocals=function(e){switch(e.kind){case 207:case 235:case 214:case 215:case 216:return!0}return!1},k.getStartPositionOfLine=function(e,t){return k.Debug.assert(0<=e),k.getLineStarts(t)[e]},k.nodePosToString=function(e){var t=i(e),e=k.getLineAndCharacterOfPosition(t,e.pos);return t.fileName+"("+(e.line+1)+","+(e.character+1)+")"},k.getEndLinePosition=L,k.nodeIsMissing=l,k.nodeIsPresent=M,k.isRecognizedTripleSlashComment=function(e,t,n){return 47===e.charCodeAt(t+1)&&t+2<n&&47===e.charCodeAt(t+2)&&!!((e=e.substring(t,n)).match(k.fullTripleSlashReferencePathRegEx)||e.match(k.fullTripleSlashAMDReferencePathRegEx)||e.match(q)||e.match(J))},k.isPinnedComment=F,k.getTokenPosOfNode=r,k.getNonDecoratorTokenPosOfNode=function(e,t){return l(e)||!e.decorators?r(e,t):k.skipTrivia((t||i(e)).text,e.decorators.end)},k.getSourceTextOfNodeFromSourceFile=s,k.getTextOfNodeFromSourceText=U,k.getTextOfNode=a,k.indexOfNode=function(e,t){return k.binarySearch(e,t,H)},k.getEmitFlags=V,k.getLiteralText=function(e,t){if(!ve(e)&&e.parent)return s(t,e);var n=16777216&V(e)?De:Pe;switch(e.kind){case 9:return e.singleQuote?"'"+n(e.text,39)+"'":'"'+n(e.text,34)+'"';case 13:return"`"+n(e.text,96)+"`";case 14:return"`"+n(e.text,96)+"${";case 15:return"}"+n(e.text,96)+"${";case 16:return"}"+n(e.text,96)+"`";case 8:case 12:return e.text}k.Debug.fail("Literal kind '"+e.kind+"' not accounted for.")},k.getTextOfConstantValue=function(e){return k.isString(e)?'"'+Pe(e)+'"':""+e},k.escapeLeadingUnderscores=c,k.escapeIdentifier=function(e){return e},k.makeIdentifierFromModuleName=function(e){return k.getBaseFileName(e).replace(/^(\d)/,"_$1").replace(/\W/g,"_")},k.isBlockOrCatchScoped=function(e){return 0!=(3&k.getCombinedNodeFlags(e))||W(e)},k.isCatchClauseVariableDeclarationOrBindingElement=W,k.isAmbientModule=u,k.isModuleWithStringLiteralName=G,k.isNonGlobalAmbientModule=function(e){return k.isModuleDeclaration(e)&&k.isStringLiteral(e.name)},k.isShorthandAmbientModuleSymbol=function(e){return(e=e.valueDeclaration)&&233===e.kind&&!e.body},k.isBlockScopedContainerTopLevel=function(e){return 265===e.kind||233===e.kind||k.isFunctionLike(e)},k.isGlobalScopeAugmentation=K,k.isExternalModuleAugmentation=function(e){if(e&&u(e))switch(e.parent.kind){case 265:return k.isExternalModule(e.parent);case 234:return u(e.parent.parent)&&!k.isExternalModule(e.parent.parent.parent)}return!1},k.isEffectiveExternalModule=function(e,t){return k.isExternalModule(e)||t.isolatedModules},k.isBlockScope=j,k.isDeclarationWithTypeParameters=function(e){switch(e.kind){case 155:case 156:case 150:case 157:case 160:case 161:case 273:case 229:case 199:case 230:case 231:case 282:case 228:case 151:case 152:case 153:case 154:case 186:case 187:return!0;default:return k.assertTypeIsNever(e),!1}},k.isAnyImportSyntax=function(e){switch(e.kind){case 238:case 237:return!0;default:return!1}},k.getEnclosingBlockScopeContainer=function(e){for(var t=e.parent;t;){if(j(t,t.parent))return t;t=t.parent}},k.declarationNameToString=z,k.getNameFromIndexInfo=function(e){return e.declaration?z(e.declaration.parameters[0].name):void 0},k.getTextOfPropertyName=X,k.entityNameToString=function e(t){switch(t.kind){case 71:return 0===o(t)?k.idText(t):a(t);case 143:return e(t.left)+"."+e(t.right);case 179:return e(t.expression)+"."+e(t.name)}},k.createDiagnosticForNode=function(e,t,n,o,r){return $(i(e),e,t,n,o,r)},k.createDiagnosticForNodeInSourceFile=$,k.createDiagnosticForNodeFromMessageChain=function(e,t){var n=i(e),e=p(n,e);return{file:n,start:e.start,length:e.length,code:t.code,category:t.category,messageText:t.next?t:t.messageText}},k.getSpanOfTokenAtPosition=d,k.getErrorSpanForNode=p,k.isExternalOrCommonJsModule=function(e){return void 0!==(e.externalModuleIndicator||e.commonJsModuleIndicator)},k.isConstEnumDeclaration=function(e){return 232===e.kind&&Y(e)},k.isConst=Y,k.isLet=function(e){return!!(1&k.getCombinedNodeFlags(e))},k.isSuperCall=function(e){return 181===e.kind&&97===e.expression.kind},k.isImportCall=function(e){return 181===e.kind&&91===e.expression.kind},k.isPrologueDirective=function(e){return 210===e.kind&&9===e.expression.kind},k.getLeadingCommentRangesOfNode=function(e,t){return 10!==e.kind?k.getLeadingCommentRanges(t.text,e.pos):void 0},k.getJSDocCommentRanges=function(e,t){e=146===e.kind||145===e.kind||186===e.kind||187===e.kind||185===e.kind?k.concatenate(k.getTrailingCommentRanges(t,e.pos),k.getLeadingCommentRanges(t,e.pos)):k.getLeadingCommentRanges(t,e.pos);return k.filter(e,function(e){return 42===t.charCodeAt(e.pos+1)&&42===t.charCodeAt(e.pos+2)&&47!==t.charCodeAt(e.pos+3)})},k.fullTripleSlashReferencePathRegEx=/^(\/\/\/\s*<reference\s+path\s*=\s*)('|")(.+?)\2.*?\/>/;var e,q=/^(\/\/\/\s*<reference\s+types\s*=\s*)('|")(.+?)\2.*?\/>/,J=(k.fullTripleSlashAMDReferencePathRegEx=/^(\/\/\/\s*<amd-dependency\s+path\s*=\s*)('|")(.+?)\2.*?\/>/,/^(\/\/\/\s*<reference\s+no-default-lib\s*=\s*)('|")(.+?)\2\s*\/>/);function Q(e){if(158<=e.kind&&e.kind<=173)return!0;switch(e.kind){case 119:case 133:case 136:case 122:case 137:case 139:case 130:return!0;case 105:return 190!==e.parent.kind;case 201:return!I(e);case 71:(143===e.parent.kind&&e.parent.right===e||179===e.parent.kind&&e.parent.name===e)&&(e=e.parent),k.Debug.assert(71===e.kind||143===e.kind||179===e.kind,"'node' was expected to be a qualified name, identifier or property access in 'isPartOfTypeNode'.");case 143:case 179:case 99:var t=e.parent;if(162===t.kind)return!1;if(158<=t.kind&&t.kind<=173)return!0;switch(t.kind){case 201:return!I(t);case 145:return e===t.constraint;case 149:case 148:case 146:case 226:return e===t.type;case 228:case 186:case 187:case 152:case 151:case 150:case 153:case 154:return e===t.type;case 155:case 156:case 157:case 184:return e===t.type;case 181:case 182:return t.typeArguments&&0<=k.indexOf(t.typeArguments,e);case 183:return!1}}return!1}function Z(e){if(e)switch(e.kind){case 176:case 264:case 146:case 261:case 149:case 148:case 262:case 226:return!0}return!1}function ee(e,t){for(;;){if(!(e=e.parent))return;switch(e.kind){case 144:if(k.isClassLike(e.parent.parent))return e;e=e.parent;break;case 147:146===e.parent.kind&&k.isClassElement(e.parent.parent)?e=e.parent.parent:k.isClassElement(e.parent)&&(e=e.parent);break;case 187:if(!t)continue;case 228:case 186:case 233:case 149:case 148:case 151:case 150:case 152:case 153:case 154:case 155:case 156:case 157:case 232:case 265:return e}}}function te(e){switch(e.kind){case 229:return!0;case 149:return 229===e.parent.kind;case 153:case 154:case 151:return void 0!==e.body&&229===e.parent.kind;case 146:return void 0!==e.parent.body&&(152===e.parent.kind||151===e.parent.kind||154===e.parent.kind)&&229===e.parent.parent.kind}return!1}function g(e){return void 0!==e.decorators&&te(e)}function ne(e){return g(e)||oe(e)}function oe(e){switch(e.kind){case 229:return k.forEach(e.members,ne);case 151:case 154:return k.forEach(e.parameters,g)}}function h(e){var t=e.parent;return(251===t.kind||250===t.kind||252===t.kind)&&t.tagName===e}function re(e){switch(e.kind){case 97:case 95:case 101:case 86:case 12:case 177:case 178:case 179:case 180:case 181:case 182:case 183:case 202:case 184:case 203:case 185:case 186:case 199:case 187:case 190:case 188:case 189:case 192:case 193:case 194:case 195:case 198:case 196:case 13:case 200:case 249:case 250:case 197:case 191:case 204:return!0;case 143:for(;143===e.parent.kind;)e=e.parent;return 162===e.parent.kind||h(e);case 71:if(162===e.parent.kind||h(e))return!0;case 8:case 9:case 99:return ie(e);default:return!1}}function ie(e){var t=e.parent;switch(t.kind){case 226:case 146:case 149:case 148:case 264:case 261:case 176:return t.initializer===e;case 210:case 211:case 212:case 213:case 219:case 220:case 221:case 257:case 223:return t.expression===e;case 214:return t.initializer===e&&227!==t.initializer.kind||t.condition===e||t.incrementor===e;case 215:case 216:return t.initializer===e&&227!==t.initializer.kind||t.expression===e;case 184:case 202:case 205:case 144:return e===t.expression;case 147:case 256:case 255:case 263:return!0;case 201:return t.expression===e&&I(t);default:return re(t)}}function se(e){return 237===e.kind&&248===e.moduleReference.kind}function ae(e){return _(e)}function _(e){return e&&!!(65536&e.flags)}function le(e){if(_(e)&&58===e.operatorToken.kind&&179===e.left.kind){e=e.left;if(71===e.expression.kind)return"exports"===(t=e.expression).escapedText?1:"module"===t.escapedText&&"exports"===e.name.escapedText?2:5;if(99===e.expression.kind)return 4;if(179===e.expression.kind){var t=e.expression;if(71===t.expression.kind){if("module"===t.expression.escapedText&&"exports"===t.name.escapedText)return 1;if("prototype"===t.name.escapedText)return 3}}}return 0}function m(e){return k.isExpressionStatement(e)&&e.expression&&k.isBinaryExpression(e.expression)&&58===e.expression.operatorToken.kind&&e.expression.right}function f(e,t){return k.isVariableStatement(e)&&0<e.declarationList.declarations.length&&(!t||e.declarationList.declarations[0].initializer===t)&&e.declarationList.declarations[0].initializer}function y(e,t){return k.isVariableStatement(e)&&0<e.declarationList.declarations.length&&(!t||e.declarationList.declarations[0]===t)&&e.declarationList.declarations[0]}function b(e){return 233===e.kind&&e.body&&233===e.body.kind&&e.body}function ce(e){var o;return function e(t){var n=t.parent;n&&(261===n.kind||b(n))&&e(n),n&&n.parent&&(y(n.parent,t)||m(n.parent))&&e(n.parent),n&&n.parent&&n.parent.parent&&f(n.parent.parent,t)&&e(n.parent.parent),146===t.kind&&(o=k.addRange(o,k.getJSDocParameterTags(t))),Z(t)&&t.initializer&&k.hasJSDocNodes(t.initializer)&&(o=k.addRange(o,t.initializer.jsDoc)),k.hasJSDocNodes(t)&&(o=k.addRange(o,t.jsDoc))}(e),o||k.emptyArray}function ue(e){return k.Debug.assert(275===e.parent.kind),e.parent.parent}function de(e){return void 0!==e.dotDotDotToken}function pe(e){for(var t=e.parent;;){switch(t.kind){case 194:var n=t.operatorToken.kind;return A(n)&&t.left===e?58===n?1:2:0;case 192:case 193:n=t.operator;return 43===n||44===n?2:0;case 215:case 216:return t.initializer===e?1:0;case 185:case 177:case 198:e=t;break;case 262:if(t.name!==e)return 0;e=t.parent;break;case 261:if(t.name===e)return 0;e=t.parent;break;default:return 0}t=e.parent}}function ge(e){return D(e.expression)}function v(e,t){if(e)for(var n=0,o=e;n<o.length;n++){var r=o[n];if(r.token===t)return r}}function T(e){e=e.kind;return 9===e||8===e}function he(e){e=k.getNameOfDeclaration(e);return e&&_e(e)}function _e(e){return 144===e.kind&&!T(e.expression)&&!me(e.expression)}function me(e){return k.isPropertyAccessExpression(e)&&ke(e.expression)}function fe(e){return 71===e.kind?e.escapedText:9===e.kind||8===e.kind?c(e.text):144===e.kind?me(e=e.expression)?ye(k.idText(e.name)):9===e.kind||8===e.kind?c(e.text):void 0:void 0}function ye(e){return"__@"+e}function ke(e){return 71===e.kind&&"Symbol"===e.escapedText}function be(e){for(;176===e.kind;)e=e.parent.parent;return e}function ve(e){return k.positionIsSynthesized(e.pos)||k.positionIsSynthesized(e.end)}function Te(e,t,n){switch(e){case 182:return n?0:1;case 192:case 189:case 190:case 188:case 191:case 195:case 197:return 1;case 194:switch(t){case 40:case 58:case 59:case 60:case 62:case 61:case 63:case 64:case 65:case 66:case 67:case 68:case 70:case 69:return 1}}return 0}function Ee(e){return 194===e.kind?e.operatorToken.kind:192===e.kind||193===e.kind?e.operator:e.kind}function Se(e,t,n){switch(e){case 99:case 97:case 71:case 95:case 101:case 86:case 8:case 9:case 177:case 178:case 186:case 187:case 199:case 249:case 250:case 12:case 13:case 196:case 185:case 200:return 19;case 183:case 179:case 180:return 18;case 182:return n?18:17;case 181:return 17;case 193:return 16;case 192:case 189:case 190:case 188:case 191:return 15;case 194:switch(t){case 51:case 52:return 15;case 40:case 39:case 41:case 42:return 14;case 37:case 38:return 13;case 45:case 46:case 47:return 12;case 27:case 30:case 29:case 31:case 92:case 93:return 11;case 32:case 34:case 33:case 35:return 10;case 48:return 9;case 50:return 8;case 49:return 7;case 53:return 6;case 54:return 5;case 58:case 59:case 60:case 62:case 61:case 63:case 64:case 65:case 66:case 67:case 68:case 70:case 69:return 3;case 26:return 0;default:return-1}case 195:return 4;case 197:return 2;case 198:return 1;case 289:return 0;default:return-1}}k.isPartOfTypeNode=Q,k.isChildOfNodeWithKind=function(e,t){for(;e;){if(e.kind===t)return!0;e=e.parent}return!1},k.forEachReturnStatement=function(e,n){return function e(t){switch(t.kind){case 219:return n(t);case 235:case 207:case 211:case 212:case 213:case 214:case 215:case 216:case 220:case 221:case 257:case 258:case 222:case 224:case 260:return k.forEachChild(t,e)}}(e)},k.forEachYieldExpression=function(e,o){return function e(t){switch(t.kind){case 197:o(t);var n=t.expression;return void(n&&e(n));case 232:case 230:case 233:case 231:case 229:case 199:return;default:k.isFunctionLike(t)?(n=t.name)&&144===n.kind&&e(n.expression):Q(t)||k.forEachChild(t,e)}}(e)},k.getRestParameterElementType=function(e){return e&&164===e.kind?e.elementType:e&&159===e.kind?k.singleOrUndefined(e.typeArguments):void 0},k.isVariableLike=Z,k.introducesArgumentsExoticObject=function(e){switch(e.kind){case 151:case 150:case 152:case 153:case 154:case 228:case 186:return!0}return!1},k.unwrapInnermostStatementOfLabel=function(e,t){for(;;){if(t&&t(e),222!==e.statement.kind)return e.statement;e=e.statement}},k.isFunctionBlock=function(e){return e&&207===e.kind&&k.isFunctionLike(e.parent)},k.isObjectLiteralMethod=function(e){return e&&151===e.kind&&178===e.parent.kind},k.isObjectLiteralOrClassExpressionMethod=function(e){return 151===e.kind&&(178===e.parent.kind||199===e.parent.kind)},k.isIdentifierTypePredicate=function(e){return e&&1===e.kind},k.isThisTypePredicate=function(e){return e&&0===e.kind},k.getPropertyAssignment=function(e,t,n){return k.filter(e.properties,function(e){if(261===e.kind)return e=X(e.name),t===e||n&&n===e})},k.getContainingFunction=function(e){return k.findAncestor(e.parent,k.isFunctionLike)},k.getContainingClass=function(e){return k.findAncestor(e.parent,k.isClassLike)},k.getThisContainer=ee,k.getNewTargetContainer=function(e){var t=ee(e,!1);if(t)switch(t.kind){case 152:case 228:case 186:return t}},k.getSuperContainer=function(e,t){for(;;){if(!(e=e.parent))return e;switch(e.kind){case 144:e=e.parent;break;case 228:case 186:case 187:if(!t)continue;case 149:case 148:case 151:case 150:case 152:case 153:case 154:return e;case 147:146===e.parent.kind&&k.isClassElement(e.parent.parent)?e=e.parent.parent:k.isClassElement(e.parent)&&(e=e.parent)}}},k.getImmediatelyInvokedFunctionExpression=function(e){if(186===e.kind||187===e.kind){for(var t=e,n=e.parent;185===n.kind;)n=(t=n).parent;if(181===n.kind&&n.expression===t)return n}},k.isSuperProperty=function(e){var t=e.kind;return(179===t||180===t)&&97===e.expression.kind},k.getEntityNameFromTypeNode=function(e){switch(e.kind){case 159:return e.typeName;case 201:return D(e.expression)?e.expression:void 0;case 71:case 143:return e}},k.getInvokedExpression=function(e){return 183===e.kind?e.tag:k.isJsxOpeningLikeElement(e)?e.tagName:e.expression},k.nodeCanBeDecorated=te,k.nodeIsDecorated=g,k.nodeOrChildIsDecorated=ne,k.childIsDecorated=oe,k.isJSXTagName=h,k.isPartOfExpression=re,k.isInExpressionContext=ie,k.isExternalModuleImportEqualsDeclaration=se,k.getExternalModuleImportEqualsDeclarationExpression=function(e){return k.Debug.assert(se(e)),e.moduleReference.expression},k.isInternalModuleImportEqualsDeclaration=function(e){return 237===e.kind&&248!==e.moduleReference.kind},k.isSourceFileJavaScript=ae,k.isInJavaScriptFile=_,k.isInJSDoc=function(e){return e&&!!(1048576&e.flags)},k.isJSDocIndexSignature=function(e){return k.isTypeReferenceNode(e)&&k.isIdentifier(e.typeName)&&"Object"===e.typeName.escapedText&&e.typeArguments&&2===e.typeArguments.length&&(136===e.typeArguments[0].kind||133===e.typeArguments[0].kind)},k.isRequireCall=function(e,t){var n;return 181===e.kind&&(n=e.expression,e=e.arguments,71===n.kind)&&"require"===n.escapedText&&1===e.length&&(n=e[0],!t||9===n.kind||13===n.kind)},k.isSingleOrDoubleQuote=function(e){return 39===e||34===e},k.isStringDoubleQuoted=function(e,t){return 34===s(t,e).charCodeAt(0)},k.isDeclarationOfFunctionOrClassExpression=function(e){return!(!e.valueDeclaration||226!==e.valueDeclaration.kind)&&(e=e.valueDeclaration).initializer&&(186===e.initializer.kind||199===e.initializer.kind)},k.getRightMostAssignedExpression=function(e){for(;tt(e,!0);)e=e.right;return e},k.isExportsIdentifier=function(e){return k.isIdentifier(e)&&"exports"===e.escapedText},k.isModuleExportsPropertyAccessExpression=function(e){return k.isPropertyAccessExpression(e)&&k.isIdentifier(e.expression)&&"module"===e.expression.escapedText&&"exports"===e.name.escapedText},k.getSpecialPropertyAssignmentKind=le,k.getExternalModuleName=function(e){if(238===e.kind)return e.moduleSpecifier;if(237===e.kind){var t=e.moduleReference;if(248===t.kind)return t.expression}return 244===e.kind?e.moduleSpecifier:G(e)?e.name:void 0},k.getNamespaceDeclarationNode=function(e){return 237===e.kind?e:(e=e.importClause)&&e.namedBindings&&240===e.namedBindings.kind?e.namedBindings:void 0},k.isDefaultImport=function(e){return 238===e.kind&&e.importClause&&!!e.importClause.name},k.hasQuestionToken=function(e){if(e)switch(e.kind){case 146:case 151:case 150:case 262:case 261:case 149:case 148:return void 0!==e.questionToken}return!1},k.isJSDocConstructSignature=function(e){return 273===e.kind&&0<e.parameters.length&&e.parameters[0].name&&"new"===e.parameters[0].name.escapedText},k.getAllJSDocs=function(e){return k.isJSDocTypedefTag(e)?[e.parent]:ce(e)},k.getSourceOfAssignment=m,k.getSingleInitializerOfVariableStatement=f,k.getSingleVariableOfVariableStatement=y,k.getNestedModuleDeclaration=b,k.getJSDocCommentsAndTags=ce,k.getParameterSymbolFromJSDoc=function(e){if(e.symbol)return e.symbol;if(k.isIdentifier(e.name)){var t=e.name.escapedText,e=ue(e),e=m(e)||f(e)||y(e)||b(e)||e;if(e&&k.isFunctionLike(e))return(e=k.find(e.parameters,function(e){return 71===e.name.kind&&e.name.escapedText===t}))&&e.symbol}},k.getJSDocHost=ue,k.getTypeParameterFromJsDoc=function(e){var t=e.name.escapedText,e=e.parent.parent.parent.typeParameters;return k.find(e,function(e){return e.name.escapedText===t})},k.hasRestParameter=function(e){e=k.lastOrUndefined(e.parameters);return e&&de(e)},k.isRestParameter=de,(e=k.AssignmentKind||(k.AssignmentKind={}))[e.None=0]="None",e[e.Definite=1]="Definite",e[e.Compound=2]="Compound",k.getAssignmentTargetKind=pe,k.isAssignmentTarget=function(e){return 0!==pe(e)},k.isDeleteTarget=function(e){if(179!==e.kind&&180!==e.kind)return!1;for(e=e.parent;e&&185===e.kind;)e=e.parent;return e&&188===e.kind},k.isNodeDescendantOf=function(e,t){for(;e;){if(e===t)return!0;e=e.parent}return!1},k.isInAmbientContext=function(e){for(;e;){if(B(e,2)||265===e.kind&&e.isDeclarationFile)return!0;e=e.parent}return!1},k.isDeclarationName=function(e){switch(e.kind){case 71:case 9:case 8:return k.isDeclaration(e.parent)&&e.parent.name===e;default:return!1}},k.isAnyDeclarationName=function(e){switch(e.kind){case 71:case 9:case 8:var t;return k.isDeclaration(e.parent)?e.parent.name===e:(t=e.parent.parent,k.isBinaryExpression(t)&&0!==le(t)&&k.getNameOfDeclaration(t)===e);default:return!1}},k.isLiteralComputedPropertyDeclarationName=function(e){return(9===e.kind||8===e.kind)&&144===e.parent.kind&&k.isDeclaration(e.parent.parent)},k.isIdentifierName=function(e){var t=e.parent;switch(t.kind){case 149:case 148:case 151:case 150:case 153:case 154:case 264:case 261:case 179:return t.name===e;case 143:if(t.right!==e)return!1;for(;143===t.kind;)t=t.parent;return 162===t.kind;case 176:case 242:return t.propertyName===e;case 246:case 253:return!0}return!1},k.isAliasSymbolDeclaration=function(e){return 237===e.kind||236===e.kind||239===e.kind&&!!e.name||240===e.kind||242===e.kind||246===e.kind||243===e.kind&&ge(e)},k.exportAssignmentIsAlias=ge,k.getClassExtendsHeritageClauseElement=function(e){e=v(e.heritageClauses,85);return e&&0<e.types.length?e.types[0]:void 0},k.getClassImplementsHeritageClauseElements=function(e){e=v(e.heritageClauses,108);return e?e.types:void 0},k.getInterfaceBaseTypeNodes=function(e){e=v(e.heritageClauses,85);return e?e.types:void 0},k.getHeritageClause=v,k.tryResolveScriptReference=function(e,t,n){if(!e.getCompilerOptions().noResolve)return t=k.isRootedDiskPath(n.fileName)?n.fileName:k.combinePaths(k.getDirectoryPath(t.fileName),n.fileName),e.getSourceFile(t)},k.getAncestor=function(e,t){for(;e;){if(e.kind===t)return e;e=e.parent}},k.getFileReferenceFromReferencePath=function(e,t){var n=new RegExp(J.source,"gim");if(/^\/\/\/\s*<reference\s+/gim.test(e))return n.test(e)?{isNoDefaultLib:!0}:(e=!(n=k.fullTripleSlashReferencePathRegEx.exec(e))&&q.exec(e),(n=n||e)?{fileReference:{pos:t=t.pos+n[1].length+n[2].length,end:t+n[3].length,fileName:n[3]},isNoDefaultLib:!1,isTypeReferenceDirective:!!e}:{diagnosticMessage:k.Diagnostics.Invalid_reference_directive_syntax,isNoDefaultLib:!1})},k.isKeyword=function(e){return 72<=e&&e<=142},k.isTrivia=function(e){return 2<=e&&e<=7},(e=k.FunctionFlags||(k.FunctionFlags={}))[e.Normal=0]="Normal",e[e.Generator=1]="Generator",e[e.Async=2]="Async",e[e.Invalid=4]="Invalid",e[e.AsyncGenerator=3]="AsyncGenerator",k.getFunctionFlags=function(e){if(!e)return 4;var t=0;switch(e.kind){case 228:case 186:case 151:e.asteriskToken&&(t|=1);case 187:B(e,256)&&(t|=2)}return e.body||(t|=4),t},k.isAsyncFunction=function(e){switch(e.kind){case 228:case 186:case 187:case 151:return void 0!==e.body&&void 0===e.asteriskToken&&B(e,256)}return!1},k.isStringOrNumericLiteral=T,k.hasDynamicName=he,k.isDynamicName=_e,k.isWellKnownSymbolSyntactically=me,k.getPropertyNameForPropertyNameNode=fe,k.getTextOfIdentifierOrLiteral=function(e){if(e)return 71===e.kind?k.idText(e):9===e.kind||8===e.kind?e.text:void 0},k.getEscapedTextOfIdentifierOrLiteral=function(e){if(e)return 71===e.kind?e.escapedText:9===e.kind||8===e.kind?c(e.text):void 0},k.getPropertyNameForKnownSymbolName=ye,k.isESSymbolIdentifier=ke,k.isPushOrUnshiftIdentifier=function(e){return"push"===e.escapedText||"unshift"===e.escapedText},k.isParameterDeclaration=function(e){return 146===be(e).kind},k.getRootDeclaration=be,k.nodeStartsNewLexicalEnvironment=function(e){e=e.kind;return 152===e||186===e||228===e||187===e||151===e||153===e||154===e||233===e||265===e},k.nodeIsSynthesized=ve,k.getOriginalSourceFile=function(e){return k.getParseTreeNode(e,k.isSourceFile)||e},(e=k.Associativity||(k.Associativity={}))[e.Left=0]="Left",e[e.Right=1]="Right",k.getExpressionAssociativity=function(e){var t=Ee(e),n=182===e.kind&&void 0!==e.arguments;return Te(e.kind,t,n)},k.getOperatorAssociativity=Te,k.getExpressionPrecedence=function(e){var t=Ee(e),n=182===e.kind&&void 0!==e.arguments;return Se(e.kind,t,n)},k.getOperator=Ee,k.getOperatorPrecedence=Se,k.createDiagnosticCollection=function(){var o=[],r=k.createMap(),n=!1,i=0;return{add:function(e){var t;e.file?(t=r.get(e.file.fileName))||r.set(e.file.fileName,t=[]):t=o,t.push(e),n=!0,i++},getGlobalDiagnostics:function(){return s(),o},getDiagnostics:function(e){var t;return s(),e?r.get(e)||[]:(t=[],k.forEach(o,n),r.forEach(function(e){k.forEach(e,n)}),k.sortAndDeduplicateDiagnostics(t));function n(e){t.push(e)}},getModificationCount:function(){return i},reattachFileDiagnostics:function(t){k.forEach(r.get(t.fileName),function(e){return e.file=t})}};function s(){n&&(n=!1,o=k.sortAndDeduplicateDiagnostics(o),r.forEach(function(e,t){r.set(t,k.sortAndDeduplicateDiagnostics(e))}))}};var Ce=/[\\\"\u0000-\u001f\t\v\f\b\r\n\u2028\u2029\u0085]/g,xe=/[\\\'\u0000-\u001f\t\v\f\b\r\n\u2028\u2029\u0085]/g,Be=/[\\\`\u0000-\u001f\t\v\f\b\r\n\u2028\u2029\u0085]/g,Ae=k.createMapFromTemplate({"\0":"\\0","\t":"\\t","\v":"\\v","\f":"\\f","\b":"\\b","\r":"\\r","\n":"\\n","\\":"\\\\",'"':'\\"',"'":"\\'","`":"\\`","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u0085"}),Ie=/\\0[0-9]/g;function De(e,t){return e.replace(96===t?Be:39===t?xe:Ce,we).replace(Ie,Ne)}function Ne(e){return"\\x00"+e.charAt(e.length-1)}function we(e){return Ae.get(e)||Oe(e.charCodeAt(0))}function Oe(e){return"\\u"+("0000"+e.toString(16).toUpperCase()).slice(-4)}k.escapeString=De,k.isIntrinsicJsxName=function(e){e=e.substr(0,1);return e.toLowerCase()===e};var Re=/[^\u0000-\u007F]/g;function Pe(e,t){return e=De(e,t),Re.test(e)?e.replace(Re,function(e){return Oe(e.charCodeAt(0))}):e}k.escapeNonAsciiString=Pe;var E=["","    "];function S(e){return void 0===E[e]&&(E[e]=S(e-1)+E[1]),E[e]}function C(){return E[1].length}function Le(e,t){return t.moduleName||Me(e,t.fileName)}function Me(t,e){function n(e){return t.getCanonicalFileName(e)}var o=k.toPath(t.getCommonSourceDirectory(),t.getCurrentDirectory(),n),e=k.getNormalizedAbsolutePath(e,t.getCurrentDirectory()),e=k.getRelativePathToDirectoryOrUrl(o,e,o,n,!1);return k.removeFileExtension(e)}function Fe(e,t,n){return!(t.noEmitForJsFiles&&ae(e)||e.isDeclarationFile||n(e))}function Ue(e,t,n){var e=k.getNormalizedAbsolutePath(e.fileName,t.getCurrentDirectory()),o=t.getCommonSourceDirectory(),e=0===t.getCanonicalFileName(e).indexOf(t.getCanonicalFileName(o))?e.substring(o.length):e;return k.combinePaths(n,e)}function He(e,t){return k.getLineAndCharacterOfPosition(e,t).line}function x(e,t){return k.computeLineAndCharacterOfPosition(e,t).line}function Ve(e){var t;if(e&&0<e.parameters.length)return t=2===e.parameters.length&&We(e.parameters[0]),e.parameters[t?1:0]}function We(e){return Ge(e.name)}function Ge(e){return e&&71===e.kind&&Ke(e)}function Ke(e){return 99===e.originalKeywordKind}function je(e,t){return e.type||(t||_(e)?k.getJSDocType(e):void 0)}function ze(e,t,n,o){Xe(e,t,n.pos,o)}function Xe(e,t,n,o){o&&o.length&&n!==o[0].pos&&x(e,n)!==x(e,o[0].pos)&&t.writeLine()}function $e(e,t,n,o,r,i,s,a){if(o&&0<o.length){r&&n.write(" ");for(var l=!1,c=0,u=o;c<u.length;c++){var d=u[c];l&&(n.write(" "),l=!1),a(e,t,n,d.pos,d.end,s),d.hasTrailingNewLine?n.writeLine():l=!0}l&&i&&n.write(" ")}}function Ye(e,t,n){for(var o=0;t<n&&k.isWhiteSpaceSingleLine(e.charCodeAt(t));t++)9===e.charCodeAt(t)?o+=C()-o%C():o++;return o}function B(e,t){return!!qe(e,t)}function qe(e,t){return Je(e)&t}function Je(e){var t;return 536870912&e.modifierFlagsCache?-536870913&e.modifierFlagsCache:(t=Qe(e),e.modifierFlagsCache=536870912|t,t)}function Qe(e){var t=0;if(e.modifiers)for(var n=0,o=e.modifiers;n<o.length;n++)t|=Ze(o[n].kind);return(4&e.flags||71===e.kind&&e.isInJSDocNamespace)&&(t|=1),t}function Ze(e){switch(e){case 115:return 32;case 114:return 4;case 113:return 16;case 112:return 8;case 117:return 128;case 84:return 1;case 124:return 2;case 76:return 2048;case 79:return 512;case 120:return 256;case 131:return 64}return 0}function A(e){return 58<=e&&e<=70}function et(e){if(201===e.kind&&85===e.parent.token&&k.isClassLike(e.parent.parent))return e.parent.parent}function tt(e,t){return k.isBinaryExpression(e)&&(t?58===e.operatorToken.kind:A(e.operatorToken.kind))&&k.isLeftHandSideExpression(e.left)}function I(e){return void 0!==et(e)}function D(e){return 71===e.kind||179===e.kind&&D(e.expression)}k.getIndentString=S,k.getIndentSize=C,k.createTextWriter=function(e){var n,t,o,r,i;function s(e){e&&e.length&&(o&&(n+=S(t),o=!1),n+=e)}function a(){n="",o=!(t=0),i=r=0}return a(),{write:s,rawWrite:function(e){void 0!==e&&(o=o&&!1,n+=e)},writeTextOfNode:function(e,t){s(U(e,t))},writeLiteral:function(e){var t;e&&e.length&&(s(e),1<(t=k.computeLineStarts(e)).length)&&(r=r+t.length-1,i=n.length-e.length+k.lastOrUndefined(t))},writeLine:function(){o||(r++,i=(n+=e).length,o=!0)},increaseIndent:function(){t++},decreaseIndent:function(){t--},getIndent:function(){return t},getTextPos:function(){return n.length},getLine:function(){return r+1},getColumn:function(){return o?t*C()+1:n.length-i+1},getText:function(){return n},isAtStartOfLine:function(){return o},reset:a}},k.getResolvedExternalModuleName=Le,k.getExternalModuleNameFromDeclaration=function(e,t,n){t=t.getExternalModuleFileFromDeclaration(n);if(t&&!t.isDeclarationFile)return Le(e,t)},k.getExternalModuleNameFromPath=Me,k.getOwnEmitOutputFilePath=function(e,t,n){var o=t.getCompilerOptions();return(o.outDir?k.removeFileExtension(Ue(e,t,o.outDir)):k.removeFileExtension(e.fileName))+n},k.getDeclarationEmitOutputFilePath=function(e,t){var n=t.getCompilerOptions(),n=n.declarationDir||n.outDir,t=n?Ue(e,t,n):e.fileName;return k.removeFileExtension(t)+".d.ts"},k.getSourceFilesToEmit=function(t,e){function n(e){return t.isSourceFileFromExternalLibrary(e)}var o,r,i=t.getCompilerOptions();return i.outFile||i.out?(r=k.getEmitModuleKind(i),o=r===k.ModuleKind.AMD||r===k.ModuleKind.System,k.filter(t.getSourceFiles(),function(e){return(o||!k.isExternalModule(e))&&Fe(e,i,n)})):(r=void 0===e?t.getSourceFiles():[e],k.filter(r,function(e){return Fe(e,i,n)}))},k.sourceFileMayBeEmitted=Fe,k.getSourceFilePathInNewDir=Ue,k.writeFile=function(e,t,n,o,r,i){e.writeFile(n,o,r,function(e){t.add(k.createCompilerDiagnostic(k.Diagnostics.Could_not_write_file_0_Colon_1,n,e))},i)},k.getLineOfLocalPosition=He,k.getLineOfLocalPositionFromLineMap=x,k.getFirstConstructorWithBody=function(e){return k.forEach(e.members,function(e){if(152===e.kind&&M(e.body))return e})},k.getSetAccessorTypeAnnotationNode=function(e){e=Ve(e);return e&&e.type},k.getThisParameter=function(e){if(e.parameters.length){e=e.parameters[0];if(We(e))return e}},k.parameterIsThisKeyword=We,k.isThisIdentifier=Ge,k.identifierIsThisKeyword=Ke,k.getAllAccessorDeclarations=function(e,t){var n,o,r,i;return he(t)?153===(n=t).kind?r=t:154===t.kind?i=t:k.Debug.fail("Accessor has wrong kind"):k.forEach(e,function(e){153!==e.kind&&154!==e.kind||B(e,32)!==B(t,32)||fe(e.name)===fe(t.name)&&(n?o=o||e:n=e,153===e.kind&&(r=r||e),154===e.kind)&&(i=i||e)}),{firstAccessor:n,secondAccessor:o,getAccessor:r,setAccessor:i}},k.getEffectiveTypeAnnotationNode=je,k.getEffectiveReturnTypeNode=function(e,t){return e.type||(t||_(e)?k.getJSDocReturnType(e):void 0)},k.getEffectiveTypeParameterDeclarations=function(e,t){return e.typeParameters||(t||_(e)?(t=k.getJSDocTemplateTag(e))&&t.typeParameters:void 0)},k.getEffectiveSetAccessorTypeAnnotationNode=function(e,t){e=Ve(e);return e&&je(e,t)},k.emitNewLineBeforeLeadingComments=ze,k.emitNewLineBeforeLeadingCommentsOfPosition=Xe,k.emitNewLineBeforeLeadingCommentOfPosition=function(e,t,n,o){n!==o&&x(e,n)!==x(e,o)&&t.writeLine()},k.emitComments=$e,k.emitDetachedComments=function(t,e,n,o,r,i,s){var a,l;if(s?0===r.pos&&(a=k.filter(k.getLeadingCommentRanges(t,r.pos),function(e){return F(t,e)})):a=k.getLeadingCommentRanges(t,r.pos),a){for(var c=[],u=void 0,d=0,p=a;d<p.length;d++){var g=p[d];if(u){var h=x(e,u.end);if(x(e,g.pos)>=h+2)break}c.push(g),u=g}c.length&&(h=x(e,k.lastOrUndefined(c).end),x(e,k.skipTrivia(t,r.pos))>=h+2)&&(ze(e,n,r,a),$e(t,e,n,c,!1,!0,i,o),l={nodePos:r.pos,detachedCommentEndPos:k.lastOrUndefined(c).end})}return l},k.writeCommentRange=function(e,t,n,o,r,i){if(42===e.charCodeAt(o+1))for(var s=k.computeLineAndCharacterOfPosition(t,o),a=t.length,l=void 0,c=o,u=s.line;c<r;u++){var d=u+1===a?e.length+1:t[u+1];if(c!==o){void 0===l&&(l=Ye(e,t[s.line],o));var p=n.getIndent()*C()-l+Ye(e,c,d);if(0<p){var g=p%C(),p=S((p-g)/C());for(n.rawWrite(p);g;)n.rawWrite(" "),g--}else n.rawWrite("")}p=e,h=r,_=n,m=i,f=c,y=d,y=Math.min(h,y-1),(p=p.substring(f,y).replace(/^\s+|\s+$/g,""))?(_.write(p),y!==h&&_.writeLine()):_.writeLiteral(m),c=d}else n.write(e.substring(o,r));var h,_,m,f,y},k.hasModifiers=function(e){return 0!==Je(e)},k.hasModifier=B,k.getSelectedModifierFlags=qe,k.getModifierFlags=Je,k.getModifierFlagsNoCache=Qe,k.modifierToFlag=Ze,k.isLogicalOperator=function(e){return 54===e||53===e||51===e},k.isAssignmentOperator=A,k.tryGetClassExtendingExpressionWithTypeArguments=et,k.isAssignmentExpression=tt,k.isDestructuringAssignment=function(e){return!!tt(e,!0)&&(178===(e=e.left.kind)||177===e)},k.isExpressionWithTypeArgumentsInClassExtendsClause=I,k.isExpressionWithTypeArgumentsInClassImplementsClause=function(e){return 201===e.kind&&D(e.expression)&&e.parent&&108===e.parent.token&&e.parent.parent&&k.isClassLike(e.parent.parent)},k.isEntityNameExpression=D,k.isRightSideOfQualifiedNameOrPropertyAccess=function(e){return 143===e.parent.kind&&e.parent.right===e||179===e.parent.kind&&e.parent.name===e},k.isEmptyObjectLiteral=function(e){return 178===e.kind&&0===e.properties.length},k.isEmptyArrayLiteral=function(e){return 177===e.kind&&0===e.elements.length},k.getLocalSymbolForExportDefault=function(e){return(t=e)&&0<k.length(t.declarations)&&B(t.declarations[0],512)?e.declarations[0].localSymbol:void 0;var t},k.tryExtractTypeScriptExtension=function(t){return k.find(k.supportedTypescriptExtensionsForExtractExtension,function(e){return k.fileExtensionIs(t,e)})};var N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function w(e,t,n){void 0===e&&(e=0);var o=function(e){var t,n=[];for(t in e){var o=e[t];"number"==typeof o&&n.push([o,t])}return k.stableSort(n,function(e,t){return k.compareValues(e[0],t[0])})}(t);if(0===e)return 0<o.length&&0===o[0][0]?o[0][1]:"0";if(n){for(var r="",i=e,s=o.length-1;0<=s&&0!==i;s--){var a=o[s],l=a[0],c=a[1];0!==l&&(i&l)===l&&(i&=~l,r=c+(r?", ":"")+r)}if(0===i)return r}else for(var u=0,d=o;u<d.length;u++){var p=d[u],l=p[0],c=p[1];if(l===e)return c}return e.toString()}function O(e,t){return{pos:e,end:t}}function nt(e,t){return O(t,e.end)}function ot(e){return e.decorators&&0<e.decorators.length?nt(e,e.decorators.end):e}function rt(e,t,n){return R(P(e,n),t.end,n)}function R(e,t,n){return e===t||He(n,e)===He(n,t)}function P(e,t){return k.positionIsSynthesized(e.pos)?-1:k.skipTrivia(t.text,e.pos)}function it(e){return void 0!==e.initializer}function st(e){return 33554432&e.flags?e.checkFlags:0}function at(e){var t=e.parent;if(!t)return 0;switch(t.kind){case 193:case 192:var n=t.operator;return 43===n||44===n?r():0;case 194:var n=t.left,o=t.operatorToken;return n===e&&A(o.kind)?r():0;case 179:return t.name!==e?0:at(t);default:return 0}function r(){return t.parent&&210===t.parent.kind?1:2}}k.convertToBase64=function(e){for(var t,n,o,r,i="",s=function(e){for(var t=[],n=e.length,o=0;o<n;o++){var r=e.charCodeAt(o);r<128?t.push(r):r<2048?(t.push(r>>6|192),t.push(63&r|128)):r<65536?(t.push(r>>12|224),t.push(r>>6&63|128),t.push(63&r|128)):r<131072?(t.push(r>>18|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):k.Debug.assert(!1,"Unexpected code point")}return t}(e),a=0,l=s.length;a<l;)t=s[a]>>2,n=(3&s[a])<<4|s[a+1]>>4,o=(15&s[a+1])<<2|s[a+2]>>6,r=63&s[a+2],l<=a+1?o=r=64:l<=a+2&&(r=64),i+=N.charAt(t)+N.charAt(n)+N.charAt(o)+N.charAt(r),a+=3;return i},k.getNewLineCharacter=function(e,t){switch(e.newLine){case 0:return"\r\n";case 1:return"\n"}return t?t.newLine:k.sys?k.sys.newLine:"\r\n"},k.formatSyntaxKind=function(e){return w(e,k.SyntaxKind,!1)},k.formatModifierFlags=function(e){return w(e,k.ModifierFlags,!0)},k.formatTransformFlags=function(e){return w(e,k.TransformFlags,!0)},k.formatEmitFlags=function(e){return w(e,k.EmitFlags,!0)},k.formatSymbolFlags=function(e){return w(e,k.SymbolFlags,!0)},k.formatTypeFlags=function(e){return w(e,k.TypeFlags,!0)},k.formatObjectFlags=function(e){return w(e,k.ObjectFlags,!0)},k.createRange=O,k.moveRangeEnd=function(e,t){return O(e.pos,t)},k.moveRangePos=nt,k.moveRangePastDecorators=ot,k.moveRangePastModifiers=function(e){return e.modifiers&&0<e.modifiers.length?nt(e,e.modifiers.end):ot(e)},k.isCollapsedRange=function(e){return e.pos===e.end},k.createTokenRange=function(e,t){return O(e,e+k.tokenToString(t).length)},k.rangeIsOnSingleLine=function(e,t){return rt(e,e,t)},k.rangeStartPositionsAreOnSameLine=function(e,t,n){return R(P(e,n),P(t,n),n)},k.rangeEndPositionsAreOnSameLine=function(e,t,n){return R(e.end,t.end,n)},k.rangeStartIsOnSameLineAsRangeEnd=rt,k.rangeEndIsOnSameLineAsRangeStart=function(e,t,n){return R(e.end,P(t,n),n)},k.positionsAreOnSameLine=R,k.getStartPositionOfRange=P,k.isDeclarationNameOfEnumOrNamespace=function(e){var t=k.getParseTreeNode(e);if(t)switch(t.parent.kind){case 232:case 233:return t===t.parent.name}return!1},k.getInitializedVariables=function(e){return k.filter(e.declarations,it)},k.isWatchSet=function(e){return e.watch&&e.hasOwnProperty("watch")},k.getCheckFlags=st,k.getDeclarationModifierFlagsFromSymbol=function(e){var t;return e.valueDeclaration?(t=k.getCombinedModifierFlags(e.valueDeclaration),e.parent&&32&e.parent.flags?t:-29&t):6&st(e)?(256&(t=e.checkFlags)?8:64&t?4:16)|(512&t?32:0):4194304&e.flags?36:0},k.levenshtein=function(e,t){for(var n=new Array(t.length+1),o=new Array(t.length+1),r=0;r<t.length+1;r++)o[n[r]=r]=-1;for(r=1;r<e.length+1;r++){o[0]=r;for(var i=1;i<t.length+1;i++)o[i]=Math.min(n[i]+1,o[i-1]+1,n[i-1]+(e[r-1]===t[i-1]?0:2));var s=n,n=o,o=s}return n[n.length-1]},k.skipAlias=function(e,t){return 2097152&e.flags?t.getAliasedSymbol(e):e},k.getCombinedLocalAndExportSymbolFlags=function(e){return e.exportSymbol?e.exportSymbol.flags|e.flags:e.flags},k.isWriteOnlyAccess=function(e){return 1===at(e)},k.isWriteAccess=function(e){return 0!==at(e)},k.compareDataObjects=function e(t,n){if(!t||!n||Object.keys(t).length!==Object.keys(n).length)return!1;for(var o in t)if("object"==typeof t[o]){if(!e(t[o],n[o]))return!1}else if("function"!=typeof t[o]&&t[o]!==n[o])return!1;return!0},k.clearMap=function(e,t){e.forEach(t),e.clear()},k.mutateMap=function(o,r,e){var n=e.createNewValue,i=e.onDeleteValue,s=e.onExistingValue;o.forEach(function(e,t){var n=r.get(t);void 0===n?(o.delete(t),i(e,t)):s&&s(e,n,t)}),r.forEach(function(e,t){o.has(t)||o.set(t,n(t,e))})},k.forEachAncestorDirectory=function(e,t){for(;;){var n=t(e);if(void 0!==n)return n;n=k.getDirectoryPath(e);if(n===e)return;e=n}}}(ts=ts||{}),function(p){function g(e){return e.start+e.length}function t(e){return 0===e.length}function n(e,t){if(e<0)throw new Error("start < 0");if(t<0)throw new Error("length < 0");return{start:e,length:t}}function h(e,t){return n(e,t-e)}function _(e,t){if(t<0)throw new Error("newLength < 0");return{span:e,newLength:t}}function o(e){return!!p.isBindingPattern(e)&&p.every(e.elements,r)}function r(e){return!!p.isOmittedExpression(e)||o(e.name)}function i(e){for(;e&&(176===e.kind||p.isBindingPattern(e));)e=e.parent;return e}function s(e,t){if(e)for(;void 0!==e.original;)e=e.original;return!t||t(e)?e:void 0}function a(e){return 0==(8&e.flags)}function l(e){return 3<=e.length&&95===e.charCodeAt(0)&&95===e.charCodeAt(1)&&95===e.charCodeAt(2)?e.substr(1):e}function c(e){e=d(e);return p.isIdentifier(e)?e:void 0}function u(o){return o.name||function(){var e=o.parent.parent;if(e){if(p.isDeclaration(e))return c(e);switch(e.kind){case 208:return e.declarationList&&e.declarationList.declarations[0]?c(e.declarationList.declarations[0]):void 0;case 210:var t=e.expression;switch(t.kind){case 179:return t.name;case 180:var n=t.argumentExpression;if(p.isIdentifier(n))return n}return;case 1:return;case 185:return c(e.expression);case 222:return p.isDeclaration(e.statement)||p.isExpression(e.statement)?c(e.statement):void 0;default:p.Debug.assertNever(e,"Found typedef tag attached to node which it should not be!")}}}()}function d(e){if(e){switch(e.kind){case 284:case 279:var t=e.name;if(143===t.kind)return t.right;break;case 194:var n=e;switch(p.getSpecialPropertyAssignmentKind(n)){case 1:case 4:case 5:case 3:return n.left.name;default:return}case 283:return u(e);case 243:t=e.expression;return p.isIdentifier(t)?t:void 0}return e.name}}function m(e){var t;if(e.name&&p.isIdentifier(e.name))return t=e.name.escapedText,y(e.parent).filter(function(e){return p.isJSDocParameterTag(e)&&p.isIdentifier(e.name)&&e.name.escapedText===t})}function f(e){return k(e,280)}function y(e){var t=e.jsDocCache;return void 0===t&&(e.jsDocCache=t=p.flatMap(p.getJSDocCommentsAndTags(e),function(e){return p.isJSDoc(e)?e.tags:e})),t}function k(e,t){e=y(e);return p.find(e,function(e){return e.kind===t})}p.getDefaultLibFileName=function(e){switch(e.target){case 5:return"lib.esnext.full.d.ts";case 4:return"lib.es2017.full.d.ts";case 3:return"lib.es2016.full.d.ts";case 2:return"lib.es6.d.ts";default:return"lib.d.ts"}},p.textSpanEnd=g,p.textSpanIsEmpty=t,p.textSpanContainsPosition=function(e,t){return t>=e.start&&t<g(e)},p.textSpanContainsTextSpan=function(e,t){return t.start>=e.start&&g(t)<=g(e)},p.textSpanOverlapsWith=function(e,t){return Math.max(e.start,t.start)<Math.min(g(e),g(t))},p.textSpanOverlap=function(e,t){var n=Math.max(e.start,t.start),e=Math.min(g(e),g(t));if(n<e)return h(n,e)},p.textSpanIntersectsWithTextSpan=function(e,t){return t.start<=g(e)&&g(t)>=e.start},p.textSpanIntersectsWith=function(e,t,n){return t<=g(e)&&t+n>=e.start},p.decodedTextSpanIntersectsWith=function(e,t,n,o){return n<=e+t&&e<=n+o},p.textSpanIntersectsWithPosition=function(e,t){return t<=g(e)&&t>=e.start},p.textSpanIntersection=function(e,t){var n=Math.max(e.start,t.start),e=Math.min(g(e),g(t));if(n<=e)return h(n,e)},p.createTextSpan=n,p.createTextSpanFromBounds=h,p.textChangeRangeNewSpan=function(e){return n(e.span.start,e.newLength)},p.textChangeRangeIsUnchanged=function(e){return t(e.span)&&0===e.newLength},p.createTextChangeRange=_,p.unchangedTextChangeRange=_(n(0,0),0),p.collapseTextChangeRangesAcrossMultipleVersions=function(e){if(0===e.length)return p.unchangedTextChangeRange;if(1===e.length)return e[0];for(var t=e[0],n=t.span.start,o=g(t.span),r=n+t.newLength,i=1;i<e.length;i++)var s=e[i],a=n,l=o,c=r,u=s.span.start,d=g(s.span),s=u+s.newLength,n=Math.min(a,u),o=Math.max(l,l+(d-c)),r=Math.max(s,s+(c-d));return _(h(n,o),r-n)},p.getTypeParameterOwner=function(e){if(e&&145===e.kind)for(var t=e;t;t=t.parent)if(p.isFunctionLike(t)||p.isClassLike(t)||230===t.kind)return t},p.isParameterPropertyDeclaration=function(e){return p.hasModifier(e,92)&&152===e.parent.kind&&p.isClassLike(e.parent.parent)},p.isEmptyBindingPattern=o,p.isEmptyBindingElement=r,p.getCombinedModifierFlags=function(e){e=i(e);var t=p.getModifierFlags(e);return(e=226===e.kind?e.parent:e)&&227===e.kind&&(t|=p.getModifierFlags(e),e=e.parent),e&&208===e.kind&&(t|=p.getModifierFlags(e)),t},p.getCombinedNodeFlags=function(e){var t=(e=i(e)).flags;return(e=226===e.kind?e.parent:e)&&227===e.kind&&(t|=e.flags,e=e.parent),e&&208===e.kind&&(t|=e.flags),t},p.validateLocaleAndSetLanguage=function(e,r,t){var n,e=/^([a-z]+)([_\-]([a-z]+))?$/.exec(e.toLowerCase());function o(e,t,n){var o=p.normalizePath(r.getExecutingFilePath()),o=p.getDirectoryPath(o),o=p.combinePaths(o,e),o=r.resolvePath(p.combinePaths(o=t?o+"-"+t:o,"diagnosticMessages.generated.json"));if(r.fileExists(o)){t="";try{t=r.readFile(o)}catch(e){return n&&n.push(p.createCompilerDiagnostic(p.Diagnostics.Unable_to_open_file_0,o)),0}try{p.localizedDiagnosticMessages=JSON.parse(t)}catch(e){return n&&n.push(p.createCompilerDiagnostic(p.Diagnostics.Corrupted_locale_file_0,o)),0}return 1}}e?o(n=e[1],e[3],t)||o(n,void 0,t):t&&t.push(p.createCompilerDiagnostic(p.Diagnostics.Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1,"en","ja-jp"))},p.getOriginalNode=s,p.isParseTreeNode=a,p.getParseTreeNode=function(e,t){return void 0!==e&&!a(e)&&(!a(e=s(e))||t&&!t(e))?void 0:e},p.unescapeLeadingUnderscores=l,p.idText=function(e){return l(e.escapedText)},p.symbolName=function(e){return l(e.escapedName)},p.unescapeIdentifier=function(e){return e},p.getNameOfJSDocTypedef=u,p.getNameOfDeclaration=d,p.getJSDocParameterTags=m,p.hasJSDocParameterTags=function(e){return!!k(e,279)},p.getJSDocAugmentsTag=function(e){return k(e,277)},p.getJSDocClassTag=function(e){return k(e,278)},p.getJSDocReturnTag=f,p.getJSDocTemplateTag=function(e){return k(e,282)},p.getJSDocTypeTag=function(e){e=k(e,281);if(e&&e.typeExpression&&e.typeExpression.type)return e},p.getJSDocType=function(e){var t=k(e,281);return t||146!==e.kind||(e=m(e))&&(t=p.find(e,function(e){return!!e.typeExpression})),t&&t.typeExpression&&t.typeExpression.type},p.getJSDocReturnType=function(e){e=f(e);return e&&e.typeExpression&&e.typeExpression.type},p.getJSDocTags=y,p.getAllJSDocTagsOfKind=function(e,t){e=y(e);return p.filter(e,function(e){return e.kind===t})}}(ts=ts||{}),function(e){e.isNumericLiteral=function(e){return 8===e.kind},e.isStringLiteral=function(e){return 9===e.kind},e.isJsxText=function(e){return 10===e.kind},e.isRegularExpressionLiteral=function(e){return 12===e.kind},e.isNoSubstitutionTemplateLiteral=function(e){return 13===e.kind},e.isTemplateHead=function(e){return 14===e.kind},e.isTemplateMiddle=function(e){return 15===e.kind},e.isTemplateTail=function(e){return 16===e.kind},e.isIdentifier=function(e){return 71===e.kind},e.isQualifiedName=function(e){return 143===e.kind},e.isComputedPropertyName=function(e){return 144===e.kind},e.isTypeParameterDeclaration=function(e){return 145===e.kind},e.isParameter=function(e){return 146===e.kind},e.isDecorator=function(e){return 147===e.kind},e.isPropertySignature=function(e){return 148===e.kind},e.isPropertyDeclaration=function(e){return 149===e.kind},e.isMethodSignature=function(e){return 150===e.kind},e.isMethodDeclaration=function(e){return 151===e.kind},e.isConstructorDeclaration=function(e){return 152===e.kind},e.isGetAccessorDeclaration=function(e){return 153===e.kind},e.isSetAccessorDeclaration=function(e){return 154===e.kind},e.isCallSignatureDeclaration=function(e){return 155===e.kind},e.isConstructSignatureDeclaration=function(e){return 156===e.kind},e.isIndexSignatureDeclaration=function(e){return 157===e.kind},e.isTypePredicateNode=function(e){return 158===e.kind},e.isTypeReferenceNode=function(e){return 159===e.kind},e.isFunctionTypeNode=function(e){return 160===e.kind},e.isConstructorTypeNode=function(e){return 161===e.kind},e.isTypeQueryNode=function(e){return 162===e.kind},e.isTypeLiteralNode=function(e){return 163===e.kind},e.isArrayTypeNode=function(e){return 164===e.kind},e.isTupleTypeNode=function(e){return 165===e.kind},e.isUnionTypeNode=function(e){return 166===e.kind},e.isIntersectionTypeNode=function(e){return 167===e.kind},e.isParenthesizedTypeNode=function(e){return 168===e.kind},e.isThisTypeNode=function(e){return 169===e.kind},e.isTypeOperatorNode=function(e){return 170===e.kind},e.isIndexedAccessTypeNode=function(e){return 171===e.kind},e.isMappedTypeNode=function(e){return 172===e.kind},e.isLiteralTypeNode=function(e){return 173===e.kind},e.isObjectBindingPattern=function(e){return 174===e.kind},e.isArrayBindingPattern=function(e){return 175===e.kind},e.isBindingElement=function(e){return 176===e.kind},e.isArrayLiteralExpression=function(e){return 177===e.kind},e.isObjectLiteralExpression=function(e){return 178===e.kind},e.isPropertyAccessExpression=function(e){return 179===e.kind},e.isElementAccessExpression=function(e){return 180===e.kind},e.isCallExpression=function(e){return 181===e.kind},e.isNewExpression=function(e){return 182===e.kind},e.isTaggedTemplateExpression=function(e){return 183===e.kind},e.isTypeAssertion=function(e){return 184===e.kind},e.isParenthesizedExpression=function(e){return 185===e.kind},e.skipPartiallyEmittedExpressions=function(e){for(;288===e.kind;)e=e.expression;return e},e.isFunctionExpression=function(e){return 186===e.kind},e.isArrowFunction=function(e){return 187===e.kind},e.isDeleteExpression=function(e){return 188===e.kind},e.isTypeOfExpression=function(e){return 191===e.kind},e.isVoidExpression=function(e){return 190===e.kind},e.isAwaitExpression=function(e){return 191===e.kind},e.isPrefixUnaryExpression=function(e){return 192===e.kind},e.isPostfixUnaryExpression=function(e){return 193===e.kind},e.isBinaryExpression=function(e){return 194===e.kind},e.isConditionalExpression=function(e){return 195===e.kind},e.isTemplateExpression=function(e){return 196===e.kind},e.isYieldExpression=function(e){return 197===e.kind},e.isSpreadElement=function(e){return 198===e.kind},e.isClassExpression=function(e){return 199===e.kind},e.isOmittedExpression=function(e){return 200===e.kind},e.isExpressionWithTypeArguments=function(e){return 201===e.kind},e.isAsExpression=function(e){return 202===e.kind},e.isNonNullExpression=function(e){return 203===e.kind},e.isMetaProperty=function(e){return 204===e.kind},e.isTemplateSpan=function(e){return 205===e.kind},e.isSemicolonClassElement=function(e){return 206===e.kind},e.isBlock=function(e){return 207===e.kind},e.isVariableStatement=function(e){return 208===e.kind},e.isEmptyStatement=function(e){return 209===e.kind},e.isExpressionStatement=function(e){return 210===e.kind},e.isIfStatement=function(e){return 211===e.kind},e.isDoStatement=function(e){return 212===e.kind},e.isWhileStatement=function(e){return 213===e.kind},e.isForStatement=function(e){return 214===e.kind},e.isForInStatement=function(e){return 215===e.kind},e.isForOfStatement=function(e){return 216===e.kind},e.isContinueStatement=function(e){return 217===e.kind},e.isBreakStatement=function(e){return 218===e.kind},e.isReturnStatement=function(e){return 219===e.kind},e.isWithStatement=function(e){return 220===e.kind},e.isSwitchStatement=function(e){return 221===e.kind},e.isLabeledStatement=function(e){return 222===e.kind},e.isThrowStatement=function(e){return 223===e.kind},e.isTryStatement=function(e){return 224===e.kind},e.isDebuggerStatement=function(e){return 225===e.kind},e.isVariableDeclaration=function(e){return 226===e.kind},e.isVariableDeclarationList=function(e){return 227===e.kind},e.isFunctionDeclaration=function(e){return 228===e.kind},e.isClassDeclaration=function(e){return 229===e.kind},e.isInterfaceDeclaration=function(e){return 230===e.kind},e.isTypeAliasDeclaration=function(e){return 231===e.kind},e.isEnumDeclaration=function(e){return 232===e.kind},e.isModuleDeclaration=function(e){return 233===e.kind},e.isModuleBlock=function(e){return 234===e.kind},e.isCaseBlock=function(e){return 235===e.kind},e.isNamespaceExportDeclaration=function(e){return 236===e.kind},e.isImportEqualsDeclaration=function(e){return 237===e.kind},e.isImportDeclaration=function(e){return 238===e.kind},e.isImportClause=function(e){return 239===e.kind},e.isNamespaceImport=function(e){return 240===e.kind},e.isNamedImports=function(e){return 241===e.kind},e.isImportSpecifier=function(e){return 242===e.kind},e.isExportAssignment=function(e){return 243===e.kind},e.isExportDeclaration=function(e){return 244===e.kind},e.isNamedExports=function(e){return 245===e.kind},e.isExportSpecifier=function(e){return 246===e.kind},e.isMissingDeclaration=function(e){return 247===e.kind},e.isExternalModuleReference=function(e){return 248===e.kind},e.isJsxElement=function(e){return 249===e.kind},e.isJsxSelfClosingElement=function(e){return 250===e.kind},e.isJsxOpeningElement=function(e){return 251===e.kind},e.isJsxClosingElement=function(e){return 252===e.kind},e.isJsxAttribute=function(e){return 253===e.kind},e.isJsxAttributes=function(e){return 254===e.kind},e.isJsxSpreadAttribute=function(e){return 255===e.kind},e.isJsxExpression=function(e){return 256===e.kind},e.isCaseClause=function(e){return 257===e.kind},e.isDefaultClause=function(e){return 258===e.kind},e.isHeritageClause=function(e){return 259===e.kind},e.isCatchClause=function(e){return 260===e.kind},e.isPropertyAssignment=function(e){return 261===e.kind},e.isShorthandPropertyAssignment=function(e){return 262===e.kind},e.isSpreadAssignment=function(e){return 263===e.kind},e.isEnumMember=function(e){return 264===e.kind},e.isSourceFile=function(e){return 265===e.kind},e.isBundle=function(e){return 266===e.kind},e.isJSDocTypeExpression=function(e){return 267===e.kind},e.isJSDocAllType=function(e){return 268===e.kind},e.isJSDocUnknownType=function(e){return 269===e.kind},e.isJSDocNullableType=function(e){return 270===e.kind},e.isJSDocNonNullableType=function(e){return 271===e.kind},e.isJSDocOptionalType=function(e){return 272===e.kind},e.isJSDocFunctionType=function(e){return 273===e.kind},e.isJSDocVariadicType=function(e){return 274===e.kind},e.isJSDoc=function(e){return 275===e.kind},e.isJSDocAugmentsTag=function(e){return 277===e.kind},e.isJSDocParameterTag=function(e){return 279===e.kind},e.isJSDocReturnTag=function(e){return 280===e.kind},e.isJSDocTypeTag=function(e){return 281===e.kind},e.isJSDocTemplateTag=function(e){return 282===e.kind},e.isJSDocTypedefTag=function(e){return 283===e.kind},e.isJSDocPropertyTag=function(e){return 284===e.kind},e.isJSDocPropertyLikeTag=function(e){return 284===e.kind||279===e.kind},e.isJSDocTypeLiteral=function(e){return 285===e.kind}}(ts=ts||{}),function(n){function t(e){return 143<=e}function o(e){return 8<=e&&e<=13}function r(e){switch(e){case 117:case 120:case 76:case 124:case 79:case 84:case 114:case 112:case 113:case 131:case 115:return!0}return!1}function i(e){return e&&a(e.kind)}function s(e){switch(e){case 228:case 151:case 152:case 153:case 154:case 186:case 187:return!0;default:return!1}}function a(e){switch(e){case 150:case 155:case 156:case 157:case 160:case 273:case 161:return!0;default:return s(e)}}function l(e){switch(e.kind){case 174:case 178:return!0}return!1}function c(e){switch(e.kind){case 175:case 177:return!0}return!1}function u(e){switch(e){case 179:case 180:case 182:case 181:case 249:case 250:case 183:case 177:case 185:case 178:case 199:case 186:case 71:case 12:case 8:case 9:case 13:case 196:case 86:case 95:case 99:case 101:case 97:case 203:case 204:case 91:return!0;default:return!1}}function d(e){switch(e){case 192:case 193:case 188:case 189:case 190:case 191:case 184:return!0;default:return u(e)}}function p(e){var t=n.skipPartiallyEmittedExpressions(e).kind;switch(t){case 195:case 197:case 187:case 194:case 198:case 202:case 200:case 289:case 288:return!0;default:return d(t)}}function g(e){return 288===e.kind}function h(e){return 287===e.kind}function _(e){return 228===e||247===e||229===e||230===e||231===e||232===e||233===e||238===e||237===e||244===e||243===e||236===e}function m(e){return 218===e||217===e||225===e||212===e||210===e||209===e||215===e||216===e||214===e||211===e||222===e||219===e||221===e||223===e||224===e||208===e||213===e||220===e||287===e||291===e||290===e}function f(e){return 276<=e.kind&&e.kind<=285}n.isSyntaxList=function(e){return 286===e.kind},n.isNode=function(e){return t(e.kind)},n.isNodeKind=t,n.isToken=function(e){return 0<=e.kind&&e.kind<=142},n.isNodeArray=function(e){return e.hasOwnProperty("pos")&&e.hasOwnProperty("end")},n.isLiteralKind=o,n.isLiteralExpression=function(e){return o(e.kind)},n.isTemplateLiteralKind=function(e){return 13<=e&&e<=16},n.isTemplateMiddleOrTemplateTail=function(e){e=e.kind;return 15===e||16===e},n.isStringTextContainingNode=function(e){switch(e.kind){case 9:case 14:case 15:case 16:case 13:return!0;default:return!1}},n.isGeneratedIdentifier=function(e){return n.isIdentifier(e)&&0<e.autoGenerateKind},n.isModifierKind=r,n.isModifier=function(e){return r(e.kind)},n.isEntityName=function(e){e=e.kind;return 143===e||71===e},n.isPropertyName=function(e){e=e.kind;return 71===e||9===e||8===e||144===e},n.isBindingName=function(e){e=e.kind;return 71===e||174===e||175===e},n.isFunctionLike=i,n.isFunctionLikeDeclaration=function(e){return e&&s(e.kind)},n.isFunctionLikeKind=a,n.isFunctionOrModuleBlock=function(e){return n.isSourceFile(e)||n.isModuleBlock(e)||n.isBlock(e)&&i(e.parent)},n.isClassElement=function(e){e=e.kind;return 152===e||149===e||151===e||153===e||154===e||157===e||206===e||247===e},n.isClassLike=function(e){return e&&(229===e.kind||199===e.kind)},n.isAccessor=function(e){return e&&(153===e.kind||154===e.kind)},n.isTypeElement=function(e){e=e.kind;return 156===e||155===e||148===e||150===e||157===e||247===e},n.isObjectLiteralElementLike=function(e){e=e.kind;return 261===e||262===e||263===e||151===e||153===e||154===e||247===e},n.isTypeNode=function(e){return 158<=(e=e.kind)&&e<=173||119===e||133===e||134===e||122===e||136===e||137===e||99===e||105===e||139===e||95===e||130===e||201===e||268===e||269===e||270===e||271===e||272===e||273===e||274===e},n.isFunctionOrConstructorTypeNode=function(e){switch(e.kind){case 160:case 161:return!0}return!1},n.isBindingPattern=function(e){return!!e&&(175===(e=e.kind)||174===e)},n.isAssignmentPattern=function(e){e=e.kind;return 177===e||178===e},n.isArrayBindingElement=function(e){e=e.kind;return 176===e||200===e},n.isDeclarationBindingElement=function(e){switch(e.kind){case 226:case 146:case 176:return!0}return!1},n.isBindingOrAssignmentPattern=function(e){return l(e)||c(e)},n.isObjectBindingOrAssignmentPattern=l,n.isArrayBindingOrAssignmentPattern=c,n.isPropertyAccessOrQualifiedName=function(e){e=e.kind;return 179===e||143===e},n.isCallLikeExpression=function(e){switch(e.kind){case 251:case 250:case 181:case 182:case 183:case 147:return!0;default:return!1}},n.isCallOrNewExpression=function(e){return 181===e.kind||182===e.kind},n.isTemplateLiteral=function(e){e=e.kind;return 196===e||13===e},n.isLeftHandSideExpression=function(e){return u(n.skipPartiallyEmittedExpressions(e).kind)},n.isUnaryExpression=function(e){return d(n.skipPartiallyEmittedExpressions(e).kind)},n.isUnaryExpressionWithWrite=function(e){switch(e.kind){case 193:return!0;case 192:return 43===e.operator||44===e.operator;default:return!1}},n.isExpression=p,n.isAssertionExpression=function(e){e=e.kind;return 184===e||202===e},n.isPartiallyEmittedExpression=g,n.isNotEmittedStatement=h,n.isNotEmittedOrPartiallyEmittedNode=function(e){return h(e)||g(e)},n.isIterationStatement=function e(t,n){switch(t.kind){case 214:case 215:case 216:case 212:case 213:return!0;case 222:return n&&e(t.statement,n)}return!1},n.isForInOrOfStatement=function(e){return 215===e.kind||216===e.kind},n.isConciseBody=function(e){return n.isBlock(e)||p(e)},n.isFunctionBody=function(e){return n.isBlock(e)},n.isForInitializer=function(e){return n.isVariableDeclarationList(e)||p(e)},n.isModuleBody=function(e){e=e.kind;return 234===e||233===e||71===e},n.isNamespaceBody=function(e){e=e.kind;return 234===e||233===e},n.isJSDocNamespaceBody=function(e){e=e.kind;return 71===e||233===e},n.isNamedImportBindings=function(e){e=e.kind;return 241===e||240===e},n.isModuleOrEnumDeclaration=function(e){return 233===e.kind||232===e.kind},n.isDeclaration=function(e){return 145===e.kind?282!==e.parent.kind||n.isInJavaScriptFile(e):187===(e=e.kind)||176===e||229===e||199===e||152===e||232===e||264===e||246===e||228===e||186===e||153===e||239===e||237===e||242===e||230===e||253===e||151===e||150===e||233===e||236===e||240===e||146===e||261===e||149===e||148===e||154===e||262===e||231===e||145===e||226===e||283===e},n.isDeclarationStatement=function(e){return _(e.kind)},n.isStatementButNotDeclaration=function(e){return m(e.kind)},n.isStatement=function(e){var t=e.kind;return m(t)||_(t)||207===e.kind&&(void 0===e.parent||224!==e.parent.kind&&260!==e.parent.kind)&&!n.isFunctionBlock(e)},n.isModuleReference=function(e){e=e.kind;return 248===e||143===e||71===e},n.isJsxTagNameExpression=function(e){e=e.kind;return 99===e||71===e||179===e},n.isJsxChild=function(e){e=e.kind;return 249===e||256===e||250===e||10===e},n.isJsxAttributeLike=function(e){e=e.kind;return 253===e||255===e},n.isStringLiteralOrJsxExpression=function(e){e=e.kind;return 9===e||256===e},n.isJsxOpeningLikeElement=function(e){e=e.kind;return 251===e||250===e},n.isCaseOrDefaultClause=function(e){e=e.kind;return 257===e||258===e},n.isJSDocNode=function(e){return 267<=e.kind&&e.kind<=285},n.isJSDocCommentContainingNode=function(e){return 275===e.kind||f(e)},n.isJSDocTag=f,n.isSetAccessor=function(e){return 154===e.kind},n.isGetAccessor=function(e){return 153===e.kind},n.hasJSDocNodes=function(e){return!!e.jsDoc&&0<e.jsDoc.length}}(ts=ts||{}),function(D){var o,r,c,u,T,p,e,g,h,_,m,f,y,X,N,w,$,Y,q,l,k,J,O,Q,s;function i(e,t){return t&&e(t)}function a(e,t,n){if(n){if(t)return t(n);for(var o=0,r=n;o<r.length;o++){var i=e(r[o]);if(i)return i}}}function E(e,t,n){if(e&&!(e.kind<=142))switch(e.kind){case 143:return i(t,e.left)||i(t,e.right);case 145:return i(t,e.name)||i(t,e.constraint)||i(t,e.default)||i(t,e.expression);case 262:return a(t,n,e.decorators)||a(t,n,e.modifiers)||i(t,e.name)||i(t,e.questionToken)||i(t,e.equalsToken)||i(t,e.objectAssignmentInitializer);case 263:return i(t,e.expression);case 146:case 149:case 148:case 261:case 226:case 176:return a(t,n,e.decorators)||a(t,n,e.modifiers)||i(t,e.propertyName)||i(t,e.dotDotDotToken)||i(t,e.name)||i(t,e.questionToken)||i(t,e.type)||i(t,e.initializer);case 160:case 161:case 155:case 156:case 157:return a(t,n,e.decorators)||a(t,n,e.modifiers)||a(t,n,e.typeParameters)||a(t,n,e.parameters)||i(t,e.type);case 151:case 150:case 152:case 153:case 154:case 186:case 228:case 187:return a(t,n,e.decorators)||a(t,n,e.modifiers)||i(t,e.asteriskToken)||i(t,e.name)||i(t,e.questionToken)||a(t,n,e.typeParameters)||a(t,n,e.parameters)||i(t,e.type)||i(t,e.equalsGreaterThanToken)||i(t,e.body);case 159:return i(t,e.typeName)||a(t,n,e.typeArguments);case 158:return i(t,e.parameterName)||i(t,e.type);case 162:return i(t,e.exprName);case 163:return a(t,n,e.members);case 164:return i(t,e.elementType);case 165:return a(t,n,e.elementTypes);case 166:case 167:return a(t,n,e.types);case 168:case 170:return i(t,e.type);case 171:return i(t,e.objectType)||i(t,e.indexType);case 172:return i(t,e.readonlyToken)||i(t,e.typeParameter)||i(t,e.questionToken)||i(t,e.type);case 173:return i(t,e.literal);case 174:case 175:case 177:return a(t,n,e.elements);case 178:return a(t,n,e.properties);case 179:return i(t,e.expression)||i(t,e.name);case 180:return i(t,e.expression)||i(t,e.argumentExpression);case 181:case 182:return i(t,e.expression)||a(t,n,e.typeArguments)||a(t,n,e.arguments);case 183:return i(t,e.tag)||i(t,e.template);case 184:return i(t,e.type)||i(t,e.expression);case 185:case 188:case 189:case 190:return i(t,e.expression);case 192:return i(t,e.operand);case 197:return i(t,e.asteriskToken)||i(t,e.expression);case 191:return i(t,e.expression);case 193:return i(t,e.operand);case 194:return i(t,e.left)||i(t,e.operatorToken)||i(t,e.right);case 202:return i(t,e.expression)||i(t,e.type);case 203:return i(t,e.expression);case 204:return i(t,e.name);case 195:return i(t,e.condition)||i(t,e.questionToken)||i(t,e.whenTrue)||i(t,e.colonToken)||i(t,e.whenFalse);case 198:return i(t,e.expression);case 207:case 234:return a(t,n,e.statements);case 265:return a(t,n,e.statements)||i(t,e.endOfFileToken);case 208:return a(t,n,e.decorators)||a(t,n,e.modifiers)||i(t,e.declarationList);case 227:return a(t,n,e.declarations);case 210:return i(t,e.expression);case 211:return i(t,e.expression)||i(t,e.thenStatement)||i(t,e.elseStatement);case 212:return i(t,e.statement)||i(t,e.expression);case 213:return i(t,e.expression)||i(t,e.statement);case 214:return i(t,e.initializer)||i(t,e.condition)||i(t,e.incrementor)||i(t,e.statement);case 215:return i(t,e.initializer)||i(t,e.expression)||i(t,e.statement);case 216:return i(t,e.awaitModifier)||i(t,e.initializer)||i(t,e.expression)||i(t,e.statement);case 217:case 218:return i(t,e.label);case 219:return i(t,e.expression);case 220:return i(t,e.expression)||i(t,e.statement);case 221:return i(t,e.expression)||i(t,e.caseBlock);case 235:return a(t,n,e.clauses);case 257:return i(t,e.expression)||a(t,n,e.statements);case 258:return a(t,n,e.statements);case 222:return i(t,e.label)||i(t,e.statement);case 223:return i(t,e.expression);case 224:return i(t,e.tryBlock)||i(t,e.catchClause)||i(t,e.finallyBlock);case 260:return i(t,e.variableDeclaration)||i(t,e.block);case 147:return i(t,e.expression);case 229:case 199:case 230:return a(t,n,e.decorators)||a(t,n,e.modifiers)||i(t,e.name)||a(t,n,e.typeParameters)||a(t,n,e.heritageClauses)||a(t,n,e.members);case 231:return a(t,n,e.decorators)||a(t,n,e.modifiers)||i(t,e.name)||a(t,n,e.typeParameters)||i(t,e.type);case 232:return a(t,n,e.decorators)||a(t,n,e.modifiers)||i(t,e.name)||a(t,n,e.members);case 264:return i(t,e.name)||i(t,e.initializer);case 233:return a(t,n,e.decorators)||a(t,n,e.modifiers)||i(t,e.name)||i(t,e.body);case 237:return a(t,n,e.decorators)||a(t,n,e.modifiers)||i(t,e.name)||i(t,e.moduleReference);case 238:return a(t,n,e.decorators)||a(t,n,e.modifiers)||i(t,e.importClause)||i(t,e.moduleSpecifier);case 239:return i(t,e.name)||i(t,e.namedBindings);case 236:case 240:return i(t,e.name);case 241:case 245:return a(t,n,e.elements);case 244:return a(t,n,e.decorators)||a(t,n,e.modifiers)||i(t,e.exportClause)||i(t,e.moduleSpecifier);case 242:case 246:return i(t,e.propertyName)||i(t,e.name);case 243:return a(t,n,e.decorators)||a(t,n,e.modifiers)||i(t,e.expression);case 196:return i(t,e.head)||a(t,n,e.templateSpans);case 205:return i(t,e.expression)||i(t,e.literal);case 144:return i(t,e.expression);case 259:return a(t,n,e.types);case 201:return i(t,e.expression)||a(t,n,e.typeArguments);case 248:return i(t,e.expression);case 247:return a(t,n,e.decorators);case 289:return a(t,n,e.elements);case 249:return i(t,e.openingElement)||a(t,n,e.children)||i(t,e.closingElement);case 250:case 251:return i(t,e.tagName)||i(t,e.attributes);case 254:return a(t,n,e.properties);case 253:return i(t,e.name)||i(t,e.initializer);case 255:return i(t,e.expression);case 256:return i(t,e.dotDotDotToken)||i(t,e.expression);case 252:return i(t,e.tagName);case 267:case 271:case 270:case 272:return i(t,e.type);case 273:return a(t,n,e.parameters)||i(t,e.type);case 274:return i(t,e.type);case 275:return a(t,n,e.tags);case 279:case 284:return e.isNameFirst?i(t,e.name)||i(t,e.typeExpression):i(t,e.typeExpression)||i(t,e.name);case 280:case 281:return i(t,e.typeExpression);case 277:return i(t,e.class);case 282:return a(t,n,e.typeParameters);case 283:return e.typeExpression&&267===e.typeExpression.kind?i(t,e.typeExpression)||i(t,e.fullName):i(t,e.fullName)||i(t,e.typeExpression);case 285:if(e.jsDocPropertyTags)for(var o=0,r=e.jsDocPropertyTags;o<r.length;o++)i(t,r[o]);return;case 288:return i(t,e.expression)}}function Z(e,t,r,i,s,a){function l(e){var t="";if(a&&ee(e)&&(t=i.substring(e.pos,e.end)),e._children&&(e._children=void 0),e.pos+=r,e.end+=r,a&&ee(e)&&D.Debug.assert(t===s.substring(e.pos,e.end)),E(e,l,c),D.hasJSDocNodes(e))for(var n=0,o=e.jsDoc;n<o.length;n++)E(o[n],l,c);ne(e,a)}function c(e){e._children=void 0,e.pos+=r,e.end+=r;for(var t=0,n=e;t<n.length;t++)l(n[t])}(t?c:l)(e)}function ee(e){switch(e.kind){case 9:case 8:case 71:return 1}}function te(e,t,n,o,r){D.Debug.assert(e.end>=t,"Adjusting an element that was entirely before the change range"),D.Debug.assert(e.pos<=n,"Adjusting an element that was entirely after the change range"),D.Debug.assert(e.pos<=e.end),e.pos=Math.min(e.pos,o),e.end>=n?e.end+=r:e.end=Math.min(e.end,o),D.Debug.assert(e.pos<=e.end),e.parent&&(D.Debug.assert(e.pos>=e.parent.pos),D.Debug.assert(e.end<=e.parent.end))}function ne(e,t){var n;t&&(n=e.pos,E(e,function(e){D.Debug.assert(e.pos>=n),n=e.end}),D.Debug.assert(n<=e.end))}function oe(e,n){var o,r=e;return E(e,function e(t){if(!D.nodeIsMissing(t))return t.pos<=n?(t.pos>=r.pos&&(r=t),n<t.end?(E(t,e),!0):(D.Debug.assert(t.end<=n),void(o=t))):(D.Debug.assert(t.pos>n),!0)}),r=o&&(e=function(e){for(;;){var t=function(e){var t=void 0;return E(e,function(e){D.nodeIsPresent(e)&&(t=e)}),t}(e);if(!t)return e;e=t}}(o)).pos>r.pos?e:r}function re(e,t,n,o){var r,e=e.text;n&&(D.Debug.assert(e.length-n.span.length+n.newLength===t.length),o||D.Debug.shouldAssert(3))&&(o=e.substr(0,n.span.start),r=t.substr(0,n.span.start),D.Debug.assert(o===r),o=e.substring(D.textSpanEnd(n.span),e.length),r=t.substring(D.textSpanEnd(D.textChangeRangeNewSpan(n)),t.length),D.Debug.assert(o===r))}function ie(e){return 4===e||2===e||1===e||6===e?1:0}function se(e,t,n,o){g=D.objectAllocator.getNodeConstructor(),h=D.objectAllocator.getTokenConstructor(),_=D.objectAllocator.getIdentifierConstructor(),m=D.objectAllocator.getSourceFileConstructor(),w=e,X=n,y=[],l=0,Y=D.createMap(),$=q=0,k=1===o||2===o||6===o?65536:0,s=!1,O.setText(w),O.setOnError(Ee),O.setScriptTarget(t),O.setLanguageVariant(ie(o))}function ae(){O.setText(""),O.setOnError(void 0),w=X=Y=f=y=void 0}function S(e){var t=D.getJSDocCommentRanges(e,f.text);if(t)for(var n=0,o=t;n<o.length;n++){var r=o[n],r=J.parseJSDocComment(e,r.pos,r.end-r.pos);r&&(e.jsDoc||(e.jsDoc=[]),e.jsDoc.push(r))}return e}function le(e){var s=e;E(e,function e(t){if(t.parent!==s){var n=t.parent=s;if(E(s=t,e),D.hasJSDocNodes(t))for(var o=0,r=t.jsDoc;o<r.length;o++){var i=r[o];i.parent=t,E(s=i,e)}s=n}})}function ce(e,t,n){var o=new m(265,0,w.length);return $++,o.text=w,o.bindDiagnostics=[],o.languageVersion=t,o.fileName=D.normalizePath(e),o.languageVariant=ie(n),o.isDeclarationFile=D.fileExtensionIs(o.fileName,".d.ts"),o.scriptKind=n,o}function ue(e,t){e?k|=t:k&=~t}function de(e){ue(e,2048)}function pe(e){ue(e,4096)}function ge(e){ue(e,8192)}function he(e){ue(e,16384)}function _e(e,t){var n,e=e&k;return e?(ue(!1,e),n=t(),ue(!0,e),n):t()}function me(e,t){var n,e=e&~k;return e?(ue(!0,e),n=t(),ue(!1,e),n):t()}function d(e){return _e(2048,e)}function fe(e){return me(16384,e)}function t(e){return 0!=(k&e)}function ye(){return t(4096)}function ke(){return t(2048)}function be(){return t(8192)}function ve(){return t(16384)}function Te(e,t){var n=O.getTokenPos();R(n,O.getTextPos()-n,e,t)}function R(e,t,n,o){var r=D.lastOrUndefined(y);r&&e===r.start||y.push(D.createFileDiagnostic(f,e,t,n,o)),s=!0}function Ee(e,t){R(O.getTextPos(),t||0,e)}function P(){return O.getStartPos()}function C(){return N=O.scan()}function Se(){return N=O.reScanGreaterToken()}function n(){N=O.scanJsxIdentifier()}function Ce(){N=O.scanJsxToken()}function xe(e,t){var n=N,o=y.length,r=s,i=k,e=t?O.lookAhead(e):O.tryScan(e);return D.Debug.assert(i===k),e&&!t||(N=n,y.length=o,s=r),e}function x(e){return xe(e,!0)}function L(e){return xe(e,!1)}function B(){return 71===N||(116!==N||!ye())&&(121!==N||!ve())&&107<N}function M(e,t,n){return void 0===n&&(n=!0),N===e?(n&&C(),!0):(t?Te(t):Te(D.Diagnostics._0_expected,D.tokenToString(e)),!1)}function F(e){return N===e&&(C(),!0)}function U(e){if(N===e)return b()}function Be(e,t,n,o){return U(e)||Ie(e,t,n,o)}function b(){var e=H(N);return C(),W(e)}function Ae(){return 25===N||18===N||1===N||O.hasPrecedingLineBreak()}function A(){Ae()?25===N&&C():M(25)}function H(e,t){return $++,0<=t||(t=O.getStartPos()),new(D.isNodeKind(e)?g:71===e?_:h)(e,t,t)}function V(e,t,n){var o=e.length,o=1<=o&&o<=4?e.slice():e;return o.pos=t,o.end=void 0===n?O.getStartPos():n,o}function W(e,t){return e.end=void 0===t?O.getStartPos():t,k&&(e.flags|=k),s&&(s=!1,e.flags|=32768),e}function Ie(e,t,n,o){t?R(O.getStartPos(),0,n,o):Te(n,o);t=H(e,O.getStartPos());return 71===e?t.escapedText="":(D.isLiteralKind(e)||D.isTemplateLiteralKind(e))&&(t.text=""),W(t)}function De(e){var t=Y.get(e);return void 0===t&&Y.set(e,t=e),t}function Ne(e,t){return q++,e?(e=H(71),71!==N&&(e.originalKeywordKind=N),e.escapedText=D.escapeLeadingUnderscores(De(O.getTokenValue())),C(),W(e)):Ie(71,1===N,t||D.Diagnostics.Identifier_expected)}function I(e){return Ne(B(),e)}function we(e){return Ne(D.tokenIsIdentifierOrKeyword(N),e)}function Oe(){return D.tokenIsIdentifierOrKeyword(N)||9===N||8===N}function Re(){return e=!0,9===N||8===N?((t=ot()).text=De(t.text),t):e&&21===N?(t=H(144),M(21),t.expression=d(j),M(22),W(t)):we();var e,t}function Pe(e){return N===e&&L(Me)}function Le(){return C(),!O.hasPrecedingLineBreak()&&Fe()}function Me(){return 76===N?83===C():84===N?(C(),79===N?x(Ue):39!==N&&118!==N&&17!==N&&Fe()):(79===N?Ue:115===N?(C(),Fe):Le)()}function Fe(){return 21===N||17===N||39===N||24===N||Oe()}function Ue(){return C(),75===N||89===N||109===N||117===N&&x(Tn)||120===N&&x(En)}function He(e,t){if(Ye(e))return 1;switch(e){case 0:case 1:case 3:return(25!==N||!t)&&Bn();case 2:return 73===N||79===N;case 4:return x(kt);case 5:return x(Kn)||25===N&&!t;case 6:return 21===N||Oe();case 12:return 21===N||39===N||24===N||Oe();case 17:return Oe();case 9:return 21===N||24===N||Oe();case 7:return 17===N?x(Ve):t?B()&&!Ke():Ut()&&!Ke();case 8:return On();case 10:return 26===N||24===N||On();case 18:return B();case 11:case 15:return 26===N||24===N||Ht();case 16:return dt();case 19:case 20:return 26===N||It();case 21:return to();case 22:return D.tokenIsIdentifierOrKeyword(N);case 13:return D.tokenIsIdentifierOrKeyword(N)||17===N;case 14:return 1}D.Debug.fail("Non-exhaustive case in 'isListElement'.")}function Ve(){var e;return D.Debug.assert(17===N),18!==C()||26===(e=C())||17===e||85===e||108===e}function We(){return C(),B()}function Ge(){return C(),D.tokenIsIdentifierOrKeyword(N)}function Ke(){return(108===N||85===N)&&x(je)}function je(){return C(),Ht()}function ze(e){if(1===N)return 1;switch(e){case 1:case 2:case 4:case 5:case 6:case 12:case 9:case 22:return 18===N;case 3:return 18===N||73===N||79===N;case 7:return 17===N||85===N||108===N;case 8:return Ae()||Yt(N)||36===N;case 18:return 29===N||19===N||17===N||85===N||108===N;case 11:return 20===N||25===N;case 15:case 20:case 10:return 22===N;case 16:case 17:return 20===N||22===N;case 19:return 26!==N;case 21:return 17===N||18===N;case 13:return 29===N||41===N;case 14:return 27===N&&x(so)}}function Xe(e,t){var n=l;l|=1<<e;for(var o=[],r=P();!ze(e);)if(He(e,!1)){var i=$e(e,t);o.push(i)}else if(qe(e))break;return l=n,V(o,r)}function $e(e,t){var e=Ye(e);return e?(e=e,O.setTextPos(e.end),C(),e):t()}function Ye(n){if(!s&&X){var e=X.currentNode(O.getStartPos());if(!D.nodeIsMissing(e)&&!e.intersectsChange&&!D.containsParseError(e)&&(96256&e.flags)===k&&function(e){switch(n){case 5:var t=e;if(t)switch(t.kind){case 152:case 157:case 153:case 154:case 149:case 206:return 1;case 151:return 71!==t.name.kind||123!==t.name.originalKeywordKind}return;case 2:if(e)switch(e.kind){case 257:case 258:return 1}return;case 0:case 1:case 3:if(e)switch(e.kind){case 228:case 208:case 207:case 211:case 210:case 223:case 219:case 221:case 218:case 217:case 215:case 216:case 214:case 213:case 220:case 209:case 224:case 222:case 212:case 225:case 238:case 237:case 244:case 243:case 233:case 229:case 230:case 232:case 231:return 1}return;case 6:return 264===e.kind;case 4:if(e)switch(e.kind){case 156:case 150:case 157:case 148:case 155:return 1}return;case 8:return 226===e.kind&&void 0===e.initializer;case 16:return 146===e.kind&&void 0===e.initializer;case 17:return}}(e))return e}}function qe(e){return Te(function(){switch(e){case 0:case 1:return D.Diagnostics.Declaration_or_statement_expected;case 2:return D.Diagnostics.case_or_default_expected;case 3:return D.Diagnostics.Statement_expected;case 17:case 4:return D.Diagnostics.Property_or_signature_expected;case 5:return D.Diagnostics.Unexpected_token_A_constructor_method_accessor_or_property_was_expected;case 6:return D.Diagnostics.Enum_member_expected;case 7:return D.Diagnostics.Expression_expected;case 8:return D.Diagnostics.Variable_declaration_expected;case 9:return D.Diagnostics.Property_destructuring_pattern_expected;case 10:return D.Diagnostics.Array_element_destructuring_pattern_expected;case 11:return D.Diagnostics.Argument_expression_expected;case 12:return D.Diagnostics.Property_assignment_expected;case 15:return D.Diagnostics.Expression_or_comma_expected;case 16:return D.Diagnostics.Parameter_declaration_expected;case 18:return D.Diagnostics.Type_parameter_declaration_expected;case 19:return D.Diagnostics.Type_argument_expected;case 20:return D.Diagnostics.Type_expected;case 21:return D.Diagnostics.Unexpected_token_expected;case 22:case 13:case 14:return D.Diagnostics.Identifier_expected}}()),function(){for(var e=0;e<23;e++)if(l&1<<e&&(He(e,!0)||ze(e)))return 1}()||(C(),0)}function G(e,t,n){var o=l;l|=1<<e;for(var r=[],i=P(),s=-1;;)if(He(e,!1)){var a=O.getStartPos();if(r.push($e(e,t)),s=O.getTokenPos(),F(26))continue;if(s=-1,ze(e))break;M(26),n&&25===N&&!O.hasPrecedingLineBreak()&&C(),a===O.getStartPos()&&C()}else{if(ze(e))break;if(qe(e))break}l=o;o=V(r,i);return 0<=s&&(o.hasTrailingComma=!0),o}function Je(){return V([],P())}function Qe(e,t,n,o){return M(n)?(n=G(e,t),M(o),n):Je()}function Ze(e,t){for(var n=(e?we:I)(t),o=O.getStartPos();F(23);){if(27===N){n.jsdocDotPos=o;break}o=O.getStartPos(),n=et(n,tt(e))}return n}function et(e,t){var n=H(143,e.pos);return n.left=e,n.right=t,W(n)}function tt(e){return O.hasPrecedingLineBreak()&&D.tokenIsIdentifierOrKeyword(N)&&x(vn)?Ie(71,!0,D.Diagnostics.Identifier_expected):(e?we:I)()}function nt(){for(var e,t,n=H(196),o=(n.head=(r=rt(N),D.Debug.assert(14===r.kind,"Template head has wrong token kind"),r),D.Debug.assert(14===n.head.kind,"Template head has wrong token kind"),[]),r=P();o.push((t=e=void 0,(t=H(205)).expression=d(j),e=18===N?(N=O.reScanTemplateToken(),e=rt(N),D.Debug.assert(15===e.kind||16===e.kind,"Template fragment has wrong token kind"),e):Be(16,!1,D.Diagnostics._0_expected,D.tokenToString(18)),t.literal=e,W(t))),15===D.lastOrUndefined(o).literal.kind;);return n.templateSpans=V(o,r),W(n)}function ot(){return rt(N)}function rt(e){var e=H(e),t=O.getTokenValue();return e.text=t,O.hasExtendedUnicodeEscape()&&(e.hasExtendedUnicodeEscape=!0),O.isUnterminated()&&(e.isUnterminated=!0),8===e.kind&&(e.numericLiteralFlags=O.getNumericLiteralFlags()),C(),W(e),e}function it(){var e=H(159);return e.typeName=Ze(!0,D.Diagnostics.Type_expected),O.hasPrecedingLineBreak()||27!==N||(e.typeArguments=Qe(19,K,27,29)),W(e)}function st(){var e=H(146);return 99!==N&&94!==N||(e.name=we(),M(56)),e.type=K(),W(e)}function at(e){e=H(e);return C(),e.type=At(),W(e)}function lt(){var e=H(145);return e.name=I(),F(85)&&(It()||!Ht()?e.constraint=K():e.expression=Zt()),F(58)&&(e.default=K()),W(e)}function ct(){if(27===N)return Qe(18,lt,27,29)}function ut(){if(F(56))return K()}function dt(){return 24===N||On()||D.isModifierKind(N)||57===N||It(!0)}function pt(e){var t=H(146);return 99===N?(t.name=Ne(!0),t.type=ut(),W(t)):(t.decorators=jn(),t.modifiers=zn(),t.dotDotDotToken=U(24),t.name=Rn(),0===D.getFullWidth(t.name)&&!D.hasModifiers(t)&&D.isModifierKind(N)&&C(),t.questionToken=U(55),t.type=ut(),t.initializer=Vt(!0,e),S(W(t)))}function gt(e,t,n){var o,r,i,s;32&t||(n.typeParameters=ct()),n.parameters=(o=t,M(19)?(r=ye(),i=ve(),pe(!!(1&o)),he(!!(2&o)),s=G(16,32&o?st:function(){return pt(!!(8&o))}),pe(r),he(i),!M(20)&&8&o?void 0:s):8&o?void 0:Je()),n.type=(r=!!(4&t),(36===(i=e)?(M(i),1):F(56)||r&&36===N&&(Te(D.Diagnostics._0_expected,D.tokenToString(56)),C(),1))?(i=B()&&L(Lt),r=K(),i?((s=H(158,i.pos)).parameterName=i,s.type=r,W(s)):r):void 0)}function ht(){F(26)||A()}function _t(e){var t=H(e);return 156===e&&M(94),gt(56,4,t),ht(),S(W(t))}function mt(){return 21===N&&x(ft)}function ft(){if(C(),24===N||22===N)return!0;if(D.isModifierKind(N)){if(C(),B())return!0}else{if(!B())return!1;C()}return 56===N||26===N||55===N&&(C(),56===N||26===N||22===N)}function yt(e,t,n){e=H(157,e);return e.decorators=t,e.modifiers=n,e.parameters=Qe(16,pt,21,22),e.type=Ft(),ht(),S(W(e))}function kt(){if(19===N||27===N)return!0;for(var e;D.isModifierKind(N);)e=!0,C();return 21===N||(Oe()&&(e=!0,C()),!!e&&(19===N||27===N||55===N||56===N||26===N||Ae()))}function bt(){var e,t,n,o,r;return 19===N||27===N?_t(155):94===N&&x(vt)?_t(156):(e=P(),t=zn(),mt()?yt(e,void 0,t):(e=e,t=t,o=Re(),r=U(55),19===N||27===N?((n=H(150,e)).modifiers=t,n.name=o,n.questionToken=r,gt(56,4,n)):((n=H(148,e)).modifiers=t,n.name=o,n.questionToken=r,n.type=Ft(),58===N&&(n.initializer=Wn())),ht(),S(W(n))))}function vt(){return C(),19===N||27===N}function Tt(){var e;return M(17)?(e=Xe(4,bt),M(18)):e=Je(),e}function Et(){return C(),131===N&&C(),21===N&&We()&&92===C()}function St(e){var t=H(e);return 161===e&&M(94),gt(36,4,t),S(W(t))}function Ct(){var e=b();return 23===N?void 0:e}function xt(e){var t,n=H(173),o=(e&&((t=H(192)).operator=38,C()),101===N||86===N?b():rt(N));return e&&(t.operand=o,W(t),o=t),n.literal=o,W(n)}function Bt(){return 8===C()}function At(){switch(N){case 119:case 136:case 133:case 122:case 137:case 139:case 130:case 134:return L(Ct)||it();case 39:return s=H(268),C(),W(s);case 55:return s=O.getStartPos(),C(),26===N||18===N||20===N||29===N||58===N||49===N?W(i=H(269,s)):((i=H(270,s)).type=K(),W(i));case 89:return x(io)?(r=H(273),C(),gt(56,36,r),S(W(r))):((r=H(159)).typeName=we(),W(r));case 24:return at(274);case 51:return at(271);case 13:case 9:case 8:case 101:case 86:return xt();case 38:return x(Bt)?xt(!0):it();case 105:case 95:return b();case 99:i=H(169),C();r=W(i);return 126!==N||O.hasPrecedingLineBreak()?r:(n=r,C(),(o=H(158,n.pos)).parameterName=n,o.type=K(),W(o));case 103:return n=H(162),M(103),n.exprName=Ze(!0),W(n);case 17:return x(Et)?(o=H(172),M(17),o.readonlyToken=U(131),M(21),o.typeParameter=((t=H(145)).name=I(),M(92),t.constraint=K(),W(t)),M(22),o.questionToken=U(55),o.type=Ft(),A(),M(18),W(o)):((t=H(163)).members=Tt(),W(t));case 21:return(e=H(165)).elementTypes=Qe(20,K,21,22),W(e);case 19:return e=H(168),M(19),e.type=K(),M(20),W(e);default:return it()}var e,t,n,o,r,i,s}function It(e){switch(N){case 119:case 136:case 133:case 122:case 137:case 105:case 139:case 95:case 99:case 103:case 130:case 17:case 21:case 27:case 49:case 48:case 94:case 9:case 8:case 101:case 86:case 134:case 39:case 55:case 51:case 24:return!0;case 38:return!e&&x(Bt);case 19:return!e&&x(Dt);default:return B()}}function Dt(){return C(),20===N||dt()||It()}function Nt(e,t){C();e=H(e,t.pos);return e.type=t,W(e)}function wt(){if(127===N)return e=H(170),M(127),e.operator=127,e.type=wt(),W(e);for(var e,t,n=At();!O.hasPrecedingLineBreak();)switch(N){case 58:if(!(1048576&k))return n;n=Nt(272,n);break;case 51:n=Nt(271,n);break;case 55:n=Nt(270,n);break;case 21:M(21),n=(It()?((t=H(171,n.pos)).objectType=n,t.indexType=K()):(t=H(164,n.pos)).elementType=n,M(22),W(t));break;default:return n}return n}function Ot(e,t,n){F(n);var o=t();if(N===n){for(var r=[o];F(n);)r.push(t());e=H(e,o.pos);e.types=V(r,o.pos),o=W(e)}return o}function Rt(){return Ot(167,wt,48)}function Pt(){if(C(),20===N||24===N)return!0;if(D.isModifierKind(N)&&zn(),B()||99===N?(C(),1):21===N||17===N?(e=y.length,Rn(),e===y.length):void 0){if(56===N||26===N||55===N||58===N)return!0;if(20===N&&(C(),36===N))return!0}var e;return!1}function Lt(){var e=I();if(126===N&&!O.hasPrecedingLineBreak())return C(),e}function K(){return _e(20480,Mt)}function Mt(){return 27===N||19===N&&x(Pt)?St(160):94===N?St(161):Ot(166,Rt,49)}function Ft(){return F(56)?K():void 0}function Ut(){switch(N){case 99:case 97:case 95:case 101:case 86:case 8:case 9:case 13:case 14:case 19:case 21:case 17:case 89:case 75:case 94:case 41:case 63:case 71:return!0;case 91:return x(vt);default:return B()}}function Ht(){if(Ut())return!0;switch(N){case 37:case 38:case 52:case 51:case 80:case 103:case 105:case 43:case 44:case 27:case 121:case 116:return!0;default:return!(ke()&&92===N||!(0<Jt()))||B()}}function j(){var e=be();e&&ge(!1);for(var t,n=z();t=U(26);)n=Qt(n,t,z());return e&&ge(!0),n}function Vt(e,t){if(58!==N){if(O.hasPrecedingLineBreak()||e&&17===N||!Ht())return;if(e&&t)return(e=Ie(71,!0,D.Diagnostics._0_expected,"=")).escapedText="= not found",e}return M(58),z()}function z(){var e,t,n;return 116===N&&(ye()||x(Sn))?(e=H(197),C(),O.hasPrecedingLineBreak()||39!==N&&!Ht()||(e.asteriskToken=U(39),e.expression=z()),W(e)):function(){var e=19===N||27===N||120===N?x(Gt):36===N?1:0;if(0!==e){var t,n,e=1===e?zt(!0):L(Kt);if(e)return t=D.hasModifier(e,256),n=N,e.equalsGreaterThanToken=Be(36,!1,D.Diagnostics._0_expected,"=>"),e.body=36===n||17===n?Xt(t):I(),S(W(e))}}()||function(){var e;if(120===N&&1===x(jt))return e=Xn(),Wt($t(0),e)}()||(71===(e=$t(0)).kind&&36===N?Wt(e):D.isLeftHandSideExpression(e)&&D.isAssignmentOperator(Se())?Qt(e,b(),z()):(e=e,(n=U(55))?((t=H(195,e.pos)).condition=e,t.questionToken=n,t.whenTrue=_e(Q,z),t.colonToken=Be(56,!1,D.Diagnostics._0_expected,D.tokenToString(56)),t.whenFalse=z(),W(t)):e))}function Wt(e,t){D.Debug.assert(36===N,"parseSimpleArrowFunctionExpression should only have been called if we had a =>"),t?(n=H(187,t.pos)).modifiers=t:n=H(187,e.pos);var n,o=H(146,e.pos);return o.name=e,W(o),n.parameters=V([o],o.pos,o.end),n.equalsGreaterThanToken=Be(36,!1,D.Diagnostics._0_expected,"=>"),n.body=Xt(!!t),S(W(n))}function Gt(){if(120===N){if(C(),O.hasPrecedingLineBreak())return 0;if(19!==N&&27!==N)return 0}var e=N,t=C();if(19!==e)return D.Debug.assert(27===e),B()?1===f.languageVariant?x(function(){var e=C();if(85===e)switch(C()){case 58:case 29:return!1;default:return!0}else if(26===e)return!0;return!1})?1:0:2:0;if(20===t)switch(C()){case 36:case 56:case 17:return 1;default:return 0}return 21===t||17===t?2:24===t?1:B()?56===C()?1:2:0}function Kt(){return zt(!1)}function jt(){if(120===N){if(C(),O.hasPrecedingLineBreak()||36===N)return 0;var e=$t(0);if(!O.hasPrecedingLineBreak()&&71===e.kind&&36===N)return 1}return 0}function zt(e){var t=H(187);if(t.modifiers=Xn(),gt(56,(D.hasModifier(t,256)?2:0)|(e?0:8),t),t.parameters&&(e||!(36!==N&&17!==N||D.find(t.parameters,function(e){return e.initializer&&D.isIdentifier(e.initializer)&&"= not found"===e.initializer.escapedText}))))return t}function Xt(e){return 17===N?yn(e?2:0):25===N||89===N||75===N||!Bn()||17!==N&&89!==N&&75!==N&&57!==N&&Ht()?e?fe(z):_e(16384,z):yn(16|(e?2:0))}function $t(e){return qt(e,Zt())}function Yt(e){return 92===e||142===e}function qt(e,t){for(;;){Se();var n=Jt();if(!(40===N?e<=n:e<n))break;if(92===N&&ke())break;if(118===N){if(O.hasPrecedingLineBreak())break;C(),o=t,r=K(),i=void 0,(i=H(202,o.pos)).expression=o,i.type=r,t=W(i)}else t=Qt(t,b(),$t(n))}var o,r,i;return t}function Jt(){switch(N){case 54:return 1;case 53:return 2;case 49:return 3;case 50:return 4;case 48:return 5;case 32:case 33:case 34:case 35:return 6;case 27:case 29:case 30:case 31:case 93:case 92:case 118:return 7;case 45:case 46:case 47:return 8;case 37:case 38:return 9;case 39:case 41:case 42:return 10;case 40:return 11}return-1}function Qt(e,t,n){var o=H(194,e.pos);return o.left=e,o.operatorToken=t,o.right=n,W(o)}function Zt(){var e,t,n;return function(){switch(N){case 37:case 38:case 52:case 51:case 80:case 103:case 105:case 121:return;case 27:if(1!==f.languageVariant)return;default:return 1}}()?(e=en(),40===N?qt(Jt(),e):e):(e=N,t=function t(){switch(N){case 37:case 38:case 52:case 51:return(e=H(192)).operator=N,C(),e.operand=t(),W(e);case 80:return function(){var e=H(188);return C(),e.expression=t(),W(e)}();case 103:return function(){var e=H(189);return C(),e.expression=t(),W(e)}();case 105:return function(){var e=H(190);return C(),e.expression=t(),W(e)}();case 27:return function(){var e=H(184);return M(27),e.type=K(),M(29),e.expression=t(),W(e)}();case 121:if(121===N&&(ve()||x(Sn)))return function(){var e=H(191);return C(),e.expression=t(),W(e)}();default:return en()}var e}(),40===N&&(n=D.skipTrivia(w,t.pos),184===t.kind?R(n,t.end-n,D.Diagnostics.A_type_assertion_expression_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses):R(n,t.end-n,D.Diagnostics.An_unary_expression_with_the_0_operator_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses,D.tokenToString(e))),t)}function en(){var e,t;return 43===N||44===N?((e=H(192)).operator=N,C(),e.operand=tn(),W(e)):1===f.languageVariant&&27===N&&x(Ge)?nn(!0):(t=tn(),D.Debug.assert(D.isLeftHandSideExpression(t)),43!==N&&44!==N||O.hasPrecedingLineBreak()?t:((e=H(193,t.pos)).operand=t,e.operator=N,C(),W(e)))}function tn(){for(var e,t=91===N&&x(vt)?(f.flags|=524288,b()):97===N?(t=b(),19===N||23===N||21===N?t:((e=H(179,t.pos)).expression=t,Be(23,!1,D.Diagnostics.super_must_be_followed_by_an_argument_list_or_member_access),e.name=tt(!0),W(e))):function n(){return an(function(){switch(N){case 8:case 9:case 13:return ot();case 99:case 97:case 95:case 101:case 86:return b();case 19:return e=H(185),M(19),e.expression=d(j),M(20),S(W(e));case 21:return function(){var e=H(177);return M(21),O.hasPrecedingLineBreak()&&(e.multiLine=!0),e.elements=G(15,un),M(22),W(e)}();case 17:return hn();case 120:if(x(En))return _n();break;case 75:return qn(O.getStartPos(),void 0,void 0,199);case 89:return _n();case 94:return function(){var e,t=O.getStartPos();return M(94),F(23)?((e=H(204,t)).keywordToken=94,e.name=we()):((e=H(182,t)).expression=n(),e.typeArguments=L(cn),!e.typeArguments&&19!==N||(e.arguments=ln())),W(e)}();case 41:case 63:if(12===(N=O.reScanSlashToken()))return ot();break;case 14:return nt()}var e;return I(D.Diagnostics.Expression_expected)}())}(),n=t;;){if(n=an(n),27!==N){if(19!==N)return n;(o=H(181,n.pos)).expression=n}else{var o,r=L(cn);if(!r)return n;(o=H(181,n.pos)).expression=n,o.typeArguments=r}o.arguments=ln(),n=W(o)}}function nn(e){n=e,t=O.getStartPos(),M(27),i=on(),(r=H(254)).properties=Xe(13,sn),r=W(r),29===N?(o=H(251,t),Ce()):(M(41),n?M(29):(M(29,void 0,!1),Ce()),o=H(250,t)),o.tagName=i,o.attributes=r;var t,n=W(o),o=251===n.kind?((t=H(249,n.pos)).openingElement=n,t.children=function(e){var t=[],n=P(),o=l;for(l|=16384;28!==(N=O.reScanJsxToken());){if(1===N){R(e.pos,e.end-e.pos,D.Diagnostics.JSX_element_0_has_no_corresponding_closing_tag,D.getTextOfNodeFromSourceText(w,e));break}if(7===N)break;var r=function(){switch(N){case 10:case 11:return(e=H(10,O.getStartPos())).containsOnlyWhiteSpaces=11===N,N=O.scanJsxToken(),W(e);case 17:return rn(!1);case 27:return nn(!1)}var e;D.Debug.fail("Unknown JSX child kind "+N)}();r&&t.push(r)}return l=o,V(t,n)}(t.openingElement.tagName),t.closingElement=(i=e,r=H(252),M(28),r.tagName=on(),i?M(29):(M(29,void 0,!1),Ce()),W(r)),function e(t,n){return t.kind===n.kind&&(71===t.kind?t.escapedText===n.escapedText:99===t.kind||t.name.escapedText===n.name.escapedText&&e(t.expression,n.expression))}(t.openingElement.tagName,t.closingElement.tagName)||R(t.closingElement.pos,t.closingElement.end-t.closingElement.pos,D.Diagnostics.Expected_corresponding_JSX_closing_tag_for_0,D.getTextOfNodeFromSourceText(w,t.openingElement.tagName)),W(t)):(D.Debug.assert(250===n.kind),n);if(e&&27===N){var r,i=L(function(){return nn(!0)});if(i)return Te(D.Diagnostics.JSX_expressions_must_have_one_parent_element),(r=H(194,o.pos)).end=i.end,r.left=o,r.right=i,r.operatorToken=Ie(26,!1,void 0),r.operatorToken.pos=r.operatorToken.end=r.right.pos,r}return o}function on(){n();for(var e=(99===N?b:we)();F(23);){var t=H(179,e.pos);t.expression=e,t.name=tt(!0),e=W(t)}return e}function rn(e){var t=H(256);return M(17),18!==N&&(t.dotDotDotToken=U(24),t.expression=z()),e?M(18):(M(18,void 0,!1),Ce()),W(t)}function sn(){var e;return 17===N?(e=H(255),M(17),M(24),e.expression=j(),M(18)):(n(),(e=H(253)).name=we(),58===N&&(9===(N=O.scanJsxAttributeValue())?e.initializer=ot():e.initializer=rn(!0))),W(e)}function an(e){for(;;)if(U(23)){var t=H(179,e.pos);t.expression=e,t.name=tt(!0),e=W(t)}else if(51!==N||O.hasPrecedingLineBreak())if(be()||!F(21)){if(13!==N&&14!==N)return e;t=H(183,e.pos);t.tag=e,t.template=(13===N?ot:nt)(),e=W(t)}else{var n=H(180,e.pos);n.expression=e,22!==N&&(n.argumentExpression=d(j),9===n.argumentExpression.kind||8===n.argumentExpression.kind)&&((o=n.argumentExpression).text=De(o.text)),M(22),e=W(n)}else{C();var o=H(203,e.pos);o.expression=e,e=W(o)}}function ln(){M(19);var e=G(11,dn);return M(20),e}function cn(){var e;if(F(27))return e=G(19,K),M(29)&&e&&function(){switch(N){case 19:case 23:case 20:case 22:case 56:case 25:case 55:case 32:case 34:case 33:case 35:case 53:case 54:case 50:case 48:case 49:case 18:case 1:return 1;default:return}}()?e:void 0}function un(){return 24===N?(e=H(198),M(24),e.expression=z(),W(e)):26===N?H(200):z();var e}function dn(){return _e(Q,un)}function pn(e,t,n){return Pe(125)?Gn(153,e,t,n):Pe(135)?Gn(154,e,t,n):void 0}function gn(){var e,t,n,o,r,i,s=O.getStartPos();return U(24)?((i=H(263,s)).expression=z(),S(W(i))):pn(s,i=jn(),e=zn())||(o=U(39),r=B(),t=Re(),n=U(55),o||19===N||27===N?Hn(s,i,e,o,t,n):!r||26!==N&&18!==N&&58!==N?((i=H(261,s)).modifiers=e,i.name=t,i.questionToken=n,M(56),i.initializer=d(z),S(W(i))):((o=H(262,s)).name=t,o.questionToken=n,(r=U(58))&&(o.equalsToken=r,o.objectAssignmentInitializer=d(z)),S(W(o))))}function hn(){var e=H(178);return M(17),O.hasPrecedingLineBreak()&&(e.multiLine=!0),e.properties=G(12,gn,!0),M(18),W(e)}function _n(){var e=be(),t=(e&&ge(!1),H(186)),n=(t.modifiers=zn(),M(89),t.asteriskToken=U(39),t.asteriskToken?1:0),o=D.hasModifier(t,256)?2:0;return t.name=n&&o?me(20480,mn):n?me(4096,mn):o?fe(mn):mn(),gt(56,n|o,t),t.body=yn(n|o),e&&ge(!0),S(W(t))}function mn(){return B()?I():void 0}function fn(e,t){var n=H(207);return M(17,t)||e?(O.hasPrecedingLineBreak()&&(n.multiLine=!0),n.statements=Xe(1,v),M(18)):n.statements=Je(),W(n)}function yn(e,t){var n=ye(),o=(pe(!!(1&e)),ve()),r=(he(!!(2&e)),be()),e=(r&&ge(!1),fn(!!(16&e),t));return r&&ge(!0),pe(n),he(o),e}function kn(e){var t=H(e);return M(218===e?72:77),Ae()||(t.label=I()),A(),W(t)}function bn(){return 73===N?(e=H(257),M(73),e.expression=d(j),M(56),e.statements=Xe(3,v),W(e)):(e=H(258),M(79),M(56),e.statements=Xe(3,v),W(e));var e}function vn(){return C(),D.tokenIsIdentifierOrKeyword(N)&&!O.hasPrecedingLineBreak()}function Tn(){return C(),75===N&&!O.hasPrecedingLineBreak()}function En(){return C(),89===N&&!O.hasPrecedingLineBreak()}function Sn(){return C(),(D.tokenIsIdentifierOrKeyword(N)||8===N||9===N)&&!O.hasPrecedingLineBreak()}function Cn(){for(;;)switch(N){case 104:case 110:case 76:case 89:case 75:case 83:return!0;case 109:case 138:return C(),!O.hasPrecedingLineBreak()&&B();case 128:case 129:return C(),!O.hasPrecedingLineBreak()&&(B()||9===N);case 117:case 120:case 124:case 112:case 113:case 114:case 131:if(C(),O.hasPrecedingLineBreak())return!1;continue;case 141:return C(),17===N||71===N||84===N;case 91:return C(),9===N||39===N||17===N||D.tokenIsIdentifierOrKeyword(N);case 84:if(C(),58===N||39===N||17===N||79===N||118===N)return!0;continue;case 115:C();continue;default:return!1}}function xn(){return x(Cn)}function Bn(){switch(N){case 57:case 25:case 17:case 104:case 110:case 89:case 75:case 83:case 90:case 81:case 106:case 88:case 77:case 72:case 96:case 107:case 98:case 100:case 102:case 78:case 74:case 87:return!0;case 91:return xn()||x(vt);case 76:case 84:return xn();case 120:case 124:case 109:case 128:case 129:case 138:case 141:return!0;case 114:case 112:case 113:case 115:case 131:return xn()||!x(vn);default:return Ht()}}function An(){return C(),B()||17===N||21===N}function v(){switch(N){case 25:return a=H(209),M(25),W(a);case 17:return fn(!1);case 104:return Fn(O.getStartPos(),void 0,void 0);case 110:if(x(An))return Fn(O.getStartPos(),void 0,void 0);break;case 89:return Un(O.getStartPos(),void 0,void 0);case 75:return Yn(O.getStartPos(),void 0,void 0);case 90:return a=H(211),M(90),M(19),a.expression=d(j),M(20),a.thenStatement=v(),a.elseStatement=F(82)?v():void 0,W(a);case 81:return s=H(212),M(81),s.statement=v(),M(106),M(19),s.expression=d(j),M(20),F(25),W(s);case 106:return s=H(213),M(106),M(19),s.expression=d(j),M(20),s.statement=v(),W(s);case 88:return n=P(),M(88),o=U(121),i=void M(19),25!==N&&(i=104===N||110===N||76===N?Ln(!0):me(2048,j)),(o=(o?M:F)(142)?((r=H(216,n)).awaitModifier=o,r.initializer=i,r.expression=d(z),M(20),r):F(92)?((o=H(215,n)).initializer=i,o.expression=d(j),M(20),o):((r=H(214,n)).initializer=i,M(25),25!==N&&20!==N&&(r.condition=d(j)),M(25),20!==N&&(r.incrementor=d(j)),M(20),r)).statement=v(),W(o);case 77:return kn(217);case 72:return kn(218);case 96:return n=H(219),M(96),Ae()||(n.expression=d(j)),A(),W(n);case 107:return i=H(220),M(107),M(19),i.expression=d(j),M(20),i.statement=v(),W(i);case 98:return r=H(221),M(98),M(19),r.expression=d(j),M(20),o=H(235,O.getStartPos()),M(17),o.clauses=Xe(2,bn),M(18),r.caseBlock=W(o),W(r);case 100:return t=H(223),M(100),t.expression=O.hasPrecedingLineBreak()?void 0:d(j),A(),W(t);case 102:case 74:case 87:return t=H(224),M(102),t.tryBlock=fn(!1),t.catchClause=74===N?(e=H(260),M(74),F(19)?(e.variableDeclaration=Pn(),M(20)):e.variableDeclaration=void 0,e.block=fn(!1),W(e)):void 0,t.catchClause&&87!==N||(M(87),t.finallyBlock=fn(!1)),W(t);case 78:return e=H(225),M(78),A(),W(e);case 57:return In();case 120:case 109:case 138:case 128:case 129:case 124:case 76:case 83:case 84:case 91:case 112:case 113:case 114:case 117:case 115:case 131:case 141:if(xn())return In()}var e,t,n,o,r,i,s,a,l,c,u;return c=O.getStartPos(),71===(u=d(j)).kind&&F(56)?((l=H(222,c)).label=u,l.statement=v()):((l=H(210,c)).expression=u,A()),S(W(l))}function In(){var e,t,n,o,r,i,s,a,l,c,u,d,p,g,h,_,m,f=P(),y=jn(),k=zn();switch(N){case 104:case 110:case 76:return Fn(f,y,k);case 89:return Un(f,y,k);case 75:return Yn(f,y,k);case 109:return h=y,_=k,(m=H(230,f)).decorators=h,m.modifiers=_,M(109),m.name=I(),m.typeParameters=ct(),m.heritageClauses=Jn(),m.members=Tt(),S(W(m));case 138:return h=y,_=k,(m=H(231,f)).decorators=h,m.modifiers=_,M(138),m.name=I(),m.typeParameters=ct(),M(58),m.type=K(),A(),S(W(m));case 83:return b=y,v=k,(T=H(232,f)).decorators=b,T.modifiers=v,M(83),T.name=I(),M(17)?(T.members=G(6,no),M(18)):T.members=Je(),S(W(T));case 141:case 128:case 129:var b=f,v=y,T=k,E=0;if(141===N)return ro(b,v,T);if(F(129))E|=16;else if(M(128),9===N)return ro(b,v,T);return function e(t,n,o,r){var t=H(233,t),i=16&r;return t.decorators=n,t.modifiers=o,t.flags|=r,t.name=I(),t.body=F(23)?e(P(),void 0,void 0,4|i):oo(),S(W(t))}(b,v,T,E);case 91:return E=f,s=y,a=k,M(91),g=O.getStartPos(),B()&&(l=I(),26!==N)&&140!==N?(p=s,u=a,d=l,(c=H(237,E)).decorators=p,c.modifiers=u,c.name=d,M(58),c.moduleReference=132===N&&x(io)?(p=H(248),M(132),M(19),p.expression=ao(),M(20),W(p)):Ze(!1),A(),S(W(c))):((u=H(238,E)).decorators=s,u.modifiers=a,!l&&39!==N&&17!==N||(u.importClause=(d=l,p=H(239,g),d&&(p.name=d),p.name&&!F(26)||(p.namedBindings=39===N?(d=H(240),M(39),M(118),d.name=I(),W(d)):lo(241)),W(p)),M(140)),u.moduleSpecifier=ao(),A(),W(u));case 84:switch(C(),N){case 79:case 58:return o=y,r=k,(i=H(243,f)).decorators=o,i.modifiers=r,F(58)?i.isExportEquals=!0:M(79),i.expression=z(),A(),W(i);case 118:return o=y,r=k,(i=H(236,f)).decorators=o,i.modifiers=r,M(118),M(129),i.name=I(),A(),W(i);default:return e=y,t=k,(n=H(244,f)).decorators=e,n.modifiers=t,(F(39)||(n.exportClause=lo(245),140===N)||9===N&&!O.hasPrecedingLineBreak())&&(M(140),n.moduleSpecifier=ao()),A(),W(n)}default:if(y||k)return(c=Ie(247,!0,D.Diagnostics.Declaration_expected)).pos=f,c.decorators=y,c.modifiers=k,W(c)}}function Dn(e,t){if(17===N||!Ae())return yn(e,t);A()}function Nn(){var e;return 26===N?H(200):((e=H(176)).dotDotDotToken=U(24),e.name=Rn(),e.initializer=Vt(!1),W(e))}function wn(){var e=H(176),t=(e.dotDotDotToken=U(24),B()),n=Re();return t&&56!==N?e.name=n:(M(56),e.propertyName=n,e.name=Rn()),e.initializer=Vt(!1),W(e)}function On(){return 17===N||21===N||B()}function Rn(){return 21===N?(e=H(175),M(21),e.elements=G(10,Nn),M(22),W(e)):17===N?(e=H(174),M(17),e.elements=G(9,wn),M(18),W(e)):I();var e}function Pn(){var e=H(226);return e.name=Rn(),e.type=Ft(),Yt(N)||(e.initializer=Wn()),W(e)}function Ln(e){var t,n=H(227);switch(N){case 104:break;case 110:n.flags|=1;break;case 76:n.flags|=2;break;default:D.Debug.fail()}return C(),142===N&&x(Mn)?n.declarations=Je():(t=ke(),de(e),n.declarations=G(8,Pn),de(t)),W(n)}function Mn(){return We()&&20===C()}function Fn(e,t,n){e=H(208,e);return e.decorators=t,e.modifiers=n,e.declarationList=Ln(!1),A(),S(W(e))}function Un(e,t,n){e=H(228,e),e.decorators=t,e.modifiers=n,M(89),e.asteriskToken=U(39),e.name=(D.hasModifier(e,512)?mn:I)(),t=e.asteriskToken?1:0,n=D.hasModifier(e,256)?2:0;return gt(56,t|n,e),e.body=Dn(t|n,D.Diagnostics.or_expected),S(W(e))}function Hn(e,t,n,o,r,i,s){e=H(151,e),e.decorators=t,e.modifiers=n,e.asteriskToken=o,e.name=r,e.questionToken=i,t=o?1:0,n=D.hasModifier(e,256)?2:0;return gt(56,t|n,e),e.body=Dn(t|n,s),S(W(e))}function Vn(e,t,n,o,r){e=H(149,e);return e.decorators=t,e.modifiers=n,e.name=o,e.questionToken=r,e.type=Ft(),e.initializer=D.hasModifier(e,32)?d(Wn):_e(6144,Wn),A(),S(W(e))}function Wn(){return Vt(!1)}function Gn(e,t,n,o){e=H(e,t);return e.decorators=n,e.modifiers=o,e.name=Re(),gt(56,0,e),e.body=Dn(0),S(W(e))}function Kn(){var e;if(57===N)return!0;for(;D.isModifierKind(N);){if(function(e){switch(e){case 114:case 112:case 113:case 115:case 131:return 1;default:return}}(e=N))return!0;C()}if(39===N)return!0;if(Oe()&&(e=N,C()),21===N)return!0;if(void 0!==e){if(!D.isKeyword(e)||135===e||125===e)return!0;switch(N){case 19:case 27:case 56:case 58:case 55:return!0;default:return Ae()}}return!1}function jn(){for(var e,t=P();;){var n=P();if(!F(57))break;n=H(147,n);n.expression=me(8192,tn),W(n),(e=e||[]).push(n)}return e&&V(e,t)}function zn(e){for(var t,n=P();;){var o=O.getStartPos(),r=N;if(76===N&&e){if(!L(Le))break}else if(!D.isModifierKind(N)||!L(Me))break;r=W(H(r,o));(t=t||[]).push(r)}return t&&V(t,n)}function Xn(){var e,t;return 120===N&&(e=O.getStartPos(),t=N,C(),t=V([W(H(t,e))],e)),t}function $n(){var e,t,n,o,r,i,s,a,l;return 25===N?(e=H(206),C(),W(e)):(e=P(),t=jn(),n=zn(!0),pn(e,t,n)||(123===N?(s=t,a=n,(l=H(152,e)).decorators=s,l.modifiers=a,M(123),gt(56,0,l),l.body=Dn(0,D.Diagnostics.or_expected),S(W(l))):mt()?yt(e,t,n):D.tokenIsIdentifierOrKeyword(N)||9===N||8===N||39===N||21===N?(s=e,a=t,l=n,o=U(39),r=Re(),i=U(55),o||19===N||27===N?Hn(s,a,l,o,r,i,D.Diagnostics.or_expected):Vn(s,a,l,r,i)):t||n?Vn(e,t,n,Ie(71,!0,D.Diagnostics.Declaration_expected),void 0):void D.Debug.fail("Should not have attempted to parse class member declaration.")))}function Yn(e,t,n){return qn(e,t,n,229)}function qn(e,t,n,o){o=H(o,e);return o.decorators=t,o.modifiers=n,M(75),o.name=!B()||108===N&&x(Ge)?void 0:I(),o.typeParameters=ct(),o.heritageClauses=Jn(),M(17)?(o.members=Xe(5,$n),M(18)):o.members=Je(),S(W(o))}function Jn(){if(to())return Xe(21,Qn)}function Qn(){var e,t=N;if(85===t||108===t)return(e=H(259)).token=t,C(),e.types=G(7,Zn),W(e)}function Zn(){var e=H(201);return e.expression=tn(),e.typeArguments=eo(),W(e)}function eo(){return 27===N?Qe(19,K,27,29):void 0}function to(){return 85===N||108===N}function no(){var e=H(264,O.getStartPos());return e.name=Re(),e.initializer=d(Wn),S(W(e))}function oo(){var e=H(234,O.getStartPos());return M(17)?(e.statements=Xe(1,v),M(18)):e.statements=Je(),W(e)}function ro(e,t,n){e=H(233,e);return e.decorators=t,e.modifiers=n,141===N?(e.name=I(),e.flags|=512):(e.name=ot(),e.name.text=De(e.name.text)),17===N?e.body=oo():A(),W(e)}function io(){return 19===C()}function so(){return 41===C()}function ao(){var e;return 9===N?((e=ot()).text=De(e.text),e):j()}function lo(e){var t=H(e);return t.elements=Qe(22,241===e?uo:co,17,18),W(t)}function co(){return po(246)}function uo(){return po(242)}function po(e){var t=H(e),n=D.isKeyword(N)&&!B(),o=O.getTokenPos(),r=O.getTextPos(),i=we();return 118===N?(t.propertyName=i,M(118),n=D.isKeyword(N)&&!B(),o=O.getTokenPos(),r=O.getTextPos(),t.name=we()):t.name=i,242===e&&n&&R(o,r-o,D.Diagnostics.Identifier_expected),W(t)}function go(e){var t=H(267,O.getTokenPos());if(M(17)||!e)return t.type=me(1048576,K),M(18),le(t),W(t)}function ho(d,e){var p=w;d=d||0;var g,h,_,m=void 0===e?p.length:d+e;e=m-d,D.Debug.assert(0<=d),D.Debug.assert(d<=m),D.Debug.assert(m<=p.length);var f,t,n,y=[];return n=d,47===(t=p).charCodeAt(n)&&42===t.charCodeAt(n+1)&&42===t.charCodeAt(n+2)&&42!==t.charCodeAt(n+3)&&O.scanRange(d+3,e-5,function(){var e,t=!0,n=1,o=void 0,r=d-Math.max(p.lastIndexOf("\n",d),0)+4;function i(e){o=o||r,y.push(e),r+=e.length}for(A();5===N;)A();for(4===N&&(r=n=0,A());1!==N;){switch(N){case 57:if(0===n||1===n){b(y);{s=void 0;l=void 0;c=void 0;a=void 0;var s=r;D.Debug.assert(57===N);var a,l=H(57,O.getTokenPos()),c=(l.end=O.getTextPos(),A(),I());if(v(),c){if(c)switch(c.escapedText){case"augments":case"extends":a=function(e,t){var n=H(277,e.pos);return n.atToken=e,n.tagName=t,n.class=(e=F(17),(t=H(201)).expression=function(){for(var e=I(!0);F(23);){var t=H(179,e.pos);t.expression=e,t.name=I(),e=W(t)}return e}(),t.typeArguments=eo(),t=W(t),e&&M(18),t),W(n)}(l,c);break;case"class":case"constructor":a=function(e,t){var n=H(278,e.pos);return n.atToken=e,n.tagName=t,W(n)}(l,c);break;case"arg":case"argument":case"param":a=C(l,c,1);break;case"return":case"returns":a=function(e,t){D.forEach(g,function(e){return 280===e.kind})&&R(t.pos,O.getTokenPos()-t.pos,D.Diagnostics._0_tag_already_specified,t.escapedText);var n=H(280,e.pos);return n.atToken=e,n.tagName=t,n.typeExpression=E(),W(n)}(l,c);break;case"template":a=function(e,t){D.forEach(g,function(e){return 282===e.kind})&&R(t.pos,O.getTokenPos()-t.pos,D.Diagnostics._0_tag_already_specified,t.escapedText);for(var n=[],o=P();;){var r=I();if(v(),!r)return void R(O.getStartPos(),0,D.Diagnostics.Identifier_expected);var i=H(145,r.pos);if(i.name=r,W(i),n.push(i),26!==N)break;A(),v()}var s=H(282,e.pos);return s.atToken=e,s.tagName=t,s.typeParameters=V(n,o),W(s),s}(l,c);break;case"type":a=x(l,c);break;case"typedef":a=function(e,t){var n=E(),o=(v(),H(283,e.pos));if(o.atToken=e,o.tagName=t,o.fullName=function e(t){var n=O.getTokenPos(),o=I();if(o&&F(23))return(n=H(233,n)).flags|=t,n.name=o,n.body=e(4),W(n);return o&&4&t&&(o.isInJSDocNamespace=!0),o}(0),o.fullName)for(var r=o.fullName;;){if(71===r.kind||!r.body){o.name=71===r.kind?r:r.name;break}r=r.body}if(v(),!(o.typeExpression=n)||S(n.type)){for(var i,s=void 0,a=void 0,l=O.getStartPos();i=L(function(){return B(0)});)if(s=s||H(285,l),281===i.kind){if(a)break;a=i}else s.jsDocPropertyTags||(s.jsDocPropertyTags=[]),s.jsDocPropertyTags.push(i);s&&(n&&164===n.type.kind&&(s.isArrayType=!0),o.typeExpression=a&&a.typeExpression&&!S(a.typeExpression.type)?a.typeExpression:W(s))}return W(o)}(l,c);break;default:a=T(l,c)}else a=T(l,c);a&&function(e,t){e.comment=t.join(""),g?g.push(e):(g=[e],h=e.pos),_=e.end}(a,function(t){var n,e,o=[],r=0;function i(e){n=n||t,o.push(e),t+=e.length}for(;57!==N&&1!==N;){switch(N){case 4:1<=r&&(r=0,o.push(O.getTokenText())),t=0;break;case 57:break;case 5:2===r?i(O.getTokenText()):(e=O.getTokenText(),void 0!==n&&t+e.length>n&&o.push(e.slice(n-t-1)),t+=e.length);break;case 39:if(0===r){r=1,t+=O.getTokenText().length;break}default:r=2,i(O.getTokenText())}if(57===N)break;A()}return k(o),b(o),o}(s+a.end-a.pos))}}n=0,t=!1,o=void 0,r++}else i(O.getTokenText());break;case 4:y.push(O.getTokenText()),r=n=0;break;case 39:s=O.getTokenText();1===n||2===n?(n=2,i(s)):(n=1,r+=s.length);break;case 71:i(O.getTokenText()),n=2;break;case 5:var u=O.getTokenText();2===n?y.push(u):void 0!==o&&r+u.length>o&&y.push(u.slice(o-r-1)),r+=u.length;break;case 1:break;default:n=2,i(O.getTokenText())}t?A():t=!0}k(y),b(y),(e=H(275,d)).tags=g&&V(g,h,_),e.comment=y.length?y.join(""):void 0,f=W(e,m)}),f;function k(e){for(;e.length&&("\n"===e[0]||"\r"===e[0]);)e.shift()}function b(e){for(;e.length&&("\n"===e[e.length-1]||"\r"===e[e.length-1]);)e.pop()}function v(){for(;5===N||4===N;)A()}function T(e,t){var n=H(276,e.pos);return n.atToken=e,n.tagName=t,W(n)}function E(){return v(),17===N?go():void 0}function S(e){switch(e.kind){case 134:return!0;case 164:return S(e.elementType);default:return D.isTypeReferenceNode(e)&&D.isIdentifier(e.typeName)&&"Object"===e.typeName.escapedText}}function C(e,t,n){var o=E(),r=!o,i=(v(),s=F(21),i=function(){var e=I(!0);for(F(21)&&M(22);F(23);){var t=I(!0);F(21)&&M(22),e=et(e,t)}return e}(),s&&(v(),U(58)&&j(),M(22)),{name:i,isBracketed:s}),s=i.name,i=i.isBracketed,n=(v(),r&&(o=E()),H(1===n?279:284,e.pos)),a=function(e,t){if(e&&S(e.type)){for(var n,o=H(267,O.getTokenPos()),r=void 0,i=O.getStartPos(),s=void 0;n=L(function(){return B(1,t)});)(s=s||[]).push(n);if(s)return(r=H(285,i)).jsDocPropertyTags=s,164===e.type.kind&&(r.isArrayType=!0),o.type=W(r),W(o)}}(o,s);return a&&(o=a,r=!0),n.atToken=e,n.tagName=t,n.typeExpression=o,n.name=s,n.isNameFirst=r,n.isBracketed=i,W(n)}function x(e,t){D.forEach(g,function(e){return 281===e.kind})&&R(t.pos,O.getTokenPos()-t.pos,D.Diagnostics._0_tag_already_specified,t.escapedText);var n=H(281,e.pos);return n.atToken=e,n.tagName=t,n.typeExpression=go(!0),W(n)}function B(e,t){for(var n,o=!0,r=!1;;)switch(A(),N){case 57:if(o)return!((n=function(e){D.Debug.assert(57===N);var t=H(57,O.getStartPos()),n=(t.end=O.getTextPos(),A(),I());if(v(),n)switch(n.escapedText){case"type":return 0===e&&x(t,n);case"prop":case"property":return 0===e&&C(t,n,e);case"arg":case"argument":case"param":return 1===e&&C(t,n,e)}return!1}(e))&&279===n.kind&&(D.isIdentifier(n.name)||!function(e,t){for(;!D.isIdentifier(e)||!D.isIdentifier(t);){if(D.isIdentifier(e)||D.isIdentifier(t)||e.right.escapedText!==t.right.escapedText)return;e=e.left,t=t.left}return e.escapedText===t.escapedText}(t,n.name.left)))&&n;r=!1;break;case 4:r=!(o=!0);break;case 39:r&&(o=!1),r=!0;break;case 71:o=!1;break;case 1:return!1}}function A(){return N=O.scanJSDocToken()}function I(e){var t,n,o;return void 0===e&&(e=!1),D.tokenIsIdentifierOrKeyword(N)?(t=O.getTokenPos(),n=O.getTextPos(),(o=H(71,t)).escapedText=D.escapeLeadingUnderscores(p.substring(t,n)),W(o,n),A(),o):e?Ie(71,!0,D.Diagnostics.Identifier_expected):void Te(D.Diagnostics.Identifier_expected)}}D.createNode=function(e,t,n){return new(265===e?u=u||D.objectAllocator.getSourceFileConstructor():71===e?c=c||D.objectAllocator.getIdentifierConstructor():D.isNodeKind(e)?o=o||D.objectAllocator.getNodeConstructor():r=r||D.objectAllocator.getTokenConstructor())(e,t,n)},D.forEachChild=E,D.createSourceFile=function(e,t,n,o,r){void 0===o&&(o=!1),D.performance.mark("beforeParse");e=T.parseSourceFile(e,t,n,void 0,o,r);return D.performance.mark("afterParse"),D.performance.measure("Parse","beforeParse","afterParse"),e},D.parseIsolatedEntityName=function(e,t){return T.parseIsolatedEntityName(e,t)},D.parseJsonText=function(e,t){return T.parseJsonText(e,t)},D.isExternalModule=function(e){return void 0!==e.externalModuleIndicator},D.updateSourceFile=function(e,t,n,o){t=p.updateSourceFile(e,t,n,o);return t.flags|=524288&e.flags,t},D.parseIsolatedJSDocComment=function(e,t,n){e=T.JSDocParser.parseIsolatedJSDocComment(e,t,n);return e&&e.jsDoc&&T.fixupParentReferences(e.jsDoc),e},D.parseJSDocTypeExpressionForTests=function(e,t,n){return T.JSDocParser.parseJSDocTypeExpressionForTests(e,t,n)},e=T=T||{},O=D.createScanner(5,!0),s=!(Q=10240),e.parseSourceFile=function(h,e,_,t,n,m){se(e,_,t,m=D.ensureScriptKind(h,m));e=function(e){(f=ce(h,_,m)).flags=k,C();for(var t,n,o=f,r=D.createScanner(o.languageVersion,!1,0,w),i=[],s=[],a=[],l=void 0;;){var c=r.scan();if(2!==c){if(D.isTrivia(c))continue;break}var u,d,c={kind:r.getToken(),pos:r.getTokenPos(),end:r.getTextPos()},p=w.substring(c.pos,c.end),g=D.getFileReferenceFromReferencePath(p,c);g?(u=g.fileReference,o.hasNoDefaultLib=g.isNoDefaultLib,d=g.diagnosticMessage,u&&(g.isTypeReferenceDirective?s:i).push(u),d&&y.push(D.createFileDiagnostic(o,c.pos,c.end-c.pos,d))):((g=/^\/\/\/\s*<amd-module\s+name\s*=\s*('|")(.+?)\1/gim.exec(p))&&(t&&y.push(D.createFileDiagnostic(o,c.pos,c.end-c.pos,D.Diagnostics.An_AMD_module_cannot_have_multiple_name_assignments)),t=g[2]),/^\/\/\/\s*<amd-dependency\s/gim.exec(p)&&(u=/\spath\s*=\s*('|")(.+?)\1/gim.exec(p),d=/\sname\s*=\s*('|")(.+?)\1/gim.exec(p),u)&&(g={path:u[2],name:d?d[2]:void 0},a.push(g)),(g=/^\/\/\/?\s*(@ts-check|@ts-nocheck)\s*$/gim.exec(p))&&(l={enabled:0===D.compareStrings(g[1],"@ts-check",!0),end:c.end,pos:c.pos}))}return o.referencedFiles=i,o.typeReferenceDirectives=s,o.amdDependencies=a,o.moduleName=t,o.checkJsDirective=l,f.statements=Xe(0,v),D.Debug.assert(1===N),f.endOfFileToken=S(b()),(n=f).externalModuleIndicator=D.forEach(n.statements,function(e){return D.hasModifier(e,1)||237===e.kind&&248===e.moduleReference.kind||238===e.kind||243===e.kind||244===e.kind?e:void 0}),f.nodeCount=$,f.identifierCount=q,f.identifiers=Y,f.parseDiagnostics=y,e&&le(f),f}(n);return ae(),e},e.parseIsolatedEntityName=function(e,t){se(e,t,void 0,1),C();e=Ze(!0),t=1===N&&!y.length;return ae(),t?e:void 0},e.parseJsonText=function(e,t){se(t,2,void 0,6);t=f=ce(e,2,6);return C(),1===N?f.endOfFileToken=b():17===N||x(function(){return 9===N})?(t.jsonObject=hn(),f.endOfFileToken=Be(1,!1,D.Diagnostics.Unexpected_token)):M(17),f.parseDiagnostics=y,ae(),t},e.fixupParentReferences=le,(e=J=e.JSDocParser||(e.JSDocParser={})).parseJSDocTypeExpressionForTests=function(e,t,n){se(e,5,void 0,1),f=ce("file.js",5,1),O.setText(e,t,n),N=O.scan();e=go(),t=y;return ae(),e?{jsDocTypeExpression:e,diagnostics:t}:void 0},e.parseJSDocTypeExpression=go,e.parseIsolatedJSDocComment=function(e,t,n){se(e,5,void 0,1),f={languageVariant:0,text:e};e=ho(t,n),t=y;return ae(),e?{jsDoc:e,diagnostics:t}:void 0},e.parseJSDocComment=function(e,t,n){var o=N,r=y.length,i=s,t=ho(t,n);return t&&(t.parent=e),D.isInJavaScriptFile(e)&&(f.jsDocDiagnostics||(f.jsDocDiagnostics=[]),(n=f.jsDocDiagnostics).push.apply(n,y)),N=o,y.length=r,s=i,t},e.parseJSDocCommentWorker=ho,(p||(p={})).updateSourceFile=function(e,t,n,o){var r,i,s,a,l,c,u,d,p,g,h,_,m,f,y,k;return re(e,t,n,o=o||D.Debug.shouldAssert(2)),D.textChangeRangeIsUnchanged(n)?e:0===e.statements.length?T.parseSourceFile(e.fileName,t,e.languageVersion,void 0,!0,e.scriptKind):(D.Debug.assert(!(p=e).hasBeenIncrementallyParsed),p.hasBeenIncrementallyParsed=!0,r=e.text,l=(a=e).statements,c=0,D.Debug.assert(c<l.length),u=l[c],d=-1,i={currentNode:function(e){return e!==d&&((u=u&&u.end===e&&c<l.length-1?l[++c]:u)&&u.pos===e||(i=e,c=-1,u=l=void 0,E(a,o,r))),d=e,D.Debug.assert(!u||u.pos===e),u;function o(e){return i>=e.pos&&i<e.end&&(E(e,o,r),!0)}function r(e){if(i>=e.pos&&i<e.end)for(var t=0;t<e.length;t++){var n=e[t];if(n){if(n.pos===i)return l=e,c=t,u=n,!0;if(n.pos<i&&i<n.end)return E(n,o,r),!0}}return!1}var i}},s=function(e,t){for(var n=t.span.start,o=0;0<n&&o<=1;o++)var r=oe(e,n),r=(D.Debug.assert(r.pos<=n),r.pos),n=Math.max(0,r-1);var i=D.createTextSpanFromBounds(n,D.textSpanEnd(t.span)),t=t.newLength+(t.span.start-n);return D.createTextChangeRange(i,t)}(e,n),re(e,t,s,o),D.Debug.assert(s.span.start<=n.span.start),D.Debug.assert(D.textSpanEnd(s.span)===D.textSpanEnd(n.span)),D.Debug.assert(D.textSpanEnd(D.textChangeRangeNewSpan(s))===D.textSpanEnd(D.textChangeRangeNewSpan(n))),n=D.textChangeRangeNewSpan(s).length-s.span.length,p=p,g=s.span.start,h=D.textSpanEnd(s.span),_=D.textSpanEnd(D.textChangeRangeNewSpan(s)),m=n,f=r,y=t,k=o,b(p),T.parseSourceFile(e.fileName,t,e.languageVersion,i,!0,e.scriptKind));function b(e){var t;D.Debug.assert(e.pos<=e.end),e.pos>h?Z(e,!1,m,f,y,k):(t=e.end,g<=t?(e.intersectsChange=!0,e._children=void 0,te(e,g,h,_,m),E(e,b,v),ne(e,k)):D.Debug.assert(t<g))}function v(e){if(D.Debug.assert(e.pos<=e.end),e.pos>h)Z(e,!0,m,f,y,k);else{var t=e.end;if(g<=t){e.intersectsChange=!0,e._children=void 0,te(e,g,h,_,m);for(var n=0,o=e;n<o.length;n++)b(o[n])}else D.Debug.assert(t<g)}}}}(ts=ts||{}),function(V){var e;function de(e){var t,n;return 230===e.kind||231===e.kind?0:V.isConstEnumDeclaration(e)?2:238!==e.kind&&237!==e.kind||V.hasModifier(e,1)?234===e.kind?(t=0,V.forEachChild(e,function(e){switch(de(e)){case 0:return!1;case 2:return!(t=2);case 1:return t=1,!0}}),t):233===e.kind?(n=e.body)?de(n):1:71===e.kind&&e.isInJSDocNamespace?0:1:0}(e=V.ModuleInstanceState||(V.ModuleInstanceState={}))[e.NonInstantiated=0]="NonInstantiated",e[e.Instantiated=1]="Instantiated",e[e.ConstEnumOnly=2]="ConstEnumOnly",V.getModuleInstanceState=de;Z={flags:1},me={flags:1},ee=r=0;var W,G,pe,N,w,O,n,ge,K,j,z,X,$,Y,q,J,Q,he,R,o,_e,v,r,Z,me,ee,i=function(e,t){W=e,G=t,pe=V.getEmitScriptTarget(G),e=W,R=!(!(void 0===t.alwaysStrict?t.strict:t.alwaysStrict)||e.isDeclarationFile)||!!e.externalModuleIndicator,_e=V.createUnderscoreEscapedMap(),r=0,v=W.isDeclarationFile,o=V.objectAllocator.getSymbolConstructor(),W.locals||(ue(W),W.symbolCount=r,W.classifiableNames=_e),J=Y=$=X=z=j=K=n=O=w=N=pe=G=W=void 0,Q=ge=!1,ee=he=0};function te(e,t,n,o,r){return V.createDiagnosticForNodeInSourceFile(V.getSourceFileOfNode(e)||W,e,t,n,o,r)}function P(e,t){return r++,new o(e,t)}function fe(e,t,n){e.flags|=n,(t.symbol=e).declarations?e.declarations.push(t):e.declarations=[t],1952&n&&!e.exports&&(e.exports=V.createSymbolTable()),6240&n&&!e.members&&(e.members=V.createSymbolTable()),107455&n&&((n=e.valueDeclaration)&&(n.kind===t.kind||233!==n.kind)||(e.valueDeclaration=t))}function ye(e){if(243===e.kind)return e.isExportEquals?"export=":"default";var t,n=V.getNameOfDeclaration(e);if(n)return V.isAmbientModule(e)?(t=V.getTextOfIdentifierOrLiteral(n),V.isGlobalScopeAugmentation(e)?"__global":'"'+t+'"'):144===n.kind?(t=n.expression,V.isStringOrNumericLiteral(t)?V.escapeLeadingUnderscores(t.text):(V.Debug.assert(V.isWellKnownSymbolSyntactically(t)),V.getPropertyNameForKnownSymbolName(V.idText(t.name)))):V.getEscapedTextOfIdentifierOrLiteral(n);switch(e.kind){case 152:return"__constructor";case 160:case 155:return"__call";case 161:case 156:return"__new";case 157:return"__index";case 244:return"__export";case 194:if(2===V.getSpecialPropertyAssignmentKind(e))return"export=";V.Debug.fail("Unknown binary declaration kind");break;case 228:case 229:return V.hasModifier(e,512)?"default":void 0;case 273:return V.isJSDocConstructSignature(e)?"__new":"__call";case 146:V.Debug.assert(273===e.parent.kind);var o=e.parent;return"arg"+V.indexOf(o.parameters,e);case 283:o=V.getNameOfJSDocTypedef(e);return void 0!==o?o.escapedText:void 0}}function u(e){return e.name?V.declarationNameToString(e.name):V.unescapeLeadingUnderscores(ye(e))}function L(e,t,n,o,r,i){V.Debug.assert(!V.hasDynamicName(n));var s,a,l=V.hasModifier(n,512),c=l&&t?"default":ye(n);if(void 0===c)s=P(0,"__missing");else if(s=e.get(c),788448&o&&_e.set(c,!0),s){if(i&&!s.isReplaceableByMethod)return s;s.flags&r&&(s.isReplaceableByMethod?e.set(c,s=P(0,c)):(n.name&&(n.name.parent=n),a=2&s.flags?V.Diagnostics.Cannot_redeclare_block_scoped_variable_0:V.Diagnostics.Duplicate_identifier_0,s.declarations&&s.declarations.length&&(l||s.declarations&&s.declarations.length&&(l||243===n.kind&&!n.isExportEquals))&&(a=V.Diagnostics.A_module_cannot_have_multiple_default_exports),V.forEach(s.declarations,function(e){W.bindDiagnostics.push(te(V.getNameOfDeclaration(e)||e,a,u(e)))}),W.bindDiagnostics.push(te(V.getNameOfDeclaration(n)||n,a,u(n))),s=P(0,c)))}else e.set(c,s=P(0,c)),i&&(s.isReplaceableByMethod=!0);return fe(s,n,o),s.parent=t,s}function s(e,t,n){var o=1&V.getCombinedModifierFlags(e);if(2097152&t)return 246===e.kind||237===e.kind&&o?L(w.symbol.exports,w.symbol,e,t,n):L(w.locals,void 0,e,t,n);283===e.kind&&V.Debug.assert(V.isInJavaScriptFile(e));var r=283===e.kind&&e.name&&71===e.name.kind&&e.name.isInJSDocNamespace;return!V.isAmbientModule(e)&&(o||32&w.flags)||r?((o=L(w.locals,void 0,e,107455&t?1048576:0,n)).exportSymbol=L(w.symbol.exports,w.symbol,e,t,n),e.localSymbol=o):L(w.locals,void 0,e,t,n)}function T(e){var t;v?a(e):536870912&e.transformFlags?(v=!0,a(e),v=!1,ee|=e.transformFlags&~_(e.kind)):(t=ee,ee=0,a(e),ee=t|S(e,ee))}function ke(e){if(void 0!==e)if(v)V.forEach(e,ue);else{for(var t=ee,n=ee=0,o=0,r=e;o<r.length;o++){var i=r[o];ue(i),n|=-536870913&i.transformFlags}e.transformFlags=536870912|n,ee|=t}}function ne(e){V.forEachChild(e,ue,ke)}function a(e){if(V.hasJSDocNodes(e))if(V.isInJavaScriptFile(e))for(var t=0,L=e.jsDoc;t<L.length;t++)ue(L[t]);else for(var n=0,M=e.jsDoc;n<M.length;n++)!function t(e,n){n.parent=e,V.forEachChild(n,function(e){return t(n,e)})}(e,M[n]);if(P=e,1&K.flags&&(K===Z&&(V.isStatementButNotDeclaration(P)&&209!==P.kind||229===P.kind||233===P.kind&&(1===(H=de(P))||2===H&&G.preserveConstEnums)||232===P.kind&&(!V.isConstEnumDeclaration(P)||G.preserveConstEnums))&&(K=me,G.allowUnreachableCode||V.isInAmbientContext(P)||!(208!==P.kind||3&V.getCombinedNodeFlags(P.declarationList)||V.forEach(P.declarationList.declarations,function(e){return e.initializer}))||we(P,V.Diagnostics.Unreachable_code_detected)),1))ne(e);else switch(e.kind){case 213:N=e,w=be(),O=re(),R=re(),ie(w,K),K=w,ae(N.expression,O,R),K=se(O),Ce(N.statement,R,w),ie(w,K),K=se(R);break;case 212:O=be(),w=222===(N=e).parent.kind?V.lastOrUndefined(J):void 0,R=w?w.continueTarget:re(),w=w?w.breakTarget:re(),ie(O,K),K=O,Ce(N.statement,w,R),ie(R,K),K=se(R),ae(N.expression,O,w),K=se(w);break;case 214:A=be(),I=re(),D=re(),ue((B=e).initializer),ie(A,K),K=A,ae(B.condition,I,D),K=se(I),Ce(B.statement,D,A),ue(B.incrementor),ie(A,K),K=se(D);break;case 215:case 216:I=e,B=be(),A=re(),ie(B,K),K=B,216===I.kind&&ue(I.awaitModifier),ue(I.expression),ie(A,K),ue(I.initializer),227!==I.initializer.kind&&le(I.initializer),Ce(I.statement,A,B),ie(B,K),K=se(A);break;case 211:D=re(),C=re(),x=re(),ae((S=e).expression,D,C),K=se(D),ue(S.thenStatement),ie(x,K),K=se(C),ue(S.elseStatement),ie(x,K),K=se(x);break;case 219:case 223:ue((C=e).expression),219===C.kind&&(Q=!0,X)&&ie(X,K),K=Z;break;case 218:case 217:ue((S=e).label),S.label?(x=function(e){if(J)for(var t=0,n=J;t<n.length;t++){var o=n[t];if(o.name===e)return o}}(S.label.escapedText))&&(x.referenced=!0,xe(S,x.breakTarget,x.continueTarget)):xe(S,j,z);break;case 224:b=re(),v=K,ue((k=e).tryBlock),ie(b,K),T=K,E=Z,k.catchClause&&(K=v,ue(k.catchClause),ie(b,K),E=K),k.finallyBlock?(ie(b,v={flags:2048,antecedent:v,lock:{}}),K=se(b),ue(k.finallyBlock),1&K.flags||1&T.flags&&1&E.flags&&(K=T===me||E===me?me:Z),1&K.flags||(k={flags:4096,antecedent:K},v.lock=k,K=k)):K=se(b);break;case 221:T=re(),ue((E=e).expression),v=j,k=q,j=T,q=K,ue(E.caseBlock),ie(T,K),b=V.forEach(E.caseBlock.clauses,function(e){return 258===e.kind}),E.possiblyExhaustive=!b&&!T.antecedents,b||ie(T,ve(q,E,0,0)),j=v,q=k,K=se(T);break;case 235:var F=e,o=ee;ee=0;for(var r=F.clauses,U=Z,i=0;i<r.length;i++){for(var s=i;!r[i].statements.length&&i+1<r.length;)ue(r[i]),i++;var a=re(),s=(ie(a,ve(q,F.parent,s,i+1)),ie(a,U),K=se(a),r[i]);ue(s),1&(U=K).flags||i===r.length-1||!G.noFallthroughCasesInSwitch||we(s,V.Diagnostics.Fallthrough_case_in_switch)}r.transformFlags=536870912|ee,ee|=o;break;case 257:o=K,K=q,ue((l=e).expression),K=o,ke(l.statements);break;case 222:var l=e,c=be(),u=re();ue(l.label),ie(c,K),c={name:l.label.escapedText,breakTarget:u,continueTarget:c,referenced:!1},(J=J||[]).push(c),ue(l.statement),J.pop(),c.referenced||G.allowUnusedLabels||W.bindDiagnostics.push(te(l.label,V.Diagnostics.Unused_label)),l.statement&&212===l.statement.kind||(ie(u,K),K=se(u));break;case 192:51===(c=e).operator?(u=$,$=Y,Y=u,ne(c),Y=$,$=u):(ne(c),43!==c.operator&&44!==c.operator||le(c.operand));break;case 193:ne(y=e),43!==y.operator&&44!==y.operator||le(y.operand);break;case 194:53===(f=(y=e).operatorToken.kind)||54===f?!function(e){for(;185===e.parent.kind||192===e.parent.kind&&51===e.parent.operator;)e=e.parent;return!function(e){var t=e.parent;switch(t.kind){case 211:case 213:case 212:return t.expression===e;case 214:case 195:return t.condition===e}}(e)&&!Se(e.parent)}(y)?Be(y,$,Y):(Be(y,m=re(),m),K=se(m)):(ne(y),V.isAssignmentOperator(f)&&!V.isAssignmentTarget(y)&&(le(y.left),58===f)&&180===y.left.kind&&oe(y.left.expression)&&(K=Ee(K,y)));break;case 188:ne(m=e),179===m.expression.kind&&le(m.expression);break;case 195:f=re(),h=re(),_=re(),ae((d=e).condition,f,h),K=se(f),ue(d.questionToken),ue(d.whenTrue),ie(_,K),K=se(h),ue(d.colonToken),ue(d.whenFalse),ie(_,K),K=se(_);break;case 226:ne(h=e),(h.initializer||V.isForInOrOfStatement(h.parent.parent))&&function e(t){var n=V.isOmittedExpression(t)?void 0:t.name;if(V.isBindingPattern(n))for(var o=0,r=n.elements;o<r.length;o++)e(r[o]);else K=Te(K,t)}(h);break;case 181:for(var d=e,p=d.expression;185===p.kind;)p=p.expression;186===p.kind||187===p.kind?(ke(d.typeArguments),ke(d.arguments),ue(d.expression)):ne(d),179===d.expression.kind&&oe((_=d.expression).expression)&&V.isPushOrUnshiftIdentifier(_.name)&&(K=Ee(K,d));break;case 275:V.forEachChild(e,function(e){283!==e.kind&&ue(e)});break;case 283:g=e,V.forEachChild(g,function(e){g.fullName&&e===g.name&&71!==g.fullName.kind||ue(e)});break;default:ne(e)}var g,d,h,_,m,f,y,l,k,b,v,T,E,S,C,x,B,A,I,D,N,w,O,R,P,H}function l(e){switch(e.kind){case 71:case 99:case 179:return M(e);case 181:var t=e;if(t.arguments)for(var n=0,o=t.arguments;n<o.length;n++)if(M(o[n]))return!0;return!(179!==t.expression.kind||!M(t.expression.expression));case 185:return l(e.expression);case 194:var r=e;switch(r.operatorToken.kind){case 58:return M(r.left);case 32:case 33:case 34:case 35:return oe(r.left)||oe(r.right)||c(r.right,r.left)||c(r.left,r.right);case 93:return oe(r.left);case 26:return l(r.right)}return!1;case 192:return 51===e.operator&&l(e.operand)}return!1}function M(e){return 71===e.kind||99===e.kind||97===e.kind||179===e.kind&&M(e.expression)}function c(e,t){return 189===e.kind&&oe(e.expression)&&9===t.kind}function oe(e){switch(e.kind){case 185:return oe(e.expression);case 194:switch(e.operatorToken.kind){case 58:return oe(e.left);case 26:return oe(e.right)}}return M(e)}function re(){return{flags:4,antecedents:void 0}}function be(){return{flags:8,antecedents:void 0}}function d(e){e.flags|=512&e.flags?1024:512}function ie(e,t){1&t.flags||V.contains(e.antecedents,t)||((e.antecedents||(e.antecedents=[])).push(t),d(t))}function p(e,t,n){return 1&t.flags?t:n?101===n.kind&&64&e||86===n.kind&&32&e?Z:l(n)?(d(t),{flags:e,expression:n,antecedent:t}):t:32&e?t:Z}function ve(e,t,n,o){return l(t.expression)?(d(e),{flags:128,switchStatement:t,clauseStart:n,clauseEnd:o,antecedent:e}):e}function Te(e,t){return d(e),{flags:16,antecedent:e,node:t}}function Ee(e,t){return d(e),{flags:256,antecedent:e,node:t}}function se(e){var t=e.antecedents;return t?1===t.length?t[0]:e:Z}function Se(e){for(;;)if(185===e.kind)e=e.expression;else{if(192!==e.kind||51!==e.operator)return 194===e.kind&&(53===e.operatorToken.kind||54===e.operatorToken.kind);e=e.operand}}function ae(e,t,n){var o=$,r=Y;$=t,Y=n,ue(e),$=o,Y=r,e&&Se(e)||(ie(t,p(32,K,e)),ie(n,p(64,K,e)))}function Ce(e,t,n){var o=j,r=z;j=t,z=n,ue(e),j=o,z=r}function xe(e,t,n){e=218===e.kind?t:n;e&&(ie(e,K),K=Z)}function g(e){194===e.kind&&58===e.operatorToken.kind?le(e.left):le(e)}function le(e){if(M(e))K=Te(K,e);else if(177===e.kind)for(var t=0,n=e.elements;t<n.length;t++){var o=n[t];198===o.kind?le(o.expression):g(o)}else if(178===e.kind)for(var r=0,i=e.properties;r<i.length;r++){var s=i[r];261===s.kind?g(s.initializer):262===s.kind?le(s.name):263===s.kind&&le(s.expression)}}function Be(e,t,n){var o={flags:4,antecedents:void 0};53===e.operatorToken.kind?ae(e.left,o,n):ae(e.left,t,o),K=se(o),ue(e.operatorToken),ae(e.right,t,n)}function E(e){n&&(n.nextContainer=e),n=e}function F(e,t,n){switch(w.kind){case 233:return s(e,t,n);case 265:return o=e,r=t,i=n,V.isExternalModule(W)?s(o,r,i):L(W.locals,void 0,o,r,i);case 199:case 229:return o=e,r=t,i=n,V.hasModifier(o,32)?L(w.symbol.exports,w.symbol,o,r,i):L(w.symbol.members,w.symbol,o,r,i);case 232:return L(w.symbol.exports,w.symbol,e,t,n);case 163:case 285:case 178:case 230:case 254:return L(w.symbol.members,w.symbol,e,t,n);case 160:case 161:case 155:case 156:case 157:case 151:case 150:case 152:case 153:case 154:case 228:case 186:case 187:case 273:case 231:case 172:return L(w.locals,void 0,e,t,n)}var o,r,i}function Ae(r){V.isInAmbientContext(r)&&!function(){var e=265===r.kind?r:r.body;if(e&&(265===e.kind||234===e.kind))for(var t=0,n=e.statements;t<n.length;t++){var o=n[t];if(244===o.kind||243===o.kind)return 1}}()?r.flags|=32:r.flags&=-33}function Ie(e){var t=de(e),n=0!==t;return F(e,n?512:1024,n?106639:0),t}function U(e,t,n){n=P(t,n);8&t&&(n.parent=w.symbol),fe(n,e,t)}function H(e,t,n){switch(O.kind){case 233:s(e,t,n);break;case 265:if(V.isExternalModule(w)){s(e,t,n);break}default:O.locals||(O.locals=V.createSymbolTable(),E(O)),L(O.locals,void 0,e,t,n)}}function De(e){!(R&&108<=e.originalKeywordKind&&e.originalKeywordKind<=116)||V.isIdentifierName(e)||V.isInAmbientContext(e)||W.parseDiagnostics.length||W.bindDiagnostics.push(te(e,V.getContainingClass(e)?V.Diagnostics.Identifier_expected_0_is_a_reserved_word_in_strict_mode_Class_definitions_are_automatically_in_strict_mode:W.externalModuleIndicator?V.Diagnostics.Identifier_expected_0_is_a_reserved_word_in_strict_mode_Modules_are_automatically_in_strict_mode:V.Diagnostics.Identifier_expected_0_is_a_reserved_word_in_strict_mode,V.declarationNameToString(e)))}function ce(e,t){var n,o;t&&71===t.kind&&V.isIdentifier(o=n=t)&&("eval"===o.escapedText||"arguments"===o.escapedText)&&(o=V.getErrorSpanForNode(W,t),W.bindDiagnostics.push(V.createFileDiagnostic(W,o.start,o.length,V.getContainingClass(e)?V.Diagnostics.Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode:W.externalModuleIndicator?V.Diagnostics.Invalid_use_of_0_Modules_are_automatically_in_strict_mode:V.Diagnostics.Invalid_use_of_0_in_strict_mode,V.idText(n))))}function Ne(e){R&&ce(e,e.name)}function we(e,t,n,o,r){e=V.getSpanOfTokenAtPosition(W,e.pos);W.bindDiagnostics.push(V.createFileDiagnostic(W,e.start,e.length,t,n,o,r))}function ue(e){if(e){e.parent=N;var t=R;if(V.isInJavaScriptFile(e)){var n=e;if(V.hasJSDocNodes(n))for(var o=0,r=n.jsDoc;o<r.length;o++){var i=r[o];if(i.tags)for(var s=0,a=i.tags;s<a.length;s++){var l,c=a[s];283===c.kind&&(l=N,N=i,ue(c),N=l)}}}(function(e){switch(e.kind){case 71:if(e.isInJSDocNamespace){for(var t=e.parent;t&&283!==t.kind;)t=t.parent;H(t,524288,793064);break}case 99:return K&&(V.isExpression(e)||262===N.kind)&&(e.flowNode=K),De(e);case 179:K&&M(e)&&(e.flowNode=K);break;case 194:switch(V.getSpecialPropertyAssignmentKind(e)){case 1:Le(e);break;case 2:I=e,D=V.getRightMostAssignedExpression(I.right),V.isEmptyObjectLiteral(D)||Me(D)?Pe(I):(Pe(I),L(W.symbol.exports,W.symbol,I,1049092,0));break;case 3:D=e.left,I=D.expression,A=I.expression,D.parent=e,(A.parent=I).parent=D,Ue(A.escapedText,D,!0);break;case 4:var n=e,o=(V.Debug.assert(V.isInJavaScriptFile(n)),V.getThisContainer(n,!1));switch(o.kind){case 228:case 186:o.symbol.members=o.symbol.members||V.createSymbolTable(),L(o.symbol.members,o.symbol,n,4,0);break;case 152:case 149:case 151:case 153:case 154:var r=o.parent;L(V.hasModifier(o,32)?r.symbol.exports:r.symbol.members,r.symbol,n,4,0,!0)}break;case 5:x=(A=e).left,B=x.expression,V.isIdentifier(B)&&(x.parent=A,B.parent=x,Fe(B)?Le(A):Ue(B.escapedText,x,!1));break;case 0:break;default:V.Debug.fail("Unknown special property assignment kind")}return C=e,R&&V.isLeftHandSideExpression(C.left)&&V.isAssignmentOperator(C.operatorToken.kind)&&ce(C,C.left);case 260:return R&&e.variableDeclaration&&ce(e,e.variableDeclaration.name);case 188:return R&&71===e.expression.kind&&(C=V.getErrorSpanForNode(W,e.expression),W.bindDiagnostics.push(V.createFileDiagnostic(W,C.start,C.length,V.Diagnostics.delete_cannot_be_called_on_an_identifier_in_strict_mode)));case 8:return R&&4&e.numericLiteralFlags&&W.bindDiagnostics.push(te(e,V.Diagnostics.Octal_literals_are_not_allowed_in_strict_mode));case 193:return R&&ce(e,e.operand);case 192:return!R||43!==e.operator&&44!==e.operator||ce(e,e.operand);case 220:return R&&we(e,V.Diagnostics.with_statements_are_not_allowed_in_strict_mode);case 169:return ge=!0;case 158:return E=e.parameterName,S=e.type,E&&71===E.kind&&De(E),E&&169===E.kind&&(ge=!0),ue(S);case 145:return F(e,262144,530920);case 146:return E=e,R&&!V.isInAmbientContext(E)&&ce(E,E.name),V.isBindingPattern(E.name)?U(E,1,"__"+V.indexOf(E.parent.parameters,E)):F(E,1,107455),V.isParameterPropertyDeclaration(E)&&L((S=E.parent.parent).symbol.members,S.symbol,E,4|(E.questionToken?16777216:0),0);case 226:return He(e);case 176:return e.flowNode=K,He(e);case 149:case 148:return Ve(e,4|(e.questionToken?16777216:0),0);case 261:case 262:return Ve(e,4,0);case 264:return Ve(e,8,900095);case 155:case 156:case 157:return F(e,131072,0);case 151:case 150:return Ve(e,8192|(e.questionToken?16777216:0),V.isObjectLiteralMethod(e)?0:99263);case 228:return b=e,W.isDeclarationFile||V.isInAmbientContext(b)||V.isAsyncFunction(b)&&(he|=1024),Ne(b),(R?(v=b,pe<2&&265!==O.kind&&233!==O.kind&&!V.isFunctionLike(O)&&(T=V.getErrorSpanForNode(W,v),W.bindDiagnostics.push(V.createFileDiagnostic(W,T.start,T.length,V.getContainingClass(v)?V.Diagnostics.Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Class_definitions_are_automatically_in_strict_mode:W.externalModuleIndicator?V.Diagnostics.Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Modules_are_automatically_in_strict_mode:V.Diagnostics.Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5))),H):F)(b,16,106927);case 152:return F(e,16384,0);case 153:return Ve(e,32768,41919);case 154:return Ve(e,65536,74687);case 160:case 273:case 161:return fe(v=P(131072,ye(T=e)),T,131072),fe(b=P(2048,"__type"),T,2048),b.members=V.createSymbolTable(),b.members.set(v.escapedName,v);case 163:case 285:case 172:return U(e,2048,"__type");case 178:var i=e;if(R)for(var s=V.createUnderscoreEscapedMap(),a=0,l=i.properties;a<l.length;a++){var c,u,d=l[a];263!==d.kind&&71===d.name.kind&&(c=d.name,d=261===d.kind||262===d.kind||151===d.kind?1:2,(u=s.get(c.escapedText))?1==d&&1===u&&(u=V.getErrorSpanForNode(W,c),W.bindDiagnostics.push(V.createFileDiagnostic(W,u.start,u.length,V.Diagnostics.An_object_literal_cannot_have_multiple_properties_with_the_same_name_in_strict_mode))):s.set(c.escapedText,d))}return U(i,4096,"__object");case 186:case 187:return i=e,W.isDeclarationFile||V.isInAmbientContext(i)||V.isAsyncFunction(i)&&(he|=1024),K&&(i.flowNode=K),Ne(i),k=i.name?i.name.escapedText:"__function",U(i,16,k);case 181:V.isInJavaScriptFile(e)&&(k=e,!W.commonJsModuleIndicator)&&V.isRequireCall(k,!1)&&Pe(k);break;case 199:case 229:return R=!0,229===(_=e).kind?H(_,32,899519):(U(_,32,_.name?_.name.escapedText:"__class"),_.name&&_e.set(_.name.escapedText,!0)),m=_.symbol,f=P(4194308,"prototype"),(y=m.exports.get(f.escapedName))&&(_.name&&(_.name.parent=_),W.bindDiagnostics.push(te(y.declarations[0],V.Diagnostics.Duplicate_identifier_0,V.symbolName(f)))),m.exports.set(f.escapedName,f),f.parent=m;case 230:return H(e,64,792968);case 231:return H(e,524288,793064);case 232:return _=e,V.isConst(_)?H(_,128,899967):H(_,256,899327);case 233:return Ae(y=e),V.isAmbientModule(y)?(V.hasModifier(y,1)&&we(y,V.Diagnostics.export_modifier_cannot_be_applied_to_ambient_modules_and_module_augmentations_since_they_are_always_visible),V.isExternalModuleAugmentation(y)?Ie(y):(g=void 0,9===y.name.kind&&(h=y.name.text,V.hasZeroOrOneAsteriskCharacter(h)?g=V.tryParsePattern(h):we(y.name,V.Diagnostics.Pattern_0_can_have_at_most_one_Asterisk_character,h)),h=F(y,512,106639),g&&(W.patternAmbientModules||(W.patternAmbientModules=[])).push({pattern:g,symbol:h}))):0!==(g=Ie(y))&&(304&y.symbol.flags?y.symbol.constEnumOnlyModule=!1:(h=2===g,void 0===y.symbol.constEnumOnlyModule?y.symbol.constEnumOnlyModule=h:y.symbol.constEnumOnlyModule=y.symbol.constEnumOnlyModule&&h));case 254:return U(e,4096,"__jsxAttributes");case 253:return F(e,4,0);case 237:case 240:case 242:case 246:return F(e,2097152,2097152);case 236:return(f=e).modifiers&&f.modifiers.length&&W.bindDiagnostics.push(te(f,V.Diagnostics.Modifiers_cannot_appear_here)),265!==f.parent.kind?W.bindDiagnostics.push(te(f,V.Diagnostics.Global_module_exports_may_only_appear_at_top_level)):(m=f.parent,V.isExternalModule(m)?m.isDeclarationFile?(W.symbol.globalExports=W.symbol.globalExports||V.createSymbolTable(),L(W.symbol.globalExports,W.symbol,f,2097152,2097152)):W.bindDiagnostics.push(te(f,V.Diagnostics.Global_module_exports_may_only_appear_in_declaration_files)):W.bindDiagnostics.push(te(f,V.Diagnostics.Global_module_exports_may_only_appear_in_module_files)));case 239:return e.name&&F(e,2097152,2097152);case 244:return g=e,w.symbol&&w.symbol.exports?g.exportClause||L(w.symbol.exports,w.symbol,g,8388608,0):U(g,8388608,ye(g));case 243:return h=e,w.symbol&&w.symbol.exports?(p=243===h.kind&&V.exportAssignmentIsAlias(h)?2097152:4,L(w.symbol.exports,w.symbol,h,p,2097204)):U(h,2097152,ye(h));case 265:return Oe(e.statements),Ae(W),V.isExternalModule(W)&&Re();case 207:if(!V.isFunctionLike(e.parent))return;case 234:return Oe(e.statements);case 279:if(285!==e.parent.kind)break;case 284:return F(e,e.isBracketed||e.typeExpression&&272===e.typeExpression.type.kind?16777220:4,0);case 283:p=e.fullName;p&&71!==p.kind||H(e,524288,793064)}var p,g,h,_,m,f,y,k,b,v,T,E,S,C,x,B,A,I,D})(e),142<e.kind?(n=N,0===(d=function(e){switch(e.kind){case 199:case 229:case 232:case 178:case 163:case 285:case 254:return 1;case 230:return 65;case 233:case 231:case 172:return 33;case 265:return 37;case 151:if(V.isObjectLiteralOrClassExpressionMethod(e))return 173;case 152:case 228:case 150:case 153:case 154:case 155:case 273:case 160:case 156:case 157:case 161:return 45;case 186:case 187:return 61;case 234:return 4;case 149:return e.initializer?4:0;case 260:case 214:case 215:case 216:case 235:return 2;case 207:return V.isFunctionLike(e.parent)?0:2}return 0}(N=e))?T(e):(u=e,k=w,b=O,1&(d=d)?(w=O=u,32&d&&(w.locals=V.createSymbolTable()),E(w)):2&d&&((O=u).locals=void 0),4&d?(p=K,g=j,h=z,_=X,m=J,f=Q,y=16&d&&!V.hasModifier(u,256)&&!!V.getImmediatelyInvokedFunctionExpression(u),X=y?{flags:4,antecedents:void 0}:(K={flags:2},void(144&d&&(K.container=u))),J=z=j=void 0,Q=!1,T(u),u.flags&=-1409,!(1&K.flags)&&8&d&&V.nodeIsPresent(u.body)&&(u.flags|=128,Q)&&(u.flags|=256),265===u.kind&&(u.flags|=he),K=y?(ie(X,K),se(X)):p,j=g,z=h,X=_,J=m,Q=f):64&d?(ge=!1,T(u),u.flags=ge?64|u.flags:-65&u.flags):T(u),w=k,O=b),N=n):v||0!=(536870912&e.transformFlags)||(ee|=S(e,0)),R=t}var u,d,p,g,h,_,m,f,y,k,b}function Oe(e){if(!R)for(var t=0,n=e;t<n.length;t++){var o=n[t];if(!V.isPrologueDirective(o))return;if('"use strict"'===(o=V.getTextOfNodeFromSourceText(W.text,o.expression))||"'use strict'"===o)return void(R=!0)}}function Re(){U(W,512,'"'+V.removeFileExtension(W.fileName)+'"')}function Pe(e){W.commonJsModuleIndicator||(W.commonJsModuleIndicator=e,W.externalModuleIndicator)||Re()}function Le(e){Pe(e),L(W.symbol.exports,W.symbol,e.left,1048580,0)}function Me(e){return V.isExportsIdentifier(e)||V.isModuleExportsPropertyAccessExpression(e)||V.isIdentifier(e)&&Fe(e)}function Fe(e){e=h(e.escapedText);return e&&e.valueDeclaration&&V.isVariableDeclaration(e.valueDeclaration)&&e.valueDeclaration.initializer&&function e(t){return Me(t)||V.isAssignmentExpression(t,!0)&&(e(t.left)||e(t.right))}(e.valueDeclaration.initializer)}function h(e){return w.symbol&&w.symbol.exports&&w.symbol.exports.get(e)||w.locals&&w.locals.get(e)}function Ue(e,t,n){e=h(e);(e=e&&V.isDeclarationOfFunctionOrClassExpression(e)?e.valueDeclaration.initializer.symbol:e)&&48&e.flags&&L(n?e.members||(e.members=V.createSymbolTable()):e.exports||(e.exports=V.createSymbolTable()),e,t,4,0)}function He(e){R&&ce(e,e.name),V.isBindingPattern(e.name)||(V.isBlockOrCatchScoped(e)?H(e,2,107455):V.isParameterDeclaration(e)?F(e,1,107455):F(e,1,107454))}function Ve(e,t,n){return W.isDeclarationFile||V.isInAmbientContext(e)||!V.isAsyncFunction(e)||(he|=1024),K&&V.isObjectLiteralOrClassExpressionMethod(e)&&(e.flowNode=K),V.hasDynamicName(e)?U(e,t,"__computed"):F(e,t,n)}function S(e,t){var L,n,o,r,i,s,a,l,c,u,d,p,g,h,_,m,f,y,k,b,v,T,E,S,C,x,B,A,I,D,M,F=e.kind;switch(F){case 181:return I=A=t,D=(B=e).expression,M=D.kind,B.typeArguments&&(I|=3),(524288&A||function(e){switch(M){case 97:return 1;case 179:case 180:return 97===e.expression.kind}}(D))&&(I|=192),91===D.kind&&(I|=67108864,16384&A)&&(I|=32768),B.transformFlags=536870912|I,-537396546&I;case 182:return D=t,e.typeArguments&&(D|=3),524288&t&&(D|=192),e.transformFlags=536870912|D,-537396546&D;case 233:return A=e,B=t,I=3,0==(2&V.getModifierFlags(A))&&(I|=B),A.transformFlags=536870912|I,-574674242&I;case 185:return S=t,C=e.expression,202!==(x=C.kind)&&184!==x||(S|=3),1024&C.transformFlags&&(S|=1024),e.transformFlags=536870912|S,-536872258&S;case 194:return x=t,C=e.operatorToken.kind,S=e.left.kind,58===C&&178===S?x|=3272:58===C&&177===S?x|=3264:40!==C&&62!==C||(x|=32),e.transformFlags=536870912|x,-536872258&x;case 210:return E=t,1024&e.expression.transformFlags&&(E|=192),e.transformFlags=536870912|E,-536872258&E;case 146:return k=E=t,b=(y=e).name,v=y.initializer,T=y.dotDotDotToken,(y.questionToken||y.type||4096&E||V.isThisIdentifier(b))&&(k|=3),V.hasModifier(y,92)&&(k|=262147),1048576&E&&(k|=8),(8388608&E||v||T)&&(k|=131264),y.transformFlags=536870912|k,-536872258&k;case 187:return b=e,T=192|(v=t),(V.hasModifier(b,2270)||b.typeParameters||b.type)&&(T|=3),V.hasModifier(b,256)&&(T|=16),1048576&v&&(T|=8),16384&v&&(T|=32768),b.transformFlags=536870912|T,-601249090&T;case 186:return y=e,f=k=t,(V.hasModifier(y,2270)||y.typeParameters||y.type)&&(f|=3),V.hasModifier(y,256)&&(f|=y.asteriskToken?8:16),1048576&k&&(f|=8),163840&k&&(f|=192),y.asteriskToken&&(f|=768),y.transformFlags=536870912|f,-601281858&f;case 228:return f=e,h=t,m=V.getModifierFlags(f),!f.body||2&m?_=3:(_=33554432|h,(2270&m||f.typeParameters||f.type)&&(_|=3),256&m&&(_|=f.asteriskToken?8:16),1048576&h&&(_|=8),163840&h&&(_|=192),f.asteriskToken&&(_|=768)),f.transformFlags=536870912|_,-601281858&_;case 226:return m=t,m|=8388800,1048576&t&&(m|=8),e.type&&(m|=3),e.transformFlags=536870912|m,-536872258&m;case 227:return h=33554432|t,8388608&t&&(h|=192),3&e.flags&&(h|=4194496),e.transformFlags=536870912|h,-546309442&h;case 208:return _=t,g=(d=e).declarationList.transformFlags,V.hasModifier(d,2)?p=3:(p=_,8388608&g&&(p|=192)),d.transformFlags=536870912|p,-536872258&p;case 222:return g=e,4194304&(d=t)&&V.isIterationStatement(g,!0)&&(d|=192),g.transformFlags=536870912|d,-536872258&d;case 229:return p=e,c=t,V.hasModifier(p,2)?u=3:(u=192|c,(274432&c||p.typeParameters)&&(u|=3),65536&c&&(u|=16384)),p.transformFlags=536870912|u,-539358530&u;case 199:return c=e,u=192|t,(274432&t||c.typeParameters)&&(u|=3),65536&t&&(u|=16384),c.transformFlags=536870912|u,-539358530&u;case 259:var N=e,U=t;switch(N.token){case 85:U|=192;break;case 108:U|=3;break;default:V.Debug.fail("Unexpected token for heritage clause")}return N.transformFlags=536870912|U,-536872258&U;case 260:return N=t,(l=e).variableDeclaration?V.isBindingPattern(l.variableDeclaration.name)&&(N|=192):N|=8,l.transformFlags=536870912|N,-537920834&N;case 201:return l=192|t,e.typeArguments&&(l|=3),e.transformFlags=536870912|l,-536872258&l;case 152:return i=e,a=s=t,!V.hasModifier(i,2270)&&i.body||(a|=3),1048576&s&&(a|=8),i.transformFlags=536870912|a,-601015618&a;case 149:return s=3|t,e.initializer&&(s|=8192),e.transformFlags=536870912|s,-536872258&s;case 151:return a=192|(i=t),((r=e).decorators||V.hasModifier(r,2270)||r.typeParameters||r.type||!r.body)&&(a|=3),1048576&i&&(a|=8),V.hasModifier(r,256)&&(a|=r.asteriskToken?8:16),r.asteriskToken&&(a|=768),r.transformFlags=536870912|a,-601015618&a;case 153:case 154:return o=r=t,((n=e).decorators||V.hasModifier(n,2270)||n.type||!n.body)&&(o|=3),1048576&r&&(o|=8),n.transformFlags=536870912|o,-601015618&o;case 237:return n=e,o=t,V.isExternalModuleImportEqualsDeclaration(n)||(o|=3),n.transformFlags=536870912|o,-536872258&o;case 179:return L=t,97===e.expression.kind&&(L|=16384),e.transformFlags=536870912|L,-536872258&L;default:var w=e,O=t,R=O,P=536872257;switch(F){case 120:case 191:R|=24;break;case 114:case 112:case 113:case 117:case 124:case 76:case 232:case 264:case 184:case 202:case 203:case 131:R|=3;break;case 249:case 250:case 251:case 10:case 252:case 253:case 254:case 255:case 256:R|=4;break;case 13:case 14:case 15:case 16:case 196:case 183:case 262:case 115:case 204:R|=192;break;case 9:w.hasExtendedUnicodeEscape&&(R|=192);break;case 8:48&w.numericLiteralFlags&&(R|=192);break;case 216:w.awaitModifier&&(R|=8),R|=192;break;case 197:R|=16777416;break;case 119:case 133:case 130:case 134:case 136:case 122:case 137:case 105:case 145:case 148:case 150:case 155:case 156:case 157:case 158:case 159:case 160:case 161:case 162:case 163:case 164:case 165:case 166:case 167:case 168:case 230:case 231:case 169:case 170:case 171:case 172:case 173:case 236:P=-(R=3);break;case 144:R|=2097152,16384&O&&(R|=65536);break;case 198:R|=524480;break;case 263:R|=1048584;break;case 97:R|=192;break;case 99:R|=16384;break;case 174:R|=8388800,524288&O&&(R|=1048584),P=537396545;break;case 175:R|=8388800,P=537396545;break;case 176:R|=192,w.dotDotDotToken&&(R|=524288);break;case 147:R|=4099;break;case 178:P=540087617,2097152&O&&(R|=192),65536&O&&(R|=16384),1048576&O&&(R|=8);break;case 177:case 182:P=537396545,524288&O&&(R|=192);break;case 212:case 213:case 214:case 215:4194304&O&&(R|=192);break;case 265:32768&O&&(R|=192);break;case 219:case 217:case 218:R|=33554432}return w.transformFlags=536870912|R,R&~P}}function _(e){if(158<=e&&e<=173)return-3;switch(e){case 181:case 182:case 177:return 537396545;case 233:return 574674241;case 146:return 536872257;case 187:return 601249089;case 186:case 228:return 601281857;case 227:return 546309441;case 229:case 199:return 539358529;case 152:return 601015617;case 151:case 153:case 154:return 601015617;case 119:case 133:case 130:case 136:case 134:case 122:case 137:case 105:case 145:case 148:case 150:case 155:case 156:case 157:case 230:case 231:return-3;case 178:return 540087617;case 260:return 537920833;case 174:case 175:return 537396545;default:return 536872257}}V.bindSourceFile=function(e,t){V.performance.mark("beforeBind"),i(e,t),V.performance.mark("afterBind"),V.performance.measure("Bind","beforeBind","afterBind")},V.computeTransformFlagsForNode=S,V.getTransformFlagsSubtreeExclusions=_}(ts=ts||{}),function(y){y.createGetSymbolWalker=function(r,u,d,p,g,h,_,m,f){return function(n){void 0===n&&(n=function(){return!0});var i=[],o=[];return{walkType:function(e){try{return a(e),{visitedTypes:y.getOwnValues(i),visitedSymbols:y.getOwnValues(o)}}finally{y.clear(i),y.clear(o)}},walkSymbol:function(e){try{return c(e),{visitedTypes:y.getOwnValues(i),visitedSymbols:y.getOwnValues(o)}}finally{y.clear(i),y.clear(o)}}};function a(e){var t,n,o,r;!e||i[e.id]||c((i[e.id]=e).symbol)||(32768&e.flags&&(4&(n=(t=e).objectFlags)&&(a((r=e).target),y.forEach(r.typeArguments,a)),32&n&&(a((r=e).typeParameter),a(r.constraintType),a(r.templateType),a(r.modifiersType)),3&n&&(s(o=e),y.forEach(o.typeParameters,a),y.forEach(d(o),a),a(o.thisType)),24&n)&&s(t),16384&e.flags&&a(m(e)),196608&e.flags&&y.forEach(e.types,a),262144&e.flags&&a(e.type),524288&e.flags&&(a((o=e).objectType),a(o.indexType),a(o.constraint)))}function l(e){e.typePredicate&&a(e.typePredicate.type),y.forEach(e.typeParameters,a);for(var t=0,n=e.parameters;t<n.length;t++)c(n[t]);a(r(e)),a(u(e))}function s(e){a(_(e,0)),a(_(e,1));for(var e=p(e),t=0,n=e.callSignatures;t<n.length;t++)l(n[t]);for(var o=0,r=e.constructSignatures;o<r.length;o++)l(r[o]);for(var i=0,s=e.properties;i<s.length;i++)c(s[i])}function c(e){if(e){var t=y.getSymbolId(e);if(!o[t]){if(o[t]=e,!n(e))return!0;a(g(e)),1952&e.flags&&e.exports.forEach(c),y.forEach(e.declarations,function(e){e.type&&162===e.type.kind&&(e=e.type,c(h(f(e.exprName))))})}}}}}}(ts=ts||{}),function(A){function I(e){e.trace(A.formatMessage.apply(void 0,arguments))}function d(e,t){return e.traceResolution&&void 0!==t.trace}function u(e,t){return t&&{path:t.path,extension:t.ext,packageId:e}}function D(e){return u(void 0,e)}var _,e;function p(e){if(e)return A.Debug.assert(A.extensionIsTypeScript(e.extension)),{fileName:e.path,packageId:e.packageId}}function g(e,t,n){return{resolvedModule:e&&{resolvedFileName:e.path,extension:e.extension,isExternalLibraryImport:t,packageId:e.packageId},failedLookupLocations:n}}function h(e,t){try{var n=t.readFile(e);return n?JSON.parse(n):{}}catch(e){return{}}}function m(e,t){return e.typeRoots||(e.configFilePath?r=A.getDirectoryPath(e.configFilePath):t.getCurrentDirectory&&(r=t.getCurrentDirectory()),void 0!==r?(e=r,(n=t).directoryExists?(A.forEachAncestorDirectory(A.normalizePath(e),function(e){e=A.combinePaths(e,i);n.directoryExists(e)&&(o=o||[]).push(e)}),o):[A.combinePaths(e,i)]):void 0);var n,o,r}A.trace=I,A.isTraceEnabled=d,(e=_=_||{})[e.TypeScript=0]="TypeScript",e[e.JavaScript=1]="JavaScript",e[e.DtsOnly=2]="DtsOnly",A.getEffectiveTypeRoots=m;var i=A.combinePaths("node_modules","@types");function f(e,t,n,o,r,i){if(A.isExternalModuleNameRelative(t)){var s=e,a=t,l=o,c=r,u=i;if(u.compilerOptions.rootDirs){u.traceEnabled&&I(u.host,A.Diagnostics.rootDirs_option_is_set_using_it_to_resolve_relative_module_name_0,a);for(var d,p,g=A.normalizePath(A.combinePaths(n,a)),h=0,_=u.compilerOptions.rootDirs;h<_.length;h++){var m=_[h],f=A.normalizePath(m),y=(A.endsWith(f,A.directorySeparator)||(f+=A.directorySeparator),A.startsWith(g,f)&&(void 0===p||p.length<f.length));u.traceEnabled&&I(u.host,A.Diagnostics.Checking_if_0_is_the_longest_matching_prefix_for_1_2,f,g,y),y&&(p=f,d=m)}if(p){u.traceEnabled&&I(u.host,A.Diagnostics.Longest_matching_prefix_for_0_is_1,g,p);var k=g.substr(p.length),a=(u.traceEnabled&&I(u.host,A.Diagnostics.Loading_0_from_the_root_dir_1_candidate_location_2,k,p,g),l(s,g,c,!N(n,u.host),u));if(a)return a;u.traceEnabled&&I(u.host,A.Diagnostics.Trying_other_entries_in_rootDirs);for(var b=0,v=u.compilerOptions.rootDirs;b<v.length;b++)if((m=v[b])!==d){var T=A.combinePaths(A.normalizePath(m),k),T=(u.traceEnabled&&I(u.host,A.Diagnostics.Loading_0_from_the_root_dir_1_candidate_location_2,k,m,T),l(s,T,c,!N(A.getDirectoryPath(T),u.host),u));if(T)return T}u.traceEnabled&&I(u.host,A.Diagnostics.Module_resolution_using_rootDirs_has_failed)}}}else{var E,S=e,n=t,C=o,x=r,B=i;if(B.compilerOptions.baseUrl)return B.traceEnabled&&I(B.host,A.Diagnostics.baseUrl_option_is_set_to_0_using_this_value_to_resolve_non_relative_module_name_1,B.compilerOptions.baseUrl,n),a=void 0,B.compilerOptions.paths&&(B.traceEnabled&&I(B.host,A.Diagnostics.paths_option_is_specified_looking_for_a_pattern_to_match_module_name_0,n),a=A.matchPatternOrExact(A.getOwnKeys(B.compilerOptions.paths),n)),a?(E=A.isString(a)?void 0:A.matchedText(a,n),a=A.isString(a)?a:A.patternText(a),B.traceEnabled&&I(B.host,A.Diagnostics.Module_name_0_matched_pattern_1,n,a),A.forEach(B.compilerOptions.paths[a],function(e){var t=E?e.replace("*",E):e,n=A.normalizePath(A.combinePaths(B.compilerOptions.baseUrl,t)),e=(B.traceEnabled&&I(B.host,A.Diagnostics.Trying_substitution_0_candidate_module_location_Colon_1,e,t),A.tryGetExtensionFromPath(n));if(void 0!==e){t=w(n,x,!1,B);if(void 0!==t)return D({path:t,ext:e})}return C(S,n,x,!N(A.getDirectoryPath(n),B.host),B)})):(a=A.normalizePath(A.combinePaths(B.compilerOptions.baseUrl,n)),B.traceEnabled&&I(B.host,A.Diagnostics.Resolving_module_name_0_relative_to_base_url_1_2,n,B.compilerOptions.baseUrl,a),C(S,a,x,!N(A.getDirectoryPath(a),B.host),B))}}function y(e,t,n,o,r){return s(e,A.getDirectoryPath(t),n,o,r,!1)}function s(o,r,i,s,a,e){var l=d(i,s),c=[],u={compilerOptions:i,host:s,traceEnabled:l},e=!e&&t(_.TypeScript)||t(_.JavaScript);return e&&e.value?g((e=e.value).resolved,e.isExternalLibraryImport,c):{resolvedModule:void 0,failedLookupLocations:c};function t(e){var t=f(e,o,r,function(e,t,n,o,r){return b(e,t,n,o,r,!0)},c,u);if(t)return F({resolved:t,isExternalLibraryImport:!1});if(A.isExternalModuleNameRelative(o))return n=(t=A.normalizePathAndParts(A.combinePaths(r,o))).path,t=t.parts,(n=b(e,n,c,!1,u,!0))&&F({resolved:n,isExternalLibraryImport:A.contains(t,"node_modules")});l&&I(s,A.Diagnostics.Loading_module_0_from_node_modules_folder_target_file_type_1,o,_[e]);var n=O(e,o,r,c,u,a);return n?(t=n.value,{value:(t=i.preserveSymlinks?t:t&&__assign({},n.value,{path:k(n.value.path,s,l),extension:n.value.extension}))&&{resolved:t,isExternalLibraryImport:!0}}):void 0}}function k(e,t,n){var o;return t.realpath?(o=A.normalizePath(t.realpath(e)),n&&I(t,A.Diagnostics.Resolving_real_path_for_0_result_1,e,o),o):e}function b(e,t,n,o,r,i){if(r.traceEnabled&&I(r.host,A.Diagnostics.Loading_module_as_file_Slash_folder_candidate_module_location_0_target_file_type_1,t,_[e]),!A.pathEndsWithDirectorySeparator(t)){o||N(s=A.getDirectoryPath(t),r.host)||(r.traceEnabled&&I(r.host,A.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,s),o=!0);var s=T(e,t,n,o,r);if(s)return D(s)}return o||N(t,r.host)||(r.traceEnabled&&I(r.host,A.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,t),o=!0),E(e,t,n,o,r,i)}function N(e,t){return!t.directoryExists||t.directoryExists(e)}function v(e,t,n,o,r){return D(T(e,t,n,o,r))}function T(e,t,n,o,r){var i,s=a(t,e,n,o,r);return s||(A.hasJavaScriptFileExtension(t)?(s=A.removeFileExtension(t),r.traceEnabled&&(i=t.substring(s.length),I(r.host,A.Diagnostics.File_name_0_has_a_1_extension_stripping_it,t,i)),a(s,e,n,o,r)):void 0)}function a(n,e,o,r,i){var t;switch(r||(t=A.getDirectoryPath(n))&&(r=!N(t,i.host)),e){case _.DtsOnly:return s(".d.ts");case _.TypeScript:return s(".ts")||s(".tsx")||s(".d.ts");case _.JavaScript:return s(".js")||s(".jsx")}function s(e){var t=w(n+e,o,r,i);return t&&{path:t,ext:e}}}function w(e,t,n,o){if(!n){if(o.host.fileExists(e))return o.traceEnabled&&I(o.host,A.Diagnostics.File_0_exist_use_it_as_a_name_resolution_result,e),e;o.traceEnabled&&I(o.host,A.Diagnostics.File_0_does_not_exist,e)}t.push(e)}function E(e,t,n,o,r,i){var i=(i=void 0===i?!0:i)?C(t,"",n,o,r):{packageJsonContent:void 0,packageId:void 0},s=i.packageJsonContent;return u(i.packageId,S(e,t,n,o,r,s))}function S(e,g,t,n,o,h){var r=h&&function(e,t,n){s=e!==_.JavaScript,o=h,r=g,i=n;var o,r,i,s=s?a("typings")||a("types"):a("main");function a(e){if(A.hasProperty(o,e)){var t,n=o[e];if(A.isString(n))return t=A.normalizePath(A.combinePaths(r,n)),i.traceEnabled&&I(i.host,A.Diagnostics.package_json_has_0_field_1_that_references_2,e,n,t),t;i.traceEnabled&&I(i.host,A.Diagnostics.Expected_type_of_0_field_in_package_json_to_be_string_got_1,e,typeof n)}else i.traceEnabled&&I(i.host,A.Diagnostics.package_json_does_not_have_a_0_field,e)}if(s){var l,c=!N(A.getDirectoryPath(s),n.host),u=w(s,t,c,n);if(u){var d=u&&(l=e,d=u,void 0!==(p=A.tryGetExtensionFromPath(d))&&function(e){switch(l){case _.JavaScript:return".js"===e||".jsx"===e;case _.TypeScript:return".ts"===e||".tsx"===e||".d.ts"===e;case _.DtsOnly:return".d.ts"===e}}(p)?{path:d,ext:p}:void 0);if(d)return d;n.traceEnabled&&I(n.host,A.Diagnostics.File_0_has_an_unsupported_extension_so_skipping_it,u)}var p=b(e===_.DtsOnly?_.TypeScript:e,s,t,c,n,!1);return p?(A.Debug.assert(void 0===p.packageId),{path:p.path,ext:p.extension}):void 0}}(e,t,o);return r||(r=!n&&N(g,o.host),T(e,A.combinePaths(g,"index"),t,!r,o))}function C(e,t,n,o,r){var i,s=r.host,r=r.traceEnabled,o=!o&&N(e,s),e=x(e);return o&&s.fileExists(e)?(r&&I(s,A.Diagnostics.Found_package_json_at_0,e),{found:!0,packageJsonContent:i=h(e,s),packageId:"string"==typeof i.name&&"string"==typeof i.version?{name:i.name,subModuleName:t,version:i.version}:void 0}):(o&&r&&I(s,A.Diagnostics.File_0_does_not_exist,e),n.push(e),{found:!1,packageJsonContent:void 0,packageId:void 0})}function x(e){return A.combinePaths(e,"package.json")}function l(e,t,n,o,r,i){var s,a,l=A.normalizePath(A.combinePaths(n,t)),c=C(l,"",r,!o,i);return c.found?(s=c.packageJsonContent,a=c.packageId):(t=(c=B(t)).packageName,""!==(c=c.rest)&&(a=C(A.combinePaths(n,t),c,r,!o,i).packageId)),u(a,T(e,l,r,!o,i)||S(e,l,r,!o,i,s))}function B(e){var t=e.indexOf(A.directorySeparator);return-1===(t="@"===e[0]?e.indexOf(A.directorySeparator,t+1):t)?{packageName:e,rest:""}:{packageName:e.slice(0,t),rest:e.slice(t+1)}}function O(e,t,n,o,r,i){return R(e,t,n,o,r,!1,i)}function R(t,n,e,o,r,i,s){var a=s&&s.getOrCreateCacheForModuleName(n);return A.forEachAncestorDirectory(A.normalizeSlashes(e),function(e){if("node_modules"!==A.getBaseFileName(e))return L(a,n,e,r.traceEnabled,r.host)||F(c(t,n,e,o,r,i))})}function c(e,t,n,o,r,i){void 0===i&&(i=!1);var n=A.combinePaths(n,"node_modules"),s=N(n,r.host),i=(!s&&r.traceEnabled&&I(r.host,A.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,n),i?void 0:l(e,t,n,s,o,r));return i||(e!==_.JavaScript?(i=A.combinePaths(n,"@types"),(e=s)&&!N(i,r.host)&&(r.traceEnabled&&I(r.host,A.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,i),e=!1),l(_.DtsOnly,(n=r,t=P(s=t),n.traceEnabled&&t!==s&&I(n.host,A.Diagnostics.Scoped_package_detected_looking_in_0,t),t),i,e,o,r)):void 0)}A.resolveTypeReferenceDirective=function(o,e,t,r){var i=d(t,r),s={compilerOptions:t,host:r,traceEnabled:i},n=m(t,r);i&&(void 0===e?void 0===n?I(r,A.Diagnostics.Resolving_type_reference_directive_0_containing_file_not_set_root_directory_not_set,o):I(r,A.Diagnostics.Resolving_type_reference_directive_0_containing_file_not_set_root_directory_1,o,n):void 0===n?I(r,A.Diagnostics.Resolving_type_reference_directive_0_containing_file_1_root_directory_not_set,o,e):I(r,A.Diagnostics.Resolving_type_reference_directive_0_containing_file_1_root_directory_2,o,e,n));var a,l=[],n=n&&n.length?(i&&I(r,A.Diagnostics.Resolving_with_primary_search_path_0,n.join(", ")),A.forEach(n,function(e){var e=A.combinePaths(e,o),t=A.getDirectoryPath(e),n=N(t,r);return!n&&i&&I(r,A.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,t),p(E(_.DtsOnly,e,l,!n,s))})):void(i&&I(r,A.Diagnostics.Root_directory_cannot_be_determined_skipping_primary_search_paths)),c=!0;return n||(n=void 0!==(e=e&&A.getDirectoryPath(e))?(i&&I(r,A.Diagnostics.Looking_up_in_node_modules_folder_initial_location_0,e),!(e=p((e=O(_.DtsOnly,o,e,l,s,void 0))&&e.value))&&i&&I(r,A.Diagnostics.Type_reference_directive_0_was_not_resolved,o),e):void(i&&I(r,A.Diagnostics.Containing_file_is_not_specified_and_root_directory_cannot_be_determined_skipping_lookup_in_node_modules_folder)),c=!1),n&&(t.preserveSymlinks||(n=__assign({},n,{fileName:k(n.fileName,r,i)})),i&&I(r,A.Diagnostics.Type_reference_directive_0_was_successfully_resolved_to_1_primary_Colon_2,o,n.fileName,c),a={primary:c,resolvedFileName:n.fileName,packageId:n.packageId}),{resolvedTypeReferenceDirective:a,failedLookupLocations:l}},A.getAutomaticTypeDirectiveNames=function(e,t){if(e.types)return e.types;var n=[];if(t.directoryExists&&t.getDirectories){e=m(e,t);if(e)for(var o=0,r=e;o<r.length;o++){var i=r[o];if(t.directoryExists(i))for(var s=0,a=t.getDirectories(i);s<a.length;s++){var l=a[s],l=A.normalizePath(l),c=x(A.combinePaths(i,l));t.fileExists(c)&&null===h(c,t).typings||n.push(A.getBaseFileName(l))}}}return n},A.createModuleResolutionCache=function(s,a){var n=A.createMap(),o=A.createMap();return{getOrCreateCacheForDirectory:function(e){var e=A.toPath(e,s,a),t=n.get(e);return t||(t=A.createMap(),n.set(e,t)),t},getOrCreateCacheForModuleName:function(e){var t,i;if(!A.isExternalModuleNameRelative(e))return(t=o.get(e))||(i=A.createMap(),o.set(e,t={get:function(e){return i.get(A.toPath(e,s,a))},set:function(e,t){e=A.toPath(e,s,a);if(!i.has(e)){i.set(e,t);for(var n=function(e,t){if(void 0!==t){for(var n=A.toPath(A.getDirectoryPath(t),s,a),o=0;o<Math.min(e.length,n.length)&&e.charCodeAt(o)===n.charCodeAt(o);)o++;t=e.lastIndexOf(A.directorySeparator,o);if(!(t<0))return e.substr(0,t)}}(e,t.resolvedModule&&t.resolvedModule.resolvedFileName),o=e;;){var r=A.getDirectoryPath(o);if(r===o||i.has(r))break;if(i.set(r,t),(o=r)===n)break}}}})),t}}},A.resolveModuleName=function(e,t,n,o,r){var i=d(n,o),s=(i&&I(o,A.Diagnostics.Resolving_module_0_from_1,e,t),A.getDirectoryPath(t)),a=r&&r.getOrCreateCacheForDirectory(s),l=a&&a.get(e);if(l)i&&I(o,A.Diagnostics.Resolution_for_module_0_was_found_in_cache,e);else{var c=n.moduleResolution;switch(void 0===c?(c=A.getEmitModuleKind(n)===A.ModuleKind.CommonJS?A.ModuleResolutionKind.NodeJs:A.ModuleResolutionKind.Classic,i&&I(o,A.Diagnostics.Module_resolution_kind_is_not_specified_using_0,A.ModuleResolutionKind[c])):i&&I(o,A.Diagnostics.Explicitly_specified_module_resolution_kind_Colon_0,A.ModuleResolutionKind[c]),c){case A.ModuleResolutionKind.NodeJs:l=y(e,t,n,o,r);break;case A.ModuleResolutionKind.Classic:l=M(e,t,n,o,r);break;default:A.Debug.fail("Unexpected moduleResolution: "+c)}a&&(a.set(e,l),a=r.getOrCreateCacheForModuleName(e))&&a.set(s,l)}return i&&(l.resolvedModule?I(o,A.Diagnostics.Module_name_0_was_successfully_resolved_to_1,e,l.resolvedModule.resolvedFileName):I(o,A.Diagnostics.Module_name_0_was_not_resolved,e)),l},A.nodeModuleNameResolver=y,A.resolveJavaScriptModule=function(e,t,n){var n=s(e,t,{moduleResolution:A.ModuleResolutionKind.NodeJs,allowJs:!0},n,void 0,!0),o=n.resolvedModule,n=n.failedLookupLocations;if(o)return o.resolvedFileName;throw new Error("Could not resolve JS module '"+e+"' starting at '"+t+"'. Looked in: "+n.join(", "))},A.directoryProbablyExists=N,A.getPackageName=B;function P(e){if(A.startsWith(e,"@")){var t=e.replace(A.directorySeparator,"__");if(t!==e)return t.slice(1)}return e}function L(e,t,n,o,r){e=e&&e.get(n);if(e)return o&&I(r,A.Diagnostics.Resolution_for_module_0_was_found_in_cache,t),{value:e.resolvedModule&&{path:e.resolvedModule.resolvedFileName,extension:e.resolvedModule.extension,packageId:e.resolvedModule.packageId}}}function M(r,e,t,i,s){var a=d(t,i),l={compilerOptions:t,host:i,traceEnabled:a},c=[],u=A.getDirectoryPath(e),t=n(_.TypeScript)||n(_.JavaScript);return g(t&&t.value,!1,c);function n(n){var o,e=f(n,r,u,v,c,l);return e?{value:e}:(o=s&&s.getOrCreateCacheForModuleName(r),A.isExternalModuleNameRelative(r)?(e=A.normalizePath(A.combinePaths(u,r)),F(v(n,e,c,!1,l))):A.forEachAncestorDirectory(u,function(e){var t=L(o,r,e,a,i);return t||(t=A.normalizePath(A.combinePaths(e,r)),F(v(n,t,c,!1,l)))})||(n===_.TypeScript?R(_.DtsOnly,r,u,c,l,!0,void 0):void 0))}}function F(e){return void 0!==e?{value:e}:void 0}A.getTypesPackageName=function(e){return"@types/"+P(e)},A.getPackageNameFromAtTypesDirectory=function(e){var t=A.removePrefix(e,"@types/");return t!==e?A.stringContains(t,"__")?"@"+t.replace("__",A.directorySeparator):t:e},A.classicNameResolver=M,A.loadModuleFromGlobalCache=function(e,t,n,o,r){var i=d(n,o);i&&I(o,A.Diagnostics.Auto_discovery_for_typings_is_enabled_in_project_0_Running_extra_resolution_pass_for_module_1_using_cache_location_2,t,e,r);t=[];return g(c(_.DtsOnly,e,r,t,{compilerOptions:n,host:o,traceEnabled:i}),!0,t)}}(ts=ts||{}),function(mh){var fh=/^".+"$/,t=1,n=1,yh=1,kh=1;function bh(e){return e.id||(e.id=n,n++),e.id}function vh(e){return e.id||(e.id=t,t++),e.id}function Th(e,t){e=mh.getModuleInstanceState(e);return 1===e||t&&2===e}function Eh(e){switch(e.parent.kind){case 242:case 246:return 1;default:return mh.isDeclarationName(e)}}function Sh(e){switch(e.kind){case 239:case 237:case 240:case 242:return!0;case 71:return 242===e.parent.kind;default:return!1}}mh.getNodeId=bh,mh.getSymbolId=vh,mh.isInstantiatedModule=Th,mh.createTypeChecker=function(a,ce){var Ae,l,c,s,n=mh.objectAllocator.getSymbolConstructor(),t=mh.objectAllocator.getTypeConstructor(),u=mh.objectAllocator.getSignatureConstructor(),o=0,r=0,d=0,g=0,R=mh.createSymbolTable(),W=mh.identity,ue=a.getCompilerOptions(),de=mh.getEmitScriptTarget(ue),Ie=mh.getEmitModuleKind(ue),T=!!ue.noUnusedLocals||!!ue.noUnusedParameters,J=void 0!==ue.allowSyntheticDefaultImports?ue.allowSyntheticDefaultImports:Ie===mh.ModuleKind.System,pe=void 0===ue.strictNullChecks?ue.strict:ue.strictNullChecks,P=void 0===ue.strictFunctionTypes?ue.strict:ue.strictFunctionTypes,Q=void 0===ue.noImplicitAny?ue.strict:ue.noImplicitAny,Z=void 0===ue.noImplicitThis?ue.strict:ue.noImplicitThis,i=((e=a.getResolvedTypeReferenceDirectives())&&(s=mh.createMap(),e.forEach(function(e,t){e&&(e=a.getSourceFile(e.resolvedFileName),s.set(e.path,t))})),{getReferencedExportContainer:bg,getReferencedImportDeclaration:vg,getReferencedDeclarationWithCollidingName:Eg,isDeclarationWithCollidingName:Sg,isValueAliasDeclaration:function(e){return!(e=mh.getParseTreeNode(e))||Cg(e)},hasGlobalName:Hg,isReferencedAliasDeclaration:function(e,t){return!(e=mh.getParseTreeNode(e))||function t(e,n){if(mh.isAliasSymbolDeclaration(e)){var o=fe(e);if(o&&p(o).referenced)return!0}return!!n&&mh.forEachChild(e,function(e){return t(e,n)})}(e,t)},getNodeCheckFlags:function(e){return(e=mh.getParseTreeNode(e))?wg(e):void 0},isTopLevelValueImportEqualsWithEntityName:xg,isDeclarationVisible:ir,isImplementationOfOverload:Ig,isRequiredInitializedParameter:Dg,isOptionalUninitializedParameterProperty:Ng,writeTypeOfDeclaration:Mg,writeReturnTypeOfSignatureDeclaration:Fg,writeTypeOfExpression:Ug,isSymbolAccessible:jo,isEntityNameVisible:$o,getConstantValue:function(e){return(e=mh.getParseTreeNode(e,Rg))?Pg(e):void 0},collectLinkedAliases:sr,getReferencedValueDeclaration:Wg,getTypeReferenceSerializationKind:Lg,isOptionalParameter:Hi,moduleExportsSomeValue:kg,isArgumentsLocalBinding:yg,getExternalModuleFileFromDeclaration:jg,getTypeReferenceDirectivesForEntityName:function(e){var t;return s&&(t=fo(e,e=179===e.kind||71===e.kind&&Fl(e)?1156031:794600,!0))&&t!==ge?y(t,e):void 0},getTypeReferenceDirectivesForSymbol:y,isLiteralConstDeclaration:Gg,writeLiteralConstValue:Kg,getJsxFactoryEntity:function(){return nn}}),h={typeToTypeNode:function(e,t,n){t=m(t,n),n=E(e,t);return t.encounteredError?void 0:n},indexInfoToIndexSignatureDeclaration:function(e,t,n,o){n=m(n,o),o=C(e,t,n);return n.encounteredError?void 0:o},signatureToSignatureDeclaration:function(e,t,n,o){n=m(n,o),o=x(e,t,n);return n.encounteredError?void 0:o}},_=Kn(4,"undefined");function m(e,t){return{enclosingDeclaration:e,flags:t,encounteredError:!1,symbolStack:void 0}}function E(e,f){var t=f.flags&mh.NodeBuilderFlags.InTypeAlias;if(f.flags&=~mh.NodeBuilderFlags.InTypeAlias,e){if(1&e.flags)return mh.createKeywordTypeNode(119);if(2&e.flags)return mh.createKeywordTypeNode(136);if(4&e.flags)return mh.createKeywordTypeNode(133);if(8&e.flags)return mh.createKeywordTypeNode(122);if(256&e.flags&&!(65536&e.flags))return r=L(i=Do(e.symbol),f,793064,!1),i=be(i)===e?r:mh.createQualifiedName(r,or(e.symbol,f)),mh.createTypeReferenceNode(i,void 0);if(272&e.flags)return n=L(e.symbol,f,793064,!1),mh.createTypeReferenceNode(n,void 0);if(32&e.flags)return mh.createLiteralTypeNode(mh.setEmitFlags(mh.createLiteral(e.value),16777216));if(64&e.flags)return mh.createLiteralTypeNode(mh.createLiteral(e.value));if(128&e.flags)return"true"===e.intrinsicName?mh.createTrue():mh.createFalse();if(1024&e.flags)return mh.createKeywordTypeNode(105);if(2048&e.flags)return mh.createKeywordTypeNode(139);if(4096&e.flags)return mh.createKeywordTypeNode(95);if(8192&e.flags)return mh.createKeywordTypeNode(130);if(512&e.flags)return mh.createKeywordTypeNode(137);if(16777216&e.flags)return mh.createKeywordTypeNode(134);if(16384&e.flags&&e.isThisType)return f.flags&mh.NodeBuilderFlags.InObjectTypeLiteral&&(f.encounteredError||f.flags&mh.NodeBuilderFlags.AllowThisInObjectLiteral||(f.encounteredError=!0)),mh.createThis();var n,o,r=w(e);if(4&r){mh.Debug.assert(!!(32768&e.flags));var i=e,s=i.typeArguments||mh.emptyArray;if(i.target===qe)return f.flags&mh.NodeBuilderFlags.WriteArrayAsGenericType?(a=E(s[0],f),mh.createTypeReferenceNode("Array",[a])):(a=E(s[0],f),mh.createArrayTypeNode(a));if(8&i.target.objectFlags){if(0<s.length){var a=S(s.slice(0,as(i)),f);if(a&&0<a.length)return mh.createTupleTypeNode(a)}return f.encounteredError||f.flags&mh.NodeBuilderFlags.AllowEmptyTuple?mh.createTupleTypeNode([]):void(f.encounteredError=!0)}var l=i.target.outerTypeParameters,c=0,u=void 0;if(l)for(var d=l.length;c<d;){for(var p,g=c,h=ns(l[c]);++c<d&&ns(l[c])===h;);mh.rangeEquals(l,s,g,c)||(g=(g=S(s.slice(g,c),f))&&mh.createNodeArray(g),(71===(p=v(h)).kind?p:p.right).typeArguments=g,u=u?(mh.Debug.assert(!u.right),u=T(u,p),mh.createQualifiedName(u,void 0)):mh.createQualifiedName(p,void 0))}var a=void 0,_=v(i.symbol),a=u?(mh.Debug.assert(!u.right),u=T(u,_)):_,_=void 0;return 0<s.length&&(i=(i.target.typeParameters||mh.emptyArray).length,_=S(s.slice(c,i),f)),_&&((71===a.kind?a:a.right).typeArguments=void 0),mh.createTypeReferenceNode(a,_)}if(16384&e.flags||3&r)return n=e.symbol?L(e.symbol,f,793064,!1):mh.createIdentifier("?"),mh.createTypeReferenceNode(n,void 0);if(!t&&e.aliasSymbol&&Ko(e.aliasSymbol,f.enclosingDeclaration))return n=v(e.aliasSymbol),a=S(e.aliasTypeArguments,f),mh.createTypeReferenceNode(n,a);if(196608&e.flags)return(_=S(65536&e.flags?Qo(e.types):e.types,f))&&0<_.length?mh.createUnionOrIntersectionTypeNode(65536&e.flags?166:167,_):void(f.encounteredError||f.flags&mh.NodeBuilderFlags.AllowEmptyUnionOrIntersection||(f.encounteredError=!0));if(48&r){mh.Debug.assert(!!(32768&e.flags));var m,t=e,y=t.symbol;if(y){if(32&y.flags&&!Ar(y)||896&y.flags||function(){var e=!!(8192&y.flags)&&mh.some(y.declarations,function(e){return mh.hasModifier(e,32)}),t=!!(16&y.flags)&&(y.parent||mh.forEach(y.declarations,function(e){return 265===e.parent.kind||234===e.parent.kind}));if(e||t)return mh.contains(f.symbolStack,y)}())return m=L(y,f,107455,!1),mh.createTypeQueryNode(m);if(mh.contains(f.symbolStack,y))return(m=er(t))?(k=L(m,f,793064,!1),mh.createTypeReferenceNode(k,void 0)):mh.createKeywordTypeNode(119);f.symbolStack||(f.symbolStack=[]),f.symbolStack.push(y);var k=b(t);return f.symbolStack.pop(),k}return b(t)}return 262144&e.flags?(o=E(e.type,f),mh.createTypeOperatorNode(o)):524288&e.flags?(n=E(e.objectType,f),o=E(e.indexType,f),mh.createIndexedAccessTypeNode(n,o)):void mh.Debug.fail("Should be unreachable.")}function b(e){if(yi(e))return o=e,mh.Debug.assert(!!(32768&o.flags)),r=o.declaration&&o.declaration.readonlyToken?mh.createToken(131):void 0,n=o.declaration&&o.declaration.questionToken?mh.createToken(55):void 0,t=B(_i(o),f),o=E(fi(o),f),r=mh.createMappedTypeNode(r,t,n,o),mh.setEmitFlags(r,1);var t=ki(e);if(!t.properties.length&&!t.stringIndexInfo&&!t.numberIndexInfo){if(!t.callSignatures.length&&!t.constructSignatures.length)return mh.setEmitFlags(mh.createTypeLiteralNode(void 0),1);if(1===t.callSignatures.length&&!t.constructSignatures.length)return x(t.callSignatures[0],160,f);if(1===t.constructSignatures.length&&!t.callSignatures.length)return x(t.constructSignatures[0],161,f)}var n=f.flags,o=(f.flags|=mh.NodeBuilderFlags.InObjectTypeLiteral,function(e){for(var t=[],n=0,o=e.callSignatures;n<o.length;n++){var r=o[n];t.push(x(r,155,f))}for(var i=0,s=e.constructSignatures;i<s.length;i++)r=s[i],t.push(x(r,156,f));e.stringIndexInfo&&t.push(C(e.stringIndexInfo,0,f)),e.numberIndexInfo&&t.push(C(e.numberIndexInfo,1,f));e=e.properties;if(!e)return t;for(var a=0,l=e;a<l.length;a++){var c=l[a],u=z(c),d=f.enclosingDeclaration,p=(f.enclosingDeclaration=void 0,L(c,f,107455,!0)),g=(f.enclosingDeclaration=d,16777216&c.flags?mh.createToken(55):void 0);if(8208&c.flags&&!bi(u).length)for(var h=0,_=$(u,0);h<_.length;h++){var m=x(r=_[h],150,f);m.name=p,m.questionToken=g,t.push(m)}else{d=u?E(u,f):mh.createKeywordTypeNode(119),u=yd(c)?[mh.createToken(131)]:void 0,c=mh.createPropertySignature(u,p,g,d,void 0);t.push(c)}}return t.length?t:void 0}(t)),r=(f.flags=n,mh.createTypeLiteralNode(o));return mh.setEmitFlags(r,1)}function v(e){return 32&e.flags||!Lo(e.escapedName)?L(e,f,793064,!1):mh.createIdentifier("")}function T(e,t){if(mh.Debug.assert(void 0===e.right),71===t.kind)return e.right=t,e;for(var n=t;71!==n.left.kind;)n=n.left;return e.right=n.left,n.left=e,t}f.encounteredError=!0}function S(e,t){if(mh.some(e)){for(var n=[],o=0;o<e.length;++o){var r=E(e[o],t);r&&n.push(r)}return n}}function C(e,t,n){var o=mh.getNameFromIndexInfo(e)||"x",t=mh.createKeywordTypeNode(0===t?136:133),o=mh.createParameter(void 0,void 0,void 0,o,void 0,t,void 0),t=E(e.type,n);return mh.createIndexSignature(void 0,e.isReadonly?[mh.createToken(131)]:void 0,[o],t)}function x(e,t,n){var o,r,i=e.typeParameters&&e.typeParameters.map(function(e){return B(e,n)}),s=e.parameters.map(function(e){return f(e,n)});return e.thisParameter&&(o=f(e.thisParameter,n),s.unshift(o)),o=e.typePredicate?(r=1===(o=e.typePredicate).kind?mh.setEmitFlags(mh.createIdentifier(o.parameterName),16777216):mh.createThisTypeNode(),o=E(o.type,n),mh.createTypePredicateNode(r,o)):(r=Te(e))&&E(r,n),n.flags&mh.NodeBuilderFlags.SuppressAnyReturnType?o&&119===o.kind&&(o=void 0):o=o||mh.createKeywordTypeNode(119),mh.createSignatureDeclaration(t,i,s,o)}function B(e,t){var n=L(e.symbol,t,793064,!0),o=ts(e),o=o&&E(o,t),e=Ai(e),e=e&&E(e,t);return mh.createTypeParameterDeclaration(n,o,e)}function f(e,t){var n,o,r,i,s=mh.getDeclarationOfKind(e,146);return jn(e)&&e.isRestParameter?mh.createParameter(void 0,void 0,e.isRestParameter?mh.createToken(24):void 0,"args",void 0,E(ot,t),void 0):(n=s.modifiers&&s.modifiers.map(mh.getSynthesizedClone),o=mh.isRestParameter(s)?mh.createToken(24):void 0,r=s.name?71===s.name.kind?mh.setEmitFlags(mh.getSynthesizedClone(s.name),16777216):function e(t){t=mh.visitEachChild(t,e,mh.nullTransformationContext,void 0,e),t=mh.nodeIsSynthesized(t)?t:mh.getSynthesizedClone(t);return 176===t.kind&&(t.initializer=void 0),mh.setEmitFlags(t,16777217)}(s.name):mh.symbolName(e),i=Hi(s)?mh.createToken(55):void 0,e=z(e),s=E(e=Dg(s)?_l(e,2048):e,t),mh.createParameter(void 0,n,o,r,i,s,void 0))}function L(e,a,t,n){var o;return 262144&e.flags||!(a.enclosingDeclaration||a.flags&mh.NodeBuilderFlags.UseFullyQualifiedType)?o=[e]:(o=function e(t,n,o){var r,i,s=Wo(t,a.enclosingDeclaration,n,!1);return s&&!Go(s[0],a.enclosingDeclaration,1===s.length?n:Vo(n))||(i=Do(s?s[0]:t))&&(n=e(i,Vo(n),!1))&&(r=i,s=n.concat(s||[t])),s||(!o&&(!r&&mh.forEach(t.declarations,zo)||6144&t.flags)?void 0:[t])}(e,t,!0),mh.Debug.assert(o&&0<o.length)),!n||1===o.length||a.encounteredError||a.flags&mh.NodeBuilderFlags.AllowQualifedNameInPlaceOfIdentifier||(a.encounteredError=!0),function e(t,n){mh.Debug.assert(t&&0<=n&&n<t.length);var o,r=t[n],i=(a.flags&mh.NodeBuilderFlags.WriteTypeParametersInQualifiedName&&0<n&&(o=t[n-1],i=void 0,1&mh.getCheckFlags(r)?i=Mr(o):524384&zp(o).flags&&(i=Lr(r)),o=S(i,a)),or(r,a)),r=mh.setEmitFlags(mh.createIdentifier(i,o),16777216);return 0<n?mh.createQualifiedName(e(t,n-1),r):r}(o,o.length-1)}function y(e,t){if(s&&function(e){if(e.declarations){for(var t=e;;){var n=Do(t);if(!n)break;t=n}if(!(t.valueDeclaration&&265===t.valueDeclaration.kind&&512&t.flags))for(var o=0,r=e.declarations;o<r.length;o++){var i=r[o],i=mh.getSourceFileOfNode(i);if(s.has(i.path))return 1}}}(e)){for(var n,o=0,r=e.declarations;o<r.length;o++){var i=r[o];if(i.symbol&&i.symbol.flags&t){i=mh.getSourceFileOfNode(i),i=s.get(i.path);if(!i)return;(n=n||[]).push(i)}}return n}}_.declarations=[];var ee,M=Kn(4,"arguments"),k={getNodeCount:function(){return mh.sum(a.getSourceFiles(),"nodeCount")},getIdentifierCount:function(){return mh.sum(a.getSourceFiles(),"identifierCount")},getSymbolCount:function(){return mh.sum(a.getSourceFiles(),"symbolCount")+r},getTypeCount:function(){return o},isUndefinedSymbol:function(e){return e===_},isArgumentsSymbol:function(e){return e===M},isUnknownSymbol:function(e){return e===ge},getMergedSymbol:Io,getDiagnostics:sg,getGlobalDiagnostics:function(){return ag(),en.getGlobalDiagnostics()},getTypeOfSymbolAtLocation:function(e,t){if(t=mh.getParseTreeNode(t)){var n=0;if(n=e.exportSymbol||e,71===t.kind&&(mh.isRightSideOfQualifiedNameOrPropertyAccess(t)&&(t=t.parent),mh.isPartOfExpression(t))&&!mh.isAssignmentTarget(t)){e=Hd(t);if(No(j(t).resolvedSymbol)===n)return e}return z(n)}return he},getSymbolsOfParameterPropertyDeclaration:function(e,t){return e=mh.getParseTreeNode(e,mh.isParameter),mh.Debug.assert(void 0!==e,"Cannot get symbols of a synthetic parameter that cannot be resolved to a parse-tree node."),e=e,t=mh.escapeLeadingUnderscores(t),n=e.parent,e=e.parent.parent,n=Jn(n.locals,t,107455),e=Jn(e.symbol.members,t,107455),n&&e?[n,e]:void mh.Debug.fail("There should exist two symbols, one as property declaration and one as parameter declaration");var n},getDeclaredTypeOfSymbol:be,getPropertiesOfType:ve,getPropertyOfType:function(e,t){return X(e,mh.escapeLeadingUnderscores(t))},getIndexInfoOfType:O,getSignaturesOfType:$,getIndexTypeOfType:Pi,getBaseTypes:Kr,getBaseTypeOfLiteralType:ll,getWidenedType:vl,getTypeFromTypeNode:function(e){return(e=mh.getParseTreeNode(e,mh.isTypeNode))?q(e):he},getParameterType:ad,getReturnTypeOfSignature:Te,getNullableType:_l,getNonNullableType:ml,typeToTypeNode:h.typeToTypeNode,indexInfoToIndexSignatureDeclaration:h.indexInfoToIndexSignatureDeclaration,signatureToSignatureDeclaration:h.signatureToSignatureDeclaration,getSymbolsInScope:function(e,t){if(!(e=mh.getParseTreeNode(e)))return[];var n=e,o=t;if(lg(n))return[];for(var r=mh.createSymbolTable(),i=!1;n;){switch(n.locals&&!qn(n)&&a(n.locals,o),n.kind){case 233:a(fe(n).exports,2623475&o);break;case 232:a(fe(n).exports,8&o);break;case 199:n.name&&s(n.symbol,o);case 229:case 230:i||a(fe(n).members,793064&o);break;case 186:n.name&&s(n.symbol,o)}mh.introducesArgumentsExoticObject(n)&&s(M,o),i=mh.hasModifier(n,32),n=n.parent}return a(Nt,o),Mi(r);function s(e,t){mh.getCombinedLocalAndExportSymbolFlags(e)&t&&(t=e.escapedName,r.has(t)||r.set(t,e))}function a(e,t){t&&e.forEach(function(e){s(e,t)})}},getSymbolAtLocation:function(e){return(e=mh.getParseTreeNode(e))?_g(e):void 0},getShorthandAssignmentValueSymbol:function(e){if(e=mh.getParseTreeNode(e))if(e&&262===e.kind)return fo(e.name,2204607)},getExportSpecifierLocalTargetSymbol:function(e){return(e=mh.getParseTreeNode(e,mh.isExportSpecifier))?(e=e).parent.parent.moduleSpecifier?so(e.parent.parent,e):fo(e.propertyName||e.name,2998271):void 0},getExportSymbolOfSymbol:function(e){return Io(e.exportSymbol||e)},getTypeAtLocation:function(e){return(e=mh.getParseTreeNode(e))?mg(e):he},getPropertySymbolOfDestructuringAssignment:function(e){return(e=mh.getParseTreeNode(e,mh.isIdentifier))?(t=function e(t){if(mh.Debug.assert(178===t.kind||177===t.kind),216===t.parent.kind)return Ad(t,Op(t.parent.expression,t.parent.awaitModifier)||he);if(194===t.parent.kind)return Ad(t,Hd(t.parent.right)||he);if(261===t.parent.kind)return xd(e(t.parent.parent)||he,t.parent);mh.Debug.assert(177===t.parent.kind);var n=e(t.parent),o=Rp(n||he,t.parent,!1,!1)||he;return Bd(t.parent,n,mh.indexOf(t.parent.elements,t),o||he)}((e=e).parent.parent))&&X(t,e.escapedText):void 0;var t},signatureToString:function(e,t,n,o){return qo(e,mh.getParseTreeNode(t),n,o)},typeToString:function(e,t,n){return ke(e,mh.getParseTreeNode(t),n)},getSymbolDisplayBuilder:rr,symbolToString:function(e,t,n){return ye(e,mh.getParseTreeNode(t),n)},getAugmentedPropertiesOfType:function(e){e=G(e);var t=mh.createSymbolTable(ve(e));return($(e,0).length||$(e,1).length)&&mh.forEach(ve(Ye),function(e){t.has(e.escapedName)||t.set(e.escapedName,e)}),Mo(t)},getRootSymbols:function e(t){var n,o;if(6&mh.getCheckFlags(t))return n=[],o=t.escapedName,mh.forEach(p(t).containingType.types,function(e){e=X(e,o);e&&n.push(e)}),n;if(33554432&t.flags){var r=t;if(r.leftSpread)return e(r.leftSpread).concat(e(r.rightSpread));if(r.syntheticOrigin)return e(r.syntheticOrigin);for(var i=void 0,s=t;s=p(s).target;)i=s;if(i)return[i]}return[t]},getContextualType:function(e){return(e=mh.getParseTreeNode(e,mh.isExpression))?jc(e):void 0},getFullyQualifiedName:mo,getResolvedSignature:function(e,t,n){e=mh.getParseTreeNode(e,mh.isCallLikeExpression),ee=n;n=e?td(e,t):void 0;return ee=void 0,n},getConstantValue:function(e){return(e=mh.getParseTreeNode(e,Rg))?Pg(e):void 0},isValidPropertyAccess:function(e,t){return!!(e=mh.getParseTreeNode(e,mh.isPropertyAccessOrQualifiedName))&&(e=e,t=mh.escapeLeadingUnderscores(t),n=179===e.kind?e.expression:e.left,function e(t,n,o,r){if(r!==he&&!D(r)){var i=X(r,o);if(i)return Tu(t,n,r,i);if(mh.isInJavaScriptFile(n)&&65536&r.flags)for(var s=0,a=r.types;s<a.length;s++)if(e(t,n,o,a[s]))return!0;return!1}return!0}(e,n,t,vl(Se(n))));var n},getSignatureFromDeclaration:function(e){return(e=mh.getParseTreeNode(e,mh.isFunctionLike))?Gi(e):void 0},isImplementationOfOverload:function(e){e=mh.getParseTreeNode(e,mh.isFunctionLike);return e?Ig(e):void 0},getImmediateAliasedSymbol:function(e){mh.Debug.assert(0!=(2097152&e.flags),"Should only get Alias here.");var t=p(e);return t.immediateTarget||(e=io(e),mh.Debug.assert(!!e),t.immediateTarget=lo(e,!0)),t.immediateTarget},getAliasedSymbol:po,getEmitResolver:function(e,t){return sg(e,t),i},getExportsOfModule:So,getExportsAndPropertiesOfModule:function(e){var t=So(e),n=vo(e);return n!==e&&mh.addRange(t,ve(z(n))),t},getSymbolWalker:mh.createGetSymbolWalker(zi,Te,Kr,ki,z,Ml,Ri,ts,qp),getAmbientModules:function(){return ze||(ze=[],Nt.forEach(function(e,t){fh.test(t)&&ze.push(e)})),ze},getAllAttributesTypeFromJsxOpeningLikeElement:function(e){return(e=mh.getParseTreeNode(e,mh.isJsxOpeningLikeElement))?iu((e=e).tagName)?gu(e):hu(e,!0):void 0},getJsxIntrinsicTagNames:function(){var e=au(_n);return e?ve(e):mh.emptyArray},isOptionalParameter:function(e){return!!(e=mh.getParseTreeNode(e,mh.isParameter))&&Hi(e)},tryGetMemberInModuleExports:function(e,t){return Co(mh.escapeLeadingUnderscores(e),t)},tryGetMemberInModuleExportsAndProperties:function(e,t){var e=mh.escapeLeadingUnderscores(e),n=Co(e,t);if(!n){var o=vo(t);if(o!==t)return X(z(o),e)}return n},tryFindAmbientModuleWithoutAugmentations:function(e){return Ui(e,!1)},getApparentType:G,getUnionType:Y,createAnonymousType:Uo,createSignature:ai,createSymbol:Kn,createIndexInfo:Zi,getAnyType:function(){return K},getStringType:function(){return _e},getNumberType:function(){return ae},createPromiseType:ud,createArrayType:Ls,getBooleanType:function(){return we},getVoidType:function(){return Re},getUndefinedType:function(){return De},getNullType:function(){return ie},getESSymbolType:function(){return Oe},getNeverType:function(){return Pe},isSymbolAccessible:jo,isArrayLikeType:rl,getAllPossiblePropertiesOfTypes:function(e){var t=Y(e);if(!(65536&t.flags))return ve(t);for(var n=mh.createSymbolTable(),o=0,r=e;o<r.length;o++)for(var i=0,s=ve(r[o]);i<s.length;i++){var a=s[i].escapedName;n.has(a)||n.set(a,Ii(t,a))}return mh.arrayFrom(n.values())},getSuggestionForNonexistentProperty:Au,getSuggestionForNonexistentSymbol:function(e,t,n){return Iu(e,mh.escapeLeadingUnderscores(t),n)},getBaseConstraintOfType:Si,resolveName:function(e,t,n){return Zn(t,mh.escapeLeadingUnderscores(e),n,void 0,void 0,!1)},getJsxNamespace:function(){return mh.unescapeLeadingUnderscores(Gn())}},b=[],v=mh.createMap(),F=mh.createMap(),U=mh.createMap(),H=mh.createMap(),te=[],ge=Kn(4,"unknown"),ne=Kn(0,"__resolving__"),K=Ro(1,"any"),oe=Ro(1,"any"),he=Ro(1,"unknown"),De=Ro(2048,"undefined"),re=pe?De:Ro(2099200,"undefined"),ie=Ro(4096,"null"),se=pe?ie:Ro(2101248,"null"),_e=Ro(2,"string"),ae=Ro(4,"number"),le=Ro(128,"true"),Ne=Ro(128,"false"),we=((e=Y([le,Ne])).flags|=8,e.intrinsicName="boolean",e),Oe=Ro(512,"symbol"),Re=Ro(1024,"void"),Pe=Ro(8192,"never"),Le=Ro(8192,"never"),Me=Ro(16777216,"object"),N=Uo(void 0,R,mh.emptyArray,mh.emptyArray,void 0,void 0),e=Kn(2048,"__type"),Fe=(e.members=mh.createSymbolTable(),Uo(e,R,mh.emptyArray,mh.emptyArray,void 0,void 0)),Ue=Uo(void 0,R,mh.emptyArray,mh.emptyArray,void 0,void 0),He=(Ue.instantiations=mh.createMap(),Uo(void 0,R,mh.emptyArray,mh.emptyArray,void 0,void 0)),Ve=(He.flags|=8388608,Uo(void 0,R,mh.emptyArray,mh.emptyArray,void 0,void 0)),We=Uo(void 0,R,mh.emptyArray,mh.emptyArray,void 0,void 0),Ge=Uo(void 0,R,mh.emptyArray,mh.emptyArray,void 0,void 0),Ke=Oo(16384),je=Oo(16384);je.constraint=Ke;var ze,Xe,$e,Ye,qe,Je,Qe,Ze,et,tt,nt,ot,rt,it,st,at,lt,ct,ut,dt,pt,gt,ht,_t,mt,ft,yt,kt,bt,vt,Tt,Et,St=Oo(16384),Ct=ai(void 0,void 0,void 0,mh.emptyArray,K,void 0,0,!1,!1),xt=ai(void 0,void 0,void 0,mh.emptyArray,he,void 0,0,!1,!1),Bt=ai(void 0,void 0,void 0,mh.emptyArray,K,void 0,0,!1,!1),At=ai(void 0,void 0,void 0,mh.emptyArray,Le,void 0,0,!1,!1),It=Zi(_e,!0),Dt=Zi(K,!1),Nt=mh.createSymbolTable(),wt=0,Ot=0,Rt=0,Pt=!1,Lt=da(""),Mt=da(0),Ft=[],Ut=[],Ht=[],Vt=0,Wt=[],Gt=[],Kt=[],jt=[],zt=[],Xt=[],$t=[],Yt=[],qt=[],Jt=[],Qt=[],Zt=[],en=mh.createDiagnosticCollection();(e={None:0,0:"None",TypeofEQString:1,1:"TypeofEQString",TypeofEQNumber:2,2:"TypeofEQNumber",TypeofEQBoolean:4,4:"TypeofEQBoolean",TypeofEQSymbol:8,8:"TypeofEQSymbol",TypeofEQObject:16,16:"TypeofEQObject",TypeofEQFunction:32,32:"TypeofEQFunction",TypeofEQHostObject:64,64:"TypeofEQHostObject",TypeofNEString:128,128:"TypeofNEString",TypeofNENumber:256,256:"TypeofNENumber",TypeofNEBoolean:512,512:"TypeofNEBoolean",TypeofNESymbol:1024,1024:"TypeofNESymbol",TypeofNEObject:2048,2048:"TypeofNEObject",TypeofNEFunction:4096,4096:"TypeofNEFunction",TypeofNEHostObject:8192,8192:"TypeofNEHostObject",EQUndefined:16384,16384:"EQUndefined",EQNull:32768,32768:"EQNull",EQUndefinedOrNull:65536,65536:"EQUndefinedOrNull",NEUndefined:131072,131072:"NEUndefined",NENull:262144,262144:"NENull",NEUndefinedOrNull:524288,524288:"NEUndefinedOrNull",Truthy:1048576,1048576:"Truthy",Falsy:2097152,2097152:"Falsy",Discriminatable:4194304,4194304:"Discriminatable",All:8388607,8388607:"All",BaseStringStrictFacts:933633,933633:"BaseStringStrictFacts",BaseStringFacts:3145473,3145473:"BaseStringFacts",StringStrictFacts:4079361,4079361:"StringStrictFacts",StringFacts:4194049,4194049:"StringFacts",EmptyStringStrictFacts:3030785,3030785:"EmptyStringStrictFacts",EmptyStringFacts:3145473})[3145473]="EmptyStringFacts",e[e.NonEmptyStringStrictFacts=1982209]="NonEmptyStringStrictFacts",e[e.NonEmptyStringFacts=4194049]="NonEmptyStringFacts",e[e.BaseNumberStrictFacts=933506]="BaseNumberStrictFacts",e[e.BaseNumberFacts=3145346]="BaseNumberFacts",e[e.NumberStrictFacts=4079234]="NumberStrictFacts",e[e.NumberFacts=4193922]="NumberFacts",e[e.ZeroStrictFacts=3030658]="ZeroStrictFacts",e[e.ZeroFacts=3145346]="ZeroFacts",e[e.NonZeroStrictFacts=1982082]="NonZeroStrictFacts",e[e.NonZeroFacts=4193922]="NonZeroFacts",e[e.BaseBooleanStrictFacts=933252]="BaseBooleanStrictFacts",e[e.BaseBooleanFacts=3145092]="BaseBooleanFacts",e[e.BooleanStrictFacts=4078980]="BooleanStrictFacts",e[e.BooleanFacts=4193668]="BooleanFacts",e[e.FalseStrictFacts=3030404]="FalseStrictFacts",e[e.FalseFacts=3145092]="FalseFacts",e[e.TrueStrictFacts=1981828]="TrueStrictFacts",e[e.TrueFacts=4193668]="TrueFacts",e[e.SymbolStrictFacts=1981320]="SymbolStrictFacts",e[e.SymbolFacts=4193160]="SymbolFacts",e[e.ObjectStrictFacts=6166480]="ObjectStrictFacts",e[e.ObjectFacts=8378320]="ObjectFacts",e[e.FunctionStrictFacts=6164448]="FunctionStrictFacts",e[e.FunctionFacts=8376288]="FunctionFacts",e[e.UndefinedFacts=2457472]="UndefinedFacts",e[e.NullFacts=2340752]="NullFacts";for(var tn,nn,on,rn,sn,an=mh.createMapFromTemplate({string:1,number:2,boolean:4,symbol:8,undefined:16384,object:16,function:32}),ln=mh.createMapFromTemplate({string:128,number:256,boolean:512,symbol:1024,undefined:131072,object:2048,function:4096}),cn=mh.createMapFromTemplate({string:_e,number:ae,boolean:we,symbol:Oe,undefined:De}),un=Y(mh.arrayFrom(an.keys(),da)),dn=!1,pn=!1,gn=mh.createUnderscoreEscapedMap(),hn="JSX",_n="IntrinsicElements",mn="ElementClass",fn="ElementAttributesProperty",yn="ElementChildrenAttribute",kn="Element",bn="IntrinsicAttributes",vn="IntrinsicClassAttributes",Tn=mh.createMap(),En=mh.createMap(),Sn=mh.createMap(),Cn=mh.createMap(),xn=mh.createMap(),e=(0,0,0,mh.createSymbolTable()),Bn=(e.set(_.escapedName,_),mh.and(og,function(e){return!mh.isAccessor(e)})),An=0,In=a.getSourceFiles();An<In.length;An++){var Dn=In[An];mh.bindSourceFile(Dn,ue)}for(var Nn,wn,On,Rn=0,Pn=a.getSourceFiles();Rn<Pn.length;Rn++)Dn=Pn[Rn],mh.isExternalOrCommonJsModule(Dn)||Yn(Nt,Dn.locals),Dn.patternAmbientModules&&Dn.patternAmbientModules.length&&(Xe=mh.concatenate(Xe,Dn.patternAmbientModules)),Dn.moduleAugmentations.length&&(Nn=Nn||[]).push(Dn.moduleAugmentations),Dn.symbol&&Dn.symbol.globalExports&&Dn.symbol.globalExports.forEach(function(e,t){Nt.has(t)||Nt.set(t,e)});if(Nn)for(var Ln=0,Mn=Nn;Ln<Mn.length;Ln++)for(var Fn=0,Un=Mn[Ln];Fn<Un.length;Fn++){Hn=Wn=Vn=void 0;var Hn,Vn=Un[Fn],Wn=Vn.parent;Wn.symbol.declarations[0]===Wn?mh.isGlobalScopeAugmentation(Wn)?Yn(Nt,Wn.symbol.exports):(Hn=ko(Vn,Vn,mh.isInAmbientContext(Vn.parent.parent)?void 0:mh.Diagnostics.Invalid_module_name_in_augmentation_module_0_cannot_be_found,!0))&&(1920&(Hn=vo(Hn)).flags?$n(Hn=33554432&Hn.flags?Hn:Xn(Hn),Wn.symbol):me(Vn,mh.Diagnostics.Cannot_augment_module_0_because_it_resolves_to_a_non_module_entity,Vn.text)):mh.Debug.assert(1<Wn.symbol.declarations.length)}return wn=Nt,On=mh.Diagnostics.Declaration_name_conflicts_with_built_in_global_identifier_0,e.forEach(function(e,t){var n,o,r=wn.get(t);r?mh.forEach(r.declarations,(n=mh.unescapeLeadingUnderscores(t),o=On,function(e){return en.add(mh.createDiagnosticForNode(e,o,n))})):wn.set(t,e)}),p(_).type=re,p(M).type=ks("IArguments",0,!0),p(ge).type=he,qe=ks("Array",1,!0),$e=ks("Object",0,!0),Ye=ks("Function",0,!0),Qe=ks("String",0,!0),Ze=ks("Number",0,!0),et=ks("Boolean",0,!0),tt=ks("RegExp",0,!0),ot=Ls(K),rt=Ls(oe),Je=Is("ReadonlyArray",1),it=Je?Ns(Je,[K]):ot,nt=Is("ThisType",1),k;function Gn(){return tn||(tn="React",ue.jsxFactory?(nn=mh.parseIsolatedEntityName(ue.jsxFactory,de))&&(tn=qp(nn).escapedText):ue.reactNamespace&&(tn=mh.escapeLeadingUnderscores(ue.reactNamespace))),tn}function me(e,t,n,o,r){e=e?mh.createDiagnosticForNode(e,t,n,o,r):mh.createCompilerDiagnostic(t,n,o,r);en.add(e)}function Kn(e,t){r++;e=new n(33554432|e,t);return e.checkFlags=0,e}function jn(e){return 0!=(33554432&e.flags)}function zn(e,t){t.mergeId||(t.mergeId=yh,yh++),Wt[t.mergeId]=e}function Xn(e){var t=Kn(e.flags,e.escapedName);return t.declarations=e.declarations?e.declarations.slice():[],t.parent=e.parent,e.valueDeclaration&&(t.valueDeclaration=e.valueDeclaration),e.constEnumOnlyModule&&(t.constEnumOnlyModule=!0),e.members&&(t.members=mh.cloneMap(e.members)),e.exports&&(t.exports=mh.cloneMap(e.exports)),zn(t,e),t}function $n(e,t){var n,o,r;e.flags&(r=0,2&(o=t.flags)&&(r|=107455),1&o&&(r|=107454),4&o&&(r|=0),8&o&&(r|=900095),16&o&&(r|=106927),32&o&&(r|=899519),64&o&&(r|=792968),256&o&&(r|=899327),128&o&&(r|=899967),512&o&&(r|=106639),8192&o&&(r|=99263),32768&o&&(r|=41919),65536&o&&(r|=74687),262144&o&&(r|=530920),524288&o&&(r|=793064),2097152&o&&(r|=2097152),r)?1024&e.flags?me(mh.getNameOfDeclaration(t.declarations[0]),mh.Diagnostics.Cannot_augment_module_0_with_value_exports_because_it_resolves_to_a_non_module_entity,ye(e)):(n=2&e.flags||2&t.flags?mh.Diagnostics.Cannot_redeclare_block_scoped_variable_0:mh.Diagnostics.Duplicate_identifier_0,mh.forEach(t.declarations,function(e){me(mh.getNameOfDeclaration(e)||e,n,ye(t))}),mh.forEach(e.declarations,function(e){me(mh.getNameOfDeclaration(e)||e,n,ye(t))})):(512&t.flags&&512&e.flags&&e.constEnumOnlyModule&&!t.constEnumOnlyModule&&(e.constEnumOnlyModule=!1),e.flags|=t.flags,t.valueDeclaration&&(!e.valueDeclaration||233===e.valueDeclaration.kind&&233!==t.valueDeclaration.kind)&&(e.valueDeclaration=t.valueDeclaration),mh.addRange(e.declarations,t.declarations),t.members&&(e.members||(e.members=mh.createSymbolTable()),Yn(e.members,t.members)),t.exports&&(e.exports||(e.exports=mh.createSymbolTable()),Yn(e.exports,t.exports)),zn(e,t))}function Yn(o,e){e.forEach(function(e,t){var n=o.get(t);n?(33554432&n.flags||(n=Xn(n),o.set(t,n)),$n(n,e)):o.set(t,e)})}function p(e){return 33554432&e.flags?e:(e=vh(e),Gt[e]||(Gt[e]={}))}function j(e){e=bh(e);return Kt[e]||(Kt[e]={flags:0})}function w(e){return 32768&e.flags?e.objectFlags:0}function qn(e){return 265===e.kind&&!mh.isExternalOrCommonJsModule(e)}function Jn(e,t,n){if(n){e=e.get(t);if(e){if(mh.Debug.assert(0==(1&mh.getCheckFlags(e)),"Should never get an instantiated symbol here."),e.flags&n)return e;if(2097152&e.flags){t=po(e);if(t===ge||t.flags&n)return e}}}}function Qn(e,t){var n,o=mh.getSourceFileOfNode(e),r=mh.getSourceFileOfNode(t);return o!==r?!!(Ie&&(o.externalModuleIndicator||r.externalModuleIndicator)||!ue.outFile&&!ue.out||Fl(t)||mh.isInAmbientContext(e))||!!i(t,e)||(n=a.getSourceFiles(),mh.indexOf(n,o)<=mh.indexOf(n,r)):e.pos<=t.pos?176===e.kind?(o=mh.getAncestor(t,176))?mh.findAncestor(o,mh.isBindingElement)!==mh.findAncestor(e,mh.isBindingElement)||e.pos<o.pos:Qn(mh.getAncestor(e,226),t):226!==e.kind||!function(e,t){var n=mh.getEnclosingBlockScopeContainer(e);switch(e.parent.parent.kind){case 208:case 214:case 216:if(oo(t,e,n))return 1}return mh.isForInOrOfStatement(e.parent.parent)&&oo(t,e.parent.parent.expression,n)}(e,t):!!(246===t.parent.kind||243===t.parent.kind&&t.parent.isExportEquals)||!(243!==t.kind||!t.isExportEquals)||(n=mh.getEnclosingBlockScopeContainer(e),Fl(t))||i(t,e,n);function i(t,n,o){return!!mh.findAncestor(t,function(e){if(e===o)return"quit";if(mh.isFunctionLike(e))return!0;if(e.parent&&149===e.parent.kind&&e.parent.initializer===e)if(mh.hasModifier(e.parent,32)){if(151===n.kind)return!0}else if(149!==n.kind||mh.hasModifier(n,32)||mh.getContainingClass(t)!==mh.getContainingClass(n))return!0})}}function Zn(e,t,n,o,r,i,s){return eo(e,t,n,o,r,i,Jn,s)}function eo(e,t,i,n,o,r,s,a){var l,c,u,d,p,g,h=e,_=e,m=!1;e:for(;e;){if(e.locals&&!qn(e)&&(l=s(e.locals,t,i))){var f=!0;if(f=mh.isFunctionLike(e)&&c&&c!==e.body&&(i&l.flags&793064&&275!==c.kind&&(f=!!(262144&l.flags)&&(c===e.type||146===c.kind||145===c.kind)),107455&i)&&1&l.flags?146===c.kind||c===e.type&&146===l.valueDeclaration.kind:f)break;l=void 0}switch(e.kind){case 265:if(!mh.isExternalOrCommonJsModule(e))break;m=!0;case 233:var y=fe(e).exports;if(265===e.kind||mh.isAmbientModule(e)){if(l=y.get("default")){var k=mh.getLocalSymbolForExportDefault(l);if(k&&l.flags&i&&k.escapedName===t)break e;l=void 0}k=y.get(t);if(k&&2097152===k.flags&&mh.getDeclarationOfKind(k,246))break}if(l=s(y,t,2623475&i))break e;break;case 232:if(l=s(fe(e).exports,t,8&i))break e;break;case 149:case 148:mh.isClassLike(e.parent)&&!mh.hasModifier(e,32)&&(y=function(e){for(var t=0,n=e.members;t<n.length;t++){var o=n[t];if(152===o.kind&&mh.nodeIsPresent(o.body))return o}}(e.parent))&&y.locals&&s(y.locals,t,107455&i)&&(d=e);break;case 229:case 199:case 230:if(l=s(fe(e).members,t,793064&i)){if(!function(e,t){for(var n=0,o=e.declarations;n<o.length;n++){var r=o[n];if(145===r.kind&&r.parent===t)return 1}return}(l,e)){l=void 0;break}if(c&&mh.hasModifier(c,32))return void me(_,mh.Diagnostics.Static_members_cannot_reference_class_type_parameters);break e}if(199===e.kind&&32&i){var b=e.name;if(b&&t===b.escapedText){l=e.symbol;break e}}break;case 201:if(c===e.expression&&85===e.parent.token){b=e.parent.parent;if(mh.isClassLike(b)&&(l=s(fe(b).members,t,793064&i)))return void(n&&me(_,mh.Diagnostics.Base_class_expressions_cannot_reference_class_type_parameters))}break;case 144:if(v=e.parent.parent,(mh.isClassLike(v)||230===v.kind)&&(l=s(fe(v).members,t,793064&i)))return void me(_,mh.Diagnostics.A_computed_property_name_cannot_reference_a_type_parameter_from_its_containing_type);break;case 151:case 150:case 152:case 153:case 154:case 228:case 187:if(3&i&&"arguments"===t){l=M;break e}break;case 186:if(3&i&&"arguments"===t){l=M;break e}if(16&i){var v=e.name;if(v&&t===v.escapedText){l=e.symbol;break e}}break;case 147:(e=e.parent&&146===e.parent.kind?e.parent:e).parent&&mh.isClassElement(e.parent)&&(e=e.parent)}207!==e.kind&&(u=e),e=(c=e).parent}if(r&&l&&n&&T&&l!==u.symbol&&(l.isReferenced=!0),!l){if(c&&(mh.Debug.assert(265===c.kind),c.commonJsModuleIndicator)&&"exports"===t)return c.symbol;l=s(Nt,t,i)}if(l){if(n){if(d)return r=d.name,void me(_,mh.Diagnostics.Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor,mh.declarationNameToString(r),to(o));_&&(2&i||(32&i||384&i)&&107455==(107455&i))&&(2&(r=No(l)).flags||32&r.flags||384&r.flags)&&(r=r,g=_,mh.Debug.assert(!!(2&r.flags||32&r.flags||384&r.flags)),p=mh.forEach(r.declarations,function(e){return mh.isBlockOrCatchScoped(e)||mh.isClassLike(e)||232===e.kind?e:void 0}),mh.Debug.assert(void 0!==p,"Declaration to checkResolvedBlockScopedVariable is undefined"),mh.isInAmbientContext(p)||Qn(p,g)||(2&r.flags?me(g,mh.Diagnostics.Block_scoped_variable_0_used_before_its_declaration,mh.declarationNameToString(mh.getNameOfDeclaration(p))):32&r.flags?me(g,mh.Diagnostics.Class_0_used_before_its_declaration,mh.declarationNameToString(mh.getNameOfDeclaration(p))):256&r.flags&&me(g,mh.Diagnostics.Enum_0_used_before_its_declaration,mh.declarationNameToString(mh.getNameOfDeclaration(p))))),l&&m&&107455==(107455&i)&&(r=l.declarations)&&1===r.length&&236===r[0].kind&&me(_,mh.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead,mh.unescapeLeadingUnderscores(t))}return l}!n||_&&(function(e,t,n){if(!(71===e.kind&&ug(e)||Fl(e)))for(var o=mh.getThisContainer(e,!0),r=o;r;){if(mh.isClassLike(r.parent)){var i=fe(r.parent);if(!i)break;if(X(z(i),t))return me(e,mh.Diagnostics.Cannot_find_name_0_Did_you_mean_the_static_member_1_0,to(n),ye(i)),1;if(r===o&&!mh.hasModifier(r,32)&&X(be(i).thisType,t))return me(e,mh.Diagnostics.Cannot_find_name_0_Did_you_mean_the_instance_member_this_0,to(n)),1}r=r.parent}}(_,t,o)||no(_)||function(e,t){if(1920===i){var n=uo(Zn(e,t,792640,void 0,void 0,!1)),o=e.parent;if(n){if(mh.isQualifiedName(o)){mh.Debug.assert(o.left===e,"Should only be resolving left side of qualified name as a namespace");var r=o.right.escapedText;if(X(be(n),r))return me(o,mh.Diagnostics.Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1,mh.unescapeLeadingUnderscores(t),mh.unescapeLeadingUnderscores(r)),1}return me(e,mh.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_namespace_here,mh.unescapeLeadingUnderscores(t)),1}}}(_,t)||function(e,t){if(107455&i){if("any"===t||"string"===t||"number"===t||"boolean"===t||"never"===t)return me(e,mh.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_value_here,mh.unescapeLeadingUnderscores(t)),1;var n=uo(Zn(e,t,792640,void 0,void 0,!1));if(n&&!(1024&n.flags))return me(e,mh.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_value_here,mh.unescapeLeadingUnderscores(t)),1}}(_,t)||function(e,t,n){if(107031&n){if(uo(Zn(e,t,1024,void 0,void 0,!1)))return me(e,mh.Diagnostics.Cannot_use_namespace_0_as_a_value,mh.unescapeLeadingUnderscores(t)),1}else if(792640&n&&uo(Zn(e,t,1024,void 0,void 0,!1)))return me(e,mh.Diagnostics.Cannot_use_namespace_0_as_a_type,mh.unescapeLeadingUnderscores(t)),1}(_,t,i))||(g=void 0,a&&Vt<10&&(g=Iu(h,t,i))&&me(_,a,to(o),g),g||me(_,n,to(o)),Vt++)}function to(e){return mh.isString(e)?mh.unescapeLeadingUnderscores(e):mh.declarationNameToString(e)}function no(e){var t=function e(t){switch(t.kind){case 71:case 179:return t.parent?e(t.parent):void 0;case 201:if(mh.isEntityNameExpression(t.expression))return t.expression;default:return}}(e),n=!(!t||!fo(t,64,!0));return n&&me(e,mh.Diagnostics.Cannot_extend_an_interface_0_Did_you_mean_implements,mh.getTextOfNode(t)),n}function oo(e,t,n){return t&&!!mh.findAncestor(e,function(e){return e===n||mh.isFunctionLike(e)?"quit":e===t})}function ro(e){switch(e.kind){case 237:return e;case 239:return e.parent;case 240:return e.parent.parent;case 242:return e.parent.parent.parent;default:return}}function io(e){return mh.find(e.declarations,mh.isAliasSymbolDeclaration)}function so(e,t,n){var o,r,i=yo(e,e.moduleSpecifier),s=To(i,e.moduleSpecifier,n);if(s){var a,e=t.propertyName||t.name;if(e.escapedText)return mh.isShorthandAmbientModuleSymbol(i)?i:(t=void 0,t=i&&i.exports&&i.exports.get("export=")?X(z(s),e.escapedText):function(e){if(3&s.flags){var t=s.valueDeclaration.type;if(t)return uo(X(q(t),e))}}(e.escapedText),t=uo(t,n),(n=(a=!(a=function(e,t){if(1536&s.flags)return uo(xo(s).get(e),t)}(e.escapedText,n))&&J&&"default"===e.escapedText?vo(i,n)||uo(i,n):a)&&t?(n=a,(o=t)===ge&&n===ge?ge:794600&o.flags?o:((r=Kn(o.flags|n.flags,o.escapedName)).declarations=mh.concatenate(o.declarations,n.declarations),r.parent=o.parent||n.parent,o.valueDeclaration&&(r.valueDeclaration=o.valueDeclaration),n.members&&(r.members=n.members),o.exports&&(r.exports=o.exports),r)):a||t)||me(e,mh.Diagnostics.Module_0_has_no_exported_member_1,mo(i),mh.declarationNameToString(e)),n)}}function ao(e,t,n){return e.parent.parent.moduleSpecifier?so(e.parent.parent,e,n):fo(e.propertyName||e.name,t,!1,n)}function lo(e,t){switch(e.kind){case 237:return o=t,248===(n=e).moduleReference.kind?vo(yo(n,mh.getExternalModuleImportEqualsDeclarationExpression(n))):_o(n.moduleReference,o);case 239:var n=e,o=t,r=yo(n,n.parent.moduleSpecifier);if(r){var i=void 0;if((i=mh.isShorthandAmbientModuleSymbol(r)?r:(s=r.exports.get("export="))?X(z(s),"default"):uo(r.exports.get("default"),o))||J){if(!i&&J)return vo(r,o)||uo(r,o)}else me(n.name,mh.Diagnostics.Module_0_has_no_default_export,ye(r));return i}return;case 240:return s=t,r=e.parent.parent.moduleSpecifier,To(yo(e,r),r,s);case 242:return so(e.parent.parent.parent,e,t);case 246:return ao(e,901119,t);case 243:return fo(e.expression,901119,!1,t);case 236:return vo(e.parent.symbol,t)}var s,n,o}function co(e,t){return void 0===t&&(t=901119),e&&2097152==(e.flags&(2097152|t))}function uo(e,t){return!t&&co(e)?po(e):e}function po(e){mh.Debug.assert(0!=(2097152&e.flags),"Should only get Alias here.");var t,n,o=p(e);return o.target?o.target===ne&&(o.target=ge):(o.target=ne,t=io(e),mh.Debug.assert(!!t),n=lo(t),o.target===ne?o.target=n||ge:me(t,mh.Diagnostics.Circular_definition_of_import_alias_0,ye(e))),o.target}function go(e){var e=fe(e),t=po(e);t&&(t===ge||107455&t.flags&&!Ag(t))&&ho(e)}function ho(e){var t=p(e);t.referenced||(t.referenced=!0,t=io(e),mh.Debug.assert(!!t),243===t.kind?Rd(t.expression):246===t.kind?Rd(t.propertyName||t.name):mh.isInternalModuleImportEqualsDeclaration(t)&&Rd(t.moduleReference))}function _o(e,t){return 71===(e=71===e.kind&&mh.isRightSideOfQualifiedNameOrPropertyAccess(e)?e.parent:e).kind||143===e.parent.kind?fo(e,1920,!1,t):(mh.Debug.assert(237===e.parent.kind),fo(e,901119,!1,t))}function mo(e){return e.parent?mo(e.parent)+"."+ye(e):ye(e)}function fo(e,t,n,o,r){if(!mh.nodeIsMissing(e)){if(71===e.kind){var i=1920===t?mh.Diagnostics.Cannot_find_namespace_0:mh.Diagnostics.Cannot_find_name_0;if(!(i=Zn(r||e,e.escapedText,t,n?void 0:i,e,!0)))return}else if(143===e.kind||179===e.kind){var s=void 0;if(143===e.kind)s=e.left;else{if(179!==e.kind||185!==e.expression.kind&&!mh.isEntityNameExpression(e.expression))return;s=e.expression}var a=143===e.kind?e.right:e.name,s=fo(s,1920,n,!1,r);if(!s||mh.nodeIsMissing(a))return;if(s===ge)return s;if(!(i=Jn(xo(s),a.escapedText,t)))return void(n||me(a,mh.Diagnostics.Namespace_0_has_no_exported_member_1,mo(s),mh.declarationNameToString(a)))}else{if(185===e.kind)return mh.isEntityNameExpression(e.expression)?fo(e.expression,t,n,o,r):void 0;mh.Debug.assertNever(e,"Unknown entity name kind.")}return mh.Debug.assert(0==(1&mh.getCheckFlags(i)),"Should never get an instantiated symbol here."),i.flags&t||o?i:po(i)}}function yo(e,t){return ko(e,t,mh.Diagnostics.Cannot_find_module_0)}function ko(e,t,n,o){if(void 0===o&&(o=!1),9===t.kind||13===t.kind)return bo(e,t.text,n,t,o)}function bo(e,t,n,o,r){if(void 0===r&&(r=!1),void 0!==t){mh.startsWith(t,"@types/")&&me(o,mh.Diagnostics.Cannot_import_type_declaration_files_Consider_importing_0_instead_of_1,mh.removePrefix(t,"@types/"),t);var i=Ui(t,!0);if(i)return i;var i=mh.getResolvedModule(mh.getSourceFileOfNode(e),t),e=i&&mh.getResolutionDiagnostic(ue,i),s=i&&!e&&a.getSourceFile(i.resolvedFileName);if(s)return s.symbol?Io(s.symbol):void(n&&me(o,mh.Diagnostics.File_0_is_not_a_module,s.fileName));if(Xe){var s=mh.findBestPatternMatch(Xe,function(e){return e.pattern},t);if(s)return Io(s.symbol)}i&&!mh.extensionIsTypeScript(i.extension)&&void 0===e||e===mh.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type?r?me(o,mh.Diagnostics.Invalid_module_name_in_augmentation_Module_0_resolves_to_an_untyped_module_at_1_which_cannot_be_augmented,t,i.resolvedFileName):Q&&n&&(s=i.isExternalLibraryImport?mh.chainDiagnosticMessages(void 0,mh.Diagnostics.Try_npm_install_types_Slash_0_if_it_exists_or_add_a_new_declaration_d_ts_file_containing_declare_module_0,t):void 0,s=mh.chainDiagnosticMessages(s,mh.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type,t,i.resolvedFileName),en.add(mh.createDiagnosticForNodeFromMessageChain(o,s))):n&&(e?me(o,e,t,i.resolvedFileName):(r=mh.tryExtractTypeScriptExtension(t))?me(o,mh.Diagnostics.An_import_path_cannot_end_with_a_0_extension_Consider_importing_1_instead,r,mh.removeExtension(t,r)):me(o,n,t))}}function vo(e,t){return e&&Io(uo(e.exports.get("export="),t))||e}function To(e,t,n){var o=vo(e,n);return n||!o||1539&o.flags||me(t,mh.Diagnostics.Module_0_resolves_to_a_non_module_entity_and_cannot_be_imported_using_this_construct,ye(e)),o}function Eo(e){return void 0!==e.exports.get("export=")}function So(e){return Mi(Bo(e))}function Co(e,t){t=Bo(t);if(t)return t.get(e)}function xo(e){return 1536&e.flags?Bo(e):e.exports||R}function Bo(e){var l,t=p(e);return t.resolvedExports||(t.resolvedExports=(l=[],function e(t){if(t&&1952&t.flags&&mh.pushIfUnique(l,t)){var i=mh.cloneMap(t.exports),t=t.exports.get("__export");if(t){for(var n=mh.createSymbolTable(),s=mh.createMap(),o=0,r=t.declarations;o<r.length;o++){var a=r[o];Ao(n,e(yo(a,a.moduleSpecifier)),s,a)}s.forEach(function(e,t){e=e.exportsWithDuplicate;if("export="!==t&&e&&e.length&&!i.has(t))for(var n=0,o=e;n<o.length;n++){var r=o[n];en.add(mh.createDiagnosticForNode(r,mh.Diagnostics.Module_0_has_already_exported_a_member_named_1_Consider_explicitly_re_exporting_to_resolve_the_ambiguity,s.get(t).specifierText,mh.unescapeLeadingUnderscores(t)))}}),Ao(i,n)}return i}}(vo(e))||R))}function Ao(o,e,r,i){e&&e.forEach(function(e,t){var n;"default"!==t&&((n=o.get(t))?r&&i&&n&&uo(n)!==uo(e)&&((n=r.get(t)).exportsWithDuplicate?n.exportsWithDuplicate.push(i):n.exportsWithDuplicate=[i]):(o.set(t,e),r&&i&&r.set(t,{specifierText:mh.getTextOfNode(i.moduleSpecifier)})))})}function Io(e){var t;return e&&e.mergeId&&(t=Wt[e.mergeId])?t:e}function fe(e){return Io(e.symbol)}function Do(e){return Io(e.parent)}function No(e){return e&&0!=(1048576&e.flags)?Io(e.exportSymbol):e}function wo(e){return 107455&e.flags||2097152&e.flags&&107455&po(e).flags}function Oo(e){e=new t(k,e);return o++,e.id=o,e}function Ro(e,t){e=Oo(e);return e.intrinsicName=t,e}function Po(e,t){var n=Oo(32768);return n.objectFlags=e,n.symbol=t,n}function Lo(e){return 95===e.charCodeAt(0)&&95===e.charCodeAt(1)&&95!==e.charCodeAt(2)&&64!==e.charCodeAt(2)}function Mo(e){var n;return e.forEach(function(e,t){Lo(t)||(n=n||[],wo(e)&&n.push(e))}),n||mh.emptyArray}function Fo(e,t,n,o,r,i){return e.members=t,e.properties=Mo(t),e.callSignatures=n,e.constructSignatures=o,r&&(e.stringIndexInfo=r),i&&(e.numberIndexInfo=i),e}function Uo(e,t,n,o,r,i){return Fo(Po(16,e),t,n,o,r,i)}function Ho(e,t){for(var n,o=e;o;o=o.parent){if(o.locals&&!qn(o)&&(n=t(o.locals)))return n;switch(o.kind){case 265:if(!mh.isExternalOrCommonJsModule(o))break;case 233:if(n=t(fe(o).exports))return n}}return t(Nt)}function Vo(e){return 107455===e?107455:1920}function Wo(o,r,i,s){var t;if(o&&!function(){if(o.declarations&&o.declarations.length){for(var e=0,t=o.declarations;e<t.length;e++)switch(t[e].kind){case 149:case 151:case 153:case 154:continue;default:return}return 1}}())return t=[],Ho(r,function n(e){if(mh.pushIfUnique(t,e))return e=function(e){return l(e.get(o.escapedName))?[o]:mh.forEachEntry(e,function(e){var t;if(2097152&e.flags&&"export="!==e.escapedName&&!mh.getDeclarationOfKind(e,246)&&!(function(e){return e&&e.declarations&&e.declarations[0]&&mh.isNamespaceExportDeclaration(e.declarations[0])}(e)&&r&&mh.isExternalModule(mh.getSourceFileOfNode(r)))&&(!s||mh.some(e.declarations,mh.isExternalModuleImportEqualsDeclaration)))return t=po(e),l(e,t)?[e]:(t=t.exports?n(t.exports):void 0)&&a(e,Vo(i))?[e].concat(t):void 0})}(e),t.pop(),e});function a(e,t){return!Go(e,r,t)||!!Wo(e.parent,r,Vo(t),s)}function l(e,t){return o===(t||e)&&!mh.some(e.declarations,zo)&&a(e,i)}}function Go(t,e,n){var o=!1;return Ho(e,function(e){e=e.get(t.escapedName);return!!e&&(e===t||!!((2097152&e.flags&&!mh.getDeclarationOfKind(e,246)?po(e):e).flags&n)&&(o=!0))}),o}function Ko(e,t){return 0===jo(e,t,793064,!1).accessibility}function jo(e,t,n,o){if(!e||!t||262144&e.flags)return{accessibility:0};for(var r=e,i=n;e;){var s=Wo(e,t,i,!1);if(s)return Xo(s[0],o)||{accessibility:1,errorSymbolName:ye(r,t,n),errorModuleName:e!==r?ye(e,t,1920):void 0};i=Vo(n),e=Do(e)}var a=mh.forEach(r.declarations,l);return a&&a!==l(t)?{accessibility:2,errorSymbolName:ye(r,t,n),errorModuleName:ye(a)}:{accessibility:1,errorSymbolName:ye(r,t,n)};function l(e){e=mh.findAncestor(e,zo);return e&&fe(e)}}function zo(e){return mh.isAmbientModule(e)||265===e.kind&&mh.isExternalOrCommonJsModule(e)}function Xo(e,n){var o;if(!mh.forEach(e.declarations,function(e){return!(ir(e=e)||(t=ro(e))&&!mh.hasModifier(t,1)&&ir(t.parent)&&(n&&(j(e).isVisible=!0,o=mh.appendIfUnique(o,t)),1));var t}))return{accessibility:0,aliasesToMakeVisible:o}}function $o(e,t){var n=162===e.parent.kind||mh.isExpressionWithTypeArgumentsInClassExtendsClause(e.parent)?1156031:143===e.kind||179===e.kind||237===e.parent.kind?1920:793064,e=qp(e),t=Zn(t,e.escapedText,n,void 0,void 0,!1);return t&&Xo(t,!0)||{accessibility:1,errorSymbolName:mh.getTextOfNode(e),errorNode:e}}function Yo(e,t){e.writeKeyword(mh.tokenToString(t))}function A(e,t){e.writePunctuation(mh.tokenToString(t))}function I(e){e.writeSpace(" ")}function ye(t,n,o){return mh.usingSingleLineStringWriter(function(e){rr().buildSymbolDisplay(t,e,n,o)})}function qo(t,n,o,r){return mh.usingSingleLineStringWriter(function(e){rr().buildSignatureDisplay(t,e,n,o,r)})}function ke(e,t,n){var e=h.typeToTypeNode(e,t,(e=mh.NodeBuilderFlags.None,n&&(8&n&&(e|=mh.NodeBuilderFlags.NoTruncation),256&n&&(e|=mh.NodeBuilderFlags.UseFullyQualifiedType),4096&n&&(e|=mh.NodeBuilderFlags.SuppressAnyReturnType),1&n&&(e|=mh.NodeBuilderFlags.WriteArrayAsGenericType),64&n)&&(e|=mh.NodeBuilderFlags.WriteTypeArgumentsOfSignature),e|mh.NodeBuilderFlags.IgnoreErrors|mh.NodeBuilderFlags.WriteTypeParametersInQualifiedName)),o=(mh.Debug.assert(void 0!==e,"should always get typenode"),mh.createTextWriter("")),r=mh.createPrinter({removeComments:!0}),t=t&&mh.getSourceFileOfNode(t),r=(r.writeNode(4,e,t,o),o.getText()),e=ue.noErrorTruncation||8&n?void 0:100;return e&&r.length>=e?r.substr(0,e-"...".length)+"...":r}function Jo(t,n,o){return mh.usingSingleLineStringWriter(function(e){rr().buildTypePredicateDisplay(t,e,n,o)})}function Qo(e){for(var t=[],n=0,o=0;o<e.length;o++){var r=e[o];if(n|=r.flags,!(6144&r.flags)){if(384&r.flags){var i=128&r.flags?we:Yr(r);if(65536&i.flags){var s=i.types.length;if(o+s<=e.length&&e[o+s-1]===i.types[s-1]){t.push(i),o+=s-1;continue}}}t.push(r)}}return 4096&n&&t.push(ie),2048&n&&t.push(De),t||e}function Zo(e){return 8===e?"private":16===e?"protected":"public"}function er(e){if(e.symbol&&2048&e.symbol.flags){e=mh.findAncestor(e.symbol.declarations[0].parent,function(e){return 168!==e.kind});if(231===e.kind)return fe(e)}}function tr(e){return e&&e.parent&&234===e.parent.kind&&mh.isExternalModuleAugmentation(e.parent.parent)}function nr(e){return 32&e.flags?'"'+mh.escapeString(e.value)+'"':""+e.value}function or(e,t){if(e.declarations&&e.declarations.length){var n=e.declarations[0],o=mh.getNameOfDeclaration(n);if(o)return mh.declarationNameToString(o);if(n.parent&&226===n.parent.kind)return mh.declarationNameToString(n.parent.name);switch(!t||t.encounteredError||t.flags&mh.NodeBuilderFlags.AllowAnonymousIdentifier||(t.encounteredError=!0),n.kind){case 199:return"(Anonymous class)";case 186:case 187:return"(Anonymous function)"}}if(e.syntheticLiteralTypeOrigin){o=e.syntheticLiteralTypeOrigin.value;if(!mh.isIdentifierText(o,ue.target))return'"'+mh.escapeString(o,34)+'"'}return mh.symbolName(e)}function rr(){function S(e,t){t.writeSymbol(or(e),e)}function C(e,i,l,t,c,n){var u;function d(e){var t,n,o,r;u?(1&c&&(1&mh.getCheckFlags(e)?g(Mr(2097152&u.flags?po(u):u),e.mapper,i,l):a(u,i,l)),n=i,o=or(t=e),r=o.charCodeAt(0),mh.isIdentifierStart(r,de)?(A(n,23),n.writeSymbol(o,t)):(A(n,21),mh.isSingleOrDoubleQuote(r)?n.writeStringLiteral(o):n.writeSymbol(o,t),A(n,22))):S(e,i),u=e}i.trackSymbol(e,l,t),262144&e.flags||!l&&!(256&n)?d(e):function e(t,n,o){var r,i=Wo(t,l,n,!!(2&c));if(i&&!Go(i[0],l,1===i.length?n:Vo(n))||(r=Do(i?i[0]:t))&&e(r,Vo(n),!1),i)for(var s=0,a=i;s<a.length;s++)d(a[s]);else!o&&(!u&&mh.forEach(t.declarations,zo)||6144&t.flags)||d(t)}(e,t,!0)}function s(e,h,_,m,f){var y=16416&m,k=!1;return b(e,m);function b(e,t){var n,o=-1025&t;if(16793231&e.flags)h.writeKeyword(32&m||!D(e)?e.intrinsicName:"any");else if(16384&e.flags&&e.isThisType)k&&h.reportInaccessibleThisError(),h.writeKeyword("this");else if(4&w(e)){var r=e,i=o,s=r.typeArguments||mh.emptyArray;if(r.target!==qe||1&i)if(8&r.target.objectFlags)A(h,21),g(r.typeArguments.slice(0,as(r)),26),A(h,22);else if(16384&i&&r.symbol.valueDeclaration&&199===r.symbol.valueDeclaration.kind)T(r,i);else{var a=r.target.outerTypeParameters,l=0;if(a)for(var c=a.length;l<c;){for(var u=l,d=ns(a[l]);++l<c&&ns(a[l])===d;);mh.rangeEquals(a,s,u,l)||(v(d,s,u,l,i),A(h,23))}var p=(r.target.typeParameters||mh.emptyArray).length;v(r.symbol,s,l,p,i)}else b(s[0],32896),A(h,21),A(h,22)}else 256&e.flags&&!(65536&e.flags)?(C(r=Do(e.symbol),h,_,793064,0,o),be(r)!==e&&(A(h,23),S(e.symbol,h))):3&w(e)||16656&e.flags?C(e.symbol,h,_,793064,0,o):1024&t||!e.aliasSymbol||!(65536&t||Ko(e.aliasSymbol,_))?196608&e.flags?(p=e,128&(n=o)&&A(h,19),65536&p.flags?g(Qo(p.types),49):g(p.types,48),128&n&&A(h,20)):48&w(e)?T(e,o):96&e.flags?h.writeStringLiteral(nr(e)):262144&e.flags?(128&t&&A(h,19),h.writeKeyword("keyof"),I(h),b(e.type,128),128&t&&A(h,20)):524288&e.flags?(b(e.objectType,128),A(h,21),b(e.indexType,0),A(h,22)):(A(h,17),I(h),A(h,24),I(h),A(h,18)):(n=e.aliasTypeArguments,v(e.aliasSymbol,n,0,mh.length(n),o))}function g(e,t){for(var n=0;n<e.length;n++)0<n&&(26!==t&&I(h),A(h,t),I(h)),b(e[n],26===t?0:128)}function v(e,t,n,o,r){if((32&e.flags||!Lo(e.escapedName))&&C(e,h,_,793064,0,r),n<o){for(A(h,27),b(t[n],512),n++;n<o;)A(h,26),I(h),b(t[n],0),n++;A(h,29)}}function T(e,t){var n,o,r=e.symbol;r?32&r.flags&&!Ar(r)&&!(199===r.valueDeclaration.kind&&16384&t)||896&r.flags||(n=!!(8192&r.flags)&&mh.some(r.declarations,function(e){return mh.hasModifier(e,32)}),o=!!(16&r.flags)&&(r.parent||mh.some(r.declarations,function(e){return 265===e.parent.kind||234===e.parent.kind})),(n||o)&&(4&t||mh.contains(f,r)))?i(e,t):mh.contains(f,r)?(n=er(e))?C(n,h,_,793064,0,t):Yo(h,119):(f=f||[],16&e.objectFlags&&e.symbol&&32&e.symbol.flags?s(e,t):(f.push(r),s(e,t),f.pop())):s(e,t)}function i(e,t){32768&t&&A(h,19),Yo(h,103),I(h),C(e.symbol,h,_,107455,0,t),32768&t&&A(h,20)}function E(e){yd(e)&&(Yo(h,131),I(h)),C(e,h),16777216&e.flags&&A(h,55)}function s(e,t){if(yi(e))g=e,A(h,17),h.writeLine(),h.increaseIndent(),g.declaration.readonlyToken&&(Yo(h,131),I(h)),A(h,21),S(_i(g).symbol,h),I(h),Yo(h,92),I(h),b(mi(g),0),A(h,22),g.declaration.questionToken&&A(h,55),A(h,56),I(h),b(fi(g),0),A(h,25),h.writeLine(),h.decreaseIndent(),A(h,18);else{g=ki(e);if(!g.properties.length&&!g.stringIndexInfo&&!g.numberIndexInfo){if(!g.callSignatures.length&&!g.constructSignatures.length)return A(h,17),A(h,18);if(1===g.callSignatures.length&&!g.constructSignatures.length)return e=g.callSignatures[0],(e=!!(128&t)||!!(512&t)&&(e=(e.target&&64&t?e.target:e).typeParameters)&&0!==e.length)&&A(h,19),x(g.callSignatures[0],h,_,16|y,void 0,f),e&&A(h,20);if(1===g.constructSignatures.length&&!g.callSignatures.length)return 128&t&&A(h,19),Yo(h,94),I(h),x(g.constructSignatures[0],h,_,16|y,void 0,f),128&t&&A(h,20)}for(var e=k,t=(k=!0,A(h,17),h.writeLine(),h.increaseIndent(),g),n=0,o=t.callSignatures;n<o.length;n++)x(p=o[n],h,_,y,void 0,f),A(h,25),h.writeLine();for(var r=0,i=t.constructSignatures;r<i.length;r++)x(p=i[r],h,_,y,1,f),A(h,25),h.writeLine();B(t.stringIndexInfo,h,0,_,m,f),B(t.numberIndexInfo,h,1,_,m,f);for(var s=0,a=t.properties;s<a.length;s++){var l=a[s];if(16384&m){if(4194304&l.flags)continue;24&mh.getDeclarationModifierFlagsFromSymbol(l)&&h.reportPrivateInBaseOfClassExpression(mh.symbolName(l))}var c=z(l);if(8208&l.flags&&!bi(c).length)for(var u=0,d=$(c,0);u<d.length;u++){var p=d[u];E(l),x(p,h,_,y,void 0,f),A(h,25),h.writeLine()}else E(l),A(h,56),I(h),b(c,16384&m),A(h,25),h.writeLine()}h.decreaseIndent(),A(h,18),k=e}var g}}function a(e,t,n,o){var r=zp(e);(32&r.flags||64&r.flags||524288&r.flags)&&d(Lr(e),t,n,o)}function i(e,t,n,o,r){S(e.symbol,t);var i=Ti(e),i=(i&&(I(t),Yo(t,85),I(t),s(i,t,n,o,r)),Ai(e));i&&(I(t),A(t,58),I(t),s(i,t,n,o,r))}function l(e,t,n,o,r){var i=e.valueDeclaration,e=((i?mh.isRestParameter(i):jn(e)&&e.isRestParameter)&&A(t,24),i&&mh.isBindingPattern(i.name)?c(i.name,t,n,o,r):S(e,t),i&&Hi(i)&&A(t,55),A(t,56),I(t),z(e));s(e=i&&Dg(i)?_l(e,2048):e,t,n,o,r)}function c(e,t,n,o,r){174===e.kind?(A(t,17),p(e.elements,t,function(e){u(e,t,n,o,r)}),A(t,18)):175===e.kind&&(A(t,21),p(e=e.elements,t,function(e){u(e,t,n,o,r)}),e&&e.hasTrailingComma&&A(t,26),A(t,22))}function u(e,t,n,o,r){mh.isOmittedExpression(e)||(mh.Debug.assert(176===e.kind),e.propertyName&&(t.writeProperty(mh.getTextOfNode(e.propertyName)),A(t,56),I(t)),mh.isBindingPattern(e.name)?c(e.name,t,n,o,r):(e.dotDotDotToken&&A(t,24),S(e.symbol,t)))}function d(e,t,n,o,r){e&&e.length&&(A(t,27),p(e,t,function(e){i(e,t,n,o,r)}),A(t,29))}function p(e,t,n){for(var o=0;o<e.length;o++)0<o&&(A(t,26),I(t)),n(e[o])}function g(e,t,n,o){if(e&&e.length){A(n,27);for(var r=512,i=0;i<e.length;i++)0<i&&(A(n,26),I(n),r=0),s(t(e[i]),n,o,r);A(n,29)}}function h(e,t,n,o,r,i){A(n,19),e&&l(e,n,o,r,i);for(var s=0;s<t.length;s++)(0<s||e)&&(A(n,26),I(n)),l(t[s],n,o,r,i);A(n,20)}function _(e,t,n,o,r){mh.isIdentifierTypePredicate(e)?t.writeParameter(e.parameterName):Yo(t,99),I(t),Yo(t,126),I(t),s(e.type,t,n,o,r)}function m(e,t,n,o,r){var i=Te(e);4096&o&&D(i)||(16&o?(I(t),A(t,36)):A(t,56),I(t),e.typePredicate?_(e.typePredicate,t,n,o,r):s(i,t,n,o,r))}function x(e,t,n,o,r,i){1===r&&(Yo(t,94),I(t)),e.target&&64&o?g(e.target.typeParameters,e.mapper,t,n):d(e.typeParameters,t,n,o,i),h(e.thisParameter,e.parameters,t,n,o,i),m(e,t,n,o,i)}function B(e,t,n,o,r,i){if(e){switch(e.isReadonly&&(Yo(t,131),I(t)),A(t,21),t.writeParameter(e.declaration?mh.declarationNameToString(e.declaration.parameters[0].name):"x"),A(t,56),I(t),n){case 1:Yo(t,133);break;case 0:Yo(t,136)}A(t,22),A(t,56),I(t),s(e.type,t,o,r,i),A(t,25),t.writeLine()}}return sn=sn||{buildSymbolDisplay:C,buildTypeDisplay:s,buildTypeParameterDisplay:i,buildTypePredicateDisplay:_,buildParameterDisplay:l,buildDisplayForParametersAndDelimiters:h,buildDisplayForTypeParametersAndDelimiters:d,buildTypeParameterDisplayFromSymbol:a,buildSignatureDisplay:x,buildIndexSignatureDisplay:B,buildReturnTypeDisplay:m}}function ir(t){var e;return!!t&&(void 0===(e=j(t)).isVisible&&(e.isVisible=!!function(){switch(t.kind){case 176:return ir(t.parent.parent);case 226:if(mh.isBindingPattern(t.name)&&!t.name.elements.length)return;case 233:case 229:case 230:case 231:case 228:case 232:case 237:var e;return mh.isExternalModuleAugmentation(t)?1:(e=ur(t),(1&mh.getCombinedModifierFlags(t)||237!==t.kind&&265!==e.kind&&mh.isInAmbientContext(e)?ir:qn)(e));case 149:case 148:case 153:case 154:case 151:case 150:if(mh.hasModifier(t,24))return;case 152:case 156:case 155:case 157:case 146:case 234:case 160:case 161:case 163:case 159:case 164:case 165:case 166:case 167:case 168:return ir(t.parent);case 239:case 240:case 242:return;case 145:case 265:case 236:return 1;default:return}}()),e.isVisible)}function sr(e){e.parent&&243===e.parent.kind?t=Zn(e.parent,e.escapedText,2998271,mh.Diagnostics.Cannot_find_name_0,e,!1):246===e.parent.kind&&(t=ao(e.parent,2998271));var t,o=[];return t&&function n(e){mh.forEach(e,function(e){j(e).isVisible=!0;var t=ro(e)||e;mh.pushIfUnique(o,t),mh.isInternalModuleImportEqualsDeclaration(e)&&(t=Zn(e,qp(e.moduleReference).escapedText,901119,void 0,void 0,!1))&&n(t.declarations)})}(t.declarations),o}function ar(e,t){var n=lr(e,t);if(!(0<=n))return Ft.push(e),Ut.push(!0),Ht.push(t),1;for(var o=Ft.length,r=n;r<o;r++)Ut[r]=!1}function lr(e,t){for(var n,o,r=Ft.length-1;0<=r;r--){if(n=Ft[r],0===(o=Ht[r])?p(n).type:2===o?p(n).declaredType:1===o?n.resolvedBaseConstructorType:3===o?n.resolvedReturnType:void mh.Debug.fail("Unhandled TypeSystemPropertyName "+o))return-1;if(Ft[r]===e&&Ht[r]===t)return r}return-1}function cr(){return Ft.pop(),Ht.pop(),Ut.pop()}function ur(e){return(e=mh.findAncestor(mh.getRootDeclaration(e),function(e){switch(e.kind){case 226:case 227:case 242:case 241:case 240:case 239:return!1;default:return!0}}))&&e.parent}function dr(e,t){e=X(e,t);return e?z(e):void 0}function D(e){return e&&0!=(1&e.flags)}function pr(e){var t=fe(e);return t&&p(t).type||kr(e,!1)}function gr(e){return 144===e.kind&&!mh.isStringOrNumericLiteral(e.expression)}function hr(e,t,n){if(8192&(e=ac(e,function(e){return!(6144&e.flags)})).flags)return N;if(65536&e.flags)return lc(e,function(e){return hr(e,t,n)});for(var o=mh.createSymbolTable(),r=mh.createUnderscoreEscapedMap(),i=0,s=t;i<s.length;i++){var a=s[i];r.set(mh.getTextOfPropertyName(a),!0)}for(var l=0,c=ve(e);l<c.length;l++){var u=c[l],d=r.has(u.escapedName),p=24&mh.getDeclarationModifierFlagsFromSymbol(u),g=65536&u.flags&&!(32768&u.flags);d||p||aa(u)||g||o.set(u.escapedName,u)}var h=O(e,0),e=O(e,1);return Uo(n,o,mh.emptyArray,mh.emptyArray,h,e)}function _r(e){var t,n=e.parent,o=pr(n.parent);if(o===he)return he;if(!o)return e.initializer?Ld(e):o;if(D(o))return o;if(174===n.kind)if(e.dotDotDotToken){if(!ou(o))return me(e,mh.Diagnostics.Rest_types_may_only_be_created_from_object_types),he;for(var r=[],i=0,s=n.elements;i<s.length;i++){var a=s[i];a.dotDotDotToken||r.push(a.propertyName||a.name)}t=hr(o,r,e.symbol)}else{var l=e.propertyName||e.name;if(gr(l))return K;var c=mh.getTextOfPropertyName(l),u=dr(o,c);if(!(t=u&&bc(e,u)||Zc(c)&&Pi(o,1)||Pi(o,0)))return me(l,mh.Diagnostics.Type_0_has_no_property_1_and_no_string_index_signature,ke(o),mh.declarationNameToString(l)),he}else{u=Rp(o,n,!1,!1);if(e.dotDotDotToken)t=Ls(u);else{c=""+mh.indexOf(n.elements,e);if(!(t=il(o)?dr(o,c):u))return ul(o)?me(e,mh.Diagnostics.Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2,ke(o),as(o),n.elements.length):me(e,mh.Diagnostics.Type_0_has_no_property_1,ke(o),c),he}}return!pe||!e.initializer||2048&pl(Rd(e.initializer))||(t=Xl(t,131072)),e.initializer?Y([t,Rd(e.initializer)],!0):t}function mr(e){e=mh.getJSDocType(e);if(e)return q(e)}function fr(e){e=mh.skipParentheses(e);return 177===e.kind&&0===e.elements.length}function yr(e,t){return pe&&t?_l(e,2048):e}function kr(e,t){if(215===e.parent.parent.kind)return 278528&(n=Xs(Eu(e.parent.parent.expression))).flags?n:_e;if(216===e.parent.parent.kind)return Op((n=e.parent.parent).expression,n.awaitModifier)||K;if(mh.isBindingPattern(e.parent))return _r(e);var n=mh.getEffectiveTypeAnnotationNode(e);if(n)return yr(q(n),e.questionToken&&t);if((Q||mh.isInJavaScriptFile(e))&&226===e.kind&&!mh.isBindingPattern(e.name)&&!(1&mh.getCombinedModifierFlags(e))&&!mh.isInAmbientContext(e)){if(!(2&mh.getCombinedNodeFlags(e)||e.initializer&&(n=e.initializer,95!==(n=mh.skipParentheses(n)).kind)&&(71!==n.kind||Ml(n)!==_)))return oe;if(e.initializer&&fr(e.initializer))return rt}if(146===e.kind){n=e.parent;if(154===n.kind&&!mh.hasDynamicName(n)){var o=mh.getDeclarationOfKind(e.parent.symbol,153);if(o)return o=Gi(o),(r=ah(n))&&e===r?(mh.Debug.assert(!r.type),z(o.thisParameter)):Te(o)}var r=void 0;if(r="this"===e.symbol.escapedName?Pc(n):Lc(e))return yr(r,e.questionToken&&t)}return e.initializer?yr(r=Ld(e),e.questionToken&&t):mh.isJsxAttribute(e)?le:262===e.kind?xc(e.name):mh.isBindingPattern(e.name)?vr(e.name,!1,!0):void 0}function br(e,t,n){return e.initializer?Ld(e):mh.isBindingPattern(e.name)?vr(e.name,t,n):(n&&Q&&!Er(e)&&Tl(e,K),K)}function vr(e,t,n){return 174===e.kind?(i=e,s=t,a=n,c=mh.createSymbolTable(),u=!1,mh.forEach(i.elements,function(e){var t=e.propertyName||e.name;gr(t)?u=!0:e.dotDotDotToken?l=Zi(K,!1):(t=mh.getTextOfPropertyName(t),(t=Kn(4|(e.initializer?16777216:0),t)).type=br(e,s,a),t.bindingElement=e,c.set(t.escapedName,t))}),d=Uo(void 0,c,mh.emptyArray,mh.emptyArray,l,void 0),s&&(d.pattern=i),u&&(d.objectFlags|=512),d):(o=t,r=n,d=(i=e).elements,t=mh.lastOrUndefined(d),0===d.length||!mh.isOmittedExpression(t)&&t.dotDotDotToken?2<=de?Rs(K):ot:(t=Ms(mh.map(d,function(e){return mh.isOmittedExpression(e)?K:br(e,o,r)})),o&&((t=ss(t)).pattern=i),t));var o,r,i,s,a,l,c,u,d}function Tr(e,t){var n=kr(e,!0);return n?(t&&El(e,n),261===e.kind?n:vl(n)):(n=e.dotDotDotToken?ot:K,t&&Q&&(Er(e)||Tl(e,n)),n)}function Er(e){e=mh.getRootDeclaration(e);return Jd(146===e.kind?e.parent:e)}function Sr(c){var e=p(c);if(!e.type){if(4194304&c.flags)return e.type=(t=be(Do(c))).typeParameters?is(t,mh.map(t.typeParameters,function(e){return K})):t;var t=c.valueDeclaration;if(mh.isCatchClauseVariableDeclarationOrBindingElement(t))return e.type=K;if(243===t.kind)return e.type=Se(t.expression);if(mh.isInJavaScriptFile(t)&&mh.isJSDocPropertyLikeTag(t)&&t.typeExpression)return e.type=q(t.typeExpression.type);if(!ar(c,0))return he;var n=void 0,n=194===t.kind||179===t.kind&&194===t.parent.kind?function(){for(var e,t=[],n=!1,o=!1,r=0,i=c.declarations;r<i.length;r++){var s=i[r],a=194===s.kind?s:179===s.kind?mh.getAncestor(s,194):void 0;if(!a)return he;mh.isPropertyAccessExpression(a.left)&&99===a.left.expression.kind&&(152===mh.getThisContainer(a,!1).kind?n=!0:o=!0);var l=mr(a.parent);l?(l=vl(l),e?e===he||l===he||Aa(e,l)||me(s=mh.getNameOfDeclaration(s),mh.Diagnostics.Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2,mh.declarationNameToString(s),ke(e),ke(l)):e=l):e||t.push(cl(Rd(a.right)))}return vl(yr(e||Y(t,!0),o&&!n))}():Tr(t,!0);cr()||(n=Ir(c)),e.type=n}return e.type}function Cr(e){var t;if(e)return 153===e.kind?(t=mh.getEffectiveReturnTypeNode(e))&&q(t):(t=mh.getEffectiveSetAccessorTypeAnnotationNode(e))&&q(t)}function xr(e){return ji(Gi(e))}function Br(e){var t=p(e);if(!t.type){var n=mh.getDeclarationOfKind(e,153),o=mh.getDeclarationOfKind(e,154);if(n&&mh.isInJavaScriptFile(n)){var r=mr(n);if(r)return t.type=r}if(!ar(e,0))return he;var r=void 0,i=Cr(n);r=i||Cr(o)||(n&&n.body?pd(n):(Q&&(o?me(o,mh.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation,ye(e)):(mh.Debug.assert(!!n,"there must existed getter as we are current checking either setter or getter in this function"),me(n,mh.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation,ye(e)))),K)),cr()||(r=K,Q&&me(mh.getDeclarationOfKind(e,153),mh.Diagnostics._0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions,ye(e))),t.type=r}return t.type}function Ar(e){e=Gr(zr(e));return 540672&e.flags?e:void 0}function Ir(e){return mh.getEffectiveTypeAnnotationNode(e.valueDeclaration)?(me(e.valueDeclaration,mh.Diagnostics._0_is_referenced_directly_or_indirectly_in_its_own_type_annotation,ye(e)),he):(Q&&me(e.valueDeclaration,mh.Diagnostics._0_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_and_is_referenced_directly_or_indirectly_in_its_own_initializer,ye(e)),K)}function z(e){if(1&mh.getCheckFlags(e)){var t=e,n=p(t);if(!n.type)if(100===g)me(t.valueDeclaration,mh.Diagnostics.Generic_type_instantiation_is_excessively_deep_and_possibly_infinite),n.type=he;else{if(!ar(t,0))return he;g++;var o=V(z(n.target),n.mapper);g--,cr()||(o=Ir(t)),n.type=o}return n.type}return 7&e.flags?Sr(e):9136&e.flags?((o=p(t=e)).type||(1536&t.flags&&mh.isShorthandAmbientModuleSymbol(t)?o.type=K:(n=Po(16,t),32&t.flags?(i=Ar(t),o.type=i?js([n,i]):n):o.type=pe&&16777216&t.flags?_l(n,2048):n)),o.type):8&e.flags?((r=p(i=e)).type||(r.type=Jr(i)),r.type):98304&e.flags?Br(e):2097152&e.flags?((e=p(r=e)).type||(r=po(r),e.type=107455&r.flags?z(r):he),e.type):he;var r,i}function Dr(e,t){return void 0!==e&&void 0!==t&&0!=(4&w(e))&&e.target===t}function Nr(e){return 4&w(e)?e.target:e}function wr(e,o){return function e(t){var n;return 7&w(t)?(n=Nr(t))===o||mh.forEach(Kr(n),e):131072&t.flags?mh.forEach(t.types,e):void 0}(e)}function Or(e,t){for(var n=0,o=t;n<o.length;n++){var r=Qr(fe(o[n]));e=mh.appendIfUnique(e,r)}return e}function Rr(e,t){for(;;){if(!(e=e.parent))return;switch(e.kind){case 229:case 199:case 230:case 155:case 156:case 150:case 160:case 161:case 273:case 228:case 151:case 186:case 187:case 231:case 282:case 172:var n,o=Rr(e,t);return 172===e.kind?mh.append(o,Qr(fe(e.typeParameter))):(o=Or(o,mh.getEffectiveTypeParameterDeclarations(e)||mh.emptyArray),(n=t&&(229===e.kind||199===e.kind||230===e.kind)&&zr(fe(e)).thisType)?mh.append(o,n):o)}}}function Pr(e){return Rr(32&e.flags?e.valueDeclaration:mh.getDeclarationOfKind(e,230))}function Lr(e){for(var t,n=0,o=e.declarations;n<o.length;n++){var r=o[n];230!==r.kind&&229!==r.kind&&199!==r.kind&&231!==r.kind||r.typeParameters&&(t=Or(t,r.typeParameters))}return t}function Mr(e){return mh.concatenate(Pr(e),Lr(e))}function Fr(e){var e=$(e,1);return 1===e.length&&!(e=e[0]).typeParameters&&1===e.parameters.length&&e.hasRestParameter&&sd(e.parameters[0])===ot}function Ur(e){return jr(e)&&0<$(e,1).length||(540672&e.flags?(e=Si(e))&&jr(e)&&Fr(e):void 0)}function Hr(e){e=e.symbol.valueDeclaration;if(mh.isInJavaScriptFile(e)){var t=mh.getJSDocAugmentsTag(e);if(t)return t.class}return mh.getClassExtendsHeritageClauseElement(e)}function Vr(e,t,n){var o=mh.length(t),r=mh.isInJavaScriptFile(n);return mh.filter($(e,1),function(e){return(r||o>=Vi(e.typeParameters))&&o<=mh.length(e.typeParameters)})}function Wr(e,t,n){var e=Vr(e,t,n),o=mh.map(t,q);return mh.sameMap(e,function(e){return mh.some(e.typeParameters)?Xi(e,o,mh.isInJavaScriptFile(n)):e})}function Gr(e){if(!e.resolvedBaseConstructorType){var t=e.symbol.valueDeclaration,t=mh.getClassExtendsHeritageClauseElement(t),n=Hr(e);if(!n)return e.resolvedBaseConstructorType=De;if(!ar(e,1))return he;var o=Se(n.expression);if(t&&n!==t&&(mh.Debug.assert(!t.typeArguments),Se(t.expression)),163840&o.flags&&ki(o),!cr())return me(e.symbol.valueDeclaration,mh.Diagnostics._0_is_referenced_directly_or_indirectly_in_its_own_base_expression,ye(e.symbol)),e.resolvedBaseConstructorType=he;if(!(1&o.flags||o===se||Ur(o)))return me(n.expression,mh.Diagnostics.Type_0_is_not_a_constructor_function_type,ke(o)),e.resolvedBaseConstructorType=he;e.resolvedBaseConstructorType=o}return e.resolvedBaseConstructorType}function Kr(e){if(!e.resolvedBaseTypes)if(8&e.objectFlags)e.resolvedBaseTypes=[Ls(Y(e.typeParameters))];else if(96&e.symbol.flags){if(32&e.symbol.flags&&function(e){e.resolvedBaseTypes=mh.emptyArray;var t=G(Gr(e));if(163841&t.flags){var n,o,r=Hr(e),i=hs(r),s=t&&t.symbol?be(t.symbol):void 0;if(t.symbol&&32&t.symbol.flags&&(!(a=s.outerTypeParameters)||(o=a.length-1,s=s.typeArguments,a[o].symbol!==s[o].symbol)))n=ls(r,t.symbol,i);else if(1&t.flags)n=t;else{var a=Wr(t,r.typeArguments,r);if(!a.length)return me(r.expression,mh.Diagnostics.No_base_constructor_has_the_specified_number_of_type_arguments);n=Te(a[0])}if(n!==he)jr(n)?e===n||wr(n,e)?me(e.symbol.valueDeclaration,mh.Diagnostics.Type_0_recursively_references_itself_as_a_base_type,ke(e,void 0,1)):e.resolvedBaseTypes=[n]:me(r.expression,mh.Diagnostics.Base_constructor_return_type_0_is_not_a_class_or_interface_type,ke(n))}}(e),64&e.symbol.flags){var t=e;t.resolvedBaseTypes=t.resolvedBaseTypes||mh.emptyArray;for(var n=0,o=t.symbol.declarations;n<o.length;n++){var r=o[n];if(230===r.kind&&mh.getInterfaceBaseTypeNodes(r))for(var i=0,s=mh.getInterfaceBaseTypeNodes(r);i<s.length;i++){var a=s[i],l=q(a);l!==he&&(jr(l)?t===l||wr(l,t)?me(r,mh.Diagnostics.Type_0_recursively_references_itself_as_a_base_type,ke(t,void 0,1)):t.resolvedBaseTypes===mh.emptyArray?t.resolvedBaseTypes=[l]:t.resolvedBaseTypes.push(l):me(a,mh.Diagnostics.An_interface_may_only_extend_a_class_or_another_interface))}}}}else mh.Debug.fail("type must be class or interface");return e.resolvedBaseTypes}function jr(e){return 16809985&e.flags&&!yi(e)||131072&e.flags&&!mh.forEach(e.types,function(e){return!jr(e)})}function zr(s){var e,t,n,o,r=p(s);return!r.declaredType&&(e=32&s.flags?1:2,t=r.declaredType=Po(e,s),n=Pr(s),o=Lr(s),n||o||1==e||!function(){for(var e=0,t=s.declarations;e<t.length;e++){var n=t[e];if(230===n.kind){if(64&n.flags)return;n=mh.getInterfaceBaseTypeNodes(n);if(n)for(var o=0,r=n;o<r.length;o++){var i=r[o];if(mh.isEntityNameExpression(i.expression)){i=fo(i.expression,793064,!0);if(!i||!(64&i.flags)||zr(i).thisType)return}}}}return 1}())&&(t.objectFlags|=4,t.typeParameters=mh.concatenate(n,o),t.outerTypeParameters=n,t.localTypeParameters=o,t.instantiations=mh.createMap(),t.instantiations.set(os(t.typeParameters),t),(t.target=t).typeArguments=t.typeParameters,t.thisType=Oo(16384),t.thisType.isThisType=!0,t.thisType.symbol=s,t.thisType.constraint=t),r.declaredType}function Xr(e){var t=e.initializer;if(!t)return!mh.isInAmbientContext(e);switch(t.kind){case 9:case 8:return 1;case 192:return 38===t.operator&&8===t.operand.kind;case 71:return mh.nodeIsMissing(t)||fe(e.parent).exports.get(t.escapedText);default:return}}function $r(e){var t=p(e);if(void 0!==t.enumKind)return t.enumKind;for(var n=!1,o=0,r=e.declarations;o<r.length;o++){var i=r[o];if(232===i.kind)for(var s=0,a=i.members;s<a.length;s++){var l=a[s];if(l.initializer&&9===l.initializer.kind)return t.enumKind=1;Xr(l)||(n=!0)}}return t.enumKind=n?0:1}function Yr(e){return 256&e.flags&&!(65536&e.flags)?be(Do(e.symbol)):e}function qr(e){var t=p(e);if(t.declaredType)return t.declaredType;if(1===$r(e)){d++;for(var n=[],o=0,r=e.declarations;o<r.length;o++){var i=r[o];if(232===i.kind)for(var s=0,a=i.members;s<a.length;s++){var l=a[s],c=da(Og(l),d,fe(l));p(fe(l)).declaredType=c,n.push(c)}}if(n.length)return 65536&(u=Y(n,!1,e,void 0)).flags&&(u.flags|=256,u.symbol=e),t.declaredType=u}var u=Oo(16);return u.symbol=e,t.declaredType=u}function Jr(e){var t=p(e);return t.declaredType||(e=qr(Do(e)),t.declaredType)||(t.declaredType=e),t.declaredType}function Qr(e){var t,n=p(e);return n.declaredType||((t=Oo(16384)).symbol=e,n.declaredType=t),n.declaredType}function be(e){return Zr(e)||he}function Zr(e){{if(96&e.flags)return zr(e);if(524288&e.flags){var t=e,n=p(t);if(!n.declaredType){if(!ar(t,2))return he;var o=mh.find(t.declarations,function(e){return 283===e.kind||231===e.kind}),r=283===o.kind?o.typeExpression:o.type,r=r?q(r):he;cr()?(i=Lr(t))&&(n.typeParameters=i,n.instantiations=mh.createMap(),n.instantiations.set(os(i),r)):(r=he,me(o.name,mh.Diagnostics.Type_alias_0_circularly_references_itself,ye(t))),n.declaredType=r}return n.declaredType}return 262144&e.flags?Qr(e):384&e.flags?qr(e):8&e.flags?Jr(e):2097152&e.flags?((o=p(i=e)).declaredType||(o.declaredType=be(po(i))),o.declaredType):void 0}var i}function ei(e){switch(e.kind){case 119:case 136:case 133:case 122:case 137:case 134:case 105:case 139:case 95:case 130:case 173:return!0;case 164:return ei(e.elementType);case 159:if(e.typeArguments)for(var t=0,n=e.typeArguments;t<n.length;t++)if(!ei(n[t]))return!1;return!0}return!1}function ti(e){var t=mh.getEffectiveTypeAnnotationNode(e);return t?ei(t):!e.initializer}function ni(e,t,n){for(var o=mh.createSymbolTable(),r=0,i=e;r<i.length;r++){var s=i[r];o.set(s.escapedName,n&&function(e){if(e.declarations&&1===e.declarations.length){var t=e.declarations[0];if(t)switch(t.kind){case 149:case 148:return ti(t);case 151:case 150:case 152:var n=t;if(152!==n.kind){var o=mh.getEffectiveReturnTypeNode(n);if(!o||!ei(o))return}for(var r=0,i=n.parameters;r<i.length;r++)if(!ti(i[r]))return;return 1}}}(s)?s:ba(s,t))}return o}function oi(e,t){for(var n=0,o=t;n<o.length;n++){var r=o[n];e.has(r.escapedName)||e.set(r.escapedName,r)}}function ri(e){var t;return e.declaredProperties||(t=e.symbol,e.declaredProperties=Mo(t.members),e.declaredCallSignatures=Ki(t.members.get("__call")),e.declaredConstructSignatures=Ki(t.members.get("__new")),e.declaredStringIndexInfo=es(t,0),e.declaredNumberIndexInfo=es(t,1)),e}function ii(e,t){if(4&w(e)){var n=e.target,o=e.typeArguments;if(mh.length(n.typeParameters)===mh.length(o))return is(n,mh.concatenate(o,[t||n.thisType]))}else if(131072&e.flags)return js(mh.map(e.types,function(e){return ii(e,t)}));return e}function si(e,t,n,o){var r,i,s,a,l,c=mh.rangeEquals(n,o,0,n.length)?(r=W,i=t.symbol?t.symbol.members:mh.createSymbolTable(t.declaredProperties),s=t.declaredCallSignatures,a=t.declaredConstructSignatures,l=t.declaredStringIndexInfo,t.declaredNumberIndexInfo):(r=ma(n,o),i=ni(t.declaredProperties,r,1===n.length),s=_a(t.declaredCallSignatures,r),a=_a(t.declaredConstructSignatures,r),l=Ea(t.declaredStringIndexInfo,r),Ea(t.declaredNumberIndexInfo,r)),n=Kr(t);if(n.length){t.symbol&&i===t.symbol.members&&(i=mh.createSymbolTable(t.declaredProperties));for(var u=mh.lastOrUndefined(o),d=0,p=n;d<p.length;d++){var g=p[d],g=u?ii(V(g,r),u):g;oi(i,ve(g)),s=mh.concatenate(s,$(g,0)),a=mh.concatenate(a,$(g,1)),l=l||(g===K?Zi(K,!1):O(g,0)),c=c||O(g,1)}}Fo(e,i,s,a,l,c)}function ai(e,t,n,o,r,i,s,a,l){var c=new u(k);return c.declaration=e,c.typeParameters=t,c.parameters=o,c.thisParameter=n,c.resolvedReturnType=r,c.typePredicate=i,c.minArgumentCount=s,c.hasRestParameter=a,c.hasLiteralTypes=l,c}function li(e){return ai(e.declaration,e.typeParameters,e.thisParameter,e.parameters,e.resolvedReturnType,e.typePredicate,e.minArgumentCount,e.hasRestParameter,e.hasLiteralTypes)}function ci(e,t,n,o,r){for(var i=0,s=e;i<s.length;i++){var a=s[i];if(el(a,t,n,o,r,Ia))return a}}function ui(e,t){for(var n=mh.map(e,function(e){return $(e,t)}),o=void 0,r=0;r<n.length;r++)for(var i=0,s=n[r];i<s.length;i++){var a,l,c,u=s[i];o&&ci(o,u,!1,!0,!0)||(a=function(e,t,n){if(t.typeParameters){if(0<n)return;for(var o=1;o<e.length;o++)if(!ci(e[o],t,!1,!1,!1))return;return[t]}for(var r=void 0,o=0;o<e.length;o++){var i=o===n?t:ci(e[o],t,!0,!0,!0);if(!i)return;r=mh.appendIfUnique(r,i)}return r}(n,u,r))&&(c=u,1<a.length&&(c=li(u),mh.forEach(a,function(e){return e.thisParameter})&&(l=Y(mh.map(a,function(e){return z(e.thisParameter)||K}),!0),c.thisParameter=yl(u.thisParameter,l)),c.resolvedReturnType=void 0,c.unionSignatures=a),(o=o||[]).push(c))}return o||mh.emptyArray}function di(e,t){for(var n=[],o=!1,r=0,i=e;r<i.length;r++){var s=O(i[r],t);if(!s)return;n.push(s.type),o=o||s.isReadonly}return Zi(Y(n,!0),o)}function pi(e,t){return e?t?js([e,t]):e:t}function gi(e,t){return e?t?Zi(js([e.type,t.type]),e.isReadonly&&t.isReadonly):e:t}function hi(e,t){return e&&t&&Zi(Y([e.type,t.type]),e.isReadonly||t.isReadonly)}function _i(e){return e.typeParameter||(e.typeParameter=Qr(fe(e.declaration.typeParameter)))}function mi(e){return e.constraintType||(e.constraintType=V(Ti(_i(e)),e.mapper||W)||he)}function fi(e){return e.templateType||(e.templateType=e.declaration.type?V(yr(q(e.declaration.type),!!e.declaration.questionToken),e.mapper||W):he)}function yi(e){return 32&w(e)&&qs(mi(e))}function ki(e){if(!e.members)if(32768&e.flags){if(4&e.objectFlags)I=ri((t=e).target),D=mh.concatenate(I.typeParameters,[I.thisType]),si(t,I,D,t.typeArguments&&t.typeArguments.length===D.length?t.typeArguments:mh.concatenate(t.typeArguments,[t]));else if(3&e.objectFlags)si(e,ri(e),mh.emptyArray,mh.emptyArray);else if(16&e.objectFlags)D=(I=e).symbol,I.target?Fo(I,S=ni(bi(I.target),I.mapper,!1),x=_a($(I.target,0),I.mapper),E=_a($(I.target,1),I.mapper),C=Ea(O(I.target,0),I.mapper),B=Ea(O(I.target,1),I.mapper)):2048&D.flags?(x=Ki((S=D.members).get("__call")),E=Ki(S.get("__new")),Fo(I,S,x,E,C=es(D,0),B=es(D,1))):(S=R,C=void 0,D.exports&&(S=xo(D)),32&D.flags&&(704512&(x=Gr(A=zr(D))).flags?oi(S=mh.createSymbolTable(Mo(S)),ve(x)):x===K&&(C=Zi(K,!1))),B=384&D.flags?It:void 0,Fo(I,S,mh.emptyArray,mh.emptyArray,C,B),8208&D.flags&&(I.callSignatures=Ki(D)),32&D.flags&&(A=zr(D),(E=Ki(D.members.get("__constructor"))).length||(E=function(e){var t=$(Gr(e),1);if(0===t.length)return[ai(void 0,e.localTypeParameters,void 0,mh.emptyArray,e,void 0,0,!1,!1)];for(var n=Hr(e),o=mh.isInJavaScriptFile(n),r=hs(n),i=mh.length(r),s=[],a=0,l=t;a<l.length;a++){var c=l[a],u=Vi(c.typeParameters),d=mh.length(c.typeParameters);(o||u<=i)&&i<=d&&((d=d?$i(c,Wi(r,c.typeParameters,u,o)):li(c)).typeParameters=e.localTypeParameters,d.resolvedReturnType=e,s.push(d))}return s}(A)),I.constructSignatures=E));else if(32&e.objectFlags){var s=e,a,l=mh.createSymbolTable(),c=(Fo(s,R,mh.emptyArray,mh.emptyArray,void 0,void 0),_i(s)),t=mi(s),u=fi(s),d=G(((x=s).modifiersType||(170===(i=x.declaration.typeParameter.constraint).kind?x.modifiersType=V(q(i.type),x.mapper||W):(i=(i=mi(ta(x.declaration)))&&16384&i.flags?Ti(i):i,x.modifiersType=i&&262144&i.flags?V(i.type,x.mapper||W):N)),x.modifiersType)),p=!!s.declaration.readonlyToken,g=!!s.declaration.questionToken;if(170===s.declaration.typeParameter.constraint.kind){for(var n=0,o=ve(d);n<o.length;n++){var r=o[n];h(zs(r),r)}(1&d.flags||O(d,0))&&h(_e)}else{var i=540672&t.flags?G(t):t;sc(262144&i.flags?Xs(G(i.type)):i,h)}function h(e,t){"object"==typeof t&&(n=t);var n,o,r,i,t=ma([c],[e]),t=s.mapper?fa(s.mapper,t):t,t=V(u,t);32&e.flags?(o=mh.escapeLeadingUnderscores(e.value),r=X(d,o),(i=Kn(4|(g||r&&16777216&r.flags?16777216:0),o)).checkFlags=p||r&&yd(r)?8:0,i.type=t,n&&(i.syntheticOrigin=n,i.declarations=n.declarations),i.syntheticLiteralTypeOrigin=e,l.set(o,i)):3&e.flags&&(a=Zi(t,p))}Fo(s,l,mh.emptyArray,mh.emptyArray,a,void 0)}}else if(65536&e.flags)C=ui((S=e).types,0),B=ui(S.types,1),A=di(S.types,0),E=di(S.types,1),Fo(S,R,C,B,A,E);else if(131072&e.flags){for(var _=e,m,f,y=mh.emptyArray,k=mh.emptyArray,b=_.types,v=mh.countWhere(b,Fr),T=0;T<b.length;T++)!function(n){var e,t=_.types[n];0!==v&&(v!==b.length||0!==n)&&Fr(t)||((e=$(t,1)).length&&0<v&&(e=mh.map(e,function(e){var t=li(e);return t.resolvedReturnType=function(e,t,n){for(var o=[],r=0;r<t.length;r++)r===n?o.push(e):Fr(t[r])&&o.push(Te($(t[r],1)[0]));return js(o)}(Te(e),b,n),t})),k=mh.concatenate(k,e)),y=mh.concatenate(y,$(t,0)),m=gi(m,O(t,0)),f=gi(f,O(t,1))}(T);Fo(_,R,y,k,m,f)}return e;var E,S,C,x,B,A,t,I,D}function bi(e){return 32768&e.flags?ki(e).properties:mh.emptyArray}function vi(e,t){if(32768&e.flags){e=ki(e).members.get(t);if(e&&wo(e))return e}}function ve(e){return(196608&(e=G(e)).flags?function(e){if(!e.resolvedProperties){for(var t=mh.createSymbolTable(),n=0,o=e.types;n<o.length;n++){for(var r=0,i=ve(o[n]);r<i.length;r++){var s,a=i[r];t.has(a.escapedName)||(s=Ni(e,a.escapedName))&&t.set(a.escapedName,s)}if(65536&e.flags)break}e.resolvedProperties=Mo(t)}return e.resolvedProperties}:bi)(e)}function Ti(e){return Ci(e)?ts(e):void 0}function Ei(e){var t,n=Qs(e);return n||(n=Si(e.objectType),t=Si(e.indexType),n||t?Zs(n||e.objectType,t||e.indexType):void 0)}function Si(e){if(737280&e.flags){var t=xi(e);if(t!==Ve&&t!==We)return t}else if(262144&e.flags)return _e}function Ci(e){return xi(e)!==We}function xi(e){var t,n,o;return e.resolvedBaseConstraint||(n=[],o=function a(e){if(!mh.contains(n,e))return n.push(e),e=function(e){var t;if(16384&e.flags)return n=ts(e),e.isThisType?n:n?a(n):void 0;if(196608&e.flags){for(var n=e.types,o=[],r=0,i=n;r<i.length;r++){var s=a(i[r]);s&&o.push(s)}return 65536&e.flags&&o.length===n.length?Y(o):131072&e.flags&&o.length?js(o):void 0}return 262144&e.flags?_e:524288&e.flags?(n=Qs(e))?a(n):(n=a(e.objectType),t=a(e.indexType),(n=n&&t?Zs(n,t):void 0)&&n!==he?a(n):void 0):yi(e)?N:e}(e),n.pop(),e;t=!0}(e),e.resolvedBaseConstraint=t?We:ii(o||Ve,e)),e.resolvedBaseConstraint}function Bi(e){var t;return e.default?e.default===Ge&&(e.default=We):e.target?(t=Bi(e.target),e.default=t?V(t,e.mapper):Ve):(e.default=Ge,t=(t=e.symbol&&mh.forEach(e.symbol.declarations,function(e){return mh.isTypeParameterDeclaration(e)&&e.default}))?q(t):Ve,e.default===Ge&&(e.default=t)),e.default}function Ai(e){e=Bi(e);return e!==Ve&&e!==We?e:void 0}function G(e){var t,e=540672&e.flags?Si(e)||N:e;return 131072&e.flags?(t=e).resolvedApparentType||(t.resolvedApparentType=ii(t,t)):262178&e.flags?Qe:84&e.flags?Ze:136&e.flags?et:512&e.flags?bs(2<=de):16777216&e.flags?N:e}function Ii(e,t){for(var n,o,r=e.types,i=65536&e.flags,s=i?24:0,a=i?0:16777216,l=4,c=0,u=0,d=r;u<d.length;u++)(y=G(d[u]))!==he&&(o=(f=X(y,t))?mh.getDeclarationModifierFlagsFromSymbol(f):0,!f||o&s?i&&(c|=16):(a&=f.flags,n=mh.appendIfUnique(n,f),c|=(yd(f)?8:0)|(24&o?0:64)|(16&o?128:0)|(8&o?256:0)|(32&o?512:0),vu(f)||(l=2)));if(n){if(1===n.length&&!(16&c))return n[0];for(var p=[],g=[],h=void 0,_=0,m=n;_<m.length;_++){(f=m[_]).declarations&&mh.addRange(g,f.declarations);var f,y=z(f);h?y!==h&&(c|=32):h=y,p.push(y)}r=Kn(4|a,t);return r.checkFlags=l|c,r.containingType=e,r.declarations=g,r.type=(i?Y:js)(p),r}}function Di(e,t){var n=e.propertyCache||(e.propertyCache=mh.createSymbolTable()),o=n.get(t);return o||(o=Ii(e,t))&&n.set(t,o),o}function Ni(e,t){e=Di(e,t);return!e||16&mh.getCheckFlags(e)?void 0:e}function X(e,t){if(32768&(e=G(e)).flags){var n=ki(e),o=n.members.get(t);if(o&&wo(o))return o;if(n===He||n.callSignatures.length||n.constructSignatures.length){o=vi(Ye,t);if(o)return o}return vi($e,t)}if(196608&e.flags)return Ni(e,t)}function wi(e,t){return 229376&e.flags?(e=ki(e),0===t?e.callSignatures:e.constructSignatures):mh.emptyArray}function $(e,t){return wi(G(e),t)}function Oi(e,t){if(229376&e.flags)return e=ki(e),0===t?e.stringIndexInfo:e.numberIndexInfo}function Ri(e,t){e=Oi(e,t);return e&&e.type}function O(e,t){return Oi(G(e),t)}function Pi(e,t){return Ri(G(e),t)}function Li(e,t){if(fl(e)){for(var n=[],o=0,r=ve(e);o<r.length;o++){var i=r[o];0!==t&&!Zc(i.escapedName)||n.push(z(i))}if(n.length)return Y(n,!0)}}function Mi(e){var n=[];return e.forEach(function(e,t){Lo(t)||n.push(e)}),n}function Fi(e){if(mh.isInJavaScriptFile(e)){if(e.type&&272===e.type.kind)return 1;e=mh.getJSDocParameterTags(e);if(e)for(var t=0,n=e;t<n.length;t++){var o=n[t];if(o.isBracketed)return 1;if(o.typeExpression)return 272===o.typeExpression.type.kind}}}function Ui(e,t){if(!mh.isExternalModuleNameRelative(e))return(e=Jn(Nt,'"'+e+'"',512))&&t?Io(e):e}function Hi(e){var t,n;return!(!mh.hasQuestionToken(e)&&!Fi(e))||(e.initializer?(t=Gi(n=e.parent),n=mh.indexOf(n.parameters,e),mh.Debug.assert(0<=n),n>=t.minArgumentCount):!!(n=mh.getImmediatelyInvokedFunctionExpression(e.parent))&&!e.type&&!e.dotDotDotToken&&mh.indexOf(e.parent.parameters,e)>=n.arguments.length)}function Vi(e){var t,n=0;if(e)for(var o=0;o<e.length;o++)(t=e[o]).symbol&&mh.forEach(t.symbol.declarations,function(e){return mh.isTypeParameterDeclaration(e)&&e.default})||(n=o+1);return n}function Wi(e,t,n,o){var r=mh.length(t);if(r){var i=mh.length(e);if((o||n<=i)&&i<=r){e=e||[];for(var s=i;s<r;s++)e[s]=Pl(o);for(s=i;s<r;s++){var a=ma(t,e),l=Ai(t[s]);e[s]=l?V(l,a):Pl(o)}}}return e}function Gi(e){var t,n,o=j(e);if(!o.resolvedSignature){for(var r=[],i=!1,s=0,a=void 0,l=void 0,c=mh.getImmediatelyInvokedFunctionExpression(e),u=mh.isJSDocConstructSignature(e),d=!c&&!u&&mh.isInJavaScriptFile(e)&&!mh.hasJSDocParameterTags(e),p=u?1:0;p<e.parameters.length;p++){var g=e.parameters[p],h=g.symbol;h&&4&h.flags&&!mh.isBindingPattern(g.name)&&(h=Zn(g,h.escapedName,107455,void 0,void 0,!1)),0===p&&"this"===h.escapedName?(l=!0,a=g.symbol):r.push(h),g.type&&173===g.type.kind&&(i=!0),g.initializer||g.questionToken||g.dotDotDotToken||c&&r.length>c.arguments.length&&!g.type||Fi(g)||d||(s=r.length)}153!==e.kind&&154!==e.kind||mh.hasDynamicName(e)||l&&a||(m=153===e.kind?154:153,(m=mh.getDeclarationOfKind(e.symbol,m))&&(a=(m=ah(m))&&m.symbol));var _,m=152===e.kind?zr(Io(e.parent.symbol)):void 0,f=m?m.localTypeParameters:(mh.forEach(mh.getEffectiveTypeParameterDeclarations(e),function(e){e=Qr(e.symbol);n=mh.appendIfUnique(n,e)}),n),u=(k=e,m=m,u?q(k.parameters[0].type):m||((m=mh.getEffectiveReturnTypeNode(k))?q(m):153!==k.kind||mh.hasDynamicName(k)?mh.nodeIsMissing(k.body)?K:void 0:Cr(mh.getDeclarationOfKind(k.symbol,154)))),y=e.type&&158===e.type.kind?71===(y=(k=e.type).parameterName).kind?{kind:1,parameterName:y?y.escapedText:void 0,parameterIndex:y?function(e,t){if(e)for(var n=0;n<e.length;n++){var o=e[n];if(71===o.name.kind&&o.name.escapedText===t.escapedText)return n}return-1}(k.parent.parameters,y):void 0,type:q(k.type)}:{kind:0,type:q(k.type)}:void 0,k=mh.hasRestParameter(e);!k&&mh.isInJavaScriptFile(e)&&(void 0===(t=j(_=e)).containsArgumentsReference&&(8192&t.flags?t.containsArgumentsReference=!0:t.containsArgumentsReference=function e(t){if(!t)return!1;switch(t.kind){case 71:return"arguments"===t.escapedText&&mh.isPartOfExpression(t);case 149:case 151:case 153:case 154:return 144===t.name.kind&&e(t.name);default:return!mh.nodeStartsNewLexicalEnvironment(t)&&!mh.isPartOfTypeNode(t)&&mh.forEachChild(t,e)}}(_.body)),t.containsArgumentsReference)&&(k=!0,(_=Kn(3,"args")).type=ot,_.isRestParameter=!0,r.push(_)),o.resolvedSignature=ai(e,f,a,r,u,y,s,k,i)}return o.resolvedSignature}function Ki(e){if(!e)return mh.emptyArray;for(var t=[],n=0;n<e.declarations.length;n++){var o=e.declarations[n];switch(o.kind){case 160:case 161:case 228:case 151:case 150:case 152:case 155:case 156:case 157:case 153:case 154:case 186:case 187:case 273:if(0<n&&o.body){var r=e.declarations[n-1];if(o.parent===r.parent&&o.kind===r.kind&&o.pos===r.end)break}t.push(Gi(o))}}return t}function ji(e){if(e.thisParameter)return z(e.thisParameter)}function Te(e){if(!e.resolvedReturnType){if(!ar(e,3))return he;var t,n,o=void 0,o=e.target?V(Te(e.target),e.mapper):e.unionSignatures?Y(mh.map(e.unionSignatures,Te),!0):pd(e.declaration);!cr()&&(o=K,Q)&&(t=e.declaration,(n=mh.getNameOfDeclaration(t))?me(n,mh.Diagnostics._0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions,mh.declarationNameToString(n)):me(t,mh.Diagnostics.Function_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions)),e.resolvedReturnType=o}return e.resolvedReturnType}function zi(e){if(e.hasRestParameter){e=z(mh.lastOrUndefined(e.parameters));if(4&w(e)&&e.target===qe)return e.typeArguments[0]}return K}function Xi(e,t,n){t=Wi(t,e.typeParameters,Vi(e.typeParameters),n);var n=e.instantiations||(e.instantiations=mh.createMap()),o=os(t),r=n.get(o);return r||n.set(o,r=$i(e,t)),r}function $i(e,t){return ka(e,ma(e.typeParameters,t),!0)}function Yi(e){return e.typeParameters?e.erasedSignatureCache||(e.erasedSignatureCache=ka(e,ma(e.typeParameters,void 0),!0)):e}function qi(e){var t,n;return e.isolatedSignatureType||(t=152===e.declaration.kind||156===e.declaration.kind,(n=Po(16)).members=R,n.properties=mh.emptyArray,n.callSignatures=t?mh.emptyArray:[e],n.constructSignatures=t?[e]:mh.emptyArray,e.isolatedSignatureType=n),e.isolatedSignatureType}function Ji(e){return e.members.get("__index")}function Qi(e,t){var n=1===t?133:136,t=Ji(e);if(t)for(var o=0,r=t.declarations;o<r.length;o++){var i=r[o];if(1===i.parameters.length){var s=i.parameters[0];if(s&&s.type&&s.type.kind===n)return i}}}function Zi(e,t,n){return{type:e,isReadonly:t,declaration:n}}function es(e,t){e=Qi(e,t);if(e)return Zi(e.type?q(e.type):K,mh.hasModifier(e,64),e)}function ts(e){var t;return e.constraint||(e.target?(t=Ti(e.target),e.constraint=t?V(t,e.mapper):Ve):(t=e.symbol&&mh.getDeclarationOfKind(e.symbol,145).constraint,e.constraint=t?q(t):Ve)),e.constraint===Ve?void 0:e.constraint}function ns(e){return fe(mh.getDeclarationOfKind(e.symbol,145).parent)}function os(e){var t="";if(e)for(var n=e.length,o=0;o<n;){for(var r=e[o].id,i=1;o+i<n&&e[o+i].id===r+i;)i++;t.length&&(t+=","),t+=r,1<i&&(t+=":"+i),o+=i}return t}function rs(e,t){for(var n=0,o=0,r=e;o<r.length;o++){var i=r[o];i.flags&t||(n|=i.flags)}return 14680064&n}function is(e,t){var n=os(t),o=e.instantiations.get(n);return o||(o=Po(4,e.symbol),e.instantiations.set(n,o),o.flags|=t?rs(t,0):0,o.target=e,o.typeArguments=t),o}function ss(e){var t=Oo(e.flags);return t.symbol=e.symbol,t.objectFlags=e.objectFlags,t.target=e.target,t.typeArguments=e.typeArguments,t}function as(e){return mh.length(e.target.typeParameters)}function ls(e,t,n){var o,r,i,t=be(Io(t)),s=t.localTypeParameters;return s?(o=mh.length(e.typeArguments),r=Vi(s),!(i=mh.isInJavaScriptFile(e))&&(o<r||o>s.length)?(me(e,r===s.length?mh.Diagnostics.Generic_type_0_requires_1_type_argument_s:mh.Diagnostics.Generic_type_0_requires_between_1_and_2_type_arguments,ke(t,void 0,1),r,s.length),he):is(t,mh.concatenate(t.outerTypeParameters,Wi(n,s,r,i)))):e.typeArguments?(me(e,mh.Diagnostics.Type_0_is_not_generic,ke(t)),he):t}function cs(e){switch(e.kind){case 159:return e.typeName;case 201:var t=e.expression;if(mh.isEntityNameExpression(t))return t}}function us(e,t){return e&&fo(e,t)||ge}function ds(e,t,n){return 96&t.flags?ls(e,t,n):524288&t.flags?(o=e,n=n,u=be(r=t),(d=p(r).typeParameters)?(s=mh.length(o.typeArguments))<(i=Vi(d))||s>d.length?(me(o,i===d.length?mh.Diagnostics.Generic_type_0_requires_1_type_argument_s:mh.Diagnostics.Generic_type_0_requires_between_1_and_2_type_arguments,ye(r),i,d.length),he):(s=n,d=be(i=r),n=p(i),a=n.typeParameters,l=os(s),(c=n.instantiations.get(l))||n.instantiations.set(l,c=V(d,ma(a,Wi(s,a,Vi(a),mh.isInJavaScriptFile(i.valueDeclaration))))),c):o.typeArguments?(me(o,mh.Diagnostics.Type_0_is_not_generic,ye(r)),he):u):16&t.flags&&ps(e)&&(t.members||mh.getJSDocClassTag(t.valueDeclaration))?od(t):void 0;var o,r,i,s,a,l,c,u,d}function ps(e){return 1048576&e.flags&&159===e.kind}function gs(e){var t,n,o,r=j(e);return r.resolvedType||(n=t=void 0,o=793064,ps(e)&&(n=function(e){if(mh.isIdentifier(e.typeName)){var t,n;if("Object"===e.typeName.escapedText)return mh.isJSDocIndexSignature(e)?(t=q(e.typeArguments[0]),n=Zi(q(e.typeArguments[1]),!1),Uo(void 0,R,mh.emptyArray,mh.emptyArray,t===_e&&n,t===ae&&n)):K;switch(e.typeName.escapedText){case"String":return _e;case"Number":return ae;case"Boolean":return we;case"Void":return Re;case"Undefined":return De;case"Null":return ie;case"Function":case"function":return Ye;case"Array":case"array":return e.typeArguments&&e.typeArguments.length?void 0:ot;case"Promise":case"promise":return e.typeArguments&&e.typeArguments.length?void 0:ud(K)}}}(e),o|=107455),n=n||function(e,t){var n=hs(e);if(t===ge)return he;var o=ds(e,t,n);if(o)return o;o=Zr(t);if(void 0!==o)return n?(me(e,mh.Diagnostics.Type_0_is_not_generic,ye(t)),he):o;if(!(107455&t.flags&&ps(e)))return he;o=z(t);if(o.symbol&&!rd(o)){t=ds(e,o.symbol,n);if(t)return t}return us(cs(e),793064),o}(e,t=us(cs(e),o)),r.resolvedSymbol=t,r.resolvedType=n),r.resolvedType}function hs(e){return mh.map(e.typeArguments,q)}function _s(e){var t=j(e);return t.resolvedType||(t.resolvedType=vl(Se(e.exprName))),t.resolvedType}function ms(e,t){function n(e){for(var t=0,n=e.declarations;t<n.length;t++){var o=n[t];switch(o.kind){case 229:case 230:case 232:return o}}}var o;return e?32768&(o=be(e)).flags?mh.length(o.typeParameters)!==t?(me(n(e),mh.Diagnostics.Global_type_0_must_have_1_type_parameter_s,mh.symbolName(e),t),t?Ue:N):o:(me(n(e),mh.Diagnostics.Global_type_0_must_be_a_class_or_interface_type,mh.symbolName(e)),t?Ue:N):t?Ue:N}function fs(e,t){return ys(e,107455,t?mh.Diagnostics.Cannot_find_global_value_0:void 0)}function ys(e,t,n){return Zn(void 0,e,t,n,e,!1)}function ks(e,t,n){e=ys(e,793064,n?mh.Diagnostics.Cannot_find_global_type_0:void 0);return e||n?ms(e,t):void 0}function bs(e){return(at=at||ks("Symbol",0,e))||N}function vs(e){return(ct=ct||ks("Promise",1,e))||Ue}function Ts(e){return ut=ut||fs("Promise",e)}function Es(e){return(_t=_t||ks("AsyncIterable",1,e))||Ue}function Ss(e){return(mt=mt||ks("AsyncIterator",1,e))||Ue}function Cs(e){return(ft=ft||ks("AsyncIterableIterator",1,e))||Ue}function xs(e){return(pt=pt||ks("Iterable",1,e))||Ue}function Bs(e){return(gt=gt||ks("Iterator",1,e))||Ue}function As(e){return(ht=ht||ks("IterableIterator",1,e))||Ue}function Is(e,t){void 0===t&&(t=0);e=ys(e,793064,void 0);return e&&ms(e,t)}function Ds(e,t){e=ys(e,1920,void 0),e=e&&Jn(e.exports,t,793064);return e&&be(e)}function Ns(e,t){return e!==Ue?is(e,t):N}function ws(e){return Ns((lt=lt||ks("TypedPropertyDescriptor",1,!0))||Ue,[e])}function Os(e){return Ns(Cs(!0),[e])}function Rs(e){return Ns(xs(!0),[e])}function Ps(e){return Ns(As(!0),[e])}function Ls(e){return Ns(qe,[e])}function Ms(e){return is((t=e.length,b[t]||(b[t]=function(e){for(var t=[],n=[],o=0;o<e;o++){var r=Oo(16384),i=(t.push(r),Kn(4,""+o));i.type=r,n.push(i)}var s=Po(12);return s.typeParameters=t,s.outerTypeParameters=void 0,s.localTypeParameters=t,s.instantiations=mh.createMap(),s.instantiations.set(os(s.typeParameters),s),(s.target=s).typeArguments=s.typeParameters,s.thisType=Oo(16384),s.thisType.isThisType=!0,(s.thisType.constraint=s).declaredProperties=n,s.declaredCallSignatures=mh.emptyArray,s.declaredConstructSignatures=mh.emptyArray,s.declaredStringIndexInfo=void 0,s.declaredNumberIndexInfo=void 0,s}(t))),e);var t}function Fs(e,t){for(var n=0,o=e.length-1,r=t.id;n<=o;){var i=n+(o-n>>1),s=e[i].id;if(s===r)return i;r<s?o=i-1:n=i+1}return~n}function Us(e,t){return 0<=Fs(e,t)}function Hs(e,t){for(var n,r,o,i,s=0,a=t;s<a.length;s++)n=e,r=a[s],i=o=void 0,65536&(i=r.flags)?Hs(n,r.types):1&i?n.containsAny=!0:!pe&&6144&i?(2048&i&&(n.containsUndefined=!0),4096&i&&(n.containsNull=!0),2097152&i||(n.containsNonWideningType=!0)):8192&i||131072&i&&function(){for(var e=0,t=0,n=r.types;t<n.length;t++){var o=n[t];if(6368&o.flags&&6368&e)return 1;if(6144&(e|=o.flags)&&16809984&e)return 1}}()||(2&i&&(n.containsString=!0),4&i&&(n.containsNumber=!0),96&i&&(n.containsStringOrNumberLiteral=!0),(o=(o=n.length)&&r.id>n[o-1].id?~o:Fs(n,r))<0&&(32768&i&&16&r.objectFlags&&r.symbol&&8208&r.symbol.flags&&Vs(n,r)||n.splice(~o,0,r)))}function Vs(e,t){for(var n=0,o=e;n<o.length;n++)if(Aa(o[n],t))return 1}function Ws(e){if(0!==e.length&&!function(e){var t=e[0];if(256&t.flags){for(var n=Do(t.symbol),o=1;o<e.length;o++){var r=e[o];if(!(256&r.flags)||n!==Do(r.symbol))return}return 1}}(e))for(var t=e.length;0<t;)!function(e,t){for(var n=0,o=t;n<o.length;n++){var r=o[n];if(e!==r&&Na(e,r))return 1}}(e[--t],e)||mh.orderedRemoveItemAt(e,t)}function Y(e,t,n,o){if(0===e.length)return Pe;if(1===e.length)return e[0];var r=[];{if(Hs(r,e),r.containsAny)return K;if(t)Ws(r);else if(r.containsStringOrNumberLiteral)for(var i=r,s=i.length;0<s;){var a=i[--s];(32&a.flags&&i.containsString||64&a.flags&&i.containsNumber||96&a.flags&&1048576&a.flags&&Us(i,a.regularType))&&mh.orderedRemoveItemAt(i,s)}return 0===r.length?r.containsNull?r.containsNonWideningType?ie:se:r.containsUndefined?r.containsNonWideningType?De:re:Pe:Gs(r,n,o)}}function Gs(e,t,n){var o,r;return 0===e.length?Pe:1===e.length?e[0]:(o=os(e),(r=v.get(o))||(r=Oo(65536|rs(e,6144)),v.set(o,r),r.types=e,r.aliasSymbol=t,r.aliasTypeArguments=n),r)}function Ks(e,t){for(var n,o,r=0,i=t;r<i.length;r++)n=e,131072&(o=i[r]).flags?Ks(n,o.types):1&o.flags?n.containsAny=!0:8192&o.flags?n.containsNever=!0:16&w(o)&&Fa(o)?n.containsEmptyObject=!0:!pe&&6144&o.flags||mh.contains(n,o)||(32768&o.flags&&(n.containsObjectType=!0),65536&o.flags&&void 0===n.unionIndex&&(n.unionIndex=n.length),32768&o.flags&&16&o.objectFlags&&o.symbol&&8208&o.symbol.flags&&Vs(n,o))||n.push(o)}function js(e,t,n){var o,r,i;return 0===e.length?N:(Ks(o=[],e),o.containsNever?Pe:o.containsAny?K:(o.containsEmptyObject&&!o.containsObjectType&&o.push(N),1===o.length?o[0]:void 0!==(r=o.unionIndex)?(e=o[r],Y(mh.map(e.types,function(e){return js(mh.replaceElement(o,r,e))}),!1,t,n)):(e=os(o),(i=F.get(e))||(i=Oo(131072|rs(o,6144)),F.set(e,i),i.types=o,i.aliasSymbol=t,i.aliasTypeArguments=n),i)))}function zs(e){return 24&mh.getDeclarationModifierFlagsFromSymbol(e)||mh.startsWith(e.escapedName,"__@")?Pe:da(mh.symbolName(e))}function Xs(e){return Td(e,540672)?((t=e).resolvedIndexType||(t.resolvedIndexType=Oo(262144),t.resolvedIndexType.type=t),t.resolvedIndexType):32&w(e)?mi(e):1&e.flags||O(e,0)?_e:Y(mh.map(ve(e),zs));var t}function $s(e,t,n,o){var r=n&&180===n.kind?n:void 0,i=96&t.flags?mh.escapeLeadingUnderscores(""+t.value):r&&Ou(r.argumentExpression,t,!1)?mh.getPropertyNameForKnownSymbolName(mh.idText(r.argumentExpression.name)):void 0;if(void 0!==i){var i=X(e,i);if(i){if(r){if(mh.isAssignmentTarget(r)&&(kd(r,i)||bd(r)))return me(r.argumentExpression,mh.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,ye(i)),he;o&&(j(n).resolvedSymbol=i)}return z(i)}}if(!(6144&t.flags)&&Ed(t,262774)){if(D(e))return K;o=Ed(t,84)&&O(e,1)||O(e,0)||void 0;if(o)return r&&o.isReadonly&&(mh.isAssignmentTarget(r)||mh.isDeleteTarget(r))&&me(r,mh.Diagnostics.Index_signature_in_type_0_only_permits_reading,ke(e)),o.type;if(r&&!Sd(e))return Q&&!ue.suppressImplicitAnyIndexErrors&&(Pi(e,1)?me(r.argumentExpression,mh.Diagnostics.Element_implicitly_has_an_any_type_because_index_expression_is_not_of_type_number):me(r,mh.Diagnostics.Element_implicitly_has_an_any_type_because_type_0_has_no_index_signature,ke(e))),K}return n?(i=180===n.kind?n.argumentExpression:n.indexType,96&t.flags?me(i,mh.Diagnostics.Property_0_does_not_exist_on_type_1,""+t.value,ke(e)):6&t.flags?me(i,mh.Diagnostics.Type_0_has_no_matching_index_signature_for_type_1,ke(e),ke(t)):me(i,mh.Diagnostics.Type_0_cannot_be_used_as_an_index_type,ke(t)),he):K}function Ys(e){return!!(540672&e.flags)||(32&w(e)?qs(mi(e)):!!(196608&e.flags)&&mh.forEach(e.types,Ys))}function qs(e){return!!(802816&e.flags)||!!(196608&e.flags)&&mh.forEach(e.types,qs)}function Js(e){return!(!(32768&e.flags)||yi(e))&&0===(e=ki(e)).properties.length&&0===e.callSignatures.length&&0===e.constructSignatures.length&&e.stringIndexInfo&&!e.numberIndexInfo}function Qs(e){var t,n=e.objectType;if(131072&n.flags&&Ys(n)&&mh.some(n.types,Js)){for(var o=[],r=[],i=0,s=n.types;i<s.length;i++){var a=s[i];Js(a)?r.push(Pi(a,0)):o.push(a)}return Y([Zs(js(o),e.indexType),js(r)])}if(yi(n))return e=ma([_i(n)],[e.indexType]),t=(t=n.mapper)?fa(t,e):e,V(fi(n),t)}function Zs(e,t,n){var o,r,i,s;if(qs(t)||(!n||180!==n.kind)&&Ys(e))return 1&e.flags?e:(r=e.id+","+t.id,(o=H.get(r))||H.set(r,(r=e,i=t,(s=Oo(524288)).objectType=r,s.indexType=i,o=s)),o);var a=G(e);if(!(65536&t.flags)||8&t.flags)return $s(a,t,n,!0);for(var l=[],c=0,u=t.types;c<u.length;c++){var d=$s(a,u[c],n,!1);if(d===he)return he;l.push(d)}return Y(l)}function ea(e){var t=j(e);return t.resolvedType||(t.resolvedType=Zs(q(e.objectType),q(e.indexType),e)),t.resolvedType}function ta(e){var t,n=j(e);return n.resolvedType||((t=Po(32,e.symbol)).declaration=e,t.aliasSymbol=oa(e),t.aliasTypeArguments=ra(e),mi(n.resolvedType=t)),n.resolvedType}function na(e){var t,n,o=j(e);return o.resolvedType||(t=oa(e),0!==e.symbol.members.size||t?((n=Po(16,e.symbol)).aliasSymbol=t,n.aliasTypeArguments=ra(e),mh.isJSDocTypeLiteral(e)&&e.isArrayType&&(n=Ls(n)),o.resolvedType=n):o.resolvedType=Fe),o.resolvedType}function oa(e){return 231===e.parent.kind?fe(e.parent):void 0}function ra(e){e=oa(e);return e?Lr(e):void 0}function ia(t,n,o,r){if(1&t.flags||1&n.flags)return K;if(8192&t.flags)return n;if(8192&n.flags)return t;if(65536&t.flags)return lc(t,function(e){return ia(e,n,o,r)});if(65536&n.flags)return lc(n,function(e){return ia(t,e,o,r)});if(16777216&n.flags)return Me;if(262654&n.flags)return t;for(var e=mh.createSymbolTable(),i=mh.createUnderscoreEscapedMap(),s=t===N?(f=O(n,0),O(n,1)):(f=hi(O(t,0),O(n,0)),hi(O(t,1),O(n,1))),a=0,l=ve(n);a<l.length;a++){var c=65536&(p=l[a]).flags&&!(32768&p.flags);24&mh.getDeclarationModifierFlagsFromSymbol(p)?i.set(p.escapedName,!0):aa(p)||c||e.set(p.escapedName,sa(p))}for(var u=0,d=ve(t);u<d.length;u++){var p,g,h,_,m=d[u];65536&m.flags&&!(32768&m.flags)||i.has(m.escapedName)||aa(m)||(e.has(m.escapedName)?(g=z(p=e.get(m.escapedName)),16777216&p.flags&&(h=mh.concatenate(m.declarations,p.declarations),(_=Kn(4|16777216&m.flags,m.escapedName)).type=Y([z(m),Xl(g,131072)]),_.leftSpread=m,_.rightSpread=p,_.declarations=h,e.set(m.escapedName,_))):e.set(m.escapedName,sa(m)))}var f=Uo(void 0,e,mh.emptyArray,mh.emptyArray,f,s);return f.flags|=r,f.flags|=5242880,f.objectFlags|=128,f.symbol=o,f}function sa(e){var t;return yd(e)?((t=Kn(4|16777216&e.flags,e.escapedName)).type=z(e),t.declarations=e.declarations,t.syntheticOrigin=e,t):e}function aa(e){return 8192&e.flags&&mh.find(e.declarations,function(e){return mh.isClassLike(e.parent)})}function la(e,t,n){e=Oo(e);return e.symbol=n,e.value=t,e}function ca(e){var t;return 96&e.flags&&!(1048576&e.flags)?(e.freshType||(((t=la(1048576|e.flags,e.value,e.symbol)).regularType=e).freshType=t),e.freshType):e}function ua(e){return 96&e.flags&&1048576&e.flags?e.regularType:e}function da(e,t,n){var o="number"==typeof e?"#":"@",o=t?t+o+e:o+e,r=U.get(o);return r||U.set(o,r=la(("number"==typeof e?64:32)|(t?256:0),e,n)),r}function pa(e){var t,n,o=j(e);return o.resolvedType||(o.resolvedType=(e=e,t=mh.getThisContainer(e,!1),!(n=t&&t.parent)||!mh.isClassLike(n)&&230!==n.kind||mh.hasModifier(t,32)||152===t.kind&&!mh.isNodeDescendantOf(e,t.body)?(me(e,mh.Diagnostics.A_this_type_is_available_only_in_a_non_static_member_of_a_class_or_interface),he):zr(fe(n)).thisType)),o.resolvedType}function q(e){switch(e.kind){case 119:case 268:case 269:return K;case 136:return _e;case 133:return ae;case 122:return we;case 137:return Oe;case 105:return Re;case 139:return De;case 95:return ie;case 130:return Pe;case 134:return 65536&e.flags?K:Me;case 169:case 99:return pa(e);case 173:return(c=j(l=e)).resolvedType||(c.resolvedType=ua(Se(l.literal))),c.resolvedType;case 159:return gs(e);case 158:return we;case 201:return gs(e);case 162:return _s(e);case 164:return(c=j(l=e)).resolvedType||(c.resolvedType=Ls(q(l.elementType))),c.resolvedType;case 165:return(a=j(s=e)).resolvedType||(a.resolvedType=Ms(mh.map(s.elementTypes,q))),a.resolvedType;case 166:return(a=j(s=e)).resolvedType||(a.resolvedType=Y(mh.map(s.types,q),!1,oa(s),ra(s))),a.resolvedType;case 167:return(i=j(r=e)).resolvedType||(i.resolvedType=js(mh.map(r.types,q),oa(r),ra(r))),i.resolvedType;case 270:return r=q(e.type),pe?Y([r,ie]):r;case 168:case 271:case 272:case 267:return q(e.type);case 160:case 161:case 163:case 285:case 273:return na(e);case 170:return(o=j(i=e)).resolvedType||(o.resolvedType=Xs(q(i.type))),o.resolvedType;case 171:return ea(e);case 172:return ta(e);case 71:case 143:o=_g(e);return o&&be(o);case 274:return(n=j(t=e)).resolvedType||(t=q(t.type),n.resolvedType=t?Ls(t):he),n.resolvedType;default:return he}var t,n,o,r,i,s,a,l,c}function ga(e,t,n){if(e&&e.length){for(var o=[],r=0,i=e;r<i.length;r++){var s=i[r];o.push(n(s,t))}return o}return e}function ha(e,t){return ga(e,t,V)}function _a(e,t){return ga(e,t,ka)}function ma(e,t){return mh.Debug.assert(void 0===t||e.length===t.length),1===e.length?(l=e[0],c=t?t[0]:K,function(e){return e===l?c:e}):2===e.length?(r=e[0],i=t?t[0]:K,s=e[1],a=t?t[1]:K,function(e){return e===r?i:e===s?a:e}):(n=e,o=t,function(e){for(var t=0;t<n.length;t++)if(e===n[t])return o?o[t]:K;return e});var n,o,r,i,s,a,l,c}function fa(t,n){return function(e){return V(t(e),n)}}function ya(e){var t=Oo(16384);return t.symbol=e.symbol,t.target=e,t}function ka(e,t,n){var o,r;if(e.typeParameters&&!n){o=mh.map(e.typeParameters,ya),t=fa(ma(e.typeParameters,o),t);for(var i=0,s=o;i<s.length;i++)s[i].mapper=t}e.typePredicate&&(n=e.typePredicate,r=t,r=mh.isIdentifierTypePredicate(n)?{kind:1,parameterName:n.parameterName,parameterIndex:n.parameterIndex,type:V(n.type,r)}:{kind:0,type:V(n.type,r)});n=ai(e.declaration,o,e.thisParameter&&ba(e.thisParameter,t),ga(e.parameters,t,ba),void 0,r,e.minArgumentCount,e.hasRestParameter,e.hasLiteralTypes);return n.target=e,n.mapper=t,n}function ba(e,t){1&mh.getCheckFlags(e)&&(e=(n=p(e)).target,t=fa(n.mapper,t));var n=Kn(e.flags,e.escapedName);return n.checkFlags=1,n.declarations=e.declarations,n.parent=e.parent,n.target=e,n.mapper=t,e.valueDeclaration&&(n.valueDeclaration=e.valueDeclaration),e.isRestParameter&&(n.isRestParameter=e.isRestParameter),n}function va(e,t){var o,n,r=64&e.objectFlags?e.target:e,i=r.symbol,s=p(i),a=s.typeParameters;return a||(n=Rr(o=i.declarations[0],!0)||mh.emptyArray,a=2048&i.flags&&!r.aliasTypeArguments?mh.filter(n,function(e){var n=e,e=o;if(n.symbol&&n.symbol.declarations&&1===n.symbol.declarations.length){var t=n.symbol.declarations[0].parent;if(mh.findAncestor(e,function(e){return 207===e.kind?"quit":e===t}))return mh.forEachChild(e,function e(t){switch(t.kind){case 169:return n.isThisType;case 71:return!n.isThisType&&mh.isPartOfTypeNode(t)&&q(t)===n;case 162:return!0}return mh.forEachChild(t,e)})}return!0}):n,(s.typeParameters=a).length&&(s.instantiations=mh.createMap(),s.instantiations.set(os(a),r))),a.length?(i=64&e.objectFlags?fa(e.mapper,t):t,t=os(n=mh.map(a,i)),(i=s.instantiations.get(t))||(a=ma(a,n),i=(32&r.objectFlags?function(r,i){var e=mi(r);if(262144&e.flags){var s=e.type;if(16384&s.flags){e=V(s,i);if(s!==e)return lc(e,function(e){return 704513&e.flags?Ta(r,(t=s,n=e,o=i,function(e){return e===t?n:o(e)})):e;var t,n,o})}}return Ta(r,i)}:Ta)(r,a),s.instantiations.set(t,i)),i):e}function Ta(e,t){var n=Po(64|e.objectFlags,e.symbol);return 32&e.objectFlags&&(n.declaration=e.declaration),n.target=e,n.mapper=t,n.aliasSymbol=e.aliasSymbol,n.aliasTypeArguments=ha(e.aliasTypeArguments,t),n}function V(e,t){if(e&&t!==W){if(16384&e.flags)return t(e);if(32768&e.flags){if(16&e.objectFlags)return e.symbol&&14384&e.symbol.flags&&e.symbol.declarations?va(e,t):e;if(32&e.objectFlags)return va(e,t);if(4&e.objectFlags)return is(e.target,ha(e.typeArguments,t))}if(65536&e.flags&&!(8190&e.flags))return Y(ha(e.types,t),!1,e.aliasSymbol,ha(e.aliasTypeArguments,t));if(131072&e.flags)return js(ha(e.types,t),e.aliasSymbol,ha(e.aliasTypeArguments,t));if(262144&e.flags)return Xs(V(e.type,t));if(524288&e.flags)return Zs(V(e.objectType,t),V(e.indexType,t))}return e}function Ea(e,t){return e&&Zi(V(e.type,t),e.isReadonly,e.declaration)}function Sa(e){switch(mh.Debug.assert(151!==e.kind||mh.isObjectLiteralMethod(e)),e.kind){case 186:case 187:case 151:return Ca(e);case 178:return mh.forEach(e.properties,Sa);case 177:return mh.forEach(e.elements,Sa);case 195:return Sa(e.whenTrue)||Sa(e.whenFalse);case 194:return 54===e.operatorToken.kind&&(Sa(e.left)||Sa(e.right));case 261:return Sa(e.initializer);case 185:return Sa(e.expression);case 254:return mh.forEach(e.properties,Sa);case 253:return e.initializer&&Sa(e.initializer);case 256:return e.expression&&Sa(e.expression)}return!1}function Ca(e){if(e.typeParameters)return!1;if(mh.forEach(e.parameters,function(e){return!mh.getEffectiveTypeAnnotationNode(e)}))return!0;if(187!==e.kind){var t=mh.firstOrUndefined(e.parameters);if(!t||!mh.parameterIsThisKeyword(t))return!0}return 207!==e.body.kind&&Sa(e.body)}function xa(e){return($c(e)||mh.isObjectLiteralMethod(e))&&Ca(e)}function Ba(e){if(32768&e.flags){var t,n=ki(e);if(n.constructSignatures.length)return(t=Po(16,e.symbol)).members=n.members,t.properties=n.properties,t.callSignatures=mh.emptyArray,t.constructSignatures=mh.emptyArray,t}else if(131072&e.flags)return js(mh.map(e.types,Ba));return e}function Aa(e,t){return Va(e,t,Cn)}function Ia(e,t){return Va(e,t,Cn)?-1:0}function Da(e,t){return Va(e,t,En)?-1:0}function Na(e,t){return Va(e,t,Tn)}function Ee(e,t){return Va(e,t,En)}function wa(e,t){return Nr(e)===Nr(t)||Na(e,t)&&!Aa(e,t)}function Oa(e,t){return Va(e,t,Sn)}function Ra(e,t,n,o,r){return Wa(e,t,En,n,o,r)}function Pa(e,t,n,o,r){Wa(e,t,Sn,n,o,r)}function La(e,t,n,o,r,i,s){if(e===t)return-1;if(!t.hasRestParameter&&e.minArgumentCount>t.parameters.length)return 0;e.typeParameters&&e.typeParameters!==t.typeParameters&&(e=Hu(e,t=(u=t).typeParameters?u.canonicalSignatureCache||(u.canonicalSignatureCache=Xi(a=u,mh.map(a.typeParameters,function(e){return e.target&&!Ti(e.target)?e.target:e}),mh.isInJavaScriptFile(a.declaration))):u,void 0,s));var a=t.declaration?t.declaration.kind:0,l=!n&&P&&151!==a&&150!==a&&152!==a,c=-1,u=ji(e);if(u&&u!==Re){var d=ji(t);if(d){if(!(k=!l&&s(u,d,!1)||s(d,u,r)))return r&&i(mh.Diagnostics.The_this_types_of_each_signature_are_incompatible),0;c&=k}}for(var p,g=Ma(e),h=Ma(t),_=(d=g,S=t,p=h,(C=e).hasRestParameter===S.hasRestParameter?C.hasRestParameter?Math.max(d,p)+1:Math.min(d,p):C.hasRestParameter?p:d),m=e.parameters,f=t.parameters,y=0;y<_;y++){var k,b=y<g?sd(m[y]):zi(e),v=y<h?sd(f[y]):zi(t),T=n?void 0:Uu(ml(b)),E=n?void 0:Uu(ml(v));if(!(k=T&&E&&!T.typePredicate&&!E.typePredicate&&(6144&pl(b))==(6144&pl(v))?La(E,T,l?2:1,!1,r,i,s):!n&&!l&&s(b,v,!1)||s(v,b,r)))return r&&i(mh.Diagnostics.Types_of_parameters_0_and_1_are_incompatible,mh.symbolName(m[y<g?y:g]),mh.symbolName(f[y<h?y:h])),0;c&=k}if(!o){var S=Te(t);if(S===Re)return c;var C=Te(e);if(t.typePredicate){if(e.typePredicate)c&=function(e,t,n,o,r,i,s){if(e.kind!==t.kind)return r&&(i(mh.Diagnostics.A_this_based_type_guard_is_not_compatible_with_a_parameter_based_type_guard),i(mh.Diagnostics.Type_predicate_0_is_not_assignable_to_1,Jo(e),Jo(t))),0;if(1===e.kind){var a=e,l=t;if(a.parameterIndex-(mh.getThisParameter(n)?1:0)!=l.parameterIndex-(mh.getThisParameter(o)?1:0))return r&&(i(mh.Diagnostics.Parameter_0_is_not_in_the_same_position_as_parameter_1,a.parameterName,l.parameterName),i(mh.Diagnostics.Type_predicate_0_is_not_assignable_to_1,Jo(e),Jo(t))),0}n=s(e.type,t.type,r);return 0===n&&r&&i(mh.Diagnostics.Type_predicate_0_is_not_assignable_to_1,Jo(e),Jo(t)),n}(e.typePredicate,t.typePredicate,e.declaration,t.declaration,r,i,s);else if(mh.isIdentifierTypePredicate(t.typePredicate))return r&&i(mh.Diagnostics.Signature_0_must_be_a_type_predicate,qo(e)),0}else c&=1===n&&s(S,C,!1)||s(C,S,r)}return c}function Ma(e){var t=e.parameters.length;return e.hasRestParameter?t-1:t}function Fa(e){return 32768&e.flags?0===(t=ki(e)).properties.length&&0===t.callSignatures.length&&0===t.constructSignatures.length&&!t.stringIndexInfo&&!t.numberIndexInfo:!!(16777216&e.flags)||(65536&e.flags?mh.forEach(e.types,Fa):!!(131072&e.flags)&&!mh.forEach(e.types,function(e){return!Fa(e)}));var t}function Ua(e,t,n){if(e!==t){var o=vh(e)+","+vh(t),r=xn.get(o);if(void 0!==r)return r;if(!(e.escapedName===t.escapedName&&256&e.flags&&256&t.flags))return xn.set(o,!1),0;for(var i=z(t),s=0,a=ve(z(e));s<a.length;s++){var l=a[s];if(8&l.flags){var c=X(i,l.escapedName);if(!(c&&8&c.flags))return n&&n(mh.Diagnostics.Property_0_is_missing_in_type_1,mh.symbolName(l),ke(be(t),void 0,256)),xn.set(o,!1),0}}xn.set(o,!0)}return 1}function Ha(e,t,n,o){var r=e.flags,i=t.flags;if(!(8192&i)){if(1&i||8192&r)return 1;if(262178&r&&2&i)return 1;if(32&r&&256&r&&32&i&&!(256&i)&&e.value===t.value)return 1;if(84&r&&4&i)return 1;if(64&r&&256&r&&64&i&&!(256&i)&&e.value===t.value)return 1;if(136&r&&8&i)return 1;if(16&r&&16&i&&Ua(e.symbol,t.symbol,o))return 1;if(256&r&&256&i){if(65536&r&&65536&i&&Ua(e.symbol,t.symbol,o))return 1;if(224&r&&224&i&&e.value===t.value&&Ua(Do(e.symbol),Do(t.symbol),o))return 1}if(2048&r&&(!pe||3072&i))return 1;if(4096&r&&(!pe||4096&i))return 1;if(32768&r&&16777216&i)return 1;if(n===En||n===Sn){if(1&r)return 1;if(68&r&&!(256&r)&&(16&i||64&i&&256&i))return 1}}}function Va(e,t,n){if((e=96&e.flags&&1048576&e.flags?e.regularType:e)===(t=96&t.flags&&1048576&t.flags?t.regularType:t)||n!==Cn&&Ha(e,t,n))return!0;if(32768&e.flags&&32768&t.flags){var o=n.get($a(e,t,n));if(void 0!==o)return 1===o}return!!(1032192&e.flags||1032192&t.flags)&&Wa(e,t,n,void 0)}function Wa(e,t,S,d,n,o){var C,a,l,c,u=0,p=0,g=(0,0),h=!1,_=!1,n=(mh.Debug.assert(S!==Cn||!d,"no error reporting in identity checking"),B(e,t,!!d,n));return h?me(d,mh.Diagnostics.Excessive_stack_depth_comparing_types_0_and_1,ke(e),ke(t)):C&&(o&&(C=mh.concatenateDiagnosticMessageChains(o,C)),en.add(mh.createDiagnosticForNodeFromMessageChain(d,C))),0!==n;function x(e,t,n,o){mh.Debug.assert(!!d),C=mh.chainDiagnosticMessages(C,e,t,n,o)}function m(e,t,n){var o=ke(t),r=ke(n);o===r&&(o=ke(t,void 0,256),r=ke(n,void 0,256)),x(e=e||(S===Sn?mh.Diagnostics.Type_0_is_not_comparable_to_type_1:o===r?mh.Diagnostics.Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated:mh.Diagnostics.Type_0_is_not_assignable_to_type_1),o,r)}function B(e,s,t,n){if(96&e.flags&&1048576&e.flags&&(e=e.regularType),96&s.flags&&1048576&s.flags&&(s=s.regularType),e===s)return-1;if(S===Cn)return o=s,32768&(r=e).flags&&32768&o.flags?v(r,o,!1):(65536&r.flags&&65536&o.flags||131072&r.flags&&131072&o.flags)&&(i=f(r,o))&&(i&=f(o,r))?i:0;var o,r,i,a,l,c,u;if(Ha(e,s,S,t?x:void 0))return-1;if(128&w(e)&&1048576&e.flags){if(function e(r,i,s){if(Td(i,32768)&&!(512&w(i))){var a=!!(33554432&r.flags);if((S===En||S===Sn)&&(ic($e,i)||!a&&Fa(i)))return!1;if(65536&i.flags){var t=k(r,i);if(t)return e(r,t,s)}for(var n=function(e){var t,n,o;if(!ku(i,e.escapedName,a))return s&&(mh.Debug.assert(!!d),mh.isJsxAttributes(d)||mh.isJsxOpeningLikeElement(d)?x(mh.Diagnostics.Property_0_does_not_exist_on_type_1,ye(e),ke(i)):(t=r.symbol&&mh.firstOrUndefined(r.symbol.declarations),(n=void 0)!==(n=e.valueDeclaration&&mh.findAncestor(e.valueDeclaration,function(e){return e===t})&&(o=e.valueDeclaration,mh.Debug.assertNode(o,mh.isObjectLiteralElementLike),d=o,mh.isIdentifier(o.name))?Au(o.name,i):n)?x(mh.Diagnostics.Object_literal_may_only_specify_known_properties_but_0_does_not_exist_in_type_1_Did_you_mean_to_write_2,ye(e),ke(i),n):x(mh.Diagnostics.Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1,ye(e),ke(i)))),{value:!0}},o=0,l=bi(r);o<l.length;o++){var c=n(l[o]);if("object"==typeof c)return c.value}}return!1}(e,s,t))return t&&m(n,e,s),0;!function(e){if(196608&e.flags)for(var t=!1,n=0,o=e.types;n<o.length;n++)if(!(6144&o[n].flags)){if(t)return 1;t=!0}}(s)||(e=kl(e))}return S===Sn||196608&e.flags||65536&s.flags||_||e===$e||!(0<ve(e).length||0<$(e,0).length||0<$(e,1).length)||!T(s)||function(e,t){for(var n=!!(33554432&e.flags),o=0,r=ve(e);o<r.length;o++)if(ku(t,r[o].escapedName,n))return 1}(e,s)?(o=0,r=C,i=_,_=!1,65536&e.flags?o=(S===Sn?b:function(e,t,n){for(var o=-1,r=0,i=e.types;r<i.length;r++){var s=B(i[r],t,n);if(!s)return 0;o&=s}return o})(e,s,t&&!(8190&e.flags)):(65536&s.flags?o=y(e,s,t&&!(8190&e.flags)&&!(8190&s.flags)):131072&s.flags?(_=!0,o=function(e,t){for(var n=-1,o=0,r=s.types;o<r.length;o++){var i=B(e,r[o],t);if(!i)return 0;n&=i}return n}(e,t)):131072&e.flags&&(o=b(e,s,!1)),!o&&(1032192&e.flags||1032192&s.flags)&&(o=v(e,s,t))&&(C=r)),_=i,!o&&t&&(32768&e.flags&&8190&s.flags?(l=s,c=ke(a=e),u=ke(l),(Qe===a&&_e===l||Ze===a&&ae===l||et===a&&we===l||bs(!1)===a&&Oe===l)&&x(mh.Diagnostics._0_is_a_primitive_but_1_is_a_wrapper_object_Prefer_using_0_when_possible,u,c)):e.symbol&&32768&e.flags&&$e===e&&x(mh.Diagnostics.The_Object_type_is_assignable_to_very_few_other_types_Did_you_mean_to_use_the_any_type_instead),m(n,e,s)),o):(t&&(a=$(e,0),l=$(e,1),0<a.length&&B(Te(a[0]),s,!1)||0<l.length&&B(Te(l[0]),s,!1)?x(mh.Diagnostics.Value_of_type_0_has_no_properties_in_common_with_type_1_Did_you_mean_to_call_it,ke(e),ke(s)):x(mh.Diagnostics.Type_0_has_no_properties_in_common_with_type_1,ke(e),ke(s))),0)}function f(e,t){for(var n=-1,o=0,r=e.types;o<r.length;o++){var i=y(r[o],t,!1);if(!i)return 0;n&=i}return n}function y(e,t,n){var o=t.types;if(65536&t.flags&&Us(o,e))return-1;for(var r=0,i=o;r<i.length;r++){var s=B(e,i[r],!1);if(s)return s}return n&&B(e,k(e,t)||o[o.length-1],!0),0}function k(e,t){var n,i=bi(e);if(i){var o=function(e){for(var t,n=0,o=i;n<o.length;n++){var r=o[n];if(Gl(e,r.escapedName)){if(t)return;t=r}}return t}(t);if(o)for(var r=z(o),s=0,a=t.types;s<a.length;s++){var l=a[s],c=dr(l,o.escapedName);if(c&&B(r,c)){if(n)return;n=l}}}return n}function b(e,t,n){var o=e.types;if(65536&e.flags&&Us(o,t))return-1;for(var r=o.length,i=0;i<r;i++){var s=B(o[i],t,n&&i===r-1);if(s)return s}return 0}function v(e,t,n){if(h)return 0;var o=$a(e,t,S),r=S.get(o);if(void 0!==r){if(!n||2!==r)return 1===r?-1:0;S.set(o,3)}if(a){for(var i=0;i<u;i++)if(o===a[i])return 1;if(100===p)return h=!0,0}else a=[],l=[],c=[];var r=u,s=(a[u]=o,u++,l[p]=e,c[p]=t,p++,g),e=(1&g||!Qa(e,l,p)||(g|=1),2&g||!Qa(t,c,p)||(g|=2),3!==g?function(d,p,e){var t,n,o,r,i,s,a,l,c,u=C;if(16384&p.flags){if(32&w(d)&&mi(d)===Xs(p)&&!d.declaration.questionToken&&(t=B(fi(d),Zs(p,_i(d)),e)))return t}else if(262144&p.flags){if(262144&d.flags&&(t=B(p.type,d.type,!1)))return t;if((n=(16384&(n=p.type).flags?Ti:524288&n.flags?Ei:Si)(n))&&(t=B(d,Xs(n),e)))return t}else if(524288&p.flags&&(n=Ei(p))&&(t=B(d,n,e)))return C=u,t;if(16384&d.flags){if(32&w(p)&&mi(p)===Xs(d)){if(t=B(Zs(d,_i(p)),fi(p),e))return C=u,t}else if(((n=Ti(d))||!(16777216&p.flags))&&(t=B(n=!n||1&n.flags?N:n,p,e&&n!==N)))return C=u,t}else if(524288&d.flags){if(n=Ei(d)){if(t=B(n,p,e))return C=u,t}else if(524288&p.flags&&d.indexType===p.indexType&&(t=B(d.objectType,p.objectType,e)))return t}else{if(4&w(d)&&4&w(p)&&d.target===p.target&&!(67108864&d.flags||67108864&p.flags)){var g=Ka(d.target);if(t=function(e,t){var n=d.typeArguments||mh.emptyArray,o=p.typeArguments||mh.emptyArray;if(n.length!==o.length&&S===Cn)return 0;for(var r=(n.length<=o.length?n:o).length,i=-1,s=0;s<r;s++){var a=s<e.length?e[s]:1;if(4!==a){var l=n[s],c=o[s],u=-1;if(1===a?u=B(l,c,t):2===a?u=B(c,l,t):3===a?u=(u=B(c,l,!1))||B(l,c,t):(u=B(l,c,t))&&(u&=B(c,l,t)),!u)return 0;i&=u}}return i}(g,e))return t;if(g!==mh.emptyArray&&!function(e,t){for(var n=0;n<t.length;n++)if(1===t[n]&&1024&e.typeArguments[n].flags)return 1}(p,g)){if(!e||!mh.some(g,function(e){return 0===e}))return 0;C=u}}g=!!(8190&d.flags);if(163840&(d=S!==Cn?G(d):d).flags&&32768&p.flags){e=e&&C===u&&!g;if(32&w(p)&&p.declaration.questionToken&&!yi(d)&&Fa(d)?t=-1:yi(p)?t=yi(d)&&(r=p,i=e,s=!!(o=d).declaration.readonlyToken,a=!!o.declaration.questionToken,l=!!r.declaration.readonlyToken,c=!!r.declaration.questionToken,S===Cn?s==l&&a==c:S===Sn||!a||c)&&(s=B(mi(r),mi(o),i))?(l=ma([_i(o)],[_i(r)]),s&B(V(fi(o),l),fi(r),i)):0:(t=function(e,t,n){if(S===Cn){var o=t;if(!(32768&e.flags&&32768&o.flags))return 0;var r=bi(e),i=bi(o);if(r.length!==i.length)return 0;for(var s=-1,a=0,l=r;a<l.length;a++){var c=l[a],u=vi(o,c.escapedName);if(!u)return 0;c=Za(c,u,B);if(!c)return 0;s&=c}return s}i=S===Tn&&!(128&w(e)),r=Dl(e,t,i);if(r)return n&&x(mh.Diagnostics.Property_0_is_missing_in_type_1,ye(r),ke(e)),0;for(var d=-1,p=0,g=bi(t);p<g.length;p++){var h=g[p];if(!(4194304&h.flags)){var _=X(e,h.escapedName);if(_&&_!==h){var m=mh.getDeclarationModifierFlagsFromSymbol(_),f=mh.getDeclarationModifierFlagsFromSymbol(h);if(8&m||8&f){if(256&mh.getCheckFlags(_))return n&&x(mh.Diagnostics.Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1,ye(_),ke(e)),0;if(_.valueDeclaration!==h.valueDeclaration)return n&&(8&m&&8&f?x(mh.Diagnostics.Types_have_separate_declarations_of_a_private_property_0,ye(h)):x(mh.Diagnostics.Property_0_is_private_in_type_1_but_not_in_type_2,ye(h),ke(8&m?e:t),ke(8&m?t:e))),0}else if(16&f){if(!function(o,e){return!Ya(e,function(e){return!!(16&mh.getDeclarationModifierFlagsFromSymbol(e))&&(t=o,n=qa(e),!Ya(t,function(e){e=qa(e);return!!e&&wr(e,n)}));var t,n})}(_,h))return n&&x(mh.Diagnostics.Property_0_is_protected_but_type_1_is_not_a_class_derived_from_2,ye(h),ke(qa(_)||e),ke(qa(h)||t)),0}else if(16&m)return n&&x(mh.Diagnostics.Property_0_is_protected_in_type_1_but_public_in_type_2,ye(h),ke(e),ke(t)),0;f=B(z(_),z(h),n);if(!f)return n&&x(mh.Diagnostics.Types_of_property_0_are_incompatible,ye(h)),0;if(d&=f,S!==Sn&&16777216&_.flags&&!(16777216&h.flags))return n&&x(mh.Diagnostics.Property_0_is_optional_in_type_1_but_required_in_type_2,ye(h),ke(e),ke(t)),0}}}return d}(d,p,e))&&(t&=E(d,p,0,e))&&(t&=E(d,p,1,e))&&(t&=D(d,p,0,g,e))&&(t&=D(d,p,1,g,e)),t)return C=u,t}}return 0}(e,t,n):1);if(g=s,p--,e){if(-1===e||0===p){for(i=r;i<u;i++)S.set(a[i],1);u=r}}else S.set(o,n?3:2),u=r;return e}function T(e){var t;return 32768&e.flags?0===(t=ki(e)).callSignatures.length&&0===t.constructSignatures.length&&!t.stringIndexInfo&&!t.numberIndexInfo&&0<t.properties.length&&mh.every(t.properties,function(e){return!!(16777216&e.flags)}):!!(131072&e.flags)&&mh.every(e.types,T)}function E(e,t,n,o){if(S===Cn){var r=t,i=n,s=$(e,i),a=$(r,i);if(s.length!==a.length)return 0;for(var l=-1,c=0;c<s.length;c++){var u=el(s[c],a[c],!1,!1,!1,B);if(!u)return 0;l&=u}return l}if(t===He||e===He)return-1;var d=$(e,n),p=$(t,n);if(1===n&&d.length&&p.length){if(Ja(e)&&!Ja(t))return o&&x(mh.Diagnostics.Cannot_assign_an_abstract_constructor_type_to_a_non_abstract_constructor_type),0;if(r=d[0],i=p[0],m=o,r.declaration&&i.declaration&&(r=mh.getSelectedModifierFlags(r.declaration,24),8!==(i=mh.getSelectedModifierFlags(i.declaration,24)))&&(16!==i||8===r)&&(16===i||r)&&!void(m&&x(mh.Diagnostics.Cannot_assign_a_0_constructor_type_to_a_1_constructor_type,Zo(r),Zo(i))))return 0}var g=-1,h=C;if(64&w(e)&&64&w(t)&&e.symbol===t.symbol)for(var _=0;_<p.length;_++){if(!(k=A(d[_],p[_],!0,o)))return 0;g&=k}else if(1===d.length&&1===p.length)var m=S===Sn||ue.noStrictGenericChecks,g=A(d[0],p[0],m,o);else e:for(var f=0,y=p;f<y.length;f++){for(var k,b=y[f],v=o,T=0,E=d;T<E.length;T++){if(k=A(E[T],b,!0,v)){g&=k,C=h;continue e}v=!1}return v&&x(mh.Diagnostics.Type_0_provides_no_match_for_the_signature_1,ke(e),qo(b,void 0,void 0,n)),0}return g}function A(e,t,n,o){return La(n?Yi(e):e,n?Yi(t):t,0,!1,o,x,B)}function I(e,t,n){e=B(e.type,t.type,n);return!e&&n&&x(mh.Diagnostics.Index_signatures_are_incompatible),e}function D(l,e,t,n,o){var r,i,s;return S===Cn?(i=l,s=O(e,r=t),(i=O(i,r))||s?i&&s&&i.isReadonly===s.isReadonly?B(i.type,s.type):0:-1):!(r=O(e,t))||1&r.type.flags&&!n?-1:(i=O(l,t)||1===t&&O(l,0))?I(i,r,o):yi(l)?0===t&&B(fi(l),r.type,o):fl(l)?(s=-1,(s=0===t&&(e=O(l,1))?I(e,r,o):s)&&(s&=function(e,t,n){for(var o=-1,r=0,i=bi(l);r<i.length;r++){var s=i[r];if(0===t||Zc(s.escapedName)){var a=B(z(s),e,n);if(!a)return n&&x(mh.Diagnostics.Property_0_is_incompatible_with_index_signature,ye(s)),0;o&=a}}return o}(r.type,t,o)),s):(o&&x(mh.Diagnostics.Index_signature_is_missing_in_type_0,ke(l)),0)}}function Ga(e,t,n){e=is(e,mh.map(e.typeParameters,function(e){return e===t?n:e}));return e.flags|=67108864,e}function Ka(e){if(!P)return mh.emptyArray;var t=e.typeParameters||mh.emptyArray;if(!(n=e.variances)){if(e===qe||e===Je)n=[1];else{e.variances=mh.emptyArray;for(var n=[],o=0,r=t;o<r.length;o++){var i=r[o],s=Ga(e,i,Ke),a=Ga(e,i,je),a=(Ee(a,s)?1:0)|(Ee(s,a)?2:0);3===a&&Ee(Ga(e,i,St),s)&&(a=4),n.push(a)}}e.variances=n}return n}function ja(e){return 16384&e.flags&&!ts(e)}function za(e){return 4&w(e)&&mh.some(e.typeArguments,function(e){return ja(e)||za(e)})}function Xa(e,t,n){void 0===n&&(n=0);for(var o=""+e.target.id,r=0,i=e.typeArguments;r<i.length;r++){var s,a=i[r];ja(a)?((s=mh.indexOf(t,a))<0&&(s=t.length,t.push(a)),o+="="+s):n<4&&za(a)?o+="<"+Xa(a,t,n+1)+">":o+="-"+a.id}return o}function $a(e,t,n){return n===Cn&&e.id>t.id&&(n=e,e=t,t=n),za(e)&&za(t)?Xa(e,n=[])+","+Xa(t,n):e.id+","+t.id}function Ya(e,t){if(!(6&mh.getCheckFlags(e)))return t(e);for(var n=0,o=e.containingType.types;n<o.length;n++){var r=X(o[n],e.escapedName),r=r&&Ya(r,t);if(r)return r}}function qa(e){return e.parent&&32&e.parent.flags?be(Do(e)):void 0}function Ja(e){if(16&w(e)){e=e.symbol;if(e&&32&e.flags){e=Xp(e);if(e&&mh.hasModifier(e,128))return 1}}}function Qa(e,t,n){if(5<=n&&32768&e.flags){var o=e.symbol;if(o)for(var r=0,i=0;i<n;i++){var s=t[i];if(32768&s.flags&&s.symbol===o&&5<=++r)return 1}}}function Za(e,t,n){if(e===t)return-1;var o=24&mh.getDeclarationModifierFlagsFromSymbol(e);if(o!=(24&mh.getDeclarationModifierFlagsFromSymbol(t)))return 0;if(o){if(zp(e)!==zp(t))return 0}else if((16777216&e.flags)!=(16777216&t.flags))return 0;return yd(e)!==yd(t)?0:n(z(e),z(t))}function el(e,t,n,o,r,i){if(e===t)return-1;if(a=t,!((s=e).parameters.length===a.parameters.length&&s.minArgumentCount===a.minArgumentCount&&s.hasRestParameter===a.hasRestParameter||(u=s.hasRestParameter?1:0,l=a.hasRestParameter?1:0,n&&s.minArgumentCount<=a.minArgumentCount&&(l<u||u==l&&s.parameters.length>=a.parameters.length))))return 0;var s,a,l;if(mh.length(e.typeParameters)!==mh.length(t.typeParameters))return 0;e=Yi(e),t=Yi(t);var c=-1;if(!o){n=ji(e);if(n){var u=ji(t);if(u){if(!(d=i(n,u)))return 0;c&=d}}}for(var d,p=t.parameters.length,g=0;g<p;g++){if(!(d=i(tl(e,g)?zi(e):sd(e.parameters[g]),tl(t,g)?zi(t):sd(t.parameters[g]))))return 0;c&=d}return r||(c&=i(Te(e),Te(t))),c}function tl(e,t){return e.hasRestParameter&&t>=e.parameters.length-1}function nl(i){return function(){for(var e=0,t=i;e<t.length;e++){var n=t[e],o=ll(n),r=r||o;if(o===n||o!==r)return}return 1}()?Y(i):mh.reduceLeft(i,function(e,t){return Na(e,t)?t:e})}function ol(e){return 4&w(e)&&e.target===qe}function rl(e){return 4&w(e)&&(e.target===qe||e.target===Je)||!(6144&e.flags)&&Ee(e,it)}function il(e){return!!X(e,"0")}function sl(e){return!!(6368&e.flags)}function al(e){return!!(8&e.flags)||(65536&e.flags?!!(256&e.flags)||!mh.forEach(e.types,function(e){return!sl(e)}):sl(e))}function ll(e){return 256&e.flags?Yr(e):32&e.flags?_e:64&e.flags?ae:128&e.flags?we:65536&e.flags?Y(mh.sameMap(e.types,ll)):e}function cl(e){return 256&e.flags?Yr(e):32&e.flags&&1048576&e.flags?_e:64&e.flags&&1048576&e.flags?ae:128&e.flags?we:65536&e.flags?Y(mh.sameMap(e.types,cl)):e}function ul(e){return 4&w(e)&&8&e.target.objectFlags}function dl(e){for(var t=0,n=0,o=e;n<o.length;n++)t|=pl(o[n]);return t}function pl(e){return 65536&e.flags?dl(e.types):32&e.flags?""===e.value?32:0:64&e.flags?0===e.value?64:0:128&e.flags?e===Ne?128:0:7406&e.flags}function gl(e){return 7392&pl(e)?ac(e,function(e){return!(7392&pl(e))}):e}function hl(e){return 2&e.flags?Lt:4&e.flags?Mt:8&e.flags||e===Ne?Ne:7168&e.flags||32&e.flags&&""===e.value||64&e.flags&&0===e.value?e:Pe}function _l(e,t){t=t&~e.flags&6144;return 0==t?e:Y(2048==t?[e,De]:4096==t?[e,ie]:[e,De,ie])}function ml(e){return pe?Xl(e,524288):e}function fl(e){return e.symbol&&0!=(6656&e.symbol.flags)&&0===$(e,0).length&&0===$(e,1).length}function yl(e,t){var n=Kn(e.flags,e.escapedName);return n.declarations=e.declarations,n.parent=e.parent,n.type=t,(n.target=e).valueDeclaration&&(n.valueDeclaration=e.valueDeclaration),n}function kl(e){var t,n;return 128&w(e)&&1048576&e.flags?e.regularType||(n=function(e,t){for(var n=mh.createSymbolTable(),o=0,r=bi(e);o<r.length;o++){var i=r[o],s=z(i),a=t(s);n.set(i.escapedName,a===s?i:yl(i,a))}return n}(t=e,kl),(n=Uo(t.symbol,n,t.callSignatures,t.constructSignatures,t.stringIndexInfo,t.numberIndexInfo)).flags=-1048577&t.flags,n.objectFlags|=128,e.regularType=n):e}function bl(e){return 6144&e.flags?e:vl(e)}function vl(e){if(6291456&e.flags){if(6144&e.flags)return K;if(128&w(e)){var t=e;for(var n,o,r,i=mh.createSymbolTable(),s=0,a=bi(t);s<a.length;s++){var l=a[s];i.set(l.escapedName,4&l.flags?(r=o=void 0,o=z(n=l),(r=vl(o))===o?n:yl(n,r)):l)}var c=O(t,0),u=O(t,1);return Uo(t.symbol,i,mh.emptyArray,mh.emptyArray,c&&Zi(vl(c.type),c.isReadonly),u&&Zi(vl(u.type),u.isReadonly));return}if(65536&e.flags)return Y(mh.sameMap(e.types,bl));if(ol(e)||ul(e))return is(e.target,mh.sameMap(e.typeArguments,vl))}return e}function Tl(e,t){var n,o=ke(vl(t));switch(e.kind){case 149:case 148:n=mh.Diagnostics.Member_0_implicitly_has_an_1_type;break;case 146:n=e.dotDotDotToken?mh.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type:mh.Diagnostics.Parameter_0_implicitly_has_an_1_type;break;case 176:n=mh.Diagnostics.Binding_element_0_implicitly_has_an_1_type;break;case 228:case 151:case 150:case 153:case 154:case 186:case 187:if(!e.name)return me(e,mh.Diagnostics.Function_expression_which_lacks_return_type_annotation_implicitly_has_an_0_return_type,o);n=mh.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type;break;default:n=mh.Diagnostics.Variable_0_implicitly_has_an_1_type}me(e,n,mh.declarationNameToString(mh.getNameOfDeclaration(e)),o)}function El(e,t){ce&&Q&&2097152&t.flags&&(function e(t){var n=!1;if(65536&t.flags)for(var o=0,r=t.types;o<r.length;o++)e(c=r[o])&&(n=!0);if(ol(t)||ul(t))for(var i=0,s=t.typeArguments;i<s.length;i++)e(c=s[i])&&(n=!0);if(128&w(t))for(var a=0,l=bi(t);a<l.length;a++){var c,u=l[a];2097152&(c=z(u)).flags&&(e(c)||me(u.valueDeclaration,mh.Diagnostics.Object_literal_s_property_0_implicitly_has_an_1_type,mh.symbolName(u),ke(vl(c))),n=!0)}return n}(t)||Tl(e,t))}function Sl(e,t,n){for(var o=e.parameters.length,r=t.parameters.length,i=e.hasRestParameter&&t.hasRestParameter?Math.max(o,r):e.hasRestParameter?r:t.hasRestParameter?o:Math.min(o,r),s=0;s<i;s++)n(ad(e,s),ad(t,s))}function Cl(e,t,n,o){function r(e){for(var t=0;t<i.length;t++)if(e===i[t].typeParameter)return i[t].isFixed=!0,Rl(r,t);return e}var i=o?mh.map(o,Bl):mh.map(e.typeParameters,xl);return r.signature=e,r.inferences=i,r.flags=t,r.compareTypes=n||Da,r}function xl(e){return{typeParameter:e,candidates:void 0,inferredType:void 0,priority:void 0,topLevel:!0,isFixed:!1}}function Bl(e){return{typeParameter:e.typeParameter,candidates:e.candidates&&e.candidates.slice(),inferredType:e.inferredType,priority:e.priority,topLevel:e.topLevel,isFixed:e.isFixed}}function Al(e){var t=w(e);return!!(802816&e.flags||4&t&&mh.forEach(e.typeArguments,Al)||16&t&&e.symbol&&10288&e.symbol.flags||32&t||196608&e.flags&&(void 0===(t=e).couldContainTypeVariables&&(t.couldContainTypeVariables=mh.forEach(t.types,Al)),t.couldContainTypeVariables))}function Il(e,t){return e===t||196608&e.flags&&mh.forEach(e.types,function(e){return Il(e,t)})}function Dl(e,t,n){for(var o=0,r=bi(t);o<r.length;o++){var i=r[o];if((n||!(16777216&i.flags))&&!X(e,i.escapedName))return i}}function Nl(r,e,v,T){var E,S;function C(e,t){if(Al(t))if(e.aliasSymbol&&e.aliasTypeArguments&&e.aliasSymbol===t.aliasSymbol)for(var n=e.aliasTypeArguments,o=t.aliasTypeArguments,r=0;r<n.length;r++)C(n[r],o[r]);else{if(65536&e.flags&&65536&t.flags&&!(256&e.flags&&256&t.flags)||131072&e.flags&&131072&t.flags){if(e===t){for(var i=0,s=e.types;i<s.length;i++)C(g=s[i],g);return}for(var a,l=void 0,c=0,u=e.types;c<u.length;c++)wl(g=u[c],t.types)?((l=l||[]).push(g),C(g,g)):96&g.flags&&wl(a=ll(g),t.types)&&(l=l||[]).push(g,a);l&&(e=Ol(e,l),t=Ol(t,l))}if(540672&t.flags)8388608&e.flags||e===Le||!(h=B(t))||h.isFixed||(!h.candidates||T<h.priority?(h.candidates=[e],h.priority=T):T===h.priority&&h.candidates.push(e),8&T)||!(16384&t.flags)||Il(v,t)||(h.topLevel=!1);else if(4&w(e)&&4&w(t)&&e.target===t.target)for(var n=e.typeArguments||mh.emptyArray,o=t.typeArguments||mh.emptyArray,d=(n.length<o.length?n:o).length,p=Ka(e.target),r=0;r<d;r++)(r<p.length&&2===p[r]?x:C)(n[r],o[r]);else if(262144&e.flags&&262144&t.flags)C(e.type,t.type);else if(524288&e.flags&&524288&t.flags)C(e.objectType,t.objectType),C(e.indexType,t.indexType);else if(196608&t.flags){for(var g,h,_=0,m=void 0,f=0,y=o=t.types;f<y.length;f++)B(g=y[f])?(m=g,_++):C(e,g);1===_&&(h=T,T|=2,C(e,m),T=h)}else if(65536&e.flags)for(var k=0,b=n=e.types;k<b.length;k++)C(b[k],t);else 163840&(e=G(e)).flags&&(h=e.id+","+t.id,S&&S.get(h)||((S=S||mh.createMap()).set(h,!0),(h=32768&t.flags&&!(16&w(t)&&t.symbol&&32&t.symbol.flags)?t.symbol:void 0)?mh.contains(E,h)||((E=E||[]).push(h),A(e,t),E.pop()):A(e,t)))}}function x(e,t){P?(T^=1,C(e,t),T^=1):C(e,t)}function B(e){if(540672&e.flags)for(var t=0,n=r;t<n.length;t++){var o=n[t];if(e===o.typeParameter)return o}}function A(e,t){if(yi(e)&&yi(t)&&(C(mi(e),mi(t)),C(fi(e),fi(t))),32&w(t)){var n=mi(t);if(262144&n.flags)return void((c=B(n.type))&&!c.isFixed&&(l=function(e,t){var n=ve(e),e=O(e,0);if(0!==n.length||e){for(var o=xl(Zs(mi(t).type,_i(t))),r=[o],i=fi(t),s=!t.declaration.readonlyToken,a=t.declaration.questionToken?0:16777216,l=mh.createSymbolTable(),c=0,u=n;c<u.length;c++){var d=u[c],p=h(z(d));if(!p)return;var g=Kn(4|d.flags&a,d.escapedName);g.checkFlags=s&&yd(d)?8:0,g.declarations=d.declarations,g.type=p,l.set(d.escapedName,g)}if(e){t=h(e.type);if(!t)return;e=Zi(t,s&&e.isReadonly)}return Uo(void 0,l,mh.emptyArray,mh.emptyArray,e,void 0)}function h(e){return o.candidates=void 0,Nl(r,e,i),o.candidates&&Y(o.candidates,!0)}}(e,t))&&(d=T,T|=4,C(l,c.typeParameter),T=d));if(16384&n.flags)return C(Xs(e),n),C(Y(mh.map(ve(e),z)),fi(t))}if(!Dl(e,t,!1)||!Dl(t,e,!1)){for(var o=e,r=0,i=bi(t);r<i.length;r++){var s=i[r],a=X(o,s.escapedName);a&&C(z(a),z(s))}p(e,t,0),p(e,t,1),l=e,(d=Pi(c=t,0))&&(u=Pi(l,0)||Li(l,0))&&C(u,d),(d=Pi(c,1))&&(u=Pi(l,1)||Pi(l,0)||Li(l,1))&&C(u,d)}var l,c,u,d}function p(e,t,n){for(var o,r,i=$(e,n),s=$(t,n),a=i.length,l=s.length,c=a<l?a:l,u=0;u<c;u++)o=Yi(i[a-c+u]),r=Yi(s[l-c+u]),Sl(o,r,x),o.typePredicate&&r.typePredicate&&o.typePredicate.kind===r.typePredicate.kind?C(o.typePredicate.type,r.typePredicate.type):C(Te(o),Te(r))}void 0===T&&(T=0),C(e,v)}function wl(e,t){for(var n=0,o=t;n<o.length;n++)if(Aa(o[n],e))return 1}function Ol(e,t){for(var n=[],o=0,r=e.types;o<r.length;o++){var i=r[o];wl(i,t)||n.push(i)}return(65536&e.flags?Y:js)(n)}function Rl(e,t){var n,o,r,i,s,a=e.inferences[t],l=a.inferredType;return!l&&(l=a.candidates?(r=e.signature,s=!a.topLevel||(s=Ti(a.typeParameter))&&Td(s,270334)||!a.isFixed&&Il(Te(r),a.typeParameter)?a.candidates:mh.sameMap(a.candidates,cl),vl(1&a.priority?mh.reduceLeft(s,function(e,t){return Na(t,e)?t:e}):1&e.flags||8&a.priority?Y(s,!0):(r=s,pe?(i=mh.filter(r,function(e){return!(6144&e.flags)})).length?_l(nl(i),6144&dl(r)):Y(r,!0):nl(r)))):2&e.flags?Le:(i=Ai(a.typeParameter))?V(i,fa((n=e.signature.typeParameters,o=t,function(e){return mh.indexOf(n,e)>=o?N:e}),e)):Pl(!!(4&e.flags)),a.inferredType=l,r=Ti(e.signature.typeParameters[t]))&&(t=V(r,e),e.compareTypes(l,ii(t,l))||(a.inferredType=l=t)),l}function Pl(e){return e?K:N}function Ll(e){for(var t=[],n=0;n<e.inferences.length;n++)t.push(Rl(e,n));return t}function Ml(e){var t=j(e);return t.resolvedSymbol||(t.resolvedSymbol=!mh.nodeIsMissing(e)&&Zn(e,e.escapedText,1156031,mh.Diagnostics.Cannot_find_name_0,e,!mh.isWriteOnlyAccess(e),mh.Diagnostics.Cannot_find_name_0_Did_you_mean_1)||ge),t.resolvedSymbol}function Fl(e){return!!mh.findAncestor(e,function(e){return 162===e.kind||71!==e.kind&&143!==e.kind&&"quit"})}function Ul(e){if(174!==e.parent.kind)return""+e.parent.elements.indexOf(e);var t=e.propertyName||e.name;switch(t.kind){case 71:return mh.idText(t);case 144:return mh.isStringOrNumericLiteral(t.expression)?t.expression.text:void 0;case 9:case 8:return t.text;default:mh.Debug.fail("Unexpected name kind for binding element name")}}function Hl(e,t){switch(e.kind){case 71:return 71===t.kind&&Ml(e)===Ml(t)||(226===t.kind||176===t.kind)&&No(Ml(e))===fe(t);case 99:return 99===t.kind;case 97:return 97===t.kind;case 179:return 179===t.kind&&e.name.escapedText===t.name.escapedText&&Hl(e.expression,t.expression);case 176:if(179!==t.kind)return!1;var n,o=t;if(o.name.escapedText!==Ul(e))return!1;if(176===e.parent.parent.kind&&Hl(e.parent.parent,o.expression))return!0;if(226===e.parent.parent.kind)return(n=e.parent.parent.initializer)&&Hl(n,o.expression)}return!1}function Vl(e,t){for(;179===e.kind;)if(Hl(e=e.expression,t))return!0;return!1}function Wl(e,t){return 179===t.kind&&Vl(e,t.expression)&&Gl(function e(t){if(71===t.kind)return z(Ml(t));{var n;if(179===t.kind)return(n=e(t.expression))&&dr(n,t.name.escapedText)}}(t.expression),t.name.escapedText)}function Gl(e,t){if(e&&65536&e.flags){e=Di(e,t);if(e&&2&mh.getCheckFlags(e))return void 0===e.isDiscriminantProperty&&(e.isDiscriminantProperty=32&e.checkFlags&&al(z(e))),e.isDiscriminantProperty}return!1}function Kl(e,t){return Hl(e,t)||Vl(e,t)}function jl(e,i){if(e!==i){if(8192&i.flags)return i;var t=ac(e,function(e){var t=i,n=e;if(!(65536&t.flags))return Ee(t,n);for(var o=0,r=t.types;o<r.length;o++)if(Ee(r[o],n))return!0;return!1});if(!(8192&t.flags))return t}return e}function zl(e){var t,n,o=e.flags;if(2&o)return pe?4079361:4194049;if(32&o)return t=""===e.value,pe?t?3030785:1982209:t?3145473:4194049;if(20&o)return pe?4079234:4193922;if(64&o)return t=0===e.value,pe?t?3030658:1982082:t?3145346:4193922;if(8&o)return pe?4078980:4193668;else{if(136&o)return pe?e===Ne?3030404:1981828:e===Ne?3145092:4193668;if(32768&o)return(n=ki(t=e)).callSignatures.length||n.constructSignatures.length||n.members.get("bind")&&Na(t,Ye)?pe?6164448:8376288:pe?6166480:8378320;if(3072&o)return 2457472;if(4096&o)return 2340752;if(512&o)return pe?1981320:4193160;if(16777216&o)return pe?6166480:8378320;if(540672&o)return zl(Si(e)||N);if(196608&o){for(var r=0,i=0,s=e.types;i<s.length;i++)r|=zl(s[i]);return r}return 8388607}}function Xl(e,t){var n,o;return 524288&e.flags?(o=ac(n=Si(e)||N,function(e){return 0!=(zl(e)&t)}))!==n?o:e:ac(e,function(e){return 0!=(zl(e)&t)})}function $l(e,t){return t?(t=Hd(t),Y([Xl(e,131072),t])):e}function Yl(e,t){t=mh.getTextOfPropertyName(t);return dr(e,t)||Zc(t)&&Pi(e,1)||Pi(e,0)||he}function ql(e,t){return il(e)&&dr(e,""+t)||Rp(e,void 0,!1,!1)||he}function Jl(e){return Ls(Rp(e,void 0,!1,!1)||he)}function Ql(e){return 194===e.parent.kind&&e.parent.left===e||216===e.parent.kind&&e.parent.initializer===e}function Zl(e){return Yl(ec(e.parent),e.name)}function ec(e){var t,n,o=e.parent;switch(o.kind){case 215:return _e;case 216:return Op(o.expression,o.awaitModifier)||he;case 194:return 177===(n=o).parent.kind&&Ql(n.parent)||261===n.parent.kind&&Ql(n.parent.parent)?$l(ec(n),n.right):Hd(n.right);case 188:return De;case 177:return n=e,ql(ec(t=o),mh.indexOf(t.elements,n));case 198:return Jl(ec(o.parent));case 261:return Zl(o);case 262:return $l(Zl(t=o),t.objectAssignmentInitializer)}return he}function tc(e){return 226===e.kind?(t=e).initializer?j(n=t.initializer).resolvedType||Hd(n):215===t.parent.parent.kind?_e:216===t.parent.parent.kind&&Op(t.parent.parent.expression,t.parent.parent.awaitModifier)||he:(t=(n=e).parent,e=tc(t.parent),$l(174===t.kind?Yl(e,n.propertyName||n.name):n.dotDotDotToken?Jl(e):ql(e,mh.indexOf(t.elements,n)),n.initializer));var t,n}function nc(e){return(226===e.kind||176===e.kind?tc:ec)(e)}function oc(e){switch(e.kind){case 185:return oc(e.expression);case 194:switch(e.operatorToken.kind){case 58:return oc(e.left);case 26:return oc(e.right)}}return e}function rc(e){var t=j(e);if(!t.switchTypes){t.switchTypes=[];for(var n=0,o=e.caseBlock.clauses;n<o.length;n++){var r=257===(r=o[n]).kind?sl(r=ua(Hd(r.expression)))?r:void 0:Pe;if(void 0===r)return t.switchTypes=mh.emptyArray;t.switchTypes.push(r)}}return t.switchTypes}function ic(e,t){return e===t||65536&t.flags&&function(e,t){if(65536&e.flags){for(var n=0,o=e.types;n<o.length;n++){var r=o[n];if(!Us(t.types,r))return!1}return!0}return!!(256&e.flags&&Yr(e)===t)||Us(t.types,e)}(e,t)}function sc(e,t){return 65536&e.flags?mh.forEach(e.types,t):t(e)}function ac(e,t){var n,o;return 65536&e.flags?(n=e.types,(o=mh.filter(n,t))===n?e:Gs(o)):t(e)?e:Pe}function lc(e,t){if(!(65536&e.flags))return t(e);for(var n,o,r=0,i=e.types;r<i.length;r++){var s=t(i[r]);s&&(n?o?o.push(s):o=[n,s]:n=s)}return o?Y(o):n}function cc(e,t){return ac(e,function(e){return 0!=(e.flags&t)})}function uc(e,t){return ic(_e,e)&&Td(t,32)||ic(ae,e)&&Td(t,64)?lc(e,function(e){return 2&e.flags?cc(t,34):4&e.flags?cc(t,68):e}):e}function dc(e){return 0===e.flags}function pc(e){return 0===e.flags?e.type:e}function gc(e,t){return t?{flags:0,type:e}:e}function hc(e){return te[e.id]||(te[e.id]=(e=e,(t=Po(256)).elementType=e,t));var t}function _c(e,t){var n,o,t=ll((n=(t=t).contextualType,t.contextualType=K,o=Hd(t),t.contextualType=n,o));return ic(t,e.elementType)?e:hc(Y([e.elementType,t]))}function mc(e){return 256&w(e)?(t=e).finalArrayType||(t.finalArrayType=8192&(t=t.elementType).flags?rt:Ls(65536&t.flags?Y(t.types,!0):t)):e;var t}function fc(e){return 256&w(e)?e.elementType:Pe}function yc(r,e){return function(){for(var e=!1,t=0,n=r;t<n.length;t++){var o=n[t];if(!(8192&o.flags)){if(!(256&w(o)))return;e=!0}}return e}()?hc(Y(mh.map(r,fc))):Y(mh.sameMap(r,mc),e)}function kc(e){var e=function e(t){var n=t.parent;return 185===n.kind||194===n.kind&&58===n.operatorToken.kind&&n.left===t||194===n.kind&&26===n.operatorToken.kind&&n.right===t?e(n):t}(e),t=e.parent,n=179===t.kind&&("length"===t.name.escapedText||181===t.parent.kind&&mh.isPushOrUnshiftIdentifier(t.name)),e=180===t.kind&&t.expression===e&&194===t.parent.kind&&58===t.parent.operatorToken.kind&&t.parent.left===t&&!mh.isAssignmentTarget(t.parent)&&Ed(Hd(t.argumentExpression),84);return n||e}function bc(_,m,u,d,e){void 0===u&&(u=m);var p,g,h=0;return Pt?he:!_.flowNode||!(e||17810175&m.flags)||(g=Rt,e=pc(f(_.flowNode)),Rt=g,e=256&w(e)&&kc(_)?ot:mc(e),203===_.parent.kind&&8192&Xl(e,524288).flags)?m:e;function f(e){if(2500===h)return Pt=!0,n=mh.findAncestor(t=_,mh.isFunctionOrModuleBlock),t=mh.getSourceFileOfNode(t),n=mh.getSpanOfTokenAtPosition(t,n.statements.pos),en.add(mh.createFileDiagnostic(t,n.start,n.length,mh.Diagnostics.The_containing_function_or_module_body_is_too_large_for_control_flow_analysis)),he;var t,n,o,r,i;for(h++;;){var s=e.flags;if(1024&s)for(var a=g;a<Rt;a++)if(Yt[a]===e)return h--,qt[a];var l=void 0;if(4096&s)e.locked=!0,l=f(e.antecedent),e.locked=!1;else{if(2048&s){e=e.antecedent;continue}if(16&s){if(!(l=function(e){var t=e.node;if(Hl(_,t))return 2===mh.getAssignmentTargetKind(t)?gc(ll(pc(e=f(e.antecedent))),dc(e)):m===oe||m===rt?function(e){return 226===e.kind&&e.initializer&&fr(e.initializer)||176!==e.kind&&194===e.parent.kind&&fr(e.parent.right)}(t)?hc(Pe):Ee(e=ll(nc(t)),m)?e:ot:65536&m.flags?jl(m,nc(t)):m;if(Vl(_,t))return m}(e))){e=e.antecedent;continue}}else if(96&s)c=i=r=void 0,i=f((o=e).antecedent),l=8192&(c=pc(i)).flags||(r=0!=(32&o.flags),c=mc(c),(o=x(c,o.expression,r))===c)?i:gc((r=dc(i))&&8192&o.flags?Le:o,r);else if(128&s)l=function(t){var e=f(t.antecedent),n=pc(e),o=t.switchStatement.expression;return Hl(_,o)?n=E(n,t.switchStatement,t.clauseStart,t.clauseEnd):y(o,n)&&(n=k(n,o,function(e){return E(e,t.switchStatement,t.clauseStart,t.clauseEnd)})),gc(n,dc(e))}(e);else if(12&s){if(1===e.antecedents.length){e=e.antecedents[0];continue}l=(4&s?function(e){for(var t=[],n=!1,o=!1,r=0,i=e.antecedents;r<i.length;r++){var s=i[r];if(!(2048&s.flags&&s.lock.locked)){var s=f(s),a=pc(s);if(a===m&&m===u)return a;mh.pushIfUnique(t,a),ic(a,m)||(n=!0),dc(s)&&(o=!0)}}return gc(yc(t,n),o)}:function(e){var t=function(e){return e.id||(e.id=kh,kh++),e.id}(e),n=jt[t]||(jt[t]=mh.createMap());if(!p&&!(p=function e(t){var n,o;return 71===t.kind?(o=Ml(t))!==ge?(Ec(t)?"@":"")+vh(o):void 0:99===t.kind?"0":179===t.kind?(n=e(t.expression))&&n+"."+mh.idText(t.name):176===t.kind?(n=176===(o=t.parent.parent).kind?e(o):o.initializer&&e(o.initializer),o=Ul(t),n&&o&&n+"."+o):void 0}(_)))return m;t=n.get(p);if(t)return t;for(var o=wt;o<Ot;o++)if(zt[o]===e&&Xt[o]===p&&$t[o].length)return gc(yc($t[o],!1),!0);var r,i=[],s=!1;zt[Ot]=e,Xt[Ot]=p,$t[Ot]=i;for(var a=0,l=e.antecedents;a<l.length;a++){var c=l[a],c=(Ot++,f(c)),c=(Ot--,r=r||c,pc(c)),u=n.get(p);if(u)return u;if(mh.pushIfUnique(i,c),ic(c,m)||(s=!0),c===m)break}t=yc(i,s);return dc(r)?gc(t,!0):(n.set(p,t),t)})(e)}else if(256&s){if(!(l=function(e){if(m===oe||m===rt){var t=e.node,n=(181===t.kind?t.expression:t.left).expression;if(Hl(_,oc(n))){n=f(e.antecedent),e=pc(n);if(256&w(e)){var o=e;if(181===t.kind)for(var r=0,i=t.arguments;r<i.length;r++)o=_c(o,i[r]);else Ed(Hd(t.left.argumentExpression),84)&&(o=_c(o,t.right));return o===e?n:gc(o,dc(n))}return n}}}(e))){e=e.antecedent;continue}}else if(2&s){var c=e.container;if(c&&c!==d&&179!==_.kind&&99!==_.kind){e=c.flowNode;continue}l=u}else l=Ap(m)}return 1024&s&&(Yt[Rt]=e,qt[Rt]=l,Rt++),h--,l}}function y(e,t){return 179===e.kind&&65536&t.flags&&Hl(_,e.expression)&&Gl(t,e.name.escapedText)}function k(e,t,n){var o=t.name.escapedText,t=dr(e,o),r=t&&n(t);return t===r?e:ac(e,function(e){return Oa(dr(e,o),r)})}function b(e,t,n){return Hl(_,t)?Xl(e,n?1048576:2097152):y(t,m)?k(e,t,function(e){return Xl(e,n?1048576:2097152)}):Wl(_,t)?m:e}function v(e,t,n,o){if(1&e.flags)return e;33!==t&&35!==t||(o=!o);var r,i=Hd(n);return 6144&i.flags?pe?Xl(e,32===t||33===t?o?65536:524288:95===n.kind?o?32768:262144:o?16384:131072):e:16810497&e.flags?e:o?8192&(t=ac(e,function(e){return Oa(e=e,t=i)||Oa(t,e);var t})).flags?e:uc(t,i):sl(i)?(r=ua(i),ac(e,function(e){return ua(e)!==r})):e}function T(e,t,n,o,r){t=oc(t.expression);if(!Hl(_,t))return Vl(_,t)?m:e;if((r=33!==n&&35!==n?r:!r)&&!(65536&e.flags)){t=cn.get(o.text);if(t){if(Na(t,e))return t;if(540672&e.flags&&Na(t,Si(e)||K))return js([e,t])}}return Xl(e,r?an.get(o.text)||64:ln.get(o.text)||8192)}function E(e,t,n,o){var r,i=rc(t);return i.length?(t=i.slice(n,o),n=n===o||mh.contains(t,Pe),o=8192&(r=Y(t)).flags?Pe:uc(ac(e,function(e){return Oa(r,e)}),r),n?(t=ac(e,function(e){return!(sl(e)&&mh.contains(i,ua(e)))}),8192&o.flags?t:Y([o,t])):o):e}function S(e,t,n,o){if(!n)return ac(e,function(e){return!o(e,t)});if(65536&e.flags){n=ac(e,function(e){return o(e,t)});if(!(8192&n.flags))return n}return Na(t,e)?t:Ee(e,t)?e:Ee(t,e)?t:js([e,t])}function C(e,t,n){if(function(e,t){if(e.arguments)for(var n=0,o=e.arguments;n<o.length;n++)if(Kl(t,o[n]))return 1;return 179===e.expression.kind&&Kl(t,e.expression.expression)}(t,_)&&(void 0===(r=j(o=t)).maybeTypePredicate&&(r.maybeTypePredicate=function(){if(97!==o.expression.kind){var e=Eu(o.expression);if(e!==Le){var e=G(e);if(e!==he)return e=$(e,0),!!mh.forEach(e,function(e){return e.typePredicate})}}return!1}()),r.maybeTypePredicate)){var o,r=td(t),i=r.typePredicate;if(i&&(!D(e)||i.type!==$e&&i.type!==Ye))if(mh.isIdentifierTypePredicate(i)){r=t.arguments[i.parameterIndex-(r.thisParameter?1:0)];if(r){if(Hl(_,r))return S(e,i.type,n,Na);if(Vl(_,r))return m}}else{r=mh.skipParentheses(t.expression);if(180===r.kind||179===r.kind){t=mh.skipParentheses(r.expression);if(Hl(_,t))return S(e,i.type,n,Na);if(Vl(_,t))return m}}}return e}function x(e,t,n){switch(t.kind){case 71:case 99:case 97:case 179:return b(e,t,n);case 181:return C(e,t,n);case 185:return x(e,t.expression,n);case 194:var o,r,i,s,a,l,c=e,u=t,d=n;switch(u.operatorToken.kind){case 58:return b(c,u.left,d);case 32:case 33:case 34:case 35:var p=u.operatorToken.kind,g=oc(u.left),h=oc(u.right);if(189===g.kind&&9===h.kind)return T(c,g,p,h,d);if(189===h.kind&&9===g.kind)return T(c,h,p,g,d);if(Hl(_,g))return v(c,p,h,d);if(Hl(_,h))return v(c,p,g,d);if(y(g,m))return k(c,g,function(e){return v(e,p,h,d)});if(y(h,m))return k(c,h,function(e){return v(e,p,g,d)});if(Wl(_,g)||Wl(_,h))return m;break;case 93:return o=c,i=d,l=oc((r=u).left),Hl(_,l)?Na(r=Hd(r.right),Ye)&&((a=X(r,"prototype"))&&!D(a=z(a))&&(s=a),!D(o)||s!==$e&&s!==Ye)&&(s||(a=void 0,2&w(r)?a=ri(r).declaredConstructSignatures:16&w(r)&&(a=$(r,1)),a&&a.length&&(s=Y(mh.map(a,function(e){return Te(Yi(e))})))),s)?S(o,s,i,wa):o:Vl(_,l)?m:o;case 26:return x(c,u.right,d)}return c;case 192:if(51===t.operator)return x(e,t.operand,!n)}return e}}function vc(e){return mh.findAncestor(e.parent,function(e){return mh.isFunctionLike(e)&&!mh.getImmediatelyInvokedFunctionExpression(e)||234===e.kind||265===e.kind||149===e.kind})}function Tc(e){var t;71===e.kind?mh.isAssignmentTarget(e)&&(t=Ml(e)).valueDeclaration&&146===mh.getRootDeclaration(t.valueDeclaration).kind&&(t.isAssigned=!0):mh.forEachChild(e,Tc)}function Ec(e){var t=e.parent;return 179===t.kind||181===t.kind&&t.expression===e||180===t.kind&&t.expression===e}function Sc(e){return 540672&e.flags&&Td(Si(e)||N,6144)}function Cc(e,t){e=z(e);return Ec(t)&&sc(e,Sc)?lc(vl(e),G):e}function xc(e){var t,n=Ml(e);if(n===ge)return he;if(n===M)return t=mh.getContainingFunction(e),de<2&&(187===t.kind?me(e,mh.Diagnostics.The_arguments_object_cannot_be_referenced_in_an_arrow_function_in_ES3_and_ES5_Consider_using_a_standard_function_expression):mh.hasModifier(t,256)&&me(e,mh.Diagnostics.The_arguments_object_cannot_be_referenced_in_an_async_function_or_method_in_ES3_and_ES5_Consider_using_a_standard_function_or_method)),j(t).flags|=8192,z(n);!co(n,107455)||Fl(e)||Ag(po(n))||ho(n);var o=No(n),r=o.valueDeclaration;if(32&o.flags)if(229===r.kind&&mh.nodeIsDecorated(r))for(t=mh.getContainingClass(e);void 0!==t;){if(t===r&&t.name!==e){j(r).flags|=8388608,j(e).flags|=16777216;break}t=mh.getContainingClass(t)}else if(199===r.kind)for(t=mh.getThisContainer(e,!1);void 0!==t;){if(t.parent===r){149===t.kind&&mh.hasModifier(t,32)&&(j(r).flags|=8388608,j(e).flags|=16777216);break}t=mh.getThisContainer(t,!1)}Sp(e,e),bp(e,e),vp(e,e);var i=e,s=n;if(!(2<=de||0==(34&s.flags)||260===s.valueDeclaration.parent.kind)){for(var a,l=mh.getEnclosingBlockScopeContainer(s.valueDeclaration),c=(c=i.parent,a=l,!!mh.findAncestor(c,function(e){return e===a?"quit":mh.isFunctionLike(e)})),u=l,d=!1;u&&!mh.nodeStartsNewLexicalEnvironment(u);){if(mh.isIterationStatement(u,!1)){d=!0;break}u=u.parent}d&&(c&&(j(u).flags|=65536),214===l.kind&&mh.getAncestor(s.valueDeclaration,227).parent===l&&function(t){for(var e=i;185===e.parent.kind;)e=e.parent;var n,o=!1;return mh.isAssignmentTarget(e)?o=!0:192!==e.parent.kind&&193!==e.parent.kind||(o=43===(n=e.parent).operator||44===n.operator),o&&mh.findAncestor(e,function(e){return e===t?"quit":e===t.statement})}(l)&&(j(s.valueDeclaration).flags|=2097152),j(s.valueDeclaration).flags|=262144),c&&(j(s.valueDeclaration).flags|=131072)}l=Cc(o,e),c=mh.getAssignmentTargetKind(e);if(c){if(!(3&o.flags))return me(e,mh.Diagnostics.Cannot_assign_to_0_because_it_is_not_a_variable,ye(n)),he;if(yd(o))return me(e,mh.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,ye(n)),he}s=2097152&o.flags;if(3&o.flags){if(1===c)return l}else{if(!s)return l;r=mh.find(n.declarations,Sh)}if(!r)return l;for(var p,g,h,_=146===mh.getRootDeclaration(r).kind,m=vc(r),f=vc(e),y=f!==m;f!==m&&(186===f.kind||187===f.kind||mh.isObjectLiteralOrClassExpressionMethod(f))&&(3&(h=o).flags&&0!=(2&bu(h))&&z(h)!==rt||_&&(h=o,g=p=void 0,p=mh.getRootDeclaration(h.valueDeclaration).parent,4194304&(g=j(p)).flags||(g.flags|=4194304,mh.findAncestor(p.parent,function(e){return mh.isFunctionLike(e)&&!!(4194304&j(e).flags)}))||Tc(p),!h.isAssigned));)f=vc(f);var s=_||s||y||l!==oe&&l!==rt&&(!pe||0!=(1&l.flags)||Fl(e)||246===e.parent.kind)||203===e.parent.kind||mh.isInAmbientContext(r),k=bc(e,l,s?_?(y=l,k=mh.getRootDeclaration(r),pe&&146===k.kind&&k.initializer&&2048&pl(y)&&!(2048&pl(Se(k.initializer)))?Xl(y,131072):y):l:l===oe||l===rt?De:_l(l,2048),f,!s);if(l===oe||l===rt){if(k===oe||k===rt)return Q&&(me(mh.getNameOfDeclaration(r),mh.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined,ye(n),ke(k)),me(e,mh.Diagnostics.Variable_0_implicitly_has_an_1_type,ye(n),ke(k))),Ap(k)}else if(!s&&!(2048&pl(l))&&2048&pl(k))return me(e,mh.Diagnostics.Variable_0_is_used_before_being_assigned,ye(n)),l;return c?ll(k):k}function Bc(e,t){j(e).flags|=2,149===t.kind||152===t.kind?j(t.parent).flags|=4:j(t).flags|=4}function Ac(e){return mh.isSuperCall(e)?e:mh.isFunctionLike(e)?void 0:mh.forEachChild(e,Ac)}function Ic(e){var t=j(e);return void 0===t.hasSuperCall&&(t.superCall=Ac(e.body),t.hasSuperCall=!!t.superCall),t.superCall}function Dc(e){return Gr(be(fe(e)))===se}function Nc(e,t,n){var o=t.parent;mh.getClassExtendsHeritageClauseElement(o)&&!Dc(o)&&(!(o=Ic(t))||o.end>e.pos)&&me(e,n)}function wc(e,t){return mh.findAncestor(e,function(e){return e===t?"quit":146===e.kind})}function Oc(e){var t=181===e.parent.kind&&e.parent.expression===e,n=mh.getSuperContainer(e,!0),o=!1;if(!t)for(;n&&187===n.kind;)n=mh.getSuperContainer(n,!0),o=de<2;var r,i,s;return!(r=n)||(t?152!==r.kind:!mh.isClassLike(r.parent)&&178!==r.parent.kind||(mh.hasModifier(r,32)?151!==r.kind&&150!==r.kind&&153!==r.kind&&154!==r.kind:151!==r.kind&&150!==r.kind&&153!==r.kind&&154!==r.kind&&149!==r.kind&&148!==r.kind&&152!==r.kind))?((r=mh.findAncestor(e,function(e){return e===n?"quit":144===e.kind}))&&144===r.kind?me(e,mh.Diagnostics.super_cannot_be_referenced_in_a_computed_property_name):t?me(e,mh.Diagnostics.Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors):n&&n.parent&&(mh.isClassLike(n.parent)||178===n.parent.kind)?me(e,mh.Diagnostics.super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_derived_class):me(e,mh.Diagnostics.super_can_only_be_referenced_in_members_of_derived_classes_or_object_literal_expressions),he):(t||152!==n.kind||Nc(e,n,mh.Diagnostics.super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class),r=mh.hasModifier(n,32)||t?512:256,j(e).flags|=r,151===n.kind&&mh.hasModifier(n,256)&&(mh.isSuperProperty(e.parent)&&mh.isAssignmentTarget(e.parent)?j(n).flags|=4096:j(n).flags|=2048),o&&Bc(e.parent,n),178===n.parent.kind?de<2?(me(e,mh.Diagnostics.super_is_only_allowed_in_members_of_object_literal_expressions_when_option_target_is_ES2015_or_higher),he):K:(s=(i=be(fe(t=n.parent)))&&Kr(i)[0])?152===n.kind&&wc(e,n)?(me(e,mh.Diagnostics.super_cannot_be_referenced_in_constructor_arguments),he):512==r?Gr(i):ii(s,i.thisType):(mh.getClassExtendsHeritageClauseElement(t)||me(e,mh.Diagnostics.super_can_only_be_referenced_in_a_derived_class),he))}function Rc(e){return 4&w(e)&&e.target===nt?e.typeArguments[0]:void 0}function Pc(e){if(187!==e.kind){if(xa(e)){var t=qc(e);if(t){t=t.thisParameter;if(t)return z(t)}}t=mh.isInJavaScriptFile(e);if(Z||t){var n=151!==e.kind&&153!==e.kind&&154!==e.kind||178!==e.parent.kind?186===e.kind&&261===e.parent.kind?e.parent.parent:void 0:e.parent;if(n){for(var o=Kc(n),r=n,i=o;i;){var s=lc(i,function(e){return 131072&e.flags?mh.forEach(e.types,Rc):Rc(e)});if(s)return V(s,zc(n));if(261!==r.parent.kind)break;i=Kc(r=r.parent.parent)}return o?ml(o):Rd(n)}o=e.parent;if(194===o.kind&&58===o.operatorToken.kind){e=o.left;if(179===e.kind||180===e.kind){e=e.expression;if(t&&mh.isIdentifier(e)){t=mh.getSourceFileOfNode(o);if(t.commonJsModuleIndicator&&Ml(e)===t.symbol)return}return Rd(e)}}}}}function Lc(e){var t=e.parent;if(xa(t)){var n=mh.getImmediatelyInvokedFunctionExpression(t);if(n&&n.arguments){var o=mh.indexOf(t.parameters,e);if(e.dotDotDotToken){for(var r=[],i=o;i<n.arguments.length;i++)r.push(cl(Se(n.arguments[i])));return r.length?Ls(Y(r)):void 0}var s=j(n),a=s.resolvedSignature,l=(s.resolvedSignature=Ct,o<n.arguments.length?cl(Se(n.arguments[o])):e.initializer?void 0:re);return s.resolvedSignature=a,l}s=qc(t);if(s)return a=mh.hasRestParameter(t),l=t.parameters.length-(a?1:0),o=mh.indexOf(t.parameters,e),void 0===mh.getThisParameter(t)||s.thisParameter||(mh.Debug.assert(0!==o),--o),o<l?ad(s,o):a&&o===t.parameters.length-1&&tl(s,t.parameters.length-1)?z(mh.lastOrUndefined(s.parameters)):void 0}}function Mc(e){for(;e.parent&&!mh.isFunctionLike(e.parent);){if(146===e.parent.kind&&e.parent.initializer===e)return 1;e=e.parent}}function Fc(e){return 152===e.kind||mh.getEffectiveReturnTypeNode(e)||Up(e)?Te(Gi(e)):!(e=Yc(e))||!e.resolvedReturnType&&0<=lr(e,3)?void 0:Te(e)}function Uc(e,t){var n=Ku(e),n=mh.indexOf(n,t);if(0<=n)return ad(j(e).resolvedSignature===Bt?Bt:td(e),n)}function Hc(e,t){return lc(e,function(e){e=229376&e.flags?X(e,t):void 0;return e?z(e):void 0})}function Vc(e,t){return lc(e,function(e){return Ri(e,t)})}function Wc(e){var t=Kc(e.parent);if(t){if(!mh.hasDynamicName(e)){var n=Hc(t,fe(e).escapedName);if(n)return n}return Qc(e.name)&&Vc(t,1)||Vc(t,0)}}function Gc(e,t){return e&&(Hc(e,""+t)||Vc(e,1)||Pp(e,void 0,!1,!1,!1))}function Kc(e){e=jc(e);return e&&G(e)}function jc(e){if(!lg(e)){if(e.contextualType)return e.contextualType;var t=e.parent;switch(t.kind){case 226:case 146:case 149:case 148:case 176:var n=e.parent;if(e===n.initializer){var o=mh.getEffectiveTypeAnnotationNode(n);if(o)return q(o);if(146===n.kind){o=Lc(n);if(o)return o}if(mh.isBindingPattern(n.name))return vr(n.name,!0,!1);if(mh.isBindingPattern(n.parent)){o=n.parent.parent,n=n.propertyName||n.name;if(176!==o.kind){o=mh.getEffectiveTypeAnnotationNode(o);if(o&&!mh.isBindingPattern(n)){n=mh.getTextOfPropertyName(n);if(n)return dr(q(o),n)}}}}return;case 187:case 219:o=mh.getContainingFunction(e);if(o){n=mh.getFunctionFlags(o);if(!(1&n))return o=Fc(o),2&n?o&&tp(o):o}return;case 197:var r=t;if(s=mh.getContainingFunction(r)){var i=mh.getFunctionFlags(s),s=Fc(s);if(s)return r.asteriskToken?s:Fp(s,0!=(2&i))}return;case 181:case 182:return Uc(t,e);case 184:case 202:return q(t.type);case 194:var r=e,a=r.parent,s=a.operatorToken.kind;if(!mh.isAssignmentOperator(s))return 54===s?(i=jc(a))||r!==a.right?i:Hd(a.left,!0):53!==s&&26!==s||r!==a.right?void 0:jc(a);if(r!==a.right)return;switch(mh.getSpecialPropertyAssignmentKind(a)){case 0:break;case 5:if(!a.left.symbol)break;case 1:case 2:case 3:case 4:return}return Hd(a.left);case 261:case 262:return Wc(t);case 263:return Kc(t.parent);case 177:var l=t;return Gc(Kc(l),mh.indexOfNode(l.elements,e));case 195:return l=e.parent,e===l.whenTrue||e===l.whenFalse?jc(l):void 0;case 205:mh.Debug.assert(196===t.parent.kind);var c=t.parent;return 183===c.parent.kind?Uc(c.parent,e):void 0;case 185:c=mh.isInJavaScriptFile(t)?mh.getJSDocTypeTag(t):void 0;return c?q(c.typeExpression.type):jc(t);case 256:var u=t,d=jc(mh.isJsxAttributeLike(u.parent)?u.parent.parent:u.parent.openingElement.attributes);return d&&!D(d)?mh.isJsxAttribute(u.parent)?Hc(d,u.parent.name.escapedText):249===u.parent.kind?(u=du())&&""!==u?Hc(d,u):K:d:void 0;case 253:case 255:return d=jc((u=t).parent),mh.isJsxAttribute(u)?!d||D(d)?void 0:Hc(d,u.name.escapedText):d;case 251:case 250:return _u(t)}}}function zc(e){return(e=mh.findAncestor(e,function(e){return!!e.contextualMapper}))?e.contextualMapper:W}function Xc(e,t){e=wi(e,0);if(1===e.length){e=e[0];if(!function(e,t){for(var n=0;n<t.parameters.length;n++){var o=t.parameters[n];if(o.initializer||o.questionToken||o.dotDotDotToken||Fi(o))break}return t.parameters.length&&mh.parameterIsThisKeyword(t.parameters[0])&&n--,(e.hasRestParameter?Number.MAX_VALUE:e.parameters.length)<n}(e,t))return e}}function $c(e){return 186===e.kind||187===e.kind}function Yc(e){return $c(e)||mh.isObjectLiteralMethod(e)?qc(e):void 0}function qc(e){mh.Debug.assert(151!==e.kind||mh.isObjectLiteralMethod(e));t=e;var t=(mh.isObjectLiteralMethod(t)?function(e){if(mh.Debug.assert(mh.isObjectLiteralMethod(e)),!lg(e))return Wc(e)}:Kc)(t);if(t){if(!(65536&t.flags))return Xc(t,e);for(var n,o,r=0,i=t.types;r<i.length;r++){var s=Xc(i[r],e);if(s)if(n){if(!el(n[0],s,!1,!0,!0,Ia))return;n.push(s)}else n=[s]}return n&&((o=li(n[0])).resolvedReturnType=void 0,o.unionSignatures=n),o}}function Jc(e){return 176===e.kind&&e.initializer||194===e.kind&&58===e.operatorToken.kind}function Qc(e){switch(e.kind){case 144:return Ed(eu(e),84);case 71:return Zc(e.escapedText);case 8:case 9:return Zc(e.text);default:return!1}}function Zc(e){return(+e).toString()===e}function eu(e){var t=j(e.expression);return t.resolvedType||(t.resolvedType=Se(e.expression),6144&t.resolvedType.flags||!Ed(t.resolvedType,262774)&&!Ee(t.resolvedType,Y([_e,ae,Oe]))?me(e,mh.Diagnostics.A_computed_property_name_must_be_of_type_string_number_symbol_or_any):Ou(e.expression,t.resolvedType,!0)),t.resolvedType}function tu(e,t,n,o){for(var r=[],i=0;i<n.length;i++)0!==o&&!Qc(e[i+t].name)||r.push(z(n[i]));return Zi(r.length?Y(r,!0):De,!1)}function nu(n,e){var o=mh.isAssignmentTarget(n);!function(e,t){for(var n=mh.createUnderscoreEscapedMap(),o=0,r=e.properties;o<r.length;o++){var i=r[o];if(263!==i.kind){var s=i.name;if(144===s.kind&&oh(s),262===i.kind&&!t&&i.objectAssignmentInitializer)return Be(i.equalsToken,mh.Diagnostics.can_only_be_used_in_an_object_literal_property_inside_a_destructuring_assignment);if(i.modifiers)for(var a=0,l=i.modifiers;a<l.length;a++){var c=l[a];120===c.kind&&151===i.kind||Be(c,mh.Diagnostics._0_modifier_cannot_be_used_here,mh.getTextOfNode(c))}var u=void 0,d=(261===i.kind||262===i.kind?(ih(i.questionToken,mh.Diagnostics.An_object_member_cannot_be_declared_optional),8===s.kind&&_h(s),u=1):151===i.kind?u=1:153===i.kind?u=2:154===i.kind?u=4:mh.Debug.assertNever(i,"Unexpected syntax kind:"+i.kind),mh.getPropertyNameForPropertyNameNode(s));if(void 0!==d){var p=n.get(d);if(p)if(1===u&&1===p)Be(s,mh.Diagnostics.Duplicate_identifier_0,mh.getTextOfNode(s));else{if(!(6&u&&6&p))return Be(s,mh.Diagnostics.An_object_literal_cannot_have_property_and_accessor_with_the_same_name);if(6===p||u===p)return Be(s,mh.Diagnostics.An_object_literal_cannot_have_multiple_get_Slashset_accessors_with_the_same_name);n.set(d,u|p)}else n.set(d,u)}}}}(n,o);for(var t,r=mh.createSymbolTable(),i=[],s=N,a=0,l=Kc(n),c=l&&l.pattern&&(174===l.pattern.kind||178===l.pattern.kind),u=!l&&mh.isInJavaScriptFile(n),d=0,p=!1,g=!1,h=!1,_=mh.isInJavaScriptFile(n),m=0,f=0;f<n.properties.length;f++){var y=n.properties[f],k=y.symbol,b=void 0;if(261===y.kind||262===y.kind||mh.isObjectLiteralMethod(y)){var v,T,E=void 0,S=(_&&(E=mr(y)),void 0),S=261===y.kind?(144===y.name.kind&&224&(v=eu(y.name)).flags&&(b=mh.escapeLeadingUnderscores(""+v.value)),v=e,144===(t=y).name.kind&&eu(t.name),Fd(t.initializer,v)):151===y.kind?(t=e,ch(T=y),144===T.name.kind&&eu(T.name),Ud(T,md(T,t),t)):(mh.Debug.assert(262===y.kind),Fd(y.name,e)),C=(E&&(Ra(S,E,y),S=E),d|=S.flags,Kn(4|k.flags,b||k.escapedName));o?((261===y.kind&&Jc(y.initializer)||262===y.kind&&y.objectAssignmentInitializer)&&(C.flags|=16777216),!b&&mh.hasDynamicName(y)&&(p=!0)):!c||512&w(l)||((T=X(l,k.escapedName))?C.flags|=16777216&T.flags:ue.suppressExcessPropertyErrors||O(l,0)||me(y.name,mh.Diagnostics.Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1,ye(k),ke(l))),C.declarations=k.declarations,C.parent=k.parent,k.valueDeclaration&&(C.valueDeclaration=k.valueDeclaration),C.type=S,C.target=k,k=C}else{if(263===y.kind){if(de<2&&zg(y,2),0<i.length&&(s=ia(s,A(),n.symbol,a),i=[],r=mh.createSymbolTable(),h=g=!1,d=0),!ou(S=Se(y.expression)))return me(y,mh.Diagnostics.Spread_types_may_only_be_created_from_object_types),he;s=ia(s,S,n.symbol,a),m=f+1;continue}mh.Debug.assert(153===y.kind||154===y.kind),rg(y)}!b&&mh.hasDynamicName(y)?Qc(y.name)?h=!0:g=!0:r.set(k.escapedName,k),i.push(k)}if(c)for(var x=0,B=ve(l);x<B.length;x++)C=B[x],r.get(C.escapedName)||(16777216&C.flags||me(C.valueDeclaration||C.bindingElement,mh.Diagnostics.Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value),r.set(C.escapedName,C),i.push(C));return s!==N?s=0<i.length?ia(s,A(),n.symbol,a):s:A();function A(){var e=u?Dt:g?tu(n.properties,m,i,0):void 0,t=h&&!u?tu(n.properties,m,i,1):void 0,e=Uo(n.symbol,r,mh.emptyArray,mh.emptyArray,e,t),t=ue.suppressExcessPropertyErrors?0:1048576;return e.flags|=4194304|t|14680064&d,e.objectFlags|=128,p&&(e.objectFlags|=512),o&&(e.pattern=n),6144&e.flags||(a|=14680064&e.flags),e}}function ou(e){return 16777217&e.flags||7392&pl(e)&&ou(gl(e))||32768&e.flags&&!yi(e)||196608&e.flags&&!mh.forEach(e.types,function(e){return!ou(e)})}function ru(e){return!mh.stringContains(e,"-")}function iu(e){switch(e.kind){case 179:case 99:return!1;case 71:return mh.isIntrinsicJsxName(e.escapedText);default:mh.Debug.fail()}}function su(e,t,n){for(var o,r=e.attributes,i=mh.createSymbolTable(),s=N,a=[],l=!1,c=!1,u=du(),d=0,p=r.properties;d<p.length;d++){var g,h,_=p[d],m=_.symbol;mh.isJsxAttribute(_)?(g=_.initializer?Se(_.initializer,n):le,(h=Kn(33554436|m.flags,m.escapedName)).declarations=m.declarations,h.parent=m.parent,m.valueDeclaration&&(h.valueDeclaration=m.valueDeclaration),h.type=g,h.target=m,i.set(h.escapedName,h),a.push(h),_.name.escapedText===u&&(c=!0)):(mh.Debug.assert(255===_.kind),0<a.length&&(s=ia(s,C(r.symbol,i),e.symbol,0),a=[],i=mh.createSymbolTable()),D(g=Se(_.expression))&&(l=!0),ou(g)?s=ia(s,g,e.symbol,0):o=o?js([o,g]):g)}if(!l){s!==N&&(a=ve(s=0<a.length?ia(s,C(r.symbol,i),e.symbol,0):s));for(var i=mh.createSymbolTable(),f=0,y=a;f<y.length;f++){var k=y[f];t&&!t(k)||i.set(k.escapedName,k)}}var b=249===e.parent.kind?e.parent:void 0;if(b&&b.openingElement===e&&0<b.children.length){for(var v=[],T=0,E=b.children;T<E.length;T++){var S=E[T];10===S.kind?S.containsOnlyWhiteSpaces||v.push(_e):v.push(Se(S,n))}!l&&u&&""!==u&&(c&&me(r,mh.Diagnostics._0_are_specified_twice_The_attribute_named_0_will_be_overwritten,mh.unescapeLeadingUnderscores(u)),(b=Kn(33554436,u)).type=1===v.length?v[0]:Ls(Y(v,!1)),i.set(u,b))}return l?K:(b=C(r.symbol,i),o&&i.size?js([o,b]):o||b);function C(e,t){e=Uo(e,t,mh.emptyArray,mh.emptyArray,void 0,void 0);return e.flags|=37748736,e.objectFlags|=128,e}}function au(e){var t=gn.get(e);return void 0===t&&gn.set(e,t=Ds(hn,e)||he),t}function lu(e){var t=j(e);if(t.resolvedSymbol)return t.resolvedSymbol;var n,o=au(_n);if(o===he)return Q&&me(e,mh.Diagnostics.JSX_element_implicitly_has_type_any_because_no_interface_JSX_0_exists,mh.unescapeLeadingUnderscores(_n)),t.resolvedSymbol=ge;if(mh.isIdentifier(e.tagName))return(n=X(o,e.tagName.escapedText))?(t.jsxFlags|=1,t.resolvedSymbol=n):Pi(o,0)?(t.jsxFlags|=2,t.resolvedSymbol=o.symbol):(me(e,mh.Diagnostics.Property_0_does_not_exist_on_type_1,mh.idText(e.tagName),"JSX."+_n),t.resolvedSymbol=ge);throw mh.Debug.fail()}function cu(e){var t=ys(hn,1920,void 0),t=t&&Jn(t.exports,e,793064),n=t&&be(t),n=n&&ve(n);if(n)return 0===n.length?"":1===n.length?n[0].escapedName:void(1<n.length&&me(t.declarations[0],mh.Diagnostics.The_global_type_JSX_0_may_not_have_more_than_one_property,mh.unescapeLeadingUnderscores(e)))}function uu(){return dn||(dn=!0,on=cu(fn)),on}function du(){return pn||(pn=!0,rn=cu(yn)),rn}function pu(e){if(e){if(131072&e.flags){for(var t=[],n=0,o=e.types;n<o.length;n++){var r=o[n];t.push(G(r))}return js(t)}return G(e)}}function gu(e){mh.Debug.assert(iu(e.tagName));var t=j(e);return t.resolvedJsxElementAttributesType||(e=lu(e),1&t.jsxFlags?t.resolvedJsxElementAttributesType=z(e):2&t.jsxFlags?t.resolvedJsxElementAttributesType=es(e,0).type:t.resolvedJsxElementAttributesType=he)}function hu(e,t){var n,o=j(e),r=t?"resolvedJsxElementAllAttributesType":"resolvedJsxElementAttributesType";return o[r]||(n=kt=kt||Ds(hn,mn),o[r]=function t(n,o,e,r){if(65536&(e=void 0===e?Se(n.tagName):e).flags)return Y(e.types.map(function(e){return t(n,o,e,r)}),!0);if(2&e.flags)return K;if(32&e.flags){if((a=au(_n))!==he){var i=e.value;if(l=X(a,mh.escapeLeadingUnderscores(i)))return z(l);if(l=Pi(a,0))return l;me(n,mh.Diagnostics.Property_0_does_not_exist_on_type_1,i,"JSX."+_n)}return K}var s,a=function(e,t){if(mh.Debug.assert(!(65536&t.flags)),D(t))return K;var n=$(t,1);if(0===n.length&&0===(n=$(t,0)).length)return me(e.tagName,mh.Diagnostics.JSX_element_type_0_does_not_have_any_construct_or_call_signatures,mh.getTextOfNode(e.tagName)),he;for(var o=[],r=0,i=n;r<i.length;r++){var s,a,l=i[r];l.typeParameters?(s=mh.isInJavaScriptFile(e),a=Wi(void 0,l.typeParameters,0,s),o.push(Xi(l,a,s))):o.push(l)}return Y(mh.map(o,Te),!0)}(n,e),l=(o?function(e,t,n,o){if(mh.Debug.assert(!(65536&t.flags)),!o||!Ee(n,o)){var r=fu();if(r){Qu(e,t,n=[]);for(var i=void 0,s=void 0,a=0,l=n;a<l.length;a++){var c=l[a],u=Te(c),d=pu(u&&(0===c.parameters.length?N:z(c.parameters[0])));if(u&&Ee(u,r)){for(var p=!0,g=0,h=e.attributes.properties;g<h.length;g++){var _=h[g];if(mh.isJsxAttribute(_)&&ru(_.name.escapedText)&&!X(d,_.name.escapedText)){p=!1;break}}p&&(i=pi(i,d)),s=pi(s,d)}}return i=i||s,o=au(bn),i=o!==he?pi(o,i):i}}}:function(e,t,n,o){if(mh.Debug.assert(!(65536&t.flags)),(!o||!Ee(n,o))&&(n=fu())&&(o=Qu(e,t,void 0))!==xt&&(e=o&&Te(o),t=pu(t=e&&(0===o.parameters.length?N:z(o.parameters[0]))),e)&&Ee(e,n))return(o=au(bn))!==he?pi(o,t):t})(n,e,a,r);return l||(r&&Wa(a,r,En,n,mh.Diagnostics.JSX_element_type_0_is_not_a_constructor_function_for_JSX_elements),D(a)?a:void 0===(i=uu())?K:""===i?a:(e=dr(a,i))?D(e)||e===he?e:(l=e,(i=au(vn))!==he&&((s=Lr(i.symbol))?1===s.length&&(l=pi(is(i,[a]),l)):l=pi(e,i)),(s=au(bn))!==he?pi(s,l):l):N)}(e,t,void 0,n))}function _u(e){return iu(e.tagName)?gu(e):hu(e,!1)}function mu(){return bt=bt||Ds(hn,kn)}function fu(){var e;return vt||(e=mu())&&(vt=Y([e,ie])),vt}function yu(e){!function(e){for(var t=mh.createUnderscoreEscapedMap(),n=0,o=e.attributes.properties;n<o.length;n++){var r=o[n];if(255!==r.kind){var i=r.name;if(t.get(i.escapedText))return Be(i,mh.Diagnostics.JSX_elements_cannot_have_multiple_attributes_with_the_same_name);t.set(i.escapedText,!0);i=r.initializer;if(i&&256===i.kind&&!i.expression)return Be(r.initializer,mh.Diagnostics.JSX_attributes_must_only_be_assigned_a_non_empty_expression)}}}(e),t=e,0===(ue.jsx||0)&&me(t,mh.Diagnostics.Cannot_use_JSX_unless_the_jsx_flag_is_provided),void 0===mu()&&Q&&me(t,mh.Diagnostics.JSX_element_implicitly_has_type_any_because_the_global_type_JSX_Element_does_not_exist);var t=en&&2===ue.jsx?mh.Diagnostics.Cannot_find_name_0:void 0,n=Gn(),t=Zn(e.tagName,n,107455,t,n,!0),n=(t&&(t.isReferenced=!0,2097152&t.flags)&&!Ag(po(t))&&ho(t),e),o=iu(n.tagName)?gu(n):hu(n,!1),t=su(n,function(e){return ru(e.escapedName)||!!X(o,e.escapedName)});if(o===N&&(D(t)||0<t.properties.length))me(n,mh.Diagnostics.JSX_element_class_does_not_support_attributes_because_it_does_not_have_a_0_property,mh.unescapeLeadingUnderscores(uu()));else if(Ra(t,o,0<n.attributes.properties.length?n.attributes:n)&&!D(t)&&!D(o))for(var r=0,i=n.attributes.properties;r<i.length;r++){var s=i[r];if(mh.isJsxAttribute(s)&&!ku(o,s.name.escapedText,!0)){me(s,mh.Diagnostics.Property_0_does_not_exist_on_type_1,mh.idText(s.name),ke(o));break}}}function ku(e,t,n){if(32768&e.flags){var o=ki(e);if(o.stringIndexInfo||o.numberIndexInfo&&Zc(t)||vi(e,t)||n&&!ru(t))return!0}else if(196608&e.flags)for(var r=0,i=e.types;r<i.length;r++)if(ku(i[r],t,n))return!0;return!1}function bu(e){return e.valueDeclaration?mh.getCombinedNodeFlags(e.valueDeclaration):0}function vu(e){return 8192&e.flags||4&mh.getCheckFlags(e)}function Tu(e,t,n,o){var r=mh.getDeclarationModifierFlagsFromSymbol(o),i=179===e.kind||226===e.kind?e.name:e.right;if(256&mh.getCheckFlags(o))return me(i,mh.Diagnostics.Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1,ye(o),ke(n)),!1;if(97===t.kind){if(de<2&&Ya(o,function(e){e=e.valueDeclaration?e.valueDeclaration.kind:149;return 151!==e&&150!==e}))return me(i,mh.Diagnostics.Only_public_and_protected_methods_of_the_base_class_are_accessible_via_the_super_keyword),!1;if(128&r)return me(i,mh.Diagnostics.Abstract_method_0_in_class_1_cannot_be_accessed_via_super_expression,ye(o),ke(qa(o))),!1}return!(24&r&&(8&r?!pg(e,Xp(Do(o)))&&(me(i,mh.Diagnostics.Property_0_is_private_and_only_accessible_within_class_1,ye(o),ke(qa(o))),1):97!==t.kind&&((t=dg(e,function(e){var t,e=be(fe(e));return t=e,!Ya(o,function(e){return!!(16&mh.getDeclarationModifierFlagsFromSymbol(e))&&!wr(t,qa(e))})&&t?e:void 0}))?!(32&r)&&!(3&w(Nr(n=16384&n.flags&&n.isThisType?Ti(n):n))&&wr(n,t))&&(me(i,mh.Diagnostics.Property_0_is_protected_and_only_accessible_through_an_instance_of_class_1,ye(o),ke(t)),1):(me(i,mh.Diagnostics.Property_0_is_protected_and_only_accessible_within_class_1_and_its_subclasses,ye(o),ke(qa(o)||n)),1))))}function Eu(e){return Su(Se(e),e)}function Su(e,t){var n=6144&(pe?pl(e):e.flags);return n?(me(t,2048&n?4096&n?mh.Diagnostics.Object_is_possibly_null_or_undefined:mh.Diagnostics.Object_is_possibly_undefined:mh.Diagnostics.Object_is_possibly_null),14336&(t=ml(e)).flags?he:t):e}function Cu(e){return Bu(e,e.expression,e.name)}function xu(e){return Bu(e,e.left,e.right)}function Bu(e,t,n){var o=Eu(t);if(D(o)||o===Le)return o;var r=G(vl(o));if(r===he||16384&o.flags&&D(r))return r;var i=X(r,n.escapedText);if(!i){var s=O(r,0);if(s&&s.type)return s.isReadonly&&(mh.isAssignmentTarget(e)||mh.isDeleteTarget(e))&&me(e,mh.Diagnostics.Index_signature_in_type_0_only_permits_reading,ke(r)),s.type;else{if(n.escapedText&&!no(e)){var a=n;var s=16384&o.flags&&o.isThisType?r:o;if(65536&s.flags&&!(8190&s.flags))for(var l=0,c=s.types;l<c.length;l++){var u=c[l];if(!X(u,a.escapedText)){d=mh.chainDiagnosticMessages(d,mh.Diagnostics.Property_0_does_not_exist_on_type_1,mh.declarationNameToString(a),ke(u));break}}var o=Au(a,s),d=void 0!==o?mh.chainDiagnosticMessages(d,mh.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2,mh.declarationNameToString(a),ke(s),o):mh.chainDiagnosticMessages(d,mh.Diagnostics.Property_0_does_not_exist_on_type_1,mh.declarationNameToString(a),ke(s));en.add(mh.createDiagnosticForNodeFromMessageChain(a,d))}return he}}o=e,s=n,(p=(g=i).valueDeclaration)&&(!mh.findAncestor(o,function(e){switch(e.kind){case 149:return!0;case 261:return!1;default:return!mh.isPartOfExpression(e)&&"quit"}})||Qn(p,s)||function(e){for(var t=z(e.parent);;){if(!(t=function(e){e=Kr(e);if(0!==e.length)return mh.Debug.assert(1===e.length),e[0]}(t)))return;var n=vi(t,e.escapedName);if(n&&n.valueDeclaration)return 1}}(g)?229!==p.kind||159===o.parent.kind||mh.isInAmbientContext(p)||Qn(p,s)||me(s,mh.Diagnostics.Class_0_used_before_its_declaration,mh.idText(s)):me(s,mh.Diagnostics.Block_scoped_variable_0_used_before_its_declaration,mh.idText(s))),Nu(i,e,99===t.kind),Tu(e,t,r,j(e).resolvedSymbol=i);var p,g=Cc(i,e),o=mh.getAssignmentTargetKind(e);return o&&(kd(e,i)||bd(e))?(me(n,mh.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,mh.idText(n)),he):179===e.kind&&1!==o&&(98311&i.flags||8192&i.flags&&65536&g.flags)?(p=bc(e,g),o?ll(p):p):g}function Au(e,t){e=Du(mh.idText(e),ve(t),107455);return e&&mh.symbolName(e)}function Iu(e,t,n){e=eo(e,t,n,void 0,t,!1,function(e,t,n){return Jn(e,t,n)||Du(mh.unescapeLeadingUnderscores(t),mh.arrayFrom(e.values()),n)});return e&&mh.symbolName(e)}function Du(e,t,n){var o=.4*e.length,r=Math.min(3,.34*e.length),i=Number.MAX_VALUE,s=void 0,a=!1;if(!(30<e.length)){e=e.toLowerCase();for(var l=0,c=t;l<c.length;l++){var u=c[l],d=mh.symbolName(u);if(u.flags&n&&d&&Math.abs(d.length-e.length)<r){if((d=d.toLowerCase())===e)return u;a||d.length<3||e.length<3||"eval"===d||"intl"===d||"undefined"===d||"map"===d||"nan"===d||"set"===d||o<(d=mh.levenshtein(e,d))||(d<3?(a=!0,s=u):d<i&&(i=d,s=u))}}return s}}function Nu(e,t,n){if(e&&T&&106500&e.flags&&e.valueDeclaration&&mh.hasModifier(e.valueDeclaration,8)&&(!t||!mh.isWriteOnlyAccess(t))){if(n){n=mh.findAncestor(t,mh.isFunctionLikeDeclaration);if(n&&n.symbol===e)return}1&mh.getCheckFlags(e)?p(e).target.isReferenced=!0:e.isReferenced=!0}}function wu(e){var t,n,o=Eu(e.expression),r=e.argumentExpression;return r?(n=function(e){var t,n=mh.skipParentheses(e);if(71===n.kind){var o=Ml(n);if(3&o.flags)for(var r=e,i=e.parent;i;){if(215===i.kind&&r===i.statement&&function(e){if(227===(e=e.initializer).kind){var t=e.declarations[0];if(t&&!mh.isBindingPattern(t.name))return fe(t)}else if(71===e.kind)return Ml(e)}(i)===o&&Pi(t=Hd(i.expression),1)&&!Pi(t,0))return 1;i=(r=i).parent}}}(r)?ae:Se(r),o===he||o===Le?o:Sd(o)&&9!==r.kind?(me(r,mh.Diagnostics.A_const_enum_member_can_only_be_accessed_using_a_string_literal),he):qd(Zs(o,n,e),e)):(r=mh.getSourceFileOfNode(e),182===e.parent.kind&&e.parent.expression===e?gh(r,t=mh.skipTrivia(r.text,e.expression.end),e.end-t,mh.Diagnostics.new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead):gh(r,t=e.end-"]".length,e.end-t,mh.Diagnostics.Expression_expected),he)}function Ou(e,t,n){return t!==he&&mh.isWellKnownSymbolSyntactically(e)&&(0==(512&t.flags)?(n&&me(e,mh.Diagnostics.A_computed_property_name_of_the_form_0_must_be_of_type_symbol,mh.getTextOfNode(e)),0):(e=Ml(t=e.expression))?(st=st||fs("Symbol",!0),st&&(e===st||(n&&me(t,mh.Diagnostics.Symbol_reference_does_not_refer_to_the_global_Symbol_constructor_object),0))):void 0)}function Ru(e){return mh.isCallOrNewExpression(e)}function Pu(e){return Ru(e)&&mh.forEach(e.typeArguments,Ce),183===e.kind?Se(e.template):147!==e.kind&&mh.forEach(e.arguments,function(e){Se(e)}),Ct}function Lu(e){return Pu(e),xt}function Mu(e){for(var t=0;t<e.length;t++){var n=e[t];if(n&&198===n.kind)return t}return-1}function Fu(e,t,n,o){void 0===o&&(o=!1);var r=-1;if(mh.isJsxOpeningLikeElement(e))return 1;if(183===e.kind)var i=e,s=t.length,a=void 0,i=196===i.template.kind?(l=i.template,l=mh.lastOrUndefined(l.templateSpans),mh.Debug.assert(void 0!==l),mh.nodeIsMissing(l.literal)||!!l.literal.isUnterminated):(l=i.template,mh.Debug.assert(13===l.kind),!!l.isUnterminated);else if(147===e.kind)s=ju(e,a=void 0,n);else{var l=e;if(!l.arguments)return mh.Debug.assert(182===l.kind),0===n.minArgumentCount;s=o?t.length+1:t.length,i=l.arguments.end===l.end,a=l.typeArguments,r=Mu(t)}e=mh.length(n.typeParameters),o=Vi(n.typeParameters);return(!a||a.length>=o&&a.length<=e)&&(0<=r?tl(n,r)||r>=n.minArgumentCount:!n.hasRestParameter&&s>n.parameters.length?void 0:(l=s>=n.minArgumentCount,i||l))}function Uu(e){if(32768&e.flags){e=ki(e);if(1===e.callSignatures.length&&0===e.constructSignatures.length&&0===e.properties.length&&!e.stringIndexInfo&&!e.numberIndexInfo)return e.callSignatures[0]}}function Hu(e,t,n,o){var r=Cl(e,1,o);return Sl(t,e,function(e,t){Nl(r.inferences,V(e,n||W),t)}),n||Nl(r.inferences,Te(t),Te(e),8),Xi(e,Ll(r),mh.isInJavaScriptFile(t.declaration))}function Vu(e,t,n,o){for(var r=mh.isInJavaScriptFile(e.declaration),i=e.typeParameters,s=Wi(mh.map(t,q),i,Vi(i),r),a=0;a<t.length;a++){mh.Debug.assert(void 0!==i[a],"Should not call checkTypeArguments with too many type arguments");var l=Ti(i[a]);if(l){var c=n&&o&&mh.chainDiagnosticMessages(void 0,mh.Diagnostics.Type_0_does_not_satisfy_the_constraint_1),u=o||mh.Diagnostics.Type_0_does_not_satisfy_the_constraint_1,d=d||ma(i,s),p=s[a];if(!Ra(p,ii(V(l,d),p),n?t[a]:void 0,u,c))return!1}}return s}function Wu(e,t,n,o,r,i){if(mh.isJsxOpeningLikeElement(e)){var s=o;if((c=e).attributes.end===c.end)return 1;for(var a=mh.Diagnostics.Argument_of_type_0_is_not_assignable_to_parameter_of_type_1,l=ad(n,0),c=Od(c.attributes,l,void 0),u=0,d=ve(c);u<d.length;u++){var p=d[u];if(!X(l,p.escapedName)&&ru(p.escapedName))return}return Wa(c,l,s,void 0,a)}c=ji(n);if(c&&c!==Re&&182!==e.kind){var s=Gu(e),a=s?Se(s):Re,g=i?s||e:void 0,h=mh.Diagnostics.The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1;if(!Wa(a,ji(n),o,g,h))return}for(var _=mh.Diagnostics.Argument_of_type_0_is_not_assignable_to_parameter_of_type_1,m=ju(e,t,n),f=0;f<m;f++){var y=$u(e,t,f);if(void 0===y||200!==y.kind){var k=ad(n,f),b=Xu(e,f)||Od(y,k,r&&r[f]?W:void 0);if(!Wa(r?kl(b):b,k,o,g=i?(b=f,k=y,147===(y=e).kind?y.expression:0===b&&183===y.kind?y.template:k):void 0,_))return}}return 1}function Gu(e){return 181===e.kind&&(179===(e=e.expression).kind||180===e.kind)?e.expression:void 0}function Ku(e){var t,n;return 183===e.kind?(t=e.template,n=[void 0],196===t.kind&&mh.forEach(t.templateSpans,function(e){n.push(e.expression)}),n):147===e.kind?void 0:mh.isJsxOpeningLikeElement(e)?0<e.attributes.properties.length?[e.attributes]:mh.emptyArray:e.arguments||mh.emptyArray}function ju(e,t,n){if(147!==e.kind)return t.length;switch(e.parent.kind){case 229:case 199:return 1;case 149:return 2;case 151:case 153:case 154:return 0!==de&&3<=n.parameters.length?3:2;case 146:return 3}}function zu(e,t){{if(0===t)return 229===(r=e.parent).kind||146===r.kind&&152===(r=r.parent).kind?z(fe(r)):149===r.kind||151===r.kind||153===r.kind||154===r.kind?(i=fe((r=r).parent),(mh.hasModifier(r,32)?z:be)(i)):(mh.Debug.fail("Unsupported decorator target."),he);if(1!==t)return 2===t?229===(i=e.parent).kind?(mh.Debug.fail("Class decorators should not have a third synthetic argument."),he):146===i.kind?ae:149===i.kind?(mh.Debug.fail("Property decorators should not have a third synthetic argument."),he):151===i.kind||153===i.kind||154===i.kind?ws(mg(i)):(mh.Debug.fail("Unsupported decorator target."),he):(mh.Debug.fail("Decorators should not have a fourth synthetic argument."),he);if(229===(r=e.parent).kind)mh.Debug.fail("Class decorators should not have a second synthetic argument.");else{if(146===r.kind&&152===(r=r.parent).kind)return K;if(149===r.kind||151===r.kind||153===r.kind||154===r.kind){var n=r;switch(n.name.kind){case 71:return da(mh.idText(n.name));case 8:case 9:return da(n.name.text);case 144:var o=eu(n.name);return Ed(o,512)?o:_e;default:return mh.Debug.fail("Unsupported property name."),he}}mh.Debug.fail("Unsupported decorator target.")}return he}var r,i}function Xu(e,t){return 147===e.kind?zu(e,t):0===t&&183===e.kind?(yt=yt||ks("TemplateStringsArray",0,!0))||N:void 0}function $u(e,t,n){if(147!==e.kind&&(0!==n||183!==e.kind))return t[n]}function Yu(c,e,t,n){var u,o,r,i,s,a=183===c.kind,l=147===c.kind,d=mh.isJsxOpeningLikeElement(c),p=(a||l||d||(u=c.typeArguments,97!==c.expression.kind&&mh.forEach(u,Ce)),t||[]),g=e,h=p,_=0,L=-1;mh.Debug.assert(!h.length);for(var m=0,f=g;m<f.length;m++){var y=f[m],k=y.declaration&&fe(y.declaration),b=y.declaration&&y.declaration.parent;r&&k!==r?(i=_=h.length,o=b):o&&b===o?i++:(o=b,i=_),r=k,y.hasLiteralTypes?(s=++L,_++):s=i,h.splice(s,0,y)}if(!p.length)return en.add(mh.createDiagnosticForNode(c,mh.Diagnostics.Call_target_does_not_contain_any_signatures)),Lu(c);var v,T,E,S=Ku(c),C=1===p.length&&!p[0].typeParameters,x=0;if(!l&&!C)for(var B=a?1:0;B<S.length;B++)Sa(S[B])&&((v=v||new Array(S.length))[B]=!0,x++);g=t&&181===c.kind&&c.arguments.hasTrailingComma;if(O=(O=1<p.length?H(p,Tn,g):O)||H(p,En,g))return O;if(T){if(d)return T;Wu(c,S,T,En,void 0,!0)}else if(E)Vu(E,c.typeArguments,!0,n);else if(u&&mh.every(e,function(e){return mh.length(e.typeParameters)!==u.length})){for(var A=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY,D=0,M=e;D<M.length;D++)var N=M[D],A=Math.min(A,Vi(N.typeParameters)),I=Math.max(I,mh.length(N.typeParameters));var F=A<I?A+"-"+I:A;en.add(mh.createDiagnosticForNode(c,mh.Diagnostics.Expected_0_type_arguments_but_got_1,F,u.length))}else if(S){A=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY;for(var w=0,U=e;w<U.length;w++)N=U[w],A=Math.min(A,N.minArgumentCount),I=Math.max(I,N.parameters.length);l=mh.some(e,function(e){return e.hasRestParameter}),a=-1<Mu(S),t=S.length-(a?1:0),g=l&&a?mh.Diagnostics.Expected_at_least_0_arguments_but_got_a_minimum_of_1:l?mh.Diagnostics.Expected_at_least_0_arguments_but_got_1:a?mh.Diagnostics.Expected_0_arguments_but_got_a_minimum_of_1:mh.Diagnostics.Expected_0_arguments_but_got_1;en.add(mh.createDiagnosticForNode(c,g,F=!l&&A<I?A+"-"+I:A,t))}else n&&en.add(mh.createDiagnosticForNode(c,n));if(ce)return Lu(c);mh.Debug.assert(0<p.length);var O=function(e,t){for(var n=-1,o=-1,r=0;r<e.length;r++){var i=e[r];if(i.hasRestParameter||i.parameters.length>=t)return r;i.parameters.length>o&&(o=i.parameters.length,n=r)}return n}(p,void 0===ee?S.length:ee),d=p[O],R=d.typeParameters;if(R&&Ru(c)&&c.typeArguments){for(var P=c.typeArguments.map(mg);P.length>R.length;)P.pop();for(;P.length<R.length;)P.push(Pl(mh.isInJavaScriptFile(c)));e=$i(d,P);return p[O]=e}return d;function H(e,t,n){if(void 0===n&&(n=!1),E=T=void 0,C)return i=e[0],Fu(c,S,i,n)?Wu(c,S,i,t,v,!1)?i:void(T=i):void 0;for(var o=0;o<e.length;o++){var r=e[o];if(Fu(c,S,r,n))for(var i=void 0,s=r.typeParameters?Cl(r,mh.isInJavaScriptFile(c)?4:0):void 0;;){if((i=r).typeParameters){var a=void 0;if(u){var l=Vu(i,u,!1);if(!l){E=r;break}a=l}else a=function(e,t,n,o,r){for(var i=0,s=r.inferences;i<s.length;i++){var a=s[i];a.isFixed||(a.inferredType=void 0)}147!==e.kind&&(l=jc(e))&&(c=(c=Uu(l=V(l,(l=zc(e))&&l.signature?Cl(l.signature,2|l.flags,l.compareTypes,l.inferences):l)))&&c.typeParameters?qi(Xi(c,c.typeParameters,mh.isInJavaScriptFile(e))):l,l=Te(t),Nl(r.inferences,c,l,8));var l,c=ji(t);c&&(l=(l=Gu(e))?Se(l):Re,Nl(r.inferences,l,c));for(var u,d,p,g=ju(e,n,t),h=0;h<g;h++)void 0!==(d=$u(e,n,h))&&200===d.kind||(p=ad(t,h),void 0===(u=Xu(e,h))&&(u=Od(d,p,o&&void 0!==o[h]?W:r)),Nl(r.inferences,u,p));if(o)for(h=0;h<g;h++)!1===o[h]&&(d=n[h],p=ad(t,h),Nl(r.inferences,Od(d,p,r),p));return Ll(r)}(c,i,S,v,s);i=Xi(i,a,mh.isInJavaScriptFile(i.declaration))}if(!Wu(c,S,i,t,v,!1)){T=i;break}if(0===x)return e[o]=i;0<--x?v[mh.indexOf(v,!0)]=!1:v=void 0}}}}function qu(e,t,n,o){return D(e)||D(t)&&16384&e.flags||!n&&!o&&!(65536&e.flags)&&Ee(e,Ye)}function Ju(e){switch(e.parent.kind){case 229:case 199:return mh.Diagnostics.Unable_to_resolve_signature_of_class_decorator_when_called_as_an_expression;case 146:return mh.Diagnostics.Unable_to_resolve_signature_of_parameter_decorator_when_called_as_an_expression;case 149:return mh.Diagnostics.Unable_to_resolve_signature_of_property_decorator_when_called_as_an_expression;case 151:case 153:case 154:return mh.Diagnostics.Unable_to_resolve_signature_of_method_decorator_when_called_as_an_expression}}function Qu(e,t,n){return mh.Debug.assert(!(65536&t.flags)),Zu(e,t,n)}function Zu(e,t,n){if(65536&t.flags){for(var o=void 0,r=0,i=t.types;r<i.length;r++)var s=i[r],o=o||Zu(e,s,n);return o}t=t&&$(t,0);if(t&&0<t.length)return Yu(e,t,n)}function ed(e,t){switch(e.kind){case 181:var n=e,o=t;if(97!==n.expression.kind)return(_=Eu(n.expression))===Le?At:(r=G(_))===he?Lu(n):(g=$(r,0),p=$(r,1),qu(_,r,g.length,p.length)?(_!==he&&n.typeArguments&&me(n,mh.Diagnostics.Untyped_function_calls_may_not_accept_type_arguments),Pu(n)):g.length?Yu(n,g,o):(p.length?me(n,mh.Diagnostics.Value_of_type_0_is_not_callable_Did_you_mean_to_include_new,ke(_)):me(n,mh.Diagnostics.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,ke(r)),Lu(n)));if((_=Oc(n.expression))!==he){var r=mh.getClassExtendsHeritageClauseElement(mh.getContainingClass(n));if(r)return Yu(n,Wr(_,r.typeArguments,r),o)}return Pu(n);case 182:return g=t,(p=e).arguments&&de<1&&0<=(m=Mu(p.arguments))&&me(p.arguments[m],mh.Diagnostics.Spread_operator_in_new_expressions_is_only_available_when_targeting_ECMAScript_5_and_higher),(m=Eu(p.expression))===Le?At:(m=G(m))===he?Lu(p):D(m)?(p.typeArguments&&me(p,mh.Diagnostics.Untyped_function_calls_may_not_accept_type_arguments),Pu(p)):(_=$(m,1)).length?function(e,t){if(!t||!t.declaration)return 1;var n=t.declaration,o=mh.getSelectedModifierFlags(n,24);if(!o)return 1;var t=Xp(n.parent.symbol),r=be(n.parent.symbol);if(pg(e,t))return 1;t=mh.getContainingClass(e);if(t)for(var i=Kr(mg(t));i.length;){var s=i[0];if(16&o&&s.symbol===n.parent.symbol)return 1;i=Kr(s)}return 8&o&&me(e,mh.Diagnostics.Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration,ke(r)),16&o&&me(e,mh.Diagnostics.Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration,ke(r)),0}(p,_[0])?(h=m.symbol&&Xp(m.symbol))&&mh.hasModifier(h,128)?(me(p,mh.Diagnostics.Cannot_create_an_instance_of_the_abstract_class_0,mh.declarationNameToString(mh.getNameOfDeclaration(h))),Lu(p)):Yu(p,_,g):Lu(p):(h=$(m,0)).length?(nd((_=Yu(p,h,g)).declaration)||Te(_)===Re||me(p,mh.Diagnostics.Only_a_void_function_can_be_called_with_the_new_keyword),ji(_)===Re&&me(p,mh.Diagnostics.A_function_that_is_called_with_the_new_keyword_cannot_have_a_this_type_that_is_void),_):(me(p,mh.Diagnostics.Cannot_use_new_with_an_expression_whose_type_lacks_a_call_or_construct_signature),Lu(p));case 183:return r=t,n=Se((o=e).tag),(m=G(n))===he?Lu(o):(h=$(m,0),d=$(m,1),qu(n,m,h.length,d.length)?Pu(o):h.length?Yu(o,h,r):(me(o,mh.Diagnostics.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,ke(m)),Lu(o)));case 147:return d=t,c=Se((i=e).expression),(u=G(c))===he?Lu(i):(s=$(u,0),l=$(u,1),qu(c,u,s.length,l.length)?Pu(i):(a=i,s.length&&mh.every(s,function(e){return 0===e.minArgumentCount&&!e.hasRestParameter&&e.parameters.length<ju(a,void 0,e)})?(c=mh.getTextOfNode(i.expression,!1),me(i,mh.Diagnostics._0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0,c),Lu(i)):(l=Ju(i),s.length?Yu(i,s,d,l):(c=mh.chainDiagnosticMessages(c=void 0,mh.Diagnostics.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,ke(u)),c=mh.chainDiagnosticMessages(c,l),en.add(mh.createDiagnosticForNodeFromMessageChain(i,c)),Lu(i)))));case 251:case 250:return Zu(e,Se(e.tagName),t)||xt}var i,s,a,l,c,u,d,p,g,h,_,m;mh.Debug.assertNever(e,"Branch in 'resolveSignature' should be unreachable.")}function td(e,t){var n=j(e),o=n.resolvedSignature;if(o&&o!==Bt&&!t)return o;n.resolvedSignature=Bt;e=ed(e,t);return n.resolvedSignature=wt===Ot?e:o,e}function nd(e){return e&&mh.isInJavaScriptFile(e)&&(mh.getJSDocClassTag(e)||(e=mh.isFunctionDeclaration(e)||mh.isFunctionExpression(e)?fe(e):mh.isVariableDeclaration(e)&&e.initializer&&mh.isFunctionExpression(e.initializer)?fe(e.initializer):void 0)&&void 0!==e.members)}function od(e){var t=p(e);return t.inferredClassType||(t.inferredClassType=Uo(e,e.members||R,mh.emptyArray,mh.emptyArray,void 0,void 0)),t.inferredClassType}function rd(e){return e.symbol&&16&w(e)&&p(e.symbol).inferredClassType===e}function id(e,t,n,o){n=kl(ll(Se(n,o))),Ce(t),o=q(t);return ce&&o!==he&&!Oa(o,vl(n))&&Pa(n,o,e,mh.Diagnostics.Type_0_cannot_be_converted_to_type_1),o}function sd(e){var t=z(e);if(pe){e=e.valueDeclaration;if(e&&e.initializer)return _l(t,2048)}return t}function ad(e,t){return e.hasRestParameter?t<e.parameters.length-1?sd(e.parameters[t]):zi(e):t<e.parameters.length?sd(e.parameters[t]):K}function ld(e){return 0<e.parameters.length?ad(e,0):Pe}function cd(e,t){var n=p(e);n.type||(n.type=t,71!==(t=e.valueDeclaration).name.kind&&(n.type===N&&(n.type=vr(t.name)),function e(t){for(var n=0,o=t.elements;n<o.length;n++){var r=o[n];mh.isOmittedExpression(r)||(71===r.name.kind?p(fe(r)).type=_r(r):e(r.name))}}(t.name)))}function ud(e){var t=vs(!0);return t!==Ue?is(t,[e=rp(e)||N]):N}function dd(e,t){t=ud(t);return t===N?(me(e,mh.isImportCall(e)?mh.Diagnostics.A_dynamic_import_call_returns_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option:mh.Diagnostics.An_async_function_or_method_must_return_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option),he):(Ts(!0)||me(e,mh.isImportCall(e)?mh.Diagnostics.A_dynamic_import_call_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option:mh.Diagnostics.An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option),t)}function pd(e,t){var n=Yc(e);if(!e.body)return he;var o,r,i,s,a=mh.getFunctionFlags(e);if(207!==e.body.kind)o=Rd(e.body,t),2&a&&(o=op(o,e,mh.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member));else{var l=void 0;if(1&a){if(!(l=mh.concatenate((c=e,r=t,i=[],s=mh.getFunctionFlags(c),mh.forEachYieldExpression(c.body,function(e){var t,n=e.expression;n&&(t=Rd(n,r),e.asteriskToken&&(t=Rp(t,e.expression,!1,0!=(2&s))),2&s&&(t=op(t,n,e.asteriskToken?mh.Diagnostics.Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:mh.Diagnostics.Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)),mh.pushIfUnique(i,t))}),i),hd(e,t)))||0===l.length)return c=(2&a?Os:Ps)(K),Q&&me(e.asteriskToken,mh.Diagnostics.Generator_implicitly_has_type_0_because_it_does_not_yield_any_values_Consider_supplying_a_return_type,ke(c)),c}else{if(!(l=hd(e,t)))return 2&a?dd(e,Pe):Pe;if(0===l.length)return 2&a?dd(e,Re):Re}o=Y(l,!0),1&a&&(o=(2&a?Os:Ps)(o))}n||El(e,o);var c=vl(o=!sl(o)||n&&Md(n===Gi(e)?o:Te(n))?o:cl(o));return 2==(3&a)?dd(e,c):c}function gd(e){return!(!(128&e.flags)||(e=mh.lastOrUndefined(e.body.statements))&&221===e.kind&&function(e){if(e.possiblyExhaustive){var t,n=Hd(e.expression);if(al(n))return(e=rc(e)).length&&(n=lc(n,ua),t=e,65536&n.flags?!mh.forEach(n.types,function(e){return!mh.contains(t,e)}):mh.contains(t,n))}}(e))}function hd(t,n){var o=mh.getFunctionFlags(t),r=[],i=gd(t),s=!1;if(mh.forEachReturnStatement(t.body,function(e){var e=e.expression;e?(e=Rd(e,n),8192&(e=2&o?op(e,t,mh.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member):e).flags&&(s=!0),mh.pushIfUnique(r,e)):i=!0}),0!==r.length||i||!s&&186!==t.kind&&187!==t.kind)return pe&&r.length&&i&&mh.pushIfUnique(r,De),r}function _d(e,t){if(ce&&(!t||!Td(t,1025))&&!mh.nodeIsMissing(e.body)&&207===e.body.kind&&gd(e)){var n=256&e.flags;if(t&&8192&t.flags)me(mh.getEffectiveReturnTypeNode(e),mh.Diagnostics.A_function_returning_never_cannot_have_a_reachable_end_point);else if(t&&!n)me(mh.getEffectiveReturnTypeNode(e),mh.Diagnostics.A_function_whose_declared_type_is_neither_void_nor_any_must_return_a_value);else if(t&&pe&&!Ee(De,t))me(mh.getEffectiveReturnTypeNode(e),mh.Diagnostics.Function_lacks_ending_return_statement_and_return_type_does_not_include_undefined);else if(ue.noImplicitReturns){if(!t){if(!n)return;if(Hp(e,Te(Gi(e))))return}me(mh.getEffectiveReturnTypeNode(e)||e,mh.Diagnostics.Not_all_code_paths_return_a_value)}}}function md(e,t){if(mh.Debug.assert(151!==e.kind||mh.isObjectLiteralMethod(e)),1===t&&Sa(e))return rg(e),He;Qg(e)||186!==e.kind||rh(e);var n=j(e),o=z(e.symbol);if(!(1024&n.flags)){var r=qc(e);if(!(1024&n.flags)){if(n.flags|=1024,r){n=$(o,0)[0];if(Sa(e)){var i=zc(e);if(2===t){var s=n;var a=r;var l=i;for(var c=s.parameters.length-(s.hasRestParameter?1:0),u=0;u<c;u++){var d=s.parameters[u].valueDeclaration;d.type&&(d=mh.getEffectiveTypeAnnotationNode(d))&&Nl(l.inferences,q(d),ad(a,u))}}var p=n,g=i===W?r:ka(r,i);p.typeParameters=g.typeParameters,g.thisParameter&&(!(m=p.thisParameter)||m.valueDeclaration&&!m.valueDeclaration.type)&&(m||(p.thisParameter=yl(g.thisParameter,void 0)),cd(p.thisParameter,z(g.thisParameter)));for(var h=p.parameters.length-(p.hasRestParameter?1:0),_=0;_<h;_++){var m=p.parameters[_];mh.getEffectiveTypeAnnotationNode(m.valueDeclaration)||cd(m,ad(g,_))}p.hasRestParameter&&tl(g,p.parameters.length-1)&&(!jn(m=mh.lastOrUndefined(p.parameters))&&mh.getEffectiveTypeAnnotationNode(m.valueDeclaration)||cd(m,z(mh.lastOrUndefined(g.parameters))))}mh.getEffectiveReturnTypeNode(e)||n.resolvedReturnType||(r=pd(e,t),n.resolvedReturnType)||(n.resolvedReturnType=r)}Gd(e),rg(e)}}return ce&&151!==e.kind&&(Sp(e,e.name),bp(e,e.name),vp(e,e.name)),o}function fd(e,t,n){return!!Ed(t,84)||(me(e,n),!1)}function yd(e){return!!(8&mh.getCheckFlags(e)||4&e.flags&&64&mh.getDeclarationModifierFlagsFromSymbol(e)||3&e.flags&&2&bu(e)||98304&e.flags&&!(65536&e.flags)||8&e.flags)}function kd(e,t){return yd(t)&&(!(4&t.flags)||179!==e.kind&&180!==e.kind||99!==e.expression.kind||!(e=mh.getContainingFunction(e))||152!==e.kind||e.parent!==t.valueDeclaration.parent&&e!==t.valueDeclaration.parent)}function bd(e){if(179===e.kind||180===e.kind){e=mh.skipParentheses(e.expression);if(71===e.kind){var e=j(e).resolvedSymbol;if(2097152&e.flags)return(e=io(e))&&240===e.kind}}}function vd(e,t){var n=mh.skipOuterExpressions(e,3);return 71===n.kind||179===n.kind||180===n.kind||(me(e,t),0)}function Td(e,t){if(e.flags&t)return!0;if(196608&e.flags)for(var n=0,o=e.types;n<o.length;n++)if(Td(o[n],t))return!0;return!1}function Ed(e,t,n){return!!(e.flags&t)||!(n&&7169&e.flags)&&(84&t&&Ee(e,ae)||262178&t&&Ee(e,_e)||136&t&&Ee(e,we)||1024&t&&Ee(e,Re)||8192&t&&Ee(e,Pe)||4096&t&&Ee(e,ie)||2048&t&&Ee(e,De)||512&t&&Ee(e,Oe)||16777216&t&&Ee(e,Me))}function Sd(e){return 16&w(e)&&e.symbol&&Cd(e.symbol)}function Cd(e){return 0!=(128&e.flags)}function xd(e,t,n){if(261===t.kind||262===t.kind){var o=t.name;if(144===o.kind&&eu(o),!gr(o))return s=mh.getTextOfPropertyName(o),(s=D(e)?e:dr(e,s)||Zc(s)&&Pi(e,1)||Pi(e,0))?262===t.kind?Ad(t,s):Ad(t.initializer,s):void me(o,mh.Diagnostics.Type_0_has_no_property_1_and_no_string_index_signature,ke(e),mh.declarationNameToString(o))}else{if(263===t.kind){de<5&&zg(t,4);var r=[];if(n)for(var i=0;i<n.length-1;i++)r.push(n[i].name);var s=hr(e,r,e.symbol);return Ad(t.expression,s)}me(t,mh.Diagnostics.Property_assignment_expected)}}function Bd(e,t,n,o,r){var e=e.elements,i=e[n];if(200!==i.kind)if(198!==i.kind){var s=""+n,a=D(t)?t:il(t)?dr(t,s):o;if(a)return Ad(i,a,r);Se(i),ul(t)?me(i,mh.Diagnostics.Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2,ke(t),as(t),e.length):me(i,mh.Diagnostics.Type_0_has_no_property_1,ke(t),s)}else if(n<e.length-1)me(i,mh.Diagnostics.A_rest_element_must_be_last_in_a_destructuring_pattern);else{a=i.expression;if(194!==a.kind||58!==a.operatorToken.kind)return Ad(a,Ls(o),r);me(a.operatorToken,mh.Diagnostics.A_rest_element_cannot_have_an_initializer)}}function Ad(e,t,n){var o,r,i=262===e.kind?((i=e).objectAssignmentInitializer&&(!pe||2048&pl(Se(i.objectAssignmentInitializer))||(t=Xl(t,131072)),wd(i.name,i.equalsToken,i.objectAssignmentInitializer,n)),e.name):e;if(194===i.kind&&58===i.operatorToken.kind&&(Nd(i,n),i=i.left),178===i.kind){for(var s=t,a=i.properties,l=0,c=a;l<c.length;l++)xd(s,c[l],a);return s}if(177!==i.kind)return e=t,r=Se(o=i,n),vd(o,263===o.parent.kind?mh.Diagnostics.The_target_of_an_object_rest_assignment_must_be_a_variable_or_a_property_access:mh.Diagnostics.The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access)&&Ra(e,r,o,void 0),e;var u=i,d=t,p=n;de<2&&ue.downlevelIteration&&zg(u,512);for(var g=Rp(d,u,!1,!1)||he,h=u.elements,_=0;_<h.length;_++)Bd(u,d,_,g,p);return d}function Id(e,t){return 0!=(6144&t.flags)||Oa(e,t)}function Dd(e,t){var n=Ee(e,t),o=Ee(t,e);return o&&!n?e:n&&!o?t:Y([e,t],!0)}function Nd(e,t){return wd(e.left,e.operatorToken,e.right,t,e)}function wd(n,e,o,t,r){var i=e.kind;if(58===i&&(178===n.kind||177===n.kind))return Ad(n,Se(o,t),t);var s,a,l,c,u=Se(n,t),d=Se(o,t);switch(i){case 39:case 40:case 61:case 62:case 41:case 63:case 42:case 64:case 38:case 60:case 45:case 65:case 46:case 66:case 47:case 67:case 49:case 69:case 50:case 70:case 48:case 68:return u===Le||d===Le?Le:(u=Su(u,n),d=Su(d,o),p=void 0,136&u.flags&&136&d.flags&&void 0!==(p=function(){switch(e.kind){case 49:case 69:return 54;case 50:case 70:return 35;case 48:case 68:return 53;default:return}}())?me(r||e,mh.Diagnostics.The_0_operator_is_not_allowed_for_boolean_types_Consider_using_1_instead,mh.tokenToString(e.kind),mh.tokenToString(p)):(p=fd(n,u,mh.Diagnostics.The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type),g=fd(o,d,mh.Diagnostics.The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type),p&&g&&_(ae)),ae);case 37:case 59:if(u===Le||d===Le)return Le;Ed(u,262178)||Ed(d,262178)||(u=Su(u,n),d=Su(d,o));var p=void 0;return Ed(u,84,!0)&&Ed(d,84,!0)?p=ae:Ed(u,262178,!0)||Ed(d,262178,!0)?p=_e:(D(u)||D(d))&&(p=u===he||d===he?he:K),p&&!h(i)?p:p?(59===i&&_(p),p):(m(),K);case 27:case 29:case 30:case 31:return h(i)&&(u=ll(Su(u,n)),d=ll(Su(d,o)),Oa(u,d)||Oa(d,u)||m()),we;case 32:case 33:case 34:case 35:var g=al(u),p=al(d);return g&&p||(u=g?ll(u):u,d=p?ll(d):d),Id(u,d)||Id(d,u)||m(),we;case 93:return g=n,p=o,c=d,(l=u)===Le||c===Le?Le:(!D(l)&&Ed(l,8190)&&me(g,mh.Diagnostics.The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_parameter),D(c)||$(c,0).length||$(c,1).length||Na(c,Ye)||me(p,mh.Diagnostics.The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_Function_interface_type),we);case 92:return l=n,c=o,a=d,u===Le||a===Le?Le:(s=Su(u,l),a=Su(a,c),Oa(s,_e)||Ed(s,596)||me(l,mh.Diagnostics.The_left_hand_side_of_an_in_expression_must_be_of_type_any_string_number_or_symbol),Ed(a,17317888)||me(c,mh.Diagnostics.The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter),we);case 53:return 1048576&zl(u)?Y([lc(pe?u:ll(d),hl),d]):u;case 54:return 2097152&zl(u)?Dd(gl(u),d):u;case 58:return _(d),kl(d);case 26:return ue.allowUnreachableCode||!function e(t){switch((t=mh.skipParentheses(t)).kind){case 71:case 9:case 12:case 183:case 196:case 13:case 8:case 101:case 86:case 95:case 139:case 186:case 199:case 187:case 177:case 178:case 189:case 203:case 250:case 249:return!0;case 195:return e(t.whenTrue)&&e(t.whenFalse);case 194:return!mh.isAssignmentOperator(t.operatorToken.kind)&&e(t.left)&&e(t.right);case 192:case 193:switch(t.operator){case 51:case 37:case 38:case 52:return!0}return!1;default:return!1}}(n)||71===o.kind&&"eval"===o.escapedText||me(n,mh.Diagnostics.Left_side_of_comma_operator_is_unused_and_has_no_side_effects),d}function h(e){var t=Td(u,512)?n:Td(d,512)?o:void 0;return!t||(me(t,mh.Diagnostics.The_0_operator_cannot_be_applied_to_type_symbol,mh.tokenToString(e)),0)}function _(e){ce&&mh.isAssignmentOperator(i)&&vd(n,mh.Diagnostics.The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access)&&Ra(e,u,n,void 0)}function m(){me(r||e,mh.Diagnostics.Operator_0_cannot_be_applied_to_types_1_and_2,mh.tokenToString(e.kind),ke(u),ke(d))}}function Od(e,t,n){var o=e.contextualType,r=e.contextualMapper,t=(e.contextualType=t,e.contextualMapper=n,Se(e,n===W?1:n?2:0));return e.contextualType=o,e.contextualMapper=r,t}function Rd(e,t){var n,o=j(e);return o.resolvedType||(n=wt,wt=Ot,o.resolvedType=Se(e,t),wt=n),o.resolvedType}function Pd(e){return 184===(e=mh.skipParentheses(e)).kind||202===e.kind}function Ld(e){var t=Hd(e.initializer,!0);return 2&mh.getCombinedNodeFlags(e)||64&mh.getCombinedModifierFlags(e)&&!mh.isParameterPropertyDeclaration(e)||Pd(e.initializer)?t:cl(t)}function Md(e){if(e){if(540672&e.flags){var t=Si(e)||N;if(30&t.flags)return!0;e=t}return Td(e,262368)}return!1}function Fd(e,t,n){2===arguments.length&&(n=jc(e));t=Se(e,t);return Pd(e)||Md(n)?t:cl(t)}function Ud(e,t,n){if(2===n){n=Uu(t);if(n&&n.typeParameters){var o=Kc(e);if(o){o=Uu(ml(o));if(o&&!o.typeParameters)return qi(Hu(n,o,zc(e)))}}}return t}function Hd(e,t){if(181===e.kind&&97!==e.expression.kind&&!mh.isRequireCall(e,!0)){var n=Uu(Eu(e.expression));if(n&&!n.typeParameters)return Te(n)}return(t?Rd:Se)(e)}function Se(e,t){t=143===e.kind?xu(e):Ud(e,function(e,t){switch(e.kind){case 71:return xc(e);case 99:var n=e,o=mh.getThisContainer(n,!0),r=!1;switch(152===o.kind&&Nc(n,o,mh.Diagnostics.super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class),187===o.kind&&(o=mh.getThisContainer(o,!1),r=de<2),o.kind){case 233:me(n,mh.Diagnostics.this_cannot_be_referenced_in_a_module_or_namespace_body);break;case 232:me(n,mh.Diagnostics.this_cannot_be_referenced_in_current_location);break;case 152:wc(n,o)&&me(n,mh.Diagnostics.this_cannot_be_referenced_in_constructor_arguments);break;case 149:case 148:mh.hasModifier(o,32)&&me(n,mh.Diagnostics.this_cannot_be_referenced_in_a_static_property_initializer);break;case 144:me(n,mh.Diagnostics.this_cannot_be_referenced_in_a_computed_property_name)}if(r&&Bc(n,o),mh.isFunctionLike(o)&&(!Mc(n)||mh.getThisParameter(o))){if(186===o.kind&&194===o.parent.kind&&3===mh.getSpecialPropertyAssignmentKind(o.parent)){var r=Se(o.parent.left.expression.expression).symbol;if(r&&r.members&&16&r.flags)return od(r)}r=xr(o)||Pc(o);if(r)return r}return mh.isClassLike(o.parent)?(r=fe(o.parent),bc(n,m=mh.hasModifier(o,32)?z(r):be(r).thisType)):mh.isInJavaScriptFile(n)&&(m=function(e){e=mh.getJSDocType(e);if(e&&273===e.kind&&(0<e.parameters.length&&e.parameters[0].name&&"this"===e.parameters[0].name.escapedText))return q(e.parameters[0].type)}(o))&&m!==he?m:(Z&&me(n,mh.Diagnostics.this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation),K);case 97:return Oc(e);case 95:return se;case 13:case 9:return ca(da(e.text));case 8:return _h(e),ca(da(+e.text));case 101:return le;case 86:return Ne;case 196:return mh.forEach(e.templateSpans,function(e){Se(e.expression)}),_e;case 12:return tt;case 177:for(var r=e,L=t,M=r.elements,i=!1,s=[],F=mh.isAssignmentTarget(r),U=Kc(r),a=0;a<M.length;a++){var l,c,u=M[a];F&&198===u.kind?(l=Pi(l=Se(u.expression,L),1)||Pp(l,void 0,!1,!1,!1))&&s.push(l):(c=Fd(u,L,Gc(U,a)),s.push(c)),i=i||198===u.kind}if(!i){if(F&&s.length)return(c=ss(Ms(s))).pattern=r,c;var d=Kc(r);if(d&&(65536&(r=d).flags?mh.forEach(r.types,il):il(r))){r=d.pattern;if(r&&(175===r.kind||177===r.kind))for(var H=r.elements,p=s.length;p<H.length;p++){var V=H[p];Jc(V)?s.push(d.typeArguments[p]):(200!==V.kind&&me(V,mh.Diagnostics.Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value),s.push(he))}if(s.length)return Ms(s)}}return Ls(s.length?Y(s,!0):pe?Pe:re);case 178:return nu(e,t);case 179:return Cu(e);case 180:return wu(e);case 181:if(91===e.expression.kind){var g=e;if(eh(g.arguments)||(h=g,Ie===mh.ModuleKind.ES2015?Be(h,mh.Diagnostics.Dynamic_import_cannot_be_used_when_targeting_ECMAScript_2015_modules):h.typeArguments?Be(h,mh.Diagnostics.Dynamic_import_cannot_have_type_arguments):1!==(_=h.arguments).length?Be(h,mh.Diagnostics.Dynamic_import_must_have_one_specifier_as_an_argument):mh.isSpreadElement(_[0])&&Be(_[0],mh.Diagnostics.Specifier_of_dynamic_import_cannot_be_spread_element)),0!==g.arguments.length){for(var h=g.arguments[0],_=Rd(h),W=1;W<g.arguments.length;++W)Rd(g.arguments[W]);(2048&_.flags||4096&_.flags||!Ee(_,_e))&&me(h,mh.Diagnostics.Dynamic_import_s_specifier_must_be_of_type_string_but_here_has_type_0,ke(_));var m=yo(g,h);if(m){m=To(m,h,!0);if(m)return dd(g,(w=z(m),m=m,J&&w&&w!==he?((P=w).syntheticType||(X(w,"default")?P.syntheticType=w:(f=mh.createSymbolTable(),(y=Kn(2097152,"default")).target=uo(m),f.set("default",y),y=Uo(m=Kn(2048,"__type"),f,mh.emptyArray,mh.emptyArray,void 0,void 0),m.type=y,P.syntheticType=js([w,y]))),P.syntheticType):w))}}return dd(g,K);return}case 182:var f=e,y=(Zg(f,f.typeArguments)||eh(f.arguments),td(f));if(97===f.expression.kind)return Re;if(182===f.kind){var k=y.declaration;if(k&&152!==k.kind&&156!==k.kind&&161!==k.kind&&!mh.isJSDocConstructSignature(k))return(k=(k=Se(f.expression).symbol)||71!==f.expression.kind?k:Ml(f.expression))&&function(e){if(nd((e=mh.isDeclarationOfFunctionOrClassExpression(e)?fe(e.valueDeclaration.initializer):e).valueDeclaration))return od(e);if(3&e.flags){e=z(e);if(e.symbol&&!rd(e)&&nd(e.symbol.valueDeclaration))return od(e.symbol)}}(k)||(Q&&me(f,mh.Diagnostics.new_expression_whose_target_lacks_a_construct_signature_implicitly_has_an_any_type),K)}if(mh.isInJavaScriptFile(f)&&function(e){if(mh.isRequireCall(e,!0)){var t;if(mh.isIdentifier(e.expression))return!(e=Zn(e.expression,e.expression.escapedText,107455,void 0,void 0,!0))||(!(2097152&e.flags)&&0!=(t=16&e.flags?228:3&e.flags?226:0)?(e=mh.getDeclarationOfKind(e,t),mh.isInAmbientContext(e)):void 0);throw mh.Debug.fail()}}(f)){k=f.arguments[0];if(k=yo(k,k)){k=vo(k);if(k)return z(k)}return K}return Te(y);case 183:return P=e,de<2&&zg(P,65536),Te(td(P));case 185:return w=e,O=t,(R=mh.isInJavaScriptFile(w)?mh.getJSDocTypeTag(w):void 0)?id(R,R.typeExpression.type,w.expression,O):Se(w.expression,O);case 199:return jp(R=e),rg(R),z(fe(R));case 186:case 187:return md(e,t);case 189:return Se(e.expression),un;case 184:case 202:return id(e,e.type,e.expression);case 203:return ml(Se(e.expression));case 204:return 94===(O=e).keywordToken&&"target"!==O.name.escapedText&&Be(O.name,mh.Diagnostics._0_is_not_a_valid_meta_property_for_keyword_1_Did_you_mean_2,O.name.escapedText,mh.tokenToString(O.keywordToken),"target"),(N=mh.getNewTargetContainer(O))?152===N.kind?z(fe(N.parent)):z(fe(N)):(me(O,mh.Diagnostics.Meta_property_0_is_only_allowed_in_the_body_of_a_function_declaration_function_expression_or_constructor,"new.target"),he);case 188:return Se((N=e).expression),179!==(N=mh.skipParentheses(N.expression)).kind&&180!==N.kind?me(N,mh.Diagnostics.The_operand_of_a_delete_operator_must_be_a_property_reference):(D=No(j(N).resolvedSymbol))&&yd(D)&&me(N,mh.Diagnostics.The_operand_of_a_delete_operator_cannot_be_a_read_only_property),we;case 190:return Se(e.expression),re;case 191:return D=e,ce&&(16384&D.flags||xe(D,mh.Diagnostics.await_expression_is_only_allowed_within_an_async_function),Mc(D))&&me(D,mh.Diagnostics.await_expressions_cannot_be_used_in_a_parameter_initializer),op(Se(D.expression),D,mh.Diagnostics.Type_of_await_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member);case 192:var b=e,v=Se(b.operand);if(v===Le)return Le;if(8===b.operand.kind){if(38===b.operator)return ca(da(-b.operand.text));if(37===b.operator)return ca(da(+b.operand.text))}switch(b.operator){case 37:case 38:case 52:return Su(v,b.operand),Td(v,512)&&me(b.operand,mh.Diagnostics.The_0_operator_cannot_be_applied_to_type_symbol,mh.tokenToString(b.operator)),ae;case 51:var G=3145728&zl(v);return 1048576==G?Ne:2097152==G?le:we;case 43:case 44:return fd(b.operand,Su(v,b.operand),mh.Diagnostics.An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type)&&vd(b.operand,mh.Diagnostics.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access),ae}return he;case 193:return(I=Se((A=e).operand))===Le?Le:(fd(A.operand,Su(I,A.operand),mh.Diagnostics.An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type)&&vd(A.operand,mh.Diagnostics.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access),ae);case 194:return Nd(e,t);case 195:return I=t,Se((A=e).condition),Dd(Se(A.whenTrue,I),Se(A.whenFalse,I));case 198:return x=e,B=t,de<2&&ue.downlevelIteration&&zg(x,1536),Rp(Se(x.expression,B),x.expression,!1,!1);case 200:return re;case 197:return T=e,ce&&(4096&T.flags&&!function(){for(var e=T,t=T.parent;t;){if(mh.isFunctionLike(t)&&e===t.body)return;if(mh.isClassLike(e))return 1;t=(e=t).parent}}()||xe(T,mh.Diagnostics.A_yield_expression_is_only_allowed_in_a_generator_body),Mc(T))&&me(T,mh.Diagnostics.yield_expressions_cannot_be_used_in_a_parameter_initializer),T.expression&&(x=(B=mh.getContainingFunction(T))&&mh.getFunctionFlags(B),T.asteriskToken&&(3==(3&x)&&de<5&&zg(T,26624),1==(3&x))&&de<2&&ue.downlevelIteration&&zg(T,256),1&x)&&(E=Rd(T.expression),S=void 0,(C=!!T.asteriskToken)&&(S=Rp(E,T.expression,!1,0!=(2&x))),B=mh.getEffectiveReturnTypeNode(B))&&(B=Fp(q(B),0!=(2&x))||K,Ra(C?2&x?rp(S,T.expression,mh.Diagnostics.Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member):S:2&x?rp(E,T.expression,mh.Diagnostics.Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member):E,B,T.expression,void 0)),K;case 256:return(C=e).expression?(S=Se(C.expression,t),C.dotDotDotToken&&S!==K&&!ol(S)&&me(C,mh.Diagnostics.JSX_spread_child_must_be_an_array_type),S):he;case 249:return yu((E=e).openingElement),iu(E.closingElement.tagName)?lu(E.closingElement):Se(E.closingElement.tagName),mu()||K;case 250:return yu(e),mu()||K;case 254:return su(e.parent,void 0,t);case 251:mh.Debug.fail("Shouldn't ever directly check a JsxOpeningElement")}var T,E,S,C,x,B,A,I,D,N,w,O,R,P;return he}(e,t),t);return!Sd(t)||179===e.parent.kind&&e.parent.expression===e||180===e.parent.kind&&e.parent.expression===e||(71===e.kind||143===e.kind)&&gg(e)||me(e,mh.Diagnostics.const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_import_declaration_or_export_assignment),t}function Vd(e){e.expression&&xe(e.expression,mh.Diagnostics.Type_expected),Ce(e.constraint),Ce(e.default);var t=Qr(fe(e)),n=(Ci(t)||me(e.constraint,mh.Diagnostics.Type_parameter_0_has_a_circular_constraint,ke(t)),Bi(t)===We&&me(e.default,mh.Diagnostics.Type_parameter_0_has_a_circular_default,ke(t)),Ti(t)),t=Ai(t);n&&t&&Ra(t,ii(n,t),e.default,mh.Diagnostics.Type_0_does_not_satisfy_the_constraint_1),ce&&Wp(e.name,mh.Diagnostics.Type_parameter_name_cannot_be_0)}function Wd(e){Xg(e)||$g(e),Ip(e);var t=mh.getContainingFunction(e);!mh.hasModifier(e,92)||152===t.kind&&mh.nodeIsPresent(t.body)||me(e,mh.Diagnostics.A_parameter_property_is_only_allowed_in_a_constructor_implementation),e.questionToken&&mh.isBindingPattern(e.name)&&t.body&&me(e,mh.Diagnostics.A_binding_pattern_parameter_cannot_be_optional_in_an_implementation_signature),e.name&&mh.isIdentifier(e.name)&&("this"===e.name.escapedText||"new"===e.name.escapedText)&&(0!==mh.indexOf(t.parameters,e)&&me(e,mh.Diagnostics.A_0_parameter_must_be_the_first_parameter,e.name.escapedText),152!==t.kind&&156!==t.kind&&161!==t.kind||me(e,mh.Diagnostics.A_constructor_cannot_have_a_this_parameter)),!e.dotDotDotToken||mh.isBindingPattern(e.name)||ol(z(e.symbol))||me(e,mh.Diagnostics.A_rest_parameter_must_be_of_an_array_type)}function Gd(e){157===e.kind?Xg(n=e)||$g(n)||(t=(n=n).parameters[0],1!==n.parameters.length?Be(t?t.name:n,mh.Diagnostics.An_index_signature_must_have_exactly_one_parameter):t.dotDotDotToken?Be(t.dotDotDotToken,mh.Diagnostics.An_index_signature_cannot_have_a_rest_parameter):mh.hasModifiers(t)?Be(t.name,mh.Diagnostics.An_index_signature_parameter_cannot_have_an_accessibility_modifier):t.questionToken?Be(t.questionToken,mh.Diagnostics.An_index_signature_parameter_cannot_have_a_question_mark):t.initializer?Be(t.name,mh.Diagnostics.An_index_signature_parameter_cannot_have_an_initializer):t.type?136!==t.type.kind&&133!==t.type.kind?Be(t.name,mh.Diagnostics.An_index_signature_parameter_type_must_be_string_or_number):n.type||Be(n,mh.Diagnostics.An_index_signature_must_have_a_type_annotation):Be(t.name,mh.Diagnostics.An_index_signature_parameter_must_have_a_type_annotation)):160!==e.kind&&228!==e.kind&&161!==e.kind&&155!==e.kind&&152!==e.kind&&156!==e.kind||Qg(e);var t,n=mh.getFunctionFlags(e);if(4&n||(3==(3&n)&&de<5&&zg(e,6144),2==(3&n)&&de<4&&zg(e,64),0!=(3&n)&&de<2&&zg(e,128)),Gp(e.typeParameters),mh.forEach(e.parameters,Wd),e.type&&Ce(e.type),ce){t=e,!mh.hasRestParameter(t)||mh.isInAmbientContext(t)||mh.nodeIsMissing(t.body)||mh.forEach(t.parameters,function(e){e.name&&!mh.isBindingPattern(e.name)&&e.name.escapedText===M.escapedName&&me(e,mh.Diagnostics.Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters)});var o,r,i=mh.getEffectiveReturnTypeNode(e);if(Q&&!i)switch(e.kind){case 156:me(e,mh.Diagnostics.Construct_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type);break;case 155:me(e,mh.Diagnostics.Call_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type)}i&&(1==(5&(o=mh.getFunctionFlags(e)))?(r=q(i))===Re?me(i,mh.Diagnostics.A_generator_cannot_have_a_void_type_annotation):Ra((2&o?Os:Ps)(Fp(r,0!=(2&o))||K),r,i):2==(3&o)&&ip(e)),T&&!e.body&&fp(e)}}function Kd(e){for(var t=mh.createMap(),n=0,o=e.members;n<o.length;n++){var r=o[n];if(148===r.kind){var i=void 0;switch(r.name.kind){case 9:case 8:i=r.name.text;break;case 71:i=mh.idText(r.name);break;default:continue}t.get(i)?(me(mh.getNameOfDeclaration(r.symbol.valueDeclaration),mh.Diagnostics.Duplicate_identifier_0,i),me(r.name,mh.Diagnostics.Duplicate_identifier_0,i)):t.set(i,!0)}}}function jd(e){if(230===e.kind){var t=fe(e);if(0<t.declarations.length&&t.declarations[0]!==e)return}t=Ji(fe(e));if(t)for(var n=!1,o=!1,r=0,i=t.declarations;r<i.length;r++){var s=i[r];if(1===s.parameters.length&&s.parameters[0].type)switch(s.parameters[0].type.kind){case 136:o?me(s,mh.Diagnostics.Duplicate_string_index_signature):o=!0;break;case 133:n?me(s,mh.Diagnostics.Duplicate_number_index_signature):n=!0}}}function zd(e){var t,n,o,r;ce&&(Qg(e)||(r=(n=e).kind,de<1?Be(n.name,mh.Diagnostics.Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher):mh.isInAmbientContext(n)?Be(n.name,mh.Diagnostics.An_accessor_cannot_be_declared_in_an_ambient_context):void 0!==n.body||mh.hasModifier(n,128)?n.body&&mh.hasModifier(n,128)?Be(n,mh.Diagnostics.An_abstract_accessor_cannot_have_an_implementation):n.typeParameters?Be(n.name,mh.Diagnostics.An_accessor_cannot_have_type_parameters):ah(o=n)||o.parameters.length===(153===o.kind?0:1)?154===r&&(n.type?Be(n.name,mh.Diagnostics.A_set_accessor_cannot_have_a_return_type_annotation):(o=n.parameters[0]).dotDotDotToken?Be(o.dotDotDotToken,mh.Diagnostics.A_set_accessor_cannot_have_rest_parameter):o.questionToken?Be(o.questionToken,mh.Diagnostics.A_set_accessor_cannot_have_an_optional_parameter):o.initializer&&Be(n.name,mh.Diagnostics.A_set_accessor_parameter_cannot_have_an_initializer)):Be(n.name,153===r?mh.Diagnostics.A_get_accessor_cannot_have_parameters:mh.Diagnostics.A_set_accessor_must_have_exactly_one_parameter):gh(n,n.end-1,";".length,mh.Diagnostics._0_expected,"{"))||oh(e.name),up(e),Gd(e),153===e.kind&&!mh.isInAmbientContext(e)&&mh.nodeIsPresent(e.body)&&128&e.flags&&(256&e.flags||me(e.name,mh.Diagnostics.A_get_accessor_must_return_a_value)),144===e.name.kind&&eu(e.name),!mh.hasDynamicName(e)&&(o=153===e.kind?154:153,r=mh.getDeclarationOfKind(e.symbol,o))&&((28&(n=mh.getModifierFlags(e)))!=(28&(t=mh.getModifierFlags(r)))&&me(e.name,mh.Diagnostics.Getter_and_setter_accessors_do_not_agree_in_visibility),(128&n)!=(128&t)&&me(e.name,mh.Diagnostics.Accessors_must_both_be_abstract_or_non_abstract),Xd(e,r,Cr,mh.Diagnostics.get_and_set_accessor_must_have_the_same_type),Xd(e,r,xr,mh.Diagnostics.get_and_set_accessor_must_have_the_same_this_type)),t=Br(fe(e)),153===e.kind)&&_d(e,t),Ce(e.body),gp(e)}function Xd(e,t,n,o){var r=n(e),n=n(t);r&&n&&!Aa(r,n)&&me(e,o)}function $d(e,t){for(var n,o,r=Vi(e),i=!0,s=0;s<e.length;s++){var a,l=Ti(e[s]);l&&(n||(o=ma(e,n=Wi(mh.map(t,q),e,r,mh.isInJavaScriptFile(t[s])))),a=n[s],i=i&&Ra(a,V(l,o),t[s],mh.Diagnostics.Type_0_does_not_satisfy_the_constraint_1))}return i}function Yd(e){Zg(e,e.typeArguments),159!==e.kind||void 0===e.typeName.jsdocDotPos||mh.isInJavaScriptFile(e)||mh.isInJSDoc(e)||gh(e,e.typeName.jsdocDotPos,1,mh.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments);var t=gs(e);if(t!==he){if(e.typeArguments&&(mh.forEach(e.typeArguments,Ce),ce)){var n=j(e).resolvedSymbol;if(!n)return void(mh.isJSDocIndexSignature(e)||me(e,mh.Diagnostics.Type_0_is_not_generic,ke(t)));n=524288&n.flags&&p(n).typeParameters;$d(n=!n&&4&w(t)?t.target.localTypeParameters:n,e.typeArguments)}16&t.flags&&8&j(e).resolvedSymbol.flags&&me(e,mh.Diagnostics.Enum_type_0_has_members_with_initializers_that_are_not_literals,ke(t))}}function qd(e,t){var n,o;return 524288&e.flags&&(n=e.objectType,Ee(o=e.indexType,Xs(n))?180===t.kind&&mh.isAssignmentTarget(t)&&32&w(n)&&n.declaration.readonlyToken&&me(t,mh.Diagnostics.Index_signature_in_type_0_only_permits_reading,ke(n)):O(G(n),1)&&Ed(o,84)||me(t,mh.Diagnostics.Type_0_cannot_be_used_to_index_type_1,ke(o),ke(n))),e}function Jd(e){return mh.hasModifier(e,8)&&mh.isInAmbientContext(e)}function Qd(e,t){var n=mh.getCombinedModifierFlags(e);return 230!==e.parent.kind&&229!==e.parent.kind&&199!==e.parent.kind&&mh.isInAmbientContext(e)&&(2&n||(n|=1),n|=2),n&t}function Zd(e){if(ce){for(var t,n,o,r=0,i=155,s=!1,a=!0,l=!1,c=e.declarations,u=0!=(16384&e.flags),d=!1,p=!1,g=0,h=c;g<h.length;g++){var _,m=h[g],f=mh.isInAmbientContext(m),f=230===m.parent.kind||163===m.parent.kind||f;f&&(o=void 0),228!==m.kind&&151!==m.kind&&150!==m.kind&&152!==m.kind||(r|=_=Qd(m,155),i&=_,s=s||mh.hasQuestionToken(m),a=a&&mh.hasQuestionToken(m),mh.nodeIsPresent(m.body)&&t?u?p=!0:d=!0:o&&o.parent===m.parent&&o.end!==m.pos&&D(o),mh.nodeIsPresent(m.body)?t=t||m:l=!0,o=m,f)||(n=m)}if(p&&mh.forEach(c,function(e){me(e,mh.Diagnostics.Multiple_constructor_implementations_are_not_allowed)}),d&&mh.forEach(c,function(e){me(mh.getNameOfDeclaration(e),mh.Diagnostics.Duplicate_function_implementation)}),!n||n.body||mh.hasModifier(n,128)||n.questionToken||D(n),l&&(B=c,0!=(r^i)&&(A=Qd(I(B,t),155),mh.forEach(B,function(e){var t=Qd(e,155)^A;1&t?me(mh.getNameOfDeclaration(e),mh.Diagnostics.Overload_signatures_must_all_be_exported_or_non_exported):2&t?me(mh.getNameOfDeclaration(e),mh.Diagnostics.Overload_signatures_must_all_be_ambient_or_non_ambient):24&t?me(mh.getNameOfDeclaration(e)||e,mh.Diagnostics.Overload_signatures_must_all_be_public_private_or_protected):128&t&&me(mh.getNameOfDeclaration(e),mh.Diagnostics.Overload_signatures_must_all_be_abstract_or_non_abstract)})),B=c,c=t,s!==a&&(x=mh.hasQuestionToken(I(B,c)),mh.forEach(B,function(e){mh.hasQuestionToken(e)!==x&&me(mh.getNameOfDeclaration(e),mh.Diagnostics.Overload_signatures_must_all_be_optional_or_required)})),t))for(var c=Ki(e),y=Gi(t),k=0,b=c;k<b.length;k++){var v=b[k];if(E=v,C=S=void 0,T=Yi(T=y),E=Yi(E),S=Te(T),(C=Te(E))!==Re&&!Va(C,S,En)&&!Va(S,C,En)||0===La(T,E,0,!0,!1,void 0,Da)){me(v.declaration,mh.Diagnostics.Overload_signature_is_not_compatible_with_function_implementation);break}}}var T,E,S,C,x,B,A;function I(e,t){return void 0!==t&&t.parent===e[0].parent?t:e[0]}function D(t){if(!t.name||!mh.nodeIsMissing(t.name)){var n=!1,e=mh.forEachChild(t.parent,function(e){if(n)return e;n=e===t});if(e&&e.pos===t.end&&e.kind===t.kind){var o=e.name||e,r=e.name;if(t.name&&r&&(mh.isComputedPropertyName(t.name)&&mh.isComputedPropertyName(r)||!mh.isComputedPropertyName(t.name)&&!mh.isComputedPropertyName(r)&&mh.getEscapedTextOfIdentifierOrLiteral(t.name)===mh.getEscapedTextOfIdentifierOrLiteral(r)))return void(151!==t.kind&&150!==t.kind||mh.hasModifier(t,32)===mh.hasModifier(e,32)||me(o,mh.hasModifier(t,32)?mh.Diagnostics.Function_overload_must_be_static:mh.Diagnostics.Function_overload_must_not_be_static));if(mh.nodeIsPresent(e.body))return me(o,mh.Diagnostics.Function_implementation_name_must_be_0,mh.declarationNameToString(t.name))}r=t.name||t;u?me(r,mh.Diagnostics.Constructor_implementation_is_missing):mh.hasModifier(t,128)?me(r,mh.Diagnostics.All_declarations_of_an_abstract_method_must_be_consecutive):me(r,mh.Diagnostics.Function_implementation_is_missing_or_not_immediately_following_the_declaration)}}}function ep(e){if(ce){var t=e.localSymbol;if((t||(t=fe(e)).exportSymbol)&&mh.getDeclarationOfKind(t,e.kind)===e){for(var n=0,o=0,r=0,i=0,s=t.declarations;i<s.length;i++){var a=m(h=s[i]),l=Qd(h,513);1&l?512&l?r|=a:n|=a:o|=a}var c,u=n&o,d=r&(n|o);if(u||d)for(var p=0,g=t.declarations;p<g.length;p++){var h,a=m(h=g[p]),_=mh.getNameOfDeclaration(h);a&d?me(_,mh.Diagnostics.Merged_declaration_0_cannot_include_a_default_export_declaration_Consider_adding_a_separate_export_default_0_declaration_instead,mh.declarationNameToString(_)):a&u&&me(_,mh.Diagnostics.Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local,mh.declarationNameToString(_))}(e=c=c||{})[e.None=0]="None",e[e.ExportValue=1]="ExportValue",e[e.ExportType=2]="ExportType",e[e.ExportNamespace=4]="ExportNamespace"}}function m(e){switch(e.kind){case 230:case 231:case 283:return 2;case 233:return mh.isAmbientModule(e)||0!==mh.getModuleInstanceState(e)?5:4;case 229:case 232:return 3;case 237:case 240:case 239:var t=0,n=po(fe(e));return mh.forEach(n.declarations,function(e){t|=m(e)}),t;case 226:case 176:case 228:case 242:return 1;default:mh.Debug.fail(mh.SyntaxKind[e.kind])}}}function tp(e,t,n){e=np(e,t);return e&&rp(e,t,n)}function np(e,t){if(!D(e)){var n=e;if(n.promisedTypeOfPromise)return n.promisedTypeOfPromise;if(Dr(e,vs(!1)))return n.promisedTypeOfPromise=e.typeArguments[0];e=dr(e,"then");if(!D(e)){e=e?$(e,0):mh.emptyArray;if(0!==e.length){e=Xl(Y(mh.map(e,ld)),524288);if(!D(e)){e=$(e,0);if(0!==e.length)return n.promisedTypeOfPromise=Y(mh.map(e,ld),!0);t&&me(t,mh.Diagnostics.The_first_parameter_of_the_then_method_of_a_promise_must_be_a_callback)}}else t&&me(t,mh.Diagnostics.A_promise_must_have_a_then_method)}}}function op(e,t,n){return rp(e,t,n)||he}function rp(e,t,n){var o=e;if(o.awaitedTypeOfType)return o.awaitedTypeOfType;if(D(e))return o.awaitedTypeOfType=e;if(65536&e.flags){for(var r=void 0,i=0,s=e.types;i<s.length;i++)var a=s[i],r=mh.append(r,rp(a,t,n));return r?o.awaitedTypeOfType=Y(r):void 0}var l=np(e);if(l){if(e.id===l.id||0<=mh.indexOf(Zt,l.id))return void(t&&me(t,mh.Diagnostics.Type_is_referenced_directly_or_indirectly_in_the_fulfillment_callback_of_its_own_then_method));Zt.push(e.id);l=rp(l,t,n);return(Zt.pop(),l)?o.awaitedTypeOfType=l:void 0}l=dr(e,"then");if(!(l&&0<$(l,0).length))return o.awaitedTypeOfType=e;t&&(mh.Debug.assert(!!n),me(t,n))}function ip(e){var t=mh.getEffectiveReturnTypeNode(e),n=q(t);if(2<=de){if(n===he)return he;var o=vs(!0);if(o!==Ue&&!Dr(n,o))return me(t,mh.Diagnostics.The_return_type_of_an_async_function_or_method_must_be_the_global_Promise_T_type),he}else{if(ap(t&&mh.getEntityNameFromTypeNode(t)),n===he)return he;o=mh.getEntityNameFromTypeNode(t);if(void 0===o)return me(t,mh.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value,ke(n)),he;var r=fo(o,107455,!0),r=r?z(r):he;if(r===he)return 71===o.kind&&"Promise"===o.escapedText&&Nr(n)===vs(!1)?me(t,mh.Diagnostics.An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option):me(t,mh.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value,mh.entityNameToString(o)),he;var i=(dt=dt||ks("PromiseConstructorLike",0,!0))||N;if(i===N)return me(t,mh.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value,mh.entityNameToString(o)),he;if(!Ra(r,i,t,mh.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value))return he;r=o&&qp(o),i=Jn(e.locals,r.escapedText,107455);if(i)return me(i.valueDeclaration,mh.Diagnostics.Duplicate_identifier_0_Compiler_uses_declaration_1_to_support_async_functions,mh.idText(r),mh.entityNameToString(o)),he}return op(n,e,mh.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)}function sp(e){var t=Te(td(e));if(!(1&t.flags)){var n,o,r=Ju(e);switch(e.parent.kind){case 229:n=Y([z(fe(e.parent)),Re]);break;case 146:n=Re,o=mh.chainDiagnosticMessages(o,mh.Diagnostics.The_return_type_of_a_parameter_decorator_function_must_be_either_void_or_any);break;case 149:n=Re,o=mh.chainDiagnosticMessages(o,mh.Diagnostics.The_return_type_of_a_property_decorator_function_must_be_either_void_or_any);break;case 151:case 153:case 154:n=Y([ws(mg(e.parent)),Re])}Ra(t,n,e,r,o)}}function ap(e){var t;e&&(t=qp(e),e=2097152|(71===e.kind?793064:1920),t=Zn(t,t.escapedText,e,void 0,void 0,!0))&&2097152&t.flags&&wo(t)&&!Ag(po(t))&&ho(t)}function lp(e){e=function e(t){if(t)switch(t.kind){case 167:case 166:for(var n=void 0,o=0,r=t.types;o<r.length;o++){var i=e(r[o]);if(!i)return;if(n){if(!mh.isIdentifier(n)||!mh.isIdentifier(i)||n.escapedText!==i.escapedText)return}else n=i}return n;case 168:return e(t.type);case 159:return t.typeName}}(e);e&&mh.isEntityName(e)&&ap(e)}function cp(e){var t=mh.getEffectiveTypeAnnotationNode(e);return mh.isRestParameter(e)?mh.getRestParameterElementType(t):t}function up(e){if(e.decorators&&mh.nodeCanBeDecorated(e)){ue.experimentalDecorators||me(e,mh.Diagnostics.Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_to_remove_this_warning);var t=e.decorators[0];if(zg(t,8),146===e.kind&&zg(t,32),ue.emitDecoratorMetadata)switch(zg(t,16),e.kind){case 229:var n=mh.getFirstConstructorWithBody(e);if(n)for(var o=0,r=n.parameters;o<r.length;o++)lp(cp(r[o]));break;case 151:case 153:case 154:for(var i=0,s=e.parameters;i<s.length;i++)lp(cp(s[i]));lp(mh.getEffectiveReturnTypeNode(e));break;case 149:lp(mh.getEffectiveTypeAnnotationNode(e));break;case 146:lp(cp(e))}mh.forEach(e.decorators,sp)}}function dp(e){switch(e.kind){case 71:return e;case 179:return e.name;default:return}}function pp(t){up(t),Gd(t);var e,n,o=mh.getFunctionFlags(t),r=(t.name&&144===t.name.kind&&eu(t.name),mh.hasDynamicName(t)||(e=fe(t),n=t.localSymbol||e,r=mh.find(n.declarations,function(e){return e.kind===t.kind&&!(65536&e.flags)}),t===r&&Zd(n),e.parent&&mh.getDeclarationOfKind(e,t.kind)===t&&Zd(e)),Ce(t.body),mh.getEffectiveReturnTypeNode(t));0==(1&o)&&(n=r&&(2&o?ip(t):q(r)),_d(t,n)),ce&&!r&&(Q&&mh.nodeIsMissing(t.body)&&!Jd(t)&&Tl(t,K),1&o)&&mh.nodeIsPresent(t.body)&&Te(Gi(t)),gp(t)}function gp(e){Et&&Et.push(e)}function hp(e){230!==e.parent.kind&&T&&!mh.isInAmbientContext(e)&&e.locals.forEach(function(t){var e,n;t.isReferenced||(t.valueDeclaration&&146===mh.getRootDeclaration(t.valueDeclaration).kind?(e=mh.getRootDeclaration(t.valueDeclaration),n=mh.getNameOfDeclaration(t.valueDeclaration),!ue.noUnusedParameters||mh.isParameterPropertyDeclaration(e)||mh.parameterIsThisKeyword(e)||n&&mp(n)||me(n,mh.Diagnostics._0_is_declared_but_its_value_is_never_read,mh.symbolName(t))):ue.noUnusedLocals&&mh.forEach(t.declarations,function(e){return _p(e,mh.symbolName(t))}))})}function _p(e,t){e=mh.getNameOfDeclaration(e)||e;if(mp(e)){var n=mh.getRootDeclaration(e.parent);if(226===n.kind&&mh.isForInOrOfStatement(n.parent.parent)||145===n.kind)return}!function(e){var t;if(mh.isBindingElement(e)&&mh.isObjectBindingPattern(e.parent))return(t=mh.lastOrUndefined(e.parent.elements))!==e&&t.dotDotDotToken}(71===e.kind?e.parent:e)&&me(e,mh.Diagnostics._0_is_declared_but_its_value_is_never_read,t)}function mp(e){return 71===e.kind&&95===mh.idText(e).charCodeAt(0)}function fp(e){if(ue.noUnusedLocals&&!mh.isInAmbientContext(e)&&e.typeParameters){var t=fe(e);if((t&&t.declarations&&mh.lastOrUndefined(t.declarations))===e)for(var n=0,o=e.typeParameters;n<o.length;n++){var r=o[n];Io(r.symbol).isReferenced||mp(r.name)||me(r.name,mh.Diagnostics._0_is_declared_but_its_value_is_never_read,mh.symbolName(r.symbol))}}}function yp(e){var t;207===e.kind&&hh(e),mh.isFunctionOrModuleBlock(e)?(t=Pt,mh.forEach(e.statements,Ce),Pt=t):mh.forEach(e.statements,Ce),e.locals&&gp(e)}function kp(e,t,n){if(t&&t.escapedText===n&&(149!==e.kind&&148!==e.kind&&151!==e.kind&&150!==e.kind&&153!==e.kind&&154!==e.kind&&!mh.isInAmbientContext(e)))return 146!==(t=mh.getRootDeclaration(e)).kind||!mh.nodeIsMissing(t.parent.body)}function bp(e,t){kp(e,t,"_this")&&Jt.push(e)}function vp(e,t){kp(e,t,"_newTarget")&&Qt.push(e)}function Tp(t){mh.findAncestor(t,function(e){if(4&wg(e))return 71!==t.kind?me(mh.getNameOfDeclaration(t),mh.Diagnostics.Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference):me(t,mh.Diagnostics.Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference),!0})}function Ep(t){mh.findAncestor(t,function(e){if(8&wg(e))return 71!==t.kind?me(mh.getNameOfDeclaration(t),mh.Diagnostics.Duplicate_identifier_newTarget_Compiler_uses_variable_declaration_newTarget_to_capture_new_target_meta_property_reference):me(t,mh.Diagnostics.Expression_resolves_to_variable_declaration_newTarget_that_compiler_uses_to_capture_new_target_meta_property_reference),!0})}function Sp(e,t){kp(e,t,"_super")&&(t=mh.getContainingClass(e))&&!mh.isInAmbientContext(t)&&mh.getClassExtendsHeritageClauseElement(t)&&me(e,71!==e.kind?mh.Diagnostics.Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference:mh.Diagnostics.Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference)}function Cp(e,t){Ie>=mh.ModuleKind.ES2015||!kp(e,t,"require")&&!kp(e,t,"exports")||233===e.kind&&1!==mh.getModuleInstanceState(e)||265===(e=ur(e)).kind&&mh.isExternalOrCommonJsModule(e)&&me(t,mh.Diagnostics.Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module,mh.declarationNameToString(t),mh.declarationNameToString(t))}function xp(e,t){4<=de||!kp(e,t,"Promise")||233===e.kind&&1!==mh.getModuleInstanceState(e)||265===(e=ur(e)).kind&&mh.isExternalOrCommonJsModule(e)&&1024&e.flags&&me(t,mh.Diagnostics.Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_containing_async_functions,mh.declarationNameToString(t),mh.declarationNameToString(t))}function Bp(o){var r;146===mh.getRootDeclaration(o).kind&&(r=mh.getContainingFunction(o),function e(t){if(!mh.isTypeNode(t)&&!mh.isDeclarationName(t)){if(179===t.kind)return e(t.expression);if(71!==t.kind)return mh.forEachChild(t,e);var n=Zn(t,t.escapedText,2204607,void 0,void 0,!1);if(n&&n!==ge&&n.valueDeclaration)if(n.valueDeclaration===o)me(t,mh.Diagnostics.Parameter_0_cannot_be_referenced_in_its_initializer,mh.declarationNameToString(o.name));else if(mh.getEnclosingBlockScopeContainer(n.valueDeclaration)===r){if(146===n.valueDeclaration.kind||176===n.valueDeclaration.kind){if(n.valueDeclaration.pos<o.pos)return;if(mh.findAncestor(t,function(e){return e===o.initializer?"quit":mh.isFunctionLike(e.parent)||149===e.parent.kind&&!mh.hasModifier(e.parent,32)&&mh.isClassLike(e.parent.parent)}))return}me(t,mh.Diagnostics.Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it,mh.declarationNameToString(o.name),mh.declarationNameToString(t))}}}(o.initializer))}function Ap(e){return e===oe?K:e===rt?ot:e}function Ip(e){if(up(e),Ce(e.type),e.name)if(144===e.name.kind&&(eu(e.name),e.initializer)&&Rd(e.initializer),176===e.kind&&(174===e.parent.kind&&de<5&&zg(e,4),e.propertyName&&144===e.propertyName.kind&&eu(e.propertyName),o=pr(n=e.parent.parent),t=e.propertyName||e.name,Nu(t=X(o,mh.getTextOfPropertyName(t)),void 0,!1),n.initializer)&&t&&Tu(n,n.initializer,o,t),mh.isBindingPattern(e.name)&&(175===e.name.kind&&de<2&&ue.downlevelIteration&&zg(e,512),mh.forEach(e.name.elements,Ce)),e.initializer&&146===mh.getRootDeclaration(e).kind&&mh.nodeIsMissing(mh.getContainingFunction(e).body))me(e,mh.Diagnostics.A_parameter_initializer_is_only_allowed_in_a_function_or_constructor_implementation);else if(mh.isBindingPattern(e.name))e.initializer&&215!==e.parent.parent.kind&&(Ra(Rd(e.initializer),Tr(e),e,void 0),Bp(e));else{var t,n=fe(e),o=Ap(Sr(n));if(e===n.valueDeclaration?e.initializer&&215!==e.parent.parent.kind&&(Ra(Rd(e.initializer),o,e,void 0),Bp(e)):(t=Ap(Tr(e)),o===he||t===he||Aa(o,t)||me(e.name,mh.Diagnostics.Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2,mh.declarationNameToString(e.name),ke(o),ke(t)),e.initializer&&Ra(Rd(e.initializer),t,e,void 0),o=e,t=n.valueDeclaration,146===o.kind&&226===t.kind||226===o.kind&&146===t.kind||(mh.hasQuestionToken(o)===mh.hasQuestionToken(t)?mh.getSelectedModifierFlags(o,504)===mh.getSelectedModifierFlags(t,504):void 0)||(me(mh.getNameOfDeclaration(n.valueDeclaration),mh.Diagnostics.All_declarations_of_0_must_have_identical_modifiers,mh.declarationNameToString(e.name)),me(e.name,mh.Diagnostics.All_declarations_of_0_must_have_identical_modifiers,mh.declarationNameToString(e.name)))),149!==e.kind&&148!==e.kind){if(ep(e),226===e.kind||176===e.kind){n=e;if(0==(3&mh.getCombinedNodeFlags(n))&&!mh.isParameterDeclaration(n)&&(226!==n.kind||n.initializer)){var r=fe(n);if(1&r.flags){if(!mh.isIdentifier(n.name))throw mh.Debug.fail();var i=Zn(n,n.name.escapedText,3,void 0,void 0,!1);i&&i!==r&&2&i.flags&&3&bu(i)&&((r=208===(r=mh.getAncestor(i.valueDeclaration,227)).parent.kind&&r.parent.parent?r.parent.parent:void 0)&&(207===r.kind&&mh.isFunctionLike(r.parent)||234===r.kind||233===r.kind||265===r.kind)||(r=ye(i),me(n,mh.Diagnostics.Cannot_initialize_outer_scoped_variable_0_in_the_same_scope_as_block_scoped_declaration_1,r,r)))}}}Sp(e,e.name),bp(e,e.name),vp(e,e.name),Cp(e,e.name),xp(e,e.name)}}}function Dp(e){return function(e){if(215!==e.parent.parent.kind&&216!==e.parent.parent.kind)if(mh.isInAmbientContext(e)){if(e.initializer){var t;if(!mh.isConst(e)||e.type)return gh(e,e.initializer.pos-(t="=".length),t,mh.Diagnostics.Initializers_are_not_allowed_in_ambient_contexts);if(!uh(e.initializer))return Be(e.initializer,mh.Diagnostics.A_const_initializer_in_an_ambient_context_must_be_a_string_or_numeric_literal)}if(e.initializer&&(!mh.isConst(e)||!uh(e.initializer)))return gh(e,e.initializer.pos-(t="=".length),t,mh.Diagnostics.Initializers_are_not_allowed_in_ambient_contexts)}else if(!e.initializer){if(mh.isBindingPattern(e.name)&&!mh.isBindingPattern(e.parent))return Be(e,mh.Diagnostics.A_destructuring_declaration_must_have_an_initializer);if(mh.isConst(e))return Be(e,mh.Diagnostics.const_declarations_must_be_initialized)}ue.module===mh.ModuleKind.ES2015||ue.module===mh.ModuleKind.ESNext||ue.module===mh.ModuleKind.System||ue.noEmit||mh.isInAmbientContext(e.parent.parent)||!mh.hasModifier(e.parent.parent,1)||function e(t){if(71===t.kind){if("__esModule"===mh.idText(t))return Be(t,mh.Diagnostics.Identifier_expected_esModule_is_reserved_as_an_exported_marker_when_transforming_ECMAScript_modules)}else for(var n=0,o=t.elements;n<o.length;n++){var r=o[n];if(!mh.isOmittedExpression(r))return e(r.name)}}(e.name),(mh.isLet(e)||mh.isConst(e))&&function e(t){if(71===t.kind){if(110===t.originalKeywordKind)return Be(t,mh.Diagnostics.let_is_not_allowed_to_be_used_as_a_name_in_let_or_const_declarations)}else for(var n=0,o=t.elements;n<o.length;n++){var r=o[n];mh.isOmittedExpression(r)||e(r.name)}}(e.name)}(e),Ip(e)}function Np(e){Xg(e)||$g(e)||dh(e.declarationList)||function(e){if(!function e(t){switch(t.kind){case 211:case 212:case 213:case 220:case 214:case 215:case 216:return!1;case 222:return e(t.parent)}return!0}(e.parent)){if(mh.isLet(e.declarationList))return Be(e,mh.Diagnostics.let_declarations_can_only_be_declared_inside_a_block);mh.isConst(e.declarationList)&&Be(e,mh.Diagnostics.const_declarations_can_only_be_declared_inside_a_block)}}(e),mh.forEach(e.declarationList.declarations,Ce)}function wp(e){e=e.initializer;1<=e.declarations.length&&Dp(e.declarations[0])}function Op(e,t){return Rp(Eu(e),e,!0,void 0!==t)}function Rp(e,t,n,o){return D(e)?e:Pp(e,t,n,o,!0)||K}function Pp(e,t,n,o,r){var i=2<=de,s=!i&&ue.downlevelIteration;if(i||s||o){o=Lp(e,i?t:void 0,o,!0,r);if(o||i)return o}var a,l,r=e,i=!1,o=!1;if(n&&(65536&r.flags?(l=e.types,(a=mh.filter(l,function(e){return!(262178&e.flags)}))!==l&&(r=Y(a,!0))):262178&r.flags&&(r=Pe),(o=r!==e)&&(de<1&&t&&(me(t,mh.Diagnostics.Using_a_string_in_a_for_of_statement_is_only_supported_in_ECMAScript_5_and_higher),i=!0),8192&r.flags)))return _e;return rl(r)?(l=Pi(r,1),o&&l?262178&l.flags?_e:Y([l,_e],!0):l):(t&&!i&&me(t,!n||o?s?mh.Diagnostics.Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:mh.Diagnostics.Type_0_is_not_an_array_type:s?mh.Diagnostics.Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:mh.Diagnostics.Type_0_is_not_an_array_type_or_a_string_type,ke(r)),o?_e:void 0)}function Lp(e,r,i,s,a){if(!D(e))return lc(e,function(e){var t=e;if(i){if(t.iteratedTypeOfAsyncIterable)return t.iteratedTypeOfAsyncIterable;if(Dr(e,Es(!1))||Dr(e,Cs(!1)))return t.iteratedTypeOfAsyncIterable=e.typeArguments[0]}if(s){if(t.iteratedTypeOfIterable)return t.iteratedTypeOfIterable;if(Dr(e,xs(!1))||Dr(e,As(!1)))return t.iteratedTypeOfIterable=e.typeArguments[0]}var n=i&&dr(e,mh.getPropertyNameForKnownSymbolName("asyncIterator")),o=n||s&&dr(e,mh.getPropertyNameForKnownSymbolName("iterator"));if(!D(o)){var o=o&&$(o,0);if(mh.some(o))return o=Mp(Y(mh.map(o,Te),!0),r,!!n),a&&r&&o&&Ra(e,n?(e=o,Ns(Es(!0),[e])):Rs(o),r),n?t.iteratedTypeOfAsyncIterable=o:t.iteratedTypeOfIterable=o;r&&(me(r,i?mh.Diagnostics.Type_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator:mh.Diagnostics.Type_must_have_a_Symbol_iterator_method_that_returns_an_iterator),r=void 0)}})}function Mp(e,t,n){if(!D(e)){var o=e;if(n?o.iteratedTypeOfAsyncIterator:o.iteratedTypeOfIterator)return n?o.iteratedTypeOfAsyncIterator:o.iteratedTypeOfIterator;if(Dr(e,(n?Ss:Bs)(!1)))return n?o.iteratedTypeOfAsyncIterator=e.typeArguments[0]:o.iteratedTypeOfIterator=e.typeArguments[0];e=dr(e,"next");if(!D(e)){e=e?$(e,0):mh.emptyArray;if(0!==e.length){e=Y(mh.map(e,Te),!0);if(!(D(e)||n&&D(e=tp(e,t,mh.Diagnostics.The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value_property)))){e=e&&dr(e,"value");if(e)return n?o.iteratedTypeOfAsyncIterator=e:o.iteratedTypeOfIterator=e;t&&me(t,n?mh.Diagnostics.The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value_property:mh.Diagnostics.The_type_returned_by_the_next_method_of_an_iterator_must_have_a_value_property)}}else t&&me(t,n?mh.Diagnostics.An_async_iterator_must_have_a_next_method:mh.Diagnostics.An_iterator_must_have_a_next_method)}}}function Fp(e,t){if(!D(e))return Lp(e,void 0,t,!t,!1)||Mp(e,void 0,t)}function Up(e){return 153===e.kind&&void 0!==mh.getEffectiveSetAccessorTypeAnnotationNode(mh.getDeclarationOfKind(e.symbol,154))}function Hp(e,t){e=2==(3&mh.getFunctionFlags(e))?np(t):t;return e&&Td(e,1025)}function Vp(n){var e,o=Qi(n.symbol,1),r=Qi(n.symbol,0),i=Pi(n,0),s=Pi(n,1);if((i||s)&&(mh.forEach(bi(n),function(e){var t=z(e);u(e,t,n,r,i,0),u(e,t,n,o,s,1)}),1&w(n))&&mh.isClassLike(n.symbol.valueDeclaration))for(var t=0,a=n.symbol.valueDeclaration.members;t<a.length;t++){var l,c=a[t];!mh.hasModifier(c,32)&&mh.hasDynamicName(c)&&(l=z(c.symbol),u(c.symbol,l,n,r,i,0),u(c.symbol,l,n,o,s,1))}function u(t,e,n,o,r,i){var s,a;r&&(s=t.valueDeclaration,1!==i||(s?Qc(mh.getNameOfDeclaration(s)):Zc(t.escapedName)))&&(!s||194!==s.kind&&144!==mh.getNameOfDeclaration(s).kind&&t.parent!==n.symbol?o?a=o:2&w(n)&&(a=mh.forEach(Kr(n),function(e){return vi(e,t.escapedName)&&Pi(e,i)})?void 0:n.symbol.declarations[0]):a=s,a)&&!Ee(e,r)&&me(a,0===i?mh.Diagnostics.Property_0_of_type_1_is_not_assignable_to_string_index_type_2:mh.Diagnostics.Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2,ye(t),ke(e),ke(r))}(e=i&&s&&!(e=o||r)&&2&w(n)?mh.forEach(Kr(n),function(e){return Pi(e,0)&&Pi(e,1)})?void 0:n.symbol.declarations[0]:e)&&!Ee(s,i)&&me(e,mh.Diagnostics.Numeric_index_type_0_is_not_assignable_to_string_index_type_1,ke(s),ke(i))}function Wp(e,t){switch(e.escapedText){case"any":case"number":case"boolean":case"string":case"symbol":case"void":case"object":me(e,t,e.escapedText)}}function Gp(e){if(e)for(var t=!1,n=0;n<e.length;n++){var o=e[n];if(Vd(o),ce){o.default?t=!0:t&&me(o,mh.Diagnostics.Required_type_parameters_may_not_follow_optional_type_parameters);for(var r=0;r<n;r++)e[r].symbol===o.symbol&&me(o.name,mh.Diagnostics.Duplicate_identifier_0,mh.declarationNameToString(o.name))}}}function Kp(e){if(1!==e.declarations.length){var t=p(e);if(!t.typeParametersChecked){t.typeParametersChecked=!0;t=mh.filter(e.declarations,function(e){return 229===e.kind||230===e.kind});if(!(t.length<=1)&&!function(e,t){for(var n=mh.length(t),o=Vi(t),r=0,i=e;r<i.length;r++){var s=i[r],a=mh.length(s.typeParameters);if(a<o||n<a)return;for(var l=0;l<a;l++){var c=s.typeParameters[l],u=t[l];if(c.name.escapedText!==u.symbol.escapedName)return;var d=c.constraint&&q(c.constraint),p=ts(u);if((d||p)&&(!d||!p||!Aa(d,p)))return;d=c.default&&q(c.default),p=Ai(u);if(d&&p&&!Aa(d,p))return}}return 1}(t,be(e).localTypeParameters))for(var n=ye(e),o=0,r=t;o<r.length;o++)me(r[o].name,mh.Diagnostics.All_declarations_of_0_must_have_identical_type_parameters,n)}}}function jp(e){t=e,r=mh.getSourceFileOfNode(t),function(e){var t=!1,n=!1;if(!Xg(e)&&!$g(e)&&e.heritageClauses)for(var o=0,r=e.heritageClauses;o<r.length;o++){var i=r[o];if(85===i.token){if(t)return xe(i,mh.Diagnostics.extends_clause_already_seen);if(n)return xe(i,mh.Diagnostics.extends_clause_must_precede_implements_clause);if(1<i.types.length)return xe(i.types[1],mh.Diagnostics.Classes_can_only_extend_a_single_class);t=!0}else{if(mh.Debug.assert(108===i.token),n)return xe(i,mh.Diagnostics.implements_clause_already_seen);n=!0}th(i)}}(t)||Jg(t.typeParameters,r),up(e),e.name&&(Wp(e.name,mh.Diagnostics.Class_name_cannot_be_0),bp(e,e.name),vp(e,e.name),Cp(e,e.name),xp(e,e.name)),Gp(e.typeParameters),ep(e);for(var t=fe(e),n=be(t),o=ii(n),r=z(t),t=(Kp(t),e),i=mh.createUnderscoreEscapedMap(),L=mh.createUnderscoreEscapedMap(),s=0,a=t.members;s<a.length;s++){var l=a[s];if(152===l.kind)for(var c=0,u=l.parameters;c<u.length;c++){var d=u[c];mh.isParameterPropertyDeclaration(d)&&!mh.isBindingPattern(d.name)&&h(i,d.name,d.name.escapedText,3)}else{var p=mh.hasModifier(l,32)?L:i,g=l.name&&mh.getPropertyNameForPropertyNameNode(l.name);if(g)switch(l.kind){case 153:h(p,l.name,g,1);break;case 154:h(p,l.name,g,2);break;case 149:h(p,l.name,g,3);break;case 151:h(p,l.name,g,4)}}}function h(e,t,n,o){var r=e.get(n);r?4&r?4!==o&&me(t,mh.Diagnostics.Duplicate_identifier_0,mh.getTextOfNode(t)):r&o?me(t,mh.Diagnostics.Duplicate_identifier_0,mh.getTextOfNode(t)):e.set(n,r|o):e.set(n,o)}if(!mh.isInAmbientContext(e))for(var _=e,m=0,M=_.members;m<M.length;m++){var F=M[m],f=F.name;if(mh.hasModifier(F,32)&&f){var U=mh.getPropertyNameForPropertyNameNode(f);switch(U){case"name":case"length":case"caller":case"arguments":case"prototype":me(f,mh.Diagnostics.Static_property_0_conflicts_with_built_in_property_Function_0_of_constructor_function_1,U,or(fe(_)))}}}var y,k=mh.getClassExtendsHeritageClauseElement(e);if(k){de<2&&zg(k.parent,1);t=Kr(n);if(t.length&&ce){var b,v=t[0],t=Gr(n),T=G(t);if(w=k,(b=$(y=T,1)).length&&(b=b[0].declaration)&&mh.hasModifier(b,8)&&(pg(w,Xp(y.symbol))||me(w,mh.Diagnostics.Cannot_extend_a_class_0_Class_constructor_is_marked_as_private,mo(y.symbol))),Ce(k.expression),mh.some(k.typeArguments)){mh.forEach(k.typeArguments,Ce);for(var E=0,H=Vr(T,k.typeArguments,k);E<H.length&&$d(H[E].typeParameters,k.typeArguments);E++);}Ra(o,ii(v,n.thisType),e.name||e,mh.Diagnostics.Class_0_incorrectly_extends_base_class_1),Ra(r,Ba(T),e.name||e,mh.Diagnostics.Class_static_side_0_incorrectly_extends_base_class_static_side_1),540672&t.flags&&!Fr(r)&&me(e.name||e,mh.Diagnostics.A_mixin_class_must_have_a_constructor_with_a_single_rest_parameter_of_type_any),T.symbol&&32&T.symbol.flags||540672&t.flags||(b=Wr(T,k.typeArguments,k),mh.forEach(b,function(e){return Te(e)!==v})&&me(k.expression,mh.Diagnostics.Base_constructors_must_all_have_the_same_return_type));for(var S=n,C=v,x=0,V=ve(C);x<V.length;x++){var B,A,I,D=V[x],N=zp(D);4194304&N.flags||(B=zp(vi(S,N.escapedName)),A=mh.getDeclarationModifierFlagsFromSymbol(N),mh.Debug.assert(!!B,"derived should point to something, even if it is the base class' declaration."),B&&(B===N?(I=Xp(S.symbol),!(128&A)||I&&mh.hasModifier(I,128)||(199===I.kind?me(I,mh.Diagnostics.Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1,ye(D),ke(C)):me(I,mh.Diagnostics.Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2,ke(S),ye(D),ke(C)))):(I=mh.getDeclarationModifierFlagsFromSymbol(B),8&A||8&I||vu(N)&&vu(B)||98308&N.flags&&98308&B.flags||(D=void 0,D=vu(N)?98304&B.flags?mh.Diagnostics.Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_accessor:mh.Diagnostics.Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_property:4&N.flags?mh.Diagnostics.Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_function:mh.Diagnostics.Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_function,me(mh.getNameOfDeclaration(B.valueDeclaration)||B.valueDeclaration,D,ke(C),ye(N),ke(S))))))}}}var w=mh.getClassImplementsHeritageClauseElements(e);if(w)for(var O=0,W=w;O<W.length;O++){var R,P=W[O];mh.isEntityNameExpression(P.expression)||me(P.expression,mh.Diagnostics.A_class_can_only_implement_an_identifier_Slashqualified_name_with_optional_type_arguments),Yd(P),ce&&(R=q(P))!==he&&(jr(R)?Ra(o,ii(R,n.thisType),e.name||e,mh.Diagnostics.Class_0_incorrectly_implements_interface_1):me(P,mh.Diagnostics.A_class_may_only_implement_another_class_or_interface))}ce&&(Vp(n),jd(e))}function zp(e){return 1&mh.getCheckFlags(e)?e.target:e}function Xp(e){return mh.forEach(e.declarations,function(e){return mh.isClassLike(e)?e:void 0})}function $p(e){var t=j(e);if(!(16384&t.flags)){t.flags|=16384;for(var n=0,o=0,r=e.members;o<r.length;o++)var i=r[o],s=function(e,t){gr(e.name)?me(e.name,mh.Diagnostics.Computed_property_names_are_not_allowed_in_enums):Zc(n=mh.getTextOfPropertyName(e.name))&&"Infinity"!==n&&"-Infinity"!==n&&"NaN"!==n&&me(e.name,mh.Diagnostics.An_enum_member_cannot_have_a_numeric_name);if(!e.initializer)return!mh.isInAmbientContext(e.parent)||mh.isConst(e.parent)?void 0!==t?t:void me(e.name,mh.Diagnostics.Enum_member_must_have_initializer):void 0;var a=e,n=$r(fe(a.parent)),t=mh.isConst(a.parent),e=a.initializer,o=1!==n||Xr(a)?l(e):void 0;if(void 0!==o)t&&"number"==typeof o&&!isFinite(o)&&me(e,isNaN(o)?mh.Diagnostics.const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN:mh.Diagnostics.const_enum_member_initializer_was_evaluated_to_a_non_finite_value);else{if(1===n)return me(e,mh.Diagnostics.Computed_values_are_not_permitted_in_an_enum_with_string_valued_members),0;t?me(e,mh.Diagnostics.In_const_enum_declarations_member_initializer_must_be_constant_expression):mh.isInAmbientContext(a.parent)?me(e,mh.Diagnostics.In_ambient_enum_declarations_member_initializer_must_be_constant_expression):Ra(Se(e),be(fe(a.parent)),e,void 0)}return o;function l(e){switch(e.kind){case 192:var t=l(e.operand);if("number"==typeof t)switch(e.operator){case 37:return t;case 38:return-t;case 52:return~t}break;case 194:var n=l(e.left),o=l(e.right);if("number"==typeof n&&"number"==typeof o)switch(e.operatorToken.kind){case 49:return n|o;case 48:return n&o;case 46:return n>>o;case 47:return n>>>o;case 45:return n<<o;case 50:return n^o;case 39:return n*o;case 41:return n/o;case 37:return n+o;case 38:return n-o;case 42:return n%o}break;case 9:return e.text;case 8:return _h(e),+e.text;case 185:return l(e.expression);case 71:return mh.nodeIsMissing(e)?0:c(e,fe(a.parent),e.escapedText);case 180:case 179:var r=e;if(function e(t){return 71===t.kind||179===t.kind&&e(t.expression)||180===t.kind&&e(t.expression)&&9===t.argumentExpression.kind}(r)){var i,s=Hd(r.expression);if(s.symbol&&384&s.symbol.flags)return i=void 0,i=179===r.kind?r.name.escapedText:(r=r.argumentExpression,mh.Debug.assert(mh.isLiteralExpression(r)),mh.escapeLeadingUnderscores(r.text)),c(e,s.symbol,i)}}}function c(e,t,n){t=t.exports.get(n);if(t){n=t.valueDeclaration;if(n!==a)return Qn(n,a)?j(n).enumMemberValue:(me(e,mh.Diagnostics.A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums),0)}}}(i,n),n="number"==typeof(j(i).enumMemberValue=s)?s+1:void 0}}function Yp(e){if(ce){var t=mh.isGlobalScopeAugmentation(e),n=mh.isInAmbientContext(e),o=(t&&!n&&me(e.name,mh.Diagnostics.Augmentations_for_the_global_scope_should_have_declare_modifier_unless_they_appear_in_already_ambient_context),mh.isAmbientModule(e));if(eg(e,o?mh.Diagnostics.An_ambient_module_declaration_is_only_allowed_at_the_top_level_in_a_file:mh.Diagnostics.A_namespace_declaration_is_only_allowed_in_a_namespace_or_module))return;Xg(e)||$g(e)||n||9!==e.name.kind||Be(e.name,mh.Diagnostics.Only_ambient_modules_can_use_quoted_names),mh.isIdentifier(e.name)&&(bp(e,e.name),Cp(e,e.name),xp(e,e.name)),ep(e);var r=fe(e);if(512&r.flags&&1<r.declarations.length&&!n&&Th(e,ue.preserveConstEnums||ue.isolatedModules)&&((n=function(){for(var e=0,t=r.declarations;e<t.length;e++){var n=t[e];if((229===n.kind||228===n.kind&&mh.nodeIsPresent(n.body))&&!mh.isInAmbientContext(n))return n}}())&&(mh.getSourceFileOfNode(e)!==mh.getSourceFileOfNode(n)?me(e.name,mh.Diagnostics.A_namespace_declaration_cannot_be_in_a_different_file_from_a_class_or_function_with_which_it_is_merged):e.pos<n.pos&&me(e.name,mh.Diagnostics.A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged)),n=mh.getDeclarationOfKind(r,229))&&(n=n,a=mh.getEnclosingBlockScopeContainer(e),n=mh.getEnclosingBlockScopeContainer(n),qn(a)?qn(n):!qn(n)&&a===n)&&(j(e).flags|=32768),o)if(mh.isExternalModuleAugmentation(e)){if((t||33554432&fe(e).flags)&&e.body)for(var i=0,s=e.body.statements;i<s.length;i++)!function e(t,n){switch(t.kind){case 208:for(var o=0,r=t.declarationList.declarations;o<r.length;o++)e(r[o],n);break;case 243:case 244:xe(t,mh.Diagnostics.Exports_and_export_assignments_are_not_permitted_in_module_augmentations);break;case 237:case 238:xe(t,mh.Diagnostics.Imports_are_not_permitted_in_module_augmentations_Consider_moving_them_to_the_enclosing_external_module);break;case 176:case 226:var i=t.name;if(mh.isBindingPattern(i)){for(var s=0,a=i.elements;s<a.length;s++)e(a[s],n);break}case 229:case 232:case 228:case 230:case 233:case 231:if(n)return;i=fe(t);i&&(!(33554432&i.flags)||mh.isExternalModuleAugmentation(i.parent.declarations[0]))}}(s[i],t)}else qn(e.parent)?t?me(e.name,mh.Diagnostics.Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_declarations):mh.isExternalModuleNameRelative(mh.getTextOfIdentifierOrLiteral(e.name))&&me(e.name,mh.Diagnostics.Ambient_module_declaration_cannot_specify_relative_module_name):me(e.name,t?mh.Diagnostics.Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_declarations:mh.Diagnostics.Ambient_modules_cannot_be_nested_in_other_modules_or_namespaces)}var a;e.body&&(Ce(e.body),mh.isGlobalScopeAugmentation(e)||gp(e))}function qp(e){switch(e.kind){case 71:return e;case 143:for(;71!==(e=e.left).kind;);return e;case 179:for(;71!==(e=e.expression).kind;);return e}}function Jp(e){var t,n=mh.getExternalModuleName(e);return mh.nodeIsMissing(n)||9===n.kind?(t=234===e.parent.kind&&mh.isAmbientModule(e.parent.parent),265===e.parent.kind||t?!t||!mh.isExternalModuleNameRelative(mh.getTextOfIdentifierOrLiteral(n))||tr(e)||(me(e,mh.Diagnostics.Import_or_export_declaration_in_an_ambient_module_declaration_cannot_reference_module_through_relative_module_name),0):(me(n,244===e.kind?mh.Diagnostics.Export_declarations_are_not_permitted_in_a_namespace:mh.Diagnostics.Import_declarations_in_a_namespace_cannot_reference_a_module),0)):(me(n,mh.Diagnostics.String_literal_expected),0)}function Qp(e){var t,n=fe(e),o=po(n);o!==ge&&(t=(1156031&n.flags?107455:0)|(793064&n.flags?793064:0)|(1920&n.flags?1920:0),o.flags&t&&me(e,246===e.kind?mh.Diagnostics.Export_declaration_conflicts_with_exported_declaration_of_0:mh.Diagnostics.Import_declaration_conflicts_with_local_declaration_of_0,ye(n)),!ue.isolatedModules||246!==e.kind||107455&o.flags||mh.isInAmbientContext(e)||me(e,mh.Diagnostics.Cannot_re_export_a_type_when_the_isolatedModules_flag_is_provided))}function Zp(e){bp(e,e.name),Cp(e,e.name),xp(e,e.name),Qp(e)}function eg(e,t){var n=265===e.parent.kind||234===e.parent.kind||233===e.parent.kind;return n||xe(e,t),!n}function tg(e){var t,n;Qp(e),e.parent.parent.moduleSpecifier||((n=Zn(t=e.propertyName||e.name,t.escapedText,2998271,void 0,void 0,!0))&&(n===_||qn(ur(n.declarations[0])))?me(t,mh.Diagnostics.Cannot_export_0_Only_local_declarations_can_be_exported_from_a_module,mh.idText(t)):go(e))}function ng(e){var t,e=fe(e),n=p(e);n.exportsChecked||((t=e.exports.get("export="))&&mh.forEachEntry(e.exports,function(e,t){return"export="!==t})&&(tr(t=io(t)||t.valueDeclaration)||me(t,mh.Diagnostics.An_export_assignment_cannot_be_used_in_a_module_with_other_exported_elements)),(t=Bo(e))&&t.forEach(function(e,t){var n=e.declarations,e=e.flags;if("__export"!==t&&!(1984&e)){var o=mh.countWhere(n,Bn);if(!(524288&e&&o<=2)&&1<o)for(var r=0,i=n;r<i.length;r++){var s=i[r];og(s)&&en.add(mh.createDiagnosticForNode(s,mh.Diagnostics.Cannot_redeclare_exported_variable_0,mh.unescapeLeadingUnderscores(t)))}}}),n.exportsChecked=!0)}function og(e){return 228!==e.kind&&151!==e.kind||!!e.body}function Ce(e){if(e){if(mh.isInJavaScriptFile(e)&&e.jsDoc)for(var L=0,M=e.jsDoc;L<M.length;L++){var F=M[L].tags;mh.forEach(F,Ce)}var U=e.kind;if(Ae)switch(U){case 233:case 229:case 230:case 228:Ae.throwIfCancellationRequested()}switch(U){case 145:return Vd(e);case 146:return Wd(e);case 149:case 148:return Xg(P=e)||$g(P)||function(e){if(mh.isClassLike(e.parent)){if(lh(e.name,mh.Diagnostics.A_computed_property_name_in_a_class_property_declaration_must_directly_refer_to_a_built_in_symbol))return 1}else if(230===e.parent.kind){if(lh(e.name,mh.Diagnostics.A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol))return 1;if(e.initializer)return Be(e.initializer,mh.Diagnostics.An_interface_property_cannot_have_an_initializer)}else if(163===e.parent.kind){if(lh(e.name,mh.Diagnostics.A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol))return 1;if(e.initializer)return Be(e.initializer,mh.Diagnostics.A_type_literal_property_cannot_have_an_initializer)}return mh.isInAmbientContext(e)&&e.initializer&&xe(e.initializer,mh.Diagnostics.Initializers_are_not_allowed_in_ambient_contexts)}(P)||oh(P.name),void Ip(P);case 160:case 161:case 155:case 156:case 157:return Gd(e);case 151:case 150:return ch(P=e)||oh(P.name),pp(P),void(mh.hasModifier(P,128)&&P.body&&me(P,mh.Diagnostics.Method_0_cannot_have_an_implementation_because_it_is_marked_abstract,mh.declarationNameToString(P.name)));case 152:var t=e,n=(Gd(t),t.typeParameters&&gh(t,t.typeParameters.pos,t.typeParameters.end-t.typeParameters.pos,mh.Diagnostics.Type_parameters_cannot_appear_on_a_constructor_declaration)||t.type&&Be(t.type,mh.Diagnostics.Type_annotation_cannot_appear_on_a_constructor_declaration),Ce(t.body),gp(t),fe(t));if(t===mh.getDeclarationOfKind(n,t.kind)&&Zd(n),!mh.nodeIsMissing(t.body)&&ce){n=t.parent;if(mh.getClassExtendsHeritageClauseElement(n)){Bc(t.parent,n);var n=Dc(n),o=Ic(t);if(o){if(n&&me(o,mh.Diagnostics.A_constructor_cannot_contain_a_super_call_when_its_class_extends_null),mh.some(t.parent.members,function(e){return 149===e.kind&&!mh.hasModifier(e,32)&&!!e.initializer})||mh.some(t.parameters,function(e){return mh.hasModifier(e,92)})){for(var H=void 0,V=0,W=t.body.statements;V<W.length;V++){var G=W[V];if(210===G.kind&&mh.isSuperCall(G.expression)){H=G;break}if(!mh.isPrologueDirective(G))break}H||me(t,mh.Diagnostics.A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_properties_or_has_parameter_properties)}}else n||me(t,mh.Diagnostics.Constructors_for_derived_classes_must_contain_a_super_call)}}return;case 153:case 154:return zd(e);case 159:return Yd(e);case 158:o=e,n=function(e){switch(e.parent.kind){case 187:case 155:case 228:case 186:case 160:case 151:case 150:var t=e.parent;if(e===t.type)return t}}(o);if(n){var r=Gi(n).typePredicate;if(r){Ce(o.type);var K=o.parameterName;if(mh.isThisTypePredicate(r))pa(K);else if(0<=r.parameterIndex)n.parameters[r.parameterIndex].dotDotDotToken?me(K,mh.Diagnostics.A_type_predicate_cannot_reference_a_rest_parameter):(t=mh.chainDiagnosticMessages(void 0,mh.Diagnostics.A_type_predicate_s_type_must_be_assignable_to_its_parameter_s_type),Ra(r.type,mg(n.parameters[r.parameterIndex]),o.type,void 0,t));else if(K){for(var j=!1,z=0,X=n.parameters;z<X.length;z++){var $=X[z].name;if(mh.isBindingPattern($)&&function e(t,n,o){for(var r=0,i=t.elements;r<i.length;r++){var s=i[r];if(!mh.isOmittedExpression(s)){if(71===(s=s.name).kind&&s.escapedText===o)return me(n,mh.Diagnostics.A_type_predicate_cannot_reference_element_0_in_a_binding_pattern,o),1;if((175===s.kind||174===s.kind)&&e(s,n,o))return 1}}}($,K,r.parameterName)){j=!0;break}}j||me(o.parameterName,mh.Diagnostics.Cannot_find_parameter_0,r.parameterName)}}}else me(o,mh.Diagnostics.A_type_predicate_is_only_allowed_in_return_type_position_for_functions_and_methods);return;case 162:return void _s(e);case 163:return R=e,mh.forEach(R.members,Ce),void(ce&&(Vp(na(R)),jd(R),Kd(R)));case 164:return void Ce(e.elementType);case 165:return qg((R=e).elementTypes)||0!==R.elementTypes.length||Be(R,mh.Diagnostics.A_tuple_type_element_list_cannot_be_empty),void mh.forEach(R.elementTypes,Ce);case 166:case 167:return void mh.forEach(e.types,Ce);case 168:case 170:return Ce(e.type);case 277:return D=e,O=mh.getJSDocHost(D),void(mh.isClassDeclaration(O)||mh.isClassExpression(O)?(N=mh.getAllJSDocTagsOfKind(O,277),mh.Debug.assert(0<N.length),1<N.length&&me(N[1],mh.Diagnostics.Class_declarations_cannot_have_more_than_one_augments_or_extends_tag),N=dp(D.class.expression),(w=mh.getClassExtendsHeritageClauseElement(O))&&(w=dp(w.expression))&&N.escapedText!==w.escapedText&&me(N,mh.Diagnostics.JSDoc_0_1_does_not_match_the_extends_2_clause,mh.idText(D.tagName),mh.idText(N),mh.idText(w))):me(O,mh.Diagnostics.JSDoc_0_is_not_attached_to_a_class,mh.idText(D.tagName)));case 283:return void(e.typeExpression||me(e.name,mh.Diagnostics.JSDoc_typedef_tag_should_either_have_a_type_annotation_or_be_followed_by_property_or_member_tags));case 279:return Ce((N=e).typeExpression),void(mh.getParameterSymbolFromJSDoc(N)||me(N.name,mh.Diagnostics.JSDoc_param_tag_has_name_0_but_there_is_no_parameter_with_that_name,mh.idText(143===N.name.kind?N.name.right:N.name)));case 273:Gd(e);case 274:case 271:case 270:case 268:case 269:return void(mh.isInJavaScriptFile(e)||mh.isInJSDoc(e)||Be(e,mh.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments));case 267:return Ce(e.type);case 171:return Ce((w=e).objectType),Ce(w.indexType),void qd(ea(w),w);case 172:return Ce((O=e).typeParameter),Ce(O.type),void Ra(mi(ta(O)),_e,O.typeParameter.constraint);case 228:return D=e,void(ce&&(pp(D),rh(D),Sp(D,D.name),bp(D,D.name),vp(D,D.name),Cp(D,D.name),xp(D,D.name)));case 207:case 234:return yp(e);case 208:return Np(e);case 210:return hh(I=e),void Se(I.expression);case 211:return hh(I=e),Se(I.expression),Ce(I.thenStatement),209===I.thenStatement.kind&&me(I.thenStatement,mh.Diagnostics.The_body_of_an_if_statement_cannot_be_the_empty_statement),void Ce(I.elseStatement);case 212:return hh(le=e),Ce(le.statement),void Se(le.expression);case 213:return hh(le=e),Se(le.expression),void Ce(le.statement);case 214:return hh(A=e)||A.initializer&&227===A.initializer.kind&&dh(A.initializer),A.initializer&&(227===A.initializer.kind?mh.forEach(A.initializer.declarations,Dp):Se(A.initializer)),A.condition&&Se(A.condition),A.incrementor&&Se(A.incrementor),Ce(A.statement),void(A.locals&&gp(A));case 215:return sh(A=e),ae=Eu(A.expression),227===A.initializer.kind?((C=A.initializer.declarations[0])&&mh.isBindingPattern(C.name)&&me(C.name,mh.Diagnostics.The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern),wp(A)):(x=Se(C=A.initializer),177===C.kind||178===C.kind?me(C,mh.Diagnostics.The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern):Ee((B=Xs(ae))!==Pe?B:_e,x)?vd(C,mh.Diagnostics.The_left_hand_side_of_a_for_in_statement_must_be_a_variable_or_a_property_access):me(C,mh.Diagnostics.The_left_hand_side_of_a_for_in_statement_must_be_of_type_string_or_any)),Ed(ae,17317888)||me(A.expression,mh.Diagnostics.The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter),Ce(A.statement),void(A.locals&&gp(A));case 216:return sh(B=e),216===B.kind&&(B.awaitModifier?2==(6&mh.getFunctionFlags(mh.getContainingFunction(B)))&&de<5&&zg(B,16384):ue.downlevelIteration&&de<2&&zg(B,256)),227===B.initializer.kind?wp(B):(x=B.initializer,C=Op(B.expression,B.awaitModifier),177===x.kind||178===x.kind?Ad(x,C||he):(ae=Se(x),vd(x,mh.Diagnostics.The_left_hand_side_of_a_for_of_statement_must_be_a_variable_or_a_property_access),C&&Ra(C,ae,x,void 0))),Ce(B.statement),void(B.locals&&gp(B));case 217:case 218:var i=e;if(!hh(i)){for(var s=i,a=s;a;){if(mh.isFunctionLike(a))return void Be(s,mh.Diagnostics.Jump_target_cannot_cross_function_boundary);switch(a.kind){case 222:if(s.label&&a.label.escapedText===s.label.escapedText)return void(217!==s.kind||mh.isIterationStatement(a.statement,!0)||Be(s,mh.Diagnostics.A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement));break;case 221:if(218!==s.kind||s.label)break;return;default:if(mh.isIterationStatement(a,!1)&&!s.label)return}a=a.parent}s.label?Be(s,218===s.kind?mh.Diagnostics.A_break_statement_can_only_jump_to_a_label_of_an_enclosing_statement:mh.Diagnostics.A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement):Be(s,218===s.kind?mh.Diagnostics.A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement:mh.Diagnostics.A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement)}return;case 219:return hh(i=e)||mh.getContainingFunction(i)||xe(i,mh.Diagnostics.A_return_statement_can_only_be_used_within_a_function_body),void((S=mh.getContainingFunction(i))&&(b=Te(Gi(S)),pe||i.expression||8192&b.flags?(v=i.expression?Rd(i.expression):De,1&(T=mh.getFunctionFlags(S))||(154===S.kind?i.expression&&me(i,mh.Diagnostics.Setters_cannot_return_a_value):152===S.kind?i.expression&&!Ra(v,b,i)&&me(i,mh.Diagnostics.Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class):(mh.getEffectiveReturnTypeNode(S)||Up(S))&&(2&T?(T=np(b),E=op(v,i,mh.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member),T&&Ra(E,T,i)):Ra(v,b,i)))):152!==S.kind&&ue.noImplicitReturns&&!Hp(S,b)&&me(i,mh.Diagnostics.Not_all_code_paths_return_a_value)));case 220:return hh(E=e)||16384&E.flags&&xe(E,mh.Diagnostics.with_statements_are_not_allowed_in_an_async_function_block),Se(E.expression),void(ph(T=mh.getSourceFileOfNode(E))||gh(T,T=mh.getSpanOfTokenAtPosition(T,E.pos).start,E.statement.pos-T,mh.Diagnostics.The_with_statement_is_not_supported_All_symbols_in_a_with_block_will_have_type_any));case 221:return hh(k=e),re=!1,ie=Se(k.expression),se=al(ie),mh.forEach(k.caseBlock.clauses,function(e){var t,n,o,r;258!==e.kind||re||(void 0===oe?oe=e:(gh(t=mh.getSourceFileOfNode(k),t=mh.skipTrivia(t.text,e.pos),(0<e.statements.length?e.statements[0].pos:e.end)-t,mh.Diagnostics.A_default_clause_cannot_appear_more_than_once_in_a_switch_statement),re=!0)),ce&&257===e.kind&&(o=al(n=Se((t=e).expression)),r=ie,o&&se||(n=o?ll(n):n,r=ll(ie)),Id(r,n)||Pa(n,r,t.expression,void 0)),mh.forEach(e.statements,Ce)}),void(k.caseBlock.locals&&gp(k.caseBlock));case 222:return hh(y=e)||mh.findAncestor(y.parent,function(e){return mh.isFunctionLike(e)?"quit":222===e.kind&&e.label.escapedText===y.label.escapedText?(e=mh.getSourceFileOfNode(y),Be(y.label,mh.Diagnostics.Duplicate_label_0,mh.getTextOfNodeFromSourceText(e.text,y.label)),!0):void 0}),void Ce(y.statement);case 223:return hh(v=e)||void 0===v.expression&&(S=v,b=mh.Diagnostics.Line_break_not_permitted_here,ph(f=mh.getSourceFileOfNode(S))||(S=mh.getSpanOfTokenAtPosition(f,S.pos),en.add(mh.createFileDiagnostic(f,mh.textSpanEnd(S),0,b,void 0,void 0,void 0)))),void(v.expression&&Se(v.expression));case 224:return hh(f=e),yp(f.tryBlock),(l=f.catchClause)&&(l.variableDeclaration&&(l.variableDeclaration.type?xe(l.variableDeclaration.type,mh.Diagnostics.Catch_clause_variable_cannot_have_a_type_annotation):l.variableDeclaration.initializer?xe(l.variableDeclaration.initializer,mh.Diagnostics.Catch_clause_variable_cannot_have_an_initializer):(ne=l.block.locals)&&mh.forEachKey(l.locals,function(e){var t=ne.get(e);t&&0!=(2&t.flags)&&Be(t.valueDeclaration,mh.Diagnostics.Cannot_redeclare_identifier_0_in_catch_clause,e)})),yp(l.block)),void(f.finallyBlock&&yp(f.finallyBlock));case 226:return Dp(e);case 176:var l=e,c=l;if(c.dotDotDotToken)m=c.parent.elements,c!==mh.lastOrUndefined(m)?Be(c,mh.Diagnostics.A_rest_element_must_be_last_in_a_destructuring_pattern):175===c.name.kind||174===c.name.kind?Be(c.name,mh.Diagnostics.A_rest_element_cannot_contain_a_binding_pattern):c.initializer&&gh(c,c.initializer.pos-1,1,mh.Diagnostics.A_rest_element_cannot_have_an_initializer);return Ip(l);case 229:return(m=e).name||mh.hasModifier(m,512)||xe(m,mh.Diagnostics.A_class_declaration_without_the_default_modifier_must_have_a_name),jp(m),mh.forEach(m.members,Ce),void gp(m);case 230:var u=e;if(Xg(u)||$g(u)||function(){var e=!1;if(u.heritageClauses)for(var t=0,n=u.heritageClauses;t<n.length;t++){var o=n[t];if(85!==o.token)return mh.Debug.assert(108===o.token),xe(o,mh.Diagnostics.Interface_declaration_cannot_have_implements_clause);if(e)return xe(o,mh.Diagnostics.extends_clause_already_seen);e=!0,th(o)}}(),Gp(u.typeParameters),ce){Wp(u.name,mh.Diagnostics.Interface_name_cannot_be_0),ep(u);c=fe(u);if(Kp(c),u===mh.getDeclarationOfKind(c,230)){var Y=be(c),q=ii(Y);if(function(t,e){var n=Kr(t);if(n.length<2)return 1;var o=mh.createUnderscoreEscapedMap();mh.forEach(ri(t).declaredProperties,function(e){o.set(e.escapedName,{prop:e,containingType:t})});for(var r=!0,i=0,s=n;i<s.length;i++)for(var a=s[i],l=0,c=ve(ii(a,t.thisType));l<c.length;l++){var u,d,p=c[l],g=o.get(p.escapedName);g?g.containingType!==t&&0===Za(g.prop,p,Ia)&&(r=!1,g=ke(g.containingType),u=ke(a),d=mh.chainDiagnosticMessages(void 0,mh.Diagnostics.Named_property_0_of_types_1_and_2_are_not_identical,ye(p),g,u),d=mh.chainDiagnosticMessages(d,mh.Diagnostics.Interface_0_cannot_simultaneously_extend_types_1_and_2,ke(t),g,u),en.add(mh.createDiagnosticForNodeFromMessageChain(e,d))):o.set(p.escapedName,{prop:p,containingType:a})}return r}(Y,u.name)){for(var J=0,Q=Kr(Y);J<Q.length;J++)Ra(q,ii(Q[J],Y.thisType),u.name,mh.Diagnostics.Interface_0_incorrectly_extends_interface_1);Vp(Y)}}Kd(u)}return mh.forEach(mh.getInterfaceBaseTypeNodes(u),function(e){mh.isEntityNameExpression(e.expression)||me(e.expression,mh.Diagnostics.An_interface_can_only_extend_an_identifier_Slashqualified_name_with_optional_type_arguments),Yd(e)}),mh.forEach(u.members,Ce),void(ce&&(jd(u),gp(u)));case 231:return Xg(_=e)||$g(_),Wp(_.name,mh.Diagnostics.Type_alias_name_cannot_be_0),Gp(_.typeParameters),Ce(_.type),void gp(_);case 232:return _=e,void(ce&&(Xg(_)||$g(_),Wp(_.name,mh.Diagnostics.Enum_name_cannot_be_0),bp(_,_.name),vp(_,_.name),Cp(_,_.name),xp(_,_.name),ep(_),$p(_),ee=mh.isConst(_),ue.isolatedModules&&ee&&mh.isInAmbientContext(_)&&me(_.name,mh.Diagnostics.Ambient_const_enums_are_not_allowed_when_the_isolatedModules_flag_is_provided),h=fe(_),_===mh.getDeclarationOfKind(h,_.kind))&&(1<h.declarations.length&&mh.forEach(h.declarations,function(e){mh.isConstEnumDeclaration(e)!==ee&&me(mh.getNameOfDeclaration(e),mh.Diagnostics.Enum_declarations_must_all_be_const_or_non_const)}),te=!1,mh.forEach(h.declarations,function(e){return 232===e.kind&&!!e.members.length&&void((e=e.members[0]).initializer||(te?me(e.name,mh.Diagnostics.In_an_enum_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_its_first_enum_element):te=!0))})));case 233:return Yp(e);case 238:return void(!eg(h=e,mh.Diagnostics.An_import_declaration_can_only_be_used_in_a_namespace_or_module)&&(Xg(h)||$g(h)||!mh.hasModifiers(h)||xe(h,mh.Diagnostics.An_import_declaration_cannot_have_modifiers),Jp(h))&&(h=h.importClause)&&(h.name&&Zp(h),h.namedBindings)&&(240===h.namedBindings.kind?Zp(h.namedBindings):mh.forEach(h.namedBindings.elements,Zp)));case 237:return void(!eg(p=e,mh.Diagnostics.An_import_declaration_can_only_be_used_in_a_namespace_or_module)&&(Xg(p)||$g(p),mh.isInternalModuleImportEqualsDeclaration(p)||Jp(p))&&(Zp(p),mh.hasModifier(p,1)&&go(p),mh.isInternalModuleImportEqualsDeclaration(p)?(Z=po(fe(p)))!==ge&&(107455&Z.flags&&(1920&fo(g=qp(p.moduleReference),108479).flags||me(g,mh.Diagnostics.Module_0_is_hidden_by_a_local_declaration_with_the_same_name,mh.declarationNameToString(g))),793064&Z.flags)&&Wp(p.name,mh.Diagnostics.Import_name_cannot_be_0):Ie>=mh.ModuleKind.ES2015&&!mh.isInAmbientContext(p)&&Be(p,mh.Diagnostics.Import_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_import_Asterisk_as_ns_from_mod_import_a_from_mod_import_d_from_mod_or_another_module_format_instead)));case 244:return void(eg(g=e,mh.Diagnostics.An_export_declaration_can_only_be_used_in_a_module)||(Xg(g)||$g(g)||!mh.hasModifiers(g)||xe(g,mh.Diagnostics.An_export_declaration_cannot_have_modifiers),g.moduleSpecifier&&!Jp(g))||(g.exportClause?(mh.forEach(g.exportClause.elements,tg),Z=!(d=234===g.parent.kind&&mh.isAmbientModule(g.parent.parent))&&234===g.parent.kind&&!g.moduleSpecifier&&mh.isInAmbientContext(g),265===g.parent.kind||d||Z||me(g,mh.Diagnostics.Export_declarations_are_not_permitted_in_a_namespace)):((d=yo(g,g.moduleSpecifier))&&Eo(d)&&me(g.moduleSpecifier,mh.Diagnostics.Module_0_uses_export_and_cannot_be_used_with_export_Asterisk,ye(d)),Ie!==mh.ModuleKind.System&&Ie!==mh.ModuleKind.ES2015&&Ie!==mh.ModuleKind.ESNext&&zg(g,32768))));case 243:return void(eg(p=e,mh.Diagnostics.An_export_assignment_can_only_be_used_in_a_module)||(233!==(d=(265===p.parent.kind?p:p.parent).parent).kind||mh.isAmbientModule(d)?(Xg(p)||$g(p)||!mh.hasModifiers(p)||xe(p,mh.Diagnostics.An_export_assignment_cannot_have_modifiers),71===p.expression.kind?go(p):Rd(p.expression),ng(d),mh.isInAmbientContext(p)&&!mh.isEntityNameExpression(p.expression)&&Be(p.expression,mh.Diagnostics.The_expression_of_an_export_assignment_must_be_an_identifier_or_qualified_name_in_an_ambient_context),p.isExportEquals&&!mh.isInAmbientContext(p)&&(Ie>=mh.ModuleKind.ES2015?Be(p,mh.Diagnostics.Export_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_export_default_or_another_module_format_instead):Ie===mh.ModuleKind.System&&Be(p,mh.Diagnostics.Export_assignment_is_not_supported_when_module_flag_is_system))):p.isExportEquals?me(p,mh.Diagnostics.An_export_assignment_cannot_be_used_in_a_namespace):me(p,mh.Diagnostics.A_default_export_can_only_be_used_in_an_ECMAScript_style_module)));case 209:case 225:return void hh(e);case 247:return void up(e)}}var d,p,Z,g,ee,h,te,_,m,ne,l,f,y,k,oe,re,ie,se,b,v,T,E,S,C,x,B,ae,A,le,I,D,N,w,O,R,P}function rg(e){Tt&&Tt.push(e)}function ig(e){mh.performance.mark("beforeCheck");var t=j(e);if(!(1&t.flags||ue.skipLibCheck&&e.isDeclarationFile||ue.skipDefaultLibCheck&&e.hasNoDefaultLib)){!function(e){if(mh.isInAmbientContext(e))for(var t=0,n=e.statements;t<n.length;t++){var o=n[t];if((mh.isDeclaration(o)||208===o.kind)&&230!==(o=o).kind&&231!==o.kind&&238!==o.kind&&237!==o.kind&&244!==o.kind&&243!==o.kind&&236!==o.kind&&!mh.hasModifier(o,515)&&xe(o,mh.Diagnostics.A_declare_modifier_is_required_for_a_top_level_declaration_in_a_d_ts_file))return}}(e),mh.clear(Jt),mh.clear(Qt),Et=ce&&T?[]:void 0,Pt=!(Tt=[]),mh.forEach(e.statements,Ce);for(var n,o,r,i,s,a=0,l=Tt;a<l.length;a++){var c=l[a];switch(c.kind){case 186:case 187:case 151:case 150:n=c,i=r=o=void 0,mh.Debug.assert(151!==n.kind||mh.isObjectLiteralMethod(n)),o=mh.getFunctionFlags(n),r=mh.getEffectiveReturnTypeNode(n),i=r&&(2==(3&o)?ip(n):q(r)),0==(1&o)&&_d(n,i),n.body&&(r||Te(Gi(n)),207===n.body.kind?Ce(n.body):(r=Se(n.body),i&&Ra(2==(3&o)?op(r,n.body,mh.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member):r,i,n.body)),gp(n));break;case 153:case 154:zd(c);break;case 199:o=c,mh.forEach(o.members,Ce),gp(o)}}if(mh.isExternalModule(e)&&gp(e),!e.isDeclarationFile)if(Et)for(var u=0,d=Et;u<d.length;u++){var p=d[u];switch(p.kind){case 265:case 233:s=p,ue.noUnusedLocals&&!mh.isInAmbientContext(s)&&s.locals.forEach(function(e){if(!e.isReferenced&&!e.exportSymbol)for(var t=0,n=e.declarations;t<n.length;t++){var o=n[t];mh.isAmbientModule(o)||_p(o,mh.symbolName(e))}});break;case 229:case 199:y=f=m=_=h=g=s=void 0;s=p;if(ue.noUnusedLocals&&!mh.isInAmbientContext(s)&&s.members)for(var g=0,h=s.members;g<h.length;g++){var _=h[g];if(151===_.kind||149===_.kind)!_.symbol.isReferenced&&mh.hasModifier(_,8)&&me(_.name,mh.Diagnostics._0_is_declared_but_its_value_is_never_read,mh.symbolName(_.symbol));else if(152===_.kind)for(var m=0,f=_.parameters;m<f.length;m++){var y=f[m];!y.symbol.isReferenced&&mh.hasModifier(y,8)&&me(y.name,mh.Diagnostics.Property_0_is_declared_but_its_value_is_never_read,mh.symbolName(y.symbol))}}fp(p);break;case 230:fp(p);break;case 207:case 235:case 214:case 215:case 216:hp(p);break;case 152:case 186:case 228:case 187:case 151:case 153:case 154:p.body&&hp(p),fp(p);break;case 150:case 155:case 156:case 157:case 160:case 161:case 231:fp(p)}}Et=Tt=void 0,mh.isExternalOrCommonJsModule(e)&&ng(e),Jt.length&&(mh.forEach(Jt,Tp),mh.clear(Jt)),Qt.length&&(mh.forEach(Qt,Ep),mh.clear(Qt)),t.flags|=1}mh.performance.mark("afterCheck"),mh.performance.measure("Check","beforeCheck","afterCheck")}function sg(e,t){try{return Ae=t,n=e,ag(),n?(o=(i=en.getGlobalDiagnostics()).length,ig(n),n=en.getDiagnostics(n.fileName),(r=en.getGlobalDiagnostics())!==i?(i=mh.relativeComplement(i,r,mh.compareDiagnostics),mh.concatenate(i,n)):0===o&&0<r.length?mh.concatenate(r,n):n):(mh.forEach(a.getSourceFiles(),ig),en.getDiagnostics())}finally{Ae=void 0}var n,o,r,i}function ag(){if(!ce)throw new Error("Trying to get diagnostics from a type checker that does not produce them.")}function lg(e){if(e)for(;e.parent;){if(220===e.parent.kind&&e.parent.statement===e)return 1;e=e.parent}}function cg(e){switch(e.kind){case 145:case 229:case 230:case 231:case 232:return!0}}function ug(e){for(var t=e;t.parent&&143===t.parent.kind;)t=t.parent;return t.parent&&159===t.parent.kind}function dg(e,t){for(var n;(e=mh.getContainingClass(e))&&!(n=t(e)););return n}function pg(e,t){return dg(e,function(e){return e===t})}function gg(e){return void 0!==function(e){for(;143===e.parent.kind;)e=e.parent;return 237===e.parent.kind?e.parent.moduleReference===e&&e.parent:243===e.parent.kind?e.parent.expression===e&&e.parent:void 0}(e)}function hg(t){if(mh.isDeclarationName(t))return fe(t.parent);if(mh.isInJavaScriptFile(t)&&179===t.parent.kind&&t.parent===t.parent.parent.left){var e=function(e){switch(mh.getSpecialPropertyAssignmentKind(e.parent.parent)){case 1:case 3:return fe(e.parent);case 4:case 2:case 5:return fe(e.parent.parent)}}(t);if(e)return e}if(243===t.parent.kind&&mh.isEntityNameExpression(t))return fo(t,2998271);if(179!==t.kind&&gg(t))return e=mh.getAncestor(t,237),mh.Debug.assert(void 0!==e),_o(t,!0);if(mh.isRightSideOfQualifiedNameOrPropertyAccess(t)&&(t=t.parent),function(){for(var e=t;e.parent&&179===e.parent.kind;)e=e.parent;return e.parent&&201===e.parent.kind}()){var n=0,e=(201===t.parent.kind?(n=793064,mh.isExpressionWithTypeArgumentsInClassExtendsClause(t.parent)&&(n|=107455)):n=1920,fo(t,n|=2097152));if(e)return e}if(279===t.parent.kind)return mh.getParameterSymbolFromJSDoc(t.parent);if(145===t.parent.kind&&282===t.parent.parent.kind)return mh.Debug.assert(!mh.isInJavaScriptFile(t)),(e=mh.getTypeParameterFromJsDoc(t.parent))&&e.symbol;if(mh.isPartOfExpression(t)){if(mh.nodeIsMissing(t))return;if(71===t.kind)return mh.isJSXTagName(t)&&iu(t)?lu(t.parent):fo(t,107455,!1,!0);if(179===t.kind||143===t.kind)return(e=j(t)).resolvedSymbol||(179===t.kind?Cu:xu)(t),e.resolvedSymbol}else{if(ug(t))return fo(t,n=159===t.parent.kind?793064:1920,!1,!0);if(253===t.parent.kind)return X(_u((e=t.parent).parent.parent),e.name.escapedText)||ge}return 158===t.parent.kind?fo(t,1):void 0}function _g(e){if(265===e.kind)return mh.isExternalModule(e)?Io(e.symbol):void 0;if(!lg(e)){if(Eh(e))return fe(e.parent);if(mh.isLiteralComputedPropertyDeclarationName(e))return fe(e.parent.parent);if(71===e.kind){if(gg(e))return hg(e);if(176===e.parent.kind&&174===e.parent.parent.kind&&e===e.parent.propertyName){var t=mg(e.parent.parent),t=t&&X(t,e.escapedText);if(t)return t}}switch(e.kind){case 71:case 179:case 143:return hg(e);case 99:var n=mh.getThisContainer(e,!1);if(mh.isFunctionLike(n)){n=Gi(n);if(n.thisParameter)return n.thisParameter}if(mh.isInExpressionContext(e))return Se(e).symbol;case 169:return pa(e).symbol;case 97:return Se(e).symbol;case 123:n=e.parent;return n&&152===n.kind?n.parent.symbol:void 0;case 9:if(mh.isExternalModuleImportEqualsDeclaration(e.parent.parent)&&mh.getExternalModuleImportEqualsDeclarationExpression(e.parent.parent)===e||(238===e.parent.kind||244===e.parent.kind)&&e.parent.moduleSpecifier===e||mh.isInJavaScriptFile(e)&&mh.isRequireCall(e.parent,!1)||mh.isImportCall(e.parent))return yo(e,e);case 8:n=mh.isElementAccessExpression(e.parent)?e.parent.argumentExpression===e?Hd(e.parent.expression):void 0:mh.isLiteralTypeNode(e.parent)&&mh.isIndexedAccessTypeNode(e.parent.parent)?q(e.parent.parent.objectType):void 0;return n&&X(n,mh.escapeLeadingUnderscores(e.text));case 79:return fe(e.parent);default:return}}}function mg(e){var t,n,o;return lg(e)?he:mh.isPartOfTypeNode(e)?(t=q(e))&&mh.isExpressionWithTypeArgumentsInClassImplementsClause(e)?ii(t,(o=mg(mh.getContainingClass(e))).thisType):t:mh.isPartOfExpression(e)?fg(e):mh.isExpressionWithTypeArgumentsInClassExtendsClause(e)?(t=Kr(o=be(fe(mh.getContainingClass(e))))[0])&&ii(t,o.thisType):cg(e)?be(n=fe(e)):71===(t=e).kind&&cg(t.parent)&&t.parent.name===t?(n=_g(e))&&be(n):mh.isDeclaration(e)?z(n=fe(e)):Eh(e)?(n=_g(e))&&z(n):mh.isBindingPattern(e)?kr(e.parent,!0):gg(e)?(o=(n=_g(e))&&be(n))!==he?o:z(n):he}function fg(e){return ua(Hd(e=mh.isRightSideOfQualifiedNameOrPropertyAccess(e)?e.parent:e))}function yg(e){return!(mh.isGeneratedIdentifier(e)||!(e=mh.getParseTreeNode(e,mh.isIdentifier))||179===e.parent.kind&&e.parent.name===e||Vg(e)!==M)}function kg(e){var t,n,e=yo(e.parent,e);return!(e&&!mh.isShorthandAmbientModuleSymbol(e))||(t=Eo(e),void 0===(n=p(e=vo(e))).exportsSomeValue&&(n.exportsSomeValue=t?!!(107455&e.flags):mh.forEachEntry(Bo(e),function(e){return(e=uo(e))&&!!(107455&e.flags)})),n.exportsSomeValue)}function bg(e,t){if(e=mh.getParseTreeNode(e,mh.isIdentifier)){o=Vg(e,(r=(o=e).parent)&&mh.isModuleOrEnumDeclaration(r)&&o===r.name);if(o){if(1048576&o.flags){r=Io(o.exportSymbol);if(!t&&944&r.flags)return;o=r}var n=Do(o);if(n)return 512&n.flags&&265===n.valueDeclaration.kind?(t=n.valueDeclaration)!==mh.getSourceFileOfNode(e)?void 0:t:mh.findAncestor(e.parent,function(e){return mh.isModuleOrEnumDeclaration(e)&&fe(e)===n})}}var o,r}function vg(e){if(e=mh.getParseTreeNode(e,mh.isIdentifier)){e=Vg(e);if(co(e,107455))return io(e)}}function Tg(e){var t,n,o,r;return!!(418&e.flags)&&(void 0===(t=p(e)).isDeclarationWithCollidingName&&(n=mh.getEnclosingBlockScopeContainer(e.valueDeclaration),mh.isStatementWithLocals(n))&&(o=j(e.valueDeclaration),Zn(n.parent,e.escapedName,107455,void 0,void 0,!1)?t.isDeclarationWithCollidingName=!0:131072&o.flags?(e=262144&o.flags,o=mh.isIterationStatement(n,!1),r=207===n.kind&&mh.isIterationStatement(n.parent,!1),t.isDeclarationWithCollidingName=!(mh.isBlockScopedContainerTopLevel(n)||e&&(o||r))):t.isDeclarationWithCollidingName=!1),t.isDeclarationWithCollidingName)}function Eg(e){if(!mh.isGeneratedIdentifier(e)&&(e=mh.getParseTreeNode(e,mh.isIdentifier))){e=Vg(e);if(e&&Tg(e))return e.valueDeclaration}}function Sg(e){if(e=mh.getParseTreeNode(e,mh.isDeclaration)){e=fe(e);if(e)return Tg(e)}return!1}function Cg(e){switch(e.kind){case 237:case 239:case 240:case 242:case 246:return Bg(fe(e)||ge);case 244:var t=e.exportClause;return t&&mh.forEach(t.elements,Cg);case 243:return!e.expression||71!==e.expression.kind||Bg(fe(e)||ge)}return!1}function xg(e){return!(void 0===(e=mh.getParseTreeNode(e,mh.isImportEqualsDeclaration))||265!==e.parent.kind||!mh.isInternalModuleImportEqualsDeclaration(e))&&Bg(fe(e))&&e.moduleReference&&!mh.nodeIsMissing(e.moduleReference)}function Bg(e){e=po(e);return e===ge||107455&e.flags&&(ue.preserveConstEnums||!Ag(e))}function Ag(e){return Cd(e)||e.constEnumOnlyModule}function Ig(e){var t;return!!mh.nodeIsPresent(e.body)&&(1<(t=Ki(fe(e))).length||1===t.length&&t[0].declaration!==e)}function Dg(e){return pe&&!Hi(e)&&e.initializer&&!mh.hasModifier(e,92)}function Ng(e){return pe&&Hi(e)&&!e.initializer&&mh.hasModifier(e,92)}function wg(e){return j(e).flags}function Og(e){return $p(e.parent),j(e).enumMemberValue}function Rg(e){switch(e.kind){case 264:case 179:case 180:return!0}return!1}function Pg(e){return 264===e.kind?Og(e):(e=j(e).resolvedSymbol)&&8&e.flags&&mh.isConstEnumDeclaration(e.valueDeclaration.parent)?Og(e.valueDeclaration):void 0}function Lg(e,t){if(!(e=mh.getParseTreeNode(e,mh.isEntityName)))return mh.TypeReferenceSerializationKind.Unknown;if(t&&!(t=mh.getParseTreeNode(t)))return mh.TypeReferenceSerializationKind.Unknown;var n=fo(e,107455,!0,!1,t),e=fo(e,793064,!0,!1,t);if(n&&n===e){t=Ts(!1);if(t&&n===t)return mh.TypeReferenceSerializationKind.Promise;t=z(n);if(t&&Ur(t))return mh.TypeReferenceSerializationKind.TypeWithConstructSignatureAndValue}return e?(n=be(e))===he?mh.TypeReferenceSerializationKind.Unknown:1&n.flags?mh.TypeReferenceSerializationKind.ObjectType:Ed(n,15360)?mh.TypeReferenceSerializationKind.VoidNullableOrNeverType:Ed(n,136)?mh.TypeReferenceSerializationKind.BooleanType:Ed(n,84)?mh.TypeReferenceSerializationKind.NumberLikeType:Ed(n,262178)?mh.TypeReferenceSerializationKind.StringLikeType:ul(n)?mh.TypeReferenceSerializationKind.ArrayLikeType:Ed(n,512)?mh.TypeReferenceSerializationKind.ESSymbolType:32768&n.flags&&0<$(n,0).length?mh.TypeReferenceSerializationKind.TypeWithCallSignature:ol(n)?mh.TypeReferenceSerializationKind.ArrayLikeType:mh.TypeReferenceSerializationKind.ObjectType:mh.TypeReferenceSerializationKind.ObjectType}function Mg(e,t,n,o){e=fe(e),e=!e||133120&e.flags?he:cl(z(e));8192&n&&(e=_l(e,2048)),rr().buildTypeDisplay(e,o,t,n)}function Fg(e,t,n,o){e=Gi(e);rr().buildTypeDisplay(Te(e),o,t,n)}function Ug(e,t,n,o){e=vl(fg(e));rr().buildTypeDisplay(e,o,t,n)}function Hg(e){return Nt.has(mh.escapeLeadingUnderscores(e))}function Vg(e,t){var n=j(e).resolvedSymbol;return n||(n=e,Zn(n=t&&(t=e.parent,mh.isDeclaration(t))&&e===t.name?ur(t):n,e.escapedText,3253183,void 0,void 0,!0))}function Wg(e){if(!mh.isGeneratedIdentifier(e)&&(e=mh.getParseTreeNode(e,mh.isIdentifier))){e=Vg(e);if(e)return No(e).valueDeclaration}}function Gg(e){return!!mh.isConst(e)&&!!(96&(e=z(fe(e))).flags&&1048576&e.flags)}function Kg(e,t){e=z(fe(e));t.writeStringLiteral(nr(e))}function jg(e){e=mh.getExternalModuleName(e),e=ko(e,e,void 0);if(e)return mh.getDeclarationOfKind(e,265)}function zg(e,t){if((l&t)!==t&&ue.importHelpers){var n=mh.getSourceFileOfNode(e);if(mh.isEffectiveExternalModule(n,ue)&&!mh.isInAmbientContext(e)){var o,r=c=c||bo(n,mh.externalHelpersModuleNameText,mh.Diagnostics.This_syntax_requires_an_imported_helper_but_module_0_cannot_be_found,e)||ge;if(r!==ge)for(var i=t&~l,s=1;s<=65536;s<<=1)i&s&&(o=function(e){switch(e){case 1:return"__extends";case 2:return"__assign";case 4:return"__rest";case 8:return"__decorate";case 16:return"__metadata";case 32:return"__param";case 64:return"__awaiter";case 128:return"__generator";case 256:return"__values";case 512:return"__read";case 1024:return"__spread";case 2048:return"__await";case 4096:return"__asyncGenerator";case 8192:return"__asyncDelegator";case 16384:return"__asyncValues";case 32768:return"__exportStar";case 65536:return"__makeTemplateObject";default:mh.Debug.fail("Unrecognized helper")}}(s),Jn(r.exports,mh.escapeLeadingUnderscores(o),107455)||me(e,mh.Diagnostics.This_syntax_requires_an_imported_helper_named_1_but_module_0_has_no_exported_member_1,mh.externalHelpersModuleNameText,o));l|=t}}}function Xg(e){if(e.decorators){if(!mh.nodeCanBeDecorated(e))return 151!==e.kind||mh.nodeIsPresent(e.body)?xe(e,mh.Diagnostics.Decorators_are_not_valid_here):xe(e,mh.Diagnostics.A_decorator_can_only_decorate_a_method_implementation_not_an_overload);if(153===e.kind||154===e.kind){var t=mh.getAllAccessorDeclarations(e.parent.members,e);if(t.firstAccessor.decorators&&e===t.secondAccessor)return xe(e,mh.Diagnostics.Decorators_cannot_be_applied_to_multiple_get_Slashset_accessors_of_the_same_name)}}return!1}function $g(e){var t,n,o,r,i=!!(i=e).modifiers&&(function(e){switch(e.kind){case 153:case 154:case 152:case 149:case 148:case 151:case 150:case 157:case 233:case 238:case 237:case 244:case 243:case 186:case 187:case 146:return;default:if(234===e.parent.kind||265===e.parent.kind)return;switch(e.kind){case 228:return Yg(e,120);case 229:return Yg(e,117);case 230:case 208:case 231:return 1;case 232:return Yg(e,76);default:return mh.Debug.fail(),0}}}(i)?xe(i,mh.Diagnostics.Modifiers_cannot_appear_here):void 0);if(void 0!==i)return i;for(var s=0,a=0,l=e.modifiers;a<l.length;a++){var c=l[a];if(131!==c.kind){if(148===e.kind||150===e.kind)return Be(c,mh.Diagnostics._0_modifier_cannot_appear_on_a_type_member,mh.tokenToString(c.kind));if(157===e.kind)return Be(c,mh.Diagnostics._0_modifier_cannot_appear_on_an_index_signature,mh.tokenToString(c.kind))}switch(c.kind){case 76:if(232!==e.kind&&229===e.parent.kind)return Be(e,mh.Diagnostics.A_class_member_cannot_have_the_0_keyword,mh.tokenToString(76));break;case 114:case 113:case 112:var u=Zo(mh.modifierToFlag(c.kind));if(28&s)return Be(c,mh.Diagnostics.Accessibility_modifier_already_seen);if(32&s)return Be(c,mh.Diagnostics._0_modifier_must_precede_1_modifier,u,"static");if(64&s)return Be(c,mh.Diagnostics._0_modifier_must_precede_1_modifier,u,"readonly");if(256&s)return Be(c,mh.Diagnostics._0_modifier_must_precede_1_modifier,u,"async");if(234===e.parent.kind||265===e.parent.kind)return Be(c,mh.Diagnostics._0_modifier_cannot_appear_on_a_module_or_namespace_element,u);if(128&s)return 112===c.kind?Be(c,mh.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,u,"abstract"):Be(c,mh.Diagnostics._0_modifier_must_precede_1_modifier,u,"abstract");s|=mh.modifierToFlag(c.kind);break;case 115:if(32&s)return Be(c,mh.Diagnostics._0_modifier_already_seen,"static");if(64&s)return Be(c,mh.Diagnostics._0_modifier_must_precede_1_modifier,"static","readonly");if(256&s)return Be(c,mh.Diagnostics._0_modifier_must_precede_1_modifier,"static","async");if(234===e.parent.kind||265===e.parent.kind)return Be(c,mh.Diagnostics._0_modifier_cannot_appear_on_a_module_or_namespace_element,"static");if(146===e.kind)return Be(c,mh.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"static");if(128&s)return Be(c,mh.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,"static","abstract");s|=32,t=c;break;case 131:if(64&s)return Be(c,mh.Diagnostics._0_modifier_already_seen,"readonly");if(149!==e.kind&&148!==e.kind&&157!==e.kind&&146!==e.kind)return Be(c,mh.Diagnostics.readonly_modifier_can_only_appear_on_a_property_declaration_or_index_signature);s|=64,r=c;break;case 84:if(1&s)return Be(c,mh.Diagnostics._0_modifier_already_seen,"export");if(2&s)return Be(c,mh.Diagnostics._0_modifier_must_precede_1_modifier,"export","declare");if(128&s)return Be(c,mh.Diagnostics._0_modifier_must_precede_1_modifier,"export","abstract");if(256&s)return Be(c,mh.Diagnostics._0_modifier_must_precede_1_modifier,"export","async");if(229===e.parent.kind)return Be(c,mh.Diagnostics._0_modifier_cannot_appear_on_a_class_element,"export");if(146===e.kind)return Be(c,mh.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"export");s|=1;break;case 79:u=(265===e.parent.kind?e:e.parent).parent;if(233===u.kind&&!mh.isAmbientModule(u))return Be(c,mh.Diagnostics.A_default_export_can_only_be_used_in_an_ECMAScript_style_module);s|=512;break;case 124:if(2&s)return Be(c,mh.Diagnostics._0_modifier_already_seen,"declare");if(256&s)return Be(c,mh.Diagnostics._0_modifier_cannot_be_used_in_an_ambient_context,"async");if(229===e.parent.kind)return Be(c,mh.Diagnostics._0_modifier_cannot_appear_on_a_class_element,"declare");if(146===e.kind)return Be(c,mh.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"declare");if(mh.isInAmbientContext(e.parent)&&234===e.parent.kind)return Be(c,mh.Diagnostics.A_declare_modifier_cannot_be_used_in_an_already_ambient_context);s|=2,n=c;break;case 117:if(128&s)return Be(c,mh.Diagnostics._0_modifier_already_seen,"abstract");if(229!==e.kind){if(151!==e.kind&&149!==e.kind&&153!==e.kind&&154!==e.kind)return Be(c,mh.Diagnostics.abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration);if(229!==e.parent.kind||!mh.hasModifier(e.parent,128))return Be(c,mh.Diagnostics.Abstract_methods_can_only_appear_within_an_abstract_class);if(32&s)return Be(c,mh.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,"static","abstract");if(8&s)return Be(c,mh.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,"private","abstract")}s|=128;break;case 120:if(256&s)return Be(c,mh.Diagnostics._0_modifier_already_seen,"async");if(2&s||mh.isInAmbientContext(e.parent))return Be(c,mh.Diagnostics._0_modifier_cannot_be_used_in_an_ambient_context,"async");if(146===e.kind)return Be(c,mh.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"async");s|=256,o=c}}{if(152===e.kind)return 32&s?Be(t,mh.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"static"):128&s?Be(t,mh.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"abstract"):256&s?Be(o,mh.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"async"):64&s?Be(r,mh.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"readonly"):void 0;if((238===e.kind||237===e.kind)&&2&s)return Be(n,mh.Diagnostics.A_0_modifier_cannot_be_used_with_an_import_declaration,"declare");if(146===e.kind&&92&s&&mh.isBindingPattern(e.name))return Be(e,mh.Diagnostics.A_parameter_property_may_not_be_declared_using_a_binding_pattern);if(146===e.kind&&92&s&&e.dotDotDotToken)return Be(e,mh.Diagnostics.A_parameter_property_cannot_be_declared_using_a_rest_parameter);if(256&s){switch(i=o,e.kind){case 151:case 228:case 186:case 187:return!1}return Be(i,mh.Diagnostics._0_modifier_cannot_be_used_here,"async")}}}function Yg(e,t){return 1<e.modifiers.length||e.modifiers[0].kind!==t}function qg(e){var t,n;if(e&&e.hasTrailingComma)return t=e.end-",".length,n=e.end,gh(e[0],t,n-t,mh.Diagnostics.Trailing_comma_not_allowed)}function Jg(e,t){var n;return!!qg(e)||(e&&0===e.length?gh(t,n=e.pos-"<".length,mh.skipTrivia(t.text,e.end)+">".length-n,mh.Diagnostics.Type_parameter_list_cannot_be_empty):void 0)}function Qg(n){var e=mh.getSourceFileOfNode(n);return Xg(n)||$g(n)||Jg(n.typeParameters,e)||function(e){for(var t=!1,n=e.length,o=0;o<n;o++){var r=e[o];if(r.dotDotDotToken){if(o!==n-1)return Be(r.dotDotDotToken,mh.Diagnostics.A_rest_parameter_must_be_last_in_a_parameter_list);if(mh.isBindingPattern(r.name))return Be(r.name,mh.Diagnostics.A_rest_element_cannot_contain_a_binding_pattern);if(r.questionToken)return Be(r.questionToken,mh.Diagnostics.A_rest_parameter_cannot_be_optional);if(r.initializer)return Be(r.name,mh.Diagnostics.A_rest_parameter_cannot_have_an_initializer)}else if(r.questionToken){if(t=!0,r.initializer)return Be(r.name,mh.Diagnostics.Parameter_cannot_have_question_mark_and_initializer)}else if(t&&!r.initializer)return Be(r.name,mh.Diagnostics.A_required_parameter_cannot_follow_an_optional_parameter)}}(n.parameters)||function(e){if(187===n.kind){var t=n;if(mh.getLineAndCharacterOfPosition(e,t.equalsGreaterThanToken.pos).line!==mh.getLineAndCharacterOfPosition(e,t.equalsGreaterThanToken.end).line)return Be(t.equalsGreaterThanToken,mh.Diagnostics.Line_terminator_not_permitted_before_arrow)}}(e)}function Zg(o,e){return qg(e)||function(e){var t,n;if(e&&0===e.length)return gh(t=mh.getSourceFileOfNode(o),n=e.pos-"<".length,mh.skipTrivia(t.text,e.end)+">".length-n,mh.Diagnostics.Type_argument_list_cannot_be_empty)}(e)}function eh(e){if(e)for(var t=0,n=e;t<n.length;t++){var o=n[t];if(200===o.kind)return gh(o,o.pos,0,mh.Diagnostics.Argument_expression_expected)}}function th(e){var t,n=e.types;if(!qg(n))return n&&0===n.length?(t=mh.tokenToString(e.token),gh(e,n.pos,0,mh.Diagnostics._0_list_cannot_be_empty,t)):void mh.forEach(n,nh)}function nh(e){return Zg(e,e.typeArguments)}function oh(e){144===e.kind&&194===e.expression.kind&&26===e.expression.operatorToken.kind&&Be(e.expression,mh.Diagnostics.A_comma_expression_is_not_allowed_in_a_computed_property_name)}function rh(e){return e.asteriskToken&&(mh.Debug.assert(228===e.kind||186===e.kind||151===e.kind),mh.isInAmbientContext(e)?Be(e.asteriskToken,mh.Diagnostics.Generators_are_not_allowed_in_an_ambient_context):!e.body&&Be(e.asteriskToken,mh.Diagnostics.An_overload_signature_cannot_be_declared_as_a_generator))}function ih(e,t){return e&&Be(e,t)}function sh(e){if(!hh(e)){if(216===e.kind&&e.awaitModifier&&0==(16384&e.flags))return Be(e.awaitModifier,mh.Diagnostics.A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator);if(227===e.initializer.kind){var t=e.initializer;if(!dh(t)){var n=t.declarations;if(!n.length)return;if(1<n.length)return o=215===e.kind?mh.Diagnostics.Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement:mh.Diagnostics.Only_a_single_variable_declaration_is_allowed_in_a_for_of_statement,xe(t.declarations[1],o);var o,t=n[0];if(t.initializer)return o=215===e.kind?mh.Diagnostics.The_variable_declaration_of_a_for_in_statement_cannot_have_an_initializer:mh.Diagnostics.The_variable_declaration_of_a_for_of_statement_cannot_have_an_initializer,Be(t.name,o);if(t.type)return Be(t,o=215===e.kind?mh.Diagnostics.The_left_hand_side_of_a_for_in_statement_cannot_use_a_type_annotation:mh.Diagnostics.The_left_hand_side_of_a_for_of_statement_cannot_use_a_type_annotation)}}}}function ah(e){if(e.parameters.length===(153===e.kind?1:2))return mh.getThisParameter(e)}function lh(e,t){if(mh.isDynamicName(e))return Be(e,t)}function ch(e){if((t=e).modifiers&&178===t.parent.kind&&(!(2&mh.getFunctionFlags(t))||1<t.modifiers.length)&&xe(t,mh.Diagnostics.Modifiers_cannot_appear_here)||Qg(e)||rh(e))return 1;var t;if(178===e.parent.kind){if(ih(e.questionToken,mh.Diagnostics.An_object_member_cannot_be_declared_optional))return 1;if(void 0===e.body)return gh(e,e.end-1,";".length,mh.Diagnostics._0_expected,"{")}return mh.isClassLike(e.parent)?mh.isInAmbientContext(e)?lh(e.name,mh.Diagnostics.A_computed_property_name_in_an_ambient_context_must_directly_refer_to_a_built_in_symbol):!e.body&&lh(e.name,mh.Diagnostics.A_computed_property_name_in_a_method_overload_must_directly_refer_to_a_built_in_symbol):230===e.parent.kind?lh(e.name,mh.Diagnostics.A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol):163===e.parent.kind&&lh(e.name,mh.Diagnostics.A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol)}function uh(e){return 9===e.kind||8===e.kind||192===e.kind&&38===e.operator&&8===e.operand.kind}function dh(e){var t=e.declarations;return qg(e.declarations)||!e.declarations.length&&gh(e,t.pos,t.end-t.pos,mh.Diagnostics.Variable_declaration_list_cannot_be_empty)}function ph(e){return 0<e.parseDiagnostics.length}function xe(e,t,n,o,r){var i=mh.getSourceFileOfNode(e);if(!ph(i))return e=mh.getSpanOfTokenAtPosition(i,e.pos),en.add(mh.createFileDiagnostic(i,e.start,e.length,t,n,o,r)),!0}function gh(e,t,n,o,r,i,s){e=mh.getSourceFileOfNode(e);if(!ph(e))return en.add(mh.createFileDiagnostic(e,t,n,o,r,i,s)),!0}function Be(e,t,n,o,r){if(!ph(mh.getSourceFileOfNode(e)))return en.add(mh.createDiagnosticForNode(e,t,n,o,r)),!0}function hh(e){if(mh.isInAmbientContext(e)){if(mh.isAccessor(e.parent))return j(e).hasReportedStatementInAmbientContext=!0;if(!j(e).hasReportedStatementInAmbientContext&&mh.isFunctionLike(e.parent))return j(e).hasReportedStatementInAmbientContext=xe(e,mh.Diagnostics.An_implementation_cannot_be_declared_in_ambient_contexts);if(207===e.parent.kind||234===e.parent.kind||265===e.parent.kind){var t=j(e.parent);if(!t.hasReportedStatementInAmbientContext)return t.hasReportedStatementInAmbientContext=xe(e,mh.Diagnostics.Statements_are_not_allowed_in_ambient_contexts)}}}function _h(e){var t,n,o;4&e.numericLiteralFlags&&(t=void 0,1<=de?t=mh.Diagnostics.Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher_Use_the_syntax_0:mh.isChildOfNodeWithKind(e,173)?t=mh.Diagnostics.Octal_literal_types_must_use_ES2015_syntax_Use_the_syntax_0:mh.isChildOfNodeWithKind(e,264)&&(t=mh.Diagnostics.Octal_literals_are_not_allowed_in_enums_members_initializer_Use_the_syntax_0),t)&&(o=((n=mh.isPrefixUnaryExpression(e.parent)&&38===e.parent.operator)?"-":"")+"0o"+e.text,Be(n?e.parent:e,t,o))}}}(ts=ts||{}),function(u){function d(e){e=u.createNode(e,-1,-1);return e.flags|=8,e}function p(e,t){return e!==t&&(L(e,t),R(e,t),t.startsOnNewLine&&(e.startsOnNewLine=!0),u.aggregateTransformFlags(e)),e}function g(e,t){if(e){if(u.isNodeArray(e))return e}else e=[];return e.pos=-1,e.end=-1,e.hasTrailingComma=t,e}function n(e){if(void 0!==e){var t,n=d(e.kind);for(t in n.flags|=e.flags,L(n,e),e)!n.hasOwnProperty(t)&&e.hasOwnProperty(t)&&(n[t]=e[t]);return n}}function o(e){return"number"==typeof e?r(e+""):"boolean"==typeof e?(e?h:M)():u.isString(e)?i(e):((t=i(u.getTextOfIdentifierOrLiteral(e=e))).textSourceNode=e,t);var t}function r(e){var t=d(8);return t.text=e,t.numericLiteralFlags=0,t}function i(e){var t=d(9);return t.text=e,t}function s(e,t){var n=d(71);return n.escapedText=u.escapeLeadingUnderscores(e),n.originalKeywordKind=e?u.stringToToken(e):0,n.autoGenerateKind=0,n.autoGenerateId=0,t&&(n.typeArguments=g(t)),n}u.updateNode=p,u.createNodeArray=g,u.getSynthesizedClone=n,u.createLiteral=o,u.createNumericLiteral=r,u.createIdentifier=s,u.updateIdentifier=function(e,t){return e.typeArguments!==t?p(s(u.idText(e),t),e):e};var a,l=0;function c(e){return d(e)}function h(){return d(101)}function M(){return d(86)}function F(e,t){var n=d(143);return n.left=e,n.right=N(t),n}function U(e){var t=d(144);return t.expression=e,t}function H(e,t,n){var o=d(145);return o.name=N(e),o.constraint=t,o.default=n,o}function V(e,t,n,o,r,i,s){var a=d(146);return a.decorators=w(e),a.modifiers=w(t),a.dotDotDotToken=n,a.name=N(o),a.questionToken=r,a.type=i,a.initializer=s?u.parenthesizeExpressionForList(s):void 0,a}function W(e){var t=d(147);return t.expression=u.parenthesizeForAccess(e),t}function G(e,t,n,o,r){var i=d(148);return i.modifiers=w(e),i.name=N(t),i.questionToken=n,i.type=o,i.initializer=r,i}function K(e,t,n,o,r,i){var s=d(149);return s.decorators=w(e),s.modifiers=w(t),s.name=N(n),s.questionToken=o,s.type=r,s.initializer=i,s}function j(e,t,n,o,r){e=_(150,e,t,n);return e.name=N(o),e.questionToken=r,e}function z(e,t,n,o,r,i,s,a,l){var c=d(151);return c.decorators=w(e),c.modifiers=w(t),c.asteriskToken=n,c.name=N(o),c.questionToken=r,c.typeParameters=w(i),c.parameters=g(s),c.type=a,c.body=l,c}function X(e,t,n,o){var r=d(152);return r.decorators=w(e),r.modifiers=w(t),r.typeParameters=void 0,r.parameters=g(n),r.type=void 0,r.body=o,r}function $(e,t,n,o,r,i){var s=d(153);return s.decorators=w(e),s.modifiers=w(t),s.name=N(n),s.typeParameters=void 0,s.parameters=g(o),s.type=r,s.body=i,s}function Y(e,t,n,o,r){var i=d(154);return i.decorators=w(e),i.modifiers=w(t),i.name=N(n),i.typeParameters=void 0,i.parameters=g(o),i.body=r,i}function q(e,t,n,o){var r=d(157);return r.decorators=w(e),r.modifiers=w(t),r.parameters=g(n),r.type=o,r}function _(e,t,n,o){e=d(e);return e.typeParameters=w(t),e.parameters=w(n),e.type=o,e}function e(e,t,n,o){return e.typeParameters!==t||e.parameters!==n||e.type!==o?p(_(e.kind,t,n,o),e):e}function J(e,t){var n=d(158);return n.parameterName=N(e),n.type=t,n}function Q(e,t){var n=d(159);return n.typeName=N(e),n.typeArguments=t&&u.parenthesizeTypeParameters(t),n}function Z(e){var t=d(162);return t.exprName=e,t}function ee(e){var t=d(163);return t.members=g(e),t}function te(e){var t=d(164);return t.elementType=u.parenthesizeArrayTypeMember(e),t}function ne(e){var t=d(165);return t.elementTypes=g(e),t}function m(e,t){e=d(e);return e.types=u.parenthesizeElementTypeMembers(t),e}function t(e,t){return e.types!==t?p(m(e.kind,t),e):e}function oe(e){var t=d(168);return t.type=e,t}function re(e){var t=d(170);return t.operator=127,t.type=u.parenthesizeElementTypeMember(e),t}function ie(e,t){var n=d(171);return n.objectType=u.parenthesizeElementTypeMember(e),n.indexType=t,n}function se(e,t,n,o){var r=d(172);return r.readonlyToken=e,r.typeParameter=t,r.questionToken=n,r.type=o,r}function ae(e){var t=d(173);return t.literal=e,t}function le(e){var t=d(174);return t.elements=g(e),t}function ce(e){var t=d(175);return t.elements=g(e),t}function ue(e,t,n,o){var r=d(176);return r.dotDotDotToken=e,r.propertyName=N(t),r.name=N(n),r.initializer=o,r}function de(e,t){var n=d(177);return n.elements=u.parenthesizeListElements(g(e)),t&&(n.multiLine=!0),n}function pe(e,t){var n=d(178);return n.properties=g(e),t&&(n.multiLine=!0),n}function ge(e,t){var n=d(179);return n.expression=u.parenthesizeForAccess(e),n.name=N(t),P(n,131072),n}function he(e,t){var n=d(180);return n.expression=u.parenthesizeForAccess(e),n.argumentExpression=u.isString(e=t)||"number"==typeof e?o(e):e,n}function f(e,t,n){var o=d(181);return o.expression=u.parenthesizeForAccess(e),o.typeArguments=w(t),o.arguments=u.parenthesizeListElements(g(n)),o}function _e(e,t,n){var o=d(182);return o.expression=u.parenthesizeForNew(e),o.typeArguments=w(t),o.arguments=n?u.parenthesizeListElements(g(n)):void 0,o}function me(e,t){var n=d(183);return n.tag=u.parenthesizeForAccess(e),n.template=t,n}function fe(e,t){var n=d(184);return n.type=e,n.expression=u.parenthesizePrefixOperand(t),n}function ye(e){var t=d(185);return t.expression=e,t}function y(e,t,n,o,r,i,s){var a=d(186);return a.modifiers=w(e),a.asteriskToken=t,a.name=N(n),a.typeParameters=w(o),a.parameters=g(r),a.type=i,a.body=s,a}function k(e,t,n,o,r,i){var s=d(187);return s.modifiers=w(e),s.typeParameters=w(t),s.parameters=g(n),s.type=o,s.equalsGreaterThanToken=r||d(36),s.body=u.parenthesizeConciseBody(i),s}function ke(e){var t=d(188);return t.expression=u.parenthesizePrefixOperand(e),t}function be(e){var t=d(189);return t.expression=u.parenthesizePrefixOperand(e),t}function b(e){var t=d(190);return t.expression=u.parenthesizePrefixOperand(e),t}function ve(e){var t=d(191);return t.expression=u.parenthesizePrefixOperand(e),t}function v(e,t){var n=d(192);return n.operator=e,n.operand=u.parenthesizePrefixOperand(t),n}function T(e,t){var n=d(193);return n.operand=u.parenthesizePostfixOperand(e),n.operator=t,n}function E(e,t,n){var o=d(194),t="number"==typeof(t=t)?c(t):t,r=t.kind;return o.left=u.parenthesizeBinaryOperand(r,e,!0,void 0),o.operatorToken=t,o.right=u.parenthesizeBinaryOperand(r,n,!1,o.left),o}function Te(e,t,n,o,r){var i=d(195);return i.condition=u.parenthesizeForConditionalHead(e),i.questionToken=r?t:d(55),i.whenTrue=u.parenthesizeSubexpressionOfConditionalExpression(r?n:t),i.colonToken=r?o:d(56),i.whenFalse=u.parenthesizeSubexpressionOfConditionalExpression(r||n),i}function Ee(e,t){var n=d(196);return n.head=e,n.templateSpans=g(t),n}function Se(e,t){var n=d(197);return n.asteriskToken=e&&39===e.kind?e:void 0,n.expression=e&&39!==e.kind?e:t,n}function Ce(e){var t=d(198);return t.expression=u.parenthesizeExpressionForList(e),t}function xe(e,t,n,o,r){var i=d(199);return i.decorators=void 0,i.modifiers=w(e),i.name=N(t),i.typeParameters=w(n),i.heritageClauses=w(o),i.members=g(r),i}function Be(e,t){var n=d(201);return n.expression=u.parenthesizeForAccess(t),n.typeArguments=w(e),n}function Ae(e,t){var n=d(202);return n.expression=e,n.type=t,n}function Ie(e){var t=d(203);return t.expression=u.parenthesizeForAccess(e),t}function De(e,t){var n=d(204);return n.keywordToken=e,n.name=t,n}function Ne(e,t){var n=d(205);return n.expression=e,n.literal=t,n}function S(e,t){var n=d(207);return n.statements=g(e),t&&(n.multiLine=t),n}function we(e,t){var n=d(208);return n.decorators=void 0,n.modifiers=w(e),n.declarationList=u.isArray(t)?x(t):t,n}function Oe(e){var t=d(210);return t.expression=u.parenthesizeExpressionForExpressionStatement(e),t}function Re(e,t,n){var o=d(211);return o.expression=e,o.thenStatement=t,o.elseStatement=n,o}function Pe(e,t){var n=d(212);return n.statement=e,n.expression=t,n}function Le(e,t){var n=d(213);return n.expression=e,n.statement=t,n}function Me(e,t,n,o){var r=d(214);return r.initializer=e,r.condition=t,r.incrementor=n,r.statement=o,r}function Fe(e,t,n){var o=d(215);return o.initializer=e,o.expression=t,o.statement=n,o}function Ue(e,t,n,o){var r=d(216);return r.awaitModifier=e,r.initializer=t,r.expression=n,r.statement=o,r}function He(e){var t=d(217);return t.label=N(e),t}function Ve(e){var t=d(218);return t.label=N(e),t}function We(e){var t=d(219);return t.expression=e,t}function Ge(e,t){var n=d(220);return n.expression=e,n.statement=t,n}function Ke(e,t){var n=d(221);return n.expression=u.parenthesizeExpressionForList(e),n.caseBlock=t,n}function je(e,t){var n=d(222);return n.label=N(e),n.statement=t,n}function ze(e){var t=d(223);return t.expression=e,t}function Xe(e,t,n){var o=d(224);return o.tryBlock=e,o.catchClause=t,o.finallyBlock=n,o}function C(e,t,n){var o=d(226);return o.name=N(e),o.type=t,o.initializer=void 0!==n?u.parenthesizeExpressionForList(n):void 0,o}function x(e,t){var n=d(227);return n.flags|=3&t,n.declarations=g(e),n}function $e(e,t,n,o,r,i,s,a){var l=d(228);return l.decorators=w(e),l.modifiers=w(t),l.asteriskToken=n,l.name=N(o),l.typeParameters=w(r),l.parameters=g(i),l.type=s,l.body=a,l}function Ye(e,t,n,o,r,i){var s=d(229);return s.decorators=w(e),s.modifiers=w(t),s.name=N(n),s.typeParameters=w(o),s.heritageClauses=w(r),s.members=g(i),s}function qe(e,t,n,o,r,i){var s=d(230);return s.decorators=w(e),s.modifiers=w(t),s.name=N(n),s.typeParameters=w(o),s.heritageClauses=w(r),s.members=g(i),s}function Je(e,t,n,o,r){var i=d(231);return i.decorators=w(e),i.modifiers=w(t),i.name=N(n),i.typeParameters=w(o),i.type=r,i}function Qe(e,t,n,o){var r=d(232);return r.decorators=w(e),r.modifiers=w(t),r.name=N(n),r.members=g(o),r}function Ze(e,t,n,o,r){var i=d(233);return i.flags|=532&r,i.decorators=w(e),i.modifiers=w(t),i.name=n,i.body=o,i}function et(e){var t=d(234);return t.statements=g(e),t}function tt(e){var t=d(235);return t.clauses=g(e),t}function nt(e){var t=d(236);return t.name=N(e),t}function ot(e,t,n,o){var r=d(237);return r.decorators=w(e),r.modifiers=w(t),r.name=N(n),r.moduleReference=o,r}function rt(e,t,n,o){var r=d(238);return r.decorators=w(e),r.modifiers=w(t),r.importClause=n,r.moduleSpecifier=o,r}function it(e,t){var n=d(239);return n.name=e,n.namedBindings=t,n}function st(e){var t=d(240);return t.name=e,t}function at(e){var t=d(241);return t.elements=g(e),t}function lt(e,t){var n=d(242);return n.propertyName=e,n.name=t,n}function B(e,t,n,o){var r=d(243);return r.decorators=w(e),r.modifiers=w(t),r.isExportEquals=n,r.expression=o,r}function A(e,t,n,o){var r=d(244);return r.decorators=w(e),r.modifiers=w(t),r.exportClause=n,r.moduleSpecifier=o,r}function I(e){var t=d(245);return t.elements=g(e),t}function D(e,t){var n=d(246);return n.propertyName=N(e),n.name=N(t),n}function ct(e){var t=d(248);return t.expression=e,t}function ut(e,t,n){var o=d(249);return o.openingElement=e,o.children=g(t),o.closingElement=n,o}function dt(e,t){var n=d(250);return n.tagName=e,n.attributes=t,n}function pt(e,t){var n=d(251);return n.tagName=e,n.attributes=t,n}function gt(e){var t=d(252);return t.tagName=e,t}function ht(e,t){var n=d(253);return n.name=e,n.initializer=t,n}function _t(e){var t=d(254);return t.properties=g(e),t}function mt(e){var t=d(255);return t.expression=e,t}function ft(e,t){var n=d(256);return n.dotDotDotToken=e,n.expression=t,n}function yt(e,t){var n=d(257);return n.expression=u.parenthesizeExpressionForList(e),n.statements=g(t),n}function kt(e){var t=d(258);return t.statements=g(e),t}function bt(e,t){var n=d(259);return n.token=e,n.types=g(t),n}function vt(e,t){var n=d(260);return n.variableDeclaration=u.isString(e)?C(e):e,n.block=t,n}function Tt(e,t){var n=d(261);return n.name=N(e),n.questionToken=void 0,n.initializer=void 0!==t?u.parenthesizeExpressionForList(t):void 0,n}function Et(e,t){var n=d(262);return n.name=N(e),n.objectAssignmentInitializer=void 0!==t?u.parenthesizeExpressionForList(t):void 0,n}function St(e){var t=d(263);return t.expression=void 0!==e?u.parenthesizeExpressionForList(e):void 0,t}function Ct(e,t){var n=d(264);return n.name=N(e),n.initializer=t&&u.parenthesizeExpressionForList(t),n}function xt(e,t){var n=d(288);return n.expression=e,n.original=t,R(n,t),n}function Bt(e){if(u.nodeIsSynthesized(e)&&!u.isParseTreeNode(e)&&!e.original&&!e.emitNode&&!e.id){if(289===e.kind)return e.elements;if(u.isBinaryExpression(e)&&26===e.operatorToken.kind)return[e.left,e.right]}return e}function At(e){var t=d(289);return t.elements=g(u.sameFlatMap(e,Bt)),t}function It(e){var t=u.createNode(266);return t.sourceFiles=e,t}function N(e){return u.isString(e)?s(e):e}function w(e){return e?g(e):void 0}function O(e){if(!e.emitNode){if(u.isParseTreeNode(e)){if(265===e.kind)return e.emitNode={annotatedNodes:[e]};O(u.getSourceFileOfNode(e)).annotatedNodes.push(e)}e.emitNode={}}return e.emitNode}function R(e,t){return t&&(e.pos=t.pos,e.end=t.end),e}function P(e,t){return O(e).flags=t,e}function Dt(e){e=e.emitNode;return e&&e.leadingComments}function Nt(e,t){return O(e).leadingComments=t,e}function wt(e){e=e.emitNode;return e&&e.trailingComments}function Ot(e,t){return O(e).trailingComments=t,e}function L(e,t){var n,o,r,i,s,a,l,c;return(e.original=t)&&(t=t.emitNode)&&(e.emitNode=(n=e.emitNode,o=t.flags,r=t.leadingComments,i=t.trailingComments,s=t.commentRange,a=t.sourceMapRange,l=t.tokenSourceMapRanges,c=t.constantValue,t=t.helpers,n=n||{},r&&(n.leadingComments=u.addRange(r.slice(),n.leadingComments)),i&&(n.trailingComments=u.addRange(i.slice(),n.trailingComments)),o&&(n.flags=o),s&&(n.commentRange=s),a&&(n.sourceMapRange=a),l&&(n.tokenSourceMapRanges=function(e,t){for(var n in t=t||[],e)t[n]=e[n];return t}(l,n.tokenSourceMapRanges)),void 0!==c&&(n.constantValue=c),t&&(n.helpers=u.addRange(n.helpers,t)),n)),e}u.createTempVariable=function(e){var t=s("");return t.autoGenerateKind=1,t.autoGenerateId=l,l++,e&&e(t),t},u.createLoopVariable=function(){var e=s("");return e.autoGenerateKind=2,e.autoGenerateId=l,l++,e},u.createUniqueName=function(e){e=s(e);return e.autoGenerateKind=3,e.autoGenerateId=l,l++,e},u.getGeneratedNameForNode=function(e){var t=s("");return t.autoGenerateKind=4,t.autoGenerateId=l,t.original=e,l++,t},u.createToken=c,u.createSuper=function(){return d(97)},u.createThis=function(){return d(99)},u.createNull=function(){return d(95)},u.createTrue=h,u.createFalse=M,u.createQualifiedName=F,u.updateQualifiedName=function(e,t,n){return e.left!==t||e.right!==n?p(F(t,n),e):e},u.createComputedPropertyName=U,u.updateComputedPropertyName=function(e,t){return e.expression!==t?p(U(t),e):e},u.createTypeParameterDeclaration=H,u.updateTypeParameterDeclaration=function(e,t,n,o){return e.name!==t||e.constraint!==n||e.default!==o?p(H(t,n,o),e):e},u.createParameter=V,u.updateParameter=function(e,t,n,o,r,i,s,a){return e.decorators!==t||e.modifiers!==n||e.dotDotDotToken!==o||e.name!==r||e.questionToken!==i||e.type!==s||e.initializer!==a?p(V(t,n,o,r,i,s,a),e):e},u.createDecorator=W,u.updateDecorator=function(e,t){return e.expression!==t?p(W(t),e):e},u.createPropertySignature=G,u.updatePropertySignature=function(e,t,n,o,r,i){return e.modifiers!==t||e.name!==n||e.questionToken!==o||e.type!==r||e.initializer!==i?p(G(t,n,o,r,i),e):e},u.createProperty=K,u.updateProperty=function(e,t,n,o,r,i,s){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.questionToken!==r||e.type!==i||e.initializer!==s?p(K(t,n,o,r,i,s),e):e},u.createMethodSignature=j,u.updateMethodSignature=function(e,t,n,o,r,i){return e.typeParameters!==t||e.parameters!==n||e.type!==o||e.name!==r||e.questionToken!==i?p(j(t,n,o,r,i),e):e},u.createMethod=z,u.updateMethod=function(e,t,n,o,r,i,s,a,l,c){return e.decorators!==t||e.modifiers!==n||e.asteriskToken!==o||e.name!==r||e.questionToken!==i||e.typeParameters!==s||e.parameters!==a||e.type!==l||e.body!==c?p(z(t,n,o,r,i,s,a,l,c),e):e},u.createConstructor=X,u.updateConstructor=function(e,t,n,o,r){return e.decorators!==t||e.modifiers!==n||e.parameters!==o||e.body!==r?p(X(t,n,o,r),e):e},u.createGetAccessor=$,u.updateGetAccessor=function(e,t,n,o,r,i,s){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.parameters!==r||e.type!==i||e.body!==s?p($(t,n,o,r,i,s),e):e},u.createSetAccessor=Y,u.updateSetAccessor=function(e,t,n,o,r,i){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.parameters!==r||e.body!==i?p(Y(t,n,o,r,i),e):e},u.createCallSignature=function(e,t,n){return _(155,e,t,n)},u.updateCallSignature=e,u.createConstructSignature=function(e,t,n){return _(156,e,t,n)},u.updateConstructSignature=e,u.createIndexSignature=q,u.updateIndexSignature=function(e,t,n,o,r){return e.parameters!==o||e.type!==r||e.decorators!==t||e.modifiers!==n?p(q(t,n,o,r),e):e},u.createSignatureDeclaration=_,u.createKeywordTypeNode=d,u.createTypePredicateNode=J,u.updateTypePredicateNode=function(e,t,n){return e.parameterName!==t||e.type!==n?p(J(t,n),e):e},u.createTypeReferenceNode=Q,u.updateTypeReferenceNode=function(e,t,n){return e.typeName!==t||e.typeArguments!==n?p(Q(t,n),e):e},u.createFunctionTypeNode=function(e,t,n){return _(160,e,t,n)},u.updateFunctionTypeNode=e,u.createConstructorTypeNode=function(e,t,n){return _(161,e,t,n)},u.updateConstructorTypeNode=e,u.createTypeQueryNode=Z,u.updateTypeQueryNode=function(e,t){return e.exprName!==t?p(Z(t),e):e},u.createTypeLiteralNode=ee,u.updateTypeLiteralNode=function(e,t){return e.members!==t?p(ee(t),e):e},u.createArrayTypeNode=te,u.updateArrayTypeNode=function(e,t){return e.elementType!==t?p(te(t),e):e},u.createTupleTypeNode=ne,u.updateTypleTypeNode=function(e,t){return e.elementTypes!==t?p(ne(t),e):e},u.createUnionTypeNode=function(e){return m(166,e)},u.updateUnionTypeNode=t,u.createIntersectionTypeNode=function(e){return m(167,e)},u.updateIntersectionTypeNode=t,u.createUnionOrIntersectionTypeNode=m,u.createParenthesizedType=oe,u.updateParenthesizedType=function(e,t){return e.type!==t?p(oe(t),e):e},u.createThisTypeNode=function(){return d(169)},u.createTypeOperatorNode=re,u.updateTypeOperatorNode=function(e,t){return e.type!==t?p(re(t),e):e},u.createIndexedAccessTypeNode=ie,u.updateIndexedAccessTypeNode=function(e,t,n){return e.objectType!==t||e.indexType!==n?p(ie(t,n),e):e},u.createMappedTypeNode=se,u.updateMappedTypeNode=function(e,t,n,o,r){return e.readonlyToken!==t||e.typeParameter!==n||e.questionToken!==o||e.type!==r?p(se(t,n,o,r),e):e},u.createLiteralTypeNode=ae,u.updateLiteralTypeNode=function(e,t){return e.literal!==t?p(ae(t),e):e},u.createObjectBindingPattern=le,u.updateObjectBindingPattern=function(e,t){return e.elements!==t?p(le(t),e):e},u.createArrayBindingPattern=ce,u.updateArrayBindingPattern=function(e,t){return e.elements!==t?p(ce(t),e):e},u.createBindingElement=ue,u.updateBindingElement=function(e,t,n,o,r){return e.propertyName!==n||e.dotDotDotToken!==t||e.name!==o||e.initializer!==r?p(ue(t,n,o,r),e):e},u.createArrayLiteral=de,u.updateArrayLiteral=function(e,t){return e.elements!==t?p(de(t,e.multiLine),e):e},u.createObjectLiteral=pe,u.updateObjectLiteral=function(e,t){return e.properties!==t?p(pe(t,e.multiLine),e):e},u.createPropertyAccess=ge,u.updatePropertyAccess=function(e,t,n){return e.expression!==t||e.name!==n?p(P(ge(t,n),u.getEmitFlags(e)),e):e},u.createElementAccess=he,u.updateElementAccess=function(e,t,n){return e.expression!==t||e.argumentExpression!==n?p(he(t,n),e):e},u.createCall=f,u.updateCall=function(e,t,n,o){return e.expression!==t||e.typeArguments!==n||e.arguments!==o?p(f(t,n,o),e):e},u.createNew=_e,u.updateNew=function(e,t,n,o){return e.expression!==t||e.typeArguments!==n||e.arguments!==o?p(_e(t,n,o),e):e},u.createTaggedTemplate=me,u.updateTaggedTemplate=function(e,t,n){return e.tag!==t||e.template!==n?p(me(t,n),e):e},u.createTypeAssertion=fe,u.updateTypeAssertion=function(e,t,n){return e.type!==t||e.expression!==n?p(fe(t,n),e):e},u.createParen=ye,u.updateParen=function(e,t){return e.expression!==t?p(ye(t),e):e},u.createFunctionExpression=y,u.updateFunctionExpression=function(e,t,n,o,r,i,s,a){return e.name!==o||e.modifiers!==t||e.asteriskToken!==n||e.typeParameters!==r||e.parameters!==i||e.type!==s||e.body!==a?p(y(t,n,o,r,i,s,a),e):e},u.createArrowFunction=k,u.updateArrowFunction=function(e,t,n,o,r,i,s){var a,i=void 0===s?(a=e.equalsGreaterThanToken,u.cast(i,u.isConciseBody)):(a=u.cast(i,function(e){return 36===e.kind}),s);return e.modifiers!==t||e.typeParameters!==n||e.parameters!==o||e.type!==r||e.equalsGreaterThanToken!==a||e.body!==i?p(k(t,n,o,r,a,i),e):e},u.createDelete=ke,u.updateDelete=function(e,t){return e.expression!==t?p(ke(t),e):e},u.createTypeOf=be,u.updateTypeOf=function(e,t){return e.expression!==t?p(be(t),e):e},u.createVoid=b,u.updateVoid=function(e,t){return e.expression!==t?p(b(t),e):e},u.createAwait=ve,u.updateAwait=function(e,t){return e.expression!==t?p(ve(t),e):e},u.createPrefix=v,u.updatePrefix=function(e,t){return e.operand!==t?p(v(e.operator,t),e):e},u.createPostfix=T,u.updatePostfix=function(e,t){return e.operand!==t?p(T(t,e.operator),e):e},u.createBinary=E,u.updateBinary=function(e,t,n,o){return e.left!==t||e.right!==n?p(E(t,o||e.operatorToken,n),e):e},u.createConditional=Te,u.updateConditional=function e(t,n){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];if(2===o.length)return e(t,n,t.questionToken,o[0],t.colonToken,o[1]);u.Debug.assert(4===o.length);var i=o[0],s=o[1],a=o[2],l=o[3];return t.condition!==n||t.questionToken!==i||t.whenTrue!==s||t.colonToken!==a||t.whenFalse!==l?p(Te(n,i,s,a,l),t):t},u.createTemplateExpression=Ee,u.updateTemplateExpression=function(e,t,n){return e.head!==t||e.templateSpans!==n?p(Ee(t,n),e):e},u.createTemplateHead=function(e){var t=d(14);return t.text=e,t},u.createTemplateMiddle=function(e){var t=d(15);return t.text=e,t},u.createTemplateTail=function(e){var t=d(16);return t.text=e,t},u.createNoSubstitutionTemplateLiteral=function(e){var t=d(13);return t.text=e,t},u.createYield=Se,u.updateYield=function(e,t,n){return e.expression!==n||e.asteriskToken!==t?p(Se(t,n),e):e},u.createSpread=Ce,u.updateSpread=function(e,t){return e.expression!==t?p(Ce(t),e):e},u.createClassExpression=xe,u.updateClassExpression=function(e,t,n,o,r,i){return e.modifiers!==t||e.name!==n||e.typeParameters!==o||e.heritageClauses!==r||e.members!==i?p(xe(t,n,o,r,i),e):e},u.createOmittedExpression=function(){return d(200)},u.createExpressionWithTypeArguments=Be,u.updateExpressionWithTypeArguments=function(e,t,n){return e.typeArguments!==t||e.expression!==n?p(Be(t,n),e):e},u.createAsExpression=Ae,u.updateAsExpression=function(e,t,n){return e.expression!==t||e.type!==n?p(Ae(t,n),e):e},u.createNonNullExpression=Ie,u.updateNonNullExpression=function(e,t){return e.expression!==t?p(Ie(t),e):e},u.createMetaProperty=De,u.updateMetaProperty=function(e,t){return e.name!==t?p(De(e.keywordToken,t),e):e},u.createTemplateSpan=Ne,u.updateTemplateSpan=function(e,t,n){return e.expression!==t||e.literal!==n?p(Ne(t,n),e):e},u.createSemicolonClassElement=function(){return d(206)},u.createBlock=S,u.updateBlock=function(e,t){return e.statements!==t?p(S(t,e.multiLine),e):e},u.createVariableStatement=we,u.updateVariableStatement=function(e,t,n){return e.modifiers!==t||e.declarationList!==n?p(we(t,n),e):e},u.createEmptyStatement=function(){return d(209)},u.createStatement=Oe,u.updateStatement=function(e,t){return e.expression!==t?p(Oe(t),e):e},u.createIf=Re,u.updateIf=function(e,t,n,o){return e.expression!==t||e.thenStatement!==n||e.elseStatement!==o?p(Re(t,n,o),e):e},u.createDo=Pe,u.updateDo=function(e,t,n){return e.statement!==t||e.expression!==n?p(Pe(t,n),e):e},u.createWhile=Le,u.updateWhile=function(e,t,n){return e.expression!==t||e.statement!==n?p(Le(t,n),e):e},u.createFor=Me,u.updateFor=function(e,t,n,o,r){return e.initializer!==t||e.condition!==n||e.incrementor!==o||e.statement!==r?p(Me(t,n,o,r),e):e},u.createForIn=Fe,u.updateForIn=function(e,t,n,o){return e.initializer!==t||e.expression!==n||e.statement!==o?p(Fe(t,n,o),e):e},u.createForOf=Ue,u.updateForOf=function(e,t,n,o,r){return e.awaitModifier!==t||e.initializer!==n||e.expression!==o||e.statement!==r?p(Ue(t,n,o,r),e):e},u.createContinue=He,u.updateContinue=function(e,t){return e.label!==t?p(He(t),e):e},u.createBreak=Ve,u.updateBreak=function(e,t){return e.label!==t?p(Ve(t),e):e},u.createReturn=We,u.updateReturn=function(e,t){return e.expression!==t?p(We(t),e):e},u.createWith=Ge,u.updateWith=function(e,t,n){return e.expression!==t||e.statement!==n?p(Ge(t,n),e):e},u.createSwitch=Ke,u.updateSwitch=function(e,t,n){return e.expression!==t||e.caseBlock!==n?p(Ke(t,n),e):e},u.createLabel=je,u.updateLabel=function(e,t,n){return e.label!==t||e.statement!==n?p(je(t,n),e):e},u.createThrow=ze,u.updateThrow=function(e,t){return e.expression!==t?p(ze(t),e):e},u.createTry=Xe,u.updateTry=function(e,t,n,o){return e.tryBlock!==t||e.catchClause!==n||e.finallyBlock!==o?p(Xe(t,n,o),e):e},u.createDebuggerStatement=function(){return d(225)},u.createVariableDeclaration=C,u.updateVariableDeclaration=function(e,t,n,o){return e.name!==t||e.type!==n||e.initializer!==o?p(C(t,n,o),e):e},u.createVariableDeclarationList=x,u.updateVariableDeclarationList=function(e,t){return e.declarations!==t?p(x(t,e.flags),e):e},u.createFunctionDeclaration=$e,u.updateFunctionDeclaration=function(e,t,n,o,r,i,s,a,l){return e.decorators!==t||e.modifiers!==n||e.asteriskToken!==o||e.name!==r||e.typeParameters!==i||e.parameters!==s||e.type!==a||e.body!==l?p($e(t,n,o,r,i,s,a,l),e):e},u.createClassDeclaration=Ye,u.updateClassDeclaration=function(e,t,n,o,r,i,s){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.typeParameters!==r||e.heritageClauses!==i||e.members!==s?p(Ye(t,n,o,r,i,s),e):e},u.createInterfaceDeclaration=qe,u.updateInterfaceDeclaration=function(e,t,n,o,r,i,s){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.typeParameters!==r||e.heritageClauses!==i||e.members!==s?p(qe(t,n,o,r,i,s),e):e},u.createTypeAliasDeclaration=Je,u.updateTypeAliasDeclaration=function(e,t,n,o,r,i){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.typeParameters!==r||e.type!==i?p(Je(t,n,o,r,i),e):e},u.createEnumDeclaration=Qe,u.updateEnumDeclaration=function(e,t,n,o,r){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.members!==r?p(Qe(t,n,o,r),e):e},u.createModuleDeclaration=Ze,u.updateModuleDeclaration=function(e,t,n,o,r){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.body!==r?p(Ze(t,n,o,r,e.flags),e):e},u.createModuleBlock=et,u.updateModuleBlock=function(e,t){return e.statements!==t?p(et(t),e):e},u.createCaseBlock=tt,u.updateCaseBlock=function(e,t){return e.clauses!==t?p(tt(t),e):e},u.createNamespaceExportDeclaration=nt,u.updateNamespaceExportDeclaration=function(e,t){return e.name!==t?p(nt(t),e):e},u.createImportEqualsDeclaration=ot,u.updateImportEqualsDeclaration=function(e,t,n,o,r){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.moduleReference!==r?p(ot(t,n,o,r),e):e},u.createImportDeclaration=rt,u.updateImportDeclaration=function(e,t,n,o,r){return e.decorators!==t||e.modifiers!==n||e.importClause!==o||e.moduleSpecifier!==r?p(rt(t,n,o,r),e):e},u.createImportClause=it,u.updateImportClause=function(e,t,n){return e.name!==t||e.namedBindings!==n?p(it(t,n),e):e},u.createNamespaceImport=st,u.updateNamespaceImport=function(e,t){return e.name!==t?p(st(t),e):e},u.createNamedImports=at,u.updateNamedImports=function(e,t){return e.elements!==t?p(at(t),e):e},u.createImportSpecifier=lt,u.updateImportSpecifier=function(e,t,n){return e.propertyName!==t||e.name!==n?p(lt(t,n),e):e},u.createExportAssignment=B,u.updateExportAssignment=function(e,t,n,o){return e.decorators!==t||e.modifiers!==n||e.expression!==o?p(B(t,n,e.isExportEquals,o),e):e},u.createExportDeclaration=A,u.updateExportDeclaration=function(e,t,n,o,r){return e.decorators!==t||e.modifiers!==n||e.exportClause!==o||e.moduleSpecifier!==r?p(A(t,n,o,r),e):e},u.createNamedExports=I,u.updateNamedExports=function(e,t){return e.elements!==t?p(I(t),e):e},u.createExportSpecifier=D,u.updateExportSpecifier=function(e,t,n){return e.propertyName!==t||e.name!==n?p(D(t,n),e):e},u.createExternalModuleReference=ct,u.updateExternalModuleReference=function(e,t){return e.expression!==t?p(ct(t),e):e},u.createJsxElement=ut,u.updateJsxElement=function(e,t,n,o){return e.openingElement!==t||e.children!==n||e.closingElement!==o?p(ut(t,n,o),e):e},u.createJsxSelfClosingElement=dt,u.updateJsxSelfClosingElement=function(e,t,n){return e.tagName!==t||e.attributes!==n?p(dt(t,n),e):e},u.createJsxOpeningElement=pt,u.updateJsxOpeningElement=function(e,t,n){return e.tagName!==t||e.attributes!==n?p(pt(t,n),e):e},u.createJsxClosingElement=gt,u.updateJsxClosingElement=function(e,t){return e.tagName!==t?p(gt(t),e):e},u.createJsxAttribute=ht,u.updateJsxAttribute=function(e,t,n){return e.name!==t||e.initializer!==n?p(ht(t,n),e):e},u.createJsxAttributes=_t,u.updateJsxAttributes=function(e,t){return e.properties!==t?p(_t(t),e):e},u.createJsxSpreadAttribute=mt,u.updateJsxSpreadAttribute=function(e,t){return e.expression!==t?p(mt(t),e):e},u.createJsxExpression=ft,u.updateJsxExpression=function(e,t){return e.expression!==t?p(ft(e.dotDotDotToken,t),e):e},u.createCaseClause=yt,u.updateCaseClause=function(e,t,n){return e.expression!==t||e.statements!==n?p(yt(t,n),e):e},u.createDefaultClause=kt,u.updateDefaultClause=function(e,t){return e.statements!==t?p(kt(t),e):e},u.createHeritageClause=bt,u.updateHeritageClause=function(e,t){return e.types!==t?p(bt(e.token,t),e):e},u.createCatchClause=vt,u.updateCatchClause=function(e,t,n){return e.variableDeclaration!==t||e.block!==n?p(vt(t,n),e):e},u.createPropertyAssignment=Tt,u.updatePropertyAssignment=function(e,t,n){return e.name!==t||e.initializer!==n?p(Tt(t,n),e):e},u.createShorthandPropertyAssignment=Et,u.updateShorthandPropertyAssignment=function(e,t,n){return e.name!==t||e.objectAssignmentInitializer!==n?p(Et(t,n),e):e},u.createSpreadAssignment=St,u.updateSpreadAssignment=function(e,t){return e.expression!==t?p(St(t),e):e},u.createEnumMember=Ct,u.updateEnumMember=function(e,t,n){return e.name!==t||e.initializer!==n?p(Ct(t,n),e):e},u.updateSourceFileNode=function(e,t){var n;return e.statements!==t?((n=d(265)).flags|=e.flags,n.statements=g(t),n.endOfFileToken=e.endOfFileToken,n.fileName=e.fileName,n.path=e.path,n.text=e.text,void 0!==e.amdDependencies&&(n.amdDependencies=e.amdDependencies),void 0!==e.moduleName&&(n.moduleName=e.moduleName),void 0!==e.referencedFiles&&(n.referencedFiles=e.referencedFiles),void 0!==e.typeReferenceDirectives&&(n.typeReferenceDirectives=e.typeReferenceDirectives),void 0!==e.languageVariant&&(n.languageVariant=e.languageVariant),void 0!==e.isDeclarationFile&&(n.isDeclarationFile=e.isDeclarationFile),void 0!==e.renamedDependencies&&(n.renamedDependencies=e.renamedDependencies),void 0!==e.hasNoDefaultLib&&(n.hasNoDefaultLib=e.hasNoDefaultLib),void 0!==e.languageVersion&&(n.languageVersion=e.languageVersion),void 0!==e.scriptKind&&(n.scriptKind=e.scriptKind),void 0!==e.externalModuleIndicator&&(n.externalModuleIndicator=e.externalModuleIndicator),void 0!==e.commonJsModuleIndicator&&(n.commonJsModuleIndicator=e.commonJsModuleIndicator),void 0!==e.identifiers&&(n.identifiers=e.identifiers),void 0!==e.nodeCount&&(n.nodeCount=e.nodeCount),void 0!==e.identifierCount&&(n.identifierCount=e.identifierCount),void 0!==e.symbolCount&&(n.symbolCount=e.symbolCount),void 0!==e.parseDiagnostics&&(n.parseDiagnostics=e.parseDiagnostics),void 0!==e.bindDiagnostics&&(n.bindDiagnostics=e.bindDiagnostics),void 0!==e.lineMap&&(n.lineMap=e.lineMap),void 0!==e.classifiableNames&&(n.classifiableNames=e.classifiableNames),void 0!==e.resolvedModules&&(n.resolvedModules=e.resolvedModules),void 0!==e.resolvedTypeReferenceDirectiveNames&&(n.resolvedTypeReferenceDirectiveNames=e.resolvedTypeReferenceDirectiveNames),void 0!==e.imports&&(n.imports=e.imports),void 0!==e.moduleAugmentations&&(n.moduleAugmentations=e.moduleAugmentations),p(n,e)):e},u.getMutableClone=function(e){var t=n(e);return t.pos=e.pos,t.end=e.end,t.parent=e.parent,t},u.createNotEmittedStatement=function(e){var t=d(287);return t.original=e,R(t,e),t},u.createEndOfDeclarationMarker=function(e){var t=d(291);return t.emitNode={},t.original=e,t},u.createMergeDeclarationMarker=function(e){var t=d(290);return t.emitNode={},t.original=e,t},u.createPartiallyEmittedExpression=xt,u.updatePartiallyEmittedExpression=function(e,t){return e.expression!==t?p(xt(t,e.original),e):e},u.createCommaList=At,u.updateCommaList=function(e,t){return e.elements!==t?p(At(t),e):e},u.createBundle=It,u.updateBundle=function(e,t){return e.sourceFiles!==t?It(t):e},u.createImmediatelyInvokedFunctionExpression=function(e,t,n){return f(y(void 0,void 0,void 0,void 0,t?[t]:[],void 0,S(e,!0)),void 0,n?[n]:[])},u.createImmediatelyInvokedArrowFunction=function(e,t,n){return f(k(void 0,void 0,t?[t]:[],void 0,void 0,S(e,!0)),void 0,n?[n]:[])},u.createComma=function(e,t){return E(e,26,t)},u.createLessThan=function(e,t){return E(e,27,t)},u.createAssignment=function(e,t){return E(e,58,t)},u.createStrictEquality=function(e,t){return E(e,34,t)},u.createStrictInequality=function(e,t){return E(e,35,t)},u.createAdd=function(e,t){return E(e,37,t)},u.createSubtract=function(e,t){return E(e,38,t)},u.createPostfixIncrement=function(e){return T(e,43)},u.createLogicalAnd=function(e,t){return E(e,53,t)},u.createLogicalOr=function(e,t){return E(e,54,t)},u.createLogicalNot=function(e){return v(51,e)},u.createVoidZero=function(){return b(o(0))},u.createExportDefault=function(e){return B(void 0,void 0,!1,e)},u.createExternalModuleExport=function(e){return A(void 0,void 0,I([D(void 0,e)]))},u.disposeEmitNodes=function(e){e=(e=u.getSourceFileOfNode(u.getParseTreeNode(e)))&&e.emitNode,e=e&&e.annotatedNodes;if(e)for(var t=0,n=e;t<n.length;t++)n[t].emitNode=void 0},u.getOrCreateEmitNode=O,u.setTextRange=R,u.setEmitFlags=P,u.addEmitFlags=function(e,t){var n=O(e);return n.flags=n.flags|t,e},u.getSourceMapRange=function(e){var t=e.emitNode;return t&&t.sourceMapRange||e},u.setSourceMapRange=function(e,t){return O(e).sourceMapRange=t,e},u.createSourceMapSource=function(e,t,n){return new(a=a||u.objectAllocator.getSourceMapSourceConstructor())(e,t,n)},u.getTokenSourceMapRange=function(e,t){e=e.emitNode,e=e&&e.tokenSourceMapRanges;return e&&e[t]},u.setTokenSourceMapRange=function(e,t,n){var o=O(e);return(o.tokenSourceMapRanges||(o.tokenSourceMapRanges=[]))[t]=n,e},u.getCommentRange=function(e){var t=e.emitNode;return t&&t.commentRange||e},u.setCommentRange=function(e,t){return O(e).commentRange=t,e},u.getSyntheticLeadingComments=Dt,u.setSyntheticLeadingComments=Nt,u.addSyntheticLeadingComment=function(e,t,n,o){return Nt(e,u.append(Dt(e),{kind:t,pos:-1,end:-1,hasTrailingNewLine:o,text:n}))},u.getSyntheticTrailingComments=wt,u.setSyntheticTrailingComments=Ot,u.addSyntheticTrailingComment=function(e,t,n,o){return Ot(e,u.append(wt(e),{kind:t,pos:-1,end:-1,hasTrailingNewLine:o,text:n}))},u.getConstantValue=function(e){e=e.emitNode;return e&&e.constantValue},u.setConstantValue=function(e,t){return O(e).constantValue=t,e},u.addEmitHelper=function(e,t){var n=O(e);return n.helpers=u.append(n.helpers,t),e},u.addEmitHelpers=function(e,t){if(u.some(t))for(var n=O(e),o=0,r=t;o<r.length;o++){var i=r[o];n.helpers=u.appendIfUnique(n.helpers,i)}return e},u.removeEmitHelper=function(e,t){e=e.emitNode;if(e){e=e.helpers;if(e)return u.orderedRemoveItem(e,t)}return!1},u.getEmitHelpers=function(e){e=e.emitNode;return e&&e.helpers},u.moveEmitHelpers=function(e,t,n){var e=e.emitNode,o=e&&e.helpers;if(u.some(o)){for(var r=O(t),i=0,s=0;s<o.length;s++){var a=o[s];n(a)?(i++,r.helpers=u.appendIfUnique(r.helpers,a)):0<i&&(o[s-i]=a)}0<i&&(o.length-=i)}},u.compareEmitHelpers=function(e,t){return e===t||e.priority===t.priority?0:void 0===e.priority?1:void 0===t.priority?-1:u.compareValues(e.priority,t.priority)},u.setOriginalNode=L}(ts=ts||{}),function(d){function p(e,t,n){return d.isComputedPropertyName(t)?d.setTextRange(d.createElementAccess(e,t.expression),n):(n=d.setTextRange(d.isIdentifier(t)?d.createPropertyAccess(e,t):d.createElementAccess(e,t),t),d.getOrCreateEmitNode(n).flags|=64,n)}function i(e,t){e=d.createIdentifier(e||"React");return e.flags&=-9,e.parent=d.getParseTreeNode(t),e}function g(e,t,n){return e?function e(t,n){var o,r;return d.isQualifiedName(t)?(o=e(t.left,n),(r=d.createIdentifier(d.idText(t.right))).escapedText=t.right.escapedText,d.createPropertyAccess(o,r)):i(d.idText(t),n)}(e,n):d.createPropertyAccess(i(t,n),"createElement")}function r(e){return d.setEmitFlags(d.createIdentifier(e),4098)}d.nullTransformationContext={enableEmitNotification:d.noop,enableSubstitution:d.noop,endLexicalEnvironment:function(){},getCompilerOptions:d.notImplemented,getEmitHost:d.notImplemented,getEmitResolver:d.notImplemented,hoistFunctionDeclaration:d.noop,hoistVariableDeclaration:d.noop,isEmitNotificationEnabled:d.notImplemented,isSubstitutionEnabled:d.notImplemented,onEmitNode:d.noop,onSubstituteNode:d.notImplemented,readEmitHelpers:d.notImplemented,requestEmitHelper:d.noop,resumeLexicalEnvironment:d.noop,startLexicalEnvironment:d.noop,suspendLexicalEnvironment:d.noop},d.createTypeCheck=function(e,t){return"undefined"===t?d.createStrictEquality(e,d.createVoidZero()):d.createStrictEquality(d.createTypeOf(e),d.createLiteral(t))},d.createMemberAccessForPropertyName=p,d.createFunctionCall=function(e,t,n,o){return d.setTextRange(d.createCall(d.createPropertyAccess(e,"call"),void 0,[t].concat(n)),o)},d.createFunctionApply=function(e,t,n,o){return d.setTextRange(d.createCall(d.createPropertyAccess(e,"apply"),void 0,[t,n]),o)},d.createArraySlice=function(e,t){var n=[];return void 0!==t&&n.push("number"==typeof t?d.createLiteral(t):t),d.createCall(d.createPropertyAccess(e,"slice"),void 0,n)},d.createArrayConcat=function(e,t){return d.createCall(d.createPropertyAccess(e,"concat"),void 0,t)},d.createMathPow=function(e,t,n){return d.setTextRange(d.createCall(d.createPropertyAccess(d.createIdentifier("Math"),"pow"),void 0,[e,t]),n)},d.createExpressionForJsxElement=function(e,t,n,o,r,i,s){var a=[n];if(o&&a.push(o),r&&0<r.length)if(o||a.push(d.createNull()),1<r.length)for(var l=0,c=r;l<c.length;l++){var u=c[l];u.startsOnNewLine=!0,a.push(u)}else a.push(r[0]);return d.setTextRange(d.createCall(g(e,t,i),void 0,a),s)},d.getHelperName=r;var e,o={name:"typescript:values",scoped:!1,text:'\n            var __values = (this && this.__values) || function (o) {\n                var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;\n                if (m) return m.call(o);\n                return {\n                    next: function () {\n                        if (o && i >= o.length) o = void 0;\n                        return { value: o && o[i++], done: !o };\n                    }\n                };\n            };\n        '},s={name:"typescript:read",scoped:!(d.createValuesHelper=function(e,t,n){return e.requestEmitHelper(o),d.setTextRange(d.createCall(r("__values"),void 0,[t]),n)}),text:'\n            var __read = (this && this.__read) || function (o, n) {\n                var m = typeof Symbol === "function" && o[Symbol.iterator];\n                if (!m) return o;\n                var i = m.call(o), r, ar = [], e;\n                try {\n                    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n                }\n                catch (error) { e = { error: error }; }\n                finally {\n                    try {\n                        if (r && !r.done && (m = i["return"])) m.call(i);\n                    }\n                    finally { if (e) throw e.error; }\n                }\n                return ar;\n            };\n        '},L={name:"typescript:spread",scoped:!(d.createReadHelper=function(e,t,n,o){return e.requestEmitHelper(s),d.setTextRange(d.createCall(r("__read"),void 0,void 0!==n?[t,d.createLiteral(n)]:[t]),o)}),text:"\n            var __spread = (this && this.__spread) || function () {\n                for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n                return ar;\n            };"};function a(e,t){var n=S(e);switch(n.kind){case 71:return t;case 99:case 8:case 9:return;case 177:return 0!==n.elements.length;case 178:return 0<n.properties.length;default:return 1}}function h(e){return d.isIdentifier(e)?d.createLiteral(e):d.isComputedPropertyName(e)?d.getMutableClone(e.expression):d.getMutableClone(e)}function l(e,t,n){return c(e,t,n,8192)}function c(e,t,n,o){var r,i=d.getNameOfDeclaration(e);return i&&d.isIdentifier(i)&&!d.isGeneratedIdentifier(i)?(r=d.getMutableClone(i),o|=d.getEmitFlags(i),n||(o|=48),t||(o|=1536),o&&d.setEmitFlags(r,o),r):d.getGeneratedNameForNode(e)}function u(e,t,n,o){var r,e=d.createPropertyAccess(e,d.nodeIsSynthesized(t)?t:d.getSynthesizedClone(t));return d.setTextRange(e,t),o||(r|=48),n||(r|=1536),r&&d.setEmitFlags(e,r),e}function _(e){return d.isStringLiteral(e.expression)&&"use strict"===e.expression.text}function m(e,t,n){d.Debug.assert(0===e.length,"Prologue directives should be at the first statement in the target statements array");for(var o=!1,r=0,i=t.length;r<i;){var s=t[r];if(!d.isPrologueDirective(s))break;_(s)&&(o=!0),e.push(s),r++}return n&&!o&&e.push(B(d.createStatement(d.createLiteral("use strict")))),r}function f(e,t,n,o){for(var r=t.length;n<r;){var i=t[n];if(!(1048576&d.getEmitFlags(i)))break;e.push(o?d.visitNode(i,o,d.isStatement):i),n++}return n}function y(e){var t;return e=d.skipPartiallyEmittedExpressions(e),d.isLiteralKind(e.kind)?e.kind:194===e.kind&&37===e.operatorToken.kind?void 0!==e.cachedLiteralKind?e.cachedLiteralKind:(t=y(e.left),t=d.isLiteralKind(t)&&t===y(e.right)?t:0,e.cachedLiteralKind=t):0}function k(e){var t=d.skipPartiallyEmittedExpressions(e);return d.isLeftHandSideExpression(t)&&(182!==t.kind||t.arguments)?e:d.setTextRange(d.createParen(e),e)}function b(e){var t=d.skipPartiallyEmittedExpressions(e);return d.getExpressionPrecedence(t)>d.getOperatorPrecedence(194,26)?e:d.setTextRange(d.createParen(e),e)}function t(e){switch(e.kind){case 166:case 167:case 160:case 161:return d.createParenthesizedType(e)}return e}function v(e,t){for(;;){switch(e.kind){case 193:e=e.operand;continue;case 194:e=e.left;continue;case 195:e=e.condition;continue;case 181:if(t)return e;case 180:case 179:case 288:e=e.expression;continue}return e}}function T(e,t){switch(void 0===t&&(t=7),e.kind){case 185:return 0!=(1&t);case 184:case 202:case 203:return 0!=(2&t);case 288:return 0!=(4&t)}return!1}function E(e,t){var n;for(void 0===t&&(t=7);n=e,1&t&&(e=S(e)),2&t&&(e=C(e)),n!==(e=4&t?d.skipPartiallyEmittedExpressions(e):e););return e}function S(e){for(;185===e.kind;)e=e.expression;return e}function C(e){for(;d.isAssertionExpression(e)||203===e.kind;)e=e.expression;return e}function x(e,t,n){if(void 0===n&&(n=7),!e||!T(e,n)||185===(n=e).kind&&d.nodeIsSynthesized(n)&&d.nodeIsSynthesized(d.getSourceMapRange(n))&&d.nodeIsSynthesized(d.getCommentRange(n))&&!d.some(d.getSyntheticLeadingComments(n))&&!d.some(d.getSyntheticTrailingComments(n)))return t;else{var o=e,r=x(e.expression,t);switch(o.kind){case 185:return d.updateParen(o,r);case 184:return d.updateTypeAssertion(o,o.type,r);case 202:return d.updateAsExpression(o,r,o.type);case 203:return d.updateNonNullExpression(o,r);case 288:return d.updatePartiallyEmittedExpression(o,r)}}}function B(e){return e.startsOnNewLine=!0,e}function A(e){e=d.getOriginalNode(e,d.isSourceFile),e=e&&e.emitNode;return e&&e.externalHelpersModuleName}function I(e,t,n){if(e)return e.moduleName?d.createLiteral(e.moduleName):e.isDeclarationFile||!n.out&&!n.outFile?void 0:d.createLiteral(d.getExternalModuleNameFromPath(t,e.fileName))}function D(e){if(d.isDeclarationBindingElement(e))return e.name;if(!d.isObjectLiteralElementLike(e))return d.isAssignmentExpression(e,!0)?D(e.left):d.isSpreadElement(e)?D(e.expression):e;switch(e.kind){case 261:return D(e.initializer);case 262:return e.name;case 263:return D(e.expression)}}function n(e){var t;return d.isBindingElement(e)?e.dotDotDotToken?(d.Debug.assertNode(e.name,d.isIdentifier),d.setOriginalNode(d.setTextRange(d.createSpread(e.name),e),e)):(t=P(e.name),e.initializer?d.setOriginalNode(d.setTextRange(d.createAssignment(t,e.initializer),e),e):t):(d.Debug.assertNode(e,d.isExpression),e)}function N(e){var t;return d.isBindingElement(e)?e.dotDotDotToken?(d.Debug.assertNode(e.name,d.isIdentifier),d.setOriginalNode(d.setTextRange(d.createSpreadAssignment(e.name),e),e)):e.propertyName?(t=P(e.name),d.setOriginalNode(d.setTextRange(d.createPropertyAssignment(e.propertyName,e.initializer?d.createAssignment(t,e.initializer):t),e),e)):(d.Debug.assertNode(e.name,d.isIdentifier),d.setOriginalNode(d.setTextRange(d.createShorthandPropertyAssignment(e.name,e.initializer),e),e)):(d.Debug.assertNode(e,d.isObjectLiteralElementLike),e)}function w(e){switch(e.kind){case 175:case 177:return R(e);case 174:case 178:return O(e)}}function O(e){return d.isObjectBindingPattern(e)?d.setOriginalNode(d.setTextRange(d.createObjectLiteral(d.map(e.elements,N)),e),e):(d.Debug.assertNode(e,d.isObjectLiteralExpression),e)}function R(e){return d.isArrayBindingPattern(e)?d.setOriginalNode(d.setTextRange(d.createArrayLiteral(d.map(e.elements,n)),e),e):(d.Debug.assertNode(e,d.isArrayLiteralExpression),e)}function P(e){return d.isBindingPattern(e)?w(e):(d.Debug.assertNode(e,d.isExpression),e)}d.createSpreadHelper=function(e,t,n){return e.requestEmitHelper(s),e.requestEmitHelper(L),d.setTextRange(d.createCall(r("__spread"),void 0,t),n)},d.createForOfBindingStatement=function(e,t){var n;return d.isVariableDeclarationList(e)?(n=d.firstOrUndefined(e.declarations),n=d.updateVariableDeclaration(n,n.name,void 0,t),d.setTextRange(d.createVariableStatement(void 0,d.updateVariableDeclarationList(e,[n])),e)):(n=d.setTextRange(d.createAssignment(e,t),e),d.setTextRange(d.createStatement(n),e))},d.insertLeadingStatement=function(e,t){return d.isBlock(e)?d.updateBlock(e,d.setTextRange(d.createNodeArray([t].concat(e.statements)),e.statements)):d.createBlock(d.createNodeArray([e,t]),!0)},d.restoreEnclosingLabel=function e(t,n,o){var r;return n?(r=d.updateLabel(n,n.label,222===n.statement.kind?e(t,n.statement):t),o&&o(n),r):t},d.createCallBinding=function(e,t,n,o){var r,i,s=E(e,7);if(d.isSuperProperty(s))r=d.createThis(),i=s;else if(97===s.kind)r=d.createThis(),i=n<2?d.setTextRange(d.createIdentifier("_super"),s):s;else if(4096&d.getEmitFlags(s))r=d.createVoidZero(),i=k(s);else switch(s.kind){case 179:a(s.expression,o)?(r=d.createTempVariable(t),i=d.createPropertyAccess(d.setTextRange(d.createAssignment(r,s.expression),s.expression),s.name),d.setTextRange(i,s)):(r=s.expression,i=s);break;case 180:a(s.expression,o)?(r=d.createTempVariable(t),i=d.createElementAccess(d.setTextRange(d.createAssignment(r,s.expression),s.expression),s.argumentExpression),d.setTextRange(i,s)):(r=s.expression,i=s);break;default:r=d.createVoidZero(),i=k(e)}return{target:i,thisArg:r}},d.inlineExpressions=function(e){return 10<e.length?d.createCommaList(e):d.reduceLeft(e,d.createComma)},d.createExpressionFromEntityName=function e(t){var n,o;return d.isQualifiedName(t)?(n=e(t.left),o=d.getMutableClone(t.right),d.setTextRange(d.createPropertyAccess(n,o),t)):d.getMutableClone(t)},d.createExpressionForPropertyName=h,d.createExpressionForObjectLiteralElementLike=function(e,t,n){switch(t.kind){case 153:case 154:var o,r=e.properties,i=t,s=n,a=e.multiLine,l=(r=d.getAllAccessorDeclarations(r,i)).firstAccessor,c=r.getAccessor,r=r.setAccessor;return i===l?(o=[],c&&(u=d.createFunctionExpression(c.modifiers,void 0,void 0,void 0,c.parameters,void 0,c.body),d.setTextRange(u,c),d.setOriginalNode(u,c),c=d.createPropertyAssignment("get",u),o.push(c)),r&&(u=d.createFunctionExpression(r.modifiers,void 0,void 0,void 0,r.parameters,void 0,r.body),d.setTextRange(u,r),d.setOriginalNode(u,r),c=d.createPropertyAssignment("set",u),o.push(c)),o.push(d.createPropertyAssignment("enumerable",d.createTrue())),o.push(d.createPropertyAssignment("configurable",d.createTrue())),r=d.setTextRange(d.createCall(d.createPropertyAccess(d.createIdentifier("Object"),"defineProperty"),void 0,[s,h(i.name),d.createObjectLiteral(o,a)]),l),d.aggregateTransformFlags(r)):void 0;case 261:return u=t,d.aggregateTransformFlags(d.setOriginalNode(d.setTextRange(d.createAssignment(p(n,u.name,u.name),u.initializer),u),u));case 262:return c=t,d.aggregateTransformFlags(d.setOriginalNode(d.setTextRange(d.createAssignment(p(n,c.name,c.name),d.getSynthesizedClone(c.name)),c),c));case 151:return s=t,d.aggregateTransformFlags(d.setOriginalNode(d.setTextRange(d.createAssignment(p(n,s.name,s.name),d.setOriginalNode(d.setTextRange(d.createFunctionExpression(s.modifiers,s.asteriskToken,void 0,void 0,s.parameters,void 0,s.body),s),s)),s),s))}var u},d.getInternalName=function(e,t,n){return c(e,t,n,49152)},d.isInternalName=function(e){return 0!=(32768&d.getEmitFlags(e))},d.getLocalName=function(e,t,n){return c(e,t,n,16384)},d.isLocalName=function(e){return 0!=(16384&d.getEmitFlags(e))},d.getExportName=l,d.isExportName=function(e){return 0!=(8192&d.getEmitFlags(e))},d.getDeclarationName=function(e,t,n){return c(e,t,n)},d.getExternalModuleOrNamespaceExportName=function(e,t,n,o){return e&&d.hasModifier(t,1)?u(e,c(t),n,o):l(t,n,o)},d.getNamespaceMemberName=u,d.convertToFunctionBody=function(e,t){return d.isBlock(e)?e:d.setTextRange(d.createBlock([d.setTextRange(d.createReturn(e),e)],t),e)},d.convertFunctionDeclarationToExpression=function(e){d.Debug.assert(!!e.body);var t=d.createFunctionExpression(e.modifiers,e.asteriskToken,e.name,e.typeParameters,e.parameters,e.type,e.body);return d.setOriginalNode(t,e),d.setTextRange(t,e),e.startsOnNewLine&&(t.startsOnNewLine=!0),d.aggregateTransformFlags(t),t},d.addPrologue=function(e,t,n,o){return f(e,t,m(e,t,n),o)},d.addStandardPrologue=m,d.addCustomPrologue=f,d.startsWithUseStrict=function(e){e=d.firstOrUndefined(e);return void 0!==e&&d.isPrologueDirective(e)&&_(e)},d.ensureUseStrict=function(e){for(var t=!1,n=0,o=e;n<o.length;n++){var r=o[n];if(!d.isPrologueDirective(r))break;if(_(r)){t=!0;break}}return t?e:d.setTextRange(d.createNodeArray([B(d.createStatement(d.createLiteral("use strict")))].concat(e)),e)},d.parenthesizeBinaryOperand=function(e,t,n,o){return 185!==d.skipPartiallyEmittedExpressions(t).kind&&function(e,t,n,o){var r=d.getOperatorPrecedence(194,e),i=d.getOperatorAssociativity(194,e),s=d.skipPartiallyEmittedExpressions(t),a=d.getExpressionPrecedence(s);switch(d.compareValues(a,r)){case-1:return n||1!==i||197!==t.kind;case 1:return;case 0:if(n)return 1===i;if(d.isBinaryExpression(s)&&s.operatorToken.kind===e){if(39===e||49===e||48===e||50===e)return;if(37===e){var l=o?y(o):0;if(d.isLiteralKind(l)&&l===y(s))return}}return 0===d.getExpressionAssociativity(s)}}(e,t,n,o)?d.createParen(t):t},d.parenthesizeForConditionalHead=function(e){var t=d.getOperatorPrecedence(195,55),n=d.skipPartiallyEmittedExpressions(e),n=d.getExpressionPrecedence(n);return-1===d.compareValues(n,t)?d.createParen(e):e},d.parenthesizeSubexpressionOfConditionalExpression=function(e){return 194===e.kind&&26===e.operatorToken.kind?d.createParen(e):e},d.parenthesizeForNew=function(e){var t=v(e,!0);switch(t.kind){case 181:return d.createParen(e);case 182:return t.arguments?e:d.createParen(e)}return k(e)},d.parenthesizeForAccess=k,d.parenthesizePostfixOperand=function(e){return d.isLeftHandSideExpression(e)?e:d.setTextRange(d.createParen(e),e)},d.parenthesizePrefixOperand=function(e){return d.isUnaryExpression(e)?e:d.setTextRange(d.createParen(e),e)},d.parenthesizeListElements=function(e){for(var t,n=0;n<e.length;n++){var o=b(e[n]);void 0===t&&o===e[n]||(t=void 0===t?e.slice(0,n):t).push(o)}return void 0!==t?d.setTextRange(d.createNodeArray(t,e.hasTrailingComma),e):e},d.parenthesizeExpressionForList=b,d.parenthesizeExpressionForExpressionStatement=function(e){var t=d.skipPartiallyEmittedExpressions(e);if(d.isCallExpression(t)){var n=t.expression,o=d.skipPartiallyEmittedExpressions(n).kind;if(186===o||187===o)return(o=d.getMutableClone(t)).expression=d.setTextRange(d.createParen(n),n),x(e,o,4)}n=v(t,!1).kind;return 178===n||186===n?d.setTextRange(d.createParen(e),e):e},d.parenthesizeElementTypeMember=t,d.parenthesizeArrayTypeMember=function(e){switch(e.kind){case 162:case 170:return d.createParenthesizedType(e)}return t(e)},d.parenthesizeElementTypeMembers=function(e){return d.createNodeArray(d.sameMap(e,t))},d.parenthesizeTypeParameters=function(e){if(d.some(e)){for(var t=[],n=0;n<e.length;++n){var o=e[n];t.push(0===n&&d.isFunctionOrConstructorTypeNode(o)&&o.typeParameters?d.createParenthesizedType(o):o)}return d.createNodeArray(t)}},d.parenthesizeConciseBody=function(e){return d.isBlock(e)||178!==v(e,!1).kind?e:d.setTextRange(d.createParen(e),e)},(e=d.OuterExpressionKinds||(d.OuterExpressionKinds={}))[e.Parentheses=1]="Parentheses",e[e.Assertions=2]="Assertions",e[e.PartiallyEmittedExpressions=4]="PartiallyEmittedExpressions",e[e.All=7]="All",d.isOuterExpression=T,d.skipOuterExpressions=E,d.skipParentheses=S,d.skipAssertions=C,d.recreateOuterExpressions=x,d.startOnNewLine=B,d.getExternalHelpersModuleName=A,d.getOrCreateExternalHelpersModuleNameIfNeeded=function(e,t,n){if(t.importHelpers&&d.isEffectiveExternalModule(e,t)){var o=A(e);if(o)return o;var o=d.getEmitModuleKind(t),r=n&&o!==d.ModuleKind.System&&o!==d.ModuleKind.ES2015&&o!==d.ModuleKind.ESNext;if(!r){t=d.getEmitHelpers(e);if(t)for(var i=0,s=t;i<s.length;i++)if(!s[i].scoped){r=!0;break}}return r?(n=d.getOriginalNode(e,d.isSourceFile),(o=d.getOrCreateEmitNode(n)).externalHelpersModuleName||(o.externalHelpersModuleName=d.createUniqueName(d.externalHelpersModuleNameText))):void 0}},d.getLocalNameForExternalImport=function(e,t){var n,o=d.getNamespaceDeclarationNode(e);return o&&!d.isDefaultImport(e)?(n=o.name,d.isGeneratedIdentifier(n)?n:d.createIdentifier(d.getSourceTextOfNodeFromSourceFile(t,o.name))):238===e.kind&&e.importClause||244===e.kind&&e.moduleSpecifier?d.getGeneratedNameForNode(e):void 0},d.getExternalModuleNameLiteral=function(e,t,n,o,r){var i=d.getExternalModuleName(e);if(9===i.kind)return n=n,r=r,I(o.getExternalModuleFileFromDeclaration(e),n,r)||function(e){e=e.renamedDependencies&&e.renamedDependencies.get(i.text);return e&&d.createLiteral(e)}(t)||d.getSynthesizedClone(i)},d.tryGetModuleNameFromFile=I,d.getInitializerOfBindingOrAssignmentElement=function e(t){return d.isDeclarationBindingElement(t)?t.initializer:d.isPropertyAssignment(t)?d.isAssignmentExpression(t.initializer,!0)?t.initializer.right:void 0:d.isShorthandPropertyAssignment(t)?t.objectAssignmentInitializer:d.isAssignmentExpression(t,!0)?t.right:d.isSpreadElement(t)?e(t.expression):void 0},d.getTargetOfBindingOrAssignmentElement=D,d.getRestIndicatorOfBindingOrAssignmentElement=function(e){switch(e.kind){case 146:case 176:return e.dotDotDotToken;case 198:case 263:return e}},d.getPropertyNameOfBindingOrAssignmentElement=function(e){switch(e.kind){case 176:var t;if(e.propertyName)return t=e.propertyName,d.isComputedPropertyName(t)&&d.isStringOrNumericLiteral(t.expression)?t.expression:t;break;case 261:if(e.name)return t=e.name,d.isComputedPropertyName(t)&&d.isStringOrNumericLiteral(t.expression)?t.expression:t;break;case 263:return e.name}var n=D(e);if(n&&d.isPropertyName(n))return d.isComputedPropertyName(n)&&d.isStringOrNumericLiteral(n.expression)?n.expression:n;d.Debug.fail("Invalid property name for binding element.")},d.getElementsOfBindingOrAssignmentPattern=function(e){switch(e.kind){case 174:case 175:case 177:return e.elements;case 178:return e.properties}},d.convertToArrayAssignmentElement=n,d.convertToObjectAssignmentElement=N,d.convertToAssignmentPattern=w,d.convertToObjectAssignmentPattern=O,d.convertToArrayAssignmentPattern=R,d.convertToAssignmentElementTarget=P}(ts=ts||{}),function(g){function s(e,t,n,o){if(void 0===e||void 0===t)return e;g.aggregateTransformFlags(e);t=t(e);return t===e?e:void 0!==t?(e=g.isArray(t)?(o||r)(t):t,g.Debug.assertNode(e,n),g.aggregateTransformFlags(e),e):void 0}function a(e,t,n,o,r){if(void 0===e||void 0===t)return e;var i,s=e.length;(void 0===o||o<0)&&(o=0),(void 0===r||s-o<r)&&(r=s-o),(0<o||r<s)&&(i=g.createNodeArray([],e.hasTrailingComma&&o+r===s));for(var a=0;a<r;a++){var l=e[a+o],c=(g.aggregateTransformFlags(l),void 0!==l?t(l):void 0);if((void 0!==i||void 0===c||c!==l)&&(void 0===i&&(i=g.createNodeArray(e.slice(0,a),e.hasTrailingComma),g.setTextRange(i,e)),c))if(g.isArray(c))for(var u=0,d=c;u<d.length;u++){var p=d[u];g.Debug.assertNode(p,n),g.aggregateTransformFlags(p),i.push(p)}else g.Debug.assertNode(c,n),g.aggregateTransformFlags(c),i.push(c)}return i||e}function l(e,t,n,o,r){n.startLexicalEnvironment(),e=a(e,t,g.isStatement,o),r&&!g.startsWithUseStrict(e)&&(e=g.setTextRange(g.createNodeArray([g.createStatement(g.createLiteral("use strict"))].concat(e)),e));t=n.endLexicalEnvironment();return g.setTextRange(g.createNodeArray(g.concatenate(e,t)),e)}function c(e,t,n,o){void 0===o&&(o=a),n.startLexicalEnvironment();o=o(e,t,g.isParameterDeclaration);return n.suspendLexicalEnvironment(),o}function u(e,t,n){n.resumeLexicalEnvironment();var e=s(e,t,g.isConciseBody),t=n.endLexicalEnvironment();return g.some(t)?(n=g.convertToFunctionBody(e),t=g.mergeLexicalEnvironment(n.statements,t),g.updateBlock(n,t)):e}function r(e){return g.Debug.assert(e.length<=1,"Too many nodes written to output."),g.singleOrUndefined(e)}g.visitNode=s,g.visitNodes=a,g.visitLexicalEnvironment=l,g.visitParameterList=c,g.visitFunctionBody=u,g.visitEachChild=function(e,t,n,o,r){if(void 0===o&&(o=a),void 0!==e){var i=e.kind;if(0<i&&i<=142||169===i)return e;switch(i){case 71:return g.updateIdentifier(e,o(e.typeArguments,t,g.isTypeNode));case 143:return g.updateQualifiedName(e,s(e.left,t,g.isEntityName),s(e.right,t,g.isIdentifier));case 144:return g.updateComputedPropertyName(e,s(e.expression,t,g.isExpression));case 145:return g.updateTypeParameterDeclaration(e,s(e.name,t,g.isIdentifier),s(e.constraint,t,g.isTypeNode),s(e.default,t,g.isTypeNode));case 146:return g.updateParameter(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.dotDotDotToken,r,g.isToken),s(e.name,t,g.isBindingName),s(e.questionToken,r,g.isToken),s(e.type,t,g.isTypeNode),s(e.initializer,t,g.isExpression));case 147:return g.updateDecorator(e,s(e.expression,t,g.isExpression));case 148:return g.updatePropertySignature(e,o(e.modifiers,t,g.isToken),s(e.name,t,g.isPropertyName),s(e.questionToken,r,g.isToken),s(e.type,t,g.isTypeNode),s(e.initializer,t,g.isExpression));case 149:return g.updateProperty(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.name,t,g.isPropertyName),s(e.questionToken,r,g.isToken),s(e.type,t,g.isTypeNode),s(e.initializer,t,g.isExpression));case 150:return g.updateMethodSignature(e,o(e.typeParameters,t,g.isTypeParameterDeclaration),o(e.parameters,t,g.isParameterDeclaration),s(e.type,t,g.isTypeNode),s(e.name,t,g.isPropertyName),s(e.questionToken,r,g.isToken));case 151:return g.updateMethod(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.asteriskToken,r,g.isToken),s(e.name,t,g.isPropertyName),s(e.questionToken,r,g.isToken),o(e.typeParameters,t,g.isTypeParameterDeclaration),c(e.parameters,t,n,o),s(e.type,t,g.isTypeNode),u(e.body,t,n));case 152:return g.updateConstructor(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),c(e.parameters,t,n,o),u(e.body,t,n));case 153:return g.updateGetAccessor(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.name,t,g.isPropertyName),c(e.parameters,t,n,o),s(e.type,t,g.isTypeNode),u(e.body,t,n));case 154:return g.updateSetAccessor(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.name,t,g.isPropertyName),c(e.parameters,t,n,o),u(e.body,t,n));case 155:return g.updateCallSignature(e,o(e.typeParameters,t,g.isTypeParameterDeclaration),o(e.parameters,t,g.isParameterDeclaration),s(e.type,t,g.isTypeNode));case 156:return g.updateConstructSignature(e,o(e.typeParameters,t,g.isTypeParameterDeclaration),o(e.parameters,t,g.isParameterDeclaration),s(e.type,t,g.isTypeNode));case 157:return g.updateIndexSignature(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),o(e.parameters,t,g.isParameterDeclaration),s(e.type,t,g.isTypeNode));case 158:return g.updateTypePredicateNode(e,s(e.parameterName,t),s(e.type,t,g.isTypeNode));case 159:return g.updateTypeReferenceNode(e,s(e.typeName,t,g.isEntityName),o(e.typeArguments,t,g.isTypeNode));case 160:return g.updateFunctionTypeNode(e,o(e.typeParameters,t,g.isTypeParameterDeclaration),o(e.parameters,t,g.isParameterDeclaration),s(e.type,t,g.isTypeNode));case 161:return g.updateConstructorTypeNode(e,o(e.typeParameters,t,g.isTypeParameterDeclaration),o(e.parameters,t,g.isParameterDeclaration),s(e.type,t,g.isTypeNode));case 162:return g.updateTypeQueryNode(e,s(e.exprName,t,g.isEntityName));case 163:return g.updateTypeLiteralNode(e,o(e.members,t,g.isTypeElement));case 164:return g.updateArrayTypeNode(e,s(e.elementType,t,g.isTypeNode));case 165:return g.updateTypleTypeNode(e,o(e.elementTypes,t,g.isTypeNode));case 166:return g.updateUnionTypeNode(e,o(e.types,t,g.isTypeNode));case 167:return g.updateIntersectionTypeNode(e,o(e.types,t,g.isTypeNode));case 168:return g.updateParenthesizedType(e,s(e.type,t,g.isTypeNode));case 170:return g.updateTypeOperatorNode(e,s(e.type,t,g.isTypeNode));case 171:return g.updateIndexedAccessTypeNode(e,s(e.objectType,t,g.isTypeNode),s(e.indexType,t,g.isTypeNode));case 172:return g.updateMappedTypeNode(e,s(e.readonlyToken,r,g.isToken),s(e.typeParameter,t,g.isTypeParameterDeclaration),s(e.questionToken,r,g.isToken),s(e.type,t,g.isTypeNode));case 173:return g.updateLiteralTypeNode(e,s(e.literal,t,g.isExpression));case 174:return g.updateObjectBindingPattern(e,o(e.elements,t,g.isBindingElement));case 175:return g.updateArrayBindingPattern(e,o(e.elements,t,g.isArrayBindingElement));case 176:return g.updateBindingElement(e,s(e.dotDotDotToken,r,g.isToken),s(e.propertyName,t,g.isPropertyName),s(e.name,t,g.isBindingName),s(e.initializer,t,g.isExpression));case 177:return g.updateArrayLiteral(e,o(e.elements,t,g.isExpression));case 178:return g.updateObjectLiteral(e,o(e.properties,t,g.isObjectLiteralElementLike));case 179:return g.updatePropertyAccess(e,s(e.expression,t,g.isExpression),s(e.name,t,g.isIdentifier));case 180:return g.updateElementAccess(e,s(e.expression,t,g.isExpression),s(e.argumentExpression,t,g.isExpression));case 181:return g.updateCall(e,s(e.expression,t,g.isExpression),o(e.typeArguments,t,g.isTypeNode),o(e.arguments,t,g.isExpression));case 182:return g.updateNew(e,s(e.expression,t,g.isExpression),o(e.typeArguments,t,g.isTypeNode),o(e.arguments,t,g.isExpression));case 183:return g.updateTaggedTemplate(e,s(e.tag,t,g.isExpression),s(e.template,t,g.isTemplateLiteral));case 184:return g.updateTypeAssertion(e,s(e.type,t,g.isTypeNode),s(e.expression,t,g.isExpression));case 185:return g.updateParen(e,s(e.expression,t,g.isExpression));case 186:return g.updateFunctionExpression(e,o(e.modifiers,t,g.isModifier),s(e.asteriskToken,r,g.isToken),s(e.name,t,g.isIdentifier),o(e.typeParameters,t,g.isTypeParameterDeclaration),c(e.parameters,t,n,o),s(e.type,t,g.isTypeNode),u(e.body,t,n));case 187:return g.updateArrowFunction(e,o(e.modifiers,t,g.isModifier),o(e.typeParameters,t,g.isTypeParameterDeclaration),c(e.parameters,t,n,o),s(e.type,t,g.isTypeNode),s(e.equalsGreaterThanToken,t,g.isToken),u(e.body,t,n));case 188:return g.updateDelete(e,s(e.expression,t,g.isExpression));case 189:return g.updateTypeOf(e,s(e.expression,t,g.isExpression));case 190:return g.updateVoid(e,s(e.expression,t,g.isExpression));case 191:return g.updateAwait(e,s(e.expression,t,g.isExpression));case 192:return g.updatePrefix(e,s(e.operand,t,g.isExpression));case 193:return g.updatePostfix(e,s(e.operand,t,g.isExpression));case 194:return g.updateBinary(e,s(e.left,t,g.isExpression),s(e.right,t,g.isExpression),s(e.operatorToken,t,g.isToken));case 195:return g.updateConditional(e,s(e.condition,t,g.isExpression),s(e.questionToken,t,g.isToken),s(e.whenTrue,t,g.isExpression),s(e.colonToken,t,g.isToken),s(e.whenFalse,t,g.isExpression));case 196:return g.updateTemplateExpression(e,s(e.head,t,g.isTemplateHead),o(e.templateSpans,t,g.isTemplateSpan));case 197:return g.updateYield(e,s(e.asteriskToken,r,g.isToken),s(e.expression,t,g.isExpression));case 198:return g.updateSpread(e,s(e.expression,t,g.isExpression));case 199:return g.updateClassExpression(e,o(e.modifiers,t,g.isModifier),s(e.name,t,g.isIdentifier),o(e.typeParameters,t,g.isTypeParameterDeclaration),o(e.heritageClauses,t,g.isHeritageClause),o(e.members,t,g.isClassElement));case 201:return g.updateExpressionWithTypeArguments(e,o(e.typeArguments,t,g.isTypeNode),s(e.expression,t,g.isExpression));case 202:return g.updateAsExpression(e,s(e.expression,t,g.isExpression),s(e.type,t,g.isTypeNode));case 203:return g.updateNonNullExpression(e,s(e.expression,t,g.isExpression));case 204:return g.updateMetaProperty(e,s(e.name,t,g.isIdentifier));case 205:return g.updateTemplateSpan(e,s(e.expression,t,g.isExpression),s(e.literal,t,g.isTemplateMiddleOrTemplateTail));case 207:return g.updateBlock(e,o(e.statements,t,g.isStatement));case 208:return g.updateVariableStatement(e,o(e.modifiers,t,g.isModifier),s(e.declarationList,t,g.isVariableDeclarationList));case 210:return g.updateStatement(e,s(e.expression,t,g.isExpression));case 211:return g.updateIf(e,s(e.expression,t,g.isExpression),s(e.thenStatement,t,g.isStatement,g.liftToBlock),s(e.elseStatement,t,g.isStatement,g.liftToBlock));case 212:return g.updateDo(e,s(e.statement,t,g.isStatement,g.liftToBlock),s(e.expression,t,g.isExpression));case 213:return g.updateWhile(e,s(e.expression,t,g.isExpression),s(e.statement,t,g.isStatement,g.liftToBlock));case 214:return g.updateFor(e,s(e.initializer,t,g.isForInitializer),s(e.condition,t,g.isExpression),s(e.incrementor,t,g.isExpression),s(e.statement,t,g.isStatement,g.liftToBlock));case 215:return g.updateForIn(e,s(e.initializer,t,g.isForInitializer),s(e.expression,t,g.isExpression),s(e.statement,t,g.isStatement,g.liftToBlock));case 216:return g.updateForOf(e,e.awaitModifier,s(e.initializer,t,g.isForInitializer),s(e.expression,t,g.isExpression),s(e.statement,t,g.isStatement,g.liftToBlock));case 217:return g.updateContinue(e,s(e.label,t,g.isIdentifier));case 218:return g.updateBreak(e,s(e.label,t,g.isIdentifier));case 219:return g.updateReturn(e,s(e.expression,t,g.isExpression));case 220:return g.updateWith(e,s(e.expression,t,g.isExpression),s(e.statement,t,g.isStatement,g.liftToBlock));case 221:return g.updateSwitch(e,s(e.expression,t,g.isExpression),s(e.caseBlock,t,g.isCaseBlock));case 222:return g.updateLabel(e,s(e.label,t,g.isIdentifier),s(e.statement,t,g.isStatement,g.liftToBlock));case 223:return g.updateThrow(e,s(e.expression,t,g.isExpression));case 224:return g.updateTry(e,s(e.tryBlock,t,g.isBlock),s(e.catchClause,t,g.isCatchClause),s(e.finallyBlock,t,g.isBlock));case 226:return g.updateVariableDeclaration(e,s(e.name,t,g.isBindingName),s(e.type,t,g.isTypeNode),s(e.initializer,t,g.isExpression));case 227:return g.updateVariableDeclarationList(e,o(e.declarations,t,g.isVariableDeclaration));case 228:return g.updateFunctionDeclaration(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.asteriskToken,r,g.isToken),s(e.name,t,g.isIdentifier),o(e.typeParameters,t,g.isTypeParameterDeclaration),c(e.parameters,t,n,o),s(e.type,t,g.isTypeNode),u(e.body,t,n));case 229:return g.updateClassDeclaration(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.name,t,g.isIdentifier),o(e.typeParameters,t,g.isTypeParameterDeclaration),o(e.heritageClauses,t,g.isHeritageClause),o(e.members,t,g.isClassElement));case 230:return g.updateInterfaceDeclaration(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.name,t,g.isIdentifier),o(e.typeParameters,t,g.isTypeParameterDeclaration),o(e.heritageClauses,t,g.isHeritageClause),o(e.members,t,g.isTypeElement));case 231:return g.updateTypeAliasDeclaration(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.name,t,g.isIdentifier),o(e.typeParameters,t,g.isTypeParameterDeclaration),s(e.type,t,g.isTypeNode));case 232:return g.updateEnumDeclaration(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.name,t,g.isIdentifier),o(e.members,t,g.isEnumMember));case 233:return g.updateModuleDeclaration(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.name,t,g.isIdentifier),s(e.body,t,g.isModuleBody));case 234:return g.updateModuleBlock(e,o(e.statements,t,g.isStatement));case 235:return g.updateCaseBlock(e,o(e.clauses,t,g.isCaseOrDefaultClause));case 236:return g.updateNamespaceExportDeclaration(e,s(e.name,t,g.isIdentifier));case 237:return g.updateImportEqualsDeclaration(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.name,t,g.isIdentifier),s(e.moduleReference,t,g.isModuleReference));case 238:return g.updateImportDeclaration(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.importClause,t,g.isImportClause),s(e.moduleSpecifier,t,g.isExpression));case 239:return g.updateImportClause(e,s(e.name,t,g.isIdentifier),s(e.namedBindings,t,g.isNamedImportBindings));case 240:return g.updateNamespaceImport(e,s(e.name,t,g.isIdentifier));case 241:return g.updateNamedImports(e,o(e.elements,t,g.isImportSpecifier));case 242:return g.updateImportSpecifier(e,s(e.propertyName,t,g.isIdentifier),s(e.name,t,g.isIdentifier));case 243:return g.updateExportAssignment(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.expression,t,g.isExpression));case 244:return g.updateExportDeclaration(e,o(e.decorators,t,g.isDecorator),o(e.modifiers,t,g.isModifier),s(e.exportClause,t,g.isNamedExports),s(e.moduleSpecifier,t,g.isExpression));case 245:return g.updateNamedExports(e,o(e.elements,t,g.isExportSpecifier));case 246:return g.updateExportSpecifier(e,s(e.propertyName,t,g.isIdentifier),s(e.name,t,g.isIdentifier));case 248:return g.updateExternalModuleReference(e,s(e.expression,t,g.isExpression));case 249:return g.updateJsxElement(e,s(e.openingElement,t,g.isJsxOpeningElement),o(e.children,t,g.isJsxChild),s(e.closingElement,t,g.isJsxClosingElement));case 250:return g.updateJsxSelfClosingElement(e,s(e.tagName,t,g.isJsxTagNameExpression),s(e.attributes,t,g.isJsxAttributes));case 251:return g.updateJsxOpeningElement(e,s(e.tagName,t,g.isJsxTagNameExpression),s(e.attributes,t,g.isJsxAttributes));case 252:return g.updateJsxClosingElement(e,s(e.tagName,t,g.isJsxTagNameExpression));case 253:return g.updateJsxAttribute(e,s(e.name,t,g.isIdentifier),s(e.initializer,t,g.isStringLiteralOrJsxExpression));case 254:return g.updateJsxAttributes(e,o(e.properties,t,g.isJsxAttributeLike));case 255:return g.updateJsxSpreadAttribute(e,s(e.expression,t,g.isExpression));case 256:return g.updateJsxExpression(e,s(e.expression,t,g.isExpression));case 257:return g.updateCaseClause(e,s(e.expression,t,g.isExpression),o(e.statements,t,g.isStatement));case 258:return g.updateDefaultClause(e,o(e.statements,t,g.isStatement));case 259:return g.updateHeritageClause(e,o(e.types,t,g.isExpressionWithTypeArguments));case 260:return g.updateCatchClause(e,s(e.variableDeclaration,t,g.isVariableDeclaration),s(e.block,t,g.isBlock));case 261:return g.updatePropertyAssignment(e,s(e.name,t,g.isPropertyName),s(e.initializer,t,g.isExpression));case 262:return g.updateShorthandPropertyAssignment(e,s(e.name,t,g.isIdentifier),s(e.objectAssignmentInitializer,t,g.isExpression));case 263:return g.updateSpreadAssignment(e,s(e.expression,t,g.isExpression));case 264:return g.updateEnumMember(e,s(e.name,t,g.isPropertyName),s(e.initializer,t,g.isExpression));case 265:return g.updateSourceFileNode(e,l(e.statements,t,n));case 288:return g.updatePartiallyEmittedExpression(e,s(e.expression,t,g.isExpression));case 289:return g.updateCommaList(e,o(e.elements,t,g.isExpression));default:return e}}}}(ts=ts||{}),function(a){function l(e,t,n){return e?t(n,e):n}function c(e,t,n){return e?t(n,e):n}function n(e,t,n,o){if(void 0===e)return t;var r=o?c:a.reduceLeft,i=o||n,o=e.kind;if(0<o&&o<=142)return t;if(158<=o&&o<=173)return t;var s=t;switch(e.kind){case 206:case 209:case 200:case 225:case 287:break;case 143:s=l(e.left,n,s),s=l(e.right,n,s);break;case 144:s=l(e.expression,n,s);break;case 146:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=l(e.name,n,s),s=l(e.type,n,s),s=l(e.initializer,n,s);break;case 147:s=l(e.expression,n,s);break;case 148:s=r(e.modifiers,i,s),s=l(e.name,n,s),s=l(e.questionToken,n,s),s=l(e.type,n,s),s=l(e.initializer,n,s);break;case 149:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=l(e.name,n,s),s=l(e.type,n,s),s=l(e.initializer,n,s);break;case 151:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=l(e.name,n,s),s=r(e.typeParameters,i,s),s=r(e.parameters,i,s),s=l(e.type,n,s),s=l(e.body,n,s);break;case 152:s=r(e.modifiers,i,s),s=r(e.parameters,i,s),s=l(e.body,n,s);break;case 153:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=l(e.name,n,s),s=r(e.parameters,i,s),s=l(e.type,n,s),s=l(e.body,n,s);break;case 154:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=l(e.name,n,s),s=r(e.parameters,i,s),s=l(e.body,n,s);break;case 174:case 175:s=r(e.elements,i,s);break;case 176:s=l(e.propertyName,n,s),s=l(e.name,n,s),s=l(e.initializer,n,s);break;case 177:s=r(e.elements,i,s);break;case 178:s=r(e.properties,i,s);break;case 179:s=l(e.expression,n,s),s=l(e.name,n,s);break;case 180:s=l(e.expression,n,s),s=l(e.argumentExpression,n,s);break;case 181:case 182:s=l(e.expression,n,s),s=r(e.typeArguments,i,s),s=r(e.arguments,i,s);break;case 183:s=l(e.tag,n,s),s=l(e.template,n,s);break;case 184:s=l(e.type,n,s),s=l(e.expression,n,s);break;case 186:s=r(e.modifiers,i,s),s=l(e.name,n,s),s=r(e.typeParameters,i,s),s=r(e.parameters,i,s),s=l(e.type,n,s),s=l(e.body,n,s);break;case 187:s=r(e.modifiers,i,s),s=r(e.typeParameters,i,s),s=r(e.parameters,i,s),s=l(e.type,n,s),s=l(e.body,n,s);break;case 185:case 188:case 189:case 190:case 191:case 197:case 198:case 203:s=l(e.expression,n,s);break;case 192:case 193:s=l(e.operand,n,s);break;case 194:s=l(e.left,n,s),s=l(e.right,n,s);break;case 195:s=l(e.condition,n,s),s=l(e.whenTrue,n,s),s=l(e.whenFalse,n,s);break;case 196:s=l(e.head,n,s),s=r(e.templateSpans,i,s);break;case 199:s=r(e.modifiers,i,s),s=l(e.name,n,s),s=r(e.typeParameters,i,s),s=r(e.heritageClauses,i,s),s=r(e.members,i,s);break;case 201:s=l(e.expression,n,s),s=r(e.typeArguments,i,s);break;case 202:s=l(e.expression,n,s),s=l(e.type,n,s);break;case 205:s=l(e.expression,n,s),s=l(e.literal,n,s);break;case 207:s=r(e.statements,i,s);break;case 208:s=r(e.modifiers,i,s),s=l(e.declarationList,n,s);break;case 210:s=l(e.expression,n,s);break;case 211:s=l(e.expression,n,s),s=l(e.thenStatement,n,s),s=l(e.elseStatement,n,s);break;case 212:s=l(e.statement,n,s),s=l(e.expression,n,s);break;case 213:case 220:s=l(e.expression,n,s),s=l(e.statement,n,s);break;case 214:s=l(e.initializer,n,s),s=l(e.condition,n,s),s=l(e.incrementor,n,s),s=l(e.statement,n,s);break;case 215:case 216:s=l(e.initializer,n,s),s=l(e.expression,n,s),s=l(e.statement,n,s);break;case 219:case 223:s=l(e.expression,n,s);break;case 221:s=l(e.expression,n,s),s=l(e.caseBlock,n,s);break;case 222:s=l(e.label,n,s),s=l(e.statement,n,s);break;case 224:s=l(e.tryBlock,n,s),s=l(e.catchClause,n,s),s=l(e.finallyBlock,n,s);break;case 226:s=l(e.name,n,s),s=l(e.type,n,s),s=l(e.initializer,n,s);break;case 227:s=r(e.declarations,i,s);break;case 228:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=l(e.name,n,s),s=r(e.typeParameters,i,s),s=r(e.parameters,i,s),s=l(e.type,n,s),s=l(e.body,n,s);break;case 229:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=l(e.name,n,s),s=r(e.typeParameters,i,s),s=r(e.heritageClauses,i,s),s=r(e.members,i,s);break;case 232:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=l(e.name,n,s),s=r(e.members,i,s);break;case 233:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=l(e.name,n,s),s=l(e.body,n,s);break;case 234:s=r(e.statements,i,s);break;case 235:s=r(e.clauses,i,s);break;case 237:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=l(e.name,n,s),s=l(e.moduleReference,n,s);break;case 238:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=l(e.importClause,n,s),s=l(e.moduleSpecifier,n,s);break;case 239:s=l(e.name,n,s),s=l(e.namedBindings,n,s);break;case 240:s=l(e.name,n,s);break;case 241:case 245:s=r(e.elements,i,s);break;case 242:case 246:s=l(e.propertyName,n,s),s=l(e.name,n,s);break;case 243:s=a.reduceLeft(e.decorators,n,s),s=a.reduceLeft(e.modifiers,n,s),s=l(e.expression,n,s);break;case 244:s=a.reduceLeft(e.decorators,n,s),s=a.reduceLeft(e.modifiers,n,s),s=l(e.exportClause,n,s),s=l(e.moduleSpecifier,n,s);break;case 248:s=l(e.expression,n,s);break;case 249:s=l(e.openingElement,n,s),s=a.reduceLeft(e.children,n,s),s=l(e.closingElement,n,s);break;case 250:case 251:s=l(e.tagName,n,s),s=l(e.attributes,n,s);break;case 254:s=r(e.properties,i,s);break;case 252:s=l(e.tagName,n,s);break;case 253:s=l(e.name,n,s),s=l(e.initializer,n,s);break;case 255:case 256:s=l(e.expression,n,s);break;case 257:s=l(e.expression,n,s);case 258:s=r(e.statements,i,s);break;case 259:s=r(e.types,i,s);break;case 260:s=l(e.variableDeclaration,n,s),s=l(e.block,n,s);break;case 261:s=l(e.name,n,s),s=l(e.initializer,n,s);break;case 262:s=l(e.name,n,s),s=l(e.objectAssignmentInitializer,n,s);break;case 263:s=l(e.expression,n,s);break;case 264:s=l(e.name,n,s),s=l(e.initializer,n,s);break;case 265:s=r(e.statements,i,s);break;case 288:s=l(e.expression,n,s);break;case 289:s=r(e.elements,i,s)}return s}function s(e){var t;return void 0===e?0:536870912&e.transformFlags?e.transformFlags&~a.getTransformFlagsSubtreeExclusions(e.kind):(t=e,t=a.hasModifier(t,2)||a.isTypeNode(t)&&201!==t.kind?0:n(t,0,o,r),a.computeTransformFlagsForNode(e,t))}function o(e,t){return e|s(t)}function r(e,t){return e|function(e){if(void 0===e)return 0;for(var t=0,n=0,o=0,r=e;o<r.length;o++){var i=r[o];t|=s(i),n|=-536870913&i.transformFlags}return e.transformFlags=536870912|n,t}(t)}var t,i,u;a.reduceEachChild=n,a.mergeLexicalEnvironment=function(e,t){return a.some(t)?a.isNodeArray(e)?a.setTextRange(a.createNodeArray(a.concatenate(e,t)),e):a.addRange(e,t):e},a.liftToBlock=function(e){return t.assert(a.every(e,a.isStatement),"Cannot lift nodes to a Block."),a.singleOrUndefined(e)||a.createBlock(e)},a.aggregateTransformFlags=function(e){return s(e),e},i=t=a.Debug||(a.Debug={}),u=!1,i.failBadSyntaxKind=i.shouldAssert(1)?function(e,t){return i.fail((t||"Unexpected node.")+"\r\nNode "+a.formatSyntaxKind(e.kind)+" was unexpected.",i.failBadSyntaxKind)}:a.noop,i.assertEachNode=i.shouldAssert(1)?function(e,t,n){return i.assert(void 0===t||a.every(e,t),n||"Unexpected node.",function(){return"Node array did not pass test '"+i.getFunctionName(t)+"'."},i.assertEachNode)}:a.noop,i.assertNode=i.shouldAssert(1)?function(e,t,n){return i.assert(void 0===t||t(e),n||"Unexpected node.",function(){return"Node "+a.formatSyntaxKind(e.kind)+" did not pass test '"+i.getFunctionName(t)+"'."},i.assertNode)}:a.noop,i.assertOptionalNode=i.shouldAssert(1)?function(e,t,n){return i.assert(void 0===t||void 0===e||t(e),n||"Unexpected node.",function(){return"Node "+a.formatSyntaxKind(e.kind)+" did not pass test '"+i.getFunctionName(t)+"'."},i.assertOptionalNode)}:a.noop,i.assertOptionalToken=i.shouldAssert(1)?function(e,t,n){return i.assert(void 0===t||void 0===e||e.kind===t,n||"Unexpected node.",function(){return"Node "+a.formatSyntaxKind(e.kind)+" was not a '"+a.formatSyntaxKind(t)+"' token."},i.assertOptionalToken)}:a.noop,i.assertMissingNode=i.shouldAssert(1)?function(e,t){return i.assert(void 0===e,t||"Unexpected node.",function(){return"Node "+a.formatSyntaxKind(e.kind)+" was unexpected'."},i.assertMissingNode)}:a.noop,i.enableDebugInfo=function(){if(!u){Object.defineProperties(a.objectAllocator.getSymbolConstructor().prototype,{__debugFlags:{get:function(){return a.formatSymbolFlags(this.flags)}}}),Object.defineProperties(a.objectAllocator.getTypeConstructor().prototype,{__debugFlags:{get:function(){return a.formatTypeFlags(this.flags)}},__debugObjectFlags:{get:function(){return 32768&this.flags?a.formatObjectFlags(this.objectFlags):""}},__debugTypeToString:{value:function(){return this.checker.typeToString(this)}}});for(var e=0,t=[a.objectAllocator.getNodeConstructor(),a.objectAllocator.getIdentifierConstructor(),a.objectAllocator.getTokenConstructor(),a.objectAllocator.getSourceFileConstructor()];e<t.length;e++){var n=t[e];n.prototype.hasOwnProperty("__debugKind")||Object.defineProperties(n.prototype,{__debugKind:{get:function(){return a.formatSyntaxKind(this.kind)}},__debugModifierFlags:{get:function(){return a.formatModifierFlags(a.getModifierFlagsNoCache(this))}},__debugTransformFlags:{get:function(){return a.formatTransformFlags(this.transformFlags)}},__debugEmitFlags:{get:function(){return a.formatEmitFlags(a.getEmitFlags(this))}},__debugGetText:{value:function(e){var t,n;return!a.nodeIsSynthesized(this)&&(n=(t=a.getParseTreeNode(this))&&a.getSourceFileOfNode(t))?a.getSourceTextOfNodeFromSourceFile(n,t,e):""}}})}u=!0}}}(ts=ts||{}),function(v){function T(e){return(e=v.getOriginalNode(e))?v.getNodeId(e):0}function E(e,t,n){var o=e[t];o?o.push(n):e[t]=o=[n]}v.getOriginalNodeId=T,v.collectExternalModuleInfo=function(e,t,n){for(var o=[],r=v.createMultiMap(),i=[],s=v.createMap(),a=!1,l=void 0,c=!1,u=0,d=e.statements;u<d.length;u++){var p=d[u];switch(p.kind){case 238:o.push(p);break;case 237:248===p.moduleReference.kind&&o.push(p);break;case 244:if(p.moduleSpecifier)p.exportClause?o.push(p):(o.push(p),c=!0);else for(var g=0,h=p.exportClause.elements;g<h.length;g++){var _,m=h[g];s.get(v.idText(m.name))||(_=m.propertyName||m.name,r.add(v.idText(_),m),(k=t.getReferencedImportDeclaration(_)||t.getReferencedValueDeclaration(_))&&E(i,T(k),m.name),s.set(v.idText(m.name),!0),b=v.append(b,m.name))}break;case 243:p.isExportEquals&&!l&&(l=p);break;case 208:if(v.hasModifier(p,1))for(var f=0,y=p.declarationList.declarations;f<y.length;f++)var k,b=function e(t,n,o){var r;if(v.isBindingPattern(t.name))for(var i=0,s=t.name.elements;i<s.length;i++){var a=s[i];v.isOmittedExpression(a)||(o=e(a,n,o))}else v.isGeneratedIdentifier(t.name)||(r=v.idText(t.name),n.get(r))||(n.set(r,!0),o=v.append(o,t.name));return o}(k=y[f],s,b);break;case 228:v.hasModifier(p,1)&&(v.hasModifier(p,512)?a||(E(i,T(p),v.getDeclarationName(p)),a=!0):(_=p.name,s.get(v.idText(_))||(E(i,T(p),_),s.set(v.idText(_),!0),b=v.append(b,_))));break;case 229:v.hasModifier(p,1)&&(v.hasModifier(p,512)?a||(E(i,T(p),v.getDeclarationName(p)),a=!0):(_=p.name)&&!s.get(v.idText(_))&&(E(i,T(p),_),s.set(v.idText(_),!0),b=v.append(b,_)))}}e=v.getOrCreateExternalHelpersModuleNameIfNeeded(e,n,c),n=e&&v.createImportDeclaration(void 0,void 0,v.createImportClause(void 0,v.createNamespaceImport(e)),v.createLiteral(v.externalHelpersModuleNameText));return n&&o.unshift(n),{externalImports:o,exportSpecifiers:r,exportEquals:l,hasExportStarsToExportValues:c,exportedBindings:i,exportedNames:b,externalHelpersImportDeclaration:n}},v.isSimpleCopiableExpression=function(e){return 9===e.kind||8===e.kind||13===e.kind||v.isKeyword(e.kind)||v.isIdentifier(e)}}(ts=ts||{}),function(R){function P(e,t,n,o,r){r||(r=R.visitNode(R.getInitializerOfBindingOrAssignmentElement(t),e.visitor,R.isExpression),n=r?n?(i=r,c=L(e,n,!0,o),R.createConditional(R.createTypeCheck(c,"undefined"),i,c)):r:n||R.createVoidZero());var i=R.getTargetOfBindingOrAssignmentElement(t);if(R.isObjectBindingOrAssignmentPattern(i)){var s,a,l=e,c=t,u=i,d=n,p=o,g=R.getElementsOfBindingOrAssignmentPattern(u),h=g.length;1!==h&&(d=L(l,d,!R.isDeclarationBindingElement(c)||0!==h,p));for(var _=0;_<h;_++){var m,f,y=g[_];R.getRestIndicatorOfBindingOrAssignmentElement(y)?_===h-1&&(s&&(l.emitBindingOrAssignment(l.createObjectBindingOrAssignmentPattern(s),d,p,u),s=void 0),P(l,y,f=function(e,t,n,o,r){e.requestEmitHelper(M);for(var i=[],s=0,a=0;a<n.length-1;a++){var l,c=R.getPropertyNameOfBindingOrAssignmentElement(n[a]);c&&(R.isComputedPropertyName(c)?(l=o[s],s++,i.push(R.createConditional(R.createTypeCheck(l,"symbol"),l,R.createAdd(l,R.createLiteral(""))))):i.push(R.createLiteral(c)))}return R.createCall(R.getHelperName("__rest"),void 0,[t,R.setTextRange(R.createArrayLiteral(i),r)])}(l.context,d,g,a,u),y)):(m=R.getPropertyNameOfBindingOrAssignmentElement(y),!(1<=l.level)||1572864&y.transformFlags||1572864&R.getTargetOfBindingOrAssignmentElement(y).transformFlags||R.isComputedPropertyName(m)?(s&&(l.emitBindingOrAssignment(l.createObjectBindingOrAssignmentPattern(s),d,p,u),s=void 0),f=function(e,t,n){{var o;if(R.isComputedPropertyName(n))return o=L(e,R.visitNode(n.expression,e.visitor),!1,n),R.createElementAccess(t,o)}return R.isStringOrNumericLiteral(n)?((o=R.getSynthesizedClone(n)).text=o.text,R.createElementAccess(t,o)):(e=R.createIdentifier(R.idText(n)),R.createPropertyAccess(t,e))}(l,d,m),R.isComputedPropertyName(m)&&(a=R.append(a,f.argumentExpression)),P(l,y,f,y)):s=R.append(s,y))}s&&l.emitBindingOrAssignment(l.createObjectBindingOrAssignmentPattern(s),d,p,u)}else if(R.isArrayBindingOrAssignmentPattern(i)){var k,b,v=e,r=t,T=i,E=n,S=o,C=R.getElementsOfBindingOrAssignmentPattern(T),x=C.length;v.level<1&&v.downlevelIteration?E=L(v,R.createReadHelper(v.context,E,0<x&&R.getRestIndicatorOfBindingOrAssignmentElement(C[x-1])?void 0:x,S),!1,S):(1!==x&&(v.level<1||0===x)||R.every(C,R.isOmittedExpression))&&(E=L(v,E,!R.isDeclarationBindingElement(r)||0!==x,S));for(var B=0;B<x;B++){var A,I=C[B];1<=v.level?k=1048576&I.transformFlags?(A=R.createTempVariable(void 0),v.hoistTempVariables&&v.context.hoistVariableDeclaration(A),b=R.append(b,[A,I]),R.append(k,v.createArrayBindingOrAssignmentElement(A))):R.append(k,I):R.isOmittedExpression(I)||(R.getRestIndicatorOfBindingOrAssignmentElement(I)?B===x-1&&P(v,I,R.createArraySlice(E,B),I):P(v,I,R.createElementAccess(E,B),I))}if(k&&v.emitBindingOrAssignment(v.createArrayBindingOrAssignmentPattern(k),E,S,T),b)for(var D=0,N=b;D<N.length;D++){var w=N[D],O=w[0];P(v,I=w[1],O,I)}}else e.emitBindingOrAssignment(i,n,o,t)}function L(e,t,n,o){return R.isIdentifier(t)&&n?t:(n=R.createTempVariable(void 0),e.hoistTempVariables?(e.context.hoistVariableDeclaration(n),e.emitExpression(R.setTextRange(R.createAssignment(n,t),o))):e.emitBindingOrAssignment(n,t,o,void 0),n)}function y(e){return R.Debug.assertEachNode(e,R.isArrayBindingElement),R.createArrayBindingPattern(e)}function u(e){return R.createArrayLiteral(R.map(e,R.convertToArrayAssignmentElement))}function k(e){return R.Debug.assertEachNode(e,R.isBindingElement),R.createObjectBindingPattern(e)}function d(e){return R.createObjectLiteral(R.map(e,R.convertToObjectAssignmentElement))}function b(e){return R.createBindingElement(void 0,void 0,e)}function p(e){return e}(e=R.FlattenLevel||(R.FlattenLevel={}))[e.All=0]="All",e[e.ObjectRest=1]="ObjectRest",R.flattenDestructuringAssignment=function(e,r,t,n,o,i){var s,a,l=e;if(R.isDestructuringAssignment(e))for(s=e.right;R.isEmptyArrayLiteral(e.left)||R.isEmptyObjectLiteral(e.left);){if(!R.isDestructuringAssignment(s))return s;l=e=s,s=e.right}n={context:t,level:n,downlevelIteration:t.getCompilerOptions().downlevelIteration,hoistTempVariables:!0,emitExpression:c,emitBindingOrAssignment:function(e,t,n,o){R.Debug.assertNode(e,i?R.isIdentifier:R.isExpression);e=i?i(e,t,n):R.setTextRange(R.createAssignment(R.visitNode(e,r,R.isExpression),t),n);e.original=o,c(e)},createArrayBindingOrAssignmentPattern:u,createObjectBindingOrAssignmentPattern:d,createArrayBindingOrAssignmentElement:p,visitor:r};if(s&&(s=R.visitNode(s,r,R.isExpression),o?s=L(n,s,!0,l):R.nodeIsSynthesized(e)&&(l=s)),P(n,e,s,l,R.isDestructuringAssignment(e)),s&&o){if(!R.some(a))return s;a.push(s)}return R.aggregateTransformFlags(R.inlineExpressions(a))||R.createOmittedExpression();function c(e){R.setEmitFlags(e,64),R.aggregateTransformFlags(e),a=R.append(a,e)}};var e,M={name:"typescript:rest",scoped:!(R.flattenDestructuringBinding=function(e,t,n,o,r,i,s){var a,l,c=[],u=[];P({context:n,level:o,downlevelIteration:n.getCompilerOptions().downlevelIteration,hoistTempVariables:i,emitExpression:function(e){l=R.append(l,e)},emitBindingOrAssignment:f,createArrayBindingOrAssignmentPattern:y,createObjectBindingOrAssignmentPattern:k,createArrayBindingOrAssignmentElement:b,visitor:t},e,r,e,s),l&&(o=R.createTempVariable(void 0),i?f(o,a=R.inlineExpressions(l),l=void 0,void 0):(n.hoistVariableDeclaration(o),(t=R.lastOrUndefined(c)).pendingExpressions=R.append(t.pendingExpressions,R.createAssignment(o,t.value)),R.addRange(t.pendingExpressions,l),t.value=o));for(var d=0,p=c;d<p.length;d++){var g=p[d],h=g.pendingExpressions,_=g.name,m=(a=g.value,g.location),g=g.original,h=R.createVariableDeclaration(_,void 0,h?R.inlineExpressions(R.append(h,a)):a);h.original=g,R.setTextRange(h,m),R.isIdentifier(_)&&R.setEmitFlags(h,64),R.aggregateTransformFlags(h),u.push(h)}return u;function f(e,t,n,o){R.Debug.assertNode(e,R.isBindingName),l&&(t=R.inlineExpressions(R.append(l,t)),l=void 0),c.push({pendingExpressions:l,name:e,value:t,location:n,original:o})}}),text:'\n            var __rest = (this && this.__rest) || function (s, e) {\n                var t = {};\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n                    t[p] = s[p];\n                if (s != null && typeof Object.getOwnPropertySymbols === "function")\n                    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n                        t[p[i]] = s[p[i]];\n                return t;\n            };'}}(ts=ts||{}),function(Ie){function De(e,t,n,o,r,i){var s=[];return s.push(Ie.createArrayLiteral(t,!0)),s.push(n),o&&(s.push(o),r)&&s.push(r),e.requestEmitHelper(a),Ie.setTextRange(Ie.createCall(Ie.getHelperName("__decorate"),void 0,s),i)}var a={name:"typescript:decorate",scoped:!(Ie.transformTypeScript=function(N){var w,O,R,P,L,M,F,i,U=N.startLexicalEnvironment,h=N.resumeLexicalEnvironment,H=N.endLexicalEnvironment,V=N.hoistVariableDeclaration,W=N.getEmitResolver(),G=N.getCompilerOptions(),d=void 0===G.strictNullChecks?G.strict:G.strictNullChecks,K=Ie.getEmitScriptTarget(G),j=Ie.getEmitModuleKind(G),a=N.onEmitNode,l=N.onSubstituteNode;return N.onEmitNode=function(e,t,n){var o=i,r=w;Ie.isSourceFile(t)&&(w=t),2&M&&233===Ie.getOriginalNode(t).kind&&(i|=2),8&M&&232===Ie.getOriginalNode(t).kind&&(i|=8),a(e,t,n),i=o,w=r},N.onSubstituteNode=function(e,t){if(t=l(e,t),1===e){var n,o,r=t;switch(r.kind){case 71:return function(e){if(1&M&&16777216&W.getNodeCheckFlags(e)){var t=W.getReferencedValueDeclaration(e);if(t){var t=F[t.id];if(t)return t=Ie.getSynthesizedClone(t),Ie.setSourceMapRange(t,e),Ie.setCommentRange(t,e),t}}}(o=r)||Ae(o)||o;case 179:case 180:return void 0===(n=function(e){return!G.isolatedModules&&(Ie.isPropertyAccessExpression(e)||Ie.isElementAccessExpression(e))?W.getConstantValue(e):void 0}(o=r))?o:(Ie.setConstantValue(o,n),n=Ie.createLiteral(n),G.removeComments||(o=Ie.isPropertyAccessExpression(o)?Ie.declarationNameToString(o.name):Ie.getTextOfNode(o.argumentExpression),Ie.addSyntheticTrailingComment(n,3," "+o+" ")),n)}return r}if(Ie.isShorthandPropertyAssignment(t)){e=t;if(2&M){var i,s=e.name,a=Ae(s);if(a)return e.objectAssignmentInitializer?(i=Ie.createAssignment(a,e.objectAssignmentInitializer),Ie.setTextRange(Ie.createPropertyAssignment(s,i),e)):Ie.setTextRange(Ie.createPropertyAssignment(s,a),e)}return e}return t},N.enableSubstitution(179),N.enableSubstitution(180),function(e){return e.isDeclarationFile||(e=z(w=e,y),Ie.addEmitHelpers(e,N.readEmitHelpers()),w=void 0),e};function z(e,t){var n=P,o=L,r=e;switch(r.kind){case 265:case 235:case 234:case 207:P=r,L=void 0;break;case 229:case 228:Ie.hasModifier(r,2)||(r.name?I(r):Ie.Debug.assert(229===r.kind||Ie.hasModifier(r,512)))}t=t(e);return P!==n&&(L=o),P=n,t}function X(e){return z(e,s)}function s(e){return 1&e.transformFlags?t(e):2&e.transformFlags?Ie.visitEachChild(e,X,N):e}function r(e){return z(e,p)}function p(e){switch(e.kind){case 238:case 237:case 243:case 244:var t,n,o,r=e;if(Ie.getParseTreeNode(r)!==r)return r;switch(r.kind){case 238:return(n=r).importClause?(o=Ie.visitNode(n.importClause,he,Ie.isImportClause))?Ie.updateImportDeclaration(n,void 0,void 0,o,n.moduleSpecifier):void 0:n;case 237:return ke(r);case 243:return o=r,W.isValueAliasDeclaration(o)?Ie.visitEachChild(o,X,N):void 0;case 244:return(n=r).exportClause?W.isValueAliasDeclaration(n)&&(t=Ie.visitNode(n.exportClause,fe,Ie.isNamedExports))?Ie.updateExportDeclaration(n,void 0,void 0,t,n.moduleSpecifier):void 0:G.isolatedModules||W.moduleExportsSomeValue(n.moduleSpecifier)?n:void 0;default:Ie.Debug.fail("Unhandled ellided statement")}return;default:return s(e)}}function ie(e){return z(e,_)}function _(e){if(244!==e.kind&&238!==e.kind&&239!==e.kind&&(237!==e.kind||248!==e.moduleReference.kind))return 1&e.transformFlags||Ie.hasModifier(e,1)?t(e):2&e.transformFlags?Ie.visitEachChild(e,X,N):e}function m(e){return z(e,f)}function f(e){switch(e.kind){case 152:return;case 149:case 157:case 153:case 154:case 151:return s(e);case 206:return e;default:return void Ie.Debug.failBadSyntaxKind(e)}}function $(e){if(!(2270&Ie.modifierToFlag(e.kind)||O&&84===e.kind))return e}function t(e){if(Ie.hasModifier(e,2)&&Ie.isStatement(e))return Ie.createNotEmittedStatement(e);switch(e.kind){case 84:case 79:return O?void 0:e;case 114:case 112:case 113:case 117:case 76:case 124:case 131:case 164:case 165:case 163:case 158:case 145:case 119:case 122:case 136:case 133:case 130:case 105:case 137:case 161:case 160:case 162:case 159:case 166:case 167:case 168:case 169:case 170:case 171:case 172:case 173:case 157:case 147:case 231:case 149:case 236:return;case 152:var t=e;return ne(t)?Ie.updateConstructor(t,Ie.visitNodes(t.decorators,X,Ie.isDecorator),Ie.visitNodes(t.modifiers,X,Ie.isModifier),Ie.visitParameterList(t.parameters,X,N),Ie.visitFunctionBody(t.body,X,N)):void 0;case 230:return Ie.createNotEmittedStatement(e);case 229:return x=q(t=e,!0),A=t,D=0,Ie.some(x)&&(D|=1),(B=Ie.getClassExtendsHeritageClauseElement(A))&&95!==Ie.skipOuterExpressions(B.expression).kind&&(D|=64),(A.decorators&&0<A.decorators.length||(B=Ie.getFirstConstructorWithBody(A))&&Ie.forEach(B.parameters,se))&&(D|=2),Ie.childIsDecorated(A)&&(D|=4),oe(A)?D|=8:re(B=A)&&Ie.hasModifier(B,512)?D|=32:be(A)&&(D|=16),K<=1&&7&D&&(D|=128),128&(B=D)&&N.startLexicalEnvironment(),A=t.name||(5&B?Ie.getGeneratedNameForNode(t):void 0),D=[I=2&B?(D=t,v=A,T=B,I=Ie.moveRangePastDecorators(D),E=function(e){var t;if(8388608&W.getNodeCheckFlags(e))return Be(),t=Ie.createUniqueName(e.name&&!Ie.isGeneratedIdentifier(e.name)?Ie.idText(e.name):"default"),F[Ie.getOriginalNodeId(e)]=t,V(t),t}(D),S=Ie.getLocalName(D,!1,!0),C=Ie.visitNodes(D.heritageClauses,X,Ie.isHeritageClause),T=Y(D,0!=(64&T)),v=Ie.createClassExpression(void 0,v,void 0,C,T),Ie.setOriginalNode(v,D),Ie.setTextRange(v,I),C=Ie.createVariableStatement(void 0,Ie.createVariableDeclarationList([Ie.createVariableDeclaration(S,void 0,E?Ie.createAssignment(E,v):v)],1)),Ie.setOriginalNode(C,D),Ie.setTextRange(C,I),Ie.setCommentRange(C,D),C):(T=t,S=A,v=128&(E=B)?void 0:Ie.visitNodes(T.modifiers,$,Ie.isModifier),v=Ie.createClassDeclaration(void 0,v,S,void 0,Ie.visitNodes(T.heritageClauses,X,Ie.isHeritageClause),Y(T,0!=(64&E))),S=Ie.getEmitFlags(T),1&E&&(S|=32),Ie.setTextRange(v,T),Ie.setOriginalNode(v,T),Ie.setEmitFlags(v,S),v)],1&B&&J(D,x,128&B?Ie.getInternalName(t):Ie.getLocalName(t)),ae(D,t,!1),ae(D,t,!0),C=D,(x=function(n){var e,t,o=function(){var e=n.decorators,t=Z(Ie.getFirstConstructorWithBody(n));if(e||t)return{decorators:e,parameters:t}}(),o=ee(n,n,o);if(o)return e=F&&F[Ie.getOriginalNodeId(n)],t=Ie.getLocalName(n,!1,!0),o=De(N,o,t),t=Ie.createAssignment(t,e?Ie.createAssignment(e,o):o),Ie.setEmitFlags(t,1536),Ie.setSourceMapRange(t,Ie.moveRangePastDecorators(n)),t}(A=t))&&C.push(Ie.setOriginalNode(Ie.createStatement(x),A)),128&B&&(x=Ie.createTokenRange(Ie.skipTrivia(w.text,t.members.end),18),A=Ie.getInternalName(t),(A=Ie.createPartiallyEmittedExpression(A)).end=x.end,Ie.setEmitFlags(A,1536),(A=Ie.createReturn(A)).pos=x.pos,Ie.setEmitFlags(A,1920),D.push(A),Ie.addRange(D,N.endLexicalEnvironment()),x=Ie.createImmediatelyInvokedArrowFunction(D),Ie.setEmitFlags(x,33554432),A=Ie.createVariableStatement(void 0,Ie.createVariableDeclarationList([Ie.createVariableDeclaration(Ie.getLocalName(t,!1,!1),void 0,x)])),Ie.setOriginalNode(A,t),Ie.setCommentRange(A,t),Ie.setSourceMapRange(A,Ie.moveRangePastDecorators(t)),Ie.startOnNewLine(A),D=[A]),8&B?Te(D,t):(128&B||2&B)&&(32&B?D.push(Ie.createExportDefault(Ie.getLocalName(t,!1,!0))):16&B&&D.push(Ie.createExternalModuleExport(Ie.getLocalName(t,!1,!0)))),1<D.length&&(D.push(Ie.createEndOfDeclarationMarker(t)),Ie.setEmitFlags(I,4194304|Ie.getEmitFlags(I))),Ie.singleOrMany(D);case 199:return b=q(x=e,!0),A=Ie.visitNodes(x.heritageClauses,X,Ie.isHeritageClause),B=Y(x,Ie.some(A,function(e){return 85===e.token})),A=Ie.createClassExpression(void 0,x.name,void 0,A,B),Ie.setOriginalNode(A,x),Ie.setTextRange(A,x),0<b.length?(B=[],D=Ie.createTempVariable(V),8388608&W.getNodeCheckFlags(x)&&(Be(),F[Ie.getOriginalNodeId(x)]=Ie.getSynthesizedClone(D)),Ie.setEmitFlags(A,65536|Ie.getEmitFlags(A)),B.push(Ie.startOnNewLine(Ie.createAssignment(D,A))),Ie.addRange(B,function(e){for(var t=[],n=0,o=b;n<o.length;n++){var r=o[n],i=Q(r,e);i.startsOnNewLine=!0,Ie.setSourceMapRange(i,Ie.moveRangePastModifiers(r)),Ie.setCommentRange(i,r),t.push(i)}return t}(D)),B.push(Ie.startOnNewLine(D)),Ie.inlineExpressions(B)):A;case 259:var n=e;return 85===n.token?(o=Ie.visitNodes(n.types,X,Ie.isExpressionWithTypeArguments,0,1),Ie.setTextRange(Ie.createHeritageClause(85,o),n)):void 0;case 201:return Ie.updateExpressionWithTypeArguments(e,void 0,Ie.visitNode(e.expression,X,Ie.isLeftHandSideExpression));case 151:var o=e;return ne(o)?((n=Ie.updateMethod(o,void 0,Ie.visitNodes(o.modifiers,$,Ie.isModifier),o.asteriskToken,te(o),void 0,void 0,Ie.visitParameterList(o.parameters,X,N),void 0,Ie.visitFunctionBody(o.body,X,N)))!==o&&(Ie.setCommentRange(n,o),Ie.setSourceMapRange(n,Ie.moveRangePastDecorators(o))),n):void 0;case 153:var r=e;return le(r)?((i=Ie.updateGetAccessor(r,void 0,Ie.visitNodes(r.modifiers,$,Ie.isModifier),te(r),Ie.visitParameterList(r.parameters,X,N),void 0,Ie.visitFunctionBody(r.body,X,N)||Ie.createBlock([])))!==r&&(Ie.setCommentRange(i,r),Ie.setSourceMapRange(i,Ie.moveRangePastDecorators(r))),i):void 0;case 154:var i,r=e;return le(r)?((i=Ie.updateSetAccessor(r,void 0,Ie.visitNodes(r.modifiers,$,Ie.isModifier),te(r),Ie.visitParameterList(r.parameters,X,N),Ie.visitFunctionBody(r.body,X,N)||Ie.createBlock([])))!==r&&(Ie.setCommentRange(i,r),Ie.setSourceMapRange(i,Ie.moveRangePastDecorators(r))),i):void 0;case 228:return ne(f=e)?(y=Ie.updateFunctionDeclaration(f,void 0,Ie.visitNodes(f.modifiers,$,Ie.isModifier),f.asteriskToken,f.name,void 0,Ie.visitParameterList(f.parameters,X,N),void 0,Ie.visitFunctionBody(f.body,X,N)||Ie.createBlock([])),oe(f)?(Te(k=[y],f),k):y):Ie.createNotEmittedStatement(f);case 186:return ne(k=e)?Ie.updateFunctionExpression(k,Ie.visitNodes(k.modifiers,$,Ie.isModifier),k.asteriskToken,k.name,void 0,Ie.visitParameterList(k.parameters,X,N),void 0,Ie.visitFunctionBody(k.body,X,N)||Ie.createBlock([])):Ie.createOmittedExpression();case 187:return y=e,Ie.updateArrowFunction(y,Ie.visitNodes(y.modifiers,$,Ie.isModifier),void 0,Ie.visitParameterList(y.parameters,X,N),void 0,y.equalsGreaterThanToken,Ie.visitFunctionBody(y.body,X,N));case 146:f=e;return Ie.parameterIsThisKeyword(f)?void 0:(_=Ie.createParameter(void 0,void 0,f.dotDotDotToken,Ie.visitNode(f.name,X,Ie.isBindingName),void 0,void 0,Ie.visitNode(f.initializer,X,Ie.isExpression)),Ie.setOriginalNode(_,f),Ie.setTextRange(_,Ie.moveRangePastModifiers(f)),Ie.setCommentRange(_,f),Ie.setSourceMapRange(_,Ie.moveRangePastModifiers(f)),Ie.setEmitFlags(_.name,32),_);case 185:return _=e,m=Ie.skipOuterExpressions(_.expression,-3),Ie.isAssertionExpression(m)?(m=Ie.visitNode(_.expression,X,Ie.isExpression),Ie.createPartiallyEmittedExpression(m,_)):Ie.visitEachChild(_,X,N);case 184:case 202:return m=e,h=Ie.visitNode(m.expression,X,Ie.isExpression),Ie.createPartiallyEmittedExpression(h,m);case 181:return h=e,Ie.updateCall(h,Ie.visitNode(h.expression,X,Ie.isExpression),void 0,Ie.visitNodes(h.arguments,X,Ie.isExpression));case 182:return g=e,Ie.updateNew(g,Ie.visitNode(g.expression,X,Ie.isExpression),void 0,Ie.visitNodes(g.arguments,X,Ie.isExpression));case 203:return g=e,c=Ie.visitNode(g.expression,X,Ie.isLeftHandSideExpression),Ie.createPartiallyEmittedExpression(c,g);case 232:var s,a,l,c=e;return!Ie.isConst(c)||G.preserveConstEnums||G.isolatedModules?(u=2,!pe(s=[],c)||j===Ie.ModuleKind.System&&P===w||(u|=512),l=Ce(c),d=xe(c),p=Ie.hasModifier(c,1)?Ie.getExternalModuleOrNamespaceExportName(R,c,!1,!0):Ie.getLocalName(c,!1,!0),p=Ie.createLogicalOr(p,Ie.createAssignment(p,Ie.createObjectLiteral())),de(c)&&(a=Ie.getLocalName(c,!1,!0),p=Ie.createAssignment(a,p)),l=Ie.createStatement(Ie.createCall(Ie.createFunctionExpression(void 0,void 0,void 0,void 0,[Ie.createParameter(void 0,void 0,void 0,l)],void 0,(a=c,l=R,R=d,d=[],U(),Ie.addRange(d,Ie.map(a.members,ue)),Ie.addRange(d,H()),R=l,Ie.createBlock(Ie.setTextRange(Ie.createNodeArray(d),a.members),!0))),void 0,[p])),Ie.setOriginalNode(l,c),Ie.setTextRange(l,c),Ie.setEmitFlags(l,u),s.push(l),s.push(Ie.createEndOfDeclarationMarker(c)),s):void 0;case 208:return oe(d=e)?0===(p=Ie.getInitializedVariables(d.declarationList)).length?void 0:Ie.setTextRange(Ie.createStatement(Ie.inlineExpressions(Ie.map(p,ce))),d):Ie.visitEachChild(d,X,N);case 226:return u=e,Ie.updateVariableDeclaration(u,Ie.visitNode(u.name,X,Ie.isBindingName),void 0,Ie.visitNode(u.initializer,X,Ie.isExpression));case 233:return function c(e){if(!function(e){return Ie.isInstantiatedModule(e,G.preserveConstEnums||G.isolatedModules)}(e))return Ie.createNotEmittedStatement(e);Ie.Debug.assertNode(e.name,Ie.isIdentifier,"A TypeScript namespace should have an Identifier name."),0==(2&M)&&(M|=2,N.enableSubstitution(71),N.enableSubstitution(262),N.enableEmitNotification(233));var t=[],n=2;!pe(t,e)||j===Ie.ModuleKind.System&&P===w||(n|=512);var o=Ce(e),r=xe(e),i=Ie.hasModifier(e,1)?Ie.getExternalModuleOrNamespaceExportName(R,e,!1,!0):Ie.getLocalName(e,!1,!0),i=Ie.createLogicalOr(i,Ie.createAssignment(i,Ie.createObjectLiteral()));de(e)&&(s=Ie.getLocalName(e,!1,!0),i=Ie.createAssignment(s,i));var s=Ie.createStatement(Ie.createCall(Ie.createFunctionExpression(void 0,void 0,void 0,void 0,[Ie.createParameter(void 0,void 0,void 0,o)],void 0,function(e,t){var n=R,o=O,r=L;R=t,O=e,L=void 0;var i,s,a,l=[],t=(U(),e.body),e=(234===t.kind?(z(t,function(e){return Ie.addRange(l,Ie.visitNodes(e.statements,ie,Ie.isStatement))}),i=t.statements,s=t):((a=c(t))&&(Ie.isArray(a)?Ie.addRange(l,a):l.push(a)),a=ge(e).body,i=Ie.moveRangePos(a.statements,-1)),Ie.addRange(l,H()),R=n,O=o,L=r,Ie.createBlock(Ie.setTextRange(Ie.createNodeArray(l),i),!0));return Ie.setTextRange(e,s),234!==t.kind&&Ie.setEmitFlags(e,1536|Ie.getEmitFlags(e)),e}(e,r)),void 0,[i]));return Ie.setOriginalNode(s,e),Ie.setTextRange(s,e),Ie.setEmitFlags(s,n),t.push(s),t.push(Ie.createEndOfDeclarationMarker(e)),t}(e);case 237:return ke(e);default:return Ie.Debug.failBadSyntaxKind(e),Ie.visitEachChild(e,X,N)}var u,d,p,c,g,h,_,m,f,y,k,b,v,T,E,S,C,x,B,A,I,D}function y(e){var t=(void 0===G.alwaysStrict?G.strict:G.alwaysStrict)&&!(Ie.isExternalModule(e)&&j>=Ie.ModuleKind.ES2015);return Ie.updateSourceFileNode(e,Ie.visitLexicalEnvironment(e.statements,r,N,0,t))}function se(e){return void 0!==e.decorators&&0<e.decorators.length}function Y(e,t){var n,o,r,i,s,a,l,c,u,d=[],p=(n=e,t=t,l=Ie.forEach(n.members,g),c=262144&n.transformFlags,u=Ie.getFirstConstructorWithBody(n),l||c?(l=Ie.visitParameterList(u&&u.parameters,X,N)||[],c=n,o=u,t=t,i=[],s=0,h(),o?(p=i,s=o.body?(a=o.body.statements,(r=Ie.addPrologue(p,a,!1,X))!==a.length&&210===(a=a[r]).kind&&Ie.isSuperCall(a.expression)?(p.push(Ie.visitNode(a,X,Ie.isStatement)),r+1):r):0,p=Ie.filter(o.parameters,k),Ie.addRange(i,Ie.map(p,b))):t&&i.push(Ie.createStatement(Ie.createCall(Ie.createSuper(),void 0,[Ie.createSpread(Ie.createIdentifier("arguments"))]))),a=q(c,!1),J(i,a,Ie.createThis()),o&&Ie.addRange(i,Ie.visitNodes(o.body.statements,X,Ie.isStatement,s)),i=Ie.mergeLexicalEnvironment(i,H()),r=Ie.setTextRange(Ie.createBlock(Ie.setTextRange(Ie.createNodeArray(i),o?o.body.statements:c.members),!0),o?o.body:void 0),Ie.startOnNewLine(Ie.setOriginalNode(Ie.setTextRange(Ie.createConstructor(void 0,void 0,l,r),u||n),u))):Ie.visitEachChild(u,X,N));return p&&d.push(p),Ie.addRange(d,Ie.visitNodes(e.members,m,Ie.isClassElement)),Ie.setTextRange(Ie.createNodeArray(d),e.members)}function k(e){return Ie.hasModifier(e,92)&&Ie.isIdentifier(e.name)}function b(e){Ie.Debug.assert(Ie.isIdentifier(e.name));var t=e.name,n=Ie.getMutableClone(t),t=(Ie.setEmitFlags(n,1584),Ie.getMutableClone(t));return Ie.setEmitFlags(t,1536),Ie.startOnNewLine(Ie.setTextRange(Ie.createStatement(Ie.createAssignment(Ie.setTextRange(Ie.createPropertyAccess(Ie.createThis(),n),e.name),t)),Ie.moveRangePos(e,-1)))}function q(e,t){return Ie.filter(e.members,t?v:g)}function v(e){return n(e,!0)}function g(e){return n(e,!1)}function n(e,t){return 149===e.kind&&t===Ie.hasModifier(e,32)&&void 0!==e.initializer}function J(e,t,n){for(var o=0,r=t;o<r.length;o++){var i=r[o],s=Ie.createStatement(Q(i,n));Ie.setSourceMapRange(s,Ie.moveRangePastModifiers(i)),Ie.setCommentRange(s,i),e.push(s)}}function Q(e,t){var n=te(e),e=Ie.visitNode(e.initializer,X,Ie.isExpression),t=Ie.createMemberAccessForPropertyName(t,n,n);return Ie.createAssignment(t,e)}function T(e){return o(e,!0)}function E(e){return o(e,!1)}function o(e,t){return Ie.nodeOrChildIsDecorated(e)&&t===Ie.hasModifier(e,32)}function Z(e){var t;if(e)for(var n=e.parameters,o=0;o<n.length;o++){var r=n[o];(t||r.decorators)&&((t=t||new Array(n.length))[o]=r.decorators)}return t}function ee(e,t,n){var o;if(n)return Ie.addRange(o=[],Ie.map(n.decorators,S)),Ie.addRange(o,Ie.flatMap(n.parameters,C)),n=e,e=t,t=o,G.emitDecoratorMetadata&&(function(e){e=e.kind;return 151===e||153===e||154===e||149===e}(n)&&t.push(Ne(N,"design:type",x(n))),function(e){switch(e.kind){case 229:case 199:return void 0!==Ie.getFirstConstructorWithBody(e);case 151:case 153:case 154:return 1}return}(n)&&t.push(Ne(N,"design:paramtypes",function(e,n){var e=Ie.isClassLike(e)?Ie.getFirstConstructorWithBody(e):Ie.isFunctionLike(e)&&Ie.nodeIsPresent(e.body)?e:void 0,t=[];if(e)for(var o=function(e){if(n&&153===e.kind){var t=Ie.getAllAccessorDeclarations(n.members,e).setAccessor;if(t)return t.parameters}return e.parameters}(e),r=o.length,i=0;i<r;i++){var s=o[i];0===i&&Ie.isIdentifier(s.name)&&"this"===s.name.escapedText||(s.dotDotDotToken?t.push(c(Ie.getRestParameterElementType(s.type))):t.push(x(s)))}return Ie.createArrayLiteral(t)}(n,e))),151===n.kind)&&t.push(Ne(N,"design:returntype",(e=n,Ie.isFunctionLike(e)&&e.type?c(e.type):Ie.isAsyncFunction(e)?Ie.createIdentifier("Promise"):Ie.createVoidZero()))),o}function ae(e,t,n){Ie.addRange(e,Ie.map(function(e,t){for(var n,o=0,r=Ie.filter(e.members,t?T:E);o<r.length;o++){var i=function(e,t){var n=ee(t,e,function(e,t){switch(t.kind){case 153:case 154:var n=e,o=t;if(o.body){var n=Ie.getAllAccessorDeclarations(n.members,o),r=n.firstAccessor,i=n.secondAccessor,n=n.setAccessor,r=r.decorators?r:i&&i.decorators?i:void 0;if(r&&o===r){i=r.decorators,o=Z(n);if(i||o)return{decorators:i,parameters:o}}}return;case 151:if((r=t).body){n=r.decorators,r=Z(r);if(n||r)return{decorators:n,parameters:r}}return;case 149:i=t.decorators;return i?{decorators:i}:void 0;default:return}}(e,t));{var o,r;if(n)return e=function(e){return Ie.hasModifier(t,32)?Ie.getDeclarationName(e):Ie.createPropertyAccess(Ie.getDeclarationName(e),"prototype")}(e),o=A(t,!0),r=0<K?149===t.kind?Ie.createVoidZero():Ie.createNull():void 0,n=De(N,n,e,o,r,Ie.moveRangePastDecorators(t)),Ie.setEmitFlags(n,1536),n}}(e,r[o]);i&&(n?n.push(i):n=[i])}return n}(t,n),ve))}function S(e){return Ie.visitNode(e.expression,X,Ie.isExpression)}function C(e,t){var n,o;if(e)for(var r=[],i=0,s=e;i<s.length;i++){var a=s[i],l=(l=N,n=S(a),o=t,a=a.expression,l.requestEmitHelper(we),Ie.setTextRange(Ie.createCall(Ie.getHelperName("__param"),void 0,[Ie.createLiteral(o),n]),a));Ie.setEmitFlags(l,1536),r.push(l)}return r}function x(e){switch(e.kind){case 149:case 146:case 153:return c(e.type);case 154:return c(Ie.getSetAccessorTypeAnnotationNode(e));case 229:case 199:case 151:return Ie.createIdentifier("Function");default:return Ie.createVoidZero()}}function c(e){if(void 0!==e)switch(e.kind){case 105:case 139:case 95:case 130:return Ie.createVoidZero();case 168:return c(e.type);case 160:case 161:return Ie.createIdentifier("Function");case 164:case 165:return Ie.createIdentifier("Array");case 158:case 122:return Ie.createIdentifier("Boolean");case 136:return Ie.createIdentifier("String");case 134:return Ie.createIdentifier("Object");case 173:switch(e.literal.kind){case 9:return Ie.createIdentifier("String");case 8:return Ie.createIdentifier("Number");case 101:case 86:return Ie.createIdentifier("Boolean");default:Ie.Debug.failBadSyntaxKind(e.literal)}break;case 133:return Ie.createIdentifier("Number");case 137:return K<2?B():Ie.createIdentifier("Symbol");case 159:var t=e;switch(W.getTypeReferenceSerializationKind(t.typeName,P)){case Ie.TypeReferenceSerializationKind.Unknown:var n=u(t.typeName,!0),o=Ie.createTempVariable(V);return Ie.createLogicalOr(Ie.createLogicalAnd(Ie.createTypeCheck(Ie.createAssignment(o,n),"function"),o),Ie.createIdentifier("Object"));case Ie.TypeReferenceSerializationKind.TypeWithConstructSignatureAndValue:return u(t.typeName,!1);case Ie.TypeReferenceSerializationKind.VoidNullableOrNeverType:return Ie.createVoidZero();case Ie.TypeReferenceSerializationKind.BooleanType:return Ie.createIdentifier("Boolean");case Ie.TypeReferenceSerializationKind.NumberLikeType:return Ie.createIdentifier("Number");case Ie.TypeReferenceSerializationKind.StringLikeType:return Ie.createIdentifier("String");case Ie.TypeReferenceSerializationKind.ArrayLikeType:return Ie.createIdentifier("Array");case Ie.TypeReferenceSerializationKind.ESSymbolType:return K<2?B():Ie.createIdentifier("Symbol");case Ie.TypeReferenceSerializationKind.TypeWithCallSignature:return Ie.createIdentifier("Function");case Ie.TypeReferenceSerializationKind.Promise:return Ie.createIdentifier("Promise");default:Ie.TypeReferenceSerializationKind.ObjectType;return Ie.createIdentifier("Object")}return;case 167:case 166:for(var r,i=0,s=e.types;i<s.length;i++){for(var a=s[i];168===a.kind;)a=a.type;if(130!==a.kind&&(d||95!==a.kind&&139!==a.kind)){var l=c(a);if(Ie.isIdentifier(l)&&"Object"===l.escapedText)return l;if(r){if(!Ie.isIdentifier(r)||!Ie.isIdentifier(l)||r.escapedText!==l.escapedText)return Ie.createIdentifier("Object")}else r=l}}return r||Ie.createVoidZero();case 162:case 170:case 171:case 172:case 163:case 119:case 169:break;default:Ie.Debug.failBadSyntaxKind(e)}return Ie.createIdentifier("Object")}function u(e,t){switch(e.kind){case 71:var n=Ie.getMutableClone(e);return n.flags&=-9,n.original=void 0,n.parent=Ie.getParseTreeNode(P),t?Ie.createLogicalAnd(Ie.createStrictInequality(Ie.createTypeOf(n),Ie.createLiteral("undefined")),n):n;case 143:return n=t,n=71===(o=e).left.kind?u(o.left,n):n?(n=Ie.createTempVariable(V),Ie.createLogicalAnd(Ie.createAssignment(n,u(o.left,!0)),n)):u(o.left,!1),Ie.createPropertyAccess(n,o.right)}var o}function B(){return Ie.createConditional(Ie.createTypeCheck(Ie.createIdentifier("Symbol"),"function"),Ie.createIdentifier("Symbol"),Ie.createIdentifier("Object"))}function A(e,t){e=e.name;return Ie.isComputedPropertyName(e)?t?Ie.getGeneratedNameForNode(e):e.expression:Ie.isIdentifier(e)?Ie.createLiteral(Ie.idText(e)):Ie.getSynthesizedClone(e)}function te(e){var t,n=e.name;return Ie.isComputedPropertyName(n)?(t=Ie.visitNode(n.expression,X,Ie.isExpression),e.decorators&&(e=Ie.getGeneratedNameForNode(n),V(e),t=Ie.createAssignment(e,t)),Ie.updateComputedPropertyName(n,t)):n}function ne(e){return!Ie.nodeIsMissing(e.body)}function le(e){return!Ie.nodeIsMissing(e.body)||!Ie.hasModifier(e,128)}function ce(e){var t=e.name;return Ie.isBindingPattern(t)?Ie.flattenDestructuringAssignment(e,X,N,0,!1,Ee):Ie.setTextRange(Ie.createAssignment(Se(t),Ie.visitNode(e.initializer,X,Ie.isExpression)),e)}function ue(e){var t=A(e,!1),n=(o=e,void 0!==(n=W.getConstantValue(o))?Ie.createLiteral(n):(0==(8&M)&&(M|=8,N.enableSubstitution(71)),o.initializer?Ie.visitNode(o.initializer,X,Ie.isExpression):Ie.createVoidZero())),o=Ie.createAssignment(Ie.createElementAccess(R,t),n),n=9===n.kind?o:Ie.createAssignment(Ie.createElementAccess(R,o),t);return Ie.setTextRange(Ie.createStatement(Ie.setTextRange(n,e)),e)}function de(e){return oe(e)||re(e)&&j!==Ie.ModuleKind.ES2015&&j!==Ie.ModuleKind.ESNext&&j!==Ie.ModuleKind.System}function I(e){L=L||Ie.createUnderscoreEscapedMap();var t=D(e);L.has(t)||L.set(t,e)}function D(e){return Ie.Debug.assertNode(e.name,Ie.isIdentifier),e.name.escapedText}function pe(e,t){var n,o,r=Ie.createVariableStatement(Ie.visitNodes(t.modifiers,$,Ie.isModifier),Ie.createVariableDeclarationList([Ie.createVariableDeclaration(Ie.getLocalName(t,!1,!0))],265===P.kind?0:1));return Ie.setOriginalNode(r,t),I(t),n=t,L&&(o=D(n),L.get(o)!==n)?(o=Ie.createMergeDeclarationMarker(r),Ie.setEmitFlags(o,4195840),e.push(o),!1):(232===t.kind?Ie.setSourceMapRange(r.declarationList,t):Ie.setSourceMapRange(r,t),Ie.setCommentRange(r,t),Ie.setEmitFlags(r,4195328),e.push(r),!0)}function ge(e){if(233===e.body.kind)return ge(e.body)||e.body}function he(e){var t=W.isReferencedAliasDeclaration(e)?e.name:void 0,n=Ie.visitNode(e.namedBindings,_e,Ie.isNamedImportBindings);return t||n?Ie.updateImportClause(e,t,n):void 0}function _e(e){var t;return 240===e.kind?W.isReferencedAliasDeclaration(e)?e:void 0:(t=Ie.visitNodes(e.elements,me,Ie.isImportSpecifier),Ie.some(t)?Ie.updateNamedImports(e,t):void 0)}function me(e){return W.isReferencedAliasDeclaration(e)?e:void 0}function fe(e){var t=Ie.visitNodes(e.elements,ye,Ie.isExportSpecifier);return Ie.some(t)?Ie.updateNamedExports(e,t):void 0}function ye(e){return W.isValueAliasDeclaration(e)?e:void 0}function ke(e){var t,n,o;return Ie.isExternalModuleImportEqualsDeclaration(e)?W.isReferencedAliasDeclaration(e)?Ie.visitEachChild(e,X,N):void 0:(o=e,W.isReferencedAliasDeclaration(o)||!Ie.isExternalModule(w)&&W.isTopLevelValueImportEqualsWithEntityName(o)?(o=Ie.createExpressionFromEntityName(e.moduleReference),Ie.setEmitFlags(o,3584),be(e)||!oe(e)?Ie.setOriginalNode(Ie.setTextRange(Ie.createVariableStatement(Ie.visitNodes(e.modifiers,$,Ie.isModifier),Ie.createVariableDeclarationList([Ie.setOriginalNode(Ie.createVariableDeclaration(e.name,void 0,o),e)])),e),e):Ie.setOriginalNode((t=e.name,o=o,n=e,Ie.setTextRange(Ie.createStatement(Ie.createAssignment(Ie.getNamespaceMemberName(R,t,!1,!0),o)),n)),e)):void 0)}function oe(e){return void 0!==O&&Ie.hasModifier(e,1)}function re(e){return void 0===O&&Ie.hasModifier(e,1)}function be(e){return re(e)&&!Ie.hasModifier(e,512)}function ve(e){return Ie.createStatement(e)}function Te(e,t){var n=Ie.createAssignment(Ie.getExternalModuleOrNamespaceExportName(R,t,!1,!0),Ie.getLocalName(t)),n=(Ie.setSourceMapRange(n,Ie.createRange((t.name||t).pos,t.end)),Ie.createStatement(n));Ie.setSourceMapRange(n,Ie.createRange(-1,t.end)),e.push(n)}function Ee(e,t,n){return Ie.setTextRange(Ie.createAssignment(Se(e),t),n)}function Se(e){return Ie.getNamespaceMemberName(R,e,!1,!0)}function Ce(e){var t=Ie.getGeneratedNameForNode(e);return Ie.setSourceMapRange(t,e.name),t}function xe(e){return Ie.getGeneratedNameForNode(e)}function Be(){0==(1&M)&&(M|=1,N.enableSubstitution(71),F=[])}function Ae(e){if(M&i&&!Ie.isGeneratedIdentifier(e)&&!Ie.isLocalName(e)){var t=W.getReferencedExportContainer(e,!1);if(t&&265!==t.kind&&(2&i&&233===t.kind||8&i&&232===t.kind))return Ie.setTextRange(Ie.createPropertyAccess(Ie.getGeneratedNameForNode(t),e),e)}}}),priority:2,text:'\n            var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n                var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n                if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n                else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n                return c > 3 && r && Object.defineProperty(target, key, r), r;\n            };'};function Ne(e,t,n){return e.requestEmitHelper(o),Ie.createCall(Ie.getHelperName("__metadata"),void 0,[Ie.createLiteral(t),n])}var o={name:"typescript:metadata",scoped:!1,priority:3,text:'\n            var __metadata = (this && this.__metadata) || function (k, v) {\n                if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\n            };'};var we={name:"typescript:param",scoped:!1,priority:4,text:"\n            var __param = (this && this.__param) || function (paramIndex, decorator) {\n                return function (target, key) { decorator(target, key, paramIndex); }\n            };"}}(ts=ts||{}),function(k){var r={name:"typescript:awaiter",scoped:!(k.transformES2017=function(a){var i,n=a.startLexicalEnvironment,l=a.resumeLexicalEnvironment,c=a.endLexicalEnvironment,u=a.getEmitResolver(),e=a.getCompilerOptions(),d=k.getEmitScriptTarget(e),s=0,p=a.onEmitNode,g=a.onSubstituteNode;return a.onEmitNode=function(e,t,n){if(1&i&&(229===(r=t.kind)||152===r||151===r||153===r||154===r)){var o,r=6144&u.getNodeCheckFlags(t);if(r!==s)return o=s,s=r,p(e,t,n),void(s=o)}var r;p(e,t,n)},a.onSubstituteNode=function(e,t){if(t=g(e,t),1===e&&s){var n,o,r=t;switch(r.kind){case 179:return f(r);case 180:return y(r);case 181:return o=(n=r).expression,k.isSuperProperty(o)?(o=(k.isPropertyAccessExpression(o)?f:y)(o),k.createCall(k.createPropertyAccess(o,"call"),void 0,[k.createThis()].concat(n.arguments))):n}return r}return t},function(e){return e.isDeclarationFile||(e=k.visitEachChild(e,h,a),k.addEmitHelpers(e,a.readEmitHelpers())),e};function h(e){if(0==(16&e.transformFlags))return e;switch(e.kind){case 120:return;case 191:return o=e,k.setOriginalNode(k.setTextRange(k.createYield(void 0,k.visitNode(o.expression,h,k.isExpression)),o),o);case 151:return o=e,k.updateMethod(o,void 0,k.visitNodes(o.modifiers,h,k.isModifier),o.asteriskToken,o.name,void 0,void 0,k.visitParameterList(o.parameters,h,a),void 0,2&k.getFunctionFlags(o)?r(o):k.visitFunctionBody(o.body,h,a));case 228:return n=e,k.updateFunctionDeclaration(n,void 0,k.visitNodes(n.modifiers,h,k.isModifier),n.asteriskToken,n.name,void 0,k.visitParameterList(n.parameters,h,a),void 0,2&k.getFunctionFlags(n)?r(n):k.visitFunctionBody(n.body,h,a));case 186:return n=e,k.updateFunctionExpression(n,k.visitNodes(n.modifiers,h,k.isModifier),n.asteriskToken,n.name,void 0,k.visitParameterList(n.parameters,h,a),void 0,2&k.getFunctionFlags(n)?r(n):k.visitFunctionBody(n.body,h,a));case 187:return t=e,k.updateArrowFunction(t,k.visitNodes(t.modifiers,h,k.isModifier),void 0,k.visitParameterList(t.parameters,h,a),void 0,t.equalsGreaterThanToken,2&k.getFunctionFlags(t)?r(t):k.visitFunctionBody(t.body,h,a));default:return k.visitEachChild(e,h,a)}var t,n,o}function r(e){l();var t,n,o=k.getOriginalNode(e,k.isFunctionLike).type,r=d<2?function(){var e=o&&k.getEntityNameFromTypeNode(o);if(e&&k.isEntityName(e)){var t=u.getTypeReferenceSerializationKind(e);if(t===k.TypeReferenceSerializationKind.TypeWithConstructSignatureAndValue||t===k.TypeReferenceSerializationKind.Unknown)return e}}():void 0,i=187===e.kind,s=0!=(8192&u.getNodeCheckFlags(e));return i?(i=b(a,s,r,_(e.body)),t=c(),k.some(t)?(n=k.convertToFunctionBody(i),k.updateBlock(n,k.setTextRange(k.createNodeArray(k.concatenate(n.statements,t)),n.statements))):i):(i=k.addPrologue(t=[],e.body.statements,!1,h),t.push(k.createReturn(b(a,s,r,_(e.body,i)))),k.addRange(t,c()),n=k.createBlock(t,!0),k.setTextRange(n,e.body),2<=d&&(4096&u.getNodeCheckFlags(e)?(m(),k.addEmitHelper(n,k.advancedAsyncSuperHelper)):2048&u.getNodeCheckFlags(e)&&(m(),k.addEmitHelper(n,k.asyncSuperHelper))),n)}function _(e,t){if(k.isBlock(e))return k.updateBlock(e,k.visitLexicalEnvironment(e.statements,h,a,t));n();t=k.convertToFunctionBody(k.visitNode(e,h,k.isConciseBody)),e=c();return k.updateBlock(t,k.setTextRange(k.createNodeArray(k.concatenate(t.statements,e)),t.statements))}function m(){0==(1&i)&&(i|=1,a.enableSubstitution(181),a.enableSubstitution(179),a.enableSubstitution(180),a.enableEmitNotification(229),a.enableEmitNotification(151),a.enableEmitNotification(153),a.enableEmitNotification(154),a.enableEmitNotification(152))}function f(e){return 97===e.expression.kind?t(k.createLiteral(k.idText(e.name)),e):e}function y(e){return 97===e.expression.kind?t(e.argumentExpression,e):e}function t(e,t){return 4096&s?k.setTextRange(k.createPropertyAccess(k.createCall(k.createIdentifier("_super"),void 0,[e]),"value"),t):k.setTextRange(k.createCall(k.createIdentifier("_super"),void 0,[e]),t)}}),priority:5,text:'\n            var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n                return new (P || (P = Promise))(function (resolve, reject) {\n                    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n                    function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n                    function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n                    step((generator = generator.apply(thisArg, _arguments || [])).next());\n                });\n            };'};function b(e,t,n,o){e.requestEmitHelper(r);e=k.createFunctionExpression(void 0,k.createToken(39),void 0,void 0,[],void 0,o);return(e.emitNode||(e.emitNode={})).flags|=786432,k.createCall(k.getHelperName("__awaiter"),void 0,[k.createThis(),t?k.createIdentifier("arguments"):k.createVoidZero(),n?k.createExpressionFromEntityName(n):k.createVoidZero(),e])}k.asyncSuperHelper={name:"typescript:async-super",scoped:!0,text:"\n            const _super = name => super[name];\n        "},k.advancedAsyncSuperHelper={name:"typescript:advanced-async-super",scoped:!0,text:"\n            const _super = (function (geti, seti) {\n                const cache = Object.create(null);\n                return name => cache[name] || (cache[name] = { get value() { return geti(name); }, set value(v) { seti(name, v); } });\n            })(name => super[name], (name, value) => super[name] = value);\n        "}}(ts=ts||{}),function(x){var n={name:"typescript:assign",scoped:!(x.transformESNext=function(f){var i=f.resumeLexicalEnvironment,s=f.endLexicalEnvironment,m=f.hoistVariableDeclaration,a=f.getEmitResolver(),e=f.getCompilerOptions(),r=x.getEmitScriptTarget(e),l=f.onEmitNode;f.onEmitNode=function(e,t,n){if(1&c&&(229===(r=t.kind)||152===r||151===r||153===r||154===r)){var o,r=6144&a.getNodeCheckFlags(t);if(r!==d)return o=d,d=r,l(e,t,n),void(d=o)}var r;l(e,t,n)};var c,y,u=f.onSubstituteNode,d=(f.onSubstituteNode=function(e,t){if(t=u(e,t),1===e&&d){var n,o,r=t;switch(r.kind){case 179:return h(r);case 180:return _(r);case 181:return o=(n=r).expression,x.isSuperProperty(o)?(o=(x.isPropertyAccessExpression(o)?h:_)(o),x.createCall(x.createPropertyAccess(o,"call"),void 0,[x.createThis()].concat(n.arguments))):n}return r}return t},0);return function(e){return e.isDeclarationFile||(e=x.visitEachChild(e,k,f),x.addEmitHelpers(e,f.readEmitHelpers())),e};function k(e){return t(e,!1)}function b(e){return t(e,!0)}function v(e){if(120!==e.kind)return e}function t(e,t){if(0==(8&e.transformFlags))return e;switch(e.kind){case 191:return m=e,2&y&&1&y?x.setOriginalNode(x.setTextRange(x.createYield(I(f,x.visitNode(m.expression,k,x.isExpression))),m),m):x.visitEachChild(m,k,f);case 197:return m=e,2&y&&1&y&&m.asteriskToken?(_=x.visitNode(m.expression,k,x.isExpression),x.setOriginalNode(x.setTextRange(x.createYield(I(f,x.updateYield(m,m.asteriskToken,(h=w(g=f,_,_),_=_,g.requestEmitHelper(A),g.requestEmitHelper(N),x.setTextRange(x.createCall(x.getHelperName("__asyncDelegator"),void 0,[h]),_))))),m),m)):x.visitEachChild(m,k,f);case 222:return g=e,2&y&&1&y?216===(h=x.unwrapInnermostStatementOfLabel(g)).kind&&h.awaitModifier?T(h,g):x.restoreEnclosingLabel(x.visitEachChild(g,k,f),g):x.visitEachChild(g,k,f);case 178:return 1048576&(p=e).transformFlags?((_=function(){for(var e,t=[],n=0,o=p.properties;n<o.length;n++){var r,i=o[n];263===i.kind?(e&&(t.push(x.createObjectLiteral(e)),e=void 0),r=i.expression,t.push(x.visitNode(r,k,x.isExpression))):(e=e||[],261===i.kind?e.push(x.createPropertyAssignment(i.name,x.visitNode(i.initializer,k,x.isExpression))):e.push(x.visitNode(i,k,x.isObjectLiteralElementLike)))}return e&&t.push(x.createObjectLiteral(e)),t}()).length&&178!==_[0].kind&&_.unshift(x.createObjectLiteral()),B(f,_)):x.visitEachChild(p,k,f);case 194:return u=e,d=t,x.isDestructuringAssignment(u)&&1048576&u.left.transformFlags?x.flattenDestructuringAssignment(u,k,f,1,!d):26===u.operatorToken.kind?x.updateBinary(u,x.visitNode(u.left,b,x.isExpression),x.visitNode(u.right,d?b:k,x.isExpression)):x.visitEachChild(u,k,f);case 226:return d=e,x.isBindingPattern(d.name)&&1048576&d.name.transformFlags?x.flattenDestructuringBinding(d,k,f,1):x.visitEachChild(d,k,f);case 216:return T(e,void 0);case 214:return u=e,x.updateFor(u,x.visitNode(u.initializer,b,x.isForInitializer),x.visitNode(u.condition,k,x.isExpression),x.visitNode(u.incrementor,k,x.isExpression),x.visitNode(u.statement,k,x.isStatement));case 190:return x.visitEachChild(e,b,f);case 152:return l=e,c=y,y=0,l=x.updateConstructor(l,void 0,l.modifiers,x.visitParameterList(l.parameters,k,f),C(l)),y=c,l;case 151:return c=e,l=y,y=x.getFunctionFlags(c),c=x.updateMethod(c,void 0,1&y?x.visitNodes(c.modifiers,v,x.isModifier):c.modifiers,2&y?void 0:c.asteriskToken,x.visitNode(c.name,k,x.isPropertyName),x.visitNode(void 0,k,x.isToken),void 0,x.visitParameterList(c.parameters,k,f),void 0,(2&y&&1&y?S:C)(c)),y=l,c;case 153:return s=e,a=y,y=0,s=x.updateGetAccessor(s,void 0,s.modifiers,x.visitNode(s.name,k,x.isPropertyName),x.visitParameterList(s.parameters,k,f),void 0,C(s)),y=a,s;case 154:return a=e,s=y,y=0,a=x.updateSetAccessor(a,void 0,a.modifiers,x.visitNode(a.name,k,x.isPropertyName),x.visitParameterList(a.parameters,k,f),C(a)),y=s,a;case 228:return r=e,i=y,y=x.getFunctionFlags(r),r=x.updateFunctionDeclaration(r,void 0,1&y?x.visitNodes(r.modifiers,v,x.isModifier):r.modifiers,2&y?void 0:r.asteriskToken,r.name,void 0,x.visitParameterList(r.parameters,k,f),void 0,(2&y&&1&y?S:C)(r)),y=i,r;case 186:return i=e,r=y,y=x.getFunctionFlags(i),i=x.updateFunctionExpression(i,1&y?x.visitNodes(i.modifiers,v,x.isModifier):i.modifiers,2&y?void 0:i.asteriskToken,i.name,void 0,x.visitParameterList(i.parameters,k,f),void 0,(2&y&&1&y?S:C)(i)),y=r,i;case 187:return n=e,o=y,y=x.getFunctionFlags(n),n=x.updateArrowFunction(n,n.modifiers,void 0,x.visitParameterList(n.parameters,k,f),void 0,n.equalsGreaterThanToken,C(n)),y=o,n;case 146:return 1048576&(o=e).transformFlags?x.updateParameter(o,void 0,void 0,o.dotDotDotToken,x.getGeneratedNameForNode(o),void 0,void 0,x.visitNode(o.initializer,k,x.isExpression)):x.visitEachChild(o,k,f);case 210:return x.visitEachChild(e,b,f);case 185:return x.visitEachChild(e,t?b:k,f);case 260:return(n=e).variableDeclaration?x.visitEachChild(n,k,f):x.updateCatchClause(n,x.createVariableDeclaration(x.createTempVariable(void 0)),x.visitNode(n.block,k,x.isBlock));default:return x.visitEachChild(e,k,f)}var n,o,r,i,s,a,l,c,u,d,p,g,h,_,m}function T(e,t){return 1048576&e.initializer.transformFlags&&(d=e,_=x.skipParentheses(d.initializer),e=x.isVariableDeclarationList(_)||x.isAssignmentPattern(_)?(h=x.createTempVariable(g=p=void 0),_=[x.createForOfBindingStatement(_,h)],x.isBlock(d.statement)&&(x.addRange(_,d.statement.statements),p=d.statement,g=d.statement.statements),x.updateForOf(d,d.awaitModifier,x.setTextRange(x.createVariableDeclarationList([x.setTextRange(x.createVariableDeclaration(h),d.initializer)],1),d.initializer),d.expression,x.setTextRange(x.createBlock(x.setTextRange(x.createNodeArray(_),g),!0),p))):d),e.awaitModifier?(h=e,_=t,g=x.visitNode(h.expression,k,x.isExpression),p=x.isIdentifier(g)?x.getGeneratedNameForNode(g):x.createTempVariable(void 0),d=x.isIdentifier(g)?x.getGeneratedNameForNode(p):x.createTempVariable(void 0),r=x.createUniqueName("e"),i=x.getGeneratedNameForNode(r),s=x.createTempVariable(void 0),g=w(f,g,h.expression),a=x.createCall(x.createPropertyAccess(p,"next"),void 0,[]),l=x.createPropertyAccess(d,"done"),c=x.createPropertyAccess(d,"value"),u=x.createFunctionCall(s,p,[]),m(r),m(s),c=x.setEmitFlags(x.setTextRange(x.createFor(x.setEmitFlags(x.setTextRange(x.createVariableDeclarationList([x.setTextRange(x.createVariableDeclaration(p,void 0,g),h.expression),x.createVariableDeclaration(d)]),h.expression),2097152),x.createComma(x.createAssignment(d,E(a)),x.createLogicalNot(l)),void 0,(g=h,a=E(c),a=x.createForOfBindingStatement(g.initializer,a),a=[x.visitNode(a,k,x.isStatement)],g=x.visitNode(g.statement,k,x.isStatement),x.isBlock(g)?(x.addRange(a,g.statements),o=(n=g).statements):a.push(g),x.setEmitFlags(x.setTextRange(x.createBlock(x.setTextRange(x.createNodeArray(a),o),!0),n),432))),h),256),x.createTry(x.createBlock([x.restoreEnclosingLabel(c,_)]),x.createCatchClause(x.createVariableDeclaration(i),x.setEmitFlags(x.createBlock([x.createStatement(x.createAssignment(r,x.createObjectLiteral([x.createPropertyAssignment("error",i)])))]),1)),x.createBlock([x.createTry(x.createBlock([x.setEmitFlags(x.createIf(x.createLogicalAnd(x.createLogicalAnd(d,x.createLogicalNot(l)),x.createAssignment(s,x.createPropertyAccess(p,"return"))),x.createStatement(E(u))),1)]),void 0,x.setEmitFlags(x.createBlock([x.setEmitFlags(x.createIf(r,x.createThrow(x.createPropertyAccess(r,"error"))),1)]),1))]))):x.restoreEnclosingLabel(x.visitEachChild(e,k,f),t);var n,o,r,i,s,a,l,c,u,d,p,g,h,_}function E(e){return 1&y?x.createYield(void 0,I(f,e)):x.createAwait(e)}function S(e){i();var t=[],n=x.addPrologue(t,e.body.statements,!1,k),o=(p(t,e),t.push(x.createReturn((o=f,n=x.createFunctionExpression(void 0,x.createToken(39),e.name&&x.getGeneratedNameForNode(e.name),void 0,[],void 0,x.updateBlock(e.body,x.visitLexicalEnvironment(e.body.statements,k,f,n))),o.requestEmitHelper(A),o.requestEmitHelper(D),(n.emitNode||(n.emitNode={})).flags|=262144,x.createCall(x.getHelperName("__asyncGenerator"),void 0,[x.createThis(),x.createIdentifier("arguments"),n])))),x.addRange(t,s()),x.updateBlock(e.body,t));return 2<=r&&(4096&a.getNodeCheckFlags(e)?(g(),x.addEmitHelper(o,x.advancedAsyncSuperHelper)):2048&a.getNodeCheckFlags(e)&&(g(),x.addEmitHelper(o,x.asyncSuperHelper))),o}function C(e){i();var t,n=0,o=[],r=x.visitNode(e.body,k,x.isConciseBody),e=(x.isBlock(r)&&(n=x.addPrologue(o,r.statements,!1,k)),x.addRange(o,p(void 0,e)),s());return 0<n||x.some(o)||x.some(e)?(t=x.convertToFunctionBody(r,!0),x.addRange(o,t.statements.slice(n)),x.addRange(o,e),x.updateBlock(t,x.setTextRange(x.createNodeArray(o),t.statements))):r}function p(e,t){for(var n=0,o=t.parameters;n<o.length;n++){var r,i=o[n];1048576&i.transformFlags&&(r=x.getGeneratedNameForNode(i),i=x.flattenDestructuringBinding(i,k,f,1,r,!1,!0),x.some(i))&&(r=x.createVariableStatement(void 0,x.createVariableDeclarationList(i)),x.setEmitFlags(r,1048576),e=x.append(e,r))}return e}function g(){0==(1&c)&&(c|=1,f.enableSubstitution(181),f.enableSubstitution(179),f.enableSubstitution(180),f.enableEmitNotification(229),f.enableEmitNotification(151),f.enableEmitNotification(153),f.enableEmitNotification(154),f.enableEmitNotification(152))}function h(e){return 97===e.expression.kind?n(x.createLiteral(x.idText(e.name)),e):e}function _(e){return 97===e.expression.kind?n(e.argumentExpression,e):e}function n(e,t){return 4096&d?x.setTextRange(x.createPropertyAccess(x.createCall(x.createIdentifier("_super"),void 0,[e]),"value"),t):x.setTextRange(x.createCall(x.createIdentifier("_super"),void 0,[e]),t)}}),priority:1,text:"\n            var __assign = (this && this.__assign) || Object.assign || function(t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                        t[p] = s[p];\n                }\n                return t;\n            };"};function B(e,t){return 2<=e.getCompilerOptions().target?x.createCall(x.createPropertyAccess(x.createIdentifier("Object"),"assign"),void 0,t):(e.requestEmitHelper(n),x.createCall(x.getHelperName("__assign"),void 0,t))}x.createAssignHelper=B;var A={name:"typescript:await",scoped:!1,text:"\n            var __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\n        "};function I(e,t){return e.requestEmitHelper(A),x.createCall(x.getHelperName("__await"),void 0,[t])}var D={name:"typescript:asyncGenerator",scoped:!1,text:'\n            var __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n                if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");\n                var g = generator.apply(thisArg, _arguments || []), i, q = [];\n                return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;\n                function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n                function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n                function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\n                function fulfill(value) { resume("next", value); }\n                function reject(value) { resume("throw", value); }\n                function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n            };\n        '},N={name:"typescript:asyncDelegator",scoped:!1,text:'\n            var __asyncDelegator = (this && this.__asyncDelegator) || function (o) {\n                var i, p;\n                return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;\n                function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; }; }\n            };\n        '},o={name:"typescript:asyncValues",scoped:!1,text:'\n            var __asyncValues = (this && this.__asyncIterator) || function (o) {\n                if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");\n                var m = o[Symbol.asyncIterator];\n                return m ? m.call(o) : typeof __values === "function" ? __values(o) : o[Symbol.iterator]();\n            };\n        '};function w(e,t,n){return e.requestEmitHelper(o),x.setTextRange(x.createCall(x.getHelperName("__asyncValues"),void 0,[t]),n)}}(ts=ts||{}),function(h){h.transformJsx=function(l){var c=l.getCompilerOptions();return function(e){return e.isDeclarationFile||(e=h.visitEachChild(e,n,l),h.addEmitHelpers(e,l.readEmitHelpers())),e};function n(e){if(!(4&e.transformFlags))return e;var t=e;switch(t.kind){case 249:return o(t,!1);case 250:return r(t,!1);case 256:return g(t);default:return h.visitEachChild(t,n,l)}}function u(e){switch(e.kind){case 10:return void 0===(t=function(e){for(var t,n=0,o=-1,r=0;r<e.length;r++){var i=e.charCodeAt(r);h.isLineBreak(i)?(-1!==n&&-1!==o&&(t=s(t,e.substr(n,o-n+1))),n=-1):h.isWhiteSpaceSingleLine(i)||(o=r,-1===n&&(n=r))}return-1!==n?s(t,e.substr(n)):t}(h.getTextOfNode(e,!0)))?void 0:h.createLiteral(t);case 256:return g(e);case 249:return o(e,!0);case 250:return r(e,!0);default:return void h.Debug.failBadSyntaxKind(e)}var t}function o(e,t){return i(e.openingElement,e.children,t,e)}function r(e,t){return i(e,void 0,t,e)}function i(e,t,n,o){var r,i=function e(t){if(249===t.kind)return e(t.openingElement);t=t.tagName;return h.isIdentifier(t)&&h.isIntrinsicJsxName(t.escapedText)?h.createLiteral(h.idText(t)):h.createExpressionFromEntityName(t)}(e),s=e.attributes.properties,a=0===s.length?h.createNull():(r=h.flatten(h.spanMap(s,h.isJsxSpreadAttribute,function(e,t){return t?h.map(e,d):h.createObjectLiteral(h.map(e,p))})),h.isJsxSpreadAttribute(s[0])&&r.unshift(h.createObjectLiteral()),(a=h.singleOrUndefined(r))||h.createAssignHelper(l,r)),s=h.createExpressionForJsxElement(l.getEmitResolver().getJsxFactoryEntity(),c.reactNamespace,i,a,h.mapDefined(t,u),e,o);return n&&h.startOnNewLine(s),s}function d(e){return h.visitNode(e.expression,n,h.isExpression)}function p(e){n=e.name,t=h.idText(n);var t,n=/^[A-Za-z_]\w*$/.test(t)?n:h.createLiteral(t),o=void 0===(t=e.initializer)?h.createTrue():9===t.kind?(e=t.text,(e=(o=a(e))===e?void 0:o)?h.setTextRange(h.createLiteral(e),t):t):256===t.kind?void 0===t.expression?h.createTrue():g(t):void h.Debug.failBadSyntaxKind(t);return h.createPropertyAssignment(n,o)}function s(e,t){t=a(t);return void 0===e?t:e+" "+t}function a(e){return e.replace(/&((#((\d+)|x([\da-fA-F]+)))|(\w+));/g,function(e,t,n,o,r,i,s){return r?String.fromCharCode(parseInt(r,10)):i?String.fromCharCode(parseInt(i,16)):(r=_.get(s))?String.fromCharCode(r):e})}function g(e){return h.visitNode(e.expression,n,h.isExpression)}};var _=h.createMapFromTemplate({quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830})}(ts=ts||{}),function(d){d.transformES2016=function(l){var c=l.hoistVariableDeclaration;return function(e){return e.isDeclarationFile?e:d.visitEachChild(e,u,l)};function u(e){if(0==(32&e.transformFlags))return e;if(194!==e.kind)return d.visitEachChild(e,u,l);var t,n,o,r,i,s,a=e;switch(a.operatorToken.kind){case 62:return t=a,i=d.visitNode(t.left,u,d.isExpression),s=d.visitNode(t.right,u,d.isExpression),r=d.isElementAccessExpression(i)?(n=d.createTempVariable(c),r=d.createTempVariable(c),o=d.setTextRange(d.createElementAccess(d.setTextRange(d.createAssignment(n,i.expression),i.expression),d.setTextRange(d.createAssignment(r,i.argumentExpression),i.argumentExpression)),i),d.setTextRange(d.createElementAccess(n,r),i)):d.isPropertyAccessExpression(i)?(n=d.createTempVariable(c),o=d.setTextRange(d.createPropertyAccess(d.setTextRange(d.createAssignment(n,i.expression),i.expression),i.name),i),d.setTextRange(d.createPropertyAccess(n,i.name),i)):o=i,d.setTextRange(d.createAssignment(o,d.createMathPow(r,s,t)),t);case 40:return n=a,i=d.visitNode(n.left,u,d.isExpression),o=d.visitNode(n.right,u,d.isExpression),d.createMathPow(i,o,n);default:return d.visitEachChild(a,u,l)}}}}(ts=ts||{}),function(kt){(e={None:0,0:"None",Function:1,1:"Function",ArrowFunction:2,2:"ArrowFunction",AsyncFunctionBody:4,4:"AsyncFunctionBody",NonStaticClassElement:8,8:"NonStaticClassElement",CapturesThis:16,16:"CapturesThis",ExportedVariableStatement:32,32:"ExportedVariableStatement",TopLevel:64,64:"TopLevel",Block:128,128:"Block",IterationStatement:256,256:"IterationStatement",IterationStatementBlock:512,512:"IterationStatementBlock",ForStatement:1024,1024:"ForStatement",ForInOrForOfStatement:2048,2048:"ForInOrForOfStatement",ConstructorWithCapturedSuper:4096,4096:"ConstructorWithCapturedSuper",ComputedPropertyName:8192,8192:"ComputedPropertyName",AncestorFactsMask:16383,16383:"AncestorFactsMask",BlockScopeIncludes:0})[0]="BlockScopeIncludes",e[e.BlockScopeExcludes=4032]="BlockScopeExcludes",e[e.SourceFileIncludes=64]="SourceFileIncludes",e[e.SourceFileExcludes=3968]="SourceFileExcludes",e[e.FunctionIncludes=65]="FunctionIncludes",e[e.FunctionExcludes=16286]="FunctionExcludes",e[e.AsyncFunctionBodyIncludes=69]="AsyncFunctionBodyIncludes",e[e.AsyncFunctionBodyExcludes=16278]="AsyncFunctionBodyExcludes",e[e.ArrowFunctionIncludes=66]="ArrowFunctionIncludes",e[e.ArrowFunctionExcludes=16256]="ArrowFunctionExcludes",e[e.ConstructorIncludes=73]="ConstructorIncludes",e[e.ConstructorExcludes=16278]="ConstructorExcludes",e[e.DoOrWhileStatementIncludes=256]="DoOrWhileStatementIncludes",e[e.DoOrWhileStatementExcludes=0]="DoOrWhileStatementExcludes",e[e.ForStatementIncludes=1280]="ForStatementIncludes",e[e.ForStatementExcludes=3008]="ForStatementExcludes",e[e.ForInOrForOfStatementIncludes=2304]="ForInOrForOfStatementIncludes",e[e.ForInOrForOfStatementExcludes=1984]="ForInOrForOfStatementExcludes",e[e.BlockIncludes=128]="BlockIncludes",e[e.BlockExcludes=3904]="BlockExcludes",e[e.IterationStatementBlockIncludes=512]="IterationStatementBlockIncludes",e[e.IterationStatementBlockExcludes=4032]="IterationStatementBlockExcludes",e[e.ComputedPropertyNameIncludes=8192]="ComputedPropertyNameIncludes",e[e.ComputedPropertyNameExcludes=0]="ComputedPropertyNameExcludes",e[e.NewTarget=16384]="NewTarget",e[e.NewTargetInComputedPropertyName=32768]="NewTargetInComputedPropertyName",e[e.SubtreeFactsMask=-16384]="SubtreeFactsMask",e[e.PropagateNewTargetMask=49152]="PropagateNewTargetMask";var e,G={name:"typescript:extends",scoped:!(kt.transformES2015=function(Pe){var Le,N,Me,Fe,Ue,s,w=Pe.startLexicalEnvironment,O=Pe.resumeLexicalEnvironment,R=Pe.endLexicalEnvironment,He=Pe.hoistVariableDeclaration,a=Pe.getCompilerOptions(),Ve=Pe.getEmitResolver(),l=Pe.onSubstituteNode,r=Pe.onEmitNode;return Pe.onEmitNode=function(e,t,n){var o;1&s&&kt.isFunctionLike(t)?(o=We(16286,8&kt.getEmitFlags(t)?81:65),r(e,t,n),Ge(o,0,0)):r(e,t,n)},Pe.onSubstituteNode=function(e,t){if(t=l(e,t),1===e){var n=t;switch(n.kind){case 71:var o=n;if(2&s&&!kt.isInternalName(o)){var r=Ve.getReferencedDeclarationWithCollidingName(o);if(r&&(!kt.isClassLike(r)||!function(e){var t=kt.getParseTreeNode(o);if(!(!t||t===e||t.end<=e.pos||t.pos>=e.end))for(var n=kt.getEnclosingBlockScopeContainer(e);t;){if(t===n||t===e)return;if(kt.isClassElement(t)&&t.parent===e)return 1;t=t.parent}}(r)))return kt.setTextRange(kt.getGeneratedNameForNode(kt.getNameOfDeclaration(r)),o)}return o;case 99:return r=n,1&s&&16&Me?kt.setTextRange(kt.createIdentifier("_this"),r):r}return n}if(kt.isIdentifier(t)){e=t;if(2&s&&!kt.isInternalName(e)){var i=kt.getParseTreeNode(e,kt.isIdentifier);if(i&&function(e){var t=e.parent;switch(t.kind){case 176:case 229:case 232:case 226:return t.name===e&&Ve.isDeclarationWithCollidingName(t)}}(i))return kt.setTextRange(kt.getGeneratedNameForNode(i),e)}return e}return t},function(e){if(e.isDeclarationFile)return e;N=(Le=e).text;e=e,t=We(3968,64),n=[],w(),o=kt.addStandardPrologue(n,e.statements,!1),L(n,e),o=kt.addCustomPrologue(n,e.statements,o,je),kt.addRange(n,kt.visitNodes(e.statements,je,kt.isStatement,o)),Fe&&n.push(kt.createVariableStatement(void 0,kt.createVariableDeclarationList(Fe))),kt.addRange(n,R()),Ge(t,0,0);var t,n,o=kt.updateSourceFileNode(e,kt.setTextRange(kt.createNodeArray(n),e.statements));return kt.addEmitHelpers(o,Pe.readEmitHelpers()),Fe=N=Le=void 0,Me=0,o};function We(e,t){var n=Me;return Me=16383&(Me&~e|t),n}function Ge(e,t,n){Me=-16384&(Me&~t|n)|e}function Ke(e){return 4096&Me&&219===e.kind&&!e.expression}function rt(e){return 0!=(128&e.transformFlags)||void 0!==Ue||4096&Me&&(kt.isStatement(e)||207===e.kind)||kt.isIterationStatement(e,!1)&&S(e)||0!=(33554432&kt.getEmitFlags(e))}function je(L){if(!rt(L))return L;var M,F,e,U,H,t,n,o,r,i,V,W,s,a,l,G,c,u,K,j,d,p,g,h,_,m=L;switch(m.kind){case 115:return;case 229:return p=m,g=kt.createVariableDeclaration(kt.getLocalName(p,!0),void 0,st(p)),kt.setOriginalNode(g,p),h=[],g=kt.createVariableStatement(void 0,kt.createVariableDeclarationList([g])),kt.setOriginalNode(g,p),kt.setTextRange(g,p),kt.startOnNewLine(g),h.push(g),kt.hasModifier(p,1)&&(_=kt.hasModifier(p,512)?kt.createExportDefault(kt.getLocalName(p)):kt.createExternalModuleExport(kt.getLocalName(p)),kt.setOriginalNode(_,g),h.push(_)),0==(4194304&(_=kt.getEmitFlags(p)))&&(h.push(kt.createEndOfDeclarationMarker(p)),kt.setEmitFlags(g,4194304|_)),kt.singleOrMany(h);case 199:return st(m);case 146:return(p=m).dotDotDotToken?void 0:kt.isBindingPattern(p.name)?kt.setOriginalNode(kt.setTextRange(kt.createParameter(void 0,void 0,void 0,kt.getGeneratedNameForNode(p),void 0,void 0,void 0),p),p):p.initializer?kt.setOriginalNode(kt.setTextRange(kt.createParameter(void 0,void 0,void 0,p.name,void 0,void 0,void 0),p),p):p;case 228:return g=m,_=Ue,Ue=void 0,h=We(16286,65),K=kt.visitParameterList(g.parameters,je,Pe),j=(64&g.transformFlags?$e:lt)(g),d=16384&Me?kt.getLocalName(g):g.name,Ge(h,49152,0),Ue=_,kt.updateFunctionDeclaration(g,void 0,kt.visitNodes(g.modifiers,je,kt.isModifier),g.asteriskToken,d,void 0,K,void 0,j);case 187:return 16384&(d=m).transformFlags&&ot(),K=Ue,Ue=void 0,j=We(16256,66),u=kt.createFunctionExpression(void 0,void 0,void 0,void 0,kt.visitParameterList(d.parameters,je,Pe),void 0,$e(d)),kt.setTextRange(u,d),kt.setOriginalNode(u,d),kt.setEmitFlags(u,8),Ge(j,0,0),Ue=K,u;case 186:return u=m,s=262144&kt.getEmitFlags(u)?We(16278,69):We(16286,65),a=Ue,Ue=void 0,l=kt.visitParameterList(u.parameters,je,Pe),G=(64&u.transformFlags?$e:lt)(u),c=16384&Me?kt.getLocalName(u):u.name,Ge(s,49152,0),Ue=a,kt.updateFunctionExpression(u,void 0,u.asteriskToken,c,void 0,l,void 0,G);case 226:return Je(m);case 71:return s=m,Ue&&!kt.isGeneratedIdentifier(s)&&"arguments"===s.escapedText&&Ve.isArgumentsLocalBinding(s)?Ue.argumentsName||(Ue.argumentsName=kt.createUniqueName("arguments")):s;case 227:return 64&(a=m).transformFlags?(3&a.flags&&nt(),c=kt.flatMap(a.declarations,1&a.flags?ut:Je),l=kt.createVariableDeclarationList(c),kt.setOriginalNode(l,a),kt.setTextRange(l,a),kt.setCommentRange(l,a),8388608&a.transformFlags&&(kt.isBindingPattern(a.declarations[0].name)||kt.isBindingPattern(kt.lastOrUndefined(a.declarations).name))&&(G=kt.firstOrUndefined(c))&&(c=kt.lastOrUndefined(c),kt.setSourceMapRange(l,kt.createRange(G.pos,c.end))),l):kt.visitEachChild(a,je,Pe);case 221:return i=m,void 0!==Ue?(V=Ue.allowedNonLabeledJumps,Ue.allowedNonLabeledJumps|=2,W=kt.visitEachChild(i,je,Pe),Ue.allowedNonLabeledJumps=V,W):kt.visitEachChild(i,je,Pe);case 235:return V=We(4032,0),W=kt.visitEachChild(m,je,Pe),Ge(V,0,0),W;case 207:return ct(m,!1);case 218:case 217:i=m;if(Ue){var f=218===i.kind?2:4;if(!(i.label&&Ue.labels&&Ue.labels.get(kt.idText(i.label))||!i.label&&Ue.allowedNonLabeledJumps&f)){f=void 0,f=(i.label?218===i.kind?(f="break-"+i.label.escapedText,Ze(Ue,!0,kt.idText(i.label),f)):(f="continue-"+i.label.escapedText,Ze(Ue,!1,kt.idText(i.label),f)):f=218===i.kind?(Ue.nonLocalJumps|=2,"break"):(Ue.nonLocalJumps|=4,"continue"),kt.createLiteral(f));if(Ue.loopOutParameters.length){for(var z=Ue.loopOutParameters,X=void 0,$=0;$<z.length;$++)var Y=mt(z[$],1),X=0===$?Y:kt.createBinary(X,26,Y);f=kt.createBinary(X,26,f)}return kt.createReturn(f)}}return kt.visitEachChild(i,je,Pe);case 222:var f=m,y=(Ue&&!Ue.labels&&(Ue.labels=kt.createMap()),kt.unwrapInnermostStatementOfLabel(f,Ue&&dt));if(!kt.isIterationStatement(y,!1))return kt.restoreEnclosingLabel(kt.visitNode(y,je,kt.isStatement),f,Ue&&Qe);var q=y,J=f;switch(q.kind){case 212:case 213:return pt(q,J);case 214:return gt(q,J);case 215:return ht(q,J);case 216:return _t(q,J)}return;case 212:case 213:return pt(m,void 0);case 214:return gt(m,void 0);case 215:return ht(m,void 0);case 216:return _t(m,void 0);case 210:var k=m;switch(k.expression.kind){case 185:return kt.updateStatement(k,Ye(k.expression,!1));case 194:return kt.updateStatement(k,qe(k.expression,!1))}return kt.visitEachChild(k,je,Pe);case 178:for(var y=m,Q=y.properties,Z=Q.length,b=Z,ee=Z,te=0;te<Z;te++){var ne=Q[te];if(16777216&ne.transformFlags&&4&Me&&te<ee&&(ee=te),144===ne.name.kind){b=te;break}}if(b===Z)return kt.visitEachChild(y,je,Pe);ee<b&&(b=ee);for(var oe,re,ie,se,ae=kt.createTempVariable(He),v=[],T=kt.createAssignment(ae,kt.setEmitFlags(kt.createObjectLiteral(kt.visitNodes(Q,je,kt.isObjectLiteralElementLike,0,b),y.multiLine),65536)),le=(y.multiLine&&(T.startsOnNewLine=!0),v.push(T),v),E=y,ce=ae,T=b,ue=E.properties,de=ue.length,pe=T;pe<de;pe++){var ge=ue[pe];switch(ge.kind){case 153:case 154:var S=kt.getAllAccessorDeclarations(E.properties,ge);ge===S.firstAccessor&&le.push(at(ce,S,E,E.multiLine));break;case 151:le.push((S=ge,oe=ce,ie=(re=E).multiLine,se=void 0,se=We(0,0),oe=kt.createAssignment(kt.createMemberAccessForPropertyName(oe,kt.visitNode(S.name,je,kt.isPropertyName)),Xe(S,S,void 0,re)),kt.setTextRange(oe,S),ie&&(oe.startsOnNewLine=!0),Ge(se,49152,49152&Me?16384:0),oe));break;case 261:le.push(function(e,t,n){t=kt.createAssignment(kt.createMemberAccessForPropertyName(t,kt.visitNode(e.name,je,kt.isPropertyName)),kt.visitNode(e.initializer,je,kt.isExpression));return kt.setTextRange(t,e),n&&(t.startsOnNewLine=!0),t}(ge,ce,E.multiLine));break;case 262:le.push(function(e,t,n){t=kt.createAssignment(kt.createMemberAccessForPropertyName(t,kt.visitNode(e.name,je,kt.isPropertyName)),kt.getSynthesizedClone(e.name));return kt.setTextRange(t,e),n&&(t.startsOnNewLine=!0),t}(ge,ce,E.multiLine));break;default:kt.Debug.failBadSyntaxKind(E)}}return v.push(y.multiLine?kt.startOnNewLine(kt.getMutableClone(ae)):ae),kt.inlineExpressions(v);case 260:return T=m,ae=We(4032,0),kt.Debug.assert(!!T.variableDeclaration,"Catch clause variable should always be present when downleveling ES2015."),o=kt.isBindingPattern(T.variableDeclaration.name)?(v=kt.createTempVariable(void 0),o=kt.createVariableDeclaration(v),kt.setTextRange(o,T.variableDeclaration),v=kt.flattenDestructuringBinding(T.variableDeclaration,je,Pe,0,v),v=kt.createVariableDeclarationList(v),kt.setTextRange(v,T.variableDeclaration),v=kt.createVariableStatement(void 0,v),kt.updateCatchClause(T,o,(o=T.block,v=v,r=kt.visitNodes(o.statements,je,kt.isStatement),kt.updateBlock(o,[v].concat(r))))):kt.visitEachChild(T,je,Pe),Ge(ae,0,0),o;case 262:return r=m,kt.setTextRange(kt.createPropertyAssignment(r.name,kt.getSynthesizedClone(r.name)),r);case 144:return o=We(0,8192),n=kt.visitEachChild(m,je,Pe),Ge(o,49152,49152&Me?32768:0),n;case 177:return 64&(n=m).transformFlags?et(n.elements,!0,n.multiLine,n.elements.hasTrailingComma):kt.visitEachChild(n,je,Pe);case 181:var C=m;if(33554432&kt.getEmitFlags(C)){var he=C,_e=kt.cast(kt.cast(kt.skipOuterExpressions(he.expression),kt.isArrowFunction).body,kt.isBlock),me=kt.visitNodes(_e.statements,je,kt.isStatement,0,1),_e=kt.visitNodes(_e.statements,je,kt.isStatement,1,_e.statements.length-1),x=kt.cast(kt.firstOrUndefined(me),kt.isVariableStatement).declarationList.declarations[0],B=kt.skipOuterExpressions(x.initializer),A=kt.tryCast(B,kt.isAssignmentExpression),B=kt.cast(A?kt.skipOuterExpressions(A.right):B,kt.isCallExpression),fe=kt.cast(kt.skipOuterExpressions(B.expression),kt.isFunctionExpression),ye=fe.body.statements,I=0,ke=-1,D=[];for(A&&((t=kt.tryCast(ye[I],kt.isExpressionStatement))&&(D.push(t),I++),D.push(ye[I]),I++,D.push(kt.createStatement(kt.createAssignment(A.left,kt.cast(x.name,kt.isIdentifier)))));!kt.isReturnStatement(kt.elementAt(ye,ke));)ke--;return kt.addRange(D,ye,I,ke),ke<-1&&kt.addRange(D,ye,ke+1),kt.addRange(D,_e),kt.addRange(D,me,1),kt.recreateOuterExpressions(he.expression,kt.recreateOuterExpressions(x.initializer,kt.recreateOuterExpressions(A&&A.right,kt.updateCall(B,kt.recreateOuterExpressions(B.expression,kt.updateFunctionExpression(fe,void 0,void 0,void 0,void 0,fe.parameters,void 0,kt.updateBlock(fe.body,D))),void 0,B.arguments))))}return 64&C.transformFlags?ft(C,!0):kt.updateCall(C,kt.visitNode(C.expression,ze,kt.isExpression),void 0,kt.visitNodes(C.arguments,je,kt.isExpression));case 182:return 524288&(t=m).transformFlags?(_e=(I=kt.createCallBinding(kt.createPropertyAccess(t.expression,"bind"),He)).target,I=I.thisArg,kt.createNew(kt.createFunctionApply(kt.visitNode(_e,je,kt.isExpression),I,et(kt.createNodeArray([kt.createVoidZero()].concat(t.arguments)),!1,!1,!1)),void 0,[])):kt.visitEachChild(t,je,Pe);case 185:return Ye(m,!0);case 194:return qe(m,!0);case 13:case 14:case 15:case 16:return me=m,kt.setTextRange(kt.createLiteral(me.text),me);case 9:return(he=m).hasExtendedUnicodeEscape?kt.setTextRange(kt.createLiteral(he.text),he):he;case 8:return 48&(x=m).numericLiteralFlags?kt.setTextRange(kt.createNumericLiteral(x.text),x):x;case 183:var A=m,fe=kt.visitNode(A.tag,je,kt.isExpression),be=[void 0],ve=[],Te=[],A=A.template;if(kt.isNoSubstitutionTemplateLiteral(A))ve.push(kt.createLiteral(A.text)),Te.push(tt(A));else{ve.push(kt.createLiteral(A.head.text)),Te.push(tt(A.head));for(var Ee=0,Se=A.templateSpans;Ee<Se.length;Ee++){var Ce=Se[Ee];ve.push(kt.createLiteral(Ce.literal.text)),Te.push(tt(Ce.literal)),be.push(kt.visitNode(Ce.expression,je,kt.isExpression))}}A=Pe,D=kt.createArrayLiteral(ve),B=kt.createArrayLiteral(Te),A.requestEmitHelper(bt);A=kt.createCall(kt.getHelperName("__makeTemplateObject"),void 0,[D,B]);return kt.isExternalModule(Le)?(D=kt.createUniqueName("templateObject"),Fe=kt.append(Fe,kt.createVariableDeclaration(D)),be[0]=kt.createLogicalOr(D,kt.createAssignment(D,A))):be[0]=A,kt.createCall(fe,void 0,be);case 196:for(var C=m,N=[],xe=(H=N,w=U=C,kt.Debug.assert(0!==w.templateSpans.length),0===w.head.text.length&&0!==w.templateSpans[0].literal.text.length||H.push(kt.createLiteral(U.head.text)),N),Be=0,Ae=C.templateSpans;Be<Ae.length;Be++){var Ie=Ae[Be];xe.push(kt.visitNode(Ie.expression,je,kt.isExpression)),0!==Ie.literal.text.length&&xe.push(kt.createLiteral(Ie.literal.text))}var w=kt.reduceLeft(N,kt.createAdd);return kt.nodeIsSynthesized(w)&&(w.pos=C.pos,w.end=C.end),w;case 197:return kt.visitEachChild(m,je,Pe);case 198:return kt.visitNode(m.expression,je,kt.isExpression);case 97:return yt(!1);case 99:return H=m,Ue?2&Me?(Ue.containsLexicalThis=!0,H):Ue.thisName||(Ue.thisName=kt.createUniqueName("this")):H;case 204:return 94===(U=m).keywordToken&&"target"===U.name.escapedText?(Me|=8192&Me?32768:16384,kt.createIdentifier("_newTarget")):U;case 151:return N=m,kt.Debug.assert(!kt.isComputedPropertyName(N.name)),w=Xe(N,kt.moveRangePos(N,-1),void 0,void 0),kt.setEmitFlags(w,512|kt.getEmitFlags(w)),kt.setTextRange(kt.createPropertyAssignment(N.name,w),N);case 153:case 154:return R=m,kt.Debug.assert(!kt.isComputedPropertyName(R.name)),M=Ue,Ue=void 0,e=We(16286,65),F=32768&R.transformFlags?(F=kt.visitParameterList(R.parameters,je,Pe),O=$e(R),153===R.kind?kt.updateGetAccessor(R,R.decorators,R.modifiers,R.name,F,R.type,O):kt.updateSetAccessor(R,R.decorators,R.modifiers,R.name,F,O)):kt.visitEachChild(R,je,Pe),Ge(e,49152,0),Ue=M,F;case 208:var De,O=m,R=We(0,kt.hasModifier(O,1)?32:0);if(Ue&&0==(3&O.declarationList.flags)){for(var Ne=void 0,we=0,Oe=O.declarationList.declarations;we<Oe.length;we++){var Re,P=Oe[we];(function(i,e){i.hoistedLocalVariables||(i.hoistedLocalVariables=[]),function e(t){if(71===t.kind)i.hoistedLocalVariables.push(t);else for(var n=0,o=t.elements;n<o.length;n++){var r=o[n];kt.isOmittedExpression(r)||e(r.name)}}(e.name)})(Ue,P),P.initializer&&(Re=void 0,kt.isBindingPattern(P.name)?Re=kt.flattenDestructuringAssignment(P,je,Pe,0):(Re=kt.createBinary(P.name,58,kt.visitNode(P.initializer,je,kt.isExpression)),kt.setTextRange(Re,P)),Ne=kt.append(Ne,Re))}De=Ne?kt.setTextRange(kt.createStatement(kt.inlineExpressions(Ne)),O):void 0}else De=kt.visitEachChild(O,je,Pe);return Ge(R,0,0),De;case 219:return e=m,Ue?(Ue.nonLocalJumps|=8,Ke(e)&&(e=it(e)),kt.createReturn(kt.createObjectLiteral([kt.createPropertyAssignment(kt.createIdentifier("value"),e.expression?kt.visitNode(e.expression,je,kt.isExpression):kt.createVoidZero())]))):Ke(e)?it(e):kt.visitEachChild(e,je,Pe);default:return kt.visitEachChild(m,je,Pe)}}function o(e){return rt(e)?ct(e,!0):e}function ze(e){return 97===e.kind?yt(!0):je(e)}function it(e){return kt.setOriginalNode(kt.createReturn(kt.createIdentifier("_this")),e)}function st(e){e.name&&nt();var t=kt.getClassExtendsHeritageClauseElement(e),n=kt.createFunctionExpression(void 0,void 0,void 0,void 0,t?[kt.createParameter(void 0,void 0,void 0,"_super")]:[],void 0,function(e,t){for(var n,o,r,i,s,a,l,c,u,d,p,g,h,_,m,f,y,k=[],b=(w(),(d=t)&&k.push(kt.setTextRange(kt.createStatement((p=Pe,g=kt.getLocalName(e),p.requestEmitHelper(G),kt.createCall(kt.getHelperName("__extends"),void 0,[g,kt.createIdentifier("_super")]))),d)),p=k,g=e,d=t,t=Ue,Ue=void 0,a=We(16278,73),l=kt.getFirstConstructorWithBody(g),c=!(!(s=l)||void 0===d)&&!kt.some(s.parameters)&&!(!(s=kt.firstOrUndefined(s.body.statements))||!kt.nodeIsSynthesized(s)||210!==s.kind)&&(s=s.expression,!(!kt.nodeIsSynthesized(s)||181!==s.kind))&&(c=s.expression,!(!kt.nodeIsSynthesized(c)||97!==c.kind))&&!(!(c=kt.singleOrUndefined(s.arguments))||!kt.nodeIsSynthesized(c)||198!==c.kind)&&(s=c.expression,kt.isIdentifier(s))&&"arguments"===s.escapedText,u=kt.createFunctionDeclaration(void 0,void 0,void 0,kt.getInternalName(g),void 0,kt.visitParameterList(l&&!c&&l.parameters,je,Pe)||[],void 0,(s=l,n=g,I=d,D=c,r=[],O(),A=-1,D?A=0:s&&(A=kt.addStandardPrologue(r,s.body.statements,!1)),s&&(H(r,s),V(r,s,D),D||(A=kt.addCustomPrologue(r,s.body.statements,A,je)),kt.Debug.assert(0<=A,"statementOffset not initialized correctly!")),I=I&&95!==kt.skipOuterExpressions(I.expression).kind,x=r,B=s,u=A,1!=(D=I?B?D?(M(x,B,U()),ot(),1):!(i=u<(D=B.body.statements).length&&210===(o=D[u]).kind&&kt.isSuperCall(o.expression)?ft(o.expression,!1):i)||u!==D.length-1||49152&B.transformFlags?(M(x,B,i||P(),o),i?1:0):(u=kt.createReturn(i),194===i.kind&&181===i.left.kind||kt.Debug.fail("Assumed generated super call would have form 'super.call(...) || this'."),kt.setCommentRange(u,kt.getCommentRange(kt.setEmitFlags(i.left,1536))),x.push(u),2):(x.push(kt.createReturn(U())),2):(B&&L(x,B),0))&&2!=D||A++,s&&(1==D&&(Me|=4096),kt.addRange(r,kt.visitNodes(s.body.statements,je,kt.isStatement,A))),!I||2==D||s&&function e(t){if(219===t.kind)return!0;if(211===t.kind){var n=t;if(n.elseStatement)return e(n.thenStatement)&&e(n.elseStatement)}else if(207===t.kind){n=kt.lastOrUndefined(t.statements);if(n&&e(n))return!0}return!1}(s.body)||r.push(kt.createReturn(kt.createIdentifier("_this"))),kt.addRange(r,R()),s&&F(r,s,!1),i=kt.createBlock(kt.setTextRange(kt.createNodeArray(r),s?s.body.statements:n.members),!0),kt.setTextRange(i,s?s.body:n),s||kt.setEmitFlags(i,1536),i)),kt.setTextRange(u,l||g),d&&kt.setEmitFlags(u,8),p.push(u),Ge(a,49152,0),Ue=t,k),v=e,T=0,E=v.members;T<E.length;T++){var S=E[T];switch(S.kind){case 206:b.push((y=S,kt.setTextRange(kt.createEmptyStatement(),y)));break;case 151:b.push((y=W(v,S),h=S,C=v,m=_=void 0,f=void 0,_=We(0,0),m=kt.getCommentRange(h),f=kt.getSourceMapRange(h),y=kt.createMemberAccessForPropertyName(y,kt.visitNode(h.name,je,kt.isPropertyName),h.name),C=Xe(h,h,void 0,C),kt.setEmitFlags(C,1536),kt.setSourceMapRange(C,f),f=kt.setTextRange(kt.createStatement(kt.createAssignment(y,C)),h),kt.setOriginalNode(f,h),kt.setCommentRange(f,m),kt.setEmitFlags(f,48),Ge(_,49152,49152&Me?16384:0),f));break;case 153:case 154:var C=kt.getAllAccessorDeclarations(v.members,S);S===C.firstAccessor&&b.push(function(e,t,n){e=kt.createStatement(at(e,t,n,!1));return kt.setEmitFlags(e,1536),kt.setSourceMapRange(e,kt.getSourceMapRange(t.firstAccessor)),e}(W(v,S),C,v));break;case 152:break;default:kt.Debug.failBadSyntaxKind(v)}}var x=kt.createTokenRange(kt.skipTrivia(N,e.members.end),18),B=kt.getInternalName(e),A=kt.createPartiallyEmittedExpression(B),I=(A.end=x.end,kt.setEmitFlags(A,1536),kt.createReturn(A)),D=(I.pos=x.pos,kt.setEmitFlags(I,1920),k.push(I),kt.addRange(k,R()),kt.createBlock(kt.setTextRange(kt.createNodeArray(k),e.members),!0));return kt.setEmitFlags(D,1536),D}(e,t)),n=(65536&kt.getEmitFlags(e)&&kt.setEmitFlags(n,65536),kt.createPartiallyEmittedExpression(n)),n=(n.end=e.end,kt.setEmitFlags(n,1536),kt.createPartiallyEmittedExpression(n)),e=(n.end=kt.skipTrivia(N,e.pos),kt.setEmitFlags(n,1536),kt.createParen(kt.createCall(n,void 0,t?[kt.visitNode(t.expression,je,kt.isExpression)]:[])));return kt.addSyntheticLeadingComment(e,3,"* @class "),e}function P(){return kt.setEmitFlags(kt.createThis(),4)}function U(){return kt.createLogicalOr(kt.createLogicalAnd(kt.createStrictInequality(kt.createIdentifier("_super"),kt.createNull()),kt.createFunctionApply(kt.createIdentifier("_super"),P(),kt.createIdentifier("arguments"))),P())}function H(e,t){if(0!=(131072&t.transformFlags))for(var n=0,o=t.parameters;n<o.length;n++){var r=o[n],i=r.name,s=r.initializer;if(!r.dotDotDotToken)if(kt.isBindingPattern(i))a=e,l=r,c=i,u=s,d=void 0,d=kt.getGeneratedNameForNode(l),0<c.elements.length?a.push(kt.setEmitFlags(kt.createVariableStatement(void 0,kt.createVariableDeclarationList(kt.flattenDestructuringBinding(l,je,Pe,0,d))),1048576)):u&&a.push(kt.setEmitFlags(kt.createStatement(kt.createAssignment(d,kt.visitNode(u,je,kt.isExpression))),1048576));else if(s){c=void 0;l=void 0;a=void 0;d=void 0;c=e;l=r;a=i;d=s;d=kt.visitNode(d,je,kt.isExpression);a=kt.createIf(kt.createTypeCheck(kt.getSynthesizedClone(a),"undefined"),kt.setEmitFlags(kt.setTextRange(kt.createBlock([kt.createStatement(kt.setTextRange(kt.createAssignment(kt.setEmitFlags(kt.getMutableClone(a),48),kt.setEmitFlags(d,48|kt.getEmitFlags(d))),l))]),l),417));a.startsOnNewLine=!0,kt.setTextRange(a,l),kt.setEmitFlags(a,1048992),c.push(a)}}var a,l,c,u,d}function V(e,t,n){var o,r,i=kt.lastOrUndefined(t.parameters);i&&i.dotDotDotToken&&71===i.name.kind&&!n&&(n=kt.getMutableClone(i.name),kt.setEmitFlags(n,48),o=kt.getSynthesizedClone(i.name),t=t.parameters.length-1,r=kt.createLoopVariable(),e.push(kt.setEmitFlags(kt.setTextRange(kt.createVariableStatement(void 0,kt.createVariableDeclarationList([kt.createVariableDeclaration(n,void 0,kt.createArrayLiteral([]))])),i),1048576)),n=kt.createFor(kt.setTextRange(kt.createVariableDeclarationList([kt.createVariableDeclaration(r,void 0,kt.createLiteral(t))]),i),kt.setTextRange(kt.createLessThan(r,kt.createPropertyAccess(kt.createIdentifier("arguments"),"length")),i),kt.setTextRange(kt.createPostfixIncrement(r),i),kt.createBlock([kt.startOnNewLine(kt.setTextRange(kt.createStatement(kt.createAssignment(kt.createElementAccess(o,0==t?r:kt.createSubtract(r,kt.createLiteral(t))),kt.createElementAccess(kt.createIdentifier("arguments"),r))),i))])),kt.setEmitFlags(n,1048576),kt.startOnNewLine(n),e.push(n))}function L(e,t){32768&t.transformFlags&&187!==t.kind&&M(e,t,kt.createThis())}function M(e,t,n,o){ot();n=kt.createVariableStatement(void 0,kt.createVariableDeclarationList([kt.createVariableDeclaration("_this",void 0,n)]));kt.setEmitFlags(n,1050112),kt.setTextRange(n,o),kt.setSourceMapRange(n,t),e.push(n)}function F(e,t,n){if(16384&Me){var o=void 0;switch(t.kind){case 187:return e;case 151:case 153:case 154:o=kt.createVoidZero();break;case 152:o=kt.createPropertyAccess(kt.setEmitFlags(kt.createThis(),4),"constructor");break;case 228:case 186:o=kt.createConditional(kt.createLogicalAnd(kt.setEmitFlags(kt.createThis(),4),kt.createBinary(kt.setEmitFlags(kt.createThis(),4),93,kt.getLocalName(t))),kt.createPropertyAccess(kt.setEmitFlags(kt.createThis(),4),"constructor"),kt.createVoidZero());break;default:kt.Debug.failBadSyntaxKind(t)}var r=kt.createVariableStatement(void 0,kt.createVariableDeclarationList([kt.createVariableDeclaration("_newTarget",void 0,o)]));if(n)return[r].concat(e);e.unshift(r)}return e}function at(e,t,n,o){var r,i=t.firstAccessor,s=t.getAccessor,t=t.setAccessor,a=We(0,0),e=kt.getMutableClone(e),l=(kt.setEmitFlags(e,1568),kt.setSourceMapRange(e,i.name),kt.createExpressionForPropertyName(kt.visitNode(i.name,je,kt.isPropertyName))),i=(kt.setEmitFlags(l,1552),kt.setSourceMapRange(l,i.name),[]),n=(s&&(r=Xe(s,void 0,void 0,n),kt.setSourceMapRange(r,kt.getSourceMapRange(s)),kt.setEmitFlags(r,512),r=kt.createPropertyAssignment("get",r),kt.setCommentRange(r,kt.getCommentRange(s)),i.push(r)),t&&(s=Xe(t,void 0,void 0,n),kt.setSourceMapRange(s,kt.getSourceMapRange(t)),kt.setEmitFlags(s,512),r=kt.createPropertyAssignment("set",s),kt.setCommentRange(r,kt.getCommentRange(t)),i.push(r)),i.push(kt.createPropertyAssignment("enumerable",kt.createTrue()),kt.createPropertyAssignment("configurable",kt.createTrue())),kt.createCall(kt.createPropertyAccess(kt.createIdentifier("Object"),"defineProperty"),void 0,[e,l,kt.createObjectLiteral(i,!0)]));return o&&(n.startsOnNewLine=!0),Ge(a,49152,49152&Me?16384:0),n}function Xe(e,t,n,o){var r=Ue,o=(Ue=void 0,o&&kt.isClassLike(o)&&!kt.hasModifier(e,32)?We(16286,73):We(16286,65)),i=kt.visitParameterList(e.parameters,je,Pe),s=$e(e);return 16384&Me&&!n&&(228===e.kind||186===e.kind)&&(n=kt.getGeneratedNameForNode(e)),Ge(o,49152,0),Ue=r,kt.setOriginalNode(kt.setTextRange(kt.createFunctionExpression(void 0,e.asteriskToken,n,void 0,i,void 0,s),t),e)}function $e(e){var t,n,o=!1,r=!1,i=[],s=e.body,a=(O(),kt.isBlock(s)&&(a=kt.addStandardPrologue(i,s.statements,!1)),L(i,e),H(i,e),V(i,e,!1),!o&&0<i.length&&(o=!0),kt.isBlock(s)?(a=kt.addCustomPrologue(i,s.statements,a,je),n=s.statements,kt.addRange(i,kt.visitNodes(s.statements,je,kt.isStatement,a)),!o&&s.multiLine&&(o=!0)):(kt.Debug.assert(187===e.kind),n=kt.moveRangeEnd(s,-1),a=e.equalsGreaterThanToken,kt.nodeIsSynthesized(a)||kt.nodeIsSynthesized(s)||(kt.rangeEndIsOnSameLineAsRangeStart(a,s,Le)?r=!0:o=!0),a=kt.visitNode(s,je,kt.isExpression),a=kt.createReturn(a),kt.setTextRange(a,s),kt.setEmitFlags(a,1440),i.push(a),t=s),Pe.endLexicalEnvironment()),s=(kt.addRange(i,a),F(i,e,!1),!o&&a&&a.length&&(o=!0),kt.createBlock(kt.setTextRange(kt.createNodeArray(i),n),o));return kt.setTextRange(s,e.body),!o&&r&&kt.setEmitFlags(s,1),t&&kt.setTokenSourceMapRange(s,18,t),kt.setOriginalNode(s,e.body),s}function lt(e){var t=kt.visitFunctionBody(e.body,o,Pe);return kt.updateBlock(t,kt.setTextRange(kt.createNodeArray(F(t.statements,e,!0)),t.statements))}function ct(e,t){return t?kt.visitEachChild(e,je,Pe):(t=256&Me?We(4032,512):We(3904,128),e=kt.visitEachChild(e,je,Pe),Ge(t,0,0),e)}function Ye(e,t){if(!t)switch(e.expression.kind){case 185:return kt.updateParen(e,Ye(e.expression,!1));case 194:return kt.updateParen(e,qe(e.expression,!1))}return kt.visitEachChild(e,je,Pe)}function qe(e,t){return kt.isDestructuringAssignment(e)?kt.flattenDestructuringAssignment(e,je,Pe,0,t):kt.visitEachChild(e,je,Pe)}function ut(e){var t,n,o=e.name;return kt.isBindingPattern(o)?Je(e):e.initializer||(o=e,t=Ve.getNodeCheckFlags(o),n=131072&t,t&=262144,0!=(64&Me))||n&&t&&0!=(512&Me)||0!=(2048&Me)||Ve.isDeclarationWithCollidingName(o)&&(!t||n||0!=(3072&Me))?kt.visitEachChild(e,je,Pe):((o=kt.getMutableClone(e)).initializer=kt.createVoidZero(),o)}function Je(e){var t=We(32,0),e=kt.isBindingPattern(e.name)?kt.flattenDestructuringBinding(e,je,Pe,0,void 0,0!=(32&t)):kt.visitEachChild(e,je,Pe);return Ge(t,0,0),e}function dt(e){Ue.labels.set(kt.idText(e.label),!0)}function Qe(e){Ue.labels.set(kt.idText(e.label),!1)}function n(e,t,n,o,r){e=We(e,t),t=function(e,t,n){if(!S(e))return r=void 0,Ue&&(r=Ue.allowedNonLabeledJumps,Ue.allowedNonLabeledJumps=6),u=n?n(e,t,void 0):kt.restoreEnclosingLabel(kt.visitEachChild(e,je,Pe),t,Ue&&Qe),Ue&&(Ue.allowedNonLabeledJumps=r),u;var o,r=kt.createUniqueName("_loop");switch(e.kind){case 214:case 215:case 216:var i=e.initializer;i&&227===i.kind&&(o=i)}var s=[],a=[];if(o&&3&kt.getCombinedNodeFlags(o))for(var l=0,c=o.declarations;l<c.length;l++)!function e(t,n,o){var r=t.name;if(kt.isBindingPattern(r))for(var i=0,s=r.elements;i<s.length;i++){var a=s[i];kt.isOmittedExpression(a)||e(a,n,o)}else n.push(kt.createParameter(void 0,void 0,void 0,r)),2097152&Ve.getNodeCheckFlags(t)&&(t=kt.createUniqueName("out_"+kt.idText(r)),o.push({originalName:r,outParamName:t}))}(c[l],s,a);var u=Ue,d=(Ue={loopOutParameters:a},u&&(u.argumentsName&&(Ue.argumentsName=u.argumentsName),u.thisName&&(Ue.thisName=u.thisName),u.hoistedLocalVariables)&&(Ue.hoistedLocalVariables=u.hoistedLocalVariables),w(),kt.visitNode(e.statement,je,kt.isStatement,kt.liftToBlock)),p=R(),g=Ue,p=(Ue=u,(a.length||p)&&(h=kt.isBlock(d)?d.statements.slice():[d],a.length&&E(a,1,h),kt.addRange(h,p),d=kt.createBlock(h,!0)),kt.isBlock(d)?d.multiLine=!0:d=kt.createBlock([d],!0),0!=(16777216&e.statement.transformFlags)),h=p&&0!=(4&Me),_=0;g.containsLexicalThis&&(_|=8),h&&(_|=262144);h=[kt.createVariableStatement(void 0,kt.setEmitFlags(kt.createVariableDeclarationList([kt.createVariableDeclaration(r,void 0,kt.setEmitFlags(kt.createFunctionExpression(void 0,p?kt.createToken(39):void 0,void 0,void 0,s,void 0,d),_))]),2097152))];if(g.argumentsName&&(u?u.argumentsName=g.argumentsName:(m=m||[]).push(kt.createVariableDeclaration(g.argumentsName,void 0,kt.createIdentifier("arguments")))),g.thisName&&(u?u.thisName=g.thisName:(m=m||[]).push(kt.createVariableDeclaration(g.thisName,void 0,kt.createIdentifier("this")))),g.hoistedLocalVariables)if(u)u.hoistedLocalVariables=g.hoistedLocalVariables;else for(var m=m||[],f=0,y=g.hoistedLocalVariables;f<y.length;f++){var k=y[f];m.push(kt.createVariableDeclaration(k))}if(a.length){m=m||[];for(var b=0,v=a;b<v.length;b++)m.push(kt.createVariableDeclaration(v[b].outParamName))}m&&h.push(kt.createVariableStatement(void 0,kt.createVariableDeclarationList(m)));d=p,_=Ue,u=[],g=!(-5&(p=g).nonLocalJumps||p.labeledNonLocalBreaks||p.labeledNonLocalContinues),T=kt.createCall(r,void 0,kt.map(s,function(e){return e.name})),d=d?kt.createYield(kt.createToken(39),kt.setEmitFlags(T,8388608)):T,g?(u.push(kt.createStatement(d)),E(p.loopOutParameters,0,u)):(T=kt.createUniqueName("state"),g=kt.createVariableStatement(void 0,kt.createVariableDeclarationList([kt.createVariableDeclaration(T,void 0,d)])),u.push(g),E(p.loopOutParameters,0,u),8&p.nonLocalJumps&&(d=void 0,d=_?(_.nonLocalJumps|=8,kt.createReturn(T)):kt.createReturn(kt.createPropertyAccess(T,"value")),u.push(kt.createIf(kt.createBinary(kt.createTypeOf(T),34,kt.createLiteral("object")),d))),2&p.nonLocalJumps&&u.push(kt.createIf(kt.createBinary(T,34,kt.createLiteral("break")),kt.createBreak())),(p.labeledNonLocalBreaks||p.labeledNonLocalContinues)&&(C(p.labeledNonLocalBreaks,!0,T,_,g=[]),C(p.labeledNonLocalContinues,!1,T,_,g),u.push(kt.createSwitch(T,kt.createCaseBlock(g)))));var T,d=u,_=n?n(e,t,d):((p=kt.getMutableClone(e)).statement=void 0,(p=kt.visitEachChild(p,je,Pe)).statement=kt.createBlock(d,!0),p.transformFlags=0,kt.aggregateTransformFlags(p),kt.restoreEnclosingLabel(p,t,Ue&&Qe));return h.push(_),h}(n,o,r);return Ge(e,0,0),t}function pt(e,t){return n(0,256,e,t)}function gt(e,t){return n(3008,1280,e,t)}function ht(e,t){return n(1984,2304,e,t)}function _t(e,t){return n(1984,2304,e,t,a.downlevelIteration?c:i)}function u(e,t,n){var o,r,i,s,a,l,c=[];return kt.isVariableDeclarationList(e.initializer)?(3&e.initializer.flags&&nt(),(i=kt.firstOrUndefined(e.initializer.declarations))&&kt.isBindingPattern(i.name)?(l=kt.flattenDestructuringBinding(i,je,Pe,0,t),s=kt.setTextRange(kt.createVariableDeclarationList(l),e.initializer),kt.setOriginalNode(s,e.initializer),a=l[0],l=kt.lastOrUndefined(l),kt.setSourceMapRange(s,kt.createRange(a.pos,l.end)),c.push(kt.createVariableStatement(void 0,s))):c.push(kt.setTextRange(kt.createVariableStatement(void 0,kt.setOriginalNode(kt.setTextRange(kt.createVariableDeclarationList([kt.createVariableDeclaration(i?i.name:kt.createTempVariable(void 0),void 0,t)]),kt.moveRangePos(e.initializer,-1)),e.initializer)),kt.moveRangeEnd(e.initializer,-1)))):(a=kt.createAssignment(e.initializer,t),kt.isDestructuringAssignment(a)?(kt.aggregateTransformFlags(a),c.push(kt.createStatement(qe(a,!1)))):(a.end=e.initializer.end,c.push(kt.setTextRange(kt.createStatement(kt.visitNode(a,je,kt.isExpression)),kt.moveRangeEnd(e.initializer,-1))))),n?kt.addRange(c,n):(l=kt.visitNode(e.statement,je,kt.isStatement,kt.liftToBlock),kt.isBlock(l)?(kt.addRange(c,l.statements),r=(o=l).statements):c.push(l)),kt.setEmitFlags(kt.setTextRange(kt.createBlock(kt.setTextRange(kt.createNodeArray(c),r),!0),o),432)}function i(e,t,n){var o=kt.visitNode(e.expression,je,kt.isExpression),r=kt.createLoopVariable(),i=kt.isIdentifier(o)?kt.getGeneratedNameForNode(o):kt.createTempVariable(void 0),o=(kt.setEmitFlags(o,48|kt.getEmitFlags(o)),kt.setTextRange(kt.createFor(kt.setEmitFlags(kt.setTextRange(kt.createVariableDeclarationList([kt.setTextRange(kt.createVariableDeclaration(r,void 0,kt.createLiteral(0)),kt.moveRangePos(e.expression,-1)),kt.setTextRange(kt.createVariableDeclaration(i,void 0,o),e.expression)]),e.expression),2097152),kt.setTextRange(kt.createLessThan(r,kt.createPropertyAccess(i,"length")),e.expression),kt.setTextRange(kt.createPostfixIncrement(r),e.expression),u(e,kt.createElementAccess(i,r),n)),e));return kt.setEmitFlags(o,256),kt.setTextRange(o,e),kt.restoreEnclosingLabel(o,t,Ue&&Qe)}function c(e,t,n){var o=kt.visitNode(e.expression,je,kt.isExpression),r=kt.isIdentifier(o)?kt.getGeneratedNameForNode(o):kt.createTempVariable(void 0),i=kt.isIdentifier(o)?kt.getGeneratedNameForNode(r):kt.createTempVariable(void 0),s=kt.createUniqueName("e"),a=kt.getGeneratedNameForNode(s),l=kt.createTempVariable(void 0),o=kt.createValuesHelper(Pe,o,e.expression),c=kt.createCall(kt.createPropertyAccess(r,"next"),void 0,[]),o=(He(s),He(l),kt.setEmitFlags(kt.setTextRange(kt.createFor(kt.setEmitFlags(kt.setTextRange(kt.createVariableDeclarationList([kt.setTextRange(kt.createVariableDeclaration(r,void 0,o),e.expression),kt.createVariableDeclaration(i,void 0,c)]),e.expression),2097152),kt.createLogicalNot(kt.createPropertyAccess(i,"done")),kt.createAssignment(i,c),u(e,kt.createPropertyAccess(i,"value"),n)),e),256));return kt.createTry(kt.createBlock([kt.restoreEnclosingLabel(o,t,Ue&&Qe)]),kt.createCatchClause(kt.createVariableDeclaration(a),kt.setEmitFlags(kt.createBlock([kt.createStatement(kt.createAssignment(s,kt.createObjectLiteral([kt.createPropertyAssignment("error",a)])))]),1)),kt.createBlock([kt.createTry(kt.createBlock([kt.setEmitFlags(kt.createIf(kt.createLogicalAnd(kt.createLogicalAnd(i,kt.createLogicalNot(kt.createPropertyAccess(i,"done"))),kt.createAssignment(l,kt.createPropertyAccess(r,"return"))),kt.createStatement(kt.createFunctionCall(l,r,[]))),1)]),void 0,kt.setEmitFlags(kt.createBlock([kt.setEmitFlags(kt.createIf(s,kt.createThrow(kt.createPropertyAccess(s,"error"))),1)]),1))]))}function S(e){return 0!=(65536&Ve.getNodeCheckFlags(e))}function mt(e,t){var n=0===t?e.outParamName:e.originalName,t=0===t?e.originalName:e.outParamName;return kt.createBinary(t,58,n)}function E(e,t,n){for(var o=0,r=e;o<r.length;o++){var i=r[o];n.push(kt.createStatement(mt(i,t)))}}function Ze(e,t,n,o){(t?(e.labeledNonLocalBreaks||(e.labeledNonLocalBreaks=kt.createMap()),e.labeledNonLocalBreaks):(e.labeledNonLocalContinues||(e.labeledNonLocalContinues=kt.createMap()),e.labeledNonLocalContinues)).set(n,o)}function C(e,r,i,s,a){e&&e.forEach(function(e,t){var n,o=[];!s||s.labels&&s.labels.get(t)?(n=kt.createIdentifier(t),o.push(r?kt.createBreak(n):kt.createContinue(n))):(Ze(s,r,t,e),o.push(kt.createReturn(i))),a.push(kt.createCaseClause(kt.createLiteral(e),o))})}function ft(e,t){var n=kt.createCallBinding(e.expression,He),o=n.target,n=n.thisArg;return 97===e.expression.kind&&kt.setEmitFlags(n,4),o=524288&e.transformFlags?kt.createFunctionApply(kt.visitNode(o,ze,kt.isExpression),kt.visitNode(n,je,kt.isExpression),et(e.arguments,!1,!1,!1)):kt.createFunctionCall(kt.visitNode(o,ze,kt.isExpression),kt.visitNode(n,je,kt.isExpression),kt.visitNodes(e.arguments,je,kt.isExpression),e),97===e.expression.kind&&(n=kt.createThis(),kt.setEmitFlags(n,4),n=kt.createLogicalOr(o,n),o=t?kt.createAssignment(kt.createIdentifier("_this"),n):n),kt.setOriginalNode(o,e)}function et(e,t,r,i){var s=e.length,n=kt.flatten(kt.spanMap(e,d,function(e,t,n,o){return t(e,r,i&&o===s)}));if(a.downlevelIteration){if(1===n.length){var o=n[0];if(kt.isCallExpression(o)&&kt.isIdentifier(o.expression)&&4096&kt.getEmitFlags(o.expression)&&"___spread"===o.expression.escapedText)return n[0]}return kt.createSpreadHelper(Pe,n)}return 1===n.length?(o=e[0],t&&kt.isSpreadElement(o)&&177!==o.expression.kind?kt.createArraySlice(n[0]):n[0]):kt.createArrayConcat(n.shift(),n)}function d(e){return kt.isSpreadElement(e)?t:p}function t(e){return kt.map(e,g)}function p(e,t,n){return kt.createArrayLiteral(kt.visitNodes(kt.createNodeArray(e,n),je,kt.isExpression),t)}function g(e){return kt.visitNode(e.expression,je,kt.isExpression)}function tt(e){var t=kt.getSourceTextOfNodeFromSourceFile(Le,e),n=13===e.kind||16===e.kind,t=(t=t.substring(1,t.length-(n?1:2))).replace(/\r\n?/g,"\n");return kt.setTextRange(kt.createLiteral(t),e)}function yt(e){return 8&Me&&!e?kt.createPropertyAccess(kt.createIdentifier("_super"),"prototype"):kt.createIdentifier("_super")}function nt(){0==(2&s)&&(s|=2,Pe.enableSubstitution(71))}function ot(){0==(1&s)&&(s|=1,Pe.enableSubstitution(99),Pe.enableEmitNotification(152),Pe.enableEmitNotification(151),Pe.enableEmitNotification(153),Pe.enableEmitNotification(154),Pe.enableEmitNotification(187),Pe.enableEmitNotification(186),Pe.enableEmitNotification(228))}function W(e,t){return kt.hasModifier(t,32)?kt.getInternalName(e):kt.createPropertyAccess(kt.getInternalName(e),"prototype")}}),priority:0,text:"\n            var __extends = (this && this.__extends) || (function () {\n                var extendStatics = Object.setPrototypeOf ||\n                    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n                    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n                return function (d, b) {\n                    extendStatics(d, b);\n                    function __() { this.constructor = d; }\n                    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n                };\n            })();"},bt={name:"typescript:makeTemplateObject",scoped:!1,priority:0,text:'\n            var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n                if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }\n                return cooked;\n            };'}}(ts=ts||{}),function(a){a.transformES5=function(e){var r,i,t=e.getCompilerOptions(),o=(1!==t.jsx&&3!==t.jsx||(r=e.onEmitNode,e.onEmitNode=function(e,t,n){switch(t.kind){case 251:case 252:case 250:var o=t.tagName;i[a.getOriginalNodeId(o)]=!0}r(e,t,n)},e.enableEmitNotification(251),e.enableEmitNotification(252),e.enableEmitNotification(250),i=[]),e.onSubstituteNode);return e.onSubstituteNode=function(e,t){var n;return t.id&&i&&i[t.id]?o(e,t):(t=o(e,t),a.isPropertyAccessExpression(t)?(n=s((e=t).name))?a.setTextRange(a.createElementAccess(e.expression,n),e):e:a.isPropertyAssignment(t)?(n=t,(e=a.isIdentifier(n.name)&&s(n.name))?a.updatePropertyAssignment(n,e,n.initializer):n):t)},e.enableSubstitution(179),e.enableSubstitution(261),function(e){return e};function s(e){var t=e.originalKeywordKind||(a.nodeIsSynthesized(e)?a.stringToToken(a.idText(e)):void 0);if(72<=t&&t<=107)return a.setTextRange(a.createLiteral(e),e)}}}(ts=ts||{}),function(we){var Oe={name:"typescript:generator",scoped:!(we.transformGenerators=function(V){var H,re,W,G,f,y,k,b,v,T,O=V.resumeLexicalEnvironment,R=V.endLexicalEnvironment,o=V.hoistFunctionDeclaration,K=V.hoistVariableDeclaration,e=V.getCompilerOptions(),ie=we.getEmitScriptTarget(e),r=V.getEmitResolver(),i=V.onSubstituteNode;V.onSubstituteNode=function(e,t){if(t=i(e,t),1!==e)return t;e=t;if(we.isIdentifier(e)){t=e;if(!we.isGeneratedIdentifier(t)&&H&&H.has(we.idText(t))){var n=we.getOriginalNode(t);if(we.isIdentifier(n)&&n.parent){n=r.getReferencedValueDeclaration(n);if(n){var n=re[we.getOriginalNodeId(n)];if(n)return n=we.getMutableClone(n),we.setSourceMapRange(n,t),we.setCommentRange(n,t),n}}}return t}return e};var E,P,L,j,S,C,se,x,B,ae,A,I,le=1,ce=0,D=0;return function(e){return e.isDeclarationFile||0==(512&e.transformFlags)||(e=we.visitEachChild(e,z,V),we.addEmitHelpers(e,V.readEmitHelpers())),e};function z(e){var t,n,o=e.transformFlags;if(G){var r=e;switch(r.kind){case 212:case 213:return n=r,G?(ke(),n=we.visitEachChild(n,z,V),Q(),n):we.visitEachChild(n,z,V);case 221:return n=r,G&&F({kind:2,isScript:!0,breakLabel:-1}),n=we.visitEachChild(n,z,V),G&&ve(),n;case 222:return t=r,G&&F({kind:4,isScript:!0,labelText:we.idText(t.label),breakLabel:-1}),t=we.visitEachChild(t,z,V),G&&Te(),t;default:return s(r)}}else{if(W)return s(e);if(!(256&o))return 512&o?we.visitEachChild(e,z,V):e;var i=e;switch(i.kind){case 228:return ue(i);case 186:return de(i);default:return we.Debug.failBadSyntaxKind(i),we.visitEachChild(i,z,V)}}}function s(e){switch(e.kind){case 228:return ue(e);case 186:return de(e);case 153:case 154:return R=W,P=G,G=W=!1,o=we.visitEachChild(e,z,V),W=R,G=P,o;case 208:R=e;if(16777216&R.transformFlags)return void he(R.declarationList);if(1048576&we.getEmitFlags(R))return R;for(var t=0,n=R.declarationList.declarations;t<n.length;t++){var L=n[t];K(L.name)}P=we.getInitializedVariables(R.declarationList);return 0!==P.length?we.setSourceMapRange(we.createStatement(we.inlineExpressions(we.map(P,_e))),R):void 0;case 214:var o=e,r=(G&&ke(),o.initializer);if(r&&we.isVariableDeclarationList(r)){for(var i=0,s=r.declarations;i<s.length;i++){var M=s[i];K(M.name)}r=we.getInitializedVariables(r);o=we.updateFor(o,0<r.length?we.inlineExpressions(we.map(r,_e)):void 0,we.visitNode(o.condition,z,we.isExpression),we.visitNode(o.incrementor,z,we.isExpression),we.visitNode(o.statement,z,we.isStatement,we.liftToBlock))}else o=we.visitEachChild(o,z,V);return G&&Q(),o;case 215:var r=e,a=(G&&ke(),r.initializer);if(we.isVariableDeclarationList(a)){for(var l=0,F=a.declarations;l<F.length;l++){var U=F[l];K(U.name)}r=we.updateForIn(r,a.declarations[0].name,we.visitNode(r.expression,z,we.isExpression),we.visitNode(r.statement,z,we.isStatement,we.liftToBlock))}else r=we.visitEachChild(r,z,V);return G&&Q(),r;case 218:a=e;if(G){var c=Ee(a.label&&we.idText(a.label));if(0<c)return Ce(c,a)}return we.visitEachChild(a,z,V);case 217:c=e;if(G){var u=Se(c.label&&we.idText(c.label));if(0<u)return Ce(u,c)}return we.visitEachChild(c,z,V);case 219:return u=e,O=we.visitNode(u.expression,z,we.isExpression),u=u,we.setTextRange(we.createReturn(we.createArrayLiteral(O?[Z(2),O]:[Z(2)])),u);default:if(16777216&e.transformFlags){var d=e;switch(d.kind){case 194:var p,g,h,_=d;switch(we.getExpressionAssociativity(_)){case 0:return X((y=_).right)?we.isLogicalOperator(y.operatorToken.kind)?(g=y,h=q(),te(m=Y(),we.visitNode(g.left,z,we.isExpression),g.left),(53===g.operatorToken.kind?Ae:Be)(h,m,g.left),te(m,we.visitNode(g.right,z,we.isExpression),g.right),J(h),m):26===y.operatorToken.kind?(p=[],v((g=y).left),v(g.right),we.inlineExpressions(p)):((h=we.getMutableClone(y)).left=$(we.visitNode(y.left,z,we.isExpression)),h.right=we.visitNode(y.right,z,we.isExpression),h):we.visitEachChild(y,z,V);case 1:var m=_,f=m.left,y=m.right;if(X(y)){var k=void 0;switch(f.kind){case 179:k=we.updatePropertyAccess(f,$(we.visitNode(f.expression,z,we.isLeftHandSideExpression)),f.name);break;case 180:k=we.updateElementAccess(f,$(we.visitNode(f.expression,z,we.isLeftHandSideExpression)),$(we.visitNode(f.argumentExpression,z,we.isExpression)));break;default:k=we.visitNode(f,z,we.isExpression)}var b=m.operatorToken.kind;return 59<=b&&b<=70?we.setTextRange(we.createAssignment(k,we.setTextRange(we.createBinary($(k),function(){switch(b){case 59:return 37;case 60:return 38;case 61:return 39;case 62:return 40;case 63:return 41;case 64:return 42;case 65:return 45;case 66:return 46;case 67:return 47;case 68:return 48;case 69:return 49;case 70:return 50}}(),we.visitNode(y,z,we.isExpression)),m)),m):we.updateBinary(m,k,we.visitNode(y,z,we.isExpression))}return we.visitEachChild(m,z,V);default:we.Debug.fail("Unknown associativity.")}function v(e){we.isBinaryExpression(e)&&26===e.operatorToken.kind?(v(e.left),v(e.right)):(X(e)&&0<p.length&&(oe(1,[we.createStatement(we.inlineExpressions(p))]),p=[]),p.push(we.visitNode(e,z,we.isExpression)))}return;case 195:return X((I=d).whenTrue)||X(I.whenFalse)?(D=q(),N=q(),w=Y(),Ae(D,we.visitNode(I.condition,z,we.isExpression),I.condition),te(w,we.visitNode(I.whenTrue,z,we.isExpression),I.whenTrue),ne(N),J(D),te(w,we.visitNode(I.whenFalse,z,we.isExpression),I.whenFalse),J(N),w):we.visitEachChild(I,z,V);case 197:return D=d,N=q(),w=we.visitNode(D.expression,z,we.isExpression),D.asteriskToken?oe(7,[0==(8388608&we.getEmitFlags(D.expression))?we.createValuesHelper(V,w,D):w],D):oe(6,[w],D),J(N),w=D,we.setTextRange(we.createCall(we.createPropertyAccess(j,"sent"),void 0,[]),w);case 177:return pe(d.elements,void 0,void 0,d.multiLine);case 178:return I=(C=d).properties,x=C.multiLine,B=me(I),te(A=Y(),we.createObjectLiteral(we.visitNodes(I,z,we.isObjectLiteralElementLike,0,B),x)),(I=we.reduceLeft(I,function(e,t){X(t)&&0<e.length&&(ee(we.createStatement(we.inlineExpressions(e))),e=[]);t=we.createExpressionForObjectLiteralElementLike(C,t,A),t=we.visitNode(t,z,we.isExpression);return t&&(x&&(t.startsOnNewLine=!0),e.push(t)),e},[],B)).push(x?we.startOnNewLine(we.getMutableClone(A)):A),we.inlineExpressions(I);case 180:return X((B=d).argumentExpression)?((S=we.getMutableClone(B)).expression=$(we.visitNode(B.expression,z,we.isLeftHandSideExpression)),S.argumentExpression=we.visitNode(B.argumentExpression,z,we.isExpression),S):we.visitEachChild(B,z,V);case 181:return S=d,!we.isImportCall(S)&&we.forEach(S.arguments,X)?(T=(E=we.createCallBinding(S.expression,K,ie,!0)).target,E=E.thisArg,we.setOriginalNode(we.createFunctionApply($(we.visitNode(T,z,we.isLeftHandSideExpression)),E,pe(S.arguments),S),S)):we.visitEachChild(S,z,V);case 182:return T=d,we.forEach(T.arguments,X)?(H=(E=we.createCallBinding(we.createPropertyAccess(T.expression,"bind"),K)).target,E=E.thisArg,we.setOriginalNode(we.setTextRange(we.createNew(we.createFunctionApply($(we.visitNode(H,z,we.isExpression)),E,pe(T.arguments,we.createVoidZero())),void 0,[]),T),T)):we.visitEachChild(T,z,V);default:return we.visitEachChild(d,z,V)}var H,T,E,S,C,x,B,A,I,D,N,w;return}else return 33554944&e.transformFlags?we.visitEachChild(e,z,V):e}var O,o,R,P}function ue(e){var t,n;return e.asteriskToken?e=we.setOriginalNode(we.setTextRange(we.createFunctionDeclaration(void 0,e.modifiers,void 0,e.name,void 0,we.visitParameterList(e.parameters,z,V),void 0,a(e.body)),e),e):(t=W,n=G,G=W=!1,e=we.visitEachChild(e,z,V),W=t,G=n),W?void o(e):e}function de(e){var t,n;return e.asteriskToken?e=we.setOriginalNode(we.setTextRange(we.createFunctionExpression(void 0,void 0,e.name,void 0,we.visitParameterList(e.parameters,z,V),void 0,a(e.body)),e),e):(t=W,n=G,G=W=!1,e=we.visitEachChild(e,z,V),W=t,G=n),e}function a(e){var t=[],n=W,o=G,r=f,i=y,s=k,a=b,l=v,c=T,u=le,d=E,p=P,g=L,h=j,_=(G=!(W=!0),le=1,L=P=E=T=v=b=k=y=f=void 0,j=we.createTempVariable(void 0),O(),we.addPrologue(t,e.statements,!1,z)),m=(ge(e.statements,_),se=C=!1,I=A=ae=B=x=S=void(D=ce=0),_=function(){if(E){for(var e=0;e<E.length;e++)!function(e){De(e);var t=e;if(f)for(;ce<k.length&&y[ce]<=t;ce++){var n=f[ce],o=k[ce];switch(n.kind){case 0:0===o?(B=B||[],(ae=ae||[]).push(A),A=n):1===o&&(A=ae.pop());break;case 1:0===o?(I=I||[]).push(n):1===o&&I.pop()}}if(!C){se=C=!1;var r=E[e];if(0!==r)if(10===r)C=!0,w(we.createReturn(we.createArrayLiteral([Z(7)])));else{var i=P[e];if(1===r)return w(i[0]);var s,a,l,c=L[e];switch(r){case 2:return s=i[0],a=i[1],l=c,w(we.setTextRange(we.createStatement(we.createAssignment(s,a)),l));case 3:return function(e,t){C=!0,w(we.setEmitFlags(we.setTextRange(we.createReturn(we.createArrayLiteral([Z(3),N(e)])),t),384))}(i[0],c);case 4:return function(e,t,n){w(we.setEmitFlags(we.createIf(t,we.setEmitFlags(we.setTextRange(we.createReturn(we.createArrayLiteral([Z(3),N(e)])),n),384)),1))}(i[0],i[1],c);case 5:return function(e,t,n){w(we.setEmitFlags(we.createIf(we.createLogicalNot(t),we.setEmitFlags(we.setTextRange(we.createReturn(we.createArrayLiteral([Z(3),N(e)])),n),384)),1))}(i[0],i[1],c);case 6:return function(e,t){C=!0,w(we.setEmitFlags(we.setTextRange(we.createReturn(we.createArrayLiteral(e?[Z(4),e]:[Z(4)])),t),384))}(i[0],c);case 7:return function(e,t){C=!0,w(we.setEmitFlags(we.setTextRange(we.createReturn(we.createArrayLiteral([Z(5),e])),t),384))}(i[0],c);case 8:return Ne(i[0],c);case 9:(function(e,t){se=C=!0,w(we.setTextRange(we.createThrow(e),t))})(i[0],c)}}}}(e);Ie(E.length)}else Ie(0);var t;return x?(t=we.createPropertyAccess(j,"label"),(t=we.createSwitch(t,we.createCaseBlock(x))).startsOnNewLine=!0,[t]):B||[]}(),m=V,_=we.setEmitFlags(we.createFunctionExpression(void 0,void 0,void 0,void 0,[we.createParameter(void 0,void 0,void 0,j)],void 0,we.createBlock(_,0<_.length)),524288),m.requestEmitHelper(Oe),we.createCall(we.getHelperName("__generator"),void 0,[we.createThis(),_]));return we.addRange(t,R()),t.push(we.createReturn(m)),W=n,G=o,f=r,y=i,k=s,b=a,v=l,T=c,le=u,E=d,P=p,L=g,j=h,we.setTextRange(we.createBlock(t,e.multiLine),e)}function pe(e,o,t,r){var i,n=me(e),s=(0<n&&(i=Y(),s=we.visitNodes(e,z,we.isExpression,0,n),te(i,we.createArrayLiteral(o?[o].concat(s):s)),o=void 0),we.reduceLeft(e,function(e,t){var n;return X(t)&&0<e.length&&(n=void 0!==i,te(i=i||Y(),n?we.createArrayConcat(i,[we.createArrayLiteral(e,r)]):we.createArrayLiteral(o?[o].concat(e):e,r)),o=void 0,e=[]),e.push(we.visitNode(t,z,we.isExpression)),e},[],n));return i?we.createArrayConcat(i,[we.createArrayLiteral(s,r)]):we.setTextRange(we.createArrayLiteral(o?[o].concat(s):s,r),t)}function ge(e,t){for(var n=e.length,o=t=void 0===t?0:t;o<n;o++)l(e[o])}function M(e){we.isBlock(e)?ge(e.statements):l(e)}function l(e){var t=G;G=G||X(e),function(e){switch(e.kind){case 207:return X(P=e)?ge(P.statements):ee(we.visitNode(P,z,we.isStatement));case 210:return ee(we.visitNode(e,z,we.isStatement));case 211:return X(P=e)&&(X(P.thenStatement)||X(P.elseStatement))?(O=q(),R=P.elseStatement?q():void 0,Ae(P.elseStatement?R:O,we.visitNode(P.expression,z,we.isExpression),P.expression),M(P.thenStatement),P.elseStatement&&(ne(O),J(R),M(P.elseStatement)),J(O)):ee(we.visitNode(P,z,we.isStatement));case 212:return X(R=e)?(O=q(),w=q(),be(O),J(w),M(R.statement),J(O),Be(w,we.visitNode(R.expression,z,we.isExpression)),Q()):ee(we.visitNode(R,z,we.isStatement));case 213:return X(w=e)?(N=be(D=q()),J(D),Ae(N,we.visitNode(w.expression,z,we.isExpression)),M(w.statement),ne(D),Q()):ee(we.visitNode(w,z,we.isStatement));case 214:return X(N=e)?(D=q(),t=be(n=q()),N.initializer&&(I=N.initializer,we.isVariableDeclarationList(I)?he(I):ee(we.setTextRange(we.createStatement(we.visitNode(I,z,we.isExpression)),I))),J(D),N.condition&&Ae(t,we.visitNode(N.condition,z,we.isExpression)),M(N.statement),J(n),N.incrementor&&ee(we.setTextRange(we.createStatement(we.visitNode(N.incrementor,z,we.isExpression)),N.incrementor)),ne(D),Q()):ee(we.visitNode(N,z,we.isStatement));case 215:I=e;if(X(I)){var t=Y(),n=Y(),o=we.createLoopVariable(),r=I.initializer,n=(K(o),te(t,we.createArrayLiteral()),ee(we.createForIn(n,we.visitNode(I.expression,z,we.isExpression),we.createStatement(we.createCall(we.createPropertyAccess(t,"push"),void 0,[n])))),te(o,we.createLiteral(0)),q()),i=q(),s=be(i),s=(J(n),Ae(s,we.createLessThan(o,we.createPropertyAccess(t,"length"))),void 0);if(we.isVariableDeclarationList(r)){for(var a=0,l=r.declarations;a<l.length;a++){var c=l[a];K(c.name)}s=we.getSynthesizedClone(r.declarations[0].name)}else s=we.visitNode(r,z,we.isExpression),we.Debug.assert(we.isLeftHandSideExpression(s));te(s,we.createElementAccess(t,o)),M(I.statement),J(i),ee(we.createStatement(we.createPostfixIncrement(o))),ne(n),Q()}else ee(we.visitNode(I,z,we.isStatement));return;case 217:return 0<(s=Se((r=e).label?we.idText(r.label):void 0))?ne(s,r):ee(r);case 218:return 0<(o=Ee((i=e).label?we.idText(i.label):void 0))?ne(o,i):ee(i);case 219:return A=e,oe(8,[we.visitNode(A.expression,z,we.isExpression)],A);case 220:return X(A=e)?(C=$(we.visitNode(A.expression,z,we.isExpression)),x=q(),B=q(),J(x),F({kind:1,expression:C,startLabel:x,endLabel:B}),M(A.statement),we.Debug.assert(1===U()),J(fe().endLabel)):ee(we.visitNode(A,z,we.isStatement));case 221:C=e;if(X(C.caseBlock)){for(var u=C.caseBlock,d=u.clauses.length,L=(F({kind:2,isScript:!1,breakLabel:x=q()}),$(we.visitNode(C.expression,z,we.isExpression))),p=[],g=-1,h=0;h<d;h++){var _=u.clauses[h];p.push(q()),258===_.kind&&-1===g&&(g=h)}for(var m=0,f=[];m<d;){for(var y=0,h=m;h<d;h++)if(257===(_=u.clauses[h]).kind){var k=_;if(X(k.expression)&&0<f.length)break;f.push(we.createCaseClause(we.visitNode(k.expression,z,we.isExpression),[Ce(p[h],k.expression)]))}else y++;f.length&&(ee(we.createSwitch(L,we.createCaseBlock(f))),m+=f.length,f=[]),0<y&&(m+=y,y=0)}for(ne(0<=g?p[g]:x),h=0;h<d;h++)J(p[h]),ge(u.clauses[h].statements);ve()}else ee(we.visitNode(C,z,we.isStatement));return;case 222:return X(B=e)?(F({kind:4,isScript:!1,labelText:we.idText(B.label),breakLabel:q()}),M(B.statement),Te()):ee(we.visitNode(B,z,we.isStatement));case 223:return S=e,oe(9,[we.visitNode(S.expression,z,we.isExpression)],S);case 224:return X(S=e)?(T=q(),E=q(),J(T),F({kind:0,state:0,startLabel:T,endLabel:E}),xe(),M(S.tryBlock),S.catchClause&&(T=S.catchClause.variableDeclaration,we.Debug.assert(0===U()),we.isGeneratedIdentifier(T.name)?(b=T.name,K(T.name)):(b=Y(v=we.idText(T.name)),H||(H=we.createMap(),re=[],V.enableSubstitution(71)),H.set(v,!0),re[we.getOriginalNodeId(T)]=b),v=ye(),we.Debug.assert(v.state<1),ne(v.endLabel),J(T=q()),v.state=1,v.catchVariable=b,v.catchLabel=T,te(b,we.createCall(we.createPropertyAccess(j,"sent"),void 0,[])),xe(),M(S.catchClause.block)),S.finallyBlock&&(we.Debug.assert(0===U()),E=ye(),we.Debug.assert(E.state<2),ne(E.endLabel),J(v=q()),E.state=2,E.finallyLabel=v,M(S.finallyBlock)),we.Debug.assert(0===U()),(T=fe()).state<2?ne(T.endLabel):oe(10),J(T.endLabel),xe(),T.state=3):ee(we.visitEachChild(S,z,V));default:ee(we.visitNode(e,z,we.isStatement))}var b,v,T,E,S,C,x,B,A,n,t,I,D,N,w,O,R,P}(e),G=t}function he(e){for(var t=0,n=e.declarations;t<n.length;t++){var o=n[t],r=we.getSynthesizedClone(o.name);we.setCommentRange(r,o.name),K(r)}for(var i=we.getInitializedVariables(e),s=i.length,a=0,l=[];a<s;){for(var c=a;c<s&&!(X((o=i[c]).initializer)&&0<l.length);c++)l.push(_e(o));l.length&&(ee(we.createStatement(we.inlineExpressions(l))),a+=l.length,l=[])}}function _e(e){return we.setSourceMapRange(we.createAssignment(we.setSourceMapRange(we.getSynthesizedClone(e.name),e.name),we.visitNode(e.initializer,z,we.isExpression)),e)}function X(e){return e&&0!=(16777216&e.transformFlags)}function me(e){for(var t=e.length,n=0;n<t;n++)if(X(e[n]))return n;return-1}function $(e){var t;return we.isGeneratedIdentifier(e)||4096&we.getEmitFlags(e)?e:(te(t=we.createTempVariable(K),e,e),t)}function Y(e){e=e?we.createUniqueName(e):we.createTempVariable(void 0);return K(e),e}function q(){var e=le;return le++,(v=v||[])[e]=-1,e}function J(e){we.Debug.assert(void 0!==v,"No labels were defined."),v[e]=E?E.length:0}function F(e){f||(f=[],k=[],y=[],b=[]);var t=k.length;k[t]=0,y[t]=E?E.length:0,f[t]=e,b.push(e)}function fe(){var e=ye(),t=(we.Debug.assert(void 0!==e,"beginBlock was never called."),k.length);return k[t]=1,y[t]=E?E.length:0,f[t]=e,b.pop(),e}function ye(){return we.lastOrUndefined(b)}function U(){var e=ye();return e&&e.kind}function ke(){F({kind:3,isScript:!0,breakLabel:-1,continueLabel:-1})}function be(e){var t=q();return F({kind:3,isScript:!1,breakLabel:t,continueLabel:e}),t}function Q(){we.Debug.assert(3===U());var e=fe(),t=e.breakLabel;e.isScript||J(t)}function ve(){we.Debug.assert(2===U());var e=fe(),t=e.breakLabel;e.isScript||J(t)}function Te(){we.Debug.assert(4===U());var e=fe();e.isScript||J(e.breakLabel)}function c(e){return 2===e.kind||3===e.kind}function u(e){return 4===e.kind}function d(e){return 3===e.kind}function p(e,t){for(var n=t;0<=n;n--){var o=b[n];if(!u(o))break;if(o.labelText===e)return 1}}function Ee(e){if(b)if(e)for(var t=b.length-1;0<=t;t--){if(u(n=b[t])&&n.labelText===e)return n.breakLabel;if(c(n)&&p(e,t-1))return n.breakLabel}else for(t=b.length-1;0<=t;t--){var n;if(c(n=b[t]))return n.breakLabel}return 0}function Se(e){if(b)if(e){for(var t=b.length-1;0<=t;t--)if(d(n=b[t])&&p(e,t-1))return n.continueLabel}else for(t=b.length-1;0<=t;t--){var n;if(d(n=b[t]))return n.continueLabel}return 0}function N(e){var t;return 0<e?(void 0===T&&(T=[]),t=we.createLiteral(-1),void 0===T[e]?T[e]=[t]:T[e].push(t),t):we.createOmittedExpression()}function Z(e){var t=we.createLiteral(e);return we.addSyntheticTrailingComment(t,3,function(){switch(e){case 2:return"return";case 3:return"break";case 4:return"yield";case 5:return"yield*";case 7:return"endfinally"}}()),t}function Ce(e,t){return we.Debug.assertLessThan(0,e,"Invalid label"),we.setTextRange(we.createReturn(we.createArrayLiteral([Z(3),N(e)])),t)}function xe(){oe(0)}function ee(e){e?oe(1,[e]):xe()}function te(e,t,n){oe(2,[e,t],n)}function ne(e,t){oe(3,[e],t)}function Be(e,t,n){oe(4,[e,t],n)}function Ae(e,t,n){oe(5,[e,t],n)}function oe(e,t,n){void 0===E&&(E=[],P=[],L=[]),void 0===v&&J(q());var o=E.length;E[o]=e,P[o]=t,L[o]=n}function Ie(e){if(!function(e){if(!se)return 1;if(v&&T)for(var t=0;t<v.length;t++)if(v[t]===e&&T[t])return 1}(e)||(De(e),Ne(I=void 0,void 0)),B&&x&&g(!1),void 0!==T&&void 0!==S)for(var t=0;t<S.length;t++){var n=S[t];if(void 0!==n)for(var o=0,r=n;o<r.length;o++){var i=r[o],i=T[i];if(void 0!==i)for(var s=0,a=i;s<a.length;s++)a[s].text=String(t)}}}function g(e){if(x=x||[],B){if(I)for(var t=I.length-1;0<=t;t--){var n=I[t];B=[we.createWith(n.expression,we.createBlock(B))]}var o,r,i,s;A&&(o=A.startLabel,r=A.catchLabel,i=A.finallyLabel,s=A.endLabel,B.unshift(we.createStatement(we.createCall(we.createPropertyAccess(we.createPropertyAccess(j,"trys"),"push"),void 0,[we.createArrayLiteral([N(o),N(r),N(i),N(s)])]))),A=void 0),e&&B.push(we.createStatement(we.createAssignment(we.createPropertyAccess(j,"label"),we.createLiteral(D+1))))}x.push(we.createCaseClause(we.createLiteral(D),B||[])),B=void 0}function De(e){if(v)for(var t=0;t<v.length;t++)v[t]===e&&(B&&(g(!C),se=C=!1,D++),void 0===(S=void 0===S?[]:S)[D]?S[D]=[t]:S[D].push(t))}function w(e){e&&(B?B.push(e):B=[e])}function Ne(e,t){se=C=!0,w(we.setEmitFlags(we.setTextRange(we.createReturn(we.createArrayLiteral(e?[Z(2),e]:[Z(2)])),t),384))}}),priority:6,text:'\n            var __generator = (this && this.__generator) || function (thisArg, body) {\n                var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n                return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n                function verb(n) { return function (v) { return step([n, v]); }; }\n                function step(op) {\n                    if (f) throw new TypeError("Generator is already executing.");\n                    while (_) try {\n                        if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;\n                        if (y = 0, t) op = [0, t.value];\n                        switch (op[0]) {\n                            case 0: case 1: t = op; break;\n                            case 4: _.label++; return { value: op[1], done: false };\n                            case 5: _.label++; y = op[1]; op = [0]; continue;\n                            case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                            default:\n                                if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                                if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                                if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                                if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                                if (t[2]) _.ops.pop();\n                                _.trys.pop(); continue;\n                        }\n                        op = body.call(thisArg, _);\n                    } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n                    if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n                }\n            };'}}(ts=ts||{}),function(j){j.transformModule=function(N){var o=N.startLexicalEnvironment,r=N.endLexicalEnvironment,C=N.hoistVariableDeclaration,p=N.getCompilerOptions(),g=N.getEmitResolver(),h=N.getEmitHost(),w=j.getEmitScriptTarget(p),O=j.getEmitModuleKind(p),x=N.onSubstituteNode,i=N.onEmitNode;N.onSubstituteNode=function(e,t){if((t=x(e,t)).id&&f[t.id])return t;var n,o,r;if(1!==e)return j.isShorthandPropertyAssignment(t)?(o=(e=t).name,(r=E(o))!==o?e.objectAssignmentInitializer?(n=j.createAssignment(r,e.objectAssignmentInitializer),j.setTextRange(j.createPropertyAssignment(o,n),e)):j.setTextRange(j.createPropertyAssignment(o,r),e):e):t;var i=t;switch(i.kind){case 71:return E(i);case 194:var s=i;if(j.isAssignmentOperator(s.operatorToken.kind)&&j.isIdentifier(s.left)&&!j.isGeneratedIdentifier(s.left)&&!j.isLocalName(s.left)&&!j.isDeclarationNameOfEnumOrNamespace(s.left)){var a=S(s.left);if(a){for(var l=s,c=0,u=a;c<u.length;c++){var d=u[c];f[j.getNodeId(l)]=!0,l=G(d,l,s)}return l}}return s;case 193:case 192:a=i;if((43===a.operator||44===a.operator)&&j.isIdentifier(a.operand)&&!j.isGeneratedIdentifier(a.operand)&&!j.isLocalName(a.operand)&&!j.isDeclarationNameOfEnumOrNamespace(a.operand)){var p=S(a.operand);if(p){for(var g=193===a.kind?j.setTextRange(j.createBinary(a.operand,j.createToken(43===a.operator?59:60),j.createLiteral(1)),a):a,h=0,_=p;h<_.length;h++){var m=_[h];f[j.getNodeId(g)]=!0,g=G(m,g)}return g}}return a}return i},N.onEmitNode=function(e,t,n){265===t.kind?(_=t,m=s[j.getOriginalNodeId(_)],f=[],i(e,t,n),f=m=_=void 0):i(e,t,n)},N.enableSubstitution(71),N.enableSubstitution(194),N.enableSubstitution(192),N.enableSubstitution(193),N.enableSubstitution(262),N.enableEmitNotification(265);var _,m,f,a,s=[],R=[];return function(e){if(e.isDeclarationFile||!(j.isExternalModule(e)||p.isolatedModules||67108864&e.transformFlags))return e;_=e,m=j.collectExternalModuleInfo(e,g,p),s[j.getOriginalNodeId(e)]=m;e=function(){switch(O){case j.ModuleKind.AMD:return n;case j.ModuleKind.UMD:return B;default:return t}}()(e);return m=_=void 0,a=!1,j.aggregateTransformFlags(e)};function l(){return!m.exportEquals&&j.isExternalModule(_)}function t(e){o();var t=[],n=p.alwaysStrict||!p.noImplicitUseStrict&&j.isExternalModule(_),n=j.addPrologue(t,e.statements,n,y),n=(l()&&j.append(t,T()),j.append(t,j.visitNode(m.externalHelpersImportDeclaration,y,j.isStatement)),j.addRange(t,j.visitNodes(e.statements,y,j.isStatement,n)),d(t,!1),j.addRange(t,r()),j.updateSourceFileNode(e,j.setTextRange(j.createNodeArray(t),e.statements)));return m.hasExportStarsToExportValues&&!p.importHelpers&&j.addEmitHelper(n,A),j.addEmitHelpers(n,N.readEmitHelpers()),n}function n(e){var t=j.createIdentifier("define"),n=j.tryGetModuleNameFromFile(e,h,p),o=c(e,!0),r=o.aliasedModuleNames,i=o.unaliasedModuleNames,o=o.importAliasNames;return j.updateSourceFileNode(e,j.setTextRange(j.createNodeArray([j.createStatement(j.createCall(t,void 0,(n?[n]:[]).concat([j.createArrayLiteral([j.createLiteral("require"),j.createLiteral("exports")].concat(r,i)),j.createFunctionExpression(void 0,void 0,void 0,void 0,[j.createParameter(void 0,void 0,void 0,"require"),j.createParameter(void 0,void 0,void 0,"exports")].concat(o),void 0,u(e))])))]),e.statements))}function B(e){var t=c(e,!1),n=t.aliasedModuleNames,o=t.unaliasedModuleNames,t=t.importAliasNames,r=j.tryGetModuleNameFromFile(e,h,p),r=j.createFunctionExpression(void 0,void 0,void 0,void 0,[j.createParameter(void 0,void 0,void 0,"factory")],void 0,j.setTextRange(j.createBlock([j.createIf(j.createLogicalAnd(j.createTypeCheck(j.createIdentifier("module"),"object"),j.createTypeCheck(j.createPropertyAccess(j.createIdentifier("module"),"exports"),"object")),j.createBlock([j.createVariableStatement(void 0,[j.createVariableDeclaration("v",void 0,j.createCall(j.createIdentifier("factory"),void 0,[j.createIdentifier("require"),j.createIdentifier("exports")]))]),j.setEmitFlags(j.createIf(j.createStrictInequality(j.createIdentifier("v"),j.createIdentifier("undefined")),j.createStatement(j.createAssignment(j.createPropertyAccess(j.createIdentifier("module"),"exports"),j.createIdentifier("v")))),1)]),j.createIf(j.createLogicalAnd(j.createTypeCheck(j.createIdentifier("define"),"function"),j.createPropertyAccess(j.createIdentifier("define"),"amd")),j.createBlock([j.createStatement(j.createCall(j.createIdentifier("define"),void 0,(r?[r]:[]).concat([j.createArrayLiteral([j.createLiteral("require"),j.createLiteral("exports")].concat(n,o)),j.createIdentifier("factory")])))])))],!0),void 0));return j.updateSourceFileNode(e,j.setTextRange(j.createNodeArray([j.createStatement(j.createCall(r,void 0,[j.createFunctionExpression(void 0,void 0,void 0,void 0,[j.createParameter(void 0,void 0,void 0,"require"),j.createParameter(void 0,void 0,void 0,"exports")].concat(t),void 0,u(e))]))]),e.statements))}function c(e,t){for(var n=[],o=[],r=[],i=0,s=e.amdDependencies;i<s.length;i++){var a=s[i];a.name?(n.push(j.createLiteral(a.path)),r.push(j.createParameter(void 0,void 0,void 0,a.name))):o.push(j.createLiteral(a.path))}for(var l=0,c=m.externalImports;l<c.length;l++){var u=c[l],d=j.getExternalModuleNameLiteral(u,_,h,g,p),u=j.getLocalNameForExternalImport(u,_);d&&(t&&u?(j.setEmitFlags(u,4),n.push(d),r.push(j.createParameter(void 0,void 0,void 0,u))):o.push(d))}return{aliasedModuleNames:n,unaliasedModuleNames:o,importAliasNames:r}}function u(e){o();var t=[],n=j.addPrologue(t,e.statements,!p.noImplicitUseStrict,y),e=(l()&&j.append(t,T()),j.append(t,j.visitNode(m.externalHelpersImportDeclaration,y,j.isStatement)),j.addRange(t,j.visitNodes(e.statements,y,j.isStatement,n)),d(t,!0),j.addRange(t,r()),j.createBlock(t,!0));return m.hasExportStarsToExportValues&&!p.importHelpers&&j.addEmitHelper(e,A),a&&j.addEmitHelper(e,I),e}function d(e,t){var n,o;m.exportEquals&&(n=j.visitNode(m.exportEquals.expression,P))&&(t?(o=j.createReturn(n),j.setTextRange(o,m.exportEquals),j.setEmitFlags(o,1920)):(o=j.createStatement(j.createAssignment(j.createPropertyAccess(j.createIdentifier("module"),"exports"),n)),j.setTextRange(o,m.exportEquals),j.setEmitFlags(o,1536)),e.push(o))}function y(e){switch(e.kind){case 238:var t,n=e,o=j.getNamespaceDeclarationNode(n);if(O!==j.ModuleKind.AMD){if(!n.importClause)return j.setTextRange(j.createStatement(L(n)),n);var r=[];o&&!j.isDefaultImport(n)?r.push(j.createVariableDeclaration(j.getSynthesizedClone(o.name),void 0,L(n))):(r.push(j.createVariableDeclaration(j.getGeneratedNameForNode(n),void 0,L(n))),o&&j.isDefaultImport(n)&&r.push(j.createVariableDeclaration(j.getSynthesizedClone(o.name),void 0,j.getGeneratedNameForNode(n)))),t=j.append(t,j.setTextRange(j.createVariableStatement(void 0,j.createVariableDeclarationList(r,2<=w?2:0)),n))}else o&&j.isDefaultImport(n)&&(t=j.append(t,j.createVariableStatement(void 0,j.createVariableDeclarationList([j.setTextRange(j.createVariableDeclaration(j.getSynthesizedClone(o.name),void 0,j.getGeneratedNameForNode(n)),n)],2<=w?2:0))));return M(n)?(r=j.getOriginalNodeId(n),R[r]=F(R[r],n)):t=F(t,n),j.singleOrMany(t);case 237:return o=e,j.Debug.assert(j.isExternalModuleImportEqualsDeclaration(o),"import= for internal module references should be handled in an earlier transformer."),O!==j.ModuleKind.AMD?D=j.hasModifier(o,1)?j.append(D,j.setTextRange(j.createStatement(G(o.name,L(o))),o)):j.append(D,j.setTextRange(j.createVariableStatement(void 0,j.createVariableDeclarationList([j.createVariableDeclaration(j.getSynthesizedClone(o.name),void 0,L(o))],2<=w?2:0)),o)):j.hasModifier(o,1)&&(D=j.append(D,j.setTextRange(j.createStatement(G(j.getExportName(o),j.getLocalName(o))),o))),M(o)?(r=j.getOriginalNodeId(o),R[r]=U(R[r],o)):D=U(D,o),j.singleOrMany(D);case 244:n=e;if(n.moduleSpecifier){var i=j.getGeneratedNameForNode(n);if(n.exportClause){var s=[];O!==j.ModuleKind.AMD&&s.push(j.setTextRange(j.createVariableStatement(void 0,j.createVariableDeclarationList([j.createVariableDeclaration(i,void 0,L(n))])),n));for(var a=0,l=n.exportClause.elements;a<l.length;a++){var c=l[a],u=j.createPropertyAccess(i,c.propertyName||c.name);s.push(j.setTextRange(j.createStatement(G(j.getExportName(c),u)),c))}return j.singleOrMany(s)}return j.setTextRange(j.createStatement((g=N,p=O!==j.ModuleKind.AMD?L(n):i,g.getCompilerOptions().importHelpers?j.createCall(j.getHelperName("__exportStar"),void 0,[p,j.createIdentifier("exports")]):j.createCall(j.createIdentifier("__export"),void 0,[p]))),n)}return;case 243:var d,p,g=e;return g.isExportEquals?void 0:((p=g.original)&&M(p)?(p=j.getOriginalNodeId(g),R[p]=W(R[p],j.createIdentifier("default"),j.visitNode(g.expression,P),g,!0)):d=W(d,j.createIdentifier("default"),j.visitNode(g.expression,P),g,!0),j.singleOrMany(d));case 208:var h,_,m,f=e;if(j.hasModifier(f,1)){for(var y=void 0,k=0,b=f.declarationList.declarations;k<b.length;k++){var v=b[k];j.isIdentifier(v.name)&&j.isLocalName(v.name)?(y=y||j.visitNodes(f.modifiers,K,j.isModifier),_=j.append(_,v)):v.initializer&&(m=j.append(m,(v=v,j.isBindingPattern(v.name)?j.flattenDestructuringAssignment(j.visitNode(v,P),void 0,N,0,!1,G):j.createAssignment(j.setTextRange(j.createPropertyAccess(j.createIdentifier("exports"),v.name),v.name),j.visitNode(v.initializer,P)))))}_&&(h=j.append(h,j.updateVariableStatement(f,y,j.updateVariableDeclarationList(f.declarationList,_)))),m&&(h=j.append(h,j.setTextRange(j.createStatement(j.inlineExpressions(m)),f)))}else h=j.append(h,j.visitEachChild(f,P,N));return M(f)?(B=j.getOriginalNodeId(f),R[B]=H(R[B],f)):h=H(h,f),j.singleOrMany(h);case 228:return B=e,I=j.hasModifier(B,1)?j.append(I,j.setOriginalNode(j.setTextRange(j.createFunctionDeclaration(void 0,j.visitNodes(B.modifiers,K,j.isModifier),B.asteriskToken,j.getDeclarationName(B,!0,!0),void 0,j.visitNodes(B.parameters,P),void 0,j.visitEachChild(B.body,P,N)),B),B)):j.append(I,j.visitEachChild(B,P,N)),M(B)?(A=j.getOriginalNodeId(B),R[A]=V(R[A],B)):I=V(I,B),j.singleOrMany(I);case 229:return A=e,x=j.hasModifier(A,1)?j.append(x,j.setOriginalNode(j.setTextRange(j.createClassDeclaration(void 0,j.visitNodes(A.modifiers,K,j.isModifier),j.getDeclarationName(A,!0,!0),void 0,j.visitNodes(A.heritageClauses,P),j.visitNodes(A.members,P)),A),A)):j.append(x,j.visitEachChild(A,P,N)),M(A)?(C=j.getOriginalNodeId(A),R[C]=V(R[C],A)):x=V(x,A),j.singleOrMany(x);case 290:return M(C=e)&&208===C.original.kind&&(S=j.getOriginalNodeId(C),R[S]=H(R[S],C.original)),C;case 291:return S=e,T=j.getOriginalNodeId(S),(E=R[T])?(delete R[T],j.append(E,S)):S;default:return j.visitEachChild(e,P,N)}var T,E,S,C,x,B,A,I,D}function P(e){{if(!(67108864&e.transformFlags))return e;if(!j.isImportCall(e))return j.visitEachChild(e,P,N);var t=e,n,o,r,i=j.visitNode(j.firstOrUndefined(t.arguments),P),s=!!(16384&t.transformFlags);switch(p.module){case j.ModuleKind.AMD:return k(i,s);case j.ModuleKind.UMD:return n=i,o=s,a=!0,j.isSimpleCopiableExpression(n)?(r=j.isGeneratedIdentifier(n)?n:j.isStringLiteral(n)?j.createLiteral(n):j.setEmitFlags(j.setTextRange(j.getSynthesizedClone(n),n),1536),j.createConditional(j.createIdentifier("__syncRequire"),b(n,o),k(r,o))):(r=j.createTempVariable(C),j.createComma(j.createAssignment(r,n),j.createConditional(j.createIdentifier("__syncRequire"),b(r,o),k(r,o))));default:j.ModuleKind.CommonJS;return b(i,s)}}}function k(e,t){var n,o=j.createUniqueName("resolve"),r=j.createUniqueName("reject"),i=[j.createParameter(void 0,void 0,void 0,o),j.createParameter(void 0,void 0,void 0,r)],e=j.createBlock([j.createStatement(j.createCall(j.createIdentifier("require"),void 0,[j.createArrayLiteral([e||j.createOmittedExpression()]),o,r]))]);return 2<=w?n=j.createArrowFunction(void 0,void 0,i,void 0,void 0,e):(n=j.createFunctionExpression(void 0,void 0,void 0,void 0,i,void 0,e),t&&j.setEmitFlags(n,8)),j.createNew(j.createIdentifier("Promise"),void 0,[n])}function b(e,t){var n,o=j.createCall(j.createPropertyAccess(j.createIdentifier("Promise"),"resolve"),void 0,[]),e=j.createCall(j.createIdentifier("require"),void 0,e?[e]:[]);return 2<=w?n=j.createArrowFunction(void 0,void 0,[],void 0,void 0,e):(n=j.createFunctionExpression(void 0,void 0,void 0,void 0,[],void 0,j.createBlock([j.createReturn(e)])),t&&j.setEmitFlags(n,8)),j.createCall(j.createPropertyAccess(o,"then"),void 0,[n])}function L(e){var e=j.getExternalModuleNameLiteral(e,_,h,g,p),t=[];return e&&t.push(e),j.createCall(j.createIdentifier("require"),void 0,t)}function M(e){return 0!=(4194304&j.getEmitFlags(e))}function F(e,t){if(!m.exportEquals){t=t.importClause;if(t){t.name&&(e=v(e,t));var n=t.namedBindings;if(n)switch(n.kind){case 240:e=v(e,n);break;case 241:for(var o=0,r=n.elements;o<r.length;o++)e=v(e,r[o])}}}return e}function U(e,t){return m.exportEquals?e:v(e,t)}function H(e,t){if(!m.exportEquals)for(var n=0,o=t.declarationList.declarations;n<o.length;n++)e=function e(t,n){if(m.exportEquals)return t;if(j.isBindingPattern(n.name))for(var o=0,r=n.name.elements;o<r.length;o++){var i=r[o];j.isOmittedExpression(i)||(t=e(t,i))}else j.isGeneratedIdentifier(n.name)||(t=v(t,n));return t}(e,o[n]);return e}function V(e,t){return m.exportEquals||(j.hasModifier(t,1)&&(e=W(e,j.hasModifier(t,512)?j.createIdentifier("default"):j.getDeclarationName(t),j.getLocalName(t),t)),t.name&&(e=v(e,t))),e}function v(e,t){var n=j.getDeclarationName(t),t=m.exportSpecifiers.get(j.idText(n));if(t)for(var o=0,r=t;o<r.length;o++){var i=r[o];e=W(e,i.name,n,i.name)}return e}function W(e,n,o,t,r){return j.append(e,function(e,t){e=j.setTextRange(j.createStatement(G(n,o)),e);return j.startOnNewLine(e),t||j.setEmitFlags(e,1536),e}(t,r))}function T(){var e=0===w?j.createStatement(G(j.createIdentifier("__esModule"),j.createLiteral(!0))):j.createStatement(j.createCall(j.createPropertyAccess(j.createIdentifier("Object"),"defineProperty"),void 0,[j.createIdentifier("exports"),j.createLiteral("__esModule"),j.createObjectLiteral([j.createPropertyAssignment("value",j.createLiteral(!0))])]));return j.setEmitFlags(e,1048576),e}function G(e,t,n){return j.setTextRange(j.createAssignment(j.createPropertyAccess(j.createIdentifier("exports"),j.getSynthesizedClone(e)),t),n)}function K(e){switch(e.kind){case 84:case 79:return}return e}function E(e){if(4096&j.getEmitFlags(e))return(t=j.getExternalHelpersModuleName(_))?j.createPropertyAccess(t,e):e;if(!j.isGeneratedIdentifier(e)&&!j.isLocalName(e)){var t=g.getReferencedExportContainer(e,j.isExportName(e));if(t&&265===t.kind)return j.setTextRange(j.createPropertyAccess(j.createIdentifier("exports"),j.getSynthesizedClone(e)),e);var n,t=g.getReferencedImportDeclaration(e);if(t){if(j.isImportClause(t))return j.setTextRange(j.createPropertyAccess(j.getGeneratedNameForNode(t.parent),j.createIdentifier("default")),e);if(j.isImportSpecifier(t))return n=t.propertyName||t.name,j.setTextRange(j.createPropertyAccess(j.getGeneratedNameForNode(t.parent.parent.parent),j.getSynthesizedClone(n)),e)}}return e}function S(e){if(!j.isGeneratedIdentifier(e)){e=g.getReferencedImportDeclaration(e)||g.getReferencedValueDeclaration(e);if(e)return m&&m.exportedBindings[j.getOriginalNodeId(e)]}}};var A={name:"typescript:export-star",scoped:!0,text:"\n            function __export(m) {\n                for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n            }\n        "},I={name:"typescript:dynamicimport-sync-require",scoped:!0,text:'\n            var __syncRequire = typeof module === "object" && typeof module.exports === "object";'}}(ts=ts||{}),function(z){z.transformSystemModule=function(S){var H=S.startLexicalEnvironment,V=S.endLexicalEnvironment,C=S.hoistVariableDeclaration,l=S.getCompilerOptions(),h=S.getEmitResolver(),c=S.getEmitHost(),W=S.onSubstituteNode,r=S.onEmitNode;S.onSubstituteNode=function(e,t){if(n=t=W(e,t),_&&n.id&&_[n.id])return t;var n;if(1!==e)return t;var o=t;switch(o.kind){case 71:var r=o;if(4096&z.getEmitFlags(r))return(i=z.getExternalHelpersModuleName(f))?z.createPropertyAccess(i,r):r;if(!z.isGeneratedIdentifier(r)&&!z.isLocalName(r)){var i=h.getReferencedImportDeclaration(r);if(i){if(z.isImportClause(i))return z.setTextRange(z.createPropertyAccess(z.getGeneratedNameForNode(i.parent),z.createIdentifier("default")),r);if(z.isImportSpecifier(i))return z.setTextRange(z.createPropertyAccess(z.getGeneratedNameForNode(i.parent.parent.parent),z.getSynthesizedClone(i.propertyName||i.name)),r)}}return r;case 194:i=o;if(z.isAssignmentOperator(i.operatorToken.kind)&&z.isIdentifier(i.left)&&!z.isGeneratedIdentifier(i.left)&&!z.isLocalName(i.left)&&!z.isDeclarationNameOfEnumOrNamespace(i.left)){r=j(i.left);if(r){for(var s=i,a=0,l=r;a<l.length;a++)s=P(l[a],U(s));return s}}return i;case 192:case 193:var c=o;if((43===c.operator||44===c.operator)&&z.isIdentifier(c.operand)&&!z.isGeneratedIdentifier(c.operand)&&!z.isLocalName(c.operand)&&!z.isDeclarationNameOfEnumOrNamespace(c.operand)){var u=j(c.operand);if(u){for(var d=193===c.kind?z.setTextRange(z.createPrefix(c.operator,c.operand),c):c,p=0,g=u;p<g.length;p++)d=P(g[p],U(d));return d=193===c.kind?43===c.operator?z.createSubtract(U(d),z.createLiteral(1)):z.createAdd(U(d),z.createLiteral(1)):d}}return c}return o},S.onEmitNode=function(e,t,n){var o;265===t.kind?(o=z.getOriginalNodeId(t),f=t,m=u[o],y=d[o],(_=p[o])&&delete p[o],r(e,t,n),_=y=m=f=void 0):r(e,t,n)},S.enableSubstitution(71),S.enableSubstitution(194),S.enableSubstitution(192),S.enableSubstitution(193),S.enableEmitNotification(265);var f,m,y,a,x,B,_,u=[],A=[],d=[],p=[];return function(e){var t,n,o,r,i,s;return e.isDeclarationFile||!(z.isEffectiveExternalModule(e,l)||67108864&e.transformFlags)?e:(t=z.getOriginalNodeId(e),B=f=e,m=u[t]=z.collectExternalModuleInfo(e,h,l),y=z.createUniqueName("exports"),d[t]=y,a=z.createUniqueName("context"),n=function(e){for(var t=z.createMap(),n=[],o=0;o<e.length;o++){var r,i,s=e[o],a=z.getExternalModuleNameLiteral(s,f,c,h,l);a&&(r=a.text,void 0!==(i=t.get(r))?n[i].externalImports.push(s):(t.set(r,n.length),n.push({name:a,externalImports:[s]})))}return n}(m.externalImports),o=e,r=n,i=[],H(),s=l.alwaysStrict||!l.noImplicitUseStrict&&z.isExternalModule(f),s=z.addPrologue(i,o.statements,s,g),i.push(z.createVariableStatement(void 0,z.createVariableDeclarationList([z.createVariableDeclaration("__moduleName",void 0,z.createLogicalAnd(a,z.createPropertyAccess(a,"id")))]))),z.visitNode(m.externalHelpersImportDeclaration,g,z.isStatement),o=z.visitNodes(o.statements,g,z.isStatement,s),z.addRange(i,x),z.addRange(i,V()),s=function(e){if(m.hasExportStarsToExportValues){if(!m.exportedNames&&0===m.exportSpecifiers.size){for(var t=!1,n=0,o=m.externalImports;n<o.length;n++)if(244===(l=o[n]).kind&&l.exportClause){t=!0;break}if(!t)return _=k(void 0),e.push(_),_.name}var r=[];if(m.exportedNames)for(var i=0,s=m.exportedNames;i<s.length;i++){var a=s[i];"default"!==a.escapedText&&r.push(z.createPropertyAssignment(z.createLiteral(a),z.createTrue()))}for(var l,c=0,u=m.externalImports;c<u.length;c++)if(244===(l=u[c]).kind){var d=l;if(d.exportClause)for(var p=0,g=d.exportClause.elements;p<g.length;p++){var h=g[p];r.push(z.createPropertyAssignment(z.createLiteral(z.idText(h.name||h.propertyName)),z.createTrue()))}}var _=z.createUniqueName("exportedNames"),_=(e.push(z.createVariableStatement(void 0,z.createVariableDeclarationList([z.createVariableDeclaration(_,void 0,z.createObjectLiteral(r,!0))]))),k(_));return e.push(_),_.name}}(i),(s=z.createObjectLiteral([z.createPropertyAssignment("setters",function(e,t){for(var n=[],o=0,r=t;o<r.length;o++){for(var i=r[o],s=z.forEach(i.externalImports,function(e){return z.getLocalNameForExternalImport(e,f)}),a=s?z.getGeneratedNameForNode(s):z.createUniqueName(""),l=[],c=0,u=i.externalImports;c<u.length;c++){var d=u[c],p=z.getLocalNameForExternalImport(d,f);switch(d.kind){case 238:if(!d.importClause)break;case 237:z.Debug.assert(void 0!==p),l.push(z.createStatement(z.createAssignment(p,a)));break;case 244:if(z.Debug.assert(void 0!==p),d.exportClause){for(var g=[],h=0,_=d.exportClause.elements;h<_.length;h++){var m=_[h];g.push(z.createPropertyAssignment(z.createLiteral(z.idText(m.name)),z.createElementAccess(a,z.createLiteral(z.idText(m.propertyName||m.name)))))}l.push(z.createStatement(z.createCall(y,void 0,[z.createObjectLiteral(g,!0)])))}else l.push(z.createStatement(z.createCall(e,void 0,[a])))}}n.push(z.createFunctionExpression(void 0,void 0,void 0,void 0,[z.createParameter(void 0,void 0,void 0,a)],void 0,z.createBlock(l,!0)))}return z.createArrayLiteral(n,!0)}(s,r)),z.createPropertyAssignment("execute",z.createFunctionExpression(void 0,void 0,void 0,void 0,[],void 0,z.createBlock(o,!0)))])).multiLine=!0,i.push(z.createReturn(s)),r=z.createBlock(i,!0),o=z.createFunctionExpression(void 0,void 0,void 0,void 0,[z.createParameter(void 0,void 0,void 0,y),z.createParameter(void 0,void 0,void 0,a)],void 0,r),s=z.tryGetModuleNameFromFile(e,c,l),i=z.createArrayLiteral(z.map(n,function(e){return e.name})),n=z.setEmitFlags(z.updateSourceFileNode(e,z.setTextRange(z.createNodeArray([z.createStatement(z.createCall(z.createPropertyAccess(z.createIdentifier("System"),"register"),void 0,s?[s,i,o]:[i,o]))]),e.statements)),1024),l.outFile||l.out||z.moveEmitHelpers(n,r,function(e){return!e.scoped}),_&&(p[t]=_,_=void 0),B=x=a=y=m=f=void 0,z.aggregateTransformFlags(n))};function k(e){var t=z.createUniqueName("exportStar"),n=z.createIdentifier("m"),o=z.createIdentifier("n"),r=z.createIdentifier("exports"),i=z.createStrictInequality(o,z.createLiteral("default"));return e&&(i=z.createLogicalAnd(i,z.createLogicalNot(z.createCall(z.createPropertyAccess(e,"hasOwnProperty"),void 0,[o])))),z.createFunctionDeclaration(void 0,void 0,void 0,t,void 0,[z.createParameter(void 0,void 0,void 0,n)],void 0,z.createBlock([z.createVariableStatement(void 0,z.createVariableDeclarationList([z.createVariableDeclaration(r,void 0,z.createObjectLiteral([]))])),z.createForIn(z.createVariableDeclarationList([z.createVariableDeclaration(o,void 0)]),n,z.createBlock([z.setEmitFlags(z.createIf(i,z.createStatement(z.createAssignment(z.createElementAccess(r,o),z.createElementAccess(n,o)))),1)])),z.createStatement(z.createCall(y,void 0,[r]))],!0))}function g(e){switch(e.kind){case 238:return(i=e).importClause&&C(z.getLocalNameForExternalImport(i,f)),w(i)?(a=z.getOriginalNodeId(i),A[a]=b(A[a],i)):s=b(s,i),z.singleOrMany(s);case 237:return a=e,z.Debug.assert(z.isExternalModuleImportEqualsDeclaration(a),"import= for internal module references should be handled in an earlier transformer."),C(z.getLocalNameForExternalImport(a,f)),w(a)?(i=z.getOriginalNodeId(a),A[i]=v(A[i],a)):r=v(r,a),z.singleOrMany(r);case 244:return;case 243:var t,n,o=e;return o.isExportEquals?void 0:(t=z.visitNode(o.expression,F,z.isExpression),(n=o.original)&&w(n)?(n=z.getOriginalNodeId(o),void(A[n]=E(A[n],z.createIdentifier("default"),t,!0))):G(z.createIdentifier("default"),t,!0));default:return L(e)}var r,i,s,a}function I(e){if(z.isBindingPattern(e.name))for(var t=0,n=e.name.elements;t<n.length;t++){var o=n[t];z.isOmittedExpression(o)||I(o)}else C(z.getSynthesizedClone(e.name))}function D(e){return 0==(2097152&z.getEmitFlags(e))&&(265===B.kind||0==(3&z.getOriginalNode(e).flags))}function N(e,t){t=t?i:s;return z.isBindingPattern(e.name)?z.flattenDestructuringAssignment(e,F,S,0,!1,t):e.initializer?t(e.name,z.visitNode(e.initializer,F,z.isExpression)):e.name}function i(e,t,n){return o(e,t,n,!0)}function s(e,t,n){return o(e,t,n,!1)}function o(e,t,n,o){return C(z.getSynthesizedClone(e)),o?P(e,U(z.setTextRange(z.createAssignment(e,t),n))):U(z.setTextRange(z.createAssignment(e,t),n))}function w(e){return 0!=(4194304&z.getEmitFlags(e))}function b(e,t){if(!m.exportEquals){t=t.importClause;if(t){t.name&&(e=T(e,t));var n=t.namedBindings;if(n)switch(n.kind){case 240:e=T(e,n);break;case 241:for(var o=0,r=n.elements;o<r.length;o++)e=T(e,r[o])}}}return e}function v(e,t){return m.exportEquals?e:T(e,t)}function O(e,t,n){if(!m.exportEquals)for(var o=0,r=t.declarationList.declarations;o<r.length;o++){var i=r[o];(i.initializer||n)&&(e=function e(t,n,o){if(m.exportEquals)return t;if(z.isBindingPattern(n.name))for(var r=0,i=n.name.elements;r<i.length;r++){var s=i[r];z.isOmittedExpression(s)||(t=e(t,s,o))}else{var a;z.isGeneratedIdentifier(n.name)||(a=void 0,o&&(t=E(t,n.name,z.getLocalName(n)),a=z.idText(n.name)),t=T(t,n,a))}return t}(e,i,n))}return e}function R(e,t){var n;return m.exportEquals||(z.hasModifier(t,1)&&(e=E(e,n=z.hasModifier(t,512)?z.createLiteral("default"):t.name,z.getLocalName(t)),n=z.getTextOfIdentifierOrLiteral(n)),t.name&&(e=T(e,t,n))),e}function T(e,t,n){if(!m.exportEquals){var o=z.getDeclarationName(t),t=m.exportSpecifiers.get(z.idText(o));if(t)for(var r=0,i=t;r<i.length;r++){var s=i[r];s.name.escapedText!==n&&(e=E(e,s.name,o))}}return e}function E(e,t,n,o){return z.append(e,G(t,n,o))}function G(e,t,n){e=z.createStatement(P(e,t));return z.startOnNewLine(e),n||z.setEmitFlags(e,1536),e}function P(e,t){e=z.isIdentifier(e)?z.createLiteral(e):e;return z.setEmitFlags(t,1536|z.getEmitFlags(t)),z.setCommentRange(z.createCall(y,void 0,[e,t]),t)}function L(e){switch(e.kind){case 208:var t=e;if(!D(t.declarationList))return z.visitNode(t,F,z.isStatement);for(var n,o,r=z.hasModifier(t,1),i=w(t),s=0,a=t.declarationList.declarations;s<a.length;s++){var l=a[s];l.initializer?n=z.append(n,N(l,r&&!i)):I(l)}return n&&(o=z.append(o,z.setTextRange(z.createStatement(z.inlineExpressions(n)),t))),i?(E=z.getOriginalNodeId(t),A[E]=O(A[E],t,r)):o=O(o,t,!1),z.singleOrMany(o);case 228:return E=e,x=z.hasModifier(E,1)?z.append(x,z.updateFunctionDeclaration(E,E.decorators,z.visitNodes(E.modifiers,K,z.isModifier),E.asteriskToken,z.getDeclarationName(E,!0,!0),void 0,z.visitNodes(E.parameters,F,z.isParameterDeclaration),void 0,z.visitNode(E.body,F,z.isBlock))):z.append(x,z.visitEachChild(E,F,S)),void(w(E)?(t=z.getOriginalNodeId(E),A[t]=R(A[t],E)):x=R(x,E));case 229:return b=e,T=z.getLocalName(b),C(T),v=z.append(v,z.setTextRange(z.createStatement(z.createAssignment(T,z.setTextRange(z.createClassExpression(void 0,b.name,void 0,z.visitNodes(b.heritageClauses,F,z.isHeritageClause),z.visitNodes(b.members,F,z.isClassElement)),b))),b)),w(b)?(T=z.getOriginalNodeId(b),A[T]=R(A[T],b)):v=R(v,b),z.singleOrMany(v);case 214:return T=B,B=b=e,b=z.updateFor(b,M(b.initializer),z.visitNode(b.condition,F,z.isExpression),z.visitNode(b.incrementor,F,z.isExpression),z.visitNode(b.statement,L,z.isStatement)),B=T,b;case 215:return k=B,B=y=e,y=z.updateForIn(y,M(y.initializer),z.visitNode(y.expression,F,z.isExpression),z.visitNode(y.statement,L,z.isStatement,z.liftToBlock)),B=k,y;case 216:return k=B,B=y=e,y=z.updateForOf(y,y.awaitModifier,M(y.initializer),z.visitNode(y.expression,F,z.isExpression),z.visitNode(y.statement,L,z.isStatement,z.liftToBlock)),B=k,y;case 212:return f=e,z.updateDo(f,z.visitNode(f.statement,L,z.isStatement,z.liftToBlock),z.visitNode(f.expression,F,z.isExpression));case 213:return f=e,z.updateWhile(f,z.visitNode(f.expression,F,z.isExpression),z.visitNode(f.statement,L,z.isStatement,z.liftToBlock));case 222:return z.updateLabel(e,e.label,z.visitNode(e.statement,L,z.isStatement,z.liftToBlock));case 220:return m=e,z.updateWith(m,z.visitNode(m.expression,F,z.isExpression),z.visitNode(m.statement,L,z.isStatement,z.liftToBlock));case 221:return m=e,z.updateSwitch(m,z.visitNode(m.expression,F,z.isExpression),z.visitNode(m.caseBlock,L,z.isCaseBlock));case 235:return _=B,B=e,h=z.updateCaseBlock(e,z.visitNodes(e.clauses,L,z.isCaseOrDefaultClause)),B=_,h;case 257:return _=e,z.updateCaseClause(_,z.visitNode(_.expression,F,z.isExpression),z.visitNodes(_.statements,L,z.isStatement));case 258:case 224:return z.visitEachChild(e,L,S);case 260:return h=B,B=e,g=z.updateCatchClause(e,e.variableDeclaration,z.visitNode(e.block,L,z.isBlock)),B=h,g;case 207:return g=B,B=e,p=z.visitEachChild(e,L,S),B=g,p;case 290:return w(p=e)&&208===p.original.kind&&(u=z.getOriginalNodeId(p),d=z.hasModifier(p.original,1),A[u]=O(A[u],p.original,d)),p;case 291:return u=e,d=z.getOriginalNodeId(u),(c=A[d])?(delete A[d],z.append(c,u)):u;default:return F(e)}var c,u,d,p,g,h,_,m,f,y,k,b,v,T,E}function M(e){if(!e)return e;if(i=e,z.isVariableDeclarationList(i)&&D(i)){for(var t=void 0,n=0,o=e.declarations;n<o.length;n++){var r=o[n],t=z.append(t,N(r,!1));r.initializer||I(r)}return t?z.inlineExpressions(t):z.createOmittedExpression()}var i;return z.visitEachChild(e,L,S)}function F(e){return 1024&e.transformFlags&&194===e.kind?n((t=e).left)?z.flattenDestructuringAssignment(t,F,S,0,!0):z.visitEachChild(t,F,S):z.isImportCall(e)?(t=e,z.createCall(z.createPropertyAccess(a,z.createIdentifier("import")),void 0,z.some(t.arguments)?[z.visitNode(t.arguments[0],F)]:[])):2048&e.transformFlags||67108864&e.transformFlags?z.visitEachChild(e,F,S):e;var t}function n(e){return z.isAssignmentExpression(e,!0)?n(e.left):z.isSpreadElement(e)?n(e.expression):z.isObjectLiteralExpression(e)?z.some(e.properties,n):z.isArrayLiteralExpression(e)?z.some(e.elements,n):z.isShorthandPropertyAssignment(e)?n(e.name):z.isPropertyAssignment(e)?n(e.initializer):!!z.isIdentifier(e)&&void 0!==(e=h.getReferencedExportContainer(e))&&265===e.kind}function K(e){switch(e.kind){case 84:case 79:return}return e}function j(e){var t,n;return z.isGeneratedIdentifier(e)||(n=h.getReferencedImportDeclaration(e)||h.getReferencedValueDeclaration(e))&&((e=h.getReferencedExportContainer(e,!1))&&265===e.kind&&(t=z.append(t,z.getDeclarationName(n))),t=z.addRange(t,m&&m.exportedBindings[z.getOriginalNodeId(n)])),t}function U(e){return(_=void 0===_?[]:_)[z.getNodeId(e)]=!0,e}}}(ts=ts||{}),function(c){c.transformES2015Module=function(r){var o,i=r.getCompilerOptions(),s=r.onEmitNode,a=r.onSubstituteNode;return r.onEmitNode=function(e,t,n){c.isSourceFile(t)?(s(e,o=t,n),o=void 0):s(e,t,n)},r.onSubstituteNode=function(e,t){if(t=a(e,t),c.isIdentifier(t)&&1===e){e=t;if(4096&c.getEmitFlags(e)){var n=c.getExternalHelpersModuleName(o);if(n)return c.createPropertyAccess(n,e)}return e}return t},r.enableEmitNotification(265),r.enableSubstitution(71),function(e){var t,n,o;return!e.isDeclarationFile&&(c.isExternalModule(e)||i.isolatedModules)?(t=c.getOrCreateExternalHelpersModuleNameIfNeeded(e,i))?(o=c.addPrologue(n=[],e.statements),c.append(n,c.createImportDeclaration(void 0,void 0,c.createImportClause(void 0,c.createNamespaceImport(t)),c.createLiteral(c.externalHelpersModuleNameText))),c.addRange(n,c.visitNodes(e.statements,l,c.isStatement,o)),c.updateSourceFileNode(e,c.setTextRange(c.createNodeArray(n),e.statements))):c.visitEachChild(e,l,r):e};function l(e){switch(e.kind){case 237:return;case 243:return e.isExportEquals?void 0:e}return e}}}(ts=ts||{}),function(S){S.getTransformers=function(e,t){var n=e.jsx,o=S.getEmitScriptTarget(e),r=S.getEmitModuleKind(e),e=[];return S.addRange(e,t&&t.before),e.push(S.transformTypeScript),2===n&&e.push(S.transformJsx),o<5&&e.push(S.transformESNext),o<4&&e.push(S.transformES2017),o<3&&e.push(S.transformES2016),o<2&&(e.push(S.transformES2015),e.push(S.transformGenerators)),e.push(function(){switch(r){case S.ModuleKind.ESNext:case S.ModuleKind.ES2015:return S.transformES2015Module;case S.ModuleKind.System:return S.transformSystemModule;default:return S.transformModule}}()),o<1&&e.push(S.transformES5),S.addRange(e,t&&t.after),e},S.transformNodes=function(e,t,n,o,r,i){for(var s,a,l,c=new Array(292),u=[],d=[],p=0,g=!1,h=function(e,t){return t},_=function(e,t,n){return n(e,t)},m=0,f={getCompilerOptions:function(){return n},getEmitResolver:function(){return e},getEmitHost:function(){return t},startLexicalEnvironment:function(){S.Debug.assert(0<m,"Cannot modify the lexical environment during initialization."),S.Debug.assert(m<2,"Cannot modify the lexical environment after transformation has completed."),S.Debug.assert(!g,"Lexical environment is suspended."),u[p]=s,d[p]=a,p++,a=s=void 0},suspendLexicalEnvironment:function(){S.Debug.assert(0<m,"Cannot modify the lexical environment during initialization."),S.Debug.assert(m<2,"Cannot modify the lexical environment after transformation has completed."),S.Debug.assert(!g,"Lexical environment is already suspended."),g=!0},resumeLexicalEnvironment:function(){S.Debug.assert(0<m,"Cannot modify the lexical environment during initialization."),S.Debug.assert(m<2,"Cannot modify the lexical environment after transformation has completed."),S.Debug.assert(g,"Lexical environment is not suspended."),g=!1},endLexicalEnvironment:function(){var e,t;return S.Debug.assert(0<m,"Cannot modify the lexical environment during initialization."),S.Debug.assert(m<2,"Cannot modify the lexical environment after transformation has completed."),S.Debug.assert(!g,"Lexical environment is suspended."),(s||a)&&(a&&(e=a.slice()),s)&&(t=S.createVariableStatement(void 0,S.createVariableDeclarationList(s)),e?e.push(t):e=[t]),s=u[--p],a=d[p],0===p&&(u=[],d=[]),e},hoistVariableDeclaration:function(e){S.Debug.assert(0<m,"Cannot modify the lexical environment during initialization."),S.Debug.assert(m<2,"Cannot modify the lexical environment after transformation has completed.");e=S.setEmitFlags(S.createVariableDeclaration(e),64);s?s.push(e):s=[e]},hoistFunctionDeclaration:function(e){S.Debug.assert(0<m,"Cannot modify the lexical environment during initialization."),S.Debug.assert(m<2,"Cannot modify the lexical environment after transformation has completed."),a?a.push(e):a=[e]},requestEmitHelper:function(e){S.Debug.assert(0<m,"Cannot modify the transformation context during initialization."),S.Debug.assert(m<2,"Cannot modify the transformation context after transformation has completed."),S.Debug.assert(!e.scoped,"Cannot request a scoped emit helper."),l=S.append(l,e)},readEmitHelpers:function(){S.Debug.assert(0<m,"Cannot modify the transformation context during initialization."),S.Debug.assert(m<2,"Cannot modify the transformation context after transformation has completed.");var e=l;return l=void 0,e},enableSubstitution:function(e){S.Debug.assert(m<2,"Cannot modify the transformation context after transformation has completed."),c[e]|=1},enableEmitNotification:function(e){S.Debug.assert(m<2,"Cannot modify the transformation context after transformation has completed."),c[e]|=2},isSubstitutionEnabled:T,isEmitNotificationEnabled:E,get onSubstituteNode(){return h},set onSubstituteNode(e){S.Debug.assert(m<1,"Cannot modify transformation hooks after initialization has completed."),S.Debug.assert(void 0!==e,"Value must not be 'undefined'"),h=e},get onEmitNode(){return _},set onEmitNode(e){S.Debug.assert(m<1,"Cannot modify transformation hooks after initialization has completed."),S.Debug.assert(void 0!==e,"Value must not be 'undefined'"),_=e}},y=0,k=o;y<k.length;y++){var b=k[y];S.disposeEmitNodes(S.getSourceFileOfNode(S.getParseTreeNode(b)))}S.performance.mark("beforeTransform");var v=S.chain.apply(void 0,r)(f),m=1,r=S.map(o,i?v:function(e){return!e||S.isSourceFile(e)&&e.isDeclarationFile?e:v(e)});return m=2,S.performance.mark("afterTransform"),S.performance.measure("transformTime","beforeTransform","afterTransform"),{transformed:r,substituteNode:function(e,t){return S.Debug.assert(m<3,"Cannot substitute a node after the result is disposed."),t&&T(t)&&h(e,t)||t},emitNodeWithNotification:function(e,t,n){S.Debug.assert(m<3,"Cannot invoke TransformationResult callbacks after the result is disposed."),t&&(E(t)?_(e,t,n):n(e,t))},dispose:function(){if(m<3){for(var e=0,t=o;e<t.length;e++){var n=t[e];S.disposeEmitNodes(S.getSourceFileOfNode(S.getParseTreeNode(n)))}l=_=h=d=a=u=s=void 0,m=3}}};function T(e){return 0!=(1&c[e.kind])&&0==(4&S.getEmitFlags(e))}function E(e){return 0!=(2&c[e.kind])||0!=(2&S.getEmitFlags(e))}}}(ts=ts||{}),function(v){var T={emittedLine:1,emittedColumn:1,sourceLine:1,sourceColumn:1,sourceIndex:0};function n(e){e<0?e=1+(-e<<1):e<<=1;var t="";do{var n=31&e;0<(e>>=5)&&(n|=32),t+=function(e){if(e<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e);throw TypeError(e+": not a 64 based value")}(n)}while(0<e);return t}v.createSourceMapWriter=function(o,r){var l,i,s,a,c,u,d,p,g=o.getCompilerOptions(),h=g.extendedDiagnostics,_=!(g.sourceMap||g.inlineSourceMap);return{initialize:function(e,t,n){_||(p&&f(),a=-1,c=i=l=void 0,u=T,d=0,(p={sourceMapFilePath:t,jsSourceMappingURL:g.inlineSourceMap?void 0:v.getBaseFileName(v.normalizeSlashes(t)),sourceMapFile:v.getBaseFileName(v.normalizeSlashes(e)),sourceMapSourceRoot:g.sourceRoot||"",sourceMapSources:[],inputSourceFileNames:[],sourceMapNames:[],sourceMapMappings:"",sourceMapSourcesContent:g.inlineSources?[]:void 0,sourceMapDecodedMappings:[]}).sourceMapSourceRoot=v.normalizeSlashes(p.sourceMapSourceRoot),p.sourceMapSourceRoot.length&&47!==p.sourceMapSourceRoot.charCodeAt(p.sourceMapSourceRoot.length-1)&&(p.sourceMapSourceRoot+=v.directorySeparator),g.mapRoot?(s=v.normalizeSlashes(g.mapRoot),265===n.kind&&(s=v.getDirectoryPath(v.getSourceFilePathInNewDir(n,o,s))),v.isRootedDiskPath(s)||v.isUrl(s)?p.jsSourceMappingURL=v.combinePaths(s,p.jsSourceMappingURL):(s=v.combinePaths(o.getCommonSourceDirectory(),s),p.jsSourceMappingURL=v.getRelativePathToDirectoryOrUrl(v.getDirectoryPath(v.normalizePath(e)),v.combinePaths(s,p.jsSourceMappingURL),o.getCurrentDirectory(),o.getCanonicalFileName,!0))):s=v.getDirectoryPath(v.normalizePath(e)))},reset:f,getSourceMapData:function(){return p},setSourceFile:b,emitPos:k,emitNodeWithSourceMap:function(e,t,n){if(_)return n(e,t);var o,r,i,s,a;t&&(o=(s=t.emitNode)&&s.flags,r=(i=(s=s&&s.sourceMapRange)||t).pos,i=i.end,(s=(s=s&&s.source)===(a=l)?void 0:s)&&b(s),287!==t.kind&&0==(16&o)&&0<=r&&k(m(r)),s&&b(a),64&o?(_=!0,n(e,t),_=!1):n(e,t),s&&b(s),287!==t.kind&&0==(32&o)&&0<=i&&k(i),s)&&b(a)},emitTokenWithSourceMap:function(e,t,n,o){var r;return _?o(t,n):(r=(e=e&&e.emitNode)&&e.flags,n=m((e=e&&e.tokenSourceMapRanges&&e.tokenSourceMapRanges[t])?e.pos:n),0==(128&r)&&0<=n&&k(n),n=o(t,n),e&&(n=e.end),0==(256&r)&&0<=n&&k(n),n)},getText:t,getSourceMappingURL:function(){var e;if(!_)return g.inlineSourceMap?(e=v.convertToBase64(t()),p.jsSourceMappingURL="data:application/json;base64,"+e):p.jsSourceMappingURL}};function m(e){return l.skipTrivia?l.skipTrivia(e):v.skipTrivia(i,e)}function f(){_||(p=d=u=c=a=s=l=void 0)}function y(){if(c&&c!==u){var e=u.emittedColumn;if(u.emittedLine===c.emittedLine)p.sourceMapMappings&&(p.sourceMapMappings+=",");else{for(var t=u.emittedLine;t<c.emittedLine;t++)p.sourceMapMappings+=";";e=1}p.sourceMapMappings+=n(c.emittedColumn-e),p.sourceMapMappings+=n(c.sourceIndex-u.sourceIndex),p.sourceMapMappings+=n(c.sourceLine-u.sourceLine),p.sourceMapMappings+=n(c.sourceColumn-u.sourceColumn),0<=c.nameIndex&&(v.Debug.assert(!1,"We do not support name index right now, Make sure to update updateLastEncodedAndRecordedSpans when we start using this"),p.sourceMapMappings+=n(c.nameIndex-d),d=c.nameIndex),u=c,p.sourceMapDecodedMappings.push(u)}}function k(e){var t,n;_||v.positionIsSynthesized(e)||(h&&v.performance.mark("beforeSourcemap"),(e=v.getLineAndCharacterOfPosition(l,e)).line++,e.character++,t=r.getLine(),n=r.getColumn(),!c||c.emittedLine!==t||c.emittedColumn!==n||c.sourceIndex===a&&(c.sourceLine>e.line||c.sourceLine===e.line&&c.sourceColumn>e.character)?(y(),c={emittedLine:t,emittedColumn:n,sourceLine:e.line,sourceColumn:e.character,sourceIndex:a}):(c.sourceLine=e.line,c.sourceColumn=e.character,c.sourceIndex=a),h&&(v.performance.mark("afterSourcemap"),v.performance.measure("Source Map","beforeSourcemap","afterSourcemap")))}function b(e){_||(i=(l=e).text,e=g.sourceRoot?o.getCommonSourceDirectory():s,e=v.getRelativePathToDirectoryOrUrl(e,l.fileName,o.getCurrentDirectory(),o.getCanonicalFileName,!0),-1===(a=v.indexOf(p.sourceMapSources,e))&&(a=p.sourceMapSources.length,p.sourceMapSources.push(e),p.inputSourceFileNames.push(l.fileName),g.inlineSources)&&p.sourceMapSourcesContent.push(l.text))}function t(){if(!_)return y(),JSON.stringify({version:3,file:p.sourceMapFile,sourceRoot:p.sourceMapSourceRoot,sources:p.sourceMapSources,names:p.sourceMapNames,mappings:p.sourceMapMappings,sourcesContent:p.sourceMapSourcesContent})}}}(ts=ts||{}),function(x){x.createCommentWriter=function(e,s){var a,t,l,c,u,g=e.extendedDiagnostics,d=x.getNewLineCharacter(e),h=-1,_=-1,m=-1,f=!1,y=e.removeComments;return{reset:function(){u=c=l=t=void 0},setWriter:function(e){a=e},setSourceFile:function(e){l=(t=e).text,c=x.getLineStarts(t),u=void 0},emitNodeWithComments:function(e,t,n){var o,r,i,s,a,l,c,u,d,p;y?n(e,t):t&&(f=!1,r=(o=t.emitNode)&&o.flags,i=(s=o&&o.commentRange||t).pos,s=s.end,i<0&&s<0||i===s?k(e,t,o,r,n):(g&&x.performance.mark("preEmitNodeWithComment"),a=287!==t.kind,l=i<0||0!=(512&r)||10===t.kind,c=s<0||0!=(1024&r)||10===t.kind,l||v(i,a),u=h,d=_,p=m,l||(h=i),c||(_=s,227===t.kind&&(m=s)),g&&x.performance.measure("commentTime","preEmitNodeWithComment"),k(e,t,o,r,n),g&&x.performance.mark("postEmitNodeWithComment"),h=u,_=d,m=p,!c&&a&&S(s,T),g&&x.performance.measure("commentTime","postEmitNodeWithComment")))},emitBodyWithDetachedComments:function(e,t,n){g&&x.performance.mark("preEmitBodyWithDetachedComments");var o=t.pos,r=t.end,i=x.getEmitFlags(e),r=y||r<0||0!=(1024&i);o<0||0!=(512&i)||(o=x.emitDetachedComments(l,c,a,C,t,d,y))&&(u?u.push(o):u=[o]),g&&x.performance.measure("commentTime","preEmitBodyWithDetachedComments"),2048&i&&!y?(y=!0,n(e),y=!1):n(e),g&&x.performance.mark("beginEmitBodyWithDetachedCommetns"),r||(v(t.end,!0),f&&!a.isAtStartOfLine()&&a.writeLine()),g&&x.performance.measure("commentTime","beginEmitBodyWithDetachedCommetns")},emitTrailingCommentsOfPosition:function(e,t){y||(g&&x.performance.mark("beforeEmitTrailingCommentsOfPosition"),S(e,t?T:r),g&&x.performance.measure("commentTime","beforeEmitTrailingCommentsOfPosition"))},emitLeadingCommentsOfPosition:function(e){y||-1===e||v(e,!0)}};function k(e,t,n,o,r){var i=n&&n.leadingComments,r=(x.some(i)&&(g&&x.performance.mark("preEmitNodeWithSynthesizedComments"),x.forEach(i,p),g)&&x.performance.measure("commentTime","preEmitNodeWithSynthesizedComments"),i=e,e=t,t=r,2048&o?(y=!0,t(i,e),y=!1):t(i,e),n&&n.trailingComments);x.some(r)&&(g&&x.performance.mark("postEmitNodeWithSynthesizedComments"),x.forEach(r,b),g)&&x.performance.measure("commentTime","postEmitNodeWithSynthesizedComments")}function p(e){2===e.kind&&a.writeLine(),n(e),e.hasTrailingNewLine||2===e.kind?a.writeLine():a.write(" ")}function b(e){a.isAtStartOfLine()||a.write(" "),n(e),e.hasTrailingNewLine&&a.writeLine()}function n(e){var t=3===e.kind?"/*"+e.text+"*/":"//"+e.text,e=3===e.kind?x.computeLineStarts(t):void 0;x.writeCommentRange(t,e,a,0,t.length,d)}function v(e,t){f=!1,t?E(e,i):0===e&&E(e,o)}function o(e,t,n,o,r){x.isRecognizedTripleSlashComment(l,e,t)&&i(e,t,0,o,r)}function i(e,t,n,o,r){f||(x.emitNewLineBeforeLeadingCommentOfPosition(c,a,r,e),f=!0),s&&s(e),x.writeCommentRange(l,c,a,e,t,d),s&&s(t),o?a.writeLine():a.write(" ")}function T(e,t,n,o){a.isAtStartOfLine()||a.write(" "),s&&s(e),x.writeCommentRange(l,c,a,e,t,d),s&&s(t),o&&a.writeLine()}function r(e,t,n,o){s&&s(e),x.writeCommentRange(l,c,a,e,t,d),s&&s(t),o?a.writeLine():a.write(" ")}function E(e,t){var n,o;-1!==h&&e===h||(o=e,void 0!==u&&x.lastOrUndefined(u).nodePos===o?(o=t,n=x.lastOrUndefined(u).detachedCommentEndPos,u.length-1?u.pop():u=void 0,x.forEachLeadingCommentRange(l,n,o,n)):x.forEachLeadingCommentRange(l,e,t,e))}function S(e,t){(-1===_||e!==_&&e!==m)&&x.forEachTrailingCommentRange(l,e,t)}function C(e,t,n,o,r,i){s&&s(o),x.writeCommentRange(e,t,n,o,r,i),s&&s(r)}}}(ts=ts||{}),function(fe){function s(s,u,n,M,e,F){var d,p,g,h,_,m,f,o,y,r,i,U,t=266===e.kind?e.sourceFiles:[e],a=266===e.kind,l=s.getNewLine(),c=s.getCompilerOptions();K();var k,b,v,T=!1,E=c.removeComments?fe.noop:function(e){var t;e&&(t=fe.getJSDocCommentRanges(e,y),fe.emitNewLineBeforeLeadingComments(r,m,e,t),fe.emitComments(y,r,m,t,!1,!0,l,fe.writeCommentRange))},H=c.stripInternal?function(e){var t;e&&(t=fe.getLeadingCommentRanges(y,e.pos),fe.forEach(t,G)||me(e))}:me,S=!0,C=[],x="",V=[],W=!1,B=[];return fe.forEach(t,function(t){var e;fe.isSourceFileJavaScript(t)||(c.noResolve||fe.forEach(t.referencedFiles,function(e){var n,o,r,i,e=fe.tryResolveScriptReference(s,t,e);e&&!fe.contains(V,e)&&(o=!a&&!W,i=!1,(n=e).isDeclarationFile?r=n.fileName:fe.forEachEmittedFile(s,function(e,t){t=266===t.kind;t&&!o||(fe.Debug.assert(!!e.declarationFilePath||fe.isSourceFileJavaScript(n),"Declaration file is not present only for javascript files"),r=e.declarationFilePath||e.jsFilePath,i=t)},n,F),r&&(r=fe.getRelativePathToDirectoryOrUrl(fe.getDirectoryPath(fe.normalizeSlashes(M)),r,s.getCurrentDirectory(),s.getCanonicalFileName,!1),x+='/// <reference path="'+r+'" />'+l),i&&(W=!0),V.push(e))}),o=!1,a&&fe.isExternalModule(t)?fe.isExternalModule(t)&&(S=!1,d('declare module "'+fe.getResolvedExternalModuleName(s,t)+'" {'),p(),g(),Z(t),h(),d("}"),p()):(S=!0,Z(t)),C.length&&(e=m,fe.forEach(C,function(e){if(e.isVisible&&!e.asynchronousOutput){fe.Debug.assert(238===e.node.kind),K(),fe.Debug.assert(0===e.indent||1===e.indent&&a);for(var t=0;t<e.indent;t++)g();for(re(e.node),e.asynchronousOutput=m.getText(),t=0;t<e.indent;t++)h()}}),j(e),B=B.concat(C),C=[]),!a&&fe.isExternalModule(t)&&t.moduleAugmentations.length&&!o&&(d("export {};"),p()))}),v&&fe.forEachKey(v,function(e){x+='/// <reference types="'+e+'" />'+l}),{reportedDeclarationError:T,moduleElementDeclarationEmitInfo:B,synchronousDeclarationOutput:m.getText(),referencesOutput:x};function G(e){e=y.substring(e.pos,e.end);return fe.stringContains(e,"@internal")}function K(){var e=fe.createTextWriter(l);e.trackSymbol=Y,e.reportInaccessibleThisError=J,e.reportPrivateInBaseOfClassExpression=q,e.writeKeyword=e.write,e.writeOperator=e.write,e.writePunctuation=e.write,e.writeSpace=e.write,e.writeStringLiteral=e.writeLiteral,e.writeParameter=e.write,e.writeProperty=e.write,e.writeSymbol=e.write,j(e)}function j(e){d=(m=e).write,_=e.writeTextOfNode,p=e.writeLine,g=e.increaseIndent,h=e.decreaseIndent}function z(e){var t=m;fe.forEach(e,function(e){226===e.kind?t=e.parent.parent:241===e.kind||242===e.kind||239===e.kind?fe.Debug.fail("We should be getting ImportDeclaration instead to write"):t=e;var t,e=fe.forEach(C,function(e){return e.node===t?e:void 0});if(e=!e&&b?fe.forEach(b,function(e){return e.node===t?e:void 0}):e)if(238===e.node.kind)e.isVisible=!0;else{K();for(var n=e.indent;n;n--)g();233===t.kind&&(fe.Debug.assert(void 0===b),b=[]),ne(t),233===t.kind&&(e.subModuleElementDeclarationEmitInfo=b,b=void 0),e.asynchronousOutput=m.getText()}}),j(t)}function X(e){if(e){v=v||fe.createMap();for(var t=0,n=e;t<n.length;t++){var o=n[t];v.has(o)||v.set(o,o)}}}function $(e){var t;0===e.accessibility?e&&e.aliasesToMakeVisible&&z(e.aliasesToMakeVisible):(T=!0,(t=m.getSymbolAccessibilityDiagnostic(e))&&(t.typeName?n.add(fe.createDiagnosticForNode(e.errorNode||t.errorNode,t.diagnosticMessage,fe.getTextOfNodeFromSourceText(y,t.typeName),e.errorSymbolName,e.errorModuleName)):n.add(fe.createDiagnosticForNode(e.errorNode||t.errorNode,t.diagnosticMessage,e.errorSymbolName,e.errorModuleName))))}function Y(e,t,n){$(u.isSymbolAccessible(e,t,n,!0)),X(u.getTypeReferenceDirectivesForSymbol(e,n))}function q(e){k&&(T=!0,n.add(fe.createDiagnosticForNode(k,fe.Diagnostics.Property_0_of_exported_class_expression_may_not_be_private_or_protected,e)))}function J(){k&&(T=!0,n.add(fe.createDiagnosticForNode(k,fe.Diagnostics.The_inferred_type_of_0_references_an_inaccessible_this_type_A_type_annotation_is_necessary,fe.declarationNameToString(k))))}function A(e,t,n){m.getSymbolAccessibilityDiagnostic=n,d(": ");n=146===e.kind&&(u.isRequiredInitializedParameter(e)||u.isOptionalUninitializedParameterProperty(e));t&&!n?w(t):(k=e.name,u.writeTypeOfDeclaration(e,f,16388|(n?8192:0),m),k=void 0)}function I(e){for(var t=0,n=e;t<n.length;t++){var o=n[t];H(o)}}function Q(e,t,n,o){for(var r=m.getTextPos(),i=0,s=e;i<s.length;i++){var a=s[i];o&&!o(a)||(r!==m.getTextPos()&&d(t),r=m.getTextPos(),n(a))}}function D(e,t,n){Q(e,", ",t,n)}function N(e,t){m.getSymbolAccessibilityDiagnostic=t,w(e)}function w(e){switch(e.kind){case 119:case 136:case 133:case 122:case 134:case 137:case 105:case 139:case 95:case 130:case 169:case 173:return _(y,e);case 201:return void(fe.isEntityNameExpression((s=e).expression)&&(fe.Debug.assert(71===s.expression.kind||179===s.expression.kind),l(s.expression),s.typeArguments)&&(d("<"),D(s.typeArguments,w),d(">")));case 159:return l((s=e).typeName),void(s.typeArguments&&(d("<"),D(s.typeArguments,w),d(">")));case 162:return i=e,d("typeof "),void l(i.exprName);case 164:return w(e.elementType),void d("[]");case 165:return i=e,d("["),D(i.elementTypes,w),void d("]");case 166:return void Q(e.types," | ",w);case 167:return void Q(e.types," & ",w);case 168:return r=e,d("("),w(r.type),void d(")");case 170:return r=e,d(fe.tokenToString(r.operator)),d(" "),void w(r.type);case 171:return w((o=e).objectType),d("["),w(o.indexType),void d("]");case 172:return o=f,f=n=e,d("{"),p(),g(),n.readonlyToken&&d("readonly "),d("["),a(n.typeParameter.name),d(" in "),w(n.typeParameter.constraint),d("]"),n.questionToken&&d("?"),d(": "),w(n.type),d(";"),p(),h(),d("}"),void(f=o);case 160:case 161:return ge(e);case 163:return n=e,d("{"),n.members.length&&(p(),g(),I(n.members),h()),void d("}");case 71:case 143:return l(e);case 158:return _(y,(t=e).parameterName),d(" is "),void w(t.type)}var t,n,o,r,i,s;function a(e){var t;71===e.kind?_(y,e):(t=143===e.kind?e.left:e.expression,e=143===e.kind?e.right:e.name,a(t),d("."),_(y,e))}function l(e){$(u.isEntityNameVisible(e,237===e.parent.kind?e.parent:f)),X(u.getTypeReferenceDirectivesForEntityName(e)),a(e)}}function Z(e){y=e.text,r=fe.getLineStarts(e),i=e.identifiers,U=fe.isExternalModule(e),f=e,fe.emitDetachedComments(y,r,m,fe.writeCommentRange,e,l,!0),I(e.statements)}function ee(e,t,n,o){t=function(e){if(!i.has(e))return e;for(var t=0;;){var n=e+"_"+ ++t;if(!i.has(n))return n}}(t);return o&&d("declare "),d("const "),d(t),d(": "),m.getSymbolAccessibilityDiagnostic=function(){return n},u.writeTypeOfExpression(e,f,16388,m),d(";"),p(),t}function te(e,t){var n;t?ne(e):(237===e.kind||265===e.parent.kind&&U)&&(t=void 0,(b&&265!==e.parent.kind?b:(238===e.kind&&(n=e).importClause&&(t=n.importClause.name&&u.isDeclarationVisible(n.importClause)||oe(n.importClause.namedBindings)),C)).push({node:e,outputPos:m.getTextPos(),indent:m.getIndent(),isVisible:t}))}function ne(e){switch(e.kind){case 228:return pe(e);case 208:return c=e,fe.every(c.declarationList&&c.declarationList.declarations,function(e){return e.name&&fe.isEmptyBindingPattern(e.name)})||(E(c),O(c),fe.isLet(c.declarationList)?d("let "):fe.isConst(c.declarationList)?d("const "):d("var "),D(c.declarationList.declarations,ue,u.isDeclarationVisible),d(";"),p());case 230:return E(c=e),O(c),d("interface "),_(y,c.name),a=f,L((f=c).typeParameters),(l=fe.filter(fe.getInterfaceBaseTypeNodes(c),function(e){return fe.isEntityNameExpression(e.expression)}))&&l.length&&le(l,!1),d(" {"),p(),g(),I(c.members),h(),d("}"),p(),f=a;case 229:return l=f,f=a=e,(s=fe.getClassExtendsHeritageClauseElement(a))&&!fe.isEntityNameExpression(s.expression)&&(i=95===s.expression.kind?"null":ee(s.expression,a.name.escapedText+"_base",{diagnosticMessage:fe.Diagnostics.extends_clause_of_exported_class_0_has_or_is_using_private_name_1,errorNode:s,typeName:a.name},!fe.findAncestor(a,function(e){return 233===e.kind}))),E(a),O(a),fe.hasModifier(a,128)&&d("abstract "),d("class "),_(y,a.name),L(a.typeParameters),s&&(fe.isEntityNameExpression(s.expression)?le([s],!1):(d(" extends "),d(i),s.typeArguments&&(d("<"),D(s.typeArguments,w),d(">")))),le(fe.getClassImplementsHeritageClauseElements(a),!0),d(" {"),p(),g(),(i=fe.getFirstConstructorWithBody(a))&&fe.forEach(i.parameters,function(e){fe.hasModifier(e,92)&&ce(e)}),I(a.members),h(),d("}"),p(),f=l;case 231:return s=f,E(f=r=e),O(r),d("type "),_(y,r.name),L(r.typeParameters),d(" = "),N(r.type,function(){return{diagnosticMessage:fe.Diagnostics.Exported_type_alias_0_has_or_is_using_private_name_1,errorNode:r.type,typeName:r.name}}),d(";"),p(),f=s;case 232:return E(o=e),O(o),fe.isConst(o)&&d("const "),d("enum "),_(y,o.name),d(" {"),p(),g(),I(o.members),h(),d("}"),p();case 233:var t=e;for(E(t),O(t),fe.isGlobalScopeAugmentation(t)?d("global "):(16&t.flags?d("namespace "):d("module "),fe.isExternalModuleAugmentation(t)?P(t):_(y,t.name));t.body&&234!==t.body.kind;)t=t.body,d("."),_(y,t.name);o=f;return void(t.body?(f=t,d(" {"),p(),g(),I(t.body.statements),h(),d("}"),p(),f=o):d(";"));case 237:return E(n=e),fe.hasModifier(n,1)&&d("export "),d("import "),_(y,n.name),d(" = "),fe.isInternalModuleImportEqualsDeclaration(n)?(N(n.moduleReference,function(){return{diagnosticMessage:fe.Diagnostics.Import_declaration_0_is_using_private_name_1,errorNode:n,typeName:n.name}}),d(";")):(d("require("),P(n),d(");")),m.writeLine();case 238:return re(e);default:fe.Debug.fail("Unknown symbol kind")}var n,o,r,i,s,a,l,c}function O(e){var t;265===e.parent.kind&&(1&(t=fe.getModifierFlags(e))&&d("export "),512&t?d("default "):230!==e.kind&&S&&d("declare "))}function R(e){8&e?d("private "):16&e&&d("protected "),32&e&&d("static "),64&e&&d("readonly "),128&e&&d("abstract ")}function oe(e){if(e)return 240===e.kind?u.isDeclarationVisible(e):fe.forEach(e.elements,function(e){return u.isDeclarationVisible(e)})}function re(e){var t;E(e),fe.hasModifier(e,1)&&d("export "),d("import "),e.importClause&&(t=m.getTextPos(),e.importClause.name&&u.isDeclarationVisible(e.importClause)&&_(y,e.importClause.name),e.importClause.namedBindings&&oe(e.importClause.namedBindings)&&(t!==m.getTextPos()&&d(", "),240===e.importClause.namedBindings.kind?(d("* as "),_(y,e.importClause.namedBindings.name)):(d("{ "),D(e.importClause.namedBindings.elements,ie,u.isDeclarationVisible),d(" }"))),d(" from ")),P(e),d(";"),m.writeLine()}function P(e){var t;if(o=o||233!==e.kind,9===(t=237===e.kind?fe.getExternalModuleImportEqualsDeclarationExpression(e):233===e.kind?e.name:e.moduleSpecifier).kind&&a&&(c.out||c.outFile)){e=fe.getExternalModuleNameFromDeclaration(s,u,e);if(e)return d('"'),d(e),d('"')}_(y,t)}function ie(e){e.propertyName&&(_(y,e.propertyName),d(" as ")),_(y,e.name)}function se(e){ie(e),z(u.collectLinkedAliases(e.propertyName||e.name))}function ae(e){return 151===e.parent.kind&&fe.hasModifier(e.parent,8)}function L(e){e&&(d("<"),D(e,function(t){function e(){var e;switch(t.parent.kind){case 229:e=fe.Diagnostics.Type_parameter_0_of_exported_class_has_or_is_using_private_name_1;break;case 230:e=fe.Diagnostics.Type_parameter_0_of_exported_interface_has_or_is_using_private_name_1;break;case 156:e=fe.Diagnostics.Type_parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1;break;case 155:e=fe.Diagnostics.Type_parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1;break;case 151:case 150:e=fe.hasModifier(t.parent,32)?fe.Diagnostics.Type_parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:229===t.parent.parent.kind?fe.Diagnostics.Type_parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:fe.Diagnostics.Type_parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1;break;case 228:e=fe.Diagnostics.Type_parameter_0_of_exported_function_has_or_is_using_private_name_1;break;case 231:e=fe.Diagnostics.Type_parameter_0_of_exported_type_alias_has_or_is_using_private_name_1;break;default:fe.Debug.fail("This is unknown parent for type parameter: "+t.parent.kind)}return{diagnosticMessage:e,errorNode:t,typeName:t.name}}g(),E(t),h(),_(y,t.name),t.constraint&&!ae(t)&&(d(" extends "),160===t.parent.kind||161===t.parent.kind||t.parent.parent&&163===t.parent.parent.kind?(fe.Debug.assert(151===t.parent.kind||150===t.parent.kind||160===t.parent.kind||161===t.parent.kind||155===t.parent.kind||156===t.parent.kind),w(t.constraint)):N(t.constraint,e)),t.default&&!ae(t)&&(d(" = "),160===t.parent.kind||161===t.parent.kind||t.parent.parent&&163===t.parent.parent.kind?(fe.Debug.assert(151===t.parent.kind||150===t.parent.kind||160===t.parent.kind||161===t.parent.kind||155===t.parent.kind||156===t.parent.kind),w(t.default)):N(t.default,e))}),d(">"))}function le(e,t){e&&(d(t?" implements ":" extends "),D(e,function(e){fe.isEntityNameExpression(e.expression)?N(e,function(){return{diagnosticMessage:229===e.parent.parent.kind?t?fe.Diagnostics.Implements_clause_of_exported_class_0_has_or_is_using_private_name_1:fe.Diagnostics.extends_clause_of_exported_class_0_has_or_is_using_private_name_1:fe.Diagnostics.extends_clause_of_exported_interface_0_has_or_is_using_private_name_1,errorNode:e,typeName:fe.getNameOfDeclaration(e.parent.parent)}}):t||95!==e.expression.kind||d("null")}))}function ce(e){fe.hasDynamicName(e)||(E(e),R(fe.getModifierFlags(e)),ue(e),d(";"),p())}function ue(t){function n(e){return 226===t.kind?e.errorModuleName?2===e.accessibility?fe.Diagnostics.Exported_variable_0_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:fe.Diagnostics.Exported_variable_0_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Exported_variable_0_has_or_is_using_private_name_1:149===t.kind||148===t.kind||146===t.kind&&fe.hasModifier(t.parent,8)?fe.hasModifier(t,32)?e.errorModuleName?2===e.accessibility?fe.Diagnostics.Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:fe.Diagnostics.Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Public_static_property_0_of_exported_class_has_or_is_using_private_name_1:229===t.parent.kind||146===t.kind?e.errorModuleName?2===e.accessibility?fe.Diagnostics.Public_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:fe.Diagnostics.Public_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Public_property_0_of_exported_class_has_or_is_using_private_name_1:e.errorModuleName?fe.Diagnostics.Property_0_of_exported_interface_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Property_0_of_exported_interface_has_or_is_using_private_name_1:void 0}function e(e){for(var t=[],n=0,o=e.elements;n<o.length;n++){var r=o[n];200!==r.kind&&t.push(r)}D(t,i)}function i(t){t.name&&(fe.isBindingPattern(t.name)?e(t.name):(_(y,t.name),A(t,void 0,function(e){e=n(e);return void 0!==e?{diagnosticMessage:e,errorNode:t,typeName:t.name}:void 0})))}226===t.kind&&!u.isDeclarationVisible(t)||(fe.isBindingPattern(t.name)?e(t.name):(_(y,t.name),(149===t.kind||148===t.kind||146===t.kind&&!fe.isParameterPropertyDeclaration(t))&&fe.hasQuestionToken(t)&&d("?"),149!==t.kind&&148!==t.kind||163!==t.parent.kind?u.isLiteralConstDeclaration(t)?(d(" = "),u.writeLiteralConstValue(t,m)):fe.hasModifier(t,8)||A(t,t.type,function(e){e=n(e);return void 0!==e?{diagnosticMessage:e,errorNode:t,typeName:t.name}:void 0}):de(t)))}function de(e){e.type&&(d(": "),w(e.type))}function pe(e){fe.hasDynamicName(e)||u.isImplementationOfOverload(e)||(E(e),228===e.kind?O(e):151!==e.kind&&152!==e.kind||R(fe.getModifierFlags(e)),228===e.kind?(d("function "),_(y,e.name)):152===e.kind?d("constructor"):(_(y,e.name),fe.hasQuestionToken(e)&&d("?")),he(e))}function ge(e){E(e),he(e)}function he(n){var e=f,t=!1;if(157===(f=n).kind)R(fe.getModifierFlags(n)),d("[");else{if(152===n.kind&&fe.hasModifier(n,8))return d("();"),p();156===n.kind||161===n.kind?d("new "):160===n.kind&&(r=m.getText(),n.typeParameters)&&"<"===r.charAt(r.length-1)&&(t=!0,d("(")),L(n.typeParameters),d("(")}D(n.parameters,_e),157===n.kind?d("]"):d(")");var o,r=160===n.kind||161===n.kind;r||163===n.parent.kind?n.type&&(d(r?" => ":": "),w(n.type)):152===n.kind||fe.hasModifier(n,8)||(o=n,m.getSymbolAccessibilityDiagnostic=function(e){var t;switch(n.kind){case 156:t=e.errorModuleName?fe.Diagnostics.Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:fe.Diagnostics.Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_0;break;case 155:t=e.errorModuleName?fe.Diagnostics.Return_type_of_call_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:fe.Diagnostics.Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_name_0;break;case 157:t=e.errorModuleName?fe.Diagnostics.Return_type_of_index_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:fe.Diagnostics.Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_name_0;break;case 151:case 150:t=fe.hasModifier(n,32)?e.errorModuleName?2===e.accessibility?fe.Diagnostics.Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:fe.Diagnostics.Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:fe.Diagnostics.Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_name_0:229===n.parent.kind?e.errorModuleName?2===e.accessibility?fe.Diagnostics.Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:fe.Diagnostics.Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:fe.Diagnostics.Return_type_of_public_method_from_exported_class_has_or_is_using_private_name_0:e.errorModuleName?fe.Diagnostics.Return_type_of_method_from_exported_interface_has_or_is_using_name_0_from_private_module_1:fe.Diagnostics.Return_type_of_method_from_exported_interface_has_or_is_using_private_name_0;break;case 228:t=e.errorModuleName?2===e.accessibility?fe.Diagnostics.Return_type_of_exported_function_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:fe.Diagnostics.Return_type_of_exported_function_has_or_is_using_name_0_from_private_module_1:fe.Diagnostics.Return_type_of_exported_function_has_or_is_using_private_name_0;break;default:fe.Debug.fail("This is unknown kind for signature: "+n.kind)}return{diagnosticMessage:t,errorNode:n.name||n}},d(": "),o.type?w(o.type):(k=o.name,u.writeReturnTypeOfSignatureDeclaration(o,f,16388,m),k=void 0)),f=e,r?t&&d(")"):(d(";"),p())}function _e(t){function n(e){174===e.kind?(d("{"),D(e.elements,o),d("}")):175===e.kind&&(d("["),D(e=e.elements,o),e&&e.hasTrailingComma&&d(", "),d("]"))}function o(e){200===e.kind?d(" "):176===e.kind&&(e.propertyName&&(_(y,e.propertyName),d(": ")),e.name)&&(fe.isBindingPattern(e.name)?n(e.name):(fe.Debug.assert(71===e.name.kind),e.dotDotDotToken&&d("..."),_(y,e.name)))}g(),E(t),t.dotDotDotToken&&d("..."),fe.isBindingPattern(t.name)?n(t.name):_(y,t.name),u.isOptionalParameter(t)&&d("?"),h(),160===t.parent.kind||161===t.parent.kind||163===t.parent.parent.kind?de(t):fe.hasModifier(t.parent,8)||A(t,t.type,function(e){e=function(e){switch(t.parent.kind){case 152:return e.errorModuleName?2===e.accessibility?fe.Diagnostics.Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:fe.Diagnostics.Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_name_1;case 156:return e.errorModuleName?fe.Diagnostics.Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1;case 155:return e.errorModuleName?fe.Diagnostics.Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1;case 157:return e.errorModuleName?fe.Diagnostics.Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_private_name_1;case 151:case 150:return fe.hasModifier(t.parent,32)?e.errorModuleName?2===e.accessibility?fe.Diagnostics.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:fe.Diagnostics.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:229===t.parent.parent.kind?e.errorModuleName?2===e.accessibility?fe.Diagnostics.Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:fe.Diagnostics.Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:e.errorModuleName?fe.Diagnostics.Parameter_0_of_method_from_exported_interface_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1;case 228:return e.errorModuleName?2===e.accessibility?fe.Diagnostics.Parameter_0_of_exported_function_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:fe.Diagnostics.Parameter_0_of_exported_function_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Parameter_0_of_exported_function_has_or_is_using_private_name_1;default:fe.Debug.fail("This is unknown parent for parameter: "+t.parent.kind)}}(e);return void 0!==e?{diagnosticMessage:e,errorNode:t,typeName:t.name}:void 0})}function me(e){switch(e.kind){case 228:case 233:case 237:case 230:case 229:case 231:case 232:return te(e,u.isDeclarationVisible(e));case 208:return te(e,fe.forEach(e.declarationList.declarations,function(e){return u.isDeclarationVisible(e)}));case 238:return te(e,!e.importClause);case 244:return E(i=e),d("export "),i.exportClause?(d("{ "),D(i.exportClause.elements,se),d(" }")):d("*"),i.moduleSpecifier&&(d(" from "),P(i)),d(";"),void m.writeLine();case 152:case 151:case 150:return pe(e);case 156:case 155:case 157:return ge(e);case 153:case 154:return i=e,void(fe.hasDynamicName(i)||i===(r=fe.getAllAccessorDeclarations(i.parent.members,i)).firstAccessor&&(E(r.getAccessor),E(r.setAccessor),R(fe.getModifierFlags(i)|(r.setAccessor?0:64)),_(y,i.name),fe.hasModifier(i,8)||(!(o=s(n=i))&&(o=s(r=153===i.kind?r.setAccessor:r.getAccessor))&&(n=r),A(i,o,function(e){return 154===n.kind?{diagnosticMessage:fe.hasModifier(n.parent,32)?e.errorModuleName?fe.Diagnostics.Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_name_1:e.errorModuleName?fe.Diagnostics.Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:fe.Diagnostics.Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_name_1,errorNode:n.parameters[0],typeName:n.name}:{diagnosticMessage:fe.hasModifier(n,32)?e.errorModuleName?2===e.accessibility?fe.Diagnostics.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:fe.Diagnostics.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:fe.Diagnostics.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_name_0:e.errorModuleName?2===e.accessibility?fe.Diagnostics.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:fe.Diagnostics.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:fe.Diagnostics.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_name_0,errorNode:n.name,typeName:void 0}})),d(";"),p()));case 149:case 148:return ce(e);case 264:r=e;return E(r),_(y,r.name),void 0!==(r=u.getConstantValue(r))&&(d(" = "),d(fe.getTextOfConstantValue(r))),d(","),void p();case 243:return 71===(o=e).expression.kind?(d(o.isExportEquals?"export = ":"export default "),_(y,o.expression)):(t=ee(o.expression,"_default",{diagnosticMessage:fe.Diagnostics.Default_export_of_the_module_has_or_is_using_private_name_0,errorNode:o},S),d(o.isExportEquals?"export = ":"export default "),d(t)),d(";"),p(),void(71===o.expression.kind&&z(u.collectLinkedAliases(o.expression)));case 265:return Z(e)}var t,n,o,r,i;function s(e){if(e)return 153===e.kind?e.type:0<e.parameters.length?e.parameters[0].type:void 0}}}fe.getDeclarationDiagnostics=function(n,o,e){var r=fe.createDiagnosticCollection();return fe.forEachEmittedFile(n,function(e,t){e=e.declarationFilePath;s(n,o,r,e,t,!1)},e),r.getDiagnostics(e?e.fileName:void 0)},fe.writeDeclarationFile=function(e,t,n,o,r,i){var o=s(n,o,r,e,t,i),i=o.reportedDeclarationError||n.isEmitBlocked(e)||n.getCompilerOptions().noEmit;return i||(t=266===t.kind?t.sourceFiles:[t],o=o.referencesOutput+function t(n,e){var o=0,r="";return fe.forEach(e,function(e){e.asynchronousOutput&&(r=(r+=n.substring(o,e.outputPos))+t(e.asynchronousOutput,e.subModuleElementDeclarationEmitInfo),o=e.outputPos)}),r+=n.substring(o)}(o.synchronousDeclarationOutput,o.moduleElementDeclarationEmitInfo),fe.writeFile(n,r,e,o,n.getCompilerOptions().emitBOM,t)),i}}(ts=ts||{}),function(nt){(e=[])[0]="",e[16]=",",e[4]=" |",e[8]=" &";var e,ot=e,rt=((e=[])[512]=["{","}"],e[1024]=["(",")"],e[2048]=["<",">"],e[4096]=["[","]"],e);function o(e,t,n,o){var n=nt.isArray(n)?n:nt.getSourceFilesToEmit(e,n),r=e.getCompilerOptions();if(r.outFile||r.out)n.length&&t({jsFilePath:a=r.outFile||r.out,sourceMapFilePath:c(a,r),declarationFilePath:r.declaration?nt.removeFileExtension(a)+".d.ts":""},nt.createBundle(n),o);else for(var i=0,s=n;i<s.length;i++){var a,l=s[i];t({jsFilePath:a=nt.getOwnEmitOutputFilePath(l,e,function(e,t){if(1===t.jsx)if(nt.isSourceFileJavaScript(e)){if(nt.fileExtensionIs(e.fileName,".jsx"))return".jsx"}else if(1===e.languageVariant)return".jsx";return".js"}(l,r)),sourceMapFilePath:c(a,r),declarationFilePath:nt.isSourceFileJavaScript(l)||!o&&!r.declaration?void 0:nt.getDeclarationEmitOutputFilePath(l,e)},l,o)}}function c(e,t){return t.sourceMap?e+".map":void 0}function r(T,e){void 0===T&&(T={});var ee,s,a,l,c,o,te,t,u=(e=void 0===e?{}:e).hasGlobalName,d=e.onEmitSourceMapOfNode,p=e.onEmitSourceMapOfToken,g=e.onEmitSourceMapOfPosition,r=e.onEmitNode,h=e.onEmitHelpers,m=e.onSetSourceFile,f=e.substituteNode,_=e.onBeforeEmitNodeArray,y=e.onAfterEmitNodeArray,k=e.onBeforeEmitToken,b=e.onAfterEmitToken,v=nt.getNewLineCharacter(T),n=nt.createCommentWriter(T,g),C=n.emitNodeWithComments,xe=n.emitBodyWithDetachedComments,ne=n.emitTrailingCommentsOfPosition,Be=n.emitLeadingCommentsOfPosition;return L(),{printNode:function(e,t,n){switch(e){case 0:nt.Debug.assert(nt.isSourceFile(t),"Expected a SourceFile node.");break;case 2:nt.Debug.assert(nt.isIdentifier(t),"Expected an Identifier node.");break;case 1:nt.Debug.assert(nt.isExpression(t),"Expected an Expression node.")}switch(t.kind){case 265:return B(t);case 266:return x(t)}return A(e,t,n,N()),w()},printFile:B,printBundle:x,writeNode:A,writeFile:D,writeBundle:I};function x(e){return I(e,N()),w()}function B(e){return D(e,N()),w()}function A(e,t,n,o){var r=te;P(o),O(e,t,n),L(),te=r}function I(e,t){var n=te;P(t),Y(e),$(e),V(e);for(var o=0,r=e.sourceFiles;o<r.length;o++){var i=r[o];O(0,i,i)}L(),te=n}function D(e,t){var n=te;P(t),Y(e),$(e),O(0,e,e),L(),te=n}function N(){return t=t||nt.createTextWriter(v)}function w(){var e=t.getText();return t.reset(),e}function O(e,t,n){n&&R(n),se(e,t)}function R(e){ee=e,n.setSourceFile(e),m&&m(e)}function P(e){te=e,n.setWriter(e)}function L(){s=[],a=[],l=nt.createMap(),c=[],o=0,n.reset(),P(void 0)}function oe(e){e&&re(e)}function re(e){se(4,e)}function M(e){se(2,e)}function ie(e){se(1,e)}function se(e,t){r?r(e,t,F):F(e,t)}function F(e,t){t=Ie(e,t),C&&0!==e?C(e,t,U):U(e,t)}function U(e,t){d&&0!==e&&2!==e?d(e,t,H):H(e,t)}function H(L,e){switch(L){case 0:var t=e,n=(nt.Debug.assertNode(t,nt.isSourceFile),ye(),t.statements);return void(!xe||0!==n.length&&nt.isPrologueDirective(n[0])&&!nt.nodeIsSynthesized(n[0])?Ve(t):xe(t,n,Ve));case 2:return t=e,nt.Debug.assertNode(t,nt.isIdentifier),void Ne(t);case 1:return Ae(e);case 3:return re((n=nt.cast(e,nt.isTypeParameterDeclaration)).name),fe(" in "),void re(n.constraint);case 4:var M,F,o,r,i,U,s,H,a,V,l,c,u,d,p,g,W,h,_,m,f,G,y,k,b,v,T,E,K,j,S,z,X,$,Y,C,x,B,A,I,D,N,w,q,J,O,R=e,Q=R.kind;if(nt.isKeyword(Q))Ke(R);else{switch(Q){case 14:case 15:case 16:return De(R);case 71:return Ne(R);case 143:return(71===(J=(q=R).left).kind?ie:re)(J),fe("."),void re(q.right);case 144:return J=R,fe("["),ie(J.expression),void fe("]");case 145:return re((q=R).name),ce(" extends ",q.constraint),void ce(" = ",q.default);case 146:return pe(O=R,O.decorators),le(O,O.modifiers),oe(O.dotDotDotToken),O.name&&re(O.name),oe(O.questionToken),O.parent&&273===O.parent.kind&&!O.name?re(O.type):ce(": ",O.type),void ue(" = ",O.initializer);case 147:return O=R,fe("@"),void ie(O.expression);case 148:return pe(w=R,w.decorators),le(w,w.modifiers),re(w.name),oe(w.questionToken),ce(": ",w.type),void fe(";");case 149:return pe(w=R,w.decorators),le(w,w.modifiers),re(w.name),oe(w.questionToken),ce(": ",w.type),ue(" = ",w.initializer),void fe(";");case 150:return pe(N=R,N.decorators),le(N,N.modifiers),re(N.name),oe(N.questionToken),he(N,N.typeParameters),_e(N,N.parameters),ce(": ",N.type),void fe(";");case 151:return pe(N=R,N.decorators),le(N,N.modifiers),oe(N.asteriskToken),re(N.name),oe(N.questionToken),void ae(N,Pe);case 152:return le(D=R,D.modifiers),fe("constructor"),void ae(D,Pe);case 153:case 154:return pe(D=R,D.decorators),le(D,D.modifiers),fe(153===D.kind?"get ":"set "),re(D.name),void ae(D,Pe);case 155:return pe(I=R,I.decorators),le(I,I.modifiers),he(I,I.typeParameters),_e(I,I.parameters),ce(": ",I.type),void fe(";");case 156:return pe(I=R,I.decorators),le(I,I.modifiers),fe("new "),he(I,I.typeParameters),_e(I,I.parameters),ce(": ",I.type),void fe(";");case 157:return pe(A=R,A.decorators),le(A,A.modifiers),me(A,A.parameters,4432),ce(": ",A.type),void fe(";");case 158:return re((A=R).parameterName),fe(" is "),void re(A.type);case 159:return re((B=R).typeName),void ge(B,B.typeArguments);case 160:return he(B=R,B.typeParameters),Ge(B,B.parameters),fe(" => "),void re(B.type);case 273:return x=R,fe("function"),_e(x,x.parameters),fe(":"),void re(x.type);case 161:return x=R,fe("new "),he(x,x.typeParameters),_e(x,x.parameters),fe(" => "),void re(x.type);case 162:return C=R,fe("typeof "),void re(C.exprName);case 163:return C=R,fe("{"),Y=1&nt.getEmitFlags(C)?448:65,me(C,C.members,262144|Y),void fe("}");case 164:return re(R.elementType),void fe("[]");case 165:return Y=R,fe("["),me(Y,Y.elementTypes,336),void fe("]");case 166:return void me(R,R.types,260);case 167:return void me(R,R.types,264);case 168:return $=R,fe("("),re($.type),void fe(")");case 201:return ie(($=R).expression),void ge($,$.typeArguments);case 169:return void fe("this");case 170:return Te((X=R).operator),fe(" "),void re(X.type);case 171:return re((X=R).objectType),fe("["),re(X.indexType),void fe("]");case 172:return S=R,z=nt.getEmitFlags(S),fe("{"),1&z?fe(" "):(ye(),ke()),S.readonlyToken&&(re(S.readonlyToken),fe(" ")),fe("["),se(3,S.typeParameter),fe("]"),oe(S.questionToken),fe(": "),re(S.type),fe(";"),1&z?fe(" "):(ye(),be()),void fe("}");case 173:return void ie(R.literal);case 268:return void fe("*");case 269:return void fe("?");case 270:return S=R,fe("?"),void re(S.type);case 271:return z=R,fe("!"),void re(z.type);case 272:return re(R.type),void fe("=");case 274:return j=R,fe("..."),void re(j.type);case 174:return void(0===(K=(j=R).elements).length?fe("{}"):(fe("{"),me(j,K,432),fe("}")));case 175:return void(0===(K=R).elements.length?fe("[]"):(fe("["),me(K,K.elements,304),fe("]")));case 176:return We((E=R).propertyName,": "),oe(E.dotDotDotToken),re(E.name),void ue(" = ",E.initializer);case 205:return ie((E=R).expression),void re(E.literal);case 206:return void fe(";");case 207:return ve(17,(T=R).pos,T),we(T,!T.multiLine&&Je(T)),ke(),Be(T.statements.end),be(),void ve(18,T.statements.end,T);case 208:return le(T=R,T.modifiers),re(T.declarationList),void fe(";");case 209:return void fe(";");case 210:return ie(R.expression),void fe(";");case 211:return v=ve(90,(b=R).pos,b),fe(" "),ve(19,v,b),ie(b.expression),ve(20,b.expression.end,b),de(b,b.thenStatement),void(b.elseStatement&&(je(b),ve(82,b.thenStatement.end,b),211===b.elseStatement.kind?(fe(" "),re(b.elseStatement)):de(b,b.elseStatement)));case 212:return v=R,fe("do"),de(v,v.statement),nt.isBlock(v.statement)?fe(" "):je(v),fe("while ("),ie(v.expression),void fe(");");case 213:return b=R,fe("while ("),ie(b.expression),fe(")"),void de(b,b.statement);case 214:return k=ve(88,(y=R).pos),fe(" "),ve(19,k,y),Oe(y.initializer),fe(";"),ue(" ",y.condition),fe(";"),ue(" ",y.incrementor),fe(")"),void de(y,y.statement);case 215:return y=ve(88,(k=R).pos),fe(" "),ve(19,y),Oe(k.initializer),fe(" in "),ie(k.expression),ve(20,k.expression.end),void de(k,k.statement);case 216:return G=ve(88,(f=R).pos),fe(" "),We(f.awaitModifier," "),ve(19,G),Oe(f.initializer),fe(" of "),ie(f.expression),ve(20,f.expression.end),void de(f,f.statement);case 217:return ve(77,(G=R).pos),ce(" ",G.label),void fe(";");case 218:return ve(72,(f=R).pos),ce(" ",f.label),void fe(";");case 219:return h=(W=R).pos,m=(_=W)&&nt.getParseTreeNode(_),h=ve(96,h=m&&m.kind===_.kind?nt.skipTrivia(ee.text,h):h,_),m&&m.kind===_.kind&&ne(h,!0),ue(" ",W.expression),void fe(";");case 220:return m=R,fe("with ("),ie(m.expression),fe(")"),void de(m,m.statement);case 221:return h=ve(98,(_=R).pos),fe(" "),ve(19,h),ie(_.expression),ve(20,_.expression.end),fe(" "),void re(_.caseBlock);case 222:return re((W=R).label),fe(": "),void re(W.statement);case 223:return g=R,fe("throw"),ue(" ",g.expression),void fe(";");case 224:return g=R,fe("try "),re(g.tryBlock),g.catchClause&&(je(g),re(g.catchClause)),void(g.finallyBlock&&(je(g),fe("finally "),re(g.finallyBlock)));case 225:return ve(78,R.pos),void fe(";");case 226:return re((p=R).name),ce(": ",p.type),void ue(" = ",p.initializer);case 227:return p=R,fe(nt.isLet(p)?"let ":nt.isConst(p)?"const ":"var "),void me(p,p.declarations,272);case 228:return void Re(R);case 229:return void Le(R);case 230:return pe(d=R,d.decorators),le(d,d.modifiers),fe("interface "),re(d.name),he(d,d.typeParameters),me(d,d.heritageClauses,256),fe(" {"),me(d,d.members,65),void fe("}");case 231:return pe(d=R,d.decorators),le(d,d.modifiers),fe("type "),re(d.name),he(d,d.typeParameters),fe(" = "),re(d.type),void fe(";");case 232:return le(P=R,P.modifiers),fe("enum "),re(P.name),Se(),fe(" {"),me(P,P.members,81),fe("}"),void Ce();case 233:var P=R;le(P,P.modifiers),512&~P.flags&&fe(16&P.flags?"namespace ":"module "),re(P.name);for(var Z=P.body;233===Z.kind;)fe("."),re(Z.name),Z=Z.body;return fe(" "),void re(Z);case 234:return u=R,Se(),fe("{"),we(u,Je(u)),fe("}"),void Ce();case 235:return ve(17,(u=R).pos),me(u,u.clauses,65),void ve(18,u.clauses.end);case 236:return c=R,fe("export as namespace "),re(c.name),void fe(";");case 237:return le(c=R,c.modifiers),fe("import "),re(c.name),fe(" = "),(71===(c=c.moduleReference).kind?ie:re)(c),void fe(";");case 238:return le(l=R,l.modifiers),fe("import "),l.importClause&&(re(l.importClause),fe(" from ")),ie(l.moduleSpecifier),void fe(";");case 239:return re((l=R).name),l.name&&l.namedBindings&&fe(", "),void re(l.namedBindings);case 240:return V=R,fe("* as "),void re(V.name);case 241:return void Me(R);case 242:return void Fe(R);case 243:return fe((V=R).isExportEquals?"export = ":"export default "),ie(V.expression),void fe(";");case 244:return a=R,fe("export "),a.exportClause?re(a.exportClause):fe("*"),a.moduleSpecifier&&(fe(" from "),ie(a.moduleSpecifier)),void fe(";");case 245:return void Me(R);case 246:return void Fe(R);case 247:return;case 248:return a=R,fe("require("),ie(a.expression),void fe(")");case 10:return void te.writeLiteral(Ee(R,!0));case 251:return s=R,fe("<"),Ue(s.tagName),H=s.attributes.properties,nt.some(H)&&fe(" "),s.attributes.properties&&0<s.attributes.properties.length&&re(s.attributes),void fe(">");case 252:return H=R,fe("</"),Ue(H.tagName),void fe(">");case 253:return re((s=R).name),void ce("=",s.initializer);case 254:return void me(R,R.properties,131328);case 255:return U=R,fe("{..."),ie(U.expression),void fe("}");case 256:return void((U=R).expression&&(fe("{"),oe(U.dotDotDotToken),ie(U.expression),fe("}")));case 257:return i=R,fe("case "),ie(i.expression),fe(":"),void He(i,i.statements);case 258:return i=R,fe("default:"),void He(i,i.statements);case 259:return r=R,fe(" "),Te(r.token),fe(" "),void me(r,r.types,272);case 260:return o=ve(74,(r=R).pos),fe(" "),r.variableDeclaration&&(ve(19,o),re(r.variableDeclaration),ve(20,r.variableDeclaration.end),fe(" ")),void re(r.block);case 261:return re((o=R).name),fe(": "),o=o.initializer,ne&&0==(512&nt.getEmitFlags(o))&&(F=nt.getCommentRange(o),ne(F.pos)),void ie(o);case 262:return re((F=R).name),void(F.objectAssignmentInitializer&&(fe(" = "),ie(F.objectAssignmentInitializer)));case 263:return void((M=R).expression&&(fe("..."),ie(M.expression)));case 264:return re((M=R).name),void ue(" = ",M.initializer)}if(nt.isExpression(R))return Ae(Ie(1,R));nt.isToken(R)&&Ke(R)}return}}function Ae(e){switch(e.kind){case 8:return void De(e);case 9:case 12:case 13:return De(e);case 71:return Ne(e);case 86:case 95:case 97:case 101:case 99:case 91:return void Ke(e);case 177:return void J(e,e.elements,4466|(e.multiLine?32768:0));case 178:return y=e,(k=65536&nt.getEmitFlags(y))&&ke(),b=y.multiLine?32768:0,v=1<=ee.languageVersion?32:0,me(y,y.properties,263122|v|b),void(k&&be());case 179:return y=e,b=v=!1,131072&nt.getEmitFlags(y)||(m=y.expression.end,k=nt.skipTrivia(ee.text,y.expression.end)+1,(_=nt.createToken(23)).pos=m,_.end=k,v=S(y,y.expression,_),b=S(y,_,y.name)),ie(y.expression),E(v),fe(!v&&(m=y.expression,m=nt.skipPartiallyEmittedExpressions(m),nt.isNumericLiteral(m)?(f=Ze(m),!m.numericLiteralFlags&&!nt.stringContains(f,nt.tokenToString(23))):nt.isPropertyAccessExpression(m)||nt.isElementAccessExpression(m)?"number"==typeof(f=nt.getConstantValue(m))&&isFinite(f)&&Math.floor(f)===f&&T.removeComments:void 0)?"..":"."),E(b),re(y.name),void ze(v,b);case 180:return ie((_=e).expression),fe("["),ie(_.argumentExpression),void fe("]");case 181:return ie((f=e).expression),ge(f,f.typeArguments),void J(f,f.arguments,1296);case 182:return h=e,fe("new "),ie(h.expression),ge(h,h.typeArguments),void J(h,h.arguments,9488);case 183:return ie((h=e).tag),fe(" "),void ie(h.template);case 184:return g=e,fe("<"),re(g.type),fe(">"),void ie(g.expression);case 185:return g=e,fe("("),ie(g.expression),void fe(")");case 186:return void Re(e);case 187:return pe(p=e,p.decorators),le(p,p.modifiers),void ae(p,W);case 188:return p=e,fe("delete "),void ie(p.expression);case 189:return d=e,fe("typeof "),void ie(d.expression);case 190:return d=e,fe("void "),void ie(d.expression);case 191:return u=e,fe("await "),void ie(u.expression);case 192:return Te((u=e).operator),192!==(c=u.operand).kind||(37!==u.operator||37!==c.operator&&43!==c.operator)&&(38!==u.operator||38!==c.operator&&44!==c.operator)||fe(" "),void ie(u.operand);case 193:return ie((c=e).operand),void Te(c.operator);case 194:return s=26!==(i=e).operatorToken.kind,a=S(i,i.left,i.operatorToken),l=S(i,i.operatorToken,i.right),ie(i.left),E(a,s?" ":void 0),Be(i.operatorToken.pos),Ke(i.operatorToken),ne(i.operatorToken.end,!0),E(l," "),ie(i.right),void ze(a,l);case 195:return i=S(s=e,s.condition,s.questionToken),a=S(s,s.questionToken,s.whenTrue),l=S(s,s.whenTrue,s.colonToken),r=S(s,s.colonToken,s.whenFalse),ie(s.condition),E(i," "),re(s.questionToken),E(a," "),ie(s.whenTrue),ze(i,a),E(l," "),re(s.colonToken),E(r," "),ie(s.whenFalse),void ze(l,r);case 196:return re((r=e).head),void me(r,r.templateSpans,131072);case 197:return o=e,fe("yield"),re(o.asteriskToken),void ue(" ",o.expression);case 198:return o=e,fe("..."),void ie(o.expression);case 199:return void Le(e);case 200:return;case 202:return ie((n=e).expression),void(n.type&&(fe(" as "),re(n.type)));case 203:return ie(e.expression),void fe("!");case 204:return ve((n=e).keywordToken,n.pos),fe("."),void re(n.name);case 249:return re((t=e).openingElement),me(t,t.children,131072),void re(t.closingElement);case 250:return t=e,fe("<"),Ue(t.tagName),fe(" "),t.attributes.properties&&0<t.attributes.properties.length&&re(t.attributes),void fe("/>");case 288:return void ie(e.expression);case 289:return void J(e,e.elements,272)}var t,n,o,r,i,s,a,l,c,u,d,p,g,h,_,m,f,y,k,b,v}function Ie(e,t){return t&&f&&f(e,t)||t}function V(e){h&&h(e,Z)}function De(e){var t=Ze(e);!T.sourceMap&&!T.inlineSourceMap||9!==e.kind&&!nt.isTemplateLiteralKind(e.kind)?fe(t):te.writeLiteral(t)}function Ne(e){fe(Ee(e,!1)),ge(e,e.typeArguments)}function W(e){he(e,e.typeParameters),Ge(e,e.parameters),ce(": ",e.type),fe(" "),re(e.equalsGreaterThanToken)}function we(e,t){t=t||1&nt.getEmitFlags(e)?384:65;me(e,e.statements,t)}function Oe(e){void 0!==e&&(227===e.kind?re:ie)(e)}function Re(e){pe(e,e.decorators),le(e,e.modifiers),fe("function"),oe(e.asteriskToken),fe(" "),M(e.name),ae(e,Pe)}function G(e,t){K(t)}function ae(e,t){var n,o=e.body;o?nt.isBlock(o)?((n=65536&nt.getEmitFlags(e))&&ke(),524288&nt.getEmitFlags(e)?(t(e),r?r(4,o,G):K(o)):(Se(),t(e),r?r(4,o,G):K(o),Ce()),n&&be()):(t(e),fe(" "),ie(o)):(t(e),fe(";"))}function Pe(e){he(e,e.typeParameters),_e(e,e.parameters),ce(": ",e.type)}function K(e){fe(" {"),ke();var t=function(e){if(1&nt.getEmitFlags(e))return 1;if(!e.multiLine&&(nt.nodeIsSynthesized(e)||nt.rangeIsOnSingleLine(e,ee))&&!Xe(e,e.statements,2)&&!Ye(e,e.statements,2)){for(var t,n=0,o=e.statements;n<o.length;n++){var r=o[n];if($e(t,r,2))return;t=r}return 1}}(e)?j:z;xe?xe(e,e.statements,t):t(e),be(),ve(18,e.statements.end,e)}function j(e){z(e,!0)}function z(e,t){var n=X(e.statements,!0),o=te.getTextPos();V(e),0===n&&o===te.getTextPos()&&t?(be(),me(e,e.statements,384),ke()):me(e,e.statements,1,n)}function Le(e){pe(e,e.decorators),le(e,e.modifiers),fe("class"),q(" ",e.name,M);var t=65536&nt.getEmitFlags(e);t&&ke(),he(e,e.typeParameters),me(e,e.heritageClauses,256),Se(),fe(" {"),me(e,e.members,65),fe("}"),Ce(),t&&be()}function Me(e){fe("{"),me(e,e.elements,432),fe("}")}function Fe(e){e.propertyName&&(re(e.propertyName),fe(" as ")),re(e.name)}function Ue(e){(71===e.kind?ie:re)(e)}function He(e,t){var n=1===t.length&&(nt.nodeIsSynthesized(e)||nt.nodeIsSynthesized(t[0])||nt.rangeStartPositionsAreOnSameLine(e,t[0],ee)),o=(0<t.length&&ne(t.pos),81985);n&&(fe(" "),o&=-66),me(e,t,o)}function Ve(e){var t=e.statements,n=(Se(),V(e),nt.findIndex(t,function(e){return!nt.isPrologueDirective(e)}));me(e,t,1,-1===n?t.length:n),Ce()}function X(e,t,n){for(var o=0;o<e.length;o++){var r=e[o];if(!nt.isPrologueDirective(r))return o;n&&n.has(r.expression.text)||((t||0<o)&&ye(),re(r),!n)||n.set(r.expression.text,!0)}return e.length}function $(e){if(nt.isSourceFile(e))R(e),X(e.statements);else for(var t=nt.createMap(),n=0,o=e.sourceFiles;n<o.length;n++){var r=o[n];R(r),X(r.statements,!0,t)}}function Y(e){var t;if(nt.isSourceFile(e))return(t=nt.getShebang(e.text))?(fe(t),ye(),1):void 0;for(var n=0,o=e.sourceFiles;n<o.length&&!Y(o[n]);n++);}function le(e,t){t&&t.length&&(me(e,t,131328),fe(" "))}function ce(e,t){q(e,t,re)}function ue(e,t){q(e,t,ie)}function q(e,t,n){t&&(fe(e),n(t))}function We(e,t){e&&(re(e),fe(t))}function de(e,t){nt.isBlock(t)||1&nt.getEmitFlags(e)?(fe(" "),re(t)):(ye(),ke(),re(t),be())}function pe(e,t){me(e,t,24577)}function ge(e,t){me(e,t,26960)}function he(e,t){me(e,t,26960)}function _e(e,t){me(e,t,1360)}function Ge(e,t){var n,o;n=e,!(o=nt.singleOrUndefined(t))||o.pos!==n.pos||nt.isArrowFunction(n)&&n.type||nt.some(n.decorators)||nt.some(n.modifiers)||nt.some(n.typeParameters)||nt.some(o.decorators)||nt.some(o.modifiers)||o.dotDotDotToken||o.questionToken||o.type||o.initializer||!nt.isIdentifier(o.name)?_e(e,t):me(e,t,336)}function me(e,t,n,o,r){Q(re,e,t,n,o,r)}function J(e,t,n,o,r){Q(ie,e,t,n,o,r)}function Q(e,t,n,o,r,i){void 0===r&&(r=0),void 0===i&&(i=n?n.length-r:0);var s=void 0===n;if(!(s&&8192&o)){s=s||r>=n.length||0===i;if(s&&16384&o)return _&&_(n),y&&y(n);if(7680&o&&fe(rt[7680&o][0]),_&&_(n),s)1&o?ye():128&o&&!(262144&o)&&fe(" ");else{var a=0==(131072&o),l=a;Xe(t,n,o)?(ye(),l=!1):128&o&&fe(" "),64&o&&ke();for(var c=void 0,u=void 0,d=ot[28&o],p=0;p<i;p++){var g,h=n[r+p];c&&(d&&c.end!==t.end&&Be(c.end),fe(d),$e(c,h,o)?(0==(67&o)&&(ke(),u=!0),ye(),l=!1):c&&256&o&&fe(" ")),l?ne&&(g=nt.getCommentRange(h),ne(g.pos)):l=a,e(h),u&&(be(),u=!1),c=h}s=32&o&&n.hasTrailingComma;16&o&&s&&fe(","),!c||!d||c.end===t.end||1024&nt.getEmitFlags(c)||Be(c.end),64&o&&be(),Ye(t,n,o)?ye():128&o&&fe(" ")}y&&y(n),7680&o&&fe(rt[7680&o][1])}}function fe(e){te.write(e)}function ye(){te.writeLine()}function ke(){te.increaseIndent()}function be(){te.decreaseIndent()}function ve(e,t,n){return p?p(n,e,t,Te):Te(e,t)}function Ke(e){k&&k(e),fe(nt.tokenToString(e.kind)),b&&b(e)}function Te(e,t){e=nt.tokenToString(e);return fe(e),t<0?t:t+e.length}function je(e){1&nt.getEmitFlags(e)?fe(" "):ye()}function Z(e){for(var i=e.split(/\r\n?|\n/g),t=function(){for(var e,t=0,n=i;t<n.length;t++)for(var o=n[t],r=0;r<o.length&&(void 0===e||r<e);r++)if(!nt.isWhiteSpaceLike(o.charCodeAt(r))&&(void 0===e||r<e)){e=r;break}return e}(),n=0;n<i.length;n++){var o=t?i[n].slice(t):i[n];o.length&&(ye(),fe(o),ye())}}function E(e,t){e?(ke(),ye()):t&&fe(t)}function ze(e,t){e&&be(),t&&be()}function Xe(e,t,n){return 1&n||2&n&&(32768&n||(void 0===(t=t[0])?!nt.rangeIsOnSingleLine(e,ee):nt.positionIsSynthesized(e.pos)||nt.nodeIsSynthesized(t)?qe(t,n):!nt.rangeStartPositionsAreOnSameLine(e,t,ee)))}function $e(e,t,n){return 1&n||(2&n?void 0!==e&&void 0!==t&&(nt.nodeIsSynthesized(e)||nt.nodeIsSynthesized(t)?qe(e,n)||qe(t,n):!nt.rangeEndIsOnSameLineAsRangeStart(e,t,ee)):t.startsOnNewLine)}function Ye(e,t,n){return 1&n?0==(65536&n):2&n&&(32768&n||(void 0===(t=nt.lastOrUndefined(t))?!nt.rangeIsOnSingleLine(e,ee):nt.positionIsSynthesized(e.pos)||nt.nodeIsSynthesized(t)?qe(t,n):!nt.rangeEndPositionsAreOnSameLine(e,t,ee)))}function qe(e,t){return!nt.nodeIsSynthesized(e)||void 0===(e=e.startsOnNewLine)?0!=(32768&t):e}function S(e,t,n){return e=Qe(e),t=Qe(t),!!(n=Qe(n)).startsOnNewLine||!(nt.nodeIsSynthesized(e)||nt.nodeIsSynthesized(t)||nt.nodeIsSynthesized(n)||nt.rangeEndIsOnSameLineAsRangeStart(t,n,ee))}function Je(e){return 0===e.statements.length&&nt.rangeEndIsOnSameLineAsRangeStart(e,e,ee)}function Qe(e){for(;185===e.kind&&nt.nodeIsSynthesized(e);)e=e.expression;return e}function Ee(e,t){return nt.isGeneratedIdentifier(e)?4===(o=e).autoGenerateKind?function t(e){var n=nt.getNodeId(e);return s[n]||(s[n]=function(e){switch(e.kind){case 71:return i(Ee(e));case 233:case 232:return function(e){var t=Ee(e.name);return function(e,t){for(var n=t;nt.isNodeDescendantOf(n,t);n=n.nextContainer)if(n.locals){var o=n.locals.get(nt.escapeLeadingUnderscores(e));if(o&&3253183&o.flags)return}return 1}(t,e)?t:i(t)}(e);case 238:case 244:return function(e){e=nt.getExternalModuleName(e);return i(nt.isStringLiteral(e)?nt.makeIdentifierFromModuleName(e.text):"module")}(e);case 228:case 229:case 243:return i("default");case 199:return i("class");case 151:case 153:case 154:return function(e){return nt.isIdentifier(e.name)?t(e.name):tt(0)}(e);default:return tt(0)}}(e))}(function(){for(var e=o.autoGenerateId,t=o,n=t.original;n&&(t=n,!nt.isIdentifier(t)||4!==t.autoGenerateKind||t.autoGenerateId===e);)n=t.original;return t}()):(n=o.autoGenerateId,a[n]||(a[n]=function(e){switch(e.autoGenerateKind){case 1:return tt(0);case 2:return tt(268435456);case 3:return i(nt.idText(e))}nt.Debug.fail("Unsupported GeneratedIdentifierKind.")}(o))):!nt.isIdentifier(e)||!nt.nodeIsSynthesized(e)&&e.parent?9===e.kind&&e.textSourceNode?Ee(e.textSourceNode,t):!nt.isLiteralExpression(e)||!nt.nodeIsSynthesized(e)&&e.parent?nt.getSourceTextOfNodeFromSourceFile(ee,e,t):e.text:nt.idText(e);var o,n}function Ze(e){var t;return 9===e.kind&&e.textSourceNode?(t=e.textSourceNode,nt.isIdentifier(t)?16777216&nt.getEmitFlags(e)?'"'+nt.escapeString(Ee(t))+'"':'"'+nt.escapeNonAsciiString(Ee(t))+'"':Ze(t)):nt.getLiteralText(e,ee)}function Se(){c.push(o),o=0}function Ce(){o=c.pop()}function et(e){return!(u&&u(e)||ee.identifiers.has(e)||l.has(e))}function tt(e){if(e&&!(o&e)&&et(t=268435456===e?"_i":"_n"))return o|=e,t;for(;;){var t,n=268435455&o;if(o++,8!=n&&13!=n&&et(t=n<26?"_"+String.fromCharCode(97+n):"_"+(n-26)))return t}}function i(e){95!==e.charCodeAt(e.length-1)&&(e+="_");for(var t=1;;){var n=e+t;if(et(n))return l.set(n,!0),n;t++}}}nt.forEachEmittedFile=o,nt.emitFiles=function(c,u,e,d,t){var g,h,_,m=u.getCompilerOptions(),f=nt.getEmitModuleKind(m),p=m.sourceMap||m.inlineSourceMap?[]:void 0,y=m.listEmittedFiles?[]:void 0,k=nt.createDiagnosticCollection(),n=u.getNewLine(),b=nt.createTextWriter(n),v=nt.createSourceMapWriter(u,b),T=!1,n=nt.getSourceFilesToEmit(u,e),e=nt.transformNodes(c,u,m,n,t,!1),E=r(m,{hasGlobalName:c.hasGlobalName,onEmitNode:e.emitNodeWithNotification,substituteNode:e.substituteNode,onEmitSourceMapOfNode:v.emitNodeWithSourceMap,onEmitSourceMapOfToken:v.emitTokenWithSourceMap,onEmitSourceMapOfPosition:v.emitPos,onEmitHelpers:function(e,t){var n=!1,o=266===e.kind?e:void 0;if(!o||f!==nt.ModuleKind.None){for(var r=o?o.sourceFiles.length:1,i=0;i<r;i++){var s=o?o.sourceFiles[i]:e,a=nt.isSourceFile(s)?s:g,l=m.noEmitHelpers||void 0!==nt.getExternalHelpersModuleName(a),c=nt.isSourceFile(s)&&!_,a=nt.getEmitHelpers(s);if(a)for(var u=0,d=nt.stableSort(a,nt.compareEmitHelpers);u<d.length;u++){var p=d[u];if(p.scoped){if(o)continue}else{if(l)continue;if(c){if(h.get(p.name))continue;h.set(p.name,!0)}}t(p.text),n=!0}}return n}},onSetSourceFile:function(e){g=e,v.setSourceFile(e)}});return nt.performance.mark("beforePrint"),o(u,function(e,t){var n,o,r,i,s,a=e.jsFilePath,l=e.sourceMapFilePath,e=e.declarationFilePath;u.isEmitBlocked(a)||m.noEmit?T=!0:d||(n=a,o=l,r=266===t.kind?t:void 0,s=265===t.kind?t:void 0,i=r?r.sourceFiles:[s],v.initialize(n,o,t),r?(h=nt.createMap(),_=!1,E.writeBundle(r,b)):(_=!0,E.writeFile(s,b)),b.writeLine(),(r=v.getSourceMappingURL())&&b.write("//# sourceMappingURL="+r),m.sourceMap&&!m.inlineSourceMap&&nt.writeFile(u,k,o,v.getText(),!1,i),p&&p.push(v.getSourceMapData()),nt.writeFile(u,k,n,b.getText(),m.emitBOM,i),v.reset(),b.reset(),h=g=void 0,_=!1),!(T=e?nt.writeDeclarationFile(e,266===(s=t).kind?nt.updateBundle(s,nt.sameMap(s.sourceFiles,nt.getOriginalSourceFile)):nt.getOriginalSourceFile(s),u,c,k,d)||T:T)&&y&&(d||y.push(a),l&&y.push(l),e)&&y.push(e)},e.transformed,d),nt.performance.measure("printTime","beforePrint"),e.dispose(),{emitSkipped:T,diagnostics:k.getDiagnostics(),emittedFiles:y,sourceMaps:p}},nt.createPrinter=r,(e={None:0,0:"None",SingleLine:0})[0]="SingleLine",e[e.MultiLine=1]="MultiLine",e[e.PreserveLines=2]="PreserveLines",e[e.LinesMask=3]="LinesMask",e[e.NotDelimited=0]="NotDelimited",e[e.BarDelimited=4]="BarDelimited",e[e.AmpersandDelimited=8]="AmpersandDelimited",e[e.CommaDelimited=16]="CommaDelimited",e[e.DelimitersMask=28]="DelimitersMask",e[e.AllowTrailingComma=32]="AllowTrailingComma",e[e.Indented=64]="Indented",e[e.SpaceBetweenBraces=128]="SpaceBetweenBraces",e[e.SpaceBetweenSiblings=256]="SpaceBetweenSiblings",e[e.Braces=512]="Braces",e[e.Parenthesis=1024]="Parenthesis",e[e.AngleBrackets=2048]="AngleBrackets",e[e.SquareBrackets=4096]="SquareBrackets",e[e.BracketsMask=7680]="BracketsMask",e[e.OptionalIfUndefined=8192]="OptionalIfUndefined",e[e.OptionalIfEmpty=16384]="OptionalIfEmpty",e[e.Optional=24576]="Optional",e[e.PreferNewLine=32768]="PreferNewLine",e[e.NoTrailingNewLine=65536]="NoTrailingNewLine",e[e.NoInterveningComments=131072]="NoInterveningComments",e[e.NoSpaceIfEmpty=262144]="NoSpaceIfEmpty",e[e.SingleElement=524288]="SingleElement",e[e.Modifiers=131328]="Modifiers",e[e.HeritageClauses=256]="HeritageClauses",e[e.SingleLineTypeLiteralMembers=448]="SingleLineTypeLiteralMembers",e[e.MultiLineTypeLiteralMembers=65]="MultiLineTypeLiteralMembers",e[e.TupleTypeElements=336]="TupleTypeElements",e[e.UnionTypeConstituents=260]="UnionTypeConstituents",e[e.IntersectionTypeConstituents=264]="IntersectionTypeConstituents",e[e.ObjectBindingPatternElements=432]="ObjectBindingPatternElements",e[e.ArrayBindingPatternElements=304]="ArrayBindingPatternElements",e[e.ObjectLiteralExpressionProperties=263122]="ObjectLiteralExpressionProperties",e[e.ArrayLiteralExpressionElements=4466]="ArrayLiteralExpressionElements",e[e.CommaListElements=272]="CommaListElements",e[e.CallExpressionArguments=1296]="CallExpressionArguments",e[e.NewExpressionArguments=9488]="NewExpressionArguments",e[e.TemplateExpressionSpans=131072]="TemplateExpressionSpans",e[e.SingleLineBlockStatements=384]="SingleLineBlockStatements",e[e.MultiLineBlockStatements=65]="MultiLineBlockStatements",e[e.VariableDeclarationList=272]="VariableDeclarationList",e[e.SingleLineFunctionBodyStatements=384]="SingleLineFunctionBodyStatements",e[e.MultiLineFunctionBodyStatements=1]="MultiLineFunctionBodyStatements",e[e.ClassHeritageClauses=256]="ClassHeritageClauses",e[e.ClassMembers=65]="ClassMembers",e[e.InterfaceMembers=65]="InterfaceMembers",e[e.EnumMembers=81]="EnumMembers",e[e.CaseBlockClauses=65]="CaseBlockClauses",e[e.NamedImportsOrExportsElements=432]="NamedImportsOrExportsElements",e[e.JsxElementChildren=131072]="JsxElementChildren",e[e.JsxElementAttributes=131328]="JsxElementAttributes",e[e.CaseOrDefaultClauseStatements=81985]="CaseOrDefaultClauseStatements",e[e.HeritageClauseTypes=272]="HeritageClauseTypes",e[e.SourceFileStatements=65537]="SourceFileStatements",e[e.Decorators=24577]="Decorators",e[e.TypeArguments=26960]="TypeArguments",e[e.TypeParameters=26960]="TypeParameters",e[e.Parameters=1360]="Parameters",e[e.IndexSignatureParameters=4432]="IndexSignatureParameters"}(ts=ts||{}),function(k){function b(e,t,n,o,r){var i=[],e=e.emit(t,function(e,t,n){i.push({name:e,writeByteOrderMark:n,text:t})},o,n,r);return{outputFiles:i,emitSkipped:e.emitSkipped}}k.getFileEmitOutput=b,k.createBuilder=function(p){var t,l,i,s=k.createMap(),d=k.createMap(),g=k.createMap(),c=k.createMap();return{updateProgram:function(e){i&&n(e)},getFilesAffectedBy:a,emitChangedFiles:function(n,o){_(n);var r,i,e=n.getCompilerOptions();return g.size?e.outFile||e.out?(k.Debug.assert(0===d.size),g.clear(),[n.emit(void 0,o)]):(i=k.createMap(),g.forEach(function(e,t){a(n,t).forEach(function(e){d.delete(e.path),i.has(e.path)||(i.set(e.path,!0),(r=r||[]).push(n.emit(e,o)))})}),g.clear(),r||k.emptyArray):k.emptyArray},getSemanticDiagnostics:function(e,t){_(e),k.Debug.assert(0===g.size);var n=e.getCompilerOptions();if(n.outFile||n.out)return k.Debug.assert(0===d.size),e.getSemanticDiagnostics(void 0,t);for(var o,r,i,s,a=0,l=e.getSourceFiles();a<l.length;a++)var c=l[a],u=k.addRange(u,(o=e,r=t,s=i=void 0,i=(c=c).path,(s=d.get(i))||(s=o.getSemanticDiagnostics(c,r),d.set(i,s),s)));return u||k.emptyArray},clear:function(){i=t=void 0,s.clear(),d.clear(),g.clear(),c.clear()}};function n(o){var r,e=o.getCompilerOptions().module!==k.ModuleKind.None;function a(n){return k.mapDefinedIter(r.entries(),function(e){var t=e[0];return e[1].has(n)?t:void 0})}t!==e&&(i=(t=e)?(r=k.createMap(),{onAddSourceFile:function(e,t){e=f(e,t);e&&r.set(t.path,e)},onRemoveSourceFile:function(n){r.forEach(function(e,t){e.has(n)&&s.get(t)&&u(t)}),r.delete(n)},onUpdateSourceFile:function(e,t){e=f(e,t);e?r.set(t.path,e):r.delete(t.path)},onUpdateSourceFileWithSameVersion:function(e,t){var n,e=f(e,t);return e?(n=r.get(t.path),r.set(t.path,e),!n||n.size!==e.size||k.forEachEntry(e,function(e,t){return!n.delete(t)})||!!n.size):r.delete(t.path)},getFilesAffectedByUpdatedShape:function(e,o){if(!k.isExternalModule(o)&&!function(){for(var e=0,t=o.statements;e<t.length;e++){var n=t[e];if(!k.isModuleWithStringLiteralName(n))return}return 1}())return y(e,o);var t=e.getCompilerOptions();if(t&&(t.isolatedModules||t.out||t.outFile))return[o];var n=k.createMap(),t=o.path;n.set(t,o);for(var r=a(t);0<r.length;){var i,s=r.pop();n.has(s)||(i=e.getSourceFileByPath(s),n.set(s,i),i&&m(e,i)&&r.push.apply(r,a(s)))}return k.flatMapIter(n.values(),function(e){return e})}}):{onAddSourceFile:k.noop,onRemoveSourceFile:k.noop,onUpdateSourceFile:k.noop,onUpdateSourceFileWithSameVersion:k.returnFalse,getFilesAffectedByUpdatedShape:function(e,t){var n=e.getCompilerOptions();return n&&(n.out||n.outFile)?[t]:y(e,t)}},s.clear(),d.clear()),c.clear(),l=void 0,k.mutateMap(s,k.arrayToMap(o.getSourceFiles(),function(e){return e.path}),{createNewValue:function(e,t){return n=o,u((t=t).path),i.onAddSourceFile(n,t),{version:t.version,signature:void 0};var n},onDeleteValue:h,onExistingValue:function(e,t){var n;n=o,t=t,(e=e).version!==t.version?(u(t.path),e.version=t.version,i.onUpdateSourceFile(n,t)):i.onUpdateSourceFileWithSameVersion(n,t)&&u(t.path)}})}function u(e){g.set(e,!0),d.delete(e)}function h(e,t){g.delete(t),d.delete(t),i.onRemoveSourceFile(t)}function _(e){i||n(e)}function a(e,t){_(e);t=e.getSourceFileByPath(t);return t?m(e,t)?i.getFilesAffectedByUpdatedShape(e,t):[t]:k.emptyArray}function m(e,t){var n,o,r;if(k.Debug.assert(!!t),!c.has(t.path))return c.set(t.path,!0),n=s.get(t.path),k.Debug.assert(!!n),r=n.signature,t.isDeclarationFile?(o=t.version,n.signature=o):(e=b(e,t,!0)).outputFiles&&0<e.outputFiles.length?(o=p.computeHash(e.outputFiles[0].text),n.signature=o):o=r,!r||o!==r}function f(e,t){var n;if(t.imports&&0<t.imports.length)for(var o=e.getTypeChecker(),r=0,i=t.imports;r<i.length;r++){var s=i[r],s=o.getSymbolAtLocation(s);s&&s.declarations&&s.declarations[0]&&(s=k.getSourceFileOfNode(s.declarations[0]))&&d(s.path)}var a=k.getDirectoryPath(t.path);if(t.referencedFiles&&0<t.referencedFiles.length)for(var l=0,c=t.referencedFiles;l<c.length;l++){var u=c[l];d(k.toPath(u.fileName,a,p.getCanonicalFileName))}return t.resolvedTypeReferenceDirectiveNames&&t.resolvedTypeReferenceDirectiveNames.forEach(function(e){e&&(e=e.resolvedFileName,d(k.toPath(e,a,p.getCanonicalFileName)))}),n;function d(e){(n=n||k.createMap()).set(e,!0)}}function y(t,e){if(l)return l;var n;s(e);for(var o=0,r=t.getSourceFiles();o<r.length;o++){var i=r[o];i!==e&&s(i)}return l=n||k.emptyArray;function s(e){t.isSourceFileDefaultLibrary(e)||(n=n||[]).push(e)}}}}(ts=ts||{}),function($e){var Ye=/(^\s*$)|(^\s*\/\/\/?\s*(@ts-ignore)?)/;function qe(e,t){t=$e.getDirectoryPath(t),t=$e.isRootedDiskPath(e)?e:$e.combinePaths(t,e);return $e.normalizePath(t)}function Je(e,r,i){var s;return $e.forEach(e,function(e){var t=$e.getNormalizedPathComponents(e,r);if(t.pop(),s){for(var n=Math.min(s.length,t.length),o=0;o<n;o++)if(i(s[o])!==i(t[o])){if(0===o)return!0;s.length=o;break}t.length<s.length&&(s.length=t.length)}else s=t})?"":s?$e.getNormalizedPathFromPathComponents(s):r}function Qe(r,i){var s,a=$e.createMap();function t(){return $e.getDirectoryPath($e.normalizePath($e.sys.getExecutingFilePath()))}var n=$e.getNewLineCharacter(r),e=$e.sys.realpath&&function(e){return $e.sys.realpath(e)};return{getSourceFile:function(e,t,n){var o;try{$e.performance.mark("beforeIORead"),o=$e.sys.readFile(e,r.charset),$e.performance.mark("afterIORead"),$e.performance.measure("I/O Read","beforeIORead","afterIORead")}catch(e){n&&n(e.message),o=""}return void 0!==o?$e.createSourceFile(e,o,t,i):void 0},getDefaultLibLocation:t,getDefaultLibFileName:function(e){return $e.combinePaths(t(),$e.getDefaultLibFileName(e))},writeFile:function(e,t,n,o){try{$e.performance.mark("beforeIOWrite"),function e(t){var n;t.length>$e.getRootLength(t)&&(n=t,!(a.has(n)||$e.sys.directoryExists(n)&&(a.set(n,!0),1)))&&(e($e.getDirectoryPath(t)),$e.sys.createDirectory(t))}($e.getDirectoryPath($e.normalizePath(e))),$e.isWatchSet(r)&&$e.sys.createHash&&$e.sys.getModifiedTime?function(e,t,n){s=s||$e.createMap();var o=$e.sys.createHash(t),r=$e.sys.getModifiedTime(e);if(r){var i=s.get(e);if(i&&i.byteOrderMark===n&&i.hash===o&&i.mtime.getTime()===r.getTime())return}$e.sys.writeFile(e,t,n);i=$e.sys.getModifiedTime(e);s.set(e,{hash:o,byteOrderMark:n,mtime:i})}(e,t,n):$e.sys.writeFile(e,t,n),$e.performance.mark("afterIOWrite"),$e.performance.measure("I/O Write","beforeIOWrite","afterIOWrite")}catch(e){o&&o(e.message)}},getCurrentDirectory:$e.memoize(function(){return $e.sys.getCurrentDirectory()}),useCaseSensitiveFileNames:function(){return $e.sys.useCaseSensitiveFileNames},getCanonicalFileName:function(e){return $e.sys.useCaseSensitiveFileNames?e:e.toLowerCase()},getNewLine:function(){return n},fileExists:function(e){return $e.sys.fileExists(e)},readFile:function(e){return $e.sys.readFile(e)},trace:function(e){return $e.sys.write(e+n)},directoryExists:function(e){return $e.sys.directoryExists(e)},getEnvironmentVariable:function(e){return $e.sys.getEnvironmentVariable?$e.sys.getEnvironmentVariable(e):""},getDirectories:function(e){return $e.sys.getDirectories(e)},realpath:e}}function i(e,t){var n,o,r=$e.DiagnosticCategory[e.category].toLowerCase()+" TS"+e.code+": "+S(e.messageText,t.getNewLine())+t.getNewLine();return e.file?(n=(o=$e.getLineAndCharacterOfPosition(e.file,e.start)).line,o=o.character,e=e.file.fileName,$e.convertToRelativePath(e,t.getCurrentDirectory(),function(e){return t.getCanonicalFileName(e)})+"("+(n+1)+","+(o+1)+"): "+r):r}$e.findConfigFile=function(e,t,n){for(void 0===n&&(n="tsconfig.json");;){var o=$e.combinePaths(e,n);if(t(o))return o;o=$e.getDirectoryPath(e);if(o===e)break;e=o}},$e.resolveTripleslashReference=qe,$e.computeCommonSourceDirectoryOfFilenames=Je,$e.createCompilerHost=Qe,$e.getPreEmitDiagnostics=function(e,t,n){var o=e.getOptionsDiagnostics(n).concat(e.getSyntacticDiagnostics(t,n),e.getGlobalDiagnostics(n),e.getSemanticDiagnostics(t,n));return e.getCompilerOptions().declaration&&$e.addRange(o,e.getDeclarationDiagnostics(t,n)),$e.sortAndDeduplicateDiagnostics(o)},$e.formatDiagnostics=function(e,t){for(var n="",o=0,r=e;o<r.length;o++)n+=i(r[o],t);return n},$e.formatDiagnostic=i;var v="[30;47m";function T(e,t){return t+e+"[0m"}function E(e,t){for(;e.length<t;)e=" "+e;return e}function S(e,t){if($e.isString(e))return e;for(var n=e,o="",r=0;n;){if(r){o+=t;for(var i=0;i<r;i++)o+="  "}o+=n.messageText,r++,n=n.next}return o}function Ze(e,t,n){if(0===e.length)return[];for(var o=[],r=$e.createMap(),i=0,s=e;i<s.length;i++){var a=s[i],l=void 0;r.has(a)?l=r.get(a):r.set(a,l=n(a,t)),o.push(l)}return o}function et(e,t){switch(t.extension){case".ts":case".d.ts":return;case".tsx":return n();case".jsx":return n()||o();case".js":return o()}function n(){return e.jsx?void 0:$e.Diagnostics.Module_0_was_resolved_to_1_but_jsx_is_not_set}function o(){return e.allowJs||!e.noImplicitAny?void 0:$e.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type}}function tt(e){return $e.Debug.assert(e.every(function(e){return void 0!==e}),"A name is undefined.",function(){return JSON.stringify(e)}),e}function nt(e){for(var t=e.imports,e=e.moduleAugmentations,n=t.map(function(e){return e.text}),o=0,r=e;o<r.length;o++){var i=r[o];9===i.kind&&n.push(i.text)}return n}$e.formatDiagnosticsWithColorAndContext=function(e,t){for(var n="",o=0,r=e;o<r.length;o++){var i=r[o],s="";if(i.file){var a=i.start,l=i.length,c=i.file,u=$e.getLineAndCharacterOfPosition(c,a),d=u.line,p=u.character,u=$e.getLineAndCharacterOfPosition(c,a+l),g=u.line,h=u.character,_=$e.getLineAndCharacterOfPosition(c,c.text.length).line,a=t?$e.convertToRelativePath(c.fileName,t.getCurrentDirectory(),function(e){return t.getCanonicalFileName(e)}):c.fileName,m=4<=g-d,f=(g+1+"").length;m&&(f=Math.max("...".length,f)),s+=t.getNewLine();for(var y=d;y<=g;y++){m&&d+1<y&&y<g-1&&(s+=T(E("...",f),v)+" "+t.getNewLine(),y=g-1);var k=$e.getPositionOfLineAndCharacter(c,y,0),b=y<_?$e.getPositionOfLineAndCharacter(c,y+1,0):c.text.length,k=(k=(k=c.text.slice(k,b)).replace(/\s+$/g,"")).replace("\t"," ");s=(s=(s+=T(E(y+1+"",f),v)+" ")+(k+t.getNewLine()))+T(E("",f),v)+" [91m",y===d?(b=y===g?h:void 0,s=(s+=k.slice(0,p).replace(/\S/g," "))+k.slice(p,b).replace(/./g,"~")):s+=(y===g?k.slice(0,h):k).replace(/./g,"~"),s+="[0m"}n=n+t.getNewLine()+(a+"("+(d+1)+","+(p+1)+"): ")}l=function(e){switch(e){case $e.DiagnosticCategory.Warning:return"[93m";case $e.DiagnosticCategory.Error:return"[91m";case $e.DiagnosticCategory.Message:return"[93m"}}(i.category);n+=T($e.DiagnosticCategory[i.category].toLowerCase(),l)+" TS"+i.code+": "+S(i.messageText,t.getNewLine()),i.file&&(n=n+t.getNewLine()+s),n+=t.getNewLine()}return n},$e.flattenDiagnosticMessageText=S,$e.isProgramUptoDate=function(e,t,n,o,r,i,s){return!(!e||s||e.getRootFileNames().length!==t.length||e.getSourceFiles().some(function(e){return e.version!==o(e.path)||i(e.path)})||e.getMissingFilePaths().some(r)||(s=e.getCompilerOptions(),!$e.compareDataObjects(s,n))||s.configFile&&n.configFile&&s.configFile.text!==n.configFile.text)},$e.createProgram=function(L,T,E,S){var g,e,t,M,o,F,C=[],U={},H={},x=$e.createMap(),B=$e.createDiagnosticCollection(),V="number"==typeof T.maxNodeModuleJsDepth?T.maxNodeModuleJsDepth:0,_=0,m=$e.createMap(),A=$e.createMap();$e.performance.mark("beforeProgram"),E=E||Qe(T);var r,W,G,I,K,D,j=T.noLib,z=$e.memoize(function(){return E.getDefaultLibFileName(T)}),X=E.getDefaultLibLocation?E.getDefaultLibLocation():$e.getDirectoryPath(z()),h=$e.createDiagnosticCollection(),N=E.getCurrentDirectory(),$=$e.getSupportedExtensions(T),Y=$e.createMap(),q=E.hasInvalidatedResolution||$e.returnFalse;I=E.resolveModuleNames?function(e,t,n){return E.resolveModuleNames(tt(e),t,n).map(function(e){var t;return e&&void 0===e.extension?((t=$e.clone(e)).extension=$e.extensionFromPath(e.resolvedFileName),t):e})}:(W=$e.createModuleResolutionCache(N,function(e){return E.getCanonicalFileName(e)}),G=function(e,t){return $e.resolveModuleName(e,t,T,E,W).resolvedModule},function(e,t){return Ze(tt(e),t,G)}),D=E.resolveTypeReferenceDirectives?function(e,t){return E.resolveTypeReferenceDirectives(tt(e),t)}:(K=function(e,t){return $e.resolveTypeReferenceDirective(e,t,T,E).resolvedTypeReferenceDirective},function(e,t){return Ze(tt(e),t,K)});var w,J=$e.createMap(),O=$e.createMap(),Q=$e.createMap(),R=$e.createMap(),Z=E.useCaseSensitiveFileNames()?$e.createMap():void 0,P=(s=T,(i=S&&S.getCompilerOptions())&&(i.target!==s.target||i.module!==s.module||i.moduleResolution!==s.moduleResolution||i.noResolve!==s.noResolve||i.jsx!==s.jsx||i.allowJs!==s.allowJs||i.disableSizeLimit!==s.disableSizeLimit||i.baseUrl!==s.baseUrl||!$e.equalOwnProperties(i.paths,s.paths))),ee=function(){if(!S)return 0;var e=S.getCompilerOptions();if($e.changesAffectModuleResolution(e,T))return S.structureIsReused=0;$e.Debug.assert(!(3&S.structureIsReused));var t=S.getRootFileNames();if(!$e.arrayIsEqualTo(t,L))return S.structureIsReused=0;if(!$e.arrayIsEqualTo(T.types,e.types))return S.structureIsReused=0;var n=[],o=[],r=[];if(S.structureIsReused=2,S.getMissingFilePaths().some(function(e){return E.fileExists(e)}))return S.structureIsReused=0;t=S.getSourceFiles();for(var i=$e.createMap(),s=0,a=t;s<a.length;s++){var l=a[s];if(!(y=E.getSourceFileByPath?E.getSourceFileByPath(l.fileName,l.path,T.target,void 0,P):E.getSourceFile(l.fileName,T.target,void 0,P)))return S.structureIsReused=0;$e.Debug.assert(!y.redirectInfo,"Host should not return a redirect source file from `getSourceFile`");var c=void 0;if(l.redirectInfo){if(y!==l.redirectInfo.unredirected)return S.structureIsReused=0;c=!1,y=l}else if(S.redirectTargetsSet.has(l.path)){if(y!==l)return S.structureIsReused=0;c=!1}else c=y!==l;y.path=l.path,o.push(y.path);var u=S.sourceFileToPackageName.get(l.path);if(void 0!==u){var d=i.get(u),p=c?1:0;if(void 0!==d&&1==p||1===d)return S.structureIsReused=0;i.set(u,p)}c?(l.hasNoDefaultLib!==y.hasNoDefaultLib&&(S.structureIsReused=1),$e.arrayIsEqualTo(l.referencedFiles,y.referencedFiles,Be)||(S.structureIsReused=1),Ie(y),$e.arrayIsEqualTo(l.imports,y.imports,Ae)||(S.structureIsReused=1),$e.arrayIsEqualTo(l.moduleAugmentations,y.moduleAugmentations,Ae)||(S.structureIsReused=1),(524288&l.flags)!=(524288&y.flags)&&(S.structureIsReused=1),$e.arrayIsEqualTo(l.typeReferenceDirectives,y.typeReferenceDirectives,Be)||(S.structureIsReused=1),r.push({oldFile:l,newFile:y})):q(l.path)&&(S.structureIsReused=1,r.push({oldFile:l,newFile:y})),n.push(y)}if(2!==S.structureIsReused)return S.structureIsReused;F=r.map(function(e){return e.newFile.path});for(var g=0,h=r;g<h.length;g++){var _,m,f=h[g],y=(l=f.oldFile,f.newFile),f=$e.getNormalizedAbsolutePath(y.fileName,N);I&&(m=ue(_=nt(y),f,y,{program:S,file:l,modifiedFilePaths:F}),$e.hasChangesInResolutions(_,m,l.resolvedModules,$e.moduleResolutionIsEqualTo)?(S.structureIsReused=1,y.resolvedModules=$e.zipToMap(_,m)):y.resolvedModules=l.resolvedModules),D&&(_=$e.map(y.typeReferenceDirectives,function(e){return e.fileName}),m=D(_,f),$e.hasChangesInResolutions(_,m,l.resolvedTypeReferenceDirectiveNames,$e.typeDirectiveIsEqualTo)?(S.structureIsReused=1,y.resolvedTypeReferenceDirectiveNames=$e.zipToMap(_,m)):y.resolvedTypeReferenceDirectiveNames=l.resolvedTypeReferenceDirectiveNames)}if(2!==S.structureIsReused)return S.structureIsReused;if(E.hasChangedAutomaticTypeDirectiveNames)return S.structureIsReused=1;w=S.getMissingFilePaths();for(var k=0;k<n.length;k++)R.set(o[k],n[k]),S.isSourceFileFromExternalLibrary(S.getSourceFileByPath(o[k]))&&A.set(o[k],!0);C=n,B=S.getFileProcessingDiagnostics();for(var b=0,v=r;b<v.length;b++)B.reattachFileDiagnostics(v[b].newFile);return x=S.getResolvedTypeReferenceDirectives(),O=S.sourceFileToPackageName,Q=S.redirectTargetsSet,S.structureIsReused=2}();if(2!==ee){$e.forEach(L,function(e){return xe(e,!1)});var n=$e.getAutomaticTypeDirectiveNames(T,E);if(n.length)for(var i=T.configFilePath?$e.getDirectoryPath(T.configFilePath):E.getCurrentDirectory(),s=$e.combinePaths(i,"__inferred type names__.ts"),te=D(n,s),a=0;a<n.length;a++)Le(n[a],te[a]);j||(T.lib?$e.forEach(T.lib,function(e){xe($e.combinePaths(X,e),!0)}):xe(z(),!0)),w=$e.arrayFrom(R.keys(),function(e){return e}).filter(function(e){return!R.get(e)})}if($e.Debug.assert(!!w),W=void 0,S&&E.onReleaseOldSourceFile)for(var ne=0,oe=S.getSourceFiles();ne<oe.length;ne++){var re=oe[ne];_e(re.path)&&!P||E.onReleaseOldSourceFile(re,S.getCompilerOptions())}if(S=void 0,g={getRootFileNames:function(){return L},getSourceFile:_e,getSourceFileByPath:me,getSourceFiles:function(){return C},getMissingFilePaths:function(){return w},getCompilerOptions:function(){return T},getSyntacticDiagnostics:function(e,t){return fe(e,ye,t)},getOptionsDiagnostics:function(){return $e.sortAndDeduplicateDiagnostics($e.concatenate(B.getGlobalDiagnostics(),$e.concatenate(h.getGlobalDiagnostics(),T.configFile?h.getDiagnostics(T.configFile.fileName):[])))},getGlobalDiagnostics:function(){return $e.sortAndDeduplicateDiagnostics(k().getGlobalDiagnostics().slice())},getSemanticDiagnostics:function(e,t){return fe(e,ke,t)},getDeclarationDiagnostics:function(e,t){var n=g.getCompilerOptions();return!e||n.out||n.outFile?Te(e,t):fe(e,Ce,t)},getTypeChecker:ge,getClassifiableNames:function(){if(!o){ge(),o=$e.createUnderscoreEscapedMap();for(var e=0,t=C;e<t.length;e++){var n=t[e];$e.copyEntries(n.classifiableNames,o)}}return o},getDiagnosticsProducingTypeChecker:k,getCommonSourceDirectory:ce,emit:function(l,c,u,d,p){return b(function(){var e=g,t=l,n=c,o=u,r=d,i=p,s=[];if(T.noEmit)return{diagnostics:s,sourceMaps:void 0,emittedFiles:void 0,emitSkipped:!0};if(T.noEmitOnError){var a=e.getOptionsDiagnostics(o).concat(e.getSyntacticDiagnostics(t,o),e.getGlobalDiagnostics(o),e.getSemanticDiagnostics(t,o));if(0===a.length&&e.getCompilerOptions().declaration&&(s=e.getDeclarationDiagnostics(void 0,o)),0<a.length||0<s.length)return{diagnostics:$e.concatenate(a,s),sourceMaps:void 0,emittedFiles:void 0,emitSkipped:!0}}return e=k().getEmitResolver(T.outFile||T.out?void 0:t),$e.performance.mark("beforeEmit"),o=r?[]:$e.getTransformers(T,i),a=$e.emitFiles(e,de(n),t,r,o),$e.performance.mark("afterEmit"),$e.performance.measure("Emit","beforeEmit","afterEmit"),a})},getCurrentDirectory:function(){return N},getNodeCount:function(){return k().getNodeCount()},getIdentifierCount:function(){return k().getIdentifierCount()},getSymbolCount:function(){return k().getSymbolCount()},getTypeCount:function(){return k().getTypeCount()},getFileProcessingDiagnostics:function(){return B},getResolvedTypeReferenceDirectives:function(){return x},isSourceFileFromExternalLibrary:pe,isSourceFileDefaultLibrary:function(t){return!!t.hasNoDefaultLib||!!T.noLib&&(T.lib?$e.forEach(T.lib,function(e){return 0===$e.compareStrings(t.fileName,$e.combinePaths(X,e),!E.useCaseSensitiveFileNames())}):0===$e.compareStrings(t.fileName,z(),!E.useCaseSensitiveFileNames()))},dropDiagnosticsProducingTypeChecker:function(){t=void 0},getSourceFileFromReference:function(e,t){return De(qe(t.fileName,e.fileName),function(e){return R.get(y(e))})},sourceFileToPackageName:O,redirectTargetsSet:Q},T.isolatedModules&&(T.declaration&&v($e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"declaration","isolatedModules"),T.noEmitOnError&&v($e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"noEmitOnError","isolatedModules"),T.out&&v($e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"out","isolatedModules"),T.outFile)&&v($e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"outFile","isolatedModules"),T.inlineSourceMap&&(T.sourceMap&&v($e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"sourceMap","inlineSourceMap"),T.mapRoot)&&v($e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"mapRoot","inlineSourceMap"),T.paths&&void 0===T.baseUrl&&v($e.Diagnostics.Option_paths_cannot_be_used_without_specifying_baseUrl_option,"paths"),T.paths)for(var l in T.paths)if($e.hasProperty(T.paths,l))if($e.hasZeroOrOneAsteriskCharacter(l)||Ve(!0,l,$e.Diagnostics.Pattern_0_can_have_at_most_one_Asterisk_character,l),$e.isArray(T.paths[l])){var ie=T.paths[l].length;0===ie&&Ve(!1,l,$e.Diagnostics.Substitutions_for_pattern_0_shouldn_t_be_an_empty_array,l);for(var c=0;c<ie;c++){var u=T.paths[l][c],se=typeof u;"string"==se?$e.hasZeroOrOneAsteriskCharacter(u)||He(l,c,$e.Diagnostics.Substitution_0_in_pattern_1_in_can_have_at_most_one_Asterisk_character,u,l):He(l,c,$e.Diagnostics.Substitution_0_for_pattern_1_has_incorrect_type_expected_string_got_2,u,l,se)}}else Ve(!1,l,$e.Diagnostics.Substitutions_for_pattern_0_should_be_an_array,l);T.sourceMap||T.inlineSourceMap||(T.inlineSources&&v($e.Diagnostics.Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided,"inlineSources"),T.sourceRoot&&v($e.Diagnostics.Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided,"sourceRoot")),T.out&&T.outFile&&v($e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"out","outFile"),T.mapRoot&&!T.sourceMap&&v($e.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"mapRoot","sourceMap"),T.declarationDir&&(T.declaration||v($e.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"declarationDir","declaration"),T.out||T.outFile)&&v($e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"declarationDir",T.out?"out":"outFile"),T.lib&&T.noLib&&v($e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"lib","noLib"),T.noImplicitUseStrict&&(void 0===T.alwaysStrict?T.strict:T.alwaysStrict)&&v($e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"noImplicitUseStrict","alwaysStrict");var d,p,ae,i=T.target||0,s=T.outFile||T.out,f=$e.forEach(C,function(e){return $e.isExternalModule(e)&&!e.isDeclarationFile?e:void 0});function le(e,t){var n,o;e&&(n=y(e),R.has(n)&&(T.configFilePath||(o=$e.chainDiagnosticMessages(void 0,$e.Diagnostics.Adding_a_tsconfig_json_file_will_help_organize_projects_that_contain_both_TypeScript_and_JavaScript_files_Learn_more_at_https_Colon_Slash_Slashaka_ms_Slashtsconfig)),o=$e.chainDiagnosticMessages(o,$e.Diagnostics.Cannot_write_file_0_because_it_would_overwrite_input_file,e),Xe(e,$e.createCompilerDiagnosticFromMessageChain(o))),o=E.useCaseSensitiveFileNames()?n:n.toLocaleLowerCase(),t.has(o)?Xe(e,$e.createCompilerDiagnostic($e.Diagnostics.Cannot_write_file_0_because_it_would_be_overwritten_by_multiple_input_files,e)):t.set(o,!0))}return T.isolatedModules?(T.module===$e.ModuleKind.None&&i<2&&v($e.Diagnostics.Option_isolatedModules_can_only_be_used_when_either_option_module_is_provided_or_option_target_is_ES2015_or_higher,"isolatedModules","target"),(p=$e.forEach(C,function(e){return $e.isExternalModule(e)||e.isDeclarationFile?void 0:e}))&&(d=$e.getErrorSpanForNode(p,p),h.add($e.createFileDiagnostic(p,d.start,d.length,$e.Diagnostics.Cannot_compile_namespaces_when_the_isolatedModules_flag_is_provided)))):f&&i<2&&T.module===$e.ModuleKind.None&&(p=$e.getErrorSpanForNode(f,f.externalModuleIndicator),h.add($e.createFileDiagnostic(f,p.start,p.length,$e.Diagnostics.Cannot_use_imports_exports_or_module_augmentations_when_module_is_none))),s&&(T.module&&T.module!==$e.ModuleKind.AMD&&T.module!==$e.ModuleKind.System?v($e.Diagnostics.Only_amd_and_system_modules_are_supported_alongside_0,T.out?"out":"outFile","module"):void 0===T.module&&f&&(d=$e.getErrorSpanForNode(f,f.externalModuleIndicator),h.add($e.createFileDiagnostic(f,d.start,d.length,$e.Diagnostics.Cannot_compile_modules_using_option_0_unless_the_module_flag_is_amd_or_system,T.out?"out":"outFile")))),(T.outDir||T.sourceRoot||T.mapRoot)&&(p=ce(),T.outDir)&&""===p&&$e.forEach(C,function(e){return 1<$e.getRootLength(e.fileName)})&&v($e.Diagnostics.Cannot_find_the_common_subdirectory_path_for_the_input_files,"outDir"),!T.noEmit&&T.allowJs&&T.declaration&&v($e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"allowJs","declaration"),T.checkJs&&!T.allowJs&&h.add($e.createCompilerDiagnostic($e.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"checkJs","allowJs")),T.emitDecoratorMetadata&&!T.experimentalDecorators&&v($e.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"emitDecoratorMetadata","experimentalDecorators"),T.jsxFactory?(T.reactNamespace&&v($e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"reactNamespace","jsxFactory"),$e.parseIsolatedEntityName(T.jsxFactory,i)||Ge("jsxFactory",$e.Diagnostics.Invalid_value_for_jsxFactory_0_is_not_a_valid_identifier_or_qualified_name,T.jsxFactory)):T.reactNamespace&&!$e.isIdentifierText(T.reactNamespace,i)&&Ge("reactNamespace",$e.Diagnostics.Invalid_value_for_reactNamespace_0_is_not_a_valid_identifier,T.reactNamespace),T.noEmit||T.suppressOutputPathCheck||(s=de(),ae=$e.createMap(),$e.forEachEmittedFile(s,function(e){le(e.jsFilePath,ae),le(e.declarationFilePath,ae)})),$e.performance.mark("afterProgram"),$e.performance.measure("Program","beforeProgram","afterProgram"),g;function y(e){return $e.toPath(e,N,Fe)}function ce(){var r;return void 0===e&&(r=$e.filter(C,function(e){return $e.sourceFileMayBeEmitted(e,T,pe)}),e=T.rootDir&&function(e,t){var n=!0;if(e)for(var o=E.getCanonicalFileName($e.getNormalizedAbsolutePath(t,N)),r=0,i=e;r<i.length;r++){var s=i[r];s.isDeclarationFile||0!==E.getCanonicalFileName($e.getNormalizedAbsolutePath(s.fileName,N)).indexOf(o)&&(h.add($e.createCompilerDiagnostic($e.Diagnostics.File_0_is_not_under_rootDir_1_rootDir_is_expected_to_contain_all_source_files,s.fileName,T.rootDir)),n=!1)}return n}(r,T.rootDir)?$e.getNormalizedAbsolutePath(T.rootDir,N):function(){for(var e=[],t=0,n=r;t<n.length;t++){var o=n[t];o.isDeclarationFile||e.push(o.fileName)}return Je(e,N,Fe)}())&&e[e.length-1]!==$e.directorySeparator&&(e+=$e.directorySeparator),e}function ue(e,t,n,o){if(0===ee&&!n.ambientModuleNames.length)return I(e,t);var r,i,s,a=o.program&&o.program.getSourceFile(t);if(a!==n&&n.resolvedModules){for(var l=[],c=0,u=e;c<u.length;c++){var d=u[c],p=n.resolvedModules.get(d);l.push(p)}return l}for(var g={},h=0;h<e.length;h++){if(d=e[h],n===a&&!q(a.path)){var _=a&&a.resolvedModules.get(d);if(_){$e.isTraceEnabled(T,E)&&$e.trace(E,$e.Diagnostics.Reusing_resolution_of_module_0_to_file_1_from_old_program,d,t),(i=i||new Array(e.length))[h]=_,(s=s||[]).push(d);continue}}_=!1;$e.contains(n.ambientModuleNames,d)?(_=!0,$e.isTraceEnabled(T,E)&&$e.trace(E,$e.Diagnostics.Module_0_was_resolved_as_locally_declared_ambient_module_in_file_1,d,t)):_=function(e,t){var n;return!$e.getResolvedModule(t.file,e)&&!(!(n=t.program&&t.program.getTypeChecker().tryFindAmbientModuleWithoutAugmentations(e))||!n.declarations||!(n=$e.forEach(n.declarations,function(e){e=$e.getSourceFileOfNode(e);return!$e.contains(t.modifiedFilePaths,e.path)&&e}))||($e.isTraceEnabled(T,E)&&$e.trace(E,$e.Diagnostics.Module_0_was_resolved_as_ambient_module_declared_in_1_since_this_file_was_not_modified,e,n.fileName),0))}(d,o),_?(i=i||new Array(e.length))[h]=g:(r=r||[]).push(d)}var m=r&&r.length?I(r,t,s):$e.emptyArray;if(!i)return $e.Debug.assert(m.length===e.length),m;for(var f=0,h=0;h<i.length;h++)i[h]?i[h]===g&&(i[h]=void 0):(i[h]=m[f],f++);return $e.Debug.assert(f===m.length),i}function de(e){return{getCanonicalFileName:Fe,getCommonSourceDirectory:g.getCommonSourceDirectory,getCompilerOptions:g.getCompilerOptions,getCurrentDirectory:function(){return N},getNewLine:function(){return E.getNewLine()},getSourceFile:g.getSourceFile,getSourceFileByPath:g.getSourceFileByPath,getSourceFiles:g.getSourceFiles,isSourceFileFromExternalLibrary:pe,writeFile:e||function(e,t,n,o,r){return E.writeFile(e,t,n,o,r)},isEmitBlocked:he}}function pe(e){return A.get(e.path)}function k(){return t=t||$e.createTypeChecker(g,!0)}function ge(){return M=M||$e.createTypeChecker(g,!1)}function he(e){return Y.has(y(e))}function _e(e){return me(y(e))}function me(e){return R.get(e)}function fe(e,t,n){return e?t(e,n):$e.sortAndDeduplicateDiagnostics($e.flatMap(g.getSourceFiles(),function(e){return n&&n.throwIfCancellationRequested(),t(e,n)}))}function ye(e){return $e.isSourceFileJavaScript(e)?(e.additionalSyntacticDiagnostics||(e.additionalSyntacticDiagnostics=(s=e,b(function(){var d=[],p=s;return g(s),d;function g(e){switch(p.kind){case 146:case 149:if(p.questionToken===e)return void d.push(_(e,$e.Diagnostics._0_can_only_be_used_in_a_ts_file,"?"));case 151:case 150:case 152:case 153:case 154:case 186:case 228:case 187:case 226:if(p.type===e)return void d.push(_(e,$e.Diagnostics.types_can_only_be_used_in_a_ts_file))}switch(e.kind){case 237:return void d.push(_(e,$e.Diagnostics.import_can_only_be_used_in_a_ts_file));case 243:if(e.isExportEquals)return void d.push(_(e,$e.Diagnostics.export_can_only_be_used_in_a_ts_file));break;case 259:if(108===e.token)return void d.push(_(e,$e.Diagnostics.implements_clauses_can_only_be_used_in_a_ts_file));break;case 230:return void d.push(_(e,$e.Diagnostics.interface_declarations_can_only_be_used_in_a_ts_file));case 233:return void d.push(_(e,$e.Diagnostics.module_declarations_can_only_be_used_in_a_ts_file));case 231:return void d.push(_(e,$e.Diagnostics.type_aliases_can_only_be_used_in_a_ts_file));case 232:return void d.push(_(e,$e.Diagnostics.enum_declarations_can_only_be_used_in_a_ts_file));case 203:return void d.push(_(e,$e.Diagnostics.non_null_assertions_can_only_be_used_in_a_ts_file));case 202:return void d.push(_(e.type,$e.Diagnostics.type_assertion_expressions_can_only_be_used_in_a_ts_file));case 184:$e.Debug.fail()}var t=p;p=e,$e.forEachChild(e,g,n),p=t}function n(e){switch(p.decorators!==e||T.experimentalDecorators||d.push(_(p,$e.Diagnostics.Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_to_remove_this_warning)),p.kind){case 229:case 151:case 150:case 152:case 153:case 154:case 186:case 228:case 187:if(e===p.typeParameters)return void d.push(h(e,$e.Diagnostics.type_parameter_declarations_can_only_be_used_in_a_ts_file));case 208:if(e!==p.modifiers)break;for(var t=e,n=208===p.kind,o=0,r=t;o<r.length;o++){var i=r[o];switch(i.kind){case 76:if(n)continue;case 114:case 112:case 113:case 131:case 124:case 117:d.push(_(i,$e.Diagnostics._0_can_only_be_used_in_a_ts_file,$e.tokenToString(i.kind)))}}return;case 149:if(e!==p.modifiers)break;for(var s=0,a=e;s<a.length;s++){var l=a[s];115!==l.kind&&d.push(_(l,$e.Diagnostics._0_can_only_be_used_in_a_ts_file,$e.tokenToString(l.kind)))}return;case 146:if(e===p.modifiers)return void d.push(h(e,$e.Diagnostics.parameter_modifiers_can_only_be_used_in_a_ts_file));break;case 181:case 182:case 201:if(e===p.typeArguments)return void d.push(h(e,$e.Diagnostics.type_arguments_can_only_be_used_in_a_ts_file))}for(var c=0,u=e;c<u.length;c++)g(u[c])}function h(e,t,n,o,r){var i=e.pos;return $e.createFileDiagnostic(s,i,e.end-i,t,n,o,r)}function _(e,t,n,o,r){return $e.createDiagnosticForNodeInSourceFile(s,e,t,n,o,r)}})),$e.isCheckJsEnabledForFile(e,T)&&(e.additionalSyntacticDiagnostics=$e.concatenate(e.additionalSyntacticDiagnostics,e.jsDocDiagnostics))),$e.concatenate(e.additionalSyntacticDiagnostics,e.parseDiagnostics)):e.parseDiagnostics;var s}function b(e){try{return e()}catch(e){throw e instanceof $e.OperationCanceledException&&(t=M=void 0),e}}function ke(e,t){return Se(e,t,U,be)}function be(r,i){return b(function(){var e,t,n,o;return T.skipLibCheck&&r.isDeclarationFile||T.skipDefaultLibCheck&&r.hasNoDefaultLib?$e.emptyArray:(t=k(),$e.Debug.assert(!!r.bindDiagnostics),o=(e=3===r.scriptKind||4===r.scriptKind||5===r.scriptKind||$e.isCheckJsEnabledForFile(r,T))?r.bindDiagnostics:$e.emptyArray,e=e?t.getDiagnostics(r,i):$e.emptyArray,t=B.getDiagnostics(r.fileName),n=h.getDiagnostics(r.fileName),o=o.concat(e,t,n),$e.filter(o,ve))})}function ve(e){var t=e.file,e=e.start;if(t)for(var n=$e.getLineStarts(t),o=$e.computeLineAndCharacterOfPosition(n,e).line;0<o;){var r=t.text.slice(n[o-1],n[o]),r=Ye.exec(r);if(!r)return!0;if(r[3])return!1;o--}return!0}function Te(e,t){return Se(e,t,H,Ee)}function Ee(t,n){return b(function(){var e=k().getEmitResolver(t,n);return $e.getDeclarationDiagnostics(de($e.noop),e,t)})}function Se(e,t,n,o){var r=e?n.perFile&&n.perFile.get(e.path):n.allDiagnostics;return r||(r=o(e,t)||$e.emptyArray,e?(n.perFile||(n.perFile=$e.createMap()),n.perFile.set(e.path,r)):n.allDiagnostics=r,r)}function Ce(e,t){return e.isDeclarationFile?[]:Te(e,t)}function xe(e,t){Ne($e.normalizePath(e),t,void 0)}function Be(e,t){return e.fileName===t.fileName}function Ae(e,t){return 9===e.kind?9===t.kind&&e.text===t.text:71===t.kind&&e.escapedText===t.escapedText}function Ie(a){if(!a.imports){var l,c,u,e,t,n=$e.isSourceFileJavaScript(a),d=$e.isExternalModule(a);T.importHelpers&&(T.isolatedModules||d)&&!a.isDeclarationFile&&(e=$e.createLiteral($e.externalHelpersModuleNameText),t=$e.createImportDeclaration(void 0,void 0,void 0),(e.parent=t).parent=a,l=[e]);for(var o=0,r=a.statements;o<r.length;o++){var i=r[o];(function e(t,n){switch(t.kind){case 238:case 237:case 244:var o=$e.getExternalModuleName(t);o&&$e.isStringLiteral(o)&&(!o.text||n&&$e.isExternalModuleNameRelative(o.text)||(l=l||[]).push(o));break;case 233:if($e.isAmbientModule(t)&&(n||$e.hasModifier(t,2)||a.isDeclarationFile)){var o=t.name,r=$e.getTextOfIdentifierOrLiteral(o);if(d||n&&!$e.isExternalModuleNameRelative(r))(c=c||[]).push(o);else if(!n){a.isDeclarationFile&&(u=u||[]).push(r);o=t.body;if(o)for(var i=0,s=o.statements;i<s.length;i++)e(s[i],!0)}}}})(i,!1),(524288&a.flags||n)&&s(i)}a.imports=l||$e.emptyArray,a.moduleAugmentations=c||$e.emptyArray,a.ambientModuleNames=u||$e.emptyArray}function s(e){$e.isRequireCall(e,!0)||$e.isImportCall(e)&&1===e.arguments.length&&9===e.arguments[0].kind?(l=l||[]).push(e.arguments[0]):$e.forEachChild(e,s)}}function De(t,n,e,o){var r;return $e.hasExtension(t)?T.allowNonTsExtensions||$e.forEach($,function(e){return $e.fileExtensionIs(E.getCanonicalFileName(t),e)})?(r=n(t),e&&(r?o&&E.getCanonicalFileName(t)===E.getCanonicalFileName(o.fileName)&&e($e.Diagnostics.A_file_cannot_have_a_reference_to_itself):e($e.Diagnostics.File_0_not_found,t)),r):void(e&&e($e.Diagnostics.File_0_has_unsupported_extension_The_only_supported_extensions_are_1,t,"'"+$.join("', '")+"'")):T.allowNonTsExtensions&&n(t)||(e&&T.allowNonTsExtensions?void e($e.Diagnostics.File_0_not_found,t):(o=$e.forEach($,function(e){return n(t+e)}),e&&!o&&e($e.Diagnostics.File_0_not_found,t+".ts"),o))}function Ne(e,t,n,o,r,i){De(e,function(e){return Oe(e,y(e),t,o,r,i,n)},function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];B.add(void 0!==o&&void 0!==i&&void 0!==r?$e.createFileDiagnostic.apply(void 0,[o,r,i-r,e].concat(t)):$e.createCompilerDiagnostic.apply(void 0,[e].concat(t)))},o)}function we(e,t,n,o,r){void 0!==n&&void 0!==o&&void 0!==r?B.add($e.createFileDiagnostic(n,o,r-o,$e.Diagnostics.File_name_0_differs_from_already_included_file_name_1_only_in_casing,e,t)):B.add($e.createCompilerDiagnostic($e.Diagnostics.File_name_0_differs_from_already_included_file_name_1_only_in_casing,e,t))}function Oe(t,e,n,o,r,i,s){if(R.has(e))return(d=R.get(e))&&T.forceConsistentCasingInFileNames&&$e.getNormalizedAbsolutePath(d.fileName,N)!==$e.getNormalizedAbsolutePath(t,N)&&we(t,d.fileName,o,r,i),d&&A.get(d.path)&&0===_?(A.set(d.path,!1),T.noResolve||(Re(d,n),Pe(d)),m.set(d.path,!1),Ue(d)):d&&m.get(d.path)&&_<V&&(m.set(d.path,!1),Ue(d)),d;var a,l,c,u,d=E.getSourceFile(t,T.target,function(e){void 0!==o&&void 0!==r&&void 0!==i?B.add($e.createFileDiagnostic(o,r,i-r,$e.Diagnostics.Cannot_read_file_0_Colon_1,t,e)):B.add($e.createCompilerDiagnostic($e.Diagnostics.Cannot_read_file_0_Colon_1,t,e))},P);if(s){var p,g=s.name+"/"+s.subModuleName+"@"+s.version,h=J.get(g);if(h)return u=h,a=d,p=t,c=e,(l=Object.create(u)).fileName=p,l.path=c,l.redirectInfo={redirectTarget:u,unredirected:a},Object.defineProperties(l,{id:{get:function(){return this.redirectInfo.redirectTarget.id},set:function(e){this.redirectInfo.redirectTarget.id=e}},symbol:{get:function(){return this.redirectInfo.redirectTarget.symbol},set:function(e){this.redirectInfo.redirectTarget.symbol=e}}}),p=l,Q.set(h.path,!0),R.set(e,p),O.set(e,s.name),C.push(p),p;d&&(J.set(g,d),O.set(e,s.name))}return R.set(e,d),d&&(A.set(e,0<_),d.path=e,E.useCaseSensitiveFileNames()&&(c=e.toLowerCase(),(u=Z.get(c))?we(t,u.fileName,o,r,i):Z.set(c,d)),j=j||d.hasNoDefaultLib,T.noResolve||(Re(d,n),Pe(d)),Ue(d),n?C.unshift(d):C.push(d)),d}function Re(t,n){$e.forEach(t.referencedFiles,function(e){Ne(qe(e.fileName,t.fileName),n,void 0,t,e.pos,e.end)})}function Pe(e){for(var t=$e.map(e.typeReferenceDirectives,function(e){return e.fileName.toLocaleLowerCase()}),n=D(t,e.fileName),o=0;o<t.length;o++){var r=e.typeReferenceDirectives[o],i=n[o],s=r.fileName.toLocaleLowerCase();$e.setResolvedTypeReferenceDirective(e,s,i),Le(s,i,e,r.pos,r.end)}}function Le(e,t,n,o,r){var i,s=x.get(e);s&&s.primary||(i=!0,t?!t.primary&&s?(t.resolvedFileName!==s.resolvedFileName&&E.readFile(t.resolvedFileName)!==_e(s.resolvedFileName).text&&B.add(Me(n,o,r,$e.Diagnostics.Conflicting_definitions_for_0_found_at_1_and_2_Consider_installing_a_specific_version_of_this_library_to_resolve_the_conflict,e,t.resolvedFileName,s.resolvedFileName)),i=!1):Ne(t.resolvedFileName,!1,t.packageId,n,o,r):B.add(Me(n,o,r,$e.Diagnostics.Cannot_find_type_definition_file_for_0,e)),i&&x.set(e,t))}function Me(e,t,n,o){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];return void 0===e||void 0===t||void 0===n?$e.createCompilerDiagnostic.apply(void 0,[o].concat(r)):$e.createFileDiagnostic.apply(void 0,[e,t,n-t,o].concat(r))}function Fe(e){return E.getCanonicalFileName(e)}function Ue(e){if(Ie(e),e.imports.length||e.moduleAugmentations.length){var t=nt(e),n={program:S,file:e,modifiedFilePaths:F},o=ue(t,$e.getNormalizedAbsolutePath(e.fileName,N),e,n);$e.Debug.assert(o.length===t.length);for(var r=0;r<t.length;r++){var i,s,a,l,c=o[r];$e.setResolvedModule(e,t[r],c),c&&(i=c.isExternalLibraryImport,l=!$e.extensionIsTypeScript(c.extension),s=c.resolvedFileName,i&&_++,a=i&&l&&V<_,l=s&&!et(T,c)&&!T.noResolve&&r<e.imports.length&&!a&&!(l&&!T.allowJs),a?m.set(e.path,!0):l&&Oe(s,y(s),!1,e,$e.skipTrivia(e.text,e.imports[r].pos),e.imports[r].end,c.packageId),i)&&_--}}else e.resolvedModules=void 0}function He(e,t,n,o,r,i){for(var s=!0,a=0,l=We();a<l.length;a++){var c=l[a];if($e.isObjectLiteralExpression(c.initializer))for(var u=0,d=$e.getPropertyAssignment(c.initializer,e);u<d.length;u++){var p=d[u];$e.isArrayLiteralExpression(p.initializer)&&p.initializer.elements.length>t&&(h.add($e.createDiagnosticForNodeInSourceFile(T.configFile,p.initializer.elements[t],n,o,r,i)),s=!1)}}s&&h.add($e.createCompilerDiagnostic(n,o,r,i))}function Ve(e,t,n,o){for(var r=!0,i=0,s=We();i<s.length;i++){var a=s[i];$e.isObjectLiteralExpression(a.initializer)&&ze(a.initializer,e,t,void 0,n,o)&&(r=!1)}r&&h.add($e.createCompilerDiagnostic(n,o))}function We(){var e=je();return e?$e.getPropertyAssignment(e,"paths"):$e.emptyArray}function v(e,t,n){Ke(!0,t,n,e,t,n)}function Ge(e,t,n){Ke(!1,e,void 0,t,n)}function Ke(e,t,n,o,r,i){var s=je();s&&ze(s,e,t,n,o,r,i)||h.add($e.createCompilerDiagnostic(o,r,i))}function je(){if(void 0===r&&(r=null,T.configFile)&&T.configFile.jsonObject)for(var e=0,t=$e.getPropertyAssignment(T.configFile.jsonObject,"compilerOptions");e<t.length;e++){var n=t[e];if($e.isObjectLiteralExpression(n.initializer)){r=n.initializer;break}}return r}function ze(e,t,n,o,r,i,s){for(var e=$e.getPropertyAssignment(e,n,o),a=0,l=e;a<l.length;a++){var c=l[a];h.add($e.createDiagnosticForNodeInSourceFile(T.configFile,t?c.name:c.initializer,r,i,s))}return e.length}function Xe(e,t){Y.set(y(e),!0),h.add(t)}},$e.getResolutionDiagnostic=et}(ts=ts||{}),function(x){var e,k;function r(e){return e&&void 0!==e.enableAutoDiscovery&&void 0===e.enable?{enable:e.enableAutoDiscovery,include:e.include||[],exclude:e.exclude||[]}:e}function b(){var t,n;return e||(t=x.createMap(),n=x.createMap(),x.forEach(x.optionDeclarations,function(e){t.set(e.name.toLowerCase(),e),e.shortName&&n.set(e.shortName,e.name)}),e={optionNameMap:t,shortOptionNames:n})}function o(e){return y(e,x.createCompilerDiagnostic)}function y(e,t){var n=x.arrayFrom(e.type.keys()).map(function(e){return"'"+e+"'"}).join(", ");return t(x.Diagnostics.Argument_for_0_option_must_be_Colon_1,"--"+e.name,n)}function _(e,t,n){return c(e,u(t||""),n)}function m(t,e,n){if(e=u(e=void 0===e?"":e),!x.startsWith(e,"-")){if(""===e)return[];var o=e.split(",");switch(t.element.type){case"number":return x.map(o,parseInt);case"string":return x.map(o,function(e){return e||""});default:return x.filter(x.map(o,function(e){return _(t.element,e,n)}),function(e){return!!e})}}}function f(e,t){void 0===t&&(t=!1),e=e.toLowerCase();var n=b(),o=n.optionNameMap,n=n.shortOptionNames;return t&&void 0!==(t=n.get(e))&&(e=t),o.get(e)}function n(e,t){e=x.parseJsonText(e,t);return{config:E(e,e.parseDiagnostics),error:e.parseDiagnostics.length?e.parseDiagnostics[0]:void 0}}function v(e,t){t=i(e,t);return x.isString(t)?x.parseJsonText(e,t):{parseDiagnostics:[t]}}function i(e,t){var n;try{n=t(e)}catch(t){return x.createCompilerDiagnostic(x.Diagnostics.Cannot_read_file_0_Colon_1,e,t.message)}return void 0===n?x.createCompilerDiagnostic(x.Diagnostics.The_specified_path_does_not_exist_Colon_0,e):n}function T(e){return x.arrayToMap(e,function(e){return e.name})}function E(e,t){return S(e,t,void 0,void 0)}function S(p,g,h,_){return p.jsonObject?m(p.jsonObject,h,void 0,void 0):{};function m(e,t,n,o){for(var r={},i=0,s=e.properties;i<s.length;i++){var a,l,c,u,d=s[i];261===d.kind?(d.questionToken&&g.push(x.createDiagnosticForNodeInSourceFile(p,d.questionToken,x.Diagnostics._0_can_only_be_used_in_a_ts_file,"?")),f(d.name)||g.push(x.createDiagnosticForNodeInSourceFile(p,d.name,x.Diagnostics.String_literal_with_double_quotes_expected)),a=x.unescapeLeadingUnderscores(x.getTextOfPropertyName(d.name)),l=t?t.get(a):void 0,n&&!l&&g.push(x.createDiagnosticForNodeInSourceFile(p,d.name,n,a)),c=function t(o,n){switch(o.kind){case 101:return s(n&&"boolean"!==n.type),!0;case 86:return s(n&&"boolean"!==n.type),!1;case 95:return s(n&&"extends"===n.name),null;case 9:f(o)||g.push(x.createDiagnosticForNodeInSourceFile(p,o,x.Diagnostics.String_literal_with_double_quotes_expected)),s(n&&x.isString(n.type)&&"string"!==n.type);var e=o.text;return!n||x.isString(n.type)||(r=n).type.has(e.toLowerCase())||g.push(y(r,function(e,t,n){return x.createDiagnosticForNodeInSourceFile(p,o,e,t,n)})),e;case 8:return s(n&&"number"!==n.type),Number(o.text);case 178:s(n&&"object"!==n.type);var r=o;return n?m(r,(e=n).elementOptions,e.extraKeyDiagnosticMessage,e.name):m(r,void 0,void 0,void 0);case 177:return s(n&&"list"!==n.type),e=o.elements,i=n&&n.element,e.map(function(e){return t(e,i)})}var i;return void(n?s(!0):g.push(x.createDiagnosticForNodeInSourceFile(p,o,x.Diagnostics.Property_value_can_only_be_string_literal_numeric_literal_true_false_null_object_literal_or_array_literal)));function s(e){e&&g.push(x.createDiagnosticForNodeInSourceFile(p,o,x.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,n.name,C(n)))}}(d.initializer,l),void 0!==a&&(r[a]=c,_)&&(o||t===h)&&(u=B(l,c),o?u&&_.onSetValidOptionKeyValueInParent(o,l,c):t===h&&(u?_.onSetValidOptionKeyValueInRoot(a,d.name,c,d.initializer):l||_.onSetUnknownOptionKeyValueInRoot(a,d.name,c,d.initializer)))):g.push(x.createDiagnosticForNodeInSourceFile(p,d,x.Diagnostics.Property_assignment_expected))}return r}function f(e){return x.isStringLiteral(e)&&x.isStringDoubleQuoted(e,p)}}function C(e){return"list"===e.type?"Array":x.isString(e.type)?e.type:"string"}function B(e,t){if(e)return!!I(t)||("list"===e.type?x.isArray(t):typeof t===(x.isString(e.type)?e.type:"string"))}function A(e,t){t&&Object.defineProperty(e,"configFile",{enumerable:!1,writable:!1,value:t})}function I(e){return null==e}function D(e,t){return x.getDirectoryPath(x.toPath(e,t,x.identity))}function a(e,o,t,n,r,i,s,a){void 0===r&&(r={}),void 0===s&&(s=[]),void 0===a&&(a=[]),x.Debug.assert(void 0===e&&void 0!==o||void 0!==e&&void 0===o);var l,c,u,d,p,g=[],h=x.createGetCanonicalFileName(t.useCaseSensitiveFileNames),e=function p(e,t,n,o,r,i,s,a){o=x.normalizeSlashes(o);var l=x.toPath(r||"",o,i);if(0<=s.indexOf(l))return a.push(x.createCompilerDiagnostic(x.Diagnostics.Circularity_detected_while_resolving_configuration_Colon_0,s.concat([l]).join(" -> "))),{raw:e||E(t,a)};e=e?function(e,t,n,o,r,i){x.hasProperty(e,"excludes")&&i.push(x.createCompilerDiagnostic(x.Diagnostics.Unknown_option_excludes_Did_you_mean_exclude));var s,a=P(e.compilerOptions,n,i,r),l=M(e.typeAcquisition||e.typingOptions,n,i,r);return e.compileOnSave=function(e,t,n){if(x.hasProperty(e,x.compileOnSaveCommandLineOption.name))return!("boolean"!=typeof(e=F(x.compileOnSaveCommandLineOption,e.compileOnSave,t,n))||!e)&&e}(e,n,i),e.extends&&(x.isString(e.extends)?(r=r?D(r,n):n,s=O(e.extends,t,r,o,i,x.createCompilerDiagnostic)):i.push(x.createCompilerDiagnostic(x.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"extends","string"))),{raw:e,options:a,typeAcquisition:l,extendedConfigPath:s}}(e,n,o,i,r,a):function(i,s,a,l,c,u){var o,r,d,p=R(c),e={onSetValidOptionKeyValueInParent:function(e,t,n){x.Debug.assert("compilerOptions"===e||"typeAcquisition"===e||"typingOptions"===e),("compilerOptions"===e?p:"typeAcquisition"===e?o=o||L(c):r=r||L(c))[t.name]=U(t,a,n)},onSetValidOptionKeyValueInRoot:function(e,t,n,o){switch(e){case"extends":var r=c?D(c,a):a;return void(d=O(n,s,r,l,u,function(e,t){return x.createDiagnosticForNodeInSourceFile(i,o,e,t)}));case"files":return void(0===n.length&&u.push(x.createDiagnosticForNodeInSourceFile(i,o,x.Diagnostics.The_files_list_in_config_file_0_is_empty,c||"tsconfig.json")))}},onSetUnknownOptionKeyValueInRoot:function(e,t,n,o){"excludes"===e&&u.push(x.createDiagnosticForNodeInSourceFile(i,t,x.Diagnostics.Unknown_option_excludes_Did_you_mean_exclude))}},e=S(i,u,k=void 0===k?T([{name:"compilerOptions",type:"object",elementOptions:T(x.optionDeclarations),extraKeyDiagnosticMessage:x.Diagnostics.Unknown_compiler_option_0},{name:"typingOptions",type:"object",elementOptions:T(x.typeAcquisitionDeclarations),extraKeyDiagnosticMessage:x.Diagnostics.Unknown_type_acquisition_option_0},{name:"typeAcquisition",type:"object",elementOptions:T(x.typeAcquisitionDeclarations),extraKeyDiagnosticMessage:x.Diagnostics.Unknown_type_acquisition_option_0},{name:"extends",type:"string"},{name:"files",type:"list",element:{name:"files",type:"string"}},{name:"include",type:"list",element:{name:"include",type:"string"}},{name:"exclude",type:"list",element:{name:"exclude",type:"string"}},x.compileOnSaveCommandLineOption]):k,e);return o=o||(r?void 0!==r.enableAutoDiscovery?{enable:r.enableAutoDiscovery,include:r.include,exclude:r.exclude}:r:L(c)),{raw:e,options:p,typeAcquisition:o,extendedConfigPath:d}}(t,n,o,i,r,a);{var c,u;e.extendedConfigPath&&(s=s.concat([l]),r=function(e,t,n,o,r,i,s){var a,l,c,u,d=v(t,function(e){return n.readFile(e)});return e&&(e.extendedSourceFiles||(e.extendedSourceFiles=[])).push(d.fileName),d.parseDiagnostics.length?void s.push.apply(s,d.parseDiagnostics):(a=x.getDirectoryPath(t),t=p(void 0,d,n,a,x.getBaseFileName(t),r,i,s),e&&(i=e.extendedSourceFiles).push.apply(i,d.extendedSourceFiles),w(t)&&(l=x.convertToRelativePath(a,o,r),c=function(e){return x.isRootedDiskPath(e)?e:x.combinePaths(l,e)},s=function(e){u[e]&&(u[e]=x.map(u[e],c))},u=t.raw,s("include"),s("exclude"),s("files")),t)}(t,e.extendedConfigPath,n,o,i,s,a))&&w(r)&&(c=r.raw,u=e.raw,(l=function(e){var t=u[e]||c[e];t&&(u[e]=t)})("include"),l("exclude"),l("files"),void 0===u.compileOnSave&&(u.compileOnSave=c.compileOnSave),e.options=x.assign({},r.options,e.options))}return e}(e,o,t,n,i,h,s,g),h=e.raw,r=x.extend(r,e.options||{}),_=(r.configFilePath=i,A(r,o),x.hasProperty(h,"files")&&!I(h.files)&&(x.isArray(h.files)?0===(c=h.files).length&&y(x.Diagnostics.The_files_list_in_config_file_0_is_empty,i||"tsconfig.json"):y(x.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"files","Array")),x.hasProperty(h,"include")&&!I(h.include)&&(x.isArray(h.include)?u=h.include:y(x.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"include","Array")),x.hasProperty(h,"exclude")&&!I(h.exclude)?x.isArray(h.exclude)?d=h.exclude:y(x.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"exclude","Array"):(l=h.compilerOptions&&h.compilerOptions.outDir)&&(d=[l]),c=u=void 0===(l=c)&&void 0===u?["**/*"]:u,u=d,d=i?D(i,n):n,n=r,t=t,f=g,a=a,p=o,d=x.normalizePath(d),f=function(e,t,n,o){var t=x.getRegularExpressionForWildcard(t,n,"exclude"),r=t&&new RegExp(t,o?"":"i"),i={};if(void 0!==e){for(var s=[],a=0,l=e;a<l.length;a++){var c,u,d,p=l[a],p=x.normalizePath(x.combinePaths(n,p));r&&r.test(p)||(p=p,c=o,d=void 0,(c=(d=W.exec(p))?{key:c?d[0]:d[0].toLowerCase(),flags:V.test(p)?1:0}:x.isImplicitGlob(p)?{key:p,flags:1}:void 0)&&(u=c.key,d=c.flags,void 0===(p=i[u])||p<d)&&1===(i[u]=d)&&s.push(u))}for(u in i)if(x.hasProperty(i,u))for(var g=0,h=s;g<h.length;g++){var _=h[g];u!==_&&x.containsPath(_,u,n,!o)&&delete i[u]}}return i}(_=c?G(c,f,!1,p,"include"):_,m=u?G(u,f,!0,p,"exclude"):m,d,t.useCaseSensitiveFileNames),0!==(p=H({filesSpecs:l,includeSpecs:c,excludeSpecs:u,validatedIncludeSpecs:_,validatedExcludeSpecs:m,wildcardDirectories:f},d,n,t,a)).fileNames.length||x.hasProperty(h,"files")||0!==s.length||g.push(N(p.spec,i)),p),m=_.fileNames,f=_.wildcardDirectories,n=_.spec;return{options:r,fileNames:m,typeAcquisition:e.typeAcquisition||L(),raw:h,errors:g,wildcardDirectories:f,compileOnSave:!!h.compileOnSave,configFileSpecs:n};function y(e,t,n){o||g.push(x.createCompilerDiagnostic(e,t,n))}}function N(e,t){var n=e.includeSpecs,e=e.excludeSpecs;return x.createCompilerDiagnostic(x.Diagnostics.No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2,t||"tsconfig.json",JSON.stringify(n||[]),JSON.stringify(e||[]))}function w(e){return!!e.options}function O(e,t,n,o,r,i){if(e=x.normalizeSlashes(e),x.isRootedDiskPath(e)||x.startsWith(e,"./")||x.startsWith(e,"../")){n=x.toPath(e,n,o);if(t.fileExists(n)||x.endsWith(n,".json")||t.fileExists(n+=".json"))return n;r.push(i(x.Diagnostics.File_0_does_not_exist,e))}else r.push(i(x.Diagnostics.A_path_in_an_extends_option_must_be_relative_or_rooted_but_0_is_not,e))}function R(e){return"jsconfig.json"===x.getBaseFileName(e)?{allowJs:!0,maxNodeModuleJsDepth:2,allowSyntheticDefaultImports:!0,skipLibCheck:!0}:{}}function P(e,t,n,o){o=R(o);return s(x.optionDeclarations,e,t,o,x.Diagnostics.Unknown_compiler_option_0,n),o}function L(e){return{enable:"jsconfig.json"===x.getBaseFileName(e),include:[],exclude:[]}}function M(e,t,n,o){o=L(o),e=r(e);return s(x.typeAcquisitionDeclarations,e,t,o,x.Diagnostics.Unknown_type_acquisition_option_0,n),o}function s(e,t,n,o,r,i){if(t){var s,a=T(e);for(s in t){var l=a.get(s);l?o[l.name]=F(l,t[s],n,i):i.push(x.createCompilerDiagnostic(r,s))}}}function F(e,t,n,o){var r,i,s,a;if(B(e,t))return"list"===(r=e.type)&&x.isArray(t)?(i=e,s=n,a=o,x.filter(x.map(t,function(e){return F(i.element,e,s,a)}),function(e){return!!e})):x.isString(r)?l(e,n,t):c(e,t,o);o.push(x.createCompilerDiagnostic(x.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,e.name,C(e)))}function U(e,t,n){var o;if(!I(n))return"list"===e.type?(o=e).element.isFilePath||!x.isString(o.element.type)?x.filter(x.map(n,function(e){return U(o.element,t,e)}),function(e){return!!e}):n:x.isString(e.type)?l(e,t,n):e.type.get(x.isString(n)?n.toLowerCase():n)}function l(e,t,n){return n=e.isFilePath&&""===(n=x.normalizePath(x.combinePaths(t,n)))?".":n}function c(e,t,n){if(!I(t)){t=t.toLowerCase(),t=e.type.get(t);if(void 0!==t)return t;n.push(o(e))}}function u(e){return"function"==typeof e.trim?e.trim():e.replace(/^[\s]+|[\s]+$/g,"")}x.compileOnSaveCommandLineOption={name:"compileOnSave",type:"boolean"},x.optionDeclarations=[{name:"help",shortName:"h",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Command_line_Options,description:x.Diagnostics.Print_this_message},{name:"help",shortName:"?",type:"boolean"},{name:"all",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Command_line_Options,description:x.Diagnostics.Show_all_compiler_options},{name:"version",shortName:"v",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Command_line_Options,description:x.Diagnostics.Print_the_compiler_s_version},{name:"init",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Command_line_Options,description:x.Diagnostics.Initializes_a_TypeScript_project_and_creates_a_tsconfig_json_file},{name:"project",shortName:"p",type:"string",isFilePath:!0,showInSimplifiedHelpView:!0,category:x.Diagnostics.Command_line_Options,paramType:x.Diagnostics.FILE_OR_DIRECTORY,description:x.Diagnostics.Compile_the_project_given_the_path_to_its_configuration_file_or_to_a_folder_with_a_tsconfig_json},{name:"pretty",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Command_line_Options,description:x.Diagnostics.Stylize_errors_and_messages_using_color_and_context_experimental},{name:"watch",shortName:"w",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Command_line_Options,description:x.Diagnostics.Watch_input_files},{name:"target",shortName:"t",type:x.createMapFromTemplate({es3:0,es5:1,es6:2,es2015:2,es2016:3,es2017:4,esnext:5}),paramType:x.Diagnostics.VERSION,showInSimplifiedHelpView:!0,category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Specify_ECMAScript_target_version_Colon_ES3_default_ES5_ES2015_ES2016_ES2017_or_ESNEXT},{name:"module",shortName:"m",type:x.createMapFromTemplate({none:x.ModuleKind.None,commonjs:x.ModuleKind.CommonJS,amd:x.ModuleKind.AMD,system:x.ModuleKind.System,umd:x.ModuleKind.UMD,es6:x.ModuleKind.ES2015,es2015:x.ModuleKind.ES2015,esnext:x.ModuleKind.ESNext}),paramType:x.Diagnostics.KIND,showInSimplifiedHelpView:!0,category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Specify_module_code_generation_Colon_none_commonjs_amd_system_umd_es2015_or_ESNext},{name:"lib",type:"list",element:{name:"lib",type:x.createMapFromTemplate({es5:"lib.es5.d.ts",es6:"lib.es2015.d.ts",es2015:"lib.es2015.d.ts",es7:"lib.es2016.d.ts",es2016:"lib.es2016.d.ts",es2017:"lib.es2017.d.ts",esnext:"lib.esnext.d.ts",dom:"lib.dom.d.ts","dom.iterable":"lib.dom.iterable.d.ts",webworker:"lib.webworker.d.ts",scripthost:"lib.scripthost.d.ts","es2015.core":"lib.es2015.core.d.ts","es2015.collection":"lib.es2015.collection.d.ts","es2015.generator":"lib.es2015.generator.d.ts","es2015.iterable":"lib.es2015.iterable.d.ts","es2015.promise":"lib.es2015.promise.d.ts","es2015.proxy":"lib.es2015.proxy.d.ts","es2015.reflect":"lib.es2015.reflect.d.ts","es2015.symbol":"lib.es2015.symbol.d.ts","es2015.symbol.wellknown":"lib.es2015.symbol.wellknown.d.ts","es2016.array.include":"lib.es2016.array.include.d.ts","es2017.object":"lib.es2017.object.d.ts","es2017.sharedmemory":"lib.es2017.sharedmemory.d.ts","es2017.string":"lib.es2017.string.d.ts","es2017.intl":"lib.es2017.intl.d.ts","esnext.asynciterable":"lib.esnext.asynciterable.d.ts"})},showInSimplifiedHelpView:!0,category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Specify_library_files_to_be_included_in_the_compilation_Colon},{name:"allowJs",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Allow_javascript_files_to_be_compiled},{name:"checkJs",type:"boolean",category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Report_errors_in_js_files},{name:"jsx",type:x.createMapFromTemplate({preserve:1,"react-native":3,react:2}),paramType:x.Diagnostics.KIND,showInSimplifiedHelpView:!0,category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Specify_JSX_code_generation_Colon_preserve_react_native_or_react},{name:"declaration",shortName:"d",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Generates_corresponding_d_ts_file},{name:"sourceMap",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Generates_corresponding_map_file},{name:"outFile",type:"string",isFilePath:!0,paramType:x.Diagnostics.FILE,showInSimplifiedHelpView:!0,category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Concatenate_and_emit_output_to_single_file},{name:"outDir",type:"string",isFilePath:!0,paramType:x.Diagnostics.DIRECTORY,showInSimplifiedHelpView:!0,category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Redirect_output_structure_to_the_directory},{name:"rootDir",type:"string",isFilePath:!0,paramType:x.Diagnostics.LOCATION,category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Specify_the_root_directory_of_input_files_Use_to_control_the_output_directory_structure_with_outDir},{name:"removeComments",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Do_not_emit_comments_to_output},{name:"noEmit",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Do_not_emit_outputs},{name:"importHelpers",type:"boolean",category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Import_emit_helpers_from_tslib},{name:"downlevelIteration",type:"boolean",category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Provide_full_support_for_iterables_in_for_of_spread_and_destructuring_when_targeting_ES5_or_ES3},{name:"isolatedModules",type:"boolean",category:x.Diagnostics.Basic_Options,description:x.Diagnostics.Transpile_each_file_as_a_separate_module_similar_to_ts_transpileModule},{name:"strict",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Strict_Type_Checking_Options,description:x.Diagnostics.Enable_all_strict_type_checking_options},{name:"noImplicitAny",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Strict_Type_Checking_Options,description:x.Diagnostics.Raise_error_on_expressions_and_declarations_with_an_implied_any_type},{name:"strictNullChecks",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Strict_Type_Checking_Options,description:x.Diagnostics.Enable_strict_null_checks},{name:"strictFunctionTypes",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Strict_Type_Checking_Options,description:x.Diagnostics.Enable_strict_checking_of_function_types},{name:"noImplicitThis",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Strict_Type_Checking_Options,description:x.Diagnostics.Raise_error_on_this_expressions_with_an_implied_any_type},{name:"alwaysStrict",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Strict_Type_Checking_Options,description:x.Diagnostics.Parse_in_strict_mode_and_emit_use_strict_for_each_source_file},{name:"noUnusedLocals",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Additional_Checks,description:x.Diagnostics.Report_errors_on_unused_locals},{name:"noUnusedParameters",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Additional_Checks,description:x.Diagnostics.Report_errors_on_unused_parameters},{name:"noImplicitReturns",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Additional_Checks,description:x.Diagnostics.Report_error_when_not_all_code_paths_in_function_return_a_value},{name:"noFallthroughCasesInSwitch",type:"boolean",showInSimplifiedHelpView:!0,category:x.Diagnostics.Additional_Checks,description:x.Diagnostics.Report_errors_for_fallthrough_cases_in_switch_statement},{name:"moduleResolution",type:x.createMapFromTemplate({node:x.ModuleResolutionKind.NodeJs,classic:x.ModuleResolutionKind.Classic}),paramType:x.Diagnostics.STRATEGY,category:x.Diagnostics.Module_Resolution_Options,description:x.Diagnostics.Specify_module_resolution_strategy_Colon_node_Node_js_or_classic_TypeScript_pre_1_6},{name:"baseUrl",type:"string",isFilePath:!0,category:x.Diagnostics.Module_Resolution_Options,description:x.Diagnostics.Base_directory_to_resolve_non_absolute_module_names},{name:"paths",type:"object",isTSConfigOnly:!0,category:x.Diagnostics.Module_Resolution_Options,description:x.Diagnostics.A_series_of_entries_which_re_map_imports_to_lookup_locations_relative_to_the_baseUrl},{name:"rootDirs",type:"list",isTSConfigOnly:!0,element:{name:"rootDirs",type:"string",isFilePath:!0},category:x.Diagnostics.Module_Resolution_Options,description:x.Diagnostics.List_of_root_folders_whose_combined_content_represents_the_structure_of_the_project_at_runtime},{name:"typeRoots",type:"list",element:{name:"typeRoots",type:"string",isFilePath:!0},category:x.Diagnostics.Module_Resolution_Options,description:x.Diagnostics.List_of_folders_to_include_type_definitions_from},{name:"types",type:"list",element:{name:"types",type:"string"},showInSimplifiedHelpView:!0,category:x.Diagnostics.Module_Resolution_Options,description:x.Diagnostics.Type_declaration_files_to_be_included_in_compilation},{name:"allowSyntheticDefaultImports",type:"boolean",category:x.Diagnostics.Module_Resolution_Options,description:x.Diagnostics.Allow_default_imports_from_modules_with_no_default_export_This_does_not_affect_code_emit_just_typechecking},{name:"preserveSymlinks",type:"boolean",category:x.Diagnostics.Module_Resolution_Options,description:x.Diagnostics.Do_not_resolve_the_real_path_of_symlinks},{name:"sourceRoot",type:"string",isFilePath:!0,paramType:x.Diagnostics.LOCATION,category:x.Diagnostics.Source_Map_Options,description:x.Diagnostics.Specify_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations},{name:"mapRoot",type:"string",isFilePath:!0,paramType:x.Diagnostics.LOCATION,category:x.Diagnostics.Source_Map_Options,description:x.Diagnostics.Specify_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations},{name:"inlineSourceMap",type:"boolean",category:x.Diagnostics.Source_Map_Options,description:x.Diagnostics.Emit_a_single_file_with_source_maps_instead_of_having_a_separate_file},{name:"inlineSources",type:"boolean",category:x.Diagnostics.Source_Map_Options,description:x.Diagnostics.Emit_the_source_alongside_the_sourcemaps_within_a_single_file_requires_inlineSourceMap_or_sourceMap_to_be_set},{name:"experimentalDecorators",type:"boolean",category:x.Diagnostics.Experimental_Options,description:x.Diagnostics.Enables_experimental_support_for_ES7_decorators},{name:"emitDecoratorMetadata",type:"boolean",category:x.Diagnostics.Experimental_Options,description:x.Diagnostics.Enables_experimental_support_for_emitting_type_metadata_for_decorators},{name:"jsxFactory",type:"string",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Specify_the_JSX_factory_function_to_use_when_targeting_react_JSX_emit_e_g_React_createElement_or_h},{name:"diagnostics",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Show_diagnostic_information},{name:"extendedDiagnostics",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Show_verbose_diagnostic_information},{name:"traceResolution",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Enable_tracing_of_the_name_resolution_process},{name:"listFiles",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Print_names_of_files_part_of_the_compilation},{name:"listEmittedFiles",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Print_names_of_generated_files_part_of_the_compilation},{name:"out",type:"string",isFilePath:!1,category:x.Diagnostics.Advanced_Options,paramType:x.Diagnostics.FILE,description:x.Diagnostics.Deprecated_Use_outFile_instead_Concatenate_and_emit_output_to_single_file},{name:"reactNamespace",type:"string",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Deprecated_Use_jsxFactory_instead_Specify_the_object_invoked_for_createElement_when_targeting_react_JSX_emit},{name:"skipDefaultLibCheck",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Deprecated_Use_skipLibCheck_instead_Skip_type_checking_of_default_library_declaration_files},{name:"charset",type:"string",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.The_character_set_of_the_input_files},{name:"emitBOM",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Emit_a_UTF_8_Byte_Order_Mark_BOM_in_the_beginning_of_output_files},{name:"locale",type:"string",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.The_locale_used_when_displaying_messages_to_the_user_e_g_en_us},{name:"newLine",type:x.createMapFromTemplate({crlf:0,lf:1}),paramType:x.Diagnostics.NEWLINE,category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Specify_the_end_of_line_sequence_to_be_used_when_emitting_files_Colon_CRLF_dos_or_LF_unix},{name:"noErrorTruncation",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Do_not_truncate_error_messages},{name:"noLib",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Do_not_include_the_default_library_file_lib_d_ts},{name:"noResolve",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Do_not_add_triple_slash_references_or_imported_modules_to_the_list_of_compiled_files},{name:"stripInternal",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Do_not_emit_declarations_for_code_that_has_an_internal_annotation},{name:"disableSizeLimit",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Disable_size_limitations_on_JavaScript_projects},{name:"noImplicitUseStrict",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Do_not_emit_use_strict_directives_in_module_output},{name:"noEmitHelpers",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Do_not_generate_custom_helper_functions_like_extends_in_compiled_output},{name:"noEmitOnError",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Do_not_emit_outputs_if_any_errors_were_reported},{name:"preserveConstEnums",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Do_not_erase_const_enum_declarations_in_generated_code},{name:"declarationDir",type:"string",isFilePath:!0,paramType:x.Diagnostics.DIRECTORY,category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Output_directory_for_generated_declaration_files},{name:"skipLibCheck",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Skip_type_checking_of_declaration_files},{name:"allowUnusedLabels",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Do_not_report_errors_on_unused_labels},{name:"allowUnreachableCode",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Do_not_report_errors_on_unreachable_code},{name:"suppressExcessPropertyErrors",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Suppress_excess_property_checks_for_object_literals},{name:"suppressImplicitAnyIndexErrors",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Suppress_noImplicitAny_errors_for_indexing_objects_lacking_index_signatures},{name:"forceConsistentCasingInFileNames",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Disallow_inconsistently_cased_references_to_the_same_file},{name:"maxNodeModuleJsDepth",type:"number",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.The_maximum_dependency_depth_to_search_under_node_modules_and_load_JavaScript_files},{name:"noStrictGenericChecks",type:"boolean",category:x.Diagnostics.Advanced_Options,description:x.Diagnostics.Disable_strict_checking_of_generic_signatures_in_function_types},{name:"plugins",type:"list",isTSConfigOnly:!0,element:{name:"plugin",type:"object"},description:x.Diagnostics.List_of_language_service_plugins}],x.typeAcquisitionDeclarations=[{name:"enableAutoDiscovery",type:"boolean"},{name:"enable",type:"boolean"},{name:"include",type:"list",element:{name:"include",type:"string"}},{name:"exclude",type:"list",element:{name:"exclude",type:"string"}}],x.defaultInitCompilerOptions={module:x.ModuleKind.CommonJS,target:1,strict:!0},x.convertEnableAutoDiscoveryToEnable=r,x.createCompilerDiagnosticForInvalidCustomType=o,x.parseCustomTypeOption=_,x.parseListTypeOption=m,x.parseCommandLine=function(e,u){var d={},p=[],g=[];return h(e),{options:d,fileNames:p,errors:g};function h(e){for(var t=0;t<e.length;){var n=e[t];if(t++,64===n.charCodeAt(0)){o=void 0;r=void 0;i=void 0;s=void 0;a=void 0;var o=n.slice(1);var r=u?u(o):x.sys.readFile(o);if(r){for(var i=[],s=0;;){for(;s<r.length&&r.charCodeAt(s)<=32;)s++;if(s>=r.length)break;var a=s;if(34===r.charCodeAt(a)){for(s++;s<r.length&&34!==r.charCodeAt(s);)s++;s<r.length?(i.push(r.substring(a+1,s)),s++):g.push(x.createCompilerDiagnostic(x.Diagnostics.Unterminated_quoted_string_in_response_file_0,o))}else{for(;32<r.charCodeAt(s);)s++;i.push(r.substring(a,s))}}h(i)}else g.push(x.createCompilerDiagnostic(x.Diagnostics.File_0_not_found,o))}else if(45===n.charCodeAt(0)){var l=f(n.slice(45===n.charCodeAt(1)?2:1),!0);if(l)if(l.isTSConfigOnly)g.push(x.createCompilerDiagnostic(x.Diagnostics.Option_0_can_only_be_specified_in_tsconfig_json_file,l.name));else switch(e[t]||"boolean"===l.type||g.push(x.createCompilerDiagnostic(x.Diagnostics.Compiler_option_0_expects_an_argument,l.name)),l.type){case"number":d[l.name]=parseInt(e[t]),t++;break;case"boolean":var c=e[t];d[l.name]="false"!==c,"false"!==c&&"true"!==c||t++;break;case"string":d[l.name]=e[t]||"",t++;break;case"list":c=m(l,e[t],g);d[l.name]=c||[],c&&t++;break;default:d[l.name]=_(l,e[t],g),t++}else g.push(x.createCompilerDiagnostic(x.Diagnostics.Unknown_compiler_option_0,n))}else p.push(n)}}},x.readConfigFile=function(e,t){t=i(e,t);return x.isString(t)?n(e,t):{config:{},error:t}},x.parseConfigFileTextToJson=n,x.readJsonConfigFile=v,x.convertToObject=E,x.generateTSConfig=function(e,t,n){for(var s=function(r){function e(e){if(x.hasProperty(r,e)){if(s.has(e)&&s.get(e).category===x.Diagnostics.Command_line_Options)return;var t,n=r[e],o=s.get(e.toLowerCase());o&&((t=function e(t){return"string"===t.type||"number"===t.type||"boolean"===t.type?void 0:"list"===t.type?e(t.element):t.type}(o))?"list"===o.type?i.set(e,n.map(function(e){return y(e,t)})):i.set(e,y(n,t)):i.set(e,n))}}var t,i=x.createMap(),s=b().optionNameMap;for(t in r)e(t);return i}(x.extend(e,x.defaultInitCompilerOptions)),o=x.createMultiMap(),r=0,i=x.optionDeclarations;r<i.length;r++){var a=i[r],l=a.category;void 0!==l&&l!==x.Diagnostics.Command_line_Options&&l!==x.Diagnostics.Advanced_Options&&o.add(x.getLocaleSpecificMessage(l),a)}var c=0,u=0,d=[],p=[],g=(o.forEach(function(e,t){0!==d.length&&(d.push(""),p.push("")),d.push("/* "+t+" */"),p.push("");for(var n=0,o=e;n<o.length;n++){var r=o[n],i=s.has(r.name)?'"'+r.name+'": '+JSON.stringify(s.get(r.name))+((u+=1)===s.size?"":","):'// "'+r.name+'": '+JSON.stringify(function(e){switch(e.type){case"number":return 1;case"boolean":return!0;case"string":return e.isFilePath?"./":"";case"list":return[];case"object":return{};default:return e.type.keys().next().value}}(r))+",";d.push(i),p.push("/* "+(r.description&&x.getLocaleSpecificMessage(r.description)||r.name)+" */"),c=Math.max(i.length,c)}}),k(2)),h=[];h.push("{"),h.push(g+'"compilerOptions": {');for(var _=0;_<d.length;_++){var m=d[_],f=p[_];h.push(m&&""+g+g+m+(f&&k(c-m.length+2)+f))}if(t.length){for(h.push(g+"},"),h.push(g+'"files": ['),_=0;_<t.length;_++)h.push(""+g+g+JSON.stringify(t[_])+(_===t.length-1?"":","));h.push(g+"]")}else h.push(g+"}");return h.push("}"),h.join(n);function y(n,e){return x.forEachEntry(e,function(e,t){if(e===n)return t})}function k(e){return Array(e+1).join(" ")}},x.parseJsonConfigFileContent=function(e,t,n,o,r,i,s){return a(e,void 0,t,n,o,r,i,s)},x.parseJsonSourceFileConfigFileContent=function(e,t,n,o,r,i,s){return a(void 0,e,t,n,o,r,i,s)},x.setConfigFileInOptions=A,x.isErrorNoInputFiles=function(e){return e.code===x.Diagnostics.No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2.code},x.getErrorForNoInputFiles=N,x.convertCompilerOptionsFromJson=function(e,t,n){var o=[];return{options:P(e,t,o,n),errors:o}},x.convertTypeAcquisitionFromJson=function(e,t,n){var o=[];return{options:M(e,t,o,n),errors:o}};var d=/(^|\/)\*\*\/?$/,p=/(^|\/)\*\*\/(.*\/)?\*\*($|\/)/,g=/(^|\/)\*\*\/(.*\/)?\.\.($|\/)/,V=/\/[^/]*?[*?][^/]*\//,W=/^[^*?]*(?=\/[^/]*[*?])/;function H(e,t,n,o,r){void 0===r&&(r=[]),t=x.normalizePath(t);var i=o.useCaseSensitiveFileNames?K:j,s=x.createMap(),a=x.createMap(),l=e.filesSpecs,c=e.validatedIncludeSpecs,u=e.validatedExcludeSpecs,d=e.wildcardDirectories,p=x.getSupportedExtensions(n,r);if(l)for(var g=0,h=l;g<h.length;g++){var _=h[g],m=x.getNormalizedAbsolutePath(_,t);s.set(i(m),m)}if(c&&0<c.length)for(var f=0,y=o.readDirectory(t,p,u,c,void 0);f<y.length;f++)if(!function(e,t,n,o,r){for(var i=x.getExtensionPriority(e,o),s=x.adjustExtensionPriority(i,o),a=0;a<s;a++){var l=o[a],l=r(x.changeExtension(e,l));if(t.has(l)||n.has(l))return 1}return}(m=y[f],s,a,p,i)){C=S=E=T=v=b=k=void 0;for(var k=m,b=a,v=p,T=i,E=x.getExtensionPriority(k,v),S=x.getNextLowestExtensionPriority(E,v);S<v.length;S++){var C=v[S],C=T(x.changeExtension(k,C));b.delete(C)}E=i(m);s.has(E)||a.has(E)||a.set(E,m)}n=x.arrayFrom(s.values()),r=x.arrayFrom(a.values());return{fileNames:n.concat(r),wildcardDirectories:d,spec:e}}function G(e,n,o,l,c){return e.filter(function(e){t=e;var t=!o&&d.test(t)?x.Diagnostics.File_specification_cannot_end_in_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0:p.test(t)?x.Diagnostics.File_specification_cannot_contain_multiple_recursive_directory_wildcards_Asterisk_Asterisk_Colon_0:g.test(t)?x.Diagnostics.File_specification_cannot_contain_a_parent_directory_that_appears_after_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0:void 0;return void 0!==t&&n.push(function(e,t){if(l&&l.jsonObject)for(var n=0,o=x.getPropertyAssignment(l.jsonObject,c);n<o.length;n++){var r=o[n];if(x.isArrayLiteralExpression(r.initializer))for(var i=0,s=r.initializer.elements;i<s.length;i++){var a=s[i];if(x.isStringLiteral(a)&&a.text===t)return x.createDiagnosticForNodeInSourceFile(l,a,e,t)}}return x.createCompilerDiagnostic(e,t)}(t,e)),void 0===t})}function K(e){return e}function j(e){return e.toLowerCase()}x.getFileNamesFromConfigSpecs=H,x.convertCompilerOptionsForTelemetry=function(e){var t,n,o={};for(t in e)e.hasOwnProperty(t)&&void 0!==(n=f(t))&&(o[t]=function t(n,e){switch(e.type){case"object":case"string":return"";case"number":return"number"==typeof n?n:"";case"boolean":return"boolean"==typeof n?n:"";case"list":var o=e.element;return x.isArray(n)?n.map(function(e){return t(e,o)}):"";default:return x.forEachEntry(e.type,function(e,t){if(e===n)return t})}}(e[t],n));return o}}(ts=ts||{}),function(e){function t(e){this.text=e}var n,o;o=e.ScriptSnapshot||(e.ScriptSnapshot={}),t.prototype.getText=function(e,t){return 0===e&&t===this.text.length?this.text:this.text.substring(e,t)},t.prototype.getLength=function(){return this.text.length},t.prototype.getChangeRange=function(){},n=t,o.fromString=function(e){return new n(e)};e.TextChange=function(){},(o=e.HighlightSpanKind||(e.HighlightSpanKind={})).none="none",o.definition="definition",o.reference="reference",o.writtenReference="writtenReference",(o=e.IndentStyle||(e.IndentStyle={}))[o.None=0]="None",o[o.Block=1]="Block",o[o.Smart=2]="Smart",(o=e.SymbolDisplayPartKind||(e.SymbolDisplayPartKind={}))[o.aliasName=0]="aliasName",o[o.className=1]="className",o[o.enumName=2]="enumName",o[o.fieldName=3]="fieldName",o[o.interfaceName=4]="interfaceName",o[o.keyword=5]="keyword",o[o.lineBreak=6]="lineBreak",o[o.numericLiteral=7]="numericLiteral",o[o.stringLiteral=8]="stringLiteral",o[o.localName=9]="localName",o[o.methodName=10]="methodName",o[o.moduleName=11]="moduleName",o[o.operator=12]="operator",o[o.parameterName=13]="parameterName",o[o.propertyName=14]="propertyName",o[o.punctuation=15]="punctuation",o[o.space=16]="space",o[o.text=17]="text",o[o.typeParameterName=18]="typeParameterName",o[o.enumMemberName=19]="enumMemberName",o[o.functionName=20]="functionName",o[o.regularExpressionLiteral=21]="regularExpressionLiteral",(o=e.OutputFileType||(e.OutputFileType={}))[o.JavaScript=0]="JavaScript",o[o.SourceMap=1]="SourceMap",o[o.Declaration=2]="Declaration",(o=e.EndOfLineState||(e.EndOfLineState={}))[o.None=0]="None",o[o.InMultiLineCommentTrivia=1]="InMultiLineCommentTrivia",o[o.InSingleQuoteStringLiteral=2]="InSingleQuoteStringLiteral",o[o.InDoubleQuoteStringLiteral=3]="InDoubleQuoteStringLiteral",o[o.InTemplateHeadOrNoSubstitutionTemplate=4]="InTemplateHeadOrNoSubstitutionTemplate",o[o.InTemplateMiddleOrTail=5]="InTemplateMiddleOrTail",o[o.InTemplateSubstitutionPosition=6]="InTemplateSubstitutionPosition",(o=e.TokenClass||(e.TokenClass={}))[o.Punctuation=0]="Punctuation",o[o.Keyword=1]="Keyword",o[o.Operator=2]="Operator",o[o.Comment=3]="Comment",o[o.Whitespace=4]="Whitespace",o[o.Identifier=5]="Identifier",o[o.NumberLiteral=6]="NumberLiteral",o[o.StringLiteral=7]="StringLiteral",o[o.RegExpLiteral=8]="RegExpLiteral",(o=e.ScriptElementKind||(e.ScriptElementKind={})).unknown="",o.warning="warning",o.keyword="keyword",o.scriptElement="script",o.moduleElement="module",o.classElement="class",o.localClassElement="local class",o.interfaceElement="interface",o.typeElement="type",o.enumElement="enum",o.enumMemberElement="enum member",o.variableElement="var",o.localVariableElement="local var",o.functionElement="function",o.localFunctionElement="local function",o.memberFunctionElement="method",o.memberGetAccessorElement="getter",o.memberSetAccessorElement="setter",o.memberVariableElement="property",o.constructorImplementationElement="constructor",o.callSignatureElement="call",o.indexSignatureElement="index",o.constructSignatureElement="construct",o.parameterElement="parameter",o.typeParameterElement="type parameter",o.primitiveType="primitive type",o.label="label",o.alias="alias",o.constElement="const",o.letElement="let",o.directory="directory",o.externalModuleName="external module name",o.jsxAttribute="JSX attribute",(o=e.ScriptElementKindModifier||(e.ScriptElementKindModifier={})).none="",o.publicMemberModifier="public",o.privateMemberModifier="private",o.protectedMemberModifier="protected",o.exportedModifier="export",o.ambientModifier="declare",o.staticModifier="static",o.abstractModifier="abstract",(o=e.ClassificationTypeNames||(e.ClassificationTypeNames={})).comment="comment",o.identifier="identifier",o.keyword="keyword",o.numericLiteral="number",o.operator="operator",o.stringLiteral="string",o.whiteSpace="whitespace",o.text="text",o.punctuation="punctuation",o.className="class name",o.enumName="enum name",o.interfaceName="interface name",o.moduleName="module name",o.typeParameterName="type parameter name",o.typeAliasName="type alias name",o.parameterName="parameter name",o.docCommentTagName="doc comment tag name",o.jsxOpenTagName="jsx open tag name",o.jsxCloseTagName="jsx close tag name",o.jsxSelfClosingTagName="jsx self closing tag name",o.jsxAttribute="jsx attribute",o.jsxText="jsx text",o.jsxAttributeStringLiteralValue="jsx attribute string literal value",(o=e.ClassificationType||(e.ClassificationType={}))[o.comment=1]="comment",o[o.identifier=2]="identifier",o[o.keyword=3]="keyword",o[o.numericLiteral=4]="numericLiteral",o[o.operator=5]="operator",o[o.stringLiteral=6]="stringLiteral",o[o.regularExpressionLiteral=7]="regularExpressionLiteral",o[o.whiteSpace=8]="whiteSpace",o[o.text=9]="text",o[o.punctuation=10]="punctuation",o[o.className=11]="className",o[o.enumName=12]="enumName",o[o.interfaceName=13]="interfaceName",o[o.moduleName=14]="moduleName",o[o.typeParameterName=15]="typeParameterName",o[o.typeAliasName=16]="typeAliasName",o[o.parameterName=17]="parameterName",o[o.docCommentTagName=18]="docCommentTagName",o[o.jsxOpenTagName=19]="jsxOpenTagName",o[o.jsxCloseTagName=20]="jsxCloseTagName",o[o.jsxSelfClosingTagName=21]="jsxSelfClosingTagName",o[o.jsxAttribute=22]="jsxAttribute",o[o.jsxText=23]="jsxText",o[o.jsxAttributeStringLiteralValue=24]="jsxAttributeStringLiteralValue"}(ts=ts||{}),function(p){function n(e){switch(e.kind){case 146:case 226:case 176:case 149:case 148:case 261:case 262:case 151:case 150:case 152:case 153:case 154:case 228:case 186:case 187:case 260:case 253:return 1;case 145:case 230:case 231:case 163:return 2;case 283:return void 0===e.name?3:2;case 264:case 229:return 3;case 233:return p.isAmbientModule(e)||1===p.getModuleInstanceState(e)?5:4;case 232:case 241:case 242:case 237:case 238:case 243:case 244:return 7;case 265:return 5}return 7}function o(e){for(;143===e.parent.kind;)e=e.parent;return p.isInternalModuleImportEqualsDeclaration(e.parent)&&e.parent.moduleReference===e}function t(e,t){e=r(e);return e&&e.parent&&e.parent.kind===t&&e.parent.expression===e}function r(e){return s(e)?e.parent:e}function i(e){return 71===e.kind&&(218===e.parent.kind||217===e.parent.kind)&&e.parent.label===e}function s(e){return e&&e.parent&&179===e.parent.kind&&e.parent.name===e}p.scanner=p.createScanner(5,!0),(e=p.SemanticMeaning||(p.SemanticMeaning={}))[e.None=0]="None",e[e.Value=1]="Value",e[e.Type=2]="Type",e[e.Namespace=4]="Namespace",e[e.All=7]="All",p.getMeaningFromDeclaration=n,p.getMeaningFromLocation=function(e){return 265===e.kind?1:243===e.parent.kind?7:o(e)?(t=e,p.Debug.assert(71===t.kind),143===t.parent.kind&&t.parent.right===t&&237===t.parent.parent.kind?7:4):p.isDeclarationName(e)?n(e.parent):function(e){switch((e=p.isRightSideOfQualifiedNameOrPropertyAccess(e)?e.parent:e).kind){case 99:return!p.isPartOfExpression(e);case 169:return 1}switch(e.parent.kind){case 159:return 1;case 201:return!p.isExpressionWithTypeArgumentsInClassExtendsClause(e.parent)}}(e)?2:function(e){var t=e,n=!0;if(143===t.parent.kind){for(;t.parent&&143===t.parent.kind;)t=t.parent;n=t.right===e}return 159===t.parent.kind&&!n}(t=e)||function(e){var t=e,n=!0;if(179===t.parent.kind){for(;t.parent&&179===t.parent.kind;)t=t.parent;n=t.name===e}if(!n&&201===t.parent.kind&&259===t.parent.parent.kind)return 229===(e=t.parent.parent.parent).kind&&108===t.parent.parent.token||230===e.kind&&85===t.parent.parent.token}(t)?4:p.isTypeParameterDeclaration(e.parent)?(p.Debug.assert(p.isJSDocTemplateTag(e.parent.parent)),2):1;var t},p.isInRightSideOfInternalImportEqualsDeclaration=o,p.isCallExpressionTarget=function(e){return t(e,181)},p.isNewExpressionTarget=function(e){return t(e,182)},p.climbPastPropertyAccess=r,p.getTargetLabel=function(e,t){for(;e;){if(222===e.kind&&e.label.escapedText===t)return e.label;e=e.parent}},p.isJumpStatementTarget=i,p.isLabelName=function(e){return 71===e.kind&&222===e.parent.kind&&e.parent.label===e||i(e)},p.isRightSideOfQualifiedName=function(e){return 143===e.parent.kind&&e.parent.right===e},p.isRightSideOfPropertyAccess=s,p.isNameOfModuleDeclaration=function(e){return 233===e.parent.kind&&e.parent.name===e},p.isNameOfFunctionDeclaration=function(e){return 71===e.kind&&p.isFunctionLike(e.parent)&&e.parent.name===e},p.isLiteralNameOfPropertyDeclarationOrIndexAccess=function(e){switch(e.parent.kind){case 149:case 148:case 261:case 264:case 151:case 150:case 153:case 154:case 233:return p.getNameOfDeclaration(e.parent)===e;case 180:return e.parent.argumentExpression===e;case 144:return!0;case 173:return 171===e.parent.parent.kind}},p.isExpressionOfExternalModuleImportEqualsDeclaration=function(e){return p.isExternalModuleImportEqualsDeclaration(e.parent.parent)&&p.getExternalModuleImportEqualsDeclarationExpression(e.parent.parent)===e},p.getContainerNode=function(e){for(283===e.kind&&(e=e.parent.parent);;){if(!(e=e.parent))return;switch(e.kind){case 265:case 151:case 150:case 228:case 186:case 153:case 154:case 229:case 230:case 232:case 233:return e}}},p.getNodeKind=function e(t){switch(t.kind){case 265:return p.isExternalModule(t)?"module":"script";case 233:return"module";case 229:case 199:return"class";case 230:return"interface";case 231:return"type";case 232:return"enum";case 226:return i(t);case 176:return i(p.getRootDeclaration(t));case 187:case 228:case 186:return"function";case 153:return"getter";case 154:return"setter";case 151:case 150:return"method";case 149:case 148:return"property";case 157:return"index";case 156:return"construct";case 155:return"call";case 152:return"constructor";case 145:return"type parameter";case 264:return"enum member";case 146:return p.hasModifier(t,92)?"property":"parameter";case 237:case 242:case 239:case 246:case 240:return"alias";case 283:return"type";case 194:var n=p.getSpecialPropertyAssignmentKind(t),o=t.right;switch(n){case 0:return"";case 1:case 2:var r=e(o);return""===r?"const":r;case 3:return"method";case 4:return"property";case 5:return p.isFunctionExpression(o)?"method":"property";default:return p.assertTypeIsNever(n),""}default:return""}function i(e){return p.isConst(e)?"const":p.isLet(e)?"let":"var"}},p.isThis=function(e){switch(e.kind){case 99:return!0;case 71:return p.identifierIsThisKeyword(e)&&146===e.parent.kind;default:return!1}};var e,a=/^\/\/\/\s*</;function l(e,t,n){return e<=n.pos&&t>=n.end}function c(e,t,n,o){return Math.max(e,n)<Math.min(t,o)}function u(e,t){if(p.nodeIsMissing(e))return!1;switch(e.kind){case 229:case 230:case 232:case 178:case 174:case 163:case 207:case 234:case 235:case 241:case 245:return d(e,18,t);case 260:return u(e.block,t);case 182:if(!e.arguments)return!0;case 181:case 185:case 168:return d(e,20,t);case 160:case 161:return u(e.type,t);case 152:case 153:case 154:case 228:case 186:case 151:case 150:case 156:case 155:case 187:return e.body?u(e.body,t):e.type?u(e.type,t):g(e,20,t);case 233:return e.body&&u(e.body,t);case 211:return e.elseStatement?u(e.elseStatement,t):u(e.thenStatement,t);case 210:return u(e.expression,t)||g(e,25);case 177:case 175:case 180:case 144:case 165:return d(e,22,t);case 157:return e.type?u(e.type,t):g(e,22,t);case 257:case 258:return!1;case 214:case 215:case 216:case 213:return u(e.statement,t);case 212:return h(e,106,t)?d(e,20,t):u(e.statement,t);case 162:return u(e.exprName,t);case 189:case 188:case 190:case 197:case 198:return u(e.expression,t);case 183:return u(e.template,t);case 196:return u(p.lastOrUndefined(e.templateSpans),t);case 205:return p.nodeIsPresent(e.literal);case 244:case 238:return p.nodeIsPresent(e.moduleSpecifier);case 192:return u(e.operand,t);case 194:return u(e.right,t);case 195:return u(e.whenFalse,t);default:return!0}}function d(e,t,n){e=e.getChildren(n);if(e.length){n=p.lastOrUndefined(e);if(n.kind===t)return!0;if(25===n.kind&&1!==e.length)return e[e.length-2].kind===t}return!1}function g(e,t,n){return!!h(e,t,n)}function h(e,t,n){return p.forEach(e.getChildren(n),function(e){return e.kind===t&&e})}function _(t){var e=p.forEach(t.parent.getChildren(),function(e){if(p.isSyntaxList(e)&&e.pos<=t.pos&&e.end>=t.end)return e});return p.Debug.assert(!e||p.contains(e.getChildren(),t)),e}function m(e,t,n,o){return y(e,t,!1,o,!1,n)}function f(e,t,n,o){return y(e,t,!0,void 0,o,n)}function y(e,t,n,o,r,i){var s=e;e:for(;;){if(!p.isToken(s))for(var a=0,l=s.getChildren();a<l.length;a++){var c=l[a];if(i||!p.isJSDocNode(c)){if((n?c.getFullStart():c.getStart(e,i))>t)break;var u=c.getEnd();if(t<u||t===u&&(1===c.kind||r)){s=c;continue e}if(o&&u===t){u=k(t,e,c);if(u&&o(u))return u}}}return s}}function k(s,a,l,c){var e=function e(t){if(p.isToken(t))return t;for(var n,o=t.getChildren(),r=0;r<o.length;r++){var i=o[r];if(s<i.end)return i.getStart(a,c)>=s||!T(i)||b(i)?(n=d(o,r))&&u(n):e(i)}return p.Debug.assert(void 0!==l||265===t.kind||p.isJSDocCommentContainingNode(t)),o.length?(n=d(o,o.length))&&u(n):void 0}(l||a);return p.Debug.assert(!(e&&b(e))),e;function u(e){return p.isToken(e)?e:(e=d(e=e.getChildren(),e.length))&&u(e)}function d(e,t){for(var n=t-1;0<=n;n--)if(b(e[n]))p.Debug.assert(0<n,"`JsxText` tokens should not be the first child of `JsxElement | JsxSelfClosingElement`");else if(T(e[n]))return e[n]}}function b(e){return p.isJsxText(e)&&e.containsOnlyWhiteSpaces}function v(e,t,n,o){return!!p.formatting.getRangeOfEnclosingComment(e,t,!1,void 0,n,o)}function T(e){return 0!==e.getWidth()}function E(e){return 71===e||p.isKeyword(e)}p.getLineStartPositionForPosition=function(e,t){return p.getLineStarts(t)[t.getLineAndCharacterOfPosition(e).line]},p.rangeContainsRange=function(e,t){return l(e.pos,e.end,t)},p.startEndContainsRange=l,p.rangeContainsStartEnd=function(e,t,n){return e.pos<=t&&e.end>=n},p.rangeOverlapsWithStartEnd=function(e,t,n){return c(e.pos,e.end,t,n)},p.startEndOverlapsWithStartEnd=c,p.positionBelongsToNode=function(e,t,n){return t<e.end||!u(e,n)},p.isCompletedNode=u,p.findListItemInfo=function(e){var t,n=_(e);if(n)return t=n.getChildren(),{listItemIndex:p.indexOfNode(t,e),list:n}},p.hasChildOfKind=g,p.findChildOfKind=h,p.findContainingList=_,p.getTouchingWord=function(e,t,n){return m(e,t,n,function(e){return E(e.kind)})},p.getTouchingPropertyName=function(e,t,n){return m(e,t,n,function(e){return 9===(e=e.kind)||8===e||E(e)})},p.getTouchingToken=m,p.getTokenAtPosition=f,p.findTokenOnLeftOfPosition=function(e,t){var n=f(e,t,!1);return p.isToken(n)&&t>n.getStart(e)&&t<n.getEnd()?n:k(t,e)},p.findNextToken=function(i,e){return function e(t){if(p.isToken(t)&&t.pos===i.end)return t;for(var n=0,o=t.getChildren();n<o.length;n++){var r=o[n];if((r.pos<=i.pos&&r.end>i.end||r.pos===i.end)&&T(r))return e(r)}}(e)},p.findPrecedingToken=k,p.isInString=function(e,t){e=k(t,e);if(e&&p.isStringTextContainingNode(e)){var n=e.getStart(),o=e.getEnd();if(n<t&&t<o)return!0;if(t===o)return!!e.isUnterminated}return!1},p.isInsideJsxElementOrAttribute=function(e,t){e=f(e,t,!1);return!!e&&(10===e.kind||27===e.kind&&10===e.parent.kind||27===e.kind&&256===e.parent.kind||!(!e||18!==e.kind||256!==e.parent.kind)||27===e.kind&&252===e.parent.kind)},p.isWhiteSpaceOnlyJsxText=b,p.isInTemplateString=function(e,t){var n=f(e,t,!1);return p.isTemplateLiteralKind(n.kind)&&t>n.getStart(e)},p.isInComment=v,p.hasDocComment=function(n,e){e=f(n,e,!1),e=p.getLeadingCommentRanges(n.text,e.pos);return p.forEach(e,function(e){var t=n.text;return t.length>=e.pos+3&&"/"===t[e.pos]&&"*"===t[e.pos+1]&&"*"===t[e.pos+2]})},p.getNodeModifiers=function(e){var t=p.getCombinedModifierFlags(e),n=[];return 8&t&&n.push("private"),16&t&&n.push("protected"),4&t&&n.push("public"),32&t&&n.push("static"),128&t&&n.push("abstract"),1&t&&n.push("export"),p.isInAmbientContext(e)&&n.push("declare"),0<n.length?n.join(","):""},p.getTypeArgumentOrTypeParameterList=function(e){return 159===e.kind||181===e.kind?e.typeArguments:p.isFunctionLike(e)||229===e.kind||230===e.kind?e.typeParameters:void 0},p.isWord=E,p.isComment=function(e){return 2===e||3===e},p.isStringOrRegularExpressionOrTemplateLiteral=function(e){return!(9!==e&&12!==e&&!p.isTemplateLiteralKind(e))},p.isPunctuation=function(e){return 17<=e&&e<=70},p.isInsideTemplateLiteral=function(e,t){return p.isTemplateLiteralKind(e.kind)&&e.getStart()<t&&t<e.getEnd()||!!e.isUnterminated&&t===e.getEnd()},p.isAccessibilityModifier=function(e){switch(e){case 114:case 112:case 113:return!0}return!1},p.cloneCompilerOptions=function(e){var t=p.clone(e);return p.setConfigFileInOptions(t,e&&e.configFile),t},p.isArrayLiteralOrObjectLiteralDestructuringPattern=function e(t){if(177===t.kind||178===t.kind){if(194===t.parent.kind&&t.parent.left===t&&58===t.parent.operatorToken.kind)return!0;if(216===t.parent.kind&&t.parent.initializer===t)return!0;if(e((261===t.parent.kind?t.parent:t).parent))return!0}return!1},p.hasTrailingDirectorySeparator=function(e){e=e.charAt(e.length-1);return"/"===e||"\\"===e},p.isInReferenceComment=function(t,e){return v(t,e,void 0,function(e){e=t.text.substring(e.pos,e.end);return a.test(e)})},p.isInNonReferenceComment=function(t,e){return v(t,e,void 0,function(e){e=t.text.substring(e.pos,e.end);return!a.test(e)})},p.createTextSpanFromNode=function(e,t){return p.createTextSpanFromBounds(e.getStart(t),e.getEnd())},p.createTextSpanFromRange=function(e){return p.createTextSpanFromBounds(e.pos,e.end)},p.isTypeKeyword=function(e){switch(e){case 119:case 122:case 130:case 133:case 134:case 136:case 137:case 105:return!0;default:return!1}},p.isExternalModuleSymbol=function(e){return p.Debug.assert(!!(1536&e.flags)),34===e.name.charCodeAt(0)},p.nodeSeenTracker=function(){var t=[];return function(e){e=p.getNodeId(e);return!t[e]&&(t[e]=!0)}}}(ts=ts||{}),function(a){function n(e){return e.declarations&&0<e.declarations.length&&146===e.declarations[0].kind}a.isFirstDeclarationOfSymbolParameter=n;e();var o,t,r,i={displayParts:function(){return o},writeKeyword:function(e){return l(e,a.SymbolDisplayPartKind.keyword)},writeOperator:function(e){return l(e,a.SymbolDisplayPartKind.operator)},writePunctuation:function(e){return l(e,a.SymbolDisplayPartKind.punctuation)},writeSpace:function(e){return l(e,a.SymbolDisplayPartKind.space)},writeStringLiteral:function(e){return l(e,a.SymbolDisplayPartKind.stringLiteral)},writeParameter:function(e){return l(e,a.SymbolDisplayPartKind.parameterName)},writeProperty:function(e){return l(e,a.SymbolDisplayPartKind.propertyName)},writeSymbol:function(e,t){s(),o.push(c(e,t))},writeLine:function(){o.push(g()),t=!0},increaseIndent:function(){r++},decreaseIndent:function(){r--},clear:e,trackSymbol:a.noop,reportInaccessibleThisError:a.noop,reportPrivateInBaseOfClassExpression:a.noop};function s(){var e;t&&((e=a.getIndentString(r))&&o.push(u(e,a.SymbolDisplayPartKind.space)),t=!1)}function l(e,t){s(),o.push(u(e,t))}function e(){o=[],t=!0,r=0}function c(e,t){return u(e,3&(e=t.flags)?n(t)?a.SymbolDisplayPartKind.parameterName:a.SymbolDisplayPartKind.localName:4&e||32768&e||65536&e?a.SymbolDisplayPartKind.propertyName:8&e?a.SymbolDisplayPartKind.enumMemberName:16&e?a.SymbolDisplayPartKind.functionName:32&e?a.SymbolDisplayPartKind.className:64&e?a.SymbolDisplayPartKind.interfaceName:384&e?a.SymbolDisplayPartKind.enumName:1536&e?a.SymbolDisplayPartKind.moduleName:8192&e?a.SymbolDisplayPartKind.methodName:262144&e?a.SymbolDisplayPartKind.typeParameterName:524288&e||2097152&e?a.SymbolDisplayPartKind.aliasName:a.SymbolDisplayPartKind.text)}function u(e,t){return{text:e,kind:a.SymbolDisplayPartKind[t]}}function d(e){return u(a.tokenToString(e),a.SymbolDisplayPartKind.keyword)}function p(e){return u(e,a.SymbolDisplayPartKind.text)}function g(){return u("\n",a.SymbolDisplayPartKind.lineBreak)}function h(e){try{return e(i),i.displayParts()}finally{i.clear()}}function _(e){return e.parent&&(242===e.parent.kind||246===e.parent.kind)&&e.parent.propertyName===e}function m(e,t){return a.ensureScriptKind(e,t&&t.getScriptKind&&t.getScriptKind(e))}a.symbolPart=c,a.displayPart=u,a.spacePart=function(){return u(" ",a.SymbolDisplayPartKind.space)},a.keywordPart=d,a.punctuationPart=function(e){return u(a.tokenToString(e),a.SymbolDisplayPartKind.punctuation)},a.operatorPart=function(e){return u(a.tokenToString(e),a.SymbolDisplayPartKind.operator)},a.textOrKeywordPart=function(e){var t=a.stringToToken(e);return void 0===t?p(e):d(t)},a.textPart=p,a.getNewLineOrDefaultFromHost=function(e){return e.getNewLine?e.getNewLine():"\r\n"},a.lineBreakPart=g,a.mapToDisplayParts=h,a.typeToDisplayParts=function(t,n,o,r){return h(function(e){t.getSymbolDisplayBuilder().buildTypeDisplay(n,e,o,r)})},a.symbolToDisplayParts=function(t,n,o,r,i){return h(function(e){t.getSymbolDisplayBuilder().buildSymbolDisplay(n,e,o,r,i)})},a.signatureToDisplayParts=function(t,n,o,r){return r|=65536,h(function(e){t.getSymbolDisplayBuilder().buildSignatureDisplay(n,e,o,r)})},a.getDeclaredName=function(e,t,n){return _(n)||a.isStringOrNumericLiteral(n)&&144===n.parent.kind?a.getTextOfIdentifierOrLiteral(n):(n=a.getLocalSymbolForExportDefault(t),e.symbolToString(n||t))},a.isImportOrExportSpecifierName=_,a.stripQuotes=function(e){var t=e.length;return 2<=t&&e.charCodeAt(0)===e.charCodeAt(t-1)&&a.isSingleOrDoubleQuote(e.charCodeAt(0))?e.substring(1,t-1):e},a.scriptKindIs=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=m(e,t);return a.forEach(n,function(e){return e===r})},a.getScriptKind=m,a.getUniqueSymbolId=function(e,t){return a.getSymbolId(a.skipAlias(e,t))},a.getFirstNonSpaceCharacterPosition=function(e,t){for(;a.isWhiteSpaceLike(e.charCodeAt(t));)t+=1;return t},a.getOpenBrace=function(e,t){return e.body.getFirstToken(t)},a.getOpenBraceOfClassLike=function(e,t){return a.getTokenAtPosition(t,e.members.pos-1,!1)},a.getSourceFileImportLocation=function(e){var t=e.text,n=a.getLeadingCommentRanges(t,0);if(!n)return 0;var o=0;n.length&&3===n[0].kind&&a.isPinnedComment(t,n[0])&&(o=n[0].end+1,n=n.slice(1));for(var r=0,i=n;r<i.length;r++){var s=i[r];if(2!==s.kind||!a.isRecognizedTripleSlashComment(e.text,s.pos,s.end))break;o=s.end+1}return o},a.getSynthesizedDeepClone=function e(t){var n,o;if(void 0!==t)return(n=a.visitEachChild(t,e,a.nullTransformationContext))===t?(o=a.getSynthesizedClone(t),a.isStringLiteral(o)?o.textSourceNode=t:a.isNumericLiteral(o)&&(o.numericLiteralFlags=t.numericLiteralFlags),o.pos=t.pos,o.end=t.end,o):(n.parent=void 0,n)},a.suppressLeadingAndTrailingTrivia=function(e){a.Debug.assert(void 0!==e),function e(t){a.addEmitFlags(t,512);t=a.forEachChild(t,function(e){return e});t&&e(t)}(e),function e(t){a.addEmitFlags(t,1024);var n=void 0;a.forEachChild(t,function(e){n=e},function(e){e.length&&(n=a.last(e))}),n&&e(n)}(e)}}(ts=ts||{}),function(v){function k(e,t){switch(t){case 233:case 229:case 230:case 228:e.throwIfCancellationRequested()}}function i(i,s,e,a,l){var c=[];return function e(t){var n,o,r;t&&v.textSpanIntersectsWith(l,t.getFullStart(),t.getFullWidth())&&(r=t.kind,k(s,r),71!==r||v.nodeIsMissing(t)||a.has(t.escapedText)&&(r=i.getSymbolAtLocation(t))&&(r=function(e,t){var n=e.getFlags();if(0!=(788448&n)){if(32&n)return 11;if(384&n)return 12;if(524288&n)return 16;if(2&t){if(64&n)return 13;if(262144&n)return 15}else if(1536&n&&(4&t||1&t&&v.forEach(e.declarations,function(e){return 233===e.kind&&1===v.getModuleInstanceState(e)})))return 14}}(r,v.getMeaningFromLocation(t)))&&(n=t.getStart(),o=t.getWidth(),r=r,c.push(n),c.push(o),c.push(r)),v.forEachChild(t,e))}(e),{spans:c,endOfLineState:0}}function s(e){v.Debug.assert(e.spans.length%3==0);for(var t=e.spans,n=[],o=0;o<t.length;o+=3)n.push({textSpan:v.createTextSpan(t[o],t[o+1]),classificationType:function(e){switch(e){case 1:return"comment";case 2:return"identifier";case 3:return"keyword";case 4:return"number";case 5:return"operator";case 6:return"string";case 8:return"whitespace";case 9:return"text";case 10:return"punctuation";case 11:return"class name";case 12:return"enum name";case 13:return"interface name";case 14:return"module name";case 15:return"type parameter name";case 16:return"type alias name";case 17:return"parameter name";case 18:return"doc comment tag name";case 19:return"jsx open tag name";case 20:return"jsx close tag name";case 21:return"jsx self closing tag name";case 22:return"jsx attribute";case 23:return"jsx text";case 24:return"jsx attribute string literal value"}}(t[o+2])});return n}function o(l,c,e){var u=e.start,d=e.length,p=v.createScanner(5,!1,c.languageVariant,c.text),a=v.createScanner(5,!1,c.languageVariant,c.text),o=[];return y(c),{spans:o,endOfLineState:0};function g(e,t,n){o.push(e),o.push(t),o.push(n)}function h(e,t,n,o){if(3===t){t=v.parseIsolatedJSDocComment(c.text,n,o);if(t&&t.jsDoc){t.jsDoc.parent=e;{e=t.jsDoc;var r=e.pos;if(e.tags)for(var i=0,s=e.tags;i<s.length;i++){var a=s[i];switch(a.pos!==r&&_(r,a.pos-r),g(a.atToken.pos,a.atToken.end-a.atToken.pos,10),g(a.tagName.pos,a.tagName.end-a.tagName.pos,18),r=a.tagName.end,a.kind){case 279:!function(e){e.isNameFirst&&(_(r,e.name.pos-r),g(e.name.pos,e.name.end-e.name.pos,17),r=e.name.end),e.typeExpression&&(_(r,e.typeExpression.pos-r),y(e.typeExpression),r=e.typeExpression.end),e.isNameFirst||(_(r,e.name.pos-r),g(e.name.pos,e.name.end-e.name.pos,17),r=e.name.end)}(a);break;case 282:!function(e){for(var t=0,n=e.getChildren();t<n.length;t++)y(n[t])}(a);break;case 281:case 280:y(a.typeExpression)}r=a.end}r!==e.end&&_(r,e.end-r);return}}}_(n,o)}function _(e,t){g(e,t,1)}function m(e,t,n){for(var o,r,i,s=t;s<n&&!v.isLineBreak(e.charCodeAt(s));s++);for(g(t,s-t,1),a.setTextPos(s);a.getTextPos()<n;)r=i=r=o=void 0,o=a.getTextPos(),r=a.scan(),i=a.getTextPos(),(r=f(r))&&g(o,i-o,r)}function f(e,t){if(v.isKeyword(e))return 3;if((27===e||29===e)&&t&&v.getTypeArgumentOrTypeParameterList(t.parent))return 10;if(v.isPunctuation(e)){if(t){if(58===e&&(226===t.parent.kind||149===t.parent.kind||146===t.parent.kind||253===t.parent.kind))return 5;if(194===t.parent.kind||192===t.parent.kind||193===t.parent.kind||195===t.parent.kind)return 5}return 10}if(8===e)return 4;if(9===e)return 253===t.parent.kind?24:6;if(12===e)return 6;if(v.isTemplateLiteralKind(e))return 6;if(10===e)return 23;if(71===e){if(t)switch(t.parent.kind){case 229:return t.parent.name===t?11:void 0;case 145:return t.parent.name===t?15:void 0;case 230:return t.parent.name===t?13:void 0;case 232:return t.parent.name===t?12:void 0;case 233:return t.parent.name===t?14:void 0;case 146:return t.parent.name===t?v.isThisIdentifier(t)?3:17:void 0}return 2}}function y(e){if(e&&v.decodedTextSpanIntersectsWith(u,d,e.pos,e.getFullWidth())){k(l,e.kind);for(var t=0,n=e.getChildren(c);t<n.length;t++){var o=n[t];r=o,a=s=i=void 0,v.isJSDoc(r)||v.nodeIsMissing(r)||(a=function(e){switch(e.parent&&e.parent.kind){case 251:if(e.parent.tagName===e)return 19;break;case 252:if(e.parent.tagName===e)return 20;break;case 250:if(e.parent.tagName===e)return 21;break;case 253:if(e.parent.name===e)return 22}}(r),v.isToken(r)||10===r.kind||void 0!==a?(i=10===r.kind?r.pos:function(e){for(p.setTextPos(e.pos);;){var t=p.getTextPos();if(!v.couldStartTrivia(c.text,t))return t;var n,o=p.scan(),r=p.getTextPos(),i=r-t;if(!v.isTrivia(o))return t;4!==o&&5!==o&&(v.isComment(o)?(h(e,o,t,i),p.setTextPos(r)):7===o&&(60===(n=(o=c.text).charCodeAt(t))||62===n?g(t,i,1):(v.Debug.assert(124===n||61===n),m(o,t,r))))}}(r),s=r.end-i,v.Debug.assert(0<=s),0<s&&(a=a||f(r.kind,r))&&g(i,s,a),1):void 0)||y(o)}}var r,i,s,a}}v.createClassifier=function(){var f=v.createScanner(5,!1),y=[],k=(y[71]=!0,y[9]=!0,y[8]=!0,y[12]=!0,y[99]=!0,y[43]=!0,y[44]=!0,y[20]=!0,y[22]=!0,y[18]=!0,y[101]=!0,y[86]=!0,[]);function d(e,t,n){for(var o=0,r=0,i=0;0<k.length;)k.pop();switch(t){case 3:e='"\\\n'+e,o=3;break;case 2:e="'\\\n"+e,o=3;break;case 1:e="/*\n"+e,o=3;break;case 4:e="`\n"+e,o=2;break;case 5:e="}\n"+e,o=2;case 6:k.push(14)}f.setText(e);var s={endOfLineState:0,spans:[]},a=0;do{var l,r=f.scan(),c=(v.isTrivia(r)||(41!==r&&63!==r||y[i]?23===i&&b(r)||b(i)&&b(r)&&(l=i,c=r,v.isAccessibilityModifier(l))&&125!==c&&135!==c&&123!==c&&115!==c?r=71:71===i&&27===r?a++:29===r&&0<a?a--:119===r||136===r||133===r||122===r||137===r?0<a&&!n&&(r=71):14===r?k.push(r):17===r?0<k.length&&k.push(r):18===r&&0<k.length&&(14===(l=v.lastOrUndefined(k))?16===(r=f.reScanTemplateToken())?k.pop():v.Debug.assertEqual(r,15,"Should have been a template middle."):(v.Debug.assertEqual(l,17,"Should have been an open brace"),k.pop())):12===f.reScanSlashToken()&&(r=12),i=r),m=_=h=u=c=void 0,f.getTokenPos()),u=f.getTextPos(),d=c,p=u,g=function(e){if(b(e))return 3;if(function(){switch(e){case 39:case 41:case 42:case 37:case 38:case 45:case 46:case 47:case 27:case 29:case 30:case 31:case 93:case 92:case 118:case 32:case 33:case 34:case 35:case 48:case 50:case 49:case 53:case 54:case 69:case 68:case 70:case 65:case 66:case 67:case 59:case 60:case 61:case 63:case 64:case 58:case 26:return 1;default:return}}()||function(){switch(e){case 37:case 38:case 52:case 51:case 43:case 44:return 1;default:return}}())return 5;if(17<=e&&e<=70)return 10;switch(e){case 8:return 4;case 9:return 6;case 12:return 7;case 7:case 3:case 2:return 1;case 5:case 4:return 8;default:return v.isTemplateLiteralKind(e)?6:2}}(r);if(8!==g&&(0===d&&0<o&&(d+=o),0<(p=(p-=o)-(d-=o)))&&(s.spans.push(d),s.spans.push(p),s.spans.push(g)),u>=e.length)if(9===r){var h=f.getTokenText();if(f.isUnterminated()){for(var _=h.length-1,m=0;92===h.charCodeAt(_-m);)m++;1&m&&(c=h.charCodeAt(0),s.endOfLineState=34===c?3:2)}}else 3===r?f.isUnterminated()&&(s.endOfLineState=1):v.isTemplateLiteralKind(r)?f.isUnterminated()&&(16===r?s.endOfLineState=5:13===r?s.endOfLineState=4:v.Debug.fail("Only 'NoSubstitutionTemplateLiteral's and 'TemplateTail's can be unterminated; got SyntaxKind #"+r)):0<k.length&&14===v.lastOrUndefined(k)&&(s.endOfLineState=6)}while(1!==r);return s}function b(e){return 72<=e&&e<=142}return{getClassificationsForLine:function(e,t,n){for(var t=d(e,t,n),n=e,o=[],r=t.spans,i=0,s=0;s<r.length;s+=3){var a,l=r[s],c=r[s+1],u=r[s+2];0<=i&&0<(a=l-i)&&o.push({length:a,classification:v.TokenClass.Whitespace}),o.push({length:c,classification:function(e){switch(e){case 1:return v.TokenClass.Comment;case 3:return v.TokenClass.Keyword;case 4:return v.TokenClass.NumberLiteral;case 5:return v.TokenClass.Operator;case 6:return v.TokenClass.StringLiteral;case 8:return v.TokenClass.Whitespace;case 10:return v.TokenClass.Punctuation;default:return v.TokenClass.Identifier}}(u)}),i=l+c}return 0<(n=n.length-i)&&o.push({length:n,classification:v.TokenClass.Whitespace}),{entries:o,finalLexState:t.endOfLineState}},getEncodedLexicalClassifications:d}},v.getSemanticClassifications=function(e,t,n,o,r){return s(i(e,t,n,o,r))},v.getEncodedSemanticClassifications=i,v.getSyntacticClassifications=function(e,t,n){return s(o(e,t,n))},v.getEncodedSyntacticClassifications=o}(ts=ts||{}),function(b){function v(e,t,n,o,r,i,s,a){void 0===a&&(a=[]),e=b.normalizeSlashes(e=void 0===e?"":e),""===(e=b.getDirectoryPath(e))&&(e="."+b.directorySeparator),e=b.ensureTrailingDirectorySeparator(e);var e=C(b.isRootedDiskPath(e)?e:b.combinePaths(t,e)),e=b.getDirectoryPath(e),l=!(i.useCaseSensitiveFileNames&&i.useCaseSensitiveFileNames());if(f(i,e)){n=x(i,e,n,void 0,["./*"]);if(n){for(var c=b.createMap(),u=0,d=n;u<d.length;u++){var p=d[u],p=b.normalizePath(p);s&&0===b.comparePaths(p,s,t,l)||(p=o?b.getBaseFileName(p):b.removeFileExtension(b.getBaseFileName(p)),c.get(p))||c.set(p,!0)}b.forEachKey(c,function(e){a.push(S(e,"script",r))})}n=m(i,e);if(n)for(var g=0,h=n;g<h.length;g++){var _=h[g],_=b.getBaseFileName(b.normalizePath(_));a.push(S(_,"directory",r))}}return a}function T(e,t,n,o,r){if(void 0===r&&(r=[]),t.types)for(var i=0,s=t.types;i<s.length;i++){var a=s[i];r.push(S(a,"external module name",o))}else if(e.getDirectories){var l=void 0;try{l=b.getEffectiveTypeRoots(t,e)}catch(e){}if(l)for(var c=0,u=l;c<u.length;c++)h(e,u[c],o,r)}if(e.getDirectories)for(var d=0,p=E(n,e);d<p.length;d++){var g=p[d];h(e,b.combinePaths(b.getDirectoryPath(g),"node_modules/@types"),o,r)}return r}function h(e,t,n,o){if(e.getDirectories&&f(e,t)){e=m(e,t);if(e)for(var r=0,i=e;r<i.length;r++){var s=i[r],s=b.normalizePath(s);o.push(S(b.getBaseFileName(s),"external module name",n))}}}function E(e,t){for(var n=[];o=b.findConfigFile(e,function(e){return B(t,t.fileExists,e)},"package.json");){n.push(o),e=b.getDirectoryPath(o);var o=b.getDirectoryPath(e);if(e===o)break;e=o}return n}function S(e,t,n){return{name:e,kind:t,kindModifiers:"",sortText:e,replacementSpan:n}}function d(e,t){var n=e.lastIndexOf(b.directorySeparator),n=-1!==n?n+1:0;return{start:t+n,length:e.length-n}}function C(e){return b.hasTrailingDirectorySeparator(e)?b.ensureTrailingDirectorySeparator(b.normalizePath(e)):b.normalizePath(e)}function m(e,t){return B(e,e.getDirectories,t)}function x(e,t,n,o,r){return B(e,e.readDirectory,t,n,o,r)}function f(e,t){try{return b.directoryProbablyExists(t,e)}catch(e){}}function B(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];try{return t&&t.apply(e,n)}catch(e){}}var e,p,A;(e=(e=b.Completions||(b.Completions={})).PathCompletions||(e.PathCompletions={})).getStringLiteralCompletionEntriesFromModuleNames=function(e,m,t,n){var o,r=b.normalizeSlashes(e.text),i=e.getSourceFile().path,s=b.getDirectoryPath(i),e=d(e.text,e.getStart()+1);return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!0,entries:function(e){var t;if(e&&2<=e.length&&46===e.charCodeAt(0))return t=3<=e.length&&46===e.charCodeAt(1)?2:1,47===(e=e.charCodeAt(t))||92===e}(r)||b.isRootedDiskPath(r)?(o=b.getSupportedExtensions(m),m.rootDirs?function(e,t,n,o,r,i,s){var a=m.project||i.getCurrentDirectory(),l=!(i.useCaseSensitiveFileNames&&i.useCaseSensitiveFileNames());c=a,u=n,d=l,a=b.map(e,function(e){return b.normalizePath(b.isRootedDiskPath(e)?e:b.combinePaths(c,e))}),p=b.forEach(a,function(e){return b.containsPath(e,u,c,d)?u.substr(e.length):void 0});for(var c,u,d,p,g=[],h=0,_=b.deduplicate(b.map(a,function(e){return b.combinePaths(e,p)}));h<_.length;h++)v(t,_[h],o,!1,r,i,s,g);return g}(m.rootDirs,r,s,o,e,t,i):v(r,s,o,!1,e,t,i)):function(e,t,n,o,r,i){var s=o.baseUrl,a=o.paths;if(s){var l=b.getSupportedExtensions(o),c=o.project||r.getCurrentDirectory(),c=b.isRootedDiskPath(s)?s:b.combinePaths(c,s),u=v(e,b.normalizePath(c),l,!1,n,r);if(a)for(var d in a)if(a.hasOwnProperty(d))if("*"===d){if(a[d])for(var p=0,g=a[d];p<g.length;p++)for(var h=0,_=function(e,t,n,o,r){if(r.readDirectory){n=b.hasZeroOrOneAsteriskCharacter(n)?b.tryParsePattern(n):void 0;if(n){var i=C(n.prefix),s=b.getDirectoryPath(i),i=b.getBaseFileName(i),a=b.stringContains(e,b.directorySeparator),e=a?b.combinePaths(s,i+b.getDirectoryPath(e)):s,l=b.normalizePath(n.suffix),s=b.combinePaths(t,e),c=a?s:b.ensureTrailingDirectorySeparator(s)+i,n=x(r,s,o,void 0,[l?"**/*":"./*"]);if(n){for(var u=[],d=0,p=n;d<p.length;d++){var g,h,_=p[d],_=b.normalizePath(_);b.endsWith(_,l)&&b.startsWith(_,c)&&(g=c.length,h=_.length-g-l.length,u.push(b.removeFileExtension(_.substr(g,h))))}return u}}}}(e,s,g[p],l,r);h<_.length;h++){var m=_[h];u.push(S(m,"external module name",n))}}else b.startsWith(d,e)&&a[d]&&1===a[d].length&&a[d][0]&&u.push(S(d,"external module name",n))}else u=[];T(r,o,t,n,u);for(var f=0,y=function(t,f,e,n,o){var r,i=b.stringContains(t,b.directorySeparator),s=i?t.substr(0,t.lastIndexOf(b.directorySeparator)):void 0,n=b.map(n.getAmbientModules(),function(e){return b.stripQuotes(e.name)}),a=b.filter(n,function(e){return b.startsWith(e,t)});if(i&&(r=b.ensureTrailingDirectorySeparator(s),a=b.map(a,function(e){return b.removePrefix(e,r)})),!e.moduleResolution||e.moduleResolution===b.ModuleResolutionKind.NodeJs)for(var l=0,c=function(n){var e=[];if(n.readFile&&n.fileExists)for(var t=0,o=E(f,n);t<o.length;t++){var r=o[t],i=function(e){try{var t=B(n,n.readFile,e);return t?JSON.parse(t):void 0}catch(e){}}(r);if(!i)return;for(var s=b.combinePaths(b.getDirectoryPath(r),"node_modules"),a=[],l=0,c=A;l<c.length;l++){p=d=u=void 0;var u=i[c[l]],d=a;if(u)for(var p in u)u.hasOwnProperty(p)&&!b.startsWith(p,"@types/")&&d.push(p)}for(var g=0,h=a;g<h.length;g++){var _=h[g],m=b.combinePaths(s,_);e.push({moduleName:_,moduleDir:m})}}return e}(o);l<c.length;l++){var u=c[l];if(i){if(b.startsWith(u.moduleName,s)){var d=x(o,u.moduleDir,b.supportedTypeScriptExtensions,void 0,["./*"]);if(d)for(var p=0,g=d;p<g.length;p++){var h=g[p],h=b.normalizePath(h),h=b.removeFileExtension(b.getBaseFileName(h));a.push(h)}}}else a.push(u.moduleName)}return b.deduplicate(a)}(e,t,o,i,r);f<y.length;f++){var k=y[f];u.push(S(k,"external module name",n))}return u}(r,s,e,m,t,n)}},e.getTripleSlashReferenceCompletion=function(e,t,n,o){var r=b.getTokenAtPosition(e,t,!1);if(r){r=b.getLeadingCommentRanges(e.text,r.pos);if(r&&r.length){var i,s,a,l,c,u,r=b.forEach(r,function(e){return t>=e.pos&&t<=e.end&&e});if(r)return i={isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!0,entries:[]},s=e.text.substr(r.pos,t-r.pos),(s=p.exec(s))&&(a=s[1],c=s[2],u=s[3],l=b.getDirectoryPath(e.path),"path"===c?(c=d(u,r.pos+a.length),i.entries=v(u,l,b.getSupportedExtensions(n),!0,c,o,e.path)):(u={start:r.pos+a.length,length:s[0].length-a.length},i.entries=T(o,n,l,u))),i}}},p=/^(\/\/\/\s*<reference\s+(path|types)\s*=\s*(?:'|"))([^\3"]*)$/,A=["dependencies","devDependencies","peerDependencies","optionalDependencies"]}(ts=ts||{}),function(L){function f(e){return e&&L.stripQuotes(e.moduleSymbol.name)}function N(e,t,n,o,r,i,s,a,l){var c=L.timestamp(),u=L.createMap();if(e)for(var d=0,p=e;d<p.length;d++){var g,h=p[d],_=l?l[L.getSymbolId(h)]:void 0,m=function(e,t,n,o,r,i,s){if(r=y(e,r,n,i))return{name:r,kind:L.SymbolDisplay.getSymbolKind(o,e,t),kindModifiers:L.SymbolDisplay.getSymbolModifiers(e),sortText:"0",source:f(s),hasAction:void 0!==s||void 0}}(h,n,o,r,i,a,_);m&&(g=m.name,u.has(g)||(_||void 0===h.parent&&!L.some(h.declarations,function(e){return e.getSourceFile()===n.getSourceFile()})||u.set(g,!0),t.push(m)))}return s("getCompletionsAtPosition: getCompletionEntriesFromSymbols: "+(L.timestamp()-c)),u}function w(e,t){if(e){var n=[];if(O(e,n,t),n.length)return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!1,entries:n}}}function O(e,t,n,o){if(void 0===o&&(o=L.createMap()),e=e&&16384&e.flags?n.getBaseConstraintOfType(e):e)if(65536&e.flags)for(var r=0,i=e.types;r<i.length;r++)O(i[r],t,n,o);else 32&e.flags&&!(256&e.flags)&&(e=e.value,o.has(e)||(o.set(e,!0),t.push({name:e,kindModifiers:"",kind:"var",sortText:"0"})))}function d(e,t,n,o,r,i,s){var a,l,c=i.name,u=i.source,i=R(e,t,o,r,s);if(i)return e=i.symbols,t=i.location,a=i.allowStringLiteral,l=i.symbolToOriginInfoMap,(o=L.find(e,function(e){return y(e,n.target,!1,a)===c&&f(l[L.getSymbolId(e)])===u}))&&{symbol:o,location:t,symbolToOriginInfoMap:l}}function R(h,e,_,m,f){var t,s=L.isSourceFileJavaScript(_),n=L.timestamp(),u=L.getTokenAtPosition(_,m,!1),o=(e("getCompletionData: Get current token: "+(L.timestamp()-n)),n=L.timestamp(),L.isInComment(_,m,u)),y=(e("getCompletionData: Is inside comment: "+(L.timestamp()-n)),!1);if(o){L.hasDocComment(_,m)&&(64===_.text.charCodeAt(m-1)?t={kind:"JsDocTagName"}:(o=L.getLineStartPositionForPosition(m,_),_.text.substring(o,m).match(/[^\*|\s|(/\*\*)]/)||(t={kind:"JsDocTag"})));var r=function(e){var t=function(e){if(!L.isToken(e))return e;switch(e.kind){case 104:case 110:case 76:return e.parent.parent;default:return e.parent}}(u).jsDoc;if(t)for(var n=0,o=t;n<o.length;n++){var r=o[n],i=r.pos,s=r.end,a=r.tags;if(!(!a||e<i||s<e))for(var l=a.length-1;0<=l;l--){var c=a[l];if(e>=c.pos)return c}}}(m);if(t=r&&(r.tagName.pos<=m&&m<=r.tagName.end&&(t={kind:"JsDocTagName"}),function(){switch(r.kind){case 279:case 284:case 280:case 281:case 283:return 1}}()&&r.typeExpression&&267===r.typeExpression.kind&&((u=L.getTokenAtPosition(_,m,!0))&&(L.isDeclarationName(u)||284===u.parent.kind&&u.parent.name===u)||(y=P(r.typeExpression))),L.isJSDocParameterTag(r))&&(L.nodeIsMissing(r.name)||r.name.pos<=m&&m<=r.name.end)?{kind:"JsDocParameterName",tag:r}:t)return{symbols:void 0,isGlobalCompletion:!1,isMemberCompletion:!1,allowStringLiteral:!1,isNewIdentifierLocation:!1,location:void 0,isRightOfDot:!1,request:t,keywordFilters:0,symbolToOriginInfoMap:void 0};if(!y)return void e("Returning an empty list because completion was inside a regular comment or plain text part of a JsDoc comment.")}var i,a,n=L.timestamp(),k=L.findPrecedingToken(m,_,void 0,y),b=(e("getCompletionData: Get previous token 1: "+(L.timestamp()-n)),k),d=(b&&m<=b.end&&L.isWord(b.kind)&&(o=L.timestamp(),b=L.findPrecedingToken(b.getFullStart(),_,void 0,y),e("getCompletionData: Get previous token 2: "+(L.timestamp()-o))),u),n=!1,l=!1,c=!1,v=L.getTouchingPropertyName(_,m,y);if(b){if(i=b,o=L.timestamp(),a=function(e){if(9===e.kind||12===e.kind||L.isTemplateLiteralKind(e.kind)){var t=e.getStart(),n=e.getEnd();if(t<m&&m<n)return!0;if(m===n)return!!e.isUnterminated||12===e.kind}return!1}(i)||function(e){var t=e.parent.kind;switch(e.kind){case 26:return 226===t||227===t||208===t||232===t||R(t)||230===t||175===t||231===t||L.isClassLike(e.parent)&&e.parent.typeParameters&&e.parent.typeParameters.end>=e.pos;case 23:return 175===t;case 56:return 176===t;case 21:return 175===t;case 19:return 260===t||R(t);case 17:return 232===t||230===t||163===t;case 25:return 148===t&&e.parent&&e.parent.parent&&(230===e.parent.parent.kind||163===e.parent.parent.kind);case 27:return 229===t||199===t||230===t||231===t||L.isFunctionLikeKind(t);case 115:return 149===t&&!L.isClassLike(e.parent.parent);case 24:return 146===t||e.parent&&e.parent.parent&&175===e.parent.parent.kind;case 114:case 112:case 113:return 146===t&&!L.isConstructorDeclaration(e.parent.parent);case 118:return 242===t||246===t||240===t;case 125:case 135:if(w(e))return!1;case 75:case 83:case 109:case 89:case 104:case 91:case 110:case 76:case 116:case 138:return!0}if(U(e.getText())&&w(e))return!1;if(O(e)&&(!L.isIdentifier(e)||V(e.getText())||P(e)))return!1;switch(e.getText()){case"abstract":case"async":case"class":case"const":case"declare":case"enum":case"function":case"interface":case"let":case"private":case"protected":case"public":case"static":case"var":case"yield":return!0}return L.isDeclarationName(e)&&!L.isJsxAttribute(e.parent)}(i)||8===(a=i).kind&&"."===(a=a.getFullText()).charAt(a.length-1)||function(){if(10===i.kind)return!0;if(29===i.kind&&i.parent){if(251===i.parent.kind)return!0;if(252===i.parent.kind||250===i.parent.kind)return i.parent.parent&&249===i.parent.parent.kind}return!1}(),e("getCompletionsAtPosition: isCompletionListBlocker: "+(L.timestamp()-o)),a)return void e("Returning an empty list because completion was requested in an invalid position.");var p=b.parent;if(23===b.kind){if(179===p.kind)d=b.parent.expression;else{if(143!==p.kind)return;d=b.parent.left}n=!0}else if(1===_.languageVariant)switch(p&&179===p.kind&&(b=p,p=p.parent),p.kind){case 252:41===b.kind&&(c=!0,v=b);break;case 194:if(!(32768&p.left.flags))break;case 250:case 249:case 251:27===b.kind&&(l=!0,v=b)}}var o=L.timestamp(),T=!1,E=!1,S=0,C=[],x=[];if(n)!function(){A=!(B=!(T=!1));var e=y||L.isPartOfTypeNode(d.parent),t=L.isInRightSideOfInternalImportEqualsDeclaration(d);if(L.isEntityName(d)){var n=h.getSymbolAtLocation(d);if(n&&1920&(n=L.skipAlias(n,h)).flags){for(var o=h.getExportsOfModule(n),r=function(e){return h.isValidPropertyAccess(d.parent,e.name)},i=N,s=t?function(e){return i(e)||r(e)}:e?i:r,a=0,l=o;a<l.length;a++){var c=l[a];s(c)&&C.push(c)}return!e&&n.declarations.some(function(e){return 265!==e.kind&&233!==e.kind&&232!==e.kind})&&I(h.getTypeOfSymbolAtLocation(n,d))}}e||I(h.getTypeAtLocation(d))}();else if(l)var g=h.getJsxIntrinsicTagNames(),C=D()?g.concat(C.filter(function(e){return!!(2204607&e.flags)})):g,B=!0,A=!1;else if(c){g=b.parent.parent.openingElement.tagName,g=h.getSymbolAtLocation(g);h.isUnknownSymbol(g)||(C=[g]),A=!(B=!0)}else if(!D())return;return e("getCompletionData: Semantic work: "+(L.timestamp()-o)),{symbols:C,isGlobalCompletion:T,isMemberCompletion:B,allowStringLiteral:E,isNewIdentifierLocation:A,location:v,isRightOfDot:n||l,request:t,keywordFilters:S,symbolToOriginInfoMap:x};function I(e){for(var t=0,n=e.getApparentProperties();t<n.length;t++){var o=n[t];h.isValidPropertyAccess(d.parent,o.name)&&C.push(o)}if(s&&65536&e.flags)for(var r=0,i=e.types;r<i.length;r++)I(i[r])}function D(){var e,t,n,a,l;if(s=function(e){if(e)switch(e.kind){case 17:case 26:var t=e.parent;if(L.isObjectLiteralExpression(t)||L.isObjectBindingPattern(t))return t}}(b)){if(E=B=!0,178===s.kind){if(A=!0,!(r=h.getContextualType(s)))return;t=h,n=65536&(e=r).flags?(n=e.types.filter(function(e){return!(8190&e.flags||t.isArrayLikeType(e))}),t.getAllPossiblePropertiesOfTypes(n)):t.getPropertiesOfType(e),e=s.properties}else{L.Debug.assert(174===s.kind),A=!1;var o=L.getRootDeclaration(s.parent);if(!L.isVariableLike(o))throw L.Debug.fail("Root declaration is not variable-like.");var r,i=o.initializer||o.type||216===o.parent.parent.kind;if(i||146!==o.kind||(L.isExpression(o.parent)?i=!!h.getContextualType(o.parent):151!==o.parent.kind&&154!==o.parent.kind||(i=L.isExpression(o.parent.parent)&&!!h.getContextualType(o.parent.parent))),i){if(!(r=h.getTypeAtLocation(s)))return;n=h.getPropertiesOfType(r).filter(function(e){return!(24&L.getDeclarationModifierFlagsFromSymbol(e))}),e=s.elements}}return n&&0<n.length&&(C=function(e,t){if(!t||0===t.length)return e;for(var n=L.createUnderscoreEscapedMap(),o=0,r=t;o<r.length;o++){var i,s=r[o];261!==s.kind&&262!==s.kind&&176!==s.kind&&151!==s.kind&&153!==s.kind&&154!==s.kind||P(s)||(i=void 0,176===s.kind&&s.propertyName?71===s.propertyName.kind&&(i=s.propertyName.escapedText):(s=L.getNameOfDeclaration(s),i=L.getEscapedTextOfIdentifierOrLiteral(s)),n.set(i,!0))}return L.filter(e,function(e){return!n.get(e.escapedName)})}(n,e)),1}if(!(o=function(e){if(e)switch(e.kind){case 17:case 26:switch(e.parent.kind){case 241:case 245:return e.parent}}}(b))){if(function(e){if(e)switch(e.kind){case 19:case 26:return L.isConstructorDeclaration(e.parent)&&e.parent;default:if(O(e))return e.parent.parent}}(b))A=!(B=!1),S=2;else if(i=function(e){if(e)switch(e.kind){case 17:case 26:if(L.isClassLike(e.parent))return e.parent;break;case 25:case 18:if(L.isClassLike(v))return v;if(w(v)&&v.parent.name===v)return v.parent.parent;break;default:if(w(e)&&(F(e.kind)||U(e.getText())))return e.parent.parent}if(v&&286===v.kind&&L.isClassLike(v.parent))return v.parent}(b)){var s=i,c=(A=B=!0,S=1,L.getClassExtendsHeritageClauseElement(s)),u=L.getClassImplementsHeritageClauseElements(s);if(c||u){var d=b.parent,p=L.isClassElement(d)&&L.getModifierFlags(d);if(71===b.kind&&!P(b))switch(b.getText()){case"private":p|=8;break;case"static":p|=32}8&p||(d=void 0,c&&(d=h.getTypeAtLocation(c),32&p)&&(d=h.getTypeOfSymbolAtLocation(d.symbol,s)),c=32&p?L.emptyArray:L.flatMap(u||L.emptyArray,function(e){return h.getPropertiesOfType(h.getTypeAtLocation(e))}),C=function(e,t,n,o){for(var a=L.createUnderscoreEscapedMap(),r=0,i=n;r<i.length;r++){var s,l,c=i[r];149!==c.kind&&151!==c.kind&&153!==c.kind&&154!==c.kind||P(c)||L.hasModifier(c,8)||(s=!!(32&o),(l=L.hasModifier(c,32))&&!s)||!l&&s||(l=L.getPropertyNameForPropertyNameNode(c.name))&&a.set(l,!0)}var u=[];return d(e,8),d(t,24),u;function d(e,t){for(var n,o,r=0,i=e;r<i.length;r++){var s=i[r];n=s,o=t,a.get(n.escapedName)||!n.getDeclarations()||L.getDeclarationModifierFlagsFromSymbol(n)&o||u.push(s)}}}(d?h.getPropertiesOfType(d):L.emptyArray,c,s.members,p))}}else{if(u=function(e){if(e){var t=e.parent;switch(e.kind){case 28:case 41:case 71:case 179:case 254:case 253:case 255:if(t&&(250===t.kind||251===t.kind))return t;if(253===t.kind)return t.parent.parent;break;case 9:if(!t||253!==t.kind&&255!==t.kind)break;return t.parent.parent;case 18:if(t&&256===t.kind&&t.parent&&253===t.parent.kind)return t.parent.parent.parent;if(t&&255===t.kind)return t.parent.parent}}}(b)){d=void 0;if((250===u.kind||251===u.kind)&&(d=h.getAllAttributesTypeFromJsxOpeningLikeElement(u)))return C=function(e,t){for(var n=L.createUnderscoreEscapedMap(),o=0,r=t;o<r.length;o++){var i=r[o];P(i)||253===i.kind&&n.set(i.name.escapedText,!0)}return L.filter(e,function(e){return!n.get(e.escapedName)})}(h.getPropertiesOfType(d),u.attributes.properties),A=!(B=!0),1}B=!1,A=function(e){if(e){var t=e.parent.kind;switch(e.kind){case 26:return 181===t||152===t||182===t||177===t||194===t||160===t;case 19:return 181===t||152===t||182===t||185===t||168===t;case 21:return 177===t||157===t||144===t;case 128:case 129:return!0;case 23:return 233===t;case 17:return 229===t;case 58:return 226===t||194===t;case 14:return 196===t;case 15:return 205===t;case 114:case 112:case 113:return 149===t}switch(e.getText()){case"public":case"protected":case"private":return!0}}return!1}(b),k!==b&&L.Debug.assert(!!k,"Expected 'contextToken' to be defined when different from 'previousToken'.");c=function(e,t){for(var n=b;n&&!L.positionBelongsToNode(n,e,t);)n=n.parent;return n}(k!==b?k.getStart():m,_)||_;c&&(T=265===c.kind||196===c.kind||256===c.kind||L.isStatement(c)),a=C=h.getSymbolsInScope(c,2998271),l=(k&&L.isIdentifier(k)?k.text:"").toLowerCase(),L.codefix.forEachExternalModule(h,f,function(e){if(e!==_.symbol)for(var t=0,n=h.getExportsOfModule(e);t<n.length;t++){var o,r=n[t],i=r.name,s="default"===i;s&&(o=L.getLocalSymbolForExportDefault(r))&&(i=(r=o).name),r.declarations&&r.declarations.some(function(e){return L.isExportSpecifier(e)&&!!e.parent.parent.moduleSpecifier})||function(e,t){if(0===t.length)return 1;for(var n=0,o=0;o<e.length;o++)if(e.charCodeAt(o)===t.charCodeAt(n)&&++n===t.length)return 1;return}(i.toLowerCase(),l)&&(a.push(r),x[L.getSymbolId(r)]={moduleSymbol:e,isDefaultExport:s})}}),s=C,L.filterMutate(s,function(e){if(!L.isSourceFile(v)){if(L.isExportAssignment(v.parent))return!0;if(e&&2097152&e.flags&&(e=h.getAliasedSymbol(e)),L.isInRightSideOfInternalImportEqualsDeclaration(v))return!!(1920&e.flags);if(y||(!(t=b)||103!==t.kind||162!==t.parent.kind)&&(L.isPartOfTypeNode(v)||function(e){if(e){var t=e.parent.kind;switch(e.kind){case 56:return 149===t||148===t||146===t||226===t||L.isFunctionLikeKind(t);case 58:return 231===t;case 118:return 202===t}}}(b)))return N(e)}var t;return!!(107455&L.getCombinedLocalAndExportSymbolFlags(e))})}return 1}var s=o,g=241===s.kind?238:244;if(g=L.getAncestor(s,g).moduleSpecifier)return A=!(B=!0),g=h.getSymbolAtLocation(g),C=g?function(e,t){for(var n=L.createUnderscoreEscapedMap(),o=0,r=t;o<r.length;o++){var i=r[o];P(i)||(i=i.propertyName||i.name,n.set(i.escapedText,!0))}return 0===n.size?L.filter(e,function(e){return"default"!==e.escapedName}):L.filter(e,function(e){return"default"!==e.escapedName&&!n.get(e.escapedName)})}(h.getExportsAndPropertiesOfModule(g),s.elements):L.emptyArray,1}function N(e){return e=e.exportSymbol||e,!!(793064&(e=L.skipAlias(e,h)).flags)||(1536&e.flags?(e=h.getExportsOfModule(e),L.forEach(e,N)):void 0)}function w(e){return L.isClassElement(e.parent)&&L.isClassLike(e.parent.parent)}function O(e){return e.parent&&(t=e.parent,L.isParameter(t))&&L.isConstructorDeclaration(t.parent)&&(H(e.kind)||L.isDeclarationName(e));var t}function R(e){return L.isFunctionLikeKind(e)&&152!==e}function P(e){return e.getStart()<=m&&m<=e.getEnd()}}function y(e,t,n,o){var r=e.name;if(r){if(1920&e.flags){e=r.charCodeAt(0);if(L.isSingleOrDoubleQuote(e))return}return P(r,t,n,o)}}function P(e,t,n,o){return n&&!L.isIdentifierText(e,t)?o?JSON.stringify(e):void 0:e}function M(n){return e[n]||(e[n]=function(){switch(n){case 0:for(var e=[],t=72;t<=142;t++)e.push({name:L.tokenToString(t),kind:"keyword",kindModifiers:"",sortText:"0"});return e;case 1:return o(U);case 2:return o(V)}}());function o(t){return L.filter(M(0),function(e){return t(e.name)})}}function F(e){switch(e){case 114:case 113:case 112:case 117:case 115:case 123:case 131:case 125:case 135:case 120:return!0}}function U(e){return F(L.stringToToken(e))}function H(e){switch(e){case 114:case 112:case 113:case 131:return!0}}function V(e){return H(L.stringToToken(e))}var W,e;(W=L.Completions||(L.Completions={})).getCompletionsAtPosition=function(e,t,n,o,r,i,s){if(L.isInReferenceComment(r,i))return W.PathCompletions.getTripleSlashReferenceCompletion(r,i,o,e);if(L.isInString(r,i)){var a=r,l=i,c=t,u=o,d=n,p=L.findPrecedingToken(l,a);if(p&&9===p.kind)if(261===p.parent.kind&&178===p.parent.parent.kind&&p.parent.name===p){var g=p.parent,h=c,_=u.target,m=d,f=h.getContextualType(g.parent),y=[];if(f&&(N(f.getApparentProperties(),y,g,!1,h,_,m,!0),y.length))return{isGlobalCompletion:!1,isMemberCompletion:!0,isNewIdentifierLocation:!0,entries:y}}else{if(!L.isElementAccessExpression(p.parent)||p.parent.argumentExpression!==p){if(238===p.parent.kind||L.isExpressionOfExternalModuleImportEqualsDeclaration(p)||L.isRequireCall(p.parent,!1))return W.PathCompletions.getStringLiteralCompletionEntriesFromModuleNames(p,u,e,c);if(f=p.parent,L.isBinaryExpression(f)&&(32===(f=f.operatorToken.kind)||33===f||34===f||35===f))return w(c.getTypeAtLocation(p.parent.left===p?p.parent.right:p.parent.left),c);if(L.isCaseOrDefaultClause(p.parent))return w(c.getTypeAtLocation(p.parent.parent.parent.expression),c);g=L.SignatureHelp.getImmediatelyContainingArgumentInfo(p,l,a);if(!g)return w(c.getContextualType(p),c);var k=g,b=c,h=[],v=[],T=L.createMap();b.getResolvedSignature(k.invocation,h,k.argumentCount);for(var E=0,S=h;E<S.length;E++)O(b.getParameterType(S[E],k.argumentIndex),v,b,T);return v.length?{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!0,entries:v}:void 0}_=p.parent,m=c,y=u.target,e=d,l=m.getTypeAtLocation(_.expression),a=[];if(l&&(N(l.getApparentProperties(),a,_,!1,m,y,e,!0),a.length))return{isGlobalCompletion:!1,isMemberCompletion:!0,isNewIdentifierLocation:!0,entries:a}}}else{var C,x,B,A,p=R(t,n,r,i,s);if(p){var c=p.symbols,u=p.isGlobalCompletion,d=p.isMemberCompletion,l=p.allowStringLiteral,e=p.isNewIdentifierLocation,a=p.location,i=p.request,s=p.keywordFilters,I=p.symbolToOriginInfoMap;if(1===r.languageVariant&&a&&a.parent&&252===a.parent.kind)return{isGlobalCompletion:!1,isMemberCompletion:!0,isNewIdentifierLocation:!1,entries:[{name:a.parent.parent.openingElement.tagName.getFullText(),kind:"class",kindModifiers:void 0,sortText:"0"}]};if(i)return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!1,entries:"JsDocTagName"===i.kind?L.JsDoc.getJSDocTagNameCompletions():"JsDocTag"===i.kind?L.JsDoc.getJSDocTagCompletions():L.JsDoc.getJSDocParameterNameCompletions(i.tag)};i=[];if(L.isSourceFileJavaScript(r)){var D=N(c,i,a,!0,t,o.target,n,l,I);C=a.pos,x=D,B=o.target,A=i,L.getNameTable(r).forEach(function(e,t){e!==C&&(e=L.unescapeLeadingUnderscores(t),!x.has(e))&&(x.set(e,!0),t=P(e,B,!0,!1))&&A.push({name:t,kind:"warning",kindModifiers:"",sortText:"1"})})}else{if((!c||0===c.length)&&0===s)return;N(c,i,a,!0,t,o.target,n,l,I)}return 0===s&&d||L.addRange(i,M(s)),{isGlobalCompletion:u,isMemberCompletion:d,isNewIdentifierLocation:e,entries:i}}}},W.getCompletionEntryDetails=function(e,t,n,o,r,i,s,a,l){var c=i.name,u=i.source,t=d(e,t,n,o,r,i,s);return t?(r=t.symbol,i=t.location,s=function(e,t,n,o,r,i,s){var a,e=e[L.getSymbolId(t)];if(e)return a=e.moduleSymbol,e=e.isDefaultExport,L.codefix.getCodeActionForImport(a,{host:o,checker:n,newLineCharacter:o.getNewLine(),compilerOptions:r,sourceFile:i,rulesProvider:s,symbolName:t.name,getCanonicalFileName:L.createGetCanonicalFileName(!!o.useCaseSensitiveFileNames&&o.useCaseSensitiveFileNames()),symbolToken:void 0,kind:e?1:0})}(t.symbolToOriginInfoMap,r,e,a,n,o,l),t=L.SymbolDisplay.getSymbolModifiers(r),n=(a=L.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(e,r,o,i,i,7)).displayParts,l=a.documentation,e=a.symbolKind,r=a.tags,{name:c,kindModifiers:t,kind:e,displayParts:n,documentation:l,tags:r,codeActions:s,source:void 0===u?void 0:[L.textPart(u)]}):void 0===u&&L.some(M(0),function(e){return e.name===c})?{name:c,kind:"keyword",kindModifiers:"",displayParts:[L.displayPart(c,L.SymbolDisplayPartKind.keyword)],documentation:void 0,tags:void 0,codeActions:void 0,source:void 0}:void 0},W.getCompletionEntrySymbol=function(e,t,n,o,r,i,s){e=d(e,t,n,o,r,i,s);return e&&e.symbol},e=[]}(ts=ts||{}),function(k){function b(e,t){return{fileName:t.fileName,textSpan:k.createTextSpanFromNode(e,t),kind:"none"}}function v(e,t){return void 0!==e&&e.kind===t}function T(e){return e&&e.parent}function E(e){var o=[];return function e(t){var n;223===t.kind?o.push(t):224===t.kind?((n=t).catchClause?e(n.catchClause):e(n.tryBlock),n.finallyBlock&&e(n.finallyBlock)):k.isFunctionLike(t)||k.forEachChild(t,e)}(e),o}function i(e){var n=[];return function e(t){218===t.kind||217===t.kind?n.push(t):k.isFunctionLike(t)||k.forEachChild(t,e)}(e),n}function s(e,t){t=S(t);return t&&t===e}function S(e){for(var t=e.parent;t;t=t.parent)switch(t.kind){case 221:if(217===e.kind)continue;case 214:case 215:case 216:case 213:case 212:if(!e.label||function(e,t){for(var n=e.parent;222===n.kind;n=n.parent)if(n.label.escapedText===t)return 1;return}(t,e.label.text))return t;break;default:if(k.isFunctionLike(t))return}}function C(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return!(!t||!k.contains(n,t.kind)||(e.push(t),0))}function x(t){var n=[];if(C(n,t.getFirstToken(),88,106,81)&&212===t.kind)for(var e=t.getChildren(),o=e.length-1;0<=o&&!C(n,e[o],106);o--);var r=i(t.statement);return k.forEach(r,function(e){s(t,e)&&C(n,e.getFirstToken(),72,77)}),n}function B(t){var n=[];return C(n,t.getFirstToken(),98),k.forEach(t.caseBlock.clauses,function(e){C(n,e.getFirstToken(),73,79);e=i(e);k.forEach(e,function(e){s(t,e)&&C(n,e.getFirstToken(),72)})}),n}(k.DocumentHighlights||(k.DocumentHighlights={})).getDocumentHighlights=function(e,t,n,o,r){var i=k.getTouchingWord(n,o,!0);if(i!==n)return k.Debug.assert(void 0!==i.parent),k.isJsxOpeningElement(i.parent)&&i.parent.tagName===i||k.isJsxClosingElement(i.parent)?(o=[(o=i.parent.parent).openingElement,o.closingElement].map(function(e){return b(e.tagName,n)}),[{fileName:n.fileName,highlightSpans:o}]):(o=k.FindAllReferences.getReferenceEntriesForNode(i,e,r,t))&&function(e){for(var t=k.createMap(),n=0,o=e;n<o.length;n++){var r=o[n],r=k.FindAllReferences.toHighlightSpan(r),i=r.fileName,r=r.span,s=t.get(i);s||t.set(i,s=[]),s.push(r)}return k.arrayFrom(t.entries(),function(e){return{fileName:e[0],highlightSpans:e[1]}})}(o)||function(e){var t=function(t,n){var o,e,r,i;if(t)switch(t.kind){case 90:case 82:if(v(t.parent,211)){for(var s=t.parent,a=n,l=[];v(s.parent,211)&&s.parent.elseStatement===s;)s=s.parent;for(;s;){var c=s.getChildren();C(l,c[0],90);for(var u=c.length-1;0<=u&&!C(l,c[u],82);u--);if(!v(s.elseStatement,211))break;s=s.elseStatement}for(var d=[],u=0;u<l.length;u++){if(82===l[u].kind&&u<l.length-1){for(var p=l[u],g=l[u+1],h=!0,_=g.getStart()-1;_>=p.end;_--)if(!k.isWhiteSpaceSingleLine(a.text.charCodeAt(_))){h=!1;break}if(h){d.push({fileName:a.fileName,textSpan:k.createTextSpanFromBounds(p.getStart(),g.end),kind:"reference"}),u++;continue}}d.push(b(l[u],a))}return d}break;case 96:if(v(t.parent,219))return y(function(e){var t,e=k.getContainingFunction(e);if(e&&v(e.body,207))return t=[],k.forEachReturnStatement(e.body,function(e){C(t,e.getFirstToken(),96)}),k.forEach(E(e.body),function(e){C(t,e.getFirstToken(),100)}),t}(t.parent));break;case 100:if(v(t.parent,223))return y(function(n){var t,e=function(){for(var e=n;e.parent;){var t=e.parent;if(k.isFunctionBlock(t)||265===t.kind)return t;if(224===t.kind)if(t.tryBlock===e&&t.catchClause)return e;e=t}}();if(e)return t=[],k.forEach(E(e),function(e){C(t,e.getFirstToken(),100)}),k.isFunctionBlock(e)&&k.forEachReturnStatement(e,function(e){C(t,e.getFirstToken(),96)}),t}(t.parent));break;case 102:case 74:case 87:var m=74===t.kind?T(T(t)):T(t);if(v(m,224))return y((e=n,C(r=[],(m=m).getFirstToken(),102),m.catchClause&&C(r,m.catchClause.getFirstToken(),74),m.finallyBlock&&C(r,k.findChildOfKind(m,87,e),87),r));break;case 98:if(v(t.parent,221))return y(B(t.parent));break;case 73:case 79:if(v(T(T(T(t))),221))return y(B(t.parent.parent.parent));break;case 72:case 77:if(v(t.parent,218)||v(t.parent,217))return y(function(){var e=S(t.parent);if(e)switch(e.kind){case 214:case 215:case 216:case 212:case 213:return x(e);case 221:return B(e)}}());break;case 88:if(v(t.parent,214)||v(t.parent,215)||v(t.parent,216))return y(x(t.parent));break;case 106:case 81:if(v(t.parent,213)||v(t.parent,212))return y(x(t.parent));break;case 123:if(v(t.parent,152))return y((m=t.parent.symbol.getDeclarations(),i=[],k.forEach(m,function(e){k.forEach(e.getChildren(),function(e){return C(i,e,123)})}),i));break;case 125:case 135:if(v(t.parent,153)||v(t.parent,154))return y((e=t.parent,o=[],f(e.symbol,153),f(e.symbol,154),o));break;default:if(k.isModifierKind(t.kind)&&t.parent&&(k.isDeclaration(t.parent)||208===t.parent.kind))return y(function(n,e){var t;if(function(e){var t=e.parent;switch(n){case 112:case 113:case 114:switch(t.kind){case 229:case 199:return 1;case 152:return 146===e.kind;default:return}case 115:return 229===t.kind||199===t.kind;case 84:case 124:return 234===t.kind||265===t.kind;case 117:return 229===t.kind||229===e.kind;default:return}}(e))return t=k.modifierToFlag(n),k.mapDefined(function(e,t){var n=e.parent;switch(n.kind){case 234:case 265:case 207:case 257:case 258:return 128&t?e.members.concat([e]):n.statements;case 152:return n.parameters.concat(n.parent.members);case 229:case 199:var o=n.members;if(28&t){var r=k.find(n.members,k.isConstructorDeclaration);if(r)return o.concat(r.parameters)}else if(128&t)return o.concat([n]);return o;default:k.Debug.fail("Invalid container kind.")}}(e,t),function(e){if(k.getModifierFlags(e)&t)return e=k.find(e.modifiers,function(e){return e.kind===n}),k.Debug.assert(!!e),e})}(t.kind,t.parent))}function f(e,t){e=k.getDeclarationOfKind(e,t);e&&k.forEach(e.getChildren(),function(e){return C(o,e,125,135)})}function y(e){return e&&e.map(function(e){return b(e,n)})}}(i,e);if(t&&0!==t.length)return[{fileName:e.fileName,highlightSpans:t}]}(n)}}(ts=ts||{}),function(p){p.createDocumentRegistry=function(e,i){void 0===i&&(i="");var o=p.createMap(),s=p.createGetCanonicalFileName(!!e);function a(e){return"_"+e.target+"|"+e.module+"|"+e.noResolve+"|"+e.jsx+"|"+e.allowJs+"|"+e.baseUrl+"|"+JSON.stringify(e.typeRoots)+"|"+JSON.stringify(e.rootDirs)+"|"+JSON.stringify(e.paths)}function c(e,t){var n=o.get(e);return!n&&t&&o.set(e,n=p.createMap()),n}function l(e,t,n,o,r,i,s){return d(e,t,n,o,r,i,!0,s)}function u(e,t,n,o,r,i,s){return d(e,t,n,o,r,i,!1,s)}function d(e,t,n,o,r,i,s,a){var o=c(o,!0),l=o.get(t);return l?(l.sourceFile.version!==i&&(l.sourceFile=p.updateLanguageServiceSourceFile(l.sourceFile,r,i,r.getChangeRange(l.sourceFile.scriptSnapshot))),s&&l.languageServiceRefCount++):(l={sourceFile:p.createLanguageServiceSourceFile(e,r,n.target,i,!1,a),languageServiceRefCount:1,owners:[]},o.set(t,l)),l.sourceFile}function n(e,t){var t=c(t,!1),n=(p.Debug.assert(void 0!==t),t.get(e));n.languageServiceRefCount--,p.Debug.assert(0<=n.languageServiceRefCount),0===n.languageServiceRefCount&&t.delete(e)}return{acquireDocument:function(e,t,n,o,r){return l(e,p.toPath(e,i,s),t,a(t),n,o,r)},acquireDocumentWithKey:l,updateDocument:function(e,t,n,o,r){return u(e,p.toPath(e,i,s),t,a(t),n,o,r)},updateDocumentWithKey:u,releaseDocument:function(e,t){return n(p.toPath(e,i,s),a(t))},releaseDocumentWithKey:n,reportStats:function(){var e=p.arrayFrom(o.keys()).filter(function(e){return e&&"_"===e.charAt(0)}).map(function(e){var t=o.get(e),n=[];return t.forEach(function(e,t){n.push({name:t,refCount:e.languageServiceRefCount,references:e.owners.slice(0)})}),n.sort(function(e,t){return t.refCount-e.refCount}),{bucket:e,sourceFiles:n}});return JSON.stringify(e,void 0,2)},getKeyForCompilationSettings:a}}}(ts=ts||{}),function(E){function S(e,t){return E.forEach((265===e.kind?e:e.body).statements,function(e){return t(e)||o(e)&&E.forEach(e.body&&e.body.statements,t)})}function _(e,o){if(e.externalModuleIndicator||void 0!==e.imports)for(var t=0,n=e.imports;t<n.length;t++){var r=n[t];o(function(e){var t=e.parent;switch(t.kind){case 181:case 238:case 244:return t;case 248:return t.parent;default:E.Debug.fail("Unexpected module specifier parent: "+t.kind)}}(r),r)}else S(e,function(e){switch(e.kind){case 244:case 238:(t=e).moduleSpecifier&&9===t.moduleSpecifier.kind&&o(t,t.moduleSpecifier);break;case 237:var t,n=(t=e).moduleReference;248===n.kind&&9===n.expression.kind&&o(t,n.expression)}})}function n(e,t,n){n=n.getMergedSymbol(e.parent);return E.isExternalModuleSymbol(n)?{exportingModuleSymbol:n,exportKind:t}:void 0}function C(e){return"default"!==e.escapedName?e.escapedName:E.forEach(e.declarations,function(e){e=E.getNameOfDeclaration(e);return e&&71===e.kind&&e.escapedText})}function x(e,t){return t.getMergedSymbol(B(e).symbol)}function B(e){return 181===e.kind?e.getSourceFile():265===(e=e.parent).kind?e:(E.Debug.assert(234===e.kind&&o(e.parent)),e.parent)}function o(e){return 233===e.kind&&9===e.name.kind}function A(e){e=e.moduleReference;return 248===e.kind&&9===e.expression.kind}var e,t;(e=E.FindAllReferences||(E.FindAllReferences={})).createImportTracker=function(k,b,v){var T=function(e,o,t){for(var r=E.createMap(),n=0,i=e;n<i.length;n++){var s=i[n];t.throwIfCancellationRequested(),_(s,function(e,t){var n,t=o.getSymbolAtLocation(t);t&&(t=E.getSymbolId(t).toString(),(n=r.get(t))||r.set(t,n=[]),n.push(e))})}return r}(k,b,v);return function(e,t,n){o=k,r=T,a=b,s=v,i=t.exportingModuleSymbol,l=t.exportKind,c=E.nodeSeenTracker(),u=E.nodeSeenTracker(),d=[],p=!!i.globalExports,g=p?void 0:[],function e(t){t=y(t);if(t)for(var n=0,o=t;n<o.length;n++){var r=o[n];if(c(r))switch(s.throwIfCancellationRequested(),r.kind){case 181:if(!p){var i=r.parent;if(2===l&&226===i.kind){i=i.name;if(71===i.kind){d.push(i);break}}f(r.getSourceFile())}break;case 237:m(r,r.name,E.hasModifier(r,1));break;case 238:i=r.importClause&&r.importClause.namedBindings;i&&240===i.kind?m(r,i.name):d.push(r);break;case 244:r.exportClause?d.push(r):e(x(r,a))}}}(i);var o,r,a,s,i,l,c,u,d,p,g,h={directImports:d,indirectUsers:function(){if(p)return o;for(var e=0,t=i.declarations;e<t.length;e++){var n=t[e];E.isExternalModuleAugmentation(n)&&f(n)}return g.map(E.getSourceFileOfNode)}()},_=h.directImports;function m(e,t,n){var i,s;2===l?d.push(e):p||(e=B(e),E.Debug.assert(265===e.kind||233===e.kind),(n||(n=e,s=(i=a).getSymbolAtLocation(t),S(n,function(e){if(244===e.kind){var t=e.exportClause;if(!e.moduleSpecifier&&t)for(var n=0,o=t.elements;n<o.length;n++){var r=o[n];if(i.getExportSpecifierLocalTargetSymbol(r)===s)return!0}}}))?function e(t){if(f(t)){t=a.getMergedSymbol(t.symbol),t=(E.Debug.assert(!!(1536&t.flags)),y(t));if(t)for(var n=0,o=t;n<o.length;n++)e(B(o[n]))}}:f)(e))}function f(e){E.Debug.assert(!p);var t=u(e);return t&&g.push(e),t}function y(e){return r.get(E.getSymbolId(e).toString())}return __assign({indirectUsers:h.indirectUsers},function(t,n,s,a){var o=[],l=[];function c(e,t){o.push([e,t])}if(_)for(var e=0,r=_;e<r.length;e++){i=u=d=void 0;var i,u,d=r[e];237!==d.kind?71!==d.kind?9===d.moduleSpecifier.kind&&(244!==d.kind?(u=d.importClause)&&((i=u.namedBindings)&&240===i.kind?p(i.name):0!==n&&(!(u=u.name)||a&&u.escapedText!==C(t)||c(u,s.getSymbolAtLocation(u)),a||1!==n)||g(i)):g(d.exportClause)):p(d):A(d)&&p(d.name)}return{importSearches:o,singleReferences:l};function p(e){2!==n||a&&!h(e.escapedText)||c(e,s.getSymbolAtLocation(e))}function g(e){if(e)for(var t=0,n=e.elements;t<n.length;t++){var o=n[t],r=o.name,i=o.propertyName;h((i||r).escapedText)&&(i?(l.push(i),a||c(r,s.getSymbolAtLocation(r))):c(r,246===o.kind&&o.propertyName?s.getExportSpecifierLocalTargetSymbol(o):s.getSymbolAtLocation(r)))}}function h(e){return e===t.escapedName||0!==n&&"default"===e}}(e,t.exportKind,b,n))}},(t=e.ExportKind||(e.ExportKind={}))[t.Named=0]="Named",t[t.Default=1]="Default",t[t.ExportEquals=2]="ExportEquals",(t=e.ImportExport||(e.ImportExport={}))[t.Import=0]="Import",t[t.Export=1]="Export",e.findModuleReferences=function(e,t,n){for(var o=[],r=e.getTypeChecker(),i=0,s=t;i<s.length;i++){var a=s[i],l=n.valueDeclaration;if(265===l.kind){for(var c=0,u=a.referencedFiles;c<u.length;c++){var d=u[c];e.getSourceFileFromReference(a,d)===l&&o.push({kind:"reference",referencingFile:a,ref:d})}for(var p=0,g=a.typeReferenceDirectives;p<g.length;p++){var d=g[p],h=e.getResolvedTypeReferenceDirectives().get(d.fileName);void 0!==h&&h.resolvedFileName===l.fileName&&o.push({kind:"reference",referencingFile:a,ref:d})}}_(a,function(e,t){r.getSymbolAtLocation(t)===n&&o.push({kind:"import",literal:t})})}return o},e.getImportOrExportSymbol=function(r,i,s,a){return a?e():e()||function(){var e=function(e){var t=e.parent;switch(t.kind){case 237:return t.name===e&&A(t)?{isNamedImport:!1}:void 0;case 242:return t.propertyName?void 0:{isNamedImport:!0};case 239:case 240:return E.Debug.assert(t.name===e),{isNamedImport:!1};default:return}}(r);if(e){var t,n,o=s.getImmediateAliasedSymbol(i);if(o)return"export="===(o=function(e,t){if(e.declarations)for(var n=0,o=e.declarations;n<o.length;n++){var r=o[n];if(E.isExportSpecifier(r)&&!r.propertyName&&!r.parent.parent.moduleSpecifier)return t.getExportSpecifierLocalTargetSymbol(r)}return e}(o,s)).escapedName&&(t=s,o=2097152&(n=o).flags?t.getImmediateAliasedSymbol(n):(t=n.valueDeclaration,E.isExportAssignment(t)?t.expression.symbol:E.isBinaryExpression(t)?t.right.symbol:void E.Debug.fail())),void 0===(n=C(o))||"default"===n||n===i.escapedName?__assign({kind:0,symbol:o},e):void 0}}();function e(){var e,t=r.parent;return i.exportSymbol?179===t.kind?i.declarations.some(function(e){return e===t})&&E.isBinaryExpression(t.parent)?o(t.parent,!1):void 0:l(i.exportSymbol,c(t)):(e=226===t.kind?t.name===r&&260!==t.parent.kind&&208===t.parent.parent.kind?t.parent.parent:void 0:t)&&E.hasModifier(e,1)?E.isImportEqualsDeclaration(e)&&e.moduleReference===r?a?void 0:{kind:0,symbol:s.getSymbolAtLocation(e.name),isNamedImport:!1}:l(i,c(e)):E.isExportAssignment(t)?n(t):E.isExportAssignment(t.parent)?n(t.parent):E.isBinaryExpression(t)?o(t,!0):E.isBinaryExpression(t.parent)?o(t.parent,!0):void 0;function n(e){var t=e.symbol.parent,e=(E.Debug.assert(!!t),e.isExportEquals?2:1);return{kind:1,symbol:i,exportInfo:{exportingModuleSymbol:t,exportKind:e}}}function o(e,t){var n;switch(E.getSpecialPropertyAssignmentKind(e)){case 1:n=0;break;case 2:n=2;break;default:return}t=t?s.getSymbolAtLocation(e.left.name):i;return t&&l(t,n)}}function l(e,t){t=n(e,t,s);return t&&{kind:1,symbol:e,exportInfo:t}}function c(e){return E.hasModifier(e,512)?1:0}},e.getExportInfo=n}(ts=ts||{}),function(d){function s(e,t){return{type:"node",node:e,isInString:t}}function a(e,t,n,o,r){return l(u.Core.getReferencedSymbolsForNode(e,t,n,o,r=void 0===r?{}:r))}function p(e,t,n,o,r,i){o=d.getTouchingPropertyName(o,r,!0);return u.Core.getReferencedSymbolsForNode(o,e,n,t,i)}function l(e){return e&&d.flatMap(e,function(e){return e.references})}function g(e,t,n){n=d.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(n,e,t.getSourceFile(),d.getContainerNode(t),t);return{displayParts:n.displayParts,kind:n.symbolKind}}function h(e){var t;return"span"===e.type?{textSpan:e.textSpan,fileName:e.fileName,isWriteAccess:!1,isDefinition:!1}:(t=e.node,e=e.isInString,{fileName:t.getSourceFile().fileName,textSpan:c(t),isWriteAccess:r(t),isDefinition:79===t.kind||d.isAnyDeclarationName(t)||d.isLiteralComputedPropertyDeclarationName(t),isInString:e})}function c(e){var t=e.getStart(),n=e.getEnd();return 9===e.kind&&(t+=1,--n),d.createTextSpanFromBounds(t,n)}function r(e){return 79===e.kind||d.isAnyDeclarationName(e)||d.isWriteAccess(e)}var u;(u=d.FindAllReferences||(d.FindAllReferences={})).nodeEntry=s,u.findReferencedSymbols=function(e,t,n,o,r){t=p(e,t,n,o,r);if(t&&t.length){for(var i=[],s=e.getTypeChecker(),a=0,l=t;a<l.length;a++){var c=l[a],u=c.definition,c=c.references;u&&i.push({definition:function(r,i){var e,t,n,o,s=function(){switch(r.type){case"symbol":var e=r.symbol,t=r.node,n=g(e,t,i),o=n.displayParts,n=n.kind;return{node:t,name:o.map(function(e){return e.text}).join(""),kind:n,displayParts:o};case"label":t=r.node;return{node:t,name:t.text,kind:"label",displayParts:[d.displayPart(t.text,d.SymbolDisplayPartKind.text)]};case"keyword":n=r.node,o=d.tokenToString(n.kind);return{node:n,name:o,kind:"keyword",displayParts:[{text:o,kind:"keyword"}]};case"this":t=r.node,n=(e=i.getSymbolAtLocation(t))&&d.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(i,e,t.getSourceFile(),d.getContainerNode(t),t).displayParts;return{node:t,name:"this",kind:"var",displayParts:n};case"string":o=r.node;return{node:o,name:o.text,kind:"var",displayParts:[d.displayPart(d.getTextOfNode(o),d.SymbolDisplayPartKind.stringLiteral)]}}}();if(s)return e=s.node,t=s.name,n=s.kind,s=s.displayParts,{containerKind:"",containerName:"",fileName:(o=e.getSourceFile()).fileName,kind:n,name:t,textSpan:d.createTextSpanFromNode(e,o),displayParts:s}}(u,s),references:c.map(h)})}return i}},u.getImplementationsAtPosition=function(e,t,n,o,r){var t=function(e,t,n,o){var r,i;if(265!==o.kind)return i=e.getTypeChecker(),262===o.parent.kind?(r=[],u.Core.getReferenceEntriesForShorthandPropertyAssignment(o,i,function(e){return r.push(s(e))}),r):97===o.kind||d.isSuperProperty(o.parent)?(i=i.getSymbolAtLocation(o)).valueDeclaration&&[s(i.valueDeclaration)]:a(o,e,n,t,{implementations:!0})}(e,t,n,d.getTouchingPropertyName(o,r,!1)),i=e.getTypeChecker();return d.map(t,function(e){return t=i,"node"===(e=e).type?(n=e.node,__assign({textSpan:c(n),fileName:n.getSourceFile().fileName},(n=n,(o=(t=t).getSymbolAtLocation(d.isDeclaration(n)&&n.name?n.name:n))?g(o,n,t):178===n.kind?{kind:"interface",displayParts:[d.punctuationPart(19),d.textPart("object literal"),d.punctuationPart(20)]}:199===n.kind?{kind:"local class",displayParts:[d.punctuationPart(19),d.textPart("anonymous local class"),d.punctuationPart(20)]}:{kind:d.getNodeKind(n),displayParts:[]}))):{textSpan:e.textSpan,fileName:e.fileName,kind:"",displayParts:[]};var t,n,o})},u.findReferencedEntries=function(e,t,n,o,r,i){e=l(p(e,t,n,o,r,i));return d.map(e,h)},u.getReferenceEntriesForNode=a,u.toHighlightSpan=function(e){var t,n,o;return"span"===e.type?{fileName:e.fileName,span:{textSpan:e.textSpan,kind:"reference"}}:(t=e.node,n=e.isInString,e=e.node.getSourceFile().fileName,o=r(t),{fileName:e,span:{textSpan:c(t),kind:o?"writtenReference":"reference",isInString:n}})}}(ts=ts||{}),function(L){function e(e,t,n,o,r,i,s){this.sourceFiles=e,this.isForConstructor=t,this.checker=n,this.cancellationToken=o,this.searchMeaning=r,this.options=i,this.result=s,this.inheritsFromCache=L.createMap(),this.markSeenContainingTypeReference=L.nodeSeenTracker(),this.markSeenReExportRHS=L.nodeSeenTracker(),this.symbolIdToReferences=[],this.sourceFileToSeenSymbols=[]}function M(e,t,n,o){var r=o.getImportSearches(t,n),i=r.importSearches,s=r.singleReferences,r=r.indirectUsers;if(s.length)for(var a=o.referenceAdder(t,e),l=0,c=s;l<c.length;l++)a(c[l]);for(var u=0,d=i;u<d.length;u++){var p=d[u],g=p[0],p=p[1];f(g.getSourceFile(),o.createSearch(g,p,1),o)}if(r.length){var h=void 0;switch(n.exportKind){case 0:h=o.createSearch(e,t,1);break;case 1:h=o.options.isForRename?void 0:o.createSearch(e,t,1,{text:"default"})}if(h)for(var _=0,m=r;_<m.length;_++)F(m[_],h,o)}}function g(e,t){for(var n=0,o=e.declarations;n<o.length;n++){var r=o[n];f(r.getSourceFile(),t.createSearch(r,e,0),t)}}function F(e,t,n){void 0!==L.getNameTable(e).get(t.escapedText)&&f(e,t,n)}function U(e,t){return L.isArrayLiteralOrObjectLiteralDestructuringPattern(e.parent.parent)&&t.getPropertySymbolOfDestructuringAssignment(e)}function H(e){e=L.getDeclarationOfKind(e,176);if(e&&174===e.parent.kind&&!e.propertyName)return e}function V(e,t){var n,e=H(e);if(e)return(t=(n=t.getTypeAtLocation(e.parent))&&t.getPropertyOfType(n,e.name.text))&&98304&t.flags?(L.Debug.assert(!!(33554432&t.flags)),t.target):t}function W(e,t,n){void 0===n&&(n=e);var o=[];if(t&&t.length)for(var r=e.text,i=r.length,s=t.length,a=r.indexOf(t,n.pos);0<=a&&!(a>n.end);){var l=a+s;0!==a&&L.isIdentifierPart(r.charCodeAt(a-1),5)||l!==i&&L.isIdentifierPart(r.charCodeAt(l),5)||o.push(a),a=r.indexOf(t,a+s+1)}return o}function G(e,t){for(var n=[],o=e.getSourceFile(),r=t.text,i=0,s=W(o,r,e);i<s.length;i++){var a=s[i],a=L.getTouchingWord(o,a,!1);a&&(a===t||L.isJumpStatementTarget(a)&&L.getTargetLabel(a,r)===t)&&n.push(Y.nodeEntry(a))}return[{definition:{type:"label",node:t},references:n}]}function f(e,t,n){n.cancellationToken.throwIfCancellationRequested(),K(e,e,t,n)}function K(e,t,n,o){if(o.markSearchedSymbol(t,n.symbol))for(var r=0,i=W(t,n.text,e);r<i.length;r++){s=d=u=c=l=a=void 0;var s,a=t,l=i[r],c=n,u=o,d=L.getTouchingPropertyName(a,l,!0);if(!function(e,t){switch(e.kind){case 71:return e.text.length===t.length;case 9:return(L.isLiteralNameOfPropertyDeclarationOrIndexAccess(e)||9===(n=e).kind&&(L.isNameOfModuleDeclaration(n)||L.isExpressionOfExternalModuleImportEqualsDeclaration(n)))&&e.text.length===t.length;case 8:return L.isLiteralNameOfPropertyDeclarationOrIndexAccess(e)&&e.text.length===t.length;case 79:return"default".length===t.length;default:return}var n}(d,c.text))!u.options.implementations&&(u.options.findInStrings&&L.isInString(a,l)||u.options.findInComments&&L.isInNonReferenceComment(a,l))&&u.addStringOrCommentReference(a.fileName,L.createTextSpan(l,c.text.length));else if(L.getMeaningFromLocation(d)&u.searchMeaning&&(s=u.checker.getSymbolAtLocation(d))){l=d.parent;if(!L.isImportSpecifier(l)||l.propertyName!==d)if(L.isExportSpecifier(l))L.Debug.assert(71===d.kind),function(e,t,n,o,r){var i=n.parent,s=n.propertyName,a=n.name,i=i.parent,l=j(e,t,n,r.checker);function c(){z(e,l,o.location,r)}o.includes(l)&&(s?e===s?(i.moduleSpecifier||c(),!r.options.isForRename&&r.markSeenReExportRHS(a)&&z(a,t,a,r)):r.markSeenReExportRHS(e)&&c():c(),e===s&&r.options.isForRename||(a=79===e.originalKeywordKind?1:0,a=Y.getExportInfo(t,a,r.checker),L.Debug.assert(!!a),M(e,t,a,r)),1!==o.comingFrom)&&i.moduleSpecifier&&!s&&g(r.checker.getExportSpecifierLocalTargetSymbol(n),r)}(d,s,l,c,u);else if(l=function(t,e,n,c){if(t.includes(e))return e;var o=L.getContainingObjectLiteralElement(n);if(o){o=L.forEach($(o,c.checker),function(e){return L.find(c.checker.getRootSymbols(e),t.includes)});if(o)return o;o=U(n,c.checker);if(o&&t.includes(o))return o}n=V(e,c.checker);if(n){o=r(n);if(o)return o}return r(e);function r(e){return L.forEach(c.checker.getRootSymbols(e),function(l){if(t.includes(l))return l;var e;if(l.parent&&96&l.parent.flags&&(!t.parents||L.some(t.parents,function(e){return n=l.parent,o=e,i=c.inheritsFromCache,s=c.checker,a=64&o.getFlags(),t(n);function t(e){if(e===o)return!0;var t=L.getSymbolId(e)+","+L.getSymbolId(o),n=i.get(t);if(void 0!==n)return n;i.set(t,!1);n=L.forEach(e.getDeclarations(),function(e){if(L.isClassLike(e)){if(a){var t=L.getClassImplementsHeritageClauseElements(e);if(t)for(var n=0,o=t;n<o.length;n++)if(r(o[n]))return!0}return r(L.getClassExtendsHeritageClauseElement(e))}return!(230!==e.kind||!a)&&L.forEach(L.getInterfaceBaseTypeNodes(e),r)});return i.set(t,n),n}function r(e){if(e){e=s.getTypeAtLocation(e);if(e&&e.symbol)return t(e.symbol)}return!1}var n,o,i,s,a})))return X(l.parent,l.name,e=[],L.createSymbolTable(),c.checker),L.find(e,t.includes)})}}(c,s,d,u)){u.isForConstructor?function(e,t,n,o){L.isNewExpressionTarget(e)&&z(e,n.symbol,n.location,o);o=o.referenceAdder(n.symbol,n.location);if(L.isClassLike(e.parent)){L.Debug.assert(e.parent.name===e);{n=n.symbol;var r=t;var i=o;for(var s=0,a=n.members.get("__constructor").declarations;s<a.length;s++){var l=a[s],c=L.findChildOfKind(l,123,r);L.Debug.assert(152===l.kind&&!!c),i(c)}n.exports.forEach(function(e){var e=e.valueDeclaration;e&&151===e.kind&&(e=e.body)&&h(e,99,function(e){L.isNewExpressionTarget(e)&&i(e)})})}}else{t=L.tryGetClassExtendingExpressionWithTypeArguments(L.climbPastPropertyAccess(e).parent);if(t&&L.isClassLike(t)){var u=o,n=t.symbol.members.get("__constructor");if(n)for(var d=0,p=n.declarations;d<p.length;d++){var g=p[d],g=(L.Debug.assert(152===g.kind),g.body);g&&h(g,97,function(e){L.isCallExpressionTarget(e)&&u(e)})}}}}(d,a,c,u):z(d,l,c.location,u);{a=void 0;l=void 0;var p=u;a=Y.getImportOrExportSymbol(d,s,p.checker,1===c.comingFrom);a&&(l=a.symbol,0===a.kind?p.options.isForRename&&!a.isNamedImport||g(l,p):M(d,l,a.exportInfo,p))}}else{d=void 0;l=void 0;a=void 0;p=c;c=u;d=s.flags,l=s.valueDeclaration,a=c.checker.getShorthandAssignmentValueSymbol(l);33554432&d||!p.includes(a)||z(L.getNameOfDeclaration(l),a,p.location,c)}}}}function j(e,t,n,o){return e=e,r=n.parent,i=n.propertyName,s=n.name,L.Debug.assert(i===e||s===e),(i?i!==e:r.parent.moduleSpecifier)?t:o.getExportSpecifierLocalTargetSymbol(n);var r,i,s}function z(e,t,n,o){t=o.referenceAdder(t,n);if(o.options.implementations){var n=e,r=t;if(L.isDeclarationName(n)&&function(e){if(e)if(L.isVariableLike(e)){if(e.initializer)return 1;var t;if(226===e.kind)return(t=function(e){if(e.parent&&e.parent.parent&&208===e.parent.parent.kind)return L.Debug.assert(227===e.parent.kind),e.parent.parent}(e))&&L.hasModifier(t,2)}else{if(L.isFunctionLike(e))return e.body||L.hasModifier(e,2);switch(e.kind){case 229:case 199:case 232:case 233:return 1}}}(n.parent))r(n.parent);else if(71===n.kind){262===n.parent.kind&&a(n,o.checker,r);var i=function e(t){if(t&&t.parent)return 201===t.kind&&259===t.parent.kind&&L.isClassLike(t.parent.parent)?t.parent.parent:71===t.kind||179===t.kind?e(t.parent):void 0}(n);if(i)return void r(i);i=function(e){for(var t=void 0;e;)L.isTypeNode(e)&&(t=e),e=e.parent;return t}(n);i&&o.markSeenContainingTypeReference(i)&&(n=i.parent,L.isVariableLike(n)&&n.type===i&&n.initializer&&s(n.initializer)?r(n.initializer):L.isFunctionLike(n)&&n.type===i&&n.body?207===(o=n.body).kind?L.forEachReturnStatement(o,function(e){e.expression&&s(e.expression)&&r(e.expression)}):s(o)&&r(o):L.isAssertionExpression(n)&&s(n.expression)&&r(n.expression))}}else t(e)}function s(e){switch(e.kind){case 185:return s(e.expression);case 187:case 186:case 178:case 199:case 177:return!0;default:return!1}}function X(n,o,r,i,s){function t(e){var t;e&&(e=s.getTypeAtLocation(e))&&((t=s.getPropertyOfType(e,o))&&r.push.apply(r,s.getRootSymbols(t)),i.set(n.escapedName,n),X(e.symbol,o,r,i,s))}n&&!i.has(n.escapedName)&&96&n.flags&&L.forEach(n.getDeclarations(),function(e){L.isClassLike(e)?(t(L.getClassExtendsHeritageClauseElement(e)),L.forEach(L.getClassImplementsHeritageClauseElements(e),t)):230===e.kind&&L.forEach(L.getInterfaceBaseTypeNodes(e),t)})}function $(e,t){var n,o=e.parent,t=t.getContextualType(o),r=144===(o=e).name.kind?(e=o.name.expression,L.isStringOrNumericLiteral(e)?e.text:void 0):L.getTextOfIdentifierOrLiteral(o.name);if(r&&t)return n=[],(e=t.getProperty(r))&&n.push(e),65536&t.flags&&L.forEach(t.types,function(e){e=e.getProperty(r);e&&n.push(e)}),n}function a(e,t,n){e=t.getSymbolAtLocation(e),t=t.getShorthandAssignmentValueSymbol(e.valueDeclaration);if(t)for(var o=0,r=t.getDeclarations();o<r.length;o++){var i=r[o];1&L.getMeaningFromDeclaration(i)&&n(i)}}function h(e,t,n){L.forEachChild(e,function(e){e.kind===t&&n(e),h(e,t,n)})}var Y,t,q;Y=L.FindAllReferences||(L.FindAllReferences={}),(t=Y.Core||(Y.Core={})).getReferencedSymbolsForNode=function(e,t,n,o,r){if(void 0===r&&(r={}),265!==e.kind){if(!r.implementations){var i=function(e,t,n){if(L.isTypeKeyword(e.kind)){for(var o=e.kind,r=n,i=[],s=0,a=t;s<a.length;s++)for(var l=a[s],c=(r.throwIfCancellationRequested(),_=h=g=p=d=u=c=void 0,l),u=o,d=L.tokenToString(o),p=i,g=0,h=W(c,d,c);g<h.length;g++){var _=h[g],_=L.getTouchingPropertyName(c,_,!0);_.kind===u&&p.push(Y.nodeEntry(_))}return i.length?[{definition:{type:"keyword",node:i[0].node},references:i}]:void 0}if(L.isLabelName(e))return L.isJumpStatementTarget(e)?(m=L.getTargetLabel(e.parent,e.text))&&G(m.parent,m):G(e.parent,e);if(L.isThis(e)){var m=e,f=n,y=L.getThisContainer(m,!1),k=32;switch(y.kind){case 151:case 150:if(L.isObjectLiteralMethod(y))break;case 149:case 148:case 152:case 153:case 154:k&=L.getModifierFlags(y),y=y.parent;break;case 265:if(L.isExternalModule(y))return;case 228:case 186:break;default:return}var b=[];return 265===y.kind?L.forEach(t,function(e){f.throwIfCancellationRequested(),v(e,e,W(e,"this"),b)}):v(t=y.getSourceFile(),y,W(t,"this",y),b),[{definition:{type:"this",node:m},references:b}];function v(o,r,e,i){L.forEach(e,function(e){var t=L.getTouchingWord(o,e,!1);if(t&&L.isThis(t)){var n=L.getThisContainer(t,!1);switch(r.kind){case 186:case 228:r.symbol===n.symbol&&i.push(Y.nodeEntry(t));break;case 151:case 150:L.isObjectLiteralMethod(r)&&r.symbol===n.symbol&&i.push(Y.nodeEntry(t));break;case 199:case 229:n.parent&&r.symbol===n.parent.symbol&&(32&L.getModifierFlags(n))===k&&i.push(Y.nodeEntry(t));break;case 265:265!==n.kind||L.isExternalModule(n)||i.push(Y.nodeEntry(t))}}})}}else if(97===e.kind){var n=e,T=L.getSuperContainer(n,!1);if(T){var E=32;switch(T.kind){case 149:case 148:case 151:case 150:case 152:case 153:case 154:E&=L.getModifierFlags(T),T=T.parent;break;default:return}for(var S=[],C=T.getSourceFile(),x=0,B=W(C,"super",T);x<B.length;x++){var A,I=B[x],I=L.getTouchingWord(C,I,!1);I&&97===I.kind&&(A=L.getSuperContainer(I,!1))&&(32&L.getModifierFlags(A))===E&&A.parent.symbol===T.symbol&&S.push(Y.nodeEntry(I))}return[{definition:{type:"symbol",symbol:T.symbol,node:n},references:S}]}}}(e,n,o);if(i)return i}var i=t.getTypeChecker(),s=i.getSymbolAtLocation(e);if(s)if(1536&s.flags&&function(e){if(9===e.kind)switch(e.parent.kind){case 233:case 248:case 238:case 244:return 1;case 181:return L.isRequireCall(e.parent,!1)||L.isImportCall(e.parent);default:return}}(e)){var a=s;var l=n;L.Debug.assert(!!a.valueDeclaration);for(var c=Y.findModuleReferences(t,l,a).map(function(e){return"import"===e.kind?{type:"node",node:e.literal}:{type:"span",fileName:e.referencingFile.fileName,textSpan:L.createTextSpanFromRange(e.ref)}}),u=0,d=a.declarations;u<d.length;u++){var p=d[u];switch(p.kind){case 265:break;case 233:c.push({type:"node",node:p.name});break;default:L.Debug.fail("Expected a module symbol to be declared by a SourceFile or ModuleDeclaration.")}}return[{definition:{type:"symbol",symbol:a,node:a.valueDeclaration},references:c}];return}else{t=s;l=e;a=n;var g=o;var h=r;s=s,k=i,_=(m=l).parent,t=L.isExportSpecifier(_)?j(m,s,_,k):L.isImportSpecifier(_)&&_.propertyName===m?k.getImmediateAliasedSymbol(s):s;var _=function(e,t){if(t)do{for(var n=e,o=0,r=t;o<r.length;o++){var i=r[o],i=L.getMeaningFromDeclaration(i);i&e&&(e|=i)}}while(e!==n);return e}(L.getMeaningFromLocation(l),t.declarations),m=[],f=new q(a,123===l.kind,i,g,_,h,m);if(79===l.kind)z(l,t,l,f),M(l,t,{exportingModuleSymbol:t.parent,exportKind:1},f);else{var y=f.createSearch(l,t,void 0,{allSearchSymbols:function(e,t,r,i){var s=[e],n=L.getContainingObjectLiteralElement(t);{var o;n&&(262!==n.kind&&(o=U(t,r))&&s.push(o),L.forEach($(n,r),function(e){L.addRange(s,r.getRootSymbols(e))}),o=r.getShorthandAssignmentValueSymbol(t.parent))&&s.push(o)}e.valueDeclaration&&146===e.valueDeclaration.kind&&L.isParameterPropertyDeclaration(e.valueDeclaration)&&L.addRange(s,r.getSymbolsOfParameterPropertyDeclaration(e.valueDeclaration,e.name));n=V(e,r);return n&&(s.push(n),a(n)),a(e),s;function a(e){for(var t=0,n=r.getRootSymbols(e);t<n.length;t++){var o=n[t];o!==e&&s.push(o),!i&&o.parent&&96&o.parent.flags&&X(o.parent,o.name,s,L.createSymbolTable(),r)}}}(t,l,i,h.implementations)}),k=function(e){var t=e.declarations,n=e.flags,o=e.parent,r=e.valueDeclaration;if(r&&(186===r.kind||199===r.kind))return r;if(t){if(8196&n)return(r=L.find(t,function(e){return L.hasModifier(e,8)}))?L.getAncestor(r,229):void 0;if(!H(e)){var i,n=o&&!(262144&e.flags);if(!n||1536&o.flags&&L.isExternalModuleSymbol(o)&&!o.globalExports){for(var s=0,a=t;s<a.length;s++){var l=a[s],l=L.getContainerNode(l);if(i&&i!==l)return;if(!l||265===l.kind&&!L.isExternalOrCommonJsModule(l))return;i=l}return n?i.getSourceFile():i}}}}(t);if(k)K(k,k.getSourceFile(),y,f);else for(var b=0,v=f.sourceFiles;b<v.length;b++){var T=v[b];f.cancellationToken.throwIfCancellationRequested(),F(T,y,f)}}return m;return}else if(r.implementations||9!==e.kind)return void 0;else{var E=e;var S=o;for(var C=[],x=0,B=n;x<B.length;x++)for(var A=B[x],I=(S.throwIfCancellationRequested(),W(A,E.text)),D=(P=R=O=w=N=D=void 0,A),N=E.text,w=C,O=0,R=I;O<R.length;O++){var P=R[O],P=L.getTouchingWord(D,P,!1);P&&9===P.kind&&P.text===N&&w.push(Y.nodeEntry(P,!0))}return[{definition:{type:"string",node:E},references:C}];return}}},e.prototype.getImportSearches=function(e,t){return this.importTracker||(this.importTracker=Y.createImportTracker(this.sourceFiles,this.checker,this.cancellationToken)),this.importTracker(e,t,this.options.isForRename)},e.prototype.createSearch=function(o,t,e,n){var r=(n=void 0===n?{}:n).text,r=void 0===r?L.stripQuotes(L.unescapeLeadingUnderscores((L.getLocalSymbolForExportDefault(t)||t).escapedName)):r,n=n.allSearchSymbols,i=void 0===n?void 0:n,n=L.escapeLeadingUnderscores(r),s=this.options.implementations&&function(e,t){var n=L.isRightSideOfPropertyAccess(n=o)&&n.parent;if(n){t=t.getTypeAtLocation(n.expression);if(t)return t.symbol&&96&t.symbol.flags&&t.symbol!==e.parent?[t.symbol]:196608&t.flags?function e(t,n){void 0===n&&(n=[]);for(var o=0,r=t.types;o<r.length;o++){var i=r[o];i.symbol&&96&i.symbol.getFlags()&&n.push(i.symbol),196608&i.getFlags()&&e(i,n)}return n}(t):void 0}}(t,this.checker);return{location:o,symbol:t,comingFrom:e,text:r,escapedText:n,parents:s,includes:function(e){return i?L.contains(i,e):e===t}}},e.prototype.referenceAdder=function(e,t){var n=L.getSymbolId(e),o=this.symbolIdToReferences[n];return o||(o=this.symbolIdToReferences[n]=[],this.result.push({definition:{type:"symbol",symbol:e,node:t},references:o})),function(e){return o.push(Y.nodeEntry(e))}},e.prototype.addStringOrCommentReference=function(e,t){this.result.push({definition:void 0,references:[{type:"span",fileName:e,textSpan:t}]})},e.prototype.markSearchedSymbol=function(e,t){e=L.getNodeId(e),t=L.getSymbolId(t),e=this.sourceFileToSeenSymbols[e]||(this.sourceFileToSeenSymbols[e]=[]);return!e[t]&&(e[t]=!0)},q=e,t.getReferenceEntriesForShorthandPropertyAssignment=a}(ts=ts||{}),function(p){function u(e,t,n){var o,r,i,s=[],a=t.getDeclarations(),e=_(e,t,n),l=e.symbolName,c=e.symbolKind,u=e.containerName;return function(e,t,n,o,r,i){if((p.isNewExpressionTarget(t)||123===t.kind)&&32&e.flags){for(var s=0,a=e.getDeclarations();s<a.length;s++){var l=a[s];if(p.isClassLike(l))return d(l.members,!0,n,o,r,i)}p.Debug.fail("Expected declaration to have at least one class-like declaration")}}(t,n,c,l,u,s)||(e=t,t=n,n=c,o=l,r=u,i=s,(p.isCallExpressionTarget(t)||p.isNewExpressionTarget(t)||p.isNameOfFunctionDeclaration(t))&&d(e.declarations,!1,n,o,r,i))||p.forEach(a,function(e){s.push(h(e,c,l,u))}),s;function d(e,t,n,o,r,i){if(!e)return!1;for(var s,a=[],l=0,c=e;l<c.length;l++){var u=c[l];(t?152===u.kind:g(u))&&(a.push(u),u.body)&&(s=u)}return!!a.length&&(i.push(h(s||p.lastOrUndefined(a),n,o,r)),!0)}}function g(e){switch(e.kind){case 152:case 228:case 151:case 150:return 1;default:return}}function h(e,t,n,o){return d(p.getNameOfDeclaration(e)||e,t,n,o)}function d(e,t,n,o){var r=e.getSourceFile();return{fileName:r.fileName,textSpan:p.createTextSpanFromNode(e,r),kind:t,name:n,containerKind:void 0,containerName:o}}function _(e,t,n){return{symbolName:e.symbolToString(t),symbolKind:p.SymbolDisplay.getSymbolKind(e,t,n),containerName:t.parent?e.symbolToString(t.parent,n):""}}function m(e,t){for(var n=0,o=e;n<o.length;n++){var r=o[n];if(r.pos<=t&&t<=r.end)return r}}function f(e,t){return{fileName:t,textSpan:p.createTextSpanFromBounds(0,0),kind:"script",name:e,containerName:void 0,containerKind:void 0}}var e;(e=p.GoToDefinition||(p.GoToDefinition={})).getDefinitionAtPosition=function(e,t,n){var o=m(t.referencedFiles,n);if(o&&(r=p.tryResolveScriptReference(e,t,o)))return[f(o.fileName,r.fileName)];o=m(t.typeReferenceDirectives,n);if(o)return(r=e.getResolvedTypeReferenceDirectives().get(o.fileName))&&r.resolvedFileName&&[f(o.fileName,r.resolvedFileName)];var r,i=p.getTouchingPropertyName(t,n,!0);if(i!==t){if(p.isJumpStatementTarget(i))return o=i.text,(r=p.getTargetLabel(i.parent,o))?[d(r,"label",o,void 0)]:void 0;var s=e.getTypeChecker(),n=function(e,t){t=function e(t){return p.isRightSideOfPropertyAccess(t)?e(t.parent):t}(t);var t=(n=t.parent)&&p.isCallLikeExpression(n)&&p.getInvokedExpression(n)===t&&n,n=t&&e.getResolvedSignature(t);if(n){e=n.declaration;if(e&&g(e))return e}}(s,i);if(n)return[(o=(t=_(t=s,(r=n).symbol,r)).symbolName,h(r,t.symbolKind,o,t.containerName))];var a,l,c,e=s.getSymbolAtLocation(i);if(e){if(2097152&e.flags&&function(e,t){if(71===e.kind){if(e.parent===t)return 1;switch(t.kind){case 239:case 237:return 1;case 242:return 241===t.parent.kind;default:return}}}(i,e.declarations[0])&&(n=s.getAliasedSymbol(e)).declarations&&(e=n),262===i.parent.kind)return(o=s.getShorthandAssignmentValueSymbol(e.valueDeclaration))?(t=o.getDeclarations(),a=p.SymbolDisplay.getSymbolKind(s,o,i),l=s.symbolToString(o),c=s.symbolToString(e.parent,i),p.map(t,function(e){return h(e,a,l,c)})):[];if(p.isPropertyName(i)&&p.isBindingElement(i.parent)&&p.isObjectBindingPattern(i.parent.parent)&&i===(i.parent.propertyName||i.parent.name)){n=s.getTypeAtLocation(i.parent.parent);if(n){o=p.getPropertySymbolsFromType(n,i);if(o)return p.flatMap(o,function(e){return u(s,e,i)})}}t=p.getContainingObjectLiteralElement(i);return t&&s.getContextualType(t.parent)?p.flatMap(p.getPropertySymbolsFromContextualType(s,t),function(e){return u(s,e,i)}):u(s,e,i)}}},e.getTypeDefinitionAtPosition=function(t,e,n){var o=p.getTouchingPropertyName(e,n,!0);if(o!==e){n=t.getSymbolAtLocation(o);if(n){var r,e=t.getTypeOfSymbolAtLocation(n,o);if(e)return 65536&e.flags&&!(16&e.flags)?(r=[],p.forEach(e.types,function(e){e.symbol&&p.addRange(r,u(t,e.symbol,o))}),r):e.symbol?u(t,e.symbol,o):void 0}}}}(ts=ts||{}),function(g){function n(e,t){if(e)for(var n=0;n<e.length;n++)if(g.indexOf(e,e[n])===n){var o=t(e[n],n);if(o)return}}var e,t,o,r;e=g.JsDoc||(g.JsDoc={}),r=["augments","author","argument","borrows","class","constant","constructor","constructs","default","deprecated","description","event","example","extends","field","fileOverview","function","ignore","inner","lends","link","memberOf","method","name","namespace","param","private","prop","property","public","requires","returns","see","since","static","throws","type","typedef","version"],e.getJsDocCommentsFromDeclarations=function(e){var t=[];return n(e,function(e){g.forEach(g.getAllJSDocs(e),function(e){e.comment&&(t.length&&t.push(g.lineBreakPart()),t.push(g.textPart(e.comment)))})}),t},e.getJsDocTagsFromDeclarations=function(e){var r=[];return n(e,function(e){for(var t=0,n=g.getJSDocTags(e);t<n.length;t++){var o=n[t];276===o.kind&&r.push({name:o.tagName.text,text:o.comment})}}),r},e.getJSDocTagNameCompletions=function(){return t=t||g.map(r,function(e){return{name:e,kind:"keyword",kindModifiers:"",sortText:"0"}})},e.getJSDocTagCompletions=function(){return o=o||g.map(r,function(e){return{name:"@"+e,kind:"keyword",kindModifiers:"",sortText:"0"}})},e.getJSDocParameterNameCompletions=function(n){var o,r,e;return g.isIdentifier(n.name)?(o=n.name.text,e=(r=n.parent).parent,g.isFunctionLike(e)?g.mapDefined(e.parameters,function(e){if(g.isIdentifier(e.name)){var t=e.name.text;if(!r.tags.some(function(e){return e!==n&&g.isJSDocParameterTag(e)&&g.isIdentifier(e.name)&&e.name.escapedText===t})&&(void 0===o||g.startsWith(t,o)))return{name:t,kind:"parameter",kindModifiers:"",sortText:"0"}}}):[]):g.emptyArray},e.getDocCommentTemplateAtPosition=function(e,t,n){if(!(g.isInString(t,n)||g.isInComment(t,n)||g.hasDocComment(t,n))){var o=g.getTokenAtPosition(t,n,!1),r=o.getStart();if(o&&!(r<n)){var i=function(){for(var e=o;e;e=e.parent)switch(e.kind){case 228:case 151:case 152:return{commentOwner:e,parameters:e.parameters};case 229:return{commentOwner:e};case 208:var t=e.declarationList.declarations;return{commentOwner:e,parameters:1===t.length&&t[0].initializer?function(e){for(;185===e.kind;)e=e.expression;switch(e.kind){case 186:case 187:return e.parameters;case 199:for(var t=0,n=e.members;t<n.length;t++){var o=n[t];if(152===o.kind)return o.parameters}}return g.emptyArray}(t[0].initializer):void 0};case 265:return;case 233:return 233===e.parent.kind?void 0:{commentOwner:e};case 194:t=e;return 0===g.getSpecialPropertyAssignmentKind(t)?void 0:{commentOwner:e,parameters:g.isFunctionLike(t.right)?t.right.parameters:g.emptyArray}}}();if(i){var s=i.commentOwner,a=i.parameters;if(!(s.getStart()<n)){var i=t.getLineAndCharacterOfPosition(n),s=t.getLineStarts()[i.line],l=t.text.substr(s,i.character).replace(/\S/i,function(){return" "}),c=g.hasJavaScriptFileExtension(t.fileName),u="";if(a)for(var d=0;d<a.length;d++){var p=a[d].name,p=71===p.kind?p.escapedText:"param"+d;u+=c?l+" * @param {any} "+p+e:l+" * @param "+p+e}s="/**"+e+l+" * ";return{newText:s+e+u+l+" */"+(r===n?e+l:""),caretOffset:s.length}}}}}}}(ts=ts||{}),function(b){var e,t,v;(e=b.JsTyping||(b.JsTyping={})).nodeCoreModuleList=["buffer","querystring","events","http","cluster","zlib","os","https","punycode","repl","readline","vm","child_process","url","dns","net","dgram","fs","path","string_decoder","tls","crypto","stream","util","assert","tty","domain","constants","process","v8","timers","console"],v=b.arrayToSet(e.nodeCoreModuleList),e.loadSafeList=function(t,e){e=b.readConfigFile(e,function(e){return t.readFile(e)});return b.createMapFromTemplate(e.config)},e.loadTypesMap=function(t,e){e=b.readConfigFile(e,function(e){return t.readFile(e)});if(e.config)return b.createMapFromTemplate(e.config.simpleMap)},e.discoverTypings=function(l,c,e,t,n,o,r,i){if(!r||!r.enable)return{cachedTypingPaths:[],newTypingNames:[],filesToWatch:[]};var u=b.createMap(),s=(e=b.mapDefined(e,function(e){e=b.normalizePath(e);if(b.hasJavaScriptFileExtension(e))return e}),[]),r=(r.include&&f(r.include,"Explicitly included types"),r.exclude||[]),a=b.arrayToSet(e,b.getDirectoryPath);a.set(t,!0),a.forEach(function(e,t){y(b.combinePaths(t,"package.json"),s),y(b.combinePaths(t,"bower.json"),s),k(b.combinePaths(t,"bower_components"),s),k(b.combinePaths(t,"node_modules"),s)}),t=e,(a=b.mapDefined(t,function(e){if(b.hasJavaScriptFileExtension(e))return e=b.removeFileExtension(b.getBaseFileName(e.toLowerCase())).replace(/((?:\.|-)min(?=\.|$))|((?:-|\.)\d+)/g,""),n.get(e)})).length&&f(a,"Inferred typings from file names"),b.some(t,function(e){return b.fileExtensionIs(e,".jsx")})&&(c&&c("Inferred 'react' typings due to presence of '.jsx' extension"),m("react")),i&&f(b.deduplicate(i.map(function(e){return v.has(e)?"node":e})),"Inferred typings from unresolved imports"),o.forEach(function(e,t){u.has(t)&&void 0===u.get(t)&&u.set(t,e)});for(var d=0,p=r;d<p.length;d++){var g=p[d];u.delete(g)&&c&&c("Typing for "+g+" is in exclude list, will be ignored.")}var h=[],_=[],e=(u.forEach(function(e,t){void 0!==e?_.push(e):h.push(t)}),{cachedTypingPaths:_,newTypingNames:h,filesToWatch:s});return c&&c("Result: "+JSON.stringify(e)),e;function m(e){u.has(e)||u.set(e,void 0)}function f(e,t){c&&c(t+": "+JSON.stringify(e)),b.forEach(e,m)}function y(e,t){l.fileExists(e)&&(t.push(e),t=b.readConfigFile(e,function(e){return l.readFile(e)}).config,f(b.flatMap([t.dependencies,t.devDependencies,t.optionalDependencies,t.peerDependencies],b.getOwnKeys),"Typing names in '"+e+"' dependencies"))}function k(e,t){if(t.push(e),l.directoryExists(e)){t=l.readDirectory(e,[".json"],void 0,void 0,2);c&&c("Searching for typing names in "+e+"; all files: "+JSON.stringify(t));for(var n=[],o=0,r=t;o<r.length;o++){var i,s=r[o],s=b.normalizePath(s),a=b.getBaseFileName(s);"package.json"!==a&&"bower.json"!==a||(i=b.readConfigFile(s,function(e){return l.readFile(e)}).config,"package.json"===a&&i._requiredBy&&0===b.filter(i._requiredBy,function(e){return"#"===e[0]||"/"===e}).length)||!i.name||((a=i.types||i.typings)?(a=b.getNormalizedAbsolutePath(a,b.getDirectoryPath(s)),c&&c("    Package '"+i.name+"' provides its own types."),u.set(i.name,a)):n.push(i.name))}f(n,"    Found package names")}}},(t=e.PackageNameValidationResult||(e.PackageNameValidationResult={}))[t.Ok=0]="Ok",t[t.ScopedPackagesNotSupported=1]="ScopedPackagesNotSupported",t[t.EmptyName=2]="EmptyName",t[t.NameTooLong=3]="NameTooLong",t[t.NameStartsWithDot=4]="NameStartsWithDot",t[t.NameStartsWithUnderscore=5]="NameStartsWithUnderscore",t[t.NameContainsNonURISafeCharacters=6]="NameContainsNonURISafeCharacters",e.validatePackageName=function(e){return e?214<e.length?3:46===e.charCodeAt(0)?4:95===e.charCodeAt(0)?5:/^@[^/]+\/[^/]+$/.test(e)?1:encodeURIComponent(e)!==e?6:0:2},e.renderPackageNameValidationFailure=function(e,t){switch(e){case 2:return"Package name '"+t+"' cannot be empty";case 3:return"Package name '"+t+"' should be less than 214 characters";case 4:return"Package name '"+t+"' cannot start with '.'";case 5:return"Package name '"+t+"' cannot start with '_'";case 1:return"Package '"+t+"' is scoped and currently is not supported";case 6:return"Package name '"+t+"' contains non URI safe characters";case 0:throw b.Debug.fail();default:b.Debug.assertNever(e)}}}(ts=ts||{}),function(f){function r(e,t,n){var o=f.getTextOfIdentifierOrLiteral(e);return void 0!==o?(n&&t.unshift(o),!0):179===e.kind&&(o=e,n&&t.unshift(o.name.text),r(o.expression,t,!0))}function y(e){var t=[],n=f.getNameOfDeclaration(e);if(144!==n.kind||r(n.expression,t,!1)){for(e=f.getContainerNode(e);e;){if(!function(e,t){if(e){e=f.getNameOfDeclaration(e);if(e){var n=f.getTextOfIdentifierOrLiteral(e);if(void 0===n)return 144===e.kind&&r(e.expression,t,!0);t.unshift(n)}}return 1}(e,t))return;e=f.getContainerNode(e)}return t}}function l(e,t){return e.matchKind-t.matchKind||f.compareStringsCaseInsensitive(e.name,t.name)||f.compareStrings(e.name,t.name)}function c(e){var t=e.declaration,n=f.getContainerNode(t),o=n&&f.getNameOfDeclaration(n);return{name:e.name,kind:f.getNodeKind(t),kindModifiers:f.getNodeModifiers(t),matchKind:f.PatternMatchKind[e.matchKind],isCaseSensitive:e.isCaseSensitive,fileName:e.fileName,textSpan:f.createTextSpanFromNode(t),containerName:o?o.text:"",containerKind:o?f.getNodeKind(n):""}}(f.NavigateTo||(f.NavigateTo={})).getNavigateToItems=function(e,h,t,n,o,r){for(var _=f.createPatternMatcher(n),m=[],i=function(g){if(t.throwIfCancellationRequested(),r&&f.fileExtensionIs(g.fileName,".d.ts"))return"continue";f.forEachEntry(g.getNamedDeclarations(),function(e,t){var n=_,o=t,t=e,r=h,i=g.fileName,s=m,a=n.getMatchesForLastSegmentOfPattern(o);if(a)for(var l=0,c=t;l<c.length;l++){var u,d,p=c[l];!function(e,t){switch(e.kind){case 239:case 242:case 237:var n=t.getSymbolAtLocation(e.name),o=t.getAliasedSymbol(n);return n.escapedName!==o.escapedName;default:return 1}}(p,r)||(d=a,n.patternContainsDots&&!(d=n.getMatches(y(p),o)))||(u=function(e){f.Debug.assert(0<e.length);for(var t=f.PatternMatchKind.camelCase,n=0,o=e;n<o.length;n++){var r=o[n].kind;r<t&&(t=r)}return t}(d),d=function(e){f.Debug.assert(0<e.length);for(var t=0,n=e;t<n.length;t++)if(!n[t].isCaseSensitive)return!1;return!0}(d),s.push({name:o,fileName:i,matchKind:u,isCaseSensitive:d,declaration:p}))}})},s=0,a=e;s<a.length;s++)i(a[s]);return m.sort(l),(m=void 0!==o?m.slice(0,o):m).map(c)}}(ts=ts||{}),function(h){function o(){I=[],B=C=x=void 0,D=[]}function c(e){return e.getText(x)}function i(e){return e.node.kind}function t(e,t){e.children?e.children.push(t):e.children=[t]}function s(e){h.Debug.assert(!I.length);var t={node:e,additionalNodes:void 0,parent:void 0,children:void 0,indent:0};B=t;for(var n=0,o=e.statements;n<o.length;n++)k(o[n]);return f(),h.Debug.assert(!B&&!I.length),t}function _(e){t(B,n(e))}function n(e){return{node:e,additionalNodes:void 0,parent:B,children:void 0,indent:B.indent+1}}function m(e){e=n(e);t(B,e),I.push(B),B=e}function f(){B.children&&(function a(e){var l=h.createMap();h.filterMutate(e,function(e){var t=h.getNameOfDeclaration(e.node),t=t&&c(t);if(!t)return!0;var n=l.get(t);if(!n)return l.set(t,e),!0;if(n instanceof Array){for(var o,r=0,i=n;r<i.length;r++)if(s(o=i[r],e))return!1;return n.push(e),!0}return!s(o=n,e)&&(l.set(t,[o,e]),!0);function s(e,t){return!!function(e,t){return e.kind===t.kind&&(233!==e.kind||n(e,t));function n(e,t){return e.body.kind===t.body.kind&&(233!==e.body.kind||n(e.body,t.body))}}(e.node,t.node)&&(function(e,t){var n;e.additionalNodes=e.additionalNodes||[],e.additionalNodes.push(t.node),t.additionalNodes&&(n=e.additionalNodes).push.apply(n,t.additionalNodes),e.children=h.concatenate(e.children,t.children),e.children&&(a(e.children),u(e.children))}(e,t),!0)}})}(B.children),u(B.children)),B=I.pop()}function y(e,t){m(e),k(t),f()}function k(e){if(C.throwIfCancellationRequested(),e&&!h.isToken(e))switch(e.kind){case 152:var t=e;y(t,t.body);for(var n=0,o=t.parameters;n<o.length;n++){var r=o[n];h.isParameterPropertyDeclaration(r)&&_(r)}break;case 151:case 153:case 154:case 150:h.hasDynamicName(e)||y(e,e.body);break;case 149:case 148:h.hasDynamicName(e)||_(e);break;case 239:t=e,t=(t.name&&_(t),t.namedBindings);if(t)if(240===t.kind)_(t);else for(var i=0,s=t.elements;i<s.length;i++)_(s[i]);break;case 176:case 226:var t=e.name,a=e.initializer;h.isBindingPattern(t)?k(t):a&&function(){switch(a.kind){case 187:case 186:case 199:return 1;default:return}}()?a.name?k(a):(m(e),h.forEachChild(a,k),f()):y(e,a);break;case 187:case 228:case 186:y(e,e.body);break;case 232:m(e);for(var l=0,c=e.members;l<c.length;l++)(g=u=c[l]).name&&144!==g.name.kind&&_(u);f();break;case 229:case 199:case 230:m(e);for(var u,d=0,p=e.members;d<p.length;d++)k(u=p[d]);f();break;case 233:y(e,function e(t){return 233===t.body.kind?e(t.body):t}(e).body);break;case 246:case 237:case 157:case 155:case 156:case 231:_(e);break;default:h.hasJSDocNodes(e)&&h.forEach(e.jsDoc,function(e){h.forEach(e.tags,function(e){283===e.kind&&_(e)})}),h.forEachChild(e,k)}var g}function u(e){e.sort(r)}function r(e,t){var n,o=a(e.node),r=a(t.node);return o&&r?0!==(n=h.compareStringsCaseInsensitive(o,r))?n:i(e)-i(t):o?1:r?-1:i(e)-i(t)}function a(e){if(233===e.kind)return v(e);var t=h.getNameOfDeclaration(e);if(t)return h.unescapeLeadingUnderscores(h.getPropertyNameForPropertyNameNode(t));switch(e.kind){case 186:case 187:case 199:return S(e);case 283:return d(e);default:return}}function l(e){if(233===e.kind)return v(e);var t=h.getNameOfDeclaration(e);if(t){t=c(t);if(0<t.length)return t}switch(e.kind){case 265:var n=e;return h.isExternalModule(n)?'"'+h.escapeString(h.getBaseFileName(h.removeFileExtension(h.normalizePath(n.fileName))))+'"':"<global>";case 187:case 228:case 186:case 229:case 199:return 512&h.getModifierFlags(e)?"default":S(e);case 152:return"constructor";case 156:return"new()";case 155:return"()";case 157:return"[]";case 283:return d(e);default:return"<unknown>"}}function d(e){if(e.name)return e.name.text;e=e.parent&&e.parent.parent;if(e&&208===e.kind&&0<e.declarationList.declarations.length){e=e.declarationList.declarations[0].name;if(71===e.kind)return e.text}return"<typedef>"}function p(e){return{text:l(e.node),kind:h.getNodeKind(e.node),kindModifiers:E(e.node),spans:b(e),childItems:h.map(e.children,p)}}function g(e){return{text:l(e.node),kind:h.getNodeKind(e.node),kindModifiers:E(e.node),spans:b(e),childItems:h.map(e.children,function(e){return{text:l(e.node),kind:h.getNodeKind(e.node),kindModifiers:h.getNodeModifiers(e.node),spans:b(e),childItems:D,indent:0,bolded:!1,grayed:!1}})||D,indent:e.indent,bolded:!1,grayed:!1}}function b(e){var t=[T(e.node)];if(e.additionalNodes)for(var n=0,o=e.additionalNodes;n<o.length;n++){var r=o[n];t.push(T(r))}return t}function v(e){if(h.isAmbientModule(e))return h.getTextOfNode(e.name);var t=[];for(t.push(h.getTextOfIdentifierOrLiteral(e.name));e.body&&233===e.body.kind;)e=e.body,t.push(h.getTextOfIdentifierOrLiteral(e.name));return t.join(".")}function T(e){return 265===e.kind?h.createTextSpanFromBounds(e.getFullStart(),e.getEnd()):h.createTextSpanFromNode(e,x)}function E(e){return e.parent&&226===e.parent.kind&&(e=e.parent),h.getNodeModifiers(e)}function S(e){return e.name&&0<h.getFullWidth(e.name)?h.declarationNameToString(e.name):226===e.parent.kind?h.declarationNameToString(e.parent.name):194===e.parent.kind&&58===e.parent.operatorToken.kind?c(e.parent.left).replace(A,""):261===e.parent.kind&&e.parent.name?c(e.parent.name):512&h.getModifierFlags(e)?"default":h.isClassLike(e)?"<class>":"<function>"}var e,C,x,B,A,I,D;e=h.NavigationBar||(h.NavigationBar={}),A=/\s+/g,I=[],D=[],e.getNavigationBarItems=function(e,t){C=t,x=e;try{return h.map((n=s(e),r=[],function e(t){if(function(e){switch(i(e)){case 229:case 199:case 232:case 230:case 233:case 265:case 231:case 283:return 1;case 152:case 151:case 153:case 154:case 226:return t(e);case 187:case 228:case 186:return function(e){if(e.node.body)switch(i(e.parent)){case 234:case 265:case 151:case 152:return 1;default:return t(e)}}(e);default:return}function t(e){return h.forEach(e.children,function(e){return 226!==(e=i(e))&&176!==e})}}(t)&&(r.push(t),t.children))for(var n=0,o=t.children;n<o.length;n++)e(o[n])}(n),r),g)}finally{o()}var n,r},e.getNavigationTree=function(e,t){C=t,x=e;try{return p(s(e))}finally{o()}}}(ts=ts||{}),function(T){var e,a;e=T.OutliningElementsCollector||(T.OutliningElementsCollector={}),a=new RegExp("^\\s*//\\s*#(end)?region(?:\\s+(.*))?$"),e.collectElements=function(h,_){var m=[],f=0,e=[];(function e(t){if(_.throwIfCancellationRequested(),!(40<f)){if(T.isDeclaration(t)){var n=T.getLeadingCommentRangesOfNode(t,h);if(n){for(var o=-1,r=-1,i=!0,s=0,a=0,l=n;a<l.length;a++){var c=l[a];_.throwIfCancellationRequested(),2===c.kind?(i&&(o=c.pos),i=!1,r=c.end,s++):3===c.kind&&(b(s,o,r),k(c,!1),r=-1,i=!(s=0))}b(s,o,r)}}switch(t.kind){case 207:if(!T.isFunctionBlock(t)){var u=t.parent,d=T.findChildOfKind(t,17,h),p=T.findChildOfKind(t,18,h);if(212===u.kind||215===u.kind||216===u.kind||214===u.kind||211===u.kind||213===u.kind||220===u.kind||260===u.kind){y(u,d,p,v(t),!0);break}if(224===u.kind){var g=u;if(g.tryBlock===t){y(u,d,p,v(t),!0);break}if(g.finallyBlock===t){u=T.findChildOfKind(g,87,h);if(u){y(u,d,p,v(t),!0);break}}}g=T.createTextSpanFromNode(t);m.push({textSpan:g,hintSpan:g,bannerText:"...",autoCollapse:v(t)});break}case 234:u=T.findChildOfKind(t,17,h),d=T.findChildOfKind(t,18,h);y(t.parent,u,d,v(t),!0);break;case 229:case 230:case 232:case 235:p=T.findChildOfKind(t,17,h),g=T.findChildOfKind(t,18,h);y(t,p,g,v(t),!0);break;case 178:u=T.findChildOfKind(t,17,h),d=T.findChildOfKind(t,18,h);y(t,u,d,v(t),!T.isArrayLiteralExpression(t.parent));break;case 177:p=T.findChildOfKind(t,21,h),g=T.findChildOfKind(t,22,h);y(t,p,g,v(t),!T.isArrayLiteralExpression(t.parent))}f++,T.forEachChild(t,e),f--}})(h);for(var t=h.getLineStarts(),n=0;n<t.length;n++){var o,r=t[n],i=t[n+1]-1||h.getEnd(),s=h.text.substring(r,i).match(a);s&&!T.isInComment(h,r)&&(s[1]?(o=e.pop())&&(o.textSpan.length=i-o.textSpan.start,o.hintSpan.length=i-o.textSpan.start,m.push(o)):(r=h.getFullText().indexOf("//",r),o={textSpan:r=T.createTextSpanFromBounds(r,i),hintSpan:r,bannerText:s[2]||"#region",autoCollapse:!1},e.push(o)))}return m.sort(function(e,t){return e.textSpan.start-t.textSpan.start});function y(e,t,n,o,r){e&&t&&n&&(r={textSpan:T.createTextSpanFromBounds(r?t.getFullStart():t.getStart(),n.getEnd()),hintSpan:T.createTextSpanFromNode(e,h),bannerText:"...",autoCollapse:o},m.push(r))}function k(e,t){e&&(e={textSpan:T.createTextSpanFromBounds(e.pos,e.end),hintSpan:T.createTextSpanFromBounds(e.pos,e.end),bannerText:"...",autoCollapse:t},m.push(e))}function b(e,t,n){1<e&&k({kind:2,pos:t,end:n},!1)}function v(e){return T.isFunctionBlock(e)&&187!==e.parent.kind}}}(ts=ts||{}),function(h){var p,e;function _(e,t,n,o){return{kind:e,punctuationStripped:t,isCaseSensitive:n,camelCaseWeight:o}}function o(e){return 0===e.subWordTextChunks.length}function m(e){return 65<=e&&e<=90||!(e<127||!h.isUnicodeIdentifierStart(e,5))&&(e=String.fromCharCode(e))===e.toUpperCase()}function d(e){return 97<=e&&e<=122||!(e<127||!h.isUnicodeIdentifierStart(e,5))&&(e=String.fromCharCode(e))===e.toLowerCase()}function f(e){return 65<=e&&e<=90?e-65+97:e<127?e:String.fromCharCode(e).toLowerCase().charCodeAt(0)}function g(e){return 48<=e&&e<=57}function r(e){for(var t,n=[],o=0,r=0,i=0;i<e.length;i++)m(t=e.charCodeAt(i))||d(t)||g(t)||95===t||36===t?(0===r&&(o=i),r++):0<r&&(n.push(y(e.substr(o,r))),r=0);return 0<r&&n.push(y(e.substr(o,r))),n}function y(e){var t=e.toLowerCase();return{text:e,textLowerCase:t,isLowerCase:e===t,characterSpans:n(e)}}function n(e){return t(e,!1)}function i(e){return t(e,!0)}function t(e,t){for(var n,o,r=[],i=0,s=1;s<e.length;s++){var a=g(e.charCodeAt(s-1)),l=g(e.charCodeAt(s)),c=(u=t,c=s,o=void 0,o=m((n=e).charCodeAt(c-1)),n=m(n.charCodeAt(c)),u?n&&!o:n),u=function(e,t,n,o){if(t&&n!==o&&n+1<e.length){var t=m(e.charCodeAt(n)),r=d(e.charCodeAt(n+1));if(t&&r){for(var i=o;i<n;i++)if(!m(e.charCodeAt(i)))return!1;return!0}}return!1}(e,t,s,i);(k(e.charCodeAt(s-1))||k(e.charCodeAt(s))||a!==l||c||u)&&(b(e,i,s)||r.push(h.createTextSpan(i,s-i)),i=s)}return b(e,i,e.length)||r.push(h.createTextSpan(i,e.length-i)),r}function k(e){switch(e){case 33:case 34:case 35:case 37:case 38:case 39:case 40:case 41:case 42:case 44:case 45:case 46:case 47:case 58:case 59:case 63:case 64:case 91:case 92:case 93:case 95:case 123:case 125:return 1}}function b(e,t,n){for(var o=t;o<n;o++){var r=e.charCodeAt(o);if(!k(r)||95===r||36===r)return}return 1}(e=p=h.PatternMatchKind||(h.PatternMatchKind={}))[e.exact=0]="exact",e[e.prefix=1]="prefix",e[e.substring=2]="substring",e[e.camelCase=3]="camelCase",h.createPatternMatcher=function(e){var n=h.createMap(),s=(e=e.trim()).split(".").map(function(e){return{totalTextChunk:y(e=e.trim()),subWordTextChunks:r(e)}}),t=0===s.length||h.forEach(s,o);return{getMatches:function(e,t){if(!a(t)){t=c(t,h.lastOrUndefined(s));if(t&&!(s.length-1>(e=e||[]).length)){for(var n=t,o=s.length-2,r=e.length-1;0<=o;--o,--r){var i=s[o],i=c(e[r],i);if(!i)return;h.addRange(n,i)}return n}}},getMatchesForLastSegmentOfPattern:function(e){if(!a(e))return c(e,h.lastOrUndefined(s))},patternContainsDots:1<s.length};function a(e){return t||!e}function u(e){var t=n.get(e);return t||n.set(e,t=i(e)),t}function l(e,t,n){var o=function(e,t){for(var n=e.length-t.length,o=0;o<=n;o++)if(function(e,t,n){for(var o=0;o<t.length;o++)if(f(e.charCodeAt(o+n))!==t.charCodeAt(o))return;return 1}(e,t,o))return o;return-1}(e,t.textLowerCase);if(0===o)return t.text.length===e.length?_(p.exact,n,e===t.text):_(p.prefix,n,h.startsWith(e,t.text));var r=t.isLowerCase;if(r){if(0<o)for(var i=0,s=u(e);i<s.length;i++){var a=s[i];if(g(e,a,t.text,!0))return _(p.substring,n,g(e,a,t.text,!1))}}else if(0<e.indexOf(t.text))return _(p.substring,n,!0);if(!r&&0<t.characterSpans.length){var l=u(e),c=d(e,l,t,!1);if(void 0!==c)return _(p.camelCase,n,!0,c);if(void 0!==(c=d(e,l,t,!0)))return _(p.camelCase,n,!1,c)}return r&&t.text.length<e.length&&0<o&&m(e.charCodeAt(o))?_(p.substring,n,!1):void 0}function c(e,t){if(!function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(32===n||42===n)return 1}}(t.totalTextChunk.text)){var n=l(e,t.totalTextChunk,!1);if(n)return[n]}for(var o=void 0,r=0,i=t.subWordTextChunks;r<i.length;r++){var s=l(e,i[r],!0);if(!s)return;(o=o||[]).push(s)}return o}function g(e,t,n,o,r){var i=r?r.start:0,s=(r||n).length;if(s>t.length)return!1;if(o)for(var a=0;a<s;a++){var l=n.charCodeAt(i+a),c=e.charCodeAt(t.start+a);if(f(l)!==f(c))return!1}else for(a=0;a<s;a++)if((l=n.charCodeAt(i+a))!==(c=e.charCodeAt(t.start+a)))return!1;return!0}function d(e,t,n,o){for(var r,i=n.characterSpans,s=0,a=0,l=void 0,c=void 0;;){if(a===i.length)return r=0,c&&(r+=1),0===l&&(r+=2),r;if(s===t.length)return;for(var u=t[s],d=!1;a<i.length;a++){var p=i[a];if(d&&(!m(n.text.charCodeAt(i[a-1].start))||!m(n.text.charCodeAt(i[a].start))))break;if(!g(e,u,n.text,o,p))break;d=!0,l=void 0===l?s:l,c=void 0===c||c,u=h.createTextSpan(u.start+p.length,u.length-p.length)}d||void 0===c||(c=!1),s++}}},h.breakIntoCharacterSpans=n,h.breakIntoWordSpans=i}(ts=ts||{}),function(v){v.preProcessFile=function(n,e,t){void 0===e&&(e=!0),void 0===t&&(t=!1);var o,r=[],i=[],s=[],a=!1,l=0,c=!1;function u(){var e=v.scanner.scan();return 17===e?l++:18===e&&l--,e}function d(){var e=v.scanner.getTokenValue(),t=v.scanner.getTokenPos();return{fileName:e,pos:t,end:t+e.length}}function p(){s.push(d()),g()}function g(){0===l&&(c=!0)}function h(e){return 132===(e?u():v.scanner.getToken())&&(19===u()&&9===u()&&p(),1)}if(e){for(v.scanner.setText(n),u();1!==v.scanner.getToken();)(124===v.scanner.getToken()?(128===u()&&9===u()&&(o=o||[]).push({ref:d(),depth:l}),1):function(){var e=v.scanner.getToken();if(91===e){if(19===(e=u())){if(9===(e=u()))p()}else{if(9===e)return p(),1;if(71===e||v.isKeyword(e))if(140===(e=u())){if(9===(e=u()))return p(),1}else if(58===e){if(h(!0))return 1}else{if(26!==e)return 1;e=u()}if(17===e){for(e=u();18!==e&&1!==e;)e=u();18===e&&140===(e=u())&&9===(e=u())&&p()}else 39!==e||118!==(e=u())||71!==(e=u())&&!v.isKeyword(e)||140!==(e=u())||9!==(e=u())||p()}return 1}}())||function(){var e=v.scanner.getToken();if(84===e){if(g(),17===(e=u())){for(e=u();18!==e&&1!==e;)e=u();18===e&&140===(e=u())&&9===(e=u())&&p()}else if(39===e)140===(e=u())&&9===(e=u())&&p();else if(91===e&&(71===(e=u())||v.isKeyword(e))&&58===(e=u())&&h(!0));return 1}}()||t&&(h(!1)||function(){var e=v.scanner.getToken();if(71===e&&"define"===v.scanner.getTokenValue()){if(19===(e=u())){if(9===(e=u())){if(26!==(e=u()))return 1;e=u()}if(21===e)for(e=u();22!==e&&1!==e;)9===e&&p(),e=u()}return 1}}())||u();v.scanner.setText(void 0)}if(e=v.getLeadingCommentRanges(n,0),v.forEach(e,function(e){var t=n.substring(e.pos,e.end),t=v.getFileReferenceFromReferencePath(t,e);t&&(a=t.isNoDefaultLib,e=t.fileReference)&&(t.isTypeReferenceDirective?i:r).push(e)}),c){if(o)for(var _=0,m=o;_<m.length;_++){var f=m[_];s.push(f.ref)}return{referencedFiles:r,typeReferenceDirectives:i,importedFiles:s,isLibFile:a,ambientExternalModules:void 0}}var y=void 0;if(o)for(var k=0,b=o;k<b.length;k++)0===(f=b[k]).depth?(y=y||[]).push(f.ref.fileName):s.push(f.ref);return{referencedFiles:r,typeReferenceDirectives:i,importedFiles:s,isLibFile:a,ambientExternalModules:y}}}(ts=ts||{}),function(a){function l(e,t,n,o,r,i){return{canRename:!0,kind:n,displayName:e,localizedErrorMessage:void 0,fullDisplayName:t,kindModifiers:o,triggerSpan:(n=i,t=(e=r).getStart(n),n=e.getWidth(n),9===e.kind&&(t+=1,n-=2),a.createTextSpan(t,n))}}function c(e){return{canRename:!1,localizedErrorMessage:a.getLocaleSpecificMessage(e),displayName:void 0,fullDisplayName:void 0,kind:void 0,kindModifiers:void 0,triggerSpan:void 0}}(a.Rename||(a.Rename={})).getRenameInfo=function(e,t,n,o,r){var i=a.memoize(function(){return n(a.normalizePath(t))}),r=a.getTouchingWord(o,r,!0);return(r&&function(e){switch(e.kind){case 71:case 9:case 99:return 1;case 8:return a.isLiteralNameOfPropertyDeclarationOrIndexAccess(e);default:return}}(r)?function(e,t,n,o){var r=t.getSymbolAtLocation(e);if(r){var i,s=r.getDeclarations();if(s&&0<s.length)return a.some(s,o)?c(a.Diagnostics.You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library):!(71===e.kind&&79===e.originalKeywordKind&&1536&r.parent.flags)&&(i=a.stripQuotes(a.getDeclaredName(t,r,e)),s=a.SymbolDisplay.getSymbolKind(t,r,e))?l(i,t.getFullyQualifiedName(r),s,a.SymbolDisplay.getSymbolModifiers(r),e,n):void 0}else if(9===e.kind)return o(e)?c(a.Diagnostics.You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library):l(i=a.stripQuotes(e.text),i,"var","",e,n)}(r,e,o,function(e){return!!t&&(e=e.getSourceFile(),n(a.normalizePath(e.fileName))===i())}):void 0)||c(a.Diagnostics.You_cannot_rename_this_element)}}(ts=ts||{}),function(f){function i(e,t,n){if(f.isCallOrNewExpression(e.parent)){var o=e.parent,i=void 0,r=void 0;if(27===e.kind||19===e.kind)s=e,a=o.getChildren(n),s=a.indexOf(s),f.Debug.assert(0<=s&&a.length>s+1),i=a[s+1],f.Debug.assert(void 0!==i),r=0;else{if(!(i=f.findContainingList(e)))return;r=function(e){for(var t=0,n=0,o=i.getChildren();n<o.length;n++){var r=o[n];if(r===e)break;26!==r.kind&&t++}return t}(e)}a=o.typeArguments&&o.typeArguments.pos===i.pos?0:1,s=i.getChildren(),p=f.countWhere(s,function(e){return 26!==e.kind}),0<s.length&&26===f.lastOrUndefined(s).kind&&p++;return 0!==r&&f.Debug.assertLessThan(r,p),{kind:a,invocation:o,argumentsSpan:(o=n,d=(l=i).getFullStart(),o=f.skipTrivia(o.text,l.getEnd(),!1),f.createTextSpan(d,o-d)),argumentIndex:r,argumentCount:p}}var s,a,l,c,u,d,p;return 13!==e.kind||183!==e.parent.kind?14===e.kind&&183===e.parent.parent.kind?(c=(u=e.parent).parent,f.Debug.assert(196===u.kind),g(c,r=f.isInsideTemplateLiteral(e,t)?0:1,n)):205===e.parent.kind&&183===e.parent.parent.parent.kind?(c=(u=(l=e.parent).parent).parent,f.Debug.assert(196===u.kind),16!==e.kind||f.isInsideTemplateLiteral(e,t)?g(c,(o=u.templateSpans.indexOf(l),d=e,p=t,f.Debug.assert(p>=d.getStart(),"Assumed 'position' could not occur before node."),r=f.isTemplateLiteralKind(d.kind)?f.isInsideTemplateLiteral(d,p)?0:o+2:o+1),n):void 0):e.parent&&f.isJsxOpeningLikeElement(e.parent)?(c=e.parent.attributes.getFullStart(),u=f.skipTrivia(n.text,e.parent.attributes.getEnd(),!1),{kind:3,invocation:e.parent,argumentsSpan:f.createTextSpan(c,u-c),argumentIndex:0,argumentCount:1}):void 0:f.isInsideTemplateLiteral(e,t)?g(e.parent,0,n):void 0}function g(e,t,n){var o,r,i=13===e.template.kind?1:e.template.templateSpans.length+1;return 0!==t&&f.Debug.assertLessThan(t,i),{kind:2,invocation:e,argumentsSpan:(n=n,e=(e=e).template,o=e.getStart(),r=e.getEnd(),196===e.kind&&0===f.lastOrUndefined(e.templateSpans).literal.getFullWidth()&&(r=f.skipTrivia(n.text,r,!1)),f.createTextSpan(o,r-o)),argumentIndex:t,argumentCount:i}}function y(e,t,n){for(var o=e;265!==o.kind;o=o.parent){if(f.isFunctionBlock(o))return;(o.pos<o.parent.pos||o.end>o.parent.end)&&f.Debug.fail("Node of kind "+o.kind+" is not a subspan of its parent of kind "+o.parent.kind);var r=i(o,t,n);if(r)return r}}function k(e,t,n,s){var o=n.argumentCount,r=n.argumentsSpan,a=n.invocation,i=n.argumentIndex,l=0===n.kind,n=f.getInvokedExpression(a),n=s.getSymbolAtLocation(n),c=n&&f.symbolToDisplayParts(s,n,void 0,void 0),n=f.map(e,function(t){var e,n,o=[],r=[],i=(c&&f.addRange(o,c),l?(n=!1,o.push(f.punctuationPart(27)),e=(e=(t.target||t).typeParameters)&&0<e.length?f.map(e,d):f.emptyArray,r.push(f.punctuationPart(29)),i=f.mapToDisplayParts(function(e){return s.getSymbolDisplayBuilder().buildDisplayForParametersAndDelimiters(t.thisParameter,t.parameters,e,a)}),f.addRange(r,i)):(n=t.hasRestParameter,i=f.mapToDisplayParts(function(e){return s.getSymbolDisplayBuilder().buildDisplayForTypeParametersAndDelimiters(t.typeParameters,e,a)}),f.addRange(o,i),o.push(f.punctuationPart(19)),e=f.map(t.parameters,u),r.push(f.punctuationPart(20))),f.mapToDisplayParts(function(e){return s.getSymbolDisplayBuilder().buildReturnTypeDisplay(t,e,a)}));return f.addRange(r,i),{isVariadic:n,prefixDisplayParts:o,suffixDisplayParts:r,separatorDisplayParts:[f.punctuationPart(26),f.spacePart()],parameters:e,documentation:t.getDocumentationComment(),tags:t.getJsDocTags()}}),e=(0!==i&&f.Debug.assertLessThan(i,o),e.indexOf(t));return f.Debug.assert(-1!==e),{items:n,applicableSpan:r,selectedItemIndex:e,argumentIndex:i,argumentCount:o};function u(t){var e=f.mapToDisplayParts(function(e){return s.getSymbolDisplayBuilder().buildParameterDisplay(t,e,a)});return{name:t.name,documentation:t.getDocumentationComment(),displayParts:e,isOptional:s.isOptionalParameter(t.valueDeclaration)}}function d(t){var e=f.mapToDisplayParts(function(e){return s.getSymbolDisplayBuilder().buildTypeParameterDisplay(t,e,a)});return{name:t.symbol.name,documentation:f.emptyArray,displayParts:e,isOptional:!1}}}var e,t;e=f.SignatureHelp||(f.SignatureHelp={}),(t=e.ArgumentListKind||(e.ArgumentListKind={}))[t.TypeArguments=0]="TypeArguments",t[t.CallArguments=1]="CallArguments",t[t.TaggedTemplateArguments=2]="TaggedTemplateArguments",t[t.JSXAttributesArguments=3]="JSXAttributesArguments",e.getSignatureHelpItems=function(e,t,n,o){var r=e.getTypeChecker(),i=f.findTokenOnLeftOfPosition(t,n);if(i){i=y(i,n,t);if(i){o.throwIfCancellationRequested();var n=i.invocation,s=[],n=r.getResolvedSignature(n,s,i.argumentCount);if(o.throwIfCancellationRequested(),s.length)return k(s,n,i,r);else if(f.isSourceFileJavaScript(t)){var a=i;o=e;if(181===a.invocation.kind){var s=a.invocation.expression,l=71===s.kind?s:179===s.kind?s.name:void 0;if(l&&l.escapedText)for(var c=o.getTypeChecker(),u=0,d=o.getSourceFiles();u<d.length;u++){var p=d[u].getNamedDeclarations().get(l.text);if(p)for(var g=0,h=p;g<h.length;g++){var _=h[g],m=_.symbol;if(m){m=c.getTypeOfSymbolAtLocation(m,_);if(m){_=m.getCallSignatures();if(_&&_.length)return k(_,_[0],a,c)}}}}}return}else return void 0}}},e.getImmediatelyContainingArgumentInfo=i,e.getContainingArgumentInfo=y}(ts=ts||{}),function(D){function N(e,t,n){var o=D.getCombinedLocalAndExportSymbolFlags(t);if(32&o)return D.getDeclarationOfKind(t,199)?"local class":"class";if(384&o)return"enum";if(524288&o)return"type";if(64&o)return"interface";if(262144&o)return"type parameter";e=w(e,t,n);if(""===e){if(262144&o)return"type parameter";if(8&o)return"enum member";if(2097152&o)return"alias";if(1536&o)return"module"}return e}function w(e,t,n){var o;return e.isUndefinedSymbol(t)?"var":e.isArgumentsSymbol(t)?"local var":99===n.kind&&D.isExpression(n)?"parameter":3&(o=D.getCombinedLocalAndExportSymbolFlags(t))?D.isFirstDeclarationOfSymbolParameter(t)?"parameter":t.valueDeclaration&&D.isConst(t.valueDeclaration)?"const":D.forEach(t.declarations,D.isLet)?"let":r(t)?"local var":"var":16&o?r(t)?"local function":"function":32768&o?"getter":65536&o?"setter":8192&o?"method":16384&o?"constructor":4&o?33554432&o&&6&t.checkFlags?D.forEach(e.getRootSymbols(t),function(e){e=e.getFlags();if(98311&e)return"property";D.Debug.assert(!!(8208&e))})||(e.getTypeOfSymbolAtLocation(t,n).getCallSignatures().length?"method":"property"):n.parent&&D.isJsxAttribute(n.parent)?"JSX attribute":"property":""}function r(e){return!e.parent&&D.forEach(e.declarations,function(e){if(186!==e.kind){if(226!==e.kind&&228!==e.kind)return!1;for(var t=e.parent;!D.isFunctionBlock(t);t=t.parent)if(265===t.kind||234===t.kind)return!1}return!0})}var e;(e=D.SymbolDisplay||(D.SymbolDisplay={})).getSymbolKind=N,e.getSymbolModifiers=function(e){return e&&e.declarations&&0<e.declarations.length?D.getNodeModifiers(e.declarations[0]):""},e.getSymbolDisplayPartsDocumentationAndSymbolKind=function(o,e,n,r,t,i){void 0===i&&(i=D.getMeaningFromLocation(t));var s,a,l,c,u=[],d=D.getCombinedLocalAndExportSymbolFlags(e),p=w(o,e,t),g=99===t.kind&&D.isExpression(t);if(""!==p||32&d||2097152&d){"getter"!==p&&"setter"!==p||(p="property");var h,_=void 0,m=g?o.getTypeAtLocation(t):o.getTypeOfSymbolAtLocation(e.exportSymbol||e,t),f=(t.parent&&179===t.parent.kind&&((f=t.parent.name)===t||f&&0===f.getFullWidth())&&(t=t.parent),void 0);if(D.isCallOrNewExpression(t)?f=t:(D.isCallExpressionTarget(t)||D.isNewExpressionTarget(t)||t.parent&&D.isJsxOpeningLikeElement(t.parent)&&D.isFunctionLike(e.valueDeclaration))&&(f=t.parent),f){var _=o.getResolvedSignature(f,[]),y=182===f.kind||D.isCallExpression(f)&&97===f.expression.kind,k=y?m.getConstructSignatures():m.getCallSignatures();if(_=D.contains(k,_.target)||D.contains(k,_)?_:k.length?k[0]:void 0){switch(y&&32&d?x(m.symbol,p="constructor"):2097152&d?(B(p="alias"),u.push(D.spacePart()),y&&(u.push(D.keywordPart(94)),u.push(D.spacePart())),C(e)):x(e,p),p){case"JSX attribute":case"property":case"var":case"const":case"let":case"parameter":case"local var":u.push(D.punctuationPart(56)),u.push(D.spacePart()),y&&(u.push(D.keywordPart(94)),u.push(D.spacePart())),32768&m.flags&&16&m.objectFlags||!m.symbol||D.addRange(u,D.symbolToDisplayParts(o,m.symbol,r,void 0,1)),A(_,k,16);break;default:A(_,k)}l=!0}}else(D.isNameOfFunctionDeclaration(t)&&!(98304&d)||123===t.kind&&152===t.parent.kind)&&(h=t.parent,D.find(e.declarations,function(e){return e===(123===t.kind?h.parent:h)}))&&(k=152===h.kind?m.getNonNullableType().getConstructSignatures():m.getNonNullableType().getCallSignatures(),_=o.isImplementationOfOverload(h)?k[0]:o.getSignatureFromDeclaration(h),152===h.kind?x(m.symbol,p="constructor"):x(155!==h.kind||2048&m.symbol.flags||4096&m.symbol.flags?e:m.symbol,p),A(_,k),l=!0)}if(32&d&&!l&&!g&&(D.getDeclarationOfKind(e,199)?B("local class"):u.push(D.keywordPart(75)),u.push(D.spacePart()),C(e),I(e,n)),64&d&&2&i&&(E(),u.push(D.keywordPart(109)),u.push(D.spacePart()),C(e),I(e,n)),524288&d&&(E(),u.push(D.keywordPart(138)),u.push(D.spacePart()),C(e),I(e,n),u.push(D.spacePart()),u.push(D.operatorPart(58)),u.push(D.spacePart()),D.addRange(u,D.typeToDisplayParts(o,o.getDeclaredTypeOfSymbol(e),r,1024))),384&d&&(E(),D.forEach(e.declarations,D.isConstEnumDeclaration)&&(u.push(D.keywordPart(76)),u.push(D.spacePart())),u.push(D.keywordPart(83)),u.push(D.spacePart()),C(e)),1536&d&&(E(),f=(c=D.getDeclarationOfKind(e,233))&&c.name&&71===c.name.kind,u.push(D.keywordPart(f?129:128)),u.push(D.spacePart()),C(e)),262144&d&&2&i&&(E(),u.push(D.punctuationPart(19)),u.push(D.textPart("type parameter")),u.push(D.punctuationPart(20)),u.push(D.spacePart()),C(e),e.parent?(S(),C(e.parent,r),I(e.parent,r)):(f=D.getDeclarationOfKind(e,145),D.Debug.assert(void 0!==f),(c=f.parent)&&(D.isFunctionLikeKind(c.kind)?(S(),_=o.getSignatureFromDeclaration(c),156===c.kind?(u.push(D.keywordPart(94)),u.push(D.spacePart())):155!==c.kind&&c.name&&C(c.symbol),D.addRange(u,D.signatureToDisplayParts(o,_,n,64))):231===c.kind&&(S(),u.push(D.keywordPart(138)),u.push(D.spacePart()),C(c.symbol),I(c.symbol,n))))),8&d&&(x(e,p="enum member"),264===(c=e.declarations[0]).kind)&&(void 0!==(i=o.getConstantValue(c))&&(u.push(D.spacePart()),u.push(D.operatorPart(58)),u.push(D.spacePart()),u.push(D.displayPart(D.getTextOfConstantValue(i),"number"==typeof i?D.SymbolDisplayPartKind.numericLiteral:D.SymbolDisplayPartKind.stringLiteral)))),2097152&d){switch(E(),e.declarations[0].kind){case 236:u.push(D.keywordPart(84)),u.push(D.spacePart()),u.push(D.keywordPart(129));break;case 243:u.push(D.keywordPart(84)),u.push(D.spacePart()),u.push(D.keywordPart(e.declarations[0].isExportEquals?58:79));break;default:u.push(D.keywordPart(91))}u.push(D.spacePart()),C(e),D.forEach(e.declarations,function(e){if(237===e.kind)return D.isExternalModuleImportEqualsDeclaration(e=e)?(u.push(D.spacePart()),u.push(D.operatorPart(58)),u.push(D.spacePart()),u.push(D.keywordPart(132)),u.push(D.punctuationPart(19)),u.push(D.displayPart(D.getTextOfNode(D.getExternalModuleImportEqualsDeclarationExpression(e)),D.SymbolDisplayPartKind.stringLiteral)),u.push(D.punctuationPart(20))):(e=o.getSymbolAtLocation(e.moduleReference))&&(u.push(D.spacePart()),u.push(D.operatorPart(58)),u.push(D.spacePart()),C(e,r)),!0})}if(l||(""!==p?m&&(g?(E(),u.push(D.keywordPart(99))):x(e,p),"property"===p||"JSX attribute"===p||3&d||"local var"===p||g?(u.push(D.punctuationPart(56)),u.push(D.spacePart()),m.symbol&&262144&m.symbol.flags?(f=D.mapToDisplayParts(function(e){o.getSymbolDisplayBuilder().buildTypeParameterDisplay(m,e,r)}),D.addRange(u,f)):D.addRange(u,D.typeToDisplayParts(o,m,r))):(16&d||8192&d||16384&d||131072&d||98304&d||"method"===p)&&(k=m.getNonNullableType().getCallSignatures()).length&&A(k[0],k)):p=N(o,e,t)),!s&&(s=e.getDocumentationComment(),a=e.getJsDocTags(),0===s.length)&&4&d&&e.parent&&D.forEach(e.parent.declarations,function(e){return 265===e.kind}))for(var b=0,v=e.declarations;b<v.length;b++)if((c=v[b]).parent&&194===c.parent.kind){var T=o.getSymbolAtLocation(c.parent.right);if(T&&(s=T.getDocumentationComment(),a=T.getJsDocTags(),0<s.length))break}return{displayParts:u,documentation:s,symbolKind:p,tags:a};function E(){u.length&&u.push(D.lineBreakPart())}function S(){u.push(D.spacePart()),u.push(D.keywordPart(92)),u.push(D.spacePart())}function C(e,t){e=D.symbolToDisplayParts(o,e,t||n,void 0,3);D.addRange(u,e)}function x(e,t){E(),t&&(B(t),u.push(D.spacePart()),C(e))}function B(e){switch(e){case"var":case"function":case"let":case"const":case"constructor":return u.push(D.textOrKeywordPart(e));default:u.push(D.punctuationPart(19)),u.push(D.textOrKeywordPart(e)),u.push(D.punctuationPart(20))}}function A(e,t,n){D.addRange(u,D.signatureToDisplayParts(o,e,r,64|n)),1<t.length&&(u.push(D.spacePart()),u.push(D.punctuationPart(19)),u.push(D.operatorPart(37)),u.push(D.displayPart((t.length-1).toString(),D.SymbolDisplayPartKind.numericLiteral)),u.push(D.spacePart()),u.push(D.textPart(2===t.length?"overload":"overloads")),u.push(D.punctuationPart(20))),s=e.getDocumentationComment(),a=e.getJsDocTags()}function I(t,n){var e=D.mapToDisplayParts(function(e){o.getSymbolDisplayBuilder().buildTypeParameterDisplayFromSymbol(t,e,n)});D.addRange(u,e)}}}(ts=ts||{}),function(c){function i(e,t){var n=[],o=t.compilerOptions?u(t.compilerOptions,n):c.getDefaultCompilerOptions(),r=(o.isolatedModules=!0,o.suppressOutputPathCheck=!0,o.allowNonTsExtensions=!0,o.noLib=!0,o.lib=void 0,o.types=void 0,o.noEmit=void 0,o.noEmitOnError=void 0,o.paths=void 0,o.rootDirs=void 0,o.declaration=void 0,o.declarationDir=void 0,o.out=void 0,o.outFile=void 0,o.noResolve=!0,t.fileName||(o.jsx?"module.tsx":"module.ts")),i=c.createSourceFile(r,e,o.target);t.moduleName&&(i.moduleName=t.moduleName),t.renamedDependencies&&(i.renamedDependencies=c.createMapFromTemplate(t.renamedDependencies));var s,a,l=c.getNewLineCharacter(o),e=c.createProgram([r],o,{getSourceFile:function(e){return e===c.normalizePath(r)?i:void 0},writeFile:function(e,t){c.fileExtensionIs(e,".map")?(c.Debug.assertEqual(a,void 0,"Unexpected multiple source map outputs, file:",e),a=t):(c.Debug.assertEqual(s,void 0,"Unexpected multiple outputs, file:",e),s=t)},getDefaultLibFileName:function(){return"lib.d.ts"},useCaseSensitiveFileNames:function(){return!1},getCanonicalFileName:function(e){return e},getCurrentDirectory:function(){return""},getNewLine:function(){return l},fileExists:function(e){return e===r},readFile:function(){return""},directoryExists:function(){return!0},getDirectories:function(){return[]}});return t.reportDiagnostics&&(c.addRange(n,e.getSyntacticDiagnostics(i)),c.addRange(n,e.getOptionsDiagnostics())),e.emit(void 0,void 0,void 0,void 0,t.transformers),c.Debug.assert(void 0!==s,"Output generation failed"),{outputText:s,diagnostics:n,sourceMapText:a}}var r;function u(n,o){r=r||c.filter(c.optionDeclarations,function(e){return"object"==typeof e.type&&!c.forEachEntry(e.type,function(e){return"number"!=typeof e})}),n=c.cloneCompilerOptions(n);for(var e=0,t=r;e<t.length;e++)!function(e){if(!c.hasProperty(n,e.name))return;var t=n[e.name];c.isString(t)?n[e.name]=c.parseCustomTypeOption(e,t,o):c.forEachEntry(e.type,function(e){return e===t})||o.push(c.createCompilerDiagnosticForInvalidCustomType(e))}(t[e]);return n}c.transpileModule=i,c.transpile=function(e,t,n,o,r){e=i(e,{compilerOptions:t,fileName:n,reportDiagnostics:!!o,moduleName:r});return c.addRange(o,e.diagnostics),e.outputText},c.fixupCompilerOptions=u}(ts=ts||{}),function(h){var e,_,m;e=h.formatting||(h.formatting={}),_=h.createScanner(5,!1,0),m=h.createScanner(5,!1,1),e.getFormattingScanner=function(e,t,n,r,o){var i=1===t?m:_;i.setText(e),i.setTextPos(n);var s,a,l,c,u=!0,t=o({advance:function(){d=void 0,i.getStartPos()!==n?u=a&&4===h.lastOrUndefined(a).kind:i.scan(),a=s=void 0;for(var e=i.getStartPos();e<r;){var t=i.getToken();if(!h.isTrivia(t))break;i.scan();t={pos:e,end:i.getStartPos(),kind:t},e=i.getStartPos();s=h.append(s,t)}l=i.getStartPos()},readTokenInfo:function(e){h.Debug.assert(p());var t=function(){switch(e.kind){case 31:case 66:case 67:case 47:case 46:return 1}}()?1:12===e.kind?2:15===e.kind||16===e.kind?3:function(e){if(e.parent)switch(e.parent.kind){case 253:case 251:case 252:case 250:return h.isKeyword(e.kind)||71===e.kind}}(e)?4:10===e.kind?5:0;if(d&&t===c)return g(d,e);i.getStartPos()!==l&&(h.Debug.assert(void 0!==d),i.setTextPos(l),i.scan());var n=function(e,t){var n,o=i.getToken();switch(c=0,t){case 1:if(29===o)return c=1,n=i.reScanGreaterToken(),h.Debug.assert(e.kind===n),n;break;case 2:if(41===o||63===o)return c=2,n=i.reScanSlashToken(),h.Debug.assert(e.kind===n),n;break;case 3:if(18===o)return c=3,i.reScanTemplateToken();break;case 4:return c=4,i.scanJsxIdentifier();case 5:return c=5,i.reScanJsxToken();case 0:break;default:h.Debug.assertNever(t)}return o}(e,t),t={pos:i.getStartPos(),end:i.getTextPos(),kind:n};for(a=a&&void 0;i.getStartPos()<r&&(n=i.scan(),h.isTrivia(n));){var o={pos:i.getStartPos(),end:i.getTextPos(),kind:n};if((a=a||[]).push(o),4===n){i.scan();break}}return g(d={leadingTrivia:s,trailingTrivia:a,token:t},e)},isOnToken:p,getCurrentLeadingTrivia:function(){return s},lastTrailingTriviaWasNewLine:function(){return u},skipToEndOf:function(e){i.setTextPos(e.end),l=i.getStartPos(),u=!1,a=s=d=c=void 0}}),d=void 0;return i.setText(void 0),t;function p(){var e=d?d.token.kind:i.getToken();return(d?d.token.pos:i.getStartPos())<r&&1!==e&&!h.isTrivia(e)}function g(e,t){return h.isToken(t)&&e.token.kind!==t.kind&&(e.token.kind=t.kind),e}}}(ts=ts||{}),function(i){function e(e,t,n){this.sourceFile=e,this.formattingRequestKind=t,this.options=n}var t;t=i.formatting||(i.formatting={}),e.prototype.updateContext=function(e,t,n,o,r){i.Debug.assert(void 0!==e,"currentTokenSpan is null"),i.Debug.assert(void 0!==t,"currentTokenParent is null"),i.Debug.assert(void 0!==n,"nextTokenSpan is null"),i.Debug.assert(void 0!==o,"nextTokenParent is null"),i.Debug.assert(void 0!==r,"commonParent is null"),this.currentTokenSpan=e,this.currentTokenParent=t,this.nextTokenSpan=n,this.nextTokenParent=o,this.contextNode=r,this.contextNodeAllOnSameLine=void 0,this.nextNodeAllOnSameLine=void 0,this.tokensAreOnSameLine=void 0,this.contextNodeBlockIsOnOneLine=void 0,this.nextNodeBlockIsOnOneLine=void 0},e.prototype.ContextNodeAllOnSameLine=function(){return void 0===this.contextNodeAllOnSameLine&&(this.contextNodeAllOnSameLine=this.NodeIsOnOneLine(this.contextNode)),this.contextNodeAllOnSameLine},e.prototype.NextNodeAllOnSameLine=function(){return void 0===this.nextNodeAllOnSameLine&&(this.nextNodeAllOnSameLine=this.NodeIsOnOneLine(this.nextTokenParent)),this.nextNodeAllOnSameLine},e.prototype.TokensAreOnSameLine=function(){var e,t;return void 0===this.tokensAreOnSameLine&&(e=this.sourceFile.getLineAndCharacterOfPosition(this.currentTokenSpan.pos).line,t=this.sourceFile.getLineAndCharacterOfPosition(this.nextTokenSpan.pos).line,this.tokensAreOnSameLine=e===t),this.tokensAreOnSameLine},e.prototype.ContextNodeBlockIsOnOneLine=function(){return void 0===this.contextNodeBlockIsOnOneLine&&(this.contextNodeBlockIsOnOneLine=this.BlockIsOnOneLine(this.contextNode)),this.contextNodeBlockIsOnOneLine},e.prototype.NextNodeBlockIsOnOneLine=function(){return void 0===this.nextNodeBlockIsOnOneLine&&(this.nextNodeBlockIsOnOneLine=this.BlockIsOnOneLine(this.nextTokenParent)),this.nextNodeBlockIsOnOneLine},e.prototype.NodeIsOnOneLine=function(e){return this.sourceFile.getLineAndCharacterOfPosition(e.getStart(this.sourceFile)).line===this.sourceFile.getLineAndCharacterOfPosition(e.getEnd()).line},e.prototype.BlockIsOnOneLine=function(e){var t=i.findChildOfKind(e,17,this.sourceFile),e=i.findChildOfKind(e,18,this.sourceFile);return!(!t||!e)&&this.sourceFile.getLineAndCharacterOfPosition(t.getEnd()).line===this.sourceFile.getLineAndCharacterOfPosition(e.getStart(this.sourceFile)).line},t.FormattingContext=e}(ts=ts||{}),function(e){(e=(e=e.formatting||(e.formatting={})).FormattingRequestKind||(e.FormattingRequestKind={}))[e.FormatDocument=0]="FormatDocument",e[e.FormatSelection=1]="FormatSelection",e[e.FormatOnEnter=2]="FormatOnEnter",e[e.FormatOnSemicolon=3]="FormatOnSemicolon",e[e.FormatOnOpeningCurlyBrace=4]="FormatOnOpeningCurlyBrace",e[e.FormatOnClosingCurlyBrace=5]="FormatOnClosingCurlyBrace"}(ts=ts||{}),function(e){(e.formatting||(e.formatting={})).Rule=function(e,t,n){void 0===n&&(n=0),this.Descriptor=e,this.Operation=t,this.Flag=n}}(ts=ts||{}),function(e){(e=(e=e.formatting||(e.formatting={})).RuleAction||(e.RuleAction={}))[e.Ignore=1]="Ignore",e[e.Space=2]="Space",e[e.NewLine=4]="NewLine",e[e.Delete=8]="Delete"}(ts=ts||{}),function(e){function n(e,t){this.LeftTokenRange=e,this.RightTokenRange=t}var o;o=e.formatting||(e.formatting={}),n.prototype.toString=function(){return"[leftRange="+this.LeftTokenRange+",rightRange="+this.RightTokenRange+"]"},n.create1=function(e,t){return n.create4(o.Shared.TokenRange.FromToken(e),o.Shared.TokenRange.FromToken(t))},n.create2=function(e,t){return n.create4(e,o.Shared.TokenRange.FromToken(t))},n.create3=function(e,t){return n.create4(o.Shared.TokenRange.FromToken(e),t)},n.create4=function(e,t){return new n(e,t)},o.RuleDescriptor=n}(ts=ts||{}),function(e){(e=(e=e.formatting||(e.formatting={})).RuleFlags||(e.RuleFlags={}))[e.None=0]="None",e[e.CanDeleteNewLines=1]="CanDeleteNewLines"}(ts=ts||{}),function(e){function n(e,t){this.Context=e,this.Action=t}var t;t=e.formatting||(e.formatting={}),n.prototype.toString=function(){return"[context="+this.Context+",action="+this.Action+"]"},n.create1=function(e){return n.create2(t.RuleOperationContext.Any,e)},n.create2=function(e,t){return new n(e,t)},t.RuleOperation=n}(ts=ts||{}),function(e){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.customContextChecks=e}e=e.formatting||(e.formatting={}),t.prototype.IsAny=function(){return this===t.Any},t.prototype.InContext=function(e){if(!this.IsAny())for(var t=0,n=this.customContextChecks;t<n.length;t++)if(!(0,n[t])(e))return!1;return!0},t.Any=new t,e.RuleOperationContext=t}(ts=ts||{}),function(n){function o(){if(this.IgnoreBeforeComment=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.Comments),r.RuleOperation.create1(1)),this.IgnoreAfterLineComment=new r.Rule(r.RuleDescriptor.create3(2,r.Shared.TokenRange.Any),r.RuleOperation.create1(1)),this.NoSpaceBeforeSemicolon=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,25),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeColon=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,56),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsNotBinaryOpContext),8)),this.NoSpaceBeforeQuestionMark=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,55),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsNotBinaryOpContext),8)),this.SpaceAfterColon=new r.Rule(r.RuleDescriptor.create3(56,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsNotBinaryOpContext),2)),this.SpaceAfterQuestionMarkInConditionalOperator=new r.Rule(r.RuleDescriptor.create3(55,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsConditionalOperatorContext),2)),this.NoSpaceAfterQuestionMark=new r.Rule(r.RuleDescriptor.create3(55,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterSemicolon=new r.Rule(r.RuleDescriptor.create3(25,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterCloseBrace=new r.Rule(r.RuleDescriptor.create3(18,r.Shared.TokenRange.FromRange(0,142,[20])),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsAfterCodeBlockContext),2)),this.SpaceBetweenCloseBraceAndElse=new r.Rule(r.RuleDescriptor.create1(18,82),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),2)),this.SpaceBetweenCloseBraceAndWhile=new r.Rule(r.RuleDescriptor.create1(18,106),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterCloseBrace=new r.Rule(r.RuleDescriptor.create3(18,r.Shared.TokenRange.FromTokens([22,26,25])),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeDot=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,23),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterDot=new r.Rule(r.RuleDescriptor.create3(23,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeOpenBracket=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.AnyExcept(120),21),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterCloseBracket=new r.Rule(r.RuleDescriptor.create3(22,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsNotBeforeBlockInFunctionDeclarationContext),8)),this.FunctionOpenBraceLeftTokenRange=r.Shared.TokenRange.AnyIncludingMultilineComments,this.SpaceBeforeOpenBraceInFunction=new r.Rule(r.RuleDescriptor.create2(this.FunctionOpenBraceLeftTokenRange,17),r.RuleOperation.create2(new r.RuleOperationContext(o.isOptionDisabledOrUndefinedOrTokensOnSameLine("placeOpenBraceOnNewLineForFunctions"),o.IsFunctionDeclContext,o.IsBeforeBlockContext,o.IsNotFormatOnEnter,o.IsSameLineTokenOrBeforeBlockContext),2),1),this.TypeScriptOpenBraceLeftTokenRange=r.Shared.TokenRange.FromTokens([71,3,75,84,91]),this.SpaceBeforeOpenBraceInTypeScriptDeclWithBlock=new r.Rule(r.RuleDescriptor.create2(this.TypeScriptOpenBraceLeftTokenRange,17),r.RuleOperation.create2(new r.RuleOperationContext(o.isOptionDisabledOrUndefinedOrTokensOnSameLine("placeOpenBraceOnNewLineForFunctions"),o.IsTypeScriptDeclWithBlockContext,o.IsNotFormatOnEnter,o.IsSameLineTokenOrBeforeBlockContext),2),1),this.ControlOpenBraceLeftTokenRange=r.Shared.TokenRange.FromTokens([20,3,81,102,87,82]),this.SpaceBeforeOpenBraceInControl=new r.Rule(r.RuleDescriptor.create2(this.ControlOpenBraceLeftTokenRange,17),r.RuleOperation.create2(new r.RuleOperationContext(o.isOptionDisabledOrUndefinedOrTokensOnSameLine("placeOpenBraceOnNewLineForControlBlocks"),o.IsControlDeclContext,o.IsNotFormatOnEnter,o.IsSameLineTokenOrBeforeBlockContext),2),1),this.SpaceAfterOpenBrace=new r.Rule(r.RuleDescriptor.create3(17,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),o.IsBraceWrappedContext),2)),this.SpaceBeforeCloseBrace=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,18),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),o.IsBraceWrappedContext),2)),this.NoSpaceAfterOpenBrace=new r.Rule(r.RuleDescriptor.create3(17,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeCloseBrace=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,18),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBetweenEmptyBraceBrackets=new r.Rule(r.RuleDescriptor.create1(17,18),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsObjectContext),8)),this.NewLineAfterOpenBraceInBlockContext=new r.Rule(r.RuleDescriptor.create3(17,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsMultilineBlockContext),4)),this.NewLineBeforeCloseBraceInBlockContext=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.AnyIncludingMultilineComments,18),r.RuleOperation.create2(new r.RuleOperationContext(o.IsMultilineBlockContext),4)),this.NoSpaceAfterUnaryPrefixOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.UnaryPrefixOperators,r.Shared.TokenRange.UnaryPrefixExpressions),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsNotBinaryOpContext),8)),this.NoSpaceAfterUnaryPreincrementOperator=new r.Rule(r.RuleDescriptor.create3(43,r.Shared.TokenRange.UnaryPreincrementExpressions),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterUnaryPredecrementOperator=new r.Rule(r.RuleDescriptor.create3(44,r.Shared.TokenRange.UnaryPredecrementExpressions),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeUnaryPostincrementOperator=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.UnaryPostincrementExpressions,43),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeUnaryPostdecrementOperator=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.UnaryPostdecrementExpressions,44),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterPostincrementWhenFollowedByAdd=new r.Rule(r.RuleDescriptor.create1(43,37),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsBinaryOpContext),2)),this.SpaceAfterAddWhenFollowedByUnaryPlus=new r.Rule(r.RuleDescriptor.create1(37,37),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsBinaryOpContext),2)),this.SpaceAfterAddWhenFollowedByPreincrement=new r.Rule(r.RuleDescriptor.create1(37,43),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsBinaryOpContext),2)),this.SpaceAfterPostdecrementWhenFollowedBySubtract=new r.Rule(r.RuleDescriptor.create1(44,38),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsBinaryOpContext),2)),this.SpaceAfterSubtractWhenFollowedByUnaryMinus=new r.Rule(r.RuleDescriptor.create1(38,38),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsBinaryOpContext),2)),this.SpaceAfterSubtractWhenFollowedByPredecrement=new r.Rule(r.RuleDescriptor.create1(38,44),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsBinaryOpContext),2)),this.NoSpaceBeforeComma=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,26),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterCertainKeywords=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([104,100,94,80,96,103,121]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterNewKeywordOnConstructorSignature=new r.Rule(r.RuleDescriptor.create1(94,19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsConstructorSignatureContext),8)),this.SpaceAfterLetConstInVariableDeclaration=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([110,76]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsStartOfVariableDeclarationList),2)),this.NoSpaceBeforeOpenParenInFuncCall=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsFunctionCallOrNewContext,o.IsPreviousTokenNotComma),8)),this.SpaceAfterFunctionInFuncDecl=new r.Rule(r.RuleDescriptor.create3(89,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsFunctionDeclContext),2)),this.SpaceBeforeOpenParenInFuncDecl=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceBeforeFunctionParenthesis"),o.IsNonJsxSameLineTokenContext,o.IsFunctionDeclContext),2)),this.NoSpaceBeforeOpenParenInFuncDecl=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceBeforeFunctionParenthesis"),o.IsNonJsxSameLineTokenContext,o.IsFunctionDeclContext),8)),this.SpaceAfterVoidOperator=new r.Rule(r.RuleDescriptor.create3(105,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsVoidOpContext),2)),this.NoSpaceBetweenReturnAndSemicolon=new r.Rule(r.RuleDescriptor.create1(96,25),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.SpaceBetweenStatements=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([20,81,82,73]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsNonJsxElementContext,o.IsNotForContext),2)),this.SpaceAfterTryFinally=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.FromTokens([102,87]),17),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterGetSetInMember=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.FromTokens([125,135]),71),r.RuleOperation.create2(new r.RuleOperationContext(o.IsFunctionDeclContext),2)),this.SpaceBeforeBinaryKeywordOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.BinaryKeywordOperators),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsBinaryOpContext),2)),this.SpaceAfterBinaryKeywordOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.BinaryKeywordOperators,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsBinaryOpContext),2)),this.SpaceAfterConstructor=new r.Rule(r.RuleDescriptor.create1(123,19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterConstructor"),o.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterConstructor=new r.Rule(r.RuleDescriptor.create1(123,19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterConstructor"),o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterModuleImport=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.FromTokens([128,132]),19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterCertainTypeScriptKeywords=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([117,75,124,79,83,84,85,125,108,91,109,128,129,112,114,113,131,135,115,138,140,127]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeCertainTypeScriptKeywords=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.FromTokens([85,108,140])),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterModuleName=new r.Rule(r.RuleDescriptor.create1(9,17),r.RuleOperation.create2(new r.RuleOperationContext(o.IsModuleDeclContext),2)),this.SpaceBeforeArrow=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,36),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterArrow=new r.Rule(r.RuleDescriptor.create3(36,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterEllipsis=new r.Rule(r.RuleDescriptor.create1(24,71),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterOptionalParameters=new r.Rule(r.RuleDescriptor.create3(55,r.Shared.TokenRange.FromTokens([20,26])),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsNotBinaryOpContext),8)),this.NoSpaceBeforeOpenAngularBracket=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.TypeNames,27),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceBetweenCloseParenAndAngularBracket=new r.Rule(r.RuleDescriptor.create1(20,27),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceAfterOpenAngularBracket=new r.Rule(r.RuleDescriptor.create3(27,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceBeforeCloseAngularBracket=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,29),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceAfterCloseAngularBracket=new r.Rule(r.RuleDescriptor.create3(29,r.Shared.TokenRange.FromTokens([19,21,29,26])),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceBetweenEmptyInterfaceBraceBrackets=new r.Rule(r.RuleDescriptor.create1(17,18),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsObjectTypeContext),8)),this.SpaceBeforeAt=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,57),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterAt=new r.Rule(r.RuleDescriptor.create3(57,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterDecorator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.FromTokens([117,71,84,79,75,115,114,112,113,125,135,21,39])),r.RuleOperation.create2(new r.RuleOperationContext(o.IsEndOfDecoratorContextOnSameLine),2)),this.NoSpaceBetweenFunctionKeywordAndStar=new r.Rule(r.RuleDescriptor.create1(89,39),r.RuleOperation.create2(new r.RuleOperationContext(o.IsFunctionDeclarationOrFunctionExpressionContext),8)),this.SpaceAfterStarInGeneratorDeclaration=new r.Rule(r.RuleDescriptor.create3(39,r.Shared.TokenRange.FromTokens([71,19])),r.RuleOperation.create2(new r.RuleOperationContext(o.IsFunctionDeclarationOrFunctionExpressionContext),2)),this.NoSpaceBetweenYieldKeywordAndStar=new r.Rule(r.RuleDescriptor.create1(116,39),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsYieldOrYieldStarWithOperand),8)),this.SpaceBetweenYieldOrYieldStarAndOperand=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([116,39]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsYieldOrYieldStarWithOperand),2)),this.SpaceBetweenAsyncAndOpenParen=new r.Rule(r.RuleDescriptor.create1(120,19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsArrowFunctionContext,o.IsNonJsxSameLineTokenContext),2)),this.SpaceBetweenAsyncAndFunctionKeyword=new r.Rule(r.RuleDescriptor.create1(120,89),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBetweenTagAndTemplateString=new r.Rule(r.RuleDescriptor.create3(71,r.Shared.TokenRange.FromTokens([13,14])),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.SpaceBeforeJsxAttribute=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,71),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNextTokenParentJsxAttribute,o.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeSlashInJsxOpeningElement=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,41),r.RuleOperation.create2(new r.RuleOperationContext(o.IsJsxSelfClosingElementContext,o.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBeforeGreaterThanTokenInJsxOpeningElement=new r.Rule(r.RuleDescriptor.create1(41,29),r.RuleOperation.create2(new r.RuleOperationContext(o.IsJsxSelfClosingElementContext,o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeEqualInJsxAttribute=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,58),r.RuleOperation.create2(new r.RuleOperationContext(o.IsJsxAttributeContext,o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterEqualInJsxAttribute=new r.Rule(r.RuleDescriptor.create3(58,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsJsxAttributeContext,o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeNonNullAssertionOperator=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,51),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext,o.IsNonNullAssertionContext),8)),this.SpaceAfterComma=new r.Rule(r.RuleDescriptor.create3(26,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterCommaDelimiter"),o.IsNonJsxSameLineTokenContext,o.IsNonJsxElementContext,o.IsNextTokenNotCloseBracket),2)),this.NoSpaceAfterComma=new r.Rule(r.RuleDescriptor.create3(26,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterCommaDelimiter"),o.IsNonJsxSameLineTokenContext,o.IsNonJsxElementContext),8)),this.SpaceBeforeBinaryOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.BinaryOperators),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceBeforeAndAfterBinaryOperators"),o.IsNonJsxSameLineTokenContext,o.IsBinaryOpContext),2)),this.SpaceAfterBinaryOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.BinaryOperators,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceBeforeAndAfterBinaryOperators"),o.IsNonJsxSameLineTokenContext,o.IsBinaryOpContext),2)),this.NoSpaceBeforeBinaryOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.BinaryOperators),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceBeforeAndAfterBinaryOperators"),o.IsNonJsxSameLineTokenContext,o.IsBinaryOpContext),8)),this.NoSpaceAfterBinaryOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.BinaryOperators,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceBeforeAndAfterBinaryOperators"),o.IsNonJsxSameLineTokenContext,o.IsBinaryOpContext),8)),this.SpaceAfterKeywordInControl=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Keywords,19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterKeywordsInControlFlowStatements"),o.IsControlDeclContext),2)),this.NoSpaceAfterKeywordInControl=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Keywords,19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterKeywordsInControlFlowStatements"),o.IsControlDeclContext),8)),this.NewLineBeforeOpenBraceInFunction=new r.Rule(r.RuleDescriptor.create2(this.FunctionOpenBraceLeftTokenRange,17),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("placeOpenBraceOnNewLineForFunctions"),o.IsFunctionDeclContext,o.IsBeforeMultilineBlockContext),4),1),this.NewLineBeforeOpenBraceInTypeScriptDeclWithBlock=new r.Rule(r.RuleDescriptor.create2(this.TypeScriptOpenBraceLeftTokenRange,17),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("placeOpenBraceOnNewLineForFunctions"),o.IsTypeScriptDeclWithBlockContext,o.IsBeforeMultilineBlockContext),4),1),this.NewLineBeforeOpenBraceInControl=new r.Rule(r.RuleDescriptor.create2(this.ControlOpenBraceLeftTokenRange,17),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("placeOpenBraceOnNewLineForControlBlocks"),o.IsControlDeclContext,o.IsBeforeMultilineBlockContext),4),1),this.SpaceAfterSemicolonInFor=new r.Rule(r.RuleDescriptor.create3(25,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterSemicolonInForStatements"),o.IsNonJsxSameLineTokenContext,o.IsForContext),2)),this.NoSpaceAfterSemicolonInFor=new r.Rule(r.RuleDescriptor.create3(25,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterSemicolonInForStatements"),o.IsNonJsxSameLineTokenContext,o.IsForContext),8)),this.SpaceAfterOpenParen=new r.Rule(r.RuleDescriptor.create3(19,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),o.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeCloseParen=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,20),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),o.IsNonJsxSameLineTokenContext),2)),this.SpaceBetweenOpenParens=new r.Rule(r.RuleDescriptor.create1(19,19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),o.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBetweenParens=new r.Rule(r.RuleDescriptor.create1(19,20),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterOpenParen=new r.Rule(r.RuleDescriptor.create3(19,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeCloseParen=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,20),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),o.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterOpenBracket=new r.Rule(r.RuleDescriptor.create3(21,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),o.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeCloseBracket=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,22),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),o.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBetweenBrackets=new r.Rule(r.RuleDescriptor.create1(21,22),r.RuleOperation.create2(new r.RuleOperationContext(o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterOpenBracket=new r.Rule(r.RuleDescriptor.create3(21,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeCloseBracket=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,22),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),o.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterTemplateHeadAndMiddle=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([14,15]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),o.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterTemplateHeadAndMiddle=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([14,15]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),o.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBeforeTemplateMiddleAndTail=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.FromTokens([15,16])),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),o.IsNonJsxSameLineTokenContext),8)),this.SpaceBeforeTemplateMiddleAndTail=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.FromTokens([15,16])),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),o.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterOpenBraceInJsxExpression=new r.Rule(r.RuleDescriptor.create3(17,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),o.IsNonJsxSameLineTokenContext,o.IsJsxExpressionContext),8)),this.SpaceAfterOpenBraceInJsxExpression=new r.Rule(r.RuleDescriptor.create3(17,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),o.IsNonJsxSameLineTokenContext,o.IsJsxExpressionContext),2)),this.NoSpaceBeforeCloseBraceInJsxExpression=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,18),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),o.IsNonJsxSameLineTokenContext,o.IsJsxExpressionContext),8)),this.SpaceBeforeCloseBraceInJsxExpression=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,18),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),o.IsNonJsxSameLineTokenContext,o.IsJsxExpressionContext),2)),this.SpaceAfterAnonymousFunctionKeyword=new r.Rule(r.RuleDescriptor.create1(89,19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterFunctionKeywordForAnonymousFunctions"),o.IsFunctionDeclContext),2)),this.NoSpaceAfterAnonymousFunctionKeyword=new r.Rule(r.RuleDescriptor.create1(89,19),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterFunctionKeywordForAnonymousFunctions"),o.IsFunctionDeclContext),8)),this.NoSpaceAfterTypeAssertion=new r.Rule(r.RuleDescriptor.create3(29,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionDisabledOrUndefined("insertSpaceAfterTypeAssertion"),o.IsNonJsxSameLineTokenContext,o.IsTypeAssertionContext),8)),this.SpaceAfterTypeAssertion=new r.Rule(r.RuleDescriptor.create3(29,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(o.IsOptionEnabled("insertSpaceAfterTypeAssertion"),o.IsNonJsxSameLineTokenContext,o.IsTypeAssertionContext),2)),this.HighPriorityCommonRules=[this.IgnoreBeforeComment,this.IgnoreAfterLineComment,this.NoSpaceBeforeColon,this.SpaceAfterColon,this.NoSpaceBeforeQuestionMark,this.SpaceAfterQuestionMarkInConditionalOperator,this.NoSpaceAfterQuestionMark,this.NoSpaceBeforeDot,this.NoSpaceAfterDot,this.NoSpaceAfterUnaryPrefixOperator,this.NoSpaceAfterUnaryPreincrementOperator,this.NoSpaceAfterUnaryPredecrementOperator,this.NoSpaceBeforeUnaryPostincrementOperator,this.NoSpaceBeforeUnaryPostdecrementOperator,this.SpaceAfterPostincrementWhenFollowedByAdd,this.SpaceAfterAddWhenFollowedByUnaryPlus,this.SpaceAfterAddWhenFollowedByPreincrement,this.SpaceAfterPostdecrementWhenFollowedBySubtract,this.SpaceAfterSubtractWhenFollowedByUnaryMinus,this.SpaceAfterSubtractWhenFollowedByPredecrement,this.NoSpaceAfterCloseBrace,this.NewLineBeforeCloseBraceInBlockContext,this.SpaceAfterCloseBrace,this.SpaceBetweenCloseBraceAndElse,this.SpaceBetweenCloseBraceAndWhile,this.NoSpaceBetweenEmptyBraceBrackets,this.NoSpaceBetweenFunctionKeywordAndStar,this.SpaceAfterStarInGeneratorDeclaration,this.SpaceAfterFunctionInFuncDecl,this.NewLineAfterOpenBraceInBlockContext,this.SpaceAfterGetSetInMember,this.NoSpaceBetweenYieldKeywordAndStar,this.SpaceBetweenYieldOrYieldStarAndOperand,this.NoSpaceBetweenReturnAndSemicolon,this.SpaceAfterCertainKeywords,this.SpaceAfterLetConstInVariableDeclaration,this.NoSpaceBeforeOpenParenInFuncCall,this.SpaceBeforeBinaryKeywordOperator,this.SpaceAfterBinaryKeywordOperator,this.SpaceAfterVoidOperator,this.SpaceBetweenAsyncAndOpenParen,this.SpaceBetweenAsyncAndFunctionKeyword,this.NoSpaceBetweenTagAndTemplateString,this.SpaceBeforeJsxAttribute,this.SpaceBeforeSlashInJsxOpeningElement,this.NoSpaceBeforeGreaterThanTokenInJsxOpeningElement,this.NoSpaceBeforeEqualInJsxAttribute,this.NoSpaceAfterEqualInJsxAttribute,this.NoSpaceAfterModuleImport,this.SpaceAfterCertainTypeScriptKeywords,this.SpaceBeforeCertainTypeScriptKeywords,this.SpaceAfterModuleName,this.SpaceBeforeArrow,this.SpaceAfterArrow,this.NoSpaceAfterEllipsis,this.NoSpaceAfterOptionalParameters,this.NoSpaceBetweenEmptyInterfaceBraceBrackets,this.NoSpaceBeforeOpenAngularBracket,this.NoSpaceBetweenCloseParenAndAngularBracket,this.NoSpaceAfterOpenAngularBracket,this.NoSpaceBeforeCloseAngularBracket,this.NoSpaceAfterCloseAngularBracket,this.SpaceBeforeAt,this.NoSpaceAfterAt,this.SpaceAfterDecorator,this.NoSpaceBeforeNonNullAssertionOperator,this.NoSpaceAfterNewKeywordOnConstructorSignature],this.UserConfigurableRules=[this.SpaceAfterConstructor,this.NoSpaceAfterConstructor,this.SpaceAfterComma,this.NoSpaceAfterComma,this.SpaceAfterAnonymousFunctionKeyword,this.NoSpaceAfterAnonymousFunctionKeyword,this.SpaceAfterKeywordInControl,this.NoSpaceAfterKeywordInControl,this.SpaceAfterOpenParen,this.SpaceBeforeCloseParen,this.SpaceBetweenOpenParens,this.NoSpaceBetweenParens,this.NoSpaceAfterOpenParen,this.NoSpaceBeforeCloseParen,this.SpaceAfterOpenBracket,this.SpaceBeforeCloseBracket,this.NoSpaceBetweenBrackets,this.NoSpaceAfterOpenBracket,this.NoSpaceBeforeCloseBracket,this.SpaceAfterOpenBrace,this.SpaceBeforeCloseBrace,this.NoSpaceBetweenEmptyBraceBrackets,this.NoSpaceAfterOpenBrace,this.NoSpaceBeforeCloseBrace,this.SpaceAfterTemplateHeadAndMiddle,this.SpaceBeforeTemplateMiddleAndTail,this.NoSpaceAfterTemplateHeadAndMiddle,this.NoSpaceBeforeTemplateMiddleAndTail,this.SpaceAfterOpenBraceInJsxExpression,this.SpaceBeforeCloseBraceInJsxExpression,this.NoSpaceAfterOpenBraceInJsxExpression,this.NoSpaceBeforeCloseBraceInJsxExpression,this.SpaceAfterSemicolonInFor,this.NoSpaceAfterSemicolonInFor,this.SpaceBeforeBinaryOperator,this.SpaceAfterBinaryOperator,this.NoSpaceBeforeBinaryOperator,this.NoSpaceAfterBinaryOperator,this.SpaceBeforeOpenParenInFuncDecl,this.NoSpaceBeforeOpenParenInFuncDecl,this.NewLineBeforeOpenBraceInControl,this.NewLineBeforeOpenBraceInFunction,this.NewLineBeforeOpenBraceInTypeScriptDeclWithBlock,this.SpaceAfterTypeAssertion,this.NoSpaceAfterTypeAssertion],this.LowPriorityCommonRules=[this.NoSpaceBeforeSemicolon,this.SpaceBeforeOpenBraceInControl,this.SpaceBeforeOpenBraceInFunction,this.SpaceBeforeOpenBraceInTypeScriptDeclWithBlock,this.NoSpaceBeforeComma,this.NoSpaceBeforeOpenBracket,this.NoSpaceAfterCloseBracket,this.SpaceAfterSemicolon,this.SpaceBetweenStatements,this.SpaceAfterTryFinally],n.Debug.isDebugging)for(var e in this){var t=this[e];t instanceof r.Rule&&(t.debugName=e)}}var r,e;r=n.formatting||(n.formatting={}),o.IsOptionEnabled=function(t){return function(e){return e.options&&e.options.hasOwnProperty(t)&&!!e.options[t]}},o.IsOptionDisabled=function(t){return function(e){return e.options&&e.options.hasOwnProperty(t)&&!e.options[t]}},o.IsOptionDisabledOrUndefined=function(t){return function(e){return!e.options||!e.options.hasOwnProperty(t)||!e.options[t]}},o.isOptionDisabledOrUndefinedOrTokensOnSameLine=function(t){return function(e){return!e.options||!e.options.hasOwnProperty(t)||!e.options[t]||e.TokensAreOnSameLine()}},o.IsOptionEnabledOrUndefined=function(t){return function(e){return!e.options||!e.options.hasOwnProperty(t)||!!e.options[t]}},o.IsForContext=function(e){return 214===e.contextNode.kind},o.IsNotForContext=function(e){return!o.IsForContext(e)},o.IsBinaryOpContext=function(e){switch(e.contextNode.kind){case 194:case 195:case 202:case 246:case 242:case 158:case 166:case 167:return!0;case 176:case 231:case 237:case 226:case 146:case 264:case 149:case 148:return 58===e.currentTokenSpan.kind||58===e.nextTokenSpan.kind;case 215:case 145:return 92===e.currentTokenSpan.kind||92===e.nextTokenSpan.kind;case 216:return 142===e.currentTokenSpan.kind||142===e.nextTokenSpan.kind}return!1},o.IsNotBinaryOpContext=function(e){return!o.IsBinaryOpContext(e)},o.IsConditionalOperatorContext=function(e){return 195===e.contextNode.kind},o.IsSameLineTokenOrBeforeBlockContext=function(e){return e.TokensAreOnSameLine()||o.IsBeforeBlockContext(e)},o.IsBraceWrappedContext=function(e){return 174===e.contextNode.kind||o.IsSingleLineBlockContext(e)},o.IsBeforeMultilineBlockContext=function(e){return o.IsBeforeBlockContext(e)&&!(e.NextNodeAllOnSameLine()||e.NextNodeBlockIsOnOneLine())},o.IsMultilineBlockContext=function(e){return o.IsBlockContext(e)&&!(e.ContextNodeAllOnSameLine()||e.ContextNodeBlockIsOnOneLine())},o.IsSingleLineBlockContext=function(e){return o.IsBlockContext(e)&&(e.ContextNodeAllOnSameLine()||e.ContextNodeBlockIsOnOneLine())},o.IsBlockContext=function(e){return o.NodeIsBlockContext(e.contextNode)},o.IsBeforeBlockContext=function(e){return o.NodeIsBlockContext(e.nextTokenParent)},o.NodeIsBlockContext=function(e){if(o.NodeIsTypeScriptDeclWithBlockContext(e))return!0;switch(e.kind){case 207:case 235:case 178:case 234:return!0}return!1},o.IsFunctionDeclContext=function(e){switch(e.contextNode.kind){case 228:case 151:case 150:case 153:case 154:case 155:case 186:case 152:case 187:case 230:return!0}return!1},o.IsFunctionDeclarationOrFunctionExpressionContext=function(e){return 228===e.contextNode.kind||186===e.contextNode.kind},o.IsTypeScriptDeclWithBlockContext=function(e){return o.NodeIsTypeScriptDeclWithBlockContext(e.contextNode)},o.NodeIsTypeScriptDeclWithBlockContext=function(e){switch(e.kind){case 229:case 199:case 230:case 232:case 163:case 233:case 244:case 245:case 238:case 241:return!0}return!1},o.IsAfterCodeBlockContext=function(e){switch(e.currentTokenParent.kind){case 229:case 233:case 232:case 260:case 234:case 221:return!0;case 207:var t=e.currentTokenParent.parent;if(!t||187!==t.kind&&186!==t.kind)return!0}return!1},o.IsControlDeclContext=function(e){switch(e.contextNode.kind){case 211:case 221:case 214:case 215:case 216:case 213:case 224:case 212:case 220:case 260:return!0;default:return!1}},o.IsObjectContext=function(e){return 178===e.contextNode.kind},o.IsFunctionCallContext=function(e){return 181===e.contextNode.kind},o.IsNewContext=function(e){return 182===e.contextNode.kind},o.IsFunctionCallOrNewContext=function(e){return o.IsFunctionCallContext(e)||o.IsNewContext(e)},o.IsPreviousTokenNotComma=function(e){return 26!==e.currentTokenSpan.kind},o.IsNextTokenNotCloseBracket=function(e){return 22!==e.nextTokenSpan.kind},o.IsArrowFunctionContext=function(e){return 187===e.contextNode.kind},o.IsNonJsxSameLineTokenContext=function(e){return e.TokensAreOnSameLine()&&10!==e.contextNode.kind},o.IsNonJsxElementContext=function(e){return 249!==e.contextNode.kind},o.IsJsxExpressionContext=function(e){return 256===e.contextNode.kind},o.IsNextTokenParentJsxAttribute=function(e){return 253===e.nextTokenParent.kind},o.IsJsxAttributeContext=function(e){return 253===e.contextNode.kind},o.IsJsxSelfClosingElementContext=function(e){return 250===e.contextNode.kind},o.IsNotBeforeBlockInFunctionDeclarationContext=function(e){return!o.IsFunctionDeclContext(e)&&!o.IsBeforeBlockContext(e)},o.IsEndOfDecoratorContextOnSameLine=function(e){return e.TokensAreOnSameLine()&&e.contextNode.decorators&&o.NodeIsInDecoratorContext(e.currentTokenParent)&&!o.NodeIsInDecoratorContext(e.nextTokenParent)},o.NodeIsInDecoratorContext=function(e){for(;n.isPartOfExpression(e);)e=e.parent;return 147===e.kind},o.IsStartOfVariableDeclarationList=function(e){return 227===e.currentTokenParent.kind&&e.currentTokenParent.getStart(e.sourceFile)===e.currentTokenSpan.pos},o.IsNotFormatOnEnter=function(e){return 2!==e.formattingRequestKind},o.IsModuleDeclContext=function(e){return 233===e.contextNode.kind},o.IsObjectTypeContext=function(e){return 163===e.contextNode.kind},o.IsConstructorSignatureContext=function(e){return 156===e.contextNode.kind},o.IsTypeArgumentOrParameterOrAssertion=function(e,t){if(27!==e.kind&&29!==e.kind)return!1;switch(t.kind){case 159:case 184:case 231:case 229:case 199:case 230:case 228:case 186:case 187:case 151:case 150:case 155:case 156:case 181:case 182:case 201:return!0;default:return!1}},o.IsTypeArgumentOrParameterOrAssertionContext=function(e){return o.IsTypeArgumentOrParameterOrAssertion(e.currentTokenSpan,e.currentTokenParent)||o.IsTypeArgumentOrParameterOrAssertion(e.nextTokenSpan,e.nextTokenParent)},o.IsTypeAssertionContext=function(e){return 184===e.contextNode.kind},o.IsVoidOpContext=function(e){return 105===e.currentTokenSpan.kind&&190===e.currentTokenParent.kind},o.IsYieldOrYieldStarWithOperand=function(e){return 197===e.contextNode.kind&&void 0!==e.contextNode.expression},o.IsNonNullAssertionContext=function(e){return 203===e.contextNode.kind},e=o,r.Rules=e}(ts=ts||{}),function(o){var i,e,t=o.formatting||(o.formatting={});function n(e){this.mapRowLength=143,this.map=new Array(this.mapRowLength*this.mapRowLength);for(var t=new Array(this.map.length),n=0,o=e;n<o.length;n++){var r=o[n];this.FillRule(r,t)}}n.prototype.GetRuleBucketIndex=function(e,t){return o.Debug.assert(e<=142&&t<=142,"Must compute formatting context from tokens"),e*this.mapRowLength+t},n.prototype.FillRule=function(o,r){var i=this,s=o.Descriptor.LeftTokenRange.isSpecific()&&o.Descriptor.RightTokenRange.isSpecific();o.Descriptor.LeftTokenRange.GetTokens().forEach(function(n){o.Descriptor.RightTokenRange.GetTokens().forEach(function(e){var e=i.GetRuleBucketIndex(n,e),t=i.map[e];(t=void 0===t?i.map[e]=new a:t).AddRule(o,s,r,e)})})},n.prototype.GetRule=function(e){var t=this.GetRuleBucketIndex(e.currentTokenSpan.kind,e.nextTokenSpan.kind),t=this.map[t];if(t)for(var n=0,o=t.Rules();n<o.length;n++){var r=o[n];if(r.Operation.Context.InContext(e))return r}},t.RulesMap=n,(e=i=i||{})[e.IgnoreRulesSpecific=0]="IgnoreRulesSpecific",e[e.IgnoreRulesAny=5]="IgnoreRulesAny",e[e.ContextRulesSpecific=10]="ContextRulesSpecific",e[e.ContextRulesAny=15]="ContextRulesAny",e[e.NoContextRulesSpecific=20]="NoContextRulesSpecific",e[e.NoContextRulesAny=25]="NoContextRulesAny",r.prototype.GetInsertionIndex=function(e){for(var t=0,n=0,o=this.rulesInsertionIndexBitmap;n<=e;)t+=31&o,o>>=5,n+=5;return t},r.prototype.IncreaseInsertionIndex=function(e){var t=this.rulesInsertionIndexBitmap>>e&31,n=(o.Debug.assert((31&++t)==t,"Adding more rules into the sub-bucket than allowed. Maximum allowed is 32 rules."),this.rulesInsertionIndexBitmap&~(31<<e));this.rulesInsertionIndexBitmap=n|=t<<e};var s=r;function r(){this.rulesInsertionIndexBitmap=0}t.RulesBucketConstructionState=s,l.prototype.Rules=function(){return this.rules},l.prototype.AddRule=function(e,t,n,o){var t=1===e.Operation.Action?t?i.IgnoreRulesSpecific:i.IgnoreRulesAny:e.Operation.Context.IsAny()?t?i.NoContextRulesSpecific:i.NoContextRulesAny:t?i.ContextRulesSpecific:i.ContextRulesAny,r=n[o],n=(r=void 0===r?n[o]=new s:r).GetInsertionIndex(t);this.rules.splice(n,0,e),r.IncreaseInsertionIndex(t)};var a=l;function l(){this.rules=[]}t.RulesBucket=a}(ts=ts||{}),function(i){for(var e=(e=i.formatting||(i.formatting={})).Shared||(e.Shared={}),n=[],t=0;t<=142;t++)n.push(t);d.prototype.GetTokens=function(){return this.tokens},d.prototype.Contains=function(e){return 0<=this.tokens.indexOf(e)},d.prototype.isSpecific=function(){return!0};var s=d,o=(u.prototype.GetTokens=function(){return[this.token]},u.prototype.Contains=function(e){return e===this.token},u.prototype.isSpecific=function(){return!0},u),r=(c.prototype.GetTokens=function(){return n},c.prototype.Contains=function(){return!0},c.prototype.toString=function(){return"[allTokens]"},c.prototype.isSpecific=function(){return!1},c),a=(l.prototype.GetTokens=function(){var t=this;return n.filter(function(e){return e!==t.except})},l.prototype.Contains=function(e){return e!==this.except},l.prototype.isSpecific=function(){return!1},l);function l(e){this.except=e}function c(){}function u(e){this.token=e}function d(e){this.tokens=e=void 0===e?[]:e}(e=e.TokenRange||(e.TokenRange={})).FromToken=function(e){return new o(e)},e.FromTokens=function(e){return new s(e)},e.FromRange=function(e,t,n){void 0===n&&(n=[]);for(var o=[],r=e;r<=t;r++)i.indexOf(n,r)<0&&o.push(r);return new s(o)},e.AnyExcept=function(e){return new a(e)},e.Any=new r,e.AnyIncludingMultilineComments=e.FromTokens(n.concat([3])),e.Keywords=e.FromRange(72,142),e.BinaryOperators=e.FromRange(27,70),e.BinaryKeywordOperators=e.FromTokens([92,93,142,118,126]),e.UnaryPrefixOperators=e.FromTokens([43,44,52,51]),e.UnaryPrefixExpressions=e.FromTokens([8,71,19,21,17,99,94]),e.UnaryPreincrementExpressions=e.FromTokens([71,19,99,94]),e.UnaryPostincrementExpressions=e.FromTokens([71,20,22,94]),e.UnaryPredecrementExpressions=e.FromTokens([71,19,99,94]),e.UnaryPostdecrementExpressions=e.FromTokens([71,20,22,94]),e.Comments=e.FromTokens([2,3]),e.TypeNames=e.FromTokens([71,133,136,122,137,105,119])}(ts=ts||{}),function(t){function e(){this.globalRules=new n.Rules;var e=this.globalRules.HighPriorityCommonRules.concat(this.globalRules.UserConfigurableRules).concat(this.globalRules.LowPriorityCommonRules);this.rulesMap=new n.RulesMap(e)}var n;n=t.formatting||(t.formatting={}),e.prototype.getRulesMap=function(){return this.rulesMap},e.prototype.getFormatOptions=function(){return this.options},e.prototype.ensureUpToDate=function(e){this.options&&t.compareDataObjects(this.options,e)||(this.options=t.clone(e))},n.RulesProvider=e}(ts=ts||{}),function(X){function i(e,t,n){n=X.findPrecedingToken(e,n);return n&&n.kind===t&&e===n.getEnd()?n:void 0}function s(e){for(var t=e;t&&t.parent&&t.parent.end===e.end&&!function(e,t){switch(e.kind){case 229:case 230:return X.rangeContainsRange(e.members,t);case 233:var n=e.body;return n&&234===n.kind&&X.rangeContainsRange(n.statements,t);case 265:case 207:case 234:return X.rangeContainsRange(e.statements,t);case 260:return X.rangeContainsRange(e.block.statements,t)}return}(t.parent,t);)t=t.parent;return t}function r(e,t,n,o,r){return e?a({pos:X.getLineStartPositionForPosition(e.getStart(t),t),end:e.end},t,n,o,r):[]}function a(i,s,a,l,c){o=i;var o,r,e,t,n,u,d=function e(t){var n=X.forEachChild(t,function(e){return X.startEndContainsRange(e.getStart(r),e.end,o)&&e});if(n){n=e(n);if(n)return n}return t}(r=s);return Y.getFormattingScanner(s.text,s.languageVariant,(t=i,n=s,(u=(e=d).getStart(n))===t.pos&&e.end===t.end?u:!(u=X.findPrecedingToken(t.pos,n))||u.end>=t.pos?e.pos:u.end),i.end,function(e){return p(i,d,Y.SmartIndenter.getIndentationForNode(d,i,s,a),function(e,t,n){for(var o,r=-1;e;){var i=n.getLineAndCharacterOfPosition(e.getStart(n)).line;if(-1!==r&&i!==r)break;if(Y.SmartIndenter.shouldIndentChildNode(e,o))return t.indentSize;r=i,e=(o=e).parent}return 0}(d,a,s),e,a,l,c,(e=s.parseDiagnostics,n=i,e.length&&(o=e.filter(function(e){return X.rangeOverlapsWithStartEnd(n,e.start,e.start+e.length)}).sort(function(e,t){return e.start-t.start})).length?(r=0,function(e){for(;;){if(r>=o.length)return!1;var t=o[r];if(e.end<=t.start)return!1;if(X.startEndOverlapsWithStartEnd(e.pos,e.end,t.start,t.start+t.length))return!0;r++}}):t),s);function t(){return!1}var n,o,r})}function p(R,e,t,n,P,L,p,o,M,F){var U,g,h,H,V,_=new Y.FormattingContext(F,o,L),r=[];return P.advance(),P.isOnToken()&&(o=F.getLineAndCharacterOfPosition(e.getStart(F)).line,function g(h,e,p,t,n,o){if(X.rangeOverlapsWithStartEnd(R,h.getStart(F),h.getEnd())){var _=k(h,p,n,o),O=e;for(X.forEachChild(h,function(e){m(e,-1,h,_,p,t,!1)},function(e){var t,n=e,o=h,r=p,i=_,s=(X.Debug.assert(X.isNodeArray(n)),function(e,t){switch(e.kind){case 152:case 228:case 186:case 151:case 150:case 187:if(e.typeParameters===t)return 27;if(e.parameters===t)return 19;break;case 181:case 182:if(e.typeArguments===t)return 27;if(e.arguments===t)return 19;break;case 159:if(e.typeArguments===t)return 27}return 0}(o,n)),e=function(){switch(s){case 19:return 20;case 27:return 29}return 0}(),a=i,l=r;if(0!==s)for(;P.isOnToken()&&!((c=P.readTokenInfo(o)).token.end>n.pos);)c.token.kind===s?(l=F.getLineAndCharacterOfPosition(c.token.pos).line,t=y(c.token,l,-1,o,i,r),f(c,o,a=k(o,r,t.indentation,t.delta),o)):f(c,o,i,o);for(var c,u=-1,d=0;d<n.length;d++)u=m(n[d],u,h,a,l,l,!0,0===d);0!==e&&P.isOnToken()&&(c=P.readTokenInfo(o)).token.kind===e&&X.rangeContainsRange(o,c.token)&&f(c,o,a,o)});P.isOnToken();){var r=P.readTokenInfo(h);if(r.token.end>h.end)break;f(r,h,_,h)}}function m(e,t,n,o,r,i,s,a){var l,c=e.getStart(F),u=F.getLineAndCharacterOfPosition(c).line,d=u,p=(e.decorators&&(d=F.getLineAndCharacterOfPosition(X.getNonDecoratorTokenPosOfNode(e,F)).line),-1);if(s&&X.rangeContainsRange(R,n)&&-1!==(p=function(e,t,n,o,r){if(X.rangeOverlapsWithStartEnd(o,e,t)||X.rangeContainsStartEnd(o,e,t)){if(-1!==r)return r}else{var o=F.getLineAndCharacterOfPosition(e).line,t=X.getLineStartPositionForPosition(e,F),r=Y.SmartIndenter.findFirstNonWhitespaceColumn(t,e,F,L);if(o!==n||e===r)return r<(t=Y.SmartIndenter.getBaseIndentation(L))?t:r}return-1}(c,e.end,r,R,t))&&(t=p),X.rangeOverlapsWithStartEnd(R,e.pos,e.end)){if(0!==e.getFullWidth()){for(;P.isOnToken()&&!((l=P.readTokenInfo(h)).token.end>c);)f(l,h,o,h);P.isOnToken()&&(X.isToken(e)&&10!==e.kind?(l=P.readTokenInfo(e),X.Debug.assert(l.token.end===e.end,"Token end is child end"),f(l,h,o,e)):(s=147===e.kind?u:i,r=y(e,u,p,h,o,s),g(e,O,u,d,r.indentation,r.delta),O=h,a&&177===n.kind&&-1===t&&(t=r.indentation)))}}else e.end<R.pos&&P.skipToEndOf(e);return t}function f(e,t,n,o){X.Debug.assert(X.rangeContainsRange(t,e.token));var r,i,s=P.lastTrailingTriviaWasNewLine(),a=!1,l=(e.leadingTrivia&&W(e.leadingTrivia,t,O,n),X.rangeContainsRange(R,e.token)),c=F.getLineAndCharacterOfPosition(e.token.pos);if(l&&(r=M(e.token),u=U,i=G(e.token,c,t,O,n),a=!r&&(void 0!==i?i:(r=u&&F.getLineAndCharacterOfPosition(u.end).line,s&&c.line!==r))),e.trailingTrivia&&W(e.trailingTrivia,t,O,n),a){var u=l&&!M(e.token)?n.getIndentationForToken(c.line,e.token.kind,o):-1,d=!0;if(e.leadingTrivia)for(var p=n.getIndentationForComment(e.token.kind,u,o),g=0,h=e.leadingTrivia;g<h.length;g++){var _=h[g],m=X.rangeContainsRange(R,_);switch(_.kind){case 3:if(m){f=void 0;y=void 0;k=void 0;b=void 0;v=void 0;T=void 0;E=void 0;S=void 0;C=void 0;x=void 0;B=void 0;A=void 0;I=void 0;D=void 0;N=void 0;w=void 0;var f=_;var y=p;var k=!d;var b,v=F.getLineAndCharacterOfPosition(f.pos).line,T=F.getLineAndCharacterOfPosition(f.end).line;if(v!==T){b=[];for(var E=f.pos,S=v;S<T;S++){var C=X.getEndLinePosition(S,F);b.push({pos:E,end:C}),E=X.getStartPositionOfLine(S+1,F)}b.push({pos:E,end:f.end});var x=X.getStartPositionOfLine(v,F),B=Y.SmartIndenter.findFirstNonWhitespaceCharacterAndColumn(x,b[0].pos,F,L);if(y!==B.column){x=0;k&&(x=1,v++);for(var A=y-B.column,I=x;I<b.length;I++,v++){var D=X.getStartPositionOfLine(v,F),N=0===I?B:Y.SmartIndenter.findFirstNonWhitespaceCharacterAndColumn(b[I].pos,b[I].end,F,L),w=N.column+A;0<w?(w=$(w,L),z(D,N.character,w)):j(D,N.character)}}}else k||K(f.pos,y,!1)}d=!1;break;case 2:d&&m&&K(_.pos,p,!1),d=!1;break;case 4:d=!0}}-1!==u&&d&&(K(e.token.pos,u,i),H=c.line,V=u)}P.advance(),O=t}}(e,e,o=o,o=e.decorators?F.getLineAndCharacterOfPosition(X.getNonDecoratorTokenPosOfNode(e,F)).line:o,t,n)),P.isOnToken()||(o=P.getCurrentLeadingTrivia())&&(W(o,e,e,void 0),t=U?U.end:R.pos,m(F.getLineAndCharacterOfPosition(t).line,F.getLineAndCharacterOfPosition(R.end).line+1,U)),r;function y(e,t,n,o,r,i){var s=Y.SmartIndenter.shouldIndentChildNode(e)?L.indentSize:0;return i===t?(n=t===H?V:r.getIndentation(),s=Math.min(L.indentSize,r.getDelta(e)+s)):-1===n&&(n=Y.SmartIndenter.childStartsOnTheSameLineWithElseInIfStatement(o,e,t,F)?r.getIndentation():r.getIndentation()+r.getDelta(e)),{indentation:n,delta:s}}function k(o,r,i,s){return{getIndentationForComment:function(e,t,n){switch(e){case 18:case 22:case 20:return i+a(s,n)}return-1!==t?t:i},getIndentationForToken:function(e,t,n){if(r!==e&&o.decorators&&t===function(e){if(e.modifiers&&e.modifiers.length)return e.modifiers[0].kind;switch(e.kind){case 229:return 75;case 230:return 109;case 228:return 89;case 232:return 232;case 153:return 125;case 154:return 135;case 151:if(e.asteriskToken)return 39;case 149:case 146:return X.getNameOfDeclaration(e).kind}}(o))return i;switch(t){case 17:case 18:case 19:case 20:case 82:case 106:case 57:return i;case 41:case 29:if(251===n.kind||252===n.kind||250===n.kind)return i;break;case 21:case 22:if(172!==n.kind)return i}return r!==e?i+a(s,n):i},getIndentation:function(){return i},getDelta:function(e){return a(s,e)},recomputeIndentation:function(e){o.parent&&Y.SmartIndenter.shouldIndentChildNode(o.parent,o)&&(e?i+=L.indentSize:i-=L.indentSize,s=Y.SmartIndenter.shouldIndentChildNode(o)?L.indentSize:0)}};function a(e,t){return Y.SmartIndenter.nodeWillIndentChild(o,t,!0)?e:0}}function W(e,t,n,o){for(var r=0,i=e;r<i.length;r++){var s=i[r];X.isComment(s.kind)&&X.rangeContainsRange(R,s)&&G(s,F.getLineAndCharacterOfPosition(s.pos),t,n,o)}}function G(e,t,n,o,r){var i,s,a,l,c,u,d;return M(e)||(U?(i=e,s=t.line,a=n,l=U,c=h,u=g,r=r,_.updateContext(l,u,i,a,o),u=p.getRulesMap().GetRule(_),a=!(u&&(function(e,t,n,o,r){switch(e.Operation.Action){case 1:return;case 8:t.end!==o.pos&&j(t.end,o.pos-t.end);break;case 4:1!==e.Flag&&n!==r||1!=r-n&&z(t.end,o.pos-t.end,L.newLineCharacter);break;case 2:if(1!==e.Flag&&n!==r)return;1==o.pos-t.end&&32===F.text.charCodeAt(t.end)||z(t.end,o.pos-t.end," ")}}(u,l,c,i,s),10&u.Operation.Action&&s!==c?(d=!1,a.getStart(F)===i.pos&&r.recomputeIndentation(!1)):4&u.Operation.Action&&s===c&&(d=!0,a.getStart(F)===i.pos)&&r.recomputeIndentation(!0),8&u.Operation.Action||1===u.Flag)),s!==c&&a&&m(c,s,l),i=d):m(F.getLineAndCharacterOfPosition(R.pos).line,t.line)),U=e,g=n,h=t.line,i}function K(e,t,n){var o=$(t,L);n?z(e,0,o):(n=F.getLineAndCharacterOfPosition(e),t===function(e,t){for(var n=0,o=0;o<t;o++)9===F.text.charCodeAt(e+o)?n+=L.tabSize-n%L.tabSize:n++;return n}(e=X.getStartPositionOfLine(n.line,F),n.character)&&o===F.text.substr(e,o.length)||z(e,n.character,o))}function m(e,t,n){for(var o=e;o<t;o++){var r,i=X.getStartPositionOfLine(o,F),s=X.getEndLinePosition(o,F);n&&(X.isComment(n.kind)||X.isStringOrRegularExpressionOrTemplateLiteral(n.kind))&&n.pos<=s&&n.end>s||-1!==(r=function(e,t){for(var n=t;e<=n&&X.isWhiteSpaceSingleLine(F.text.charCodeAt(n));)n--;return n!==t?n+1:-1}(i,s))&&(X.Debug.assert(r===i||!X.isWhiteSpaceSingleLine(F.text.charCodeAt(r-1))),j(r,s+1-r))}}function i(e,t,n){return{span:X.createTextSpan(e,t),newText:n}}function j(e,t){t&&r.push(i(e,t,""))}function z(e,t,n){(t||n)&&r.push(i(e,t,n))}}function $(e,t){var n,o,r;return l&&l.tabSize===t.tabSize&&l.indentSize===t.indentSize||(l={tabSize:t.tabSize,indentSize:t.indentSize},c=u=void 0),t.convertTabsToSpaces?(r=void 0,n=Math.floor(e/t.indentSize),o=e%t.indentSize,void 0===(u=u||[])[n]?(r=i(" ",t.indentSize*n),u[n]=r):r=u[n]):(o=e-(n=Math.floor(e/t.tabSize))*t.tabSize,(r=void 0)===(c=c||[])[n]?c[n]=r=i("\t",n):r=c[n]),o?r+i(" ",o):r;function i(e,t){for(var n="",o=0;o<t;o++)n+=e;return n}}var Y,l,c,u;(Y=X.formatting||(X.formatting={})).formatOnEnter=function(e,t,n,o){e=t.getLineAndCharacterOfPosition(e).line;if(0===e)return[];for(var r=X.getEndLinePosition(e,t);X.isWhiteSpaceSingleLine(t.text.charCodeAt(r));)r--;return X.isLineBreak(t.text.charCodeAt(r))&&r--,a({pos:X.getStartPositionOfLine(e-1,t),end:r+1},t,o,n,2)},Y.formatOnSemicolon=function(e,t,n,o){return r(s(i(e,25,t)),t,o,n,3)},Y.formatOnOpeningCurly=function(e,t,n,o){var r=i(e,17,t);return r?(r=s(r.parent),a({pos:X.getLineStartPositionForPosition(r.getStart(t),t),end:e},t,o,n,4)):[]},Y.formatOnClosingCurly=function(e,t,n,o){return r(s(i(e,18,t)),t,o,n,5)},Y.formatDocument=function(e,t,n){return a({pos:0,end:e.text.length},e,n,t,0)},Y.formatSelection=function(e,t,n,o,r){return a({pos:X.getLineStartPositionForPosition(e,n),end:t},n,r,o,1)},Y.formatNodeGivenIndentation=function(t,n,e,o,r,i){var s={pos:0,end:n.text.length};return Y.getFormattingScanner(n.text,e,s.pos,s.end,function(e){return p(s,t,o,r,e,i.getFormatOptions(),i,1,function(e){return!1},n)})},Y.getRangeOfEnclosingComment=function(e,t,n,o,r,i){if(!((r=void 0===r?X.getTokenAtPosition(e,t,!1):r).getStart(e)<=t&&t<r.getEnd())){o=(o=void 0===o?X.findPrecedingToken(t,e):o)&&X.getTrailingCommentRanges(e.text,o.end),r=X.getLeadingCommentRangesOfNode(r,e),o=o&&r?o.concat(r):o||r;if(o)for(var s=0,a=o;s<a.length;s++){var l=a[s];if(l.pos<t&&t<l.end||t===l.end&&(2===l.kind||t===e.getFullWidth()))return 3!==l.kind&&n||i&&!i(l)?void 0:l}}},Y.getIndentationString=$}(ts=ts||{}),function(b){function v(e){return e.baseIndentSize||0}function T(e,t,n,o,r,i){for(var s,a,l,c,u,d=e.parent;d;){var p,g=!0;if((g=n?(p=e.getStart(r))<n.pos||p>n.end:g)&&-1!==(h=S(e,r,i)))return h+o;var h,_=(p=function(e,t,n){t=y(t,n),t=t?t.pos:e.getStart(n);return n.getLineAndCharacterOfPosition(t)}(d,e,r)).line===t.line||f(d,e,t.line,r);if(g){if(-1!==(g=e,s=d,a=t,l=_,c=r,u=i,h=!b.isDeclaration(g)&&!b.isStatementButNotDeclaration(g)||265!==s.kind&&l?-1:k(a,c,u)))return h+o;if(-1!==(h=C(e,r,i)))return h+o}I(d,e)&&!_&&(o+=i.indentSize);g=m(d,e,t.line,r),d=(e=d).parent;t=g?r.getLineAndCharacterOfPosition(e.getStart()):p}return o+v(i)}function E(e,t){return t.getLineAndCharacterOfPosition(e.getStart(t))}function m(e,t,n,o){return!(!b.isCallExpression(e)||!b.contains(e.arguments,t))&&(t=e.expression.getEnd(),b.getLineAndCharacterOfPosition(o,t).line===n)}function f(e,t,n,o){return 211===e.kind&&e.elseStatement===t&&(t=b.findChildOfKind(e,82,o),b.Debug.assert(void 0!==t),E(t,o).line===n)}function o(e,t,n){return e&&b.rangeContainsStartEnd(e,t,n)?e:void 0}function y(e,t){if(e.parent)switch(e.parent.kind){case 159:return o(e.parent.typeArguments,e.getStart(t),e.getEnd());case 178:return e.parent.properties;case 177:return e.parent.elements;case 228:case 186:case 187:case 151:case 150:case 155:case 152:case 161:case 156:var n=e.getStart(t);return o(e.parent.typeParameters,n,e.getEnd())||o(e.parent.parameters,n,e.getEnd());case 229:return o(e.parent.typeParameters,e.getStart(t),e.getEnd());case 182:case 181:return n=e.getStart(t),o(e.parent.typeArguments,n,e.getEnd())||o(e.parent.arguments,n,e.getEnd());case 227:return o(e.parent.declarations,e.getStart(t),e.getEnd());case 241:case 245:return o(e.parent.elements,e.getStart(t),e.getEnd())}}function S(e,t,n){var o=y(e,t);return o&&-1!==(e=b.indexOf(o=o,e))?x(o,e,t,n):-1}function C(e,t,n){var o;return 20===e.kind||!e.parent||!b.isCallOrNewExpression(e.parent)||e.parent.expression===e||(e=e.parent.expression)===(o=function(e){for(;;)switch(e.kind){case 181:case 182:case 179:case 180:e=e.expression;break;default:return e}}(e))||(e=t.getLineAndCharacterOfPosition(e.end),o=t.getLineAndCharacterOfPosition(o.end),e.line===o.line)?-1:k(e,t,n)}function x(e,t,n,o){b.Debug.assert(0<=t&&t<e.length);for(var r=E(e[t],n),i=t-1;0<=i;i--)if(26!==e[i].kind){if(n.getLineAndCharacterOfPosition(e[i].end).line!==r.line)return k(r,n,o);r=E(e[i],n)}return-1}function k(e,t,n){var o=t.getPositionOfLineAndCharacter(e.line,0);return A(o,o+e.character,t,n)}function B(e,t,n,o){for(var r=0,i=0,s=e;s<t;s++){var a=n.text.charCodeAt(s);if(!b.isWhiteSpaceSingleLine(a))break;9===a?i+=o.tabSize+i%o.tabSize:i++,r++}return{column:i,character:r}}function A(e,t,n,o){return B(e,t,n,o).column}function n(e,t,n){var o=t?t.kind:0;switch(e.kind){case 212:case 213:case 215:case 216:case 214:case 211:case 228:case 186:case 151:case 187:case 152:case 153:case 154:return 207!==o;case 244:return 245!==o;case 238:return 239!==o||t.namedBindings&&241!==t.namedBindings.kind;case 249:return 252!==o}return n}function I(e,t){return function(){switch(e.kind){case 210:case 229:case 199:case 230:case 232:case 231:case 177:case 207:case 234:case 178:case 163:case 172:case 165:case 235:case 258:case 257:case 185:case 179:case 181:case 182:case 208:case 226:case 243:case 219:case 195:case 175:case 174:case 251:case 250:case 256:case 150:case 155:case 156:case 146:case 160:case 161:case 168:case 183:case 191:case 245:case 241:case 246:case 242:case 261:case 149:return!0}return!1}()||n(e,t,!1)}var D,N;D=b.formatting||(b.formatting={}),(N=D.SmartIndenter||(D.SmartIndenter={})).getIndentation=function(e,t,n,o){if(void 0===o&&(o=!1),e>t.text.length)return v(n);if(n.indentStyle===b.IndentStyle.None)return 0;var r=b.findPrecedingToken(e,t),i=D.getRangeOfEnclosingComment(t,e,!0,r||null);if(i)return a=b.getLineAndCharacterOfPosition(t,e).line-1,i=b.getLineAndCharacterOfPosition(t,i.pos).line,b.Debug.assert(0<=i),a<=i?A(b.getStartPositionOfLine(i,t),e,t,n):(l=(a=B(i=b.getStartPositionOfLine(a,t),e,t,n)).column,a=a.character,0!==l&&42===t.text.charCodeAt(i+a)?l-1:l);if(!r)return v(n);if(b.isStringOrRegularExpressionOrTemplateLiteral(r.kind)&&r.getStart(t)<=e&&e<r.end)return 0;var s,a,l,c=t.getLineAndCharacterOfPosition(e).line;if(n.indentStyle===b.IndentStyle.Block){for(var u=e;0<u;){var d=t.text.charCodeAt(u);if(!b.isWhiteSpaceLike(d))break;u--}var i=b.getLineStartPositionForPosition(u,t);return N.findFirstNonWhitespaceColumn(i,u,t,n)}if(26===r.kind&&194!==r.parent.kind&&-1!==(a=t,l=n,p=(i=b.findListItemInfo(r))&&0<i.listItemIndex?x(i.list.getChildren(),i.listItemIndex-1,a,l):-1))return p;for(var p,g,h,_,m=r;m;){if(b.positionBelongsToNode(m,e,t)&&I(m,s)){var f=E(m,t),y=(g=r,y=m,h=c,_=t,(g=b.findNextToken(g,y))?17===g.kind?1:18===g.kind&&h===E(g,_).line?2:0:0),k=0!=y?o&&2==y?n.indentSize:0:c!==f.line?n.indentSize:0;break}if(-1!==(p=S(m,t,n)))return p;if(-1!==(p=C(m,t,n)))return p+n.indentSize;m=(s=m).parent}return m?T(m,f,void 0,k,t,n):v(n)},N.getIndentationForNode=function(e,t,n,o){var r=n.getLineAndCharacterOfPosition(e.getStart(n));return T(e,r,t,0,n,o)},N.getBaseIndentation=v,N.isArgumentAndStartLineOverlapsExpressionBeingCalled=m,N.childStartsOnTheSameLineWithElseInIfStatement=f,N.getContainingList=y,N.findFirstNonWhitespaceCharacterAndColumn=B,N.findFirstNonWhitespaceColumn=A,N.nodeWillIndentChild=n,N.shouldIndentChildNode=I}(ts=ts||{}),function(d){var s,p,e,t=d.textChanges||(d.textChanges={});function i(e){e=e.__pos;return d.Debug.assert("number"==typeof e),e}function r(e,t){d.Debug.assert("number"==typeof t),e.__pos=t}function a(e){e=e.__end;return d.Debug.assert("number"==typeof e),e}function l(e,t){d.Debug.assert("number"==typeof t),e.__end=t}function g(e,t){return d.skipTrivia(e,t,!1,!0)}function c(e,t,n,o){var r;return n.useNonAdjustedStartPosition?t.getFullStart():(n=t.getFullStart())===(t=t.getStart(e))?t:(r=d.getLineStartPositionForPosition(n,e),d.getLineStartPositionForPosition(t,e)===r?o===s.Start?t:n:(o=0<n?1:0,t=d.getStartPositionOfLine(d.getLineOfLocalPosition(e,r)+o,e),t=g(e.text,t),d.getStartPositionOfLine(d.getLineOfLocalPosition(e,t),e)))}function u(e,t,n){return n.useNonAdjustedEndPosition||d.isExpression(t)?t.getEnd():(n=t.getEnd(),(t=d.skipTrivia(e.text,n,!0))!==n&&d.isLineBreak(e.text.charCodeAt(t-1))?t:n)}function h(e,t){return t&&e.parent&&(26===t.kind||25===t.kind&&178===e.parent.kind)}function _(e,t,n){this.newLine=e,this.rulesProvider=t,this.validator=n,this.changes=[],this.newLineCharacter=d.getNewLineCharacter({newLine:e})}function m(e,t){for(var n=t.length-1;0<=n;n--){var o=t[n];e=""+e.substring(0,o.span.start)+o.newText+e.substring(d.textSpanEnd(o.span))}return e}function f(e){var t=d.visitEachChild(e,f,d.nullTransformationContext,n,f),t=d.nodeIsSynthesized(t)?t:Object.create(t);return t.pos=i(e),t.end=a(e),t}function n(e,t,n,o,r){t=d.visitNodes(e,t,n,o,r);return t&&((n=t===e?d.createNodeArray(t.slice(0)):t).pos=i(e),n.end=a(e),n)}(e=s=t.Position||(t.Position={}))[e.FullStart=0]="FullStart",e[e.Start=1]="Start",(e=p=p||{})[e.Remove=0]="Remove",e[e.ReplaceWithSingleNode=1]="ReplaceWithSingleNode",e[e.ReplaceWithMultipleNodes=2]="ReplaceWithMultipleNodes",t.getSeparatorCharacter=function(e){return d.tokenToString(e.kind)},t.getAdjustedStartPosition=c,t.getAdjustedEndPosition=u,_.fromContext=function(e){return new _("\n"===e.newLineCharacter?1:0,e.rulesProvider)},_.with=function(e,t){e=_.fromContext(e);return t(e),e.getChanges()},_.prototype.deleteRange=function(e,t){return this.changes.push({kind:p.Remove,sourceFile:e,range:t}),this},_.prototype.deleteNode=function(e,t,n){var o=c(e,t,n=void 0===n?{}:n,s.FullStart),t=u(e,t,n);return this.changes.push({kind:p.Remove,sourceFile:e,range:{pos:o,end:t}}),this},_.prototype.deleteNodeRange=function(e,t,n,o){t=c(e,t,o=void 0===o?{}:o,s.FullStart),n=u(e,n,o);return this.changes.push({kind:p.Remove,sourceFile:e,range:{pos:t,end:n}}),this},_.prototype.deleteNodeInList=function(e,t){var n,o,r,i=d.formatting.SmartIndenter.getContainingList(t,e);return i?(n=d.indexOfNode(i,t))<0||(1===i.length?this.deleteNode(e,t):n!==i.length-1?(r=d.getTokenAtPosition(e,t.end,!1))&&h(t,r)&&(r=d.skipTrivia(e.text,c(e,t,{},s.FullStart),!1,!0),o=i[n+1],o=d.skipTrivia(e.text,c(e,o,{},s.FullStart),!1,!0),this.deleteRange(e,{pos:r,end:o})):(r=d.getTokenAtPosition(e,i[n-1].end,!1))&&h(t,r)&&this.deleteNodeRange(e,r,t)):d.Debug.fail("node is not a list element"),this},_.prototype.replaceRange=function(e,t,n,o){return this.changes.push({kind:p.ReplaceWithSingleNode,sourceFile:e,range:t,options:o=void 0===o?{}:o,node:n}),this},_.prototype.replaceNode=function(e,t,n,o){var r=c(e,t,o=void 0===o?{}:o,s.Start),t=u(e,t,o);return this.replaceWithSingle(e,r,t,n,o)},_.prototype.replaceNodeRange=function(e,t,n,o,r){t=c(e,t,r=void 0===r?{}:r,s.Start),n=u(e,n,r);return this.replaceWithSingle(e,t,n,o,r)},_.prototype.replaceWithSingle=function(e,t,n,o,r){return this.changes.push({kind:p.ReplaceWithSingleNode,sourceFile:e,options:r,node:o,range:{pos:t,end:n}}),this},_.prototype.replaceWithMultiple=function(e,t,n,o,r){return this.changes.push({kind:p.ReplaceWithMultipleNodes,sourceFile:e,options:r,nodes:o,range:{pos:t,end:n}}),this},_.prototype.replaceNodeWithNodes=function(e,t,n,o){var r=c(e,t,o,s.Start),t=u(e,t,o);return this.replaceWithMultiple(e,r,t,n,o)},_.prototype.replaceNodesWithNodes=function(e,t,n,o){var r=c(e,t[0],o,s.Start),t=u(e,d.lastOrUndefined(t),o);return this.replaceWithMultiple(e,r,t,n,o)},_.prototype.replaceRangeWithNodes=function(e,t,n,o){return this.replaceWithMultiple(e,t.pos,t.end,n,o)},_.prototype.replaceNodeRangeWithNodes=function(e,t,n,o,r){t=c(e,t,r,s.Start),n=u(e,n,r);return this.replaceWithMultiple(e,t,n,o,r)},_.prototype.insertNodeAt=function(e,t,n,o){return this.changes.push({kind:p.ReplaceWithSingleNode,sourceFile:e,options:o=void 0===o?{}:o,node:n,range:{pos:t,end:t}}),this},_.prototype.insertNodeBefore=function(e,t,n,o){t=c(e,t,o=void 0===o?{}:o,s.Start);return this.replaceWithSingle(e,t,t,n,o)},_.prototype.insertNodeAfter=function(e,t,n,o){void 0===o&&(o={}),!d.isStatementButNotDeclaration(t)&&149!==t.kind&&148!==t.kind&&150!==t.kind||59===e.text.charCodeAt(t.end-1)||this.changes.push({kind:p.ReplaceWithSingleNode,sourceFile:e,options:{},range:{pos:t.end,end:t.end},node:d.createToken(25)});t=u(e,t,o);return this.replaceWithSingle(e,t,t,n,o)},_.prototype.insertNodeInListAfter=function(e,o,t){var n,r,i,s,a,l,c,u=d.formatting.SmartIndenter.getContainingList(o,e);return u?(n=d.indexOfNode(u,o))<0||(r=o.getEnd(),n!==u.length-1?(c=d.getTokenAtPosition(e,o.end,!1))&&h(o,c)&&(s=d.getLineAndCharacterOfPosition(e,g(e.text,u[n+1].getFullStart())),a=l=void 0,(i=d.getLineAndCharacterOfPosition(e,c.end)).line===s.line?(a=c.end,l=function(e){for(var t="",n=0;n<e;n++)t+=" ";return t}(s.character-i.character)):a=d.getStartPositionOfLine(s.line,e),this.changes.push({kind:p.ReplaceWithSingleNode,sourceFile:e,range:{pos:a,end:u[n+1].getStart(e)},node:t,options:{prefix:l,suffix:""+d.tokenToString(c.kind)+e.text.substring(c.end,u[n+1].getStart(e))}})):(i=o.getStart(e),s=d.getLineStartPositionForPosition(i,e),a=void 0,l=!1,1===u.length?a=26:(a=h(o,c=d.findPrecedingToken(o.pos,e))?c.kind:26,l=d.getLineStartPositionForPosition(u[n-1].getStart(e),e)!==s),(l=!!function(e){for(var t=o.end;t<e.length;){var n=e.charCodeAt(t);if(!d.isWhiteSpaceSingleLine(n))return 47===n;t++}}(e.text)||l)?(this.changes.push({kind:p.ReplaceWithSingleNode,sourceFile:e,range:{pos:r,end:r},node:d.createToken(a),options:{}}),c=d.formatting.SmartIndenter.findFirstNonWhitespaceColumn(s,i,e,this.rulesProvider.getFormatOptions()),(u=d.skipTrivia(e.text,r,!0,!1))!==r&&d.isLineBreak(e.text.charCodeAt(u-1))&&u--,this.changes.push({kind:p.ReplaceWithSingleNode,sourceFile:e,range:{pos:u,end:u},node:t,options:{indentation:c,prefix:this.newLineCharacter}})):this.changes.push({kind:p.ReplaceWithSingleNode,sourceFile:e,range:{pos:r,end:r},node:t,options:{prefix:d.tokenToString(a)+" "}}))):d.Debug.fail("node is not a list element"),this},_.prototype.getChanges=function(){for(var s=this,e=d.createMap(),t=0,n=this.changes;t<n.length;t++){var o=n[t],r=e.get(o.sourceFile.path);r||e.set(o.sourceFile.path,r=[]),r.push(o)}var a=[];return e.forEach(function(e){for(var t=e[0].sourceFile,n={fileName:t.fileName,textChanges:[]},o=0,r=_.normalize(e);o<r.length;o++){var i=r[o];n.textChanges.push({span:s.computeSpan(i,t),newText:s.computeNewText(i,t)})}a.push(n)}),a},_.prototype.computeSpan=function(e,t){return d.createTextSpanFromBounds(e.range.pos,e.range.end)},_.prototype.computeNewText=function(e,t){var n,o,r,i=this;return e.kind===p.Remove?"":(n=e.options||{},o=e.range.pos,r=d.getLineStartPositionForPosition(o,t)===o,e=e.kind===p.ReplaceWithMultipleNodes?e.nodes.map(function(e){return i.getFormattedTextOfNode(e,t,o,n)}).join(e.options.nodeSeparator):(d.Debug.assert(e.kind===p.ReplaceWithSingleNode,"change.kind === ReplaceWithSingleNode"),this.getFormattedTextOfNode(e.node,t,o,n)),e=r||void 0!==n.indentation?e:e.replace(/^\s+/,""),(n.prefix||"")+e+(n.suffix||""))},_.prototype.getFormattedTextOfNode=function(e,t,n,o){r=e,a=t,s={newLine:s=this.newLine,target:a&&a.languageVersion},l=new y(d.getNewLineCharacter(s)),d.createPrinter(s,l).writeNode(4,r,a,l);var r,i,s={text:l.getText(),node:f(r)},a=(this.validator&&this.validator(s),this.rulesProvider.getFormatOptions()),l=d.getLineStartPositionForPosition(n,t)===n;return r=s,s=t,n=void 0!==o.indentation?o.indentation:!1!==o.useIndentationFromFile?d.formatting.SmartIndenter.getIndentation(n,t,a,l||o.prefix===this.newLineCharacter):0,t=void 0!==o.delta?o.delta:d.formatting.SmartIndenter.shouldIndentChildNode(e)&&a.indentSize||0,l=this.rulesProvider,i=d.computeLineStarts(r.text),s=d.formatting.formatNodeGivenIndentation(r.node,{text:r.text,lineMap:i,getLineAndCharacterOfPosition:function(e){return d.computeLineAndCharacterOfPosition(i,e)}},s.languageVariant,n,t,l),m(r.text,s)},_.normalize=function(e){for(var t=d.stableSort(e,function(e,t){return e.range.pos-t.range.pos}),n=0;n<t.length-2;n++)d.Debug.assert(t[n].range.end<=t[n+1].range.pos);return t},t.ChangeTracker=_,t.applyChanges=m,o.prototype.setLastNonTriviaPosition=function(e,t){if(t||(t=e,d.skipTrivia(t,0)!==t.length)){this.lastNonTriviaPosition=this.writer.getTextPos();for(var n=0;d.isWhiteSpaceLike(e.charCodeAt(e.length-n-1));)n++;this.lastNonTriviaPosition-=n}},o.prototype.write=function(e){this.writer.write(e),this.setLastNonTriviaPosition(e,!1)},o.prototype.writeTextOfNode=function(e,t){this.writer.writeTextOfNode(e,t)},o.prototype.writeLine=function(){this.writer.writeLine()},o.prototype.increaseIndent=function(){this.writer.increaseIndent()},o.prototype.decreaseIndent=function(){this.writer.decreaseIndent()},o.prototype.getText=function(){return this.writer.getText()},o.prototype.rawWrite=function(e){this.writer.rawWrite(e),this.setLastNonTriviaPosition(e,!1)},o.prototype.writeLiteral=function(e){this.writer.writeLiteral(e),this.setLastNonTriviaPosition(e,!0)},o.prototype.getTextPos=function(){return this.writer.getTextPos()},o.prototype.getLine=function(){return this.writer.getLine()},o.prototype.getColumn=function(){return this.writer.getColumn()},o.prototype.getIndent=function(){return this.writer.getIndent()},o.prototype.isAtStartOfLine=function(){return this.writer.isAtStartOfLine()},o.prototype.reset=function(){this.writer.reset(),this.lastNonTriviaPosition=0};var y=o;function o(e){var o=this;this.lastNonTriviaPosition=0,this.writer=d.createTextWriter(e),this.onEmitNode=function(e,t,n){t&&r(t,o.lastNonTriviaPosition),n(e,t),t&&l(t,o.lastNonTriviaPosition)},this.onBeforeEmitNodeArray=function(e){e&&r(e,o.lastNonTriviaPosition)},this.onAfterEmitNodeArray=function(e){e&&l(e,o.lastNonTriviaPosition)},this.onBeforeEmitToken=function(e){e&&r(e,o.lastNonTriviaPosition)},this.onAfterEmitToken=function(e){e&&l(e,o.lastNonTriviaPosition)}}}(ts=ts||{}),function(t){var e,o;e=t.codefix||(t.codefix={}),o=[],e.registerCodeFix=function(n){t.forEach(n.errorCodes,function(e){var t=o[e];t||(o[e]=t=[]),t.push(n)})},e.getSupportedErrorCodes=function(){return Object.keys(o)},e.getFixes=function(r){var e=o[r.errorCode],i=[];return t.forEach(e,function(e){e=e.getCodeActions(r);if(e&&0<e.length)for(var t=0,n=e;t<n.length;t++){var o=n[t];void 0===o?r.host.log("Action for error code "+r.errorCode+" added an invalid action entry; please log a bug"):i.push(o)}}),i}}(ts=ts||{}),function(e){var t=e.refactor||(e.refactor={}),o=e.createMap();t.registerRefactor=function(e){o.set(e.name,e)},t.getApplicableRefactors=function(t){return e.flatMapIter(o.values(),function(e){return t.cancellationToken&&t.cancellationToken.isCancellationRequested()?void 0:e.getAvailableActions(t)})},t.getEditsForRefactor=function(e,t,n){t=o.get(t);return t&&t.getEditsForAction(e,n)},e.getRefactorContextLength=function(e){return void 0===e.endPosition?0:e.endPosition-e.startPosition}}(ts=ts||{}),function(r){(r.codefix||(r.codefix={})).registerCodeFix({errorCodes:[r.Diagnostics._0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0.code],getCodeActions:function(e){var t=e.sourceFile,n=r.getTokenAtPosition(t,e.span.start,!1),n=r.getAncestor(n,147),o=(r.Debug.assert(!!n,"Expected position to be owned by a decorator."),r.createCall(n.expression,void 0,void 0)),e=r.textChanges.ChangeTracker.fromContext(e);return e.replaceNode(t,n.expression,o),[{description:r.getLocaleSpecificMessage(r.Diagnostics.Call_decorator_expression),changes:e.getChanges()}]}})}(ts=ts||{}),function(s){(s.codefix||(s.codefix={})).registerCodeFix({errorCodes:[s.Diagnostics.Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1.code],getCodeActions:function(e){var t,n,o,r=e.sourceFile,i=s.getTokenAtPosition(r,e.span.start,!1),i=s.getAncestor(i,143);if(s.Debug.assert(!!i,"Expected position to be owned by a qualified name."),s.isIdentifier(i.left))return t=i.left.getText(r),n=i.right.getText(r),o=s.createIndexedAccessTypeNode(s.createTypeReferenceNode(i.left,void 0),s.createLiteralTypeNode(s.createLiteral(n))),(e=s.textChanges.ChangeTracker.fromContext(e)).replaceNode(r,i,o),[{description:s.formatStringFromArgs(s.getLocaleSpecificMessage(s.Diagnostics.Rewrite_as_the_indexed_access_type_0),[t+'["'+n+'"]']),changes:e.getChanges()}]}})}(ts=ts||{}),function(m){var f;(f=m.codefix||(m.codefix={})).registerCodeFix({errorCodes:[m.Diagnostics.Class_0_incorrectly_implements_interface_1.code],getCodeActions:function(e){var t=e.sourceFile,n=e.span.start,n=m.getTokenAtPosition(t,n,!1),r=e.program.getTypeChecker(),i=m.getContainingClass(n);if(i){for(var o=m.getOpenBraceOfClassLike(i,t),n=r.getTypeAtLocation(i),t=m.getClassImplementsHeritageClauseElements(i),s=!!r.getIndexTypeOfType(n,1),a=!!r.getIndexTypeOfType(n,0),l=[],c=0,u=t;c<u.length;c++){var d=u[c],p=r.getTypeAtLocation(d),g=r.getPropertiesOfType(p).filter(function(e){return!(8&m.getModifierFlags(e.valueDeclaration))}),h=[],p=(_(p,1,s,h),_(p,0,a,h),h=h.concat(f.createMissingMemberNodes(i,g,r)),m.formatStringFromArgs(m.getLocaleSpecificMessage(m.Diagnostics.Implement_interface_0),[d.getText()]));0<h.length&&(g=h,l.push({description:p,changes:f.newNodesToChanges(g,o,e)}))}return l}function _(e,t,n,o){n||(n=r.getIndexInfoOfType(e,t))&&(e=r.indexInfoToIndexSignatureDeclaration(n,t,i),o.push(e))}}})}(ts=ts||{}),function(h){var _;(_=h.codefix||(h.codefix={})).registerCodeFix({errorCodes:[h.Diagnostics.Property_0_does_not_exist_on_type_1.code,h.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2.code],getCodeActions:function(n){var e=n.sourceFile,t=n.span.start,o=h.getTokenAtPosition(e,t,!1);if(71===o.kind&&h.isPropertyAccessExpression(o.parent)){var r,i,s,a,l,c,u=o.getText(e),d=!1;if(99===o.parent.expression.kind){var t=h.getThisContainer(o,!1);if(!h.isClassElement(t))return;r=t.parent,d=r&&h.hasModifier(t,32)}else{var p,e=n.program.getTypeChecker(),t=o.parent.expression,t=e.getTypeAtLocation(t);32768&t.flags&&32&(p=t.symbol).flags&&(r=p.declarations&&p.declarations[0],t!==e.getDeclaredTypeOfSymbol(p))&&(d=!0)}if(r&&h.isClassLike(r))return i=h.getSourceFileOfNode(r),s=h.getOpenBraceOfClassLike(r,i),h.isInJavaScriptFile(i)?(t=r,e=d,(p=g(!1))&&(c=[p]),e?199!==t.kind&&(p=t.name.getText(),e=h.createStatement(h.createAssignment(h.createPropertyAccess(h.createIdentifier(p),u),h.createIdentifier("undefined"))),(p=h.textChanges.ChangeTracker.fromContext(n)).insertNodeAfter(i,t,e,{prefix:n.newLineCharacter,suffix:n.newLineCharacter}),e={description:h.formatStringFromArgs(h.getLocaleSpecificMessage(h.Diagnostics.Initialize_static_property_0),[u]),changes:p.getChanges()},(c=c||[]).push(e)):(p=h.getFirstConstructorWithBody(t))&&(e=h.createStatement(h.createAssignment(h.createPropertyAccess(h.createThis(),u),h.createIdentifier("undefined"))),(t=h.textChanges.ChangeTracker.fromContext(n)).insertNodeBefore(i,p.body.getLastToken(),e,{suffix:n.newLineCharacter}),p={description:h.formatStringFromArgs(h.getLocaleSpecificMessage(h.Diagnostics.Initialize_property_0_in_the_constructor),[u]),changes:t.getChanges()},(c=c||[]).push(p)),c):(e=r,t=d,(c=g(!0))&&(l=[c]),194===o.parent.parent.kind&&(c=o.parent.parent,c=o.parent===c.left?c.right:c.left,c=(a=n.program.getTypeChecker()).getWidenedType(a.getBaseTypeOfLiteralType(a.getTypeAtLocation(c))),a=a.typeToTypeNode(c,e)),a=a||h.createKeywordTypeNode(119),c=h.createProperty(void 0,t?[h.createToken(115)]:void 0,u,void 0,a,void 0),(e=h.textChanges.ChangeTracker.fromContext(n)).insertNodeAfter(i,s,c,{suffix:n.newLineCharacter}),c=t?h.Diagnostics.Declare_static_property_0:h.Diagnostics.Declare_property_0,l=h.append(l,{description:h.formatStringFromArgs(h.getLocaleSpecificMessage(c),[u]),changes:e.getChanges()}),t||(c=h.createKeywordTypeNode(136),e=h.createParameter(void 0,void 0,void 0,"x",void 0,c,void 0),t=h.createIndexSignature(void 0,void 0,[e],a),(c=h.textChanges.ChangeTracker.fromContext(n)).insertNodeAfter(i,s,t,{suffix:n.newLineCharacter}),l.push({description:h.formatStringFromArgs(h.getLocaleSpecificMessage(h.Diagnostics.Add_index_signature_for_property_0),[u]),changes:c.getChanges()})),l)}function g(e){var t;if(181===o.parent.parent.kind)return t=o.parent.parent,t=_.createMethodFromCallExpression(t,u,e,d),(e=h.textChanges.ChangeTracker.fromContext(n)).insertNodeAfter(i,s,t,{suffix:n.newLineCharacter}),t=d?h.Diagnostics.Declare_static_method_0:h.Diagnostics.Declare_method_0,{description:h.formatStringFromArgs(h.getLocaleSpecificMessage(t),[u]),changes:e.getChanges()}}}})}(ts=ts||{}),function(r){(r.codefix||(r.codefix={})).registerCodeFix({errorCodes:[r.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2.code,r.Diagnostics.Cannot_find_name_0_Did_you_mean_1.code],getCodeActions:function(e){var t,n=e.sourceFile,o=r.getTokenAtPosition(n,e.span.start,!1),e=e.program.getTypeChecker();if(t=r.isPropertyAccessExpression(o.parent)&&o.parent.name===o?(r.Debug.assert(71===o.kind),t=e.getTypeAtLocation(o.parent.expression),e.getSuggestionForNonexistentProperty(o,t)):(t=r.getMeaningFromLocation(o),e.getSuggestionForNonexistentSymbol(o,r.getTextOfNode(o),(e=0,4&t&&(e|=1920),2&t&&(e|=793064),1&t&&(e|=107455),e))))return[{description:r.formatStringFromArgs(r.getLocaleSpecificMessage(r.Diagnostics.Change_spelling_to_0),[t]),changes:[{fileName:n.fileName,textChanges:[{span:{start:o.getStart(),length:o.getWidth()},newText:t}]}]}]}})}(ts=ts||{}),function(o){function r(e,t){t=o.getPackageName(t).packageName;if(e.isKnownTypesPackageName(t))return{description:"Install '"+(e=o.getTypesPackageName(t))+"'",changes:[],commands:[{type:"install package",packageName:e}]}}var e;(e=o.codefix||(o.codefix={})).registerCodeFix({errorCodes:[o.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type.code],getCodeActions:function(e){var t=e.sourceFile,n=e.span.start,t=o.getTokenAtPosition(t,n,!1);if(o.isStringLiteral(t))return(n=r(e.host,t.text))&&[n];throw o.Debug.fail()}}),e.tryGetCodeActionForInstallPackageTypes=r}(ts=ts||{}),function(i){function e(e){var t=e.sourceFile,n=e.span.start,n=i.getTokenAtPosition(t,n,!1),o=e.program.getTypeChecker();if(i.isClassLike(n.parent)){var n=n.parent,r=i.getClassExtendsHeritageClauseElement(n),r=o.getTypeAtLocation(r),r=o.getPropertiesOfType(r).filter(s),r=a.createMissingMemberNodes(n,r,o),o=a.newNodesToChanges(r,i.getOpenBraceOfClassLike(n,t),e);if(o&&0<o.length)return[{description:i.getLocaleSpecificMessage(i.Diagnostics.Implement_inherited_abstract_class),changes:o}]}}function s(e){e=e.getDeclarations(),i.Debug.assert(!!(e&&0<e.length)),e=i.getModifierFlags(e[0]);return!(8&e||!(128&e))}var a;(a=i.codefix||(i.codefix={})).registerCodeFix({errorCodes:[i.Diagnostics.Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2.code],getCodeActions:e}),a.registerCodeFix({errorCodes:[i.Diagnostics.Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1.code],getCodeActions:e})}(ts=ts||{}),function(l){(l.codefix||(l.codefix={})).registerCodeFix({errorCodes:[l.Diagnostics.super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class.code],getCodeActions:function(e){var t=e.sourceFile,n=l.getTokenAtPosition(t,e.span.start,!1);if(99===n.kind){var o=l.getContainingFunction(n),r=function e(t){return 210===t.kind&&l.isSuperCall(t.expression)?t:l.isFunctionLike(t)?void 0:l.forEachChild(t,e)}(o.body);if(r){if(r.expression&&181===r.expression.kind)for(var i=r.expression.arguments,s=0;s<i.length;s++)if(i[s].expression===n)return;var a=l.textChanges.ChangeTracker.fromContext(e);return a.insertNodeAfter(t,l.getOpenBrace(o,t),r,{suffix:e.newLineCharacter}),a.deleteNode(t,r),[{description:l.getLocaleSpecificMessage(l.Diagnostics.Make_super_call_the_first_statement_in_the_constructor),changes:a.getChanges()}]}}}})}(ts=ts||{}),function(i){(i.codefix||(i.codefix={})).registerCodeFix({errorCodes:[i.Diagnostics.Constructors_for_derived_classes_must_contain_a_super_call.code],getCodeActions:function(e){var t,n,o=e.sourceFile,r=i.getTokenAtPosition(o,e.span.start,!1);if(123===r.kind)return t=i.textChanges.ChangeTracker.fromContext(e),n=i.createStatement(i.createCall(i.createSuper(),void 0,i.emptyArray)),t.insertNodeAfter(o,i.getOpenBrace(r.parent,o),n,{suffix:e.newLineCharacter}),[{description:i.getLocaleSpecificMessage(i.Diagnostics.Add_missing_super_call),changes:t.getChanges()}]}})}(ts=ts||{}),function(l){(l.codefix||(l.codefix={})).registerCodeFix({errorCodes:[l.Diagnostics.Cannot_extend_an_interface_0_Did_you_mean_implements.code],getCodeActions:function(e){var t=e.sourceFile,n=e.span.start,n=l.getTokenAtPosition(t,n,!1),o=l.getContainingClass(n);if(71===n.kind&&l.isClassLike(o)){var r=o.heritageClauses;if(r&&0<r.length){n=r[0].getFirstToken();if(n&&85===n.kind){var i=l.textChanges.ChangeTracker.fromContext(e);i.replaceNode(t,n,l.createToken(108));for(var s=1;s<r.length;s++){var a=r[s].getFirstToken();a&&i.replaceNode(t,a,l.createToken(26))}return[{description:l.getLocaleSpecificMessage(l.Diagnostics.Change_extends_to_implements),changes:i.getChanges()}]}}}}})}(ts=ts||{}),function(o){(o.codefix||(o.codefix={})).registerCodeFix({errorCodes:[o.Diagnostics.Cannot_find_name_0_Did_you_mean_the_instance_member_this_0.code],getCodeActions:function(e){var t=e.sourceFile,n=o.getTokenAtPosition(t,e.span.start,!1);if(71===n.kind)return(e=o.textChanges.ChangeTracker.fromContext(e)).replaceNode(t,n,o.createPropertyAccess(o.createThis(),n)),[{description:o.getLocaleSpecificMessage(o.Diagnostics.Add_this_to_unresolved_variable),changes:e.getChanges()}]}})}(ts=ts||{}),function(v){(v.codefix||(v.codefix={})).registerCodeFix({errorCodes:[v.Diagnostics._0_is_declared_but_its_value_is_never_read.code,v.Diagnostics.Property_0_is_declared_but_its_value_is_never_read.code],getCodeActions:function(t){var n=t.sourceFile,e=t.span.start,o=v.getTokenAtPosition(n,e,!1);switch((o=21===o.kind?v.getTokenAtPosition(n,e+1,!1):o).kind){case 71:var r=o,i=r.parent;switch(i.kind){case 226:var s,a=r,l=i;switch(l.parent.parent.kind){case 214:var c=l.parent.parent.initializer;return[1===c.declarations.length?f(c):k(l)];case 216:c=l.parent.parent;return v.Debug.assert(227===c.initializer.kind),[(c=c.initializer.declarations[0],s=v.createObjectLiteral(),b(v.textChanges.ChangeTracker.fromContext(t).replaceNode(n,c,s))),_(a)];case 215:return[_(a)];default:s=l.parent.parent;return 1===s.declarationList.declarations.length?[f(s)]:[k(l)]}return;case 145:var u,d=i.parent.typeParameters;return 1===d.length?(g=v.getTokenAtPosition(n,d.pos-1,!1),u=v.getTokenAtPosition(n,d.end,!1),v.Debug.assert(27===g.kind),v.Debug.assert(29===u.kind),[(d=g,g=u,b(v.textChanges.ChangeTracker.fromContext(t).deleteNodeRange(n,d,g)))]):[k(i)];case 146:return[(1===i.parent.parameters.length?f:k)(i),_(r)];case 237:return[f(v.getAncestor(r,237))];case 242:d=i.parent;return 1===d.elements.length?m(d):[k(i)];case 239:var p,g=i;return g.namedBindings?(p=g.name.getStart(n),(u=v.getTokenAtPosition(n,g.name.end,!1))&&26===u.kind?[y({pos:p,end:v.skipTrivia(n.text,u.end,!1,!0)})]:[f(g.name)]):[f(v.getAncestor(g,238))];case 240:return m(i);default:return h()}return;case 149:case 240:return[f(o.parent)];default:return h()}function h(){return v.isDeclarationName(o)?[f(o.parent)]:v.isLiteralComputedPropertyDeclarationName(o)?[f(o.parent.parent)]:void 0}function _(e){e=e.getStart(n,!1);return{description:v.formatStringFromArgs(v.getLocaleSpecificMessage(v.Diagnostics.Prefix_0_with_an_underscore),{0:o.getText()}),changes:[{fileName:n.path,textChanges:[{span:{start:e,length:0},newText:"_"}]}]}}function m(e){var t;return e.parent.name?(t=v.getTokenAtPosition(n,e.pos-1,!1))&&26===t.kind?[y({pos:t.getStart(),end:e.end})]:void 0:[f(v.getAncestor(e,238))]}function f(e){return b(v.textChanges.ChangeTracker.fromContext(t).deleteNode(n,e))}function y(e){return b(v.textChanges.ChangeTracker.fromContext(t).deleteRange(n,e))}function k(e){return b(v.textChanges.ChangeTracker.fromContext(t).deleteNodeInList(n,e))}function b(e){return{description:v.formatStringFromArgs(v.getLocaleSpecificMessage(v.Diagnostics.Remove_declaration_for_Colon_0),{0:o.getText()}),changes:e.getChanges()}}}})}(ts=ts||{}),function(s){function a(e,t,n,o){return{description:s.formatStringFromArgs(s.getLocaleSpecificMessage(s.Diagnostics.Change_0_to_1),[n,o]),changes:[{fileName:t,textChanges:[{span:{start:e.getStart(),length:e.getWidth()},newText:o}]}]}}(s.codefix||(s.codefix={})).registerCodeFix({errorCodes:[s.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments.code],getCodeActions:function(e){var t=e.sourceFile,n=s.getTokenAtPosition(t,e.span.start,!1),n=s.findAncestor(n,function(e){return 202===e.kind||155===e.kind||156===e.kind||228===e.kind||153===e.kind||157===e.kind||172===e.kind||151===e.kind||150===e.kind||146===e.kind||149===e.kind||148===e.kind||154===e.kind||231===e.kind||184===e.kind||226===e.kind});if(n){var o,r,i,e=e.program.getTypeChecker(),n=n.type;if(n)return o=s.getTextOfNode(n),r=e.getTypeFromTypeNode(n),i=[a(n,t.fileName,o,e.typeToString(r,void 0,8))],270===n.kind&&(e=e.typeToString(e.getNullableType(r,2048),void 0,8),i.push(a(n,t.fileName,o,e))),i}}})}(ts=ts||{}),function(E){function e(){this.symbolIdToActionMap=[]}function S(e,t,n,o,r){return{description:E.formatMessage.apply(void 0,[void 0,e].concat(t)),changes:n,kind:o,moduleSpecifier:r}}function _(e,t){n=e,o=t.checker,s=t.sourceFile,y=t.cachedImportDeclarations,s=s.imports,void 0===y&&(y=[]),r=E.getUniqueSymbolId(n,o);var n,o,r,i,s,a,l,c,u,d,p,g,h,_,m,f,y=y[r]||(y[r]=E.mapDefined(s,function(e){if(o.getSymbolAtLocation(e)===n){var t=e.parent;switch(t.kind){case 238:return t;case 248:return t.parent;default:return void E.Debug.assert(244===t.kind)}}})),k=[];if(t.symbolToken)for(var b=0,v=y;b<v.length;b++){var T=238!==(T=v[b]).kind?T.name:(T=T.importClause&&T.importClause.namedBindings)&&240===T.kind?T.name:void 0;T&&k.push(function(t,e,n){var o=e.symbolName,r=e.sourceFile;return S(E.Diagnostics.Change_0_to_1,[o,t+"."+o],D.with(e,function(e){return e.replaceNode(r,n,E.createPropertyAccess(E.createIdentifier(t),o))}),"CodeChange",void 0)}(T.text,t,t.symbolToken))}return k.push((r=e,i=t,s=y,(e=E.firstDefined(s,function(e){if(238===e.kind&&e.importClause){var t=function(e,t){var n=e.symbolName,o=e.sourceFile,r=e.kind,i=t.name,s=t.namedBindings;switch(r){case 1:return i?void 0:D.with(e,function(e){return e.replaceNode(o,t,E.createImportClause(E.createIdentifier(n),s))});case 0:var a=E.createImportSpecifier(void 0,E.createIdentifier(n));return s&&241===s.kind&&0!==s.elements.length?D.with(e,function(e){return e.insertNodeInListAfter(o,s.elements[s.elements.length-1],a)}):!s||241===s.kind&&0===s.elements.length?D.with(e,function(e){return e.replaceNode(o,t,E.createImportClause(i,E.createNamedImports([a])))}):void 0;case 2:return s?void 0:D.with(e,function(e){return e.replaceNode(o,t,E.createImportClause(i,E.createNamespaceImport(E.createIdentifier(n))))});default:E.Debug.assertNever(r)}}(i,e.importClause);if(t)return e=E.stripQuotes(e.moduleSpecifier.getText()),S(E.Diagnostics.Add_0_to_existing_import_declaration_from_1,[i.symbolName,e],t,"InsertingIntoExistingImport",e)}}))||(p=u=E.firstDefined(s,I)||(e=i.sourceFile,a=r,s=i.compilerOptions,r=i.getCanonicalFileName,p=i.host,d=a.valueDeclaration.getSourceFile().fileName,e=E.getDirectoryPath(e.fileName),function(){var e=a.valueDeclaration;if(E.isModuleDeclaration(e)&&E.isStringLiteral(e.name))return e.name.text}())||(l=r,c=d,(u=E.getEffectiveTypeRoots(s,p))&&E.firstDefined(u,function(e){e=E.toPath(e,void 0,l);if(E.startsWith(c,e))return x(c.substring(e.length+1))}))||function(e,t,o,r,n){if(E.getEmitModuleResolutionKind(e)===E.ModuleResolutionKind.NodeJs){var i,s=function(e){var t=0,n=0,o=0;for(var r=0,i=0,s=0;0<=i;)switch(r=i,i=e.indexOf("/",r+1),s){case 0:e.indexOf("/node_modules/",r)===r&&(t=r,n=i,s=1);break;case 1:case 2:s=1===s&&"@"===e.charAt(r+1)?2:(o=i,3);break;case 3:s=e.indexOf("/node_modules/",r)===r?1:3}return 1<s?{topLevelNodeModulesIndex:t,topLevelPackageNameIndex:n,packageRootIndex:o,fileNameIndex:r}:void 0}(t);if(s)return e=function(e){var t=e.substring(0,s.packageRootIndex),n=E.combinePaths(t,"package.json");if(o.fileExists(n)){n=JSON.parse(o.readFile(n));if(n){n=n.typings||n.types||n.main;if(n&&E.toPath(n,t,r)===r(e))return t}}n=E.removeFileExtension(e);return"/index"===r(n.substring(s.fileNameIndex))?n.substring(0,s.fileNameIndex):n}(t),i=(t=e).substring(0,s.topLevelNodeModulesIndex),e=0===n.indexOf(i)?t.substring(s.topLevelPackageNameIndex+1):A(t,n,r),E.getPackageNameFromAtTypesDirectory(e)}}(s,d,p,r,e)||function(e,t,n){if(e.baseUrl&&(r=B(t,e.baseUrl,n))){var o=E.removeFileExtension(r),r=x(r);if(e.paths)for(var i in e.paths)for(var s=0,a=e.paths[i];s<a.length;s++){var l=a[s],c=l.indexOf("*");if(0!==c||1!==l.length)if(-1!==c){var u=l.substr(0,c),c=l.substr(c+1);if(r.length>=u.length+c.length&&E.startsWith(r,u)&&E.endsWith(r,c))return u=r.substr(u.length,r.length-c.length),i.replace("*",u)}else if(l===r||l===o)return i}return r}}(s,d,r)||s.rootDirs&&function(e,t,n){var o=C(d,e,n);if(void 0!==o)return e=void 0!==(t=C(t,e,n))?A(o,t,n):o,E.removeFileExtension(e)}(s.rootDirs,e,r)||E.removeFileExtension(A(d,e,r)),e=(s=i).kind,g=s.sourceFile,h=s.newLineCharacter,_=s.symbolName,m=E.findLast(g.statements,E.isAnyImportSyntax),p=E.stripQuotes(p),f=E.createImportDeclaration(void 0,void 0,function(e){var t=E.createIdentifier(_);switch(e){case 1:return E.createImportClause(t,void 0);case 2:return E.createImportClause(void 0,E.createNamespaceImport(t));case 0:return E.createImportClause(void 0,E.createNamedImports([E.createImportSpecifier(void 0,t)]));default:E.Debug.assertNever(e)}}(e),(e=g,r=E.createLiteral(p),y=E.firstOrUndefined(e.imports),r.singleQuote=!!y&&!E.isStringDoubleQuoted(y,e),r)),y=D.with(s,function(e){m?e.insertNodeAfter(g,m,f,{suffix:h}):e.insertNodeAt(g,E.getSourceFileImportLocation(g),f,{suffix:""+h+h})}),S(E.Diagnostics.Import_0_from_1,[_,p],y,"NewImport",p)))),k}function C(t,e,n){return E.firstDefined(e,function(e){return B(t,e,n)})}function x(e){return e=E.removeFileExtension(e),e=E.endsWith(e,"/index")?e.substr(0,e.length-6):e}function B(e,t,n){e=E.getRelativePathToDirectoryOrUrl(t,e,t,n,!1);return E.isRootedDiskPath(e)||E.startsWith(e,"..")?void 0:e}function A(e,t,n){e=E.getRelativePathToDirectoryOrUrl(t,e,t,n,!1);return E.pathIsRelative(e)?e:"./"+e}function I(e){e=238===e.kind?e.moduleSpecifier:248===e.moduleReference.kind?e.moduleReference.expression:void 0;return e&&E.isStringLiteral(e)?e.text:void 0}function m(e,t){e=e.declarations;return E.some(e,function(e){return!!(E.getMeaningFromDeclaration(e)&t)})}function f(e,t,n){for(var o=0,r=e.getAmbientModules();o<r.length;o++)n(r[o]);for(var i=0,s=t;i<s.length;i++){var a=s[i];E.isExternalOrCommonJsModule(a)&&n(a.symbol)}}var t,n,D,y;t=E.codefix||(E.codefix={}),D=E.textChanges.ChangeTracker,t.registerCodeFix({errorCodes:[E.Diagnostics.Cannot_find_name_0.code,E.Diagnostics.Cannot_find_name_0_Did_you_mean_1.code,E.Diagnostics.Cannot_find_namespace_0.code,E.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead.code],getCodeActions:function(e){p=!!(t=e).host.useCaseSensitiveFileNames&&t.host.useCaseSensitiveFileNames(),h=t.program.getTypeChecker(),d=E.getTokenAtPosition(t.sourceFile,t.span.start,!1);var o,r,i,s,a,l,c,t,n,u,d,p,g,h={host:t.host,newLineCharacter:t.newLineCharacter,rulesProvider:t.rulesProvider,sourceFile:t.sourceFile,checker:h,compilerOptions:t.program.getCompilerOptions(),cachedImportDeclarations:[],getCanonicalFileName:E.createGetCanonicalFileName(p),symbolName:d.getText(),symbolToken:d};return e.errorCode===E.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead.code?(p=(t=h).symbolToken,2097152&(g=(d=t.checker).getSymbolAtLocation(p)).flags?(n=d.getAliasedSymbol(g),u=t.symbolName):E.isJsxOpeningLikeElement(p.parent)&&p.parent.tagName===p?u=(n=d.getAliasedSymbol(d.resolveName(d.getJsxNamespace(),p.parent.tagName,107455))).name:E.Debug.fail("Either the symbol or the JSX namespace should be a UMD global if we got here"),_(n,__assign({},t,{symbolName:u,kind:2}))):(o=h,g=e.program.getSourceFiles(),r=e.cancellationToken,i=o.sourceFile,s=o.checker,a=o.symbolName,d=o.symbolToken,E.Debug.assert("default"!==a),l=new y,c=E.getMeaningFromLocation(d),f(s,g,function(e){var t,n;e!==i.symbol&&(r.throwIfCancellationRequested(),(n=s.tryGetMemberInModuleExports("default",e))&&(n=E.getLocalSymbolForExportDefault(n))&&n.escapedName===a&&m(n,c)&&(t=E.getUniqueSymbolId(n,s),l.addActions(t,_(e,__assign({},o,{kind:1})))),n=s.tryGetMemberInModuleExportsAndProperties(a,e))&&m(n,c)&&(t=E.getUniqueSymbolId(n,s),l.addActions(t,_(e,__assign({},o,{kind:0}))))}),l.getAllActions())}}),e.prototype.addAction=function(e,t){var n=this.symbolIdToActionMap[e];if(n)if("CodeChange"!==t.kind){for(var o=[],r=0,i=this.symbolIdToActionMap[e];r<i.length;r++){var s=i[r];if("CodeChange"!==s.kind)switch(this.compareModuleSpecifiers(s.moduleSpecifier,t.moduleSpecifier)){case 0:if("NewImport"===t.kind)return;case 1:o.push(s);break;case 2:continue}else o.push(s)}o.push(t),this.symbolIdToActionMap[e]=o}else n.push(t);else this.symbolIdToActionMap[e]=[t]},e.prototype.addActions=function(e,t){for(var n=0,o=t;n<o.length;n++){var r=o[n];this.addAction(e,r)}},e.prototype.getAllActions=function(){var e,t=[];for(e in this.symbolIdToActionMap)t=E.concatenate(t,this.symbolIdToActionMap[e]);return t},e.prototype.compareModuleSpecifiers=function(e,t){var n;return e===t?1:0===t.indexOf(e)?0:0===e.indexOf(t)?2:E.isExternalModuleNameRelative(e)&&E.isExternalModuleNameRelative(t)?(n=new RegExp(E.directorySeparator,"g"),(e=(e.match(n)||[]).length)<(t=(t.match(n)||[]).length)?0:e===t?1:2):1},y=e,(n=t.ImportKind||(t.ImportKind={}))[n.Named=0]="Named",n[n.Default=1]="Default",n[n.Namespace=2]="Namespace",t.getCodeActionForImport=_,t.forEachExternalModule=f}(ts=ts||{}),function(i){var t;(i.codefix||(i.codefix={})).registerCodeFix({errorCodes:(t=i.Diagnostics,Object.keys(t).filter(function(e){return t[e]&&t[e].category===i.DiagnosticCategory.Error}).map(function(e){return t[e].code})),getCodeActions:function(e){var t=e.sourceFile,n=e.program,o=e.newLineCharacter,e=e.span;if(i.isInJavaScriptFile(t)&&i.isCheckJsEnabledForFile(t,n.getCompilerOptions()))return[{description:i.getLocaleSpecificMessage(i.Diagnostics.Ignore_this_error_message),changes:[{fileName:t.fileName,textChanges:[function(e,t,n){var o=i.getLineAndCharacterOfPosition(e,t).line,o=i.getStartPositionOfLine(o,e),o=i.getFirstNonSpaceCharacterPosition(e.text,o);if(!i.isInComment(e,o)&&!i.isInString(e,o)&&!i.isInTemplateString(e,o)){var r=i.getTouchingToken(e,o,!1),r=i.getLeadingCommentRangesOfNode(r,e);if(!r||!r.length||r[0].pos>=o)return{span:{start:o,length:0},newText:"// @ts-ignore"+n}}return{span:{start:t,length:0},newText:(t===o?"":n)+"// @ts-ignore"+n}}(t,e.start,o)]}]},{description:i.getLocaleSpecificMessage(i.Diagnostics.Disable_checking_for_this_file),changes:[{fileName:t.fileName,textChanges:[{span:{start:t.checkJsDirective?t.checkJsDirective.pos:0,length:t.checkJsDirective?t.checkJsDirective.end-t.checkJsDirective.pos:0},newText:"// @ts-nocheck"+o}]}]}]}})}(ts=ts||{}),function(m){function f(e,t,n,o){for(var r=[],i=0;i<e;i++){var s=m.createParameter(void 0,void 0,void 0,t&&t[i]||"arg"+i,void 0!==n&&n<=i?m.createToken(55):void 0,o?m.createKeywordTypeNode(119):void 0,void 0);r.push(s)}return r}function y(e,t,n,o,r,i){return m.createMethod(void 0,e,void 0,t,n?m.createToken(55):void 0,o,r,i,k())}function k(){return m.createBlock([m.createThrow(m.createNew(m.createIdentifier("Error"),void 0,[m.createLiteral("Method not implemented.")]))],!0)}var e;(e=m.codefix||(m.codefix={})).newNodesToChanges=function(e,t,n){for(var o=n.sourceFile,r=m.textChanges.ChangeTracker.fromContext(n),i=0,s=e;i<s.length;i++){var a=s[i];r.insertNodeAfter(o,t,a,{suffix:n.newLineCharacter})}e=r.getChanges();return m.some(e)?(m.Debug.assert(1===e.length),[{fileName:e[0].fileName,textChanges:[{span:e[0].textChanges[0].span,newText:e[0].textChanges.reduce(function(e,t){return e+t.newText},"")}]}]):e},e.createMissingMemberNodes=function(e,t,n){for(var o=e.symbol.members,r=[],i=0,s=t.filter(function(e){return!o.has(e.escapedName)});i<s.length;i++){var a=function(e,t,o){var n=e.getDeclarations();if(n&&n.length){var r=n[0],i=m.getSynthesizedClone(m.getNameOfDeclaration(r)),s=4&(s=m.getModifierFlags(r))?m.createToken(114):16&s?m.createToken(113):void 0,a=s?m.createNodeArray([s]):void 0,l=o.getWidenedType(o.getTypeOfSymbolAtLocation(e,t)),c=!!(16777216&e.flags);switch(r.kind){case 153:case 154:case 148:case 149:var u=o.typeToTypeNode(l,t);return m.createProperty(void 0,a,i,c?m.createToken(55):void 0,u,void 0);case 150:case 151:var d=o.getSignaturesOfType(l,0);if(!m.some(d))return;if(1===n.length)return m.Debug.assert(1===d.length),_(d[0],t,k());for(var p,g=[],h=0;h<d.length;h++)(p=_(d[h],t))&&g.push(p);return n.length>d.length?(p=_(o.getSignatureFromDeclaration(n[n.length-1]),t,k()))&&g.push(p):(m.Debug.assert(n.length===d.length),u=function(e,t,n,o){for(var r=e[0],i=e[0].minArgumentCount,s=!1,a=0;a<e.length;a++){var l=e[a],i=Math.min(l.minArgumentCount,i);l.hasRestParameter&&(s=!0),l.parameters.length>=r.parameters.length&&(!l.hasRestParameter||r.hasRestParameter)&&(r=l)}var c,u=r.parameters.length-(r.hasRestParameter?1:0),d=r.parameters.map(function(e){return e.name}),p=f(u,d,i,!0);return s&&(c=m.createArrayTypeNode(m.createKeywordTypeNode(119)),d=m.createParameter(void 0,void 0,m.createToken(24),d[u]||"rest",i<=u?m.createToken(55):void 0,c,void 0),p.push(d)),y(o,t,n,void 0,p,void 0)}(d,i,c,a),g.push(u)),g;default:return}}function _(e,t,n){e=o.signatureToSignatureDeclaration(e,151,t,m.NodeBuilderFlags.SuppressAnyReturnType);return e&&(e.decorators=void 0,e.modifiers=a,e.name=i,e.questionToken=c?m.createToken(55):void 0,e.body=n),e}}(s[i],e,n);a&&(Array.isArray(a)?r=r.concat(a):r.push(a))}return r},e.createMethodFromCallExpression=function(e,t,n,o){var r,i=f(e.arguments.length,void 0,void 0,n);if(n)for(var s=m.length(e.typeArguments),a=0;a<s;a++){var l=s<8?String.fromCharCode(84+a):"T"+a,l=m.createTypeParameterDeclaration(l,void 0,void 0);(r=r||[]).push(l)}return m.createMethod(void 0,o?[m.createToken(115)]:void 0,void 0,t,void 0,r,i,n?m.createKeywordTypeNode(119):void 0,k())},e.createStubbedMethod=y}(ts=ts||{}),function(v){function T(e,t,n){for(;v.isRightSideOfQualifiedNameOrPropertyAccess(e);)e=e.parent;switch(e.parent.kind){case 193:n.isNumber=!0;break;case 192:var o=e.parent,r=n;switch(o.operator){case 43:case 44:case 38:case 52:r.isNumber=!0;break;case 37:r.isNumberOrString=!0}break;case 194:var i=e,s=e.parent,a=t,l=n;switch(s.operatorToken.kind){case 40:case 39:case 41:case 42:case 45:case 46:case 47:case 48:case 49:case 50:case 60:case 62:case 61:case 63:case 64:case 68:case 69:case 70:case 65:case 67:case 66:case 38:case 27:case 30:case 29:case 31:var c=a.getTypeAtLocation(s.left===i?s.right:s.left);272&c.flags?S(l,c):l.isNumber=!0;break;case 59:case 37:c=a.getTypeAtLocation(s.left===i?s.right:s.left);272&c.flags?S(l,c):84&c.flags?l.isNumber=!0:262178&c.flags?l.isString=!0:l.isNumberOrString=!0;break;case 58:case 32:case 34:case 35:case 33:S(l,a.getTypeAtLocation(s.left===i?s.right:s.left));break;case 92:i===s.left&&(l.isString=!0);break;case 54:i!==s.left||226!==i.parent.parent.kind&&!v.isAssignmentExpression(i.parent.parent,!0)||S(l,a.getTypeAtLocation(s.right))}break;case 257:case 258:o=e.parent,S(n,t.getTypeAtLocation(o.parent.parent.expression));break;case 181:case 182:if(e.parent.expression===e){var u=e.parent;var d=t;var p=n;var g={argumentTypes:[],returnType:{}};if(u.arguments)for(var h=0,_=u.arguments;h<_.length;h++){var m=_[h];g.argumentTypes.push(d.getTypeAtLocation(m))}T(u,d,g.returnType),(181===u.kind?p.callContexts||(p.callContexts=[]):p.constructContexts||(p.constructContexts=[])).push(g)}else E(e,t,n);break;case 179:u=e.parent,p=t,y=n,k=v.escapeLeadingUnderscores(u.name.text),y.properties||(y.properties=v.createUnderscoreEscapedMap()),b=y.properties.get(k)||{},T(u,p,b),y.properties.set(k,b);break;case 180:y=e.parent,k=t,b=n,e===y.argumentExpression?b.isNumberOrString=!0:(f=k.getTypeAtLocation(y),T(y,k,y={}),84&f.flags?b.numberIndexContext=y:b.stringIndexContext=y);break;default:E(e,t,n)}var f,y,k,b}function E(e,t,n){v.isPartOfExpression(e)&&S(n,t.getContextualType(e))}function g(e,o){if(e.isNumberOrString&&!e.isNumber&&!e.isString)return o.getUnionType([o.getNumberType(),o.getStringType()]);if(e.isNumber)return o.getNumberType();if(e.isString)return o.getStringType();if(e.candidateTypes)return o.getWidenedType(o.getUnionType(v.map(e.candidateTypes,function(e){return o.getBaseTypeOfLiteralType(e)}),!0));if(e.properties&&m(e.properties.get("then")))return i=h(0,e.properties.get("then").callContexts,!1,o).getCallSignatures().map(function(e){return e.getReturnType()}),o.createPromiseType(i.length?o.getUnionType(i,!0):o.getAnyType());if(e.properties&&m(e.properties.get("push")))return o.createArrayType(h(0,e.properties.get("push").callContexts,!1,o));if(e.properties||e.callContexts||e.constructContexts||e.numberIndexContext||e.stringIndexContext){var r=v.createUnderscoreEscapedMap(),t=[],n=[],i=void 0,s=void 0;if(e.properties&&e.properties.forEach(function(e,t){var n=o.createSymbol(4,t);n.type=g(e,o)||o.getAnyType(),r.set(t,n)}),e.callContexts)for(var a=0,l=e.callContexts;a<l.length;a++){var c=l[a];t.push(_(c,o))}if(e.constructContexts)for(var u=0,d=e.constructContexts;u<d.length;u++){var p=d[u];n.push(_(p,o))}return e.numberIndexContext&&(s=o.createIndexInfo(g(e.numberIndexContext,o),!1)),e.stringIndexContext&&(i=o.createIndexInfo(g(e.stringIndexContext,o),!1)),o.createAnonymousType(void 0,r,t,n,i,s)}}function h(e,t,n,o){var r=[];if(t)for(var i=0,s=t;i<s.length;i++){var a=s[i];a.argumentTypes.length>e&&(n?r=v.concatenate(r,v.map(a.argumentTypes.slice(e),function(e){return o.getBaseTypeOfLiteralType(e)})):r.push(o.getBaseTypeOfLiteralType(a.argumentTypes[e])))}if(r.length)return t=o.getWidenedType(o.getUnionType(r,!0)),n?o.createArrayType(t):t}function _(e,t){for(var n=[],o=0;o<e.argumentTypes.length;o++){var r=t.createSymbol(1,v.escapeLeadingUnderscores("arg"+o));r.type=t.getWidenedType(t.getBaseTypeOfLiteralType(e.argumentTypes[o])),n.push(r)}var i=g(e.returnType,t)||t.getVoidType();return t.createSignature(void 0,void 0,void 0,n,i,void 0,e.argumentTypes.length,!1,!1)}function S(e,t){!t||1&t.flags||8192&t.flags||(e.candidateTypes||(e.candidateTypes=[])).push(t)}function m(e){return e&&e.callContexts}var C,e;(v.codefix||(v.codefix={})).registerCodeFix({errorCodes:[v.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined.code,v.Diagnostics.Variable_0_implicitly_has_an_1_type.code,v.Diagnostics.Parameter_0_implicitly_has_an_1_type.code,v.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type.code,v.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation.code,v.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type.code,v.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation.code,v.Diagnostics.Member_0_implicitly_has_an_1_type.code],getCodeActions:function(e){var i,o=e.sourceFile,t=e.program,n=e.span.start,r=e.errorCode,s=e.cancellationToken,a=v.getTokenAtPosition(o,n,!1);if(!v.isInJavaScriptFile(a)){switch(a.kind){case 71:case 24:case 114:case 112:case 113:case 131:break;default:return}var l,c=v.getContainingFunction(a),u=t.getTypeChecker();switch(r){case v.Diagnostics.Member_0_implicitly_has_an_1_type.code:case v.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined.code:return h(a.parent);case v.Diagnostics.Variable_0_implicitly_has_an_1_type.code:return(l=u.getSymbolAtLocation(a))&&l.valueDeclaration&&h(l.valueDeclaration);case v.Diagnostics.Parameter_0_implicitly_has_an_1_type.code:if(v.isSetAccessor(c))return _(c);case v.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type.code:return l=a.parent,v.isIdentifier(l.name)&&function(e){switch(e.kind){case 228:case 151:case 152:return 1;case 186:return e.name}}(c)&&(d=function(e){switch(e.kind){case 152:case 186:case 228:case 151:var t=152===e.kind?b(e,o,123):e.name;if(t)return C.inferTypeForParametersFromReferences(f(t),e,u,s)}}(c)||v.map(c.parameters,function(e){return v.isIdentifier(e.name)&&y(e.name)}))&&(d=v.zipWith(c.parameters,d,function(e,t){return t&&!e.type&&!e.initializer&&(t=k(t,c))?{span:{start:e.end,length:0},newText:": "+t}:void 0}).filter(function(e){return!!e})).length?[{description:v.formatStringFromArgs(v.getLocaleSpecificMessage(v.Diagnostics.Infer_parameter_types_from_usage),[l.name.getText()]),changes:[{fileName:o.fileName,textChanges:d}]}]:void 0;case v.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation.code:case v.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type.code:if(v.isGetAccessor(c)){var d=c;if(v.isIdentifier(d.name)){var p,g=y(d.name),g=g&&k(g,c);if(g)return p=b(d,o,20),m(d.name.getText(),p.getEnd(),": "+g)}return}else return void 0;case v.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation.code:return v.isSetAccessor(c)?_(c):void 0}}function h(e){if(v.isIdentifier(e.name)){var t=y(e.name),t=t&&k(t,e);if(t)return m(e.name.getText(),e.name.getEnd(),": "+t)}}function _(e){var t=e.parameters[0];if(t&&v.isIdentifier(e.name)&&v.isIdentifier(t.name)){var n=y(e.name)||y(t.name),n=n&&k(n,c);if(n)return m(e.name.getText(),t.name.getEnd(),": "+n)}}function m(e,t,n){return[{description:v.formatStringFromArgs(v.getLocaleSpecificMessage(v.Diagnostics.Infer_type_of_0_from_usage),[e]),changes:[{fileName:o.fileName,textChanges:[{span:{start:t,length:0},newText:n}]}]}]}function f(e){e=v.FindAllReferences.findReferencedSymbols(t,s,t.getSourceFiles(),e.getSourceFile(),e.getStart());return v.Debug.assert(!!e,"Found no references!"),v.Debug.assert(1===e.length,"Found more references than expected"),v.map(e[0].references,function(e){return v.getTokenAtPosition(t.getSourceFile(e.fileName),e.textSpan.start,!1)})}function y(e){return C.inferTypeFromReferences(f(e),u,s)}function k(e,t){i||(o=!(n=""),i={string:function(){return o?n:void 0},writeKeyword:r=function(e){return n+=e},writeOperator:r,writePunctuation:r,writeSpace:r,writeStringLiteral:r,writeParameter:r,writeProperty:r,writeSymbol:r,writeLine:function(){return n+=" "},increaseIndent:v.noop,decreaseIndent:v.noop,clear:function(){o=!(n="")},trackSymbol:function(e,t,n){0!==u.isSymbolAccessible(e,t,n,!1).accessibility&&(o=!1)},reportInaccessibleThisError:function(){o=!1},reportPrivateInBaseOfClassExpression:function(){o=!1}}),i.clear();var n,o,r=i;return u.getSymbolDisplayBuilder().buildTypeDisplay(e,r,t),r.string()}function b(e,t,n){for(var o=0,r=e.getChildren(t);o<r.length;o++){var i=r[o];if(i.kind===n)return i}}}}),(e=C=C||{}).inferTypeFromReferences=function(e,t,n){for(var o={},r=0,i=e;r<i.length;r++){var s=i[r];n.throwIfCancellationRequested(),T(s,t,o)}return g(o,t)},e.inferTypeForParametersFromReferences=function(e,t,n,o){if(t.parameters){for(var r={},i=0,s=e;i<s.length;i++){var a=s[i];o.throwIfCancellationRequested(),T(a,n,r)}var l=152===t.kind?r.constructContexts:r.callContexts;if(l){for(var c=[],u=0;u<t.parameters.length;u++){for(var d,p=[],g=v.isRestParameter(t.parameters[u]),h=0,_=l;h<_.length;h++){var m=_[h];m.argumentTypes.length>u&&(g?p=v.concatenate(p,v.map(m.argumentTypes.slice(u),function(e){return n.getBaseTypeOfLiteralType(e)})):p.push(n.getBaseTypeOfLiteralType(m.argumentTypes[u])))}p.length&&(d=n.getWidenedType(n.getUnionType(p,!0)),c[u]=g?n.createArrayType(d):d)}return c}}}}(ts=ts||{}),function(c){function t(e){return!!e&&(c.isFunctionLikeDeclaration(e)?e.parameters.some(t)||!e.type&&!!c.getJSDocReturnType(e):!e.type&&!!c.getJSDocType(e))}function s(e){return c.isFunctionLikeDeclaration(e)||226===e.kind||146===e.kind||148===e.kind||149===e.kind}function u(e){if(void 0!==e)switch(e.kind){case 268:case 269:return c.createTypeReferenceNode("any",c.emptyArray);case 272:return c.createUnionTypeNode([c.visitNode(e.type,u),c.createTypeReferenceNode("undefined",c.emptyArray)]);case 271:return u(e.type);case 270:return c.createUnionTypeNode([c.visitNode(e.type,u),c.createTypeReferenceNode("null",c.emptyArray)]);case 274:return c.createArrayTypeNode(c.visitNode(e.type,u));case 273:return l=(a=e).parameters&&a.parameters.map(u),c.createFunctionTypeNode(c.emptyArray,l,a.type);case 146:return a=(l=e).parent.parameters.indexOf(l),n=274===l.type.kind&&a===l.parent.parameters.length-1,a=l.name||(n?"rest":"arg"+a),n=n?c.createToken(24):l.dotDotDotToken,c.createParameter(l.decorators,l.modifiers,n,a,l.questionToken,c.visitNode(l.type,u),l.initializer);case 159:var t,n=e,o=n.typeName,r=n.typeArguments;if(c.isIdentifier(n.typeName)){if(c.isJSDocIndexSignature(n))return s=n,t=c.createParameter(void 0,void 0,void 0,133===s.typeArguments[0].kind?"n":"s",void 0,c.createTypeReferenceNode(133===s.typeArguments[0].kind?"number":"string",[]),void 0),t=c.createTypeLiteralNode([c.createIndexSignature(void 0,void 0,[t],s.typeArguments[1])]),c.setEmitFlags(t,1),t;var i=n.typeName.text;switch(n.typeName.text){case"String":case"Boolean":case"Object":case"Number":i=i.toLowerCase();break;case"array":case"date":case"promise":i=i[0].toUpperCase()+i.slice(1)}o=c.createIdentifier(i),r="Array"!==i&&"Promise"!==i||n.typeArguments?c.visitNodes(n.typeArguments,u):c.createNodeArray([c.createTypeReferenceNode("any",c.emptyArray)])}return c.createTypeReferenceNode(o,r);default:var s=c.visitEachChild(e,u,void 0);return c.setEmitFlags(s,1),s}var n,a,l}var a,n;(a=c.refactor||(c.refactor={})).annotateWithTypeFromJSDoc||(a.annotateWithTypeFromJSDoc={}),n={name:"Annotate with type from JSDoc",description:c.Diagnostics.Annotate_with_type_from_JSDoc.message,getEditsForAction:function(e,t){var n,o,r,i;return"annotate"!==t?c.Debug.fail("actionName !== action: annotate !== "+t):(t=c.getTokenAtPosition(e.file,e.startPosition,!1),(t=c.findAncestor(t,s))&&!t.type?(o=c.getJSDocType(t),c.isFunctionLikeDeclaration(t)&&(c.getJSDocReturnType(t)||t.parameters.some(function(e){return!!c.getJSDocType(e)}))||o&&146===t.kind?(n=(t=e).file,r=c.getTokenAtPosition(n,t.startPosition,!1),r=c.findAncestor(r,c.isFunctionLikeDeclaration),t=c.textChanges.ChangeTracker.fromContext(t),i=function(e){var t=c.getEffectiveTypeParameterDeclarations(e,!0),n=e.parameters.map(function(e){return c.createParameter(e.decorators,e.modifiers,e.dotDotDotToken,e.name,e.questionToken,u(c.getEffectiveTypeAnnotationNode(e,!0)),e.initializer)}),o=u(c.getEffectiveReturnTypeNode(e,!0));switch(e.kind){case 228:return c.createFunctionDeclaration(e.decorators,e.modifiers,e.asteriskToken,e.name,t,n,o,e.body);case 152:return c.createConstructor(e.decorators,e.modifiers,n,e.body);case 186:return c.createFunctionExpression(e.modifiers,e.asteriskToken,e.name,t,n,o,e.body);case 187:return c.createArrowFunction(e.modifiers,t,n,o,e.equalsGreaterThanToken,e.body);case 151:return c.createMethod(e.decorators,e.modifiers,e.asteriskToken,e.name,e.questionToken,t,n,o,e.body);case 153:return c.createGetAccessor(e.decorators,e.modifiers,e.name,e.parameters,o,e.body);case 154:return c.createSetAccessor(e.decorators,e.modifiers,e.name,n,e.body);default:return c.Debug.assertNever(e,"Unexpected SyntaxKind: "+e.kind)}}(r),c.suppressLeadingAndTrailingTrivia(i),t.replaceRange(n,{pos:r.getStart(),end:r.end},i),{edits:t.getChanges(),renameFilename:void 0,renameLocation:void 0}):o?(r=(n=e).file,i=c.getTokenAtPosition(r,n.startPosition,!1),i=c.findAncestor(i,s),t=c.getJSDocType(i),i&&t&&!i.type?(n=c.textChanges.ChangeTracker.fromContext(n),o=function(e,t){switch(e.kind){case 226:return c.createVariableDeclaration(e.name,t,e.initializer);case 148:return c.createPropertySignature(e.modifiers,e.name,e.questionToken,t,e.initializer);case 149:return c.createProperty(e.decorators,e.modifiers,e.name,e.questionToken,t,e.initializer);default:return c.Debug.fail("Unexpected SyntaxKind: "+e.kind)}}(i,u(t)),c.suppressLeadingAndTrailingTrivia(o),n.replaceRange(r,{pos:i.getStart(),end:i.end},o),{edits:n.getChanges(),renameFilename:void 0,renameLocation:void 0}):c.Debug.fail("!decl || !jsdocType || decl.type: !"+i+" || !"+t+" || "+i.type)):void c.Debug.assert(!!a,"No applicable refactor found.")):void 0)},getAvailableActions:function(e){if(!c.isInJavaScriptFile(e.file))return e=c.getTokenAtPosition(e.file,e.startPosition,!1),t(c.findAncestor(e,s))?[{name:n.name,description:n.description,actions:[{description:n.description,name:"annotate"}]}]:void 0}},a.registerRefactor(n)}(ts=ts||{}),function(k){function b(e){var t=e.startPosition,n=e.file,e=e.program.getTypeChecker(),n=k.getTokenAtPosition(n,t,!1);return e.getSymbolAtLocation(n)}var e,t;(e=k.refactor||(k.refactor={})).convertFunctionToES6Class||(e.convertFunctionToES6Class={}),t={name:"Convert to ES2015 class",description:k.Diagnostics.Convert_function_to_an_ES2015_class.message,getEditsForAction:function(e,t){if("convert"===t){var u=e.file,n=b(e),t=e.rulesProvider.getFormatOptions().newLineCharacter,o=[],r=[];if(19&n.flags){var i,s,a,l,c,d=n.valueDeclaration,p=k.textChanges.ChangeTracker.fromContext(e);switch(d.kind){case 228:_(i=d),a=d,l=m(n),a.body&&l.unshift(k.createConstructor(void 0,void 0,a.parameters,a.body)),c=y(a,84),s=k.createClassDeclaration(void 0,c,a.name,void 0,void 0,l);break;case 226:i=d.parent.parent,1===d.parent.declarations.length?_(i):_(d,!0),s=function(e){var t,n=e.initializer;if(n&&186===n.kind&&71===e.name.kind)return t=m(n.symbol),n.body&&t.unshift(k.createConstructor(void 0,void 0,n.parameters,n.body)),n=y(i,84),k.createClassDeclaration(void 0,n,e.name,void 0,void 0,t)}(d)}if(s){p.insertNodeAfter(u,i,s,{suffix:t});for(var g=0,h=r;g<h.length;g++)(0,h[g])();return{edits:p.getChanges(),renameFilename:void 0,renameLocation:void 0}}}}function _(t,e){void 0===e&&(e=!1),o.some(function(e){return k.isNodeDescendantOf(t,e)})||(o.push(t),r.push(e?function(){return p.deleteNodeInList(u,t)}:function(){return p.deleteNode(u,t)}))}function m(e){var t=[];return e.members&&e.members.forEach(function(e){e=n(e,void 0);e&&t.push(e)}),e.exports&&e.exports.forEach(function(e){e=n(e,[k.createToken(115)]);e&&t.push(e)}),t;function n(e,t){if(4&e.flags){var n=e.valueDeclaration,o=n.parent,r=o.right;if(k.isFunctionLike(r)){if(_(o.parent&&210===o.parent.kind?o.parent:o),!o.right)return k.createProperty([],t,e.name,void 0,void 0,void 0);switch(o.right.kind){case 186:var i=o.right,s=k.concatenate(t,y(i,120));return f(o,i=k.createMethod(void 0,s,void 0,n.name,void 0,void 0,i.parameters,void 0,i.body)),i;case 187:var a=o.right,l=a.body,c=void 0;return c=207===l.kind?l:k.createBlock([k.createReturn(l)]),s=k.concatenate(t,y(a,120)),f(o,i=k.createMethod(void 0,s,void 0,n.name,void 0,void 0,a.parameters,void 0,c)),i;default:return k.isSourceFileJavaScript(u)?void 0:(l=k.createProperty(void 0,t,n.name,void 0,void 0,o.right),f(o.parent,l),l)}}}}}function f(e,r){k.forEachLeadingCommentRange(u.text,e.pos,function(e,t,n,o){3===n?(e+=2,t-=2):e+=2,k.addSyntheticLeadingComment(r,n,u.text.slice(e,t),o)})}function y(e,t){return k.filter(e.modifiers,function(e){return e.kind===t})}},getAvailableActions:function(e){return k.isInJavaScriptFile(e.file)&&(e=b(e))&&16&(e=k.isDeclarationOfFunctionOrClassExpression(e)?e.valueDeclaration.initializer.symbol:e).flags&&e.members&&0<e.members.size?[{name:t.name,description:t.description,actions:[{description:t.description,name:"convert"}]}]:void 0}},e.registerRefactor(t)}(ts=ts||{}),function(Y){function e(e){var s,a,t=q(e.file,{start:e.startPosition,length:Y.getRefactorContextLength(e)}).targetRange;if(void 0!==t){t=Q(t,e),e=t.scopes,t=t.readsAndWrites,s=t.functionErrorsPerScope,a=t.constantErrorsPerScope;t=e.map(function(e,t){o=e;var n,o=Y.isFunctionLikeDeclaration(o)?"inner function":Y.isClassLike(o)?"method":"function",r=Y.isClassLike(e)?"readonly field":"constant",i=Y.isFunctionLikeDeclaration(e)?function(e){switch(e.kind){case 152:return"constructor";case 186:return e.name?"function expression '"+e.name.text+"'":"anonymous function expression";case 228:return"function '"+e.name.text+"'";case 187:return"arrow function";case 151:return"method '"+e.name.getText();case 153:return"'get "+e.name.getText()+"'";case 154:return"'set "+e.name.getText()+"'";default:Y.Debug.assertNever(e)}}(e):Y.isClassLike(e)?229===e.kind?"class '"+e.name.text+"'":e.name?"class expression '"+e.name.text+"'":"anonymous class expression":234===(i=e).kind?"namespace '"+i.parent.name.getText()+"'":i.externalModuleIndicator?0:1,o=1===i?(n=Y.formatStringFromArgs(Y.getLocaleSpecificMessage(Y.Diagnostics.Extract_to_0_in_1_scope),[o,"global"]),Y.formatStringFromArgs(Y.getLocaleSpecificMessage(Y.Diagnostics.Extract_to_0_in_1_scope),[r,"global"])):0===i?(n=Y.formatStringFromArgs(Y.getLocaleSpecificMessage(Y.Diagnostics.Extract_to_0_in_1_scope),[o,"module"]),Y.formatStringFromArgs(Y.getLocaleSpecificMessage(Y.Diagnostics.Extract_to_0_in_1_scope),[r,"module"])):(n=Y.formatStringFromArgs(Y.getLocaleSpecificMessage(Y.Diagnostics.Extract_to_0_in_1),[o,i]),Y.formatStringFromArgs(Y.getLocaleSpecificMessage(Y.Diagnostics.Extract_to_0_in_1),[r,i]));return 0!==t||Y.isClassLike(e)||(o=Y.formatStringFromArgs(Y.getLocaleSpecificMessage(Y.Diagnostics.Extract_to_0_in_enclosing_scope),[r])),{functionExtraction:{description:n,errors:s[t]},constantExtraction:{description:o,errors:a[t]}}});if(void 0!==t){for(var n=[],o=Y.createMap(),r=[],i=Y.createMap(),l=0,c=0,u=t;c<u.length;c++){var d,p=u[c],g=p.functionExtraction,p=p.constantExtraction;0===g.errors.length&&(d=g.description,o.has(d)||(o.set(d,!0),n.push({description:d,name:"function_scope_"+l}))),0===p.errors.length&&(d=p.description,i.has(d)||(i.set(d,!0),r.push({description:d,name:"constant_scope_"+l}))),l++}e=[];return n.length&&e.push({name:h.name,description:Y.getLocaleSpecificMessage(Y.Diagnostics.Extract_function),actions:n}),r.length&&e.push({name:h.name,description:Y.getLocaleSpecificMessage(Y.Diagnostics.Extract_constant),actions:r}),e.length?e:void 0}}}function t(e,L){var M=q(e.file,{start:e.startPosition,length:Y.getRefactorContextLength(e)}).targetRange,t=/^function_scope_(\d+)$/.exec(L);if(t){var n=+t[1];Y.Debug.assert(isFinite(n),"Expected to parse a finite number from the function scope index");var r,t=n,o=(l=Q(p=M,g=e)).scopes,i=(l=l.readsAndWrites).target,s=l.usagesPerScope,a=l.functionErrorsPerScope,l=l.exposedVariableDeclarations,c=(Y.Debug.assert(!a[t].length,"The extraction went missing? How?"),g.cancellationToken.throwIfCancellationRequested(),i),u=o[t],a=s[t],i=l,o=p,s=g,t=a.usages,l=a.typeParameterUsages,a=a.substitutions,d=s.program.getTypeChecker(),p=u.getSourceFile(),g=Z(Y.isClassLike(u)?"newMethod":"newFunction",p.text),h=Y.isInJavaScriptFile(u),_=Y.createIdentifier(g),m=void 0,f=[],F=[];t.forEach(function(e,t){var n=void 0,o=(h||(o=d.getTypeOfSymbolAtLocation(e.symbol,e.node),o=d.getBaseTypeOfLiteralType(o),n=d.typeToTypeNode(o,c,Y.NodeBuilderFlags.NoTruncation)),Y.createParameter(void 0,void 0,void 0,t,void 0,n));f.push(o),2===e.usage&&(r=r||[]).push(e),F.push(Y.createIdentifier(t))}),t=void 0!==(l=0===(t=Y.arrayFrom(l.values()).map(function(e){return{type:e,declaration:function(e){var t=void 0,e=e.symbol;if(e&&e.declarations)for(var n=0,o=e.declarations;n<o.length;n++){var r=o[n];(void 0===t||r.pos<t.pos)&&(t=r)}return t}(e)}}).sort(te)).length?void 0:t.map(function(e){return e.declaration}))?l.map(function(e){return Y.createTypeReferenceNode(e.name,void 0)}):void 0,Y.isExpression(c)&&!h&&(y=d.getContextualType(c),m=d.typeToTypeNode(y,u,Y.NodeBuilderFlags.NoTruncation)),y=c,k=i,b=r,v=a,a=!!(o.facts&ie.HasReturn),S=void 0!==b||0<k.length;var y,k,b,v,T,E,S,U,C=(a=Y.isBlock(y)&&!S&&0===v.size?{body:Y.createBlock(y.statements,!0),returnValueProperty:void 0}:(E=!1,x=Y.createNodeArray(Y.isBlock(y)?y.statements.slice(0):[Y.isStatement(y)?y:Y.createReturn(y)]),S||v.size?(C=Y.visitNodes(x,function e(t){if(!E&&219===t.kind&&S)return n=ne(k,b),t.expression&&(T=T||"__return",n.unshift(Y.createPropertyAssignment(T,Y.visitNode(t.expression,e)))),1===n.length?Y.createReturn(n[0].name):Y.createReturn(Y.createObjectLiteral(n));var n=E;E=E||Y.isFunctionLikeDeclaration(t)||Y.isClassLike(t);var o=v.get(Y.getNodeId(t).toString()),o=o?Y.getSynthesizedDeepClone(o):Y.visitEachChild(t,e,Y.nullTransformationContext);return E=n,o}).slice(),S&&!a&&Y.isStatement(y)&&(1===(a=ne(k,b)).length?C.push(Y.createReturn(a[0].name)):C.push(Y.createReturn(Y.createObjectLiteral(a)))),{body:Y.createBlock(C,!0),returnValueProperty:T}):{body:Y.createBlock(x,!0),returnValueProperty:void 0})).body,x=a.returnValueProperty,_=(Y.suppressLeadingAndTrailingTrivia(C),a=Y.isClassLike(u)?(a=h?[]:[Y.createToken(112)],o.facts&ie.InStaticRegion&&a.push(Y.createToken(115)),o.facts&ie.IsAsyncFunction&&a.push(Y.createToken(120)),Y.createMethod(void 0,a.length?a:void 0,o.facts&ie.IsGenerator?Y.createToken(39):void 0,_,void 0,l,f,m,C)):Y.createFunctionDeclaration(void 0,o.facts&ie.IsAsyncFunction?[Y.createToken(120)]:void 0,o.facts&ie.IsGenerator?Y.createToken(39):void 0,_,l,f,m,C),Y.textChanges.ChangeTracker.fromContext(s)),B=(U=(oe(o.range)?Y.last(o.range):o.range).end,(l=Y.find(function(e){if(Y.isFunctionLikeDeclaration(e)){var t=e.body;if(Y.isBlock(t))return t.statements}else{if(Y.isModuleBlock(e)||Y.isSourceFile(e))return e.statements;if(Y.isClassLike(e))return e.members;Y.assertTypeIsNever(e)}return Y.emptyArray}(u),function(e){return e.pos>=U&&Y.isFunctionLikeDeclaration(e)&&!Y.isConstructorDeclaration(e)}))?_.insertNodeBefore(s.file,l,a,{suffix:s.newLineCharacter+s.newLineCharacter}):_.insertNodeBefore(s.file,u.getLastToken(),a,{prefix:Y.isLineBreak(p.text.charCodeAt(u.getLastToken().pos))?s.newLineCharacter:s.newLineCharacter+s.newLineCharacter,suffix:s.newLineCharacter}),[]),l=(l=u,a=o,p=Y.createIdentifier(g),Y.isClassLike(l)?(a=a.facts&ie.InStaticRegion?Y.createIdentifier(l.name.text):Y.createThis(),Y.createPropertyAccess(a,p)):p),a=Y.createCall(l,t,F);if(o.facts&ie.IsGenerator&&(a=Y.createYield(Y.createToken(39),a)),o.facts&ie.IsAsyncFunction&&(a=Y.createAwait(a)),i.length&&!r)if(Y.Debug.assert(!x),Y.Debug.assert(!(o.facts&ie.HasReturn)),1===i.length){var A=i[0];B.push(Y.createVariableStatement(void 0,Y.createVariableDeclarationList([Y.createVariableDeclaration(Y.getSynthesizedDeepClone(A.name),Y.getSynthesizedDeepClone(A.type),a)],A.parent.flags)))}else{for(var H=[],V=[],W=i[0].parent.flags,I=!1,D=0,G=i;D<G.length;D++){A=G[D],H.push(Y.createBindingElement(void 0,void 0,Y.getSynthesizedDeepClone(A.name)));var K=d.typeToTypeNode(d.getBaseTypeOfLiteralType(d.getTypeAtLocation(A)),u,Y.NodeBuilderFlags.NoTruncation);V.push(Y.createPropertySignature(void 0,A.symbol.name,void 0,K,void 0)),I=I||void 0!==A.type,W&=A.parent.flags}p=I?Y.createTypeLiteralNode(V):void 0;p&&Y.setEmitFlags(p,1),B.push(Y.createVariableStatement(void 0,Y.createVariableDeclarationList([Y.createVariableDeclaration(Y.createObjectBindingPattern(H),p,a)],W)))}else if(i.length||r){if(i.length)for(var j=0,z=i;j<z.length;j++){var N=(A=z[j]).parent.flags;2&N&&(N=-3&N|1),B.push(Y.createVariableStatement(void 0,Y.createVariableDeclarationList([Y.createVariableDeclaration(A.symbol.name,X(A.type))],N)))}x&&B.push(Y.createVariableStatement(void 0,Y.createVariableDeclarationList([Y.createVariableDeclaration(x,X(m))],1)));l=ne(i,r);x&&l.unshift(Y.createShorthandPropertyAssignment(x)),1===l.length?(Y.Debug.assert(!x),B.push(Y.createStatement(Y.createAssignment(l[0].name,a))),o.facts&ie.HasReturn&&B.push(Y.createReturn())):(B.push(Y.createStatement(Y.createAssignment(Y.createObjectLiteral(l),a))),x&&B.push(Y.createReturn(Y.createIdentifier(x))))}else o.facts&ie.HasReturn?B.push(Y.createReturn(a)):oe(o.range)?B.push(Y.createStatement(a)):B.push(a);return t=oe(o.range)?{pos:Y.first(o.range).getStart(),end:Y.last(o.range).end}:{pos:o.range.getStart(),end:o.range.end},_.replaceRangeWithNodes(s.file,t,B,{nodeSeparator:s.newLineCharacter}),p=_.getChanges(),{renameFilename:m=(oe(o.range)?Y.first(o.range):o.range).getSourceFile().fileName,renameLocation:ee(p,m,g,!1),edits:p};function X(e){if(void 0!==e){for(var e=Y.getSynthesizedDeepClone(e),t=e;Y.isParenthesizedTypeNode(t);)t=t.type;return Y.isUnionTypeNode(t)&&Y.find(t.types,function(e){return 139===e.kind})?e:Y.createUnionTypeNode([e,Y.createKeywordTypeNode(139)])}}}var w,$,O,R,P,i=/^constant_scope_(\d+)$/.exec(L);if(i)return n=+i[1],Y.Debug.assert(isFinite(n),"Expected to parse a finite number from the constant scope index"),l=n,s=Q(a=M,t=e),_=s.scopes,s=s.readsAndWrites,o=s.target,m=s.usagesPerScope,g=s.constantErrorsPerScope,s=s.exposedVariableDeclarations,Y.Debug.assert(!g[l].length,"The extraction went missing? How?"),Y.Debug.assert(0===s.length,"Extract constant accepted a range containing a variable declaration?"),t.cancellationToken.throwIfCancellationRequested(),g=Y.isExpression(o)?o:o.statements[0].expression,w=_[l],s=m[l],o=a.facts,_=t,s=s.substitutions,m=_.program.getTypeChecker(),l=w.getSourceFile(),a=Z(Y.isClassLike(w)?"newProperty":"newLocal",l.text),t=Y.isInJavaScriptFile(w),m=t?void 0:m.typeToTypeNode(m.getContextualType(g),w,Y.NodeBuilderFlags.NoTruncation),p=g,s=($=s).size?function e(t){var n=$.get(Y.getNodeId(t).toString());return n?Y.getSynthesizedDeepClone(n):Y.visitEachChild(t,e,Y.nullTransformationContext)}(p):p,Y.suppressLeadingAndTrailingTrivia(s),p=Y.textChanges.ChangeTracker.fromContext(_),Y.isClassLike(w)?(Y.Debug.assert(!t),(t=[]).push(Y.createToken(112)),o&ie.InStaticRegion&&t.push(Y.createToken(115)),t.push(Y.createToken(131)),t=Y.createProperty(void 0,t,a,void 0,m,s),O=Y.createPropertyAccess(o&ie.InStaticRegion?Y.createIdentifier(w.name.getText()):Y.createThis(),Y.createIdentifier(a)),R=function(e){var t=w.members;Y.Debug.assert(0<t.length);for(var n=void 0,o=!0,r=0,i=t;r<i.length;r++){var s=i[r];if(s.pos>e)return n||t[0];if(o&&!Y.isPropertyDeclaration(s)){if(void 0!==n)return s;o=!1}n=s}return Y.Debug.assert(void 0!==n),n}(g.pos),p.insertNodeBefore(_.file,R,t,{suffix:_.newLineCharacter+_.newLineCharacter}),p.replaceRange(_.file,{pos:g.getStart(),end:g.end},O)):(o=Y.createVariableDeclaration(a,m,s),(t=function(e,t){for(var n=void 0;void 0!==e&&e!==t;){if(Y.isVariableDeclaration(e)&&e.initializer===n&&Y.isVariableDeclarationList(e.parent)&&1<e.parent.declarations.length)return e;e=(n=e).parent}}(g,w))?(p.insertNodeAt(_.file,t.getStart(),o,{suffix:", "}),O=Y.createIdentifier(a),p.replaceRange(_.file,{pos:g.getStart(),end:g.end},O)):210===g.parent.kind&&w===Y.findAncestor(g,J)?(P=Y.createVariableStatement(void 0,Y.createVariableDeclarationList([o],2)),p.replaceRange(_.file,{pos:g.parent.getStart(),end:g.parent.end},P)):(P=Y.createVariableStatement(void 0,Y.createVariableDeclarationList([o],2)),0===(R=function(e,t){Y.Debug.assert(!Y.isClassLike(t));for(var n=void 0,o=e;o!==t;o=o.parent)J(o)&&(n=o);for(o=(n||e).parent;;o=o.parent){if(re(o)){for(var r=void 0,i=0,s=o.statements;i<s.length;i++){var a=s[i];if(a.pos>e.pos)break;r=a}return Y.Debug.assert(void 0!==r),r}if(o===t){Y.Debug.fail("Didn't encounter a block-like before encountering scope");break}}}(g,w)).pos?(m=Y.getSourceFileImportLocation(l),p.insertNodeAt(_.file,m,P,{prefix:0===m?void 0:_.newLineCharacter,suffix:Y.isLineBreak(l.text.charCodeAt(m))?_.newLineCharacter:_.newLineCharacter+_.newLineCharacter})):p.insertNodeBefore(_.file,R,P,{suffix:_.newLineCharacter+_.newLineCharacter}),210===g.parent.kind?p.deleteRange(_.file,{pos:g.parent.getStart(),end:g.parent.end}):(O=Y.createIdentifier(a),p.replaceRange(_.file,{pos:g.getStart(),end:g.end},O)))),s=p.getChanges(),{renameFilename:t=g.getSourceFile().fileName,renameLocation:ee(s,t,a,!0),edits:s};Y.Debug.fail("Unrecognized action name")}function q(e,l){var t=l.length;if(0===t)return{errors:[Y.createFileDiagnostic(e,l.start,t,P.CannotExtractEmpty)]};var n=g(Y.getTokenAtPosition(e,l.start,!1),e,l),o=g(Y.findTokenOnLeftOfPosition(e,Y.textSpanEnd(l)),e,l),c=[],u=ie.None;if(!n||!o)return{errors:[Y.createFileDiagnostic(e,l.start,t,P.CannotExtractRange)]};if(n.parent!==o.parent)return{errors:[Y.createFileDiagnostic(e,l.start,t,P.CannotExtractRange)]};if(n!==o){if(!re(n.parent))return{errors:[Y.createFileDiagnostic(e,l.start,t,P.CannotExtractRange)]};for(var r=[],i=0,s=n.parent.statements;i<s.length;i++){var a=s[i];if(a===n||r.length){var d=p(a);if(d)return{errors:d};r.push(a)}if(a===o)break}return{targetRange:{range:r,facts:u,declarations:c}}}e=function(e){if(Y.isIdentifier(Y.isExpressionStatement(e)?e.expression:e))return[Y.createDiagnosticForNode(e,P.CannotExtractIdentifier)]}(n)||p(n);return e?{errors:e}:{targetRange:{range:(t=n,Y.isStatement(t)?[t]:Y.isPartOfExpression(t)?Y.isExpressionStatement(t.parent)?[t.parent]:t:void 0),facts:u,declarations:c}};function p(e){if(0,!(Y.isStatement(e)||Y.isPartOfExpression(e)&&function(e){if(264!==e.parent.kind){switch(e.kind){case 9:return 238!==e.parent.kind&&242!==e.parent.kind;case 198:case 174:case 176:return;case 71:return 176!==e.parent.kind&&242!==e.parent.kind&&246!==e.parent.kind}return 1}}(e)))return[Y.createDiagnosticForNode(e,P.StatementOrExpressionExpected)];if(Y.isInAmbientContext(e))return[Y.createDiagnosticForNode(e,P.CannotExtractAmbientBlock)];var i,t=Y.getContainingClass(e);if(t)for(var n=t,o=e;o!==n;){if(149===o.kind){Y.hasModifier(o,32)&&(u|=ie.InStaticRegion);break}if(146===o.kind){152===Y.getContainingFunction(o).kind&&(u|=ie.InStaticRegion);break}151===o.kind&&Y.hasModifier(o,32)&&(u|=ie.InStaticRegion),o=o.parent}var s,a=4;return function e(t){if(i)return!0;if(Y.isDeclaration(t)){var n=226===t.kind?t.parent.parent:t;if(Y.hasModifier(n,1))return(i=i||[]).push(Y.createDiagnosticForNode(t,P.CannotExtractExportedEntity)),!0;c.push(t.symbol)}switch(t.kind){case 238:return(i=i||[]).push(Y.createDiagnosticForNode(t,P.CannotExtractImport)),!0;case 97:if(181===t.parent.kind){var o=Y.getContainingClass(t);if(o.pos<l.start||o.end>=l.start+l.length)return(i=i||[]).push(Y.createDiagnosticForNode(t,P.CannotExtractSuper)),!0}else u|=ie.UsesThis}if(!t||Y.isFunctionLikeDeclaration(t)||Y.isClassLike(t)){switch(t.kind){case 228:case 229:265===t.parent.kind&&void 0===t.parent.externalModuleIndicator&&(i=i||[]).push(Y.createDiagnosticForNode(t,P.FunctionWillNotBeVisibleInTheNewScope))}return!1}n=a;switch(t.kind){case 211:case 224:a=0;break;case 207:t.parent&&224===t.parent.kind&&t.parent.finallyBlock===t&&(a=4);break;case 257:a|=1;break;default:Y.isIterationStatement(t,!1)&&(a|=3)}switch(t.kind){case 169:case 99:u|=ie.UsesThis;break;case 222:var r=t.label;(s=s||[]).push(r.escapedText),Y.forEachChild(t,e),s.pop();break;case 218:case 217:(r=t.label)?Y.contains(s,r.escapedText)||(i=i||[]).push(Y.createDiagnosticForNode(t,P.CannotExtractRangeContainingLabeledBreakOrContinueStatementWithTargetOutsideOfTheRange)):a&(218===t.kind?1:2)||(i=i||[]).push(Y.createDiagnosticForNode(t,P.CannotExtractRangeContainingConditionalBreakOrContinueStatements));break;case 191:u|=ie.IsAsyncFunction;break;case 197:u|=ie.IsGenerator;break;case 219:4&a?u|=ie.HasReturn:(i=i||[]).push(Y.createDiagnosticForNode(t,P.CannotExtractRangeContainingConditionalReturnStatement));break;default:Y.forEachChild(t,e)}a=n}(e),i}}function J(e){return Y.isFunctionLikeDeclaration(e)||Y.isSourceFile(e)||Y.isModuleBlock(e)||Y.isClassLike(e)}function Q(e,t){var n=t.file,o=function(e){var t=oe(e.range)?Y.first(e.range):e.range;if(e.facts&ie.UsesThis){var n,e=Y.getContainingClass(t);if(e)return(n=Y.findAncestor(t,Y.isFunctionLikeDeclaration))?[n,e]:[e]}for(var o=[];;)if(J(t=146===(t=t.parent).kind?Y.findAncestor(t,function(e){return Y.isFunctionLikeDeclaration(e)}).parent:t)&&(o.push(t),265===t.kind))return o}(e);return{scopes:o,readsAndWrites:function(m,f,y,k,b,r){var i=Y.createMap(),v=[],T=[],E=[],S=[],s=[],a=Y.createMap(),l=[],c=void 0,e=oe(m.range)?1===m.range.length&&Y.isExpressionStatement(m.range[0])?m.range[0].expression:void 0:m.range,t=void 0;void 0===e?(p=m.range,g=Y.first(p).getStart(),p=Y.last(p).end,t=Y.createFileDiagnostic(k,g,p-g,P.ExpressionExpected)):9216&b.getTypeAtLocation(e).flags&&(t=Y.createDiagnosticForNode(e,P.UselessConstantType));for(var n=0,o=f;n<o.length;n++){var u=o[n],d=(v.push({usages:Y.createMap(),typeParameterUsages:Y.createMap(),substitutions:Y.createMap()}),T.push(Y.createMap()),E.push(Y.isFunctionLikeDeclaration(u)&&228!==u.kind?[Y.createDiagnosticForNode(u,P.CannotExtractToOtherFunctionLike)]:[]),[]);t&&d.push(t),Y.isClassLike(u)&&Y.isInJavaScriptFile(u)&&d.push(Y.createDiagnosticForNode(u,P.CannotExtractToJSClass)),Y.isArrowFunction(u)&&!Y.isBlock(u.body)&&d.push(Y.createDiagnosticForNode(u,P.CannotExtractToExpressionArrowFunction)),S.push(d)}var C=Y.createMap(),p=oe(m.range)?Y.createBlock(m.range):m.range,g=oe(m.range)?Y.first(m.range):m.range,h=function(e){for(;e;e=e.parent)if(function(e){return Y.isDeclarationWithTypeParameters(e)&&void 0!==e.typeParameters&&0<e.typeParameters.length}(e))return!0;return!1}(g);if(function e(t,n){void 0===n&&(n=1),h&&w(b.getTypeAtLocation(t));Y.isDeclaration(t)&&t.symbol&&s.push(t),Y.isAssignmentExpression(t)?(e(t.left,2),e(t.right)):Y.isUnaryExpressionWithWrite(t)?e(t.operand,2):!Y.isPropertyAccessExpression(t)&&!Y.isElementAccessExpression(t)&&Y.isIdentifier(t)?!t.parent||Y.isQualifiedName(t.parent)&&t!==t.parent.left||Y.isPropertyAccessExpression(t.parent)&&t!==t.parent.expression||O(t,n,Y.isPartOfTypeNode(t)):Y.forEachChild(t,e)}(p),h&&!oe(m.range)&&w(b.getContextualType(m.range)),0<i.size){for(var _=Y.createMap(),x=0,B=g;void 0!==B&&x<f.length;B=B.parent)if(B===f[x]&&(_.forEach(function(e,t){v[x].typeParameterUsages.set(t,e)}),x++),Y.isDeclarationWithTypeParameters(B)&&B.typeParameters)for(var A=0,I=B.typeParameters;A<I.length;A++){var D=I[A],D=b.getTypeAtLocation(D);i.has(D.id.toString())&&_.set(D.id.toString(),D)}Y.Debug.assert(x===f.length)}s.length&&(e=Y.isBlockScope(f[0],f[0].parent)?f[0]:Y.getEnclosingBlockScopeContainer(f[0]),Y.forEachChild(e,function e(t){{var n,o,r;t===m.range||oe(m.range)&&0<=m.range.indexOf(t)||((n=Y.isIdentifier(t)?R(t):b.getSymbolAtLocation(t))&&(o=Y.find(s,function(e){return e.symbol===n}))&&(Y.isVariableDeclaration(o)?(r=o.symbol.id.toString(),a.has(r)||(l.push(o),a.set(r,!0))):c=c||o),Y.forEachChild(t,e))}}));for(var N=0;N<f.length;N++)!function(e){var t,n=v[e],o=(0<e&&(0<n.usages.size||0<n.typeParameterUsages.size)&&(n=oe(m.range)?m.range[0]:m.range,S[e].push(Y.createDiagnosticForNode(n,P.CannotAccessVariablesFromNestedScopes))),!1),r=void 0;v[e].usages.forEach(function(e){2===e.usage&&(o=!0,106500&e.symbol.flags)&&e.symbol.valueDeclaration&&Y.hasModifier(e.symbol.valueDeclaration,64)&&(r=e.symbol.valueDeclaration)}),Y.Debug.assert(oe(m.range)||0===l.length),o&&!oe(m.range)?(t=Y.createDiagnosticForNode(m.range,P.CannotWriteInExpression),E[e].push(t),S[e].push(t)):r&&0<e?(t=Y.createDiagnosticForNode(r,P.CannotExtractReadonlyPropertyInitializerOutsideConstructor),E[e].push(t),S[e].push(t)):c&&(t=Y.createDiagnosticForNode(c,P.CannotExtractExportedEntity),E[e].push(t),S[e].push(t))}(N);return{target:p,usagesPerScope:v,functionErrorsPerScope:E,constantErrorsPerScope:S,exposedVariableDeclarations:l};function w(e){for(var t=0,n=b.getSymbolWalker(function(){return r.throwIfCancellationRequested(),!0}).walkType(e).visitedTypes;t<n.length;t++){var o=n[t];16384&o.flags&&i.set(o.id.toString(),o)}}function O(e,t,n){var o=function(e,t,n){var o=R(e);if(o){var r=Y.getSymbolId(o).toString(),i=C.get(r);if(i&&t<=i)return r;if(C.set(r,t),i){for(var s=0,a=v;s<a.length;s++){var l=a[s];l.usages.get(e.text)&&l.usages.set(e.text,{usage:t,symbol:o,node:e})}return r}i=Y.find(o.getDeclarations(),function(e){return e.getSourceFile()===k});if(i&&!Y.rangeContainsStartEnd(y,i.getStart(),i.end)){if(m.facts&ie.IsGenerator&&2===t){for(var c=Y.createDiagnosticForNode(e,P.CannotExtractRangeThatContainsWritesToReferencesLocatedOutsideOfTheTargetRangeInGenerators),u=0,d=E;u<d.length;u++)d[u].push(c);for(var p=0,g=S;p<g.length;p++)g[p].push(c)}for(var h=0;h<f.length;h++){var _=f[h];b.resolveName(o.name,_,o.flags)===o||T[h].has(r)||((_=function e(t,n,o){{var r;if(t)return t.getDeclarations().some(function(e){return e.parent===n})?Y.createIdentifier(t.name):void 0!==(r=e(t.parent,n,o))?o?Y.createQualifiedName(r,Y.createIdentifier(t.name)):Y.createPropertyAccess(r,t.name):void 0}}(o.exportSymbol||o,_,n))?T[h].set(r,_):n?262144&o.flags||(c=Y.createDiagnosticForNode(e,P.TypeWillNotBeVisibleInTheNewScope),E[h].push(c),S[h].push(c)):v[h].usages.set(e.text,{usage:t,symbol:o,node:e}))}return r}}}(e,t,n);if(o)for(var r=0;r<f.length;r++){var i=T[r].get(o);i&&v[r].substitutions.set(Y.getNodeId(e).toString(),i)}}function R(e){return e.parent&&Y.isShorthandPropertyAssignment(e.parent)&&e.parent.name===e?b.getShorthandAssignmentValueSymbol(e.parent):b.getSymbolAtLocation(e)}}(e,o,(o=n,oe((e=e).range)?{pos:Y.first(e.range).getStart(o),end:Y.last(e.range).getEnd()}:e.range),n,t.program.getTypeChecker(),t.cancellationToken)}}function Z(e,t){for(var n=e,o=1;Y.stringContains(t,n);o++)n=e+"_"+o;return n}function ee(e,t,n,o){for(var r=0,i=-1,s=0,a=e;s<a.length;s++){var l=a[s],c=l.fileName,l=l.textChanges;Y.Debug.assert(c===t);for(var u=0,d=l;u<d.length;u++){var p=d[u],g=p.span,p=p.newText,h=p.indexOf(n);if(-1!==h&&(i=g.start+r+h,!o))return i;r+=p.length-g.length}}return Y.Debug.assert(o),Y.Debug.assert(0<=i),i}function te(e,t){var n=e.type,e=e.declaration,o=t.type,t=t.declaration;if(e){if(!t)return 1;e=e.pos-t.pos;if(0!=e)return e}else if(t)return-1;e=n.symbol?n.symbol.getName():"",t=o.symbol?o.symbol.getName():"",e=Y.compareStrings(e,t);return 0!==e?e:n.id-o.id}function ne(e,t){e=Y.map(e,function(e){return Y.createShorthandPropertyAssignment(e.symbol.name)}),t=Y.map(t,function(e){return Y.createShorthandPropertyAssignment(e.symbol.name)});return void 0===e?t:void 0===t?e:e.concat(t)}function oe(e){return Y.isArray(e)}function g(e,t,n){if(e)for(;e.parent;){if(Y.isSourceFile(e.parent)||(o=n,r=e.parent,!(Y.textSpanContainsPosition(o,r.getStart(t))&&r.getEnd()<=Y.textSpanEnd(o))))return e;e=e.parent}var o,r}function re(e){switch(e.kind){case 207:case 265:case 234:case 257:return 1;default:return}}function n(e){return{message:e,code:0,category:Y.DiagnosticCategory.Message,key:e}}var o,r,P,ie,h;o=Y.refactor||(Y.refactor={}),r=o.extractSymbol||(o.extractSymbol={}),h={name:"Extract Symbol",description:Y.getLocaleSpecificMessage(Y.Diagnostics.Extract_symbol),getAvailableActions:e,getEditsForAction:t},o.registerRefactor(h),r.getAvailableActions=e,r.getEditsForAction=t,(o=P=r.Messages||(r.Messages={})).CannotExtractRange=n("Cannot extract range."),o.CannotExtractImport=n("Cannot extract import statement."),o.CannotExtractSuper=n("Cannot extract super call."),o.CannotExtractEmpty=n("Cannot extract empty range."),o.ExpressionExpected=n("expression expected."),o.UselessConstantType=n("No reason to extract constant of type."),o.StatementOrExpressionExpected=n("Statement or expression expected."),o.CannotExtractRangeContainingConditionalBreakOrContinueStatements=n("Cannot extract range containing conditional break or continue statements."),o.CannotExtractRangeContainingConditionalReturnStatement=n("Cannot extract range containing conditional return statement."),o.CannotExtractRangeContainingLabeledBreakOrContinueStatementWithTargetOutsideOfTheRange=n("Cannot extract range containing labeled break or continue with target outside of the range."),o.CannotExtractRangeThatContainsWritesToReferencesLocatedOutsideOfTheTargetRangeInGenerators=n("Cannot extract range containing writes to references located outside of the target range in generators."),o.TypeWillNotBeVisibleInTheNewScope=n("Type will not visible in the new scope."),o.FunctionWillNotBeVisibleInTheNewScope=n("Function will not visible in the new scope."),o.CannotExtractIdentifier=n("Select more than a single identifier."),o.CannotExtractExportedEntity=n("Cannot extract exported declaration"),o.CannotWriteInExpression=n("Cannot write back side-effects when extracting an expression"),o.CannotExtractReadonlyPropertyInitializerOutsideConstructor=n("Cannot move initialization of read-only class property outside of the constructor"),o.CannotExtractAmbientBlock=n("Cannot extract code from ambient contexts"),o.CannotAccessVariablesFromNestedScopes=n("Cannot access variables from nested scopes"),o.CannotExtractToOtherFunctionLike=n("Cannot extract method to a function-like scope that is not a function"),o.CannotExtractToJSClass=n("Cannot extract constant to a class scope in JS"),o.CannotExtractToExpressionArrowFunction=n("Cannot extract constant to an arrow function without a block"),(o=ie=ie||{})[o.None=0]="None",o[o.HasReturn=1]="HasReturn",o[o.IsGenerator=2]="IsGenerator",o[o.IsAsyncFunction=4]="IsAsyncFunction",o[o.UsesThis=8]="UsesThis",o[o.InStaticRegion=16]="InStaticRegion",r.getRangeToExtract=q}(ts=ts||{}),function(r){function n(e){var t=e.file,n=e.startPosition,o=r.getTokenAtPosition(t,n,!1);if(r.isStringLiteral(o)&&function(){switch(o.parent.kind){case 238:case 248:return 1;default:return}}()&&void 0===r.getResolvedModule(t,o.text))return r.codefix.tryGetCodeActionForInstallPackageTypes(e.host,o.text)}var e,o;(e=r.refactor||(r.refactor={})).installTypesForPackage||(e.installTypesForPackage={}),o={name:"Install missing types package",description:"Install missing types package",getEditsForAction:function(e,t){return r.Debug.assertEqual("install",t),{edits:[],renameFilename:void 0,renameLocation:void 0,commands:n(e).commands}},getAvailableActions:function(e){var t=e.program.getCompilerOptions();if(void 0===t.noImplicitAny?!t.strict:!t.noImplicitAny)return(t=n(e))&&[{name:o.name,description:o.description,actions:[{description:t.description,name:"install"}]}]}},e.registerRefactor(o)}(ts=ts||{}),function(T){var t;function s(e,t,n,o){e=T.isNodeKind(e)?new i(e,t,n):71===e?new l(71,t,n):new a(e,t,n);return e.parent=o,e}T.servicesVersion="0.6";g.prototype.getSourceFile=function(){return T.getSourceFileOfNode(this)},g.prototype.getStart=function(e,t){return T.getTokenPosOfNode(this,e,t)},g.prototype.getFullStart=function(){return this.pos},g.prototype.getEnd=function(){return this.end},g.prototype.getWidth=function(e){return this.getEnd()-this.getStart(e)},g.prototype.getFullWidth=function(){return this.end-this.pos},g.prototype.getLeadingTriviaWidth=function(e){return this.getStart(e)-this.pos},g.prototype.getFullText=function(e){return(e||this.getSourceFile()).text.substring(this.pos,this.end)},g.prototype.getText=function(e){return(e=e||this.getSourceFile()).text.substring(this.getStart(e),this.getEnd())},g.prototype.addSyntheticNodes=function(e,t,n){for(T.scanner.setTextPos(t);t<n;){var o=T.scanner.scan(),r=T.scanner.getTextPos();if(r<=n&&e.push(s(o,t,r,this)),t=r,1===o)break}return t},g.prototype.createSyntaxList=function(e){var t=s(286,e.pos,e.end,this);t._children=[];for(var n=e.pos,o=0,r=e;o<r.length;o++){var i=r[o];n<i.pos&&(n=this.addSyntheticNodes(t._children,n,i.pos)),t._children.push(i),n=i.end}return n<e.end&&this.addSyntheticNodes(t._children,n,e.end),t},g.prototype.createChildren=function(e){var t,n=this;if(T.isNodeKind(this.kind))if(T.isJSDocCommentContainingNode(this))t=[],this.forEachChild(function(e){t.push(e)}),this._children=t;else{var o=[],r=(T.scanner.setText((e||this.getSourceFile()).text),this.pos),i=function(e){r=n.addSyntheticNodes(o,r,e.pos),o.push(e),r=e.end};if(this.jsDoc)for(var s=0,a=this.jsDoc;s<a.length;s++)i(a[s]);r=this.pos,T.forEachChild(this,i,function(e){r<e.pos&&(r=n.addSyntheticNodes(o,r,e.pos)),o.push(n.createSyntaxList(e)),r=e.end}),r<this.end&&this.addSyntheticNodes(o,r,this.end),T.scanner.setText(void 0),this._children=o}else this._children=T.emptyArray},g.prototype.getChildCount=function(e){return this._children||this.createChildren(e),this._children.length},g.prototype.getChildAt=function(e,t){return this._children||this.createChildren(t),this._children[e]},g.prototype.getChildren=function(e){return this._children||this.createChildren(e),this._children},g.prototype.getFirstToken=function(e){var t=this.getChildren(e);if(t.length)return(t=T.find(t,function(e){return e.kind<267||285<e.kind})).kind<143?t:t.getFirstToken(e)},g.prototype.getLastToken=function(e){var t=this.getChildren(e),t=T.lastOrUndefined(t);if(t)return t.kind<143?t:t.getLastToken(e)},g.prototype.forEachChild=function(e,t){return T.forEachChild(this,e,t)};var o,r,i=g,e=(p.prototype.getSourceFile=function(){return T.getSourceFileOfNode(this)},p.prototype.getStart=function(e,t){return T.getTokenPosOfNode(this,e,t)},p.prototype.getFullStart=function(){return this.pos},p.prototype.getEnd=function(){return this.end},p.prototype.getWidth=function(e){return this.getEnd()-this.getStart(e)},p.prototype.getFullWidth=function(){return this.end-this.pos},p.prototype.getLeadingTriviaWidth=function(e){return this.getStart(e)-this.pos},p.prototype.getFullText=function(e){return(e||this.getSourceFile()).text.substring(this.pos,this.end)},p.prototype.getText=function(e){return(e||this.getSourceFile()).text.substring(this.getStart(),this.getEnd())},p.prototype.getChildCount=function(){return 0},p.prototype.getChildAt=function(){},p.prototype.getChildren=function(){return T.emptyArray},p.prototype.getFirstToken=function(){},p.prototype.getLastToken=function(){},p.prototype.forEachChild=function(){},p),n=(d.prototype.getFlags=function(){return this.flags},Object.defineProperty(d.prototype,"name",{get:function(){return T.symbolName(this)},enumerable:!0,configurable:!0}),d.prototype.getEscapedName=function(){return this.escapedName},d.prototype.getName=function(){return this.name},d.prototype.getDeclarations=function(){return this.declarations},d.prototype.getDocumentationComment=function(){return void 0===this.documentationComment&&(this.documentationComment=T.JsDoc.getJsDocCommentsFromDeclarations(this.declarations)),this.documentationComment},d.prototype.getJsDocTags=function(){return void 0===this.tags&&(this.tags=T.JsDoc.getJsDocTagsFromDeclarations(this.declarations)),this.tags},d),a=(__extends(u,r=e),u),l=(__extends(c,o=e),Object.defineProperty(c.prototype,"text",{get:function(){return T.idText(this)},enumerable:!0,configurable:!0}),c);function c(e,t,n){return o.call(this,t,n)||this}function u(e,t,n){t=r.call(this,t,n)||this;return t.kind=e,t}function d(e,t){this.flags=e,this.escapedName=t}function p(e,t){this.pos=e,this.end=t,this.flags=0,this.parent=void 0}function g(e,t,n){this.pos=t,this.end=n,this.flags=0,this.transformFlags=void 0,this.parent=void 0,this.kind=e}l.prototype.kind=71;E.prototype.getFlags=function(){return this.flags},E.prototype.getSymbol=function(){return this.symbol},E.prototype.getProperties=function(){return this.checker.getPropertiesOfType(this)},E.prototype.getProperty=function(e){return this.checker.getPropertyOfType(this,e)},E.prototype.getApparentProperties=function(){return this.checker.getAugmentedPropertiesOfType(this)},E.prototype.getCallSignatures=function(){return this.checker.getSignaturesOfType(this,0)},E.prototype.getConstructSignatures=function(){return this.checker.getSignaturesOfType(this,1)},E.prototype.getStringIndexType=function(){return this.checker.getIndexTypeOfType(this,0)},E.prototype.getNumberIndexType=function(){return this.checker.getIndexTypeOfType(this,1)},E.prototype.getBaseTypes=function(){return 32768&this.flags&&3&this.objectFlags?this.checker.getBaseTypes(this):void 0},E.prototype.getNonNullableType=function(){return this.checker.getNonNullableType(this)};var h,_=E,m=(v.prototype.getDeclaration=function(){return this.declaration},v.prototype.getTypeParameters=function(){return this.typeParameters},v.prototype.getParameters=function(){return this.parameters},v.prototype.getReturnType=function(){return this.checker.getReturnTypeOfSignature(this)},v.prototype.getDocumentationComment=function(){return void 0===this.documentationComment&&(this.documentationComment=this.declaration?T.JsDoc.getJsDocCommentsFromDeclarations([this.declaration]):[]),this.documentationComment},v.prototype.getJsDocTags=function(){return void 0===this.jsDocTags&&(this.jsDocTags=this.declaration?T.JsDoc.getJsDocTagsFromDeclarations([this.declaration]):[]),this.jsDocTags},v),f=(__extends(b,h=i),b.prototype.update=function(e,t){return T.updateSourceFile(this,e,t)},b.prototype.getLineAndCharacterOfPosition=function(e){return T.getLineAndCharacterOfPosition(this,e)},b.prototype.getLineStarts=function(){return T.getLineStarts(this)},b.prototype.getPositionOfLineAndCharacter=function(e,t){return T.getPositionOfLineAndCharacter(this,e,t)},b.prototype.getLineEndOfPosition=function(e){var t,e=this.getLineAndCharacterOfPosition(e).line,n=this.getLineStarts(),n=(t=(t=e+1>=n.length?this.getEnd():t)||n[e+1]-1,this.getFullText());return"\n"===n[t]&&"\r"===n[t-1]?t-1:t},b.prototype.getNamedDeclarations=function(){return this.namedDeclarations||(this.namedDeclarations=this.computeNamedDeclarations()),this.namedDeclarations},b.prototype.computeNamedDeclarations=function(){var i=T.createMultiMap();return T.forEachChild(this,function e(t){switch(t.kind){case 228:case 186:case 151:case 150:var n=t,o=a(n);o&&(o=o,(r=i.get(o))||i.set(o,r=[]),o=r,(r=T.lastOrUndefined(o))&&n.parent===r.parent&&n.symbol===r.symbol?n.body&&!r.body&&(o[o.length-1]=n):o.push(n)),T.forEachChild(t,e);break;case 229:case 199:case 230:case 231:case 232:case 233:case 237:case 246:case 242:case 239:case 240:case 153:case 154:case 163:s(t),T.forEachChild(t,e);break;case 146:if(!T.hasModifier(t,92))break;case 226:case 176:r=t;if(T.isBindingPattern(r.name)){T.forEachChild(r.name,e);break}r.initializer&&e(r.initializer);case 264:case 149:case 148:s(t);break;case 244:t.exportClause&&T.forEach(t.exportClause.elements,e);break;case 238:o=t.importClause;o&&(o.name&&s(o),o.namedBindings)&&(240===o.namedBindings.kind?s(o.namedBindings):T.forEach(o.namedBindings.elements,e));break;case 194:0!==T.getSpecialPropertyAssignmentKind(t)&&s(t);default:T.forEachChild(t,e)}var r}),i;function s(e){var t=a(e);t&&i.add(t,e)}function a(e){var t,e=T.getNameOfDeclaration(e);if(e)return void 0!==(t=T.getTextOfIdentifierOrLiteral(e))?t:144===e.kind?179===(t=e.expression).kind?t.name.text:T.getTextOfIdentifierOrLiteral(t):void 0}},b),y=(k.prototype.getLineAndCharacterOfPosition=function(e){return T.getLineAndCharacterOfPosition(this,e)},k);function k(e,t,n){this.fileName=e,this.text=t,this.skipTrivia=n}function b(e,t,n){return h.call(this,e,t,n)||this}function v(e){this.checker=e}function E(e,t){this.checker=e,this.flags=t}function S(e){var t=!0;for(n in e)if(T.hasProperty(e,n)&&!C(n)){t=!1;break}if(t)return e;var n,o={};for(n in e)T.hasProperty(e,n)&&(o[C(n)?n:n.charAt(0).toLowerCase()+n.substr(1)]=e[n]);return o}function C(e){return!e.length||e.charAt(0)===e.charAt(0).toLowerCase()}T.toEditorSettings=S,T.displayPartsToString=function(e){return e?T.map(e,function(e){return e.text}).join(""):""},T.getDefaultCompilerOptions=function(){return{target:1,jsx:1}},T.getSupportedCodeFixes=function(){return T.codefix.getSupportedErrorCodes()};A.prototype.compilationSettings=function(){return this._compilationSettings},A.prototype.createEntry=function(e,t){var n=this.host.getScriptSnapshot(e),n=n?{hostFileName:e,version:this.host.getScriptVersion(e),scriptSnapshot:n,scriptKind:T.getScriptKind(e,this.host)}:e;return this.fileNameToEntry.set(t,n),n},A.prototype.getEntryByPath=function(e){return this.fileNameToEntry.get(e)},A.prototype.getHostFileInformation=function(e){e=this.fileNameToEntry.get(e);return T.isString(e)?void 0:e},A.prototype.getOrCreateEntryByPath=function(e,t){e=this.getEntryByPath(t)||this.createEntry(e,t);return T.isString(e)?void 0:e},A.prototype.getRootFileNames=function(){return T.arrayFrom(this.fileNameToEntry.values(),function(e){return T.isString(e)?e:e.hostFileName})},A.prototype.getVersion=function(e){e=this.getHostFileInformation(e);return e&&e.version},A.prototype.getScriptSnapshot=function(e){e=this.getHostFileInformation(e);return e&&e.scriptSnapshot};var x=A,L=(B.prototype.getCurrentSourceFile=function(e){var t,n,o,r=this.host.getScriptSnapshot(e);if(r)return n=T.getScriptKind(e,this.host),t=this.host.getScriptVersion(e),this.currentFileName!==e?o=D(e,r,5,t,!0,n):this.currentFileVersion!==t&&(n=r.getChangeRange(this.currentFileScriptSnapshot),o=N(this.currentSourceFile,r,t,n)),o&&(this.currentFileVersion=t,this.currentFileName=e,this.currentFileScriptSnapshot=r,this.currentSourceFile=o),this.currentSourceFile;throw new Error("Could not find file: '"+e+"'.")},B);function B(e){this.host=e}function A(e,t){this.host=e,this.currentDirectory=e.getCurrentDirectory(),this.fileNameToEntry=T.createMap();for(var n=0,o=e.getScriptFileNames();n<o.length;n++){var r=o[n];this.createEntry(r,T.toPath(r,this.currentDirectory,t))}this._compilationSettings=e.getCompilationSettings()||{target:1,jsx:1}}function I(e,t,n){e.version=n,e.scriptSnapshot=t}function D(e,t,n,o,r,i){var s=t.getText(0,t.getLength()),e=T.createSourceFile(e,s,n,r,i);return I(e,t,o),e}function N(e,t,n,o,r){var i,s,a,l;return o&&n!==e.version&&!T.disableIncrementalParsing?(a=void 0,l=0!==o.span.start?e.text.substr(0,o.span.start):"",i=T.textSpanEnd(o.span)!==e.text.length?e.text.substr(T.textSpanEnd(o.span)):"",a=0===o.newLength?l&&i?l+i:l||i:(s=t.getText(o.span.start,o.span.start+o.newLength),l&&i?l+s+i:l?l+s:s+i),I(l=T.updateSourceFile(e,a,o,r),t,n),l.nameTable=void 0,e!==l&&e.scriptSnapshot&&(e.scriptSnapshot.dispose&&e.scriptSnapshot.dispose(),e.scriptSnapshot=void 0),l):D(e.fileName,t,e.languageVersion,n,!0,e.scriptKind)}T.createLanguageServiceSourceFile=D,T.disableIncrementalParsing=!1,T.updateLanguageServiceSourceFile=N;O.prototype.isCancellationRequested=function(){return this.cancellationToken&&this.cancellationToken.isCancellationRequested()},O.prototype.throwIfCancellationRequested=function(){if(this.isCancellationRequested())throw new T.OperationCanceledException};var M=O;function w(e,t){void 0===t&&(t=20),this.hostCancellationToken=e,this.throttleWaitMilliseconds=t,this.lastCancellationCheckTime=0}function O(e){this.cancellationToken=e}function R(e){switch(e.kind){case 253:case 255:case 261:case 262:case 151:case 153:case 154:return 1}}function P(e,t){var n,o=T.unescapeLeadingUnderscores(T.getTextOfPropertyName(t));if(o&&e)return n=[],t=e.getProperty(o),65536&e.flags?(T.forEach(e.types,function(e){e=e.getProperty(o);e&&n.push(e)}),n):t?(n.push(t),n):void 0}w.prototype.isCancellationRequested=function(){var e=T.timestamp();return Math.abs(e-this.lastCancellationCheckTime)>=this.throttleWaitMilliseconds&&(this.lastCancellationCheckTime=e,this.hostCancellationToken.isCancellationRequested())},w.prototype.throwIfCancellationRequested=function(){if(this.isCancellationRequested())throw new T.OperationCanceledException},T.ThrottledCancellationToken=w,T.createLanguageService=function(c,u){void 0===u&&(u=T.createDocumentRegistry(c.useCaseSensitiveFileNames&&c.useCaseSensitiveFileNames(),c.getCurrentDirectory()));var d,o,p=new L(c),i=(t=t||new T.formatting.RulesProvider,0),g=c.useCaseSensitiveFileNames&&c.useCaseSensitiveFileNames(),h=new M(c.getCancellationToken&&c.getCancellationToken()),_=c.getCurrentDirectory();function m(e){c.log&&c.log(e)}!T.localizedDiagnosticMessages&&c.getLocalizedDiagnosticMessages&&(T.localizedDiagnosticMessages=c.getLocalizedDiagnosticMessages());var f=T.createGetCanonicalFileName(g);function y(e){var t=d.getSourceFile(e);if(t)return t;throw new Error("Could not find file: '"+e+"'.")}function k(e){return t.ensureUpToDate(e),t}function b(){if(c.getProjectVersion){var e=c.getProjectVersion();if(e){if(o===e&&!c.hasChangedAutomaticTypeDirectiveNames)return;o=e}}var s,a,e=c.getTypeRootsVersion?c.getTypeRootsVersion():0,l=(i!==e&&(m("TypeRoots version has changed; provide new program"),d=void 0,i=e),new x(c,f)),e=l.getRootFileNames(),t=c.hasInvalidatedResolution||T.returnFalse;function n(e){var t=T.toPath(e,_,f),t=l.getEntryByPath(t);return t?!T.isString(t):c.fileExists&&c.fileExists(e)}function r(e,t,n,o,r){T.Debug.assert(void 0!==l);var i=l.getOrCreateEntryByPath(e,t);if(i){if(!r){r=d&&d.getSourceFileByPath(t);if(r)return T.Debug.assertEqual(i.scriptKind,r.scriptKind,"Registered script kind should match new script kind.",t),u.updateDocumentWithKey(e,t,s,a,i.scriptSnapshot,i.version,i.scriptKind)}return u.acquireDocumentWithKey(e,t,s,a,i.scriptSnapshot,i.version,i.scriptKind)}}T.isProgramUptoDate(d,e,l.compilationSettings(),function(e){return l.getVersion(e)},n,t,c.hasChangedAutomaticTypeDirectiveNames)||(s=l.compilationSettings(),t={getSourceFile:function(e,t,n,o){return r(e,T.toPath(e,_,f),0,0,o)},getSourceFileByPath:r,getCancellationToken:function(){return h},getCanonicalFileName:f,useCaseSensitiveFileNames:function(){return g},getNewLine:function(){return T.getNewLineCharacter(s,{newLine:T.getNewLineOrDefaultFromHost(c)})},getDefaultLibFileName:function(e){return c.getDefaultLibFileName(e)},writeFile:T.noop,getCurrentDirectory:function(){return _},fileExists:n,readFile:function(e){var t=T.toPath(e,_,f),t=l.getEntryByPath(t);return t?T.isString(t)?void 0:t.scriptSnapshot.getText(0,t.scriptSnapshot.getLength()):c.readFile&&c.readFile(e)},directoryExists:function(e){return T.directoryProbablyExists(e,c)},getDirectories:function(e){return c.getDirectories?c.getDirectories(e):[]},onReleaseOldSourceFile:function(e,t){t=u.getKeyForCompilationSettings(t);u.releaseDocumentWithKey(e.path,t)},hasInvalidatedResolution:t,hasChangedAutomaticTypeDirectiveNames:c.hasChangedAutomaticTypeDirectiveNames},c.trace&&(t.trace=function(e){return c.trace(e)}),c.resolveModuleNames&&(t.resolveModuleNames=function(e,t,n){return c.resolveModuleNames(e,t,n)}),c.resolveTypeReferenceDirectives&&(t.resolveTypeReferenceDirectives=function(e,t){return c.resolveTypeReferenceDirectives(e,t)}),a=u.getKeyForCompilationSettings(s),d=T.createProgram(e,s,t,d),l=void 0,d.getTypeChecker())}function r(){return b(),d}function v(e,t,n){b();n=T.map(n,function(e){return d.getSourceFile(e)}),e=y(e);return T.DocumentHighlights.getDocumentHighlights(d,h,e,t,n)}function s(e,t,n){b();var o=[];if(n&&n.isForRename)for(var r=0,i=d.getSourceFiles();r<i.length;r++){var s=i[r];d.isSourceFileDefaultLibrary(s)||o.push(s)}else o=d.getSourceFiles().slice();return T.FindAllReferences.findReferencedEntries(d,h,o,y(e),t,n)}function e(e){return p.getCurrentSourceFile(e)}function n(e){e=T.getScriptKind(e,c);return 3===e||4===e}function a(e,t,n){t="number"==typeof t?[t,void 0]:[t.pos,t.end];return{file:e,startPosition:t[0],endPosition:t[1],program:r(),newLineCharacter:n?n.newLineCharacter:c.getNewLine(),host:c,rulesProvider:k(n),cancellationToken:h}}return{dispose:function(){d&&(T.forEach(d.getSourceFiles(),function(e){return u.releaseDocument(e.fileName,d.getCompilerOptions())}),d=void 0),c=void 0},cleanupSemanticCache:function(){d=void 0},getSyntacticDiagnostics:function(e){return b(),d.getSyntacticDiagnostics(y(e),h).slice()},getSemanticDiagnostics:function(e){b();var e=y(e),t=d.getSemanticDiagnostics(e,h);return d.getCompilerOptions().declaration?(e=d.getDeclarationDiagnostics(e,h),t.concat(e)):t.slice()},getCompilerOptionsDiagnostics:function(){return b(),d.getOptionsDiagnostics(h).concat(d.getGlobalDiagnostics(h))},getSyntacticClassifications:function(e,t){return T.getSyntacticClassifications(h,p.getCurrentSourceFile(e),t)},getSemanticClassifications:function(e,t){return n(e)?(b(),T.getSemanticClassifications(d.getTypeChecker(),h,y(e),d.getClassifiableNames(),t)):[]},getEncodedSyntacticClassifications:function(e,t){return T.getEncodedSyntacticClassifications(h,p.getCurrentSourceFile(e),t)},getEncodedSemanticClassifications:function(e,t){return n(e)?(b(),T.getEncodedSemanticClassifications(d.getTypeChecker(),h,y(e),d.getClassifiableNames(),t)):{spans:[],endOfLineState:0}},getCompletionsAtPosition:function(e,t){return b(),T.Completions.getCompletionsAtPosition(c,d.getTypeChecker(),m,d.getCompilerOptions(),y(e),t,d.getSourceFiles())},getCompletionEntryDetails:function(e,t,n,o,r){b();o=o?k(o):void 0;return T.Completions.getCompletionEntryDetails(d.getTypeChecker(),m,d.getCompilerOptions(),y(e),t,{name:n,source:r},d.getSourceFiles(),c,o)},getCompletionEntrySymbol:function(e,t,n,o){return b(),T.Completions.getCompletionEntrySymbol(d.getTypeChecker(),m,d.getCompilerOptions(),y(e),t,{name:n,source:o},d.getSourceFiles())},getSignatureHelpItems:function(e,t){b();e=y(e);return T.SignatureHelp.getSignatureHelpItems(d,e,t,h)},getQuickInfoAtPosition:function(e,t){b();var e=y(e),n=T.getTouchingPropertyName(e,t,!0);if(n!==e&&!T.isLabelName(n)){var o=d.getTypeChecker(),t=function(e,t){if((T.isIdentifier(e)||T.isStringLiteral(e))&&T.isPropertyAssignment(e.parent)&&e.parent.name===e){var n=t.getContextualType(e.parent.parent);if(n){n=t.getPropertyOfType(n,T.getTextOfIdentifierOrLiteral(e));if(n)return n}}return t.getSymbolAtLocation(e)}(n,o);if(t&&!o.isUnknownSymbol(t))return{kind:(e=T.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(o,t,e,T.getContainerNode(n),n)).symbolKind,kindModifiers:T.SymbolDisplay.getSymbolModifiers(t),textSpan:T.createTextSpan(n.getStart(),n.getWidth()),displayParts:e.displayParts,documentation:e.documentation,tags:e.tags};switch(n.kind){case 71:case 179:case 143:case 99:case 169:case 97:var r=o.getTypeAtLocation(n);if(r)return{kind:"",kindModifiers:"",textSpan:T.createTextSpan(n.getStart(),n.getWidth()),displayParts:T.typeToDisplayParts(o,r,T.getContainerNode(n)),documentation:r.symbol?r.symbol.getDocumentationComment():void 0,tags:r.symbol?r.symbol.getJsDocTags():void 0}}}},getDefinitionAtPosition:function(e,t){return b(),T.GoToDefinition.getDefinitionAtPosition(d,y(e),t)},getImplementationAtPosition:function(e,t){return b(),T.FindAllReferences.getImplementationsAtPosition(d,h,d.getSourceFiles(),y(e),t)},getTypeDefinitionAtPosition:function(e,t){return b(),T.GoToDefinition.getTypeDefinitionAtPosition(d.getTypeChecker(),y(e),t)},getReferencesAtPosition:function(e,t){return s(e,t)},findReferences:function(e,t){return b(),T.FindAllReferences.findReferencedSymbols(d,h,d.getSourceFiles(),y(e),t)},getOccurrencesAtPosition:function(l,c){var t,e=function(){var e=v(l,c,[l]);if(e){for(var t=[],n=0,o=e;n<o.length;n++)for(var r=o[n],i=0,s=r.highlightSpans;i<s.length;i++){var a=s[i];t.push({fileName:r.fileName,textSpan:a.textSpan,isWriteAccess:"writtenReference"===a.kind,isDefinition:!1,isInString:a.isInString})}return t}}();return e&&(t=f(T.normalizeSlashes(l)),e=T.filter(e,function(e){return f(T.normalizeSlashes(e.fileName))===t})),e},getDocumentHighlights:v,getNameOrDottedNameSpan:function(e,t,n){e=p.getCurrentSourceFile(e),t=T.getTouchingPropertyName(e,t,!1);if(t!==e){switch(t.kind){case 179:case 143:case 9:case 86:case 101:case 95:case 97:case 99:case 169:case 71:break;default:return}for(var o=t;;)if(T.isRightSideOfPropertyAccess(o)||T.isRightSideOfQualifiedName(o))o=o.parent;else{if(!T.isNameOfModuleDeclaration(o))break;if(233!==o.parent.parent.kind||o.parent.parent.body!==o.parent)break;o=o.parent.parent.name}return T.createTextSpanFromBounds(o.getStart(),t.getEnd())}},getBreakpointStatementAtPosition:function(e,t){e=p.getCurrentSourceFile(e);return T.BreakpointResolver.spanInSourceFileAtLocation(e,t)},getNavigateToItems:function(e,t,n,o){b();n=n?[y(n)]:d.getSourceFiles();return T.NavigateTo.getNavigateToItems(n,d.getTypeChecker(),h,e,t,o)},getRenameInfo:function(e,t){b();var n=c.getDefaultLibFileName(c.getCompilationSettings());return T.Rename.getRenameInfo(d.getTypeChecker(),n,f,y(e),t)},findRenameLocations:function(e,t,n,o){return s(e,t,{findInStrings:n,findInComments:o,isForRename:!0})},getNavigationBarItems:function(e){return T.NavigationBar.getNavigationBarItems(p.getCurrentSourceFile(e),h)},getNavigationTree:function(e){return T.NavigationBar.getNavigationTree(p.getCurrentSourceFile(e),h)},getOutliningSpans:function(e){e=p.getCurrentSourceFile(e);return T.OutliningElementsCollector.collectElements(e,h)},getTodoComments:function(e,t){b();var n=y(e);h.throwIfCancellationRequested();var o,r=n.text,i=[];if(0<t.length&&(e=n.fileName,!T.stringContains(e,"/node_modules/"))){e="("+/(?:^(?:\s|\*)*)/.source+"|"+/(?:\/\/+\s*)/.source+"|"+/(?:\/\*+\s*)/.source+")",o="(?:"+T.map(t,function(e){return"("+e.text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+")"}).join("|")+")";for(var s,a=new RegExp(e+"("+o+/(?:.*?)/.source+")"+/(?:$|\*\/)/.source,"gim");s=a.exec(r);){h.throwIfCancellationRequested(),T.Debug.assert(s.length===t.length+3);var l=s[1],l=s.index+l.length;if(T.isInComment(n,l)){for(var c,u=void 0,d=0;d<t.length;d++)s[d+3]&&(u=t[d]);T.Debug.assert(void 0!==u),97<=(c=r.charCodeAt(l+u.text.length))&&c<=122||65<=c&&c<=90||48<=c&&c<=57||(c=s[2],i.push({descriptor:u,message:c,position:l}))}}}return i},getBraceMatchingAtPosition:function(e,t){var n=p.getCurrentSourceFile(e),o=[],r=T.getTouchingToken(n,t,!1);if(r.getStart(n)===t){var i=function(){switch(r.kind){case 17:return 18;case 19:return 20;case 21:return 22;case 27:return 29;case 18:return 17;case 20:return 19;case 22:return 21;case 29:return 27}}();if(i)for(var s=0,a=r.parent.getChildren(n);s<a.length;s++){var l=a[s];if(l.kind===i){var c=T.createTextSpan(r.getStart(n),r.getWidth(n)),l=T.createTextSpan(l.getStart(n),l.getWidth(n));c.start<l.start?o.push(c,l):o.push(l,c);break}}}return o},getIndentationAtPosition:function(e,t,n){var o=T.timestamp(),n=S(n),e=p.getCurrentSourceFile(e),t=(m("getIndentationAtPosition: getCurrentSourceFile: "+(T.timestamp()-o)),o=T.timestamp(),T.formatting.SmartIndenter.getIndentation(t,e,n));return m("getIndentationAtPosition: computeIndentation  : "+(T.timestamp()-o)),t},getFormattingEditsForRange:function(e,t,n,o){e=p.getCurrentSourceFile(e),o=S(o);return T.formatting.formatSelection(t,n,e,k(o),o)},getFormattingEditsForDocument:function(e,t){e=p.getCurrentSourceFile(e),t=S(t);return T.formatting.formatDocument(e,k(t),t)},getFormattingEditsAfterKeystroke:function(e,t,n,o){e=p.getCurrentSourceFile(e),o=S(o);if(!T.isInComment(e,t)){if("{"===n)return T.formatting.formatOnOpeningCurly(t,e,k(o),o);if("}"===n)return T.formatting.formatOnClosingCurly(t,e,k(o),o);if(";"===n)return T.formatting.formatOnSemicolon(t,e,k(o),o);if("\n"===n)return T.formatting.formatOnEnter(t,e,k(o),o)}return[]},getDocCommentTemplateAtPosition:function(e,t){return T.JsDoc.getDocCommentTemplateAtPosition(T.getNewLineOrDefaultFromHost(c),p.getCurrentSourceFile(e),t)},isValidBraceCompletionAtPosition:function(e,t,n){if(60===n)return!1;var o=p.getCurrentSourceFile(e);if(T.isInString(o,t))return!1;if(T.isInsideJsxElementOrAttribute(o,t))return 123===n;if(T.isInTemplateString(o,t))return!1;switch(n){case 39:case 34:case 96:return!T.isInComment(o,t)}return!0},getSpanOfEnclosingComment:function(e,t,n){e=p.getCurrentSourceFile(e),e=T.formatting.getRangeOfEnclosingComment(e,t,n);return e&&T.createTextSpanFromRange(e)},getCodeFixesAtPosition:function(e,t,n,o,r){b();var i=y(e),s=T.createTextSpanFromBounds(t,n),a=T.getNewLineOrDefaultFromHost(c),l=k(r);return T.flatMap(T.deduplicate(o),function(e){return h.throwIfCancellationRequested(),T.codefix.getFixes({errorCode:e,sourceFile:i,span:s,program:d,newLineCharacter:a,host:c,cancellationToken:h,rulesProvider:l})})},applyCodeActionCommand:function(e,t){if("install package"===(e=T.toPath(e,_,f),t.type))return c.installPackage?c.installPackage({fileName:e,packageName:t.packageName}):Promise.reject("Host does not implement `installPackage`");T.Debug.fail()},getEmitOutput:function(e,t){b();var e=y(e),n=c.getCustomTransformers&&c.getCustomTransformers();return T.getFileEmitOutput(d,e,t,h,n)},getNonBoundSourceFile:e,getSourceFile:e,getProgram:r,getApplicableRefactors:function(e,t){b();e=y(e);return T.refactor.getApplicableRefactors(a(e,t))},getEditsForRefactor:function(e,t,n,o,r){b();e=y(e);return T.refactor.getEditsForRefactor(a(e,n,t),o,r)}}},T.getNameTable=function(e){return e.nameTable||(s=(t=e).nameTable=T.createUnderscoreEscapedMap(),t.forEachChild(function e(t){var n;if((T.isIdentifier(t)&&t.escapedText||T.isStringOrNumericLiteral(t)&&(n=t,T.isDeclarationName(n)||248===n.parent.kind||n&&n.parent&&180===n.parent.kind&&n.parent.argumentExpression===n||T.isLiteralComputedPropertyDeclarationName(n)))&&(n=T.getEscapedTextOfIdentifierOrLiteral(t),s.set(n,void 0===s.get(n)?t.pos:-1)),T.forEachChild(t,e),T.hasJSDocNodes(t))for(var o=0,r=t.jsDoc;o<r.length;o++){var i=r[o];T.forEachChild(i,e)}})),e.nameTable;var t,s},T.getContainingObjectLiteralElement=function(e){switch(e.kind){case 9:case 8:if(144===e.parent.kind)return R(e.parent.parent)?e.parent.parent:void 0;case 71:return!R(e.parent)||178!==e.parent.parent.kind&&254!==e.parent.parent.kind||e.parent.name!==e?void 0:e.parent}},T.getPropertySymbolsFromContextualType=function(e,t){var n=t.parent;return P(e.getContextualType(n),t.name)},T.getPropertySymbolsFromType=P,T.getDefaultLibFilePath=function(e){if("undefined"!=typeof __dirname)return __dirname+T.directorySeparator+T.getDefaultLibFileName(e);throw new Error("getDefaultLibFilePath is only supported when consumed as a node module. ")},T.objectAllocator={getNodeConstructor:function(){return i},getTokenConstructor:function(){return a},getIdentifierConstructor:function(){return l},getSourceFileConstructor:function(){return f},getSymbolConstructor:function(){return n},getTypeConstructor:function(){return _},getSignatureConstructor:function(){return m},getSourceMapSourceConstructor:function(){return y}}}(ts=ts||{}),function(A){(A.BreakpointResolver||(A.BreakpointResolver={})).spanInSourceFileAtLocation=function(v,e){if(!v.isDeclarationFile){var t=A.getTokenAtPosition(v,e,!1),n=v.getLineAndCharacterOfPosition(e).line;if((!(v.getLineAndCharacterOfPosition(t.getStart(v)).line>n)||(t=A.findPrecedingToken(t.pos,v))&&v.getLineAndCharacterOfPosition(t.getEnd()).line===n)&&!A.isInAmbientContext(t))return B(t)}function T(e,t){var n=e.decorators?A.skipTrivia(v.text,e.decorators.end):e.getStart(v);return A.createTextSpanFromBounds(n,(t||e).getEnd())}function E(e,t){return T(e,A.findNextToken(t,t.parent))}function S(e,t){return e&&n===v.getLineAndCharacterOfPosition(e.getStart(v)).line?B(e):B(t)}function C(e){return B(A.findPrecedingToken(e.pos,v))}function x(e){return B(A.findNextToken(e,e.parent))}function B(e){if(e)switch(e.kind){case 208:return _(e.declarationList.declarations[0]);case 226:case 149:case 148:return _(e);case 146:return function e(t){var n;return A.isBindingPattern(t.name)?k(t.name):t.initializer||void 0!==t.dotDotDotToken||A.hasModifier(t,12)?T(t):(n=t.parent,(t=A.indexOf(n.parameters,t))?e(n.parameters[t-1]):B(n.body))}(e);case 228:case 151:case 150:case 153:case 154:case 152:case 186:case 187:var t=e;return t.body?m(t)?T(t):B(t.body):void 0;case 207:if(A.isFunctionBlock(e))return p=(t=e).statements.length?t.statements[0]:t.getLastToken(),m(t.parent)?S(t.parent,p):B(p);case 234:return f(e);case 260:return f(e.block);case 210:return T(e.expression);case 219:return T(e.getChildAt(0),e.expression);case 213:return E(e,e.expression);case 212:return B(e.statement);case 225:return T(e.getChildAt(0));case 211:return E(e,e.expression);case 222:return B(e.statement);case 218:case 217:return T(e.getChildAt(0),e.label);case 214:return(p=e).initializer?y(p):p.condition?T(p.condition):p.incrementor?T(p.incrementor):void 0;case 215:return E(e,e.expression);case 216:return y(e);case 221:return E(e,e.expression);case 257:case 258:return B(e.statements[0]);case 224:return f(e.tryBlock);case 223:case 243:return T(e,e.expression);case 237:return T(e,e.moduleReference);case 238:case 244:return T(e,e.moduleSpecifier);case 233:if(1!==A.getModuleInstanceState(e))return;case 229:case 232:case 264:case 176:return T(e);case 220:return B(e.statement);case 147:return g=e.parent.decorators,A.createTextSpanFromBounds(A.skipTrivia(v.text,g.pos),g.end);case 174:case 175:return k(e);case 230:case 231:return;case 25:case 1:return S(A.findPrecedingToken(e.pos,v));case 26:return C(e);case 17:var n=e;switch(n.parent.kind){case 232:var o=n.parent;return S(A.findPrecedingToken(n.pos,v,n.parent),o.members.length?o.members[0]:o.getLastToken(v));case 229:o=n.parent;return S(A.findPrecedingToken(n.pos,v,n.parent),o.members.length?o.members[0]:o.getLastToken(v));case 235:return S(n.parent.parent,n.parent.clauses[0])}return B(n.parent);case 18:var r=e;switch(r.parent.kind){case 234:if(1!==A.getModuleInstanceState(r.parent.parent))return;case 232:case 229:return T(r);case 207:if(A.isFunctionBlock(r.parent))return T(r);case 260:return B(A.lastOrUndefined(r.parent.statements));case 235:var i=r.parent,i=A.lastOrUndefined(i.clauses);return i?B(A.lastOrUndefined(i.statements)):void 0;case 174:i=r.parent;return B(A.lastOrUndefined(i.elements)||i);default:return A.isArrayLiteralOrObjectLiteralDestructuringPattern(r.parent)?(i=r.parent,T(A.lastOrUndefined(i.properties)||i)):B(r.parent)}return;case 22:return 175===(g=e).parent.kind||A.isArrayLiteralOrObjectLiteralDestructuringPattern(g.parent)?(d=g.parent,T(A.lastOrUndefined(d.elements)||d)):B(g.parent);case 19:return 212===(d=e).parent.kind||181===d.parent.kind||182===d.parent.kind?C(d):185===d.parent.kind?x(d):B(d.parent);case 20:var s=e;switch(s.parent.kind){case 186:case 228:case 187:case 151:case 150:case 153:case 154:case 152:case 213:case 212:case 214:case 216:case 181:case 182:case 185:return C(s);default:return B(s.parent)}return;case 56:return u=e,A.isFunctionLike(u.parent)||261===u.parent.kind||146===u.parent.kind?C(u):B(u.parent);case 29:case 27:return 184===(u=e).parent.kind?x(u):B(u.parent);case 106:return 212===(c=e).parent.kind?E(c,c.parent.expression):B(c.parent);case 82:case 74:case 87:return x(e);case 142:return 216===(c=e).parent.kind?x(c):B(c.parent);default:if(A.isArrayLiteralOrObjectLiteralDestructuringPattern(e))return b(e);if((71===e.kind||198===e.kind||261===e.kind||262===e.kind)&&A.isArrayLiteralOrObjectLiteralDestructuringPattern(e.parent))return T(e);if(194===e.kind){var a=e;if(A.isArrayLiteralOrObjectLiteralDestructuringPattern(a.left))return b(a.left);if(58===a.operatorToken.kind&&A.isArrayLiteralOrObjectLiteralDestructuringPattern(a.parent))return T(e);if(26===a.operatorToken.kind)return B(a.left)}if(A.isPartOfExpression(e))switch(e.parent.kind){case 212:return C(e);case 147:return B(e.parent);case 214:case 216:return T(e);case 194:if(26===e.parent.operatorToken.kind)return T(e);break;case 187:if(e.parent.body===e)return T(e)}if(261===e.parent.kind&&e.parent.name===e&&!A.isArrayLiteralOrObjectLiteralDestructuringPattern(e.parent.parent))return B(e.parent.initializer);if(184===e.parent.kind&&e.parent.type===e)return x(e.parent.type);if(A.isFunctionLike(e.parent)&&e.parent.type===e)return C(e);if(226===e.parent.kind||146===e.parent.kind){var l=e.parent;if(l.initializer===e||l.type===e||A.isAssignmentOperator(e.kind))return C(e)}return 194!==e.parent.kind||(a=e.parent,!A.isArrayLiteralOrObjectLiteralDestructuringPattern(a.left))||a.right!==e&&a.operatorToken!==e?B(e.parent):C(e)}var c,u,d,p,g;function h(e){return 227===e.parent.kind&&e.parent.declarations[0]===e?T(A.findPrecedingToken(e.pos,v,e.parent),e):T(e)}function _(e){return 215===e.parent.parent.kind?B(e.parent.parent):A.isBindingPattern(e.name)?k(e.name):e.initializer||A.hasModifier(e,1)||216===e.parent.parent.kind?h(e):227===e.parent.kind&&e.parent.declarations[0]!==e?B(A.findPrecedingToken(e.pos,v,e.parent)):void 0}function m(e){return A.hasModifier(e,1)||229===e.parent.kind&&152!==e.kind}function f(e){switch(e.parent.kind){case 233:if(1!==A.getModuleInstanceState(e.parent))return;case 213:case 211:case 215:return S(e.parent,e.statements[0]);case 214:case 216:return S(A.findPrecedingToken(e.pos,v,e.parent),e.statements[0])}return B(e.statements[0])}function y(e){return 227!==e.initializer.kind?B(e.initializer):0<(e=e.initializer).declarations.length?B(e.declarations[0]):void 0}function k(e){var t=A.forEach(e.elements,function(e){return 200!==e.kind?e:void 0});return t?B(t):(176===e.parent.kind?T:h)(e.parent)}function b(e){A.Debug.assert(175!==e.kind&&174!==e.kind);var t=177===e.kind?e.elements:e.properties,t=A.forEach(t,function(e){return 200!==e.kind?e:void 0});return t?B(t):T(194===e.parent.kind?e.parent:e)}}}}(ts=ts||{}),function(r){r.transform=function(e,t,n){var o=[],e=(n=r.fixupCompilerOptions(n,o),r.isArray(e)?e:[e]),n=r.transformNodes(void 0,void 0,n,e,t,!0);return n.diagnostics=r.concatenate(n.diagnostics,o),n}}(ts=ts||{}),function(){return this}()),ts,TypeScript,toolsVersion=(!function(d){function p(e,t){e&&e.log("*INTERNAL ERROR* - Exception in typescript services: "+t.message)}n.prototype.getText=function(e,t){return this.scriptSnapshotShim.getText(e,t)},n.prototype.getLength=function(){return this.scriptSnapshotShim.getLength()},n.prototype.getChangeRange=function(e){var e=this.scriptSnapshotShim.getChangeRange(e.scriptSnapshotShim);return null===e?null:(e=JSON.parse(e),d.createTextChangeRange(d.createTextSpan(e.span.start,e.span.length),e.newLength))},n.prototype.dispose=function(){"dispose"in this.scriptSnapshotShim&&this.scriptSnapshotShim.dispose()};var t=n,o=(e.prototype.log=function(e){this.loggingEnabled&&this.shimHost.log(e)},e.prototype.trace=function(e){this.tracingEnabled&&this.shimHost.trace(e)},e.prototype.error=function(e){this.shimHost.error(e)},e.prototype.getProjectVersion=function(){if(this.shimHost.getProjectVersion)return this.shimHost.getProjectVersion()},e.prototype.getTypeRootsVersion=function(){return this.shimHost.getTypeRootsVersion?this.shimHost.getTypeRootsVersion():0},e.prototype.useCaseSensitiveFileNames=function(){return!!this.shimHost.useCaseSensitiveFileNames&&this.shimHost.useCaseSensitiveFileNames()},e.prototype.getCompilationSettings=function(){var e=this.shimHost.getCompilationSettings();if(null===e||""===e)throw Error("LanguageServiceShimHostAdapter.getCompilationSettings: empty compilationSettings");e=JSON.parse(e);return e.allowNonTsExtensions=!0,e},e.prototype.getScriptFileNames=function(){var e=this.shimHost.getScriptFileNames();return this.files=JSON.parse(e)},e.prototype.getScriptSnapshot=function(e){e=this.shimHost.getScriptSnapshot(e);return e&&new t(e)},e.prototype.getScriptKind=function(e){return"getScriptKind"in this.shimHost?this.shimHost.getScriptKind(e):0},e.prototype.getScriptVersion=function(e){return this.shimHost.getScriptVersion(e)},e.prototype.getLocalizedDiagnosticMessages=function(){var e=this.shimHost.getLocalizedDiagnosticMessages();if(null===e||""===e)return null;try{return JSON.parse(e)}catch(e){return this.log(e.description||"diagnosticMessages.generated.json has invalid JSON format"),null}},e.prototype.getCancellationToken=function(){var e=this.shimHost.getCancellationToken();return new d.ThrottledCancellationToken(e)},e.prototype.getCurrentDirectory=function(){return this.shimHost.getCurrentDirectory()},e.prototype.getDirectories=function(e){return JSON.parse(this.shimHost.getDirectories(e))},e.prototype.getDefaultLibFileName=function(e){return this.shimHost.getDefaultLibFileName(JSON.stringify(e))},e.prototype.readDirectory=function(e,t,n,o,r){n=d.getFileMatcherPatterns(e,n,o,this.shimHost.useCaseSensitiveFileNames(),this.shimHost.getCurrentDirectory());return JSON.parse(this.shimHost.readDirectory(e,JSON.stringify(t),JSON.stringify(n.basePaths),n.excludePattern,n.includeFilePattern,n.includeDirectoryPattern,r))},e.prototype.readFile=function(e,t){return this.shimHost.readFile(e,t)},e.prototype.fileExists=function(e){return this.shimHost.fileExists(e)},e);function e(e){var o=this;this.shimHost=e,this.loggingEnabled=!1,this.tracingEnabled=!1,"getModuleResolutionsForFile"in this.shimHost&&(this.resolveModuleNames=function(e,t){var n=JSON.parse(o.shimHost.getModuleResolutionsForFile(t));return d.map(e,function(e){e=d.getProperty(n,e);return e?{resolvedFileName:e,extension:d.extensionFromPath(e),isExternalLibraryImport:!1}:void 0})}),"directoryExists"in this.shimHost&&(this.directoryExists=function(e){return o.shimHost.directoryExists(e)}),"getTypeReferenceDirectiveResolutionsForFile"in this.shimHost&&(this.resolveTypeReferenceDirectives=function(e,t){var n=JSON.parse(o.shimHost.getTypeReferenceDirectiveResolutionsForFile(t));return d.map(e,function(e){return d.getProperty(n,e)})})}function n(e){this.scriptSnapshotShim=e}d.LanguageServiceShimHostAdapter=o;i.prototype.readDirectory=function(e,t,n,o,r){n=d.getFileMatcherPatterns(e,n,o,this.shimHost.useCaseSensitiveFileNames(),this.shimHost.getCurrentDirectory());return JSON.parse(this.shimHost.readDirectory(e,JSON.stringify(t),JSON.stringify(n.basePaths),n.excludePattern,n.includeFilePattern,n.includeDirectoryPattern,r))},i.prototype.fileExists=function(e){return this.shimHost.fileExists(e)},i.prototype.readFile=function(e){return this.shimHost.readFile(e)},i.prototype.getDirectories=function(e){return JSON.parse(this.shimHost.getDirectories(e))};var r=i;function i(e){var t=this;this.shimHost=e,this.useCaseSensitiveFileNames=!!this.shimHost.useCaseSensitiveFileNames&&this.shimHost.useCaseSensitiveFileNames(),"directoryExists"in this.shimHost&&(this.directoryExists=function(e){return t.shimHost.directoryExists(e)}),"realpath"in this.shimHost&&(this.realpath=function(e){return t.shimHost.realpath(e)})}function s(e,t,n,o){return a(e,t,!0,n,o)}function a(e,t,n,o,r){try{s=e,a=t,l=o,(c=r)&&(s.log(a),u=d.timestamp()),l=l(),c&&(c=d.timestamp(),s.log(a+" completed in "+(c-u)+" msec"),d.isString(l))&&(128<(a=l).length&&(a=a.substring(0,128)+"..."),s.log("  result.length="+a.length+", result='"+JSON.stringify(a)+"'"));var i=l;return n?JSON.stringify({result:i}):i}catch(n){return n instanceof d.OperationCanceledException?JSON.stringify({canceled:!0}):(p(e,n),n.description=t,JSON.stringify({error:n}))}var s,a,l,c,u}d.CoreServicesShimHostAdapter=r;c.prototype.dispose=function(e){this.factory.unregisterShim(this)};var l=c;function c(e){(this.factory=e).registerShim(this)}function u(e,t){return e.map(function(e){return e=e,{message:d.flattenDiagnosticMessageText(e.messageText,t),start:e.start,length:e.length,category:d.DiagnosticCategory[e.category].toLowerCase(),code:e.code}})}d.realizeDiagnostics=u;__extends(_,g=l),_.prototype.forwardJSONCall=function(e,t){return s(this.logger,e,t,this.logPerformance)},_.prototype.dispose=function(e){this.logger.log("dispose()"),this.languageService.dispose(),this.languageService=null,debugObjectHost&&debugObjectHost.CollectGarbage&&(debugObjectHost.CollectGarbage(),this.logger.log("CollectGarbage()")),this.logger=null,g.prototype.dispose.call(this,e)},_.prototype.refresh=function(e){this.forwardJSONCall("refresh("+e+")",function(){return null})},_.prototype.cleanupSemanticCache=function(){var e=this;this.forwardJSONCall("cleanupSemanticCache()",function(){return e.languageService.cleanupSemanticCache(),null})},_.prototype.realizeDiagnostics=function(e){var t=d.getNewLineOrDefaultFromHost(this.host);return d.realizeDiagnostics(e,t)},_.prototype.getSyntacticClassifications=function(e,t,n){var o=this;return this.forwardJSONCall("getSyntacticClassifications('"+e+"', "+t+", "+n+")",function(){return o.languageService.getSyntacticClassifications(e,d.createTextSpan(t,n))})},_.prototype.getSemanticClassifications=function(e,t,n){var o=this;return this.forwardJSONCall("getSemanticClassifications('"+e+"', "+t+", "+n+")",function(){return o.languageService.getSemanticClassifications(e,d.createTextSpan(t,n))})},_.prototype.getEncodedSyntacticClassifications=function(e,t,n){var o=this;return this.forwardJSONCall("getEncodedSyntacticClassifications('"+e+"', "+t+", "+n+")",function(){return m(o.languageService.getEncodedSyntacticClassifications(e,d.createTextSpan(t,n)))})},_.prototype.getEncodedSemanticClassifications=function(e,t,n){var o=this;return this.forwardJSONCall("getEncodedSemanticClassifications('"+e+"', "+t+", "+n+")",function(){return m(o.languageService.getEncodedSemanticClassifications(e,d.createTextSpan(t,n)))})},_.prototype.getSyntacticDiagnostics=function(t){var n=this;return this.forwardJSONCall("getSyntacticDiagnostics('"+t+"')",function(){var e=n.languageService.getSyntacticDiagnostics(t);return n.realizeDiagnostics(e)})},_.prototype.getSemanticDiagnostics=function(t){var n=this;return this.forwardJSONCall("getSemanticDiagnostics('"+t+"')",function(){var e=n.languageService.getSemanticDiagnostics(t);return n.realizeDiagnostics(e)})},_.prototype.getCompilerOptionsDiagnostics=function(){var t=this;return this.forwardJSONCall("getCompilerOptionsDiagnostics()",function(){var e=t.languageService.getCompilerOptionsDiagnostics();return t.realizeDiagnostics(e)})},_.prototype.getQuickInfoAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getQuickInfoAtPosition('"+e+"', "+t+")",function(){return n.languageService.getQuickInfoAtPosition(e,t)})},_.prototype.getNameOrDottedNameSpan=function(e,t,n){var o=this;return this.forwardJSONCall("getNameOrDottedNameSpan('"+e+"', "+t+", "+n+")",function(){return o.languageService.getNameOrDottedNameSpan(e,t,n)})},_.prototype.getBreakpointStatementAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getBreakpointStatementAtPosition('"+e+"', "+t+")",function(){return n.languageService.getBreakpointStatementAtPosition(e,t)})},_.prototype.getSignatureHelpItems=function(e,t){var n=this;return this.forwardJSONCall("getSignatureHelpItems('"+e+"', "+t+")",function(){return n.languageService.getSignatureHelpItems(e,t)})},_.prototype.getDefinitionAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getDefinitionAtPosition('"+e+"', "+t+")",function(){return n.languageService.getDefinitionAtPosition(e,t)})},_.prototype.getTypeDefinitionAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getTypeDefinitionAtPosition('"+e+"', "+t+")",function(){return n.languageService.getTypeDefinitionAtPosition(e,t)})},_.prototype.getImplementationAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getImplementationAtPosition('"+e+"', "+t+")",function(){return n.languageService.getImplementationAtPosition(e,t)})},_.prototype.getRenameInfo=function(e,t){var n=this;return this.forwardJSONCall("getRenameInfo('"+e+"', "+t+")",function(){return n.languageService.getRenameInfo(e,t)})},_.prototype.findRenameLocations=function(e,t,n,o){var r=this;return this.forwardJSONCall("findRenameLocations('"+e+"', "+t+", "+n+", "+o+")",function(){return r.languageService.findRenameLocations(e,t,n,o)})},_.prototype.getBraceMatchingAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getBraceMatchingAtPosition('"+e+"', "+t+")",function(){return n.languageService.getBraceMatchingAtPosition(e,t)})},_.prototype.isValidBraceCompletionAtPosition=function(e,t,n){var o=this;return this.forwardJSONCall("isValidBraceCompletionAtPosition('"+e+"', "+t+", "+n+")",function(){return o.languageService.isValidBraceCompletionAtPosition(e,t,n)})},_.prototype.getSpanOfEnclosingComment=function(e,t,n){var o=this;return this.forwardJSONCall("getSpanOfEnclosingComment('"+e+"', "+t+")",function(){return o.languageService.getSpanOfEnclosingComment(e,t,n)})},_.prototype.getIndentationAtPosition=function(t,n,o){var r=this;return this.forwardJSONCall("getIndentationAtPosition('"+t+"', "+n+")",function(){var e=JSON.parse(o);return r.languageService.getIndentationAtPosition(t,n,e)})},_.prototype.getReferencesAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getReferencesAtPosition('"+e+"', "+t+")",function(){return n.languageService.getReferencesAtPosition(e,t)})},_.prototype.findReferences=function(e,t){var n=this;return this.forwardJSONCall("findReferences('"+e+"', "+t+")",function(){return n.languageService.findReferences(e,t)})},_.prototype.getOccurrencesAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getOccurrencesAtPosition('"+e+"', "+t+")",function(){return n.languageService.getOccurrencesAtPosition(e,t)})},_.prototype.getDocumentHighlights=function(n,o,r){var i=this;return this.forwardJSONCall("getDocumentHighlights('"+n+"', "+o+")",function(){var e=i.languageService.getDocumentHighlights(n,o,JSON.parse(r)),t=d.normalizeSlashes(n).toLowerCase();return d.filter(e,function(e){return d.normalizeSlashes(e.fileName).toLowerCase()===t})})},_.prototype.getCompletionsAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getCompletionsAtPosition('"+e+"', "+t+")",function(){return n.languageService.getCompletionsAtPosition(e,t)})},_.prototype.getCompletionEntryDetails=function(t,n,o,r,i){var s=this;return this.forwardJSONCall("getCompletionEntryDetails('"+t+"', "+n+", '"+o+"')",function(){var e=JSON.parse(r);return s.languageService.getCompletionEntryDetails(t,n,o,e,i)})},_.prototype.getFormattingEditsForRange=function(t,n,o,r){var i=this;return this.forwardJSONCall("getFormattingEditsForRange('"+t+"', "+n+", "+o+")",function(){var e=JSON.parse(r);return i.languageService.getFormattingEditsForRange(t,n,o,e)})},_.prototype.getFormattingEditsForDocument=function(t,n){var o=this;return this.forwardJSONCall("getFormattingEditsForDocument('"+t+"')",function(){var e=JSON.parse(n);return o.languageService.getFormattingEditsForDocument(t,e)})},_.prototype.getFormattingEditsAfterKeystroke=function(t,n,o,r){var i=this;return this.forwardJSONCall("getFormattingEditsAfterKeystroke('"+t+"', "+n+", '"+o+"')",function(){var e=JSON.parse(r);return i.languageService.getFormattingEditsAfterKeystroke(t,n,o,e)})},_.prototype.getDocCommentTemplateAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getDocCommentTemplateAtPosition('"+e+"', "+t+")",function(){return n.languageService.getDocCommentTemplateAtPosition(e,t)})},_.prototype.getNavigateToItems=function(e,t,n){var o=this;return this.forwardJSONCall("getNavigateToItems('"+e+"', "+t+", "+n+")",function(){return o.languageService.getNavigateToItems(e,t,n)})},_.prototype.getNavigationBarItems=function(e){var t=this;return this.forwardJSONCall("getNavigationBarItems('"+e+"')",function(){return t.languageService.getNavigationBarItems(e)})},_.prototype.getNavigationTree=function(e){var t=this;return this.forwardJSONCall("getNavigationTree('"+e+"')",function(){return t.languageService.getNavigationTree(e)})},_.prototype.getOutliningSpans=function(e){var t=this;return this.forwardJSONCall("getOutliningSpans('"+e+"')",function(){return t.languageService.getOutliningSpans(e)})},_.prototype.getTodoComments=function(e,t){var n=this;return this.forwardJSONCall("getTodoComments('"+e+"')",function(){return n.languageService.getTodoComments(e,JSON.parse(t))})},_.prototype.getEmitOutput=function(e){var t=this;return this.forwardJSONCall("getEmitOutput('"+e+"')",function(){return t.languageService.getEmitOutput(e)})},_.prototype.getEmitOutputObject=function(e){var t=this;return a(this.logger,"getEmitOutput('"+e+"')",!1,function(){return t.languageService.getEmitOutput(e)},this.logPerformance)};var g,h=_;function _(e,t,n){e=g.call(this,e)||this;return e.host=t,e.languageService=n,e.logPerformance=!1,e.logger=e.host,e}function m(e){return{spans:e.spans.join(","),endOfLineState:e.endOfLineState}}__extends(E,y=l),E.prototype.getEncodedLexicalClassifications=function(e,t,n){var o=this;return s(this.logger,"getEncodedLexicalClassifications",function(){return m(o.classifier.getEncodedLexicalClassifications(e,t,n))},this.logPerformance)},E.prototype.getClassificationsForLine=function(e,t,n){for(var e=this.classifier.getClassificationsForLine(e,t,n),o="",r=0,i=e.entries;r<i.length;r++)var s=i[r],o=(o+=s.length+"\n")+(s.classification+"\n");return o+e.finalLexState};var f,y,k=E,b=(__extends(T,f=l),T.prototype.forwardJSONCall=function(e,t){return s(this.logger,e,t,this.logPerformance)},T.prototype.resolveModuleName=function(n,o,r){var i=this;return this.forwardJSONCall("resolveModuleName('"+n+"')",function(){var e=JSON.parse(r),e=d.resolveModuleName(o,d.normalizeSlashes(n),e,i.host),t=e.resolvedModule?e.resolvedModule.resolvedFileName:void 0;return{resolvedFileName:t=e.resolvedModule&&".ts"!==e.resolvedModule.extension&&".tsx"!==e.resolvedModule.extension&&".d.ts"!==e.resolvedModule.extension?void 0:t,failedLookupLocations:e.failedLookupLocations}})},T.prototype.resolveTypeReferenceDirective=function(t,n,o){var r=this;return this.forwardJSONCall("resolveTypeReferenceDirective("+t+")",function(){var e=JSON.parse(o),e=d.resolveTypeReferenceDirective(n,d.normalizeSlashes(t),e,r.host);return{resolvedFileName:e.resolvedTypeReferenceDirective?e.resolvedTypeReferenceDirective.resolvedFileName:void 0,primary:!e.resolvedTypeReferenceDirective||e.resolvedTypeReferenceDirective.primary,failedLookupLocations:e.failedLookupLocations}})},T.prototype.getPreProcessedFileInfo=function(e,t){var n=this;return this.forwardJSONCall("getPreProcessedFileInfo('"+e+"')",function(){var e=d.preProcessFile(t.getText(0,t.getLength()),!0,!0);return{referencedFiles:n.convertFileReferences(e.referencedFiles),importedFiles:n.convertFileReferences(e.importedFiles),ambientExternalModules:e.ambientExternalModules,isLibFile:e.isLibFile,typeReferenceDirectives:n.convertFileReferences(e.typeReferenceDirectives)}})},T.prototype.getAutomaticTypeDirectiveNames=function(t){var n=this;return this.forwardJSONCall("getAutomaticTypeDirectiveNames('"+t+"')",function(){var e=JSON.parse(t);return d.getAutomaticTypeDirectiveNames(e,n.host)})},T.prototype.convertFileReferences=function(e){if(e){for(var t=[],n=0,o=e;n<o.length;n++){var r=o[n];t.push({path:d.normalizeSlashes(r.fileName),position:r.pos,length:r.end-r.pos})}return t}},T.prototype.getTSConfigFileInfo=function(n,o){var r=this;return this.forwardJSONCall("getTSConfigFileInfo('"+n+"')",function(){var e=o.getText(0,o.getLength()),e=d.parseJsonText(n,e),t=d.normalizeSlashes(n),t=d.parseJsonSourceFileConfigFileContent(e,r.host,d.getDirectoryPath(t),{},t);return{options:t.options,typeAcquisition:t.typeAcquisition,files:t.fileNames,raw:t.raw,errors:u(e.parseDiagnostics.concat(t.errors),"\r\n")}})},T.prototype.getDefaultCompilationSettings=function(){return this.forwardJSONCall("getDefaultCompilationSettings()",function(){return d.getDefaultCompilerOptions()})},T.prototype.discoverTypings=function(t){var n=this,o=d.createGetCanonicalFileName(!1);return this.forwardJSONCall("discoverTypings()",function(){var e=JSON.parse(t);return void 0===n.safeList&&(n.safeList=d.JsTyping.loadSafeList(n.host,d.toPath(e.safeListPath,e.safeListPath,o))),d.JsTyping.discoverTypings(n.host,function(e){return n.logger.log(e)},e.fileNames,d.toPath(e.projectRootPath,e.projectRootPath,o),n.safeList,e.packageNameToTypingLocation,e.typeAcquisition,e.unresolvedImports)})},T);function v(){this._shims=[]}function T(e,t,n){e=f.call(this,e)||this;return e.logger=t,e.host=n,e.logPerformance=!1,e}function E(e,t){e=y.call(this,e)||this;return e.logger=t,e.logPerformance=!1,e.classifier=d.createClassifier(),e}v.prototype.getServicesVersion=function(){return d.servicesVersion},v.prototype.createLanguageServiceShim=function(t){try{void 0===this.documentRegistry&&(this.documentRegistry=d.createDocumentRegistry(t.useCaseSensitiveFileNames&&t.useCaseSensitiveFileNames(),t.getCurrentDirectory()));var e=new o(t),n=d.createLanguageService(e,this.documentRegistry);return new h(this,t,n)}catch(e){throw p(t,e),e}},v.prototype.createClassifierShim=function(t){try{return new k(this,t)}catch(e){throw p(t,e),e}},v.prototype.createCoreServicesShim=function(e){try{var t=new r(e);return new b(this,e,t)}catch(t){throw p(e,t),t}},v.prototype.close=function(){d.clear(this._shims),this.documentRegistry=void 0},v.prototype.registerShim=function(e){this._shims.push(e)},v.prototype.unregisterShim=function(e){for(var t=0;t<this._shims.length;t++)if(this._shims[t]===e)return void delete this._shims[t];throw new Error("Invalid operation")},d.TypeScriptServicesFactory=v,"undefined"!=typeof module&&module.exports&&(module.exports=d)}(ts=ts||{}),function(e){(e.Services||(e.Services={})).TypeScriptServicesFactory=ts.TypeScriptServicesFactory}(TypeScript=TypeScript||{}),"2.6"),e=function(){function S(e,t){postMessage({action:3,cbn:t,result:e})}function _(e){var t=[];return t[e-1]=void 0,t}function P(e,t){return n(e[0]+t[0],e[1]+t[1])}function s(e,t){return n=~~Math.max(Math.min(e[1]/r,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/r,2147483647),-2147483648),e=F(e)&F(t),(t=e)<0&&(t+=r),[t,n*r];var n}function L(e,t){var n,o;return e[0]==t[0]&&e[1]==t[1]?0:(n=e[1]<0,o=t[1]<0,n&&!o||(n||!o)&&Z(e,t)[1]<0?-1:1)}function n(e,t){var n,o;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(n=t%r)+(o=Math.floor(e/r)*r),e=e-o+n;e<0;)e+=r,t-=r;for(;4294967295<e;)e-=r,t+=r;for(t%=0x10000000000000000;0x7fffffff00000000<t;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function G(e,t){return e[0]==t[0]&&e[1]==t[1]}function M(e){return 0<=e?[e,0]:[e+r,-r]}function F(e){return 2147483648<=e[0]?~~Math.max(Math.min(e[0]-r,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function o(e){return e<=30?1<<e:o(30)*o(e-30)}function a(e,t){var n;if(t&=63,G(e,De))return t?W:e;if(e[1]<0)throw Error("Neg");return t=o(t),n=e[1]*t%0x10000000000000000,0x8000000000000000<=(n+=t=(e=e[0]*t)-e%r)&&(n-=0x10000000000000000),[e-=t,n]}function C(e,t){t=o(t&=63);return n(Math.floor(e[0]/t),e[1]/t)}function Z(e,t){return n(e[0]-t[0],e[1]-t[1])}function x(e,t){return e.Mc=t,e.Lc=0,e.Yb=t.length,e}function d(e){return e.Lc>=e.Yb?-1:255&e.Mc[e.Lc++]}function B(e){return e.Mc=_(32),e.Yb=0,e}function u(e){var t=e.Mc;return t.length=e.Yb,t}function A(e,t){e.Mc[e.Yb++]=t<<24>>24}function I(e,t,n,o){D(t,n,e.Mc,e.Yb,o),e.Yb+=o}function D(e,t,n,o,r){for(var i=0;i<r;++i)n[o+i]=e[t+i]}function N(t,n,o,r,i){var s,a;if(L(r,E)<0)throw Error("invalid length "+r);t.Tb=r;var l=s=function(e){var t;for(e.v=_(4),e.a=[],e.d={},e.C=_(192),e.bb=_(12),e.hb=_(12),e.Ub=_(12),e.vc=_(12),e._=_(192),e.K=[],e.Sb=_(114),e.S=m({},4),e.$=ve({}),e.i=ve({}),e.A={},e.m=[],e.P=[],e.lb=[],e.nc=_(16),e.x=_(4),e.Q=_(4),e.Xb=[W],e.uc=[W],e.Kc=[0],e.fc=_(5),e.yc=_(128),e.vb=0,e.X=1,e.D=0,e.Hb=-1,e.mb=0,t=0;t<4096;++t)e.a[t]={};for(t=0;t<4;++t)e.K[t]=m({},6);return e}({}),c=l,u=1<<i.s;c.ab=u;for(var d,p=0;1<<p<u;++p);c.$b=2*p,l.n=i.f,c=l,i=i.m,d=c.X,c.X=i,c.b&&d!=c.X&&(c.wb=-1,c.b=null),l.eb=0,l.fb=3,l.Y=2,l.y=3,s.Gc=void 0===e.disableEndMark;var g=s,i=o;g.fc[0]=9*(5*g.Y+g.eb)+g.fb<<24>>24;for(var h=0;h<4;++h)g.fc[1+h]=g.ab>>8*h<<24>>24;for(I(i,g.fc,0,5),a=0;a<64;a+=8)A(o,255&F(C(r,a)));t.yb=(s.W=0,s.oc=n,s.pc=0,function(e){e.b||(d=4,e.X||(d=2),d=d,(p=o={}).qb=2<d,p.qb?(p.w=0,p.xb=4,p.R=66560):(p.w=2,p.xb=3,p.R=0),e.b=o);var t,n,o,r,i,s,a,l,c,u=e.A,d=e.eb,p=e.fb;if(null==u.V||u.u!=p||u.I!=d)for(u.I=d,u.qc=(1<<d)-1,u.u=p,n=1<<u.u+u.I,u.V=_(n),t=0;t<n;++t)u.V[t]=function(e){return e.tb=_(768),e}({});e.ab==e.wb&&e.Hb==e.n||(o=e.b,r=e.ab,i=4096,s=e.n,a=274,r<1073741567&&(o.Fc=16+(s>>1),c=s+a,a=256+~~(((i=r+i)+s+a)/2),(l=o).Bc=i,l._b=c,i=i+c+a,null!=l.c&&l.Kb==i||(l.c=null,l.Kb=i,l.c=_(l.Kb)),l.H=l.Kb-c,o.ob=s,a=r+1,o.p!=a&&(o.L=_(2*(o.p=a))),i=65536,o.qb&&(i=r-1,16777216<(i=(i=(i=(i=(i|=i>>1)|i>>2)|i>>4)|i>>8)>>1|65535)&&(i>>=1),o.Ec=i,++i,i+=o.R),i!=o.rc)&&(o.ub=_(o.rc=i)),e.wb=e.ab,e.Hb=e.n)}(s),s.d.Ab=o,function(e){var t=e;t.l=0;for(var n=t.J=0;n<4;++n)t.v[n]=0;(s=e.d).mc=W,s.xc=W,s.E=-1,s.Jb=1,s.Oc=0,y(e.C),y(e._),y(e.bb),y(e.hb),y(e.Ub),y(e.vc),y(e.Sb);for(var o=e.A,r=1<<o.u+o.I,i=0;i<r;++i)y(o.V[i].tb);for(var s,a=0;a<4;++a)y(e.K[a].G);ye(e.$,1<<e.Y),ye(e.i,1<<e.Y),y(e.S.G),e.N=0,e.jb=0,e.q=0,e.s=0}(s),de(s),ue(s),s.$.rb=s.n+1-2,Te(s.$,1<<s.Y),s.i.rb=s.n+1-2,Te(s.i,1<<s.Y),s.g=W,d=s,(c={}).cb=d,c.Z=null,c.zc=1,c)}function w(e,t,n){return e.Nb=B({}),N(e,x({},t),e.Nb,M(t.length),n),e}function O(e,u,t){for(var n,o,r,i="",s=[],a=0;a<5;++a){if(-1==(o=d(u)))throw Error("truncated input");s[a]=o<<24>>24}if(!function(e,t){var n,o,r,i,s;if(!(t.length<5)){for(i=(r=255&t[0])%9,s=(r=~~(r/9))%5,r=~~(r/5),o=n=0;o<4;++o)n+=(255&t[1+o])<<8*o;return!(99999999<n)&&function(e,t,n,o){if(!(8<t||4<n||4<o)){var r,i,s=e.gb;if(null==s.V||s.u!=t||s.I!=n)for(s.I=n,s.qc=(1<<n)-1,s.u=t,i=1<<s.u+s.I,s.V=_(i),r=0;r<i;++r)s.V[r]=function(e){return e.Ib=_(768),e}({});n=1<<o;return ie(e.Rb,n),ie(e.sb,n),e.Dc=n-1,1}}(e,i,s,r)&&(i=e,!((s=n)<0))&&(i.Ob!=s&&(i.Ob=s,i.nb=Math.max(i.Ob,1),s=i.B,i=Math.max(i.nb,4096),null!=s.Lb&&s.M==i||(s.Lb=_(i)),s.M=i,s.o=0,s.h=0),1)}}(n=function(e){e.B={},e.e={},e.Gb=_(192),e.Zb=_(12),e.Cb=_(12),e.Db=_(12),e.Eb=_(12),e.pb=_(192),e.kb=_(4),e.kc=_(114),e.Fb=l({},4),e.Rb=ae({}),e.sb=ae({}),e.gb={};for(var t=0;t<4;++t)e.kb[t]=l({},6);return e}({}),s))throw Error("corrupted input");for(a=0;a<64;a+=8){if(-1==(o=d(u)))throw Error("truncated input");i=(o=1==(o=o.toString(16)).length?"0"+o:o)+""+i}/^0+$|^f+$/i.test(i)?e.Tb=E:(r=parseInt(i,16),e.Tb=4294967295<r?E:M(r)),e.yb=function(e,t,n){e.e.Ab=u,re(e.B),e.B.cc=t;var o=e;o.B.h=0,o.B.o=0,y(o.Gb),y(o.pb),y(o.Zb),y(o.Cb),y(o.Db),y(o.Eb),y(o.kc);for(var r=o.gb,i=1<<r.u+r.I,s=0;s<i;++s)y(r.V[s].Ib);for(var a=0;a<4;++a)y(o.kb[a].G);le(o.Rb),le(o.sb),y(o.Fb.G);var l=o.e;l.Bb=0,l.E=-1;for(var c=0;c<5;++c)l.Bb=l.Bb<<8|d(l.Ab);return e.U=0,e.ib=0,e.Jc=0,e.Ic=0,e.Qc=0,e.Nc=n,e.g=W,e.jc=0,(t={}).Z=e,t.cb=null,t.zc=1,t}(n,t,e.Tb)}function R(e,t){return e.Nb=B({}),O(e,x({},t),e.Nb),e}function K(e,t){return e.c[e.f+e.o+t]}function j(e,t,n,o){var r,i;for(e.T&&e.o+t+o>e.h&&(o=e.h-(e.o+t)),++n,i=e.f+e.o+t,r=0;r<o&&e.c[i+r]==e.c[i+r-n];++r);return r}function z(e){return e.h-e.o}function ee(e){var t,n,o,r;if(!e.T)for(;;){if(!(r=-e.f+e.Kb-e.h))return;if(-1==(t=e.cc,n=e.c,o=e.f+e.h,r=r,n=t.Lc>=t.Yb?-1:(r=Math.min(r,t.Yb-t.Lc),D(t.Mc,t.Lc,n,o,r),t.Lc+=r,r)))return e.zb=e.h,e.f+e.zb>e.H&&(e.zb=e.H-e.f),e.T=1;e.h+=n,e.h>=e.o+e._b&&(e.zb=e.h-e._b)}}function te(e,t){e.f+=t,e.zb-=t,e.o-=t,e.h-=t}function T(e){++e.k>=e.p&&(e.k=0);var t=e;if(++t.o,t.o>t.zb){if(t.f+t.o>t.H){var n,o,r,i=t;for(0<(r=i.f+i.o-i.Bc)&&--r,o=i.f+i.h-r,n=0;n<o;++n)i.c[n]=i.c[r+n];i.f-=r}ee(t)}1073741823==e.o&&(t=e.o-e.p,ne(e.L,2*e.p,t),ne(e.ub,e.rc,t),te(e,t))}function ne(e,t,n){for(var o,r=0;r<t;++r)n>=(o=e[r]||0)?o=0:o-=n,e[r]=o}function c(e){var t=e.o-e.h;t&&(I(e.cc,e.Lb,e.h,t),e.o>=e.M&&(e.o=0),e.h=e.o)}function oe(e,t){t=e.o-t-1;return t<0&&(t+=e.M),e.Lb[t]}function re(e){c(e),e.cc=null}function U(e){return(e-=2)<4?e:3}function X(e){return e<4?0:e<10?e-3:e-6}function p(e){if(e.zc){if(e.cb)(function(e,t,n,o){var r,i,s,a,l,c,u,d,p,g,h,_,m;if(t[0]=W,n[0]=W,o[0]=1,e.oc&&(e.b.cc=e.oc,(m=e.b).f=0,m.o=0,m.h=0,m.T=0,ee(m),m.k=0,te(m,-1),e.W=1,e.oc=null),!e.pc){if(e.pc=1,g=e.g,G(e.g,W)){if(!z(e.b))return pe(e,F(e.g));_e(e),p=F(e.g)&e.y,V(e.d,e.C,(e.l<<4)+p,0),e.l=X(e.l),r=K(e.b,-e.s),Ee(q(e.A,F(e.g),e.J),e.d,r),e.J=r,--e.s,e.g=P(e.g,Ne)}if(!z(e.b))return pe(e,F(e.g));for(;;){if(l=function(n,e){var t,o,L,r,i,s,M,a,l,c,u,d,p,F,g,U,h,H,_,m,V,f,y,k,b,v,T,E,S,C,x,W,B,G,A,I,D,N,w,O,R;if(n.jb!=n.q)return P=n.a[n.q].r-n.q,n.mb=n.a[n.q].j,n.q=n.a[n.q].r,P;if(n.q=n.jb=0,n.N?(u=n.vb,n.N=0):u=_e(n),k=n.D,(f=z(n.b)+1)<2)return n.mb=-1,1;for(273<f&&(f=273),a=I=0;a<4;++a)n.x[a]=n.v[a],n.Q[a]=j(n.b,-1,n.x[a],273),n.Q[a]>n.Q[I]&&(I=a);if(n.Q[I]>=n.n)return n.mb=I,he(n,(P=n.Q[I])-1),P;if(u>=n.n)return n.mb=n.m[k-1]+4,he(n,u-1),u;if(s=K(n.b,-1),g=K(n.b,-n.v[0]-1-1),u<2&&s!=g&&n.Q[I]<2)return n.mb=-1,1;{var P;n.a[0].Hc=n.l,C=e&n.y,n.a[1].z=Q[n.C[(n.l<<4)+C]>>>2]+J(q(n.A,e,n.J),7<=n.l,g,s),Se(n.a[1]),A=(U=Q[2048-n.C[(n.l<<4)+C]>>>2])+Q[2048-n.bb[n.l]>>>2],g==s&&(D=A+function(e,t){return Q[n.hb[e]>>>2]+Q[n._[(e<<4)+t]>>>2]}(n.l,C),n.a[1].z>D)&&(n.a[1].z=D,(P=n.a[1]).j=0,P.t=0)}if((c=u>=n.Q[I]?u:n.Q[I])<2)return n.mb=n.a[1].j,1;n.a[1].r=0,n.a[0].bc=n.x[0],n.a[0].ac=n.x[1],n.a[0].dc=n.x[2],n.a[0].lc=n.x[3],l=c;for(;n.a[l--].z=268435455,2<=l;);for(a=0;a<4;++a)if(!((G=n.Q[a])<2))for(W=A+$(n,a,n.l,C);r=W+Y(n.i,G-2,C),(T=n.a[G]).z>r&&(T.z=r,T.r=0,T.j=a,T.t=0),2<=--G;);if(V=U+Q[n.bb[n.l]>>>2],u>=(l=2<=n.Q[0]?n.Q[0]+1:2)){for(b=0;l>n.m[b];)b+=2;for(;r=V+ge(n,M=n.m[b+1],l,C),(T=n.a[l]).z>r&&(T.z=r,T.r=0,T.j=M+4,T.t=0),l!=n.m[b]||(b+=2)!=k;++l);}for(t=0;;){if(++t==c)return ce(n,t);if(h=_e(n),k=n.D,h>=n.n)return n.vb=h,n.N=1,ce(n,t);if(++e,S=n.a[t].r,w=n.a[t].t?(--S,X(w=n.a[t].Ac?(w=n.a[n.a[t].r2].Hc,n.a[t].j2<4?w<7?8:11:w<7?7:10):n.a[S].Hc)):n.a[S].Hc,S==t-1?w=n.a[t].j?X(w):w<7?9:11:(w=n.a[t].t&&n.a[t].Ac?(S=n.a[t].r2,E=n.a[t].j2,w<7?8:11):(E=n.a[t].j)<4?w<7?8:11:w<7?7:10,S=n.a[S],E<4?E?1==E?(n.x[0]=S.ac,n.x[1]=S.bc,n.x[2]=S.dc,n.x[3]=S.lc):2==E?(n.x[0]=S.dc,n.x[1]=S.bc,n.x[2]=S.ac,n.x[3]=S.lc):(n.x[0]=S.lc,n.x[1]=S.bc,n.x[2]=S.ac,n.x[3]=S.dc):(n.x[0]=S.bc,n.x[1]=S.ac,n.x[2]=S.dc,n.x[3]=S.lc):(n.x[0]=E-4,n.x[1]=S.bc,n.x[2]=S.ac,n.x[3]=S.dc)),n.a[t].Hc=w,n.a[t].bc=n.x[0],n.a[t].ac=n.x[1],n.a[t].dc=n.x[2],n.a[t].lc=n.x[3],S=n.a[t].z,s=K(n.b,-1),g=K(n.b,-n.x[0]-1-1),C=e&n.y,o=S+Q[n.C[(w<<4)+C]>>>2]+J(q(n.A,e,K(n.b,-2)),7<=w,g,s),H=0,(_=n.a[t+1]).z>o&&(_.z=o,_.r=t,_.j=-1,_.t=0,H=1),A=(U=S+Q[2048-n.C[(w<<4)+C]>>>2])+Q[2048-n.bb[w]>>>2],g!=s||t>_.r&&!_.j||(D=A+(Q[n.hb[w]>>>2]+Q[n._[(w<<4)+C]>>>2]),_.z>=D&&(_.z=D,_.r=t,_.j=0,_.t=0,H=1)),!((f=y=(y=z(n.b)+1)>4095-t?4095-t:y)<2)){if(f>n.n&&(f=n.n),!H&&g!=s&&(R=Math.min(y-1,n.n),2<=(p=j(n.b,0,n.x[0],R)))){for(O=X(w),x=e+1&n.y,m=o+Q[2048-n.C[(O<<4)+x]>>>2]+Q[2048-n.bb[O]>>>2],v=t+1+p;c<v;)n.a[++c].z=268435455;r=m+(Y(n.i,p-2,x)+$(n,0,O,x)),(T=n.a[v]).z>r&&(T.z=r,T.r=t+1,T.j=0,T.t=1,T.Ac=0)}for(N=2,B=0;B<4;++B)if(!((d=j(n.b,-1,n.x[B],f))<2)){F=d;do{for(;c<t+d;)n.a[++c].z=268435455}while(r=A+(Y(n.i,d-2,C)+$(n,B,w,C)),(T=n.a[t+d]).z>r&&(T.z=r,T.r=t,T.j=B,T.t=0),2<=--d);if(d=F,B||(N=d+1),d<y&&(R=Math.min(y-1-d,n.n),2<=(p=j(n.b,d,n.x[B],R)))){for(O=w<7?8:11,x=e+d&n.y,L=A+(Y(n.i,d-2,C)+$(n,B,w,C))+Q[n.C[(O<<4)+x]>>>2]+J(q(n.A,e+d,K(n.b,d-1-1)),1,K(n.b,d-1-(n.x[B]+1)),K(n.b,d-1)),O=X(O),x=e+d+1&n.y,m=L+Q[2048-n.C[(O<<4)+x]>>>2]+Q[2048-n.bb[O]>>>2],v=d+1+p;c<t+v;)n.a[++c].z=268435455;r=m+(Y(n.i,p-2,x)+$(n,0,O,x)),(T=n.a[t+v]).z>r&&(T.z=r,T.r=t+d+1,T.j=0,T.t=1,T.Ac=1,T.r2=t,T.j2=B)}}if(f<h){for(h=f,k=0;h>n.m[k];k+=2);n.m[k]=h,k+=2}if(N<=h){for(V=U+Q[n.bb[w]>>>2];c<t+h;)n.a[++c].z=268435455;for(b=0;N>n.m[b];)b+=2;for(d=N;;++d)if(r=V+ge(n,i=n.m[b+1],d,C),(T=n.a[t+d]).z>r&&(T.z=r,T.r=t,T.j=i+4,T.t=0),d==n.m[b]){if(d<y&&(R=Math.min(y-1-d,n.n),2<=(p=j(n.b,d,i,R)))){for(O=w<7?7:10,x=e+d&n.y,L=r+Q[n.C[(O<<4)+x]>>>2]+J(q(n.A,e+d,K(n.b,d-1-1)),1,K(n.b,d-(i+1)-1),K(n.b,d-1)),O=X(O),x=e+d+1&n.y,m=L+Q[2048-n.C[(O<<4)+x]>>>2]+Q[2048-n.bb[O]>>>2],v=d+1+p;c<t+v;)n.a[++c].z=268435455;r=m+(Y(n.i,p-2,x)+$(n,0,O,x)),(T=n.a[t+v]).z>r&&(T.z=r,T.r=t+d+1,T.j=0,T.t=1,T.Ac=1,T.r2=t,T.j2=i+4)}if((b+=2)==k)break}}}}}(e,F(e.g)),u=e.mb,p=F(e.g)&e.y,s=(e.l<<4)+p,1==l&&-1==u){V(e.d,e.C,s,0),r=K(e.b,-e.s),h=q(e.A,F(e.g),e.J);if(e.l<7)Ee(h,e.d,r);else{c=K(e.b,-e.v[0]-1-e.s);{f=void 0;y=void 0;k=void 0;b=void 0;v=void 0;T=void 0;E=void 0;S=void 0;C=void 0;x=void 0;var f=h;var y=e.d;var k=c;var b=r;var v,T,E,S,C=1,x=1;for(T=7;0<=T;--T)v=b>>T&1,S=x,C&&(S+=1+(E=k>>T&1)<<8,C=E==v),V(y,f.tb,S,v),x=x<<1|v}}e.J=r,e.l=X(e.l)}else{if(V(e.d,e.C,s,1),u<4){if(V(e.d,e.bb,e.l,1),u?(V(e.d,e.hb,e.l,1),1==u?V(e.d,e.Ub,e.l,0):(V(e.d,e.Ub,e.l,1),V(e.d,e.vc,e.l,u-2))):(V(e.d,e.hb,e.l,0),V(e.d,e._,s,1==l?0:1)),1==l?e.l=e.l<7?9:11:(be(e.i,e.d,l-2,p),e.l=e.l<7?8:11),i=e.v[u],0!=u){for(a=u;1<=a;--a)e.v[a]=e.v[a-1];e.v[0]=i}}else{if(V(e.d,e.bb,e.l,0),e.l=e.l<7?7:10,be(e.$,e.d,l-2,p),h=fe(u-=4),c=U(l),H(e.K[c],e.d,h),4<=h){d=u-(_=(2|1&h)<<(s=(h>>1)-1));if(h<14){B=void 0;A=void 0;I=void 0;D=void 0;N=void 0;w=void 0;O=void 0;R=void 0;var B=e.Sb;var A=_-h-1;var I=e.d;var D=s;var N=d;var w,O,R=1;for(O=0;O<D;++O)V(I,B,A+R,w=1&N),R=R<<1|w,N>>=1}else xe(e.d,d>>4,s-4),Ce(e.S,e.d,15&d),++e.Qb}for(i=u,a=3;1<=a;--a)e.v[a]=e.v[a-1];e.v[0]=i,++e.Mb}e.J=K(e.b,l-1-e.s)}if(e.s-=l,e.g=P(e.g,M(l)),!e.s){if(128<=e.Mb&&de(e),16<=e.Qb&&ue(e),t[0]=e.g,n[0]=P(P(M((_=e.d).Jb),_.mc),[4,0]),!z(e.b))return pe(e,F(e.g));if(0<=L(Z(e.g,g),[4096,0]))return o[e.pc=0]=0}}}})((t=e).cb,t.cb.Xb,t.cb.uc,t.cb.Kc),t.Pb=t.cb.Xb[0],t.cb.Kc[0]&&(me(n=t.cb),n.d.Ab=null,t.zc=0);else{n=e;t=function(e){var r,t,n,o,i=F(e.g)&e.Dc;if(f(e.e,e.Gb,(e.U<<4)+i)){if(f(e.e,e.Zb,e.U))o=0,f(e.e,e.Cb,e.U)?(f(e.e,e.Db,e.U)?(f(e.e,e.Eb,e.U)?(n=e.Qc,e.Qc=e.Ic):n=e.Ic,e.Ic=e.Jc):n=e.Jc,e.Jc=e.ib,e.ib=n):f(e.e,e.pb,(e.U<<4)+i)||(e.U=e.U<7?9:11,o=1),o||(o=se(e.sb,e.e,i)+2,e.U=e.U<7?8:11);else if(e.Qc=e.Ic,e.Ic=e.Jc,e.Jc=e.ib,o=2+se(e.Rb,e.e,i),e.U=e.U<7?7:10,4<=(n=g(e.kb[U(o)],e.e))){if(e.ib=(2|1&n)<<(r=(n>>1)-1),n<14)e.ib+=function(e,t,n,o){for(var r,i=1,s=0,a=0;a<o;++a)i=(i<<1)+(r=f(n,e,t+i)),s|=r<<a;return s}(e.kc,e.ib-n-1,e.e,r);else if(e.ib+=function(e){for(var t,n=0,o=r-4;0!=o;--o)e.E>>>=1,t=e.Bb-e.E>>>31,e.Bb-=e.E&t-1,n=n<<1|1-t,-16777216&e.E||(e.Bb=e.Bb<<8|d(e.Ab),e.E<<=8);return n}(e.e)<<4,e.ib+=function(e,t){for(var n,o=1,r=0,i=0;e.F>i;++i)o=(o<<1)+(n=f(t,e.G,o)),r|=n<<i;return r}(e.Fb,e.e),e.ib<0)return-1==e.ib?1:-1}else e.ib=n;if(0<=L(M(e.ib),e.g)||e.ib>=e.nb)return-1;var s=e.B,i=e.ib,a=o,l=s.o-i-1;for(l<0&&(l+=s.M);0!=a;--a)l>=s.M&&(l=0),s.Lb[s.o++]=s.Lb[l++],s.o>=s.M&&c(s);e.g=P(e.g,M(o)),e.jc=oe(e.B,0)}else n=e.gb,i=F(e.g),o=e.jc,i=n.V[((i&n.qc)<<n.u)+((255&o)>>>8-n.u)],e.jc=e.U<7?function(e,t){for(var n=1;(n=n<<1|f(t,e.Ib,n))<256;);return n<<24>>24}(i,e.e):function(e,t,n){var o,r,i=1;do{if(r=n>>7&1,n<<=1,i=i<<1|(o=f(t,e.Ib,(1+r<<8)+i)),r!=o){for(;i<256;)i=i<<1|f(t,e.Ib,i);break}}while(i<256);return i<<24>>24}(i,e.e,oe(e.B,e.ib)),i=e.B,t=e.jc,i.Lb[i.o++]=t,i.o>=i.M&&c(i),e.U=X(e.U),e.g=P(e.g,Ne);return 0}(n.Z);if(-1==t)throw Error("corrupted input");n.Pb=E,n.Pc=n.Z.g,(t||0<=L(n.Z.Nc,W)&&0<=L(n.Z.g,n.Z.Nc))&&(c(n.Z.B),re(n.Z.B),n.Z.e.Ab=null,n.zc=0)}return e.zc}throw Error("bad state");var t,n}function ie(e,t){for(;t>e.O;++e.O)e.ec[e.O]=l({},3),e.hc[e.O]=l({},3)}function se(e,t,n){return f(t,e.wc,0)?8+(f(t,e.wc,1)?8+g(e.tc,t):g(e.hc[n],t)):g(e.ec[n],t)}function ae(e){return e.wc=_(2),e.ec=_(16),e.hc=_(16),e.tc=l({},8),e.O=0,e}function le(e){y(e.wc);for(var t=0;e.O>t;++t)y(e.ec[t].G),y(e.hc[t].G);y(e.tc.G)}function ce(e,t){var n,o,r,i;for(e.jb=t,r=e.a[t].r,o=e.a[t].j;e.a[t].t&&(Se(e.a[r]),e.a[r].r=r-1,e.a[t].Ac)&&(e.a[r-1].t=0,e.a[r-1].r=e.a[t].r2,e.a[r-1].j=e.a[t].j2),i=r,n=o,o=e.a[i].j,r=e.a[i].r,e.a[i].j=n,e.a[i].r=t,0<(t=i););return e.mb=e.a[0].j,e.q=e.a[0].r}function ue(e){for(var t=0;t<16;++t)e.nc[t]=function(e,t){var n,o,r=1,i=0;for(o=e.F;0!=o;--o)n=1&t,t>>>=1,i+=k(e.G[r],n),r=r<<1|n;return i}(e.S,t);e.Qb=0}function de(e){for(var t,n,o,r,i,s,a,l=4;l<128;++l)t=(2|1&(i=fe(l)))<<(o=(i>>1)-1),e.yc[l]=function(e,t,n,o){var r,i,s=1,a=0;for(i=n;0!=i;--i)r=1&o,o>>>=1,a+=Q[(2047&(e[t+s]-r^-r))>>>2],s=s<<1|r;return a}(e.Sb,t-i-1,o,l-t);for(r=0;r<4;++r){for(n=e.K[r],s=r<<6,i=0;e.$b>i;++i)e.P[s+i]=h(n,i);for(i=14;e.$b>i;++i)e.P[s+i]+=(i>>1)-1-4<<6;for(a=128*r,l=0;l<4;++l)e.lb[a+l]=e.P[s+l];for(;l<128;++l)e.lb[a+l]=e.P[s+fe(l)]+e.yc[l]}e.Mb=0}function pe(e,t){var n;me(e),n=t&(t=e).y,t.Gc&&(V(t.d,t.C,(t.l<<4)+n,1),V(t.d,t.bb,t.l,0),t.l=t.l<7?7:10,be(t.$,t.d,0,n),n=U(2),H(t.K[n],t.d,63),xe(t.d,67108863,26),Ce(t.S,t.d,15));for(var o=0;o<5;++o)Be(e.d)}function ge(e,t,n,o){var r=U(n);return(t<128?e.lb[128*r+t]:e.P[(r<<6)+(t<131072?i[t>>6]+12:t<134217728?i[t>>16]+32:i[t>>26]+52)]+e.nc[15&t])+Y(e.$,n-2,o)}function $(e,t,n,o){var r;return t?(r=Q[2048-e.hb[n]>>>2],1==t?r+=Q[e.Ub[n]>>>2]:r=(r+=Q[2048-e.Ub[n]>>>2])+k(e.vc[n],t-2)):(r=Q[e.hb[n]>>>2],r+=Q[2048-e._[(n<<4)+o]>>>2]),r}function he(e,t){if(0<t){var n,o,r,i,s,a,l,c,u,d,p,g,h,_,m=e.b,f=t;do{if(m.h>=m.o+m.ob)u=m.ob;else if(u=m.h-m.o,m.xb>u){T(m);continue}for(d=m.o>m.p?m.o-m.p:0,o=m.f+m.o,s=m.qb?(s=1023&(_=we[255&m.c[o]]^255&m.c[o+1]),m.ub[s]=m.o,s=65535&(_^=(255&m.c[o+2])<<8),m.ub[1024+s]=m.o,(_^we[255&m.c[o+3]]<<5)&m.Ec):255&m.c[o]^(255&m.c[o+1])<<8,r=m.ub[m.R+s],m.ub[m.R+s]=m.o,g=1+(m.k<<1),h=m.k<<1,l=c=m.w,n=m.Fc;;){if(r<=d||0==n--){m.L[g]=m.L[h]=0;break}if(i=m.o-r,i=(m.k>=i?m.k-i:m.k-i+m.p)<<1,p=m.f+r,m.c[p+(a=l<c?l:c)]==m.c[o+a]){for(;++a!=u&&m.c[p+a]==m.c[o+a];);if(a==u){m.L[h]=m.L[i],m.L[g]=m.L[1+i];break}}(255&m.c[o+a])>(255&m.c[p+a])?(m.L[h]=r,r=m.L[h=1+i],c=a):(m.L[g]=r,r=m.L[g=i],l=a)}T(m)}while(0!=--f);e.s+=t}}function _e(e){var t=0;return e.D=function(e,t){var n,o,r,i,s,a,l,c,u,d,p,g,h,_,m,f,y,k,b,v;if(e.h>=e.o+e.ob)h=e.ob;else if(h=e.h-e.o,e.xb>h)return T(e),0;for(_=e.o>e.p?e.o-e.p:0,o=e.f+e.o,m=1,u=c=f=0,v=e.qb?(c=1023&(v=we[255&e.c[o]]^255&e.c[o+1]),u=65535&(v^=(255&e.c[o+2])<<8),(v^we[255&e.c[o+3]]<<5)&e.Ec):255&e.c[o]^(255&e.c[o+1])<<8,r=e.ub[e.R+v]||0,e.qb&&(i=e.ub[c]||0,s=e.ub[1024+u]||0,e.ub[c]=e.o,e.ub[1024+u]=e.o,_<i&&e.c[e.f+i]==e.c[o]&&(t[f++]=m=2,t[f++]=e.o-i-1),_<s&&e.c[e.f+s]==e.c[o]&&(s==i&&(f-=2),t[f++]=m=3,t[f++]=e.o-s-1,i=s),0!=f)&&i==r&&(f-=2,m=1),e.ub[e.R+v]=e.o,k=1+(e.k<<1),b=e.k<<1,p=g=e.w,0!=e.w&&_<r&&e.c[e.f+r+e.w]!=e.c[o+e.w]&&(t[f++]=m=e.w,t[f++]=e.o-r-1),n=e.Fc;;){if(r<=_||0==n--){e.L[k]=e.L[b]=0;break}if(l=e.o-r,a=(e.k>=l?e.k-l:e.k-l+e.p)<<1,y=e.f+r,e.c[y+(d=p<g?p:g)]==e.c[o+d]){for(;++d!=h&&e.c[y+d]==e.c[o+d];);if(m<d&&(t[f++]=m=d,t[f++]=l-1,d==h)){e.L[b]=e.L[a],e.L[k]=e.L[1+a];break}}(255&e.c[o+d])>(255&e.c[y+d])?(e.L[b]=r,r=e.L[b=1+a],g=d):(e.L[k]=r,r=e.L[k=a],p=d)}return T(e),f}(e.b,e.m),0<e.D&&(t=e.m[e.D-2])==e.n&&(t+=j(e.b,t-1,e.m[e.D-1],273-t)),++e.s,t}function me(e){e.b&&e.W&&(e.b.cc=null,e.W=0)}function fe(e){return e<2048?i[e]:e<2097152?i[e>>10]+20:i[e>>20]+40}function ye(e,t){y(e.db);for(var n=0;n<t;++n)y(e.Vb[n].G),y(e.Wb[n].G);y(e.ic.G)}function ke(e,t,n,o,r){var i,s=Q[e.db[0]>>>2],a=(i=Q[2048-e.db[0]>>>2])+Q[e.db[1]>>>2],l=i+Q[2048-e.db[1]>>>2],c=0;for(c=0;c<8;++c){if(n<=c)return;o[r+c]=s+h(e.Vb[t],c)}for(;c<16;++c){if(n<=c)return;o[r+c]=a+h(e.Wb[t],c-8)}for(;c<n;++c)o[r+c]=l+h(e.ic,c-8-8)}function be(e,t,n,o){var r,i;r=e,t=t,i=o,(n=n)<8?(V(t,r.db,0,0),H(r.Vb[i],t,n)):(n-=8,V(t,r.db,0,1),n<8?(V(t,r.db,1,0),H(r.Wb[i],t,n)):(V(t,r.db,1,1),H(r.ic,t,n-8))),0==--e.sc[o]&&(ke(e,o,e.rb,e.Cc,272*o),e.sc[o]=e.rb)}function ve(e){var t=e;t.db=_(2),t.Vb=_(16),t.Wb=_(16),t.ic=m({},8);for(var n=0;n<16;++n)t.Vb[n]=m({},3),t.Wb[n]=m({},3);return e.Cc=[],e.sc=[],e}function Y(e,t,n){return e.Cc[272*n+t]}function Te(e,t){for(var n=0;n<t;++n)ke(e,n,e.rb,e.Cc,272*n),e.sc[n]=e.rb}function q(e,t,n){return e.V[((t&e.qc)<<e.u)+((255&n)>>>8-e.u)]}function Ee(e,t,n){for(var o,r=1,i=7;0<=i;--i)V(t,e.tb,r,o=n>>i&1),r=r<<1|o}function J(e,t,n,o){var r,i,s=1,a=7,l=0;if(t)for(;0<=a;--a)if(l+=k(e.tb[(1+(i=n>>a&1)<<8)+s],r=o>>a&1),s=s<<1|r,i!=r){--a;break}for(;0<=a;--a)l+=k(e.tb[s],r=o>>a&1),s=s<<1|r;return l}function Se(e){e.j=-1,e.t=0}function l(e,t){return e.F=t,e.G=_(1<<t),e}function g(e,t){for(var n=1,o=e.F;0!=o;--o)n=(n<<1)+f(t,e.G,n);return n-(1<<e.F)}function m(e,t){return e.F=t,e.G=_(1<<t),e}function H(e,t,n){for(var o,r=1,i=e.F;0!=i;)o=n>>>--i&1,V(t,e.G,r,o),r=r<<1|o}function h(e,t){for(var n,o=1,r=0,i=e.F;0!=i;)n=t>>>--i&1,r+=k(e.G[o],n),o=(o<<1)+n;return r}function Ce(e,t,n){for(var o,r=1,i=0;e.F>i;++i)V(t,e.G,r,o=1&n),r=r<<1|o,n>>=1}function f(e,t,n){var o,r=t[n];return(-2147483648^(o=(e.E>>>11)*r))>(-2147483648^e.Bb)?(e.E=o,t[n]=r+(2048-r>>>5)<<16>>16,-16777216&e.E||(e.Bb=e.Bb<<8|d(e.Ab),e.E<<=8),0):(e.E-=o,e.Bb-=o,t[n]=r-(r>>>5)<<16>>16,-16777216&e.E||(e.Bb=e.Bb<<8|d(e.Ab),e.E<<=8),1)}function y(e){for(var t=e.length-1;0<=t;--t)e[t]=1024}function V(e,t,n,o){var r=t[n],i=(e.E>>>11)*r;o?(e.xc=P(e.xc,s(M(i),[4294967295,0])),e.E-=i,t[n]=r-(r>>>5)<<16>>16):(e.E=i,t[n]=r+(2048-r>>>5)<<16>>16),-16777216&e.E||(e.E<<=8,Be(e))}function xe(e,t,n){for(var o=n-1;0<=o;--o)e.E>>>=1,1==(t>>>o&1)&&(e.xc=P(e.xc,M(e.E))),-16777216&e.E||(e.E<<=8,Be(e))}function Be(e){var t,n=F(function(e,t){t=C(e,t&=63);return t=e[1]<0?P(t,a([2,0],31)):t}(e.xc,32));if(0!=n||L(e.xc,[4278190080,0])<0){for(e.mc=P(e.mc,M(e.Jb)),t=e.Oc;A(e.Ab,t+n),t=255,0!=--e.Jb;);e.Oc=F(e.xc)>>>24}++e.Jb,e.xc=a(s(e.xc,[16777215,0]),8)}function k(e,t){return Q[(2047&(e-t^-t))>>>2]}function Ae(e){for(var t,n,o,r=0,i=0,s=e.length,a=[],l=[];r<s;++r,++i){if(128&(t=255&e[r]))if(192==(224&t)){if(s<=r+1)return e;if(128!=(192&(n=255&e[++r])))return e;l[i]=(31&t)<<6|63&n}else{if(224!=(240&t))return e;if(s<=r+2)return e;if(128!=(192&(n=255&e[++r])))return e;if(128!=(192&(o=255&e[++r])))return e;l[i]=(15&t)<<12|(63&n)<<6|63&o}else{if(!t)return e;l[i]=t}16383==i&&(a.push(String.fromCharCode.apply(String,l)),i=-1)}return 0<i&&(l.length=i,a.push(String.fromCharCode.apply(String,l))),a.join("")}function Ie(e){var t,n,o,r=[],i=0,s=e.length;if("object"==typeof e)return e;for(var a=e,l=s,c=r,u=0,d=0;d<l;++d)c[u++]=a.charCodeAt(d);for(o=0;o<s;++o)1<=(t=r[o])&&t<=127?++i:i+=!t||128<=t&&t<=2047?2:3;for(n=[],o=i=0;o<s;++o)1<=(t=r[o])&&t<=127?n[i++]=t<<24>>24:(!t||128<=t&&t<=2047?n[i++]=(192|t>>6&31)<<24>>24:(n[i++]=(224|t>>12&15)<<24>>24,n[i++]=(128|t>>6&63)<<24>>24),n[i++]=(128|63&t)<<24>>24);return n}function b(e){return e[1]+e[0]}var t,v="function"==typeof setImmediate?setImmediate:setTimeout,r=4294967296,E=[4294967295,-r],De=[0,-0x8000000000000000],W=[0,0],Ne=[1,0],we=function(){for(var e,t,n=[],o=0;o<256;++o){for(t=o,e=0;e<8;++e)0!=(1&t)?t=t>>>1^-306674912:t>>>=1;n[o]=t}return n}(),i=function(){for(var e,t,n=2,o=[0,1],r=2;r<22;++r)for(t=1<<(r>>1)-1,e=0;e<t;++e,++n)o[n]=r<<24>>24;return o}(),Q=function(){for(var e,t,n=[],o=8;0<=o;--o)for(e=1<<9-o,t=1<<9-o-1;t<e;++t)n[t]=(o<<6)+(e-t<<6>>>9-o-1);return n}(),Oe=(t=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}],function(e){return t[e-1]||t[6]});return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||(onmessage=function(t){t&&t.gc&&(2==t.gc.action?e.decompress(t.gc.gc,t.gc.cbn):1==t.gc.action&&e.compress(t.gc.gc,t.gc.Rc,t.gc.cbn))}),{compress:function(e,t,o,r){var i,n,s={},a=void 0===o&&void 0===r;if("function"!=typeof o&&(n=o,o=r=0),r=r||function(e){return void 0!==n?S(e,n):void 0},o=o||function(e,t){return void 0!==n?postMessage({action:1,cbn:n,result:e,error:t}):void 0},a){for(s.c=w({},Ie(e),Oe(t));p(s.c.yb););return u(s.c.Nb)}try{s.c=w({},Ie(e),Oe(t)),r(0)}catch(e){return o(null,e)}v(function e(){try{for(var t,n=(new Date).getTime();p(s.c.yb);)if(i=b(s.c.yb.Pb)/b(s.c.Tb),200<(new Date).getTime()-n)return r(i),v(e,0),0;r(1),t=u(s.c.Nb),v(o.bind(null,t),0)}catch(e){o(null,e)}},0)},decompress:function(e,r,i){var s,n,a,l,c={},t=void 0===r&&void 0===i;if("function"!=typeof r&&(n=r,r=i=0),i=i||function(e){return void 0!==n?S(a?e:-1,n):void 0},r=r||function(e,t){return void 0!==n?postMessage({action:2,cbn:n,result:e,error:t}):void 0},t){for(c.d=R({},e);p(c.d.yb););return Ae(u(c.d.Nb))}try{c.d=R({},e),l=b(c.d.Tb),a=-1<l,i(0)}catch(e){return r(null,e)}v(function e(){try{for(var t,n=0,o=(new Date).getTime();p(c.d.yb);)if(++n%1e3==0&&200<(new Date).getTime()-o)return a&&(s=b(c.d.yb.Z.g)/l,i(s)),v(e,0),0;i(1),t=Ae(u(c.d.Nb)),v(r.bind(null,t),0)}catch(e){r(null,e)}},0)}}}(),pxt,pxt,pxt,pxt,pxt,ts,pxtc=(this.LZMA=this.LZMA_WORKER=e,function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DOMPurify=t()}(this,function(){function e(r){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return a(r,e,n)}}function t(o){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l(o,t)}}function fe(e,t){i&&i(e,null);for(var n=t.length;n--;){var o,r=t[n];"string"==typeof r&&(o=Ae(r))!==r&&(s(t)||(t[n]=o),r=o),e[r]=!0}return e}function ye(e){var t={},n=void 0;for(n in e)a(o,e,[n])&&(t[n]=e[n]);return t}function ke(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=Object.hasOwnProperty,i=Object.setPrototypeOf,s=Object.isFrozen,be=Object.keys,ve=Object.freeze,n=Object.seal,r="undefined"!=typeof Reflect&&Reflect,a=(a=r.apply)||function(e,t,n){return e.apply(t,n)},ve=ve||function(e){return e},n=n||function(e){return e},l=(l=r.construct)||function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))},Te=e(Array.prototype.forEach),Ee=e(Array.prototype.indexOf),Se=e(Array.prototype.join),Ce=e(Array.prototype.pop),xe=e(Array.prototype.push),Be=e(Array.prototype.slice),Ae=e(String.prototype.toLowerCase),Ie=e(String.prototype.match),De=e(String.prototype.replace),Ne=e(String.prototype.indexOf),Ke=e(String.prototype.trim),we=e(RegExp.prototype.test),je=t(RegExp),Oe=t(TypeError),Re=ve(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Pe=ve(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),Le=ve(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Me=ve(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Fe=ve(["#text"]),Ue=ve(["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","minlength","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"]),He=ve(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ve=ve(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),We=ve(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ze=n(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Xe=n(/<%[\s\S]*|[\s\S]*%>/gm),$e=n(/^data-[\-\w.\u00B7-\uFFFF]/),Ye=n(/^aria-[\-\w]+$/),qe=n(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Je=n(/^(?:\w+script|data):/i),Qe=n(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return function P(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,c=function(e){return P(e)};if(c.version="2.0.8",c.removed=[],a&&a.document&&9===a.document.nodeType){var l=a.document,L=!1,M=!1,i=a.document,F=a.DocumentFragment,e=a.HTMLTemplateElement,u=a.Node,t=a.NodeFilter,n=a.NamedNodeMap,U=void 0===n?a.NamedNodeMap||a.MozNamedAttrMap:n,H=a.Text,V=a.Comment,W=a.DOMParser,n=a.trustedTypes,d=("function"==typeof e&&(e=i.createElement("template")).content&&e.content.ownerDocument&&(i=e.content.ownerDocument),function(e,t){if("object"!==(void 0===e?"undefined":Ge(e))||"function"!=typeof e.createPolicy)return null;var n=null,t="dompurify"+((n=t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")?t.currentScript.getAttribute("data-tt-policy-suffix"):n)?"#"+n:"");try{return e.createPolicy(t,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+t+" could not be created."),null}}(n,l)),G=d?d.createHTML(""):"",e=i,s=e.implementation,K=e.createNodeIterator,j=e.getElementsByTagName,z=e.createDocumentFragment,X=l.importNode,o={},p=(c.isSupported=s&&void 0!==s.createHTMLDocument&&9!==i.documentMode,ze),g=Xe,$=$e,Y=Ye,q=Je,J=Qe,r=qe,h=null,Q=fe({},[].concat(ke(Re),ke(Pe),ke(Le),ke(Me),ke(Fe))),_=null,Z=fe({},[].concat(ke(Ue),ke(He),ke(Ve),ke(We))),m=null,f=null,ee=!0,y=!0,te=!1,k=!1,b=!1,v=!1,T=!1,E=!1,S=!1,C=!1,ne=!1,x=!1,oe=!0,B=!0,A=!1,I={},re=fe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),ie=fe({},["audio","video","img","source","image"]),D=null,se=fe({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),N=null,ae=i.createElement("form"),le=function(e){N&&N===e||(e&&"object"===(void 0===e?"undefined":Ge(e))||(e={}),h="ALLOWED_TAGS"in e?fe({},e.ALLOWED_TAGS):Q,_="ALLOWED_ATTR"in e?fe({},e.ALLOWED_ATTR):Z,D="ADD_URI_SAFE_ATTR"in e?fe(ye(se),e.ADD_URI_SAFE_ATTR):se,m="FORBID_TAGS"in e?fe({},e.FORBID_TAGS):{},f="FORBID_ATTR"in e?fe({},e.FORBID_ATTR):{},I="USE_PROFILES"in e&&e.USE_PROFILES,ee=!1!==e.ALLOW_ARIA_ATTR,y=!1!==e.ALLOW_DATA_ATTR,te=e.ALLOW_UNKNOWN_PROTOCOLS||!1,k=e.SAFE_FOR_JQUERY||!1,b=e.SAFE_FOR_TEMPLATES||!1,v=e.WHOLE_DOCUMENT||!1,S=e.RETURN_DOM||!1,C=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_DOM_IMPORT||!1,x=e.RETURN_TRUSTED_TYPE||!1,E=e.FORCE_BODY||!1,oe=!1!==e.SANITIZE_DOM,B=!1!==e.KEEP_CONTENT,A=e.IN_PLACE||!1,r=e.ALLOWED_URI_REGEXP||r,b&&(y=!1),C&&(S=!0),I&&(h=fe({},[].concat(ke(Fe))),_=[],!0===I.html&&(fe(h,Re),fe(_,Ue)),!0===I.svg&&(fe(h,Pe),fe(_,He),fe(_,We)),!0===I.svgFilters&&(fe(h,Le),fe(_,He),fe(_,We)),!0===I.mathMl)&&(fe(h,Me),fe(_,Ve),fe(_,We)),e.ADD_TAGS&&fe(h=h===Q?ye(h):h,e.ADD_TAGS),e.ADD_ATTR&&fe(_=_===Z?ye(_):_,e.ADD_ATTR),e.ADD_URI_SAFE_ATTR&&fe(D,e.ADD_URI_SAFE_ATTR),B&&(h["#text"]=!0),v&&fe(h,["html","head","body"]),h.table&&(fe(h,["tbody"]),delete m.tbody),ve&&ve(e),N=e)},ce=function(t){xe(c.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.outerHTML=G}},w=function(e,t){try{xe(c.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){xe(c.removed,{attribute:null,from:t})}t.removeAttribute(e)},O=function(e){var t,n=void 0,o=void 0,r=(E?e="<remove></remove>"+e:o=(r=Ie(e,/^[\s]+/))&&r[0],d?d.createHTML(e):e);if(L)try{n=(new W).parseFromString(r,"text/html")}catch(e){}return M&&fe(m,["title"]),n&&n.documentElement||((t=(n=s.createHTMLDocument("")).body).parentNode.removeChild(t.parentNode.firstElementChild),t.outerHTML=r),e&&o&&n.body.insertBefore(i.createTextNode(o),n.body.childNodes[0]||null),j.call(n,v?"html":"body")[0]};if(c.isSupported){try{O('<svg><p><textarea><img src="</textarea><img src=x abc=1//">').querySelector("svg img")&&(L=!0)}catch(e){}try{var ue=O("<x/><title>&lt;/title&gt;&lt;img&gt;");we(/<\/title/,ue.querySelector("title").innerHTML)&&(M=!0)}catch(ue){}}var de=function(e){return K.call(e.ownerDocument||e,e,t.SHOW_ELEMENT|t.SHOW_COMMENT|t.SHOW_TEXT,function(){return t.FILTER_ACCEPT},!1)},pe=function(e){return"object"===(void 0===u?"undefined":Ge(u))?e instanceof u:e&&"object"===(void 0===e?"undefined":Ge(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},R=function(e,t,n){o[e]&&Te(o[e],function(e){e.call(c,t,n,N)})},ge=function(e){var t;if(R("beforeSanitizeElements",e,null),(n=e)instanceof H||n instanceof V||"string"==typeof n.nodeName&&"string"==typeof n.textContent&&"function"==typeof n.removeChild&&n.attributes instanceof U&&"function"==typeof n.removeAttribute&&"function"==typeof n.setAttribute&&"string"==typeof n.namespaceURI){var n=Ae(e.nodeName);if(R("uponSanitizeElement",e,{tagName:n,allowedTags:h}),"svg"!==n&&"math"!==n||0===e.querySelectorAll("p, br").length){if(h[n]&&!m[n])return"noscript"===n&&we(/<\/noscript/i,e.innerHTML)||"noembed"===n&&we(/<\/noembed/i,e.innerHTML)?(ce(e),!0):(!k||e.firstElementChild||e.content&&e.content.firstElementChild||!we(/</g,e.textContent)||(xe(c.removed,{element:e.cloneNode()}),e.innerHTML?e.innerHTML=De(e.innerHTML,/</g,"&lt;"):e.innerHTML=De(e.textContent,/</g,"&lt;")),b&&3===e.nodeType&&(t=e.textContent,t=De(t,p," "),t=De(t,g," "),e.textContent!==t)&&(xe(c.removed,{element:e.cloneNode()}),e.textContent=t),R("afterSanitizeElements",e,null),!1);if(B&&!re[n]&&"function"==typeof e.insertAdjacentHTML)try{var o=e.innerHTML;e.insertAdjacentHTML("AfterEnd",d?d.createHTML(o):o)}catch(e){}}}return ce(e),!0},he=function(e,t,n){if(oe&&("id"===t||"name"===t)&&(n in i||n in ae))return!1;if(!(y&&we($,t)||ee&&we(Y,t))){if(!_[t]||f[t])return!1;if(!D[t]&&!we(r,De(n,J,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Ne(n,"data:")||!ie[e])&&(!te||we(q,De(n,J,"")))&&n)return!1}return!0},_e=function(e){var t=void 0,n=void 0,o=(R("beforeSanitizeAttributes",e,null),e.attributes);if(o){for(var r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_},n=o.length;n--;){a=o[n];var i=a.name,s=a.namespaceURI,t=Ke(a.value),a=Ae(i);if(r.attrName=a,r.attrValue=t,r.keepAttr=!0,r.forceKeepAttr=void 0,R("uponSanitizeAttribute",e,r),t=r.attrValue,!r.forceKeepAttr){if("name"===a&&"IMG"===e.nodeName&&o.id)l=o.id,o=Be(o,[]),w("id",e),w(i,e),Ee(o,l)>n&&e.setAttribute("id",l.value);else{if("INPUT"===e.nodeName&&"type"===a&&"file"===t&&r.keepAttr&&(_[a]||!f[a]))continue;"id"===i&&e.setAttribute(i,""),w(i,e)}if(r.keepAttr)if(k&&we(/\/>/i,t))w(i,e);else if(we(/svg|math/i,e.namespaceURI)&&we(je("</("+Se(be(re),"|")+")","i"),t))w(i,e);else{b&&(t=De(t,p," "),t=De(t,g," "));var l=e.nodeName.toLowerCase();if(he(l,a,t))try{s?e.setAttributeNS(s,i,t):e.setAttribute(i,t),Ce(c.removed)}catch(e){}}}}R("afterSanitizeAttributes",e,null)}},me=function e(t){var n,o=de(t);for(R("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)R("uponSanitizeShadowNode",n,null),ge(n)||(n.content instanceof F&&e(n.content),_e(n));R("afterSanitizeShadowDOM",t,null)};c.sanitize=function(e,t){var n,o=void 0,r=void 0,i=void 0;if("string"!=typeof(e=e||"\x3c!--\x3e")&&!pe(e)){if("function"!=typeof e.toString)throw Oe("toString is not a function");if("string"!=typeof(e=e.toString()))throw Oe("dirty is not a string, aborting")}if(!c.isSupported){if("object"===Ge(a.toStaticHTML)||"function"==typeof a.toStaticHTML){if("string"==typeof e)return a.toStaticHTML(e);if(pe(e))return a.toStaticHTML(e.outerHTML)}return e}if(T||le(t),c.removed=[],!(A="string"==typeof e?!1:A))if(e instanceof u)1===(t=(o=O("\x3c!--\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===t.nodeName||"HTML"===t.nodeName?o=t:o.appendChild(t);else{if(!S&&!b&&!v&&x&&-1===e.indexOf("<"))return d?d.createHTML(e):e;if(!(o=O(e)))return S?null:G}o&&E&&ce(o.firstChild);for(var s=de(A?e:o);n=s.nextNode();)3===n.nodeType&&n===r||ge(n)||(n.content instanceof F&&me(n.content),_e(n),r=n);if(r=null,A)return e;if(S){if(C)for(i=z.call(o.ownerDocument);o.firstChild;)i.appendChild(o.firstChild);else i=o;return i=ne?X.call(l,i,!0):i}t=v?o.outerHTML:o.innerHTML;return b&&(t=De(t,p," "),t=De(t,g," ")),d&&x?d.createHTML(t):t},c.setConfig=function(e){le(e),T=!0},c.clearConfig=function(){N=null,T=!1},c.isValidAttribute=function(e,t,n){N||le({});e=Ae(e),t=Ae(t);return he(e,t,n)},c.addHook=function(e,t){"function"==typeof t&&(o[e]=o[e]||[],xe(o[e],t))},c.removeHook=function(e){o[e]&&Ce(o[e])},c.removeHooks=function(e){o[e]&&(o[e]=[])},c.removeAllHooks=function(){o={}}}else c.isSupported=!1;return c}()}),pxt=pxt||{},function(i){{var e=i.analytics||(i.analytics={});const s={},a={};let t=!1;e.addDefaultProperties=function(t){Object.keys(t).forEach(e=>{"string"==typeof t[e]?s[e]=t[e]:a[e]=t[e]})},e.enable=function(){if(i.aiTrackException&&i.aiTrackEvent&&!t){t=!0,i.debug("setting up app insights");const o=i.tickEvent,r=(i.tickEvent=function(e,t,n){if(o&&o(e,t,n),null!=n&&n.interactiveConsent&&i.setInteractiveConsent(!0),t){const o=Object.assign({},s)||{},n=Object.assign({},a)||{};Object.keys(t).forEach(e=>{"string"==typeof t[e]?o[e]=t[e]:"number"==typeof t[e]?n[e]=t[e]:o[e]=JSON.stringify(t[e]||"")}),i.aiTrackEvent(e,o,n)}else i.aiTrackEvent(e)},i.reportException),e=(i.reportException=function(e,t){r&&r(e,t);var n={target:i.appTarget.id,version:i.appTarget.versions.target};t&&i.Util.jsonMergeFrom(n,t),i.aiTrackException(e,"exception",n)},i.reportError);i.reportError=function(t,n,o){e&&e(t,n,o);try{throw n}catch(e){t={target:i.appTarget.id,version:i.appTarget.versions.target,category:t,message:n};o&&i.Util.jsonMergeFrom(t,o),i.aiTrackException(e,"error",t)}}}}}}(pxt=pxt||{}),pxt=pxt||{},function(e){{e=e.AudioContextManager||(e.AudioContextManager={});let n,o,r,i=0,s=!1;function t(){n&&(r.gain.setTargetAtTime(0,n.currentTime,.015),i=0)}e.mute=function(e){n&&(s=e,t(),e)&&o&&(o.disconnect(),r.disconnect(),o=void 0,r=void 0)},e.stop=t,e.frequency=function(){return i},e.tone=function(e){if(!(s||e<0)){i=e;var t=n=n||function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)try{return new window.AudioContext}catch(e){}}();if(t)try{o||((o=t.createOscillator()).type="triangle",(r=t.createGain()).gain.value=0,r.connect(t.destination),o.connect(r),o.start(0)),o.frequency.linearRampToValueAtTime(e,n.currentTime),r.gain.setTargetAtTime(.2,n.currentTime,.015)}catch(e){o=void 0}}}}}(pxt=pxt||{}),function(s){{var r=s.auth||(s.auth={});const l="auth",c="csrf-token",u="login-state",d="user-state";let e,t=!1,n=(r.DEFAULT_USER_PREFERENCES=()=>({highContrast:!1,language:s.appTarget.appTheme.defaultLocale,reader:"",skillmap:{mapProgress:{},completedTags:{}}}),r.client=function(){return e},0),o=0;r.AuthClient=class{constructor(){this.initialUserPreferences_=void 0,this.initialAuthCheck_=void 0,s.Util.assert(!e),e=this}async initAsync(){try{this.state$=await s.storage.shared.getAsync(l,d)}catch(e){}this.state$||(this.state$={}),this.setUserProfileAsync(this.state$.profile),this.setUserPreferencesAsync(this.state$.preferences)}async loginAsync(e,t,n){var o,r;a()&&(o=e,0<i().filter(e=>e.id===o).length)&&(n=null!=n?n:p,(r=this.getState()).profile||await this.authCheckAsync(),(null==(r=r.profile)?void 0:r.idp)===e?s.debug(`loginAsync: Already signed into ${e}.`):(this.clearState(),r={key:(Math.PI*Math.random()).toString(36).slice(2),callbackState:n,callbackPathname:window.location.pathname,idp:e},await s.storage.shared.setAsync(l,u,r),n=s.Util.stringifyQueryString("/api/auth/login",{response_type:"token",provider:e,persistent:t,redirect_uri:""+window.location.origin+window.location.pathname+"?authcallback=1&state="+r.key}),(t=await this.apiAsync(n)).success?(s.tickEvent("auth.login.start",{provider:e}),window.location.href=t.resp.loginUrl):await this.onSignInFailed()))}async logoutAsync(e){a()&&(s.tickEvent("auth.logout"),await this.apiAsync("/api/auth/logout"),await s.storage.shared.delAsync(l,c),this.clearState(),e=e?e.startsWith("#")?e:"#"+e:"",s.BrowserUtils.hasWindow())&&(window.location.href=""+window.location.origin+window.location.pathname+e,location.reload())}async deleteProfileAsync(){var e;if(await this.loggedInAsync()){var t=null==(e=this.getState().profile)?void 0:e.id,n=await this.apiAsync("/api/user",null,"DELETE");if(n.err)await this.onApiError(n.err);else try{await s.storage.shared.delAsync(l,c);try{await this.onProfileDeleted(t)}catch(e){s.tickEvent("auth.profile.cloudToLocalFailed")}this.clearState()}finally{s.tickEvent("auth.profile.deleted")}}}async initialUserPreferencesAsync(){if(await this.loggedInAsync())return this.initialUserPreferences_||(this.initialUserPreferences_=this.fetchUserPreferencesAsync()),this.initialUserPreferences_}async userProfileAsync(){var e;if(await this.loggedInAsync())return e=this.getState(),Object.assign({},e.profile)}async userPreferencesAsync(){var e=this.getState();return Object.assign({},e.preferences)}async authCheckAsync(){var e,t;if(a()&&await s.storage.shared.getAsync(l,c))return null!=(e=(t=this.getState()).profile)&&e.id?this.initialAuthCheck_||(this.initialAuthCheck_=Promise.resolve(t.profile)):this.initialAuthCheck_||(this.initialAuthCheck_=this.fetchUserAsync()),this.initialAuthCheck_}async loggedInAsync(){return await this.authCheckAsync(),this.hasUserId()}async updateUserProfileAsync(e){var t;return!!await this.loggedInAsync()&&(t=this.getState(),(t=await this.apiAsync("/api/user/profile",{id:t.profile.id,username:e.username,avatarUrl:e.avatarUrl})).success&&await this.setUserProfileAsync(t.resp),t.success)}async patchUserPreferencesAsync(t){var e;(t=Array.isArray(t)?t:[t]).length&&(e=await this.userPreferencesAsync(),ts.pxtc.jsonPatch.patchInPlace(e,t),await this.setUserPreferencesAsync(e),await this.loggedInAsync())&&(clearTimeout(n),e=async()=>{o=0;var e=await this.apiAsync("/api/user/preferences",t,"PATCH");e.success?(s.debug("Updating local user preferences w/ cloud data after result of POST"),this.setUserPreferencesAsync(e.resp)):s.reportError("identity","update preferences failed",e)},o=o||s.U.now(),3e4<s.U.now()-o?await e():n=setTimeout(e,5e3))}hasUserId(){var e;return!!a()&&!(null==(e=this.getState().profile)||!e.id)}async fetchUserAsync(){var e;if(a()){var t=this.getState();if(null!=(e=t.profile)&&e.id)return t.profile;t=await this.apiAsync("/api/user/profile");if(t.success){const e=t.resp;return await this.setUserProfileAsync(e),e}}}async setUserProfileAsync(e){var t=this.hasUserId(),e=(this.transformUserProfile(e),this.hasUserId());this.onUserProfileChanged(),e&&!t?await this.onSignedIn():!e&&t&&await this.onSignedOut()}async setUserPreferencesAsync(e){var t=null!=(t=this.getState().preferences)?t:r.DEFAULT_USER_PREFERENCES(),n=ts.pxtc.jsonPatch.diff(t,e);this.transformUserPreferences(Object.assign(Object.assign({},t),e)),await this.onUserPreferencesChanged(n)}async fetchUserPreferencesAsync(){var e,t;if(await this.loggedInAsync())return e=this.getState(),(t=await this.apiAsync("/api/user/preferences")).success&&t.resp?(this.setUserPreferencesAsync(t.resp),e.preferences):void 0}transformUserProfile(e){this.state$=Object.assign(Object.assign({},this.state$),{profile:Object.assign({},e)}),this.saveState()}transformUserPreferences(e){this.state$=Object.assign(Object.assign({},this.state$),{preferences:Object.assign({},e)}),this.saveState()}getState(){return this.state$}saveState(){s.storage.shared.setAsync(l,d,this.state$).then(()=>{})}clearState(){this.state$={},s.storage.shared.delAsync(l,d).then(()=>this.onStateCleared())}async apiAsync(t,e,n){var o={},r=await s.storage.shared.getAsync(l,c);return r&&(o.authorization="mkcd "+r),o["x-pxt-target"]=null==(r=s.appTarget)?void 0:r.id,t=s.BrowserUtils.isLocalHostDev()?"https://staging.pxt.io"+t:t,s.Util.requestAsync({url:t,headers:o,data:e,method:n||(e?"POST":"GET"),withCredentials:!0}).then(e=>({statusCode:e.statusCode,resp:e.json,success:2===Math.floor(e.statusCode/100),err:null})).catch(async e=>(/logout/.test(t)||401!=e.statusCode||await this.logoutAsync(),{statusCode:e.statusCode,err:e,resp:null,success:!1}))}};const p={hash:"",params:{}};function i(){var e;return Object.keys((null==(e=null==(e=s.appTarget)?void 0:e.cloud)?void 0:e.cloudProviders)||{}).map(e=>s.appTarget.cloud.cloudProviders[e]).filter(e=>e.identity).sort((e,t)=>e.order-t.order)}function a(){return!t&&!s.BrowserUtils.isPxtElectron()&&0<i().length}r.loginCallbackAsync=async function(e){let t,n=Object.assign({},p);do{if(!(t=await s.storage.shared.getAsync(l,u)))return void s.debug("Auth state not found in storge.");await s.storage.shared.delAsync(l,u);const o=e.state;if(!o||t.key!==o)return void s.debug("Failed to get auth state for key");n=Object.assign(Object.assign({},p),t.callbackState);const r=e.error;if(r){const l=e.error_description;s.tickEvent("auth.login.error",{error:r,provider:t.idp}),s.log(`Auth failed: ${r}:`+l),n=Object.assign({},p);break}const i=e.token;if(!i){s.debug("Missing authToken in auth callback.");break}await s.storage.shared.setAsync(l,c,i),s.tickEvent("auth.login.success",{provider:t.idp})}while(0);const o=n.hash.startsWith("#")?n.hash:"#"+n.hash,r=s.Util.stringifyQueryString("",n.params),i=""+(t.callbackPathname.startsWith("/")?t.callbackPathname:"/"+t.callbackPathname)+o+r;window.location.href=i},r.identityProviders=i,r.identityProvider=function(t){return i().filter(e=>e.id===t).shift()},r.hasIdentity=a,r.enableAuth=function(e=!0){t=!e},r.userName=function(e){var t;return null!=(e=null!=(t=null==(t=null==e?void 0:e.idp)?void 0:t.displayName)?t:null==(t=null==e?void 0:e.idp)?void 0:t.username)?e:"??"},r.userInitials=function(e){e=s.auth.userName(e);return ts.pxtc.Util.initials(e)},r.generateUserProfilePicDataUrl=function(e){var t,n;if(null!=(n=null==(t=null==e?void 0:e.idp)?void 0:t.picture)&&n.encoded){const t=window.URL||window.webkitURL;try{const n=s.Util.stringToUint8Array(atob(e.idp.picture.encoded)),o=new Blob([n],{type:e.idp.picture.mimeType});e.idp.picture.dataUrl=t.createObjectURL(o)}catch(e){}}}}}(pxt=pxt||{}),(pxt||(pxt={})).tickEvent=function(e){},function(e){(e.pxtc||(e.pxtc={})).__dummy=42}(ts=ts||{}),ts.pxtc),ts,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,ts,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,ts,pxt,pxt,pxt,pxt,ts,pxt,ts,pxtmelody,pxtmelody,pxtmelody,pxt,pxt,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,pxt,pxt,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,pxt,pxt,pxt,pxt,pxt,pxt,pxt;!function(r){r=r.pxtc||(r.pxtc={});{var a=r.Util||(r.Util={});function i(e){return e.replace(/[^\w .!?\-$]/g,e=>{e=e.charCodeAt(0).toString(16);return"\\u"+"0000".substr(0,4-e.length)+e})}a.assert=function(e,t="Assertion failed"){if(!e)throw new Error(t)},a.flatClone=function(t){if(null==t)return null;let n={};return Object.keys(t).forEach(e=>{n[e]=t[e]}),n},a.clone=function(e){return null==e?null:JSON.parse(JSON.stringify(e))},a.htmlEscape=function(e){return e&&e.replace(/([^\w .!?\-$])/g,e=>"&#"+e.charCodeAt(0)+";")},a.htmlUnescape=function(e){return e&&e.replace(/(&#\d+;)/g,e=>String.fromCharCode(Number(e.substr(2,e.length-3))))},a.jsStringQuote=i,a.jsStringLiteral=function(e){return'"'+i(e)+'"'},a.initials=function(e){return(/^\w+@/.test(e)?e.match(/^\w\w/).shift():((e=e.match(/\b\w/g)||[]).shift()||"")+(e.pop()||"")).toUpperCase()};let t="en",n={},e={},o=!1;function s(){return t}function l(e){var t=/^(\w{2})-(\w{2}$)/i.exec(e);return t&&t[1]&&t[2]?[t[1].toLowerCase()+"-"+t[2].toUpperCase(),t[1].toLowerCase(),t[1].toLowerCase()+"-"+t[2].toLowerCase()]:[(e||"en").toLowerCase()]}function c(e,o){return 0==o.length?e:e.replace(/\{([0-9]+)(\:[^\}]+)?\}/g,function(e,t,n){let r=o[parseInt(t)],i="",s=/^:f(\d*)\.(\d+)/.exec(n);if(s){let e=parseInt(s[2]),t=parseInt(s[1])||0,n=/^0/.test(s[1])?"0":" ",o=r.toFixed(e);if(0<t&&0<e&&(t+=e+1),0<t)for(;o.length<t;)o=n+o;i=o}else i=":x"==n?"0x"+r.toString(16):void 0===r?"(undef)":null===r?"(null)":r.toString?r.toString():r+"";return":a"==n?/^\s*[euioah]/.test(i.toLowerCase())?i="an "+i:/^\s*[bcdfgjklmnpqrstvwxz]/.test(i.toLowerCase())&&(i="a "+i):":s"==n?i=1==r?"":"s":":q"==n?i=a.htmlEscape(i):":jq"==n?i=a.jsStringQuote(i):":uri"==n?i=encodeURIComponent(i).replace(/'/g,"%27").replace(/"/g,"%22"):":url"==n?i=encodeURI(i).replace(/'/g,"%27").replace(/"/g,"%22"):":%"==n&&(i=(100*r).toFixed(1).toString()+"%"),i})}a.enableLiveLocalizationUpdates=function(){o=!0},a.liveLocalizationEnabled=function(){return o},a.localeInfo=function(){return(o?"live-":"")+t},a.userLanguage=s,a.normalizeLanguageCode=l,a.setUserLanguage=function(e){t=l(e)[0]},a.isUserLanguageRtl=function(){return/^ar|dv|fa|ha|he|ks|ku|ps|ur|yi/i.test(t)},a.TRANSLATION_LOCALE="pxt",a.isTranslationMode=function(){return t==a.TRANSLATION_LOCALE},a._localize=function(e){return n[e]||e},a.getLocalizedStrings=function(){return n},a.setLocalizedStrings=function(e){n=e},a.translationsCache=function(){return e},a.fmt_va=c,a.fmt=function(e,...t){return c(e,t)};const d={};function u(e,t){if(!e)return e;d[e]=(d[e]||0)+1;let n=a._localize(e);return c(n=n.replace(/^\{(id|loc):[^\}]+\}/g,""),t)}a.dumpLocStats=function(){const t={};Object.keys(d).sort((e,t)=>d[t]-d[e]).forEach(e=>t[e]=e),console.log("prioritized list of strings:"),console.log(JSON.stringify(t,null,2))},a.lf_va=u,a.lf=function(e,...t){return u(e,t)},a.rlf=function(e,...t){return u(e,t)},a.lookup=function(e,t){return e.hasOwnProperty(t)?e[t]:null},a.isoTime=function(e){e=new Date(1e3*e);return a.fmt("{0}-{1:f02.0}-{2:f02.0} {3:f02.0}:{4:f02.0}:{5:f02.0}",e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())},a.userError=function(e){e=new Error(e);throw e.isUserError=!0,e},a.deq=function t(n,o){if(n!==o){if(!n||!o)return"Null value";if("object"!=typeof n||"object"!=typeof o)return"Unable to compare "+n+", "+o;if(Array.isArray(n)){if(!Array.isArray(o))return"Expected array";if(n.length!=o.length)return"Expected array of length "+n.length+", got "+o.length;for(let e=0;e<n.length;e++)if(null!=t(n[e],o[e]))return"Expected array value "+n[e]+" got "+o[e]}else{var r=Object.keys(n),e=Object.keys(n);if(r.length!=e.length)return"Expected "+r.length+" keys, got "+e.length;for(let e=0;e<r.length;e++){if(!Object.prototype.hasOwnProperty.call(o,r[e]))return"Missing key "+r[e];if(null!=t(n[r[e]],o[r[e]]))return"Expected value of "+r[e]+" to be "+n[r[e]]+", got "+o[r[e]]}}}return null}}}(ts=ts||{});const lf=ts.pxtc.Util.lf;!function(e){(e=e.pxtc||(e.pxtc={})).decodeBase64=function(e){return atob(e)},e.encodeBase64=function(e){return btoa(e)}}(ts=ts||{}),function(l){var p=l.pxtc||(l.pxtc={});{var e,h=p.Util||(p.Util={});function o(t,n){if(n)for(let e=0;e<n.length;++e)t.push(n[e])}function t(t){var n=[];for(let e=0;e<t.length;++e)o(n,t[e]);return n}function r(e){return e&&"object"==typeof e&&!Array.isArray(e)}function s(t,n,o,r,i){void 0===r&&(r=0),void 0===i&&(i=o.length-r);for(let e=0;e<i;++e)t[n+e]=o[r+e]}function i(e,t){return e==t?0:e<t?-1:1}h.CancellationToken=class{constructor(){this.pending=!1,this.cancelled=!1}startOperation(){this.pending=!0}isRunning(){return this.pending}onProgress(e){this.progressHandler=e}reportProgress(e,t){this.progressHandler&&this.progressHandler(e,t)}cancel(){this.cancelled=!0,this.pending=!1}cancelAsync(){return this.cancelled||!this.pending?(this.cancelled=!0,this.pending=!1,Promise.resolve()):(this.cancelled=!0,this.deferred=new Promise(e=>{this.resolve=e}),this.deferred)}isCancelled(){return this.cancelled}throwIfCancelled(){if(this.isCancelled())throw new Error}resolveCancel(){this.pending=!1,this.deferred&&(this.resolve(),this.deferred=void 0,this.resolve=void 0)}},h.codalHash16=function(e){const r=[251,175,119,215,81,14,79,191,103,49,181,143,186,157,0,232,31,32,55,60,152,58,17,237,174,70,160,144,220,90,57,223,59,3,18,140,111,166,203,196,134,243,124,95,222,179,197,65,180,48,36,15,107,46,233,130,165,30,123,161,209,23,97,16,40,91,219,61,100,10,210,109,250,127,22,138,29,108,244,67,207,9,178,204,74,98,126,249,167,116,34,77,193,200,121,5,20,113,71,35,128,13,182,94,25,226,227,199,75,27,41,245,230,224,43,225,177,26,155,150,212,142,218,115,241,73,88,105,39,114,62,255,192,201,145,214,168,158,221,148,154,122,12,84,82,163,44,139,228,236,205,242,217,11,187,146,159,64,86,239,195,42,106,198,118,112,184,172,87,2,173,117,176,229,247,253,137,185,99,164,102,147,45,66,231,52,141,211,194,206,246,238,56,110,78,248,63,240,189,93,92,51,53,183,19,171,72,50,33,104,101,69,8,252,83,120,76,135,85,54,202,125,188,213,96,235,136,208,162,129,190,132,156,38,47,1,7,254,24,4,216,131,89,21,28,133,37,153,149,80,170,68,6,169,234,151];if(e){var n,o=e,i=new Uint8Array(o.length);for(let e=0;e<o.length;++e){const s=o.charCodeAt(e);i[e]=255&s}let t=0;for(let e=0;e<2;++e)n=function(t){let n=0;for(let e=0;e<t.length;e++){var o=t[e];n=r[n^o]}return n}(i),t|=n<<8*e,i[0]=(i[0]+1)%255;return t}return 0},h.bufferSerial=function(t,n="",o="?",r=255){for(let e=0;e<n.length;++e){var i=n[e];t[o]=(t[o]||"")+i,("\n"===i||t[o].length>r)&&(i=t[o],t[o]="",window.postMessage({type:"serial",id:o,data:i},"*"))}},h.blobReadAsDataURL=function(o){return o?new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=e=>t(e),n.readAsDataURL(o)}):Promise.resolve(void 0)},h.fileReadAsBufferAsync=function(o){return o?new Promise((t,e)=>{let n=new FileReader;n.onerror=e=>t(null),n.onload=e=>t(new Uint8Array(n.result)),n.readAsArrayBuffer(o)}):Promise.resolve(null)},h.fileReadAsTextAsync=function(o){return o?new Promise((t,e)=>{let n=new FileReader;n.onerror=e=>t(null),n.onload=e=>t(n.result),n.readAsText(o)}):Promise.resolve(null)},h.repeatMap=function(t,n){t=t||0;var o=[];for(let e=0;e<t;++e)o.push(n(e));return o},h.listsEqual=function(t,n){if(!t||!n||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0},h.oops=function(e="OOPS"){throw new Error(e)},h.reversed=function(e){return(e=e.slice(0)).reverse(),e},h.iterMap=function(t,n){Object.keys(t).forEach(e=>n(e,t[e]))},h.mapMap=function(t,n){let o={};return Object.keys(t).forEach(e=>o[e]=n(e,t[e])),o},h.values=function(t){return Object.keys(t||{}).map(e=>t[e])},h.pushRange=o,h.concatArrayLike=t,h.concat=t,h.memcpy=s,h.uint8ArrayConcat=function(e){let t=0;for(var n of e)t+=n.length;let o=new Uint8Array(t),r=0;for(var i of e)s(o,r,i),r+=i.length;return o},h.jsonTryParse=function(e){try{return JSON.parse(e)}catch(e){}},h.jsonMergeFrom=function t(n,o){o&&Object.keys(o).forEach(e=>{r(n[e])&&r(o[e])?t(n[e],o[e]):n[e]=h.clone(o[e])})},h.jsonCopyFrom=function(e,t){var n,o=h.clone(t);for(n of Object.keys(t))e[n]=o[n]},h.jsonFlatten=function(e){let o={},r=(e,t)=>{if(null!==t&&"object"==typeof t){h.assert(!Array.isArray(t)),e&&(e+=".");for(var n of Object.keys(t))r(e+n,t[n])}else o[e]=t};return r("",e),o},h.jsonUnFlatten=function(o){var r,e={};for(r of Object.keys(o)){let t=e,n=r.split(".");for(let e=0;e<n.length;++e){var i=n[e];e==n.length-1?t[i]=o[r]:("object"!=typeof t[i]&&(t[i]={}),t=t[i])}}return e},h.strcmp=i,h.stringMapEq=function(e,t){var n,o=Object.keys(e),r=Object.keys(t);if(o.length!=r.length)return!1;for(n of o){if(!t.hasOwnProperty(n))return!1;if(e[n]!==t[n])return!1}return!0},h.endsWith=function(e,t){return!(e.length<t.length||0!=t.length&&e.slice(-t.length)!=t)},h.startsWith=function(e,t){return!(e.length<t.length||0!=t.length&&e.slice(0,t.length)!=t)},h.contains=function(e,t){return!(e.length<t.length)&&(0==t.length||-1<e.indexOf(t))},h.replaceAll=function(e,t,n){return t?e.split(t).join(n):e},h.snakify=function(n){const o=n.toUpperCase(),t=n.toLowerCase();if(n==o||n==t)return n;if(0<n.lastIndexOf("_"))return n;var r,i=e=>n[e]!=t[e];let s="",a=0;for(;a<n.length;){let e=i(a),t=a;for(;t<n.length;){if(e&&(r=t,n[r]!=o[r])){if(2<t-a){t--;break}e=!1}if(!e&&i(t))break;t++}s&&(s+="_"),s+=n.slice(a,t),a=t}return s.toUpperCase()===s?s:s.toLowerCase()},h.sortObjectFields=function(t){var e=Object.keys(t);e.sort(i);let n={};return e.forEach(e=>n[e]=t[e]),n},h.chopArray=function(t,n){var o=[];for(let e=0;e<t.length;e+=n)o.push(t.slice(e,e+n));return o},h.unique=function(e,n){let o=[],r={};return e.forEach(e=>{var t=n(e);r.hasOwnProperty(t)||(r[t]=null,o.push(e))}),o},h.groupBy=function(e,n){let o={};return e.forEach(e=>{var t=n(e);o.hasOwnProperty(t)||(o[t]=[]),o[t].push(e)}),o},h.toDictionary=function(e,t){let n={};return e.forEach(e=>{n[t(e)]=e}),n},h.toSet=function(e,t){let n={};return e.forEach(e=>{n[t(e)]=!0}),n},h.toArray=function(t){if(Array.isArray(t))return t;var n=[];if(t)for(let e=0;e<t.length;++e)n.push(t[e]);return n},h.indexOfMatching=function(t,n){for(let e=0;e<t.length;++e)if(n(t[e]))return e;return-1};const S=Promise.resolve();async function n(t,n,o){let r=0;const i=[],s=[];for(let e=0;e<t;e++){const t=(async()=>{for(;r<n.length;){var e=r++,t=n[e];s[e]=await o(t)}})();i.push(t)}try{await Promise.all(i)}catch(t){throw r=n.length,t}return s}function a(n,o){const r={};return e=>{var t=n(e);return r.hasOwnProperty(t)?r[t]:r[t]=o(e)}}function c(e){return e=e&&e.replace(/\\/g,"/")}function u(n){return h.httpRequestCoreAsync(n).then(e=>{const t=e.statusCode;if((n.successCodes||[304,200,201,202]).indexOf(t)<0&&!n.allowHttpErrors){const p=h.lf("Bad HTTP status code: {0} at {1}; message: {2}",e.statusCode,n.url,(e.text||"").slice(0,500)),t=new Error(p);return t.statusCode=e.statusCode,Promise.reject(t)}return e.text&&/application\/json/.test(e.headers["content-type"])&&(e.json=p.U.jsonTryParse(e.text)),e})}function g(n,o){let r="";if(n)for(let t=0;t<n.length;++t){let e=n.charCodeAt(t);var i;e<=127?r+=n.charAt(t):e<=2047?r+=String.fromCharCode(192|e>>6,128|63&e):(!o&&55296<=e&&e<=56319&&(i=n.charCodeAt(++t),isNaN(i)||(e=65536+(e-55296<<10)+(i-56320))),r+=e<=65535?String.fromCharCode(224|e>>12,128|e>>6&63,128|63&e):String.fromCharCode(240|e>>18,128|e>>12&63,128|e>>6&63,128|63&e))}return r}function _(){return Date.now()}function m(){var e=new Uint8Array(4);return h.getRandomBuf(e),new Uint32Array(e.buffer)[0]}function f(r,i,s,a){function t(n){pxt.debug(`downloading translations for ${r} ${i} `+(s||""));let e=pxt.BrowserUtils.isLocalHost()||pxt.webConfig.isStatic?"https://makecode.com/api/":"",t=e+`translations?lang=${encodeURIComponent(r)}&filename=${encodeURIComponent(i)}&approved=true`;s&&(t+="&branch="+encodeURIComponent(s));var o={};return a&&!pxt.Cloud.useCdnApi()&&(o["If-None-Match"]=a),(e?u:pxt.Cloud.apiRequestWithCdnAsync)({url:t,headers:o}).then(t=>304==t.statusCode||200==t.statusCode?(a=t.headers.etag||"",pxt.BrowserUtils.translationDbAsync().then(e=>e.setAsync(r,i,s,a,t.json||n)).then(()=>t.json||n)):t.json,e=>{console.log("failed to load translations from "+t)})}return pxt.BrowserUtils.translationDbAsync().then(e=>e.getAsync(r,i,s)).then(e=>e?(a=e.etag,300<(Date.now()-e.time)/1e3&&t(e.strings),e.strings):t())}function y(e){var[e,t]=h.normalizeLanguageCode(e),n=pxt.appTarget.appTheme;if(n&&n.availableLocales){if(-1<n.availableLocales.indexOf(e))return!0;if(t&&-1<n.availableLocales.indexOf(t))return!0}return!1}h.nextTick=function(e){S.then(e)},h.delay=async function(t,e){e=await e;return await new Promise(e=>setTimeout(()=>e(),t)),e},h.promiseMapAll=function(e,t){return Promise.all(e.map(e=>t(e)))},h.promiseMapAllSeries=function(e,t){return n(1,e,t)},h.promisePoolAsync=n,h.memoizeString=function(e){return a(e=>e,e)},h.promiseTimeout=async function(n,e,o){let r,i;var t=new Promise((e,t)=>{i=e,r=setTimeout(()=>{i=void 0,clearTimeout(r),t(o||`Promise timed out after ${n}ms`)},n)});return Promise.race([e,t]).then(e=>(i&&(clearTimeout(r),i()),e))},h.defer=function(){let o,n,r,e=!1;return{resolve:function(t){e?pxt.debug("Deferred promise already resolved"):(n?n(t):o=o||new Promise(function(e){e(t)}),e=!0)},reject:function(n){e?pxt.debug("Deferred promise already resolved"):(r?r(n):o=o||new Promise(function(e,t){t(n)}),e=!0)},promise:new Promise(function(e,t){o?e(o):(n=e,r=t)})}},h.memoize=a,h.debounce=function(o,r,i){let s;return function(){let e=this,t=arguments,n=i&&!s;return clearTimeout(s),s=setTimeout(function(){s=null,i||o.apply(e,t)},r),n&&o.apply(e,t),s}},h.AdaptiveDebouncer=class{constructor(e,t=300,n=2e3,o=2){this.func=e,this.minDelay=t,this.maxDelay=n,this.slowdownFactor=o,this.lastPoke=0,this.recentGaps=[],this.wrapped=()=>{this.timeout=null,this.func()}}poke(){var e=Date.now();if(this.lastPoke){var t=e-this.lastPoke;if(t<10)return;for(t<4e3&&this.recentGaps.push(t);10<this.recentGaps.length;)this.recentGaps.shift()}this.lastPoke=e}trigger(){let e=this.maxDelay;var t;this.lastPoke&&((t=this.recentGaps.slice()).sort(),t=t[t.length>>1]||1,e=Math.min(Math.max(t*this.slowdownFactor|0,this.minDelay),this.maxDelay),(e-=Date.now()-this.lastPoke)<0&&(e=0),this.lastPoke=null),clearTimeout(this.timeout),this.timeout=setTimeout(this.wrapped,e)}},h.throttle=function(o,r,i){let s;return function(){let e=this,t=arguments,n=i&&!s;s=s||setTimeout(function(){s=null,i||o.apply(e,t)},r),n&&o.apply(e,t)}},h.randomPermute=function(t){for(let e=0;e<t.length;++e){var n=m()%t.length,o=t[e];t[e]=t[n],t[n]=o}},h.randomPick=function(e){return 0==e.length?null:e[m()%e.length]},h.timeSince=function(e){let t=(Date.now()-(e*=1e3))/1e3;return isNaN(t)?"":t<-30?(t=-t)<60?h.lf("in a few seconds"):t<120?h.lf("in a minute"):t<3600?h.lf("in {0} minute{0:s}",Math.floor(t/60)):t<7200?h.lf("in an hour"):t<86400?h.lf("in {0} hour{0:s}",Math.floor(t/60/60)):t<2592e3?h.lf("in {0} day{0:s}",Math.floor(t/60/60/24)):t<31536e3?h.lf("in {0} month{0:s}",Math.floor(t/60/60/24/30)):h.lf("in {0} year{0:s}",Math.floor(t/60/60/24/365)):t<0?h.lf("now"):t<10?h.lf("a few seconds ago"):t<60?h.lf("{0} second{0:s} ago",Math.floor(t)):t<120?h.lf("a minute ago"):t<3600?h.lf("{0} minute{0:s} ago",Math.floor(t/60)):t<7200?h.lf("an hour ago"):t<86400?h.lf("{0} hour{0:s} ago",Math.floor(t/60/60)):t<2592e3?h.lf("{0} day{0:s} ago",Math.floor(t/60/60/24)):t<31536e3?h.lf("{0} month{0:s} ago",Math.floor(t/60/60/24/30)):h.lf("{0} year{0:s} ago",Math.floor(t/60/60/24/365))},h.unicodeToChar=function(e){return e.replace(/\\u([\d\w]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))})},h.escapeForRegex=function(e){return null==e?void 0:e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},h.stripUrlProtocol=function(e){return null==e?void 0:e.replace(/.*?:\/\//g,"")},h.normalizePath=c,h.pathJoin=function(e,t){if(c(e),c(t),e||t)return e?t?("/"!==e.charAt(e.length-1)&&(e+="/"),e+(t="/"==t.charAt(0)?t.substring(1):t)):e:t},h.isNodeJS="undefined"==typeof window,h.requestAsync=u,h.httpGetTextAsync=function(e){return u({url:e}).then(e=>e.text)},h.httpGetJsonAsync=function(e){return u({url:e}).then(e=>e.json)},h.httpPostJsonAsync=function(e,t){return u({url:e,data:t||{}}).then(e=>e.json)},h.stringToUint8Array=function(t){var n=t.length,o=new Uint8Array(n);for(let e=0;e<n;++e)o[e]=255&t.charCodeAt(e);return o},h.uint8ArrayToString=function(t){let n=t.length,o="";for(let e=0;e<n;++e)o+=String.fromCharCode(t[e]);return o},h.fromUTF8=function(t){if(!t)return"";let n="";for(let e=0;e<t.length;++e){var o=255&t.charCodeAt(e);n+=37==o||127<o?"%"+o.toString(16):t.charAt(e)}return decodeURIComponent(n)},h.toUTF8=g,h.toHex=function(t){let n="";for(let e=0;e<t.length;++e)n+=("0"+t[e].toString(16)).slice(-2);return n},h.fromHex=function(t){var n=new Uint8Array(t.length>>1);for(let e=0;e<t.length;e+=2)n[e>>1]=parseInt(t.slice(e,e+2),16);return n},h.PromiseQueue=class{constructor(){this.promises={}}enqueue(o,r){return new Promise((e,t)=>{let n=this.promises[o];(n=n||(this.promises[o]=[])).push(()=>r().finally(()=>{n.shift(),0==n.length?delete this.promises[o]:n[0]()}).then(e,t)),1==n.length&&n[0]()})}};let d;function k(e,n,o,r,i,t,s){if(s=s||d.Editor,"en-US"===(o=h.normalizeLanguageCode(o)[0])||"en"===o)return Promise.resolve(void 0);let a,l,c=o+`/${t}/`+s;if(h.translationsCache()[c])return Promise.resolve(h.translationsCache()[c]);switch(s){case d.Editor:a=[{branch:r,staticName:"strings.json",path:"strings.json"},{branch:i,staticName:"target-strings.json",path:e+"/target-strings.json"}];break;case d.Sim:a=[{branch:i,staticName:"sim-strings.json",path:e+"/sim-strings.json"}];break;case d.Apis:a=[{branch:i,staticName:"bundled-strings.json",path:e+"/bundled-strings.json"}];break;case d.SkillMap:a=[{branch:i,staticName:"skillmap-strings.json",path:"/skillmap-strings.json"}]}function u(t){t&&(l=l||{},Object.keys(t).filter(e=>!!t[e]).forEach(e=>l[e]=t[e]))}if(t){let t=0;return p.U.promiseMapAllSeries(a,e=>f(o,e.path,e.branch).then(u,e=>{console.log(e.message),++t})).then(()=>(t&&(h.translationsCache()[c]=l),t!==a.length&&l?Promise.resolve(l):(pxt.tickEvent("translations.livetranslationsfailed"),k(e,n,o,r,i,!1,s))))}return Promise.all(a.map(e=>h.httpGetJsonAsync(n+`locales/${o}/`+e.staticName).catch(e=>{}))).then(e=>{let t={};e.forEach(e=>pxt.Util.jsonMergeFrom(t,e)),Object.keys(t).length&&(l=t,h.translationsCache()[c]=l)},e=>{console.error("failed to load localizations")}).then(()=>l)}function b(e){var t={};for(const n of Object.keys(e))t[n]=v(e[n]);return t}function v(e){var t;return{attributes:Object.assign({},e.attributes),parameters:null==(t=e.parameters)?void 0:t.map(T),extendsTypes:e.extendsTypes?[...e.extendsTypes]:void 0,pkgs:e.pkgs?[...e.pkgs]:void 0,combinedProperties:e.combinedProperties?[...e.combinedProperties]:void 0,name:e.name,namespace:e.namespace,fileName:e.fileName,kind:e.kind,retType:e.retType,isInstance:e.isInstance,isContextual:e.isContextual,qName:e.qName,pkg:e.pkg,snippet:e.snippet,snippetName:e.snippetName,snippetWithMarkers:e.snippetWithMarkers,pySnippet:e.pySnippet,pySnippetName:e.pySnippetName,pySnippetWithMarkers:e.pySnippetWithMarkers,blockFields:e.blockFields,isReadOnly:e.isReadOnly,pyName:e.pyName,pyQName:e.pyQName,snippetAddsDefinitions:e.snippetAddsDefinitions}}function T(e){var t;return{name:e.name,description:e.description,type:e.type,pyTypeString:e.pyTypeString,initializer:e.initializer,default:e.default,properties:null==(t=e.properties)?void 0:t.map(E),handlerParameters:null==(t=e.handlerParameters)?void 0:t.map(E),options:e.options?p.U.clone(e.options):void 0,isEnum:e.isEnum}}function E(e){return{name:e.name,type:e.type}}h.PromiseBuffer=class{constructor(){this.waiting=[],this.available=[]}drain(){for(var e of this.waiting)e(new Error("Promise Buffer Reset"));this.waiting=[],this.available=[]}pushError(e){this.push(e)}push(e){var t=this.waiting.shift();t?t(e):this.available.push(e)}shiftAsync(e=0){var t;return 0<this.available.length?(t=this.available.shift())instanceof Error?Promise.reject(t):Promise.resolve(t):new Promise((t,n)=>{let o=e=>{(e instanceof Error?n:t)(e)};this.waiting.push(o),0<e&&p.U.delay(e).then(()=>{var e=this.waiting.indexOf(o);0<=e&&(this.waiting.splice(e,1),n(new Error("Timeout")))})})}},h.now=_,h.nowSeconds=function(){return Math.round(_()/1e3)},h.timeout=function(t){return new Promise(e=>setTimeout(()=>e(),t))},h.cpuUs=()=>{const e="undefined"!=typeof performance?performance.now.bind(performance)||performance.moznow.bind(performance)||performance.msNow.bind(performance)||performance.webkitNow.bind(performance)||performance.oNow.bind(performance):Date.now;return h.cpuUs=()=>1e3*e(),h.cpuUs()},h.getMime=function(e){e=/\.([a-zA-Z0-9]+)$/.exec(e);if(!e)return"application/octet-stream";switch(e[1].toLowerCase()){case"txt":return"text/plain";case"html":case"htm":return"text/html";case"css":return"text/css";case"js":return"application/javascript";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"ico":return"image/x-icon";case"manifest":return"text/cache-manifest";case"webmanifest":return"application/manifest+json";case"json":return"application/json";case"svg":return"image/svg+xml";case"eot":return"application/vnd.ms-fontobject";case"ttf":return"font/ttf";case"woff":return"application/font-woff";case"woff2":return"application/font-woff2";case"md":return"text/markdown";case"xml":return"application/xml";case"m4a":return"audio/m4a";case"mp3":return"audio/mp3";default:return"application/octet-stream"}},h.randomUint32=m,h.guidGen=function(){function e(){return(65536|m()).toString(16).slice(-4)}return e()+e()+"-"+e()+"-4"+e().slice(-3)+"-"+e()+"-"+e()+e()+e()},h.downloadLiveTranslationsAsync=f,h.pxtLangCookieId="PXT_LANG",h.langCookieExpirationDays=30,h.allLanguages={af:{englishName:"Afrikaans",localizedName:"Afrikaans"},ar:{englishName:"Arabic",localizedName:""},az:{englishName:"Azerbaijani",localizedName:" "},bg:{englishName:"Bulgarian",localizedName:""},bn:{englishName:"Bengali",localizedName:""},ca:{englishName:"Catalan",localizedName:"Catal"},cs:{englishName:"Czech",localizedName:"etina"},da:{englishName:"Danish",localizedName:"Dansk"},de:{englishName:"German",localizedName:"Deutsch"},el:{englishName:"Greek",localizedName:""},en:{englishName:"English",localizedName:"English"},"es-ES":{englishName:"Spanish (Spain)",localizedName:"Espaol (Espaa)"},"es-MX":{englishName:"Spanish (Mexico)",localizedName:"Espaol (Mxico)"},et:{englishName:"Estonian",localizedName:"Eesti"},eu:{englishName:"Basque",localizedName:"Euskara"},fa:{englishName:"Persian",localizedName:""},fi:{englishName:"Finnish",localizedName:"Suomi"},fr:{englishName:"French",localizedName:"Franais"},"fr-CA":{englishName:"French (Canada)",localizedName:"Franais (Canada)"},"gu-IN":{englishName:"Gujarati",localizedName:""},he:{englishName:"Hebrew",localizedName:""},hr:{englishName:"Croatian",localizedName:"Hrvatski"},hu:{englishName:"Hungarian",localizedName:"Magyar"},"hy-AM":{englishName:"Armenian (Armenia)",localizedName:" ()"},id:{englishName:"Indonesian",localizedName:"Bahasa Indonesia"},is:{englishName:"Icelandic",localizedName:"slenska"},it:{englishName:"Italian",localizedName:"Italiano"},ja:{englishName:"Japanese",localizedName:""},kab:{englishName:"Kabyle",localizedName:""},ko:{englishName:"Korean",localizedName:""},kmr:{englishName:"Kurmanji (Kurdish)",localizedName:""},kn:{englishName:"Kannada",localizedName:""},lt:{englishName:"Lithuanian",localizedName:"Lietuvi"},lv:{englishName:"Latvian",localizedName:"Latvieu"},"ml-IN":{englishName:"Malayalam",localizedName:""},mr:{englishName:"Marathi",localizedName:""},nl:{englishName:"Dutch",localizedName:"Nederlands"},no:{englishName:"Norwegian",localizedName:"Norsk"},nb:{englishName:"Norwegian Bokmal",localizedName:"Norsk bokml"},"nn-NO":{englishName:"Norwegian Nynorsk",localizedName:"Norsk nynorsk"},"pa-IN":{englishName:"Punjabi",localizedName:""},pl:{englishName:"Polish",localizedName:"Polski"},"pt-BR":{englishName:"Portuguese (Brazil)",localizedName:"Portugus (Brasil)"},"pt-PT":{englishName:"Portuguese (Portugal)",localizedName:"Portugus (Portugal)"},ro:{englishName:"Romanian",localizedName:"Romn"},ru:{englishName:"Russian",localizedName:""},"si-LK":{englishName:"Sinhala (Sri Lanka)",localizedName:" ( )"},sk:{englishName:"Slovak",localizedName:"Slovenina"},sl:{englishName:"Slovenian",localizedName:"Slovenski"},sr:{englishName:"Serbian",localizedName:"Srpski"},su:{englishName:"Sundanese",localizedName:" "},"sv-SE":{englishName:"Swedish (Sweden)",localizedName:"Svenska (Sverige)"},ta:{englishName:"Tamil",localizedName:""},te:{englishName:"Telugu",localizedName:""},th:{englishName:"Thai",localizedName:""},tl:{englishName:"Tagalog",localizedName:" "},tr:{englishName:"Turkish",localizedName:"Trke"},uk:{englishName:"Ukrainian",localizedName:""},"ur-IN":{englishName:"Urdu (India)",localizedName:" ()"},"ur-PK":{englishName:"Urdu (Pakistan)",localizedName:" ()"},vi:{englishName:"Vietnamese",localizedName:"Ting vit"},"zh-CN":{englishName:"Chinese (Simplified)",localizedName:""},"zh-TW":{englishName:"Chinese (Traditional)",localizedName:""}},h.isLocaleEnabled=y,h.updateLocalizationAsync=function(e){const{targetId:t,baseUrl:n,pxtBranch:o,targetBranch:r,force:i}=e;let s=e["code"];if((s="en-US"===(s=h.normalizeLanguageCode(s)[0])?"en":s)===h.userLanguage()||!y(s)&&!i)return pxt.debug(`loc: ${s} (using built-in)`),Promise.resolve();pxt.debug("loc: "+s);const a=pxt.Util.liveLocalizationEnabled();return k(t,n,s,o,r,a,l.pxtc.Util.TranslationsKind.Editor).then(e=>(e&&(h.setUserLanguage(s),h.setLocalizedStrings(e)),l.pxtc.Util.downloadTranslationsAsync(t,n,s,o,r,a,l.pxtc.Util.TranslationsKind.Apis).then(e=>{e&&(l.pxtc.apiLocalizationStrings=e)})))},(e=d=h.TranslationsKind||(h.TranslationsKind={}))[e.Editor=0]="Editor",e[e.Sim=1]="Sim",e[e.Apis=2]="Apis",e[e.SkillMap=3]="SkillMap",h.downloadTranslationsAsync=k,h.capitalize=function(e){return e&&e[0].toLocaleUpperCase()+e.slice(1)},h.uncapitalize=function(e){return(e||"").split(/(?=[A-Z])/g).join(" ").toLowerCase()},h.range=function(t){var n=[];for(let e=0;e<t;++e)n.push(e);return n},h.multipartPostAsync=function(e,n={},t=null,o=null){const r="--------------------------0461489f461126c5";let i="";Object.keys(n).forEach(e=>{var t;t=n[e=e],i=(i+=r+"\r\n")+'Content-Disposition: form-data; name="'+e+'"\r\n\r\n'+t+"\r\n"}),t&&(o=o,s=(t=t).split("/").reverse()[0],i=(i=i+r+'\r\nContent-Disposition: form-data; name="files['+t+']"; filename="'+s+'"\r\n')+"\r\n"+o+"\r\n"),i+=r+"--\r\n";var s,t={url:e,method:"POST",headers:{"Content-Type":"multipart/form-data; boundary="+r.slice(2)},data:i};return h.httpRequestCoreAsync(t)},h.toDataUri=function(e,t){return/^https?:/i.test(e)||/^data:/i.test(e)?e:(t||/^<svg/i.test(e)&&(t="image/svg+xml"),/xml|svg/.test(t)?`data:${t},`+encodeURIComponent(e):`data:${t||"image/png"};base64,`+p.encodeBase64(g(e)))},h.imageMagic=1496611453,h.imageHeaderSize=36,h.encodeBlobAsync=function(e,t){var n=h.imageHeaderSize+t.length,o=3*(e.width*e.height-1);let r=1;for(;r<4&&!(o*r>=8*n);)r++;let i=o*r>>3,s=n-i,a=0,l=e.width*e.height*4;if(0<s){const t=3*e.width,h=(a=Math.ceil(s/t),document.createElement("canvas"));h.width=e.width,h.height=e.height+a,h.getContext("2d").drawImage(e,0,0),e=h}var c=pxt.HF2.encodeU32LE([h.imageMagic,t.length,a,0,0,0,0,0,0]);function u(n,o,r,i){let s=0,a=0,l=i[a++];var c=(1<<r)-1;let u=!0;for(;u;){let e=l>>s&c,t=8-s;if(t<=r){if(a>=i.length){if(0==t)break;u=!1}l=i[a++],e|=l<<t&c,s=r-t}else s+=r;n[o]=255&(n[o]&~c|e),3==(3&++o)&&(n[o++]=255)}return o}pxt.Util.assert(c.length==h.imageHeaderSize);var d=e.getContext("2d"),p=d.getImageData(0,0,e.width,e.height);u(p.data,0,1,[r]);let g=4;for(g=u(p.data,g,r,c),pxt.Util.assert(0==(3&g)),g=0==a?u(p.data,g,r,t):(c=i-c.length,g=u(p.data,g,r,t.slice(0,c)),u(p.data,l,8,t.slice(c))),g|=3;g<p.data.length;)p.data[g]=255,g+=4;return d.putImageData(p,0,0),e},h.decodeBlobAsync=function(e){return pxt.BrowserUtils.loadCanvasAsync(e).then(e=>{const a=e.getContext("2d").getImageData(0,0,e.width,e.height).data,t=1&a[0]|(1&a[1])<<1|(1&a[2])<<2;if(5<t||0==t)return Promise.reject(new Error(h.lf("Invalid encoded PNG format")));function n(e,t,n){let o=0,r=0,i=0;for(var s=(1<<t)-1;r<n.length;)i|=(a[e++]&s)<<o,3==(3&e)&&e++,8<=(o+=t)&&(n[r++]=255&i,i>>=8,o-=8);return e}const o=new Uint8Array(pxt.Util.imageHeaderSize);var r=n(4,t,o),i=pxt.HF2.decodeU32LE(o);if(i[0]!=pxt.Util.imageMagic)return Promise.reject(new Error(h.lf("Invalid magic in encoded PNG")));var s=new Uint8Array(i[1]),i=i[2];if(0<i){const a=(e.height-i)*e.width,h=new Uint8Array((3*(a-1)*t>>3)-pxt.Util.imageHeaderSize),o=(n(r,t,h),s.set(h),new Uint8Array(s.length-h.length));n(4*a,8,o),s.set(o,h.length)}else n(r,t,s);return s})},h.parseQueryString=function(e){let o={};return e.replace(/\+/g," ").replace(/([^#?&=]+)=([^#?&=]*)/g,(e,t,n)=>(o[decodeURIComponent(t)]=decodeURIComponent(n),"")),o},h.stringifyQueryString=function(e,t){for(var n of Object.keys(t))0<=e.indexOf("?")?e+="&":e+="?",e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]);return e},h.cloneTargetBundle=function(e){const t=(e=Object.assign({},e)).apiInfo;delete e.apiInfo;var n=e.bundleddirs,o=(delete e.bundleddirs,e.bundledpkgs),r=(delete e.bundledpkgs,e.tutorialInfo),i=(delete e.tutorialInfo,h.clone(e));if(t){i.apiInfo={};for(const e of Object.keys(t)){const h=t[e].apis;i.apiInfo[e]={sha:t[e].sha,apis:{jres:Object.assign({},h.jres),byQName:b(h.byQName)}}}}if(n&&(i.bundleddirs=[...n]),o){i.bundledpkgs={};for(const e of Object.keys(o))i.bundledpkgs[e]=Object.assign({},o[e])}if(r){i.tutorialInfo={};for(const e of Object.keys(r)){const t=r[e];i.tutorialInfo[e]={hash:t.hash,usedBlocks:Object.assign({},t.usedBlocks),snippetBlocks:Object.assign({},t.snippetBlocks)}}}return i},h.cloneApis=b,h.cloneSymbolInfo=v,h.toUTF8Array=function(e){return(new TextEncoder).encode(e)},h.fromUTF8Array=function(e){return(new TextDecoder).decode(e)}}}(ts=ts||{}),function(e){var f=e.pxtc||(e.pxtc={});{e=f.BrowserImpl||(f.BrowserImpl={});f.Util.httpRequestCoreAsync=function(l){return new Promise((e,t)=>{let n,o=!1,r=f.Util.clone(l.headers)||{};n=new XMLHttpRequest,l.responseArrayBuffer&&(n.responseType="arraybuffer"),l.withCredentials&&(n.withCredentials=!0),n.onreadystatechange=()=>{if(!o&&4==n.readyState){o=!0;let t={statusCode:n.status,headers:{},buffer:n.responseBody||n.response,text:l.responseArrayBuffer?void 0:n.responseText};n.getAllResponseHeaders().split(/\r?\n/).forEach(e=>{e=/^\s*([^:]+): (.*)/.exec(e);e&&(t.headers[e[1].toLowerCase()]=e[2])}),e(t)}};let i,s=l.data,a=l.method||(null==s?"GET":"POST");null==s?i=null:s instanceof Uint8Array?i=s:"object"==typeof s?(i=JSON.stringify(s),r["content-type"]="application/json; charset=utf8"):"string"==typeof s?i=s:f.Util.oops("bad data"),n.open(a,l.url),Object.keys(r).forEach(e=>{n.setRequestHeader(e,r[e])}),null==i?n.send():n.send(i)})},f.Util.sha256=n,f.Util.getRandomBuf=t=>{if(window.crypto)window.crypto.getRandomValues(t);else for(let e=0;e<t.length;++e)t[e]=Math.floor(255*Math.random())};const k=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function y(e,t){return e>>>t|e<<32-t}function t(e){let _=new Uint32Array(8),m=(_[0]=1779033703,_[1]=3144134277,_[2]=1013904242,_[3]=2773480762,_[4]=1359893119,_[5]=2600822924,_[6]=528734635,_[7]=1541459225,new Uint32Array(64));function t(n){var e=n.length-63;for(let t=0;t<e;t+=64){for(let e=0;e<16;e++){var o=(e<<2)+t;m[e]=n[o]<<24|n[o+1]<<16|n[o+2]<<8|n[o+3]}{c=void 0;u=void 0;d=void 0;p=void 0;g=void 0;h=void 0;var c=_;var u=m;f.Util.assert(8==c.length),f.Util.assert(64==u.length);for(let e=16;e<64;++e){var d=y(u[e-15],7)^y(u[e-15],18)^u[e-15]>>>3,p=y(u[e-2],17)^y(u[e-2],19)^u[e-2]>>>10;u[e]=u[e-16]+d+u[e-7]+p|0}let t=c[0],n=c[1],o=c[2],r=c[3],i=c[4],s=c[5],a=c[6],l=c[7];for(let e=0;e<64;++e){var g=l+(y(i,6)^y(i,11)^y(i,25))+(i&s^~i&a)+k[e]+u[e]|0,h=t&n^t&o^n&o;l=a,a=s,s=i,i=r+g|0,r=o,o=n,t=g+((y(n=t,2)^y(t,13)^y(t,22))+h|0)|0}c[0]+=t,c[1]+=n,c[2]+=o,c[3]+=r,c[4]+=i,c[5]+=s,c[6]+=a,c[7]+=l}}}t(e);let n=64-(e.length+9)%64,o=(64==n&&(n=0),e.length-e.length%64),r=new Uint8Array(e.length-o+1+n+8),i=0;for(;o<e.length;)r[i++]=e[o++];for(r[i++]=128;0<n--;)r[i++]=0;let s=8*e.length;for(i=r.length;0<s;)r[--i]=255&s,s>>=8;t(r);let a="";for(let e=0;e<_.length;++e)a+=("000000000"+_[e].toString(16)).slice(-8);return a.toLowerCase()}function n(e){pxt.perf.measureStart("sha256buffer");e=t(f.Util.toUTF8Array(e));return pxt.perf.measureEnd("sha256buffer"),e}e.sha256buffer=t,e.sha256string=n}}(ts=ts||{}),function(e){e=e.pxtc||(e.pxtc={});{e=e.jsonPatch||(e.jsonPatch={});const a={add:(e,t,n)=>{if("object"!=typeof e)throw new Error("jsonPatch: expected object type");if(t in e)throw new Error("jsonPatch: object already contains key "+t);e[t]=n},replace:(e,t,n)=>{if("object"!=typeof e)throw new Error("jsonPatch: expected object type");e[t]=n},remove:(e,t)=>{if("object"!=typeof e)throw new Error("jsonPatch: expected object type");delete e[t]}},l={add:(e,t,n)=>{if(!Array.isArray(e))throw new Error("jsonPatch: expected array type");if(t in e)throw new Error(`jsonPatch: key ${t} already exists in array`);"number"!=typeof t||t!==Math.floor(t)?e[t]=n:e.splice(t,0,n)},replace:(e,t,n)=>{if(!Array.isArray(e))throw new Error("jsonPatch: expected array type");"number"!=typeof t||t!==Math.floor(t)?e[t]=n:e.splice(t,1,n)},remove:(e,t)=>{if(!Array.isArray(e))throw new Error("jsonPatch: expected array type");"number"!=typeof t||t!==Math.floor(t)?delete e[t]:e.splice(t,1)}};e.diff=function(e,t){const c={add:[],remove:[],replace:[]};function u(e,t){return!Array.isArray(e)||(e=Number.parseFloat(t),Number.isNaN(e))?t:e}return function e(t,n,o){if(!Object.is(t,n)){n=n||{},t=t||{};for(var r of Object.keys(t))if(!(r in n)){const n=u(t,r);c.remove.push({op:"remove",path:o.concat(n)})}for(const l of Object.keys(n)){var i=t[l],s=n[l],a=u(n,l);a in t?"object"!=typeof i&&"object"!=typeof s&&i!==s||typeof i!=typeof s||Array.isArray(i)!==Array.isArray(s)?c.replace.push({op:"replace",path:o.concat(a),value:s}):e(i,s,o.concat(a)):void 0!==n[a]&&(o.length&&c.add.push({op:"add",path:o,value:Array.isArray(n)?[]:{}}),c.add.push({op:"add",path:o.concat(a),value:s}))}}}(e,t,[]),[...c.remove.reverse(),...c.replace,...c.add.sort((e,t)=>e.path.length-t.path.length)]},e.patchInPlace=function(n,o){if(!n||"object"!=typeof n)throw new Error("jsonPatch: Must be an object or an array.");for(const i of o){const o=i.path.slice(),s=o.pop();if(null==s)throw new Error("jsonPatch: missing last key");let e=n,t=o.shift();for(;null!=t;){if(!(t in e))throw new Error("jsonPatch: missing parent element "+t);e=e[t],t=o.shift()}if(Array.isArray(e)&&"number"!=typeof s)throw new Error("jsonPatch: expected numeric index for array object");var r=Array.isArray(e)?l:a;"remove"===i.op?r.remove(e,s):"add"!==i.op||s in e?"replace"===i.op&&r.replace(e,s,i.value):r.add(e,s,i.value)}}}}(ts=ts||{}),function(n){function i(t,n){if(t===n)return 1;if(t&&n&&"object"==typeof t&&"object"==typeof n){var e=Array.isArray(t),o=Array.isArray(n);if(e&&o){if(t.length!==n.length)return;for(let e=0;e<t.length;++e)if(!i(t[e],n[e]))return}else{if(e!==o)return;e=Object.keys(t);if(e.length!==Object.keys(n).length)return;for(const r of e){if(!n.hasOwnProperty(r))return;if(!i(t[r],n[r]))return}}return 1}return t!=t&&n!=n}var e;(e=(e=(e=n.pxtc||(n.pxtc={})).jsonPatch||(e.jsonPatch={})).tests||(e.tests={})).diffTests=function(){const e=[{comment:"test 1",obja:{a:4,b:5},objb:{a:3,b:5},expected:[{op:"replace",path:["a"],value:3}]},{comment:"test 2",obja:{a:3,b:5},objb:{a:4,c:5},expected:[{op:"remove",path:["b"]},{op:"replace",path:["a"],value:4},{op:"add",path:["c"],value:5}]},{comment:"test 3",obja:{a:4,b:[1,2,3]},objb:{a:3,b:[1,2,4]},expected:[{op:"replace",path:["a"],value:3},{op:"replace",path:["b",2],value:4}]},{comment:"test 4",obja:{a:3,b:[1,2,4]},objb:{a:3,b:[1,2,4,5]},expected:[{op:"add",path:["b"],value:[]},{op:"add",path:["b",3],value:5}]},{comment:"test 5",obja:{a:4,b:{c:3}},objb:{a:4,b:{c:4}},expected:[{op:"replace",path:["b","c"],value:4}]},{comment:"test 6",obja:{a:4,b:{c:4}},objb:{a:5,b:{d:4}},expected:[{op:"remove",path:["b","c"]},{op:"replace",path:["a"],value:5},{op:"add",path:["b"],value:{}},{op:"add",path:["b","d"],value:4}]},{comment:"test 7",obja:{a:4,b:[2,"foo"]},objb:{a:4,b:[2,"foo",["this","that"]]},expected:[{op:"add",path:["b"],value:[]},{op:"add",path:["b",2],value:["this","that"]}]}];for(const t of e){console.log(t.comment);const e=n.pxtc.jsonPatch.diff(t.obja,t.objb);i(e,t.expected)?console.log("succeeded"):(console.error("FAILED"),console.log("got",e),console.log("exp",t.expected))}},e.patchTests=function(){for(const e of[{comment:"test 1",obj:{a:"foo",b:[4,11]},patches:[{op:"remove",path:["b"]},{op:"replace",path:["a"],value:4},{op:"add",path:["c"],value:5}],expected:{a:4,c:5}},{comment:"test 2",obj:{a:4,b:[1,2,3]},patches:[{op:"replace",path:["a"],value:3},{op:"replace",path:["b",2],value:4},{op:"add",path:["b",3],value:9}],expected:{a:3,b:[1,2,4,9]}},{comment:"test 3",obj:{a:4,b:{c:3}},patches:[{op:"replace",path:["a"],value:5},{op:"remove",path:["b","c"]},{op:"add",path:["b","d"],value:4}],expected:{a:5,b:{d:4}}},{comment:"test 4",obj:{a:4},patches:[{op:"add",path:["b"],value:[]},{op:"add",path:["b",0],value:"foo"},{op:"add",path:["b",1],value:"bar"}],expected:{a:4,b:["foo","bar"]},validate:e=>e.b&&e.b.forEach}])console.log(e.comment),n.pxtc.jsonPatch.patchInPlace(e.obj,e.patches),i(e.obj,e.expected)&&e.validate&&!e.validate(e.obj)?e.expected&&(console.error("FAILED"),console.log("got",e.obj),console.log("exp",e.expected)):console.log("succeeded")}}(ts=ts||{}),function(e){e.perf||(e.perf={})}(pxt=pxt||{}),pxt.perf.report||(pxt.perf.report=()=>{}),pxt.perf.recordMilestone||(pxt.perf.recordMilestone=()=>{}),pxt.perf.measureStart||(pxt.perf.measureStart=()=>{}),pxt.perf.measureEnd||(pxt.perf.measureEnd=()=>{}),function(r){let n;r.U=pxtc.Util,r.Util=pxtc.Util;let i,s,e,a={};function o(e,t){/^csv-/.test(e)?r.setAppTargetVariant(e.replace(/^csv-*/,"")):r.appTarget&&(a[e]=t,r.U.jsonCopyFrom(r.appTarget.compile.switches,a),r.U.jsonCopyFrom(n.compile.switches,a))}function l(){let t=r.appTarget.compile,n=((t=t||(r.appTarget.compile={isNative:!1,hasHex:!1,switches:{}})).hasHex&&!t.nativeType&&(t.nativeType=pxtc.NATIVE_TYPE_THUMB),t.switches||(t.switches={}),r.U.jsonCopyFrom(t.switches,a),t.jsRefCounting=!1,t.useUF2||t.useELF||null!=t.noSourceInFlash||(t.noSourceInFlash=!0),void 0===t.utf8&&(t.utf8=!0),r.appTarget.appTheme||(r.appTarget.appTheme={}),r.appTarget.appTheme.embedUrl||(r.appTarget.appTheme.embedUrl=r.appTarget.appTheme.homeUrl),r.appTarget.compileService);n&&n.yottaTarget&&!n.yottaBinary&&(n.yottaBinary="pxt-microbit-app-combined.hex");const o=r.appTarget.appTheme;o&&Object.keys(o).filter(e=>/(logo|hero)$/i.test(e)&&/^@cdnUrl@/.test(o[e])).forEach(e=>o[e]=r.BrowserUtils.patchCdn(o[e]));var e=r.appTarget.simulator;if(e&&e.boardDefinition&&e.boardDefinition.visual&&(e=e.boardDefinition.visual).image&&(e.image=r.BrowserUtils.patchCdn(e.image),e.outlineImage)&&(e.outlineImage=r.BrowserUtils.patchCdn(e.outlineImage)),Object.keys(r.appTarget.bundledpkgs).forEach(e=>{var e=r.appTarget.bundledpkgs[e],t=JSON.parse(e[r.CONFIG_NAME]);t.icon&&(t.icon=r.BrowserUtils.patchCdn(t.icon)),e[r.CONFIG_NAME]=r.Package.stringifyConfig(t)}),"undefined"!=typeof window){const t={"lockededitor=1":{appTheme:{lockedEditor:!0}},"hidemenu=1":{appTheme:{hideMenuBar:!0}}},n=(r.appTarget.queryVariants&&r.Util.jsonCopyFrom(t,r.appTarget.queryVariants),window.location.href);Object.keys(t).forEach(e=>{new RegExp(e,"i").exec(n)&&(e=t[e])&&r.U.jsonMergeFrom(r.appTarget,e)})}}function c(e=!1){r.perf.measureStart("reloadAppTargetVariant");var t=e?"":JSON.stringify(r.appTarget);if(r.appTarget=r.U.cloneTargetBundle(n),r.appTargetVariant){const n=r.appTarget.variants&&r.appTarget.variants[r.appTargetVariant];n?r.U.jsonMergeFrom(r.appTarget,n):r.U.userError(lf("Variant '{0}' not defined in pxtarget.json",r.appTargetVariant))}l(),!e&&r.onAppTargetChanged&&t!=JSON.stringify(r.appTarget)&&r.onAppTargetChanged(),r.perf.measureEnd("reloadAppTargetVariant")}function t(){return{relprefix:"/--",workerjs:"/worker.js",monacoworkerjs:"/monacoworker.js",gifworkerjs:"/gifjs/gif.worker.js",serviceworkerjs:"/serviceworker.js",typeScriptWorkerJs:"/tsworker.js",pxtVersion:"local",pxtRelId:"localRelId",pxtCdnUrl:"/cdn/",commitCdnUrl:"/cdn/",blobCdnUrl:"/blb/",cdnUrl:"/cdn/",targetUrl:"",targetVersion:"local",targetRelId:"",targetId:r.appTarget?r.appTarget.id:"",simUrl:"/sim/simulator.html",simserviceworkerUrl:"/simulatorserviceworker.js",simworkerconfigUrl:"/sim/workerConfig.js",partsUrl:"/sim/siminstructions.html"}}function u(){return e=e||r.Cloud.downloadTargetConfigAsync().then(e=>e||{},e=>({}))}function d(e=null){return(e=e||r.appTarget.compile).nativeType==ts.pxtc.NATIVE_TYPE_VM?e.useESP?e.useUF2?ts.pxtc.BINARY_UF2:ts.pxtc.BINARY_ESP:ts.pxtc.BINARY_PXT64:e.useUF2&&!e.switches.rawELF?ts.pxtc.BINARY_UF2:e.useELF?ts.pxtc.BINARY_ELF:ts.pxtc.BINARY_HEX}r.setAppTarget=function(e){r.appTarget=e||{},l(),n=r.U.cloneTargetBundle(r.appTarget)},r.setBundledApiInfo=function(e){for(const r of Object.keys(e)){const i=e[r].apis.byQName;for(const e of Object.keys(i)){var t=i[e],n=e.lastIndexOf("."),o=t.pyQName,n=i[e]={kind:Math.abs(t.kind||7),qName:e,namespace:e.slice(0,n<0?0:n),name:e.slice(n+1),pyQName:o,pyName:o?o.slice(o.lastIndexOf(".")+1):void 0,fileName:"",attributes:t.attributes||{},retType:t.retType||"void",parameters:t.parameters?t.parameters.map(e=>({name:e.name,description:e.description||"",type:e.type||"number",initializer:e.initializer,default:e.default,options:e.options||{},isEnum:!!e.isEnum,handlerParameters:e.handlerParameters})):null,extendsTypes:t.extendsTypes,snippet:t.kind&&t.kind<0?null:void 0,isInstance:!!t.isInstance,isReadOnly:!!t.isReadOnly},o=n.attributes;o.paramDefl||(o.paramDefl={}),o.callingConvention||(o.callingConvention=0),o.paramHelp||(o.paramHelp={}),o.jsDoc||(o.jsDoc=""),o._name=n.name.replace(/@.*/,"")}}i=e},r.getBundledApiInfo=function(){return i},r.savedAppTheme=function(){return n?n.appTheme:void 0},r.setCompileSwitch=o,r.setCompileSwitches=function(e){if(e)for(var t of e.split(/[\s,;:]+/))t&&("-"==t[0]?o(t.slice(1),!1):o(t,!0))},r.bundledSvg=function(n){if(n){let e=s&&s[n];if(e)return e;if(r.appTarget.simulator&&r.appTarget.simulator.dynamicBoardDefinition){s=s||{};var o=r.appTarget.bundledpkgs[n];if(o){if(JSON.parse(o["pxt.json"]).core&&o["board.json"]){const t=JSON.parse(o["board.json"]);if(t&&t.visual&&t.visual.image){let e=t.visual.image;/^pkg:\/\//.test(e)&&(e=o[e.slice(6)]),s[n]="data:image/svg+xml;base64,"+ts.pxtc.encodeBase64(r.Util.toUTF8(e))}}return s[n]}}}},r.reloadAppTargetVariant=c,r.setAppTargetVariant=function(e,t={}){r.debug("app variant: "+e),(t.force||r.appTargetVariant!==e&&(r.appTargetVariant||e))&&(r.appTargetVariant=e,c(t.temporary))},r.setHwVariant=function(e,t){e=e.replace(/.*---/,""),/^[\w\-]+$/.test(e)?(r.hwVariant=e,r.hwName=t||e):(r.hwVariant=null,r.hwName=null),r.debug(`hwVariant: ${r.hwVariant} (${r.hwName})`)},r.hasHwVariants=function(){return!!r.appTarget.variants&&Object.keys(r.appTarget.bundledpkgs).some(e=>/^hw---/.test(e))},r.getHwVariants=function(){return r.appTarget.variants?Object.keys(r.appTarget.bundledpkgs).filter(e=>/^hw---/.test(e)).map(e=>JSON.parse(r.appTarget.bundledpkgs[e][r.CONFIG_NAME])).filter(e=>!!r.appTarget.appTheme.experimentalHw||!e.experimentalHw):[]},r.options={},r.debug="undefined"!=typeof console&&console.debug?e=>{r.options.debug&&console.debug(e)}:()=>{},r.log="undefined"!=typeof console&&console.log?e=>{console.log(e)}:()=>{},r.reportException=function(e,t){if(console&&(console.error(e),t))try{console.log(t)}catch(e){}},r.reportError=function(e,t,n){if(console&&(console.error(e+": "+t),n))try{r.log(JSON.stringify(n,null,2))}catch(e){}},r.localWebConfig=t,r.getOnlineCdnUrl=function(){var e;return r.webConfig&&(e=/^(https:\/\/[^\/]+)/.exec(r.webConfig.commitCdnUrl))?e[1]:null},r.setupWebConfig=function(e){e?r.webConfig=e:r.webConfig||(r.webConfig=t())},r.getEmbeddedScript=function(e){return r.U.lookup(r.appTarget.bundledpkgs||{},e)},r.targetConfigAsync=u,r.packagesConfigAsync=function(){return u().then(e=>e?e.packages:void 0)},r.CONFIG_NAME="pxt.json",r.SIMSTATE_JSON=".simstate.json",r.SERIAL_EDITOR_FILE="serial.txt",r.README_FILE="README.md",r.GITIGNORE_FILE=".gitignore",r.ASSETS_FILE="assets.json",r.CLOUD_ID="pxt/",r.BLOCKS_PROJECT_NAME="blocksprj",r.JAVASCRIPT_PROJECT_NAME="tsprj",r.PYTHON_PROJECT_NAME="pyprj",r.MAIN_BLOCKS="main.blocks",r.MAIN_TS="main.ts",r.MAIN_PY="main.py",r.DEFAULT_GROUP_NAME="other",r.TILEMAP_CODE="tilemap.g.ts",r.TILEMAP_JRES="tilemap.g.jres",r.IMAGES_CODE="images.g.ts",r.IMAGES_JRES="images.g.jres",r.TUTORIAL_CODE_START="_onCodeStart.ts",r.TUTORIAL_CODE_STOP="_onCodeStop.ts",r.TUTORIAL_INFO_FILE="tutorial-info-cache.json",r.TUTORIAL_CUSTOM_TS="tutorial.custom.ts",r.BREAKPOINT_TABLET=991,r.outputName=d,r.isOutputText=function(e=null){return d(e)==ts.pxtc.BINARY_HEX}}(pxt=pxt||{}),function(r){{var o=r.blocks||(r.blocks={});const h="this";let t;function n(){if((t={device_while:{name:r.Util.lf("a loop that repeats while the condition is true"),tooltip:r.Util.lf("Run the same sequence of actions while the condition is met."),url:"/blocks/loops/while",category:"loops",block:{message0:r.Util.lf("while %1"),appendField:r.Util.lf("{id:while}do")}},pxt_controls_for:{name:r.Util.lf("a loop that repeats the number of times you say"),tooltip:r.Util.lf("Have the variable '{0}' take on the values from 0 to the end number, counting by 1, and do the specified blocks."),url:"blocks/loops/for",category:"loops",block:{message0:r.Util.lf("for %1 from 0 to %2"),variable:r.Util.lf("{id:var}index"),appendField:r.Util.lf("{id:for}do")}},controls_simple_for:{name:r.Util.lf("a loop that repeats the number of times you say"),tooltip:r.Util.lf("Have the variable '{0}' take on the values from 0 to the end number, counting by 1, and do the specified blocks."),url:"blocks/loops/for",category:"loops",block:{message0:r.Util.lf("for %1 from 0 to %2"),variable:r.Util.lf("{id:var}index"),appendField:r.Util.lf("{id:for}do")}},pxt_controls_for_of:{name:r.Util.lf("a loop that repeats for each value in an array"),tooltip:r.Util.lf("Have the variable '{0}' take the value of each item in the array one by one, and do the specified blocks."),url:"blocks/loops/for-of",category:"loops",block:{message0:r.Util.lf("for element %1 of %2"),variable:r.Util.lf("{id:var}value"),appendField:r.Util.lf("{id:for_of}do")}},controls_for_of:{name:r.Util.lf("a loop that repeats for each value in an array"),tooltip:r.Util.lf("Have the variable '{0}' take the value of each item in the array one by one, and do the specified blocks."),url:"blocks/loops/for-of",category:"loops",block:{message0:r.Util.lf("for element %1 of %2"),variable:r.Util.lf("{id:var}value"),appendField:r.Util.lf("{id:for_of}do")}},math_op2:{name:r.Util.lf("minimum or maximum of 2 numbers"),tooltip:{min:r.Util.lf("smaller value of 2 numbers"),max:r.Util.lf("larger value of 2 numbers")},url:"/blocks/math",operators:{op:["min","max"]},category:"math"},math_op3:{name:r.Util.lf("absolute number"),tooltip:r.Util.lf("absolute value of a number"),url:"/reference/math",category:"math",block:{message0:r.Util.lf("absolute of %1")}},math_number:{name:r.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math",tooltip:r.appTarget&&r.appTarget.compile?r.Util.lf("a decimal number"):r.Util.lf("an integer number")},math_integer:{name:r.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math",tooltip:r.Util.lf("an integer number")},math_whole_number:{name:r.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math",tooltip:r.Util.lf("a whole number")},math_number_minmax:{name:r.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math"},math_arithmetic:{name:r.Util.lf("arithmetic operation"),url:"/blocks/math",tooltip:{ADD:r.Util.lf("Return the sum of the two numbers."),MINUS:r.Util.lf("Return the difference of the two numbers."),MULTIPLY:r.Util.lf("Return the product of the two numbers."),DIVIDE:r.Util.lf("Return the quotient of the two numbers."),POWER:r.Util.lf("Return the first number raised to the power of the second number.")},operators:{OP:["ADD","MINUS","MULTIPLY","DIVIDE","POWER"]},category:"math",block:{MATH_ADDITION_SYMBOL:r.Util.lf("{id:op}+"),MATH_SUBTRACTION_SYMBOL:r.Util.lf("{id:op}-"),MATH_MULTIPLICATION_SYMBOL:r.Util.lf("{id:op}"),MATH_DIVISION_SYMBOL:r.Util.lf("{id:op}"),MATH_POWER_SYMBOL:r.Util.lf("{id:op}**")}},math_modulo:{name:r.Util.lf("division remainder"),tooltip:r.Util.lf("Return the remainder from dividing the two numbers."),url:"/blocks/math",category:"math",block:{MATH_MODULO_TITLE:r.Util.lf("remainder of %1  %2")}},math_js_op:{name:r.Util.lf("math function"),tooltip:{sqrt:r.Util.lf("Returns the square root of the argument"),sin:r.Util.lf("Returns the sine of the argument"),cos:r.Util.lf("Returns the cosine of the argument"),tan:r.Util.lf("Returns the tangent of the argument"),atan2:r.Util.lf("Returns the arctangent of the quotient of the two arguments"),idiv:r.Util.lf("Returns the integer portion of the division operation on the two arguments"),imul:r.Util.lf("Returns the integer portion of the multiplication operation on the two arguments")},url:"/blocks/math",operators:{OP:["sqrt","sin","cos","tan","atan2","idiv","imul"]},category:"math",block:{sqrt:r.Util.lf("{id:op}square root"),sin:r.Util.lf("{id:op}sin"),cos:r.Util.lf("{id:op}cos"),tan:r.Util.lf("{id:op}tan"),atan2:r.Util.lf("{id:op}atan2"),idiv:r.Util.lf("{id:op}integer "),imul:r.Util.lf("{id:op}integer ")}},math_js_round:{name:r.Util.lf("rounding functions"),tooltip:{round:r.Util.lf("Increases the argument to the next higher whole number if its fractional part is more than one half"),ceil:r.Util.lf("Increases the argument to the next higher whole number"),floor:r.Util.lf("Decreases the argument to the next lower whole number"),trunc:r.Util.lf("Removes the fractional part of the argument")},url:"/blocks/math",operators:{OP:["round","ceil","floor","trunc"]},category:"math",block:{round:r.Util.lf("{id:op}round"),ceil:r.Util.lf("{id:op}ceiling"),floor:r.Util.lf("{id:op}floor"),trunc:r.Util.lf("{id:op}truncate")}},variables_change:{name:r.Util.lf("update the value of a number variable"),tooltip:r.Util.lf("Changes the value of the variable by this amount"),url:"/blocks/variables/change",category:"variables",block:{message0:r.Util.lf("change %1 by %2")}},controls_repeat_ext:{name:r.Util.lf("a loop that repeats and increments an index"),tooltip:r.Util.lf("Do some statements several times."),url:"/blocks/loops/repeat",category:"loops",block:{CONTROLS_REPEAT_TITLE:r.Util.lf("repeat %1 times"),CONTROLS_REPEAT_INPUT_DO:r.Util.lf("{id:repeat}do")}},variables_get:{name:r.Util.lf("get the value of a variable"),tooltip:r.Util.lf("Returns the value of this variable."),url:"/blocks/variables",category:"variables",block:{VARIABLES_GET_CREATE_SET:r.Util.lf("Create 'set %1'")}},variables_get_reporter:{name:r.Util.lf("get the value of a variable"),tooltip:r.Util.lf("Returns the value of this variable."),url:"/blocks/variables",category:"variables",block:{VARIABLES_GET_CREATE_SET:r.Util.lf("Create 'set %1'")}},variables_set:{name:r.Util.lf("assign the value of a variable"),tooltip:r.Util.lf("Sets this variable to be equal to the input."),url:"/blocks/variables/assign",category:"variables",block:{VARIABLES_SET:r.Util.lf("set %1 to %2")}},controls_if:{name:r.Util.lf("a conditional statement"),tooltip:{CONTROLS_IF_TOOLTIP_1:r.Util.lf("If a value is true, then do some statements."),CONTROLS_IF_TOOLTIP_2:r.Util.lf("If a value is true, then do the first block of statements. Otherwise, do the second block of statements."),CONTROLS_IF_TOOLTIP_3:r.Util.lf("If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements."),CONTROLS_IF_TOOLTIP_4:r.Util.lf("If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.")},tooltipSearch:"CONTROLS_IF_TOOLTIP_2",url:"/blocks/logic/if",category:"logic",block:{CONTROLS_IF_MSG_IF:r.Util.lf("{id:logic}if"),CONTROLS_IF_MSG_THEN:r.Util.lf("{id:logic}then"),CONTROLS_IF_MSG_ELSE:r.Util.lf("{id:logic}else"),CONTROLS_IF_MSG_ELSEIF:r.Util.lf("{id:logic}else if")}},lists_create_with:{name:r.Util.lf("create an array"),tooltip:r.Util.lf("Creates a new array."),url:"/reference/arrays/create",category:"arrays",blockTextSearch:"LISTS_CREATE_WITH_INPUT_WITH",block:{LISTS_CREATE_EMPTY_TITLE:r.Util.lf("empty array"),LISTS_CREATE_WITH_INPUT_WITH:r.Util.lf("array of"),LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:r.Util.lf("array"),LISTS_CREATE_WITH_ITEM_TITLE:r.Util.lf("value")}},lists_length:{name:r.Util.lf("array length"),tooltip:r.Util.lf("Returns the number of items in an array."),url:"/reference/arrays/length",category:"arrays",block:{LISTS_LENGTH_TITLE:r.Util.lf("length of array %1")}},lists_index_get:{name:r.Util.lf("get a value in an array"),tooltip:r.Util.lf("Returns the value at the given index in an array."),url:"/reference/arrays/get",category:"arrays",block:{message0:r.Util.lf("%1 get value at %2")}},lists_index_set:{name:r.Util.lf("set a value in an array"),tooltip:r.Util.lf("Sets the value at the given index in an array"),url:"/reference/arrays/set",category:"arrays",block:{message0:r.Util.lf("%1 set value at %2 to %3")}},logic_compare:{name:r.Util.lf("comparing two numbers"),tooltip:{LOGIC_COMPARE_TOOLTIP_EQ:r.Util.lf("Return true if both inputs equal each other."),LOGIC_COMPARE_TOOLTIP_NEQ:r.Util.lf("Return true if both inputs are not equal to each other."),LOGIC_COMPARE_TOOLTIP_LT:r.Util.lf("Return true if the first input is smaller than the second input."),LOGIC_COMPARE_TOOLTIP_LTE:r.Util.lf("Return true if the first input is smaller than or equal to the second input."),LOGIC_COMPARE_TOOLTIP_GT:r.Util.lf("Return true if the first input is greater than the second input."),LOGIC_COMPARE_TOOLTIP_GTE:r.Util.lf("Return true if the first input is greater than or equal to the second input.")},url:"/blocks/logic/boolean",category:"logic",block:{search:"=  <  > "}},logic_operation:{name:r.Util.lf("boolean operation"),tooltip:{LOGIC_OPERATION_TOOLTIP_AND:r.Util.lf("Return true if both inputs are true."),LOGIC_OPERATION_TOOLTIP_OR:r.Util.lf("Return true if at least one of the inputs is true.")},url:"/blocks/logic/boolean",category:"logic",block:{LOGIC_OPERATION_AND:r.Util.lf("{id:op}and"),LOGIC_OPERATION_OR:r.Util.lf("{id:op}or")}},logic_negate:{name:r.Util.lf("logical negation"),tooltip:r.Util.lf("Returns true if the input is false. Returns false if the input is true."),url:"/blocks/logic/boolean",category:"logic",block:{LOGIC_NEGATE_TITLE:r.Util.lf("not %1")}},logic_boolean:{name:r.Util.lf("a `true` or `false` value"),tooltip:r.Util.lf("Returns either true or false."),url:"/blocks/logic/boolean",category:"logic",block:{LOGIC_BOOLEAN_TRUE:r.Util.lf("{id:boolean}true"),LOGIC_BOOLEAN_FALSE:r.Util.lf("{id:boolean}false")}},text:{name:r.Util.lf("a piece of text"),tooltip:r.Util.lf("A letter, word, or line of text."),url:"types/string",category:"text",block:{search:r.Util.lf("a piece of text")}},text_length:{name:r.Util.lf("number of characters in the string"),tooltip:r.Util.lf("Returns the number of letters (including spaces) in the provided text."),url:"reference/text/length",category:"text",block:{TEXT_LENGTH_TITLE:r.Util.lf("length of %1")}},text_join:{name:r.Util.lf("join items to create text"),tooltip:r.Util.lf("Create a piece of text by joining together any number of items."),url:"reference/text/join",category:"text",block:{TEXT_JOIN_TITLE_CREATEWITH:r.Util.lf("join")}},procedures_defnoreturn:{name:r.Util.lf("define the function"),tooltip:r.Util.lf("Create a function."),url:"types/function/define",category:"functions",block:{PROCEDURES_DEFNORETURN_TITLE:r.Util.lf("function"),PROCEDURE_ALREADY_EXISTS:r.Util.lf("A function named '%1' already exists.")}},procedures_callnoreturn:{name:r.Util.lf("call the function"),tooltip:r.Util.lf("Call the user-defined function."),url:"types/function/call",category:"functions",block:{PROCEDURES_CALLNORETURN_TITLE:r.Util.lf("call function")}},function_return:{name:r.Util.lf("return a value from within a function"),tooltip:r.Util.lf("Return a value from within a user-defined function."),url:"types/function/return",category:"functions",block:{message_with_value:r.Util.lf("return %1"),message_no_value:r.Util.lf("return")}},function_definition:{name:r.Util.lf("define the function"),tooltip:r.Util.lf("Create a function."),url:"types/function/define",category:"functions",block:{FUNCTIONS_EDIT_OPTION:r.Util.lf("Edit Function")}},function_call:{name:r.Util.lf("call the function"),tooltip:r.Util.lf("Call the user-defined function."),url:"types/function/call",category:"functions",block:{FUNCTIONS_CALL_TITLE:r.Util.lf("call"),FUNCTIONS_GO_TO_DEFINITION_OPTION:r.Util.lf("Go to Definition")}},function_call_output:{name:r.Util.lf("call the function with a return value"),tooltip:r.Util.lf("Call the user-defined function with a return value."),url:"types/function/call",category:"functions",block:{}}})[pxtc.ON_START_TYPE]={name:r.Util.lf("on start event"),tooltip:r.Util.lf("Run code when the program starts"),url:"/blocks/on-start",category:"loops",block:{message0:r.Util.lf("on start %1 %2")}},t[pxtc.PAUSE_UNTIL_TYPE]={name:r.Util.lf("pause until"),tooltip:r.Util.lf("Pause execution of code until the given boolean expression is true"),url:"/blocks/pause-until",category:"loops",block:{message0:r.Util.lf("pause until %1")}},t[pxtc.TS_BREAK_TYPE]={name:r.Util.lf("break"),tooltip:r.Util.lf("Break out of the current loop or switch"),url:"/blocks/loops/break",category:"loops",block:{message0:r.Util.lf("break")}},t[pxtc.TS_CONTINUE_TYPE]={name:r.Util.lf("continue"),tooltip:r.Util.lf("Skip current iteration and continues with the next iteration in the loop"),url:"/blocks/loops/continue",category:"loops",block:{message0:r.Util.lf("continue")}},r.Util.isTranslationMode()){const o=Blockly.Msg;r.Util.values(t).filter(e=>e.block).forEach(n=>{var e=Object.keys(n.block);n.translationIds=r.Util.values(n.block),e.forEach(t=>r.crowdin.inContextLoadAsync(n.block[t]).then(e=>{n.block[t]=e,/^[A-Z_]+$/.test(t)&&(o[t]=e)}))})}}o.MATH_FUNCTIONS={unary:["sqrt","sin","cos","tan"],binary:["atan2"],infix:["idiv","imul"]},o.ROUNDING_FUNCTIONS=["round","ceil","floor","trunc"],o.builtinFunctionInfo={"Math.abs":{blockId:"math_op3",params:["x"]},"Math.min":{blockId:"math_op2",params:["x","y"]},"Math.max":{blockId:"math_op2",params:["x","y"]}},o.normalizeBlock=function(e,t=r.log){if(!e)return e;let n=e.replace(/(?:^|[^\\])([%$])\s+/g,"$1");return n!=e&&(t("block has extra spaces: "+e),e=n),(n=(e=n).replace(/([%$]\w+)\s*=\s*(\w+)/,"$1=$2"))!=e&&(t("block has space between %name and = : "+e),e=n),n=n.replace(/\s*\|\s*/g,"|")},o.compileInfo=function(n){const r={parameters:[],actualNameToParam:{},definitionNameToParam:{},handlerArgs:[]},t=(1==n.kind||2==n.kind)&&!n.attributes.defaultInstance,i=!!n.attributes._def,s=i?n.attributes._def.parameters.slice(0):void 0,a=i?s.length:n.parameters?n.parameters.length:0,l=o.builtinFunctionInfo[n.qName],c=(i&&n.attributes._expandedDef&&s.push(...n.attributes._expandedDef.parameters),{}),u=s?s.filter(e=>!e.ref||(c[e.name]=e,!1)):[];if(t&&i&&s.length){const o=c.this||s[0],t=o.name;let e;o.shadowBlockId&&"variables_get"!==o.shadowBlockId||(e=o.varName||n.attributes.paramDefl[t]||n.attributes.paramDefl.this),r.thisParameter={actualName:h,definitionName:t,shadowBlockId:o.shadowBlockId,type:n.namespace,defaultValue:e,fieldEditor:d(t,h),fieldOptions:p(t,h),shadowOptions:g(t,h)}}if(n.parameters){let o=t&&!c.this?1:0;n.parameters.forEach((t,e)=>{let n;if(c[t.name]?n=c[t.name]:o<u.length&&(n=u[o],++o),n||!i){let e;t.options&&t.options.min&&t.options.max&&(e={min:t.options.min.value,max:t.options.max.value});const i=n?n.name:l?l.params[o++]:t.name,c=n&&("variables_get"===n.shadowBlockId||"lists_create_with"==n.shadowBlockId);r.parameters.push({actualName:t.name,type:t.type,defaultValue:c&&n.varName||t.default,definitionName:i,shadowBlockId:n&&n.shadowBlockId,isOptional:!!s&&s.indexOf(n)>=a,fieldEditor:d(i,t.name),fieldOptions:p(i,t.name),shadowOptions:g(i,t.name),range:e})}t.handlerParameters&&t.handlerParameters.forEach(t=>{r.handlerArgs.push({name:t.name,type:t.type,inBlockDef:!!s&&s.some(e=>e.ref&&e.name===t.name)})})})}return r.parameters.forEach(e=>{r.actualNameToParam[e.actualName]=e,r.definitionNameToParam[e.definitionName]=e}),r;function d(e,t){return n.attributes.paramFieldEditor&&(n.attributes.paramFieldEditor[e]||n.attributes.paramFieldEditor[t])}function p(e,t){return n.attributes.paramFieldEditorOptions&&(n.attributes.paramFieldEditorOptions[e]||n.attributes.paramFieldEditorOptions[t])}function g(e,t){return n.attributes.paramShadowOptions&&(n.attributes.paramShadowOptions[e]||n.attributes.paramShadowOptions[t])}},o.hasHandler=function(e){return e.parameters&&e.parameters.some(e=>{var t;return"() => void"==e.type||"Action"==e.type||!(null==(t=e.properties)||!t.length)||!(null==(t=e.handlerParameters)||!t.length)})},o.reporterTypeForArgType=function(e){let t="boolean"!==e&&"number"!==e&&"string"!==e?"argument_reporter_custom":"argument_reporter_"+e;return t},o.defaultIconForArgType=function(e=""){switch(e){case"number":return"calculator";case"string":return"text width";case"boolean":return"random";case"Array":return"list";default:return"align justify"}},o.parseFields=function(e){return e.split("|").map((e,t)=>{var n=/([^%]*)\s*%([a-zA-Z0-9_]+)/.exec(e);if(!n)return{n:e,ni:t};let o=n[1];return{n:e,ni:t,pre:o=o&&o.trim(),p:n[2]}})},o.blockDefinitions=function(){return t||n(),t},o.getBlockDefinition=function(e){return t||n(),t[e]}}}(pxt=pxt||{}),function(u){{var l=u.BrowserUtils||(u.BrowserUtils={});function i(){return"undefined"!=typeof navigator}function e(){return i()&&/(Win32|Win64|WOW64)/i.test(navigator.platform)}function a(){return i()&&/mobi/i.test(navigator.userAgent)}function c(){return i()&&/Mac/i.test(navigator.platform)}function d(){return!!navigator&&/Linux/i.test(navigator.platform)}function p(){return i()&&/arm/i.test(navigator.platform)}function g(){return i()&&/Edge/i.test(navigator.userAgent)}function h(){return i()&&/Trident/i.test(navigator.userAgent)}function _(){return!g()&&!h()&&!!navigator&&(/Chrome/i.test(navigator.userAgent)||/Chromium/i.test(navigator.userAgent))}function m(){return!_()&&!g()&&!!navigator&&/(Macintosh|Safari|iPod|iPhone|iPad)/i.test(navigator.userAgent)}function f(){return!m()&&!!navigator&&(/Firefox/i.test(navigator.userAgent)||/Seamonkey/i.test(navigator.userAgent))}function y(){return i()&&/Opera|OPR/i.test(navigator.userAgent)}function k(){return i()&&/Midori/i.test(navigator.userAgent)}function b(){return i()&&/Epiphany/i.test(navigator.userAgent)}function v(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator&&0<navigator.maxTouchPoints)}function T(){return"undefined"!=typeof window&&!!window.pxtElectron}function E(){return"undefined"!=typeof window&&!!window.ipcRenderer}function S(){return T()||E()}function C(e){var t;try{return"undefined"!=typeof window&&/^http:\/\/(localhost|127\.0\.0\.1):\d+\//.test(window.location.href)&&(e||!/nolocalhost=1/.test(window.location.href))&&!(null!=(t=null==u?void 0:u.webConfig)&&t.isStatic)}catch(e){return!1}}function x(){return"undefined"!=typeof window&&!!window.PointerEvent}function B(){return e()?"windows":c()?"mac":d()&&p()?"rpi":d()?"linux":"unknown"}function A(){return g()?"edge":b()?"epiphany":k()?"midori":y()?"opera":h()?"ie":_()?"chrome":m()?"safari":f()?"firefox":"unknown"}function I(){if(!i())return null;let e=[];return y()&&(e=/(Opera|OPR)\/([0-9\.]+)/i.exec(navigator.userAgent)),(e=b()?/Epiphany\/([0-9\.]+)/i.exec(navigator.userAgent):k()?/Midori\/([0-9\.]+)/i.exec(navigator.userAgent):m()?(e=/Version\/([0-9\.]+)/i.exec(navigator.userAgent))||/(Macintosh|iPod( touch)?|iPhone|iPad); (CPU|Intel).*?OS (X )?(\d+)/i.exec(navigator.userAgent):(_()?/(Chrome|Chromium)\/([0-9\.]+)/i:g()?/Edge\/([0-9\.]+)/i:h()?/(MSIE |rv:)([0-9\.]+)/i:/(Firefox|Seamonkey)\/([0-9\.]+)/i).exec(navigator.userAgent))&&0!=e.length?e[e.length-1]:null}l.isIFrame=function(){try{return window&&window.self!==window.top}catch(e){return!0}},l.hasNavigator=i,l.hasWindow=function(){return"undefined"!=typeof window},l.isWindows=e,l.isWindows10=function(){return i()&&/(Win32|Win64|WOW64)/i.test(navigator.platform)&&/Windows NT 10/i.test(navigator.userAgent)},l.isMobile=a,l.isIOS=function(){return i()&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints)},l.isAndroid=function(){return i()&&/android/i.test(navigator.userAgent)},l.isMac=c,l.isLinux=d,l.isARM=p,l.isUwpEdge=function(){return"undefined"!=typeof window&&!!window.Windows},l.isEdge=g,l.isChromiumEdge=function(){return i()&&/Edg\//i.test(navigator.userAgent)},l.isIE=h,l.isChrome=_,l.isSafari=m,l.isFirefox=f,l.isOpera=y,l.isMidori=k,l.isEpiphany=b,l.isTouchEnabled=v,l.isPxtElectron=T,l.isIpcRenderer=E,l.isElectron=S,l.isWinRT=()=>!1,l.isLocalHost=C,l.isLocalHostDev=function(){return C()&&!S()},l.isSkillmapEditor=function(){try{return/skill(?:s?)Map=1/.test(window.location.href)}catch(e){return!1}},l.isTabletSize=function(){return(null===window||void 0===window?void 0:window.innerWidth)<u.BREAKPOINT_TABLET},l.isComputerSize=function(){return(null===window||void 0===window?void 0:window.innerWidth)>=u.BREAKPOINT_TABLET},l.noSharedLocalStorage=function(){try{return/nosharedlocalstorage/i.test(window.location.href)}catch(e){return!1}},l.useOldTutorialLayout=function(){try{return/tutorialview=old/.test(window.location.href)}catch(e){return!1}},l.hasPointerEvents=x,l.hasSaveAs=function(){return g()||h()||f()},l.os=B,l.browser=A,l.browserVersion=I;let s=!1;function D(){return a()&&m()&&!/downloadWindowOpen=0/i.test(window.location.href)}function N(t,e,n){var o=D(),r=I(),i=parseInt(r||"0");if(o)n?n.location.href=t:window.open(t,"_self");else if(u.BrowserUtils.isSafari()&&(i<10||0==r.indexOf("10.0")||a())){let e=document.getElementById("downloader");e||(u.debug("injecting downloader iframe"),(e=document.createElement("iframe")).id="downloader",e.style.position="absolute",e.style.right="0",e.style.bottom="0",e.style.zIndex="-1",e.style.width="1px",e.style.height="1px",document.body.appendChild(e)),e.src=t}else/^data:/i.test(t)&&(u.BrowserUtils.isEdge()||u.BrowserUtils.isIE())?(o=atob(t.split(",")[1]),n=u.Util.stringToUint8Array(o),i=new Blob([n],{type:"img/png"}),window.navigator.msSaveOrOpenBlob(i,e)):"string"==typeof(r=window.document.createElement("a")).download?(r.href=t,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)):document.location.href=t}function V(e,t){let n="data";a()&&m()&&u.appTarget.appTheme.mobileSafariDownloadProtocol&&(n=u.appTarget.appTheme.mobileSafariDownloadProtocol);var o=/downloadProtocol=([a-z0-9:/?]+)/i.exec(window.location.href);return(n=o?o[1]:n)+":"+t+";base64,"+e}function w(e,t,n={}){u.debug("trigger download");var{contentType:o="application/octet-stream",userContextWindow:r,onError:n,maintainObjectURL:i}=n,s=null==(s=window.URL)?void 0:s.createObjectURL,a=u.appTarget.appTheme.disableBlobObjectDownload;let l;try{if(s&&!a){const n=s(new Blob([u.Util.stringToUint8Array(atob(e))],{type:o}));N(n,t,r),i?l=n:window.setTimeout(()=>window.URL.revokeObjectURL(l),0)}else N(l=V(e,t),t,r)}catch(e){n&&n(e),u.debug("saving failed")}return l}function W(n){const o=document.createElement("img");return new Promise((e,t)=>{o.onload=()=>e(o),o.onerror=()=>e(void 0),o.crossOrigin="anonymous",o.src=n})}function O(e){return/^https?:\/\//i.test(e)?e:(window.MonacoPaths||{})[e]||(u.U.startsWith(e,u.webConfig.commitCdnUrl)?e:u.webConfig.commitCdnUrl+e)}l.isBrowserSupported=function(){var e,t,n,o,r,i;return!navigator||!!/bot|crawler|spider|crawling/i.test(navigator.userAgent)||(null==(e=(null==(e=u.appTarget)?void 0:e.unsupportedBrowsers)||(null==(e=window.pxtTargetBundle)?void 0:e.unsupportedBrowsers))||!e.some(e=>e.id==A()))&&(e=I(),o=parseInt(e||"0"),i=_()&&38<=o,r=f()&&31<=o,t=g(),n=m()&&9<=o,o=y()&&_()&&21<=o,i=i||r||t||n||o,r=k()||d()&&p()&&b(),i=(i=i&&!r)||/anybrowser=(true|1)/.test(window.location.href),s||(u.log(`Browser: ${A()} ${e} on `+B()),i||u.tickEvent("browser.unsupported",{useragent:navigator.userAgent}),s=!0),i)},l.devicePixelRatio=function(){var e,t;return"undefined"!=typeof window&&window.screen?(e=window.screen.systemXDPI,t=window.screen.logicalXDPI,void 0!==e&&void 0!==t&&t<e?e/t:window&&void 0!==window.devicePixelRatio?window.devicePixelRatio:1):1},l.browserDownloadBinText=function(e,t,n){return w(ts.pxtc.encodeBase64(e),t,n)},l.browserDownloadText=function(e,t,n){return w(ts.pxtc.encodeBase64(u.Util.toUTF8(e)),t,n)},l.isBrowserDownloadInSameWindow=D,l.isBrowserDownloadWithinUserContext=function(){var e=I(),e=parseInt(e||"0");return a()&&m()&&11<=e||/downloadUserContext=1/i.test(window.location.href)},l.browserDownloadDataUri=N,l.browserDownloadUInt8Array=function(e,t,n){return w(ts.pxtc.encodeBase64(u.Util.uint8ArrayToString(e)),t,n)},l.toDownloadDataUri=V,l.browserDownloadBase64=w,l.loadImageAsync=W,l.loadCanvasAsync=function(e){return W(e).then(e=>{var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t})},l.scaleImageData=function(e,t){var n=document.createElement("canvas"),o=(n.width=e.width*t,n.height=e.height*t,n.getContext("2d"));return o.putImageData(e,0,0),o.imageSmoothingEnabled=!1,o.scale(t,t),o.drawImage(n,0,0),o.getImageData(0,0,e.width*t,e.height*t)},l.imageDataToPNG=function(e,t=1){var n,o;if(e)return(n=document.createElement("canvas")).width=e.width*t,n.height=e.height*t,(o=n.getContext("2d")).putImageData(e,0,0),o.imageSmoothingEnabled=!1,o.scale(t,t),o.drawImage(n,0,0),n.toDataURL("image/png")},l.encodeToPngAsync=function(t,e){const{width:i,height:s,pixelDensity:a=4,maxSize:l=1e6,text:c}=e||{};return new Promise((o,e)=>{const r=new Image;r.onload=function(){const t=document.createElement("canvas"),e=t.getContext("2d");t.width=(i||r.width)*a,t.height=(s||r.height)*a,c&&(e.fillStyle="#fff",e.fillRect(0,0,t.width,t.height)),e.drawImage(r,0,0,i,s,0,0,t.width,t.height);let n=t.toDataURL("image/png");for(;n.length>l;)t.width=t.width/2>>0,t.height=t.height/2>>0,u.debug(`screenshot size ${n.length}b, shrinking to ${t.width}x`+t.height),e.drawImage(r,0,0,i,s,0,0,t.width,t.height),n=t.toDataURL("image/png");c?u.lzmaCompressAsync(c).then(e=>{e=u.Util.encodeBlobAsync(t,e);o(e.toDataURL("image/png"))}):o(n)},r.onerror=e=>{u.reportError("png","png rendering failed"),o(void 0)},r.src=t})},l.resolveCdnUrl=O,l.loadStyleAsync=function(e,t){const o="style-"+(e=t?"rtl"+e:e);if(document.getElementById(o))return Promise.resolve();const r=O(e),n=u.Util.toArray(document.head.getElementsByTagName("link")).filter(e=>e.getAttribute("href")==r)[0];return n?(n.id||(n.id=o),Promise.resolve()):new Promise((e,t)=>{var n=document.createElement("link");n.href=r,n.rel="stylesheet",n.type="text/css",n.id=o,n.addEventListener("load",()=>e()),n.addEventListener("error",e=>t(e)),document.head.appendChild(n)})};let t,n,o,r={};function G(e,t){return e?t?(e.indexOf("/")==e.length-1?e.substring(0,e.length-1):e)+"/"+(0==t.indexOf("/")?t.substring(1):t):e:t}function K(){var e=i()&&window.navigator;return e&&e.storage&&e.storage.estimate?e.storage.estimate():Promise.resolve({})}l.loadScriptAsync=function(e){const o=O(e);let t=r[o];return t=t||(r[o]=new Promise((e,t)=>{u.debug("script: loading "+o);var n=document.createElement("script");n.type="text/javascript",n.addEventListener("load",()=>e()),n.addEventListener("error",e=>{delete r[o],t(e)}),n.src=o,n.async=!0,document.body.appendChild(n)}))},l.loadAjaxAsync=function(o){return new Promise((e,t)=>{let n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200==n.status?e(n.responseText):t(n.status))},n.open("GET",o,!0),n.send()})},l.loadBlocklyAsync=function(){if(!t){u.debug("blockly: delay load");let e=u.BrowserUtils.loadStyleAsync("blockly.css",ts.pxtc.Util.isUserLanguageRtl());e=(e=void 0===Blockly?e.then(()=>u.BrowserUtils.loadScriptAsync("pxtblockly.js")):e).then(()=>{u.debug("blockly: loaded")}),t=e}return t},l.patchCdn=function(e){var t;return e&&((t=u.getOnlineCdnUrl())?e.replace("@cdnUrl@",t):e.replace(/@cdnUrl@\/(blob|commit)\/[a-f0-9]{40}\//,"./"))},l.initTheme=function(){const e=u.appTarget.appTheme;if(e&&e.accentColor&&((t=document.createElement("style")).type="text/css",t.appendChild(document.createTextNode(`.ui.accent { color: ${e.accentColor}; }
                .ui.inverted.menu .accent.active.item, .ui.inverted.accent.menu  { background-color: ${e.accentColor}; }`)),document.getElementsByTagName("head")[0].appendChild(t)),u.Util.isUserLanguageRtl()){u.debug("rtl layout"),u.BrowserUtils.addClass(document.body,"rtl"),document.body.style.direction="rtl";const e=u.Util.toArray(document.head.getElementsByTagName("link")),n=e.filter(e=>u.Util.endsWith(e.getAttribute("href"),"semantic.css"))[0];if(n){const e=n.getAttribute("data-rtl");e&&(u.debug("swapping to "+e),n.setAttribute("href",e))}var t=e.filter(e=>u.Util.endsWith(e.getAttribute("href"),"blockly.css"))[0];if(t){const e=t.getAttribute("data-rtl");e&&(u.debug("swapping to "+e),t.setAttribute("href",e),t.removeAttribute("data-rtl"))}}},l.changeHash=function(e,t){"#"!=e.charAt(0)&&(e="#"+e),t?window.location.hash=e:window.history.replaceState("","",e)},l.urlJoin=G,l.joinURLs=function(...t){let n;if(t)for(let e=0;e<t.length;e++)n=G(n,t[e]);return n},l.storageEstimateAsync=K,l.scheduleStorageCleanup=i()&&navigator.storage&&navigator.storage.estimate?ts.pxtc.Util.throttle(function(){K().then(e=>(u.debug(`storage estimate: ${e.usage/e.quota*100>>0}%, ${e.usage/1e6>>0}/${e.quota/1e6>>0}Mb`),e.quota&&e.usage&&1e6<e.quota&&.9<e.usage/e.quota?(u.log("quota usage exceeded, clearing translations"),u.tickEvent("storage.cleanup"),R()):Promise.resolve())).catch(e=>{u.reportException(e)})},1e4,!1):()=>{},l.stressTranslationsAsync=function t(){let n="...";for(let e=0;e<16;++e)n+=n+Math.random();return console.log(`adding entry ${2*n.length} bytes`),u.U.delay(1).then(()=>j()).then(e=>e.setAsync("foobar",Math.random().toString(),"",null,void 0,n)).then(()=>u.BrowserUtils.storageEstimateAsync()).then(e=>!e.quota||e.usage/e.quota<.8?t():Promise.resolve())};class M{constructor(){this.translations={}}key(e,t,n){return e+`|${t}|`+(n||"master")}get(e,t,n){return this.translations[this.key(e,t,n)]}getAsync(e,t,n){return Promise.resolve(this.get(e,t,n))}set(e,t,n,o,r,i,s){this.translations[this.key(e,t,n)]={etag:o,time:r,strings:i,md:s}}setAsync(e,t,n,o,r,i){return this.set(e,t,n,o,u.Util.now(),r),Promise.resolve()}clearAsync(){return this.translations={},Promise.resolve()}}class F{constructor(e,t,n,o){this.name=e,this.version=t,this.upgradeHandler=n,this.quotaExceededHandler=o}throwIfNotOpened(){if(!this._db)throw new Error("Database not opened; call IDBWrapper.openAsync() first")}errorHandler(e,t,n){console.error(new Error(this.name+` IDBWrapper error for ${t}: `+e.message)),n(e),"QuotaExceededError"==e.name&&(u.log("storage quota exceeded..."),u.tickEvent("storage.quotaexceedederror"),this.quotaExceededHandler)&&this.quotaExceededHandler()}getObjectStore(e,t="readonly"){return this.throwIfNotOpened(),this._db.transaction([e],t).objectStore(e)}static deleteDatabaseAsync(o){return new Promise((e,t)=>{const n=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB).deleteDatabase(o);n.onsuccess=()=>e(),n.onerror=()=>t(n.error)})}openAsync(){return new Promise((e,t)=>{const n=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB).open(this.name,this.version);n.onsuccess=()=>{this._db=n.result,e()},n.onerror=()=>this.errorHandler(n.error,"open",t),n.onupgradeneeded=e=>this.upgradeHandler(e,n)})}getAsync(o,r){return new Promise((e,t)=>{const n=this.getObjectStore(o).get(r);n.onsuccess=()=>e(n.result),n.onerror=()=>this.errorHandler(n.error,"get",t)})}getAllAsync(r){return new Promise((e,t)=>{const n=this.getObjectStore(r).openCursor(),o=[];n.onsuccess=()=>{n.result?(o.push(n.result.value),n.result.continue()):e(o)},n.onerror=()=>this.errorHandler(n.error,"getAll",t)})}setAsync(r,i){return new Promise((e,t)=>{var n=this.getObjectStore(r,"readwrite");let o;(o=void 0!==i.id&&null!==i.id?n.put(i):n.add(i)).onsuccess=()=>e(),o.onerror=()=>this.errorHandler(o.error,"set",t)})}deleteAsync(o,r){return new Promise((e,t)=>{const n=this.getObjectStore(o,"readwrite").delete(r);n.onsuccess=()=>e(),n.onerror=()=>this.errorHandler(n.error,"delete",t)})}deleteAllAsync(o){return new Promise((e,t)=>{const n=this.getObjectStore(o,"readwrite").clear();n.onsuccess=()=>e(),n.onerror=()=>this.errorHandler(n.error,"deleteAll",t)})}}l.IDBWrapper=F;class U{constructor(e){this.db=e,this.mem=new M}static dbName(){return"__pxt_translations_"+(u.appTarget.id||"")}static createAsync(){function t(){const e=new F(U.dbName(),2,(e,t)=>{t.result.createObjectStore(U.TABLE,{keyPath:U.KEYPATH})},()=>{R().catch(e=>{})});return e.openAsync().then(()=>new U(e))}return t().catch(e=>(console.log("db: failed to open database, try delete entire store..."),F.deleteDatabaseAsync(U.dbName()).then(()=>t())))}getAsync(t,n,o){t=(t||"en-US").toLowerCase();var e=this.mem.key(t,n,o),r=this.mem.get(t,n,o);return r?Promise.resolve(r):this.db.getAsync(U.TABLE,e).then(e=>e?(this.mem.set(t,n,o,e.etag,e.time,e.strings),Promise.resolve(e)):Promise.resolve(void 0)).catch(e=>Promise.resolve(void 0))}setAsync(e,t,n,o,r,i){e=(e||"en-US").toLowerCase();var s=this.mem.key(e,t,n),a=u.Util.now(),e=(this.mem.set(e,t,n,o,a,r,i),r&&Object.keys(r).filter(e=>!r[e]).forEach(e=>delete r[e]),{id:s,etag:o,time:a,strings:r,md:i});return this.db.setAsync(U.TABLE,e).finally(()=>l.scheduleStorageCleanup()).catch(e=>(console.log(`db: set failed (${e.message}), recycling...`),this.clearAsync()))}clearAsync(){return this.db.deleteAllAsync(U.TABLE).then(()=>console.debug("db: all clean")).catch(e=>{console.error("db: failed to delete all")})}}function j(){return u.Util.isNodeJS?Promise.resolve(new M):n=n||U.createAsync().catch(()=>new M)}function R(){function t(){const t=U.dbName();return F.deleteDatabaseAsync(t).then(()=>{n=void 0}).catch(e=>{u.log("db: failed to delete "+t),n=void 0})}return n?n.then(e=>e.clearAsync()).catch(e=>t().then()):t()}function P(e){e=JSON.stringify(e)+u.appTarget.versions.pxt+"_"+u.appTarget.versions.target;return pxtc.U.sha256(e)}function z(e,t){return e+"|"+(t||"master")}U.TABLE="files",U.KEYPATH="id",l.translationDbAsync=j,l.clearTranslationDbAsync=R,l.getTutorialCodeHash=P;class H{constructor(e){this.db=e}static dbName(){return"__pxt_tutorialinfo_"+(u.appTarget.id||"")}static createAsync(){function t(){const e=new u.BrowserUtils.IDBWrapper(H.dbName(),2,(e,t)=>{t.result.createObjectStore(H.TABLE,{keyPath:H.KEYPATH})},()=>{u.BrowserUtils.IDBWrapper.deleteDatabaseAsync(H.dbName())});return e.openAsync().then(()=>new H(e))}return t().catch(e=>(console.log("db: failed to open tutorial info database, try delete entire store..."),u.BrowserUtils.IDBWrapper.deleteDatabaseAsync(H.dbName()).then(()=>t())))}getAsync(e,t,n){const o=z(e,n),r=P(t);return this.db.getAsync(H.TABLE,o).then(e=>{if(e&&e.hash==r&&u.Util.now()-(e.time||0)<864e5)return e;this.db.deleteAsync(H.TABLE,o)})}setAsync(e,t,n,o){u.perf.measureStart("tutorial info db setAsync");n=P(n);return this.setWithHashAsync(e,t,n)}setWithHashAsync(e,n,t,o){u.perf.measureStart("tutorial info db setAsync");const r=z(e,o),i={};Object.keys(n).forEach(t=>{Object.keys(n[t]).forEach(e=>{i[e]=n[t][e]})});e={id:r,time:u.Util.now(),hash:t,snippets:n,blocks:i};return this.db.setAsync(H.TABLE,e).then(()=>{u.perf.measureEnd("tutorial info db setAsync")})}clearAsync(){return this.db.deleteAllAsync(H.TABLE).then(()=>console.debug("db: all clean")).catch(e=>{console.error("db: failed to delete all")})}}function L(e){return e.split(/\s+/).filter(e=>!!e)}function X(){var e=new RegExp(u.Util.escapeForRegex(u.Util.pxtLangCookieId)+"=(.*?)(?:;|$)").exec(document.cookie);return e&&e[1]||null}H.TABLE="info",H.KEYPATH="id",l.tutorialInfoDbAsync=function(){return o=o||H.createAsync()},l.clearTutorialInfoDbAsync=function(){function t(){const t=H.dbName();return F.deleteDatabaseAsync(t).then(()=>{o=void 0}).catch(e=>{u.log("db: failed to delete "+t),o=void 0})}return o?o.then(e=>e.clearAsync()).catch(e=>t().then()):t()},l.pointerEvents=x()?{up:"pointerup",down:["pointerdown"],move:"pointermove",enter:"pointerenter",leave:"pointerleave"}:v()?{up:"mouseup",down:["mousedown","touchstart"],move:"touchmove",enter:"touchenter",leave:"touchend"}:{up:"mouseup",down:["mousedown"],move:"mousemove",enter:"mouseenter",leave:"mouseleave"},l.getPageX=function(e){return("pageX"in e?e:e.changedTouches[0]).pageX},l.getPageY=function(e){return("pageY"in e?e:e.changedTouches[0]).pageY},l.getClientX=function(e){return("clientX"in e?e:e.changedTouches[0]).clientX},l.getClientY=function(e){return("clientY"in e?e:e.changedTouches[0]).clientY},l.popupWindow=function(e,t,n,o){try{const u=window.screenLeft||window.screenX,r=window.screenTop||window.screenY,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=i/2-n/2+u,l=s/2-o/2+r,c=window.open(e,t,"width="+n+", height="+o+", top="+l+", left="+a);return c.focus&&c.focus(),c}catch(t){return u.tickEvent("pxt.popupError",{url:e,msg:t.message}),null}},l.containsClass=function(n,e){return L(e).every(e=>{return e=e,(t=n).classList?t.classList.contains(e):!((t.className+"").split(/\s+/).indexOf(e)<0);var t})},l.addClass=function(n,e){L(e).forEach(e=>{var t;e=e,(t=n).classList?t.classList.add(e):(t.className+"").split(/\s+/).indexOf(e)<0&&(t.className.baseVal+=" "+e)})},l.removeClass=function(n,e){L(e).forEach(e=>{var t;t=e,(e=n).classList?e.classList.remove(t):e.className.baseVal=(e.className+"").split(/\s+/).filter(e=>e!=t).join(" ")})},l.getCookieLang=X,l.setCookieLang=function(e,t=!1){u.Util.allLanguages[e]&&e!==X()&&(u.tickEvent("menu.lang.setcookielang",{lang:e,docs:""+t}),(t=new Date).setTime(t.getTime()+24*u.Util.langCookieExpirationDays*60*60*1e3),document.cookie=`${u.Util.pxtLangCookieId}=${e}; expires=${t.toUTCString()}; path=/`)},l.cacheBustingUrl=function(e){return e&&(/[?&]rnd=/.test(e)?e:`${e}${0<e.indexOf("?")?"&":"?"}rnd=`+Math.random())}}}(pxt=pxt||{}),function(e){(e.cloud||(e.cloud={})).cloudStatus={none:{value:"none"},synced:{value:"synced",icon:"cloud-saved-b",tooltip:lf("Project saved to cloud"),shortStatus:lf("saved"),longStatus:lf("Saved to cloud"),indicator:""},justSynced:{value:"justSynced",icon:"cloud-saved-b",tooltip:lf("Project saved to cloud"),shortStatus:lf("saved!"),longStatus:lf("Saved to cloud!"),indicator:""},offline:{value:"offline",icon:"cloud-error-b",tooltip:lf("Unable to connect to cloud"),shortStatus:lf("offline"),longStatus:lf("Offline"),indicator:lf("offline")},syncing:{value:"syncing",icon:"cloud-saving-b",tooltip:lf("Saving project to cloud..."),shortStatus:lf("saving..."),longStatus:lf("Saving to cloud..."),indicator:lf("syncing...")},conflict:{value:"conflict",icon:"cloud-error-b",tooltip:lf("Project was edited in two places and the changes conflict"),shortStatus:lf("conflict!"),longStatus:lf("Project has a conflict!"),indicator:"!"},localEdits:{value:"localEdits",icon:"cloud-saving-b",tooltip:lf("Saving project to the cloud..."),shortStatus:lf("saving..."),longStatus:lf("Saving to cloud..."),indicator:"*"}}}(pxt=pxt||{}),function(e){var n;(n=e.commands||(e.commands={})).deployCoreAsync=void 0,n.deployFallbackAsync=void 0,n.hasDeployFn=()=>n.deployCoreAsync||n.deployFallbackAsync,n.deployAsync=(e,t)=>(n.deployCoreAsync||n.deployFallbackAsync)(e,t),n.patchCompileResultAsync=void 0,n.browserDownloadAsync=void 0,n.saveOnlyAsync=void 0,n.renderBrowserDownloadInstructions=void 0,n.renderUsbPairDialog=void 0,n.renderIncompatibleHardwareDialog=void 0,n.showUploadInstructionsAsync=void 0,n.saveProjectAsync=void 0,n.electronDeployAsync=void 0,n.webUsbPairDialogAsync=void 0,n.onTutorialCompleted=void 0}(pxt=pxt||{}),function(r){function e(){let e;return e||(e=r.U.isNodeJS?Promise.resolve(require("lzma")):Promise.resolve(window.LZMA)).then(e=>(e||r.reportError("lzma","failed to load"),e)),e}r.lzmaDecompressAsync=function(o){return e().then(t=>new Promise((n,e)=>{try{t.decompress(o,(e,t)=>{t&&r.debug("lzma decompression failed"),n(t?void 0:e)})}catch(e){e&&r.debug("lzma decompression failed"),n(void 0)}}))},r.lzmaCompressAsync=function(o){return e().then(t=>new Promise((n,e)=>{try{t.compress(o,7,(e,t)=>{t&&r.reportException(t),n(t?void 0:new Uint8Array(e))})}catch(e){r.reportException(e),n(void 0)}}))}}(pxt=pxt||{}),function(ce){{var e=ce.cpp||(ce.cpp={}),ue=pxtc.Util;let ae=ue.lf;const ge={"pxt::mkAction":1,"pxt::dumpPerfCounters":1,"pxt::deepSleep":1,"pxt::getConfig":1,"pxtrt::mkMap":1,"pxtrt::mapSet":1,"pxtrt::stclo":1,"pxtrt::mklocRef":1,"pxtrt::stlocRef":1,"pxtrt::ldlocRef":1,"pxtrt::panic":1};function de(n="namespace"){let o="",r="",e=(e,t="")=>{r!=e&&(r&&(o+="}\n"),e&&(o+=t||n+" "+e+" {\n"),r=e)},t="    ";return{setNs:e,clear:()=>{o="",r=""},write:e=>{e.trim()?(e=e.trim().replace(/^\s*/gm,t).replace(/^(\s*)\*/gm,(e,t)=>t+" *"),o+=e+"\n"):o+="\n"},incrIndent:()=>{t+="    "},decrIndent:()=>{t=t.slice(4)},finish:()=>(e(""),o)}}function pe(e){if(!e)return null;e=e.trim();var t=/^\((.*)\)/.exec(e);return t&&(e=t[1]),/^-?(\d+|0[xX][0-9a-fA-F]+)$/.test(e)?parseInt(e):null}e.nsWriter=de,e.parseCppInt=pe;let le={};class he extends Error{constructor(e){super(e),this.isUserError=!0,this.message=e}}function l(t){if(!t)return"";let n="";for(let e=0;e<t.length;++e){var o=255&t[e];n+=37==o||127<o?"%"+o.toString(16):String.fromCharCode(o)}return decodeURIComponent(n)}function c(e){let t="",n=0;for(;n<e.length;n+=2)t=e[n]+e[n+1]+t;return ce.Util.assert(n==e.length),t}function i(n){var o=[65,20,14,47,184,47,162,187];e:for(let t=0;t<n.length;t+=16)if(n[t]==o[0]){for(let e=0;e<o.length;++e)if(n[t+e]!=o[e])continue e;var e,r=n[t+8]|n[t+9]<<8,i=n[t+10]|n[t+11]<<8|n[t+12]<<16|n[t+13]<<24,i=(t+=16)+r+i;if(!(i>n.length))return e=n.slice(t,t+r),r=n.slice(t+r,i),{meta:l(e),text:r}}return null}function t(e){function t(e){return ce.debug(e),Promise.reject(new Error(e))}let n;var o;if(ce.HF2.read32(e,0)==ts.pxtc.UF2.UF2_MAGIC_START0&&(o=ts.pxtc.UF2.toBin(e))&&(n=i(o.buf)),1179403647==ce.HF2.read32(e,0)&&(n=i(e)),!(n=58==e[0]?function(e){if(e){let n,o=0,r=0,i=0,s=0;if(e.split(/\r?\n/).forEach(e=>{var t=/^:10....0[0E]41140E2FB82FA2BB(....)(....)(....)(....)(..)/.exec(e);if(t)o=parseInt(c(t[1]),16),r=parseInt(c(t[2]),16),i=o+r,n=new Uint8Array(i);else if(0<i&&(t=/^:10....0[0E](.*)(..)$/.exec(e))){let e=t[1];for(;0<i&&0<e.length;)n[s++]=parseInt(e[0]+e[1],16),e=e.slice(2),i--}}),n&&0==i&&s==n.length){var t=new Uint8Array(o),a=new Uint8Array(r);for(let e=0;e<o;++e)t[e]=n[e];for(let e=0;e<r;++e)a[e]=n[o+e];return{meta:l(t),text:a}}}}(l(e)||""):n)||!n.meta||!n.text)return t("This .hex file doesn't contain source.");let r=JSON.parse(n.meta);return r?"LZMA"==r.compression?ce.lzmaDecompressAsync(n.text).then(e=>{var t;return e?(t=e.slice(0,r.headerSize||r.metaSize||0),e=e.slice(t.length),t&&ce.Util.jsonCopyFrom(r,JSON.parse(t)),{meta:r,source:e}):null}):r.compression?t(`Compression type ${r.compression} not supported.`):Promise.resolve({source:l(n.text)}):t("This .hex file is not valid.")}e.PkgConflictError=he,e.getExtensionInfo=function(t){var e,L={__appVariant:ce.appTargetVariant||""},M="dal.d.ts";let n="/source/",o="",F=[];for(e of t.sortedDeps(!0).sort((e,t)=>"this"==e.id?1:"this"==t.id?-1:ue.strcmp(e.id,t.id)))e.disablesVariant(ce.appTargetVariant)||e.resolvedDependencies().some(e=>e.disablesVariant(ce.appTargetVariant))?(o&&(o+=", "),o+=e.id,ce.debug(`disable variant ${ce.appTargetVariant} due to `+e.id)):(F.push(e),e.addSnapshot(L,[M,".h",".cpp"]));var r,U=JSON.stringify(L),i=le[U];if(i){ce.debug("Using cached extinfo");const t=ue.flatClone(i);return t.disabledDeps=o,t}ce.debug("Generating new extinfo");const m=pxtc.emptyExtInfo();m.disabledDeps=o;let s=ce.appTarget.compileService,a=(s=s||{gittag:"none",serviceId:"nocompile"},s=ue.clone(s),t.getTargetOptions());a=a||{isNative:!1,hasHex:!1,switches:{}};const H=!!s.platformioIni,l="codal"==s.buildEngine||"dockercodal"==s.buildEngine,V="dockermake"==s.buildEngine||"dockercross"==s.buildEngine,W="dockerespidf"==s.buildEngine,f=!(H||l||V||W),G=a.nativeType==pxtc.NATIVE_TYPE_VM;H?n="/src/":l||V?n="/pxtapp/":W&&(n="/main/");let K="// Configuration defines\n",y="\nPXT_SHIMS_BEGIN\n",k="",j="",z='#include "pxt.h"\n',c="",b=e=>c+=`   ${$}(${X}): ${e}
`,X=0,$="",v=de("namespace"),T=de("declare namespace"),E=de("declare namespace"),Y="",q={},J={};const Q={true:"1",false:"0",null:"0",NULL:"0"};function S(e){return e.trim().replace(/[\_\*]$/,"")}for(const t of F){if(0<=t.getFiles().indexOf(M)){const ue=t.host().readFile(t,M);ce.Util.assert(!!ue,"dal.d.ts not found in "+t.id),ue.split(/\r?\n/).forEach(e=>{e=/^\s*(\w+) = (.*),/.exec(e);e&&(Q[e[1]]=e[2])})}for(const ce of t.getFiles())(0<=["Makefile","sdkconfig.defaults","CMakeLists.txt"].indexOf(ce)||ue.endsWith(ce,".mk"))&&(m.generatedFiles["/"+ce]=t.host().readFile(t,ce))}let Z=["0","false","PXT_UTF8"],u={};function ee(e){return e.replace(/\/\/.*/,"").replace(/\/\*/,"")}a.switches.boxDebug&&(u.PXT_BOX_DEBUG=1),a.utf8&&(u.PXT_UTF8=1),a.switches.profile&&(u.PXT_PROFILE=1),a.switches.gcDebug&&(u.PXT_GC_DEBUG=1),a.switches.numFloat&&(u.PXT_USE_FLOAT=1),a.nativeType==pxtc.NATIVE_TYPE_VM&&(u.PXT_VM=1);let C=0,x=!1,B="",A="",I="",D=!1;function te(){T.setNs(""),T.write(""),T.write(""),(I||A)&&(T.write(A),T.write(I),I="",A="")}function ne(e,d){let p,t=(B="",A="",I="",D=!1,-1);function g(){var e=B.replace(/Methods$/,"");return e==B?null:e}function h(e){switch(e.replace(/\s+/g,"")){case"void":return"void";case"int32_t":case"int":return"int32";case"uint32_t":case"unsigned":return"uint32";case"TNumber":case"float":case"double":return"number";case"uint16_t":return"uint16";case"int16_t":case"short":return"int16";case"uint8_t":case"byte":return"uint8";case"int8_t":case"sbyte":return"int8";case"bool":return a.shortPointers&&b("use 'boolean' not 'bool' on 8 bit targets"),"boolean";case"StringData*":case"String":case"ImageLiteral_":case"ImageLiteral":return"string";case"Action":return"() => void";case"TValue":return"any";default:return S(e)}}function _(e){switch(e=e.replace(/\s+/g,"")){case"int32_t":case"uint32_t":case"unsigned":case"uint16_t":case"int16_t":case"short":case"uint8_t":case"byte":case"int8_t":case"sbyte":case"int":case"ramint_t":return"I";case"void":return"V";case"float":return"F";case"TNumber":return"N";case"TValue":return"T";case"bool":return"B";case"double":return"D";case"ImageLiteral_":return"T";case"String":return"S";default:return ue.lookup(q,e)?"I":"_"+e.replace(/[\*_]+$/,"")}}e=e.replace(/^(\s*#\s*if\s+(\w+)\s*$)([^]*?)(^\s*#\s*(elif|else|endif)\s*$)/gm,(e,t,n,o,r)=>0<=Z.indexOf(n)&&!u[n]?t+o.replace(/[^\n]/g,"")+r:e),X=0,x=!1,C=0,E.setNs(""),T.setNs(""),e.split(/\r?\n/).forEach(c=>{++X;var u=ee(c),e=c,o=ee(e);if(x&&0<=o.indexOf("}")&&(x=!1,E.write("}")),x){var r=/^\s*(\w+)\s*(=\s*(.*?))?,?\s*$/.exec(o);if(r){let e=r[1],t=r[3],n="";t?(t=t.trim(),null!=(r=ue.lookup(Q,t))&&(n="  // "+t,t=r),null==(C=pe(t))&&b("cannot determine value of "+o)):(C++,t=C+""),E.write(`    ${S(e)} = ${t},`+n)}else E.write(e)}r=/^\s*enum\s+(|class\s+|struct\s+)(\w+)\s*({|$)/.exec(u);if(r&&(o=r[2],e=r[3],x=!0,C=-1,E.write(""),E.write(""),(I||A)&&(E.write(A),E.write(I),I="",A=""),E.write(`declare const enum ${S(o)} `+e),q[o]=!0,d||(v.setNs(B),v.write(`enum ${r[2]} : int;`))),u=c,!x&&!(/^\s*\/\*\*/.test(u)?(D=!0,A=u+"\n",/\*\//.test(u)&&(D=!1),1):D?(A+=u+"\n",/\*\//.test(u)&&(D=!1),1):/^\s*\/\/%/.test(u)&&(I+=u+"\n",1))){/^typedef.*;\s*$/.test(c)&&(v.setNs(B),v.write(c));let l=/^\s*namespace\s+(\w+)/.exec(c);if(l)B=l[1],g()?(te(),e=g(),T.setNs(B,`declare interface ${e} {`)):(I||A)&&(te(),T.setNs(S(B)),E.setNs(S(B)));else{if((l=/^PXT_ABI\((\w+)\)/.exec(c))&&!G&&(y+=`PXT_FNPTR(::${l[1]}),
`,j+=`extern "C" void ${l[1]}();
`,m.functions.push({name:l[1],argsFmt:[],value:0})),(l=/^\s*PXT_EXPORT\(([:\&\w]+)\)/.exec(c))&&(m.vmPointers||(m.vmPointers=[]),m.vmPointers.push(l[1])),(l=/^#define\s+PXT_COMM_BASE\s+([0-9a-fx]+)/.exec(c))&&(m.commBase=parseInt(l[1])),l=/^\s*(\w+)([\*\&]*\s+[\*\&]*)(\w+)\s*\(([^\(\)]*)\)\s*(;\s*$|\{|$)/.exec(c),!I||!l){if(l=/^\s*extern const (\w+) (\w+);/.exec(c),I&&l)return o={name:B+"::"+l[2],argsFmt:[],value:null},m.functions.push(o),G||(y+="PXT_FNPTR(&::"+o.name+"),\n"),void(I="");if(l=/^\s*(\w+)\s+(\w+)\s*;/.exec(c),I&&l){var u=pxtc.parseCommentString(I),e=(u.indexedInstanceNS&&(p=u,T.setNs(u.indexedInstanceNS),t=0),l[1]),o=l[2];if(p)return I=I.trim(),I+=` fixedInstance shim=${p.indexedInstanceShim}(${t++})`,T.write(""),T.write(A),T.write(I),T.write(`const ${o}: ${h(e)};`),A="",void(I="")}return I&&c.trim()?(b("declaration not understood: "+c),I="",void(A="")):void 0}{p=null;let t=pxtc.parseCommentString(I),e=(B||b("missing namespace declaration"),(l[1]+l[2]).replace(/\s+/g,"")),n=l[3],o=l[4],r=(I=I.trim().replace(/ \w+\.defl=\w+/g,""),[_(e)]),i=[],s=o.split(/,/).filter(e=>!!e).map(e=>{e=function(e,t){t=t.trim();let n=/(.*)=\s*(-?\w+)$/.exec(t),o="",r="";var i;return n&&(o=n[2],r="?",t=n[1].trim()),(n=/^(.*?)(\w+)$/.exec(t))?(i=n[2],e.paramDefl[i]&&(o=e.paramDefl[i],r="?"),e=o?ue.lookup(Q,o):null,(o=null!=e?e:o)&&(null==pe(o)&&b("Invalid default value (non-integer): "+o),I+=` ${i}.defl=`+o),{name:i+r,type:n[1]}):(b("invalid argument: "+t),{name:"???",type:"int"})}(t,e);return r.push(_(e.type)),i.push(e.type.replace(/ /g,"")),e.name+": "+h(e.type)}),a={name:B+"::"+n,argsFmt:r,value:null};if(A&&(T.setNs(S(B)),T.write(""),T.write(A),/ImageLiteral/.test(l[4])&&!/imageLiteral=/.test(I)&&(I+=" imageLiteral=1"),I+=" shim="+a.name,T.write(I),n=S(n),g()?((u=(s[0]||"").replace(/^.*:\s*/,"").trim()).toLowerCase()!=g().toLowerCase()&&b(ae("Invalid first argument; should be of type '{0}', but is '{1}'",g(),u)),s.shift(),0==s.length&&/\bproperty\b/.test(I)?T.write(`${n}: ${h(e)};`):T.write(`${n}(${s.join(", ")}): ${h(e)};`)):T.write(`function ${n}(${s.join(", ")}): ${h(e)};`)),A="",I="",d||(v.setNs(B),v.write(`${e} ${n}(${o});`)),m.functions.push(a),f)y+="(uint32_t)(void*)::"+a.name+",\n";else if(G){if(ue.startsWith(a.name,"pxt::op_")||ge[a.name]||t.expose||!ue.startsWith(a.name,"pxt::")&&!ue.startsWith(a.name,"pxtrt::")){const c=function(s,a){if("FiberContext*"==a[0])return"::"+s.name;var e="_wrp_"+s.name.replace(/:/g,"_");if(!J[s.name]){J[s.name]=!0,k+=`
void ${e}(FiberContext *ctx) {
`;var l=a.length;let o=[],r=!1,i="";for(let n=0;n<l;++n){const u=s.argsFmt[n+1],d=a[n];let e="I"==u?"toInt":"B"==u?"numops::toBool":"";var c=n==l-1?"ctx->r0":`ctx->sp[${l-n-2}]`;let t="";switch(d){case"TValue":case"TNumber":break;case"Action":e="asRefAction";break;case"String":e="convertToString",t="ctx, ",r=!0;break;default:e=e||"as"+d.replace(/\*/g,"")}i+=`  ${d} a${n} = (${d}) ${e}(${t}${c});
`,o.push("a"+n)}r&&(k+="  auto prevSP = ctx->sp;\n"),k+=i,r&&(k+="  if (panicCode) { ctx->sp = prevSP; return; }\n");const u=`::${s.name}(${o.join(", ")})`;"V"==s.argsFmt[0]?k=k+`  ${u};
`+"  ctx->r0 = NULL;\n":"I"==s.argsFmt[0]?k+=`  ctx->r0 = fromInt(${u});
`:"B"==s.argsFmt[0]?k+=`  ctx->r0 = fromBool(${u});
`:k+=`  ctx->r0 = (TValue)${u};
`,r&&(k+="  ctx->sp = prevSP;\n"),1<l&&(k+=`  ctx->sp += ${l-1};
`),k+="}\n"}return e}(a,i),d=a.argsFmt.length-1;y+=`{ "${a.name}", (OpFun)(void*)${c}, ${d} },
`}}else y+="PXT_FNPTR(::"+a.name+"),\n"}}}})}const oe=ue.clone(s.yottaConfig||{}),d={},re={},ie={};if(f&&a.hasHex&&(i=s,ue.assert(!!i.yottaCorePackage),ue.assert(!!i.githubCorePackage),ue.assert(!!i.gittag),w=i.githubCorePackage+"#"+s.gittag,m.yotta.dependencies[i.yottaCorePackage]=w),t){let e=!1;for(var p of F){c="";{g=void 0;r=void 0;var g=p;const O=g.config.platformio,R=(O&&O.dependencies&&ue.jsonCopyFrom(m.platformio.dependencies,O.dependencies),m.npmDependencies&&g.config.npmDependencies&&ue.jsonCopyFrom(m.npmDependencies,g.config.npmDependencies),g.config.codal);if(l&&R)for(const g of R.libraries||[]){const O=ce.github.parseRepoId(g),R=(O||ue.userError(ae("codal library {0} doesn't look like github repo",g)),ce.github.stringifyRepo(O)),P=ue.lookup(ie,O.project);P?ce.github.stringifyRepo(P)!=R&&ue.userError(ae("conflict between codal libraries: {0} and {1}",ce.github.stringifyRepo(P),R)):ie[O.project]=O}const P=g.config.yotta;if(P){if(P.dependencies&&ue.jsonCopyFrom(m.yotta.dependencies,P.dependencies),P.config){const ce=ue.jsonFlatten(P.config);for(const O of Object.keys(ce)){const R=ue.lookup(re,O),P=ce[O];if(!R||R.config.yotta.configIsJustDefaults)re[O]=g,oe[O]=P;else if(oe[O]!==P)if(!g.parent.config.yotta||!g.parent.config.yotta.ignoreConflicts)throw(r=new he(ae("conflict on yotta setting {0} between extensions {1} and {2}",O,g.id,R.id))).pkg0=R,r.pkg1=g,r.settingName=O,r}}if(P.optionalConfig){const ce=ue.jsonFlatten(P.optionalConfig);for(const g of Object.keys(ce)){const ue=ce[g];d[g]=ue}}}}p==t?(e=!0,T.clear(),E.clear()):ue.assert(!e);const de=e=>ue.endsWith(e,".h"),pe=".cpp",le=p.getFiles().filter(de).concat(p.getFiles().filter(e=>!de(e)));for(var h of le){const t=de(h);if(t||ue.endsWith(h,".cpp")){let e=p.config.name+"/"+h;("base"==p.config.name||/^core($|---)/.test(p.config.name))&&t&&(e=h),t&&(z+=`#include "${f?n.slice(1):""}${e}"
`);var _=p.readFile(h);null==_&&ue.userError(ae("C++ file {0} is missing in extension {1}.",h,p.config.name)),$=e,ne(_,t),m.extensionFiles[n+e]=_,0==p.level&&(m.onlyPublic=!1),p.verProtocol()&&"pub"!=p.verProtocol()&&"embed"!=p.verProtocol()&&(m.onlyPublic=!1)}(ue.endsWith(h,".c")||ue.endsWith(h,".S")||ue.endsWith(h,".s"))&&(_=p.readFile(h),m.extensionFiles[n+p.config.name+"/"+h.replace(/\.S$/,".s")]=_)}c&&(Y+=ae("Extension {0}:\n",p.id)+c)}e||(T.clear(),E.clear())}function N(t){return Object.keys(m.extensionFiles).concat(Object.keys(m.generatedFiles)).filter(e=>ue.endsWith(e,t)).map(e=>e.slice(1))}Y&&ue.userError(Y),ue.jsonCopyFrom(d,oe),ue.iterMap(d,(e,t)=>{null===t&&delete d[e]}),Object.keys(d).filter(e=>/-/.test(e)).forEach(e=>{var t=d[e];delete d[e],d[e.replace(/-/g,"_")]=t}),!f&&s.yottaConfigCompatibility&&Object.keys(d).forEach(e=>d["YOTTA_CFG_"+e]=d[e]),d.PXT_TARGET=JSON.stringify(ce.appTarget.id);var se,i=ue.jsonUnFlatten(d);if(V){var w={name:"pxt-app",private:!0,dependencies:m.npmDependencies};m.generatedFiles["/package.json"]=JSON.stringify(w,null,4)+"\n"}else if(W){const ce=ue.concatArrayLike([N(".c"),N(".cpp"),N(".s")]).map(e=>e.slice(n.length-1)).concat(["main.cpp"]);ce.push("pointers.cpp"),m.generatedFiles[n+"CMakeLists.txt"]="idf_component_register(\n  SRCS\n"+ce.map(e=>`    "${e}"
`).join("")+'  INCLUDE_DIRS\n    "."\n)\n'}else if(l){let e=s,n=ue.clone(e.codalDefinitions)||{},t=e.codalTarget;"string"==typeof t&&(t+=".json");w={target:t,definitions:n,config:n,application:"pxtapp",output_folder:"build",pxt_gitrepo:e.githubCorePackage,pxt_gittag:e.gittag,libraries:ue.values(ie).map(e=>({name:e.project,url:"https://github.com/"+e.fullName,branch:e.tag||"master",type:"git"}))};0==w.libraries.length&&delete w.libraries,ue.iterMap(ue.jsonFlatten(i),(e,t)=>{e=e.replace(/^codal\./,"device.").toUpperCase().replace(/\./g,"_"),n[e]=t}),m.generatedFiles["/codal.json"]=JSON.stringify(w,null,4)+"\n",ce.debug("codal.json: "+m.generatedFiles["/codal.json"])}else if(H){const ce=s.platformioIni.slice();ce.push("lib_deps ="),ue.iterMap(m.platformio.dependencies,(e,t)=>{e=/[@#\/]/.test(t)?t:e+"@"+t;ce.push("  "+e)}),m.generatedFiles["/platformio.ini"]=ce.join("\n")+"\n"}else{m.yotta.config=i;let e="pxt-app";w={name:e=s.yottaBinary?s.yottaBinary.replace(/-combined/,"").replace(/\.hex$/,""):e,version:"0.0.0",description:"Auto-generated. Do not edit.",license:"n/a",dependencies:m.yotta.dependencies,targetDependencies:{},bin:"./source"};m.generatedFiles["/module.json"]=JSON.stringify(w,null,4)+"\n",ce.debug("module.json: "+m.generatedFiles["/module.json"])}for(se of Object.keys(u))K+=`#define ${se} ${u[se]}
`;if(a.uf2Family&&(K+=`#define PXT_UF2_FAMILY ${a.uf2Family}
`),m.generatedFiles[n+"pointers.cpp"]=z+v.finish()+j+k+y+"\nPXT_SHIMS_END\n",m.generatedFiles[n+"pxtconfig.h"]=K,ce.debug("pxtconfig.h: "+m.generatedFiles[n+"pxtconfig.h"]),f&&(m.generatedFiles["/config.json"]=JSON.stringify(i,null,4)+"\n",ce.debug("yotta config.json: "+m.generatedFiles["/config.json"])),m.generatedFiles[n+"main.cpp"]='\n#include "pxt.h"\n#ifdef PXT_MAIN\nPXT_MAIN\n#else\nint main() {\n    uBit.init();\n    pxt::start();\n    release_fiber();\n    return 0;   // your program will never reach this line.\n}\n#endif\n',m.generatedFiles["/Makefile"]){let n="",e=(e,t)=>{n+=`${e} = ${N(t).join(" ")}\n`};e("PXT_C",".c"),e("PXT_CPP",".cpp"),e("PXT_S",".s"),e("PXT_HEADERS",".h"),n=n+"PXT_SOURCES := $(PXT_C) $(PXT_S) $(PXT_CPP)\n"+"PXT_OBJS := $(addprefix bld/, $(PXT_C:.c=.o) $(PXT_S:.s=.o) $(PXT_CPP:.cpp=.o))\n",m.generatedFiles["/Makefile.inc"]=n}m.generatedFiles["/functions.json"]=JSON.stringify(m.functions,null,1);w=m.extensionFiles,ue.jsonCopyFrom(w,m.generatedFiles),i={config:s.serviceId,tag:s.gittag,replaceFiles:w,dependencies:f?m.yotta.dependencies:null},w=JSON.stringify(i);return m.sha=ue.sha256(w),m.skipCloudBuild=!!s.skipCloudBuild,m.compileData=ts.pxtc.encodeBase64(ue.toUTF8(w)),m.shimsDTS=T.finish(),m.enumsDTS=E.finish(),(le=10<Object.keys(le).length?{}:le)[U]=m},e.unpackSourceFromHexFileAsync=function(e){if(e)return ce.Util.fileReadAsBufferAsync(e).then(e=>t(new Uint8Array(e)))},e.unpackSourceFromHexAsync=t}}(pxt=pxt||{}),function(u){{var o=u.hexloader||(u.hexloader={});const t={};let n,i={};function s(e){return t.hasOwnProperty(e.sha)||(t[e.sha]=function(t){let c="";return o.showLoading(u.U.lf("Compiling (this may take a minute)...")),u.tickEvent("cppcompile.start"),((e=t).skipCloudBuild?Promise.resolve({hex:["SKIP"]}):u.webConfig&&u.webConfig.isStatic?u.Util.requestAsync({url:`${u.webConfig.cdnUrl}hexcache/${e.sha}.hex`}).then(e=>{if(e.text){const u={enums:[],functions:[],hex:e.text.split(/\r?\n/)};return Promise.resolve(u)}return u.log("Hex info not found in bundled hex cache"),Promise.resolve()}).catch(e=>(u.log("Error fetching hex info from bundled hex cache"),Promise.resolve())):u.Cloud.localToken&&window&&u.BrowserUtils.isLocalHost()?(e="compile/"+e.sha,u.Cloud.localRequestAsync(e,void 0).then(e=>e.json).then(e=>e&&!e.notInOfflineCache&&e.hex?(e.hex=e.hex.split(/\r?\n/),e):Promise.resolve(void 0)).catch(e=>Promise.resolve(void 0))):Promise.resolve(void 0)).then(e=>{return e?(u.tickEvent("cppcompile.cachehit"),e):(n||(e=u.getOnlineCdnUrl(),n=e?Promise.resolve(e):(e=u.webConfig&&u.webConfig.isStatic,u.Cloud.privateGetAsync("clientconfig",e).then(e=>e.primaryCdnUrl)))).then(e=>(c=e+"/compile/"+t.sha,u.U.httpGetTextAsync(c+".hex"))).then(e=>e,e=>u.Cloud.privatePostAsync("compile/extension",{data:t.compileData},!0).then(l=>new Promise((n,e)=>{let o=0;const r=8e3,i=18e4,s=u.U.now(),a=()=>{if(o++,u.U.now()-s>i)return u.log("abandoning C++ build"),u.tickEvent("cppcompile.cancel",{retry:o}),n(null),null;let t=l.hex.replace(/\.hex/,".json");return u.log(`polling C++ build ${t} (attempt #${o})`),u.tickEvent("cppcompile.poll",{retry:o}),u.Util.httpGetJsonAsync(t).then(e=>{u.log("build log "+t.replace(/\.json$/,".log")),u.tickEvent("cppcompile.done",{success:null!=e&&e.success?1:0,retry:o,duration:u.U.now()-s}),e.success?(u.log("fetching "+c+".hex"),n(u.U.httpGetTextAsync(c+".hex"))):(u.log("build failed"),e.mbedresponse&&e.mbedresponse.result&&e.mbedresponse.result.exception&&u.log(e.mbedresponse.result.exception),n(null))},e=>(u.log(`waiting ${r/1e3|0}s for C++ build...`),setTimeout(a,r),null))};a()}))).then(e=>(o.hideLoading(),{hex:e&&e.split(/\r?\n/)}))}).finally(()=>{o.hideLoading()});var e}(e)),t[e.sha]}function a(n,o,r,e,i=10){return n.cacheStoreAsync(r,e).then(()=>n.cacheGetAsync(o)).then(e=>{let t;try{t=JSON.parse(e||"[]")}catch(e){console.error("invalid cache entry, clearing entry"),t=[]}(t=t.filter(e=>e!=r)).unshift(r);e=t.slice(i);return t=t.slice(0,i),u.U.promiseMapAll(e,e=>n.cacheStoreAsync(e,"[]")).then(()=>n.cacheStoreAsync(o,JSON.stringify(t)))})}function l(n,o,r){return n.cacheGetAsync(o).then(e=>{let t;try{t=JSON.parse(e||"[]")}catch(e){return console.error("invalid cache entry, clearing entry"),n.cacheStoreAsync(o,"[]")}return t[0]!=r?((t=t.filter(e=>e!=r)).unshift(r),n.cacheStoreAsync(o,JSON.stringify(t))):null})}o.showLoading=e=>{},o.hideLoading=()=>{},o.storeWithLimitAsync=a,o.recordGetAsync=l,o.getHexInfoAsync=function(o,n,e){if(!n.sha)return Promise.resolve(null);var t=i[n.sha];if(t)return Promise.resolve(t);u.debug("get hex info: "+n.sha);let r="hex-"+n.sha;return o.cacheGetAsync(r).then(e=>{let t;try{t=e?JSON.parse(e):null}catch(e){console.log("invalid cache entry, clearing entry"),t=null}return t&&t.hex?(u.debug("cache hit, size="+e.length),t.hex=function(o){var i=[];for(let n=0;n<o.length;n++){var s=/^([@!])(....)$/.exec(o[n]);if(s){let e=parseInt(s[2],16),t=o[++n],r="";if("@"==s[1]){r="";let e=parseInt(t,16);for(;0<e--;)r+="\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}else r=ts.pxtc.decodeBase64(t);u.Util.assert(0<r.length),u.Util.assert(r.length%16==0);for(let o=0;o<r.length;){var a=[16,e>>8&255,255&e,0];e+=16;for(let e=0;e<16;++e)a.push(r.charCodeAt(o++));let t=0;for(let e=0;e<a.length;++e)t+=a[e];a.push(255&-t);let n=":";for(let e=0;e<a.length;++e){var l=255&a[e];l<=15&&(n+="0"),n+=l.toString(16)}i.push(n.toUpperCase())}}else i.push(o[n])}return i}(t.hex),l(o,"hex-keys",r).then(()=>t)):s(n).then(e=>{var t=e.hex,n=(e.hex=function(r){let i=[],s=0;for(let o=0;o<r.length;o+=s){let e=-1,n="",t=(s=0,!1);for(;s<500;){var a=/^:10(....)00(.{32})(..)$/.exec(r[o+s]);if(!a)break;var l=a[2],c=/^0+$/.test(l),u=parseInt(a[1],16);if(-1==e)t=c,i.push((t?"@":"!")+a[1]),e=u-16;else{if(c!=t)break;if(e+16!=u)break}t||(n+=l),e=u,s++}if(0==s)i.push(r[o]),s=1;else if(t)i.push(s.toString(16));else{let t="";for(let e=0;e<n.length;e+=2)t+=String.fromCharCode(parseInt(n.slice(e,e+2),16));i.push(ts.pxtc.encodeBase64(t))}}return i}(e.hex),JSON.stringify(e));return e.hex=t,a(o,"hex-keys",r,n).then(()=>e)}).catch(e=>(u.reportException(e,{sha:n.sha}),Promise.resolve(null)))}).then(e=>(e&&((i=20<Object.keys(i).length?{}:i)[n.sha]=e),e))}}}(pxt=pxt||{}),function(g){function h(e,t,n={},o=null,r=null){if(i.testMode||e==i.TEST_KEY){const g={success:!0};return Promise.resolve({statusCode:200,headers:{},text:JSON.stringify(g),json:g})}return g.Util.multipartPostAsync(t,n,o,r)}function _(e,t,n,o,r){g.Util.assert(!!t&&!!n&&!!o);t="https://api.crowdin.com/api/project/"+t+"/";return r=r||{},i.testMode?delete r.key:r.key=n,e&&(r.branch=e),t+o+"?"+Object.keys(r).map(e=>e+"="+encodeURIComponent(r[e])).join("&")}function e(e){let t=0;return function(){if(10<t++)throw new Error("Too many API calls for "+e)}}function m(n,o,r,i,s){return i=t(i),g.debug(`create directory ${n||""}/`+i),s=s||e(i),h(r,_(n,o,r,"add-directory"),{json:"true",name:i}).then(e=>{if(g.debug("crowdin resp: "+e.statusCode),200==e.statusCode||400==e.statusCode)return Promise.resolve();if(500==e.statusCode&&e.text&&50===JSON.parse(e.text).error.code)return g.log("directory already exists"),Promise.resolve();var t=e.json||JSON.parse(e.text)||{error:{}};if(404==e.statusCode&&17==t.error.code){g.log("parent directory missing for "+i);const e=i.replace(/\/[^\/]+$/,"");if(e!=i)return m(n,o,r,e,s).then(()=>m(n,o,r,i,s))}throw new Error(`cannot create directory ${n||""}/${i}: ${e.statusCode} `+JSON.stringify(t))})}function t(e){return e.replace(/\\/g,"/")}function o(t,n){const o=g.appTarget.versions.pxtCrowdinBranch||"",r=g.appTarget.versions.targetCrowdinBranch||"";let i=[];if(t.forEach(e=>function t(n,o,r,i){const e=o.name,s=r?r+"/"+e:e;switch(o.fullName=s,o.branch=i||"",o.node_type){case"file":n.push(o);break;case"directory":(o.files||[]).forEach(e=>t(n,e,s,i));break;case"branch":(o.files||[]).forEach(e=>t(n,e,r,o.name))}}(i,e,"")),i=i.filter(e=>e.fullName.indexOf("/")<0?e.branch==o:e.branch==r),n&&(i=i.filter(e=>0==e.fullName.indexOf(n))),"core"!=g.appTarget.id){const t=g.appTarget.id+"/";i=i.filter(e=>e.fullName.indexOf("/")<0||e.fullName.substr(0,t.length)==t||0<=e.fullName.indexOf("common-docs"))}return i}function r(e,t){e=_("",e,t,"info",{json:"true"});return g.Util.httpGetTextAsync(e).then(e=>JSON.parse(e))}var i;(i=g.crowdin||(g.crowdin={})).KEY_VARIABLE="CROWDIN_KEY",i.testMode=!1,i.TEST_KEY="!!!testmode!!!",i.setTestMode=function(){g.crowdin.testMode=!0,g.log("CROWDIN TEST MODE - files will NOT be uploaded")},i.downloadTranslationsAsync=function(i,s,a,l,c={}){const e=_(i,s,a,"info",{json:"true"}),u={};return l=t(l),g.Util.httpGetTextAsync(e).then(e=>{e=JSON.parse(e);if(!e)throw new Error("info failed");let o=e.languages.filter(e=>"en"!=e.code);g.appTarget&&g.appTarget.appTheme&&g.appTarget.appTheme.availableLocales&&(o=o.filter(e=>-1<g.appTarget.appTheme.availableLocales.indexOf(e.code))),g.log("languages: "+o.map(e=>e.code).join(", "));const r=()=>{const t=o.pop();if(!t)return Promise.resolve();const n=_(i,s,a,"export-file",{file:l,language:t.code,export_translated_only:c.translatedOnly?"1":"0",export_approved_only:c.validatedOnly?"1":"0"});return g.log(`downloading ${t.name} - ${t.code} (${o.length} more)`),g.Util.httpGetTextAsync(n).then(e=>{try{const g=JSON.parse(e);g&&(u[t.code]=g)}catch(e){g.log(n+" "+e)}return r()}).then(()=>g.Util.delay(1e3))};return r()}).then(()=>u)},i.createDirectoryAsync=m,i.uploadTranslationAsync=function i(s,a,l,c,u){g.Util.assert(!!a),g.Util.assert(!!l);const d=e(c=t(c));function p(){return function r(e,t){return t.type="auto",t.json="",t.escape_quotes="0",d(),h(l,_(s,a,l,e),t,c,u).then(e=>{{var t;const n=e.statusCode,o=g.Util.jsonTryParse(e.text)||{};if(g.debug("upload result: "+n),404==n&&o.error&&8==o.error.code)return g.log("create new translation file: "+c),r("add-file",{});if(404==n&&17==(null==(t=o.error)?void 0:t.code))return m(s,a,l,c.replace(/\/[^\/]+$/,""),d).then(()=>p());if(o.success||53!=(null==(t=o.error)?void 0:t.code)){if(429==n&&55==(null==(t=o.error)?void 0:t.code))return g.log("Maximum concurrent requests reached, waiting 10s and retry..."),g.U.delay(1e4).then(()=>i(s,a,l,c,u));if(200==n||o.success)return Promise.resolve();throw new Error(`Error, upload translation: ${c}, ${n}, `+e.text)}return g.log(c+" being updated, waiting 5s and retry..."),g.U.delay(5e3).then(()=>i(s,a,l,c,u))}})}("update-file",{update_option:"update_as_unapproved"})}return p()},i.projectInfoAsync=r,i.listFilesAsync=function(e,t,n){return g.log("crowdin: listing files under "+n),r(e,t).then(e=>{if(e)return e=o(e.files,n),g.debug(`crowdin: found ${e.length} under `+n),e.map(e=>({fullName:e.fullName,branch:e.branch||""}));throw new Error("info failed")})},i.languageStatsAsync=function(e,t,n){e=_("",e,t,"language-status",{language:n,json:"true"});return g.Util.httpGetJsonAsync(e).then(e=>o(e.files))},i.inContextLoadAsync=function(o){const r=document.createElement("input");r.type="text",r.setAttribute("class","hidden"),r.value=o;var e=new Promise((t,e)=>{const n=new MutationObserver(()=>{var e;o!=r.value&&(e=g.Util.rlf(r.value),r.remove(),n.disconnect(),t(e))});n.observe(r,{attributes:!0})});return document.body.appendChild(r),e}}(pxt=pxt||{}),function(h){function C(e){return e?e.split(/\r?\n/):[]}function _(e,o,r={}){r.ignoreWhitespace&&(e=e.replace(/[\r\n]+$/,""),o=o.replace(/[\r\n]+$/,""));const i=C(e),s=C(o),a=Math.min(r.maxDiffSize||1024,i.length+s.length);if(0==a)return[];const l=65520<i.length?Uint32Array:Uint16Array,c={};let u=0;const d=t(i),p=t(s);function t(e){var t,n=new l(e.length);let o=0;for(t of e)r.ignoreWhitespace&&(t=t.replace(/\s+$/g,"").replace(/^\s+/g,"")),c.hasOwnProperty(t)?n[o]=c[t]:(++u,n[o]=u,c[t]=u),o++;return n}var n=new l(2*a+1);let g=-1;for(let e=0;e<=a;e++)null!=S(e,n)&&(g=e);if(-1==g)return null;var h=[];let _=null;for(let e=0;e<=g;e++){const o=h.length?h[h.length-1].slice(0):new l(2*g+1);if(h.push(o),null!=(_=S(e,o)))break}var m=[];let f=_;for(let n=h.length-1;0<=n;n--){const o=h[n];let t=0,e=0;var y=(t=f==-n||f!=n&&o[a+f-1]<o[a+f+1]?(e=f+1,o[a+e]):(e=f-1,o[a+e]+1))-f;for(let e=o[a+f]-t-1;0<=e;--e)m.push("  "+s[y+e]);e==f-1?m.push("- "+i[t-1]):0<y&&m.push("+ "+s[y-1]),f=e}if(m.reverse(),r.context==1/0||r.full)return m;let k=1,b=1,v=0;for(var T=[],E=r.context||3;v<m.length;){let e=v;for(;e<m.length&&" "==m[e][0];)e++;if(e==m.length)break;const o=e-E,C=o-v,r=(0<C&&(k+=C,b+=C,v=o),T.length),i=k,s=b;T.push("@@");let t=v,n=0;for(;t<m.length;){if(" "==m[t][0]){if(++n>2*E+2){t-=E+2;break}}else n=0;t++}for(;v<t;){switch(T.push(m[v]),m[v][0]){case"-":k++;break;case"+":b++;break;case" ":k++,b++}v++}T[r]=`@@ -${i},${k-i} +${s},${b-s} @@`}return T;function S(o,r){for(let n=-o;n<=o;n+=2){let e=0,t=(e=n==-o||n!=o&&r[a+n-1]<r[a+n+1]?r[a+n+1]:r[a+n-1]+1)-n;for(;e<d.length&&t<p.length&&d[e]==p[t];)e++,t++;if((r[a+n]=e)>=d.length&&t>=p.length)return n}return null}}function i(e){return C(e).map(e=>e.replace(/;\s*$/,"")).join("\n")}function m(e){e=/^@@ -(\d+),(\d+) \+(\d+),(\d+)/.exec(e);return e&&{oldStart:parseInt(e[1])-1,oldLength:parseInt(e[2]),newStart:parseInt(e[3])-1,newLength:parseInt(e[4])}}var e;(e=h.diff||(h.diff={})).toLines=C,e.compute=_,e.diff3=function(e,t,n,l,c){var u=o(e),d=o(n);if(u&&d){var p=C(e),g=C(n);let r=0,i=[],s=0,a=0;for(let o=0;o<u.length-1;)if(u[o]==s&&d[o]==a)i.push(p[s]),s++,a++,o++;else{let e=!0,t=!0,n=o;for(;n<u.length&&(u[n]!=s+n-o&&(e=!1),d[n]!=a+n-o&&(t=!1),null==u[n]||null==d[n]);)n++;if(h.U.assert(n<u.length),e)for(;a<d[n];)i.push(g[a++]);else if(t)for(;s<u[n];)i.push(p[s++]);else if(p.slice(s,u[n]).join("\n")==g.slice(a,d[n]).join("\n"))for(;s<u[n];)i.push(p[s++]);else{for(r++,i.push("<<<<<<< "+l);s<u[n];)i.push(p[s++]);for(i.push("=======");a<d[n];)i.push(g[a++]);i.push(">>>>>>> "+c)}o=n,s=u[n],a=d[n]}return{merged:i.join("\n"),numConflicts:r};function o(n){n=_(t,n,{context:1/0});if(n){var o,r=[];let e=0,t=0;for(o of n)"+"==o[0]?e++:"-"==o[0]?(r[t]=null,t++):" "==o[0]?(r[t]=e,e++,t++):h.U.oops();return r.push(e+1),r}}}},e.removeTrailingSemiColumns=i,e.split=function(e,t){var n=e.split(/-{10,}/,2);if(n.length<2)return{fileA:e,fileB:void 0};let o=n[0].replace(/\n$/,""),r=n[1].replace(/^\n/,"");return t&&t.removeTrailingSemiColumns&&(o=i(o),r=i(r)),{fileA:o,fileB:r}},e.parseDiffMarker=m,e.render=function(e,t,s={}){const a=_(e,t,s);if(!a)return h.dom.el("div",null,pxtc.Util.lf("Too many differences to render diff."));const l={"@":"diff-marker"," ":"diff-unchanged","+":"diff-added","-":"diff-removed"};let c=0,u=0,d="";const p=h.dom.el("tbody"),n=h.dom.el("table",{class:"diffview "+(s.update?"update":"")},p);let g=null;return a.forEach((e,t)=>{var n=m(e),n=(n?(c=n.oldStart,u=n.newStart):("+"!=e[0]&&c++,"-"!=e[0]&&u++),a[t+1]?a[t+1][0]:""),o=a[t+2]?a[t+2][0]:"",r=e.slice(2);let i=h.dom.el("code",null,r);if(g)i=g,g=null;else if(!("-"!=e[0]||" "!=d&&"@"!=d||"+"!=n||" "!=o&&"@"!=o&&""!=o)){const s=function(e,t){var n=_(e.split("").join("\n"),t.split("").join("\n"),{context:1/0});if(!n)return{a:h.dom.el("div",{class:"inline-diff"},h.dom.el("code",null,e)),b:h.dom.el("div",{class:"inline-diff"},h.dom.el("code",null,t))};var o=[],r=[];for(let t=0;t<n.length;){let e=t;const _=n[t][0];for(;n[e]&&n[e][0]==_;)e++;var i=n.slice(t,e).map(e=>e.slice(2)).join("");" "==_?(o.push(h.dom.el("code",{class:"ch-common"},i)),r.push(h.dom.el("code",{class:"ch-common"},i))):"-"==_?o.push(h.dom.el("code",{class:"ch-removed"},i)):"+"==_?r.push(h.dom.el("code",{class:"ch-added"},i)):h.Util.oops(),t=e}return{a:h.dom.el("div",{class:"inline-diff"},o),b:h.dom.el("div",{class:"inline-diff"},r)}}(e.slice(2),a[t+1].slice(2));i=s.a,g=s.b}d=e[0],s.hideMarkerLine&&"@"==d||s.hideRemoved&&"-"==d||(r="@"==d,n=""+l[d],p.appendChild(h.dom.el("tr",{class:n},[!s.hideLineNumbers&&h.dom.el("td",{class:"line-a","data-content":c}),!s.hideLineNumbers&&h.dom.el("td",{class:"line-b","data-content":u}),r&&h.dom.el("td",{colspan:2,class:"change"},h.dom.el("code",null,e)),!s.hideMarker&&!r&&h.dom.el("td",{class:"marker","data-content":d}),!r&&h.dom.el("td",{class:"change"},i)])))}),n},e.resolveMergeConflictMarker=function(e,t,n,o){let r=h.diff.toLines(e),i=t;for(;i<r.length&&!/^<<<<<<<[^<]/.test(r[i]);)i++;let s=i+1;for(;s<r.length&&!/^=======$/.test(r[s]);)s++;let a=s+1;for(;a<r.length&&!/^>>>>>>>[^>]/.test(r[a]);)a++;if(a>=r.length)return h.debug(`diff marker mistmatch: ${r.length} -> ${i} ${s} `+a),e;if(r[i]=void 0,r[s]=void 0,r[a]=void 0,!n)for(let e=i;e<=s;++e)r[e]=void 0;if(!o)for(let e=s;e<=a;++e)r[e]=void 0;return r.filter(e=>void 0!==e).join("\n")},e.mergeDiff3Config=function(e,t,n){let o=h.Util.jsonTryParse(e),r=h.Util.jsonTryParse(t),i=h.Util.jsonTryParse(n);if(o&&!i)return e;if(!o)return n||t;if(!r&&i&&(r=i),o&&r&&i){delete o.installedVersion,delete r.installedVersion,delete i.installedVersion;const d={},p=h.U.unique(Object.keys(r).concat(Object.keys(o)).concat(Object.keys(i)),e=>e);for(const e of p){const t=o[e],n=r[e],p=i[e];if(JSON.stringify(t)==JSON.stringify(p))void 0!==t&&(d[e]=t);else switch(e){case"name":d[e]=(s=t,a=n,l=p,s==a||l!=a&&s==lf("Untitled")?l:s);break;case"version":d[e]=0<h.semver.strcmp(t,p)?t:p;break;case"languageRestriction":case"preferredEditor":case"targetVersion":d[e]=t;break;case"public":d[e]=t&&p;break;case"files":case"testFiles":{const h=c(t||[],n||[],p||[]);if(!h)return;d[e]=h.length?h:void 0;break}case"dependencies":case"testDependencies":{const h=u(t||{},n||{},p||{});if(Object.keys(h).length)return;d[e]=h;break}case"description":if(t&&!p)d[e]=t;else{if(t||!p)return;d[e]=p}break;default:return}}var s,a,l;return h.Package.stringifyConfig(d);function c(e,t,n){const o=[],r=h.U.unique(t.concat(e).concat(n),e=>e);for(const h of r){const r=-1<e.indexOf(h),i=-1<n.indexOf(h),s=-1<t.indexOf(h);r==i||i==s?r&&o.push(h):i&&o.push(h)}return o}function u(e,t,n){const o={},r=h.U.unique(Object.keys(t).concat(Object.keys(e)).concat(Object.keys(n)),e=>e);for(const i of r){const r=e[i],s=n[i],a=t[i];if(r==s)r&&(o[i]=r);else{const e=h.github.parseRepoId(r),t=h.github.parseRepoId(s);if(e&&t&&h.semver.tryParse(e.tag)&&h.semver.tryParse(t.tag)&&e.owner&&e.project&&e.owner==t.owner&&e.project==t.project){const n=(0<h.semver.strcmp(e.tag,t.tag)?e:t).tag;o[i]=`github:${e.owner}/${e.project}#`+n}else s==a?r&&(o[i]=r):s&&(o[i]=s)}}return o}}},e.hasMergeConflictMarker=function(e){return e&&/^(<<<<<<<[^<]|>>>>>>>[^>])/m.test(e)},e.reconstructConfig=function(t,n,e,o){let r={},i=e.tree.tree.map(e=>e.path).filter(e=>/\.(ts|blocks|md|jres|asm|json)$/.test(e)).filter(e=>e!=h.CONFIG_NAME);return(i=t.fileName?i.filter(e=>0===e.indexOf(t.fileName)).map(e=>e.slice(t.fileName.length+1)):i).find(e=>/\.ts$/.test(e))||(o.config.files.filter(e=>i.indexOf(e)<0).forEach(e=>{i.push(e),n[e]=o.files[e]}),h.Util.jsonCopyFrom(r,o.config.dependencies)),Object.keys(r).length||(r[h.appTarget.corepkg]="*"),{name:"",files:i,dependencies:r,preferredEditor:i.find(e=>/.blocks$/.test(e))?h.BLOCKS_PROJECT_NAME:h.JAVASCRIPT_PROJECT_NAME}}}(pxt=pxt||{}),function(o){var e;(e=o.discourse||(o.discourse={})).extractSharedIdFromPostUrl=function(e){return o.Util.httpGetJsonAsync(e+".json").then(e=>e.post_stream&&e.post_stream.posts&&e.post_stream.posts[0]&&e.post_stream.posts[0].link_counts.map(e=>o.Cloud.parseScriptId(e.url)).filter(e=>!!e)[0])},e.topicsByTag=function(n,e){e=`${n=n.replace(/\/$/,"")}/tag/${e}.json`;return o.Util.httpGetJsonAsync(e).then(e=>{const t=o.Util.toDictionary(e.users,e=>e.id.toString());return e.topic_list.topics.map(e=>({id:e.id,title:e.title,url:`${n}/t/${e.slug}/`+e.id,imageUrl:e.image_url,author:t[e.posters[0].user_id].username,cardType:"forumUrl"}))})}}(pxt=pxt||{}),function(a){{var b=a.docs||(a.docs={}),S=pxtc.Util;let k,v={},T={};var e="\x3c!-- @CMD@ @ARGS@ --\x3e";let E={parent:e,short:e,description:"\x3c!-- desc --\x3e",activities:"\x3c!-- activities --\x3e",explicitHints:"\x3c!-- hints --\x3e",flyoutOnly:"\x3c!-- flyout --\x3e",hideIteration:"\x3c!-- iter --\x3e",codeStart:"\x3c!-- start --\x3e",codeStop:"\x3c!-- stop --\x3e",autoOpen:"\x3c!-- autoOpen --\x3e",autoexpandOff:"\x3c!-- autoexpandOff --\x3e",preferredEditor:"\x3c!-- preferredEditor --\x3e",tutorialCodeValidation:"\x3c!-- tutorialCodeValidation --\x3e"};function t(e,t,n){return e.split(t).join(n)}function n(e){return e=t(e,"&","&amp;"),e=t(e,"<","&lt;"),e=t(e,">","&gt;"),e=t(e,'"',"&quot;"),t(e,"'","&#39;")}function C(e){return e&&n(e.replace(/\&([#a-z0-9A-Z]+);/g,(e,t)=>{switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"==t[0]?String.fromCharCode(parseInt(t.slice(1))):e}}))}b.htmlQuote=n,b.html2Quote=C;const N=[{rx:/^vimeo\.com\/(\d+)/i,cmd:"### @vimeo $1"},{rx:/^(www\.youtube\.com\/watch\?v=|youtu\.be\/)([\w\-]+(\#t=([0-9]+m[0-9]+s|[0-9]+m|[0-9]+s))?)/i,cmd:"### @youtube $2"}],w=(b.requireMarked=()=>"undefined"!=typeof marked?marked:"undefined"!=typeof require?require("marked"):void 0,b.requireDOMSanitizer=()=>"undefined"!=typeof DOMPurify?DOMPurify.sanitize:"undefined"!=typeof require?require("DOMPurify").sanitize:void 0,e=>`<div class='ui negative message'>${n(e)}</div>`);function x(r){let i=S.clone(v),s=S.clone(T),a=S.clone(E),l={},c={},n=r.params,e=r.theme,u=(r.boxes=i,r.macros=s,r.settings=a,r.html=r.html.replace(/<aside\s+([^<>]+)>([^]*?)<\/aside>/g,(e,t,n)=>{var t=function(t){for(var n,o={};t.trim();){let e=/\s*([^=\s]+)=("([^"]*)"|'([^']*)'|(\S*))/.exec(t);e?(n=e[3]||e[4]||e[5]||"",o[e[1].toLowerCase()]=n):o[(e=/^\s*(\S+)/.exec(t))[1]]="true",t=t.slice(e[0].length)}return o}(t),o=t["data-name"]||t.id;return o?(/box/.test(t.class)?i[o]=n:/aside/.test(t.class)?i[o]=`<!-- BEGIN-ASIDE ${o} -->${n}<!-- END-ASIDE -->`:/setting/.test(t.class)?a[o]=n:/menu/.test(t.class)?l[o]=n:/toc/.test(t.class)?c[o]=n:s[o]=n,`<!-- macro ${o} -->`):w("id or data-name missing on macro")}),(e,t)=>{let n=l.item,o={NAME:e.name};if(e.subitems)n=l["toc-dropdown"]||(0==t?l["top-dropdown"]:l["inner-dropdown"]),o.ITEMS=e.subitems.map(e=>u(e,t+1)).join("\n");else{if(/^-+$/.test(e.name)&&(n=l.divider),e.path&&!/^(https?:|\/)/.test(e.path))return w("Invalid link: "+e.path);o.LINK=e.path}return I(n,o,["ITEMS"])}),d=[{name:lf("Docs"),href:"/docs"}];var o=r.TOC||e.TOC||[];let p=[],g=e=>{for(var t of e.subitems||[])if(g(t))return p.push(e),!0;return!(!r.filepath||!e.path||0!=r.filepath.indexOf(e.path)||(p.push(e),0))},h=(o.forEach(g),(e,t)=>{let n=c.item,o={NAME:e.name};return e.path&&!/^(https?:|\/)/.test(e.path)?w("Invalid link: "+e.path):(/^\//.test(e.path)&&r.versionPath&&(e.path="/"+r.versionPath+e.path),o.LINK=e.path,0<=p.indexOf(e)?(o.ACTIVE="active",o.EXPANDED="true",d.push({name:e.name,href:e.path})):o.EXPANDED="false",e.subitems&&0<e.subitems.length?(n=c["toc-dropdown"]?""!==e.name?c["toc-dropdown"]:c["toc-dropdown-noLink"]:0==t?""!==e.name?c["top-dropdown"]:c["top-dropdown-noHeading"]:1==t?c["inner-dropdown"]:c["nested-dropdown"],o.ITEMS=e.subitems.map(e=>h(e,t+1)).join("\n")):/^-+$/.test(e.name)&&(n=c.divider),I(n,o,["ITEMS"]))}),t=(n.menu=(e.docMenu||[]).map(e=>u(e,0)).join("\n"),n.TOC=o.map(e=>h(e,0)).join("\n"),e.appStoreID&&(n.appstoremeta=`<meta name="apple-itunes-app" content="app-id=${S.htmlEscape(e.appStoreID)}"/>`),"");1<d.length&&(t=`
            <nav class="ui breadcrumb" aria-label="${lf("Breadcrumb")}">
                ${d.map((e,t)=>`<a class="${t==d.length-1?"active":""} section"
                        href="${C(e.href)}" aria-current="${t==d.length-1?"page":""}">${C(e.name)}</a>`).join('<i class="right chevron icon divider"></i>')}
            </nav>`),n.breadcrumb=t,e.boardName&&(n.boardname=C(e.boardName)),e.boardNickname&&(n.boardnickname=C(e.boardNickname)),e.driveDisplayName&&(n.drivename=C(e.driveDisplayName)),e.homeUrl&&(n.homeurl=C(e.homeUrl)),n.targetid=e.id||"???",n.targetname=e.name||"Microsoft MakeCode",n.docsheader=e.docsHeader||"Documentation",n.orgtitle="MakeCode";var o=e.docsLogo&&S.htmlEscape(e.docsLogo),_=(e.organizationWideLogo||e.organizationLogo)&&S.htmlEscape(e.organizationWideLogo||e.organizationLogo),m=e.organizationLogo&&S.htmlEscape(e.organizationLogo),o=(n.targetlogo=o?`<img aria-hidden="true" role="presentation" class="ui ${e.logoWide?"small":"mini"} image" src="${o}" />`:"",n.orglogo=_?`<img aria-hidden="true" role="presentation" class="ui image" src="${_}" />`:"",n.orglogomobile=m?`<img aria-hidden="true" role="presentation" class="ui image" src="${m}" />`:"",r.ghEditURLs||[]);if(o.length){let e='<p style="margin-top:1em">\n',t=lf("Edit this page on GitHub");for(var f of o)e+=`<a href="${f}"><i class="write icon"></i>${t}</a><br>
`,t=lf("Edit template of this page on GitHub");e+="</p>\n",n.github=e}else n.github="";var y,_=`
            <a href="#maincontent" class="ui item link" tabindex="0" role="menuitem">${lf("Skip to main content")}</a>
        `,m=(n.accMenu=_,lf("Print this page")),o=(n.printBtn=`
            <button id="printbtn" class="circular ui icon right floated button hideprint" title="${m}" aria-label="${m}">
                <i class="icon print"></i>
            </button>
        `,`
            <a id="togglesidebar" class="launch icon item" tabindex="0" title="Side menu" aria-label="${lf("Side menu")}" role="menuitem" aria-expanded="false">
                <i class="content icon"></i>
            </a>
        `),_=(n.sidebarToggle=o,["tocsearch1","tocsearch2"].map(e=>`
                <input type="search" name="q" placeholder="${lf("Search...")}" aria-label="${lf("Search Documentation")}">
                <i onclick="document.getElementById('${e}').submit();" tabindex="0" class="search link icon" aria-label="${lf("Search")}" role="button"></i>
            `));n.searchBar1=_[0],n.searchBar2=_[1];let k="";e.accentColor&&(k+=`
.ui.accent { color: ${e.accentColor}; }
.ui.inverted.accent { background: ${e.accentColor}; }
`),n.targetstyle=k,n.tocclass=e.lightToc?"lighttoc":"inverted";for(y of Object.keys(e)){var b=e[y];void 0===n[y]&&"string"==typeof b&&(n[y]=b)}r.finish=()=>I(r.html,n,["body","menu","accMenu","TOC","prev","next","printBtn","breadcrumb","targetlogo","orglogo","orglogomobile","github","JSON","appstoremeta","sidebarToggle","searchBar1","searchBar2"])}function B(e){e.image=function(e,t,n){let o='<img class="ui image" src="'+e+'" alt="'+n+'"';return t&&(o+=' title="'+t+'"'),o=(o+=' loading="lazy"')+(this.options.xhtml?"/>":">")},e.listitem=function(e){var t=/^\s*\[( |x)\]/i.exec(e);return t?`<li class="${" "==t[1]?"unchecked":"checked"}">`+e.slice(t[0].length)+"</li>\n":"<li>"+e+"</li>\n"},e.heading=function(e,t,n){let o=/(.*)#([\w\-]+)\s*$/.exec(e),r="";return r=o?(e=o[1],o[2]):n.toLowerCase().replace(/[^\w]+/g,"-"),(e=(e=e&&e.replace(/@(fullscreen|unplugged|showdialog|showhint)/gi,"")).trim()).match(/^\{([\s\S]+)\}$/)&&(e=e.substr(1,e.length-2)),`<h${t} id="${this.options.headerPrefix}${r}">${e}</h${t}>`}}function A(e,r){return e.replace(/<!--\s*@(ifn?def)\s+(\w+)\s*-->([^]*?)<!--\s*@endif\s*-->/g,(e,t,n,o)=>"ifdef"==t&&r[n]||"ifndef"==t&&!r[n]?`<!-- ${t} ${n} -->${o}<!-- endif -->`:`<!-- ${t} ${n} endif -->`)}function I(e,o,r=[]){return e?e.replace(/@(\w+)@/g,(e,t)=>{let n=S.lookup(o,t)||"";return n+="",n=r.indexOf(t)<0?C(n):n}):""}b.prepTemplate=x,b.setupRenderer=B,b.renderConditionalMacros=A,b.renderMarkdown=function(s){let e=!0,a=(s.pubinfo||(e=!1,s.pubinfo={}),s.pubinfo);s.theme||(s.theme={}),delete s.pubinfo.private,a.time&&(n=parseInt(a.time),a.timems||(a.timems=1e3*n+""),a.humantime||(a.humantime=S.isoTime(n))),a.name&&(a.dirname=a.name.replace(/[^A-Za-z0-9_]/g,"-"),a.title=a.name),e&&(a.JSON=JSON.stringify(a,null,4).replace(/</g,"\\u003c"));let t=s.template,l=(t=A(t=t.replace(/<!--\s*@include\s+(\S+)\s*-->/g,(e,t)=>"\x3c!-- include "+t+" --\x3e\n"+((s.theme.htmlDocIncludes||{})[t]||"")+"\n\x3c!-- end include --\x3e\n"),a),{html:t=s.locale?D(t,s.locale).text:t,theme:s.theme,filepath:s.filepath,versionPath:s.versionPath,ghEditURLs:s.ghEditURLs,params:a,TOC:s.TOC}),i=(x(l),new(k=k||b.requireMarked()).Renderer);B(i);const c=i.link;i.link=function(e,t,n){var o=new RegExp("^[/#]").test(e),r=o?"":"_blank";return o&&l.versionPath&&(e="/"+l.versionPath+e),c.call(i,e,t,n).replace(/^<a /,`<a ${r?`target="${r}"`:""} rel="nofollow noopener" `)};var n=b.requireDOMSanitizer();k.setOptions({renderer:i,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!0,sanitizer:n,smartLists:!0,smartypants:!0});let o=s.markdown,r=(s.repo&&(o+=`
\`\`\`package
${s.repo.name.replace(/^pxt-/,"")}=github:${s.repo.fullName}#${s.repo.tag||"master"}
\`\`\`
`),o=(o=o.replace(/^\s*https?:\/\/(\S+)\s*$/gm,(e,t)=>{for(var o of N){let n=o.rx.exec(t);if(n)return o.cmd.replace(/\$(\d+)/g,(e,t)=>n[parseInt(t)]||"")+"\n"}return e})).replace(/@([a-z]+)@/gi,(e,t)=>{var n=a[t];return!n&&s.throwOnError&&S.userError("unknown macro "+t),n||"unknown macro"}),k(o)),u=(r=(r=r.replace(/&lt;br\s*\/&gt;/gi,"<br/>")).replace(/(<img [^>]* src=")\/docs\/static\/([^">]+)"/g,(e,t,n)=>t+"/static/"+n+'"'),""),d=0;function p(e,t,n){let o=n;return e<=d&&(o=u+o,u="",d=0),o}r=r.replace(/<h(\d)[^>]+>\s*([~@])?\s*(.*?)<\/h\d>/g,(e,t,n,o)=>{var r,i=/^(\w+)\s+(.*)/.exec(o),o=i?i[1]:o,i=C(i?i[2]:""),o=C(o);if(t=parseInt(t),n){if("@"==n){let e=S.lookup(l.settings,o);if(null!=e)a[o]=i;else if(null==(e=S.lookup(l.macros,o)))return s.throwOnError&&S.userError("Unknown command: @"+o),w("Unknown command: @"+o);return p(t,0,I(e,{ARGS:i,CMD:o},["ARGS","CMD"]))}return o?(n=S.lookup(l.boxes,o))?(i=p(t,0,(r=n.split("@BODY@"))[0].replace("@ARGS@",i)),u=r[1],(r=n.match(/data-[^>\s]+/gi))&&0<=r.indexOf("data-inferred")&&(d=t),i):(s.throwOnError&&S.userError("Unknown box: ~ "+o),w("Unknown box: ~ "+o)):(n=u,u="",n)}return p(t,0,e)}),u&&(r+=u),a.title||(n=/<h1[^<>]*>([^<>]+)<\/h1>/.exec(r))&&(a.title=C(n[1])),a.description||(n=/<p>([^]+?)<\/p>/.exec(r))&&(a.description=C(n[1]));var g,h,_,m,n=/<div class="ui embed mdvid"[^<>]+?data-placeholder="([^"]+)"[^>]*\/?>/i.exec(r)||/<img class="ui [^"]*image" src="([^"]+)"[^>]*\/?>/i.exec(r);n&&(a.cardLogo=C(n[1])),a.twitter=C(s.theme.twitter||"@msmakecode");let f={main:""};r=(r=r.replace(/<!-- BEGIN-ASIDE (\S+) -->([^]*?)<!-- END-ASIDE -->/g,(e,t,n)=>{var o=S.lookup(f,t);return f[t]=(o||"")+n,"\x3c!-- aside --\x3e"})).replace(/\n<\/code>/g,"</code>"),f.main=r,r="";for(g of Object.keys(f))r+=(h=g+"-container",_=f[g],I(l.boxes[h]||"@BODY@",{BODY:_},["BODY"]));a.body=r,a.name=a.title||"";for(m of Object.keys(s.theme)){var y=s.theme[m];"string"==typeof y&&(a["theme_"+m]=y)}return l.finish()},b.embedUrl=function(e,t,n,o){return`<div style="position:relative;height:0;padding-bottom:70%;overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="${e+`#${t}:`+n}" frameborder="0" sandbox="allow-popups allow-forms allow-scripts allow-same-origin"></iframe></div>`},b.runUrl=function(e,t,n){return`<div style="position:relative;height:0;padding-bottom:${t};overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="${e}?id=${encodeURIComponent(n)}" allowfullscreen="allowfullscreen" sandbox="allow-popups allow-forms allow-scripts allow-same-origin" frameborder="0"></iframe></div>`},b.codeEmbedUrl=function(e,t,n){e=e+"---codeembed#pub:"+t;return`<div style="position:relative;height:calc(${n=Math.ceil(n||300)}px + 5em);width:100%;overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="${e}" allowfullscreen="allowfullscreen" frameborder="0" sandbox="allow-scripts allow-same-origin"></iframe></div>`};const l={b:1,strong:1,em:1};function D(e,o){const r={};function i(e){let t=/^(\s*)([^]*?)(\s*)$/.exec(e),n=t[2].replace(/\s+/g," ");return""==n||/^((IE=edge,.*|width=device-width.*|(https?:\/\/|\/)[\w@\/\.]+|@[\-\w]+@|\{[^\{\}]+\}|[^a-zA-Z]*|(&nbsp;)+)\s*)+$/.test(n)?null:((e=S.lookup(o,n))?n=e:r[n]="",t[1]+n+t[3])}function s(e){return e.replace(/&llt;/g,"<").replace(/&ggt;/g,">")}return{text:e=(e=(e=(e="<start>"+e.replace(/<([\/\w]+)([^<>]*)>/g,(e,t,n)=>{var o=t.replace(/^\//,"").toLowerCase();return 1===l[o]?"&llt;"+t+n+"&ggt;":e})).replace(/(<([\/\w]+)([^<>]*)>)([^<>]+)/g,(e,t,n,o,r)=>{return"script"==n||"style"==n||null==(n=i(s(r)))?s(e):t+n})).replace(/(<[^<>]*)(content|placeholder|alt|title)="([^"]+)"/g,(e,t,n,o)=>null==i(o)?e:t+n+'="'+o.replace(/"/g,"''")+'"')).replace(/^<start>/g,""),missing:r}}function f(e,o){let t=0,r=[{level:0,id:"",title:"",start:t,text:"",children:[]}],n=(e=e.replace(/\r/g,"")).split(/\n/),i={};for(var s of n){let e=/^\s*(#+)\s*(.*?)(#(\S+)\s*)?$/.exec(s),n=null;if(o&&e)if(e[4])if(i[e[4]])e=null;else{n=function e(t,n){if(t.id==n)return t;for(var o of t.children)if(o=e(o,n))return o;return null}(o,e[4]);let t=e=>{e.id&&(i[e.id]=!0),e.children.forEach(t)};n&&t(n)}else e=null;if(e){var a={level:o?1:e[1].length,title:e[2].trim(),id:e[4]||"",start:t,text:"",children:[]};if(n){s="";for(let e=0;e<n.level;++e)s+="#";s=(s=(s+=" ")+(a.title||n.title))+(" #"+a.id)}for(;r[r.length-1].level>=a.level;)r.pop();r[r.length-1].children.push(a),r.push(a)}r[r.length-1].text+=s+"\n",t++}return r[0]}b.translate=D,b.buildTOC=function(e){if(!e)return null;var t=a.docs.requireMarked(),n=b.requireDOMSanitizer(),n={renderer:new t.Renderer,gfm:!0,tables:!1,breaks:!1,pedantic:!1,sanitize:!0,sanitizer:n,smartLists:!1,smartypants:!1};let o={name:"dummy",subitems:[]},r=[],i=(r.push(o),t.lexer(e,n)),s=!1;i.forEach(e=>{switch(e.type){case"heading":e.depth;break;case"list_start":break;case"list_item_start":case"loose_item_start":s=!0;var t={name:"",path:"",subitems:[]};return void r.push(t);case"text":let o=r[r.length-1];0<=e.text.indexOf("[")?e.text.replace(/\[(.*?)\]\((.*?)\)/i,function(e,t,n){o.name=t,o.path=n.replace(".md","")}):s&&(o.name=e.text);break;case"list_item_end":case"loose_item_end":t=r.pop();r[r.length-1].subitems.push(t)}s=!1});t=o.subitems;return t&&0!=t.length?t:null};let m=!(b.visitTOC=function(e,t){e.forEach(function(e){t(e),e.subitems&&e.subitems.forEach(t)})});b.augmentDocs=function r(e,t){if(m||(m=!0,n(o="\n# T0\n## Examples #ex\n### Example 1\nTEx1\n### Example 2 #ex2\nTEx2\n### Example 3\nTEx3\n\n## See also #also\nTAlso\n","",o),n(o," ",o),n(o,"\n# @extends\n# #ex2\nMy example\n## See Also These! #also\nMy links\n","\n# T0\n## Examples #ex\n### Example 1\nTEx1\n### Example 2 #ex2\nMy example\n### Example 3\nTEx3\n\n## See Also These! #also\nMy links\n"),n(o,"\n# @extends\n### #ex\nFoo\n#### Example 1\nEx1\n#### Example 2x #ex2\nEx2\n## See Also These! #also\nMy links\n","\n# T0\n## Examples #ex\nFoo\n#### Example 1\nEx1\n#### Example 2x #ex2\nEx2\n## See Also These! #also\nMy links\n")),!t)return e;function n(e,t,n){var o=r(e,t).trim();if(o!=(n=n.trim()))throw console.log(`*** Template:
${e}
*** Input:
${t}
*** Expected:
${n}
*** Output:
`+o),new Error("augment docs test fail")}var o,i,s;let a=f(e,null),l=f(t,a),c={},u={};for(i of l.children)S.assert(0==i.children.length),S.assert(!!i.id),c[i.id]=i.text;let d=e=>{e.id&&void 0!==c[e.id]&&(u[e.id]=!0,e.text=c[e.id],e.children=[]),e.children.forEach(d)},p=(d(a),""),g=e=>{p+=e.text,e.children.forEach(g)},h=(g(a),""),_=l.text.replace(/^\s*#+\s*@extends.*/gm,"").replace(/^\s*\n/gm,"");_.trim()&&(h+=_.trim()+"\n");for(s of l.children)u[s.id]||(h+=s.text);return h&&(p+="## Couldn't apply replacement logic to:\n"+h),p}}}(pxt=pxt||{}),function(e){(e.dom||(e.dom={})).el=function(e,t,n){const o=document.createElement(e);return t&&Object.keys(t).forEach(e=>o.setAttribute(e,t[e]+"")),function t(e){Array.isArray(e)?e.forEach(e=>t(e)):"string"==typeof e?o.appendChild(document.createTextNode(e)):e instanceof HTMLElement&&o.appendChild(e)}(n),o}}(pxt=pxt||{}),function(l){function c(e){e=/```package\s+((.|\s)+?)\s*```/i.exec(e);let t;return e&&(t={},e[1].split("\n").map(e=>e.replace(/\s*/g,"")).filter(e=>!!e).map(e=>e.split("=")).forEach(e=>t[e[0]]=e[1]||"*")),t}function u(e){e=/```config\s+((.|\s)+?)\s*```/i.exec(e);let t=[];return e&&e[1].split("\n").map(e=>e.replace(/\s*/g,"")).filter(e=>!!e).map(e=>e.split("=")).filter(e=>"feature"==e[0]&&!!e[1]).forEach(e=>t.push(e[1])),t.length?t:void 0}function d(e){var t=/```jres\s+((.|\s)+?)\s*```/i.exec(e);if(t){const e=t[1],n=JSON.parse(e);return{jres:e,ts:l.emitTilemapsFromJRes(n)}}}function p(e){e=/```assetjson\s+((.|\s)+?)\s*```/i.exec(e);return e?l.tutorial.parseAssetJson(e[1]):{}}function i(e){let t=l.Util.jsonTryParse(e);return null!=(t=t&&!Array.isArray(t)?[t]:t)&&t.length||null!=(t=e.split(/^---$/gm).filter(e=>!!e).map(e=>{let o={};return e.replace(/^\s*(?:-|\*)\s+(\w+)\s*:\s*(.*)$/gm,(e,t,n)=>{if("flags"==t)o[t]=n.split(",");else if("otherAction"===t){const e=n.split(",").map(e=>null==e?void 0:e.trim());(o.otherActions||(o.otherActions=[])).push({url:e[0],editor:e[1],cardType:e[2]})}else o[t]=n;return""}),!!Object.keys(o).length&&o}).filter(e=>!!e))&&t.length?t:void 0}function t(e){if(!e)return[];const t=[];let n,o=!1,r="";return e.split(/\r?\n/).forEach(e=>{if(/^## /.test(e))n=e.substr(2).trim();else if(/^(### ~ |```)codecard$/.test(e))o=!0;else if(/^(### ~|```)$/.test(e)){if(o=!1,n&&r){const e=i(r);null!=e&&e.length?t.push({name:n,cards:e}):l.log("invalid gallery format")}r="",n=void 0}else o&&(r+=e+"\n")}),t.forEach(e=>e.cards.forEach(t=>{var e;!t.otherActions||t.otherActions.length||"tutorial"!=t.cardType&&"example"!=t.cardType||(e=["js"],l.appTarget.appTheme.python&&e.unshift("py"),t.otherActions=e.map(e=>({url:t.url,cardType:t.cardType,editor:e})))})),t}var e;(e=l.gallery||(l.gallery={})).parsePackagesFromMarkdown=c,e.parseFeaturesFromMarkdown=u,e.parseJResFromMarkdown=d,e.parseTemplateProjectJSON=p,e.parseExampleMarkdown=function(e,t){if(t){var n,o,r,i,s,a=/```(blocks?|typescript|python|spy|sim)\s+((.|\s)+?)\s*```/i.exec(t);if(a)return n=c(t),o=a[1],r=a[2],i=u(t),s=d(t),(e={name:e,filesOverride:{[l.MAIN_BLOCKS]:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',["python"===a[1]?l.MAIN_PY:l.MAIN_TS]:r},dependencies:n,features:i,snippetType:o,source:r}).filesOverride=Object.assign(Object.assign({},e.filesOverride),p(t)),s&&(e.filesOverride[l.TILEMAP_JRES]=s.jres,e.filesOverride[l.TILEMAP_CODE]=s.ts),e}},e.parseCodeCards=i,e.parseCodeCardsHtml=function(e){let n,t=[];return Array.from(e.children).forEach(e=>{"UL"===e.tagName||"OL"===e.tagName?(n=n||{},Array.from(e.querySelectorAll("li")).forEach(e=>{var e=e.innerText,t=/^\s*(\w+)\s*:\s*(.*)$/.exec(e);if(t){const e=t[1];n[e]=t[2].trim(),"flags"===e&&(n[e]=n[e].split(/,\s*/))}})):"HR"==e.tagName&&(n&&t.push(n),n=void 0)}),n&&t.push(n),!(null==(t=0===t.length&&"CODE"===e.tagName?l.Util.jsonTryParse(e.textContent):t)||!t.length)&&t},e.parseGalleryMardown=t,e.loadGalleryAsync=function(e){return l.Cloud.markdownAsync(e).then(e=>t(e))},e.codeCardsToMarkdown=function(e){return`### ~ codecard

${(e||[]).map(t=>Object.keys(t).filter(e=>!!t[e]).map(e=>"otherActions"===e?t[e].map(e=>`* otherAction: ${e.url}, ${e.editor||""}, `+(e.cardType||"")).join("\n"):`* ${e}: `+t[e]).join("\n")).join("\n\n---\n\n")}

### ~
`}}(pxt=pxt||{}),function(a){a.GDBServer=class{constructor(e){this.io=e,this.q=new a.U.PromiseQueue,this.dataBuf="",this.numSent=0,this.pktSize=400,this.trace=!1,this.bmpMode=!0,this.targetInfo="",this.onEvent=e=>{},this.io.onData=e=>this.onData(e)}onData(e){for(this.dataBuf+=a.U.uint8ArrayToString(e);0<this.dataBuf.length;){var t=this.dataBuf[0];if("+"==t)this.dataBuf=this.dataBuf.slice(1);else if("$"==t||"%"==t){var n=this.decodeResp(this.dataBuf.slice(1));if(null==n)break;"$"==t?(this.io.sendPacketAsync(this.buildCmd("+")),this.onResponse?this.onResponse(n):0<this.numSent&&this.io.error("unexpected response: "+n)):this.onEvent(n)}else this.io.error("invalid character: "+t)}}buildCmd(t){if("+"==t)return a.U.stringToUint8Array(t);let n="";for(let e=0;e<t.length;++e){var o=t.charAt(e);"}"==o||"#"==o||"$"==o?n=(n+="}")+String.fromCharCode(32^o.charCodeAt(0)):n+=o}let r=0;t=n;for(let e=0;e<t.length;++e)r=r+t.charCodeAt(e)&255;return n="$"+t+"#"+("0"+r.toString(16)).slice(-2),a.U.stringToUint8Array(n)}decodeResp(o){let r="";for(let n=0;n<o.length;++n){var e=o[n];if("}"==e)++n,r+=String.fromCharCode(32^o.charCodeAt(n));else if("*"==e){++n;let e=o.charCodeAt(n)-29,t=r.charAt(r.length-1);for(;0<e--;)r+=t}else{if("#"==e)return 2==o.slice(n+1,n+3).length?(this.dataBuf=o.slice(n+3),r):null;r+=e}}return null}sendCmdOKAsync(e){return this.sendCmdAsync(e,e=>"OK"==e)}error(e){this.io.error(e),this.io.disconnectAsync()}sendCmdAsync(n,o){this.numSent++;const e=this.buildCmd(n);return this.q.enqueue("one",()=>null===o?this.io.sendPacketAsync(e).then(()=>null):new Promise(t=>{this.onResponse=e=>{this.onResponse=null,this.trace&&a.log(`GDB: '${n}' -> '${e}'`),void 0===o||o(e)||this.error(`Invalid GDB command response: '${n}' -> '${e}'`),t(e)},this.io.sendPacketAsync(e)}))}sendRCmdAsync(e){return this.sendMCmdAsync("qRcmd,"+a.U.toHex(a.U.stringToUint8Array(e)))}sendMCmdAsync(o){this.numSent++;const e=this.buildCmd(o);let r="";return this.q.enqueue("one",()=>new Promise(n=>{this.onResponse=e=>{var t;"OK"!=e&&"O"==e[0]?r+=(t=e.slice(1),a.U.uint8ArrayToString(a.U.fromHex(t))):("OK"!=e&&(r+=" - "+e),this.onResponse=null,this.trace&&a.log(`Final GDB: '${o}' -> '${r}'`),n(r))},this.io.sendPacketAsync(e)}))}write32Async(e,t){var n=new Uint8Array(4);return a.HF2.write32(n,0,t),this.writeMemAsync(e,n)}writeMemAsync(e,t){var n=this.pktSize/2-10;return a.U.assert(t.length<n),this.sendCmdOKAsync("M"+e.toString(16)+","+t.length.toString(16)+":"+a.U.toHex(t)).then(e=>{console.log(e)})}readMemAsync(e,o){const r=this.pktSize/2-6;if(o>r){const i=new Uint8Array(o),s=t=>{const n=Math.min(o-t,r);return 0==n?Promise.resolve(i):this.readMemAsync(e+t,n).then(e=>(a.U.memcpy(i,t,e),s(t+n)))};return s(0)}return this.sendCmdAsync("m"+e.toString(16)+","+o.toString(16)).then(e=>a.U.fromHex(e))}initBMPAsync(){return Promise.resolve().then(()=>this.sendRCmdAsync("swdp_scan")).then(e=>(this.targetInfo=e,this.sendCmdAsync("vAttach;1",e=>"T"==e[0]))).then(()=>{})}initAsync(){return a.U.delay(1e3).then(()=>this.sendCmdAsync("!")).then(()=>this.sendCmdAsync("qSupported")).then(e=>{let o={};return e=(e=";"+e+";").replace(/;([^;]+)[=:]([^:;]+)/g,(e,t,n)=>(o[t]=n,";")),this.pktSize=parseInt(o.PacketSize)||1024,a.log("GDB-server caps: "+JSON.stringify(o)+" "+e.replace(/;+/g,";")),this.bmpMode?this.initBMPAsync():this.sendCmdAsync("c").then(()=>{})})}}}(pxt=pxt||{}),function(s){{var a=s.github||(s.github={}),e;function l(){var e;return!!a.forceProxy||!s.U.isNodeJS&&!(null!=(e=null==(e=null==s?void 0:s.appTarget)?void 0:e.cloud)&&e.noGithubProxy)}a.token=null,a.forceProxy=!1;const N={};function r(r){var e;return r.method=null!=(e=r.method)?e:"GET",function t(e){var n;const o=s.U.clone(r);return a.token&&(o.headers||(o.headers={}),o.url==O?o.headers.Authorization="bearer "+a.token:(o.url=s.BrowserUtils.cacheBustingUrl(o.url),o.headers.Authorization="token "+a.token)),o.allowHttpErrors=null!=(n=o.allowHttpErrors)&&n,s.U.requestAsync(o).catch(e=>{if(s.tickEvent("github.error",{statusCode:e.statusCode}),a.handleGithubNetworkError&&a.handleGithubNetworkError(o,e))return t();throw e})}(a.token)}function c(e){return r({url:e,method:"GET"}).then(e=>e.json)}function u(e){return s.Cloud.apiRequestWithCdnAsync({url:"gh/"+e,forceLiveEndpoint:!0}).then(e=>e.json)}function d(e){s.log("github proxy error: "+e.message),s.debug(e)}a.isOrgAsync=function(e){return r({url:"https://api.github.com/orgs/"+e,method:"GET",allowHttpErrors:!0}).then(e=>200==e.statusCode)};class w{constructor(){this.configs={},this.packages={}}proxyWithCdnLoadPackageAsync(e,t){const n=e+"/"+t;var o=this.packages[n];return o?(s.debug(`github cache ${e}/${t}/text`),Promise.resolve(o)):u(A((o=C(e)).slug,t,o.fileName,"text")).then(e=>this.packages[n]={files:e})}cacheConfig(e,t){t=s.Package.parseAndValidConfig(t);return this.configs[e]=t,s.U.clone(t)}async loadConfigAsync(e,t){var n=e+"/"+(t=t||"master"),o=this.configs[n];if(o)return s.debug(`github cache ${e}/${t}/config`),s.U.clone(o);if(l())try{const l=await this.proxyWithCdnLoadPackageAsync(e,t);return this.cacheConfig(n,l.files[s.CONFIG_NAME])}catch(e){d(e)}o=await g(e,t,s.CONFIG_NAME);return this.cacheConfig(n,o)}async loadPackageAsync(e,t){if(t=t||"master",l())try{return await this.proxyWithCdnLoadPackageAsync(e,t).then(e=>s.U.clone(e))}catch(e){d(e)}return this.githubLoadPackageAsync(e,t)}githubLoadPackageAsync(r,n){return y(r,n).then(o=>{const t=r+"/"+o;var e=this.packages[t];return e?(s.debug(`github cache ${r}/${n}/text`),Promise.resolve(s.U.clone(e))):(s.log(`Downloading ${r}/${n} -> `+o),g(r,o,s.CONFIG_NAME).then(e=>{const n={files:{}};n.files[s.CONFIG_NAME]=e;e=JSON.parse(e);return s.U.promiseMapAll(s.allPkgFiles(e).slice(1),t=>g(r,o,t).then(e=>{n.files[t]=e})).then(()=>(this.packages[t]=n,s.U.clone(n)))}))})}}function p(t,e,n){return r({url:"https://api.github.com/repos/"+A(t.slug,"contents",t.fileName,n+"?ref="+e),method:"GET"}).then(e=>{e=e.json;return N[t.slug]=!0,e&&"base64"==e.encoding&&null!=e.content?atob(e.content):s.U.httpGetTextAsync(e.download_url)})}function g(e,t,n){const o=C(e);return N[o.slug]?p(o,t,n):s.U.requestAsync({url:"https://raw.githubusercontent.com/"+A(o.slug,t,o.fileName,n),allowHttpErrors:!0}).then(e=>200==e.statusCode?e.text:p(o,t,n))}function h(e,t,n,o){return r({url:/^https:/.test(e)?e:"https://api.github.com/repos/"+e,headers:n,method:o||"POST",data:t,successCodes:[200,201,202,204]}).then(e=>e.json)}function _(e,t){let n=1;for(;e.refs[t+n];)n++;return t+n}async function m(e,t,n){return await h(e+"/git/refs",{ref:"refs/heads/"+t,sha:n}),t}function f(e,n="tags",t,o){e=C(e),t=!!a.forceProxy||!(a.token&&!t)&&l();let r=null;t=t?s.U.httpGetJsonAsync(s.BrowserUtils.cacheBustingUrl(`${s.Cloud.apiRoot}gh/${e.slug}/refs`+(o?"?nocache=1":""))).then(t=>{var e=Object.keys(t.refs).filter(e=>s.U.startsWith(e,"refs/"+n+"/")).map(e=>({ref:e,object:{sha:t.refs[e]}}));return r=t.refs.HEAD,e}):c(`https://api.github.com/repos/${e.slug}/git/refs/${n}/?per_page=100`);let i=e=>e.replace(/^refs\/[^\/]+\//,"");return t.then(e=>{e.sort((e,t)=>s.semver.strcmp(i(e.ref),i(t.ref)));var t,n={};for(t of e)n[i(t.ref)]=t.object.sha;return{refs:n,head:r}},e=>404==e.statusCode?{refs:{}}:Promise.reject(e))}function o(e){return"commit"==e.object.type?Promise.resolve(e.object.sha):"tag"==e.object.type?c(e.object.url).then(e=>"commit"==e.object.type?e.object.sha:Promise.reject(new Error("Bad type (2nd order) "+e.object.type))):Promise.reject(new Error("Bad type "+e.object.type))}function y(e,t){if(/^[a-f0-9]{40}$/.test(t))return Promise.resolve(t);const n=C(e);return c(`https://api.github.com/repos/${n.slug}/git/refs/tags/`+t).then(o,e=>c(`https://api.github.com/repos/${n.slug}/git/refs/heads/`+t).then(o))}function k(e,t="master"){return a.db.loadConfigAsync(e,t)}function b(n,o){var e=C(n);return e?E(e,o)?(s.tickEvent("github.download.banned"),s.log("Github repo is banned"),Promise.resolve(void 0)):a.db.loadPackageAsync(e.fullName,e.tag).then(e=>{var t=D(o,n);if(t){const o=s.Package.parseAndValidConfig(e.files[s.CONFIG_NAME]);o&&(s.log(`auto-disable ${t.join(",")} due to targetconfig entry for `+n),o.disablesVariants=t,e.files[s.CONFIG_NAME]=s.Package.stringifyConfig(o))}return e}):(s.log("Unknown GitHub syntax"),Promise.resolve(void 0))}let i;function t(e){return s.Cloud.cdnApiUrl(`gh/${e.fullName}/icon`)}function v(e,t){var n;if(e)return(n={owner:e.owner.login.toLowerCase(),slug:e.full_name.toLowerCase(),fullName:((null==t?void 0:t.fullName)||e.full_name).toLowerCase(),fileName:null==(n=null==t?void 0:t.fileName)?void 0:n.toLocaleLowerCase(),name:e.name,description:e.description,defaultBranch:e.default_branch,tag:null==t?void 0:t.tag,updatedAt:Math.round(new Date(e.updated_at).getTime()/1e3),fork:e.fork,private:e.private}).status=T(n,null==t?void 0:t.config),n}function T(e,t){return e?E(e,t)?i.Banned:(r=t=t,(o=n=e)&&r&&o.owner&&r.approvedOrgs&&r.approvedOrgs.some(e=>e.toLowerCase()==o.owner.toLowerCase())||n&&t&&n.fullName&&t.approvedRepos&&t.approvedRepos.some(e=>e.toLowerCase()==n.fullName.toLowerCase())?i.Approved:i.Unknown):i.Unknown;var n,o,r}function E(t,e){return n=t,(o=e)&&(!n||!n.owner||o.bannedOrgs&&o.bannedOrgs.some(e=>e.toLowerCase()==n.owner.toLowerCase()))||e&&(!t||!t.fullName||e.bannedRepos&&e.bannedRepos.some(e=>e.toLowerCase()==t.fullName.toLowerCase()));var n,o}async function S(e,t){e=C(e);if(e){var n,o,r=T(e,t);if(r!=i.Banned){if(l())try{return o=r,await u((n=e).slug).then(e=>{if(e)return{github:!0,owner:n.owner,fullName:n.fullName,fileName:n.fileName,slug:n.slug,name:n.fileName?e.name+"-"+n.fileName:e.name,description:e.description,defaultBranch:e.defaultBranch||"master",tag:n.tag,status:o}}).catch(e=>{s.reportException(e)})}catch(e){d(e)}return v(await c("https://api.github.com/repos/"+e.slug),{config:t,fullName:e.fullName,fileName:e.fileName,tag:e.tag})}}}function C(t){if(t){t=(t=t.trim()).replace(/\/$/,"");var n=/^https:\/\/([^./#]+)\.github\.io\/([^/#]+)\/?$/i.exec(t),n=(t=(t=(t=(t=n?`github:${n[1]}/`+n[2]:t).replace(/^github:/i,"")).replace(/^https:\/\/github\.com\//i,"")).replace(/\.git\b/i,""),/^([^#\/:]+)\/([^#\/:]+)(\/([^#]+))?(#([^\/:]*))?$/.exec(t));if(n){var t=n[1],o=n[2];let e=n[4];var n=n[6],r=e&&/^tree\/([^\/]+\/)/.exec(e);return r&&(e=e.slice(r[0].length)),{owner:t,project:o,slug:A(t,o),fullName:A(t,o,e),tag:n,fileName:e}}}}function x(e){return!!e&&"github:"==e.slice(0,7)}function B(e){return e?"github:"+e.fullName.toLowerCase()+"#"+(e.tag||"master"):void 0}function A(...e){return e.filter(e=>!!e).join("/")}function I(e,t){return e&&e.upgrades&&(t=C(t))?s.U.lookup(e.upgrades,t.fullName.toLowerCase()):null}function D(e,t){e=I(e,t),t=/^dv:(.*)/.exec(e);if(t){const e=t[1].split(/,/);return e.some(e=>!/^\w+$/.test(e))?null:e}return null}a.MemoryGithubDb=w,a.downloadTextAsync=g,a.db=new w,a.authenticatedUserAsync=function(){return a.token?c("https://api.github.com/user"):Promise.resolve(void 0)},a.getCommitsAsync=function(e,t){return c("https://api.github.com/repos/"+C(e).slug+"/commits?sha="+t).then(e=>e.map(e=>{var t=e.commit;return t.url=e.url,t.sha=e.sha,t}))},a.getCommitAsync=function(e,t){return c("https://api.github.com/repos/"+C(e).slug+"/git/commits/"+t).then(t=>c(t.tree.url+"?recursive=1").then(e=>(t.tree=e,t)))},a.createObjectAsync=function(e,t,n){return h(C(e).slug+"/git/"+t+"s",n).then(e=>e.sha)},a.postCommitComment=function(e,t,n,o,r){return h(C(e).slug+`/commits/${t}/comments`,{body:n,path:o,position:r}).then(e=>e.id)},a.fastForwardAsync=async function(e,t,n){return 200==(await r({url:`https://api.github.com/repos/${C(e).slug}/git/refs/heads/`+t,method:"PATCH",allowHttpErrors:!0,data:{sha:n,force:!1}})).statusCode},a.putFileAsync=async function(e,t,n){e=C(e);await r({url:"https://api.github.com/repos/"+s.github.join(e.slug,"contents",e.fileName,t),method:"PUT",allowHttpErrors:!0,data:{message:lf("Initialize empty repo"),content:btoa(s.U.toUTF8(n)),branch:"master"},successCodes:[201]})},a.createTagAsync=async function(e,t,n){await h(e+"/git/refs",{ref:"refs/tags/"+t,sha:n})},a.createReleaseAsync=async function(e,t,n){await h(e+"/releases",{tag_name:t,target_commitish:n,name:t,draft:!1,prerelease:!1})},a.createPRFromBranchAsync=async function(e,t,n,o,r){e=await h(e+"/pulls",{title:o,body:r||lf("Automatically created from MakeCode."),head:n,base:t,maintainer_can_modify:!0});return null==e?void 0:e.html_url},a.mergeAsync=function(t,e,n,o){return r({url:`https://api.github.com/repos/${C(t).slug}/merges`,method:"POST",successCodes:[201,204,409],data:{base:e,head:n,commit_message:o}}).then(e=>{if(201==e.statusCode||204==e.statusCode)return e.json.sha;if(409==e.statusCode)return null;throw s.U.userError(lf("Cannot merge in github.com/{1}; code: {2}",t,e.statusCode))})},a.getRefAsync=function(e,t){return c("https://api.github.com/repos/"+e+"/git/refs/heads/"+(t=t||"master")).then(o).catch(e=>{404!=e.statusCode&&Promise.reject(e)})},a.getNewBranchNameAsync=async function(e,t="patch-"){return _(await f(e,"heads"),t)},a.createNewBranchAsync=m,a.forkRepoAsync=async function(e,t,n="pr-"){var e=C(e),o=v(await h(e.slug+"/forks",{}),{fullName:e.fullName,fileName:e.fileName}),r=Date.now()+3e5;let i=null;for(;!i&&Date.now()<r;){await s.U.delay(1e3);try{i=await f(o.slug,"heads")}catch(e){}}if(i)return e=_(i,n),await m(o.slug,e,t),o.fullName+"#"+e;throw new Error(lf("Timeout waiting for fork"))},a.listRefsAsync=function(e,t="tags",n,o){return f(e,t,n,o).then(e=>Object.keys(e.refs))},a.listRefsExtAsync=f,a.pkgConfigAsync=k,a.downloadPackageAsync=b,a.downloadLatestPackageAsync=async function(e){var t=await s.packagesConfigAsync(),n=await s.github.latestVersionAsync(e.slug,t),o=e.fullName+"#"+n;return await s.github.downloadPackageAsync(o,t),{version:"github:"+o,config:await k(e.fullName,n)}},a.cacheProjectDependenciesAsync=async function(n){var o,e=null==(o=Object.keys(n.dependencies))?void 0:o.filter(e=>x(n.dependencies[e]));if(e.length){const o=await s.packagesConfigAsync();await Promise.all(e.map(async e=>{var t=n.dependencies[e];if(!await b(t,o))throw new Error(lf("Cannot load extension {0} from {1}",e,t))}))}},(e=i=a.GitRepoStatus||(a.GitRepoStatus={}))[e.Unknown=0]="Unknown",e[e.Approved=1]="Approved",e[e.Banned=2]="Banned",a.listUserReposAsync=function(){return n('{\n  viewer {\n    repositories(first: 100, affiliations: [OWNER, COLLABORATOR], orderBy: {field: PUSHED_AT, direction: DESC}) {\n      nodes {\n        name\n        description\n        full_name: nameWithOwner\n        private: isPrivate\n        fork: isFork\n        updated_at: updatedAt\n        owner {\n          login\n        }\n        defaultBranchRef {\n          name\n        }\n        pxtjson: object(expression: "master:pxt.json") {\n          ... on Blob {\n            text\n          }\n        }\n        readme: object(expression: "master:README.md") {\n          ... on Blob {\n            text\n          }\n        }\n      }\n    }\n  }\n}').then(e=>e.data.viewer.repositories.nodes.filter(e=>e.pxtjson).filter(e=>{e.default_branch=e.defaultBranchRef.name;var t=s.Package.parseAndValidConfig(e.pxtjson&&e.pxtjson.text),e=e.readme&&e.readme.text;return!!t&&(t.supportedTargets?-1<t.supportedTargets.indexOf(s.appTarget.id):e&&-1<e.indexOf("PXT/"+s.appTarget.id))}).map(e=>v(e,{fullName:e.full_name})))},a.createRepoAsync=function(e,t,n){return h("https://api.github.com/user/repos",{name:e,description:t,private:!!n,has_issues:!0,has_projects:!1,has_wiki:!1,allow_rebase_merge:!1,allow_merge_commit:!0,delete_branch_on_merge:!1}).then(e=>v(e))},a.enablePagesAsync=async function(e){const t=C(e);let n;try{const s=await c(`https://api.github.com/repos/${t.slug}/pages`);s&&(n=s.html_url)}catch(e){}if(!n)try{n=(await h(`https://api.github.com/repos/${t.slug}/pages`,{source:{branch:"master",path:"/"}},{Accept:"application/vnd.github.switcheroo-preview+json"})).html_url}catch(e){s.tickEvent("github.pages.error"),s.reportException(e)}if(n){const t=await c("https://api.github.com/repos/"+e);if(t&&!t.homepage)try{await h("https://api.github.com/repos/"+e,{homepage:n},void 0,"PATCH")}catch(e){s.tickEvent("github.homepage.error")}}},a.repoIconUrl=function(e){if(e.status==i.Approved)return t(e)},a.mkRepoIconUrl=t,a.repoStatus=T,a.repoAsync=S,a.searchAsync=function(e,t){var n;return t?0<(n=e.split("|").map(C).filter(e=>!!e)).length?Promise.all(n.map(e=>S(e.fullName,t))).then(e=>e.filter(e=>e&&e.status!=i.Banned)):s.U.httpGetJsonAsync(`${s.Cloud.apiRoot}ghsearch/${s.appTarget.id}/${s.appTarget.platformid||s.appTarget.id}?q=`+encodeURIComponent(e)).then(e=>e.items.map(e=>v(e,{config:t,fullName:e.full_name})).filter(e=>e.status==i.Approved||t.allowUnapproved&&e.status==i.Unknown).filter(e=>!s.appTarget.appTheme.githubUrl||"https://github.com/"+e.fullName!=s.appTarget.appTheme.githubUrl.toLowerCase())).catch(e=>[]):Promise.resolve([])},a.parseRepoId=C,a.toGithubDependencyPath=function(e,t){let n="github:"+e;return t&&(n+="#"+t),n},a.isGithubId=x,a.stringifyRepo=B,a.normalizeRepoId=function(e){e=C(e);if(e)return e.tag=e.tag||"master",B(e)},a.join=A,a.upgradedPackageReference=function(e,t){const n=I(e,t);if(!n)return null;var o=/^min:(.*)/.exec(n),r=o&&s.semver.tryParse(o[1]);if(r){const e=C(t),n=s.semver.tryParse(e.tag);return n&&s.semver.cmp(n,r)<0?(e.tag=o[1],s.debug(`upgrading ${t} to `+o[1]),B(e)):(n||s.log(`not upgrading ${t} - cannot parse version`),null)}return D(e,t)||s.log(`invalid upgrade rule: ${t} -> `+n),t},a.upgradedPackageId=function(e,t){e=D(e,t);return e?t+"?dv="+e.join(","):t},a.latestVersionAsync=function(e,r,t,n){const i=C(e);return i?S(i.slug,r).then(o=>{if(o)return f(o.slug,"tags",t,n).then(t=>{var e=Object.keys(t.refs),e=s.semver.sortLatestTags(e),n=s.appTarget.versions&&s.semver.tryParse(s.appTarget.versions.target);if(n&&r.releases&&r.releases["v"+n.major]){const t=r.releases["v"+n.major].map(e=>s.github.parseRepoId(e)).filter(e=>e&&e.fullName.toLowerCase()==i.fullName.toLowerCase())[0];if(t){if(e.some(e=>e==t.tag))return s.debug(`approved release ${t.fullName}#${t.tag} for v`+n.major),Promise.resolve(t.tag);s.reportError("packages",`approved release ${t.fullName}#${t.tag} for v${n.major} not found anymore`,{repo:o.fullName})}}return e[0]?Promise.resolve(e[0]):t.head||y(o.slug,o.defaultBranch)})}):Promise.resolve(null)},a.resolveMonoRepoVersions=function(n){n=s.Util.clone(n);const o={};return Object.keys(n).map(e=>({id:e,ghid:a.parseRepoId(n[e])})).filter(e=>{return null==(e=e.ghid)?void 0:e.tag}).forEach(e=>{var t=e["ghid"];let n=o[t.slug];(n=n||(o[t.slug]={tag:t.tag,deps:[]})).deps.push(e),s.semver.strcmp(n.tag,t.tag)<0&&(s.debug("dep: resolve later monorepo tag to "+s.github.stringifyRepo(t)),n.tag=t.tag)}),s.U.values(o).forEach(t=>t.deps.forEach(e=>{e.ghid.tag!==t.tag&&(s.debug(`dep: ${s.github.stringifyRepo(e.ghid)} -> `+t.tag),e.ghid.tag=t.tag,n[e.id]=s.github.stringifyRepo(e.ghid))})),n},a.GIT_JSON=".git.json";const O="https://api.github.com/graphql";function n(e){e=JSON.stringify({query:e});return h(O,e)}a.lookupFile=function(e,t,n){if(!t)return null;const o=A(e.fileName,n);return t.tree.tree.find(e=>e.path==o)},a.ghGraphQLQueryAsync=n,a.findPRNumberforBranchAsync=function(e,t){e=C(e);return n(`
{
    repository(owner: ${JSON.stringify(e.owner)}, name: ${JSON.stringify(e.project)}) {
        pullRequests(last: 1, states: [OPEN, MERGED], headRefName: ${JSON.stringify(t)}) {
            edges {
                node {
                    number
                    state
                    mergeable
                    baseRefName
                    url
                    isDraft
                }
            }
        }
    }
}
`).then(e=>{var t=e.data.repository.pullRequests.edges[0];if(t&&t.node){const e=t.node;return{number:e.number,mergeable:e.mergeable,state:e.state,title:e.title,url:e.url,base:e.baseRefName}}return{number:-1}})},a.getPagesStatusAsync=function(e){return c(`https://api.github.com/repos/${e}/pages`).catch(e=>({status:null}))}}}(pxt=pxt||{}),function(e){e.REFCNT_FLASH="0xfffe",e.VTABLE_MAGIC=249,e.ValTypeObject=4,(e=e.BuiltInType||(e.BuiltInType={}))[e.BoxedString=1]="BoxedString",e[e.BoxedNumber=2]="BoxedNumber",e[e.BoxedBuffer=3]="BoxedBuffer",e[e.RefAction=4]="RefAction",e[e.RefImage=5]="RefImage",e[e.RefCollection=6]="RefCollection",e[e.RefRefLocal=7]="RefRefLocal",e[e.RefMap=8]="RefMap",e[e.RefMImage=9]="RefMImage",e[e.MMap=10]="MMap",e[e.BoxedString_SkipList=11]="BoxedString_SkipList",e[e.BoxedString_ASCII=12]="BoxedString_ASCII",e[e.ZPin=13]="ZPin",e[e.User0=16]="User0"}(pxt=pxt||{}),function(l){{var c=l.HF2||(l.HF2={});function a(e,t,n){e[t+0]=n>>0&255,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255}function u(e,t,n){e[t+0]=n>>0&255,e[t+1]=n>>8&255}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function d(e,t){return e[t]|e[t+1]<<8}function n(t){var n=new Uint8Array(4*t.length);for(let e=0;e<t.length;++e)a(n,4*e,t[e]);return n}c.HF2_CMD_BININFO=1,c.HF2_MODE_BOOTLOADER=1,c.HF2_MODE_USERSPACE=2,c.HF2_CMD_INFO=2,c.HF2_CMD_RESET_INTO_APP=3,c.HF2_CMD_RESET_INTO_BOOTLOADER=4,c.HF2_CMD_START_FLASH=5,c.HF2_CMD_WRITE_FLASH_PAGE=6,c.HF2_CMD_CHKSUM_PAGES=7,c.HF2_CMD_READ_WORDS=8,c.HF2_CMD_WRITE_WORDS=9,c.HF2_CMD_DMESG=16,c.HF2_FLAG_SERIAL_OUT=128,c.HF2_FLAG_SERIAL_ERR=192,c.HF2_FLAG_CMDPKT_LAST=64,c.HF2_FLAG_CMDPKT_BODY=0,c.HF2_FLAG_MASK=192,c.HF2_SIZE_MASK=63,c.HF2_STATUS_OK=0,c.HF2_STATUS_INVALID_CMD=1,c.HF2_STATUS_EXEC_ERR=2,c.HF2_STATUS_EVENT=128,c.HF2_CMD_JDS_CONFIG=32,c.HF2_CMD_JDS_SEND=33,c.HF2_EV_JDS_PACKET=8388640,c.CUSTOM_EV_JACDAC="jacdac",c.HF2_EV_MASK=8388608,c.write32=a,c.write16=u,c.read32=i,c.read16=d,c.encodeU32LE=n;let t=!(c.decodeU32LE=function(t){var n=[];for(let e=0;e<t.length;e+=4)n.push(i(t,e));return n});function p(e){t?l.log("HF2: "+e):l.debug("HF2: "+e)}c.enableLog=function(){t=!0};class o{constructor(s){var e;this.io=s,this.cmdSeq=l.U.randomUint32(),this.lock=new l.U.PromiseQueue,this.flashing=!1,this.rawMode=!1,this.maxMsgSize=63,this.bootloaderMode=!1,this.reconnectTries=0,this.autoReconnect=!1,this.icon=(null==(e=l.appTarget.appTheme.downloadDialogTheme)?void 0:e.deviceIcon)||"usb",this.msgs=new l.U.PromiseBuffer,this.eventHandlers={},this.jacdacAvailable=!1,this.onSerial=(e,t)=>{},this.onCustomEvent=(e,t)=>{};let a=[];s.onDeviceConnectionChanged=e=>this.disconnectAsync().then(()=>e&&this.reconnectAsync()),s.onSerial=(e,t)=>this.onSerial(e,t),s.onData=e=>{var o=e[0]&c.HF2_FLAG_MASK,t=63&e[0],n=new Uint8Array(t);if(l.U.memcpy(n,0,e,1,t),o&c.HF2_FLAG_SERIAL_OUT)this.onSerial(n,o==c.HF2_FLAG_SERIAL_ERR);else if(a.push(n),o!=c.HF2_FLAG_CMDPKT_BODY){l.U.assert(o==c.HF2_FLAG_CMDPKT_LAST);let e=0;for(var r of a)e+=r.length;let t=new Uint8Array(e),n=0;for(var i of a)l.U.memcpy(t,n,i),n+=i.length;a=[],t[2]&c.HF2_STATUS_EVENT?s.onEvent(t):this.msgs.push(t)}},s.onEvent=e=>{var t=i(e,0),n=l.U.lookup(this.eventHandlers,t+"");n?n(e.slice(4)):p("unhandled event: "+t.toString(16))},s.onError=e=>{p("recv error: "+e.message),this.autoReconnect&&(this.autoReconnect=!1,this.reconnectAsync().then(()=>{this.autoReconnect=!0},e=>{p("reconnect error: "+e.message)}))},this.onEvent(c.HF2_EV_JDS_PACKET,e=>{this.onCustomEvent(c.CUSTOM_EV_JACDAC,e)})}resetState(){this.lock=new l.U.PromiseQueue,this.info=null,this.infoRaw=null,this.pageSize=null,this.flashSize=null,this.maxMsgSize=63,this.bootloaderMode=!1,this.msgs.drain()}onEvent(e,t){l.U.assert(!!(e&c.HF2_EV_MASK)),this.eventHandlers[e+""]=t}sendCustomEventAsync(e,t){return e==c.CUSTOM_EV_JACDAC?this.jacdacAvailable?this.talkAsync(c.HF2_CMD_JDS_SEND,t).then(()=>{}):Promise.resolve():Promise.reject(new Error("invalid custom event type"))}reconnectAsync(){return this.resetState(),p("reconnect raw="+this.rawMode),this.io.reconnectAsync().then(()=>this.initAsync()).catch(e=>{if(this.reconnectTries<5)return this.reconnectTries++,p(`error ${e.message}; reconnecting attempt #`+this.reconnectTries),l.U.delay(500).then(()=>this.reconnectAsync());throw e})}disconnectAsync(){return p("disconnect"),this.io.disconnectAsync()}error(e){return this.io.error(e)}talkAsync(e,t){if(this.io.talksAsync)return this.io.talksAsync([{cmd:e,data:t}]).then(e=>e[0]);let n=8,o=(t&&(n+=t.length),new Uint8Array(n)),r=65535&++this.cmdSeq,i=(a(o,0,e),u(o,4,r),u(o,6,0),t&&l.U.memcpy(o,8,t,0,t.length),0),s=()=>this.msgs.shiftAsync(1e3).then(e=>{if(d(e,0)!=r){if(i<3)return i++,p(`message out of sync, (${r} vs ${d(e,0)}); will re-try`),s();this.error("out of sync")}let t="";switch(e[3]&&(t="; info="+e[3]),e[2]){case c.HF2_STATUS_OK:return e.slice(4);case c.HF2_STATUS_INVALID_CMD:this.error("invalid command"+t);break;case c.HF2_STATUS_EXEC_ERR:this.error("execution error"+t);break;default:this.error("error "+e[2]+t)}return null});return this.sendMsgAsync(o).then(s)}sendMsgAsync(e){return this.sendMsgCoreAsync(e)}sendSerialAsync(e,t=!1){return this.io.sendSerialAsync?this.io.sendSerialAsync(e,t):this.sendMsgCoreAsync(e,t?2:1)}sendMsgCoreAsync(o,e=0){let r=new Uint8Array(64),i=t=>{let n=o.length-t;if(n<=0)return Promise.resolve();63<n?(n=63,r[0]=c.HF2_FLAG_CMDPKT_BODY):r[0]=c.HF2_FLAG_CMDPKT_LAST,e&&(r[0]=1==e?c.HF2_FLAG_SERIAL_OUT:c.HF2_FLAG_SERIAL_ERR),r[0]|=n;for(let e=0;e<n;++e)r[e+1]=o[t+e];return this.io.sendPacketAsync(r).then(()=>i(t+n))};return this.lock.enqueue("out",()=>i(0))}switchToBootloaderAsync(){return this.bootloaderMode?Promise.resolve():(p("Switching into bootloader mode"),this.io.isSwitchingToBootloader&&this.io.isSwitchingToBootloader(),this.maybeReconnectAsync().then(()=>this.talkAsync(c.HF2_CMD_START_FLASH).then(()=>{},e=>this.talkAsync(c.HF2_CMD_RESET_INTO_BOOTLOADER).then(()=>{},e=>{}).then(()=>this.reconnectAsync().catch(e=>{throw"devicenotfound"===e.type&&(e.type="repairbootloader"),e})))).then(()=>this.initAsync()).then(()=>{this.bootloaderMode||this.error("cannot switch into bootloader mode")}))}isFlashing(){return!!this.flashing}reflashAsync(e){p("reflash"),l.U.assert(l.appTarget.compile.useUF2);const t=e.outfiles[pxtc.BINARY_UF2],n=pxtc.UF2.parseFile(l.Util.stringToUint8Array(atob(t)));return this.flashing=!0,this.io.reconnectAsync().then(()=>this.flashAsync(n)).then(()=>l.U.delay(100)).finally(()=>this.flashing=!1).then(()=>this.reconnectAsync())}writeWordsAsync(e,t){return l.U.assert(t.length<=64),this.talkAsync(c.HF2_CMD_WRITE_WORDS,n([e,t.length].concat(t))).then(()=>{})}readWordsAsync(e,t){var n=new Uint8Array(8);return a(n,0,e),a(n,4,t),l.U.assert(t<=64),this.talkAsync(c.HF2_CMD_READ_WORDS,n)}pingAsync(){return this.rawMode?Promise.resolve():this.talkAsync(c.HF2_CMD_BININFO).then(e=>{})}maybeReconnectAsync(){return this.pingAsync().catch(e=>this.reconnectAsync().then(()=>this.pingAsync()))}flashAsync(o){let n=Date.now(),r=0,i=e=>{var t,n;return e>=o.length?Promise.resolve():(t=o[e],a(n=new Uint8Array(4+t.payloadSize),0,t.targetAddr),l.U.memcpy(n,4,t.data,0,t.payloadSize),this.talkAsync(c.HF2_CMD_WRITE_FLASH_PAGE,n).then(()=>i(e+1)))};return this.switchToBootloaderAsync().then(()=>{var e=256*o.length;return p(`Starting flash (${Math.round(e/1024)}kB).`),r=Date.now(),16384<this.pageSize?o:s(o,(e,t)=>this.readWordsAsync(e,t))}).then(e=>{e.length!=o.length&&(e=256*(o=e).length,p(`Performing partial flash (${Math.round(e/1024)}kB).`))}).then(()=>i(0)).then(()=>{var e=Date.now(),t=e-n,e=e-r;p(`Flashing done at ${Math.round(256*o.length/e*1e3/1024)} kB/s in ${t}ms (reset ${t-e}ms). Resetting.`)}).then(()=>this.talkAsync(c.HF2_CMD_RESET_INTO_APP).catch(e=>{})).then(()=>{})}initAsync(){return this.rawMode?Promise.resolve():Promise.resolve().then(()=>this.talkAsync(c.HF2_CMD_BININFO)).then(e=>(this.bootloaderMode=e[0]==c.HF2_MODE_BOOTLOADER,this.pageSize=i(e,4),this.flashSize=i(e,8)*this.pageSize,this.maxMsgSize=i(e,12),this.familyID=i(e,16),p(`Connected; msgSize ${this.maxMsgSize}B; flash ${this.flashSize/1024}kB; ${this.bootloaderMode?"bootloader":"application"} mode; family=0x`+this.familyID.toString(16)),this.talkAsync(c.HF2_CMD_INFO))).then(e=>{this.infoRaw=l.Util.fromUTF8Array(e),l.debug("Info: "+this.infoRaw);let o={};("Header: "+this.infoRaw).replace(/^([\w\-]+):\s*([^\n\r]*)/gm,(e,t,n)=>(o[t.replace(/-/g,"")]=n,"")),this.info=o;e=/v(\d\S+)(\s+(\S+))?/.exec(this.info.Header);this.info.Parsed=e?{Version:e[1],Features:e[3]||""}:{Version:"?",Features:""},p(`Board-ID: ${this.info.BoardID} v${this.info.Parsed.Version} f`+this.info.Parsed.Features)}).then(()=>this.talkAsync(c.HF2_CMD_JDS_CONFIG,new Uint8Array([1])).then(()=>{this.jacdacAvailable=!0},e=>{this.jacdacAvailable=!1})).then(()=>{this.reconnectTries=0})}}function s(o,e){if(!l.appTarget.compile.flashChecksumAddr)return Promise.resolve(o);let t=pxtc.UF2.readBytes(o,l.appTarget.compile.flashChecksumAddr,48),r=pxtc.parseChecksumBlock(t);return r?(n=e,(l.appTarget.compile.flashChecksumAddr?n(l.appTarget.compile.flashChecksumAddr,12).then(e=>{let t=pxtc.parseChecksumBlock(e);return t?n(t.endMarkerPos,1).then(e=>i(e,0)!=t.endMarker?(l.log("end-marker mismatch"),null):t):null}):Promise.resolve(null)).then(e=>{if(!e)return o;let n=e.regions.filter(t=>r.regions.some(e=>t.checksum==e.checksum&&t.length==e.length&&t.start==e.start));if(0==n.length)return o;p("skipping flash at: "+n.map(e=>`${pxtc.assembler.tohex(e.start)} (${e.length/1024}kB)`).join(", "));let t=t=>n.some(e=>e.start<=t&&t<e.start+e.length);return o.filter(e=>!(t(e.targetAddr)&&t(e.targetAddr+e.payloadSize-1)))})):Promise.resolve(o);var n}c.Wrapper=o,c.mkHF2PacketIOWrapper=function(e){return l.debug("packetio: wrapper hf2"),new o(e)},c.onlyChangedBlocksAsync=s}}(pxt=pxt||{}),function(r){{var i=r.HWDBG||(r.HWDBG={}),_=r.Util,m=r.HF2;const E=m.read32;let p,e,n,t,g,h,s,a,o=!1;function f(e){return 1&e?e>>1:0!=e?2&e?e==i.taggedNull?null:e!=i.taggedFalse&&(e==i.taggedTrue||{tagged:e>>2}):{ptr:e}:void 0}function l(e,t){var n;if(_.assert(!(3&e)),_.assert(0<=e),e<2097152)return n=new Uint8Array(t),e-=s.start,_.memcpy(n,0,s.buf,e,t),Promise.resolve(n);var o=a.maxMsgSize-32;if(o<t){for(var r=[];0<t;){var i=Math.min(o,t);r.push(l(e,i)),t-=i,e+=i}return Promise.all(r).then(_.uint8ArrayConcat)}return a.readWordsAsync(e,Math.ceil(t/4)).then(e=>e.length>t?e.slice(0,t):e)}function c(o){if("object"!=typeof o||!o)return Promise.resolve(o);if("number"!=typeof o.ptr)return Promise.resolve(o);{if(3&o.ptr)return Promise.resolve({unalignedPtr:o.ptr});let n=0;return l(o.ptr,56).then(t=>{n=m.read16(t,2);let e=t.length;return n==r.BuiltInType.BoxedString||n==r.BuiltInType.BoxedBuffer?e=m.read16(t,4)+6:n==r.BuiltInType.BoxedNumber&&(e=12),e>t.length?l(o.ptr+t.length,e-t.length).then(e=>_.uint8ArrayConcat([t,e])):e<t.length?t.slice(0,e):t}).then(e=>n==r.BuiltInType.BoxedString?_.uint8ArrayToString(e.slice(6)):n==r.BuiltInType.BoxedBuffer?{type:"buffer",data:e.slice(6)}:n==r.BuiltInType.BoxedNumber?new Float64Array(e.buffer.slice(4))[0]:{type:"unknown",tag:n,refcnt:m.read16(e,0),data:e.slice(4)})}}function y(n){var e=[];for(let t of Object.keys(n))e.push(c(n[t]).then(e=>{n[t]=e}));return Promise.all(e).then(()=>{})}function k(e){let t=p.breakpoints,n=t[0],o=1/0;for(var r of t){var i=e-r.binAddr;0<=i&&i<o&&(o=i,n=r)}return n}function u(t){if(o)return Promise.resolve();let d;return o=!0,T().then(o=>{var e=m.decodeU32LE(t)[0],r={};for(let n of p.procDebugInfo[0].locals){let e=o.globals,t=(()=>{switch(n.type){case"uint32":return m.read32(e,n.index);case"int32":return 0|m.read32(e,n.index);case"uint16":return m.read16(e,n.index);case"int16":return m.read16(e,n.index)<<16>>16;case"uint8":return e[n.index];case"int8":return e[n.index]<<24>>24;default:return null}})();null===t&&(_.assert(0==(3&n.index)),t=f(m.read32(e,n.index))),r[n.name]=t}return g=k(e),d={type:"debugger",subtype:"breakpoint",breakpointId:g.id,globals:r,stackframes:[]},n(),a.talkAsync(1888490768)}).then(e=>{{var i=m.decodeU32LE(e),s=d;let n=g.binAddr,o=0,r=p.procDebugInfo.filter(e=>e.codeStartLoc<=n&&n<=e.codeEndLoc)[0];for(;r&&r!=p.procDebugInfo[0];){var a,l=k(n),c=_.clone(l);c.functionName=r.name,c.argumentNames=r.args&&r.args.map(e=>e.name),s.stackframes.push({locals:{},funcInfo:c,breakpointId:l.id});let e=s.stackframes[s.stackframes.length-1],t=0;for(a of r.locals)_.assert(a.index==t++),e.locals[a.name]=f(i[o++]);n=2147483646&i[o++];var u,c=h[n+""];for(u of r.args)e.locals[u.name]=f(i[o+(r.args.length-1-u.index)]);if(!c)break;r=c.from,o+=c.stack-r.localsMark}}e=[d.globals].concat(d.stackframes.map(e=>e.locals));return _.promiseMapAll(e,y)}).then(()=>i.postMessage(d))}function d(){o=!1,e=new Promise((e,t)=>{n=e})}function b(e=!1){return Promise.resolve().then(()=>a.talkAsync(665147697,m.encodeU32LE([e?1:3]))).then(d)}function v(){return e=e||Promise.resolve()}function T(){return(t?Promise.resolve(t):a.talkAsync(1409050336).then(e=>t={numGlobals:E(e,0),globalsPtr:E(e,4)})).then(e=>a.readWordsAsync(e.globalsPtr,e.numGlobals)).then(e=>({staticState:t,globals:e}))}i.taggedUndefined=0,i.taggedNull=6,i.taggedFalse=10,i.taggedTrue=66,i.postMessage=e=>console.log(e),i.decodeValue=f,i.heapExpandAsync=c,i.heapExpandMapAsync=y,i.startDebugAsync=function(r,e){return(a=e).onEvent(915601917,u),o=!1,p=null,t=null,Promise.resolve().then(()=>{p=r,h={};var e,t,n=[];for(e of r.procDebugInfo)n[e.idx]=e;for(t of r.procDebugInfo)for(var o of t.calls)h[o.addr+""]={from:t,to:n[o.procIndex],stack:o.stack}}).then(()=>{var e=p.outfiles[pxtc.BINARY_UF2],e=_.stringToUint8Array(atob(e));return s=pxtc.UF2.toBin(e),a.reflashAsync(p).then(()=>a.reconnectAsync())}).then(()=>a.talkAsync(287358355).catch(e=>{})).then(()=>_.delay(200)).then(()=>a.reconnectAsync()).then(d).then(v)},i.handleMessage=function(t){if(console.log("HWDBGMSG",t),"debugger"==t.type){let e=!1;switch(t.subtype){case"stepinto":e=!0;case"stepover":b(e)}}},i.resumeAsync=b,i.waitForHaltAsync=v,i.getHwStateAsync=T}}(pxt=pxt||{}),function(h){h.ImageConverter=class{logTime(){var e;this.start&&(e=Date.now()-this.start,h.debug("Icon creation: "+e+"ms"))}convert(e){this.start||(this.start=Date.now());let t=atob(e.slice(e.indexOf(",")+1)),n=t.charCodeAt(0),o=t.charCodeAt(1),r=t.charCodeAt(2);if(135===n&&(n=224|t.charCodeAt(1),o=t.charCodeAt(2)|t.charCodeAt(3)<<8,r=t.charCodeAt(4)|t.charCodeAt(5)<<8,t=t.slice(4)),225!=n&&228!=n)return null;if(!this.palette){var i=h.appTarget.runtime.palette.map(function(e){e=parseInt(e.replace(/#/,""),16);return[e>>0&255,e>>8&255,e>>16&255,255]});i[0][3]=0,this.palette=new Uint8Array(4*i.length);for(let e=0;e<i.length;++e)this.palette[4*e+0]=i[e][0],this.palette[4*e+1]=i[e][1],this.palette[4*e+2]=i[e][2],this.palette[4*e+3]=i[e][3]}return 225==n?this.genMonochrome(t,o,r):(e=(h.BrowserUtils.isEdge()||h.BrowserUtils.isIE())&&o<100&&r<100?3:1,this.genColor(t,o,r,e))}genMonochrome(t,n,o){var r=n+3&-4,i=54+this.palette.length,e=i+r*o,s=new Uint8Array(e);s[0]=66,s[1]=77,h.HF2.write32(s,2,e),h.HF2.write32(s,10,i),h.HF2.write32(s,14,40),h.HF2.write32(s,18,n),h.HF2.write32(s,22,-o),h.HF2.write16(s,26,1),h.HF2.write16(s,28,8),h.HF2.write32(s,38,2835),h.HF2.write32(s,42,2835),h.HF2.write32(s,46,this.palette.length>>2),s.set(this.palette,54);let a=4,l=i,c=1,u=t.charCodeAt(a++);for(let e=0;e<n;++e){l=i+e;for(let e=0;e<o;++e)s[l]=u&c?1:0,l+=r,256==(c<<=1)&&(c=1,u=t.charCodeAt(a++))}return"data:image/bmp;base64,"+btoa(h.U.uint8ArrayToString(s))}genColor(i,e,s,a){var t=e*(a=Math.max(1,0|a)),l=s*a,c=t<<2,e=138+c*l,u=new Uint8Array(e);u[0]=66,u[1]=77,h.HF2.write32(u,2,e),h.HF2.write32(u,10,138),h.HF2.write32(u,14,124),h.HF2.write32(u,18,t),h.HF2.write32(u,22,-l),h.HF2.write16(u,26,1),h.HF2.write16(u,28,32),h.HF2.write16(u,30,3),h.HF2.write32(u,38,2835),h.HF2.write32(u,42,2835),h.HF2.write32(u,54,16711680),h.HF2.write32(u,58,65280),h.HF2.write32(u,62,255),h.HF2.write32(u,66,4278190080),u[70]=66,u[71]=71,u[72]=82,u[73]=115;let d=4,p=138,g=!0;for(let r=0;r<t;r++){let t=!1,e=(p=138+(r<<2),d),n=i.charCodeAt(d++),o=t?(n>>4&15)<<2:(15&n)<<2;for(let e=0;e<l;e++)n&&(g=!1),u[p]=this.palette[o],u[p+1]=this.palette[o+1],u[p+2]=this.palette[o+2],u[p+3]=this.palette[o+3],p+=c,e%a==a-1&&(t&&(n=i.charCodeAt(d++)),t=!t,o=t?(n>>4&15)<<2:(15&n)<<2);if(g&&(u[141]=1),r%a==a-1)for(s%2||--d;3&d;)d++;else d=e}return"data:image/bmp;base64,"+btoa(h.U.uint8ArrayToString(u))}}}(pxt=pxt||{}),function(i){function s(){const t={"tsconfig.json":o.TS_CONFIG,"test.ts":`// ${lf("tests go here; this will not be compiled when this package is used as an extension.")}
`,"_config.yml":"makecode:\n  target: @TARGET@\n  platform: @PLATFORM@\n  home_url: @HOMEURL@\ntheme: jekyll-theme-slate\ninclude:\n  - assets\n  - README.md\n",Makefile:"all: deploy\n\nbuild:\n\tpxt build\n\ndeploy:\n\tpxt deploy\n\ntest:\n\tpxt test\n",Gemfile:"source 'https://rubygems.org'\ngem 'github-pages', group: :jekyll_plugins","README.md":`
> ${lf("Open this page at {0}","[https://@REPOOWNER@.github.io/@REPONAME@/](https://@REPOOWNER@.github.io/@REPONAME@/)")}

## ${lf("Use as Extension")}

${lf("This repository can be added as an **extension** in MakeCode.")}

* ${lf("open [@HOMEURL@](@HOMEURL@)")}
* ${lf("click on **New Project**")}
* ${lf("click on **Extensions** under the gearwheel menu")}
* ${lf("search for **https://github.com/@REPO@** and import")}

## ${lf("Edit this project")} ![${lf("Build status badge")}](https://github.com/@REPO@/workflows/MakeCode/badge.svg)

${lf("To edit this repository in MakeCode.")}

* ${lf("open [@HOMEURL@](@HOMEURL@)")}
* ${lf("click on **Import** then click on **Import URL**")}
* ${lf("paste **https://github.com/@REPO@** and click import")}

## ${lf("Blocks preview")}

${lf("This image shows the blocks code from the last commit in master.")}
${lf("This image may take a few minutes to refresh.")}

![${lf("A rendered view of the blocks")}](https://github.com/@REPO@/raw/master/.github/makecode/blocks.png)

#### ${lf("Metadata (used for search, rendering)")}

* for PXT/@TARGET@
<script src="https://makecode.com/gh-pages-embed.js"></script><script>makeCodeRender("{{ site.makecode.home_url }}", "{{ site.github.owner_name }}/{{ site.github.repository_name }}");</script>
`,".gitignore":"# MakeCode\nbuilt\nnode_modules\nyotta_modules\nyotta_targets\npxt_modules\n_site\n*.db\n*.tgz\n.header.json\n.simstate.json\n",".vscode/settings.json":'{\n    "editor.formatOnType": true,\n    "files.autoSave": "afterDelay",\n    "files.watcherExclude": {\n        "**/.git/objects/**": true,\n        "**/built/**": true,\n        "**/node_modules/**": true,\n        "**/yotta_modules/**": true,\n        "**/yotta_targets": true,\n        "**/pxt_modules/**": true\n    },\n    "files.associations": {\n        "*.blocks": "html",\n        "*.jres": "json"\n    },\n    "search.exclude": {\n        "**/built": true,\n        "**/node_modules": true,\n        "**/yotta_modules": true,\n        "**/yotta_targets": true,\n        "**/pxt_modules": true\n    }\n}',".github/workflows/makecode.yml":"name: MakeCode\n\non: [push]\n\njobs:\n  build:\n\n    runs-on: ubuntu-latest\n\n    strategy:\n      matrix:\n        node-version: [14.x]\n\n    steps:\n      - uses: actions/checkout@v1\n      - name: Use Node.js ${{ matrix.node-version }}\n        uses: actions/setup-node@v1\n        with:\n          node-version: ${{ matrix.node-version }}\n      - name: npm install\n        run: |\n          npm install -g pxt\n          pxt target @TARGET@\n      - name: build\n        run: |\n          pxt install\n          pxt build --cloud\n        env:\n          CI: true\n",".github/workflows/cfg-check.yml":"name: Check pxt.json\n\non:\n  push:\n    branches:\n      - 'master'\n      - 'main'\n\njobs:\n  check-cfg:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        node-version: [14.x]\n    steps:\n      - uses: actions/checkout@v2\n      - name: Use Node.js ${{ matrix.node-version }}\n        uses: actions/setup-node@v1\n        with:\n          node-version: ${{ matrix.node-version }}\n      - name: npm install\n        run: |\n          npm install -g pxt\n          pxt target @TARGET@\n      - name: Checkout current state\n        run: |\n          git checkout -- .\n          git clean -fd\n      - name: Fix files listed in config if necessary\n        run: pxt checkpkgcfg\n      - name: Create Pull Request\n        uses: peter-evans/create-pull-request@v3\n        continue-on-error: true\n        with:\n          title: 'Removing missing files from pxt.json'\n          commit-message: 'Removing missing files from pxt.json'\n          delete-branch: true\n",".vscode/tasks.json":'\n// A task runner that calls the MakeCode (PXT) compiler\n{\n    "version": "2.0.0",\n    "tasks": [{\n        "label": "pxt deploy",\n        "type": "shell",\n        "command": "pxt deploy --local",\n        "group": "build",\n        "problemMatcher": [ "$tsc" ]\n    }, {\n        "label": "pxt build",\n        "type": "shell",\n        "command": "pxt build --local",\n        "group": "build",\n        "problemMatcher": [ "$tsc" ]\n    }, {\n        "label": "pxt install",\n        "type": "shell",\n        "command": "pxt install",\n        "group": "build",\n        "problemMatcher": [ "$tsc" ]\n    }, {\n        "label": "pxt clean",\n        "type": "shell",\n        "command": "pxt clean",\n        "group": "test",\n        "problemMatcher": [ "$tsc" ]\n    }]\n}\n'},n=e();return n&&Object.keys(n).forEach(e=>t[e]=n[e]),t}function e(){var e=i.appTarget.bundledpkgs[i.template.TEMPLATE_PRJ];if(e)return delete(e=i.Util.clone(e))[i.CONFIG_NAME],e}var o;(o=i.template||(i.template={})).TS_CONFIG='{\n    "compilerOptions": {\n        "target": "ES5",\n        "noImplicitAny": true,\n        "outDir": "built",\n        "rootDir": "."\n    },\n    "exclude": ["pxt_modules/**/*test.ts"]\n}\n',o.defaultFiles=s,o.targetTemplateFiles=e,o.TEMPLATE_PRJ="template",o.packageFiles=function(e){var t=i.appTarget.blocksprj||i.appTarget.tsprj,n=i.U.clone(t.config),o=(delete n.installedVersion,delete n.additionalFilePath,delete n.additionalFilePaths,n.preferredEditor=n.files.find(e=>/\.blocks$/.test(e))?i.BLOCKS_PROJECT_NAME:i.JAVASCRIPT_PROJECT_NAME,n.name=e,n.public=!0,n.version||(n.version="0.0.0"),{}),r=s();for(const i in r)o[i]=r[i];for(const i in t.files)"README.md"!=i&&(o[i]=t.files[i]);e=Object.keys(o).filter(e=>/\.(blocks|md|ts|asm|cpp|h|py)$/.test(e));return n.files=e.filter(e=>!/test/.test(e)),n.testFiles=e.filter(e=>/test/.test(e)),n.supportedTargets=[i.appTarget.id],o[i.CONFIG_NAME]=i.Package.stringifyConfig(n),o},o.packageFilesFixup=function(n,e){const o=JSON.parse(n[i.CONFIG_NAME]);e&&i.Util.jsonMergeFrom(o,e),i.webConfig&&(Object.keys(i.webConfig).forEach(e=>o[e.toLowerCase()]=i.webConfig[e]),o.platform=i.appTarget.platformid||i.appTarget.id,o.target=i.appTarget.id,o.docs=i.appTarget.appTheme.homeUrl||"./",o.homeurl=i.appTarget.appTheme.homeUrl||"???"),i.U.iterMap(n,(e,t)=>{t=t.replace(/@([A-Z]+)@/g,(e,t)=>o[t.toLowerCase()]||""),n[e]=t})}}(pxt=pxt||{}),function(f){{var e=f.blocks||(f.blocks={}),t,n;let _,m;(t=_=e.NT||(e.NT={}))[t.Prefix=0]="Prefix",t[t.Postfix=1]="Postfix",t[t.Infix=2]="Infix",t[t.Block=3]="Block",t[t.NewLine=4]="NewLine",(t=m=e.GlueMode||(e.GlueMode={}))[t.None=0]="None",t[t.WithSpace=1]="WithSpace",t[t.NoSpace=2]="NoSpace";const v=["break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with"];function o(e){return"`"+e.replace(/[\\`${}]/g,e=>"\\"+e)+"`"}function r(e){return 20<e.length&&/\n/.test(e)?o(e):JSON.stringify(e)}function i(e,t,n){return{type:e,op:t,children:n}}function s(){return i(_.NewLine,"",[])}function a(e,t){return i(_.Prefix,e,t)}function l(e,t,n){return i(_.Infix,t,null==e?[n]:[e,n])}function y(e){return a(e,[])}function c(e){return i(_.Block,"",e)}function k(e){return a("",e)}function u(e,t=!1){var n=[];for(const o of e)t?(0<n.length&&n.push(y(",")),n.push(s())):0<n.length&&n.push(y(", ")),n.push(o);return t&&n.push(s()),k(n)}function d(e,t,n=!1,o=!1){return k(o?[l(t[0],".",y(e)),y("("),u(t.slice(1),n),y(")")]:[y(e),y("("),u(t,n),y(")")])}function p(e,t,n,o){return d(e+"."+t,n,o)}function g(e,t){return f.U.assert(2==t.length),l(t[0],e,t[1])}e.backtickLit=o,e.stringLit=r,e.mkNode=i,e.mkNewLine=s,e.mkPrefix=a,e.mkPostfix=function(e,t){return i(_.Postfix,t,e)},e.mkInfix=l,e.mkText=y,e.mkBlock=c,e.mkGroup=k,e.mkStmt=function(...e){var t=e[e.length-1];return t&&t.type==_.Block||e.push(s()),k(e)},e.mkCommaSep=u,(n=t=e.Helpers||(e.Helpers={})).mkArrayLiteral=function(e,t){return k([y("["),u(e,t),y("]")])},n.mkNumberLiteral=function(e){return y(e.toString())},n.mkBooleanLiteral=function(e){return y(e?"true":"false")},n.mkStringLiteral=function(e){return y(r(e))},n.mkPropertyAccess=function(e,t){return k([l(t,".",y(e))])},n.mkCall=d,n.stdCall=function(e,t,n){return d(e,t,n)},n.extensionCall=function(e,t,n){return d(e,t,n,!0)},n.namespaceCall=p,n.mathCall=function(e,t){return p("Math",e,t,!1)},n.mkGlobalRef=y,n.mkSimpleCall=g,n.mkWhile=function(e,t){return k([y("while ("),e,y(")"),c(t)])},n.mkComment=function(e){return y("// "+e)},n.mkMultiComment=function(e){let o=[y("/**"),s()];return e.split("\n").forEach((e,t,n)=>{e&&(o.push(y(" * "+e)),o.push(s()),t<n.length-1)&&(o.push(y(" * ")),o.push(s()))}),k(o.concat([y(" */"),s()]))},n.mkAssign=function(e,t){return g("=",[e,t])},n.mkParenthesizedExpression=function(e){return b(h([e]).output)?e:k([y("("),e,y(")")])},e.H=t;const T={"=":3,"+=":3,"-=":3,"?":4,":":4,"||":5,"&&":6,"|":7,"^":8,"&":9,"==":10,"!=":10,"===":10,"!==":10,"<":11,">":11,"<=":11,">=":11,">>":12,">>>":12,"<<":12,"+":13,"-":13,"*":14,"/":14,"%":14,"**":15,"!":16,"~":16,"P-":16,"P+":16,"++":16,"--":16,".":18};function h(e){let s=[],a={},l="",c="",u=[{}],d=0;function p(e){"string"==typeof e&&(d+=(e.match(/\n/g)||[]).length),l+=e}e=k(e);return function e(n,o){if(n.type!=_.Infix)for(var t of n.children)e(t,-1);else{let t=[];var r,i=f.U.lookup(T,n.op);function s(e){"P"==e[0]&&(e=e.slice(1)),t.push(y(e))}null==i&&f.U.oops("bad infix op: "+n.op),i<o&&s("("),1==n.children.length?(s(n.op),e(n.children[0],i),t.push(n.children[0])):(r=3!=i&&"**"!=n.op,e(n.children[0],r?i:i+.1),t.push(n.children[0]),"."==n.op?s("."):s(" "+n.op+" "),e(n.children[1],r?i+.1:i),t.push(n.children[1])),i<o&&s(")"),n.type=_.Prefix,n.op="",n.children=t}}(e,-1),function r(e){e.glueToBlock&&(h(),e.glueToBlock==m.WithSpace)&&p(" ");let t=d,n=l.length;switch(e.type){case _.Infix:f.U.oops("no infix should be left");break;case _.NewLine:p("\n"+c);break;case _.Block:!function(e){let t=e.noFinalNewline?"":"\n";if(0==e.children.length)return g(" {\n\t\n}"+t);let n=f.U.clone(u[u.length-1]||{});u.push(n),c+="    "," "!=l[l.length-1]&&g(" "),g("{\n");for(var o of e.children)r(o);c=c.slice(4),h(),g("\n}"+t),u.pop()}(e);break;case _.Prefix:e.canIndentInside?p(e.op.replace(/\n/g,"\n"+c+"    ")):p(e.op),e.children.forEach(r);break;case _.Postfix:e.children.forEach(r),e.canIndentInside?p(e.op.replace(/\n/g,"\n"+c+"    ")):p(e.op)}let o=d,i=Math.max(l.length,1);if(e.id)if(a[e.id]){const f=a[e.id];f.startLine=Math.min(f.startLine,t),f.endLine=Math.max(f.endLine,o),f.startPos=Math.min(f.startPos,n),f.endPos=Math.max(f.endPos,i)}else{const f={id:e.id,startLine:t,startPos:n,endLine:o,endPos:i};a[e.id]=f,s.push(f)}}(e),l||p("\n"),{output:l,sourceMap:s};function g(e){p(e.replace(/\n/g,"\n"+c))}function h(){l=l.replace(/\n *$/,function(){return d--,""})}}function b(n){if("("===n[0]&&")"===n[n.length-1]){let t=1;for(let e=1;e<n.length;e++){var o=n[e];if("("===o)t++;else if(")"===o&&0===--t)return e===n.length-1}}return!1}e.flattenNode=h,e.isReservedWord=function(e){return-1!==v.indexOf(e)},e.isParenthesized=b}}(pxt=pxt||{}),function(c){{var s=c.sprite||(c.sprite={});const v=[".","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];s.BLOCKLY_TILESET_TYPE="BLOCKLY_TILESET_TYPE",s.TILE_PREFIX="tile",s.TILE_NAMESPACE="myTiles",s.IMAGES_NAMESPACE="myImages",s.IMAGE_PREFIX="image",s.ANIMATION_NAMESPACE="myAnimations",s.ANIMATION_PREFIX="anim";class T{constructor(e,t,n=0,o=0,r){this.width=e,this.height=t,this.x0=n,this.y0=o,this.width||(this.width=16),this.height||(this.height=16),this.buf=r||new Uint8ClampedArray(this.dataLength())}static fromData(e){return new T(e.width,e.height,e.x0,e.y0,e.data)}set(e,t,n){e<this.width&&t<this.height&&0<=e&&0<=t&&(e=this.coordToIndex(e,t),this.setCore(e,n))}get(e,t){return e<this.width&&t<this.height&&0<=e&&0<=t?(e=this.coordToIndex(e,t),this.getCore(e)):0}copy(n=0,o=0,e=this.width,r=this.height){var i=new T(e,r);i.x0=n,i.y0=o;for(let t=0;t<e;t++)for(let e=0;e<r;e++)i.set(t,e,this.get(n+t,o+e));return i}apply(n,o=!1){var r;for(let t=0;t<n.width;t++)for(let e=0;e<n.height;e++)!(r=n.get(t,e))&&o||this.set(n.x0+t,n.y0+e,r)}equals(t){if(this.width!==t.width||this.height!==t.height||this.x0!==t.x0||this.y0!==t.y0||this.buf.length!==t.buf.length)return!1;for(let e=0;e<this.buf.length;e++)if(this.buf[e]!==t.buf[e])return!1;return!0}data(){return{width:this.width,height:this.height,x0:this.x0,y0:this.y0,data:this.buf}}resize(e,t){return i(this,e,t)}coordToIndex(e,t){return e+t*this.width}getCore(e){var t=Math.floor(e/2);return e%2==0?15&this.buf[t]:(240&this.buf[t])>>4}setCore(e,t){var n=Math.floor(e/2);this.buf[n]=e%2==0?240&this.buf[n]|15&t:15&this.buf[n]|(15&t)<<4}dataLength(){return Math.ceil(this.width*this.height/2)}}class E extends(s.Bitmap=T){static fromData(e){return new E(e.width,e.height,e.x0,e.y0,e.data)}copy(n=0,o=0,e=this.width,r=this.height){var i=new E(e,r);i.x0=n,i.y0=o;for(let t=0;t<e;t++)for(let e=0;e<r;e++)i.set(t,e,this.get(n+t,o+e));return i}resize(e,t){return u(this,e,t)}getCore(e){return this.buf[e]}setCore(e,t){this.buf[e]=t}dataLength(){return this.width*this.height}}s.Tilemap=E;class S{constructor(e,t,n){this.tilemap=e,this.tileset=t,this.layers=n,this.nextId=0}cloneData(){var e=this.tilemap.copy(),t={tileWidth:this.tileset.tileWidth,tiles:this.tileset.tiles.map(e=>Object.assign(Object.assign({},e),{bitmap:T.fromData(e.bitmap).copy().data()}))},n=T.fromData(this.layers).copy().data();return new S(e,t,n)}equals(t){if(!this.tilemap.equals(t.tilemap)||this.tileset.tileWidth!=t.tileset.tileWidth||this.tileset.tiles.length!=t.tileset.tiles.length||!e(this.layers,t.layers))return!1;for(let e=0;e<this.tileset.tiles.length;e++)if(!c.assetEquals(this.tileset.tiles[e],t.tileset.tiles[e]))return!1;return!0}}function n(e){return t(atob(e.slice(e.indexOf(",")+1)))}function t(r){let e=r.charCodeAt(0),i=r.charCodeAt(1),s=r.charCodeAt(2);135===e&&(e=224|r.charCodeAt(1),i=r.charCodeAt(2)|r.charCodeAt(3)<<8,s=r.charCodeAt(4)|r.charCodeAt(5)<<8,r=r.slice(4));var a=new c.sprite.Bitmap(i,s);let l=4;if(225===e){let n=1,o=r.charCodeAt(l++);for(let t=0;t<i;++t)for(let e=0;e<s;++e)a.set(t,e,o&n?1:0),256==(n<<=1)&&(n=1,o=r.charCodeAt(l++))}else for(let t=0;t<i;t++){for(let e=0;e<s;e+=2){var n=r.charCodeAt(l++);a.set(t,e,15&n),e!=s-1&&a.set(t,e+1,n>>4&15)}for(;3&l;)l++}return a}function a(e,t){!(e=(e=(e=e.replace(/[ `]|(?:&#96;)|(?:&#9;)|(?:hex)/g,"").trim()).replace(/^["`\(\)]*/,"").replace(/["`\(\)]*$/,"")).replace(/&#10;/g,"\n"))&&t&&(e=t);var t=parseInt(e.substr(0,2),16)|parseInt(e.substr(2,2),16)<<8,n=parseInt(e.substr(4,2),16)|parseInt(e.substr(6,2),16)<<8,e=f(e.substring(8));return E.fromData({width:t,height:n,x0:0,y0:0,data:e})}function o(e){return""+r(e.width,2)+r(e.height,2)+y(e.data().data)}function l(e,o){return(e=e.replace(/[\[\]]/g,""))?e.split(",").filter(e=>!!e.trim()).map(e=>{var t=e,n=o;if(0===(t=t.trim()).indexOf("img"))return e=d(t),n.createNewTile(e.data());switch(t){case"myTiles.tile0":case"myTiles.transparency16":return n.getTransparency(16);case"myTiles.transparency8":return n.getTransparency(8);case"myTiles.transparency32":return n.getTransparency(32);default:return n.resolveTile(t)}}):[]}function r(e,t){let n=e.toString(16);var o=t<<1;for(1&n.length&&(n="0"+n);n.length<o;)n+="0";return n}function i(e,t,n){t=new T(t,n);return t.apply(e),t}function u(e,t,n){t=new E(t,n);return t.apply(e),t}function d(e){const n=(e=(e=(e=e.replace(/[ `]|(?:&#96;)|(?:&#9;)|(?:img)/g,"").trim()).replace(/^["`\(\)]*/,"").replace(/["`\(\)]*$/,"")).replace(/&#10;/g,"\n")).split("\n"),o=[];let r=0;for(let e=0;e<n.length;e++){const T=n[e],i=[];for(let e=0;e<T.length;e++)switch(T[e]){case"0":case".":i.push(0);break;case"1":case"#":i.push(1);break;case"2":case"T":i.push(2);break;case"3":case"t":i.push(3);break;case"4":case"N":i.push(4);break;case"5":case"n":i.push(5);break;case"6":case"G":i.push(6);break;case"7":case"g":i.push(7);break;case"8":i.push(8);break;case"9":i.push(9);break;case"a":case"A":case"R":i.push(10);break;case"b":case"B":case"P":i.push(11);break;case"c":case"C":case"p":i.push(12);break;case"d":case"D":case"O":i.push(13);break;case"e":case"E":case"Y":i.push(14);break;case"f":case"F":case"W":i.push(15);break;default:if(!/\s/.test(T[e]))return}i.length&&(o.push(i),r=Math.max(r,i.length))}const i=o.length,s=new T(r,i);for(let t=0;t<i;t++){const n=o[t];for(let e=0;e<r;e++)e<n.length?s.set(e,t,n[e]):s.set(e,t,0)}return s}function p(e){let t="";return t="python"===e?'img("""':"img`"}function g(e){let t="";return t+="python"===e?'""")':"`"}function h(n,o){if(!n||0===n.height||0===n.width)return"";let r=p(o);if(n){const o=300<n.width*n.height?"":" ";for(let t=0;t<n.height;t++){r+="\n";for(let e=0;e<n.width;e++)r+=v[n.get(e,t)]+o}}return r=(r+="\n")+g(o)}function e(e,t){return c.sprite.Bitmap.fromData(e).equals(c.sprite.Bitmap.fromData(t))}function _(e){switch(e){case 8:return"TileScale.Eight";case 16:return"TileScale.Sixteen";case 32:return"TileScale.ThirtyTwo";default:return Math.floor(Math.log2(e)).toString()}}function m(e){switch(e=e.replace(/\s/g,"")){case"TileScale.Eight":return 8;case"TileScale.Sixteen":return 16;case"TileScale.ThirtyTwo":return 32;default:return Math.pow(2,parseInt(e))}}function f(t){var n=new Uint8ClampedArray(t.length>>1);for(let e=0;e<t.length;e+=2)n[e>>1]=parseInt(t.slice(e,e+2),16);return n}function y(t){var n="0123456789abcdef";let o="";for(let e=0;e<t.length;++e)o=(o+=n[t[e]>>4])+n[15&t[e]];return o}function k(e,t,n){e[t]=255&n,e[t+1]=n>>8&255}function b(e){e=function(e){if(e){if(6===e.length)return parseInt("0x"+e);if(7===e.length)return parseInt("0x"+e.substr(1))}return 0}(e);return[e>>16&255,e>>8&255,255&e]}s.TilemapData=S,s.Bitmask=class{constructor(e,t){this.width=e,this.height=t,this.mask=new Uint8Array(Math.ceil(e*t/8))}set(e,t){e+=this.width*t;this.mask[e>>3]|=1<<(7&e)}get(e,t){e+=this.width*t;return this.mask[e>>3]>>(7&e)&1}},s.encodeTilemap=function(e,t){return e?`tiles.createTilemap(${n=e.tilemap,n?`hex\`${o(n)}\``:"hex``"}, ${h(T.fromData(e.layers),t)}, [${e.tileset.tiles.map(e=>e.id)}], ${_(e.tileset.tileWidth)})`:"null";var n},s.decodeTilemap=function(e,t,n){var o,r,i;return(e=c.Util.htmlUnescape(e).trim()).trim()?(o=(e=(e=e.substr(e.indexOf("(")+1)).substr(0,e.lastIndexOf(")"))).substr(0,e.indexOf(",")),r=(e=e.substr(o.length+1)).substr(0,e.indexOf(",")),i=(e=e.substr(r.length+1)).substr(0,e.lastIndexOf("]")+1),e=e=e.substr(i.length+1),new S(a(o),{tiles:l(i,n),tileWidth:m(e)},d(r).data())):null},s.trimTilemapTileset=function(e){const n=e.tileset.tiles.slice(),o=e.tilemap,r={};r[n[0].id]=!0;for(let t=0;t<o.width;t++)for(let e=0;e<o.height;e++)r[n[o.get(t,e)].id]=!0;const t=e.editedTiles||[],i=n.filter(e=>r[e.id]||"*"===e.id.charAt(0)||-1!==t.indexOf(e.id));if(i.length!==n.length){var s=[];for(let e=0;e<n.length;e++)s.push(i.indexOf(n[e]));for(let t=0;t<o.width;t++)for(let e=0;e<o.height;e++)o.set(t,e,s[o.get(t,e)]);e.tileset.tiles=i}},s.isEmptyTilemap=function(e){var n=e.tileset.tiles,o=e.tilemap,r=n[0].id;for(let t=0;t<o.width;t++)for(let e=0;e<o.height;e++)if(n[o.get(t,e)].id!==r)return!1;return!0},s.computeAverageColor=function(n,e){var o=e.map(b),r=[0,0,0];let i=0;for(let t=0;t<n.width;t++)for(let e=0;e<n.height;e++){var s=n.get(t,e);if(s){++i;const n=o[s];r[0]+=n[0],r[1]+=n[1],r[2]+=n[2]}}return i?"#"+function(t){let n="";for(let e=0;e<t.length;++e)n+=("0"+t[e].toString(16)).slice(-2);return n}(r.map(e=>Math.floor(e/i))):"#00000000"},s.getBitmap=function(e,t){e=e.apis.byQName[t];return e?n(e.attributes.jresURL):null},s.getBitmapFromJResURL=n,s.hexToBitmap=t,s.filterItems=function(e,t){const r=(t=t.filter(e=>!!e).map(e=>e.toLowerCase())).filter(e=>0!==e.indexOf("!")),i=t.filter(e=>0===e.indexOf("!")&&1<e.length).map(e=>e.substring(1));return e.filter(e=>{return o=e,r.every(t=>{const n="?"+t;return o.tags.some(e=>e===t||e===n)})&&(n=e,i.every(t=>!n.tags.some(e=>e===t)));var n,o})},s.getGalleryItems=function(e,t){o=e.apis,r=t;let n=c.Util.values(o.byQName).filter(e=>{return 4===e.kind&&e.attributes.fixedInstance&&((e=e.retType)==r||!(!(e=o.byQName[e])||!e.extendsTypes)&&0<=e.extendsTypes.indexOf(r))});var o,r;n=n.filter(e=>e.namespace!=s.TILE_NAMESPACE);{e=n;const i=new c.ImageConverter;e.forEach(e=>{e.attributes.jresURL&&!e.attributes.iconURL&&0==e.attributes.jresURL.indexOf("data:image/x-mkcd-f")&&(e.attributes.iconURL=i.convert(e.attributes.jresURL))})}return n.map(e=>{var t=(e.attributes.tags||"").split(" ").filter(e=>!!e).map(e=>c.Util.startsWith(e,"category-")?e:e.toLowerCase());return{qName:e.qName,src:e.attributes.iconURL,alt:e.qName,tags:t}})},s.base64EncodeBitmap=function(e){const n=T.fromData(e),t=pxtc.f4EncodeImg(e.width,e.height,4,(e,t)=>n.get(e,t));return btoa(c.U.uint8ArrayToString(f(t)))},s.tilemapLiteralToTilemap=a,s.hexEncodeTilemap=o,s.formatByte=r,s.resizeBitmap=i,s.resizeTilemap=u,s.imageLiteralToBitmap=d,s.encodeAnimationString=function(e,t){const n=e.map(e=>e.data),o=new Uint8ClampedArray(8+n[0].length*n.length);k(o,0,t),k(o,2,e[0].width),k(o,4,e[0].height),k(o,6,e.length);let r=8;return n.forEach(e=>{o.set(e,r),r+=e.length}),btoa(c.sprite.uint8ArrayToHex(o))},s.addMissingTilemapTilesAndReferences=function(e,t){var n=e.getProjectTiles(t.data.tileset.tileWidth,!0);t.data.projectReferences=[];for(const o of n.tiles)t.data.tileset.tiles.some(e=>e.id===o.id)||t.data.tileset.tiles.push(o),e.isAssetUsed(o,null,[t.id])&&t.data.projectReferences.push(o.id)},s.updateTilemapReferencesFromResult=function(t,n){var o=n.data;if(o.deletedTiles)for(const c of o.deletedTiles)t.deleteTile(c);if(o.editedTiles)for(const c of o.editedTiles){const n=o.tileset.tiles.findIndex(e=>e.id===c),e=o.tileset.tiles[n];e&&(o.tileset.tiles[n]=t.updateTile(e))}for(let e=0;e<o.tileset.tiles.length;e++){const n=o.tileset.tiles[e];n.jresData||(o.tileset.tiles[e]=t.resolveTile(n.id))}c.sprite.trimTilemapTileset(o)},s.imageLiteralFromDimensions=function(t,n,o,e){let r=p(e);var i=300<t*n?"":" ";for(let e=0;e<n;e++){r+="\n";for(let e=0;e<t;e++)r+=v[o]+i}return r=(r+="\n")+g(e)},s.bitmapToImageLiteral=h,s.bitmapEquals=e,s.tileWidthToTileScale=_,s.tileScaleToTileWidth=m,s.hexToUint8Array=f,s.uint8ArrayToHex=y,s.colorStringToRGB=b}}(pxt=pxt||{}),function(i){var s=i.sprite||(i.sprite={});{var e=s.legacy||(s.legacy={});const n=new RegExp(`^\\s*${s.TILE_NAMESPACE}\\s*\\.\\s*${s.TILE_PREFIX}(\\d+)\\s*$`);class l{constructor(e,t,n){this.tilemap=e,this.tileset=t,this.layers=n,this.nextId=0}}function a(e){return(e=e.replace(/[\[\]]/g,""))?e.split(",").filter(e=>!!e.trim()).map(e=>{return 0===(e=(e=e).trim()).indexOf("img")?{data:s.imageLiteralToBitmap(e).data()}:(t=n.exec(e))?{data:null,projectId:Number(t[1])}:{data:null,qualifiedName:e};var t}):[]}e.LegacyTilemapData=l,e.decodeTilemap=function(e,t){var n,o,r;return null!=(e=null==(n=i.Util.htmlUnescape(e))?void 0:n.trim())&&e.trim()?(n=(e=(e=e.substr(e.indexOf("(")+1)).substr(0,e.lastIndexOf(")"))).substr(0,e.indexOf(",")),o=(e=e.substr(n.length+1)).substr(0,e.indexOf(",")),r=(e=e.substr(o.length+1)).substr(0,e.lastIndexOf("]")+1),e=e=e.substr(r.length+1),new l(s.tilemapLiteralToTilemap(n),{tiles:a(r),tileWidth:s.tileScaleToTileWidth(e)},s.imageLiteralToBitmap(o).data())):new l(new s.Tilemap(16,16),{tileWidth:16,tiles:[]},new s.Bitmap(16,16).data())},e.tileToBlocklyVariable=function(e){return`${e.projectId};${e.data.width};${e.data.height};`+pxtc.Util.toHex(e.data.data)},e.blocklyVariableToTile=function(e){e=e.split(";");return 4!==e.length?null:{projectId:parseInt(e[0]),data:{width:parseInt(e[1]),height:parseInt(e[2]),data:new Uint8ClampedArray(pxtc.Util.fromHex(e[3])),x0:0,y0:0}}}}}(pxt=pxt||{}),function(o){{var e=o.storage||(o.storage={});class s{constructor(){this.items={}}removeItem(e){delete this.items[e]}getItem(e){return this.items[e]}setItem(e,t){this.items[e]=t}clear(){this.items={}}}class a{constructor(e){this.storageId=e}targetKey(e){return this.storageId+"/"+e}removeItem(e){window.localStorage.removeItem(this.targetKey(e))}getItem(e){return window.localStorage[this.targetKey(e)]}setItem(e,t){window.localStorage[this.targetKey(e)]=t}clear(){var t=this.targetKey(""),n=[];for(let e=0;e<window.localStorage.length;++e){var o=window.localStorage.key(e);0==o.indexOf(t)&&n.push(o)}n.forEach(e=>window.localStorage.removeItem(e))}}function r(){var e;return o.appTarget?o.appTarget.id:(e=window.pxtConfig)?e.targetId:(e=window.pxtTargetBundle)?e.id:""}let n;function i(){if(!n){var t=r();let e=!1;if(!o.shell.isSandboxMode())try{window.localStorage[t]="1",window.localStorage[t],e=!0}catch(e){}e?(n=new a(t),o.debug("storage: local under "+t)):(n=new s,o.debug("storage: in memory"))}}e.storageId=r,e.setLocal=function(e,t){i(),n.setItem(e,t)},e.getLocal=function(e){return i(),n.getItem(e)},e.removeLocal=function(e){i(),n.removeItem(e)},e.clearLocal=function(){i(),n.clear()}}}(pxt=pxt||{}),function(i){var e=i.storage||(i.storage={});{e=e.shared||(e.shared={});const l="http://localhost:3232/api/store/";function s(){return i.BrowserUtils.isLocalHostDev()&&!i.BrowserUtils.noSharedLocalStorage()}function a(){return i.BrowserUtils.isChromiumEdge()?"chromium-edge":i.BrowserUtils.browser()}e.getAsync=async function(e,t){if(s()){e+="-"+a();const s=await i.Util.requestAsync({url:""+l+encodeURIComponent(e)+"/"+encodeURIComponent(t),method:"GET",allowHttpErrors:!0});return s.json||s.text||void 0}{const l=i.storage.getLocal(e+":"+t),s=i.Util.jsonTryParse(l);return s||l}},e.setAsync=async function(e,t,n){if(void 0===n)await i.storage.shared.delAsync(e,t);else{var o="object"==typeof n?JSON.stringify(n):n.toString();if(s()){e+="-"+a();const s={type:"object"==typeof n?"json":"text",val:o},r=JSON.stringify(s);await i.Util.requestAsync({url:""+l+encodeURIComponent(e)+"/"+encodeURIComponent(t),method:"POST",data:r})}else i.storage.setLocal(e+":"+t,o)}},e.delAsync=async function(e,t){s()?(e+="-"+a(),await i.Util.requestAsync({url:""+l+encodeURIComponent(e)+"/"+encodeURIComponent(t),method:"DELETE",allowHttpErrors:!0})):i.storage.removeLocal(e+":"+t)}}}(pxt=pxt||{}),function(u){const o=["name","version","description","license","dependencies","files","testFiles","testDependencies","fileDependencies","public","targetVersions","supportedTargets","preferredEditor","languageRestriction","additionalFilePath","additionalFilePaths"];class d{constructor(e,t,n,o){this.id=e,this._verspec=t,this.parent=n,this.level=-1,this.isLoaded=!1,this.ignoreTests=!1,this.cppOnly=!1,o&&(this.level=o.level+1),this.addedBy=[o]}static stringifyConfig(e){var t=e,n={};for(const e of o)t.hasOwnProperty(e)&&(n[e]=t[e]);for(const e of Object.keys(t))n.hasOwnProperty(e)||(n[e]=t[e]);return JSON.stringify(n,null,4)+"\n"}static parseAndValidConfig(e){const t=u.Util.jsonTryParse(e);return t&&void 0!==t.name&&"string"==typeof t.name&&t.files&&Array.isArray(t.files)&&t.files.every(e=>"string"==typeof e)&&t.dependencies&&Object.keys(t.dependencies).every(e=>"string"==typeof t.dependencies[e])&&t}static getConfigAsync(t,n,o){return Promise.resolve().then(()=>{if(u.github.isGithubId(o)){const t=u.github.parseRepoId(o);return u.packagesConfigAsync().then(e=>u.github.repoAsync(t.fullName,e)).then(e=>e?u.github.pkgConfigAsync(t.fullName,t.tag):null)}var e=u.patching.upgradePackageReference(t,n,o),e=u.appTarget.bundledpkgs[e];return JSON.parse(e[u.CONFIG_NAME])})}static corePackages(){const t=u.appTarget.bundledpkgs;return Object.keys(t).map(e=>JSON.parse(t[e][u.CONFIG_NAME])).filter(e=>!!e)}disablesVariant(e){return this.config&&this.config.disablesVariants&&0<=this.config.disablesVariants.indexOf(e)}invalid(){return/^invalid:/.test(this.version())}version(){return this.resolvedVersion||this._verspec}verProtocol(){var e=this.version().split(":");return 1<e.length?e[0]:""}verArgument(){var e=this.verProtocol();return e?this.version().slice(e.length+1):this.version()}targetVersion(){return this.parent&&this.parent!=this?this.parent.targetVersion():this.config.targetVersions?this.config.targetVersions.target:void 0}commonDownloadAsync(){const e=this.verProtocol();if("pub"==e)return u.Cloud.downloadScriptFilesAsync(this.verArgument());if("github"==e)return u.packagesConfigAsync().then(e=>u.github.downloadPackageAsync(this.verArgument(),e)).then(e=>e.files);if("embed"==e){const e=u.getEmbeddedScript(this.verArgument());return Promise.resolve(e)}if("pkg"!=e)return Promise.resolve(null);{const e=(this.parent||this).readFile(this.verArgument()),t=ts.pxtc.Util.jsonTryParse(e);return t||u.log("unable to find "+this.verArgument()),Promise.resolve(t)}}host(){return this.parent._host}readFile(e){return this.host().readFile(this,e)}readGitJson(){var e=this.readFile(u.github.GIT_JSON);return u.Util.jsonTryParse(e)}resolveDep(e){return this.parent.deps.hasOwnProperty(e)?this.parent.deps[e]:null}saveConfig(){var e=u.U.clone(this.config),e=(delete e.additionalFilePaths,u.Package.stringifyConfig(e));this.host().writeFile(this,u.CONFIG_NAME,e)}setPreferredEditor(e){this.config.preferredEditor!=e&&(this.config.preferredEditor=e,this.saveConfig())}getPreferredEditor(){let e=this.config.preferredEditor;if(e)return e;{if(!(0<=this.getFiles().indexOf(u.MAIN_BLOCKS)))return u.JAVASCRIPT_PROJECT_NAME;const e=this.readFile(u.MAIN_BLOCKS),t=this.readFile(u.MAIN_TS);return!e&&t?u.JAVASCRIPT_PROJECT_NAME:u.BLOCKS_PROJECT_NAME}}parseJRes(e={}){for(const t of this.getFiles())u.U.endsWith(t,".jres")&&n(JSON.parse(this.readFile(t)),e);return e}resolveVersionAsync(){var e;let t=this._verspec;if(u.getEmbeddedScript(this.id))this.resolvedVersion=t="embed:"+this.id;else if(t&&"*"!=t){if("github"==this.verProtocol()){const n=u.github.parseRepoId(this._verspec);n&&!n.tag&&this.parent&&(u.debug("dep: unbound github extensions, trying to resolve tag"),e=u.semver.sortLatestTags(u.Util.values((null==(e=this.parent)?void 0:e.deps)||{}).map(e=>u.github.parseRepoId(e.version())).filter(e=>(null==e?void 0:e.slug)===n.slug).map(e=>e.tag))[0])&&(n.tag=e,this.resolvedVersion=t=u.github.stringifyRepo(n),u.debug(`dep: github patched ${this._verspec} to `+t))}}else this.configureAsInvalidPackage(lf("version not specified for {0}",this.id)),t=this._verspec;return Promise.resolve(t)}downloadAsync(){return this.resolveVersionAsync().then(e=>{if(this.invalid())u.debug("skip download of invalid package "+this.id);else if(/^embed:/.test(e)||this.installedVersion!=e)return u.debug("downloading "+e),this.host().downloadPackageAsync(this).then(()=>{this.loadConfig(),u.debug(`installed ${this.id} /`+e)})})}loadConfig(){var e;0!=this.level&&this.invalid()||((e=this.readFile(u.CONFIG_NAME))||u.U.userError(`extension ${this.id} is missing `+u.CONFIG_NAME),this.parseConfig(e),0!=this.level&&(this.installedVersion=this.version()),this.saveConfig())}validateConfig(){this.config.dependencies||u.U.userError("Missing dependencies in config of: "+this.id),Array.isArray(this.config.files)||u.U.userError("Missing files in config of: "+this.id),"string"==typeof this.config.name&&this.config.name||(this.config.name=lf("Untitled")),this.config.targetVersions&&this.config.targetVersions.target&&this.config.targetVersions.targetId===u.appTarget.id&&u.appTarget.versions&&0<u.semver.majorCmp(this.config.targetVersions.target,u.appTarget.versions.target)&&u.U.userError(lf("{0} requires target version {1} (you are running {2})",this.config.name,this.config.targetVersions.target,u.appTarget.versions.target))}isPackageInUse(n,e=this.readFile(u.MAIN_TS)){let o=null;var t=u.patching.computePatches(this.targetVersion(),"missingPackage");return t&&t.forEach(t=>{Object.keys(t.map).forEach(e=>{t.map[e]===n&&(o=new RegExp(e,"g"))})}),(o=o||new RegExp(n+"\\.","g")).test(e)}upgradePackagesAsync(){return this.config||this.loadConfig(),u.packagesConfigAsync().then(o=>{let r=0,i={};return u.U.iterMap(this.config.dependencies,(e,t)=>{var n;u.github.isGithubId(t)&&(n=u.github.upgradedPackageReference(o,t))&&n!=t&&(u.log(`upgrading dep ${e}: ${t} -> `+n),i[t]=n,this.config.dependencies[e]=n,r++)}),r&&this.saveConfig(),r&&i})}getMissingPackages(r,i){const e=u.patching.computePatches(this.targetVersion(),"missingPackage"),s={};return i&&e&&e.forEach(o=>{Object.keys(o.map).forEach(e=>{const t=new RegExp(e,"g"),n=o.map[e];i.replace(t,e=>(r.dependencies[n]||(s[n]="*"),""))})}),s}findConflictsAsync(e,a){let l,c=[];return Promise.resolve().then(()=>"string"==typeof e?d.getConfigAsync(this.targetVersion(),e,a):Promise.resolve(e)).then(s=>{if(l=s){const s=l.yotta?u.U.jsonFlatten(l.yotta.config):null;this.parent.sortedDeps().forEach(t=>{if(l.core&&t.config.core&&l.name!=t.config.name){const s=new u.cpp.PkgConflictError(lf("conflict between core extensions {0} and {1}",l.name,t.id));s.pkg0=t,void c.push(s)}else{let e=!1;if(s){const a=t.config||JSON.parse(t.readFile(u.CONFIG_NAME));if(a&&a.yotta&&t.config.yotta.config){var n=u.U.jsonFlatten(a.yotta.config);for(const i of Object.keys(s)){var o=n[i],r=l.yotta.configIsJustDefaults||a.yotta.configIsJustDefaults;if(n.hasOwnProperty(i)&&o!==s[i]&&!r&&(!t.parent.config.yotta||!t.parent.config.yotta.ignoreConflicts)){const s=new u.cpp.PkgConflictError(lf("conflict on yotta setting {0} between extensions {1} and {2}",i,l.name,t.id));s.pkg0=t,s.settingName=i,c.push(s),e=!0}}}}if(!e&&l.name===t.id&&t._verspec!==a&&!/^file:/.test(t._verspec)&&!/^file:/.test(a)){const s=/^github:/.test(t._verspec)&&u.github.parseRepoId(t._verspec),l=/^github:/.test(a)&&u.github.parseRepoId(a);if(!s||!l||s.fullName!==l.fullName||l.tag&&u.semver.strcmp(s.tag,l.tag)<0){const s=new u.cpp.PkgConflictError(lf("version mismatch for extension {0} (installed: {1}, installing: {2})",t.id,t._verspec,a));s.pkg0=t,s.isVersionConflict=!0,c.push(s)}}}})}return Object.keys(l.dependencies).reduce((e,t)=>e.then(()=>this.findConflictsAsync(t,l.dependencies[t])).then(e=>c.push.apply(c,e)),Promise.resolve())}).then(()=>{const o=e=>{const t=[];return e.addedBy.forEach(e=>{e.id!==this.id&&(t.push.apply(o(e)),t.push(e))}),t},e=[];return c.forEach(n=>{e.push.apply(e,o(n.pkg0).map(e=>{var t=new u.cpp.PkgConflictError(n.isVersionConflict?lf("a dependency of {0} has a version mismatch with extension {1} (installed: {1}, installing: {2})",e.id,l.name,n.pkg0._verspec,a):lf("conflict on yotta setting {0} between extensions {1} and {2}",n.settingName,l.name,n.pkg0.id));return t.pkg0=e,t}))}),c.push.apply(c,e),c=c.filter((t,n)=>{for(let e=0;e<n;++e)if(t.pkg0.id===c[e].pkg0.id)return!1;return!0})})}configureAsInvalidPackage(e){u.log(`invalid package ${this.id}: `+e),this._verspec="invalid:"+this.id,this.config={name:this.id,description:e,dependencies:{},files:[]}}parseConfig(e,t){try{const u=JSON.parse(e);this.config=u}catch(e){this.configureAsInvalidPackage(lf("Syntax error in pxt.json")),u.tickEvent("package.invalidConfigEncountered")}var n=JSON.stringify(this.config);for(const e in this.config.dependencies){const t=u.patching.upgradePackageReference(this.targetVersion(),e,this.config.dependencies[e]);t!=e&&(delete this.config.dependencies[e],t)&&(this.config.dependencies[t]="*")}t&&(this.config.targetVersions={target:t}),JSON.stringify(this.config)!=n&&this.saveConfig(),this.validateConfig()}patchCorePackage(){u.Util.assert(u.appTarget.simulator&&u.appTarget.simulator.dynamicBoardDefinition),u.Util.assert(0==this.level);const e=Object.keys(this.config.dependencies).filter(e=>!!e&&(e==u.BLOCKS_PROJECT_NAME||e==u.JAVASCRIPT_PROJECT_NAME||JSON.parse((u.appTarget.bundledpkgs[e]||{})[u.CONFIG_NAME]||"{}").core));if(0==e.length){const e=u.Package.corePackages();e.length&&this.config.dependencies[e[0].name]}else 1<e.length&&(e.pop(),e.forEach(e=>{u.log("removing core package "+e),delete this.config.dependencies[e]}))}resolvedDependencies(){return Object.keys(this.dependencies()).map(e=>this.resolveDep(e))}dependencies(e=!1){if(!this.config)return{};const n=u.Util.clone(this.config.dependencies||{});return 0==this.level&&this.config.testDependencies&&u.Util.iterMap(this.config.testDependencies,(e,t)=>{"*"==t&&!u.appTarget.bundledpkgs[e]||(n[e]=t)}),e&&this.config.cppDependencies&&u.Util.jsonMergeFrom(n,this.config.cppDependencies),n}loadAsync(s=!1,e){if(this.isLoaded)return Promise.resolve();let t=Promise.resolve();0!=this.level||u.appTarget.multiVariants||u.setAppTargetVariant(null),this.isLoaded=!0;const n=this.readFile(u.CONFIG_NAME),a=(null==n?s||u.U.userError("Package not installed: "+this.id+", did you forget to run `pxt install`?"):t=t.then(()=>this.parseConfig(n)),0!=this.level||s||(t=t.then(()=>this.upgradePackagesAsync().then(()=>{}))),s&&(t=t.then(()=>this.downloadAsync())),0==this.level&&s&&(t=t.then(()=>this.upgradePackagesAsync()).then(e=>e?(Object.keys(e).forEach(e=>u.tickEvent("package.doubleload",{extension:e})),u.log("upgraded, downloading again"),u.debug(e),this.downloadAsync()):Promise.resolve())),u.appTarget.simulator&&u.appTarget.simulator.dynamicBoardDefinition&&(t=(t=0==this.level?t.then(()=>this.patchCorePackage()):t).then(()=>{var e,t;this.config.compileServiceVariant&&u.setAppTargetVariant(this.config.compileServiceVariant),this.config.files.indexOf("board.json")<0||((e=u.appTarget.simulator.boardDefinition=JSON.parse(this.readFile("board.json"))).id=this.config.name,u.appTarget.appTheme.boardName=e.boardName||lf("board"),u.appTarget.appTheme.driveDisplayName=e.driveDisplayName||lf("DRIVE"),e=e=>{var t,n=/^pkg:\/\/(.*)/.exec(e);return n?(n=n[1],t=this.readFile(n),u.U.toDataUri(t,u.U.getMime(n))):e},"object"==typeof(t=u.appTarget.simulator.boardDefinition).visual&&((t=t.visual).image=e(t.image),t.outlineImage=e(t.outlineImage)))})),(e,t)=>{if(u.debug(`version spec mismatch: ${e._verspec} != `+t),/^github:/.test(e._verspec)&&/^github:/.test(t)){var n=u.github.parseRepoId(e._verspec),o=u.github.parseRepoId(t);if(null!=n&&n.slug&&(null==n?void 0:n.slug)===(null==o?void 0:o.slug)){n=(null==n?void 0:n.tag)||(null==(n=e.config)?void 0:n.version),o=u.semver.strcmp(n,o.tag);if(0==o)return void u.debug("resolved version are "+n);if(o<0)return void u.debug(`auto-upgraded ${t} to `+n)}}/^file:/.test(e._verspec)||/^file:/.test(t)?u.debug("ignore file: mismatch issues"):e.configureAsInvalidPackage(lf("version mismatch"))}),r=async(e,t,n=!1)=>{e=e||t.dependencies(n),u.debug(`deps: ${t.id}->`+Object.keys(e).join(", ")),e=u.github.resolveMonoRepoVersions(e),u.debug(`deps: resolved ${t.id}->`+Object.keys(e).join(", "));for(var o of Object.keys(e)){var r=e[o]||"*",i=(u.debug(`dep: load ${t.id}.${o}${n?"++":""}: `+r),"hw"==o&&u.hwVariant&&(o="hw---"+u.hwVariant),t.resolveDep(o));i?(i.invalid()||i._verspec===r||a(i,r),!i.invalid()&&n||(i.level=Math.min(i.level,t.level+1),i.addedBy.push(t))):(i=new d(o,r,t.parent,t),n&&(i.cppOnly=!0),t.parent.deps[o]=i,await(t.parent.deps[o.replace(/---.*/,"")]=i).loadAsync(s))}};return t.then(()=>r(null,this)).then(()=>{if(this.config.palette&&u.appTarget.runtime&&(u.appTarget.runtime.palette=u.U.clone(this.config.palette),this.config.paletteNames)&&(u.appTarget.runtime.paletteNames=this.config.paletteNames),this.config.screenSize&&u.appTarget.runtime&&(u.appTarget.runtime.screenSize=u.U.clone(this.config.screenSize)),0!==this.level)return Promise.resolve(null);{var e=this.readFile(u.MAIN_TS);if(!e)return Promise.resolve(null);const o=this.getMissingPackages(this.config,e);let n=!1;return Object.keys(o).reduce((e,t)=>e.then(()=>this.findConflictsAsync(t,o[t])).then(e=>{if(e.length){const o=e.map(e=>e.pkg0.id).join(", "),n=e.map(e=>e.settingName).filter(e=>!!e).join(", ");return u.log(`skipping missing package ${t} because it conflicts with the following packages: ${o} (conflicting settings: ${n})`),Promise.resolve(null)}{u.log("adding missing package "+t),n=!0,this.config.dependencies[t]="*";const e={};return e[t]=o[t],r(e,this)}}),Promise.resolve(null)).then(()=>(n&&(this.saveConfig(),this.validateConfig()),Promise.resolve(null)))}}).then(()=>0!=this.level?Promise.resolve():Promise.all(u.U.values(this.parent.deps).map(e=>r(null,e,!0)))).then(()=>{u.debug("  installed "+this.id)})}getFiles(){let e;e=0!=this.level||this.ignoreTests?this.config.files.slice(0):this.config.files.concat(this.config.testFiles||[]);const t=this.config.fileDependencies;return e=this.config.fileDependencies?e.filter(n=>{const o=e=>{if("!"==(e=e.trim())[0])return!o(e.slice(1));if(/^[\w-]+$/.test(e)){const u=this.parent.resolveDep(e);return!(!u||u.cppOnly)}var t=/^target:(\w+)$/.exec(e);return t?t[1]==u.appTarget.id||t[1]==u.appTarget.platformid:(d.depWarnings[e]||(d.depWarnings[e]=!0,u.log(`invalid dependency expression: ${e} in ${this.id}/`+n)),!1)},e=u.U.lookup(t,n);return!e||!e.trim()||e.split("||").some(e=>e.split("&&").every(o))}):e}addSnapshot(e,n=[""]){for(let t of this.getFiles())n.some(e=>u.U.endsWith(t,e))&&(e[this.id+"/"+t]=this.readFile(t));e[this.id+"/"+u.CONFIG_NAME]=this.readFile(u.CONFIG_NAME)}packageLocalizationStringsAsync(n){const o=u.appTarget.id,e=[this.config.name+"-jsdoc",this.config.name],r={},i=u.appTarget.appTheme||{};return this.config.skipLocalization?Promise.resolve(r):u.Util.liveLocalizationEnabled()&&"this"!=this.id&&u.appTarget.bundledpkgs[this.id]?(u.debug("loading live translations for "+this.id),Promise.all(e.map(t=>u.Util.downloadLiveTranslationsAsync(n,o+`/${t}-strings.json`,i.crowdinBranch).then(e=>{e&&Object.keys(e).length?u.Util.jsonMergeFrom(r,e):(u.tickEvent("translations.livetranslationsfailed",{filename:t}),u.Util.jsonMergeFrom(r,this.bundledStringsForFile(n,t)))}).catch(e=>{u.tickEvent("translations.livetranslationsfailed",{filename:t}),u.log(`error while downloading ${o}/${t}-strings.json`),u.Util.jsonMergeFrom(r,this.bundledStringsForFile(n,t))}))).then(()=>r)):(e.map(e=>this.bundledStringsForFile(n,e)).filter(e=>!!e).forEach(e=>u.Util.jsonMergeFrom(r,e)),Promise.resolve(r))}bundledStringsForFile(e,t){let n={},[o,r,i]=u.Util.normalizeLanguageCode(e);var e=this.config.files,s=`_locales/${o}/${t}-strings.json`;return n=-1<e.indexOf(s)||i&&(-1<e.indexOf(s=`_locales/${i}/${t}-strings.json`)||r&&-1<e.indexOf(s=`_locales/${r}/${t}-strings.json`))?JSON.parse(this.readFile(s)):n}}function n(s,a={}){var l,c=s["*"]||{};for(l of Object.keys(s))if("*"!=l){let e=s[l],t=(e="string"==typeof e?{data:e}:e).namespace||c.namespace||"",n=(t&&(t+="."),e.id||t+l),o=e.icon,r=e.mimeType||c.mimeType,i=e.dataEncoding||c.dataEncoding||"base64";o||"base64"!=i||"image/png"!=r&&"image/jpeg"!=r||(o="data:"+r+";base64,"+e.data),a[n]={id:n,data:e.data,dataEncoding:i,icon:o,namespace:t,mimeType:r,tilemapTile:e.tilemapTile,displayName:e.displayName,tileset:e.tileset}}return a}d.depWarnings={},u.Package=d,u.MainPackage=class extends d{constructor(e){super("this","file:.",null,null),this._host=e,this.deps={},(this.parent=this).addedBy=[this],this.level=0,this.deps[this.id]=this}installAllAsync(e){return this.loadAsync(!0,e)}sortedDeps(n=!1){let o={},r=[];const i=e=>e.config?Object.keys(e.config.cppDependencies||{}).length:0,s=e=>{var t;e&&!u.U.lookup(o,e.id)&&(o[e.id]=!0,(t=Object.keys(e.dependencies(n)).map(e=>this.resolveDep(e))).sort((e,t)=>i(t)-i(e)||u.U.strcmp(e.id,t.id)),t.forEach(s),r.push(e.id))};return s(this),r.map(e=>this.resolveDep(e))}localizationStringsAsync(t){const n={};return Promise.all(u.Util.values(this.deps).map(e=>e.packageLocalizationStringsAsync(t).then(t=>{t&&Object.keys(t).forEach(e=>{n[e]||(n[e]=t[e])})}))).then(()=>{const t=u.U.getLocalizedStrings();return Object.keys(n).forEach(e=>{!u.U.startsWith(e,"{id:subcategory}")&&!u.U.startsWith(e,"{id:group}")||t[e]||(t[e]=n[e])}),u.U.setLocalizedStrings(t),Promise.resolve(n)})}getTargetOptions(){let t=u.U.clone(u.appTarget.compile);return u.U.assert(!!t),t.utf8||this.sortedDeps(!0).forEach(e=>{e.config&&e.config.utf8&&(u.debug("forcing utf8 mode: pkg="+e.id),t.utf8=!0)}),t}getJRes(){if(!this._jres){this._jres={};for(const u of this.sortedDeps())u.parseJRes(this._jres);var e=(u.appTarget.runtime&&u.appTarget.runtime.palette?u.appTarget.runtime.palette:["#000000","#ffffff"]).map(e=>("000000"+parseInt(e.replace(/#/,""),16).toString(16)).slice(-6)).join("");this._jres.__palette={id:"__palette",data:e,dataEncoding:"hex",mimeType:"application/x-palette"}}return this._jres}updateJRes(){this._jres&&this.parseJRes(this._jres)}resolveBannedCategories(){if(void 0===this._resolvedBannedCategories){let t=[];u.appTarget&&u.appTarget.runtime&&u.appTarget.runtime.bannedCategories&&u.appTarget.runtime.bannedCategories.length&&(t=u.appTarget.runtime.bannedCategories.slice(),Object.keys(this.deps).map(e=>this.deps[e]).filter(e=>!!e).map(e=>u.Util.jsonTryParse(e.readFile(u.CONFIG_NAME))).filter(e=>e&&e.requiredCategories).forEach(e=>e.requiredCategories.forEach(e=>{e=t.indexOf(e);-1<e&&t.splice(e,1)})),this._resolvedBannedCategories=t),this._resolvedBannedCategories=t,this._resolvedBannedCategories.length||(this._resolvedBannedCategories=null)}return this._resolvedBannedCategories}async getCompileOptionsAsync(i=this.getTargetOptions()){var e,t,n={sourceFiles:[],fileSystem:{},target:i,name:this.config?this.config.name:""};const s=(e,t)=>{this.config.files.indexOf(e)<0&&u.U.userError(lf("please add '{0}' to \"files\" in {1}",e,u.CONFIG_NAME)),t="// Auto-generated. Do not edit.\n"+t+"\n// Auto-generated. Do not edit. Really.\n",this.host().readFile(this,e,!0)!==t&&(u.debug(`updating ${e} (size=${t.length})...`),this.host().writeFile(this,e,t,!0))};let a=!1;const o=async e=>{var t={extinfo:null,target:null},n=u.appTargetVariant;e&&u.setAppTargetVariant(e,{temporary:!0});try{var o=u.cpp.getExtensionInfo(this),r=(a||!o.shimsDTS&&!o.enumsDTS||(a=!0,o.shimsDTS&&s("shims.d.ts",o.shimsDTS),o.enumsDTS&&s("enums.d.ts",o.enumsDTS)),i.isNative?await this.host().getHexInfoAsync(o):null),o=u.U.flatClone(o);i.keepCppFiles||(delete o.compileData,delete o.generatedFiles,delete o.extensionFiles),o.hexinfo=r,t.extinfo=o,t.target=u.appTarget.compile}finally{e&&u.setAppTargetVariant(n,{temporary:!0})}return t};await this.loadAsync(),n.bannedCategories=this.resolveBannedCategories(),n.target.preferredEditor=this.getPreferredEditor(),u.debug("building: "+this.sortedDeps().map(e=>e.config.name).join(", "));let r=null;for(t of e=u.appTarget.multiVariants?u.appTargetVariant?[u.appTargetVariant]:u.appTarget.alwaysMultiVariant||u.appTarget.compile.switches.multiVariant?u.appTarget.multiVariants:[u.appTarget.multiVariants[0]]:[null]){r&&u.debug("building for "+t);const s=await o(t),a=s.extinfo;a.appVariant=t,a.outputPrefix=1!=e.length&&t?t+"-":"",r?n.otherMultiVariants.push(s):(r=a,n.otherMultiVariants=[])}if(n.extinfo=r,!u.appTarget.compile.shortPointers&&"vm"!=u.appTarget.compile.nativeType&&!this.config.binaryonly&&n.target.isNative){const i=await this.filesToBePublishedAsync(!0),s=JSON.stringify({name:this.config.name,comment:this.config.description,status:"unpublished",scriptId:this.installedVersion,cloudId:u.CLOUD_ID+u.appTarget.id,editor:this.getPreferredEditor(),targetVersions:u.appTarget.versions}),a=JSON.stringify(i),o=await u.lzmaCompressAsync(s+a);o&&(n.embedMeta=JSON.stringify({compression:"LZMA",headerSize:s.length,textSize:a.length,name:this.config.name,eURL:u.appTarget.appTheme.embedUrl,eVER:u.appTarget.versions?u.appTarget.versions.target:"",pxtTarget:u.appTarget.id}),n.embedBlob=ts.pxtc.encodeBase64(u.U.uint8ArrayToString(o)))}for(const u of this.sortedDeps())for(const i of u.getFiles())if(/\.(ts|asm|py)$/.test(i)){let e=i;0<u.level&&(e="pxt_modules/"+u.id+"/"+i),n.sourceFiles.push(e),n.fileSystem[e]=u.readFile(i)}n.jres=this.getJRes();var l=u.appTarget.runtime&&u.appTarget.runtime.functionsOptions;return n.allowedArgumentTypes=l&&l.extraFunctionEditorTypes&&l.extraFunctionEditorTypes.map(e=>e.typeName).concat("number","boolean","string"),n}prepareConfigToBePublished(){const o=u.U.clone(this.config);return delete o.installedVersion,delete o.additionalFilePath,delete o.additionalFilePaths,o.targetVersions||(o.targetVersions=u.Util.clone(u.appTarget.versions)),u.U.iterMap(o.dependencies,(e,t)=>{if(!t||/^(file|workspace):/.test(t)){t="*";try{const o=this.resolveDep(e).readGitJson();var n;o&&o.repo&&((n=u.github.parseRepoId(o.repo)).tag=o.commit.tag||o.commit.sha,t=u.github.stringifyRepo(n))}catch(e){}o.dependencies[e]=t}}),o}filesToBePublishedAsync(o=!1){const r={};return this.loadAsync().then(()=>{o||this.config.public||u.U.userError('Only packages with "public":true can be published');var e,t,n=this.prepareConfigToBePublished();r[u.CONFIG_NAME]=u.Package.stringifyConfig(n);for(e of this.getFiles())e!=u.CONFIG_NAME&&(null==(t=this.readFile(e))&&u.U.userError("referenced file missing: "+e),r[e]=t);return u.U.sortObjectFields(r)})}saveToJsonAsync(){return this.filesToBePublishedAsync(!0).then(e=>({meta:{cloudId:u.CLOUD_ID+u.appTarget.id,targetVersions:u.appTarget.versions,editor:this.getPreferredEditor(),name:this.config.name},source:JSON.stringify(e,null,2)}))}compressToFileAsync(){return this.saveToJsonAsync().then(e=>u.lzmaCompressAsync(JSON.stringify(e,null,2)))}computePartDefinitions(o){if(!o||!o.length)return{};let r={};return this.sortedDeps().forEach(n=>{var t=n.readFile("pxtparts.json");if(t)try{let e=JSON.parse(t);Object.keys(e).forEach(t=>{if(0<=o.indexOf(t)){t=r[t]=e[t];if("string"==typeof t.visual.image&&/\.svg$/i.test(t.visual.image)){let e=n.readFile(t.visual.image);e||u.reportError("parts","invalid part definition",{error:"missing visual "+t.visual.image}),/^data:image\/svg\+xml/.test(e)||(e="data:image/svg+xml,"+encodeURIComponent(e)),t.visual.image=e}}})}catch(e){u.reportError("parts","invalid pxtparts.json file")}}),r}},u.inflateJRes=n,u.allPkgFiles=function(e){return[u.CONFIG_NAME].concat(e.files||[]).concat(e.testFiles||[])},u.isPkgBeta=function(e){return e&&/\bbeta\b/.test(e.description)}}(pxt=pxt||{}),function(l){{var c=l.packetio||(l.packetio={});let o,n,r,i,s,a=()=>{};function u(){if(s)return s;let e=Promise.resolve();if(o){l.debug("packetio: disconnect");const t=o;e=e.then(()=>t.disconnectAsync()).then(()=>t.io.disposeAsync()).catch(e=>{l.reportException(e)}).finally(()=>{n=void 0,o=void 0,s=void 0}),a&&(e=e.then(()=>a())),s=e}return e}c.isActive=function(){return!!o},c.isConnected=function(){return!!o&&o.io.isConnected()},c.isConnecting=function(){return!!o&&o.io.isConnecting()},c.icon=function(){var e;return!!o&&(o.icon||(null==(e=l.appTarget.appTheme.downloadDialogTheme)?void 0:e.deviceIcon)||"usb")},c.unsupportedParts=function(){return null!=o&&o.unsupportedParts?o.unsupportedParts():[]},c.disconnectAsync=u,c.configureEvents=function(e,t,n){a=e,r=t,i=n,o&&(o.io.onConnectionChanged=a,o.onSerial=r,o.onCustomEvent=n)},c.sendCustomEventAsync=function(e,t){return o?o.sendCustomEventAsync(e,t):Promise.resolve()},c.initAsync=function(t=!1){if(l.debug("packetio: init "+(t?"(force)":"")),!n){let e=Promise.resolve();t&&(e=e.then(()=>u())),n=e.then(()=>o?Promise.resolve(o):c.mkPacketIOAsync?(l.debug("packetio: new wrapper"),c.mkPacketIOAsync().then(e=>(e.onConnectionChanged=a,o=c.mkPacketIOWrapper(e),r&&(o.onSerial=r),i&&(o.onCustomEvent=i),a&&a(),o))):(l.debug("packetio: not defined, skipping"),Promise.resolve(void 0))).finally(()=>{n=void 0})}return n}}}(pxt=pxt||{}),function(i){var e;(e=i.patching||(i.patching={})).computePatches=function(e,n){const o=i.appTarget.compile?i.appTarget.compile.patches:void 0;if(o){const r=i.semver.tryParse(e||"0.0.0")||i.semver.tryParse("0.0.0");let t=[];return Object.keys(o).filter(e=>i.semver.inRange(e,r)).forEach(e=>t=t.concat(o[e])),(t=n?t.filter(e=>e.type==n):t).length?t:void 0}},e.upgradePackageReference=function(e,t,n){if("*"!=n)return t;n=i.patching.computePatches(e,"package");let o=t;return n&&n.forEach(t=>{Object.keys(t.map).forEach(e=>{o==e&&(o=t.map[e])})}),o},e.patchJavaScript=function(e,t){e=i.patching.computePatches(e);let o=t;return e&&(e.filter(e=>"api"===e.type).forEach(n=>{Object.keys(n.map).forEach(e=>{var t=new RegExp(e,"g");o=o.replace(t,n.map[e])})}),e.filter(e=>"userenum"===e.type).forEach(n=>{Object.keys(n.map).forEach(e=>{var t=new RegExp("enum\\s+"+e+"\\s*{","gm"),t=(o=o.replace(t,`enum ${n.map[e]} {`),new RegExp(`(^|[^_a-zA-Z0-9])${e}(\\s*\\.)`,"g"));o=o.replace(t,`$1${n.map[e]}$2`)})})),o}}(pxt=pxt||{}),function(e){e.react||(e.react={})}(pxt=pxt||{}),function(s){function i(n,o){if(n){if(o){let t=n.major-o.major||n.minor-o.minor||n.patch-o.patch;if(t)return t;if(0==n.pre.length&&0<o.pre.length)return 1;if(0<n.pre.length&&0==o.pre.length)return-1;for(let e=0;e<n.pre.length+1;++e){var r=n.pre[e],i=o.pre[e];if(!r)return i?-1:0;if(!i)return 1;if(/^\d+$/.test(r)){if(!/^\d+$/.test(i))return-1;if(t=parseInt(r)-parseInt(i))return t}else{if(/^\d+$/.test(i))return 1;if(t=s.U.strcmp(r,i))return t}}return 0}return-1}return o?1:0}function a(e,t){t=l(e)||l(t);return t||s.U.userError(s.U.lf("'{0}' doesn't look like a semantic version number",e)),t}function l(e){if(!e)return null;if("*"===e)return{major:Number.MAX_SAFE_INTEGER,minor:Number.MAX_SAFE_INTEGER,patch:Number.MAX_SAFE_INTEGER,pre:[],build:[]};/^v\d/i.test(e)&&(e=e.slice(1));e=/^(\d+)\.(\d+)\.(\d+)(-([0-9a-zA-Z\-\.]+))?(\+([0-9a-zA-Z\-\.]+))?$/.exec(e);return e?{major:parseInt(e[1]),minor:parseInt(e[2]),patch:parseInt(e[3]),pre:e[5]?e[5].split("."):[],build:e[7]?e[7].split("."):[]}:null}function c(e){let t=e.major+"."+e.minor+"."+e.patch;return e.pre.length&&(t+="-"+e.pre.join(".")),e.build.length&&(t+="+"+e.build.join(".")),t}function t(e,t){var n=l(e),o=l(t);return n||o?i(n,o):s.U.strcmp(e,t)}function u(e,t){var n,e=e.split(" - ");return 2==e.length&&(n=l(e[0]),e=l(e[1]),!(!n||!e))&&(!t||(n=i(n,t),t=i(t,e),n<=0&&t<0))}var n;(n=s.semver||(s.semver={})).cmp=i,n.parse=a,n.tryParse=l,n.normalize=function(e){return c(a(e))},n.stringify=c,n.majorCmp=function(e,t){e=l(e),t=l(t);return e.major-t.major},n.strcmp=t,n.inRange=u,n.sortLatestTags=function(e){e=e.filter(e=>!!n.tryParse(e));return e.sort(t),e.reverse(),e},n.test=function(){console.log("Test semver");var n=["0.9.0","1.0.0-0.3.7","1.0.0-alpha","1.0.0-alpha.1","1.0.0-alpha.beta","1.0.0-beta","1.0.0-beta.2","1.0.0-beta.11","1.0.0-rc.1","1.0.0-x.7.z.92","1.0.0","1.0.1","1.9.0","1.10.0","1.11.0"];for(let t=0;t<n.length;++t){var o=a(n[t]);console.log(n[t],o),s.U.assert(c(o)==n[t]);for(let e=0;e<n.length;++e){var r=i(o,a(n[e]));console.log(n[t],n[e],r),t<e?s.U.assert(r<0):t>e?s.U.assert(0<r):s.U.assert(0==r)}}var e=l("1.2.3");s.U.assert(u("0.1.2 - 2.2.3",e)),s.U.assert(u("1.2.3 - 2.2.3",e)),s.U.assert(!u("0.0.0 - 1.2.3",e)),s.U.assert(!u("1.2.4 - 4.2.3",e)),s.U.assert(!u("0.0.0 - 0.0.1",e))}}(pxt=pxt||{}),function(e){{var y=e.pxtc||(e.pxtc={}),u;function t(e){return y.Util.values(e.byQName).filter(e=>e.attributes.block&&/^{[^:]+:[^}]+}/.test(e.attributes.block)).forEach(e=>{e.attributes.block=e.attributes.block.replace(/^{[^:]+:[^}]+}/,"")}),e}y.assert=y.Util.assert,y.oops=y.Util.oops,y.U=y.Util,y.ON_START_TYPE="pxt-on-start",y.ON_START_COMMENT="on start",y.HANDLER_COMMENT="code goes here",y.TS_STATEMENT_TYPE="typescript_statement",y.TS_DEBUGGER_TYPE="debugger_keyword",y.TS_BREAK_TYPE="break_keyword",y.TS_CONTINUE_TYPE="continue_keyword",y.TS_OUTPUT_TYPE="typescript_expression",y.TS_RETURN_STATEMENT_TYPE="function_return",y.PAUSE_UNTIL_TYPE="pxt_pause_until",y.COLLAPSED_BLOCK="pxt_collapsed_block",y.FUNCTION_DEFINITION_TYPE="function_definition",y.BINARY_JS="binary.js",y.BINARY_ASM="binary.asm",y.BINARY_HEX="binary.hex",y.BINARY_UF2="binary.uf2",y.BINARY_ELF="binary.elf",y.BINARY_PXT64="binary.pxt64",y.BINARY_ESP="binary.bin",y.NATIVE_TYPE_THUMB="thumb",y.NATIVE_TYPE_VM="vm",y.BuildSourceMapHelpers=function(r,t,n){const e=e=>{const t=e.split("\n").map(e=>e.length),n=t.reduce(({lens:e,sum:t},n)=>({lens:[...e,t+n+1],sum:t+n+1}),{lens:[],sum:0}).lens;return{posToLineCol:o=>{var e=n.reduce((e,t,n)=>o<t?e:n+1,0);return[e,t[e]-(n[e]-o)+1]},lineColToPos:(e,t)=>(n[e-1]||0)+t}},i={ts:e(t),py:e(n)},s=e=>e.endPos-e.startPos,o=(e,t)=>{const{startPos:n,endPos:o}=e;return r.filter(e=>e[t].startPos<=n&&o<=e[t].endPos)},a=(e,n)=>{e=o(e,n);return e.reduce((e,t)=>s(t[n])<s(e[n])?t:e,e[0])},l={allOverlaps:e=>o(e,"ts"),smallestOverlap:e=>a(e,"ts")},c={allOverlaps:e=>o(e,"py"),smallestOverlap:e=>a(e,"py")},u=(o,r)=>e=>{e=e;var t,[e,n]=[i[o].lineColToPos(e.line,e.column),e.length],e=a({startPos:e,endPos:e+n},o);if(e)return[n,t]=i[r].posToLineCol(e[r].startPos),{fileName:"main."+r,start:e[r].startPos,length:s(e[r]),line:n,column:t}},d=u("ts","py"),p=u("py","ts");return{ts:Object.assign(Object.assign(Object.assign({},i.ts),l),{locToLoc:d,getText:e=>t.substring(e.startPos,e.endPos)}),py:Object.assign(Object.assign(Object.assign({},i.py),c),{locToLoc:p,getText:e=>n.substring(e.startPos,e.endPos)})}},y.computeUsedParts=function(t,e){if(!t.usedSymbols||!pxt.appTarget.simulator||!pxt.appTarget.simulator.parts)return[];let n=[];if(Object.keys(t.usedSymbols).forEach(e=>{var e=t.usedSymbols[e];e&&e.attributes.parts&&(e=e.attributes.parts)&&e.split(/[ ,]+/).forEach(e=>{0<e.length&&n.indexOf(e)<0&&n.push(e)})}),e){const t=pxt.appTarget.simulator.boardDefinition.onboardComponents;t&&("ignorebuiltin"===e?n=n.filter(e=>-1===t.indexOf(e)):"onlybuiltin"===e&&(n=n.filter(e=>0<=t.indexOf(e))))}return n.sort(),n=n.reverse()},y.buildSimJsInfo=function(e){return{js:e.outfiles[y.BINARY_JS],targetVersion:pxt.appTarget.versions.target,fnArgs:e.usedArguments,parts:y.computeUsedParts(e,"ignorebuiltin"),usedBuiltinParts:y.computeUsedParts(e,"onlybuiltin")}},y.blocksCategory=function(e){e=e?e.attributes.blockNamespace||e.namespace:void 0;return e?y.Util.capitalize(e.split(".")[0]):void 0},y.getBlocksInfo=function(t,e){var n,o,r,i;let p=[];const g={},h={},_={},s={},a={};function l(n,o){const r="get"==n,i="set"==n,s="number"==o.retType,a=r?h:i?g:_,l=o.namespace+"."+o.retType;let c=y.U.lookup(a,l);if(!c){const g=`@${n}@`;let e,t;if(o.attributes.blockCombineShadow){const n=o.attributes.blockCombineShadow,r=n.match(/^([^,.]*),?([^,.]*)$/);r&&3==r.length&&(e=r[1].trim(),0!=(t=r[2].trim()).length||y.Util.endsWith(n,",")||(t=e,e=""))}var u=`${o.attributes.blockSetVariable||o.namespace.toLocaleLowerCase()}=`+(e||""),d="value="+(t||"");(c=a[l]={attributes:{blockId:`${s?o.namespace:l}_blockCombine_`+n,callingConvention:0,group:o.attributes.group,paramDefl:{},jsDoc:r?y.U.lf("Read value of a property on an object"):y.U.lf("Update value of property on an object")},name:g,namespace:o.namespace,fileName:o.fileName,qName:l+"."+g,pkg:o.pkg,kind:2,parameters:[{name:"property",description:r?y.U.lf("the name of the property to read"):y.U.lf("the name of the property to change"),isEnum:!0,type:"@combined@"},{name:"value",description:i?y.U.lf("the new value of the property"):y.U.lf("the amount by which to change the property"),type:o.retType}].slice(0,r?1:2),retType:r?o.retType:"void",combinedProperties:[]}).attributes.block=r?y.U.lf("%{0} %property",u):i?y.U.lf("set %{0} %property to %{1}",u,d):y.U.lf("change %{0} %property by %{1}",u,d),b(c.attributes),pxt.Util.isTranslationMode()&&(c.attributes.translationId=c.attributes.block,c.attributes.block=r?`%${u} %property`:i?`set %${u} %property to %`+d:`change %${u} %property by %`+d,b(c.attributes),pxt.crowdin.inContextLoadAsync(c.attributes.translationId).then(e=>{c.attributes.block=e,b(c.attributes)})),p.push(c)}c.combinedProperties.push(o.qName)}for(o of y.Util.values(t.byQName)){if("ENUM_GET"===o.attributes.shim&&o.attributes.enumName&&o.attributes.blockId){let e=!1;if(s[o.attributes.enumName]&&(console.warn(`Enum block ${o.attributes.blockId} trying to overwrite enum `+o.attributes.enumName),e=!0),o.attributes.enumMemberName||(console.warn(`Enum block ${o.attributes.blockId} should specify enumMemberName`),e=!0),o.attributes.enumPromptHint||(console.warn(`Enum block ${o.attributes.blockId} should specify enumPromptHint`),e=!0),o.attributes.enumInitialMembers&&o.attributes.enumInitialMembers.length||(console.warn(`Enum block ${o.attributes.blockId} should specify enumInitialMembers`),e=!0),e)continue;const t=parseInt(o.attributes.enumStartValue);s[o.attributes.enumName]={blockId:o.attributes.blockId,name:o.attributes.enumName,memberName:o.attributes.enumMemberName,firstValue:isNaN(t)?void 0:t,isBitMask:o.attributes.enumIsBitMask,isHash:o.attributes.enumIsHash,initialMembers:o.attributes.enumInitialMembers,promptHint:o.attributes.enumPromptHint}}if("KIND_GET"===o.attributes.shim&&o.attributes.blockId){const n=o.attributes.kindNamespace||o.attributes.blockNamespace||o.namespace;if(a[n]){console.warn("More than one block defined for kind "+n);continue}const k=[];if(t.byQName[n])for(const e of y.Util.values(t.byQName))e.namespace===n&&e.attributes.isKind&&k.push(e.name);a[n]={blockId:o.attributes.blockId,name:n,memberName:o.attributes.kindMemberName||n,initialMembers:k,promptHint:o.attributes.enumPromptHint||y.Util.lf("Create a new kind..."),createFunctionName:o.attributes.kindCreateFunction||"create"}}if(o.attributes.blockCombine)/@set/.test(o.name)||l("get",o),o.isReadOnly||("number"==o.retType&&l("change",o),l("set",o));else if(o.attributes.block&&!o.attributes.fixedInstance&&7!=o.kind&&5!=o.kind&&9!=o.kind&&8!=o.kind){if(o.attributes.blockId||(o.attributes.blockId=o.qName.replace(/\./g,"_")),"true"==o.attributes.block){let e=y.U.uncapitalize(o.name);1!=o.kind&&2!=o.kind||(e+=" %"+o.namespace.toLowerCase());const p=null!=(n=null==(n=o.parameters)?void 0:n.filter(e=>!k(e)))?n:[];for(var c of p)e+=" %"+c.name;o.attributes.block=e,b(o.attributes)}p.push(o)}}for(r of p){var u=y.U.lookup(t.byQName,r.namespace);if(u){var d,m=u.attributes,f=r.attributes;for(d of["blockNamespace","color","blockGap"])void 0===f[d]&&m[d]&&(f[d]=m[d])}}return{apis:t,blocks:p=e&&(i=e).length?p.filter(e=>{e=(e.attributes.blockNamespace||e.namespace).split(".")[0];return-1===i.indexOf(e)}):p,blocksById:pxt.Util.toDictionary(p,e=>e.attributes.blockId),enumsByName:s,kindsByName:a}},y.tsSnippetToPySnippet=function(e,t){const n={true:"True",false:"False",null:"None"}[e];if(n)return n;if(t&&6==t.kind||!t&&e.includes(".")){const t=e.lastIndexOf("."),n=e.substr(0,t);var o=e.substr(t+1);return n+"."+y.U.snakify(o).toUpperCase()}return e},y.apiLocalizationStrings={},y.localizeApisAsync=async function(l,e){const c=y.Util.userLanguage();if("en"==c)return Promise.resolve(t(l));const u=c.toLowerCase(),d=u+"|jsdoc",p=u+"|block",g=await e.localizationStringsAsync(c);y.apiLocalizationStrings&&y.Util.jsonMergeFrom(g,y.apiLocalizationStrings);e=y.Util.values(l.byQName).filter(e=>e.attributes._translatedLanguageCode!==c);return await y.Util.promiseMapAll(e,async o=>{var e;const t=o.attributes.useLoc||o.attributes.blockAliasFor,r=t&&l.byQName[t],n=(o.attributes._untranslatedJsDoc&&(o.attributes.jsDoc=o.attributes._untranslatedJsDoc),o.attributes._untranslatedBlock&&(o.attributes.jsDoc=o.attributes._untranslatedBlock),(e,t)=>{var n;return g[o.qName+e]||(null==(n=o.attributes.locs)?void 0:n[t])||r&&(g[r.qName+e]||(null==(n=r.attributes.locs)?void 0:n[t]))}),i=n("",d);i&&(o.attributes._untranslatedJsDoc||(o.attributes._untranslatedJsDoc=o.attributes.jsDoc),o.attributes.jsDoc=i),null!=(s=o.parameters)&&s.forEach(e=>{var t="|param|"+e.name,t=n(t,u+t);t&&(e.description=t)});var s=g["{id:category}"+y.Util.capitalize(o.qName)];let a=g[o.qName+"|block"]||(null==(e=o.attributes.locs)?void 0:e[p]);if(!a&&r){const y=g[r.qName+"|block"]||(null==(e=r.attributes.locs)?void 0:e[p]);o.attributes.block===(r.attributes._untranslatedBlock||r.attributes.block)&&y&&(a=y)}if(a&&pxt.Util.isTranslationMode()&&(o.attributes.translationId=a,a=await pxt.crowdin.inContextLoadAsync(a)),s)o.attributes.block?o.attributes.block=a||o.attributes.block:o.attributes.block=s,b(o.attributes);else if(o.attributes.block&&a){const y=pxt.blocks.compileInfo(o),l=o.attributes.block;o.attributes.block=pxt.blocks.normalizeBlock(a,e=>{pxt.tickEvent("loc.normalized",{block:o.attributes.block,lang:c,error:e})}),o.attributes._untranslatedBlock||(o.attributes._untranslatedBlock=l),l!=o.attributes.block&&(b(o.attributes),function(e,t){if(e.parameters.length!=t.parameters.length)return pxt.debug("Localized block has extra or missing parameters"),0;for(const n of e.parameters){const e=t.actualNameToParam[n.actualName];if(!e||n.type!=e.type||n.shadowBlockId!=e.shadowBlockId)return pxt.debug(`Parameter ${n.actualName} type or shadow block does not match after localization`),0}return 1}(y,pxt.blocks.compileInfo(o))||(pxt.log(`block has non matching arguments: ${l} vs `+o.attributes.block),pxt.reportError("loc.errors","invalid translations",{block:o.attributes.blockId,lang:c}),o.attributes.block=l,b(o.attributes)))}else b(o.attributes);o.attributes._translatedLanguageCode=c}),t(l)},y.emptyExtInfo=function(){let e=pxt.appTarget.compileService;var t=!!(e=e||{}).platformioIni,n="dockermake"==e.buildEngine||"dockercross"==e.buildEngine||"dockerespidf"==e.buildEngine,o={functions:[],generatedFiles:{},extensionFiles:{},sha:"",compileData:"",shimsDTS:"",enumsDTS:"",onlyPublic:!0};return t?o.platformio={dependencies:{}}:n?o.npmDependencies={}:o.yotta={config:{},dependencies:{}},o};const a=["weight","imageLiteral","topblockWeight"],h=["advanced","handlerStatement","afterOnStart","optionalVariableArgs","blockHidden","constantShim","blockCombine","enumIsBitMask","enumIsHash","decompileIndirectFixedInstances","topblock","callInDebugger","duplicateShadowOnDrag","argsNullable"];function k(e){return"Action"===e.type||/^\([^\)]*\)\s*=>/.test(e.type)}function b(n){var e;function t(e){return n._shadowOverrides&&e.parameters.forEach(e=>{var t=n._shadowOverrides[e.name];"unset"===t?delete e.shadowBlockId:null!=t&&(e.shadowBlockId=t)}),e}n.block&&(e=n.block.split("||"),n._def=t(o(e[0])),n._def||pxt.debug("Unable to parse block def for id: "+n.blockId),e[1]&&(n._expandedDef=t(o(e[1]))),e[1])&&!n._expandedDef&&pxt.debug("Unable to parse expanded block def for id: "+n.blockId)}function o(o){const n=[];let r,i=0;for(;i<o.length;i++){const s=o[i],a=i;let t;switch(s){case"*":case"_":const n=p(e=>e==s),r="_"===s?2:0;1===n.length?t={kind:1<<r,content:n}:2===n.length?t={kind:2<<r,content:n}:3===n.length?t={kind:3<<r,content:n}:i=a;break;case"`":const e=g("`");void 0===e?i=a:t={kind:256,content:e};break;case"|":t={kind:32};break;case"\\":i<o.length-1&&(t={kind:16,content:o[1+i++]});break;case"[":const c=g("]");if(void 0!==c&&"("===o[1+i++]){const o=g(")");if(void 0!==o){t={kind:512,content:c,type:o};break}}i=a;break;case"$":case"%":const u=p(e=>/[a-zA-Z0-9_=]/.test(e),!0).split("=");if(2<u.length)i=a;else{let e;if("("===o[i+1]){const o=i;++i,(e=g(")"))||(i=o)}t={kind:"$"===s?1024:64,content:u[0],type:u[1],name:e}}}t?(r&&n.push({kind:128,content:r}),r=void 0,n.push(t)):r?r+=s:r=s}r&&n.push({kind:128,content:r});const s=[],a=[];let l=[],c=0,u="",d=[];for(let e=0;e<n.length;e++){const r=n[e].kind,i=l[l.length-1];if(15&r)if(_(n[e].content),r&c)if(i&r){l.pop();const o=i&(c^=r)|r&c;o&&l.push(o)}else h();else c|=r,l.push(r);else 144&r?u+=n[e].content:1120&r&&t();if(64==r){const r={kind:"param",name:n[e].content,shadowBlockId:n[e].type,ref:!1};n[e].name&&(r.varName=n[e].name),s.push(r),a.push(r)}else if(1024==r){const r={kind:"param",name:n[e].content,shadowBlockId:n[e].type,ref:!0};n[e].name&&(r.varName=n[e].name),s.push(r),a.push(r)}else 256==r?(_(),d.push({kind:"image",uri:n[e].content})):512==r?(_(),d.push({kind:"label",text:n[e].content,cssClass:n[e].type})):32==r&&s.push({kind:"break"})}return t(),{parts:s,parameters:a};function p(e,t=!1){let n="";for(t&&i++;i<o.length&&e(o[i]);)n+=o[i],++i;return n&&i--,n}function g(t){var e=p(e=>e!==t,!0);if(o[i+1]===t)return++i,e}function h(){let e="",t=[];for(const n of d)n.kind?(t.push({content:e,styles:0}),t.push(n),e=""):(e+=n.content,n.endingToken&&(e+=n.endingToken));d=t,e&&d.push({content:e,styles:0}),l=[],c=0}function t(){for(_(),c&&h();d.length;){var e,t=d.shift();t.kind?s.push(t):t.content&&(e=[],10&t.styles&&e.push("bold"),5&t.styles&&e.push("italics"),s.push({kind:"label",text:t.content,style:e}))}}function _(e){d.push({content:u,styles:c,endingToken:e}),u=""}}function g(n){var o=e=>n[e]+(n[e+1]<<8)+(n[e+2]<<16)+(n[e+3]<<24)>>>0;if(!n||512!=n.length||o(0)!=u.UF2_MAGIC_START0||o(4)!=u.UF2_MAGIC_START1||o(n.length-4)!=u.UF2_MAGIC_END)return null;let e=o(8),r=o(16),i=(476<r&&(r=256),null),t=0,s=0;if(e&u.UF2_FLAG_FILE){let e=n.slice(32+r),t=e.indexOf(0);0<=t&&(e=e.slice(0,t)),i=y.U.fromUTF8Array(e),s=o(28)}return e&u.UF2_FLAG_FAMILY_ID_PRESENT&&(t=o(28)),{flags:e,targetAddr:o(12),payloadSize:r,blockNo:o(20),numBlocks:o(24),fileSize:s,familyId:t,data:n.slice(32,32+r),filename:i}}function s(e,t){return!!e&&e.targetAddr<=t&&t<e.targetAddr+e.payloadSize}function d(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255}function r(e){return{currBlock:null,currPtr:-1,blocks:[],ptrs:[],filesize:0,familyId:(e="string"==typeof e?parseInt(e):e)||0}}function i(t){for(let e=0;e<t.blocks.length;++e)d(t.blocks[e],20,e),d(t.blocks[e],24,t.blocks.length),t.filename&&d(t.blocks[e],28,t.filesize)}function p(t,e,n,o=0){let r=t.currBlock,i=e>>8,s=256-(255&e);if(n.length>s){var a=new Uint8Array(n);for(p(t,e,a.slice(0,s));s<n.length;){var l=Math.min(s+256,n.length);p(t,e+s,a.slice(s,l)),s=l}}else{if(i!=t.currPtr){r=null;for(let e=0;e<t.ptrs.length;++e)if(t.ptrs[e]==i){r=t.blocks[e];break}if(!r){r=new Uint8Array(512),t.filename?o|=u.UF2_FLAG_FILE:t.familyId&&(o|=u.UF2_FLAG_FAMILY_ID_PRESENT),d(r,0,u.UF2_MAGIC_START0),d(r,4,u.UF2_MAGIC_START1),d(r,8,o),d(r,12,i<<8),d(r,16,256),d(r,20,t.blocks.length),d(r,28,t.familyId),d(r,508,u.UF2_MAGIC_END);for(let e=32;e<288;++e)r[e]=255;t.filename&&y.U.memcpy(r,288,y.U.toUTF8Array(t.filename)),t.blocks.push(r),t.ptrs.push(i)}t.currPtr=i,t.currBlock=r}var c=32+(255&e);for(let e=0;e<n.length;++e)r[c+e]=n[e];t.filesize=Math.max(t.filesize,n.length+e)}}y.parseCommentString=function(e){let l={paramDefl:{},callingConvention:0,_source:e},c=!0;for(;c;)c=!1,e=e.replace(/\/\/%[ \t]*([\w\.-]+)(=(("[^"\n]*")|'([^'\n]*)'|([^\s]*)))?/,(e,t,n,o,r,i,s)=>{let a=r?JSON.parse(r):n?r||i||s:"true";if(a=a||"",y.U.startsWith(t,"block.loc."))l.locs||(l.locs={}),l.locs[t.slice("block.loc.".length).toLowerCase()+"|block"]=a;else if(y.U.startsWith(t,"jsdoc.loc."))l.locs||(l.locs={}),l.locs[t.slice("jsdoc.loc.".length).toLowerCase()+"|jsdoc"]=a;else if(y.U.contains(t,".loc.")){l.locs||(l.locs={});const y=t.slice(0,t.indexOf(".loc.")),e=t.slice(t.indexOf(".loc.")+".loc.".length);l.locs[e+"|param|"+y]=a}else if(y.U.endsWith(t,".defl"))-1<a.indexOf(" ")?l.paramDefl[t.slice(0,t.length-5)]=`"${a}"`:l.paramDefl[t.slice(0,t.length-5)]=a,l.explicitDefaults||(l.explicitDefaults=[]),l.explicitDefaults.push(t.slice(0,t.length-5));else if(y.U.endsWith(t,".shadow"))l._shadowOverrides||(l._shadowOverrides={}),l._shadowOverrides[t.slice(0,t.length-7)]=a;else if(y.U.endsWith(t,".fieldEditor"))l.paramFieldEditor||(l.paramFieldEditor={}),l.paramFieldEditor[t.slice(0,t.length-12)]=a;else if(y.U.contains(t,".fieldOptions.")){l.paramFieldEditorOptions||(l.paramFieldEditorOptions={});const y=t.slice(0,t.indexOf(".fieldOptions.")),e=t.slice(t.indexOf(".fieldOptions.")+14,t.length);l.paramFieldEditorOptions[y]||(l.paramFieldEditorOptions[y]={}),l.paramFieldEditorOptions[y][e]=a}else if(y.U.contains(t,".shadowOptions.")){l.paramShadowOptions||(l.paramShadowOptions={});const y=t.slice(0,t.indexOf(".shadowOptions.")),e=t.slice(t.indexOf(".shadowOptions.")+15,t.length);l.paramShadowOptions[y]||(l.paramShadowOptions[y]={}),l.paramShadowOptions[y][e]=a}else y.U.endsWith(t,".min")?(l.paramMin||(l.paramMin={}),l.paramMin[t.slice(0,t.length-4)]=a):y.U.endsWith(t,".max")?(l.paramMax||(l.paramMax={}),l.paramMax[t.slice(0,t.length-4)]=a):l[t]=a;return c=!0,"//% "});for(var t of a)"string"==typeof l[t]&&(l[t]=parseInt(l[t]));for(var n of h)"string"==typeof l[n]&&(l[n]="true"==l[n]||"1"==l[n]);if(l.trackArgs&&(l.trackArgs=l.trackArgs.split(/[ ,]+/).map(e=>parseInt(e)||0)),l.enumInitialMembers&&(l.enumInitialMembers=l.enumInitialMembers.split(/[ ,]+/)),l.blockExternalInputs&&!l.inlineInputMode&&(l.inlineInputMode="external"),l.paramHelp={},l.jsDoc="",e=e.replace(/\/\*\*([^]*?)\*\//g,(e,t)=>(t=(t=t.replace(/\n\s*(\*\s*)?/g,"\n")).replace(/^\s*@param\s+(\w+)\s+(.*)$/gm,(e,t,n)=>{if(l.paramHelp[t]=n,!l.paramDefl[t]){n=/\beg\.?:\s*(.+)/.exec(n);if(n&&n[1]){n=/(?:"([^"]*)")|(?:'([^']*)')|(?:([^\s,]+))/g.exec(n[1]);if(n){let e=n[1]||n[2]||n[3];-1<(e=e||"").indexOf(" ")?l.paramDefl[t]=`"${e}"`:l.paramDefl[t]=e}}}return""}),l.jsDoc+=t,"")),l.jsDoc=l.jsDoc.trim(),l.async&&(l.callingConvention=1),l.promise&&(l.callingConvention=2),l.jres&&(l.whenUsed=!0),l.subcategories)try{l.subcategories=JSON.parse(l.subcategories)}catch(e){l.subcategories=void 0}if(l.groups)try{l.groups=JSON.parse(l.groups)}catch(e){l.groups=void 0}if(l.groupIcons)try{l.groupIcons=JSON.parse(l.groupIcons)}catch(e){l.groupIcons=void 0}if(l.groupHelp)try{l.groupHelp=JSON.parse(l.groupHelp)}catch(e){l.groupHelp=void 0}return b(l),l},y.parameterTypeIsArrowFunction=k,y.updateBlockDef=b,y.parseBlockDefinition=o,y.parseChecksumBlock=function(t,n=0){var e=pxt.HF2.read32(t,n);if(133083260!=(2147483647&e))return pxt.log("no checksum block magic"),null;var o=pxt.HF2.read32(t,n+4),r=pxt.HF2.read32(t,n+8);if(3&o)return pxt.log("invalid end marker position"),null;var i=1<<(255&r);if(i!=pxt.appTarget.compile.flashCodeAlign)return pxt.log("invalid page size: "+i),null;var s={magic:e,endMarkerPos:o,endMarker:r,regions:[]};for(let e=n+12;e<t.length-7;e+=8){var a={start:i*pxt.HF2.read16(t,e),length:i*pxt.HF2.read16(t,e+2),checksum:pxt.HF2.read32(t,e+4)};if(!a.length||!a.checksum)break;s.regions.push(a)}return s},(u=y.UF2||(y.UF2={})).UF2_MAGIC_START0=171066965,u.UF2_MAGIC_START1=2656915799,u.UF2_MAGIC_END=179400496,u.UF2_FLAG_NONE=0,u.UF2_FLAG_NOFLASH=1,u.UF2_FLAG_FILE=4096,u.UF2_FLAG_FAMILY_ID_PRESENT=8192,u.parseBlock=g,u.parseFile=function(t){var n=[];for(let e=0;e<t.length;e+=512){var o=g(t.slice(e,e+512));o&&n.push(o)}return n},u.toBin=function(t,n){if(t.length<512)return null;let o=-1,r=-1,i=[];for(let e=0;e<t.length;++e){var s=512*e,a=g(t.slice(s,512+s));if(a){if(n&&a.targetAddr+256>n)break;-1==o&&(o=a.targetAddr,r=o);var l=a.targetAddr-o;l<0||l%4||1048576<l||(0<l&&i.push(new Uint8Array(l)),i.push(t.slice(32+s,32+s+a.payloadSize)),o=a.targetAddr+a.payloadSize)}}let e=0;for(var c of i)e+=c.length;if(0==e)return null;let u=new Uint8Array(e),d=0;for(var p of i)for(let e=0;e<p.length;++e)u[d++]=p[e];return{buf:u,start:r}},u.readBytes=function(t,n,o){let r,i=new Uint8Array(o);for(let e=0;e<o;++e,++n)(r=s(r,n)?r:t.filter(e=>s(e,n))[0])&&(i[e]=r.data[n-r.targetAddr]);return i},u.newBlockFile=r,u.finalizeFile=i,u.concatFiles=function(e){for(var t of e)i(t),t.filename=null;var n,o=r();o.blocks=y.U.concat(e.map(e=>e.blocks));for(n of e)n.blocks=[];return o},u.serializeFile=function(e){i(e);let t="";for(var n of e.blocks)t+=y.Util.uint8ArrayToString(n);return t},u.readBytesFromFile=function e(t,n,o){let r,i=n>>8;if(i==t.currPtr)r=t.currBlock;else{for(let e=0;e<t.ptrs.length;++e)if(t.ptrs[e]==i){r=t.blocks[e];break}r&&(t.currPtr=i,t.currBlock=r)}var s,a;return r?(s=new Uint8Array(o),a=Math.min(o,256-(255&n)),y.U.memcpy(s,0,r,32+(255&n),a),0<(o=o-a)&&(n=e(t,n+a,o),y.U.memcpy(s,a,n)),s):null},u.writeBytes=p,u.writeHex=function(t,n){let o="0000";for(let e=0;e<n.length;++e){var r=/:02000004(....)/.exec(n[e]);if(r&&(o=r[1]),r=/^:..(....)00(.*)[0-9A-F][0-9A-F]$/.exec(n[e])){var i=parseInt(o+r[1],16),s=r[2],a=[];for(let e=0;e<s.length;e+=2)a.push(parseInt(s[e]+s[e+1],16));p(t,i,a)}}}}}(ts=ts||{}),function(c){{var e=c.shell||(c.shell={}),t;let i,s,a=((t=i=e.EditorLayoutType||(e.EditorLayoutType={}))[t.IDE=0]="IDE",t[t.Sandbox=1]="Sandbox",t[t.Widget=2]="Widget",!(t[t.Controller=3]="Controller")),l=!1;function n(){if(void 0===s){if(c.BrowserUtils.hasWindow()){const e=/sandbox=1|#sandbox|#sandboxproject/i.test(window.location.href)||c.BrowserUtils.isIFrame(),t=/nosandbox=1/i.test(window.location.href),n=/controller=1/i.test(window.location.href)&&c.BrowserUtils.isIFrame(),u=/readonly=1/i.test(window.location.href),o=/editorlayout=(widget|sandbox|ide)/i.exec(window.location.href),r=/noproject=1/i.test(window.location.href);if(s=i.IDE,t?s=i.Widget:n?s=i.Controller:e&&(s=i.Sandbox),n&&u&&(a=!0),n&&r&&(l=!0),o)switch(o[1].toLowerCase()){case"widget":s=i.Widget;break;case"sandbox":s=i.Sandbox;break;case"ide":s=i.IDE}}else s=i.Sandbox;c.debug(`shell: layout type ${i[s]}, readonly `+u())}}function o(){return n(),s==i.Sandbox}function u(){return!c.BrowserUtils.hasWindow()||o()&&!/[?&]edit=1/i.test(window.location.href)||r()&&a}function r(){return n(),s==i.Controller}e.layoutTypeClass=function(){return n(),c.shell.EditorLayoutType[s].toLowerCase()},e.isSandboxMode=o,e.isReadOnly=u,e.isNoProject=function(){return l},e.isControllerMode=r,e.isPyLangPref=function(){return"py"==c.storage.getLocal("editorlangpref")},e.getEditorLanguagePref=function(){return c.storage.getLocal("editorlangpref")},e.setEditorLanguagePref=function(e){e.match(/prj$/)&&(e=e.replace(/prj$/,"")),c.storage.setLocal("editorlangpref",e)},e.getToolboxAnimation=function(){return c.storage.getLocal("toolboxanimation")},e.setToolboxAnimation=function(){c.storage.setLocal("toolboxanimation","1")}}}(pxt=pxt||{}),function(e){{var t=e.skillmap||(e.skillmap={});t.USER_VERSION="0.0.1";class n{constructor(){this.db=new e.BrowserUtils.IDBWrapper(n.databaseName,n.version,(e,t)=>{t=t.result;e.oldVersion<1&&(t.createObjectStore(n.projectTable,{keyPath:n.projectKey}),t.createObjectStore(n.userTable,{keyPath:n.userKey}))})}initAsync(){return this.db.openAsync()}getAllProjectsAsync(){return this.db.getAllAsync(n.projectTable).then(e=>e.map(e=>e.project).filter(e=>!e.deleted))}deleteProjectAsync(e){return this.getProjectAsync(e).then(e=>{e.deleted=!0,this.saveProjectAsync(e)})}getProjectAsync(e){return this.db.getAsync(n.projectTable,e).then(e=>{return null==(e=e)?void 0:e.project})}saveProjectAsync(e){return this.db.setAsync(n.projectTable,{id:e.header.id,project:e})}getUserStateAsync(){return this.db.getAsync(n.userTable,"local-user").then(e=>{return null==(e=e)?void 0:e.user})}saveUserStateAsync(e){return this.db.setAsync(n.userTable,{id:"local-user",user:e})}}n.version=6,n.databaseName="local-skill-map",n.projectTable="projects",n.projectKey="id",n.userTable="users",n.userKey="id",t.IndexedDBWorkspace=n}}(pxt=pxt||{}),function(n){var e;(e=n.streams||(n.streams={})).createStreamAsync=function(e,t){return n.Cloud.privatePostAsync("streams",{target:e,name:t||"data"}).then(e=>e)},e.postPayloadAsync=function(e,t){return n.Util.assert(!!e.privatekey),n.Cloud.privatePostAsync(e.id+"/data?privatekey="+e.privatekey,t)}}(pxt=pxt||{}),function(n){{var r=n.svgUtil||(n.svgUtil={}),e;let t,o;(e=t=r.PatternUnits||(r.PatternUnits={}))[e.userSpaceOnUse=0]="userSpaceOnUse",e[e.objectBoundingBox=1]="objectBoundingBox",(e=o=r.LengthUnit||(r.LengthUnit={}))[e.em=0]="em",e[e.ex=1]="ex",e[e.px=2]="px",e[e.in=3]="in",e[e.cm=4]="cm",e[e.mm=5]="mm",e[e.pt=6]="pt",e[e.pc=7]="pc",e[e.percent=8]="percent";class a{constructor(e){this.el=i(e)}attr(t){return Object.keys(t).forEach(e=>{this.setAttribute(e,t[e])}),this}setAttribute(e,t){return this.el.setAttribute(e,t.toString()),this}setAttributeNS(e,t,n){return this.el.setAttributeNS(e,t,n.toString()),this}id(e){return this.setAttribute("id",e)}setClass(...e){return this.setAttribute("class",e.join(" "))}appendClass(e){return n.BrowserUtils.addClass(this.el,e),this}removeClass(e){n.BrowserUtils.removeClass(this.el,e)}title(e){this.titleElement||(this.titleElement=i("title"),this.el.firstChild?this.el.insertBefore(this.titleElement,this.el.firstChild):this.el.appendChild(this.titleElement)),this.titleElement.textContent=e}setVisible(e){return this.setAttribute("visibility",e?"visible":"hidden")}}class l extends(r.BaseElement=a){draw(e){e=function(e){switch(e){case"text":return new h;case"circle":return new m;case"rect":return new _;case"line":return new f;case"polygon":return new b;case"polyline":return new k;case"path":return new v;default:return new g(e)}}(e);return this.el.appendChild(e.el),e}element(e,t){return t(this.draw(e)),this}group(){var e=new c;return this.el.appendChild(e.el),e}appendChild(e){this.el.appendChild(e.el)}onDown(e){return r.events.down(this.el,e),this}onUp(e){return r.events.up(this.el,e),this}onMove(e){return r.events.move(this.el,e),this}onEnter(e){return r.events.enter(this.el,e),this}onLeave(e){return r.events.leave(this.el,e),this}onClick(e){return r.events.click(this.el,e),this}}r.DrawContext=l,r.SVG=class extends l{constructor(e){super("svg"),e&&e.appendChild(this.el)}define(e){return this.defs||(this.defs=new d(this.el)),e(this.defs),this}};class c extends l{constructor(e){super("g"),e&&e.appendChild(this.el)}translate(e,t){return this.left=e,this.top=t,this.updateTransform()}scale(e){return this.scaleFactor=e,this.updateTransform()}def(){return new d(this.el)}style(){return new p(this.el)}updateTransform(){let e="";return null!=this.left&&(e+=`translate(${this.left} ${this.top})`),null!=this.scaleFactor&&(e+=` scale(${this.scaleFactor})`),this.setAttribute("transform",e),this}}r.Group=c;class u extends l{constructor(){super("pattern")}units(e){return this.setAttribute("patternUnits",e===t.objectBoundingBox?"objectBoundingBox":"userSpaceOnUse")}contentUnits(e){return this.setAttribute("patternContentUnits",e===t.objectBoundingBox?"objectBoundingBox":"userSpaceOnUse")}size(e,t){return this.setAttribute("width",e),this.setAttribute("height",t),this}}r.Pattern=u;class d extends a{constructor(e){super("defs"),e.appendChild(this.el)}create(e,t){let n;switch(e){case"path":n=new v;break;case"pattern":n=new u;break;case"radialGradient":n=new S;break;case"linearGradient":n=new E;break;case"clipPath":n=new C;break;default:n=new a(e)}return n.id(t),this.el.appendChild(n.el),n}}r.DefsElement=d;class p extends a{constructor(e){super("style"),e.appendChild(this.el)}content(e){this.el.textContent=e}}r.StyleElement=p;class g extends l{at(e,t){return this.setAttribute("x",e),this.setAttribute("y",t),this}moveTo(e,t){return this.at(e,t)}fill(e,t){return this.setAttribute("fill",e),null!=t&&this.opacity(t),this}opacity(e){return this.setAttribute("fill-opacity",e)}stroke(e,t){return this.setAttribute("stroke",e),null!=t&&this.strokeWidth(t),this}strokeWidth(e){return this.setAttribute("stroke-width",e)}strokeOpacity(e){return this.setAttribute("stroke-opacity",e)}clipPath(e){return this.setAttribute("clip-path",e)}}class h extends(r.Drawable=g){constructor(e){super("text"),null!=e&&this.text(e)}text(e){return this.el.textContent=e,this}fontFamily(e){return this.setAttribute("font-family",e)}fontSize(e,t){return this.setAttribute("font-size",s(e,t))}offset(e,t,n){return 0!==e&&this.setAttribute("dx",s(e,n)),0!==t&&this.setAttribute("dy",s(t,n)),this}anchor(e){return this.setAttribute("text-anchor",e)}}r.Text=h;class _ extends g{constructor(){super("rect")}width(e,t=o.px){return this.setAttribute("width",s(e,t))}height(e,t=o.px){return this.setAttribute("height",s(e,t))}corner(e){return this.corners(e,e)}corners(e,t){return this.setAttribute("rx",e),this.setAttribute("ry",t),this}size(e,t,n=o.px){return this.width(e,n),this.height(t,n),this}}r.Rect=_;class m extends g{constructor(){super("circle")}at(e,t){return this.setAttribute("cx",e),this.setAttribute("cy",t),this}radius(e){return this.setAttribute("r",e)}}r.Circle=m;class f extends g{constructor(){super("line")}at(e,t,n,o){return this.from(e,t),null!=n&&null!=o&&this.to(n,o),this}from(e,t){return this.setAttribute("x1",e),this.setAttribute("y1",t),this}to(e,t){return this.setAttribute("x2",e),this.setAttribute("y2",t),this}}r.Line=f;class y extends g{points(e){return this.setAttribute("points",e)}with(e){return this.points(e.map(({x:e,y:t})=>e+" "+t).join(","))}}class k extends(r.PolyElement=y){constructor(){super("polyline")}}r.Polyline=k;class b extends y{constructor(){super("polygon")}}r.Polygon=b;class v extends g{constructor(){super("path"),this.d=new x}update(){return this.setAttribute("d",this.d.toAttribute())}path(e){return e(this.d),this.update()}}r.Path=v,r.Image=class extends g{constructor(){super("image")}src(e){return this.setAttributeNS("http://www.w3.org/1999/xlink","href",e)}width(e,t=o.px){return this.setAttribute("width",s(e,t))}height(e,t=o.px){return this.setAttribute("height",s(e,t))}size(e,t,n=o.px){return this.width(e,n),this.height(t,n),this}};class T extends a{units(e){return this.setAttribute("gradientUnits",e===t.objectBoundingBox?"objectBoundingBox":"userSpaceOnUse")}stop(e,t,n){var o=i("stop");return o.setAttribute("offset",e+"%"),null!=t&&o.setAttribute("stop-color",t),null!=n&&o.setAttribute("stop-opacity",n),this.el.appendChild(o),this}}class E extends(r.Gradient=T){constructor(){super("linearGradient")}start(e,t){return this.setAttribute("x1",e),this.setAttribute("y1",t),this}end(e,t){return this.setAttribute("x2",e),this.setAttribute("y2",t),this}}r.LinearGradient=E;class S extends T{constructor(){super("radialGradient")}center(e,t){return this.setAttribute("cx",e),this.setAttribute("cy",t),this}focus(e,t,n){return this.setAttribute("fx",e),this.setAttribute("fy",t),this.setAttribute("fr",n),this}radius(e){return this.setAttribute("r",e)}}r.RadialGradient=S;class C extends l{constructor(){super("clipPath")}clipPathUnits(e){return e?this.setAttribute("clipPathUnits","objectBoundingBox"):this.setAttribute("clipPathUnits","userSpaceOnUse")}}function i(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}r.ClipPath=C;class x{constructor(){this.ops=[]}clear(){this.ops=[]}moveTo(e,t){return this.op("M",e,t)}moveBy(e,t){return this.op("m",e,t)}lineTo(e,t){return this.op("L",e,t)}lineBy(e,t){return this.op("l",e,t)}cCurveTo(e,t,n,o,r,i){return this.op("C",e,t,n,o,r,i)}cCurveBy(e,t,n,o,r,i){return this.op("c",e,t,n,o,r,i)}qCurveTo(e,t,n,o){return this.op("Q",e,t,n,o)}qCurveBy(e,t,n,o){return this.op("q",e,t,n,o)}sCurveTo(e,t,n,o){return this.op("S",e,t,n,o)}sCurveBy(e,t,n,o){return this.op("s",e,t,n,o)}tCurveTo(e,t){return this.op("T",e,t)}tCurveBy(e,t){return this.op("t",e,t)}arcTo(e,t,n,o,r,i,s){return this.op("A",e,t,n,o?1:0,r?1:0,i,s)}arcBy(e,t,n,o,r,i,s){return this.op("a",e,t,n,o?1:0,r?1:0,i,s)}close(){return this.op("z")}toAttribute(){return this.ops.map(e=>e.op+" "+e.args.join(" ")).join(" ")}op(e,...t){return this.ops.push({op:e,args:t}),this}}function s(e,t){switch(t){case o.em:return e+"em";case o.ex:return e+"ex";case o.px:return e+"px";case o.in:return e+"in";case o.cm:return e+"cm";case o.mm:return e+"mm";case o.pt:return e+"pt";case o.pc:return e+"pc";case o.percent:return e+"%";default:return e.toString()}}r.PathContext=x}}(pxt=pxt||{}),function(e){function n(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator&&0<navigator.maxTouchPoints)}function o(){return"undefined"!=typeof window&&!!window.PointerEvent}(e=(e=e.svgUtil||(e.svgUtil={})).events||(e.events={})).isTouchEnabled=n,e.hasPointerEvents=o,e.down=function(e,t){o()?e.addEventListener("pointerdown",t):n()?(e.addEventListener("mousedown",t),e.addEventListener("touchstart",t)):e.addEventListener("mousedown",t)},e.up=function(e,t){o()?e.addEventListener("pointerup",t):(n(),e.addEventListener("mouseup",t))},e.enter=function(e,t){o()?e.addEventListener("pointerover",e=>{t(!!(1&e.buttons))}):n()?e.addEventListener("touchstart",e=>{t(!0)}):e.addEventListener("mouseover",e=>{t(!!(1&e.buttons))})},e.leave=function(e,t){o()?e.addEventListener("pointerleave",t):n()?e.addEventListener("touchend",t):e.addEventListener("mouseleave",t)},e.move=function(e,t){o()?e.addEventListener("pointermove",t):n()?e.addEventListener("touchmove",t):e.addEventListener("mousemove",t)},e.click=function(e,t){e.addEventListener("click",t)}}(pxt=pxt||{}),function(e){e=e.svgUtil||(e.svgUtil={});{var t=e.helpers||(e.helpers={});class n extends e.Text{at(e,t){return this.cx=e,this.cy=t,this.rePosition(),this}text(e,t=12){return super.text(e),this.fontSizePixels=t,this.setAttribute("font-size",t+"px"),this.rePosition(),this}rePosition(){null!=this.cx&&null!=this.cy&&null!=this.fontSizePixels&&(this.setAttribute("x",this.cx),this.setAttribute("y",this.cy),this.setAttribute("text-anchor","middle"),this.setAttribute("alignment-baseline","middle"))}}t.CenteredText=n}}(pxt=pxt||{}),function(d){d.IMAGE_MIME_TYPE="image/x-mkcd-f4",d.TILEMAP_MIME_TYPE="application/mkcd-tilemap",d.ANIMATION_MIME_TYPE="application/mkcd-animation";class t{constructor(){this.assets=[],this.takenNames={},this.listeners=[]}add(e){return this.takenNames[e.id]?this.update(e.id,e):(e=i(e),this.takenNames[e.id]=!0,this.takenNames[p(e)]=!0,e.meta.displayName&&e.meta.displayName!==e.id&&(this.takenNames[e.meta.displayName]&&(e.meta.displayName=this.generateNewDisplayName(e.meta.displayName)),this.takenNames[e.meta.displayName]=!0),this.assets.push(e),i(e))}getSnapshot(t){return(t?this.assets.filter(e=>t(e)):this.assets).map(i)}update(e,t){let n;return this.takenNames[e]?l(this.lookupByID(e),t)?n=t:(this.removeByID(e),n=this.add(t),this.notifyListener(t.internalID)):n=this.add(t),n}removeByID(t){var e=this.lookupByID(t);this.assets=this.assets.filter(e=>e.id!==t),delete this.takenNames[t],e&&delete this.takenNames[p(e)],null!=e&&e.meta.displayName&&delete this.takenNames[null==e?void 0:e.meta.displayName]}getByID(e){e=this.lookupByID(e);return e&&i(e)}getByDisplayName(e){if(this.takenNames[e])for(const t of this.assets)if(t.meta.displayName===e||p(t)===e)return i(t)}isIDTaken(e){return!!this.takenNames[e]}clone(){var e=new t;return e.assets=this.getSnapshot(),e.takenNames=Object.assign({},this.takenNames),e}serializeToJRes(e={}){for(const i of this.assets){t=void 0;n=void 0;o=void 0;r=void 0;var t=i;var n=e;var o=t.id.substr(t.id.lastIndexOf(".")+1);switch(t.type){case"image":n[o]=t.jresData,t.meta.displayName&&(n[o]={data:t.jresData,mimeType:d.IMAGE_MIME_TYPE,displayName:t.meta.displayName});break;case"tile":n[o]={data:t.jresData,mimeType:d.IMAGE_MIME_TYPE,tilemapTile:!0,displayName:t.meta.displayName};break;case"tilemap":var r=function(e,t,n){var o=e.tilemap.data(),r=new Uint8ClampedArray(5+o.data.length+e.layers.data.length);return r[0]=e.tileset.tileWidth,r[1]=255&o.width,r[2]=o.width>>8&255,r[3]=255&o.height,r[4]=o.height>>8&255,r.set(o.data,5),r.set(e.layers.data,5+o.data.length),{id:t,mimeType:d.TILEMAP_MIME_TYPE,data:btoa(d.sprite.uint8ArrayToHex(r)),tileset:e.tileset.tiles.map(e=>e.id),displayName:n}}(t.data,t.id,t.meta.displayName);n[r.id]=r;break;case"animation":n[o]=function(e){return{namespace:e.id.substr(0,e.id.lastIndexOf(".")),id:e.id.substr(e.id.lastIndexOf(".")+1),mimeType:d.ANIMATION_MIME_TYPE,data:d.sprite.encodeAnimationString(e.frames,e.interval),displayName:e.meta.displayName}}(t)}}return e}addListener(e,t){this.listeners.push({internalID:e,callback:t})}removeListener(t){this.listeners=this.listeners.filter(e=>e.callback!==t)}diff(e){let t={before:[],after:[]},n={};for(const o of e.assets){n[o.internalID]=!0;const e=this.lookupByInternalID(o.internalID);e&&l(o,e)||(t.before.push(o),t.after.push(e))}for(const e of this.assets.filter(e=>!n[e.internalID]))t.before.push(null),t.after.push(e);return t}applyDiff(e,t=!1){var n=t?e.after:e.before,o=t?e.before:e.after;d.Util.assert(n.length===o.length);for(let e=0;e<n.length;e++)n[e]?(this.removeByInternalID(n[e].internalID),o[e]&&this.assets.push(o[e]),this.notifyListener(n[e].internalID)):(this.assets.push(o[e]),this.notifyListener(o[e].internalID));this.takenNames={};for(const e of this.assets)d.Util.assert(!this.takenNames[e.id]),this.takenNames[e.id]=!0,this.takenNames[p(e)]=!0,e.meta.displayName&&(e.meta.displayName!==e.id&&d.Util.assert(!this.takenNames[e.meta.displayName]),this.takenNames[e.meta.displayName]=!0)}lookupByID(e){for(const t of this.assets)if(t.id===e)return t;return null}lookupByInternalID(e){for(const t of this.assets)if(t.internalID===e)return t;return null}removeByInternalID(t){this.assets=this.assets.filter(e=>e.internalID!==t)}notifyListener(e){for(const t of this.listeners)t.internalID===e&&t.callback()}generateNewDisplayName(e){e=e.replace(/\d+$/,"");let t=0;for(;this.takenNames[e+t];)++t;return e+t}}function r(e){var t=[];for(const o of Object.keys(e)){var n=e[o];n.mimeType===d.TILEMAP_MIME_TYPE&&t.push(n)}return t}function s(e,t){return`
    helpers._registerFactory("${e}", function(name: string) {
        switch(helpers.stringTrim(name)) {
`+t.map(e=>e.keys.filter(e=>!!e).map(e=>`            case "${e}":`).join("\n")+`return ${e.expression};`).join("\n")+"\n        }\n        return null;\n    })\n"}function n(e){return d.sprite.Bitmap.fromData(e).copy().data()}function a(e,t){var n=atob(e.data),n=d.U.fromHex(n),o=n[1]|n[2]<<8,r=n[3]|n[4]<<8,e={tileWidth:n[0],tiles:e.tileset.map(e=>t&&t(e)||{id:e})},i=n.slice(5,5+o*r),s=new d.sprite.Tilemap(o,r,0,0,new Uint8ClampedArray(i)),n=n.slice(5+i.length),i=new d.sprite.Bitmap(o,r,0,0,new Uint8ClampedArray(n)).data();return new d.sprite.TilemapData(s,e,i)}function i(e){switch(e.meta=Object.assign({},e.meta),e.type){case"tile":case"image":return Object.assign(Object.assign({},e),{bitmap:n(e.bitmap)});case"animation":return Object.assign(Object.assign({},e),{frames:e.frames.map(e=>n(e))});case"tilemap":return Object.assign(Object.assign({},e),{data:e.data.cloneData()})}}function l(e,t){if(e==t)return!0;if(e.id!==t.id||e.type!==t.type||!o(e.meta.tags,t.meta.tags)||!o(e.meta.blockIDs,t.meta.blockIDs)||e.meta.displayName!==t.meta.displayName)return!1;switch(e.type){case"image":case"tile":return d.sprite.bitmapEquals(e.bitmap,t.bitmap);case"animation":return e.interval===t.interval&&o(e.frames,t.frames,d.sprite.bitmapEquals);case"tilemap":return e.data.equals(t.data)}}function c(e){e=/^\s*(?:(?:assets\s*\.\s*(image|tile|animation|tilemap))|(tilemap))\s*(?:`|\(""")([^`"]+)(?:`|"""\))\s*$/m.exec(e);if(e)return{type:e[1]||e[2],name:e[3].trim()}}function p(e){return u(e.type,e.id)}function u(e,t,n=!1){let o;switch(e){case"image":o=d.sprite.IMAGES_NAMESPACE+".";break;case"tile":o=d.sprite.TILE_NAMESPACE+".";break;case"tilemap":o="";break;case"animation":o=d.sprite.ANIMATION_NAMESPACE+"."}if(o)if(t.startsWith(o)){const d=t.substr(o.length);if(-1===d.indexOf("."))return d}else if(!n)return null;return t}function o(t,n,o=(e,t)=>e===t){if(t!=n){if(!t&&n||!n&&t||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(!o(t[e],n[e]))return!1}return!0}function g(e){var t=atob(e.data),n=new Uint8ClampedArray(d.U.fromHex(t)),t=h(n,0),o=h(n,2),r=h(n,4),i=h(n,6),s=Math.ceil(o*r/2);let a=8;var l=[];for(let e=0;e<i;e++){const d=n.slice(a,a+s);l.push({x0:0,y0:0,width:o,height:r,data:d}),a+=s}let c=e.id;return{type:"animation",internalID:0,id:c=c.startsWith(e.namespace)?c:(c=e.namespace+"."+c).replace(/\.\./g,"."),interval:t,frames:l,meta:{displayName:e.displayName}}}function h(e,t){return e[t]|e[t+1]<<8}d.TilemapProject=class{constructor(){this.needsRebuild=!0,this.nextID=0,this.nextInternalID=0,this.committedState={revision:0,tilemaps:new t,tiles:new t,animations:new t,images:new t},this.state={revision:this.nextID++,tilemaps:new t,tiles:new t,animations:new t,images:new t},this.gallery={revision:0,tilemaps:new t,tiles:new t,animations:new t,images:new t},this.undoStack=[],this.redoStack=[]}getNewInternalId(){return this.nextInternalID++}createNewImage(e=16,t=16){var n=this.generateNewID("image"),e=new d.sprite.Bitmap(e,t).data(),t={internalID:this.getNewInternalId(),id:n,type:"image",bitmap:e,meta:{},jresData:d.sprite.base64EncodeBitmap(e)};return this.state.images.add(t)}createNewAnimation(e=16,t=16){var n=this.generateNewID("animation"),e=new d.sprite.Bitmap(e,t).data(),t={internalID:this.getNewInternalId(),id:n,type:"animation",frames:[e],interval:500,meta:{}};return this.state.animations.add(t)}createNewAnimationFromData(e,t=500,n){var o=this.generateNewID("animation"),o={internalID:this.getNewInternalId(),id:o,type:"animation",frames:e,interval:t,meta:{displayName:n}};return this.state.animations.add(o)}getGalleryTiles(t){return this.extensionTileSets?this.extensionTileSets.map(e=>e.tileSets.find(e=>e.tileWidth===t)).filter(e=>null==e?void 0:e.tiles.length):null}getProjectImages(){return this.state.images.getSnapshot()}getProjectTiles(t,e){var n=this.state.tiles.getSnapshot(e=>e.bitmap.width===t);return 0===n.length?e?(this.createNewTile(new d.sprite.Bitmap(t,t).data()),this.getProjectTiles(t,!1)):null:{tileWidth:t,tiles:n}}createNewTile(e,t,n){this.onChange(),t&&!this.isNameTaken("tile",t)||(t=this.generateNewID("tile"));t={internalID:this.getNewInternalId(),id:t,type:"tile",jresData:d.sprite.base64EncodeBitmap(e),bitmap:e,meta:{displayName:n},isProjectTile:!0};return this.state.tiles.add(t)}createNewProjectImage(e,t){this.onChange();t={internalID:this.getNewInternalId(),id:this.generateNewID("image"),type:"image",jresData:d.sprite.base64EncodeBitmap(e),meta:{displayName:t},bitmap:e};return this.state.images.add(t)}updateTile(t){this.onChange();var e=this.resolveProjectTileByInternalID(t.internalID);if(e){if(this.state.tiles.update(e.id,t),e.id!==t.id||!d.sprite.bitmapEquals(e.bitmap,t.bitmap))for(const d of this.getAssets("tilemap"))d.data.tileset.tiles.some(e=>e.internalID===t.internalID)&&(d.data.tileset.tiles=d.data.tileset.tiles.map(e=>e.internalID===t.internalID?t:e),this.updateTilemap(d.id,d.data));return t}return null}deleteTile(e){this.onChange(),this.state.tiles.removeByID(e)}getProjectTilesetJRes(){var e={};return this.state.tiles.serializeToJRes(e),this.state.tilemaps.serializeToJRes(e),e["*"]={mimeType:"image/x-mkcd-f4",dataEncoding:"base64",namespace:d.sprite.TILE_NAMESPACE},e}getProjectAssetsJRes(){var e={};return this.state.images.serializeToJRes(e),this.state.animations.serializeToJRes(e),e["*"]={mimeType:"image/x-mkcd-f4",dataEncoding:"base64",namespace:d.sprite.IMAGES_NAMESPACE},e}getTilemap(e){return this.state.tilemaps.getByID(e)}updateTilemap(e,t){var n=this.state.tilemaps.getByID(e);return n?(this.onChange(),n=Object.assign(Object.assign({},n),{data:t}),this.state.tilemaps.update(e,n),n):null}createNewTilemap(e,t,n=16,o=16){return this.createNewTilemapFromData(this.blankTilemap(t,n,o),e)}blankTilemap(e,t=16,n=16){var o=new d.sprite.Tilemap(t,n),t=new d.sprite.Bitmap(t,n),n={tileWidth:e,tiles:[this.getTransparency(e)]};return new d.sprite.TilemapData(o,n,t.data())}resolveTile(e){return this.lookupAsset("tile",e)}resolveProjectTileByInternalID(t){return this.state.tiles.getSnapshot(e=>e.internalID===t)[0]}resolveTileByBitmap(e){const t=d.sprite.base64EncodeBitmap(e);return this.state.tiles.getSnapshot(e=>e.jresData===t)[0]}getTransparency(e){var t=d.sprite.TILE_NAMESPACE+".transparency"+e;let n=this.state.tiles.getByID(t);return n||(e=new d.sprite.Bitmap(e,e).data(),n={internalID:this.getNewInternalId(),id:t,type:"tile",bitmap:e,jresData:d.sprite.base64EncodeBitmap(e),meta:{},isProjectTile:!0},this.state.tiles.add(n))}createNewTilemapFromData(e,t){this.onChange();t=this.generateNewIDInternal("tilemap",t||lf("level"));return this.state.tilemaps.add({internalID:this.getNewInternalId(),id:t,type:"tilemap",meta:{displayName:t},data:e}),[t,e]}cloneState(){return{revision:this.state.revision,images:this.state.images.clone(),tilemaps:this.state.tilemaps.clone(),animations:this.state.animations.clone(),tiles:this.state.tiles.clone()}}undo(){var e;this.state.revision!==this.committedState.revision&&this.pushUndo(),this.undoStack.length&&(e=this.undoStack.pop(),this.state.tiles.applyDiff(e.tiles,!0),this.state.images.applyDiff(e.images,!0),this.state.tilemaps.applyDiff(e.tilemaps,!0),this.state.animations.applyDiff(e.animations,!0),this.state.revision=e.beforeRevision,this.redoStack.push(e),this.committedState=this.cloneState(),this.needsRebuild=!0)}redo(){var e;this.redoStack.length&&(e=this.redoStack.pop(),this.state.tiles.applyDiff(e.tiles),this.state.images.applyDiff(e.images),this.state.tilemaps.applyDiff(e.tilemaps),this.state.animations.applyDiff(e.animations),this.state.revision=e.afterRevision,this.undoStack.push(e),this.committedState=this.cloneState(),this.needsRebuild=!0)}pushUndo(){this.undoStack.length&&this.committedState.revision===this.state.revision||(this.redoStack=[],this.undoStack.push({beforeRevision:this.committedState.revision,afterRevision:this.state.revision,tiles:this.state.tiles.diff(this.committedState.tiles),images:this.state.images.diff(this.committedState.images),tilemaps:this.state.tilemaps.diff(this.committedState.tilemaps),animations:this.state.animations.diff(this.committedState.animations)}),this.committedState=this.cloneState(),this.cleanupTemporaryAssets())}revision(){return this.state.revision}encodeTilemap(e,t){var n=e.tilemap.data(),o=new Uint8ClampedArray(5+n.data.length+e.layers.data.length);return o[0]=e.tileset.tileWidth,o[1]=255&n.width,o[2]=n.width>>8&255,o[3]=255&n.height,o[4]=n.height>>8&255,o.set(n.data,5),o.set(e.layers.data,5+n.data.length),{id:t,mimeType:d.TILEMAP_MIME_TYPE,data:btoa(d.sprite.uint8ArrayToHex(o)),tileset:e.tileset.tiles.map(e=>e.id)}}forceUpdate(){this.onChange()}isNameTaken(t,e){var n=e=>{switch(t){case"image":return this.state.images.isIDTaken(e)||this.gallery.images.isIDTaken(e);case"tile":return this.state.tiles.isIDTaken(e)||this.gallery.tiles.isIDTaken(e);case"tilemap":return this.state.tilemaps.isIDTaken(e)||this.gallery.tilemaps.isIDTaken(e);case"animation":return this.state.animations.isIDTaken(e)||this.gallery.animations.isIDTaken(e)}},o=u(t,e),r=o&&o!==e;return n(e)||r&&n(o)}isAssetUsed(n,o,r){var i,s,a;if(0<((null==(s=null==(i=n.meta)?void 0:i.blockIDs)?void 0:s.filter(e=>!r||(null==r?void 0:r.indexOf(e))<0))||[]).length)return!0;if("tile"==n.type)for(const d of this.getAssets("tilemap"))if(!(0<=(null==r?void 0:r.indexOf(d.id)))&&d.data.tileset.tiles.some(e=>e.id===n.id))return!0;if(o){const i=d.Util.escapeForRegex(p(n)),s=d.Util.escapeForRegex(null==(a=n.meta)?void 0:a.displayName)||"";let e;switch(n.type){case"tile":e=`myTiles.${i}|assets.tile\`${i}\``,s&&(e+=`|assets.tile\`${s}\``);break;case"tilemap":e=`tilemap\`${i}\``;break;case"animation":e=`assets.animation\`${i}\``,s&&(e+=`|assets.animation\`${s}\``);break;default:e=`assets.image\`${i}\``,s&&(e+=`|assets.image\`${s}\``)}var l=new RegExp(e,"gm");let t;switch(n.type){case"tile":t=`myTiles.${i}|assets.tile("""${i}""")`,s&&(t+=`|assets.tile("""${s}""")`);break;case"tilemap":t=`assets.tilemap("""${i}""")`;break;case"animation":t=`assets.animation("""${i}""")`,s&&(t+=`|assets.animation("""${s}""")`);break;default:t=`assets.image("""${i}""")`,s&&(t+=`|assets.image("""${s}""")`)}var c,u=new RegExp(t,"gm");for(c of Object.keys(o))if(!(0<=(null==r?void 0:r.indexOf(c)))){const n=o[c];if(c.match(/((?!\.g).{2}|^.{0,1})\.ts$/i)){if(n.content.match(l))return!0}else if(c.endsWith(".py")&&n.content.match(u))return!0}}return!1}lookupAsset(e,t){switch(e){case"image":return this.state.images.getByID(t)||this.gallery.images.getByID(t);case"tile":return this.state.tiles.getByID(t)||this.gallery.tiles.getByID(t);case"tilemap":return this.state.tilemaps.getByID(t)||this.gallery.tilemaps.getByID(t);case"animation":return this.state.animations.getByID(t)||this.gallery.animations.getByID(t)}}lookupAssetByName(e,t){switch(e){case"image":return this.state.images.getByDisplayName(t);case"tile":return this.state.tiles.getByDisplayName(t);case"tilemap":return this.state.tilemaps.getByDisplayName(t);case"animation":return this.state.animations.getByDisplayName(t)}}getAssets(e){switch(e){case"image":return this.state.images.getSnapshot();case"tile":return this.state.tiles.getSnapshot();case"tilemap":return this.state.tilemaps.getSnapshot();case"animation":return this.state.animations.getSnapshot()}}getGalleryAssets(e){switch(e){case"image":return this.gallery.images.getSnapshot();case"tile":return this.gallery.tiles.getSnapshot();case"tilemap":return this.gallery.tilemaps.getSnapshot();case"animation":return this.gallery.animations.getSnapshot()}}lookupBlockAsset(e,t){var n=e=>{return-1!==(null==(e=null==(e=e.meta)?void 0:e.blockIDs)?void 0:e.indexOf(t))};switch(e){case"image":return this.state.images.getSnapshot(n)[0];case"tile":return this.state.tiles.getSnapshot(n)[0];case"tilemap":return this.state.tilemaps.getSnapshot(n)[0];case"animation":return this.state.animations.getSnapshot(n)[0]}}updateAsset(e){switch(this.onChange(),e.type){case"image":return this.state.images.update(e.id,e);case"tile":return this.updateTile(e);case"tilemap":return this.state.tilemaps.update(e.id,e);case"animation":return this.state.animations.update(e.id,e)}}duplicateAsset(e,t){this.onChange();var n=i(e),o=t||(null==(t=n.meta)?void 0:t.displayName);let r;switch(e.type){case"image":r=this.createNewProjectImage(n.bitmap,o);break;case"tile":r=this.createNewTile(n.bitmap,null,o);break;case"tilemap":const[e,t]=this.createNewTilemapFromData(n.data,o);r=this.getTilemap(e);break;case"animation":r=this.createNewAnimationFromData(n.frames,n.interval,o)}return r}removeAsset(e){switch(this.onChange(),e.type){case"image":return this.state.images.removeByID(e.id);case"tile":return this.state.tiles.removeByID(e.id);case"tilemap":return this.state.tilemaps.removeByID(e.id);case"animation":return this.state.animations.removeByID(e.id)}}addChangeListener(e,t){switch(e.type){case"image":this.state.images.addListener(e.internalID,t);break;case"tile":this.state.tiles.addListener(e.internalID,t);break;case"tilemap":this.state.tilemaps.addListener(e.internalID,t);break;case"animation":this.state.animations.addListener(e.internalID,t)}}removeChangeListener(e,t){switch(e){case"image":this.state.images.removeListener(t);break;case"tile":this.state.tiles.removeListener(t);break;case"tilemap":this.state.tilemaps.removeListener(t);break;case"animation":this.state.animations.removeListener(t)}}loadPackage(e){const t=e.sortedDeps();this.extensionTileSets=[];for(const e of t){const t="this"===e.id,r=this.readImages(e.parseJRes(),t);for(const e of r)("tile"===e.type?(t?this.state:this.gallery).tiles:"image"===e.type?(t?this.state:this.gallery).images:(t?this.state:this.gallery).animations).add(e)}for(const t of r(e.parseJRes()))this.state.tilemaps.add({internalID:this.getNewInternalId(),type:"tilemap",id:t.id,meta:{displayName:t.displayName||t.id},data:a(t,e=>this.resolveTile(e))});this.committedState=this.cloneState(),this.undoStack=[],this.redoStack=[]}loadTilemapJRes(e,t=!1){e=d.inflateJRes(e);var n=this.readImages(e,!0).filter(e=>"tile"===e.type);let o={};for(const d of n){if(t){const e=this.resolveTileByBitmap(d.bitmap);if(e){o[d.id]=e.id;continue}}const e=this.createNewTile(d.bitmap,d.id,d.meta.displayName);e.id!==d.id&&(o[d.id]=e.id)}for(const d of r(e))this.state.tilemaps.add({internalID:this.getNewInternalId(),type:"tilemap",id:d.id,meta:{displayName:d.displayName||d.id},data:a(d,e=>(o[e]&&(e=o[e]),this.resolveTile(e)))})}loadAssetsJRes(e){e=d.inflateJRes(e);var t=[];for(const o of Object.keys(e)){var n=e[o];if(n.tilemapTile)this.state.tiles.add(this.generateImage(n,"tile"));else if(n.mimeType===d.IMAGE_MIME_TYPE)this.state.images.add(this.generateImage(n,"image"));else if(n.mimeType===d.ANIMATION_MIME_TYPE){const[d,e]=this.generateAnimation(n);e?t.push(d):this.state.animations.add(d)}}for(const d of t)this.state.animations.add(this.inflateAnimation(d,this.state.images.getSnapshot()))}removeInactiveBlockAssets(o){function e(e){var t=e.getSnapshot(e=>{return!e.meta.displayName&&(null==(e=e.meta.blockIDs)?void 0:e.some(e=>-1===o.indexOf(e)))}),n=[];for(const e of t)1!==e.meta.blockIDs.length&&(e.meta.blockIDs=e.meta.blockIDs.filter(e=>-1!==o.indexOf(e)),0!==e.meta.blockIDs.length)||n.push(e);for(const o of n)e.removeByID(o.id)}e(this.state.images),e(this.state.tiles),e(this.state.tilemaps),e(this.state.animations)}generateImage(e,t){return{internalID:this.getNewInternalId(),type:t,id:e.id,meta:{displayName:e.displayName},jresData:e.data,bitmap:d.sprite.getBitmapFromJResURL(`data:${d.IMAGE_MIME_TYPE};base64,`+e.data).data()}}generateAnimation(t){if("json"!==t.dataEncoding)return[Object.assign(Object.assign({},g(t)),{internalID:this.getNewInternalId()}),!1];{let e;try{e=JSON.parse(t.data)}catch(e){console.warn("could not parse json data of '"+t.id+"'")}return[{internalID:this.getNewInternalId(),type:"animation",meta:{displayName:t.displayName},id:t.id,frames:[],frameIds:e.frames,interval:100,flippedHorizontal:e.flippedHorizontal},!0]}}inflateAnimation(e,n){return e.frames=e.frameIds.map(t=>n.find(e=>e.id===t).bitmap),e.flippedHorizontal&&(e.frames=e.frames.map(e=>{var n=d.sprite.Bitmap.fromData(e),o=new d.sprite.Bitmap(e.width,e.height);for(let t=0;t<o.width;t++)for(let e=0;e<o.height;e++)o.set(t,e,n.get(n.width-t-1,e));return o.data()})),e}generateNewID(e){switch(e){case"animation":return this.generateNewIDInternal("animation",d.sprite.ANIMATION_PREFIX,d.sprite.ANIMATION_NAMESPACE);case"image":return this.generateNewIDInternal("image",d.sprite.IMAGE_PREFIX,d.sprite.IMAGES_NAMESPACE);case"tile":return this.generateNewIDInternal("tile",d.sprite.TILE_PREFIX,d.sprite.TILE_NAMESPACE);case"tilemap":return this.generateNewIDInternal("tilemap",lf("level"))}}generateNewIDInternal(e,t,n){t=t.replace(/\d+$/,"");var o=n?n+"."+t:t;let r=1;for(;this.isNameTaken(e,o+r);)++r;return o+r}onChange(){this.needsRebuild=!0,this.state.revision=this.nextID++}readImages(e,t=!1){var n=[],o=[];for(const i of Object.keys(e)){var r=e[i];if(r.tilemapTile){const d=this.generateImage(r,"tile");d.isProjectTile=t,n.push(d)}else if(r.mimeType===d.IMAGE_MIME_TYPE)n.push(this.generateImage(r,"image"));else if(r.mimeType===d.ANIMATION_MIME_TYPE){const[d,e]=this.generateAnimation(r);(e?o:n).push(d)}}for(const d of o)n.push(this.inflateAnimation(d,n));return n}cleanupTemporaryAssets(){for(const e of this.state.images.getSnapshot(e=>{return!(e.meta.displayName||null!=(e=e.meta.blockIDs)&&e.length)}))this.state.images.removeByID(e.id)}},d.emitTilemapsFromJRes=function(e){const t=Object.keys(e);let n="";var o=[],r=[];for(const s of t)if("*"!==s){const t=e[s];if(t.tilemapTile&&(n=(n+="    //% fixedInstance jres blockIdentity=images._tile\n")+`    export const ${s} = image.ofBuffer(hex\`\`);
`,r.push({keys:[t.displayName,u("tile",s,!0)],expression:s})),t.mimeType===d.TILEMAP_MIME_TYPE){const e=a(t);o.push({keys:[t.displayName,u("tilemap",t.id)],expression:d.sprite.encodeTilemap(e,"typescript")})}}o.length&&(n+=s("tilemap",o)),r.length&&(n+=s("tile",r));var i=lf("Auto-generated code. Do not edit.");return`// ${i}
namespace ${d.sprite.TILE_NAMESPACE} {
${n}
}
// ${i}
`},d.emitProjectImages=function(e){const n=Object.keys(e);var t="",o=[],r=[];for(const s of n)if("*"!==s){const n=e[s];if("string"==typeof n||n.mimeType===d.IMAGE_MIME_TYPE){let e,t=[u("image",s,!0)];"string"==typeof n?e=d.sprite.bitmapToImageLiteral(d.sprite.getBitmapFromJResURL(n),"typescript"):(e=d.sprite.bitmapToImageLiteral(d.sprite.getBitmapFromJResURL(n.data),"typescript"),t.push(n.displayName)),o.push({keys:t,expression:e})}else if(n.mimeType===d.ANIMATION_MIME_TYPE){const e=g(n);r.push({keys:[n.displayName,u("animation",s,!0)],expression:`[${e.frames.map(e=>d.sprite.bitmapToImageLiteral(d.sprite.Bitmap.fromData(e),"typescript")).join(", ")}]`})}}var i=lf("Auto-generated code. Do not edit."),t=(t+=s("image",o))+s("animation",r);return`// ${i}
namespace ${d.sprite.IMAGES_NAMESPACE} {
${t}
}
// ${i}
`},d.cloneAsset=i,d.assetEquals=l,d.validateAssetName=function(e){return!!e&&!/[\u0000-\u001f\u0021-\u002c\u002e\u002f\u003a-\u0040\u005b-\u005e\u0060\u007b-\u007f]/.test(e)},d.getTSReferenceForAsset=function(e,t=!1){var n,o=null!=(n=e.meta)&&n.displayName?e.meta.displayName:p(e);if(!o)return"image"===e.type||"tile"===e.type?e.id:void 0;var r=t?'("""':"`",i=t?'""")':"`";switch(e.type){case"tile":return"assets.tile"+r+o+i;case"image":return"assets.image"+r+o+i;case"animation":return"assets.animation"+r+o+i;case"tilemap":return"tilemap"+r+o+i}},d.parseAssetTSReference=c,d.lookupProjectAssetByTSReference=function(e,t){var n=c(e);if(n){const{type:e,name:o}=n;switch(e){case"tile":return t.lookupAssetByName("tile",o);case"image":return t.lookupAssetByName("image",o);case"tilemap":return t.lookupAssetByName("tilemap",o)||t.lookupAsset("tilemap",o);case"animation":return t.lookupAssetByName("animation",o)}}},d.getDefaultAssetDisplayName=function(e){switch(e){case"image":return lf("myImage");case"tile":return lf("myTile");case"tilemap":return lf("level");case"animation":return lf("myAnim");default:return lf("asset")}},d.getShortIDForAsset=p}(pxt=pxt||{}),function(r){{var e=r.toolbox||(r.toolbox={});e.blockColors={loops:"#107c10",logic:"#006970",math:"#712672",variables:"#A80000",functions:"#005a9e",text:"#996600",arrays:"#A94400",advanced:"#3c3c3c",addpackage:"#717171",search:"#000",debug:"#e03030",default:"#dddddd",topblocks:"#aa8f00",recipes:"#717171"},e.blockIcons={loops:"",logic:"",math:"",variables:"",functions:"",text:"",arrays:"",advancedcollapsed:"",advancedexpanded:"",more:"",addpackage:"",search:"",debug:"",default:"",topblocks:"",recipes:""};let o="";function n(e){e=function(e,t){let n=0,o=0,r=0;var i=Math.floor(e/60),e=e/60-i,s=.55*t,a=t*(1-.45*e),l=t*(1-.45*(1-e));switch(i){case 1:n=a,o=t,r=s;break;case 2:n=s,o=t,r=l;break;case 3:n=s,o=a,r=t;break;case 4:n=l,o=s,r=t;break;case 5:n=t,o=s,r=a;break;case 6:case 0:n=t,o=l,r=s}return[Math.floor(n),Math.floor(o),Math.floor(r)]}(e,165.75);return"#"+t(e[0])+t(e[1])+t(e[2])}function t(e){e=e.toString(16);return 1==e.length?"0"+e:e}e.appendToolboxIconCss=function(e,t){var n;-1<o.indexOf(e)||(1===t.length?(n=r.Util.unicodeToChar(t),o+=`
                .blocklyTreeIcon.${e}::before {
                    content: "${n}";
                }
            `):o+=`
                .blocklyTreeIcon.${e} {
                    background-image: url("${r.Util.pathJoin(r.webConfig.commitCdnUrl,encodeURI(t))}")!important;
                    width: 30px;
                    height: 100%;
                    background-size: 20px !important;
                    background-repeat: no-repeat !important;
                    background-position: 50% 50% !important;
                }
            `)},e.getNamespaceColor=function(e){return e=e.toLowerCase(),r.appTarget.appTheme.blockColors&&r.appTarget.appTheme.blockColors[e]?r.appTarget.appTheme.blockColors[e]:r.toolbox.blockColors[e]||""},e.getNamespaceIcon=function(e){return e=e.toLowerCase(),r.appTarget.appTheme.blockIcons&&r.appTarget.appTheme.blockIcons[e]?r.appTarget.appTheme.blockIcons[e]:r.toolbox.blockIcons[e]||""},e.advancedTitle=function(){return r.Util.lf("{id:category}Advanced")},e.addPackageTitle=function(){return r.Util.lf("{id:category}Extensions")},e.recipesTitle=function(){return r.Util.lf("{id:category}Tutorials")},e.convertColor=function(e){e=(t=e)?"0x"==t.substring(0,2)?"#"+t.substring(2):t:"#000000";var t=parseInt(e);return isNaN(t)?e:n(t)},e.hueToRgb=n,e.fadeColor=function(t,n,o){(t=t.replace(/[^0-9a-f]/gi,"")).length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);let r="#";for(let e=0;e<3;e++){var i=parseInt(t.substr(2*e,2),16),i=(i=Math.round(Math.min(Math.max(0,o?i+i*n:i-i*n),255))).toString(16);r+=("00"+i).substr(i.length)}return r}}}(pxt=pxt||{}),function(v){{var e=v.tutorial||(v.tutorial={});const C=/^##[^#](.*)$([\s\S]*?)(?=^##[^#]|$(?![\r\n]))/gim,x=/^###[^#](.*)$([\s\S]*?)(?=^###[^#]|$(?![\r\n]))/gim;function T(e,t,s){let n=t||C,a=[];if(e.replace(n,function(e,t,n){var{header:o,hint:r,requiredBlocks:i}=function(t,e,n){let o,r,i=t=E(t);if(e){const e=/#+ ~ tutorialhint([\s\S]*)/i;i=t.replace(e,function(e,t){return o=t,""})}else{const e=/(^[\s\S]*?\S)\s*((```|\[?\!\[[\s\S]+?\]\(\S+?\)\]?)[\s\S]*)/im;t=t.match(e);if(t&&2<t.length&&(i=t[1].trim(),o=t[2].trim(),n)){let e=t[2].trim();e=e.replace(/``` *(requiredTutorialBlock)\s*\n([\s\S]*?)\n```/gim,function(e,t,n){return r=`{
${n}
}`,""}),o=e}}return{header:i,hint:o,requiredBlocks:r}}(n=n.trim(),s&&s.explicitHints,s.tutorialCodeValidation),n={title:t.match(/^\{.*\}$/)?void 0:t.replace(/@(fullscreen|unplugged|showdialog|showhint|tutorialCompleted|resetDiff)/gi,"").trim(),contentMd:n,headerContentMd:o};return/@(fullscreen|unplugged|showdialog|showhint)/i.test(t)&&(n.showHint=!0),/@(unplugged|showdialog)/i.test(t)&&(n.showDialog=!0),/@tutorialCompleted/.test(t)&&(n.tutorialCompleted=!0),/@resetDiff/.test(t)&&(n.resetDiff=!0),r&&(n.hintContentMd=r),s.tutorialCodeValidation&&i&&(n.requiredBlockMd=i),a.push(n),""}),0!=e.indexOf("# Not found"))return a;v.debug("tutorial not found")}function E(e){return e&&e.replace(/```(filterblocks|package|ghost|config|template|jres|assetjson|customts)\s*\n([\s\S]*?)\n```/gim,"").trim()}function S(e){if(e)return e=JSON.parse(e),{[v.TILEMAP_JRES]:e[v.TILEMAP_JRES],[v.TILEMAP_CODE]:e[v.TILEMAP_CODE],[v.IMAGES_JRES]:e[v.IMAGES_JRES],[v.IMAGES_CODE]:e[v.IMAGES_CODE]}}e.parseTutorial=function(n){const{metadata:t,body:o}=function(){const o={},e=n.replace(/### @(\S+) ([ \S]+)/gi,function(e,t,n){try{o[t]=JSON.parse(n)}catch(e){o[t]=n}return""}),t=o;return void 0!==t.explicitHints&&v.appTarget.appTheme&&v.appTarget.appTheme.tutorialExplicitHints&&(t.explicitHints=!0),{metadata:t,body:e}}(),{steps:r,activities:i}=function(t,n){if(n&&n.activities){var a=n;let i=[],s=[];return t.replace(C,function(e,t,n){let o=s.length,r=(s.push({name:t||lf("Activity {0}",o),step:i.length}),T(n,x,a));return r=r.map(e=>(e.activity=o,e)),i=i.concat(r),""}),{steps:i,activities:s}}{let e=T(t,null,n);return{steps:e=!e||e.length<1?T(t,x,n):e,activities:null}}}(o,t),s=(a=o.match(/^#[^#](.*)$/im))&&1<a.length?a[1].trim():null;if(r){var{code:a,templateCode:l,editor:c,language:u,jres:d,assetJson:p,customTs:g,tutorialValidationRulesStr:h}=function(e){let t;let o,r,i,s,a,l,c=[];return e.replace(/((?!.)\s)+/g,"\n").replace(/``` *(sim|block|blocks|filterblocks|spy|ghost|typescript|ts|js|javascript|template|python|jres|assetjson|customts|tutorialValidationRules|requiredTutorialBlock)\s*\n([\s\S]*?)\n```/gim,function(e,t,n){switch(t){case"block":case"blocks":case"requiredTutorialBlock":case"filterblocks":if(u(v.BLOCKS_PROJECT_NAME))break;return;case"spy":case"python":if(!u(v.PYTHON_PROJECT_NAME))return;"python"==t&&(i=t);break;case"typescript":case"ts":case"javascript":case"js":if(u(v.JAVASCRIPT_PROJECT_NAME))break;return;case"template":r=n;break;case"jres":o=n;break;case"assetjson":s=n;break;case"customts":a=n,n="";break;case"tutorialValidationRules":l=n}return c.push("python"==t?`
${n}
`:`{
${n}
}`),""}),t=t||v.BLOCKS_PROJECT_NAME,{code:c,templateCode:r,editor:t,language:i,jres:o,assetJson:s,customTs:a,tutorialValidationRulesStr:l};function u(e){return t&&t!=e?(v.debug("tutorial ambiguous: contains snippets of different types"),0):(t=e,1)}}(o);let e;if(t.tutorialCodeValidation){e=v.Util.jsonTryParse(h);{var _=e;var m=s;var f=Object.keys(_);for(let e=0;e<f.length;e++){var y={ruleName:f[e],enabled:_[f[e]]?"true":"false",tutorial:m};v.tickEvent("tutorial.validation.setValidationRules",y)}}}if(!0===t.diffs||!1!==t.diffs&&!0!==t.noDiffs&&(c==v.BLOCKS_PROJECT_NAME&&v.appTarget.appTheme.tutorialBlocksDiff||c!=v.BLOCKS_PROJECT_NAME&&v.appTarget.appTheme.tutorialTextDiff)){h=r;var k=i;let l;function b(e){const s={typescript:"diff",spy:"diffspy",blocks:"diffblocks",python:"diff"},a=/\s*(\/\/|#)\s*@highlight/gm;return e&&e.replace(/```(typescript|spy|python|blocks|ghost|template)((?:.|[\r\n])+)```/,function(e,t,n){var o=l,r=/^(template|ghost)$/.test(t),i=a.test(n);return n=n.replace(/^\n+/,"").replace(/\n+$/,""),i&&(n=n.replace(a,"")),l=n,!o||i||r?e:`\`\`\`${s[t]}
${o}
----------
${n}
\`\`\``})}h.forEach((e,t)=>{if((e.resetDiff||k&&k.find(e=>e.step==t))&&(l=void 0),e.hintContentMd){const k=b(e.hintContentMd);if(k&&k!=e.hintContentMd)return void(e.hintContentMd=k)}if(e.headerContentMd){const k=b(e.headerContentMd);k&&k!=e.headerContentMd&&(e.headerContentMd=k)}})}h=S(p);return r.forEach(e=>{e.contentMd=E(e.contentMd),e.headerContentMd=E(e.headerContentMd),e.hintContentMd=E(e.hintContentMd),e.requiredBlockMd=E(e.requiredBlockMd)}),{editor:c,title:s,steps:r,activities:i,code:a,templateCode:l,metadata:t,language:u,jres:d,assetFiles:h,customTs:g,tutorialValidationRules:e}}},e.getMetadataRegex=function(){return/``` *(sim|block|blocks|filterblocks|spy|ghost|typescript|ts|js|javascript|template|python|jres|assetjson|customts|tutorialValidationRules|requiredTutorialBlock)\s*\n([\s\S]*?)\n```/gim},e.highlight=function(n){let o=n.textContent;if(o=(o=o.replace(/img\s*\(\s*"{3}[\s\da-f.#tngrpoyw]*"{3}\s*\)/g,'img(""" """)')).replace(/img\s*`[\s\da-f.#tngrpoyw]*`\s*/g,"img` `"),/@highlight/.test(o)){n.textContent="";var r=o.split("\n");for(let t=0;t<r.length;++t){0<t&&t<r.length&&n.appendChild(document.createTextNode("\n"));let e=r[t];if(/@highlight/.test(e)){if(void 0!==(e=r[++t])){const o=document.createElement("span");o.className="highlight-line",o.textContent=e,n.appendChild(o)}}else n.appendChild(document.createTextNode(e))}}else n.textContent=o},e.getTutorialOptions=function(e,t,n,o,r){var i=v.tutorial.parseTutorial(e);if(i)return{options:{tutorial:t,tutorialName:i.title||n,tutorialReportId:o,tutorialStep:0,tutorialReady:!0,tutorialHintCounter:0,tutorialStepInfo:i.steps,tutorialActivityInfo:i.activities,tutorialMd:e,tutorialCode:i.code,tutorialRecipe:!!r,templateCode:i.templateCode,autoexpandStep:!(null!=(t=i.metadata)&&t.autoexpandOff),metadata:i.metadata,language:i.language,jres:i.jres,assetFiles:i.assetFiles,customTs:i.customTs,tutorialValidationRules:i.tutorialValidationRules},editor:i.editor};throw new Error(lf("Invalid tutorial format"))},e.parseCachedTutorialInfo=function(e,o){let r=v.Util.jsonTryParse(e);return r?v.BrowserUtils.tutorialInfoDbAsync().then(e=>{if(o&&r[o]){var t=r[o];t.usedBlocks&&t.hash&&e.setWithHashAsync(o,t.snippetBlocks,t.hash)}else for(var n of Object.keys(r)){const o=r[n];o.usedBlocks&&o.hash&&e.setWithHashAsync(n,o.snippetBlocks,o.hash)}}).catch(e=>{}):Promise.resolve()},e.resolveLocalizedMarkdown=function(e,t,n){var n=(n||e.fileName||"README")+".md",[e,o,r]=v.Util.normalizeLanguageCode(v.Util.userLanguage()),r=e&&o&&r?t[`_locales/${e}/`+n]||t[`_locales/${r}/`+n]||t[`_locales/${o}/`+n]:t[`_locales/${e}/`+n];return r||t[n]},e.parseAssetJson=S}}(pxt=pxt||{}),function(u){(u.tutorial||(u.tutorial={})).validate=async function(n,e,o){var t,r=function(t){var n=[];if(null!=t){var o=Object.keys(t);for(let e=0;e<o.length;e++){var r=o[e],r={ruleName:r,ruleTurnOn:t[r]};n.push(r)}}return n}(n.tutorialValidationRules);if(0<r.length&&0<e.length){const o=function(t){var n={};for(let e=0;e<t.length;e++)n[t[e]]||(n[t[e]]=0),n[t[e]]=n[t[e]]+1;return n}(e.map(e=>e.type)),{tutorialStepInfo:s,tutorialStep:a}=n,l=(s[a],t=n,await u.BrowserUtils.tutorialInfoDbAsync().then(e=>e.getAsync(t.tutorial,t.tutorialCode).then(e=>null!=e&&e.snippets?Promise.resolve(e.snippets):Promise.resolve(void 0)))),c=function(e,t){var n=e["tutorialStep"],e=e.tutorialStepInfo[n].hintContentMd;let o="";null!=e&&e.replace(/((?!.)\s)+/g,"\n").replace(/``` *(block|blocks)\s*\n([\s\S]*?)\n```/gim,function(e,t,n){return o=`{
${n}
}`,""});n=u.BrowserUtils.getTutorialCodeHash([o]);let r={};return r=null!=t?t[n]:r}(n,l);for(let t=0;t<r.length;t++){let e=r[t];var i=r[t].ruleName;if(r[t].ruleTurnOn)switch(i){case"exact":e=function(t,n,e){e.isStrict=!0;var o=Object.keys(t);let r=[],i=[],s=(null!=n&&(r=Object.keys(n)),o.length>=r.length);o=lf("These are the blocks you seem to be missing:");for(let e=0;e<r.length;e++){var a=r[e];(!t[a]||t[a]<n[a])&&(i.push(a),s=!1)}return e.ruleMessage=o,e.ruleStatus=s,e.blockIds=i,e}(o,c,e);break;case"atleast":e=function(t,e,n){var o=Object.keys(t),r=Object.keys(null!=e?e:{});let i=o.length>=r.length;for(let e=0;e<r.length;e++)if(!t[r[e]]){i=!1;break}return n.ruleStatus=i,n}(o,c,e);break;case"required":e=function(t,e,n){n.isStrict=!0,Object.keys(t);let o=[],r=[],i=(null!=e&&(o=Object.keys(e)),!0);e=lf("You are required to have the following block:");for(let e=0;e<o.length;e++){var s=o[e];t[s]||(r.push(s),i=!1)}return n.ruleMessage=e,n.ruleStatus=i,n.blockIds=r,n}(o,function(e,t){var n=e["tutorialStep"],e=e.tutorialStepInfo[n].requiredBlockMd,n=u.BrowserUtils.getTutorialCodeHash([e]);let o={};return o=null!=t?t[n]:o}(n,l),e)}}}return r}}(pxt=pxt||{}),function(o){{var r=o.pxtc||(o.pxtc={}),e;let n;r.flattenDiagnosticMessageText=function(o,r){if("string"==typeof o)return o;{let e=o,t="",n=0;for(;e;){if(n){t+=r;for(let e=0;e<n;e++)t+="  "}t+=e.messageText,n++,e=e.next}return t}},(e=n=r.ScriptTarget||(r.ScriptTarget={}))[e.ES3=0]="ES3",e[e.ES5=1]="ES5",e[e.ES6=2]="ES6",e[e.ES2015=2]="ES2015",e[e.Latest=2]="Latest",r.isIdentifierStart=function(e,t){return 65<=e&&e<=90||97<=e&&e<=122||36===e||95===e||127<e&&i(e,t)},r.isIdentifierPart=function(e,t){return 65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||36===e||95===e||127<e&&(e=e,t>=n.ES5?s(e,l):s(e,u))},r.reservedWords=["abstract","any","as","break","case","catch","class","continue","const","constructor","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","from","function","get","if","implements","import","in","instanceof","interface","is","let","module","namespace","new","null","package","private","protected","public","require","global","return","set","static","super","switch","symbol","this","throw","true","try","type","typeof","var","void","while","with","yield","async","await","of","Math"],r.keywordTypes=["boolean","number","string"],r.escapeIdentifier=function(e){if(!e)return"_";let t=e.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_$]/g,e=>o.pxtc.isIdentifierPart(e.charCodeAt(0),o.pxtc.ScriptTarget.ES5)?e:"");return t=t&&o.pxtc.isIdentifierStart(t.charCodeAt(0),o.pxtc.ScriptTarget.ES5)&&-1===r.reservedWords.indexOf(t)?t:"_"+t};const a=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2208,2208,2210,2220,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7413,7414,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],l=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1319,1329,1366,1369,1369,1377,1415,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1520,1522,1552,1562,1568,1641,1646,1747,1749,1756,1759,1768,1770,1788,1791,1791,1808,1866,1869,1969,1984,2037,2042,2042,2048,2093,2112,2139,2208,2208,2210,2220,2276,2302,2304,2403,2406,2415,2417,2423,2425,2431,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2902,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3140,3142,3144,3146,3149,3157,3158,3160,3161,3168,3171,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3299,3302,3311,3313,3314,3330,3331,3333,3340,3342,3344,3346,3386,3389,3396,3398,3400,3402,3406,3415,3415,3424,3427,3430,3439,3450,3455,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5908,5920,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6157,6160,6169,6176,6263,6272,6314,6320,6389,6400,6428,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6912,6987,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7376,7378,7380,7414,7424,7654,7676,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8204,8205,8255,8256,8276,8276,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42647,42655,42737,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43047,43072,43123,43136,43204,43216,43225,43232,43255,43259,43259,43264,43309,43312,43347,43360,43388,43392,43456,43471,43481,43520,43574,43584,43597,43600,43609,43616,43638,43642,43643,43648,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65062,65075,65076,65101,65103,65136,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],c=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1569,1594,1600,1610,1649,1747,1749,1749,1765,1766,1786,1788,1808,1808,1810,1836,1920,1957,2309,2361,2365,2365,2384,2384,2392,2401,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2784,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2877,2877,2908,2909,2911,2913,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3294,3294,3296,3297,3333,3340,3342,3344,3346,3368,3370,3385,3424,3425,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3946,3976,3979,4096,4129,4131,4135,4137,4138,4176,4181,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6067,6176,6263,6272,6312,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8319,8319,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12329,12337,12341,12344,12346,12353,12436,12445,12446,12449,12538,12540,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65138,65140,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],u=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,768,846,864,866,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1155,1158,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1425,1441,1443,1465,1467,1469,1471,1471,1473,1474,1476,1476,1488,1514,1520,1522,1569,1594,1600,1621,1632,1641,1648,1747,1749,1756,1759,1768,1770,1773,1776,1788,1808,1836,1840,1866,1920,1968,2305,2307,2309,2361,2364,2381,2384,2388,2392,2403,2406,2415,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2492,2494,2500,2503,2504,2507,2509,2519,2519,2524,2525,2527,2531,2534,2545,2562,2562,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2649,2652,2654,2654,2662,2676,2689,2691,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2784,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2876,2883,2887,2888,2891,2893,2902,2903,2908,2909,2911,2913,2918,2927,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3006,3010,3014,3016,3018,3021,3031,3031,3047,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3134,3140,3142,3144,3146,3149,3157,3158,3168,3169,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3262,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3297,3302,3311,3330,3331,3333,3340,3342,3344,3346,3368,3370,3385,3390,3395,3398,3400,3402,3405,3415,3415,3424,3425,3430,3439,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3805,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3946,3953,3972,3974,3979,3984,3991,3993,4028,4038,4038,4096,4129,4131,4135,4137,4138,4140,4146,4150,4153,4160,4169,4176,4185,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,4969,4977,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6099,6112,6121,6160,6169,6176,6263,6272,6313,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8255,8256,8319,8319,8400,8412,8417,8417,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12335,12337,12341,12344,12346,12353,12436,12441,12442,12445,12446,12449,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65056,65059,65075,65076,65101,65103,65136,65138,65140,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65381,65470,65474,65479,65482,65487,65490,65495,65498,65500];function i(e,t){return t>=n.ES5?s(e,a):s(e,c)}function s(o,r){if(!(o<r[0])){let e,t=0,n=r.length;for(;t+1<n;){if(e=t+(n-t)/2,r[e-=e%2]<=o&&o<=r[1+e])return!0;o<r[e]?n=e:t=2+e}}return!1}r.isUnicodeIdentifierStart=i,(e=r.DiagnosticCategory||(r.DiagnosticCategory={}))[e.Warning=0]="Warning",e[e.Error=1]="Error",e[e.Message=2]="Message"}}(ts=ts||{}),function(i){{var o=i.webBluetooth||(i.webBluetooth={}),e;function t(){return!!navigator&&!!navigator.bluetooth&&"TextDecoder"in window&&i.appTarget.appTheme.bluetoothUartConsole&&i.appTarget.appTheme.bluetoothUartFilters&&0<i.appTarget.appTheme.bluetoothUartFilters.length}function n(){return!!navigator&&!!navigator.bluetooth&&!!i.appTarget.appTheme.bluetoothPartialFlashing}o.isAvailable=function(){return t()||n()},o.hasConsole=t,o.hasPartialFlash=n,o.isValidUUID=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(e)};class a{constructor(e,t){this.connectionTimeout=2e4,this.connectPromise=void 0,this.id=e,this.aliveToken=t}debug(e){i.debug(this.id+": "+e)}alivePromise(e){return new Promise((t,n)=>{this.aliveToken.isCancelled()&&n(new Error),e.then(e=>t(e),e=>n(e))})}cancelConnect(){this.connectPromise=void 0}createConnectPromise(){return Promise.resolve()}connectAsync(){return this.connectPromise||(this.connectPromise=this.alivePromise(this.createConnectPromise())),i.Util.promiseTimeout(this.connectionTimeout,this.connectPromise,"connection timeout").then(()=>this.aliveToken.throwIfCancelled()).catch(e=>{throw this.connectPromise=void 0,e})}disconnect(){this.cancelConnect()}kill(){this.disconnect(),this.aliveToken.cancel()}}class l extends(o.BLERemote=a){constructor(e,t,n){super(e,t.aliveToken),this.device=t,this.autoReconnect=n,this.autoReconnectDelay=1e3,this.disconnectOnAutoReconnect=!1,this.reconnectPromise=void 0,this.failedConnectionServicesVersion=-1,this.handleDisconnected=this.handleDisconnected.bind(this),this.device.device.addEventListener("gattserverdisconnected",this.handleDisconnected)}handleDisconnected(e){this.aliveToken.isCancelled()||(this.disconnect(),this.autoReconnect&&!this.reconnectPromise&&(this.reconnectPromise=i.U.delay(this.autoReconnectDelay).then(()=>this.exponentialBackoffConnectAsync(8,500)).finally(()=>this.reconnectPromise=void 0)))}exponentialBackoffConnectAsync(t,n){return this.debug("retry connect"),this.aliveToken.throwIfCancelled(),this.connectAsync().then(()=>{this.aliveToken.throwIfCancelled(),this.debug("reconnect success"),this.reconnectPromise=void 0}).catch(e=>(this.debug("reconnect error "+e.message),this.aliveToken.throwIfCancelled(),this.device.isPaired?this.autoReconnect?0==t?(this.debug("give up, max tries"),void(this.reconnectPromise=void 0)):this.failedConnectionServicesVersion==this.device.servicesVersion?(this.debug("services haven't changed, giving up"),void(this.reconnectPromise=void 0)):(this.debug(`retry connect ${n}ms... (${t} tries left)`),this.device.connected&&(this.failedConnectionServicesVersion=this.device.servicesVersion),this.disconnectOnAutoReconnect&&this.device.disconnect(),i.U.delay(n).then(()=>this.exponentialBackoffConnectAsync(--t,1.8*n))):(this.debug("autoreconnect disabled"),void(this.reconnectPromise=void 0)):(this.debug("give up, device unpaired"),void(this.reconnectPromise=void 0))))}}class c extends(o.BLEService=l){constructor(e,t,n,o){super(e,t,!0),this.device=t,this.serviceUUID=n,this.txCharacteristicUUID=o,this.handleValueChanged=this.handleValueChanged.bind(this)}createConnectPromise(){return this.debug("connecting"),this.device.connectAsync().then(()=>this.alivePromise(this.device.gatt.getPrimaryService(this.serviceUUID))).then(e=>(this.debug("service connected"),this.service=e,this.alivePromise(this.service.getCharacteristic(this.txCharacteristicUUID)))).then(e=>(this.debug("tx characteristic connected"),this.txCharacteristic=e,this.txCharacteristic.addEventListener("characteristicvaluechanged",this.handleValueChanged),this.txCharacteristic.startNotifications())).then(()=>{i.tickEvent("webble.connected",{id:this.id})})}handlePacket(e){}handleValueChanged(e){e=e.target.value;this.handlePacket(e)}disconnect(){if(super.disconnect(),this.txCharacteristic&&this.device&&this.device.connected)try{this.txCharacteristic.stopNotifications(),this.txCharacteristic.removeEventListener("characteristicvaluechanged",this.handleValueChanged)}catch(e){i.log(this.id+": error "+e.message)}this.service=void 0,this.txCharacteristic=void 0}}class u extends(o.BLETXService=c){constructor(e){super("hf2",e,u.SERVICE_UUID,u.CHARACTERISTIC_TX_UUID),this.device=e}handlePacket(n){var e=n.getUint8(0);switch(192&e){case u.BLEHF2_FLAG_SERIAL_OUT:case u.BLEHF2_FLAG_SERIAL_ERR:var o=Math.min(n.byteLength-1,-193&e);let t="";for(let e=0;e<o;++e)t+=String.fromCharCode(n.getUint8(e+1));t&&window.postMessage({type:"serial",id:this.device.name||"hf2",data:t},"*")}}}u.SERVICE_UUID="b112f5e6-2679-30da-a26e-0273b6043849",u.CHARACTERISTIC_TX_UUID="b112f5e6-2679-30da-a26e-0273b604384a",u.BLEHF2_FLAG_SERIAL_OUT=128,u.BLEHF2_FLAG_SERIAL_ERR=192,o.HF2Service=u;class d extends c{constructor(e){super("uart",e,d.SERVICE_UUID,d.CHARACTERISTIC_TX_UUID),this.device=e}handlePacket(e){e=(new window.TextDecoder).decode(e);e&&window.postMessage({type:"serial",id:this.device.name||"uart",data:e},"*")}}let r;d.SERVICE_UUID="6e400001-b5a3-f393-e0a9-e50e24dcca9e",d.CHARACTERISTIC_TX_UUID="6e400002-b5a3-f393-e0a9-e50e24dcca9e",o.UARTService=d,(e=r=r||{})[e.Idle=1]="Idle",e[e.StatusRequested=2]="StatusRequested",e[e.PairingModeRequested=4]="PairingModeRequested",e[e.RegionDALRequested=8]="RegionDALRequested",e[e.RegionMakeCodeRequested=16]="RegionMakeCodeRequested",e[e.Flash=32]="Flash",e[e.EndOfTransmision=64]="EndOfTransmision",e[e.USBFlashRequired=128]="USBFlashRequired";class p extends l{constructor(e){super("partial flashing",e,!1),this.device=e,this.state=r.Idle,this.disconnectOnAutoReconnect=!0,this.handleCharacteristic=this.handleCharacteristic.bind(this)}clearFlashData(){this.version=0,this.mode=0,this.regions=[],this.chunkDelay=p.CHUNK_MIN_DELAY,this.hex=void 0,this.bin=void 0,this.magicOffset=void 0,this.dalHash=void 0,this.makeCodeHash=void 0,this.flashReject=void 0,this.flashResolve=void 0,this.flashOffset=void 0}createConnectPromise(){return this.debug("connecting to partial flash service"),this.device.connectAsync().then(()=>this.alivePromise(this.device.gatt.getPrimaryService(p.SERVICE_UUID))).then(e=>(this.debug("connecting to characteristic"),this.alivePromise(e.getCharacteristic(p.CHARACTERISTIC_UUID)))).then(e=>(this.debug("starting notifications"),this.pfCharacteristic=e,this.pfCharacteristic.startNotifications(),this.pfCharacteristic.addEventListener("characteristicvaluechanged",this.handleCharacteristic),this.state==r.PairingModeRequested?(this.debug("checking pairing mode"),this.autoReconnect=!1,this.pfCharacteristic.writeValue(new Uint8Array([p.STATUS]))):Promise.resolve()))}disconnect(){if(super.disconnect(),this.flashPacketToken&&this.flashPacketToken.cancel(),this.pfCharacteristic&&this.device.connected)try{this.pfCharacteristic.stopNotifications(),this.pfCharacteristic.removeEventListener("characteristicvaluechanged",this.handleCharacteristic)}catch(e){i.log("ble: partial flash disconnect error "+e.message)}this.pfCharacteristic=void 0}findMarker(n,o){if(this.bin)for(;n+o.length<this.bin.length;n+=16){let t=!0;for(let e=0;e<o.length;++e)if(o[e]!=this.bin[n+e]){t=!1;break}if(t)return n}return-1}flashAsync(e){return this.hex?(this.debug("flashing already in progress"),Promise.resolve()):(this.device.pauseLog(),this.createFlashPromise(e).finally(()=>this.device.resumeLogOnDisconnection()))}createFlashPromise(e){if(this.hex)return this.debug("flashing already in progress"),Promise.resolve();this.clearFlashData(),this.hex=e;var e=ts.pxtc.UF2.newBlockFile(),t=(ts.pxtc.UF2.writeHex(e,this.hex.split(/\r?\n/)),i.appTarget.compile.flashUsableEnd),e=(this.bin=ts.pxtc.UF2.toBin(i.U.stringToUint8Array(ts.pxtc.UF2.serializeFile(e)),t).buf,this.debug("bin bytes "+this.bin.length),this.magicOffset=this.findMarker(0,p.MAGIC_MARKER),this.debug("magic block "+this.magicOffset.toString(16)),this.magicOffset<0&&(this.debug("magic block not found, not a valid HEX file"),i.U.userError(lf("Invalid file"))),this.debug("bytes to flash "+(this.bin.length-this.magicOffset)),this.magicOffset+p.MAGIC_MARKER.length);return this.dalHash=i.Util.toHex(this.bin.slice(e,e+8)),this.makeCodeHash=i.Util.toHex(this.bin.slice(e+8,e+16)),this.debug("DAL hash "+this.dalHash),this.debug("MakeCode hash "+this.makeCodeHash),this.connectAsync().then(()=>new Promise((e,t)=>(this.flashResolve=e,this.flashReject=t,this.debug("check service version"),this.state=r.StatusRequested,this.pfCharacteristic.writeValue(new Uint8Array([p.STATUS]))))).then(()=>{},e=>{i.log("pf: error "+e.message),this.clearFlashData()})}checkStateTransition(e,t){return!!(this.state&t)||(this.debug(`flash cmd ${e} in state ${this.state.toString(16)} `),this.flashReject(new Error),this.clearFlashData(),!1)}handleCharacteristic(e){this.aliveToken.isCancelled()&&(this.flashReject(new Error),this.clearFlashData());var t=event.target.value,n=new Uint8Array(t.buffer),o=n[0];if(this.state!=r.Idle)switch(o){case p.STATUS:this.checkStateTransition(o,r.StatusRequested|r.PairingModeRequested)&&(this.version=n[1],this.mode=n[2],this.debug(`flash service version ${this.version} mode `+this.mode),this.debug("reading DAL region"),this.state=r.RegionDALRequested,this.pfCharacteristic.writeValue(new Uint8Array([p.REGION_INFO,p.REGION_DAL])).then(()=>{}));break;case p.REGION_INFO:if(this.checkStateTransition(o,r.RegionDALRequested|r.RegionMakeCodeRequested)){const e=this.regions[n[1]]={start:n[2]<<24|n[3]<<16|n[4]<<8|n[5],end:n[6]<<24|n[7]<<16|n[8]<<8|n[9],hash:i.Util.toHex(n.slice(10))};if(this.debug(`read region ${n[1]} start ${e.start.toString(16)} end ${e.end.toString(16)} hash `+e.hash),n[1]==p.REGION_DAL){if(e.hash!=this.dalHash)return i.tickEvent("webble.flash.DALrequired"),this.debug("DAL hash does not match, partial flashing not possible"),this.state=r.USBFlashRequired,this.flashReject(new Error("USB flashing required")),void this.clearFlashData();this.debug("DAL hash match, reading makecode region"),this.state=r.RegionMakeCodeRequested,this.pfCharacteristic.writeValue(new Uint8Array([p.REGION_INFO,p.REGION_MAKECODE])).then(()=>{})}else if(n[1]==p.REGION_MAKECODE)if(e.start!=this.magicOffset&&(this.debug("magic offset and MakeCode region.start not matching"),i.U.userError(lf("Invalid file"))),e.hash==this.makeCodeHash)i.tickEvent("webble.flash.noop"),this.debug("MakeCode hash matches, same code!"),this.debug("restart application mode"),this.pfCharacteristic.writeValue(new Uint8Array([p.RESET,p.MODE_APPLICATION])).then(()=>{this.state=r.Idle,this.flashResolve(),this.clearFlashData()});else{if(this.mode!=p.MODE_PAIRING)return this.debug("application mode, reset into pairing mode"),this.state=r.PairingModeRequested,this.autoReconnect=!0,void this.pfCharacteristic.writeValue(new Uint8Array([p.RESET,p.MODE_PAIRING])).then(()=>{});this.flashOffset=e.start,this.flashPacketNumber=0,this.debug("starting to flash from address "+this.flashOffset.toString(16)),this.flashNextPacket()}}break;case p.FLASH_DATA:if(this.checkStateTransition(o,r.Flash))switch(n[1]){case p.PACKET_OUT_OF_ORDER:this.debug("packet out of order"),this.flashPacketToken.cancel(),this.flashPacketNumber+=4,this.chunkDelay=Math.min(this.chunkDelay+10,p.CHUNK_MAX_DELAY),this.flashNextPacket();break;case p.PACKET_WRITTEN:this.chunkDelay=Math.max(this.chunkDelay-1,p.CHUNK_MIN_DELAY),this.flashOffset+=64,this.flashPacketNumber+=4,this.flashOffset>=this.bin.length?(this.debug("end transmission"),this.state=r.EndOfTransmision,this.pfCharacteristic.writeValue(new Uint8Array([p.END_OF_TRANSMISSION])).finally(()=>{this.flashResolve&&this.flashResolve(),this.clearFlashData()})):this.flashNextPacket()}break;default:this.debug("unknown message "+i.Util.toHex(n)),this.disconnect()}}flashNextPacket(){this.state=r.Flash,this.flashPacketToken=new i.Util.CancellationToken,this.flashPacketToken.startOperation();const t=this.bin.slice(this.flashOffset,this.flashOffset+64);this.debug(`flashing ${this.flashOffset.toString(16)} / ${this.bin.length.toString(16)} ${(this.flashOffset-this.magicOffset)/(this.bin.length-this.magicOffset)*100>>0}%`);let n=new Uint8Array(20);i.U.delay(this.chunkDelay).then(()=>{this.flashPacketToken.throwIfCancelled(),n[0]=p.FLASH_DATA,n[1]=this.flashOffset>>8&255,n[2]=this.flashOffset>>0&255,n[3]=this.flashPacketNumber;for(let e=0;e<16;e++)n[4+e]=t[e];return this.pfCharacteristic.writeValue(n)}).then(()=>i.U.delay(this.chunkDelay)).then(()=>{this.flashPacketToken.throwIfCancelled(),n[0]=p.FLASH_DATA,n[1]=this.flashOffset>>24&255,n[2]=this.flashOffset>>16&255,n[3]=this.flashPacketNumber+1;for(let e=0;e<16;e++)n[4+e]=t[16+e]||0;return this.pfCharacteristic.writeValue(n)}).then(()=>i.U.delay(this.chunkDelay)).then(()=>{this.flashPacketToken.throwIfCancelled(),n[0]=p.FLASH_DATA,n[1]=0,n[2]=0,n[3]=this.flashPacketNumber+2;for(let e=0;e<16;e++)n[4+e]=t[32+e]||0;return this.pfCharacteristic.writeValue(n)}).then(()=>i.U.delay(this.chunkDelay)).then(()=>{this.flashPacketToken.throwIfCancelled(),n[0]=p.FLASH_DATA,n[1]=0,n[2]=0,n[3]=this.flashPacketNumber+3;for(let e=0;e<16;e++)n[4+e]=t[48+e]||0;return this.pfCharacteristic.writeValue(n)}).then(()=>{const e=this.flashOffset,t=()=>i.U.delay(500).then(()=>{if(e!=this.flashOffset||this.flashPacketToken.isCancelled()||this.aliveToken.isCancelled()||this.state!=r.Flash)return Promise.resolve();this.debug("packet transfer deadlock, force restart"),n[0]=p.FLASH_DATA,n[1]=0,n[2]=0,n[3]=-1;for(let e=0;e<16;e++)n[4+e]=0;return this.pfCharacteristic.writeValue(n).then(()=>t())});t().catch(e=>{this.flashReject&&(this.flashReject(new Error("failed packet transfer")),this.clearFlashData())})}).catch(()=>{this.flashPacketToken.resolveCancel()})}}p.SERVICE_UUID="e97dd91d-251d-470a-a062-fa1922dfa9a8",p.CHARACTERISTIC_UUID="e97d3b10-251d-470a-a062-fa1922dfa9a8",p.REGION_INFO=0,p.FLASH_DATA=1,p.PACKET_OUT_OF_ORDER=170,p.PACKET_WRITTEN=255,p.END_OF_TRANSMISSION=2,p.STATUS=238,p.RESET=255,p.MODE_PAIRING=0,p.MODE_APPLICATION=1,p.REGION_SOFTDEVICE=0,p.REGION_DAL=1,p.REGION_MAKECODE=2,p.MAGIC_MARKER=i.Util.fromHex("708E3B92C615A841C49866C975EE5197"),p.CHUNK_MIN_DELAY=0,p.CHUNK_MAX_DELAY=75,o.PartialFlashingService=p;class g extends a{constructor(e){super("ble",new i.Util.CancellationToken),this.device=void 0,this.services=[],this.pendingResumeLogOnDisconnection=!1,this.servicesVersion=0,this.device=e,this.handleDisconnected=this.handleDisconnected.bind(this),this.handleServiceAdded=this.handleServiceAdded.bind(this),this.handleServiceChanged=this.handleServiceChanged.bind(this),this.handleServiceRemoved=this.handleServiceRemoved.bind(this),this.device.addEventListener("gattserverdisconnected",this.handleDisconnected),this.device.addEventListener("serviceadded",this.handleServiceAdded),this.device.addEventListener("servicechanged",this.handleServiceChanged),this.device.addEventListener("serviceremoved",this.handleServiceRemoved),t()&&(this.services.push(this.uartService=new d(this)),this.services.push(this.hf2Service=new u(this))),n()&&this.services.push(this.partialFlashingService=new p(this)),this.aliveToken.startOperation()}startServices(){this.services.filter(e=>e.autoReconnect).forEach(e=>e.connectAsync().catch(()=>{}))}pauseLog(){this.uartService&&(this.uartService.autoReconnect=!1,this.uartService.disconnect()),this.hf2Service&&(this.hf2Service.autoReconnect=!1,this.hf2Service.disconnect())}resumeLogOnDisconnection(){this.pendingResumeLogOnDisconnection=!0}resumeLog(){this.uartService&&(this.uartService.autoReconnect=!0,this.uartService.connectAsync().catch(()=>{})),this.hf2Service&&(this.hf2Service.autoReconnect=!0,this.hf2Service.connectAsync().catch(()=>{}))}get isPaired(){return this===o.bleDevice}get name(){return this.device.name||"?"}get connected(){return this.device&&this.device.gatt&&this.device.gatt.connected}get gatt(){return this.device.gatt}createConnectPromise(){return this.debug("connecting gatt server"),this.alivePromise(this.device.gatt.connect().then(()=>this.debug("gatt server connected")))}handleServiceAdded(e){this.debug("service added"),this.servicesVersion++}handleServiceRemoved(e){this.debug("service removed"),this.servicesVersion++}handleServiceChanged(e){this.debug("service changed"),this.servicesVersion++}handleDisconnected(e){this.debug("disconnected"),this.disconnect(),this.pendingResumeLogOnDisconnection&&(this.pendingResumeLogOnDisconnection=!1,i.U.delay(500).then(()=>this.resumeLog()))}disconnect(){if(super.disconnect(),this.services.forEach(e=>e.disconnect()),this.connected){this.debug("disconnect");try{this.device.gatt&&this.device.gatt.connected&&this.device.gatt.disconnect()}catch(e){this.debug("gatt disconnect error "+e.message)}}}}function s(){if(o.bleDevice)return Promise.resolve();i.log("ble: requesting device");var e=[];return t()&&(e.push(d.SERVICE_UUID),e.push(u.SERVICE_UUID)),n()&&e.push(p.SERVICE_UUID),navigator.bluetooth.requestDevice({filters:i.appTarget.appTheme.bluetoothUartFilters,optionalServices:e}).then(e=>(i.log("ble: received device "+e.name),o.bleDevice=new g(e),o.bleDevice.startServices(),o.bleDevice.connectAsync()))}o.BLEDevice=g,o.bleDevice=void 0,o.isPaired=function(){return!!o.bleDevice},o.pairAsync=function(){return o.bleDevice&&(o.bleDevice.kill(),o.bleDevice=void 0),s().catch(e=>{o.bleDevice&&o.bleDevice.aliveToken&&o.bleDevice.aliveToken.resolveCancel(),i.log("ble: error "+e.message)})},o.flashAsync=function(e,t){i.tickEvent("webble.flash");const n=e.outfiles[ts.pxtc.BINARY_HEX];return s().then(()=>o.bleDevice.partialFlashingService.flashAsync(n)).then(()=>i.tickEvent("webble.flash.success")).catch(e=>{throw i.tickEvent("webble.fail.fail",{message:e.message}),e})}}}(pxt=pxt||{}),function(r){{var i=r.usb||(r.usb={});class l extends Error{constructor(e){super(e),this.message=e}}i.USBError=l,i.filters=[{classCode:255,subclassCode:42}];let e,o,t=!0;i.setFilters=function(e){t=!1,i.filters=e};class c{constructor(){this.ready=!1,this.connecting=!1,this.readLoopStarted=!1,this.onDeviceConnectionChanged=e=>{},this.onConnectionChanged=()=>{},this.onData=e=>{},this.onError=e=>{},this.onEvent=e=>{},this.enabled=!1,this.handleUSBConnected=this.handleUSBConnected.bind(this),this.handleUSBDisconnected=this.handleUSBDisconnected.bind(this)}enable(){this.enabled||(this.enabled=!0,this.log("registering webusb events"),navigator.usb.addEventListener("disconnect",this.handleUSBDisconnected,!1),navigator.usb.addEventListener("connect",this.handleUSBConnected,!1))}disable(){this.enabled&&(this.enabled=!1,this.log("unregistering webusb events"),navigator.usb.removeEventListener("disconnect",this.handleUSBDisconnected),navigator.usb.removeEventListener("connect",this.handleUSBConnected))}disposeAsync(){return this.disable(),Promise.resolve()}handleUSBDisconnected(e){this.log("device disconnected"),e.device==this.dev&&(this.log("clear device"),this.clearDev(),this.onDeviceConnectionChanged)&&this.onDeviceConnectionChanged(!1)}handleUSBConnected(e){e=e.device;this.log("device connected "+e.serialNumber),this.dev||this.connecting||(this.log("attach device"),this.onDeviceConnectionChanged&&this.onDeviceConnectionChanged(!0))}clearDev(){this.dev&&(this.dev=null,this.epIn=null,this.epOut=null,this.onConnectionChanged)&&this.onConnectionChanged()}error(e){throw new l(r.U.lf("USB error on device {0} ({1})",this.dev.productName,e))}log(e){r.debug("webusb: "+e)}disconnectAsync(){return this.ready=!1,this.dev?(this.log("close device"),this.dev.close().catch(e=>{}).then(()=>(this.clearDev(),r.U.delay(500)))):Promise.resolve()}reconnectAsync(){return this.log("reconnect"),this.setConnecting(!0),this.disconnectAsync().then(n).then(e=>this.connectAsync(e)).finally(()=>this.setConnecting(!1))}setConnecting(e){e!=this.connecting&&(this.connecting=e,this.onConnectionChanged)&&this.onConnectionChanged()}isConnecting(){return this.connecting}isConnected(){return!!this.dev&&this.ready}async connectAsync(t){if(this.log(`trying to connect (${t.length} devices)`),0==t.length){const r=new Error("Device not found.");throw r.type="devicenotfound",r}this.setConnecting(!0);try{var e;this.lastKnownDeviceSerialNumber&&((e=t.find(e=>e.serialNumber===this.lastKnownDeviceSerialNumber))?(this.log("last known device spotted"),t.splice(t.indexOf(e),1),t.unshift(e)):(this.log("delay for last known device"),await r.U.delay(2e3)));for(let e=0;e<t.length;++e){var n=t[e];this.dev=n,this.log(`connect device: ${n.manufacturerName} `+n.productName),this.log(`serial number: ${n.serialNumber} ${this.lastKnownDeviceSerialNumber===n.serialNumber?"(last known device)":""} `);try{return void await this.initAsync()}catch(e){this.dev=void 0,this.log("connection failed, "+e.message)}}var o=new Error(r.U.lf("Device in use or not found."));throw o.type="devicelocked",o}finally{this.setConnecting(!1)}}sendPacketAsync(e){return this.dev?(r.Util.assert(e.length<=64),this.epOut?this.dev.transferOut(this.epOut.endpointNumber,e).then(e=>{"ok"!=e.status&&this.error("USB OUT transfer failed")}):this.dev.controlTransferOut({requestType:"class",recipient:"interface",request:9,value:512,index:this.iface.interfaceNumber},e).then(e=>{"ok"!=e.status&&this.error("USB CTRL OUT transfer failed")})):Promise.reject(new Error("Disconnected"))}readLoop(){if(!this.readLoopStarted){this.readLoopStarted=!0,this.log("start read loop");let t=()=>{this.ready?this.recvPacketAsync().then(e=>{e[0]?(this.onData(e),t()):r.U.delay(500).then(t)},e=>{this.dev&&this.onError(e),r.U.delay(300).then(t)}):r.U.delay(300).then(t)};t()}}recvPacketAsync(){var e=e=>{"ok"!=e.status&&this.error("USB IN transfer failed");e=new Uint8Array(e.data.buffer);return 0==e.length?this.recvPacketAsync():e};return this.dev?(this.epIn?this.dev.transferIn(this.epIn.endpointNumber,64):this.dev.controlTransferIn({requestType:"class",recipient:"interface",request:1,value:256,index:this.iface.interfaceNumber},64)).then(e):Promise.reject(new Error("Disconnected"))}initAsync(){if(!this.dev)return Promise.reject(new Error("Disconnected"));let n=this.dev;return this.log("open device"),n.open().then(()=>(this.log("select configuration"),n.selectConfiguration(1))).then(()=>{this.log("got "+n.configurations[0].interfaces.length+" interfaces");var e=n.configurations[0].interfaces.filter(e=>{var t,n=e.alternates[0];for(t of i.filters)if((null==t.classCode||n.interfaceClass===t.classCode)&&!(null!=t.subclassCode&&n.interfaceSubclass!==t.subclassCode||null!=t.protocolCode&&n.interfaceProtocol!==t.protocolCode)){if(0==n.endpoints.length)return!0;if(2==n.endpoints.length&&n.endpoints.every(e=>64==e.packetSize))return!0}return!1}),t=e[e.length-1];return this.log(e.length+" matching interfaces; picking "+(t?"#"+t.interfaceNumber:"n/a")),t||this.error("cannot find supported USB interface"),this.altIface=t.alternates[0],this.iface=t,this.altIface.endpoints.length?(this.log("using dedicated endpoints"),this.epIn=this.altIface.endpoints.filter(e=>"in"==e.direction)[0],this.epOut=this.altIface.endpoints.filter(e=>"out"==e.direction)[0],r.Util.assert(64==this.epIn.packetSize),r.Util.assert(64==this.epOut.packetSize)):this.log("using ctrl pipe"),this.log("claim interface"),n.claimInterface(t.interfaceNumber)}).then(()=>{this.log("device ready"),this.lastKnownDeviceSerialNumber=this.dev.serialNumber,this.ready=!0,t&&this.readLoop(),this.onConnectionChanged&&this.onConnectionChanged()})}}async function n(){r.log("webusb: get devices");try{return await navigator.usb.getDevices()||[]}catch(e){return r.reportException(e),[]}}async function s(){var e;if(void 0===o)if(r.debug("webusb: checking availability"),null!=(t=null==(e=r.appTarget)?void 0:e.compile)&&t.webUSB)if(r.BrowserUtils.isElectron()||r.BrowserUtils.isWinRT())r.debug("webusb: off, electron or winrt"),r.tickEvent("webusb.off",{reason:"electronwinrt"}),o=!1;else{var t=navigator.usb;if(t){var n=/Windows NT (\d+\.\d+)/.exec(navigator.userAgent);if(n&&parseFloat(n[1])<6.3)r.debug("webusb: off, older windows version"),r.tickEvent("webusb.off",{reason:"oldwindows"}),o=!1;else{try{await t.getDevices()}catch(e){return r.debug("webusb: off, security exception"),r.tickEvent("webusb.off",{reason:"security"}),void(o=!1)}o=!0}}else r.debug("webusb: off, not impl"),r.tickEvent("webusb.off",{reason:"notimpl"}),o=!1}else o=!1}function a(){return void 0===o&&(console.error("checkAvailableAsync not called"),s()),!!o}i.pairAsync=function(){return navigator.usb.requestDevice({filters:i.filters}).then(e=>!!e).catch(e=>{if("NotFoundError"!=e.name)throw e})},i.mkWebUSBHIDPacketIOAsync=function(){return r.debug("packetio: mk webusb io"),(e=e||new c).enable(),Promise.resolve(e)},i.isEnabled=!1,i.setEnabled=function(e){a()||(e=!1),i.isEnabled=e},i.checkAvailableAsync=s,i.isAvailable=a}}(pxt=pxt||{}),function(i){{var e=i.worker||(i.worker={}),o=i.Util;let n={};function s(i){let s={},a=0,e=new o.PromiseQueue,t=new Promise((e,t)=>{s.ready=e});return e.enqueue("main",()=>t),{opAsync:function(o,r){return e.enqueue("main",()=>new Promise((t,n)=>{var e=""+a++;s[e]=e=>{e?e.errorMessage?n(new Error(e.errorMessage)):t(e):n(new Error("no response"))},i({id:e,op:o,arg:r})}))},recvHandler:e=>{var t;s.hasOwnProperty(e.id)&&(t=s[e.id],delete s[e.id],t(e.result))}}}function r(e){let t=new Worker(e),n=s(e=>t.postMessage(e));return t.onmessage=e=>{i.perf.measureStart("webworker recvHandler"),n.recvHandler(e.data),i.perf.measureEnd("webworker recvHandler")},n}e.getWorker=function(e){let t=n[e];return t=t||(n[e]=r(e))},e.wrap=s,e.makeWebWorker=r,e.makeWebSocket=function(e,t=null){let n=new WebSocket(e),o=[],r=s(e=>{e=JSON.stringify(e);o?o.push(e):n.send(e)});return n.onmessage=e=>{e=JSON.parse(e.data);t&&null==e.id?t(e):r.recvHandler(e)},n.onopen=e=>{i.debug("socket opened");for(var t of o)n.send(t);o=null},n.onclose=e=>{i.debug("socket closed")},n.onerror=e=>{i.debug("socket errored")},r}}}(pxt=pxt||{}),function(i){function s(){a.apiKey||i.U.userError("YouTube API key missing")}var a;(a=i.youtube||(i.youtube={})).apiKey=void 0,a.playlistItemToCodeCard=function(e){return{name:e.snippet.title.replace(/[^-]*-/,"").trim(),description:e.snippet.description.split(/\n\s+/,1)[0].trim(),youTubeId:e.snippet.resourceId.videoId,youTubePlaylistId:e.snippet.playlistId,imageUrl:(e=e.snippet.thumbnails)&&(null==(e=e.medium||e.high||e.standard||e.default)?void 0:e.url)||""}},a.playlistInfoAsync=function(e){s();e=`https://www.googleapis.com/youtube/v3/playlists?part=snippet&id=${e}&key=`+a.apiKey;return i.Util.httpGetJsonAsync(e).then(e=>e.items[0])},a.listPlaylistVideosAsync=async function(t){s();let n,o=[];do{let e=`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${t}&key=`+a.apiKey;n&&(e+="&pageToken="+n);var r=await i.Util.httpGetJsonAsync(e);o=o.concat(r.items),n=r.nextPageToken}while(n);return i.options.debug&&i.debug(JSON.stringify(o,null,2)),o},a.watchUrl=function(e,t){let n;return e?(n="https://www.youtube.com/watch?v="+e,t&&(n+="&list="+t)):t&&(n="https://www.youtube.com/playlist?list="+t),n}}(pxt=pxt||{}),function(e){var _=e.pxtc||(e.pxtc={});{var m=_.assembler||(_.assembler={});function f(e,...n){return e.replace(/{(\d+)}/g,(e,t)=>n[+t])}m.debug=!1,m.lf=f;let e=h("opcode name doesn't match","<name>");class r{constructor(e,t,n,o,r){this.opcode=n,this.mask=o,this.is32bit=r,this.canBeShared=!1,_.assert((n&o)==n),this.ei=e,this.code=t.replace(/\s+/g," "),this.friendlyFmt=t.replace(/\$\w+/g,e=>this.ei.encoders[e]?this.ei.encoders[e].pretty:e);r=a(t);this.name=r[0],this.args=r.slice(1)}emit(r){var i=r.words;if(i[0]!=this.name)return e;let s=this.opcode,a=1,l=0,c=[],u=null,d=null,p=null;for(let e=0;e<this.args.length;++e){let n=this.args[e],o=i[a++];if("$"==n[0]){let e=this.ei.encoders[n],t=null;if(e.isRegister){if(null==(t=this.ei.registerNo(o)))return h("expecting register name",o);this.ei.isPush(this.opcode)?l++:this.ei.isPop(this.opcode)&&l--}else if(e.isImmediate){if(o=o.replace(/^#/,""),null==(t=r.bin.parseOneInt(o)))return h("expecting number",o);this.ei.isAddSP(this.opcode)?l=-t/this.ei.wordSize():this.ei.isSubSP(this.opcode)&&(l=t/this.ei.wordSize())}else if(e.isRegList){if("{"!=o)return h("expecting {",o);for(t=0;"}"!=i[a];){if(!(o=i[a++]))return h("expecting }",i[a-2]);var g=this.ei.registerNo(o);if(null==g)return h("expecting register name",o);if(t&1<<g)return h("duplicate register name",o);t|=1<<g,this.ei.isPush(this.opcode)?l++:this.ei.isPop(this.opcode)&&l--,","==i[a]&&a++}o=i[a++]}else if(e.isLabel){if(o=o.replace(/^#/,""),/^[+-]?\d+$/.test(o))t=parseInt(o,10),u="rel"+t;else if(/^0x[0-9a-fA-F]+$/.test(o))t=parseInt(o,16),u="abs"+t;else if(u=o,null==(t=this.ei.getAddressFromLabel(r.bin,this,o,e.isWordAligned))){if(r.bin.finalEmit)return h("unknown label",o);t=8}if(this.ei.is32bit(this)){d=t,p=o;continue}}else _.oops();if(null==t)return h("didn't understand it",o);if(c.push(t),null==(t=e.encode(t)))return h("argument out of range or mis-aligned",o);_.assert(0==(s&t)),s|=t}else if(n!=o)return h("expecting "+n,o)}return i[a]?h("trailing tokens",i[a]):this.ei.is32bit(this)?this.ei.emit32(s,d,r.bin.normalizeExternalLabel(p)):{stack:l,opcode:s,numArgs:c,labelName:r.bin.normalizeExternalLabel(u)}}toString(){return this.friendlyFmt}}m.Instruction=r;class l{constructor(e,t){this.bin=e,this.text=t}getOpExt(){return this.instruction?this.instruction.code:""}getOp(){return this.instruction?this.instruction.name:""}update(e){this.bin.peepOps++,(e=e.replace(/^\s*/,""))||this.bin.peepDel++,e&&(e+="      "),this.text=(e="    "+e)+"; WAS: "+this.text.trim(),this.instruction=null,this.numArgs=null,this.words=a(e)||[],0==this.words.length?this.type="empty":"@"==this.words[0][0]&&(this.type="directive")}}m.Line=l;class s{constructor(e){this.baseOffset=0,this.checkStack=!0,this.inlineMode=!1,this.normalizeExternalLabel=e=>e,this.currLineNo=0,this.scope="",this.scopeId=0,this.errors=[],this.labels={},this.equs={},this.stackpointers={},this.stack=0,this.commPtr=0,this.peepOps=0,this.peepDel=0,this.peepCounts={},this.stats="",this.throwOnError=!1,this.disablePeepHole=!1,this.stackAtLabel={},this.currLine=new l(this,"<start>"),this.currLine.lineNo=0,this.ei=e,this.ei.file=this}emitShort(e){_.assert(0<=e&&e<=65535),this.buf.push(e)}emitOpCode(e){this.emitShort(e)}location(){return 2*this.buf.length}pc(){return this.location()+this.baseOffset}parseOneInt(e){if(!e)return null;if(/^\d+$/.test(e))return parseInt(e,10);var t=e.indexOf("-");if(0<t)return this.parseOneInt(e.slice(0,t))-this.parseOneInt(e.slice(t+1));let n=1;if(0<=e.indexOf("*"))for(var o;o=/^([^\*]*)\*(.*)$/.exec(e);){var r=this.parseOneInt(o[1]);if(null==r)return null;n*=r,e=o[2]}if("-"==e[0]?(n*=-1,e=e.slice(1)):"+"==e[0]&&(e=e.slice(1)),/^\d+$/.test(e))return n*parseInt(e,10);if(_.U.endsWith(e,"|1"))return 1|this.parseOneInt(e.slice(0,e.length-2));if(_.U.endsWith(e,"-1"))return this.parseOneInt(e.slice(0,e.length-2))-1;if(_.U.endsWith(e,"+1"))return this.parseOneInt(e.slice(0,e.length-2))+1;var i,t=/(.*)>>(\d+)$/.exec(e);if(t)return i=this.parseOneInt(t[1]),(i&=~(-16777216&this.baseOffset))>>parseInt(t[2]);let s=null;return"0"==e[0]&&("x"==e[1]||"X"==e[1]?(i=/^0x([a-f0-9]+)$/i.exec(e))&&(s=parseInt(i[1],16)):"b"!=e[1]&&"B"!=e[1]||(t=/^0b([01]+)$/i.exec(e))&&(s=parseInt(t[1],2))),0<=e.indexOf("@")&&((i=/^(\w+)@(-?\d+)$/.exec(e))&&(1!=n&&this.directiveError(f("multiplication not supported with saved stacks")),this.stackpointers.hasOwnProperty(i[1])?s=this.ei.wordSize()*this.ei.computeStackOffset(i[1],this.stack-this.stackpointers[i[1]]+parseInt(i[2])):this.directiveError(f("saved stack not found"))),i=/^(.*)@(hi|lo|fn)$/.exec(e))&&this.looksLikeLabel(i[1])&&null!=(s=this.lookupLabel(i[1],!0))&&("fn"==i[2]?s=this.ei.toFnPtr(s,this.baseOffset,i[1]):0<=(s>>=1)&&s<=65535?"hi"==i[2]?s=s>>8&255:"lo"==i[2]?s&=255:_.oops():(this.directiveError(f("@hi/lo out of range")),s=null)),null==s&&this.looksLikeLabel(e)&&null!=(s=this.lookupLabel(e,!0))&&1==this.ei.postProcessRelAddress(this,1)&&(s+=this.baseOffset),null==s||isNaN(s)?null:s*n}looksLikeLabel(e){return!/^(r\d|pc|sp|lr)$/i.test(e)&&/^[\.a-zA-Z_][\.:\w+]*$/.test(e)}scopedName(e){return"."==e[0]&&this.scope?this.scope+"$"+e:e}lookupLabel(e,t=!1){let n=null,o=this.scopedName(e);return this.labels.hasOwnProperty(o)?(n=this.labels[o],n=this.ei.postProcessRelAddress(this,n)):this.lookupExternalLabel&&null!=(n=this.lookupExternalLabel(e))&&(n=this.ei.postProcessAbsAddress(this,n)),null==(n=null==n&&this.equs.hasOwnProperty(o)?this.equs[o]:n)&&t&&(this.finalEmit?this.directiveError(f("unknown label: {0}",e)):n=11111),n}align(e){for(_.assert(2==e||4==e||8==e||16==e);this.location()%e!=0;)this.emitOpCode(0)}pushError(e,t=""){e={scope:this.scope,message:f("  -> Line {2} ('{1}'), error: {0}\n{3}",e,this.currLine.text,this.currLine.lineNo,t),lineNo:this.currLine.lineNo,line:this.currLine.text,coremsg:e,hints:t};if(this.errors.push(e),this.throwOnError)throw new Error(e.message)}directiveError(e){this.pushError(e)}emitString(e,t=!1){function n(e,t){return 255&(e.charCodeAt(t)||0)}let o,r=/^\s*([\w\.]+\s*:\s*)?.\w+\s+(".*")\s*$/.exec(e);if(r&&null!=(o=function(e){e=e.replace(/\\\\/g,"\\B").replace(/\\(['\?])/g,(e,t)=>t).replace(/\\[z0]/g,"\0").replace(/\\x([0-9a-f][0-9a-f])/gi,(e,t)=>"\\u00"+t).replace(/\\B/g,"\\\\");try{return JSON.parse(e)}catch(e){return null}}(r[2])))if(this.align(2),t)for(let e=0;e<o.length;e++)this.emitShort(o.charCodeAt(e));else for(let e=0;e<o.length+1;e+=2)this.emitShort(n(o,e+1)<<8|n(o,e));else this.directiveError(f("expecting string"))}parseNumber(e){e=this.parseOneInt(e.shift());return null==e?null:e}parseNumbers(e){e=e.slice(1);for(var t=[];;){var n=this.parseNumber(e);if(null==n){this.directiveError(f("cannot parse number at '{0}'",e[0]));break}if(t.push(n),","!=e[0]){if(null==e[0])break;this.directiveError(f("expecting number, got '{0}'",e[0]));break}if(e.shift(),null==e[0])break}return t}emitSpace(e){var t=this.parseNumbers(e);if(1==t.length&&t.push(0),2!=t.length)this.directiveError(f("expecting one or two numbers"));else if(t[0]%2!=0)this.directiveError(f("only even space supported"));else{var n=255&t[1];n|=n<<8;for(let e=0;e<t[0];e+=2)this.emitShort(n)}}emitBytes(e){var t=this.parseNumbers(e);t.length%2!=0&&(this.directiveError(".bytes needs an even number of arguments"),t.push(0));for(let e=0;e<t.length;e+=2){var n=t[e],o=t[e+1];0<=n&&o<=255&&0<=o&&n<=255?this.emitShort(255&n|(255&o)<<8):this.directiveError(f("expecting uint8"))}}emitHex(e){e.slice(1).forEach(t=>{if(","!=t)if(t.length%4!=0)this.directiveError(".hex needs an even number of bytes");else if(/^[a-f0-9]+$/i.test(t))for(let e=0;e<t.length;e+=4){var n=parseInt(t.slice(e,e+4),16);this.emitShort((255&n)<<8|n>>8&255)}else this.directiveError(".hex needs a hex number")})}handleDirective(e){let t,n=e.words,o=()=>{2!=n.length&&this.directiveError(f("expecting one argument"))};switch(n[0]){case".ascii":case".asciz":case".string":this.emitString(e.text);break;case".utf16":this.emitString(e.text,!0);break;case".align":if(o(),null!=(t=this.parseOneInt(n[1]))){if(0==t)return;t<=4?this.align(1<<t):this.directiveError(f("expecting 1, 2, 3 or 4 (for 2, 4, 8, or 16 byte alignment)"))}else this.directiveError(f("expecting number"));break;case".balign":if(o(),null!=(t=this.parseOneInt(n[1]))){if(1==t)return;2==t||4==t||8==t||16==t?this.align(t):this.directiveError(f("expecting 2, 4, 8, or 16"))}else this.directiveError(f("expecting number"));break;case".p2align":o(),null!=(t=this.parseOneInt(n[1]))?this.align(1<<t):this.directiveError(f("expecting number"));break;case".byte":this.emitBytes(n);break;case".hex":this.emitHex(n);break;case".hword":case".short":case".2bytes":this.parseNumbers(n).forEach(e=>{-32768<=e&&e<=65535?this.emitShort(65535&e):this.directiveError(f("expecting int16"))});break;case".word":case".4bytes":case".long":this.parseNumbers(n).forEach(e=>{-2147483648<=e&&e<=4294967295?(this.emitShort(65535&e),this.emitShort(e>>16&65535)):this.directiveError(f("expecting int32"))});break;case".skip":case".space":this.emitSpace(n);break;case".set":case".equ":/^\w+$/.test(n[1])||this.directiveError(f("expecting name"));var r=this.parseNumbers(n.slice(","==n[2]||"="==n[2]?2:1));1!=r.length&&this.directiveError(f("expecting one value")),void 0!==this.equs[n[1]]&&this.equs[n[1]]!=r[0]&&this.directiveError(f("redefinition of {0}",n[1])),this.equs[n[1]]=r[0];break;case".startaddr":this.location()&&this.directiveError(f(".startaddr can be only be specified at the beginning of the file")),o(),this.baseOffset=this.parseOneInt(n[1]);break;case"@stackmark":o(),this.stackpointers[n[1]]=this.stack;break;case"@stackempty":this.checkStack&&(null==this.stackpointers[n[1]]?this.directiveError(f("no such saved stack")):this.stackpointers[n[1]]!=this.stack&&this.directiveError(f("stack mismatch")));break;case"@scope":this.scope=n[1]||"",this.currLineNo=this.scope?0:this.realCurrLineNo;break;case".syntax":case"@nostackcheck":this.checkStack=!1;break;case"@dummystack":o(),this.stack+=this.parseOneInt(n[1]);break;case".section":case".global":this.stackpointers={},this.stack=0,this.scope="$S"+this.scopeId++;break;case".comm":(n=n.filter(e=>","!=e)).shift();var r=this.parseOneInt(n[1]),i=n[2]?this.parseOneInt(n[2]):4;if(null==this.lookupLabel(n[0])){for(this.commPtr||(this.commPtr=this.lookupExternalLabel("_pxt_comm_base")||0,this.commPtr)||this.directiveError(f("PXT_COMM_BASE not defined"));this.commPtr&i-1;)this.commPtr++;this.labels[this.scopedName(n[0])]=this.commPtr-this.baseOffset,this.commPtr+=r}break;case".file":case".text":case".cpu":case".fpu":case".eabi_attribute":case".code":case".thumb_func":case".type":case".fnstart":case".save":case".size":case".fnend":case".pad":case".globl":case".local":case"@":break;default:/^\.cfi_/.test(n[0])||this.directiveError(f("unknown directive"))}}handleOneInstruction(e,t){var n=t.emit(e);return!n.error&&(this.stack+=n.stack,this.checkStack&&this.stack<0&&this.pushError(f("stack underflow")),e.location=this.location(),e.opcode=n.opcode,e.stack=n.stack,this.emitOpCode(n.opcode),null!=n.opcode2&&this.emitOpCode(n.opcode2),null!=n.opcode3&&this.emitOpCode(n.opcode3),e.instruction=t,e.numArgs=n.numArgs,!0)}handleInstruction(o){if(!o.instruction||!this.handleOneInstruction(o,o.instruction)){var r=e=>this.ei.instructions.hasOwnProperty(e)?this.ei.instructions[e]:[];if(!o.instruction){var i=r(o.words[0]);for(let e=0;e<i.length;++e)if(this.handleOneInstruction(o,i[e]))return}let e=o.words[0].toLowerCase().replace(/s$/,"").replace(/[^a-z]/g,""),n="",t=r(e).concat(r(e+"s"));0<t.length&&t.forEach(e=>{var t=e.emit(o);n+=f("   Maybe: {0} ({1} at '{2}')\n",e.toString(),t.error,t.errorAt)}),this.pushError(f("assembly error"),n)}}buildLine(e,t){let n=e=>{e=new l(this,e);return e.scope=this.scope,e.lineNo=this.currLineNo,t.push(e),e},o=n(e),r=a(o.text)||[],i=(o.words=r)[0]||"";if(":"==i.charAt(i.length-1)){var s=/^([\.\w]+):$/.exec(r[0]);if(s){if(o.type="label",o.text=s[1]+":",o.words=[s[1]],!(1<r.length))return;r.shift(),(o=n(e.replace(/^[^:]*:/,""))).words=r,i=r[0]||""}}s=i.charAt(0);"."==s||"@"==s?(o.type="directive","@scope"==o.words[0]&&this.handleDirective(o)):0==o.words.length?o.type="empty":o.type="instruction"}prepLines(e){this.currLineNo=0,this.realCurrLineNo=0,this.lines=[],e.split(/\r?\n/).forEach(e=>{10<this.errors.length||(this.currLineNo++,this.realCurrLineNo++,this.buildLine(e,this.lines))})}iterLines(){this.stack=0,this.buf=[],this.scopeId=0,this.lines.forEach(e=>{var t,n;10<this.errors.length||0==(this.currLine=e).words.length||("label"==e.type?(t=this.scopedName(e.words[0]),this.prevLabel=t,this.finalEmit?(null!=this.equs[t]&&this.directiveError(f(".equ redefined as label")),null==(n=this.labels[t])&&_.oops(),0==this.errors.length&&n!=this.location()&&_.oops(`invalid location: ${this.location()} != ${n} at `+t),_.assert(0<this.errors.length||n==this.location()),this.reallyFinalEmit&&(this.stackAtLabel[t]=this.stack)):this.labels.hasOwnProperty(t)?this.directiveError(f("label redefinition")):this.inlineMode&&/^_/.test(t)?this.directiveError(f("labels starting with '_' are reserved for the compiler")):this.labels[t]=this.location(),e.location=this.location()):"directive"==e.type?this.handleDirective(e):"instruction"==e.type?this.handleInstruction(e):"empty"!=e.type&&_.oops())})}getSource(o,e=1,t=0){let n=0,r=e=>{var e=this.labels[e]||n,t=e-n;return n=e,t},i=this.buf?this.location():0,s=r("_code_end"),a=r("_helpers_end"),l=r("_vtables_end"),c=r("_literals_end"),u=n,d=i+this.baseOffset&16777215,p=(t&&t<d&&_.U.userError(f("program too big by {0} bytes!",d-t)),f("; total bytes: {0} ({1}% of {2}k flash with {3} free)",d,(100*d/(t=t||131072)).toFixed(1),(t/1024).toFixed(1),t-d)),g=f("; generated code sizes (bytes): {0} (incl. {1} user, {2} helpers, {3} vtables, {4} lits); src size {5}\n",u,s,a,l,c,i-u)+f("; assembly: {0} lines; density: {1} bytes/stmt; ({2} stmts)\n",this.lines.length,Math.round(100*s/e)/100,e)+p+"\n"+this.stats+"\n\n",h=!1;return this.lines.forEach((t,n)=>{if("_stored_program"==t.words[0])g+='_stored_program: .string "..."\n',h=!0;else if(h)h=!1;else{let e=t.text;if(o){if("@stackempty"==t.words[0]&&this.lines[n-1].text==t.text)return;if(!(e=e.replace(/; WAS: .*/,"")).trim())return}!m.debug||"label"!=t.type&&"instruction"!=t.type||(e+=` 	; 0x`+(t.location+this.baseOffset).toString(16)),g+=e+"\n"}}),g}peepHole(){var t=this.lines.filter(e=>"empty"!=e.type);for(let e=0;e<t.length;++e){var n,o,r=t[e];/^user/.test(r.scope)||(n=t[e+1])&&(o=t[e+2],"instruction"==r.type)&&this.ei.peephole(r,n,o)}}clearLabels(){this.labels={},this.commPtr=0}peepPass(e){this.disablePeepHole||(this.peepOps=0,this.peepDel=0,this.peepCounts={},this.peepHole(),this.throwOnError=!0,this.finalEmit=!1,this.clearLabels(),this.iterLines(),_.assert(!this.checkStack||0==this.stack),this.finalEmit=!0,this.reallyFinalEmit=e||0==this.peepOps,this.iterLines(),this.stats+=f("; peep hole pass: {0} instructions removed and {1} updated\n",this.peepDel,this.peepOps-this.peepDel))}getLabels(){return this.userLabelsCache||(this.userLabelsCache=_.U.mapMap(this.labels,(e,t)=>t+this.baseOffset)),this.userLabelsCache}emit(e){if(_.assert(null==this.buf),this.prepLines(e),!(0<this.errors.length||(this.clearLabels(),this.iterLines(),this.checkStack&&0!=this.stack&&this.directiveError(f("stack misaligned at the end of the file")),0<this.errors.length)||(this.ei.expandLdlit(this),this.clearLabels(),this.iterLines(),this.finalEmit=!0,this.reallyFinalEmit=this.disablePeepHole,this.iterLines(),0<this.errors.length))){for(let e=0;e<5&&(pxt.debug("Peephole OPT, pass "+e),this.peepPass(5==e),0!=this.peepOps);++e);pxt.debug("emit done")}}}function a(t){let n=[],o="";e:for(let e=0;e<t.length;++e)switch(t[e]){case"[":case"]":case"!":case"{":case"}":case",":o&&(n.push(o),o=""),n.push(t[e]);break;case" ":case"\t":case"\r":case"\n":o&&(n.push(o),o="");break;case";":break e;default:o+=t[e]}return o&&(n.push(o),o=""),n[0]?n:null}function h(e,t){return{stack:null,opcode:null,error:e,errorAt:t}}function i(e){return(e<0||65535<e?"0x"+e.toString(16):"0x"+("000"+e.toString(16)).slice(-4)).toLowerCase()}m.File=s,m.VMFile=class extends s{constructor(e){super(e)}},m.AbstractProcessor=class{constructor(){this.file=null,this.addEnc=(e,t,n)=>{t={name:e,pretty:t,encode:n,isRegister:/^\$r\d/.test(e),isImmediate:/^\$i\d/.test(e),isRegList:/^\$rl\d/.test(e),isLabel:/^\$l[a-z]/.test(e)};return this.encoders[e]=t},this.inrange=(e,t,n)=>Math.floor(t)!=t||t<0||e<t?null:n,this.inminmax=(e,t,n,o)=>Math.floor(n)!=n||n<e||t<n?null:o,this.inseq=(e,t)=>{e=e.indexOf(t);return e<0?null:e},this.inrangeSigned=(e,t,n)=>Math.floor(t)!=t||(t<-(e+1)||e<t)?null:n&(e<<1|1),this.addInst=(e,t,n,o)=>{e=new r(this,e,t,n,o);return this.instructions.hasOwnProperty(e.name)||(this.instructions[e.name]=[]),this.instructions[e.name].push(e),e},this.encoders={},this.instructions={}}toFnPtr(e,t,n){return e}wordSize(){return-1}computeStackOffset(e,t){return t}is32bit(e){return!1}emit32(e,t,n){return null}postProcessRelAddress(e,t){return t}postProcessAbsAddress(e,t){return t}peephole(e,t,n){}registerNo(e){return null}getAddressFromLabel(e,t,n,o=0){return null}isPop(e){return!1}isPush(e){return!1}isAddSP(e){return!1}isSubSP(e){return!1}testAssembler(){_.assert(!1)}expandLdlit(e){}},m.emitErr=h,m.expectError=function(e,t){e=new s(e);e.emit(t),0==e.errors.length&&_.oops("ASMTEST: expecting error for: "+t)},m.tohex=i,m.expect=function(e,t){let n=[],o=t.replace(/^([0-9a-fA-F]{4,8})\s/gm,(e,t)=>(n.push(parseInt(t.slice(0,4),16)),8==t.length&&n.push(parseInt(t.slice(4,8),16)),"")),r=new s(e);r.throwOnError=!0,r.disablePeepHole=!0,r.emit(o),0<r.errors.length&&(console.debug(r.errors[0].message),_.oops("ASMTEST: not expecting errors")),r.buf.length!=n.length&&_.oops("ASMTEST: wrong buf len");for(let e=0;e<n.length;++e)r.buf[e]!=n[e]&&_.oops("ASMTEST: wrong buf content at "+e+" , exp:"+i(n[e])+", got: "+i(r.buf[e]))}}}(ts=ts||{}),function(a){{var o=a.Cloud||(a.Cloud={}),r=pxtc.Util;o.apiRoot=a.BrowserUtils.isLocalHost()||r.isNodeJS?"https://www.makecode.com/api/":"/api/",o.accessToken="";let n=!(o.localToken="");function i(e){let t=new Error(r.lf("Cannot access {0} while offline",e));return t.isOffline=!0,a.U.delay(1e3).then(()=>Promise.reject(t))}function l(e,t){return a.U.requestAsync({url:"/api/"+e,headers:{Authorization:o.localToken},method:t?"POST":"GET",data:t||void 0,allowHttpErrors:!0})}function c(){return a.webConfig&&!a.webConfig.isStatic&&!a.BrowserUtils.isLocalHost()&&!!a.webConfig.cdnUrl}function e(e){var t;return e=e.replace(/^\//,""),c()?(t=(t=new Date).getUTCFullYear()+("0"+(t.getUTCMonth()+1)).slice(-2)+("0"+t.getUTCDate()).slice(-2),e.indexOf("?")<0?e+="?":e+="&",a.webConfig.cdnUrl+"/api/"+(e+="cdn="+t)):o.apiRoot+e}function u(t){return c()?(t.url=e(t.url),r.requestAsync(t).catch(e=>s(t,e))):d(t)}function s(e,t){return 0==t.statusCode?(n&&(n=!1,o.onOffline()),i(e.url)):Promise.reject(t)}function d(t){var e;return t.url=null!=(e=a.webConfig)&&e.isStatic&&!t.forceLiveEndpoint?a.webConfig.relprefix+t.url:o.apiRoot+t.url,t.allowGzipPost=!0,o.isOnline()||a.BrowserUtils.isPxtElectron()?(t.headers||(t.headers={}),a.BrowserUtils.isLocalHost()?o.localToken&&(t.headers.Authorization=o.localToken):o.accessToken&&(t.headers["x-td-access-token"]=o.accessToken),r.requestAsync(t).catch(e=>s(t,e))):i(t.url)}function t(){return navigator&&navigator.onLine}o.onOffline=()=>{},o.hasAccessToken=function(){return!!o.accessToken},o.localRequestAsync=l,o.useCdnApi=c,o.cdnApiUrl=e,o.apiRequestWithCdnAsync=u,o.privateRequestAsync=d,o.privateGetTextAsync=function(e,t){return d({url:e,headers:t}).then(e=>e.text)},o.privateGetAsync=function(e,t=!1){return d({url:e,forceLiveEndpoint:t}).then(e=>e.json)},o.downloadTargetConfigAsync=function(){var e;return o.isOnline()?(e=a.appTarget.versions&&a.appTarget.versions.target,e=a.webConfig&&a.webConfig.isStatic?"targetconfig.json":`config/${a.appTarget.id}/targetconfig`+(e?"/v"+e:""),a.BrowserUtils.isLocalHost()?l(e).then(e=>e?e.json:void 0):u({url:e}).then(e=>e.json)):Promise.resolve(void 0)},o.downloadScriptFilesAsync=function(e){return d({url:e+"/text",forceLiveEndpoint:!0}).then(e=>JSON.parse(e.text))},o.markdownAsync=async function(t,n){var e=a.BrowserUtils.isLocalHostDev()?0:36e5,o=24*e*7;n=n||a.Util.userLanguage();const r=await a.BrowserUtils.translationDbAsync(),i=await r.getAsync(n,t,""),s=async()=>{try{var e=await function(e,t,n){var o=null==(o=a.webConfig)?void 0:o.isStatic,r=a.appTarget.versions&&a.appTarget.versions.target||"?";let i;if(o){i=e;const a=/\/?docs\//.test(i),t=/\.\w+$/.test(i);if(!a){const a="/"===i[0];i="docs"+(a?"":"/")+i}t||(i+=".md")}else i=`md/${a.appTarget.id}/${e.replace(/^\//,"")}?targetVersion=`+encodeURIComponent(r);if("en"!=t&&(i+=`${o?"?":"&"}lang=`+encodeURIComponent(t)),a.BrowserUtils.isLocalHost()&&!a.Util.liveLocalizationEnabled())return l(i).then(e=>404==e.statusCode?d({url:i,method:"GET"}).then(e=>({md:e.text,etag:e.headers.etag})):{md:e.text,etag:void 0});{const a=n&&!c()?{"If-None-Match":n}:void 0;return u({url:i,method:"GET",headers:a}).then(e=>({md:e.text,etag:e.headers.etag}))}}(t,n,null==i?void 0:i.etag);return(!i||e.md&&i.md!==e.md?(await r.setAsync(n,t,"",e.etag,void 0,e.md),e):i).md}catch(e){return""}};if(i){const t=Date.now()-i.time,n=t>e;if(t>o)a.tickEvent("markdown.update.wait");else if(n&&(a.tickEvent("markdown.update.background"),s()),i.md)return i.md}return s()},o.privateDeleteAsync=function(e){return d({url:e,method:"DELETE"}).then(e=>e.json)},o.privatePostAsync=function(e,t,n=!1){return d({url:e,data:t||{},forceLiveEndpoint:n}).then(e=>e.json)},o.isLoggedIn=function(){return!!o.accessToken},o.isNavigatorOnline=t,o.isOnline=function(){return n="undefined"!=typeof navigator&&t()?!0:n},o.getServiceUrl=function(){return o.apiRoot.replace(/\/api\/$/,"")},o.getUserId=function(){var e=/^0(\w+)\./.exec(o.accessToken);return e?e[1]:null},o.parseScriptId=function(t){var n=a.appTarget;if(t&&n.appTheme&&n.cloud&&n.cloud.sharing){let e=["makecode.com"];n.appTheme.embedUrl&&e.push(n.appTheme.embedUrl),n.appTheme.shareUrl&&e.push(n.appTheme.shareUrl);n=`^((https://)?(?:${(e=r.unique(e,e=>e).map(e=>r.escapeForRegex(r.stripUrlProtocol(e).replace(/\/$/,"")).toLowerCase())).join("|")})/)?(?:v[0-9]+/)?(api/oembed?url=.*%2F([^&]*)&.*?|([a-z0-9-_]+))$`,n=new RegExp(n,"i").exec(t.trim()),t=n&&(!n[1]||0<=e.indexOf(r.escapeForRegex(n[1].replace(/https:\/\//,"").replace(/\/$/,"")).toLowerCase()))&&(n[3]||n[4])?n[3]||n[4]:null;return t&&("_"==t[0]&&13==t.length||23==t.length&&/^[0-9\-]+$/.test(t))?t:void 0}}}}(pxt=pxt||{}),function(e){(e.pxtc||(e.pxtc={})).f4EncodeImg=function(e,n,o,r){let t=[135,o,255&e,e>>8,255&n,n>>8,0,0].map(c).join(""),i=4,s=0,a=0,l=e=>{s|=e<<a,a==8-o?(t+=c(s),i++,s=0,a=0):a+=o};for(let t=0;t<e;++t){for(let e=0;e<n;++e)l(r(t,e));for(;0!=a;)l(0);if(1<o)for(;3&i;)l(0)}return t;function c(e){return("0"+e.toString(16)).slice(-2)}}}(ts=ts||{}),function(e){function i(e){let t="";switch(e){case 0:t="C5";break;case 1:t="B";break;case 2:t="A";break;case 3:t="G";break;case 4:t="F";break;case 5:t="E";break;case 6:t="D";break;case 7:t="C"}return t}function o(e){let t=-1;switch(e){case"C5":t=0;break;case"B":t=1;break;case"A":t=2;break;case"G":t=3;break;case"F":t=4;break;case"E":t=5;break;case"D":t=6;break;case"C":t=7}return t}e.MelodyArray=class{constructor(e){this.numCols=8,this.numRows=8,this.polyphonic=!1,e&&(this.tempo=e),this.resetMelody()}setTempo(e){this.tempo=e}getArray(){return this.melody}setArray(e){this.melody=e}getColor(e){return 0}getValue(e,t){return this.melody[e][t]}getWidth(){return this.numCols}getHeight(){return this.numRows}updateMelody(e,t){var n=!this.melody[e][t];if(n&&!this.polyphonic)for(let e=0;e<this.numRows;e++)this.melody[e][t]=!1;this.melody[e][t]=n}getStringRepresentation(){let t="",o=new Array(this.numCols),r=0;for(let n=0;n<this.numRows;n++){let t=0;o[n]=[];for(let e=0;e<this.numCols;e++)this.melody[e][n]&&(o[n].push(i(e)),t++);t>r&&(r=t)}if(0==r)return"- - - - - - - - ";for(let e=0;e<r;e++)for(let e=0;e<this.numCols;e++)o[e]&&0<o[e].length?t+=o[e].shift()+" ":t+="- ";return t}parseNotes(e){var n=(e=e.trim()).split(" ");for(let t=0;t<n.length;t++){for(let e=0;e<this.numRows;e++)this.melody[e][t]=!1;"-"!=n[t]&&(this.melody[o(n[t])][t]=!0)}}setPolyphonic(e){this.polyphonic=e}isPolyphonic(){return this.polyphonic}resetMelody(){this.melody=new Array(this.numCols);for(let e=0;e<this.numCols;e++)this.melody[e]=new Array(this.numRows).fill(!1)}},e.rowToNote=i,e.noteToRow=o,e.getColorClass=function(e){let t="melody-default";switch(e){case 0:t="melody-red";break;case 1:t="melody-orange";break;case 2:t="melody-yellow";break;case 3:t="melody-green";break;case 4:t="melody-teal";break;case 5:t="melody-blue";break;case 6:t="melody-purple";break;case 7:t="melody-violet"}return t}}(pxtmelody=pxtmelody||{}),function(i){function c(e,t,n){var o=document.createElement(e),r=t,i=n;if(r)for(const i of Object.keys(r))"className"===i?o.setAttribute("class",r[i]+""):o.setAttribute(i,r[i]+"");return i&&o.addEventListener("click",i),o}i.MelodyGallery=class{constructor(){this.value=null,this.visible=!1,this.timeouts=[],this.numSamples=i.SampleMelodies.length,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("id","melody-editor-gallery-outer"),this.contentDiv=document.createElement("div"),this.contentDiv.setAttribute("id","melody-editor-gallery"),this.itemBackgroundColor="#DCDCDC",this.itemBorderColor="white",this.initStyles(),this.containerDiv.appendChild(this.contentDiv),this.containerDiv.style.display="none",this.contentDiv.addEventListener("animationend",()=>{this.visible||(this.containerDiv.style.display="none")}),this.contentDiv.addEventListener("wheel",e=>{e.stopPropagation()},!0)}getElement(){return this.containerDiv}getValue(){return this.value}show(e){this.pending=e,this.containerDiv.style.display="block",this.buildDom(),this.visible=!0,pxt.BrowserUtils.removeClass(this.contentDiv,"hidden-above"),pxt.BrowserUtils.addClass(this.contentDiv,"shown")}hide(){this.visible=!1,pxt.BrowserUtils.removeClass(this.contentDiv,"shown"),pxt.BrowserUtils.addClass(this.contentDiv,"hidden-above"),this.value=null,this.stopMelody()}clearDomReferences(){this.contentDiv=null,this.containerDiv=null}layout(e,t,n){this.containerDiv.style.left=e+"px",this.containerDiv.style.top=t+"px",this.containerDiv.style.height=n+"px"}buildDom(){for(;this.contentDiv.firstChild;)this.contentDiv.removeChild(this.contentDiv.firstChild);var t=i.SampleMelodies;this.buttons=[];for(let e=0;e<t.length;e++)this.mkButton(t[e],e,"255px","45px")}initStyles(){var e=document.createElement("style");e.textContent="\n            #melody-editor-gallery {\n                margin-top: -100%;\n            }\n\n            #melody-editor-gallery.hidden-above {\n                margin-top: -100%;\n                animation: slide-up 0.2s 0s ease;\n            }\n\n            #melody-editor-gallery.shown {\n                margin-top: 0px;\n                animation: slide-down 0.2s 0s ease;\n            }\n\n            @keyframes slide-down {\n                0% {\n                    margin-top: -100%;\n                }\n                100% {\n                    margin-top: 0px;\n                }\n            }\n\n            @keyframes slide-up {\n                0% {\n                    margin-top: 0px;\n                }\n                100% {\n                    margin-top: -100%;\n                }\n            }\n            ",this.containerDiv.appendChild(e)}mkButton(e,t,n,o){var r=c("div",{className:"melody-gallery-button melody-editor-card",role:"menuitem",id:":"+t}),i=c("i",{className:"music icon melody-icon"}),s=c("div",{className:"melody-editor-text"}),a=(s.innerText=e.name,this.createColorBlock(e)),l=c("div",{className:"melody-editor-button left-button",role:"button",title:e.name},()=>this.handleSelection(e)),i=(l.appendChild(i),l.appendChild(s),l.appendChild(a),r.appendChild(l),c("div",{className:"melody-editor-button right-button",role:"button",title:lf("Preview {0}",e.name)},()=>this.togglePlay(e,t))),s=c("i",{className:"play icon"});this.buttons[t]=s,i.appendChild(s),r.appendChild(i),this.contentDiv.appendChild(r)}handleSelection(e){var t;this.pending&&(t=this.pending,this.pending=void 0,t(e.notes))}playNote(e,t,n){let o=0;switch(e){case"C5":o=523;break;case"B":o=494;break;case"A":o=440;break;case"G":o=392;break;case"F":o=349;break;case"E":o=330;break;case"D":o=294;break;case"C":o=262}this.timeouts.push(setTimeout(()=>{pxt.AudioContextManager.tone(o)},t*this.getDuration(n))),this.timeouts.push(setTimeout(()=>{pxt.AudioContextManager.stop()},(t+1)*this.getDuration(n)))}getDuration(e){return 6e4/e}previewMelody(t){this.stopMelody();var n=t.notes.split(" ");for(let e=0;e<n.length;e++)this.playNote(n[e],e,t.tempo)}togglePlay(e,t){let n=this.buttons[t];pxt.BrowserUtils.containsClass(n,"play icon")?(this.resetPlayIcons(),pxt.BrowserUtils.removeClass(n,"play icon"),pxt.BrowserUtils.addClass(n,"stop icon"),this.previewMelody(e),this.timeouts.push(setTimeout(()=>{pxt.BrowserUtils.removeClass(n,"stop icon"),pxt.BrowserUtils.addClass(n,"play icon")},e.notes.split(" ").length*this.getDuration(e.tempo)))):(pxt.BrowserUtils.removeClass(n,"stop icon"),pxt.BrowserUtils.addClass(n,"play icon"),this.stopMelody())}stopMelody(){for(;this.timeouts.length;)clearTimeout(this.timeouts.shift());pxt.AudioContextManager.stop()}resetPlayIcons(){for(let e=0;e<this.numSamples;e++){var t=this.buttons[e];if(pxt.BrowserUtils.containsClass(t,"stop icon")){pxt.BrowserUtils.removeClass(t,"stop icon"),pxt.BrowserUtils.addClass(t,"play icon");break}}}createColorBlock(e){var t=document.createElement("div"),n=(pxt.BrowserUtils.addClass(t,"melody-color-block"),e.notes.split(" "));for(let e=0;e<n.length;e++){var o=i.getColorClass(i.noteToRow(n[e])),r=document.createElement("div");0==e?pxt.BrowserUtils.addClass(r,"left-edge sliver "+o):e==n.length-1?pxt.BrowserUtils.addClass(r,"right-edge sliver "+o):pxt.BrowserUtils.addClass(r,"sliver "+o),t.appendChild(r)}return t}}}(pxtmelody=pxtmelody||{}),function(e){class t{constructor(e,t,n){this.name=e,this.notes=t,this.tempo=n}}e.MelodyInfo=t,e.SampleMelodies=[new t(lf("Scale"),"C5 B A G F E D C",120),new t(lf("Reverse"),"C D E F G A B C5",120),new t(lf("Mystery"),"E B C5 A B G A F",120),new t(lf("Gilroy"),"A F E F D G E F",120),new t(lf("Falling"),"C5 A B G A F G E",120),new t(lf("Hopeful"),"G B A G C5 B A B",120),new t(lf("Tokyo"),"B A G A G F A C5",120),new t(lf("Paris"),"G F G A - F E D",120),new t(lf("Rising"),"E D G F B A C5 B",120),new t(lf("Sitka"),"C5 G B A F A C5 B",120)]}(pxtmelody=pxtmelody||{}),function(i){let s,o=!1;class t{constructor(e){this.db=e}loadAsync(t,n,e,o){if(!/^v\d+\.\d+\.\d+$/.test(n))return o(t,n);const r=`gh-${e}-${t}#`+n;return s.cacheGet(r).then(e=>{if(e){const s=i.Util.jsonTryParse(e);if(s)return i.debug("cache hit "+r),Promise.resolve(s)}return o(t,n).then(e=>e&&(i.debug("cached "+r),s.cacheSet(r,JSON.stringify(e)).then(()=>e)))})}loadConfigAsync(e,t){return this.loadAsync(e,t,"pxt",(e,t)=>this.db.loadConfigAsync(e,t))}loadPackageAsync(e,t){return this.loadAsync(e,t,"pkg",(e,t)=>this.db.loadPackageAsync(e,t))}}class r{constructor(e){this.packageFiles=e}resolve(e,t){return""}readFile(e,t){var n="this"==e.id?t:"pxt_modules/"+e.id+"/"+t;return void 0!==this.packageFiles[n]?this.packageFiles[n]:i.appTarget.bundledpkgs[e.id]?i.appTarget.bundledpkgs[e.id][t]:null}writeFile(e,t,n){e="this"==e.id?"":"pxt_modules/"+e.id+"/";i.debug("write file "+e+t),this.packageFiles[e+t]=n}getHexInfoAsync(e){return Promise.resolve({hex:["SKIP"]})}cacheStoreAsync(e,t){return null!=s&&s.cacheSet?s.cacheSet(e,t):Promise.resolve()}cacheGetAsync(e){return null!=s&&s.cacheGet?s.cacheGet(e):Promise.resolve("")}downloadPackageAsync(n){return o?(t=n,((e=null==s?void 0:s.pkgOverrideAsync)?e(t.id):Promise.resolve(void 0)).then(e=>e||t.commonDownloadAsync()).then(e=>{e&&i.U.iterMap(e,(e,t)=>{this.writeFile(n,e,t)})})):Promise.resolve();var t,e}resolveVersionAsync(e){return Promise.resolve("*")}}function a(e){if(e.target.preferredEditor==i.PYTHON_PROJECT_NAME){var t,n=i.U.clone(e);n.ast=!0,n.target.preferredEditor=i.JAVASCRIPT_PROJECT_NAME;for(t of n.sourceFiles)i.U.endsWith(t,".py")&&(n.fileSystem[t.slice(0,-3)+".ts"]=" ");var o=pxtc.compile(n);e.apisInfo=pxtc.getApiInfo(o.ast,n.jres)}}function n(e,t){const n=new r(e),o=new i.MainPackage(n);return o.loadAsync().then(()=>{var e=o.getTargetOptions();return e.hasHex&&(e.isNative=t.native),o.getCompileOptionsAsync(e)}).then(e=>(l(o.targetVersion(),e),a(e),e))}function l(e,t){if(e){i.debug("applying TS patches relative to "+e);for(var n of Object.keys(t.fileSystem)){var o;-1==n.indexOf("/")&&i.U.endsWith(n,".ts")&&(o=t.fileSystem[n])!=(o=i.patching.patchJavaScript(e,o))&&(i.debug("applying TS patch to "+n),t.fileSystem[n]=o)}}}i.SimpleHost=r,i.prepPythonOptions=a,i.simpleInstallPackagesAsync=function(e){e=new r(e);return new i.MainPackage(e).loadAsync(!0)},i.simpleGetCompileOptionsAsync=n,i.simpleCompileAsync=function(e,t){return n(e,"boolean"==typeof t?{native:t}:t||{}).then(e=>pxtc.compile(e)).then(e=>(e.success||(e.errors=e.diagnostics.map(ts.pxtc.getDiagnosticString).join("")||"Unknown error."),e))},i.patchTS=l,i.setupSimpleCompile=function(e){"undefined"==typeof global||global.btoa||(global.btoa=function(e){return Buffer.from(e,"binary").toString("base64")},global.atob=function(e){return Buffer.from(e,"base64").toString("binary")}),"undefined"!=typeof pxtTargetBundle&&(i.debug("setup app bundle"),i.setAppTarget(pxtTargetBundle)),e&&(s=e,o=!0,e.httpRequestAsync&&(i.Util.httpRequestCoreAsync=e.httpRequestAsync),i.github.forceProxy=!0,i.github.db=new t(new i.github.MemoryGithubDb)),i.debug("simple setup done")}}(pxt=pxt||{}),function(v){v.simshim=function(e,t){let n,_=ts.SyntaxKind,m=e.getTypeChecker(),f=v.cpp.nsWriter("declare namespace"),y="";for(var o of e.getSourceFiles()){if(t){var r=t(o.fileName);if(v.debug("SimShim[1]: "+r.dir),!v.U.endsWith(r.dir,"/sim")&&!v.U.startsWith(o.fileName,"sim/"))continue}else if(!v.U.startsWith(o.fileName,"sim/"))continue;v.debug("SimShim[2]: "+o.fileName);for(var i of o.statements){var s=i;i.kind==_.ModuleDeclaration&&"pxsim"==s.name.text&&d((n=s).body)}}e={};return e[v.appTarget.corepkg]=f.finish(),e;function k(e){let t;return t=(t=ts.isExpression(e)?m.getContextualType(e):t)||m.getTypeAtLocation(e)}function b(e){let t=m.typeToString(e,n,ts.TypeFormatFlags.UseFullyQualifiedType);switch(t=t.replace(/^pxsim\./,"")){case"RefAction":return"() => void";case"RefBuffer":return"Buffer";default:return t}}function c(e){e=pxtc.getComments(e);return/^\s*\/\/%/m.test(e)?e:null}function u(d,p=!1){var g,h=c(d);if(h){let e=d.name.getText(),t=d.kind==_.MethodDeclaration||d.kind==_.GetAccessor||d.kind==_.SetAccessor,n="//% shim="+(t?"."+e:y+"::"+e),o=m.getSignatureFromDeclaration(d),r=m.getReturnTypeOfSignature(o),i=/Async$/.test(e),s=(g=r,pxtc.isObjectType(g)&&g.objectFlags&ts.ObjectFlags.Reference&&"Promise"==g.symbol.name?g.typeArguments[0]:null);s?(n+=" promise",r=s,i||v.U.userError(y+`::${e} should be called ${e}Async`)):i&&v.U.userError(y+`::${e} doesn't return a promise`),v.debug("emitFun: "+e);let a=d.parameters.map(e=>`${e.name.getText()}${e.questionToken?"?":""}: `+b(k(e))),l=e.replace(/Async$/,""),c=t?"public":"function",u=`(${a.join(", ")})`;d.kind==_.GetAccessor&&(c=p?"public":"readonly",u="",n+=" property"),t||f.setNs(y),f.write(h),f.write(n),f.write(`${c} ${l}${u}: ${b(r)};`),f.write("")}}function d(e){switch(e.kind){case _.ModuleDeclaration:return s=e,(t=y)&&(y+="."),y+=s.name.text,d(s.body),void(y=t);case _.ModuleBlock:return e.statements.forEach(d);case _.FunctionDeclaration:return u(e);case _.ClassDeclaration:var n=e;if(s=c(n)){f.setNs(y),f.write(s);var o,r,i,s=y;y&&(y+="."),y+=n.name.text;let e=s?"":"declare",t="";if(n.heritageClauses)for(var a of n.heritageClauses)a.token==_.ExtendsKeyword&&(t=" extends "+b(k(a.types[0])));f.write(e+` class ${n.name.text}${t} {`),f.incrIndent();for(let t of n.members)switch(t.kind){case _.MethodDeclaration:u(t);break;case _.PropertyDeclaration:o=t,i=r=l=void 0,(i=c(o))&&(r="//% shim=."+(l=o.name.getText()),o=m.getTypeAtLocation(o),f.write(i),f.write(r),f.write(`public ${l}: ${b(o)};`),f.write(""));break;case _.Constructor:i=t,r=void 0,(r=c(i))&&(m.getTypeAtLocation(i),i=i.parameters.map(e=>e.name.getText()+": "+b(k(e))),f.write(r),f.write(`//% shim="new ${y}"`),f.write(`constructor(${i.join(", ")});`),f.write(""));break;case _.GetAccessor:var l=n.members.some(e=>e.kind==_.SetAccessor&&e.name.getText()==t.name.getText());u(t,l)}y=s,f.decrIndent(),f.write("}")}return}var s,t}}}(pxt=pxt||{}),function(d){var p;(p=d.pxtc||(d.pxtc={})).annotate=function(e,t,n){var o=p.target;p.target=n;let r=e.getSourceFiles().filter(e=>e.fileName===t)[0],a=e.getTypeChecker();function l(t,n,e=!1,o=null){var e=e||!(u(t).flags&d.TypeFlags.Void),r=o||c(t);if(t.expression&&r){let e=!1;switch(r.kind){case p.SK.PropertySignature:case p.SK.PropertyAssignment:case p.SK.PropertyDeclaration:p.isStatic(r)||(e=!0);break;case p.SK.Parameter:p.isCtorField(r)&&(e=!0);break;case p.SK.GetAccessor:case p.SK.SetAccessor:case p.SK.MethodDeclaration:case p.SK.MethodSignature:e=!0}if(e){const d=t.expression;d.kind===p.SK.PropertyAccessExpression?n.unshift(d.expression):n.unshift(t.expression)}}o={decl:r,qName:r?p.getNodeFullName(a,r):"?",args:n,isExpression:e};p.pxtInfo(t).callInfo=o}function c(e){if(!e)return null;let t,n=a.getSymbolAtLocation(e);var o;if(!(t=n&&!(t=n.valueDeclaration)&&n.declarations&&(o=n.declarations[0])&&o.kind==d.SyntaxKind.ImportEqualsDeclaration&&(n=a.getSymbolAtLocation(o.moduleReference))?n.valueDeclaration:t)&&e.kind==p.SK.PropertyAccessExpression){const d=e;t={kind:p.SK.PropertySignature,symbol:{isBogusSymbol:!0,name:d.name.getText()},name:d.name},p.pxtInfo(t).flags|=2}return t}function u(e){let t;var n=p.pxtInfo(e);return n.typeCache||(t=(t=d.isExpression(e)?a.getContextualType(e):t)||a.getTypeAtLocation(e))&&(d.isStringLiteral(e)?t:p.checkType(t))}!function s(e){d.forEachChild(e,e=>{switch(e.kind){case d.SyntaxKind.CallExpression:l(e,e.arguments.slice(0),null,c(e.expression));break;case d.SyntaxKind.PropertyAccessExpression:l(e,[]);break;case d.SyntaxKind.TaggedTemplateExpression:l(e,[e.template],!0,c(e.tag));break;case d.SyntaxKind.BinaryExpression:var t=e,n=t.left,o=t.right,r=u(t.left),i=u(t.right);switch(t.operatorToken.kind!=p.SK.PlusToken&&t.operatorToken.kind!=p.SK.PlusEqualsToken||(p.isStringType(r)||p.isStringType(i)&&t.operatorToken.kind==p.SK.PlusToken)&&(p.pxtInfo(t).exprInfo={leftType:a.typeToString(r),rightType:a.typeToString(i)}),t.operatorToken.kind){case d.SyntaxKind.EqualsToken:case d.SyntaxKind.PlusEqualsToken:case d.SyntaxKind.MinusEqualsToken:if(n.kind==p.SK.PropertyAccessExpression){let e=c(n);e&&e.kind==p.SK.GetAccessor?l(n,[o],!1,e=d.getDeclarationOfKind(e.symbol,p.SK.SetAccessor)):e&&(e.kind==p.SK.PropertySignature||e.kind==p.SK.PropertyAssignment||p.target&&p.target.switches.slowFields)&&l(n,[o])}}break;case d.SyntaxKind.Identifier:const s=c(e);if(s&&s.getSourceFile().fileName!==pxt.MAIN_TS&&s.kind==d.SyntaxKind.VariableDeclaration){const d=p.pxtInfo(e);d.flags|=4,d.commentAttrs||(d.commentAttrs=p.parseComments(s))}}s(e)})}(r),p.target=o}}(ts=ts||{}),function(e){function s(t){let n='"';for(let e=0;e<t.length;++e){var o=255&t.charCodeAt(e),r=String.fromCharCode(o);n+="\\"==r||'"'==r?"\\"+r:"\n"==r?"\\n":o<=15?"\\x0"+o.toString(16):o<32||127<o?"\\x"+o.toString(16):r}return n+'"'}function n(o){let e="pxt::string_inline_ascii_vt",r=k.target.utf8?k.U.toUTF8(o,!0):o,i="";if(r!==o)if(16<o.length){e="pxt::string_skiplist16_packed_vt";let t=[],n=0;for(let e=0;e+16<=o.length;e+=16)n+=k.U.toUTF8(o.slice(e,e+16),!0).length,t.push(n);i=`
    .short ${r.length}, ${o.length}
    .short ${t.map(e=>e.toString()).join(", ")}
    .string ${s(r)}
`}else e="pxt::string_inline_utf8_vt";return i=i||`
    .short ${r.length}
    .string ${s(r)}
`,{vt:e,asm:i}}function o(e,t=""){return`
                .word ${e.length>>1}${t}
                .hex ${e}${e.length%4==0?"":"00"}
        `}var k;(k=e.pxtc||(e.pxtc={})).asmStringLiteral=s,k.AssemblerSnippets=class{nop(){return"TBD(nop)"}reg_gets_imm(e,t){return"TBD(reg_gets_imm)"}proc_setup(e,t){return"TBD(proc_setup)"}push_fixed(e){return"TBD(push_fixed)"}push_local(e){return"TBD(push_local)"}push_locals(e){return"TBD(push_locals)"}pop_fixed(e){return"TBD(pop_fixed)"}pop_locals(e){return"TBD(pop_locals)"}proc_return(){return"TBD(proc_return)"}debugger_stmt(e){return""}debugger_bkpt(e){return""}debugger_proc(e){return""}unconditional_branch(e){return"TBD(unconditional_branch)"}beq(e){return"TBD(beq)"}bne(e){return"TBD(bne)"}cmp(e,t){return"TBD(cmp)"}cmp_zero(e){return"TBD(cmp_zero)"}arithmetic(){return""}load_reg_src_off(e,t,n,o,r,i){return"TBD(load_reg_src_off)"}rt_call(e,t,n){return"TBD(rt_call)"}call_lbl(e,t){return"TBD(call_lbl)"}call_reg(e){return"TBD(call_reg)"}helper_prologue(){return"TBD(lambda_prologue)"}helper_epilogue(){return"TBD(lambda_epilogue)"}pop_clean(e){return"TBD"}load_ptr_full(e,t){return"TBD(load_ptr_full)"}emit_int(e,t){return"TBD(emit_int)"}obj_header(e){return".word "+e}string_literal(e,t){t=n(t);return`
            .balign 4
            ${e}: ${this.obj_header(t.vt)}
            ${t.asm}
`}hex_literal(e,t){return`
.balign ${/f{16}/i.test(t)?8:4}
${e}: ${this.obj_header("pxt::buffer_vt")}
${o(t)}
`}},k.utf8AsmStringLiteral=n,k.hexLiteralAsm=o,k.numBytes=function(t){let n=0;for(let e=t;0<e;e>>>=8)n++;return n||1},k.ProctoAssembler=class{constructor(e,t,n){this.resText="",this.exprStack=[],this.calls=[],this.proc=null,this.baseStackSize=0,this.labelledHelpers={},this.write=e=>{this.resText+=k.asmline(e)},this.t=e,this.bin=t,this.proc=n,this.proc&&this.work()}emitHelpers(){this.emitLambdaTrampoline(),this.emitArrayMethods(),this.emitFieldMethods(),this.emitBindHelper()}redirectOutput(e){let t=this.write,n="";this.write=e=>n+=k.asmline(e);try{e()}finally{this.write=t}return n}stackSize(){return this.baseStackSize+this.exprStack.length}stackAlignmentNeeded(e=0){return!k.target.stackAlign||(e=k.target.stackAlign-(this.stackSize()+e&k.target.stackAlign-1))==k.target.stackAlign?0:e}getAssembly(){return this.resText}work(){this.write(`
;
; Function ${this.proc.getFullName()}
;
`);let e=this.proc.label(),i=e+"_pre",s=e+"_bkpt",a=e+"_locals",l=e+"_end";this.write(i+":"),this.emitLambdaWrapper(this.proc.isRoot),this.write(".section code"),this.write(e+":"),this.proc.classInfo&&this.proc.info.thisParameter&&!k.target.switches.skipClassCheck&&!k.target.switches.noThisCheckOpt&&(this.write("mov r7, lr"),this.write("ldr r0, [sp, #0]"),this.emitInstanceOf(this.proc.classInfo,"validate"),this.write("mov lr, r7")),this.write(`
${e}_nochk:
    @stackmark func
    @stackmark args
`),this.proc.fillDebugInfo=t=>{var e,n=t.getLabels();this.proc.debugInfo={locals:(1==this.proc.seqNo?this.bin.globals:this.proc.locals).map(e=>e.getDebugInfo()),args:this.proc.args.map(e=>e.getDebugInfo()),name:this.proc.getName(),codeStartLoc:k.U.lookup(n,a),codeEndLoc:k.U.lookup(n,l),bkptLoc:k.U.lookup(n,s),localsMark:k.U.lookup(t.stackAtLabel,a),idx:this.proc.seqNo,calls:this.calls,size:k.U.lookup(n,l)+2-k.U.lookup(n,i)};for(e of this.calls)e.addr=k.U.lookup(n,e.callLabel),e.stack=k.U.lookup(t.stackAtLabel,e.callLabel),e.callLabel=void 0;for(let e=0;e<this.proc.body.length;++e){var o,r=this.proc.body[e].breakpointInfo;r&&(o=k.U.lookup(t.stackAtLabel,"__brkp_"+r.id))!==this.proc.debugInfo.localsMark&&(console.log(r),console.log(t.stackAtLabel),k.U.oops(`offset doesn't match: ${o} != `+this.proc.debugInfo.localsMark))}},this.bin.options.breakpoints&&this.write(this.t.debugger_proc(s)),this.baseStackSize=1;var t=this.proc.locals.length;this.write("push {lr}"),this.write(".locals:\n"),this.proc.perfCounterNo&&(this.write(this.t.emit_int(this.proc.perfCounterNo,"r0")),this.write("bl pxt::startPerfCounter")),this.write(this.t.proc_setup(t)),this.baseStackSize+=t,this.write("@stackmark locals"),this.write(a+":");for(let e=0;e<this.proc.body.length;++e){var n,o=this.proc.body[e];switch(o.stmtKind){case k.ir.SK.Expr:this.emitExpr(o.expr);break;case k.ir.SK.StackEmpty:if(0<this.exprStack.length){for(var r of this.proc.body.slice(e-4,e+1))console.log("PREVSTMT "+r.toString().trim());for(var c of this.exprStack)console.log(`EXPRSTACK ${c.currUses}/${c.totalUses} E: `+c.toString());k.oops("stack should be empty")}this.write("@stackempty locals");break;case k.ir.SK.Jmp:this.emitJmp(o);break;case k.ir.SK.Label:this.write(o.lblName+":"),this.validateJmpStack(o);break;case k.ir.SK.Comment:this.write("; "+o.expr.data);break;case k.ir.SK.Breakpoint:this.bin.options.breakpoints&&(n="__brkp_"+o.breakpointInfo.id,o.breakpointInfo.isDebuggerStmt?this.write(this.t.debugger_stmt(n)):this.write(this.t.debugger_bkpt(n)));break;default:k.oops()}}k.assert(0<=t&&t<127),0<t&&this.write(this.t.pop_locals(t)),this.proc.perfCounterNo&&(this.write("mov r4, r0"),this.write(this.t.emit_int(this.proc.perfCounterNo,"r0")),this.write("bl pxt::stopPerfCounter"),this.write("mov r0, r4")),this.write(l+":"),this.write(this.t.proc_return()),this.write("@stackempty func"),this.write("@stackempty args"),this.write("; endfun")}mkLbl(e){let t=e+this.bin.lblNo++;return t="_"!=t[0]?"."+t:t}dumpStack(){let e="[";for(var t of this.exprStack)e+=t.sharingInfo()+": "+t.toString()+"; ";return e+="]"}terminate(e){k.assert(e.exprKind==k.ir.EK.SharedRef);e=e.args[0];k.U.assert(e.currUses!=e.totalUses),k.U.assert(this.exprStack[0]===e,"term at top");let t=1;for(;t<this.exprStack.length;){var n=this.exprStack[t];if(n.currUses!=n.totalUses)break;t++}return this.write("@dummystack "+t),this.write(this.t.pop_locals(t)),t}validateJmpStack(e,t=0){t=this.exprStack.length-t;null==e.lblStackSize?e.lblStackSize=t:e.lblStackSize!=t&&(console.log(e.lblStackSize,t),console.log(this.dumpStack()),k.U.oops("stack misaligned at: "+e.lblName))}emitJmp(e){let t=0;var n;e.jmpMode==k.ir.JmpMode.Always?(e.expr&&this.emitExpr(e.expr),e.terminateExpr&&(t=this.terminate(e.terminateExpr)),this.write(this.t.unconditional_branch(e.lblName)+" ; with expression")):(n=this.mkLbl("jmpz"),this.emitExpr(e.expr),e.expr.exprKind==k.ir.EK.RuntimeCall&&("thumb::subs"===e.expr.data||k.U.startsWith(e.expr.data,"_cmp_"))||this.write(this.t.cmp_zero("r0")),e.jmpMode==k.ir.JmpMode.IfNotZero?this.write(this.t.beq(n)):this.write(this.t.bne(n)),e.terminateExpr&&(t=this.terminate(e.terminateExpr)),this.write(this.t.unconditional_branch(e.lblName)),this.write(n+":")),this.validateJmpStack(e.lbl,t)}clearStack(e=!1){let t=0;for(;0<this.exprStack.length&&this.exprStack[0].currUses==this.exprStack[0].totalUses;)t++,this.exprStack.shift();if(t&&this.write(this.t.pop_locals(t)),!e){e=this.exprStack.filter(e=>e.currUses==e.totalUses&&-1!=e.irCurrUses);if(0<e.length){this.write(this.t.reg_gets_imm("r7",0));for(var n of e)n.irCurrUses=-1,this.write(this.loadFromExprStack("r7",n,0,!0))}}}emitExprInto(e,n){switch(e.exprKind){case k.ir.EK.NumberLiteral:"number"==typeof e.data?this.write(this.t.emit_int(e.data,n)):k.oops();break;case k.ir.EK.PointerLiteral:this.write(this.t.load_ptr_full(e.data,n));break;case k.ir.EK.SharedRef:var o=e.args[0],t=(k.U.assert(!!o.currUses),k.U.assert(o.currUses<o.totalUses),o.currUses++,this.exprStack.indexOf(o));k.U.assert(0<=t),0==t&&o.totalUses==o.currUses?(this.write(this.t.pop_fixed([n])+(" ; tmpref @"+this.exprStack.length)),this.exprStack.shift(),this.clearStack()):(o=t.toString()+":"+this.exprStack.length,this.write(this.t.load_reg_src_off(n,"sp",o,!0)+" ; tmpref @"+(this.exprStack.length-t)));break;case k.ir.EK.CellRef:o=e.data;if(o.isGlobal()){let e=this.bitSizeInfo(o.bitSize),t="#"+o.index;(e.needsSignExt||o.index>=e.immLimit)&&(this.write(this.t.emit_int(o.index,n)),t=n),this.write(this.t.load_reg_src_off("r7","r6","#0")),this.write(this.t.load_reg_src_off(n,"r7",t,!1,!1,e))}else{var[t,o,r]=this.cellref(o);this.write(this.t.load_reg_src_off(n,t,o,r))}break;default:k.oops()}}bitSizeInfo(e){var t={size:k.sizeOfBitSize(e),immLimit:128};return 1==t.size?t.immLimit=32:2==t.size&&(t.immLimit=64),1!=e&&3!=e||(t.needsSignExt=!0),t}emitExpr(e){switch(e.exprKind){case k.ir.EK.JmpValue:this.write("; jmp value (already in r0)");break;case k.ir.EK.Nop:this.write(this.t.nop());break;case k.ir.EK.FieldAccess:return this.emitExpr(e.args[0]),this.emitFieldAccess(e);case k.ir.EK.Store:return this.emitStore(e.args[0],e.args[1]);case k.ir.EK.RuntimeCall:return this.emitRtCall(e);case k.ir.EK.ProcCall:return this.emitProcCall(e);case k.ir.EK.SharedDef:return this.emitSharedDef(e);case k.ir.EK.Sequence:return e.args.forEach(e=>this.emitExpr(e)),this.clearStack();case k.ir.EK.InstanceOf:return this.emitExpr(e.args[0]),this.emitInstanceOf(e.data,e.jsInfo);default:return this.emitExprInto(e,"r0")}}emitFieldAccess(e,t=!1){e=e.data;e.classInfo.id,e.name;e.needsCheck&&!k.target.switches.skipClassCheck&&this.emitInstanceOf(e.classInfo,"validate");let n=4*e.idx+4,o="#"+n;124<n&&(this.write(this.t.emit_int(n,"r3")),o="r3"),t?this.write(`str r1, [r0, ${o}]`):this.write(`ldr r0, [r0, ${o}]`)}writeFailBranch(){this.write(".fail:"),this.write("mov r1, lr"),this.write(this.t.callCPP("pxt::failedCast"))}emitClassCall(e){var t=e.virtualIndex+k.firstMethodOffset();this.write(this.t.emit_int(4*t,"r1"));let n=e.classInfo,o="";e.isThis&&(o+="_this"),this.emitLabelledHelper("classCall_"+n.id+o,()=>{this.write("ldr r0, [sp, #0] ; ld-this"),this.loadVTable(),k.target.switches.skipClassCheck||e.isThis||this.checkSubtype(n),this.write("ldr r1, [r3, r1] ; ld-method"),this.write("bx r1 ; keep lr from caller"),this.writeFailBranch()})}emitBindHelper(){this.write(`
                .section code
                _pxt_bind_helper:
                    push {r0, r2}
                    movs r0, #2
                    ldlit r1, _pxt_bind_lit
                    ${this.t.callCPP("pxt::mkAction")}
                    pop {r1, r2}
                    str r1, [r0, #12]
                    str r2, [r0, #16]
                    bx r4 ; return

                _pxt_bind_lit:
                    ${this.t.obj_header("pxt::RefAction_vtable")}
                    .short 0, 0 ; no captured vars
                    .word .bindCode@fn
                .bindCode:
                    ; r0-bind object, r4-#args
                    cmp r4, #12
                    bge .fail
                    lsls r3, r4, #2
                    ldlit r2, _pxt_copy_list
                    ldr r1, [r2, r3]

                    ldr r3, [r0, #12]
                    ldr r2, [r0, #16]
                    adds r4, r4, #1
                    bx r1
            `),this.writeFailBranch(),this.write("_pxt_copy_list:"),this.write(k.U.range(12).map(e=>`.word _pxt_bind_${e}@fn`).join("\n"));for(let t=0;t<12;t++){this.write(`
                _pxt_bind_${t}:
                    sub sp, #4
                `);for(let e=0;e<t;++e)this.write(`ldr r1, [sp, #4*${e+1}]`),this.write(`str r1, [sp, #4*${e}]`);this.write(`
                    push {r3} ; this-ptr
                    mov r1, lr
                    str r1, [sp, #4*${t+1}] ; store LR
                    blx r2
                    ldr r1, [sp, #4*${t+1}]
                    add sp, #8
                    bx r1
                `)}}ifaceCallCore(t,e,n=!1){this.write("\n                ldr r2, [r3, #12] ; load mult\n                movs r7, r2\n                beq .objlit ; built-in types have mult=0\n                muls r7, r1\n                lsrs r7, r2\n                lsls r7, r7, #1 ; r7 - hash offset\n                ldr r3, [r3, #4] ; iface table\n                adds r3, r3, r7\n                ; r0-this, r1-method idx, r2-free, r3-hash entry, r4-num args, r7-free\n                ");for(let e=0;e<k.vtLookups;++e)0<e&&this.write("    adds r3, #2"),this.write("\n                ldrh r2, [r3, #0] ; r2-offset of descriptor\n                ldrh r7, [r2, r3] ; r7-method idx\n                cmp r7, r1\n                beq .hit\n                ");"get"==e?(this.write("movs r0, #0 ; undefined"),this.write("bx lr")):this.write("b .fail2"),this.write("\n            .hit:\n                adds r3, r3, r2 ; r3-descriptor\n                ldr r2, [r3, #4]\n                lsls r7, r2, #31\n                beq .field\n            ");var o=this.t.emit_int(t,"r4")+"\n     bx r2";if("set"==e?this.write(`
                    ; check for next descriptor
                    ldrh r7, [r3, #8]
                    cmp r7, r1
                    bne .fail2 ; no setter!
                    ldr r2, [r3, #12]
                    ${o}
                `):(this.write("\n                    ; check if it's getter\n                    ldrh r7, [r3, #2]\n                    cmp r7, #1\n                "),"get"==e?this.write(`
                        bne .bind
                        ${o}
                    .bind:
                        mov r4, lr
                        bl _pxt_bind_helper
                    `):this.write(`
                        beq .doublecall
                        ${o}
                    .doublecall:
                        ; call getter
                        movs r4, #1
                        push {r0, lr}
                        blx r2
                        pop {r1, r2}
                        mov lr, r2
                        b .moveArgs
                    `)),n||(this.write(`
                .objlit:
                    ldrh r2, [r3, #8]
                    cmp r2, #${pxt.BuiltInType.RefMap}
                    bne .fail
                    mov r4, lr
                `),"set"==e&&this.write("ldr r2, [sp, #4] ; ld-val"),this.write(this.t.callCPP("set"==e?"pxtrt::mapSet":"pxtrt::mapGet")),e?this.write("bx r4"):(this.write("mov lr, r4"),this.write("b .moveArgs"))),this.write(".field:"),"set"==e?this.write("\n                        ldr r3, [sp, #4] ; ld-val\n                        str r3, [r0, r2] ; store field\n                        bx lr\n                    "):"get"==e?this.write("\n                        ldr r0, [r0, r2] ; load field\n                        bx lr\n                    "):this.write("\n                        ldr r0, [r0, r2] ; load field\n                    "),!e){this.write(".moveArgs:");for(let e=0;e<t;++e)e==t-1?this.write("movs r1, r0"):this.write(`ldr r1, [sp, #4*${e+1}]`),this.write(`str r1, [sp, #4*${e}]`);this.lambdaCall(t-1)}n&&this.write(".objlit:"),this.writeFailBranch(),this.write(`
            .fail2:
                ${this.t.callCPP("pxt::missingProperty")}
            `)}emitIfaceCall(e,t,n=""){k.U.assert(0<e.ifaceIndex),this.write(this.t.emit_int(e.ifaceIndex,"r1")),this.emitLabelledHelper("ifacecall"+t+"_"+n,()=>{this.write("ldr r0, [sp, #0] ; ld-this"),this.loadVTable(),this.ifaceCallCore(t,n)})}checkSubtype(e,t=".fail",n="r2"){e.classNo?(this.write(`ldrh ${n}, [r3, #8]`),this.write(`cmp ${n}, #`+e.classNo),e.classNo==e.lastSubtypeNo?this.write("bne "+t):(this.write("blt "+t),this.write(`cmp ${n}, #`+e.lastSubtypeNo),this.write("bgt "+t))):this.write(`b ${t} ; always fails; class never instantiated`)}loadVTable(e="r2",t=".fail",n=".fail"){this.write(`lsls ${e}, r0, #30`),this.write("bne "+t),this.write("cmp r0, #0"),this.write("beq "+n),this.write("ldr r3, [r0, #0]"),this.write("; vtable in R3")}emitInstanceOf(e,t){var n="inst_"+e.id+"_"+t;this.emitLabelledHelper(n,()=>{"validateNullable"==t?this.loadVTable("r2",".tagged",".undefined"):this.loadVTable("r2",".fail",".fail"),this.checkSubtype(e),"bool"==t?(this.write("movs r0, #"+k.taggedTrue),this.write("bx lr"),this.write(".fail:"),this.write("movs r0, #"+k.taggedFalse),this.write("bx lr")):"validate"==t?(this.write("bx lr"),this.writeFailBranch()):"validateNullable"==t?(this.write(".undefined:"),this.write("bx lr"),this.write(".tagged:"),this.write(`cmp r0, #${k.taggedNull} ; check for null`),this.write("bne .fail"),this.write("movs r0, #0"),this.write("bx lr"),this.writeFailBranch()):k.U.oops()})}emitSharedDef(e){e=e.args[0];if(k.U.assert(1<=e.totalUses),k.U.assert(0===e.currUses),(e.currUses=1)==e.totalUses)return this.emitExpr(e);this.emitExpr(e),this.exprStack.unshift(e),this.write(this.t.push_local("r0")+"; tmpstore @"+this.exprStack.length)}clearArgs(e,t){e.length,t.length;var n,o=e.concat(t);for(n of o)0==n.currUses&&1==n.totalUses||(console.log(n.toString()),console.log(o.map(e=>e.toString())),k.U.oops(`wrong uses: ${n.currUses} `+n.totalUses)),n.currUses=1;this.clearStack()}builtInClassNo(e){return{id:"builtin"+e,classNo:e,lastSubtypeNo:e}}emitBeginTry(e){this.emitExprInto(e.args[0],"r0"),this.write("bl _pxt_save_exception_state")}emitRtCall(e,t=null){var n,o,r,i=e.data;if("pxt::beginTry"==i)return this.emitBeginTry(e);let s=e.mask||{refMask:0},a=s.conversions||[],l=e.args.map((e,t)=>({idx:t,expr:e,isSimple:e.isLiteral(),isRef:0!=(s.refMask&1<<t),conv:a.find(e=>e.argIdx==t)})),c=(k.U.assert(l.length<=4),!1);for(n of k.U.reversed(l))n.expr.isPure()?n.isSimple||n.isRef||c&&!n.expr.isStateless()||(n.isSimple=!0):c=!0;for(o of l)o.conv&&(o.isSimple=!1);let u=l.filter(e=>!e.isSimple);if(u.every(e=>e.expr.isPure()&&!e.isRef&&!e.conv)){for(var d of u)d.isSimple=!0;u=[]}let p=u[0],g=!0;if(1!=u.length||p.conv||p.isRef){for(var h of u)this.pushArg(h.expr);this.alignExprStack(0);let i=u.filter(e=>!!e.conv);if(i.length){const t=this.redirectOutput(()=>{let e=0;k.target.switches.inlineConversions||(this.t.stackAligned()?e+=2:e+=1);for(var t of i){var n;k.isThumb()&&"pxt::toInt"==t.conv.method?(this.write(this.loadFromExprStack("r0",t.expr,e)),this.write("asrs r0, r0, #1"),n=k.target.switches.inlineConversions?t.expr.getId():e,this.write("bcs .isint"+n),this.write("lsls r0, r0, #1"),this.alignedCall(t.conv.method,"",e),this.write(".isint"+n+":")):(this.write(this.loadFromExprStack("r0",t.expr,e)),t.conv.refTag?k.target.switches.skipClassCheck||this.emitInstanceOf(this.builtInClassNo(t.conv.refTag),t.conv.refTagNullable?"validateNullable":"validate"):(this.alignedCall(t.conv.method,"",e),t.conv.returnsRef&&this.write(this.loadFromExprStack("r0",t.expr,e,!0)))),this.write(this.t.push_fixed(["r0"])),e++}for(var o of k.U.reversed(i))e--,this.write(this.t.pop_fixed(["r"+o.idx]));for(var r of u)r.conv||this.write(this.loadFromExprStack("r"+r.idx,r.expr,e))});k.target.switches.inlineConversions?this.write(t):this.emitHelper(this.t.helper_prologue()+t+this.t.helper_epilogue(),"conv")}else for(var _ of u)this.write(this.loadFromExprStack("r"+_.idx,_.expr))}else this.emitExpr(p.expr),0!=p.idx&&this.write(this.t.mov("r"+p.idx,"r0")),g=!1;for(r of l)r.isSimple&&this.emitExprInto(r.expr,"r"+r.idx);t?t():"langsupp::ignore"!=i&&this.alignedCall(i,"",0,!0),g&&this.clearArgs(u.filter(e=>!e.isRef).map(e=>e.expr),u.filter(e=>e.isRef).map(e=>e.expr))}alignedCall(e,t="",n=0,o=!1){(k.U.startsWith(e,"_cmp_")||k.U.startsWith(e,"_pxt_"))&&(o=!1),this.write(this.t.call_lbl(e,o,this.stackAlignmentNeeded(n))+t)}emitLabelledHelper(e,t){this.labelledHelpers[e]?this.write(this.t.call_lbl(this.labelledHelpers[e])):(t=this.redirectOutput(t),this.emitHelper(t,e),this.labelledHelpers[e]=this.bin.codeHelpers[t])}emitHelper(e,t="hlp"){var n;this.bin.codeHelpers[e]||(n=Object.keys(this.bin.codeHelpers).length,this.bin.codeHelpers[e]=`_${t}_`+n),this.write(this.t.call_lbl(this.bin.codeHelpers[e]))}pushToExprStack(e){e.totalUses=1,e.currUses=0,this.exprStack.unshift(e)}pushArg(e){this.clearStack(!0),this.exprStack.length,this.emitExpr(e),this.clearStack(!0),this.write(this.t.push_local("r0")+" ; proc-arg"),this.pushToExprStack(e)}loadFromExprStack(e,t,n=0,o=!1){t=this.exprStack.indexOf(t);return k.assert(0<=t),this.t.load_reg_src_off(e,"sp",(t+n).toString(),!0,o)+" ; estack\n"}pushDummy(){var e=k.ir.numlit(0);e.totalUses=1,e.currUses=1,this.exprStack.unshift(e)}alignExprStack(e){var t=this.stackAlignmentNeeded(e);if(t)for(let e=0;e<t;++e)this.write("push {r5} ; align"),this.pushDummy()}emitFieldMethods(){for(var n of["get","set"]){this.write(`
                .section code
                _pxt_map_${n}:
                `),this.loadVTable("r4"),this.checkSubtype(this.builtInClassNo(pxt.BuiltInType.RefMap),".notmap","r4"),this.write(this.t.callCPPPush("set"==n?"pxtrt::mapSetByString":"pxtrt::mapGetByString")),this.write(".notmap:");let e="set"==n?2:1,t=!1;this.write("mov r4, r3 ; save VT"),"set"==n?(k.target.stackAlign&&(t=!0,this.write("push {lr} ; align")),this.write("\n                            push {r0, r2, lr}\n                            mov r0, r1\n                        ")):this.write("\n                            push {r0, lr}\n                            mov r0, r1\n                        "),this.write("\n                    bl pxtrt::lookupMapKey\n                    mov r1, r0 ; put key index in r1\n                    ldr r0, [sp, #0] ; restore obj pointer\n                    mov r3, r4 ; restore vt\n                    bl .dowork\n                "),this.write(this.t.pop_locals(e+(t?1:0))),this.write("pop {pc}"),this.write(".dowork:"),this.ifaceCallCore(e,n,!0)}}emitArrayMethod(e,t){this.write(`
            .section code
            _pxt_${t?"buffer":"array"}_${e}:
            `),this.loadVTable("r4");var n=this.builtInClassNo(t?pxt.BuiltInType.BoxedBuffer:pxt.BuiltInType.RefCollection),n=(k.target.switches.skipClassCheck||this.checkSubtype(n,".fail","r4"),k.isStackMachine()||k.target.runtimeIsARM||t?"ldr":"ldrh");this.write(`
                asrs r1, r1, #1
                bcc .notint
                ${n} r4, [r0, #${t?4:8}]
                cmp r1, r4
                bhs .oob
            `);let o="r1";t?(o="#8",this.write("\n                    adds r4, r0, r1\n                ")):this.write("\n                    lsls r1, r1, #2\n                    ldr r4, [r0, #4]\n                ");var n=t?"b":"",r=t&&"get"==e?"lsls r0, r0, #1\nadds r0, #1":"";"set"==e?this.write(`
                        str${n} r2, [r4, ${o}]
                        bx lr
                    `):this.write(`
                        ldr${n} r0, [r4, ${o}]
                        ${r}
                        bx lr
                    `),this.write(`
            .notint:
                lsls r1, r1, #1
                ${this.t.pushLR()}
                push {r0, r2}
                mov r0, r1
                ${this.t.callCPP("pxt::toInt")}
                mov r1, r0
                pop {r0, r2}
            .doop:
                ${this.t.callCPP(`Array_::${e}At`)}
                ${r}
                ${this.t.popPC()}
            `),this.writeFailBranch(),"get"==e?this.write(`
                    .oob:
                        movs r0, #${t?1:0} ; 0 or undefined
                        bx lr
                `):this.write(`
                    .oob:
                        ${this.t.pushLR()}
                        b .doop
                `)}emitArrayMethods(){for(var e of["get","set"])this.emitArrayMethod(e,!0),this.emitArrayMethod(e,!1)}emitLambdaTrampoline(){var e=k.target.stackAlign?"r3,":"";this.write(`
            .section code
            _pxt_lambda_trampoline:
                push {${e} r4, r5, r6, r7, lr}
                mov r4, r8
                mov r5, r9
                mov r6, r10
                mov r7, r11
                push {r4, r5, r6, r7} ; save high registers
                mov r4, r1
                mov r5, r2
                mov r6, r3
                mov r7, r0
                `),this.emitInstanceOf(this.builtInClassNo(pxt.BuiltInType.RefAction),"validate"),this.write(`
                mov r0, sp
                push {r4, r5, r6, r7} ; push args and the lambda
                mov r1, sp
                bl pxt::pushThreadContext
                mov r6, r0          ; save ctx or globals
                mov r5, r7          ; save lambda for closure
                mov r0, r5          ; also save lambda pointer in r0 - needed by pxt::bindMethod
                ldr r1, [r5, #8]    ; ld fnptr
                movs r4, #3         ; 3 args
                blx r1              ; execute the actual lambda
                mov r7, r0          ; save result
                @dummystack 4
                add sp, #4*4        ; remove arguments and lambda
                mov r0, r6   ; or pop the thread context
                bl pxt::popThreadContext
                mov r0, r7 ; restore result
                pop {r4, r5, r6, r7} ; restore high registers
                mov r8, r4
                mov r9, r5
                mov r10, r6
                mov r11, r7
                pop {${e} r4, r5, r6, r7, pc}`),this.write(`
            .section code
            ; r0 - try frame
            ; r1 - handler PC
            _pxt_save_exception_state:
                push {r0, lr}
                ${this.t.callCPP("pxt::beginTry")}
                pop {r1, r4}
                str r1, [r0, #1*4] ; PC
                mov r1, sp
                str r1, [r0, #2*4] ; SP
                str r5, [r0, #3*4] ; lambda ptr
                bx r4
                `),this.write("\n            .section code\n            ; r0 - try frame\n            ; r1 - thread context\n            _pxt_restore_exception_state:\n                mov r6, r1\n                ldr r1, [r0, #2*4] ; SP\n                mov sp, r1\n                ldr r5, [r0, #3*4] ; lambda ptr\n                ldr r1, [r0, #1*4] ; PC\n                movs r0, #1\n                orrs r1, r0\n                bx r1\n                "),this.write("\n            .section code\n            _pxt_stringConv:\n            "),this.loadVTable(),this.checkSubtype(this.builtInClassNo(pxt.BuiltInType.BoxedString),".notstring"),this.write(`
                bx lr

            .notstring: ; no string, but vtable in r3
                ldr r7, [r3, #4*${k.firstMethodOffset()-1}]
                cmp r7, #0
                beq .fail
                push {r0, lr}
                movs r4, #1
                blx r7
                str r0, [sp, #0]
                b .numops

            .fail: ; not an object or no toString
                push {r0, lr}
            .numops:
                ${this.t.callCPP("numops::toString")}
                pop {r1}
                pop {pc}
            `)}emitProcCall(t){let n=[],e=null,o="",r=t.data;if(r.proc&&r.proc.inlineBody)return this.emitExpr(r.proc.inlineSelf(t.args));let i=-1==r.virtualIndex,s=!1;for(var a of k.U.reversed(t.args)){if(a.isPure()){if(!s||a.isStateless())continue}else s=!0;n.push(a)}if(n.reverse(),n.length<=1){var l=n[0];l&&(e=l,this.clearStack(!0),this.emitExpr(l),l==t.args[t.args.length-1]?o="r0":(o="r3",this.write(this.t.mov("r3","r0")))),n=[]}else for(var c of n)this.pushArg(c);this.alignExprStack(t.args.length);let u=["r1","r2","r3","r4"],d=[];if(n.length){let t=-1;for(var p of n)t=Math.max(this.exprStack.indexOf(p),t);if(++t<=u.length){u=u.slice(0,t),this.write(this.t.pop_fixed(u)),d=this.exprStack.splice(0,t);var g=[];for(let e=t-1;0<=e;--e)n.indexOf(d[e])<0&&(g.push(u[e]),this.exprStack.unshift(d[e]));g.length&&this.write(this.t.push_fixed(g))}else u=null,this.write(this.t.reg_gets_imm("r7",0))}var h,_,m,l=k.U.reversed(t.args);i&&l.unshift(l.pop());for(h of l)0<=n.indexOf(h)?(u?this.write(this.t.push_fixed([u[d.indexOf(h)]])):(this.write(this.loadFromExprStack("r0",h)),this.write(this.t.push_local("r0")+" ; re-push"),this.write(this.loadFromExprStack("r7",h,1,!0)),_=this.exprStack.indexOf(h),(m=k.ir.numlit(0)).currUses=1,m.totalUses=1,this.exprStack[_]=m),this.exprStack.unshift(h)):h===e?(this.write(this.t.push_local(o)+" ; the one arg"),this.pushToExprStack(h)):this.pushArg(h);let f=this.mkLbl("_proccall"),y=-1;if(i){let e=t.args.length-1;this.write(this.loadFromExprStack("r0",t.args[0])),this.emitLabelledHelper("lambda_call"+e,()=>{this.lambdaCall(e),this.writeFailBranch()})}else null!=r.virtualIndex||null!=r.ifaceIndex?null!=r.ifaceIndex?r.isSet?(k.assert(2==t.args.length),this.emitIfaceCall(r,t.args.length,"set")):this.emitIfaceCall(r,t.args.length,r.noArgs?"get":""):this.emitClassCall(r):(l=r.proc,y=l.seqNo,this.write(this.t.call_lbl(l.label()+(r.isThis?"_nochk":"")))),this.write(f+":");this.calls.push({procIndex:y,stack:0,addr:0,callLabel:f}),i&&t.args[0].isStateless()?this.clearArgs([t.args[0]],t.args.slice(1)):this.clearArgs([],t.args)}lambdaCall(t){this.write("; lambda call"),this.loadVTable(),k.target.switches.skipClassCheck||this.checkSubtype(this.builtInClassNo(pxt.BuiltInType.RefAction)),this.write(`
                movs r4, #${t}
                ldrh r1, [r0, #4]
                cmp r1, #0
                bne .pushR5
                ldr r1, [r0, #8]
                bx r1 ; keep lr from the caller
            .pushR5:
                sub sp, #8
            `);for(let e=0;e<t;++e)this.write(`ldr r1, [sp, #4*${e+2}]`),this.write(`str r1, [sp, #4*${e}]`);this.write(`
                str r5, [sp, #4*${t}]
                mov r1, lr
                str r1, [sp, #4*${t+1}]
                mov r5, r0
                ldr r7, [r5, #8]
                blx r7 ; exec actual lambda
                ldr r4, [sp, #4*${t+1}] ; restore what was in LR
                ldr r5, [sp, #4*${t}] ; restore lambda ctx
            `);for(let e=0;e<t;++e)this.write(`ldr r1, [sp, #4*${e}]`),this.write(`str r1, [sp, #4*${e+2}]`);this.write("\n                add sp, #8\n                bx r4\n            "),this.write("; end lambda call")}emitStore(e,t){switch(e.exprKind){case k.ir.EK.CellRef:var n=e.data;if(this.emitExpr(t),n.isGlobal()){let e=this.bitSizeInfo(n.bitSize),t="#"+n.index;n.index>=e.immLimit&&(this.write(this.t.emit_int(n.index,"r1")),t="r1"),this.write(this.t.load_reg_src_off("r7","r6","#0")),this.write(this.t.load_reg_src_off("r0","r7",t,!1,!0,e))}else{var[n,o,r]=this.cellref(n);this.write(this.t.load_reg_src_off("r0",n,o,r,!0))}break;case k.ir.EK.FieldAccess:this.emitRtCall(k.ir.rtcall("dummy",[e.args[0],t]),()=>this.emitFieldAccess(e,!0));break;default:k.oops()}}cellref(e){if(e.isGlobal())throw k.oops();var t;return e.iscap?(t=e.index+3,k.assert(0<=t&&t<32),["r5",t.toString(),!0]):e.isarg?["sp","args@"+e.index.toString()+":"+this.baseStackSize,!1]:["sp","locals@"+e.index,!1]}emitLambdaWrapper(o){if(this.write(""),this.write(".section code"),this.write(".balign 4"),o&&(this.proc.info.usedAsValue=!0),this.proc.info.usedAsValue||this.proc.info.usedAsIface){this.proc.info.usedAsValue&&(this.write(this.proc.label()+"_Lit:"),this.write(this.t.obj_header("pxt::RefAction_vtable")),this.write(".short 0, 0 ; no captured vars"),this.write(`.word ${this.proc.label()}_args@fn`)),this.write(this.proc.label()+"_args:");let n=this.proc.args.length;if(0!=n){this.write("cmp r4, #"+n),this.write(`bge ${this.proc.label()}_nochk`);let e=this.stackAlignmentNeeded(n+1),t=e?n+2:n+1;this.write("push {lr}"),this.emitLabelledHelper("expand_args_"+n,()=>{this.write("movs r0, #0"),this.write("movs r1, #0"),e&&this.write("push {r0}");for(let e=n;0<e;e--)e!=n&&(this.write("cmp r4, #"+e),this.write("blt .zero"+e),this.write(`ldr r0, [sp, #${t-1}*4]`),this.write(`str r1, [sp, #${t-1}*4] ; clear existing`),this.write(`.zero${e}:`)),this.write("push {r0}");this.write("bx lr")}),this.write(`bl ${this.proc.label()}_nochk`);o=n+(e?1:0);this.write("@dummystack "+o),this.write("add sp, #4*"+o),this.write("pop {pc}")}}}emitCallRaw(e){var t=k.hexfile.lookupFunc(e);k.assert(!!t,"unimplemented raw function: "+e),this.alignedCall(e)}}}(ts=ts||{}),function(e){{var N=e.pxtc||(e.pxtc={});const O={"numops::adds":"+","numops::subs":"-","numops::div":"/","numops::mod":"%","numops::muls":"*","numops::ands":"&","numops::orrs":"|","numops::eors":"^","numops::bnot":"~","numops::lsls":"<<","numops::asrs":">>","numops::lsrs":">>>","numops::le":"<=","numops::lt":"<","numops::lt_bool":"<","numops::ge":">=","numops::gt":">","numops::eq":"==","pxt::eq_bool":"==","pxt::eqq_bool":"===","numops::eqq":"===","numops::neqq":"!==","numops::neq":"!="},g={"pxsim.Boolean_":"","pxsim.pxtcore":"","pxsim.String_":"","pxsim.ImageMethods":"","pxsim.Array_":"","pxsim.pxtrt":"","pxsim.numops":""},h={"pxsim.Array_.getAt":"","pxsim.Array_.length":"","pxsim.Array_.mk":"","pxsim.Array_.push":"","pxsim.Boolean_.bang":"","pxsim.String_.concat":"","pxsim.String_.stringConv":"","pxsim.numops.toBool":"","pxsim.numops.toBoolDecr":"","pxsim.pxtcore.mkAction":"","pxsim.pxtcore.mkClassInstance":"","pxsim.pxtrt.ldlocRef":"","pxsim.pxtrt.mapGetByString":"","pxsim.pxtrt.stclo":"","pxsim.pxtrt.stlocRef":""};function p(e){let t="";for(var n of Object.keys(e)){var o=n.replace(/\./g,"_");e[n]=o,t+=`const ${o} = ${n};
`}return t}function w(e){var t="pxsim."+(e="pxt."==(e=e.replace(/::/g,".")).slice(0,4)?"pxtcore."+e.slice(4):e);if(h.hasOwnProperty(t))return h[t];var n=t.lastIndexOf(".");if(0<n){const e=t.slice(0,n);if(g.hasOwnProperty(e))return g[e]+t.slice(n)}return t}N.isBuiltinSimOp=function(e){return!!N.U.lookup(O,e.replace(/\./g,"::"))},N.shimToJs=w;const _=["runtime","oops","doNothing","pxsim","globals","maybeYield","setupDebugger","isBreakFrame","breakpoint","trace","checkStack","leave","checkResumeConsumed","setupResume","setupLambda","checkSubtype","failedCast","buildResume","mkVTable","bind","leaveAccessor"];N.jsEmit=function(n){let o="(function (ectx) {\n'use strict';\n";for(var e of _)o+=`const ${e} = ectx.${e};
`;o=(o=(o+="const __this = runtime;\nconst pxtrt = pxsim.pxtrt;\n")+"let yieldSteps = 1;\nectx.setupYield(function() { yieldSteps = 100; })\n")+"pxsim.setTitle("+JSON.stringify(n.getTitle())+");\n";var t,r={},i={};for(t of n.res.configData||[])r[t.key+""]=t.value,i[t.name]=t.key;o=(o+="pxsim.setConfigData("+JSON.stringify(r,null,1)+", "+JSON.stringify(i,null,1)+");\n")+"pxtrt.mapKeyNames = "+JSON.stringify(n.ifaceMembers,null,1)+";\n";var s=n.setPerfCounters(["SysScreen"]);o=(o=(o+="__this.setupPerfCounters("+JSON.stringify(s,null,1)+");\n")+p(h))+p(g);let a=0,l=0;n.procs.forEach(e=>{let t;e.cachedJS?(t=e.cachedJS,a+=t.length):(t=function(f,y){if(y.cachedJS)return y.cachedJS;let t="",k=e=>{t+=e+"\n"},b=e=>{t+="    "+e+"\n"},v=N.ir.EK,T=[],n=0,o={},r="",E=(k(`
function ${y.label()}(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;
`),y.perfCounterNo&&k(`if (step == 0) __this.startPerfCounter(${y.perfCounterNo});
`),k("\nwhile (true) {\nif (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;\nswitch (step) {\n  case 0:\n"),y.locals.forEach(e=>{b(x(e)+" = undefined;")}),y.args.length&&(b("if (s.lambdaArgs) {"),y.args.forEach((e,t)=>{b(`  ${x(e)} = (s.lambdaArgs[${t}]);`)}),b("  s.lambdaArgs = null;"),b("}")),y.classInfo&&y.info.thisParameter&&(b("r0 = s.arg0;"),D(y.classInfo,"validate")),0),S=[];for(var e of y.body)e.stmtKind==N.ir.SK.Label&&0<e.lblNumUses&&(e.lblId=++E);let i=0;for(var s of y.body){switch(s.stmtKind){case N.ir.SK.Expr:I(s.expr);break;case N.ir.SK.StackEmpty:d();break;case N.ir.SK.Jmp:let t=!1;for(let e=i+1;e<y.body.length&&y.body[e].stmtKind==N.ir.SK.Label;++e)if(s.lbl==y.body[e]){t=!0;break}a=s,l=t,a.lbl.lblNumUses==N.ir.lblNumUsesJmpNext||l?(N.assert(a.jmpMode==N.ir.JmpMode.Always),a.expr&&I(a.expr)):(N.assert(0<a.lbl.lblNumUses),l=`{ step = ${a.lbl.lblId}; continue; }`,a.jmpMode==N.ir.JmpMode.Always?(a.expr&&I(a.expr),b(l)):(I(a.expr),a.jmpMode==N.ir.JmpMode.IfNotZero?b("if (r0) "+l):b("if (!r0) "+l)));break;case N.ir.SK.Label:0<s.lblNumUses&&k(`  case ${s.lblId}:`);break;case N.ir.SK.Comment:k("// "+s.expr.data);break;case N.ir.SK.Breakpoint:!function(e){let t,n=e.breakpointInfo.id;if(b(`s.lastBrkId = ${n};`),f.options.breakpoints){var o=`return breakpoint(s, ${t=++E}, ${n}, r0);`;e.breakpointInfo.isDebuggerStmt?b(o):(b(`if ((breakpoints[0] && isBreakFrame(s)) || breakpoints[${n}]) `+o),f.options.trace&&b(`else return trace(${n}, s, ${t}, ${y.label()}.info);`))}else{if(!f.options.trace)return;t=++E,b(`return trace(${n}, s, ${t}, ${y.label()}.info);`)}k(`  case ${t}:`)}(s);break;default:N.oops()}i++}d(),y.perfCounterNo&&k(`__this.stopPerfCounter(${y.perfCounterNo});
`),y.isGetter()?b("return leaveAccessor(s, r0)"):b("return leave(s, r0)"),k("  default: oops()"),k("} } }");var a,l,c=N.nodeLocationInfo(y.action);return c.functionName=y.getName(),c.argumentNames=y.args&&y.args.map(e=>e.getName()),k(y.label()+".info = "+JSON.stringify(c)),y.isGetter()&&k(y.label()+".isGetter = true;"),y.isRoot&&k(`${y.label()}.continuations = [ ${S.join(",")} ]`),k(C(y.label()+"_mk",y.label(),n,Object.keys(o))),k(r),y.cachedJS=t;function C(e,t,n,o){let r="";r+=`
function ${e}(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: ${t}, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
`;for(let e=0;e<n;++e)r+=`  tmp_${e}: undefined,
`;for(var i of o)r+=`  ${i}: undefined,
`;return r+="} }\n"}function x(e){return e.isGlobal()?"globals."+e.uniqueName():e.iscap?`s.caps[${e.index}]`:(e=e.uniqueName(),o[e]=!0,"s."+e)}function B(e){return function(e){switch(e.exprKind){case v.NumberLiteral:case v.PointerLiteral:case v.SharedRef:case v.CellRef:return 1;default:return}}(e)?A(e):(I(e),"r0")}function A(e){switch(e.exprKind){case v.NumberLiteral:if(!0===e.data)return"true";if(!1===e.data)return"false";if(null===e.data)return"null";if(void 0===e.data)return"undefined";if("number"==typeof e.data)return e.data+"";throw N.oops("invalid data: "+typeof e.data);case v.PointerLiteral:if(e.ptrlabel())return e.ptrlabel().lblId+"";if(null!=e.hexlit())return r+=`const ${e.data} = pxsim.BufferMethods.createBufferFromHex("${e.hexlit()}")
`,e.data;if("string"==typeof e.jsInfo)return e.jsInfo;N.U.oops();case v.SharedRef:var t=e.args[0],t=(N.U.assert(!!t.currUses),N.U.assert(t.currUses<t.totalUses),t.currUses++,T.indexOf(t));return N.U.assert(0<=t),"s.tmp_"+t;case v.CellRef:return x(e.data);default:throw N.oops()}}function I(t){switch(t.exprKind){case v.JmpValue:b("// jmp value (already in r0)");break;case v.Nop:b("// nop");break;case v.FieldAccess:var e=t.data,n=e.shimName,o=B(t.args[0]);return n?void b(`r0 = ${o}${n};`):void b(`r0 = ${o}.fields["${e.name}"];`);case v.Store:var r=t.args[0],i=t.args[1];switch(r.exprKind){case v.CellRef:var s=r.data,a=B(i);b(`${x(s)} = ${function(e){switch(e){case 0:return"";case 1:return"pxtrt.toInt8";case 3:return"pxtrt.toInt16";case 5:return"pxtrt.toInt32";case 2:return"pxtrt.toUInt8";case 4:return"pxtrt.toUInt16";case 6:return"pxtrt.toUInt32";default:throw N.oops()}}(s.bitSize)}(${a});`);break;case v.FieldAccess:let e=r.data,t=e.shimName;t=t||`.fields["${e.name}"]`,I(N.ir.rtcall("="+t,[r.args[0],i]));break;default:N.oops()}return;case v.RuntimeCall:return n=t,(o=N.ir.flattenArgs(n.args)).precomp.forEach(I),e=n.data,o=o.flattened.map(A),void("langsupp::ignore"!=e&&(u="",u="."==e[0]?""+o[0]+e+`(${o.slice(1).join(", ")})`:"="==e[0]?`(${o[0]})${e.slice(1)} = (${o[1]})`:N.U.startsWith(e,"new ")?`new ${w(e.slice(4))}(${o.join(", ")})`:N.U.lookup(O,e)?2==o.length?`(${o[0]} ${N.U.lookup(O,e)} ${o[1]})`:`(${N.U.lookup(O,e)} ${o[0]})`:`${w(e)}(${o.join(", ")})`,0==n.callingConvention?b(`r0 = ${u};`):(d=++E,S.push(d),"String_::stringConv"==e&&b(`if ((${o[0]}) && (${o[0]}).vtable) {`),2==n.callingConvention?b(`(function(cb) { ${u}.then(cb) })(buildResume(s, ${d}));`):(b(`setupResume(s, ${d});`),b(u+";")),b("checkResumeConsumed();"),b("return;"),"String_::stringConv"==e&&b(`} else { s.retval = (${o[0]}) + ""; }`),k(`  case ${d}:`),b("r0 = s.retval;"))));case v.ProcCall:{var l=t;u=l.data,d=u.proc;if(d&&d.inlineBody)return I(d.inlineSelf(l.args));const p=N.ir.rtcall("<frame>",[]),g=(p.totalUses=1,p.currUses=0,T.length),h=(T.push(p),"s.tmp_"+g),_=++E,m=-1==u.virtualIndex;if(d)b(h+` = ${d.label()}_mk(s);`);else{let t="generic";null!=u.ifaceIndex?t="if_"+f.ifaceMembers[u.ifaceIndex]:m?t="lambda":null!=u.virtualIndex?t=u.classInfo.id+"_v"+u.virtualIndex:N.U.oops();const k=l.args.length;t+="_"+k+"_mk",f.recordHelper(y.usingCtx,t,()=>{var e=N.U.range(k).map(e=>"arg"+e);return C(t,"null",5,e)}),b(h+` = ${t}(s);`)}l.args.forEach((e,t)=>{let n="arg"+t;m&&(n=0==t?"argL":"arg"+(t-1)),b(h+`.${n} = ${B(e)};`)});let e=`s.pc = ${_}; return ${h};`;if(null!=u.callLocationIndex&&(e=`s.callLocIdx = ${u.callLocationIndex}; `+e),null!=u.ifaceIndex){N.U.assert(null==d);const y=f.ifaceMembers[u.ifaceIndex];N.U.assert(!!y,"no name for "+u.ifaceIndex),b(`if (!${h}.arg0.vtable.iface) {`);var c=l.args.map((e,t)=>h+".arg"+t);c.splice(1,0,JSON.stringify(y));const p=`pxsim_pxtrt.map${u.isSet?"Set":"Get"}ByString`;u.noArgs?b(`  s.retval = ${p}(${c.join(", ")});`):(N.U.assert(!u.isSet),b(`  setupLambda(${h}, ${p}(${c.slice(0,2).join(", ")}), ${l.args.length});`),b("  "+e)),b("} else {"),b(`  ${h}.fn = ${h}.arg0.vtable.iface["${u.isSet?"set/":""}${y}"];`);c=h+`.arg0.fields["${y}"]`;u.isSet?(b(`  if (${h}.fn === null) { ${c} = ${h}.arg1; }`),b(`  else if (${h}.fn === undefined) { failedCast(${h}.arg0) } `)):u.noArgs?(b(`  if (${h}.fn == null) { s.retval = ${c}; }`),b(`  else if (!${h}.fn.isGetter) { s.retval = bind(${h}); }`)):(b(`  if (${h}.fn == null) { setupLambda(${h}, ${c}, ${l.args.length}); ${e} }`),b(`  else if (${h}.fn.isGetter) { ${h}.stage2Call = true; ${e}; }`)),b(` else { ${e} }`),b("}"),e=""}else if(-1==u.virtualIndex)N.U.assert(null==d),b(`setupLambda(${h}, ${h}.argL);`);else if(null!=u.virtualIndex){N.U.assert(null==d),N.assert(0<=u.virtualIndex),D(u.classInfo,"validate",h+".arg0");const l=u.classInfo.vtable[u.virtualIndex];b(h+`.fn = ${h}.arg0.vtable.methods.${l.getName()};`)}else N.U.assert(null!=d);e&&b(e),k(`  case ${_}:`),b("r0 = s.retval;"),p.currUses=1;return}case v.SharedDef:c=t;if(c=c.args[0],N.U.assert(1<=c.totalUses),N.U.assert(0===c.currUses),(c.currUses=1)==c.totalUses)return I(c);{const N=T.length;T.push(c);let e=B(c);"r0"!=e&&(e="r0 = "+e),b(`s.tmp_${N} = ${e};`)}return;case v.Sequence:return t.args.forEach(I);case v.InstanceOf:return I(t.args[0]),void D(t.data,t.jsInfo);default:b(`r0 = ${A(t)};`)}var u,d}function u(e,t="r0"){return`checkSubtype(${t}, ${e.id+"_VT"})`}function D(e,t,n="r0"){"bool"==t?b(`r0 = ${u(e)};`):"validate"==t?b(`if (!${u(e,n)}) failedCast(${n});`):N.U.oops()}function d(){for(var e of T)e.totalUses!==e.currUses&&N.oops();n=Math.max(T.length,n),T=[]}}(n,e),l+=t.length),o+="\n"+t+"\n"}),o+=N.U.values(n.codeHelpers).join("\n")+"\n",n.usedClassInfos.forEach(e=>{o+=function(e){N.U.assert(void 0!==e.classNo),N.U.assert(void 0!==e.lastSubtypeNo);let t=parseInt(e.attrs.maxBgInstances),n=(t=t||null,`const ${e.id}_VT = mkVTable({
  name: ${JSON.stringify(N.getName(e.decl))},
  numFields: ${e.allfields.length},
  classNo: ${e.classNo},
  lastSubtypeNo: ${e.lastSubtypeNo},
  maxBgInstances: ${t},
  methods: {
`);for(var o of e.vtable)n+=`    "${o.getName()}": ${o.label()},
`;n+="  },\n  iface: {\n";for(var r of e.itable)n+=`    "${r.name}": ${r.proc?r.proc.label():"null"},
`,r.setProc?n+=`    "set/${r.name}": ${r.setProc.label()},
`:r.proc||(n+=`    "set/${r.name}": null,
`);return n+="  },\n",e.toStringMethod&&(n+="  toStringMethod: "+e.toStringMethod.label()+",\n"),n+="});\n"}(e)}),n.res.breakpoints&&(o+=`
const breakpoints = setupDebugger(${n.res.breakpoints.length}, [${n.globals.filter(e=>e.isUserVariable).map(e=>`"${e.uniqueName()}"`).join(",")}])
`);const c=(o+=`
return ${n.procs[0]?n.procs[0].label():"null"}
})
`).length,u=e=>(100*e/c).toFixed(2)+"%",d=`// total=${o.length} new=${u(l)} cached=${u(a)} other=${u(c-l-a)}
`;n.writeFile(N.BINARY_JS,d+o)}}}(ts=ts||{}),function(e){{var c=e.pxtc||(e.pxtc={});c.thumbCmpMap={"numops::lt":"_cmp_lt","numops::gt":"_cmp_gt","numops::le":"_cmp_le","numops::ge":"_cmp_ge","numops::eq":"_cmp_eq","numops::eqq":"_cmp_eqq","numops::neq":"_cmp_neq","numops::neqq":"_cmp_neqq"};const r={"numops::adds":"_numops_adds","numops::subs":"_numops_subs","numops::orrs":"_numops_orrs","numops::eors":"_numops_eors","numops::ands":"_numops_ands","numops::lsls":"_numops_lsls","numops::asrs":"_numops_asrs","numops::lsrs":"_numops_lsrs","pxt::toInt":"_numops_toInt","pxt::fromInt":"_numops_fromInt"};class t extends c.AssemblerSnippets{stackAligned(){return c.target.stackAlign&&1<c.target.stackAlign}pushLR(){return this.stackAligned()?"push {lr, r5}  ; r5 for align":"push {lr}"}popPC(){return this.stackAligned()?"pop {pc, r5}  ; r5 for align":"pop {pc}"}nop(){return"nop"}mov(e,t){return`mov ${e}, `+t}helper_ret(){return"bx r4"}reg_gets_imm(e,t){return`movs ${e}, #`+t}push_fixed(e){return"push {"+e.join(", ")+"}"}pop_fixed(e){return"pop {"+e.join(", ")+"}"}proc_setup(t,e){let n="";if(0<t){n+="    movs r0, #0\n";for(let e=0;e<t;++e)n+="    push {r0} ;loc\n"}return n}proc_return(){return"pop {pc}"}debugger_stmt(e){return c.oops(),`
    @stackempty locals
    ldr r0, [r6, #0] ; debugger
    subs r0, r0, #4  ; debugger
${e}:
    ldr r0, [r0, #0] ; debugger
`}debugger_bkpt(e){return c.oops(),`
    @stackempty locals
    ldr r0, [r6, #0] ; brk
${e}:
    ldr r0, [r0, #0] ; brk
`}debugger_proc(e){return c.oops(),`
    ldr r0, [r6, #0]  ; brk-entry
    ldr r0, [r0, #4]  ; brk-entry
${e}:`}push_local(e){return`push {${e}}`}push_locals(e){return`sub sp, #4*${e} ; push locals ${e} (align)`}pop_locals(e){return`add sp, #4*${e} ; pop locals `+e}unconditional_branch(e){return"bb "+e}beq(e){return"beq "+e}bne(e){return"bne "+e}cmp(e,t){return"cmp "+e+", "+t}cmp_zero(e){return"cmp "+e+", #0"}load_reg_src_off(e,t,n,o,r,i){n=n.replace(/:\d+$/,""),o&&(n="#4*"+n);let s="str",a="ldr";return i&&(32==i.immLimit?s="strb":64==i.immLimit&&(s="strh"),a=i.needsSignExt?s.replace("str","ldrs"):s.replace("str","ldr")),r?s+` ${e}, [${t}, ${n}]`:a+` ${e}, [${t}, ${n}]`}rt_call(e,t,n){return e+" "+t+", "+n}alignedCall(e,t){return t?this.push_locals(t)+`
bl ${e}
`+this.pop_locals(t):"bl "+e}call_lbl(e,t,n){var o=c.U.lookup(r,e);return o&&(e=o,t=!1),(t=!t&&0<e.indexOf("::")?!0:t)?this.callCPP(e,n):this.alignedCall(e,n)}call_reg(e){return"blx "+e}helper_prologue(){return`
    @stackmark args
    ${this.pushLR()}
`}helper_epilogue(){return`
    ${this.popPC()}
    @stackempty args
`}load_ptr_full(e,t){return c.assert(!!e),`
    ldlit ${t}, ${e}
`}load_vtable(e,t){return`ldr ${e}, [${t}, #0]`}lambda_init(){return"\n    mov r5, r0\n    mov r4, lr\n    bl pxtrt::getGlobalsPtr\n    mov r6, r0\n    bx r4\n"}saveThreadStack(){return"mov r7, sp\n    str r7, [r6, #4]\n"}restoreThreadStack(){return c.target.switches.gcDebug?"movs r7, #0\n    str r7, [r6, #4]\n":""}callCPPPush(e){return this.pushLR()+"\n"+this.callCPP(e)+"\n"+this.popPC()+"\n"}callCPP(e,t){return this.saveThreadStack()+this.alignedCall(e,t)+"\n"+this.restoreThreadStack()}inline_decr(e){return`
    lsls r1, r0, #30
    bne .tag${e}
    bl _pxt_decr
.tag${e}:
`}arithmetic(){let t="";const n=e=>{var t=".boxed:\n";return t+=`
                    ${this.pushLR()}
                    push {r0, r1}
                    ${this.saveThreadStack()}
                    ${e}
                    ${this.restoreThreadStack()}
                    add sp, #8
                    ${this.popPC()}
                `},e=e=>{t+=`
_numops_${e}:
    @scope _numops_${e}
    lsls r2, r0, #31
    beq .boxed
    lsls r2, r1, #31
    beq .boxed
`},o=e=>{t=(t+="    blx lr\n")+n("bl numops::"+e)};for(var r of["adds","subs"])e(r),t+=`
    subs r2, r1, #1
    ${r} r2, r0, r2
    bvs .boxed
    movs r0, r2
`,o(r);for(var i of["ands","orrs","eors"])e(i),t+=`    ${i} r0, r1
`,"eors"==i&&(t+="    adds r0, r0, #1\n"),o(i);for(var s of["lsls","lsrs","asrs"])e(s),t+="\n    ; r3 := (r1 >> 1) & 0x1f\n    lsls r3, r1, #26\n    lsrs r3, r3, #27\n","asrs"==s?t+="\n    asrs r0, r3\n    movs r2, #1\n    orrs r0, r2\n":(t+="lsrs"==s?"\n    asrs r2, r0, #1\n    lsrs r2, r3\n    lsrs r3, r2, #30\n    bne .boxed\n":"\n    asrs r2, r0, #1\n    lsls r2, r3\n    lsrs r3, r2, #30\n    beq .ok\n    cmp r3, #3\n    bne .boxed\n.ok:\n",t+="\n    lsls r0, r2, #1\n    adds r0, r0, #1\n"),o(s);t+=`
@scope _numops_toInt
_numops_toInt:
    asrs r0, r0, #1
    bcc .over
    blx lr
.over:
    lsls r0, r0, #1
    ${this.callCPPPush("pxt::toInt")}

_numops_fromInt:
    lsls r2, r0, #1
    asrs r1, r2, #1
    cmp r0, r1
    bne .over2
    adds r0, r2, #1
    blx lr
.over2:
    ${this.callCPPPush("pxt::fromInt")}
`;for(var a of Object.keys(c.thumbCmpMap))a=a.replace(/.*::/,""),t+=`
.section code
_cmp_${a}:
    lsls r2, r0, #31
    beq .boxed
    lsls r2, r1, #31
    beq .boxed
    subs r0, r1
    b${a.replace("qq","q").replace("neq","ne")} .true
.false:
    movs r0, #0
    bx lr
.true:
    movs r0, #1
    bx lr
`,t+=n(`
                        bl numops::${a}
                        bl numops::toBoolDecr
                        cmp r0, #0`);return t}emit_int(e,n){let o=!1;function t(e){c.assert(0<=e&&e<=255);let t="";return o?e&&(t=`adds ${n}, #${e}
`):t=`movs ${n}, #${e}
`,o=!0,t}function r(e=8){return`lsls ${n}, ${n}, #${e}
`}c.assert(null!=e);let i=Math.floor(e),s=!1,a=(i<0&&(s=!0,i=-i),0);if(255<i){let e=i;for(;0==(1&e);)e>>>=1,a++;c.numBytes(e)<c.numBytes(i)?i=e:a=0}let l="";switch(c.numBytes(i)){case 4:l=(l+=t(i>>>24&255))+r();case 3:l=(l+=t(i>>>16&255))+r();case 2:l=(l+=t(i>>>8&255))+r();case 1:l+=t(255&i);break;default:c.oops()}return a&&(l+=r(a)),s&&(l+=`negs ${n}, ${n}
`),4<l.split("\n").length?`ldlit ${n}, ${Math.floor(e)}
`:l}}c.ThumbSnippets=t}}(ts=ts||{}),function(y){{var S=y.pxtc||(y.pxtc={}),e;const A={"pxtrt::mapSetGeneric":"mapset","pxtrt::mapGetGeneric":"mapget"},I={};function k(e,t,n){for(var o,r=S.computeHashMultiplier(e.itable.map(e=>e.idx)),i=S.U.toArray(r.mapping);3&i.length;)i.push(0);let s=`
${C(e)}_start:
        .short ${8*e.allfields.length+8}  ; size in bytes
        .byte ${pxt.ValTypeObject}, ${pxt.VTABLE_MAGIC} ; magic
        .short ${i.length} ; entries in iface hashmap
        .short ${e.lastSubtypeNo||e.classNo} ; last sub class-id
        .short ${e.classNo} ; class-id
        .short 0 ; reserved
        .word ${r.mult} ; hash-mult
`;x()?s+="\n            .word pxt::RefRecord_destroy\n            .word pxt::RefRecord_print\n            .word pxt::RefRecord_scan\n            .word pxt::RefRecord_gcsize\n            .word 0,0,0,0 ; keep in sync with VM_NUM_CPP_METHODS\n":s+="\n            .word 0,0, 0,0, 0,0, 0,0 ; space for 4 (VM_NUM_CPP_METHODS) native methods\n",s+=`
        .balign 4
${e.id}_IfaceVT:
`;const a=i.length>>2;let l="",c=a,u={};for(o of e.itable){u[o.idx+""]=c;const e=o.proc?o.proc.isGetter()?1:2:0;l=(l+=`  .short ${o.idx}, ${e} ; ${o.name}
`)+`  .word ${o.proc?o.proc.vtLabel()+"@fn":o.info}
`,c+=1,o.setProc&&(l=(l+=`  .short ${o.idx}, 2 ; set ${o.name}
`)+`  .word ${o.setProc.vtLabel()}@fn
`,c+=1)}l+="  .word 0, 0, 0, 0 ; the end\n",c+=1;for(let e=0;e<i.length;++e)n.itEntries++,i[e]&&n.itFullEntries++;return s=(s+="  .short "+S.U.toArray(i).map((e,t)=>u[e+""]||a).join(", ")+"\n")+l+"\n"}let m;function b(e){e=e.getTime()/1e3;return`${e>>>0}, `+(e/4294967296|0)}(e=m=m||{})[e.Invalid=0]="Invalid",e[e.InfoHeader=1]="InfoHeader",e[e.OpCodeMap=2]="OpCodeMap",e[e.NumberLiterals=3]="NumberLiterals",e[e.ConfigData=4]="ConfigData",e[e.IfaceMemberNames=5]="IfaceMemberNames",e[e.NumberBoxes=6]="NumberBoxes",e[e.Function=32]="Function",e[e.Literal=33]="Literal",e[e.VTable=34]="VTable";let f={};function C(e){return e.classNo||(f[e.id]=e),e.id+"_VT"}function x(){return S.target.useESP}function B(e){return x()?"0xffffffff, "+e:"0xffffffff, 0xffffffff ; -> "+e}S.vmEmit=function(a,t){let s=`; VM start
_img_start:
${S.hexfile.hexPrelude()}
`;f={};const c={dblText:[],dblBoxText:[],dbls:{},opcodeMap:{},opcodes:S.vm.opcodes.map(e=>"pxt::op_"+e.replace(/ .*/,""))};for(c.opcodes.unshift(null);c.opcodes.length<128;)c.opcodes.push(null);let l=0;function r(e,t,n,o,r=0){if(s+=`
; --- ${e}
.section code
    .set ${e} = ${l}
`,o)for(var i of o)s+=`    .set ${i} = ${l}
`;s=(s+=`
_start_${e}:
    .byte ${t}, 0x00
    .short ${r}
    .word _end_${e}-_start_${e}
`)+n()+`
.balign 8
_end_${e}:
`,l++}const e=new Date;let n=S.U.toUTF8(t.name,!0),o=(n=100<n.length?n.slice(0,100):n).length+1;1&o&&o++;const i=128-o;r("_info",m.InfoHeader,()=>`
                ; magic - \\0 added by assembler
                .string "\\nPXT64\\n"
                .hex 5471fe2b5e213768 ; magic
                .hex ${S.hexfile.hexTemplateHash()} ; hex template hash
                .hex 0000000000000000 ; @SRCHASH@
                .word ${a.globalsWords}   ; num. globals
                .word ${a.nonPtrGlobals} ; non-ptr globals
                .word 0, 0 ; last usage time
                .word ${b(e)} ; installation time
                .word ${b(e)} ; publication time - TODO
                .word _img_end-_img_start ; total image size
                .space 60 ; reserved
                .string ${JSON.stringify(n)}
                .space ${i} ; pad to 128 bytes
`),a.procs.forEach(o=>{r(o.label(),m.Function,()=>{{var _=c,m=a,i=o,e;let t="";const s=e=>{t+=e+"\n"},T=e=>{t+="    "+e+"\n"},E=S.ir.EK;let d=[],p=[],g=!1,r=0,h=0;const l=8388607;pxt.options.debug&&console.log("EMIT",i.toString()),n(),t="";for(e of d)e.reset();return g=!0,S.U.assert(0==h),n(),t;function n(){s(`;
; Proc: ${i.getFullName()}
;`),T(".section code"),m.procs[0]==i&&s("; main"),T(".word "+B("pxt::RefAction_vtable")),T(`.short 0, ${i.args.length} ; #args`),T(`.short ${i.captured.length}, 0 ; #cap`),T(".word .fnstart-_img_start, 0  ; func+possible padding"),r=i.locals.length+p.length,T(".fnstart:"),T(`pushmany ${r} ; incl. ${p.length} tmps`);for(var e of i.body)switch(e.stmtKind){case S.ir.SK.Expr:k(e.expr);break;case S.ir.SK.StackEmpty:v();for(var t of p)t&&S.oops(`uses: ${t.currUses}/${t.totalUses} `+t.toString());break;case S.ir.SK.Jmp:n=e,o=void 0,o=n.lbl.lblName,n.jmpMode==S.ir.JmpMode.Always?(n.expr&&k(n.expr),T("jmp "+o)):(k(n.expr),n.jmpMode==S.ir.JmpMode.IfNotZero?T("jmpnz "+o):n.jmpMode==S.ir.JmpMode.IfZero?T("jmpz "+o):S.oops());break;case S.ir.SK.Label:s(e.lblName+":");break;case S.ir.SK.Comment:s("; "+e.expr.data);break;case S.ir.SK.Breakpoint:break;default:S.oops()}var n,o;T(`ret ${i.args.length}, `+r)}function f(e){var t;return e.isGlobal()?(S.U.assert(0==(3&e.index)),"glb "+(e.index>>2)+" ; "+e.getName()):e.iscap?"cap "+e.index+" ; "+e.getName():e.isarg?(t=i.args.length-e.index-1,S.assert(0<=t,"arg#"+t),`loc ${h+r+2+t} ; `+e.getName()):(t=e.index+p.length,S.assert(!g||t<r,"cell#"+t),S.assert(0<=t,"cell#"+t),"loc "+(h+t))}function y(i){switch(i.exprKind){case E.NumberLiteral:var s=S.taggedSpecial(i.data);if(null!=s)T(`ldspecial ${s} ; `+i.data);else{let e=i.data,t=0,n=0;s=e<<1>>1!=e;if((0|e)==e){if(Math.abs(e)<=l)return void T(e<0?"ldintneg "+-e:"ldint "+e);t=(e<<1|1)>>>0,n=e<0?1:0}else{var a=new Float64Array(1),a=(a[0]=e,new Uint32Array(a.buffer));a[1]+=65536,t=a[0],n=a[1]}let o=t+","+n,r=S.U.lookup(_.dbls,o);if(null==r){if(r=_.dblText.length,_.dblText.push(`.word ${t}, ${n}  ; ${r}: `+i.data),s){const S="pxt::number_vt";_.dblBoxText.push(`.word ${x()?S:"0xffffffff ; "+S}
`);a=new Float64Array(1),s=(a[0]=e,new Uint32Array(a.buffer));_.dblBoxText.push(`.word ${s[0]}, ${s[1]} ; ${e}
`)}_.dbls[o]=r}T(`ldnumber ${r} ; `+i.data)}return;case E.PointerLiteral:return void T("ldlit "+i.data);case E.SharedRef:a=i.args[0],s=((!a.currUses||a.currUses>=a.totalUses)&&(console.log(a.sharingInfo()),S.U.assert(!1)),a.currUses++,p.indexOf(a));return s<0&&(console.log(p,a),S.assert(!1)),T("ldloc "+(s+h)+(a.currUses==a.totalUses?" ; LAST":"")),void v();case E.CellRef:return void T("ld"+f(i.data));case E.InstanceOf:k(i.args[0]),s=i.data,"bool"==i.jsInfo?T("checkinst "+C(s)):S.U.oops();break;default:throw S.oops("kind: "+i.exprKind)}}function k(t){switch(t.exprKind){case E.JmpValue:T("; jmp value (already in r0)");break;case E.Nop:T("; nop");break;case E.FieldAccess:var o=t.data;k(t.args[0]),T(`ldfld ${o.idx}, `+C(o.classInfo));break;case E.Store:var e=t.args[0],n=t.args[1];switch(e.exprKind){case E.CellRef:k(n);var r=e.data,i="st"+f(r);if(r.isGlobal()&&0!=r.bitSize){const e=S.sizeOfBitSize(r.bitSize)|(S.isBitSizeSigned(r.bitSize)?16:0);T("bitconv "+e)}T(i);break;case E.FieldAccess:r=e.data;k(e.args[0]),b(),k(n),T(`stfld ${r.idx}, `+C(r.classInfo)),h--;break;default:S.oops()}return;case E.RuntimeCall:var o=t,s=o.data;if("pxt::beginTry"==s)T("try "+o.args[0].data);else{s=S.U.lookup(I,s)||s,v();let e=S.U.lookup(A,s),t=o.args,n=0;if("pxt::mkClassInstance"!=s){for(let e=0;e<t.length;++e)k(t[e]),e<t.length-1&&(b(),n++);"langsupp::ignore"==s?n&&T(`popmany ${n} ; ignore`):e?T(e):function(e){var t=S.hexfile.lookupFunc(e),n=(t||S.U.oops("missing function: "+e),_.opcodeMap[t.name]);null==n&&(n=_.opcodes.length,_.opcodes.push(t.name),_.opcodeMap[t.name]=n,t.value=n),T("callrt "+e)}(s),h-=n}else T("newobj "+t[0].data)}return;case E.ProcCall:{s=t;var a=s.data,l=a.proc;if(l&&l.inlineBody){const S=l.inlineSelf(s.args);return pxt.options.debug&&console.log("INLINE",s.toString(),"->",S.toString()),k(S)}let e=0;var s=s.args.slice(),c=-1==a.virtualIndex?s.shift():null;for(var u of s)k(u),b(),e++;s=s.length;c?(k(c),T("callind "+s)):null!=a.ifaceIndex?(c=a.ifaceIndex+" ; ."+m.ifaceMembers[a.ifaceIndex],a.isSet?(T("callset "+c),S.U.assert(2==s)):a.noArgs?(T("callget "+c),S.U.assert(1==s)):T(`calliface ${s}, `+c)):null!=a.virtualIndex?S.U.oops():T("callproc "+l.label());h-=e;return}case E.SharedDef:c=t;if(c=c.args[0],S.U.assert(1<=c.totalUses),S.U.assert(0===c.currUses),c.currUses=1,d.push(c),1==c.totalUses)return k(c);{k(c);let t=-1;for(let e=0;e<p.length;++e)if(null==p[e]){t=e;break}t<0?(g&&(console.log(c,p),S.assert(!1,"missed tmp")),t=p.length,p.push(c)):p[t]=c,T("stloc "+(t+h))}return;case E.Sequence:return t.args.forEach(k);default:return y(t)}}function b(){T("push"),h++}function v(){for(let e=0;e<p.length;++e){var t=p[e];t&&t.currUses==t.totalUses&&(g||d.push(t),p[e]=null)}}}},[o.label()+"_Lit"])}),s+="_code_end:\n\n_helpers_end:\n\n",a.usedClassInfos.forEach(e=>{r(C(e),m.VTable,()=>k(e,0,a))}),S.U.values(f).forEach(e=>{e.itable=[],e.classNo=65520,r(C(e),m.VTable,()=>k(e,0,a))}),f={};let u=0;r("ifaceMemberNames",m.IfaceMemberNames,()=>`    .word ${a.ifaceMembers.length} ; num. entries
`+a.ifaceMembers.map(e=>`    .word ${a.emitString(e)}  ; ${u++} .`+e).join("\n")),s+="_vtables_end:\n\n",S.U.iterMap(a.hexlits,(e,t)=>{r(t,m.Literal,()=>`.word ${B("pxt::buffer_vt")}
`+S.hexLiteralAsm(e),[],pxt.BuiltInType.BoxedBuffer)}),S.U.unique(a.ifaceMembers.concat(Object.keys(a.strings)),e=>e).forEach(e=>{var t=S.utf8AsmStringLiteral(e);let n=pxt.BuiltInType.BoxedString;"pxt::string_inline_ascii_vt"==t.vt?n=pxt.BuiltInType.BoxedString_ASCII:"pxt::string_skiplist16_packed_vt"==t.vt?n=pxt.BuiltInType.BoxedString_SkipList:"pxt::string_inline_utf8_vt"==t.vt?n=pxt.BuiltInType.BoxedString:S.oops("invalid vt");const o=`.word ${B(t.vt)}
`+t.asm;r(a.strings[e],m.Literal,()=>o,[],n)}),r("numberBoxes",m.NumberBoxes,()=>c.dblBoxText.join("\n")+"\n.word 0, 0, 0 ; dummy entry to make sure not empty"),r("numberLiterals",m.NumberLiterals,()=>c.dblText.join("\n")+"\n.word 0, 0 ; dummy entry to make sure not empty");const d=a.res.configData||[];r("configData",m.ConfigData,()=>d.map(e=>`    .word ${e.key}, ${e.value}  ; ${e.name}=`+e.value).join("\n")+"\n    .word 0, 0");let p=c.opcodes.map(e=>null==e?"":e).join("\0")+"\0",g="";for(;p;){let e=p.slice(0,64);p=p.slice(64),1&e.length&&(e+="\0"),g+=".hex "+S.U.toHex(S.U.stringToUint8Array(e))+"\n"}r("opcodeMap",m.OpCodeMap,()=>g),s=(s+="_literals_end:\n")+"_img_end:\n\n; The end.\n",a.writeFile(S.BINARY_ASM,s);t=S.assemble(t.target,a,s);if(t.src&&a.writeFile(S.BINARY_ASM,t.src),pxt.options.debug){let n=t.thumbFile.peepCounts,e=Object.keys(n);e.sort((e,t)=>n[t]-n[e]);for(var h of e.slice(0,50))console.log(h+"  "+n[h])}if(t.buf){let e="";for(var _ of t.buf)e+=String.fromCharCode(255&_,_>>8);if(e=y.pxtc.encodeBase64(e),x()){a.writeFile(S.BINARY_PXT64,e);const I=S.hexfile.patchHex(a,t.buf,!1,!!S.target.useUF2)[0];a.writeFile(pxt.outputName(S.target),y.pxtc.encodeBase64(I))}else a.writeFile(pxt.outputName(S.target),e)}}}}(ts=ts||{}),function(pe){var ge=pe.pxtc||(pe.pxtc={});{var e,he=ge.decompiler||(ge.decompiler={});let ce,ue;(e=ce=he.DecompileParamKeys||(he.DecompileParamKeys={})).DecompileLiterals="decompileLiterals",e.TaggedTemplate="taggedTemplate",e.DecompileIndirectFixedInstances="decompileIndirectFixedInstances",e.DecompileArgumentAsString="decompileArgumentAsString",(e=ue=he.CommentKind||(he.CommentKind={}))[e.SingleLine=0]="SingleLine",e[e.MultiLine=1]="MultiLine",he.FILE_TOO_LARGE_CODE=9266,he.DECOMPILER_ERROR=9267;const Pe=pe.SyntaxKind,c=/^[^\f\n\r\t\v\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]*$/,I=/^(?:Array<(.+)>)|(?:(.+)\[\])$/,Le="math_number",Me="math_number_minmax",Fe="math_integer",Ue="math_whole_number",He="logic_boolean",Ve={"+":{type:"math_arithmetic",op:"ADD"},"-":{type:"math_arithmetic",op:"MINUS"},"/":{type:"math_arithmetic",op:"DIVIDE"},"*":{type:"math_arithmetic",op:"MULTIPLY"},"**":{type:"math_arithmetic",op:"POWER"},"%":{type:"math_modulo",leftName:"DIVIDEND",rightName:"DIVISOR"},"<":{type:"logic_compare",op:"LT"},"<=":{type:"logic_compare",op:"LTE"},">":{type:"logic_compare",op:"GT"},">=":{type:"logic_compare",op:"GTE"},"==":{type:"logic_compare",op:"EQ"},"===":{type:"logic_compare",op:"EQ"},"!=":{type:"logic_compare",op:"NEQ"},"!==":{type:"logic_compare",op:"NEQ"},"&&":{type:"logic_operation",op:"AND"},"||":{type:"logic_operation",op:"OR"}},u=/^\s*\/\/\s*(.*)$/,d=/^\s*(?:(?:(?:\/\*\*?)|(?:\*))(?!\/))?\s*(.*?)(?:\*?\*\/)?$/;class t{constructor(e){this.renames=e,this.renames.sort((e,t)=>e.span.start-t.span.start)}getRenamesInSpan(e,t){var n=[];for(const o of this.renames){if(o.span.start>t)break;o.span.start>=e&&n.push(o)}return n}getRenameForPosition(e){for(const t of this.renames){if(t.span.start>e)return;if(t.span.start===e)return t}}}function a(t,n,o=!0){if(1===t.length&&"x"!==t&&"y"!==t&&"z"!==t){var e=t.charCodeAt(0);if(97<=e&&e<=122){const t=e-97;for(let e=1;e<26;e++){var r=String.fromCharCode(97+(t+e)%26);if("x"!==r&&"y"!==r&&"z"!==r&&!n[r])return o&&(n[r]=!0),r}}}for(let e=2;;e++){var i=t+e;if(!n[i])return o&&(n[i]=!0),i}}let de;function _e(n,o,t=!1,r=!1){switch(n.kind){case Pe.WhileStatement:case Pe.IfStatement:case Pe.Block:return;case Pe.ExpressionStatement:return _e(n.expression,o,t,r);case Pe.VariableStatement:var i=n,e=o;for(const E of i.declarationList.declarations){const i=T(E,e);if(i)return i}return;case Pe.CallExpression:{var[i,s,a=!1,l=!1]=[n,o,t,r];const S=ge.pxtInfo(i).callInfo;if(!S)return ge.Util.lf("Function call not supported in the blocks");const C=s.attrs(S);let e;if(pe.isIdentifier(i.expression)&&(e=s.declaredFunctions[i.expression.text]),!a&&S.isExpression&&!e){if(!s.aliasBlocks[S.qName])return ge.Util.lf("No output expressions as statements");S.decompilerBlockAlias=s.aliasBlocks[S.qName]}if(!("Math.pow"==S.qName||pxt.Util.startsWith(S.qName,"Math.")&&Ie(S.qName.substring(5)))){if(C.blockId===ge.PAUSE_UNTIL_TYPE){const pe=i.arguments[0];return 1===i.arguments.length&&function(e){if(e.kind===Pe.FunctionExpression||e.kind===Pe.ArrowFunction){if(function(e){switch(e.kind){case Pe.BinaryExpression:var t=e.operatorToken.kind;return t!=Pe.PlusEqualsToken&&t!=Pe.MinusEqualsToken&&t!=Pe.EqualsToken;case Pe.PrefixUnaryExpression:t=e.operator;return t!=Pe.PlusPlusToken&&t!=Pe.MinusMinusToken;case Pe.PostfixUnaryExpression:t=e.operator;return t!=Pe.PlusPlusToken&&t!=Pe.MinusMinusToken;case Pe.CallExpression:t=ge.pxtInfo(e).callInfo;return ge.assert(!!t),t.isExpression;case Pe.ParenthesizedExpression:case Pe.NumericLiteral:case Pe.StringLiteral:case Pe.NoSubstitutionTemplateLiteral:case Pe.TrueKeyword:case Pe.FalseKeyword:case Pe.NullKeyword:case Pe.TaggedTemplateExpression:return 1;default:return}}(e.body))return 1;e=e.body;if(1===e.statements.length&&Te(e.statements[0]).kind===Pe.ReturnStatement)return 1}return}(pe)?void 0:ge.Util.lf("Predicates must be inline expressions that return a value")}a=Ce(S,C);if(a&&!C.handlerStatement&&!l)return ge.Util.lf("Events must be top level");if(!C.blockId||!C.block){const pe=pxt.blocks.builtinFunctionInfo[S.qName];if(!pe)return e?e.parameters.length!==S.args.length?ge.Util.lf("Function calls in blocks must have the same number of arguments as the function definition"):void 0:ge.Util.lf("Call statements must have a valid declared function");C.blockId=pe.blockId}var l=Be(S,s.blocks),c=s.blocks.apis.byQName[S.qName],u=pxt.blocks.compileInfo(c),d=u.parameters.length+(u.thisParameter?1:0);if(C.imageLiteral){if(1<S.args.length-d)return ge.Util.lf("Function call has more arguments than are supported by its block");i=i.arguments[0];if(i.kind!=Pe.StringLiteral&&i.kind!=Pe.NoSubstitutionTemplateLiteral)return ge.Util.lf("Only string literals supported for image literals");const ce=(i.text||"").replace(/\s+/g,""),s=C.imageLiteralRows||5,a=(C.imageLiteralColumns||5)*C.imageLiteral,l=a*s;return a*s!=ce.length?ge.Util.lf("Invalid image pattern ({0} expected vs {1} actual)",l,ce.length):void 0}const x=S.args.length-d;if(0<x&&!function(){if(C.mutatePropertyEnum&&2===x&&2<=S.args.length){var e=S.args[S.args.length-2],t=S.args[S.args.length-1];if(e.kind===Pe.ArrayLiteralExpression&&B(t)){const n=[];if(!e.elements.some(e=>e.kind!==Pe.PropertyAccessExpression||e.expression.kind!==Pe.Identifier||(n.push(e.name.text),e.expression.text!==C.mutatePropertyEnum))){e=ke(t);if(e){const o=e[0];return o.length===n.length&&!n.some(e=>-1===o.indexOf(e))}}}}return}()){let e=x;if(a&&e--,C.defaultInstance&&e--,0<e)return ge.Util.lf("Function call has more arguments than are supported by its block")}if(u.parameters.length||a){let n;const ge=C.defaultInstance||!!u.thisParameter;if(l.forEach((e,t)=>{n||ge&&0===t||(ge&&t--,n=p(e))}),n)return n}if(c){const pe=s.blocks.apis.byQName[c.namespace];if(pe&&pe.attributes.fixedInstances&&!pe.attributes.decompileIndirectFixedInstances&&S.args.length){const pe=ge.pxtInfo(S.args[0]).callInfo;if(!pe||!s.attrs(pe).fixedInstance)return ge.Util.lf("Fixed instance APIs can only be called directly from the fixed instance")}}function p(e){const t=Te(e.value),o=e.info,n=e.param;if(o.isEnum){if(r(t))return;if(t.kind===Pe.CallExpression){const e=ge.pxtInfo(t).callInfo,ce=s.attrs(e);if(e&&"TD_ID"===ce.shim&&e.args&&1===e.args.length&&r(Te(e.args[0])))return}else if(t.kind===Pe.Identifier){const e=ge.pxtInfo(t).commentAttrs;if(e&&e.enumIdentity)return}return ge.Util.lf("Enum arguments may only be literal property access expressions")}if(xe(t)&&(n.fieldEditor||n.shadowBlockId)){let e=!(!n.fieldOptions||!n.fieldOptions[ce.DecompileLiterals]);if(!e&&n.shadowBlockId){const ge=s.blocks.blocksById[n.shadowBlockId];if(ge&&ge.parameters&&ge.parameters.length){const t=ge.parameters[0].name;e=!ge.attributes.paramFieldEditorOptions||!ge.attributes.paramFieldEditorOptions[t]||!!ge.attributes.paramFieldEditorOptions[t][ce.DecompileLiterals]}else e=!0}if(!e)return ge.Util.lf("Field editor does not support literal arguments")}else if(t.kind===Pe.TaggedTemplateExpression&&n.fieldEditor){e=n.fieldOptions&&n.fieldOptions[ce.TaggedTemplate];if(!e)return ge.Util.lf("Tagged templates only supported in custom fields with param.fieldOptions.taggedTemplate set");const s=Te(t.tag);if(s.kind!==Pe.Identifier)return ge.Util.lf("Tagged template literals must use an identifier as the tag");if(s.getText().trim()!=e.trim())return ge.Util.lf("Function only supports template literals with tag '{0}'",e);if(t.template.kind!==Pe.NoSubstitutionTemplateLiteral)return ge.Util.lf("Tagged template literals cannot have substitutions")}else if(t.kind===Pe.ArrowFunction){const e=t;if(e.parameters.length)if("objectdestructuring"===C.mutate){const t=Te(e.parameters[0]);if(t.kind===Pe.Parameter&&t.name.kind!==Pe.ObjectBindingPattern)return ge.Util.lf("Object destructuring mutation callbacks can only have destructuring patters as arguments")}else for(const t of e.parameters)if(t.name.kind!==Pe.Identifier)return ge.Util.lf("Only identifiers allowed as function arguments")}else if(s.blocks.apis.byQName[o.type]&&s.blocks.apis.byQName[o.type].attributes.fixedInstances){if(A(n))return;if(n.shadowBlockId){const e=s.blocks.blocksById[n.shadowBlockId];if(e){const ge=pxt.blocks.compileInfo(e);if(ge.parameters&&A(ge.parameters[0]))return}}const e=ge.pxtInfo(t).callInfo;return e&&s.attrs(e).fixedInstance?void 0:ge.Util.lf("Arguments of a fixed instance type must be a reference to a fixed instance declaration")}function r(e){for(var t=o.type.split("."),n=[];e.kind===Pe.PropertyAccessExpression;)n.unshift(e.name.text),e=e.expression;if(e.kind===Pe.Identifier){n.unshift(e.text);for(let e=0;e<t.length;e++)if(t[e]!==n[e])return;return 1}}}}return}case Pe.VariableDeclaration:return T(n,o);case Pe.PostfixUnaryExpression:case Pe.PrefixUnaryExpression:return(d=n).operand.kind!=Pe.Identifier?ge.Util.lf("-- and ++ may only be used on an identifier"):d.operator!==Pe.PlusPlusToken&&d.operator!==Pe.MinusMinusToken?ge.Util.lf("Only ++ and -- supported as prefix or postfix unary operators in a statement"):void 0;case Pe.FunctionExpression:case Pe.ArrowFunction:{a=n;u=o;let e=!1;if(a.parameters.length&&(l=ve(a)[0])&&ge.pxtInfo(l).callInfo&&(l=ge.pxtInfo(l).callInfo,e="objectdestructuring"===u.attrs(l).mutate?a.parameters[0].name.kind!==Pe.ObjectBindingPattern:a.parameters.some(e=>e.name.kind!==Pe.Identifier)),e)return ge.Util.lf("Unsupported parameters in error function");return}case Pe.BinaryExpression:var g=n,h=o;if(g.left.kind===Pe.ElementAccessExpression){if(g.operatorToken.kind!==Pe.EqualsToken)return ge.Util.lf("Element access expressions may only be assigned to using the equals operator")}else{if(g.left.kind===Pe.PropertyAccessExpression)return g.operatorToken.kind!==Pe.EqualsToken&&g.operatorToken.kind!==Pe.PlusEqualsToken?ge.Util.lf("Property access expressions may only be assigned to using the = and += operators"):be(g.left,h);if(g.left.kind!==Pe.Identifier)return ge.Util.lf("This expression cannot be assigned to");switch(g.operatorToken.kind){case Pe.EqualsToken:return be(g.right,h);case Pe.PlusEqualsToken:case Pe.MinusEqualsToken:return;default:return ge.Util.lf("Unsupported operator token in statement {0}",Pe[g.operatorToken.kind])}}return;case Pe.ForStatement:return(b=n).initializer&&b.incrementor&&b.condition?b.initializer.kind!==Pe.VariableDeclarationList?ge.Util.lf("only variable declarations are permitted in for loop initializers"):(c=b.initializer).declarations?1!=c.declarations.length?ge.Util.lf("for loop with multiple variables not supported"):(c=c.declarations[0]).initializer.kind!==Pe.NumericLiteral||"0"!==c.initializer.text?ge.Util.lf("for loop initializers must be initialized to 0"):function(e){if(b.incrementor.kind===Pe.PostfixUnaryExpression||b.incrementor.kind===Pe.PrefixUnaryExpression){var t=b.incrementor;if(t.operator===Pe.PlusPlusToken&&t.operand.kind===Pe.Identifier)return t.operand.text===e}return}(c=c.name.text)?b.condition.kind!==Pe.BinaryExpression?ge.Util.lf("for loop conditionals must be binary comparison operations"):(v=b.condition).left.kind!==Pe.Identifier||v.left.text!==c?ge.Util.lf("left side of for loop conditional must be the variable declared in the initializer"):v.operatorToken.kind!==Pe.LessThanToken&&v.operatorToken.kind!==Pe.LessThanEqualsToken?ge.Util.lf("for loop conditional operator must be either < or <="):void 0:ge.Util.lf("for loop incrementors may only increment the variable declared in the initializer"):ge.Util.lf("for loop with out-of-scope variables not supported"):ge.Util.lf("for loops must have an initializer, incrementor, and condition");case Pe.ForOfStatement:return n.initializer.kind!==Pe.VariableDeclarationList?ge.Util.lf("only variable declarations are permitted in for of loop initializers"):void 0;case Pe.FunctionDeclaration:var _,m,f=n,y=r;if(!y)return ge.Util.lf("Function declarations must be top level");if(0<f.parameters.length&&o.opts.allowedArgumentTypes)for(const y of f.parameters){if(y.initializer||y.questionToken)return ge.Util.lf("Function parameters cannot be optional");const f=y.type?y.type.getText():void 0;if(!f)return ge.Util.lf("Function parameters must declare a type");if(-1===o.opts.allowedArgumentTypes.indexOf((_=f,m=void 0,(m=I.exec(_))?`${m[1]||m[2]}[]`:_)))return ge.Util.lf("Only types that can be added in blocks can be used for function arguments")}return;case Pe.EnumDeclaration:{v=n;if(!r)return ge.Util.lf("Enum declarations must be top level");y=v.name.text;if(!o.blocks.enumsByName[y])return ge.Util.lf("Enum declarations in user code must have a block");let t=!1;return v.members.forEach(e=>{if(!(t=e.name.kind!==Pe.Identifier?!0:t)&&e.initializer&&e.initializer.kind!==Pe.NumericLiteral){if(e.initializer.kind===Pe.BinaryExpression){e=e.initializer;if(e.operatorToken.kind===Pe.LessThanLessThanToken&&e.left.kind===Pe.NumericLiteral&&e.right.kind===Pe.NumericLiteral&&"1"==e.left.text)return}t=!0}}),t?ge.Util.lf("Invalid initializer for enum member"):void 0;return}case Pe.ModuleDeclaration:return(k=me(f=n,o))&&fe(f)?k:void 0;case Pe.ReturnStatement:return function e(t){const n=pe.getEnclosingBlockScopeContainer(t);if(n)switch(n.kind){case Pe.SourceFile:case Pe.ArrowFunction:case Pe.FunctionExpression:return!1;case Pe.FunctionDeclaration:return n.parent&&n.parent.kind===Pe.SourceFile&&!_e(n,o,!1,!0);default:return e(n)}return!1}(n)?void 0:ge.Util.lf("Return statements can only be used within top-level function declarations");case Pe.BreakStatement:case Pe.ContinueStatement:case Pe.DebuggerStatement:case Pe.EmptyStatement:return}var k,b,v;return ge.Util.lf("Unsupported statement in block: {0}",Pe[n.kind]);function T(e,t){let n;return e.name.kind!==Pe.Identifier?n=ge.Util.lf("Variable declarations may not use binding patterns"):e.initializer?ye(e)||(n=be(e.initializer,t)):n=ge.Util.lf("Variable declarations must have an initializer"),n}}function me(e,t){if(!pe.isModuleBlock(e.body))return ge.Util.lf("Namespaces cannot be nested.");var n=t.blocks.kindsByName[e.name.text];if(!n)return ge.Util.lf("Only namespaces with 'kind' blocks can be decompiled");var o=ge.Util.lf("Namespaces may only contain valid 'kind' exports");for(const ge of e.body.statements){if(function(e){e=pe.getLeadingCommentRangesOfNode(e,e.getSourceFile());return e&&e.length}(ge))return o;if(!pe.isVariableStatement(ge)||!ge.declarationList.declarations)return o;{const e=1===ge.declarationList.declarations.length,t=ge.modifiers&&1===ge.modifiers.length&&ge.modifiers[0].kind===Pe.ExportKeyword,r=ge.declarationList.flags&pe.NodeFlags.Const;if(!(e&&t&&r))return o;{const e=ge.declarationList.declarations[0];if(!e.initializer||!pe.isCallExpression(e.initializer)||!pe.isIdentifier(e.name))return o;const t=e.initializer;if(t.arguments.length)return o;if(pe.isPropertyAccessExpression(t.expression)&&pe.isIdentifier(t.expression.expression)){if(t.expression.expression.text!==n.name||t.expression.name.text!==n.createFunctionName)return o}else{if(!pe.isIdentifier(t.expression))return o;if(t.expression.text!==n.createFunctionName)return o}}}}}function fe(e){if(!pe.isModuleBlock(e.body))return ge.Util.lf("Namespaces cannot be nested.");if(e.name.text!==pxt.sprite.TILE_NAMESPACE)return ge.Util.lf("Tileset namespace must be named myTiles");const t=ge.Util.lf("The myTiles namespace can only export tile variables with image literal initializers and no duplicate ids"),n=ge.Util.lf("Tileset members must have a blockIdentity comment and no other annotations"),o=new RegExp(pxt.sprite.TILE_PREFIX+"(\\d+)"),r=[],i=/^\s*\/\/%\s*blockIdentity=[^\s]+\s*$/;for(const ge of e.body.statements){const e=pe.getLeadingCommentRangesOfNode(ge,ge.getSourceFile());if(!e||!e.length)return n;{const pe=e.map(e=>ge.getSourceFile().text.substr(e.pos,e.end-e.pos)).filter(e=>!!e);if(1!==pe.length||!i.test(pe[0]))return n}if(!pe.isVariableStatement(ge)||!ge.declarationList.declarations)return t;{const e=1===ge.declarationList.declarations.length,n=ge.modifiers&&1===ge.modifiers.length&&ge.modifiers[0].kind===Pe.ExportKeyword,i=ge.declarationList.flags&pe.NodeFlags.Const;if(!(e&&n&&i))return t;{const e=ge.declarationList.declarations[0];if(!e.initializer||!pe.isTaggedTemplateExpression(e.initializer)||!pe.isIdentifier(e.name))return t;const n=e.initializer;if(!pe.isIdentifier(n.tag)||"img"!==n.tag.text)return t;const Pe=o.exec(e.name.text);if(!Pe||-1!==r.indexOf(Pe[1]))return t;r.push(Pe[1])}}}}function ye(e){if(e.initializer){if(e.initializer.kind===pe.SyntaxKind.NullKeyword||e.initializer.kind===pe.SyntaxKind.FalseKeyword||(t=e.initializer).kind===Pe.ArrayLiteralExpression&&0===t.elements.length)return 1;if(pe.isStringOrNumericLiteral(e.initializer)){const pe=e.initializer.getText();return"0"===pe||Ee(pe)}{const pe=ge.pxtInfo(e.initializer).callInfo;if(pe&&pe.isAutoCreate)return 1}}var t}function ke(e){if(1===e.parameters.length&&e.parameters[0].name.kind===Pe.ObjectBindingPattern){const n=e.parameters[0].name.elements,o={};return[n.map(e=>{if(t(e.propertyName)&&t(e.name)){const t=e.name.text;return e.propertyName?(e=e.propertyName.text,o[e]=t,e):t}return""}),o]}function t(e){return!e||e.kind===Pe.Identifier}}function be(e,t){switch(e.kind){case Pe.NumericLiteral:case Pe.TrueKeyword:case Pe.FalseKeyword:case Pe.ExpressionStatement:case Pe.ArrayLiteralExpression:case Pe.ElementAccessExpression:return;case Pe.ParenthesizedExpression:return be(e.expression,t);case Pe.StringLiteral:case Pe.FirstTemplateToken:case Pe.NoSubstitutionTemplateLiteral:return i=e.text,c.test(i)?void 0:ge.Util.lf("Only whitespace character allowed in string literals is space");case Pe.Identifier:i=ge.pxtInfo(e);return(s=e)&&s.kind===Pe.Identifier&&"undefined"===s.text?ge.Util.lf("Undefined is not supported in blocks"):!Se(e)||i.commentAttrs&&i.commentAttrs.blockIdentity&&i.commentAttrs.enumIdentity?void 0:ge.Util.lf("Variable is declared in another file");case Pe.BinaryExpression:s=e.operatorToken.getText();return Ve[s]?void 0:ge.Util.lf("Could not find operator {0}",s);case Pe.PrefixUnaryExpression:s=e.operator;return s===Pe.MinusToken||s===Pe.PlusToken||s===Pe.ExclamationToken?void 0:ge.Util.lf("Unsupported prefix unary operator{0}",s);case Pe.PropertyAccessExpression:{var o=e;s=t;const a=ge.pxtInfo(o).callInfo;if(a){var n=s.attrs(a),r=s.compInfo(a);if(n.blockIdentity||"lists_length"===n.blockId||"text_length"===n.blockId)return;if(a.decl.kind===Pe.EnumMember){if(o.expression.kind===Pe.Identifier){const pe=o.expression.text;if(s.declaredEnums[pe])return}const[pe,a]=ve(o);let n=!0;if(pe){const o=ge.pxtInfo(pe).callInfo;if(o&&o.args){const pe=s.blocks.apis.byQName[o.qName],ge=1==pe.kind||2==pe.kind;pe&&o.args.forEach((e,t)=>{e===a&&pe.parameters[ge?t-1:t].isEnum&&(n=!1)})}}return n?ge.Util.lf("Enum value without a corresponding block"):void 0}if(n.fixedInstance&&o.parent){if(o.parent.parent&&o.parent.kind===Pe.PropertyAccessExpression&&o.parent.parent.kind===Pe.CallExpression){if(o.parent.parent.expression===o.parent)return}else if(o.parent.kind===Pe.CallExpression&&o.parent.expression!==o)return}else{if(n.blockCombine||n.blockId&&r&&r.thisParameter)return be(o.expression,s);if(pe.isIdentifier(o.expression)&&s.declaredKinds[o.expression.text]){const pe=o.name.text,ge=s.declaredKinds[o.expression.text];if(ge&&(-1!==ge.kindInfo.initialMembers.indexOf(pe)||-1!==ge.declaredNames.indexOf(pe)))return}}}return ge.Util.lf("No call info found");return}case Pe.CallExpression:return _e(e,t,!0,void 0);case Pe.TaggedTemplateExpression:return n=t,(r=ge.pxtInfo(e).callInfo)?(r=n.attrs(r)).blockIdentity?(n=n.blocks.apis.byQName[r.blockIdentity])?1!==pxt.blocks.compileInfo(n).parameters.length?ge.Util.lf("Tagged template functions must have 1 argument"):void 0:ge.Util.lf("Could not find blockIdentity for tagged template"):ge.Util.lf("Tagged template does not have blockIdentity set"):ge.Util.lf("Invalid tagged template")}var i,s;return ge.Util.lf("Unsupported syntax kind for output expression block: {0}",Pe[e.kind])}function ve(e){return e.parent?e.parent.kind===Pe.ParenthesizedExpression?ve(e.parent):[e.parent,e]:[void 0,e]}function Te(e){for(;e.kind===Pe.ParenthesizedExpression;)e=e.expression;return e}function Ee(e){return'""'===e||"''"===e||"``"===e}function Se(e){return 4&ge.pxtInfo(e).flags}function Ce(e,t){return t.blockId!==ge.PAUSE_UNTIL_TYPE&&(e.decl.parameters,e.args.some((e,t)=>e&&B(e)))}function xe(e){if(!e)return!1;switch(e.kind){case Pe.ParenthesizedExpression:return xe(e.expression);case Pe.ArrayLiteralExpression:var t=e;for(const e of t.elements)if(!xe(e)&&e.kind!==Pe.TaggedTemplateExpression)return!1;return!0;case Pe.NumericLiteral:case Pe.StringLiteral:case Pe.NoSubstitutionTemplateLiteral:case Pe.TrueKeyword:case Pe.FalseKeyword:return!0;case Pe.PrefixUnaryExpression:t=e;return(t.operator===Pe.PlusToken||t.operator===Pe.MinusToken)&&xe(t.operand);default:return!1}}function B(e){return e.kind===Pe.ArrowFunction||e.kind===Pe.FunctionExpression}function Be(n,e){var o=[],r=e.apis.byQName[n.qName];if(r){var e=e.apis.byQName[n.qName].attributes,i=pxt.blocks.compileInfo(r);pxt.blocks.builtinFunctionInfo[n.qName];let t=e.imageLiteral?1:0;i.thisParameter?o.push({value:Te(n.args[0]),info:null,param:i.thisParameter}):e.defaultInstance&&o.push({value:Te(n.args[0]),info:r.parameters[0],param:{definitionName:"__instance__",actualName:"this"}});var s=!(!i.thisParameter&&!e.defaultInstance);s&&t++;for(let e=t;e<n.args.length;e++)o.push({value:Te(n.args[e]),info:r.parameters[s?e-1:e],param:i.parameters[e-t]})}return o}function Ae(e){return e.body.statements.map(e=>{e=e.declarationList.declarations[0];return{name:e.name.text,initializer:e.initializer.getText()}})}function A(e){return e&&e.fieldOptions&&e.fieldOptions[ce.DecompileIndirectFixedInstances]}function Ie(e){return De(e)||Ne(e)||we(e)||-1!==pxt.blocks.MATH_FUNCTIONS.binary.indexOf(e)}function De(e){return-1!==pxt.blocks.MATH_FUNCTIONS.unary.indexOf(e)}function Ne(e){return-1!==pxt.blocks.MATH_FUNCTIONS.infix.indexOf(e)}function we(e){return-1!==pxt.blocks.ROUNDING_FUNCTIONS.indexOf(e)}function l(t,n,o=!1){var r=[],i=t.getFullText();if(n&&n.length)for(const s of n){const n=pe.getLineOfLocalPosition(t,s.end),a=pe.getStartPositionOfLine(n+1,t)||i.length,l=pe.getStartPositionOfLine(n+2,t)||i.length,c=!o&&!i.substr(a,l-a).trim();let e=i.substr(s.pos,s.end-s.pos);if(e=e&&e.replace(/\r\n/g,"\n"),s.kind===pe.SyntaxKind.SingleLineCommentTrivia){const pe=u.exec(e);pe?r.push({kind:ue.SingleLine,text:pe[1],start:s.pos,end:s.end,hasTrailingNewline:!!s.hasTrailingNewLine,followedByEmptyLine:c,isTrailingComment:o}):r.push({kind:ue.SingleLine,text:"",start:s.pos,end:s.end,hasTrailingNewline:!!s.hasTrailingNewLine,followedByEmptyLine:c,isTrailingComment:o})}else{const pe=e.split("\n").map(e=>{e=d.exec(e);return e?e[1]:""});r.push({kind:ue.MultiLine,lines:pe,start:s.pos,end:s.end,hasTrailingNewline:!!s.hasTrailingNewLine,followedByEmptyLine:c,isTrailingComment:o})}}return r}function Oe(e){let t="";for(const n of e)if(n.kind===ue.SingleLine){if(n.text===ge.ON_START_COMMENT||n.text===ge.HANDLER_COMMENT)continue;t+=n.text.trim()+"\n"}else for(const e of n.lines)t+=e.trim()+"\n";return t.trim()}function We(e){var t=e.getFullText(),n=pe.createScanner(e.languageVersion,!1,e.languageVariant,t,void 0,e.getFullStart());let o,r,i=[];for(;n.getTextPos()<e.end;){var s=n.scan();if(s===Pe.SingleLineCommentTrivia||s===Pe.MultiLineCommentTrivia){o=pe.getLeadingCommentRanges(t,n.getTokenPos())||[],r=(r=pe.getTrailingCommentRanges(t,n.getTokenPos())||[]).filter(t=>!o.some(e=>e.pos===t.pos)),i.push(...l(e,o,!1)),i.push(...l(e,r,!0));for(const pe of i)pe.end>n.getTextPos()&&n.setTextPos(pe.end)}}return i.sort((e,t)=>e.start-t.start),i}function Re(t,n){var o;for(let e=0;e<n.length;e++)!(o=n[e]).owner&&o.start>=t.pos&&o.end<=t.end&&(o.owner=t)}he.RenameMap=t,he.buildRenameMap=function(e,n,{declarations:o,takenNames:r}={declarations:"variables",takenNames:{}}){let i=pe.createLanguageService(new ge.LSHost(e));const s=[];(function t(e){pe.forEachChild(e,e=>{if(pe.isDeclarationName(e)&&("all"===o||pe.isVariableDeclaration(e.parent))){const pe=e.getText();if(r[pe]){const t=a(pe,r),o=i.findRenameLocations(n.fileName,e.pos+1,!1,!1);o&&o.forEach(e=>{s.push({name:t,diff:t.length-pe.length,span:e.textSpan})})}else r[pe]=!0}t(e)})})(n);e=r;return[new t(s),e]},he.getNewName=a,(e=de=de||{})[e.None=0]="None",e[e.InBlocksOnly=1]="InBlocksOnly",e[e.InTextBlocks=2]="InTextBlocks",he.decompileToBlocks=function(v,m,s,n){let p=0,e=m.statements;const o={blocksInfo:v,outfiles:{},diagnostics:[],success:!0,times:{}},T=(s.generateSourceMap&&(o.blockSourceMap=[]),{blocks:v,declaredFunctions:{},declaredEnums:{},declaredKinds:{},functionParamIds:{},attrs:S,compInfo:function(e){e=v.apis.byQName[e.qName];if(e)return pxt.blocks.compileInfo(e)},localReporters:[],tileset:[],opts:s||{},aliasBlocks:{}});m.getFullText();let h="";const r=[],a={},f=[],U=[],H=(()=>{let e=0;return()=>""+e++})(),t=v.apis.byQName,y=(Object.keys(t).forEach(e=>{e=t[e];e.attributes.blockAliasFor&&t[e.attributes.blockAliasFor]&&(T.aliasBlocks[e.attributes.blockAliasFor]=e.qName)}),We(m)),_=e=>{if(e.kind!==Pe.FunctionDeclaration||_e(e,T,!1,!0))if(e.kind!==Pe.EnumDeclaration||_e(e,T,!1,!0))if(pe.isModuleDeclaration(e))if(me(e,T))fe(e)||(T.tileset=Ae(e).map(({name:e,initializer:t})=>({projectId:parseInt(e.substr(pxt.sprite.TILE_PREFIX.length)),data:pxt.sprite.imageLiteralToBitmap(t).data()})));else{const pe=e.name.text,ge=Ae(e);T.declaredKinds[pe]&&T.declaredKinds[pe].declaredNames.push(...ge.map(({name:e})=>e))}else e.kind===Pe.Block&&pe.forEachChild(e,_);else{const pe=e.name.text;T.declaredEnums[pe]=!0,function(){const o=[];return e.members.forEach(e=>{ge.U.assert(e.name.kind===Pe.Identifier);var t=e.name.text;let n;if(e.initializer)if(e.initializer.kind===Pe.NumericLiteral)n=parseInt(e.initializer.text);else{const o=e.initializer;ge.U.assert(o.left.kind===Pe.NumericLiteral),ge.U.assert("1"===o.left.text),ge.U.assert(o.operatorToken.kind===Pe.LessThanLessThanToken),ge.U.assert(o.right.kind===Pe.NumericLiteral),n=1<<parseInt(o.right.text)}else n=0===o.length?0:o[o.length-1][1]+1;o.push([t,n])}),o}().forEach(([e,t])=>{r.push({name:t+e,type:pe})})}else T.declaredFunctions[F(e.name)]=e},V=(Object.keys(v.kindsByName).forEach(e=>{var t=v.kindsByName[e];T.declaredKinds[e]={kindInfo:t,declaredNames:[]}}),pe.forEachChild(m,_),()=>(Math.PI*Math.random()).toString(36).slice(2));let i;Object.keys(T.declaredFunctions).forEach(t=>{T.functionParamIds[t]={},T.declaredFunctions[t].parameters.forEach(e=>{T.functionParamIds[t][e.name.getText()]=V()+V()})}),Object.keys(T.declaredKinds).forEach(e=>{const t="KIND_"+e;T.declaredKinds[e].declaredNames.forEach(e=>r.push({name:e,type:t}))}),(r.length||T.tileset.length)&&(l("<variables>"),r.forEach(e=>{l(`<variable type="${ge.U.htmlEscape(e.type)}">${ge.U.htmlEscape(e.name)}</variable>`)}),T.tileset.forEach(e=>{l(`<variable type="${pxt.sprite.BLOCKLY_TILESET_TYPE}">${pxt.sprite.legacy.tileToBlocklyVariable(e)}</variable>`)}),l("</variables>"));try{i=se(e,void 0,!0,void 0,!s.snippetMode);for(const pe of y)pe.owner||f.push({refId:H(),comment:[pe]})}catch(e){if(!e.programTooLarge)return pxt.reportException(e),o.success=!1,o.diagnostics=ge.patchUpDiagnostics([{file:m,start:m.getFullStart(),length:m.getFullWidth(),messageText:e.message,category:pe.DiagnosticCategory.Error,code:he.DECOMPILER_ERROR}]),o;o.success=!1,o.diagnostics=ge.patchUpDiagnostics([{file:m,start:m.getFullStart(),length:m.getFullWidth(),messageText:e.message,category:pe.DiagnosticCategory.Error,code:he.FILE_TOO_LARGE_CODE}])}return i?c(i):s.snippetMode||e.length||(u(pe.pxtc.ON_START_TYPE,C(pe.pxtc.ON_START_TYPE,e[0])),d()),f.forEach(e=>{{let t=0;var n,o,r=Oe(e.comment);r.trim()&&((n=r.split("\n")).forEach(e=>t=Math.max(t,e.length)),o=Math.max(Math.min(10*t,480),160),l(`<comment h="${Math.max(Math.min(40*n.length,360),120)}" w="${o}" data="${ge.U.htmlEscape(e.refId)}">`),l(ge.U.htmlEscape(r)),l("</comment>"))}}),o.outfiles[m.fileName.replace(/(\.blocks)?\.\w*$/i,"")+".blocks"]=`<xml xmlns="http://www.w3.org/1999/xhtml">
${h}</xml>`,o;function l(e,t="\n"){h+=e+t}function E(e,t){t=t||`Language feature "${e.getFullText().trim()}"" not supported in blocks`,e=ge.patchUpDiagnostics([{file:m,start:e.getFullStart(),length:e.getFullWidth(),messageText:t,category:pe.DiagnosticCategory.Error,code:1001}]);pxt.debug("decompilation error: "+t),ge.U.pushRange(o.diagnostics,e),o.success=!1}function S(e){const t=v.apis.byQName[e.decompilerBlockAlias||e.qName];if(t){const e=t.attributes;if(!e.blockId||v.blocksById[e.blockId]||e.blockId===ge.PAUSE_UNTIL_TYPE)return t.attributes}else if(e.decl){const t=ge.parseComments(e.decl);if(t)return t}return{paramDefl:{},callingConvention:0}}function W(){var e;if(1500<++p)throw(e=new Error(ge.Util.lf("Could not decompile because the script is too large"))).programTooLarge=!0,e}function C(e,t){var n={kind:"statement",type:e};return o.blockSourceMap&&(n.id=function(e,t){if(e==pe.pxtc.ON_START_TYPE)return"xRRgvHNlG#rZ^u`HECiY";if(e=function(){var t="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,o=[];for(let e=0;e<20;e++)o[e]=t.charAt(Math.random()*n);return o.join("")}(),t){const pe=t.getFullStart();o.blockSourceMap.push({id:e,startPos:pe,endPos:pe+t.getFullWidth()})}return e}(e,t)),n}function x(e){return{kind:"expr",type:e}}function B(e,t,n,o){return{kind:"value",name:e,value:t,shadowType:n=(!n||n===Le)&&o&&o.min&&o.max?Me:n,shadowMutation:o}}function c(e){e&&(u(e.type,e),K(e),void 0!==e.data&&l(`<data>${ge.U.htmlEscape(e.data)}</data>`),e.handlers&&e.handlers.forEach(X),e.next&&(l("<next>"),c(e.next),l("</next>")),void 0!==e.comment&&l(`<comment pinned="false">${ge.U.htmlEscape(Oe(e.comment))}</comment>`),d())}function G(t,e){l("<mutation ",""),Object.keys(t).forEach(e=>{void 0!==t[e]&&l(`${e}="${t[e]}" `,"")}),e?(l(">"),e.forEach(t=>{l(`<${t.nodeName} `,""),Object.keys(t.attributes).forEach(e=>{l(`${e}="${t.attributes[e]}" `,"")}),l("/>")}),l("</mutation>")):l("/>")}function K(e){e.mutation&&G(e.mutation,e.mutationChildren),e.fields&&e.fields.forEach(z),e.inputs&&e.inputs.forEach(j)}function j(e){l(`<value name="${e.name}">`);let t=!1;if("expr"===e.value.kind){var n=e.value;if(n.type===Le&&e.shadowType===Me&&(n.type=Me,n.fields[0].name="SLIDER",n.mutation=e.shadowMutation),!(t=n.type===e.shadowType))switch(n.type){case"math_number":case"math_number_minmax":case"math_integer":case"math_whole_number":case"logic_boolean":case"text":t=!e.shadowType}}if(t)$(e.value,!0);else{if(void 0!==e.shadowType)switch(e.shadowType){case Le:case Fe:case Ue:l(`<shadow type="${e.shadowType}"><field name="NUM">0</field></shadow>`);break;case Me:l('<shadow type="math_number_minmax">'),e.shadowMutation&&G(e.shadowMutation),l('<field name="SLIDER">0</field></shadow>');break;case He:l('<shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow>');break;case"text":l('<shadow type="text"><field name="TEXT"></field></shadow>');break;default:l(`<shadow type="${e.shadowType}"/>`)}$(e.value)}l("</value>")}function z(e){l(`<field name="${ge.U.htmlEscape(e.name)}">${ge.U.htmlEscape(e.value.toString())}</field>`)}function X(e){l(`<statement name="${ge.U.htmlEscape(e.name)}">`),c(e.statement),l("</statement>")}function $(e,t=!1){var n;"text"===e.kind?l(e.value):(e=e,n=(t=t||e.isShadow)?"shadow":"block",t||W(),l(`<${n} ${e.id?`id="${e.id}" `:""}type="${ge.U.htmlEscape(e.type)}">`),K(e),l(`</${n}>`))}function u(e,t){W(),l(`<block ${t&&t.id?`id="${t.id}" `:""}type="${ge.U.htmlEscape(e)}">`)}function d(){l("</block>")}function A(o){if(be(o,T))return q(o);switch(o.kind){case Pe.ExpressionStatement:case Pe.ParenthesizedExpression:return A(o.expression);case Pe.Identifier:{var r=o;if(Se(r)){const d=ge.pxtInfo(r);return te(v.apis.byQName[d.commentAttrs.blockIdentity],d.commentAttrs.enumIdentity)}const d=F(r),p=r.text;let n=null;return T.localReporters.some(t=>{for(let e=0;e<t.length;++e)if(t[e].name===p)return n=t[e],!0;return!1}),n?Z(d,n.type,!1):(M(d,de.InBlocksOnly),N("variables_get","VAR",d));return}case Pe.StringLiteral:case Pe.FirstTemplateToken:case Pe.NoSubstitutionTemplateLiteral:return Q(o.text);case Pe.NumericLiteral:return D(o.text);case Pe.TrueKeyword:return g(!0);case Pe.FalseKeyword:return g(!1);case Pe.BinaryExpression:{r=o;var n=r.operatorToken.getText(),i=Ve[n];if(k(r))return J(r);var s=i.leftName||"A",a=i.rightName||"B";let e,t;t="&&"===n||"||"===n?(e=b(s,r.left),b(a,r.right)):(e=I(s,r.left,Le),I(a,r.right,Le));n=x(i.type);return n.fields=[],i.op&&n.fields.push(O("OP",i.op)),n.inputs=[e,t],n;return}case Pe.PrefixUnaryExpression:var e=o;switch(e.operator){case Pe.ExclamationToken:var t=x("logic_negate");return t.inputs=[b("BOOL",e.operand)],t;case Pe.PlusToken:return A(e.operand);case Pe.MinusToken:return e.operand.kind==Pe.NumericLiteral?D("-"+e.operand.text):ee(e.operand);default:E(e)}return;case Pe.PropertyAccessExpression:return R(o);case Pe.ArrayLiteralExpression:return s=o,(a=x("lists_create_with")).inputs=s.elements.map((e,t)=>I("ADD"+t,e)),a.mutation={items:s.elements.length.toString()},a;case Pe.ElementAccessExpression:return i=o,(n=x("lists_index_get")).inputs=[I("LIST",i.expression),I("INDEX",i.argumentExpression,Le)],n;case Pe.TaggedTemplateExpression:{var l=o;var c=ge.pxtInfo(l).callInfo;let e;var u=function(e){if(e.parent&&e.parent.kind===Pe.CallExpression){var t=e.parent,n=ge.pxtInfo(t).callInfo,t=t.arguments.indexOf(e);if(n&&-1!==t){const e=v.apis.byQName[n.qName];if(e){const ge=pxt.blocks.compileInfo(e);return ge&&ge.parameters[t]}}}}(l);if(u&&u.shadowBlockId){const l=T.blocks.blocksById[u.shadowBlockId];l&&"TD_ID"===l.attributes.shim&&(e=l)}e=e||T.blocks.apis.byQName[S(c).blockIdentity];u=pxt.blocks.compileInfo(e),c=x(e.attributes.blockId),u=u.parameters[0],l=u.fieldOptions&&u.fieldOptions[ce.DecompileArgumentAsString]?l.getText():l.template.text;return c.fields=[O(u.actualName,l)],c;return}case Pe.CallExpression:return P(o,void 0,void 0,!0);default:E(o,ge.Util.lf("Unsupported syntax kind for output expression block: {0}",Pe[o.kind]))}}function Y(r,i,e){if(n){e=n.getRenamesInSpan(i,e);if(e.length){let o=0;e.forEach(e=>{var t=e.span.start+o-i,n=t+e.span.length;o+=e.diff,r=r.slice(0,t)+e.name+r.slice(n)})}}return r}function q(e){var t=Y(e.getFullText(),e.getFullStart(),e.getEnd()).trim();return le(e),Re(e,y),N(ge.TS_OUTPUT_TYPE,"EXPRESSION",t)}function k(e){if(e.kind===Pe.BinaryExpression){var t=e;if("+"===t.operatorToken.getText()||t.operatorToken.kind==Pe.PlusEqualsToken)return ge.pxtInfo(e).exprInfo}}function J(e){var t=[],n=(!function e(t,n){k(t)?(e(t.left,n),e(t.right,n)):n.push(t)}(e,t),[]);for(let e=0;e<t.length;e++)(0<e||!Ee(t[e].getText()))&&n.push(I("ADD"+n.length,t[e],"text"));e=x("text_join");return e.inputs=n,e.mutation={items:n.length.toString()},e}function I(e,t,n,o){t="number"==typeof t?D(t.toString()):("boolean"==typeof t?g:"string"==typeof t?Q:A)(t);if("expr"==t.kind&&"math_number"==t.type){const e=t.fields[0].value;"math_integer"==n&&e%1==0&&(t.type="math_integer"),"math_whole_number"==n&&e%1==0&&0<e&&(t.type="math_whole_number")}return B(e,t,n,o)}function D(e){return N("math_number","NUM",e)}function Q(e){return N("text","TEXT",e)}function g(e){return N("logic_boolean","BOOL",e?"TRUE":"FALSE")}function N(e,t,n,o){e=x(e);return e.fields=[O(t,n)],e.isShadow=o,e}function w(e,t){return B(e,N("variables_get_reporter","VAR",t,!0),"variables_get_reporter")}function Z(e,t,n){var o=pxt.blocks.reporterTypeForArgType(t),e=N(o,"VALUE",e,n);return"argument_reporter_custom"===o&&(e.mutation={typename:t}),e}function O(e,t){return{kind:"field",name:e,value:t}}function ee(e){var t=x("math_arithmetic");return t.inputs=[I("A",0,Le),I("B",e,Le)],t.fields=[O("OP","MINUS")],t}function R(t,n=!1,o){var r=ge.pxtInfo(t).callInfo;if(r){if(t.expression.kind===Pe.Identifier){const ge=t.expression.text;if(T.declaredEnums[ge]){const n=v.enumsByName[ge];if(n&&n.blockId)return N(n.blockId,"MEMBER",t.name.text)}else if(T.declaredKinds[ge])return N(T.declaredKinds[ge].kindInfo.blockId,"MEMBER",t.name.text)}var i=S(r);if(o=i.blockId||o,i.blockCombine)return re(t,t,null,"@get@");if("lists_length"===i.blockId||"text_length"===i.blockId){const n=x(ge.U.htmlEscape(i.blockId));return n.inputs=[I("VALUE",t.expression)],n}let e=ge.U.htmlEscape(i.blockId||r.qName);var[s]=ve(t),s=s&&ge.pxtInfo(s).callInfo;if(n||!o&&!i.blockIdentity||s&&s.qName===i.blockIdentity)return{kind:"text",value:e};i.enumval&&s&&i.useEnumVal&&(e=i.enumval);s=T.compInfo(r);if(o&&s&&s.thisParameter){const n=x(o);return n.inputs=[I(ge.U.htmlEscape(s.thisParameter.definitionName),t.expression,s.thisParameter.shadowBlockId)],n}return te(i.blockIdentity?v.apis.byQName[i.blockIdentity]:v.blocksById[o],e)}E(t)}function te(e,t){var n=/(?:%|\$)([a-zA-Z0-9_]+)/.exec(e.attributes.block),e=x(ge.U.htmlEscape(e.attributes.blockId));return e.fields=[{kind:"field",name:ge.U.htmlEscape(n[1]),value:t}],e}function P(e,t,n,o=!1,r=!1){var s=e;let a,i=!1;var l,c,u,d,p,e=_e(s,T,o,r);if(e)a=ne(s,void 0,e);else switch(s.kind){case Pe.Block:return se(s.statements,t,r);case Pe.ExpressionStatement:return P(s.expression,t,n||s,o,r);case Pe.VariableStatement:if(!(a=se(s.declarationList.declarations,void 0,!1,n||s)))return h();i=!0;break;case Pe.FunctionExpression:case Pe.ArrowFunction:return P(s.body,t);case Pe.BinaryExpression:a=function(e){switch(e.left.text,e.operatorToken.kind){case Pe.EqualsToken:return e.left.kind===Pe.Identifier?L(e,e.left,e.right):e.left.kind==Pe.PropertyAccessExpression?oe(e,e.left,e.right,"@set@"):(t=e.left,n=e.right,(o=C("lists_index_set",e)).inputs=[I("LIST",t.expression),I("INDEX",t.argumentExpression,Le),I("VALUE",n)],o);case Pe.PlusEqualsToken:if(k(e)){const ge=C("variables_set",e),r=F(e.left);return M(r,de.InBlocksOnly),ge.inputs=[B("VALUE",J(e),Le)],ge.fields=[O("VAR",r)],ge}return e.left.kind==Pe.PropertyAccessExpression?oe(e,e.left,e.right,"@change@"):L(e,e.left,e.right,!0);case Pe.MinusEqualsToken:t=C("variables_change",e);return t.inputs=[B("VALUE",ee(e.right),Le)],t.fields=[O("VAR",F(e.left))],t;default:return void E(e,ge.Util.lf("Unsupported operator token in statement {0}",Pe[e.operatorToken.kind]))}var t,n,o}(s);break;case Pe.PostfixUnaryExpression:case Pe.PrefixUnaryExpression:a=(p=(d=s).operator===Pe.PlusPlusToken)||d.operator===Pe.MinusMinusToken?L(d,d.operand,p?1:-1,!0):void E(d);break;case Pe.VariableDeclaration:const e=s;if(ye(e))return p=e,U.push([F(p.name),p]),h();a=function(e){if((t=e).name.kind!==Pe.Identifier?(E(t,ge.Util.lf("Variable declarations may not use binding patterns")),0):t.initializer||(E(t,ge.Util.lf("Variable declarations must have an initializer")),0))return L(e,e.name,e.initializer);var t}(s);break;case Pe.WhileStatement:a=((u=C("device_while",d=s)).inputs=[b("COND",d.expression)],u.handlers=[{name:"DO",statement:P(d.statement)}],u);break;case Pe.IfStatement:a=function(e){var t=function t(n){let o={ifStatements:[{expression:n.expression,thenStatement:n.thenStatement}],elseStatement:n.elseStatement};if(n.elseStatement&&n.elseStatement.kind==Pe.IfStatement){let e=t(n.elseStatement);o.ifStatements=o.ifStatements.concat(e.ifStatements),o.elseStatement=e.elseStatement}return o}(e);const o=C("controls_if",e);return o.mutation={elseif:(t.ifStatements.length-1).toString(),else:t.elseStatement?"1":"0"},o.inputs=[],o.handlers=[],t.ifStatements.forEach((e,t)=>{var n=P(e.thenStatement);o.inputs.push(b("IF"+t,e.expression)),o.handlers.push({name:"DO"+t,statement:n})}),t.elseStatement&&(e=P(t.elseStatement),o.handlers.push({name:"ELSE",statement:e})),o}(s);break;case Pe.ForStatement:a=function(e){const t=e.initializer,n=(t.declarations[0].name.text,e.condition),o=F(t.declarations[0].name);let r;if(n.operatorToken.kind!==Pe.LessThanToken||function e(t){return t.kind===Pe.Identifier&&F(t)===o||pe.forEachChild(t,e)}(e.statement))if((r=C("pxt_controls_for",e)).fields=[],r.inputs=[],r.handlers=[],r.inputs=[w("VAR",o)],n.operatorToken.kind===Pe.LessThanToken){const pe=Te(n.right);if(pe.kind===Pe.NumericLiteral){const e=D(parseFloat(pe.text)-1+"");r.inputs.push(B("TO",e,Ue))}else{const e=x("math_arithmetic");e.fields=[O("OP","MINUS")],e.inputs=[I("A",pe,Le),I("B",1,Le)],r.inputs.push(B("TO",e,Ue))}}else n.operatorToken.kind===Pe.LessThanEqualsToken&&r.inputs.push(I("TO",n.right,Ue));else(r=C("controls_repeat_ext",e)).fields=[],r.inputs=[I("TIMES",n.right,Ue)],r.handlers=[];e=P(e.statement);return r.handlers=[{name:"DO",statement:e}],r}(s);break;case Pe.ForOfStatement:a=(l=F((u=s).initializer.declarations[0].name),(c=C("pxt_controls_for_of",u)).inputs=[I("LIST",u.expression),w("VAR",l)],l=P(u.statement),c.handlers=[{name:"DO",statement:l}],c);break;case Pe.FunctionDeclaration:a=function(e){const n=F(e.name);T.localReporters.push(e.parameters.map(e=>({name:e.name.getText(),type:e.type.getText()})));var t=P(e.body);let o;return T.localReporters.pop(),(o=C("function_definition",e)).mutation={name:n},e.parameters&&(o.mutationChildren=[],e.parameters.forEach(e=>{var t=e.name.getText();o.mutationChildren.push({nodeName:"arg",attributes:{name:t,type:e.type.getText(),id:T.functionParamIds[n][t]}})})),o.handlers=[{name:"STACK",statement:t}],o}(s);break;case Pe.CallExpression:a=function(t,n){const _=ge.pxtInfo(t).callInfo,m=S(_);if("Math.pow"==_.qName){const pe=x("math_arithmetic");return pe.inputs=[B("A",A(t.arguments[0]),Le),B("B",A(t.arguments[1]),Le)],pe.fields=[O("OP","POWER")],pe}if(pxt.Util.startsWith(_.qName,"Math.")){const pe=_.qName.substring(5);if(Ie(pe)){let e;return we(pe)?e=x("math_js_round"):(e=x("math_js_op"),o=De(pe)?"unary":Ne(pe)?"infix":"binary",e.mutation={"op-type":o}),e.inputs=_.args.map((e,t)=>B("ARG"+t,A(e),"math_number")),e.fields=[O("OP",pe)],e}}if(m.blockId===ge.PAUSE_UNTIL_TYPE){const pe=C(ge.PAUSE_UNTIL_TYPE,t),ce=t.arguments[0];var o=ce.body.kind===Pe.Block?ce.body.statements[0].expression:ce.body;return pe.inputs=[B("PREDICATE",A(o),"logic_boolean")],pe}if(!m.blockId||!m.block){const pe=pxt.blocks.builtinFunctionInfo[_.qName];if(!pe){const pe=F(t.expression);if(T.declaredFunctions[pe]){let r,e=!0;if(_.isExpression){const[pe]=ve(t);e=pe&&pe.kind===Pe.ExpressionStatement}return r=C(e?"function_call":"function_call_output",t),_.args.length&&(r.mutationChildren=[],r.inputs=[],T.declaredFunctions[pe].parameters.forEach((e,t)=>{var n=e.name.getText(),o=T.functionParamIds[pe][n],n=(r.mutationChildren.push({nodeName:"arg",attributes:{name:n,type:e.type.getText(),id:o}}),B(o,A(_.args[t])));r.inputs.push(n)})),r.mutation={name:pe},r}return ne(t)}m.blockId=pe.blockId}if(!m.imageLiteral){pe.isFunctionLike(_.decl);const a=Be(_,T.blocks),l=T.blocks.apis.byQName[_.decompilerBlockAlias||_.qName],f=pxt.blocks.compileInfo(l),y=n?x(m.blockId):C(m.blockId,t),k=e=>(y.inputs||(y.inputs=[])).push(e),b=e=>(y.fields||(y.fields=[])).push(e);"Math.max"==_.qName&&b({kind:"field",name:"op",value:"max"});let e=0;return a.forEach((r,i)=>{let s,a=r.value;const l=r.param,c=r.info,u=f.parameters[f.thisParameter?i-1:i],d=u&&u.range;if(d){const r=d.min,ge=d.max;s={min:r.toString(),max:ge.toString()}}if(0===i&&m.defaultInstance){if(a.getText()===m.defaultInstance)return;y.mutation={showing:"true"}}if(!m.mutatePropertyEnum||i!==_.args.length-2){let o;if(l&&l.isOptional&&++e,l&&l.shadowBlockId&&(o=v.blocksById[l.shadowBlockId]),a.kind===Pe.CallExpression){const r=ge.pxtInfo(a).callInfo,i=r&&S(r);i&&"TD_ID"===i.shim&&c.isEnum&&(a=Te(r.args[0]))}if(l&&c&&c.isEnum&&a.kind===Pe.Identifier)b(O(ge.U.htmlEscape(l.definitionName),ge.pxtInfo(a).commentAttrs.enumIdentity));else if(l&&l.fieldOptions&&l.fieldOptions[ce.DecompileArgumentAsString])b(O(ge.U.htmlEscape(l.definitionName),ge.Util.htmlEscape(a.getText())));else switch(a.kind){case Pe.FunctionExpression:case Pe.ArrowFunction:a.body;const r=function(){var e=ke(a);if(e)return{callbackproperties:e[0].join(","),renamemap:ge.Util.htmlEscape(JSON.stringify(e[1]))}}();let e=!1;if(r)y.mutation=r;else{var p=a;const ge=v.blocksById[m.blockId].parameters[f.thisParameter?i-1:i],ce=(e,t)=>{var n,o,r,i;"reporter"===m.draggableParameters?k((n="HANDLER_DRAG_PARAM_"+e.name,o=t,r=e.type,i=pxt.blocks.reporterTypeForArgType(r),B(n,Z(o,r,!0),i))):k(w("HANDLER_DRAG_PARAM_"+e.name,t))};if(p.parameters.length&&(m.optionalVariableArgs?(y.mutation={numargs:p.parameters.length.toString()},p.parameters.forEach((e,t)=>{y.mutation["arg"+t]=e.name.text})):p.parameters.forEach((e,t)=>{t=ge.handlerParameters[t];m.draggableParameters?ce(t,e.name.text):b(O("HANDLER_"+t.name,e.name.text))})),m.draggableParameters){if(p.parameters.length<ge.handlerParameters.length)for(let e=p.parameters.length;e<ge.handlerParameters.length;e++){const r=ge.handlerParameters[e];ce(r,r.name)}"reporter"===m.draggableParameters&&(T.localReporters.push(ge.handlerParameters),e=!0)}}const u=P(a);(y.handlers||(y.handlers=[])).push({name:"HANDLER",statement:u}),e&&T.localReporters.pop();break;case Pe.PropertyAccessExpression:const d=ge.pxtInfo(a).callInfo,Te=ge.U.htmlEscape(l.definitionName),h=S(d);o&&"TD_ID"===o.attributes.shim?k(B(Te,R(a,!1,l.shadowBlockId),l.shadowBlockId,s)):c&&c.isEnum||d&&(h.fixedInstance||h.blockIdentity===_.qName)?b(O(Te,R(a,!0).value)):k(I(Te,a,l.shadowBlockId,s));break;case Pe.BinaryExpression:if(l&&l.shadowOptions&&l.shadowOptions.toString){const r=a;if(r.operatorToken.kind===Pe.PlusToken&&((p=r.left).kind===Pe.StringLiteral||p.kind===Pe.NoSubstitutionTemplateLiteral)&&""===p.text){k(I(ge.U.htmlEscape(l.definitionName),r.right,l.shadowBlockId||"text"));break}}k(I(ge.U.htmlEscape(l.definitionName),a,l.shadowBlockId,s));break;default:let t;var g=ge.U.htmlEscape(l.definitionName);let n=!0;if("Math.random"==_.qName)t=B(g,function(e){switch(e.kind){case Pe.NumericLiteral:return D((parseInt(e.text)-1).toString());case Pe.BinaryExpression:var t=e;if(t.operatorToken.kind==Pe.PlusToken&&"1"==t.right.text)return A(t.left);default:return A(e)}}(a),Le,s),n=!1;else if(xe(a)){const r="text"==l.fieldEditor?a.text:a.getText(),i=l.shadowBlockId&&!function(){switch(l.shadowBlockId){case Le:case Me:case Fe:case Ue:case"text":case He:return 1;default:return}}();if(ie(l)&&l.fieldOptions.onParentBlock)return void b(O(g,r));if(i){const i=function(e){if(v.blocksById[e]){e=pxt.blocks.compileInfo(v.blocksById[e]);if(!e.thisParameter&&1===e.parameters.length)return e.parameters[0]}}(l.shadowBlockId);if(i&&ie(i)){const ce=N(l.shadowBlockId,i.definitionName,r,!0);l.shadowOptions&&(ce.mutation={customfield:ge.Util.htmlEscape(JSON.stringify(l.shadowOptions))}),t=B(g,ce,l.shadowBlockId,s),n=!1}}}else if(a.kind===Pe.TaggedTemplateExpression&&l.fieldOptions&&l.fieldOptions[ce.TaggedTemplate])return void b(O(g,ge.Util.htmlEscape(a.getText())));n&&(t=I(g,a,l.shadowBlockId,s)),k(t)}}}),e&&(y.mutation||(y.mutation={}),y.mutation._expanded=e.toString()),y}o=t,n=_;if((t=o.arguments[0]).kind!=Pe.StringLiteral&&t.kind!=Pe.NoSubstitutionTemplateLiteral)E(o);else{var n=S(n),e=C(n.blockId,o),r=(e.fields=[],(t.text||"").replace(/\s+/g,"")),i=(n.imageLiteralColumns||5)*n.imageLiteral,s=n.imageLiteralRows||5,t=i*s;if(t==r.length){let n="";for(let t=0;t<s;++t){for(let e=0;e<i;++e)n+=/[#*1]/.test(r[t*i+e])?"#":".";n+="\n"}return e.fields.push(O("LEDS",`\`${n}\``)),e}E(o,ge.Util.lf("Invalid image pattern ({0} expected vs {1} actual)",t,r.length))}}(s,o);break;case Pe.DebuggerStatement:a=C(ge.TS_DEBUGGER_TYPE,s);break;case Pe.BreakStatement:a=C(ge.TS_BREAK_TYPE,s);break;case Pe.ContinueStatement:a=C(ge.TS_CONTINUE_TYPE,s);break;case Pe.EmptyStatement:a=void 0;break;case Pe.EnumDeclaration:case Pe.ModuleDeclaration:return Re(s,y),h();case Pe.ReturnStatement:a=(l=s,c=C(ge.TS_RETURN_STATEMENT_TYPE,l),l.expression?c.inputs=[B("RETURN_VALUE",A(l.expression),Le)]:c.mutation={no_return_value:"true"},c);break;default:return void E(s,t?ge.Util.lf("Unsupported statement in block: {0}",Pe[s.kind]):ge.Util.lf("Statement kind unsupported in blocks: {0}",Pe[s.kind]))}if(a){let e=a;for(;e.next;)e=e.next;e.next=h(),e.next&&(e.next.prev=e)}if(!i){var g=n||s;let t,i=[];for(let e=0;e<y.length&&(!(t=y[e]).owner&&t.start>=g.pos&&t.end<=g.end&&(t.owner=g,t.ownerStatement=a,i.push(t)),!(t.start>g.end));e++);if(t&&t.isTrailingComment){const ue=pe.getLineAndCharacterOfPosition(m,g.end),_=pe.getLineAndCharacterOfPosition(m,t.start);if(ue.line===_.line){if(t.ownerStatement){t.ownerStatement.comment.splice(t.ownerStatement.comment.indexOf(t),1);for(const pe of f)pe.comment.splice(pe.comment.indexOf(t),1)}t.owner=g,t.ownerStatement=a,i.push(t)}}if(i.length){const pe=[];if(function e(t){var[t]=ve(t);return!t||t.kind==Pe.SourceFile||(t.kind==Pe.ExpressionStatement?e(t):t.kind==Pe.VariableDeclarationList&&e(t.parent))}(g)){let o=[];const r=[];i.forEach((e,t)=>{var n=e.owner&&e.start<e.owner.getStart();e.kind===ue.MultiLine&&n&&(o.length&&(r.push(o),o=[]),t!=i.length-1)?r.push([e]):(o.push(e),e.followedByEmptyLine&&n&&(r.push(o),o=[]))}),i=o,r.forEach(e=>{var t=H();pe.push(t),f.push({comment:e,refId:t})})}a&&(pe.length&&(a.data?a.data+=";"+pe.join(";"):a.data=pe.join(";")),i)&&i.length&&(a.comment?a.comment=a.comment.concat(i):a.comment=i)}}return a;function h(){if(t&&t.length)return P(t.shift(),t,void 0,!1,r)}}function ne(e,t,n){s.errorOnGreyBlocks&&E(e);const o=C(ge.TS_STATEMENT_TYPE,e);o.mutation={},le(e);let r=e.getText();r=Y(r,e.getStart(),e.getEnd()),Re(e,y),t&&(r=t+r);var i=[];if(e.kind===Pe.VariableStatement)for(const ge of e.declarationList.declarations)i.push(F(ge.name));else e.kind===Pe.VariableDeclaration&&i.push(F(e.name));i.length&&(o.mutation.declaredvars=i.join(","));t=r.split("\n");return o.mutation.numlines=t.length.toString(),n&&s.includeGreyBlockMessages&&(o.mutation.error=ge.U.htmlEscape(n)),t.forEach((e,t)=>{o.mutation["line"+t]=ge.U.htmlEscape(e)}),o}function b(e,o){return function(){var e=Te(o);switch(e.kind){case Pe.TrueKeyword:case Pe.FalseKeyword:case Pe.Identifier:case Pe.ElementAccessExpression:return;case Pe.BinaryExpression:switch(e.operatorToken.kind){case Pe.EqualsEqualsToken:case Pe.EqualsEqualsEqualsToken:case Pe.ExclamationEqualsToken:case Pe.ExclamationEqualsEqualsToken:case Pe.LessThanToken:case Pe.LessThanEqualsToken:case Pe.GreaterThanToken:case Pe.GreaterThanEqualsToken:case Pe.AmpersandAmpersandToken:case Pe.BarBarToken:return;default:return ge.Util.lf("Binary expressions in conditionals must evaluate to booleans")}return;case Pe.CallExpression:var t=e,n=ge.pxtInfo(t).callInfo;if(n){const ge=T.blocks.apis.byQName[n.qName];if(ge&&"boolean"==ge.retType)return;if(pe.isIdentifier(t.expression)&&T.declaredFunctions[t.expression.text])return}return ge.Util.lf("Only functions that return booleans are allowed as conditions");case Pe.PrefixUnaryExpression:if(e.operator===Pe.ExclamationToken)return;default:return ge.Util.lf("Conditions must evaluate to booleans or identifiers")}}()?B(e,q(o),He):I(e,o,He)}function L(e,t,n,o=!1){t=F(t),M(t,de.InBlocksOnly),o=C(o?"variables_change":"variables_set",e.parent||e);return o.inputs=[I("VALUE",n,Le)],o.fields=[O("VAR",t)],o}function oe(e,t,n,o){return re(e,t,n,o)}function re(e,n,o,r){const i=ge.pxtInfo(n).callInfo,s=T.blocks.apis.byQName[i?i.qName:""];if(s&&s.attributes.blockCombine){const a=`${s.namespace}.${s.retType}.`+r,l=T.blocks.blocks.find(e=>e.qName==a),c=o?C(l.attributes.blockId,e):x(l.attributes.blockId),u=l.attributes._def.parameters;let t=i.qName;return l.combinedProperties&&l.combinedProperties.forEach(e=>{0===e.indexOf(i.qName)&&"@"===e.charAt(i.qName.length)&&(t=e)}),c.inputs=[I(u[0].name,n.expression)],c.fields=[O(u[1].name,t)],o&&c.inputs.push(I(u[2].name,o)),c}E(n)}function ie(e){return e&&e.fieldOptions&&e.fieldOptions[ce.DecompileLiterals]}function se(r,t,n=!1,e,o=!1){var i=[],s=t||[];for(let e=r.length-1;0<=e;e--){const t=r[e];((t.kind===Pe.FunctionDeclaration||t.kind==Pe.ExpressionStatement&&function(e){var t,n;if(e.expression.kind==Pe.CallExpression)return t=e.expression,(t=ge.pxtInfo(t).callInfo)?(n=S(t)).blockId&&!n.handlerStatement&&!t.isExpression&&Ce(t,n):(E(e),0)}(t))&&!_e(t,T,!1,n)?i:s).unshift(t)}if(i.map(e=>P(e,void 0,void 0,!1,n)).forEach(c),s.length){const r=s.shift(),t=P(r,s,e,!1,n);if(o){let n=t,o=r;if(U.forEach(([e,t])=>{a[e]!==de.InBlocksOnly&&(t.initializer,(e=a[e]===de.InTextBlocks?ne(t,"let "):L(r,t.name,t.initializer,!1)).next=n,n=e,o=t)}),n){const r=C(pe.pxtc.ON_START_TYPE,o);return r.handlers=[{name:"HANDLER",statement:n}],r}ae(t)}return t}o&&ae(void 0)}function ae(e){s.alwaysEmitOnStart&&(u(pe.pxtc.ON_START_TYPE,e),d())}function M(e,t){a[e]!==de.InTextBlocks&&(a[e]=t)}function le(e){pe.forEachChild(e,e=>{e.kind===Pe.Identifier&&M(F(e),de.InTextBlocks),le(e)})}function F(e){if(n){var t=n.getRenameForPosition(e.getStart());if(t)return t.name}return e.text}},he.getLeadingComments=function(e,t,n){return l(t,n||pe.getLeadingCommentRangesOfNode(e,t))},he.getTrailingComments=function(e,t){return l(t,pe.getTrailingCommentRanges(t.getFullText(),e.end))},he.getCommentsForStatement=function(t,n){var o,r=[];for(let e=0;e<n.length&&(!(o=n[e]).owner&&o.start>=t.pos&&o.end<=t.end&&(o.owner=t,r.push(o)),!(o.start>t.end));e++);return r},he.buildCommentMap=We}}(ts=ts||{}),function(e){function c(e,t){var n;switch(e){case"void":return"None";case"boolean":return"bool";case"string":return"str"}return null!=(n=t.byQName[e])&&n.pyQName?t.byQName[e].pyQName:(n=/^(?:Array<(.+)>)|(?:(.+)\[\])|(?:\[.+\])$/.exec(e))?`List[${c(n[1]||n[2],t)}]`:e}function u(e,t){return`\`\`\`${t?"python":"ts"}
${e}
\`\`\``}(e=(e=e.pxtc||(e.pxtc={})).service||(e.service={})).displayStringForSymbol=function(o,r,i){if(o){switch(o.kind){case 3:case 1:{var s=o;var a=r;var l=i;let e="",t=(3===s.kind?e+=a?"def ":"function ":e+="(method) ",e+=a?s.pyQName:s.qName,""),n=(s.parameters&&s.parameters.length&&(t=s.parameters.map(e=>e.name+": "+(a?e.pyTypeString:e.type)).join(", ")),s.retType||"void");return a&&(n=c(n,l)),u(`${e}(${t}): `+n,a);return}case 6:case 7:{s=r?o.pyQName:o.qName;if(6===o.kind)return u("enum "+s,r);let e="(enum member) "+s;return o.attributes.enumval&&(e+=" = "+o.attributes.enumval),u(e,!1);return}case 5:return u("namespace "+(r?o.pyQName:o.qName),!1);case 9:return u("interface "+(r?o.pyQName:o.qName),!1);case 8:return u("class "+(r?o.pyQName:o.qName),r);case 4:var l=r,t=l?o.pyQName:"let "+o.qName;if(o.retType){let e=o.retType;return u(t+": "+(e=l?c(e,i):e),l)}return u(t,l);case 2:t="(property) "+(r?o.pyQName:o.qName);if(o.retType){let e=o.retType;return u(t+": "+(e=r?c(e,i):e),!1)}return u(t,!1)}return`**${o.qName}**`}},e.displayStringForKeyword=function(e,t){return`\`\`\`${t?"py":"ts"}
(keyword) ${e}
\`\`\``}}(ts=ts||{}),function(e){var _=e.pxtc||(e.pxtc={});{e=_.thumb||(_.thumb={});const t={r0:0,r1:1,r2:2,r3:3,r4:4,r5:5,r6:6,r7:7,r8:8,r9:9,r10:10,r11:10,r12:12,sp:13,r13:13,lr:14,r14:14,pc:15,r15:15};class n extends _.assembler.AbstractProcessor{constructor(){super(),this.addEnc("$r0","R0-7",e=>this.inrange(7,e,e)),this.addEnc("$r1","R0-7",e=>this.inrange(7,e,e<<3)),this.addEnc("$r2","R0-15",e=>this.inrange(15,e,7&e|(8&e)<<4)),this.addEnc("$r3","R0-15",e=>this.inrange(15,e,e<<3)),this.addEnc("$r4","R0-7",e=>this.inrange(7,e,e<<6)),this.addEnc("$r5","R0-7",e=>this.inrange(7,e,e<<8)),this.addEnc("$r01","R0-7",e=>this.inrange(7,e,e|e<<3)),this.addEnc("$i0","#0-255",e=>this.inrange(255,e,e)),this.addEnc("$i1","#0-1020",e=>this.inrange(255,e/4,e>>2)),this.addEnc("$i2","#0-510",e=>this.inrange(127,e/4,e>>2)),this.addEnc("$i3","#0-7",e=>this.inrange(7,e,e<<6)),this.addEnc("$i4","#0-31",e=>this.inrange(31,e,e<<6)),this.addEnc("$i5","#0-124",e=>this.inrange(31,e/4,e>>2<<6)),this.addEnc("$i6","#1-32",e=>0==e?null:32==e?0:this.inrange(31,e,e<<6)),this.addEnc("$i7","#0-62",e=>this.inrange(31,e/2,e>>1<<6)),this.addEnc("$i32","#0-2^32",e=>1),this.addEnc("$rl0","{R0-7,...}",e=>this.inrange(255,e,e)),this.addEnc("$rl1","{LR,R0-7,...}",e=>16384&e?this.inrange(255,-16385&e,256|255&e):this.inrange(255,e,e)),this.addEnc("$rl2","{PC,R0-7,...}",e=>32768&e?this.inrange(255,-32769&e,256|255&e):this.inrange(255,e,e)),this.addEnc("$la","LABEL",e=>this.inrange(255,e/4,e>>2)).isWordAligned=!0,this.addEnc("$lb","LABEL",e=>this.inrangeSigned(127,e/2,e>>1)),this.addEnc("$lb11","LABEL",e=>this.inrangeSigned(1023,e/2,e>>1)),this.addInst("adcs  $r0, $r1",16704,65472),this.addInst("add   $r2, $r3",17408,65280),this.addInst("add   $r5, pc, $i1",40960,63488),this.addInst("add   $r5, sp, $i1",43008,63488),this.addInst("add   sp, $i2",45056,65408).canBeShared=!0,this.addInst("adds  $r0, $r1, $i3",7168,65024),this.addInst("adds  $r0, $r1, $r4",6144,65024),this.addInst("adds  $r01, $r4",6144,65024),this.addInst("adds  $r5, $i0",12288,63488),this.addInst("adr   $r5, $la",40960,63488),this.addInst("ands  $r0, $r1",16384,65472),this.addInst("asrs  $r0, $r1",16640,65472),this.addInst("asrs  $r0, $r1, $i6",4096,63488),this.addInst("bics  $r0, $r1",17280,65472),this.addInst("bkpt  $i0",48640,65280),this.addInst("blx   $r3",18304,65415),this.addInst("bx    $r3",18176,65408),this.addInst("cmn   $r0, $r1",17088,65472),this.addInst("cmp   $r0, $r1",17024,65472),this.addInst("cmp   $r2, $r3",17664,65280),this.addInst("cmp   $r5, $i0",10240,63488),this.addInst("eors  $r0, $r1",16448,65472),this.addInst("ldmia $r5!, $rl0",51200,63488),this.addInst("ldmia $r5, $rl0",51200,63488),this.addInst("ldr   $r0, [$r1, $i5]",26624,63488),this.addInst("ldr   $r0, [$r1, $r4]",22528,65024),this.addInst("ldr   $r5, [pc, $i1]",18432,63488),this.addInst("ldr   $r5, $la",18432,63488),this.addInst("ldr   $r5, [sp, $i1]",38912,63488).canBeShared=!0,this.addInst("ldr   $r5, [sp]",38912,63488).canBeShared=!0,this.addInst("ldrb  $r0, [$r1, $i4]",30720,63488),this.addInst("ldrb  $r0, [$r1, $r4]",23552,65024),this.addInst("ldrh  $r0, [$r1, $i7]",34816,63488),this.addInst("ldrh  $r0, [$r1, $r4]",23040,65024),this.addInst("ldrsb $r0, [$r1, $r4]",22016,65024),this.addInst("ldrsh $r0, [$r1, $r4]",24064,65024),this.addInst("lsls  $r0, $r1",16512,65472),this.addInst("lsls  $r0, $r1, $i4",0,63488),this.addInst("lsrs  $r0, $r1",16576,65472),this.addInst("lsrs  $r0, $r1, $i6",2048,63488),this.addInst("mov   $r2, $r3",17920,65280),this.addInst("movs  $r0, $r1",0,65472),this.addInst("movs  $r5, $i0",8192,63488),this.addInst("muls  $r0, $r1",17216,65472),this.addInst("mvns  $r0, $r1",17344,65472),this.addInst("negs  $r0, $r1",16960,65472),this.addInst("nop",18112,65535),this.addInst("orrs  $r0, $r1",17152,65472),this.addInst("pop   $rl2",48128,65024),this.addInst("push  $rl1",46080,65024),this.addInst("rev   $r0, $r1",47616,65472),this.addInst("rev16 $r0, $r1",47680,65472),this.addInst("revsh $r0, $r1",47808,65472),this.addInst("rors  $r0, $r1",16832,65472),this.addInst("sbcs  $r0, $r1",16768,65472),this.addInst("sev",48960,65535),this.addInst("stm   $r5!, $rl0",49152,63488),this.addInst("stmia $r5!, $rl0",49152,63488),this.addInst("stmea $r5!, $rl0",49152,63488),this.addInst("str   $r0, [$r1, $i5]",24576,63488).canBeShared=!0,this.addInst("str   $r0, [$r1]",24576,63488).canBeShared=!0,this.addInst("str   $r0, [$r1, $r4]",20480,65024),this.addInst("str   $r5, [sp, $i1]",36864,63488).canBeShared=!0,this.addInst("str   $r5, [sp]",36864,63488).canBeShared=!0,this.addInst("strb  $r0, [$r1, $i4]",28672,63488),this.addInst("strb  $r0, [$r1, $r4]",21504,65024),this.addInst("strh  $r0, [$r1, $i7]",32768,63488),this.addInst("strh  $r0, [$r1, $r4]",20992,65024),this.addInst("sub   sp, $i2",45184,65408),this.addInst("subs  $r0, $r1, $i3",7680,65024),this.addInst("subs  $r0, $r1, $r4",6656,65024),this.addInst("subs  $r01, $r4",6656,65024),this.addInst("subs  $r5, $i0",14336,63488),this.addInst("svc   $i0",57088,65280),this.addInst("sxtb  $r0, $r1",45632,65472),this.addInst("sxth  $r0, $r1",45568,65472),this.addInst("tst   $r0, $r1",16896,65472),this.addInst("udf   $i0",56832,65280),this.addInst("uxtb  $r0, $r1",45760,65472),this.addInst("uxth  $r0, $r1",45696,65472),this.addInst("wfe",48928,65535),this.addInst("wfi",48944,65535),this.addInst("yield",48912,65535),this.addInst("cpsid i",46706,65535),this.addInst("cpsie i",46690,65535),this.addInst("beq   $lb",53248,65280),this.addInst("bne   $lb",53504,65280),this.addInst("bcs   $lb",53760,65280),this.addInst("bcc   $lb",54016,65280),this.addInst("bmi   $lb",54272,65280),this.addInst("bpl   $lb",54528,65280),this.addInst("bvs   $lb",54784,65280),this.addInst("bvc   $lb",55040,65280),this.addInst("bhi   $lb",55296,65280),this.addInst("bls   $lb",55552,65280),this.addInst("bge   $lb",55808,65280),this.addInst("blt   $lb",56064,65280),this.addInst("bgt   $lb",56320,65280),this.addInst("ble   $lb",56576,65280),this.addInst("bhs   $lb",53760,65280),this.addInst("blo   $lb",54016,65280),this.addInst("b     $lb11",57344,63488),this.addInst("bal   $lb11",57344,63488),this.addInst("bl    $lb",61440,63488,!0),this.addInst("bb    $lb",57344,63488,!0),this.addInst("ldlit   $r5, $i32",18432,63488)}toFnPtr(e,t,n){return _.target.runtimeIsARM&&/::/.test(n)?e+t&-2:e+t|1}wordSize(){return 4}is32bit(e){return"bl"==e.name||"bb"==e.name}postProcessAbsAddress(e,t){return(t^=1)-e.baseOffset}emit32(e,t,n){var o,r,i=!!(t%2),s=(t=i?t+1&-4:t)>>1;return _.assert(null!=s),(0|s)==s&&-2097152<s&&s<2097152?(o=2047&s,r=s>>11&1023,{opcode:4026531840&s?62464|r:61440|r,opcode2:i?59392|o:63488|o,stack:0,numArgs:[t],labelName:n}):_.assembler.emitErr("jump out of range",n)}expandLdlit(r){let i,s=!1,e=[],a={},l=1;for(let o=0;o<r.lines.length;++o){var c=r.lines[o];if(e.push(c),"instruction"==c.type&&c.instruction&&"ldlit"==c.instruction.name){if(!i){let e=c.location+900,t=o+1;for(;t<r.lines.length&&!(r.lines[t].location>e);++t){var u=r.lines[t].getOp();("b"==u||"bb"==u||"pop"==u&&"pc"==r.lines[t].words[2])&&(i=r.lines[t])}if(i)s=!1;else for(s=!0;--t>o;)if("instruction"==r.lines[t].type){i=r.lines[t];break}}let e=c.words[1],t="#"+c.words[3],n=_.U.lookup(a,t);n||(n="_ldlit_"+ ++l,a[t]=n),c.update(`ldr ${e}, `+n)}if(c===i){i=null;var t,n,d=[],p="_jmpwords_"+ ++l;s&&d.push("bb "+p),d.push(".balign 4");for(t of Object.keys(a)){var g=a[t];d.push(g+": .word "+t.slice(1))}s&&d.push(p+":");for(n of d){r.buildLine(n,e);var h=e[e.length-1];h.scope=c.scope,h.lineNo=c.lineNo}a={}}}r.lines=e}getAddressFromLabel(e,t,n,o=!1){n=e.lookupLabel(n);if(null==n)return null;let r=e.location()+4;return o&&(r&=4294967292),n-r}isPop(e){return 48128==e}isPush(e){return 46080==e}isAddSP(e){return 45056==e}isSubSP(e){return 45184==e}peephole(e,t,n){var o=this.encoders.$lb11,r=this.encoders.$lb;function i(e,t){return null!=e.encode(t.numArgs[0]+8)&&null!=e.encode(t.numArgs[0]-8)&&null!=e.encode(t.numArgs[0])}let s=e.getOp(),a=!1;"bne"!=s&&"beq"!=s||("b"==t.getOp()&&0==e.numArgs[0]&&(a=!0),"bb"==t.getOp()&&2==e.numArgs[0]&&(a=!0)),"bb"==s&&i(o,e)?e.update("b "+e.words[1]):"b"==s&&-2==e.numArgs[0]?e.update(""):"bne"==s&&a&&i(r,t)?(e.update("beq "+t.words[1]),t.update("")):"beq"==s&&a&&i(r,t)?(e.update("bne "+t.words[1]),t.update("")):"push"!=s||16384!=e.numArgs[0]||"push"!=t.getOp()||16384&t.numArgs[0]?"pop"==s&&"pop"==t.getOp()&&32768==t.numArgs[0]?(e.update(e.text.replace("}",", pc}")),t.update("")):"push"==s&&"pop"==t.getOp()&&e.numArgs[0]==t.numArgs[0]?(_.assert(0<e.numArgs[0]),e.update(""),t.update("")):"push"==s&&"pop"==t.getOp()&&4==e.words.length&&4==t.words.length?(_.assert("{"==e.words[1]),e.update("mov "+t.words[2]+", "+e.words[2]),t.update("")):n&&"movs $r5, $i0"==e.getOpExt()&&"mov $r0, $r1"==t.getOpExt()&&e.numArgs[0]==t.numArgs[1]&&(o=n,r=e.numArgs[0],"pop"==o.getOp())&&o.numArgs[0]&1<<r?(e.update("movs r"+t.numArgs[0]+", #"+e.numArgs[1]),t.update("")):"pop"==s&&0<=l(e)&&"push"==t.getOp()&&l(e)==l(t)?(e.update("ldr r"+l(e)+", [sp, #0]"),t.update("")):"push"==s&&"ldr $r5, [sp, $i1]"==t.getOpExt()&&l(e)==t.numArgs[0]&&0==t.numArgs[1]?t.update(""):n&&"push"==s&&0<=l(e)&&(o=t,r=l(e),"movs $r5, $i0"==o.getOpExt())&&o.numArgs[0]!=r&&"pop"==n.getOp()&&l(e)==l(n)&&(e.update(""),n.update("")):(e.update(t.text.replace("{","{lr, ")),t.update(""))}registerNo(e){if(!e)return null;e=e.toLowerCase();e=t[e];return void 0===e?null:e}testAssembler(){_.assembler.expectError(this,"lsl r0, r0, #8"),_.assembler.expectError(this,"push {pc,lr}"),_.assembler.expectError(this,"push {r17}"),_.assembler.expectError(this,"mov r0, r1 foo"),_.assembler.expectError(this,"movs r14, #100"),_.assembler.expectError(this,"push {r0"),_.assembler.expectError(this,"push lr,r0}"),_.assembler.expectError(this,"pop {lr,r0}"),_.assembler.expectError(this,"b #+11"),_.assembler.expectError(this,"b #+102400"),_.assembler.expectError(this,"bne undefined_label"),_.assembler.expectError(this,".foobar"),_.assembler.expect(this,"0200      lsls    r0, r0, #8\nb500      push    {lr}\n2064      movs    r0, #100        ; 0x64\nb401      push    {r0}\nbc08      pop     {r3}\nb501      push    {r0, lr}\nbd20      pop {r5, pc}\nbc01      pop {r0}\n4770      bx      lr\n0000      .balign 4\ne6c0      .word   -72000\nfffe\n"),_.assembler.expect(this,"4291      cmp     r1, r2\nd100      bne     l6\ne000      b       l8\n1840  l6: adds    r0, r0, r1\n4718  l8: bx      r3\n"),_.assembler.expect(this,"          @stackmark base\nb403      push    {r0, r1}\n          @stackmark locals\n9801      ldr     r0, [sp, locals@1]\nb401      push    {r0}\n9802      ldr     r0, [sp, locals@1]\nbc01      pop     {r0}\n          @stackempty locals\n9901      ldr     r1, [sp, locals@1]\n9102      str     r1, [sp, base@0]\n          @stackempty locals\nb002      add     sp, #8\n          @stackempty base\n"),_.assembler.expect(this,"b090      sub sp, #4*16\nb010      add sp, #4*16\n"),_.assembler.expect(this,'6261      .string "abc"\n0063      \n'),_.assembler.expect(this,'6261      .string "abcde"\n6463      \n0065      \n'),_.assembler.expect(this,"3042      adds r0, 0x42\n1c0d      adds r5, r1, #0\nd100      bne #0\n2800      cmp r0, #0\n6b28      ldr r0, [r5, #48]\n0200      lsls r0, r0, #8\n2063      movs r0, 0x63\n4240      negs r0, r0\n46c0      nop\nb500      push {lr}\nb401      push {r0}\nb402      push {r1}\nb404      push {r2}\nb408      push {r3}\nb520      push {r5, lr}\nbd00      pop {pc}\nbc01      pop {r0}\nbc02      pop {r1}\nbc04      pop {r2}\nbc08      pop {r3}\nbd20      pop {r5, pc}\n9003      str r0, [sp, #4*3]\n")}}function l(e){_.assert("push"==e.getOp()||"pop"==e.getOp());let t=0,n=-1,o=e.numArgs[0];for(;0<o;)1&o&&(n=-1==n?t:-2),o>>=1,t++;return 0<=n?n:-1}e.ThumbProcessor=n}}(ts=ts||{}),function(n){var g=n.pxtc||(n.pxtc={});{var t,h=g.ir||(g.ir={});let d,p=g.Util;p.assert,(t=d=h.EK||(h.EK={}))[t.None=0]="None",t[t.NumberLiteral=1]="NumberLiteral",t[t.PointerLiteral=2]="PointerLiteral",t[t.RuntimeCall=3]="RuntimeCall",t[t.ProcCall=4]="ProcCall",t[t.SharedRef=5]="SharedRef",t[t.SharedDef=6]="SharedDef",t[t.FieldAccess=7]="FieldAccess",t[t.Store=8]="Store",t[t.CellRef=9]="CellRef",t[t.Sequence=10]="Sequence",t[t.JmpValue=11]="JmpValue",t[t.Nop=12]="Nop",t[t.InstanceOf=13]="InstanceOf";let r,l,e=0;class _{isExpr(){return!1}isStmt(){return!1}getId(){return this._id||(this._id=++e),this._id}}class m extends(h.Node=_){constructor(e,t,n){super(),this.exprKind=e,this.args=t,this.data=n,this.callingConvention=0}static clone(e){var t=new m(e.exprKind,e.args?e.args.slice(0):null,e.data);return e.jsInfo&&(t.jsInfo=e.jsInfo),e.totalUses&&(t.totalUses=e.totalUses,t.currUses=e.currUses),t.callingConvention=e.callingConvention,t.mask=e.mask,t.isStringLiteral=e.isStringLiteral,t}reset(){this.currUses=0,this.prevTotalUses&&(this.totalUses=this.prevTotalUses)}ptrlabel(){return this.jsInfo instanceof f?this.jsInfo:null}hexlit(){var e=this.jsInfo;return null!=e.hexlit?e.hexlit:null}isExpr(){return!0}isPure(){return this.isStateless()||this.exprKind==d.CellRef}isLiteral(){switch(this.exprKind){case d.NumberLiteral:case d.PointerLiteral:return!0;default:return!1}}isStateless(){switch(this.exprKind){case d.NumberLiteral:case d.PointerLiteral:case d.SharedRef:return!0;default:return!1}}sharingInfo(){let e=this,t=this.getId();return this.exprKind!=d.SharedRef&&this.exprKind!=d.SharedDef||((e=this.args[0])?t=e.getId():e={currUses:"",totalUses:""}),`${e.currUses}/${e.totalUses} #`+t}toString(){return o(this)}canUpdateCells(){switch(this.exprKind){case d.NumberLiteral:case d.PointerLiteral:case d.CellRef:case d.JmpValue:case d.SharedRef:case d.Nop:return!1;case d.SharedDef:case d.FieldAccess:case d.InstanceOf:return this.args[0].canUpdateCells();case d.RuntimeCall:case d.ProcCall:case d.Sequence:case d.Store:return!0;default:throw g.oops()}}}h.Expr=m,(t=r=h.SK||(h.SK={}))[t.None=0]="None",t[t.Expr=1]="Expr",t[t.Label=2]="Label",t[t.Jmp=3]="Jmp",t[t.StackEmpty=4]="StackEmpty",t[t.Breakpoint=5]="Breakpoint",t[t.Comment=6]="Comment",(t=l=h.JmpMode||(h.JmpMode={}))[t.Always=1]="Always",t[t.IfZero=2]="IfZero",t[t.IfNotZero=3]="IfNotZero",h.lblNumUsesJmpNext=-101;class f extends _{constructor(e,t){super(),this.stmtKind=e,this.expr=t}isStmt(){return!0}toString(){return o(this)}}function o(e){return function e(t){if(t.isExpr()){var n=t,o=n.args?n.args[0]:null;switch(n.exprKind){case d.NumberLiteral:case d.PointerLiteral:return n.data+"";case d.CellRef:return n.data.toString();case d.JmpValue:return"JMPVALUE";case d.Nop:return"NOP";case d.SharedRef:return`SHARED_REF(#${o.getId()})`;case d.SharedDef:return`SHARED_DEF(#${o.getId()} u(${o.totalUses}): ${e(o)})`;case d.FieldAccess:return e(o)+"."+n.data.name;case d.RuntimeCall:return n.data+"("+n.args.map(e).join(", ")+")";case d.ProcCall:var r=n.data;return(null!=r.ifaceIndex?"IFACE@"+r.ifaceIndex:null!=r.virtualIndex?"VTABLE@"+r.virtualIndex:g.getDeclName(r.proc.action))+"("+n.args.map(e).join(", ")+")";case d.Sequence:return"("+n.args.map(e).join("; ")+")";case d.InstanceOf:return"("+e(n.args[0])+" instanceof "+n.data.id+")";case d.Store:return`{ ${e(n.args[0])} := ${e(n.args[1])} }`;default:throw g.oops()}}else{var i=t,s=i.expr?e(i.expr):"{null}";switch(i.stmtKind){case h.SK.Expr:return"    "+s+"\n";case h.SK.Jmp:var a=`goto ${i.lblName}
`;switch(i.jmpMode){case l.Always:return i.expr?`    { JMPVALUE := ${s} } `+a:"    "+a;case l.IfZero:return`    if (! ${s}) `+a;case l.IfNotZero:return`    if (${s}) `+a;default:throw g.oops()}case h.SK.StackEmpty:return"    ;\n";case h.SK.Breakpoint:return"    // brk "+i.breakpointInfo.id+"\n";case h.SK.Comment:return"    // "+i.expr.data+"\n";case h.SK.Label:return i.lblName+":\n";default:throw g.oops()}}}(e)}h.Stmt=f;class y{constructor(e,t,n){this.index=e,this.def=t,this.info=n,this.isarg=!1,this.iscap=!1,this._isLocal=!1,this._isGlobal=!1,this._debugType="?",this.isUserVariable=!1,this.bitSize=0,t&&(g.isInPxtModules(t)||(this.isUserVariable=!0),n)&&g.setCellProps(this)}getName(){return g.getDeclName(this.def)}getDebugInfo(){return{name:this.getName(),type:this._debugType,index:this.index}}toString(){let e="";return this.def&&(e+=this.getName()||"?"),"["+(e=this.isarg?"ARG "+e:e)+"]"}uniqueName(){return this.isarg?"arg"+this.index:this.getName().replace(/[^\w]/g,"_")+"___"+g.getNodeId(this.def)}isLocal(){return this._isLocal}isGlobal(){return this._isGlobal}loadCore(){return s(d.CellRef,null,this)}load(){var e=this.loadCore();return g.target.isNative&&!g.isStackMachine()&&0!=this.bitSize?6==this.bitSize?c("pxt::fromUInt",[e]):c("pxt::fromInt",[e]):this.isByRefLocal()?c("pxtrt::ldlocRef",[e]):e}isByRefLocal(){return this.isLocal()&&this.info.captured&&this.info.written}storeDirect(e){return s(d.Store,[this.loadCore(),e])}storeByRef(e){var t;return this.isByRefLocal()?c("pxtrt::stlocRef",[this.loadCore(),e]):g.target.isNative&&!g.isStackMachine()&&0!=this.bitSize?(t=6==this.bitSize?"pxt::toUInt":"pxt::toInt",this.storeDirect(c(t,[e],1))):this.storeDirect(e)}get isTemporary(){return!1}}class k extends(h.Cell=y){constructor(e,t){super(e,null,null),this.index=e,this.owningProc=t,this.uid=k.unnamedCellCounter++}getName(){return"unnamed"+this.uid}uniqueName(){return this.getName()+"___U"+this.index}isByRefLocal(){return!1}get isTemporary(){return!0}}function i(e,t){return new f(e,t)}function s(e,t,n){return new m(e,t,n)}function a(e,t){e=s(d.PointerLiteral,null,e);return e.jsInfo=t,e}function c(e,t,n=0){t=s(d.RuntimeCall,t,e);return n&&(t.mask={refMask:n}),t}function u(e,t=!1,n=!1){let o=!!t&&e.some(e=>e.canUpdateCells()),r=[];for(var i of p.reversed(e))i.isStateless()||i.exprKind==d.CellRef&&!o||(i.canUpdateCells()&&(o=!0),r.push(i));r.reverse(),g.isStackMachine()&&!n&&(r=[]);let s=[],a=e.map(n=>{if(0<=r.indexOf(n)){let e=n,t=n;return n.exprKind==d.SharedDef?(n.args[0].totalUses++,e=h.op(d.SharedRef,[n.args[0]])):(e=h.op(d.SharedRef,[n]),t=h.op(d.SharedDef,[n]),n.totalUses=2,n.currUses=0),s.push(t),e}return n});return{precomp:s,flattened:a}}k.unnamedCellCounter=0,h.UnnamedCell=k,h.Procedure=class extends _{constructor(){super(...arguments),this.numArgs=0,this.info=null,this.seqNo=-1,this.isRoot=!1,this.locals=[],this.captured=[],this.args=[],this.parent=null,this.debugInfo=null,this.fillDebugInfo=null,this.classInfo=null,this.perfCounterName=null,this.perfCounterNo=0,this.body=[],this.lblNo=0,this.action=null,this.cachedJS=null,this.usingCtx=null}reset(){this.body=[],this.lblNo=0,this.locals=[],this.captured=[],this.args=[]}isGetter(){return this.action&&this.action.kind==n.SyntaxKind.GetAccessor}vtLabel(){return this.label()+(g.isStackMachine()?"":"_args")}label(){return g.getFunctionLabel(this.action)}toString(){return`
PROC ${g.getDeclName(this.action)}
${this.body.map(e=>e.toString()).join("")}
`}emit(e){this.body.push(e)}emitExpr(e){this.emit(i(r.Expr,e))}mkLabel(e){var t=i(r.Label,null);return t.lblName="."+e+"_"+this.lblNo+++"_"+this.seqNo,t.lbl=t}emitLbl(e){this.emit(e)}emitLblDirect(e){var t=i(r.Label,null);t.lblName=e,t.lbl=t,this.emit(t)}getFullName(){let e=g.getDeclName(this.action);var t;return this.action&&(t=n.pxtc.nodeLocationInfo(this.action),e+=" "+t.fileName.replace("pxt_modules/","")+":"+(t.line+1)),e}getName(){return(this.action&&this.action.name?this.action.name.text:null)||"inline"}mkLocal(e,t){e=new y(this.locals.length,e,t);return this.locals.push(e),e}mkLocalUnnamed(){var e=new k(this.locals.length,this);return this.locals.push(e),e}localIndex(t,e=!1){return this.captured.filter(e=>e.def==t)[0]||this.locals.filter(e=>e.def==t)[0]||(e?null:this.args.filter(e=>e.def==t)[0])}stackEmpty(){this.emit(i(r.StackEmpty,null))}emitJmpZ(e,t){this.emitJmp(e,t,l.IfZero)}emitJmp(e,t,n=l.Always,o=null){t=i(r.Jmp,t);t.jmpMode=n,o&&o.exprKind==d.NumberLiteral&&(o=null),t.terminateExpr=o,"string"==typeof e?t.lblName=e:(t.lbl=e,t.lblName=t.lbl.lblName),this.emit(t)}inlineSelf(e){const{precomp:t,flattened:n}=u(e,!1,!0);p.assert(n.length==this.args.length),this.args.map((e,t)=>{e.repl=n[t],e.replUses=0});e=function t(n){switch((n=m.clone(n)).exprKind){case d.PointerLiteral:case d.NumberLiteral:return n;case d.RuntimeCall:for(let e=0;e<n.args.length;++e)n.args[e]=t(n.args[e]);return n;case d.CellRef:var e=n.data;return e.repl?(e.replUses++,e.repl):n;case d.FieldAccess:return n.args[0]=t(n.args[0]),n;default:throw p.oops()}}(this.inlineBody);return this.args.forEach((e,t)=>{e.repl.exprKind==d.SharedRef&&(e.repl.args[0].prevTotalUses||(e.repl.args[0].prevTotalUses=e.repl.args[0].totalUses),e.repl.args[0].totalUses+=e.replUses-1),e.repl=null,e.replUses=0}),t.length?(t.push(e),s(d.Sequence,t)):e}resolve(){let o=(t,n)=>{if(t.args)for(let e=0;e<t.args.length;++e)t.args[e]=n(t.args[e])},n=e=>{switch(e.exprKind){case d.SharedDef:throw p.oops();case d.SharedRef:var t=e.args[0];if(t.totalUses)return t.totalUses--,e;t.totalUses=-1,t.currUses=0,t.irCurrUses=0;t=m.clone(e);return t.exprKind=d.SharedDef,t.args[0]=n(t.args[0]),t}return o(e,n),e},t=n=>(n.exprKind!=d.SharedRef&&(o(n,t),n.exprKind===d.Sequence)&&(n.args=n.args.filter((e,t)=>t==n.args.length-1||!e.isPure()||(e.exprKind==d.SharedRef&&0<e.args[0].totalUses&&e.args[0].totalUses--,!1))),n),r=e=>{switch(e.exprKind){case d.SharedDef:var t=e.args[0];if(p.assert(t.totalUses<0,"arg.totalUses < 0"),p.assert(0===t.currUses,"arg.currUses === 0"),-1==t.totalUses)return r(t);t.totalUses=1;break;case d.SharedRef:return p.assert(0<e.args[0].totalUses,"e.args[0].totalUses > 0"),e.args[0].totalUses++,e;case d.PointerLiteral:t=e.ptrlabel();t&&(t.lblNumUses||(t.lblNumUses=0),t.lblNumUses++)}return o(e,r),e},i=e=>{switch(e.exprKind){case d.SharedDef:o(e,i);case d.SharedRef:var t=e.args[0];return p.assert(0<t.totalUses,"arg.totalUses > 0"),1==t.totalUses?(p.assert(e.exprKind==d.SharedDef),t):(t.irCurrUses++,e);default:return o(e,i),e}};this.body=this.body.filter(e=>!e.expr||(e.expr=t(n(e.expr)),e.stmtKind!=h.SK.Expr)||!e.expr.isPure());var e,s,a=p.toDictionary(this.body.filter(e=>e.stmtKind==h.SK.Label),e=>e.lblName);for(let e=0;e<this.body.length;++e)this.body[e].stmtNo=e;for(e of this.body)switch(e.expr&&(e.expr=r(e.expr)),e.stmtKind){case h.SK.Expr:break;case h.SK.Jmp:e.lbl=p.lookup(a,e.lblName),e.lbl||g.oops("missing label: "+e.lblName),e.lbl.lblNumUses?e.lbl.lblNumUses++:e.lbl.lblNumUses=1;break;case h.SK.StackEmpty:case h.SK.Label:case h.SK.Breakpoint:case h.SK.Comment:break;default:g.oops()}let l=null,c=!g.target.debugMode,u=null;for(s of this.body)s.expr&&(s.expr=t(i(s.expr))),l&&l.lbl==s&&l.stmtKind==h.SK.Jmp&&s.stmtKind==h.SK.Label&&l.jmpMode==h.JmpMode.Always&&1==s.lblNumUses&&(s.lblNumUses=h.lblNumUsesJmpNext),l=s,s.stmtKind==h.SK.Breakpoint?(s.breakpointInfo.id,s.breakpointInfo):c&&(s.stmtKind==h.SK.Jmp?s.expr&&(u?c=!1:u=s.expr):s.stmtKind==h.SK.StackEmpty||s.stmtKind==h.SK.Label&&s.lblNumUses==h.lblNumUsesJmpNext||(c=!1));c&&u&&function n(o){var e=()=>{if(!o.args)return 0;let e=0;for(var t of o.args)e+=n(t);return o.mask&&o.mask.conversions&&(e+=4*o.mask.conversions.length),e};switch(o.exprKind){case d.NumberLiteral:return 2;case d.PointerLiteral:return 6;case d.RuntimeCall:return e()+2+2+4;case d.CellRef:return 2;case d.FieldAccess:return e()+(o.data.needsCheck?4:0)+2;case d.ProcCall:case d.SharedRef:case d.SharedDef:case d.Store:case d.Sequence:case d.JmpValue:case d.Nop:case d.InstanceOf:return 1e6;default:throw p.oops()}}(u)<=4*this.args.length+4+2+(g.target.isNative?4:30)&&(this.inlineBody=u),pxt.options.debug&&pxt.debug(this.toString())}},h.iterExpr=function e(t,n){if(n(t),t.args)for(var o of t.args)e(o,n)},h.stmt=i,h.comment=function(e){return i(r.Comment,a(e,e))},h.op=s,h.numlit=function(e){return s(d.NumberLiteral,null,e)},h.shared=function(e){switch(e.exprKind){case d.SharedRef:e=e.args[0];break;case d.NumberLiteral:return e}return s(d.SharedRef,[e])},h.ptrlit=a,h.rtcall=c,h.rtcallMask=function(e,t,n,o){p.startsWith(e,"@nomask@")&&(e=e.slice(8),t=0);e=c(e,o,t);return e.callingConvention=n,e},h.flattenArgs=u}}(ts=ts||{}),function(Dt){{var Nt=Dt.pxtc||(Dt.pxtc={}),e;class n{constructor(e,t){this.wave=e,this.id=t,this.flags=0,this.resetAll()}refresh(){this.flags&=-9,this.proc&&!this.usedActions&&!jt(this.proc.action)||this.proc&&!this.proc.cachedJS?this.resetEmit():this.usedNodes&&(this.flags|=32),this.classInfo&&this.classInfo.reset()}resetEmit(){this.flags&=-41,this.proc&&this.proc.classInfo&&this.proc.classInfo.ctor==this.proc&&(this.proc.classInfo.ctor=null),this.functionInfo=null,this.variableInfo=null,this.classInfo=null,this.callInfo=null,this.proc=null,this.cell=null,this.exprInfo=null,this.usedNodes=null,this.usedActions=null}resetTSC(){this.flags&=16,this.typeCache=null,this.symbolCache=null,this.commentAttrs=null,this.valueOverride=null,this.declCache=void 0,this.fullName=null,this.constantFolded=void 0}resetAll(){this.resetTSC(),this.resetEmit()}}let o;Nt.PxtNode=n,(e=o=o||{})[e.Enum=0]="Enum",e[e.Number=1]="Number",e[e.String=2]="String",e[e.Boolean=3]="Boolean",e[e.Unsupported=4]="Unsupported",Nt.taggedUndefined=0,Nt.taggedNull=6,Nt.taggedFalse=10,Nt.taggedNaN=14,Nt.taggedTrue=66,Nt.thumbArithmeticInstr={adds:!0,subs:!0,muls:!0,ands:!0,orrs:!0,eors:!0,lsls:!0,asrs:!0,lsrs:!0},Nt.numberArithmeticInstr={div:!0,mod:!0,le:!0,lt:!0,ge:!0,gt:!0,eq:!0,neq:!0};const bn={"Array_::getAt":{name:"_pxt_array_get",argsFmt:["T","T","T"],value:0},"Array_::setAt":{name:"_pxt_array_set",argsFmt:["T","T","T","T"],value:0},"BufferMethods::getByte":{name:"_pxt_buffer_get",argsFmt:["T","T","T"],value:0},"BufferMethods::setByte":{name:"_pxt_buffer_set",argsFmt:["T","T","T","I"],value:0},"pxtrt::mapGetGeneric":{name:"_pxt_map_get",argsFmt:["T","T","S"],value:0},"pxtrt::mapSetGeneric":{name:"_pxt_map_set",argsFmt:["T","T","S","T"],value:0}};let Tt=Nt.ir.EK,t=(Nt.SK=Dt.SyntaxKind,Nt.numReservedGlobals=1,0),Et=1;function wt(e){return e.pxt?!!(16&e.pxt.flags):!!(e=Dt.getSourceFileOfNode(e))&&Nt.isPxtModulesFilename(e.fileName)}function Ot(e){if(e.pxt){const n=e.pxt;return n.wave!=Et&&(n.wave=Et,Nt.compileOptions&&Nt.compileOptions.skipPxtModulesTSC&&16&n.flags?Nt.compileOptions.skipPxtModulesEmit?n.refresh():n.resetEmit():n.resetAll()),n}{const Nt=new n(Et,++t);return wt(e)&&(Nt.flags|=16),e.pxt=Nt}}function Rt(e){return Ot(e).id}function Pt(e){return e?Dt.SyntaxKind[e.kind]:"<null>"}function Lt(e,t,n=!1){var o=new Error(t);if(o.ksEmitterUserError=!0,o.ksErrorCode=e,n&&It)return xt||(xt=t,At=e),o;throw o}function Mt(){return Nt.target.isNative&&Nt.target.nativeType==Nt.NATIVE_TYPE_VM}function Ft(){return Nt.target.isNative&&Nt.target.nativeType!=Nt.NATIVE_TYPE_VM}function Ut(){return Nt.target.isNative&&Nt.target.nativeType==Nt.NATIVE_TYPE_THUMB}function un(e){return Ft()?Nt.ir.rtcall("pxt::fromInt",[e]):e}function dn(e){return Ft()?Nt.ir.rtcall("pxt::fromBool",[e]):e}function Ht(e){switch(e){case 0:return Nt.target.shortPointers?2:4;case 1:return 1;case 3:return 2;case 5:return 4;case 2:return 1;case 4:return 2;case 6:return 4;default:throw Nt.oops()}}function i(e){switch(e){case 1:case 3:case 5:return!0;case 2:case 4:case 6:return!1;default:throw Nt.oops()}}function Vt(e){switch(e.kind){case Nt.SK.TemplateHead:case Nt.SK.TemplateMiddle:case Nt.SK.TemplateTail:case Nt.SK.StringLiteral:case Nt.SK.NoSubstitutionTemplateLiteral:return!0;default:return!1}}function Wt(e){return e&&e.modifiers&&e.modifiers.some(e=>e.kind==Nt.SK.StaticKeyword)}function pn(e){return e.modifiers&&e.modifiers.some(e=>e.kind==Nt.SK.ReadonlyKeyword)}function gn(e,t){return!e.explicitDefaults||e.explicitDefaults.indexOf(t)<0?null:e.paramDefl[t]}function s(e){if(!e)return null;switch(e.kind){case Nt.SK.MethodDeclaration:return"";case Nt.SK.Constructor:return"new/";case Nt.SK.GetAccessor:return"get/";case Nt.SK.SetAccessor:return"set/";default:return null}}function Gt(e){return s(e)+Qt(e)}function Kt(e){return null!=s(e)}function jt(e){let t=e,n=!1;for(;;)switch(t=t.parent,t||Lt(9229,Bt("cannot determine parent of {0}",Pt(e))),t.kind){case Nt.SK.MethodDeclaration:case Nt.SK.Constructor:case Nt.SK.GetAccessor:case Nt.SK.SetAccessor:case Nt.SK.FunctionDeclaration:case Nt.SK.ArrowFunction:case Nt.SK.FunctionExpression:return t;case Nt.SK.WhileStatement:case Nt.SK.DoStatement:case Nt.SK.ForInStatement:case Nt.SK.ForOfStatement:case Nt.SK.ForStatement:n=!0;break;case Nt.SK.SourceFile:return n?Ct:null}}function zt(e){return"objectFlags"in e}function Xt(e){return!!e&&(e.kind==Nt.SK.VariableDeclaration||e.kind==Nt.SK.BindingElement&&Xt(e.parent.parent))}function $t(e){return!!e&&(Xt(e)&&!jt(e)||e.kind==Nt.SK.PropertyDeclaration&&Wt(e))}function Yt(e){return!!e&&(e.kind==Nt.SK.Parameter||e.kind==Nt.SK.BindingElement&&Yt(e.parent.parent))}Nt.isInPxtModules=wt,Nt.pxtInfo=Ot,Nt.getNodeId=Rt,Nt.stringKind=Pt,Nt.isStackMachine=Mt,Nt.needsNumberConversions=Ft,Nt.isThumb=Ut,Nt.sizeOfBitSize=Ht,Nt.isBitSizeSigned=i,Nt.setCellProps=function(e){var t;e._isLocal=Xt(t=e.def)&&!$t(t)||Yt(e.def),e._isGlobal=$t(e.def),e.def.isThisParameter||((t=nn(e.def)).flags&Dt.TypeFlags.Void&&Nt.oops("void-typed variable, "+e.toString()),e.bitSize=function(e){if(!e||!e.type)return 0;if(!kn(nn(e)))return 0;if(e.type.kind!=Nt.SK.TypeReference)return 0;switch(e.type.typeName.getText()){case"int8":return 1;case"int16":return 3;case"int32":return 5;case"uint8":return 2;case"uint16":return 4;case"uint32":return 6;default:return 0}}(e.def),0!=e.bitSize?e._debugType=(i(e.bitSize)?"int":"uint")+8*Ht(e.bitSize):sn(t)?e._debugType="string":t.flags&Dt.TypeFlags.NumberLike&&(e._debugType="number")),e.isLocal()&&0!=e.bitSize&&(e.bitSize=0,Lt(9256,Bt("bit sizes are not supported for locals and parameters")))},Nt.isStatic=Wt,Nt.isReadOnly=pn,Nt.getExplicitDefault=gn,Nt.isObjectType=zt;class cn{constructor(e,t){this.id=e,this.decl=t,this.baseClassInfo=null,this.allfields=[],this.methods={},this.attrs=Jt(t),this.reset()}reset(){this.vtable=null,this.itable=null}get isUsed(){return!!(8&Ot(this.decl).flags)}allMethods(){var e,t=[];for(e of Object.keys(this.methods))for(var n of this.methods[e])t.push(n);return t}usedMethods(){var e,t=[];for(e of Object.keys(this.methods))for(var n of this.methods[e])8&Ot(n).flags&&t.push(n);return t}}Nt.ClassInfo=cn;let St,Ct,xt,Bt=Nt.assembler.lf,At=0,It=0;function qt(e,t){var n=Ot(t);return null==n.fullName&&(n.fullName=Nt.getFullName(e,t.symbol)),n.fullName}function r(e){var t=e=>{const t=Dt.getSourceFileOfNode(e);return t&&(e=Dt.getLeadingCommentRangesOfNode(e,t))?e.map(e=>t.text.slice(e.pos,e.end)).join("\n"):""};return(e=e.kind==Nt.SK.VariableDeclaration?e.parent.parent:e).symbol&&e.symbol.declarations&&1<e.symbol.declarations.length?e.symbol.declarations.map(t).join("\n"):t(e)}function hn(e){let t="";for(var n of e.declarations)t+=r(n);return Nt.parseCommentString(t)}function Jt(e){var t,n=e?Ot(e):null;return!n||2&n.flags?Nt.parseCommentString(""):n.commentAttrs||((t=Nt.parseCommentString(r(e)))._name=Qt(e),n.commentAttrs=t)}function Qt(e){return e.name&&e.name.kind==Nt.SK.Identifier?e.name.text:"???"}function Zt(e){return zt(e)&&e.objectFlags&Dt.ObjectFlags.Reference&&e.symbol&&"Array"==e.symbol.name}function en(e){return!!e.isThisType||!!zt(e)&&!!(e.objectFlags&Dt.ObjectFlags.Class||e.symbol&&e.symbol.flags&Dt.SymbolFlags.Class)}function tn(e){var t=zt(t=e)&&t.objectFlags&Dt.ObjectFlags.Reference&&t.typeArguments&&t.typeArguments.length?t.target:null;return en(t||e)}function _n(e){return Zt(e)?e.typeArguments[0]:St.getIndexTypeOfType(e,Dt.IndexKind.Number)}function mn(e){return null===e?Nt.taggedNull:void 0===e?Nt.taggedUndefined:!1===e?Nt.taggedFalse:!0===e?Nt.taggedTrue:isNaN(e)?Nt.taggedNaN:null}function nn(e){let t;var n=Ot(e);if(n.typeCache)return n.typeCache;if(!(t=Dt.isExpression(e)?St.getContextualType(e):t))try{t=St.getTypeAtLocation(e)}catch(e){Lt(9203,Bt("Unknown type for expression"))}return t&&(n.typeCache=t)}function on(e){e=St.getSignatureFromDeclaration(e);return!(St.getReturnTypeOfSignature(e).flags&Dt.TypeFlags.Void)}function a(e){return e&&e.name}function rn(t){let e=a(t)?t.name.text:null;if(!e){if(t.kind!=Nt.SK.Constructor){for(let e=t.parent;e;e=e.parent)if(a(e))return rn(e)+".inline";return"inline"}e="constructor"}return function e(t){if(!t)return"";switch(t.kind){case Nt.SK.ModuleBlock:return e(t.parent);case Nt.SK.ClassDeclaration:case Nt.SK.ModuleDeclaration:return e(t.parent)+t.name.text+".";default:return""}}(t.parent)+e}function fn(e){return rn(e).replace(/[^\w]+/g,"_")}function yn(e){return fn(e)+"__P"+Rt(e)}Nt.getNodeFullName=qt,Nt.getComments=r,Nt.parseCommentsOnSymbol=hn,Nt.parseComments=Jt,Nt.getName=Qt,Nt.checkType=function(e){return e},Nt.taggedSpecial=mn,Nt.getDeclName=rn,Nt.getFunctionLabel=yn;class vn{constructor(e){this.decl=e,this.capturedVars=[]}get isUsed(){return!!(8&Ot(this.decl).flags)}}function l(e,t,n){return!!(e.flags&t)||function(e){if(!(e.flags&Dt.TypeFlags.Union))return o.Unsupported;let t,n=!0;return e.types.forEach(e=>{if(void 0===t)e.flags&Dt.TypeFlags.NumberLike?t=o.Number:e.flags&Dt.TypeFlags.BooleanLike?t=o.Boolean:e.flags&Dt.TypeFlags.StringLike?t=o.String:e.flags&Dt.TypeFlags.EnumLike&&(t=o.Enum);else switch(t){case o.Number:n=n&&!!(e.flags&Dt.TypeFlags.NumberLike);break;case o.Boolean:n=n&&!!(e.flags&Dt.TypeFlags.BooleanLike);break;case o.String:n=n&&!!(e.flags&Dt.TypeFlags.StringLike);break;case o.Enum:n=n&&!!(e.flags&Dt.TypeFlags.EnumLike)}}),n?t:o.Unsupported}(e)===n}function sn(e){return l(e,Dt.TypeFlags.String|Dt.TypeFlags.StringLiteral,o.String)}function kn(e){return l(e,Dt.TypeFlags.Number|Dt.TypeFlags.NumberLiteral,o.Number)}Nt.FunctionAddInfo=vn,Nt.compileBinary=function(n,F,y,i){Nt.compilerHooks.preBinary&&Nt.compilerHooks.preBinary(n,F,y),Nt.target=F.target,Nt.compileOptions=F,Nt.target.debugMode=!!F.breakpoints;const a=Dt.createDiagnosticCollection();St=n.getTypeChecker();let s=Nt.U.cpuUs(),m=[],o=[],A={},S={},ie=null,f=null,r=!1,l=[];if(Et++,F.target.isNative){if(!F.extinfo||!F.extinfo.hexinfo)return{diagnostics:[{file:n.getSourceFiles()[0],start:0,length:0,category:Nt.DiagnosticCategory.Error,code:9043,messageText:Bt("The hex file is not available, please connect to internet and try again.")}],emittedFiles:[],emitSkipped:!0};let e=F.extinfo,t=F.target;if(e&&e.disabledDeps){const Nt=(F.otherMultiVariants||[]).find(e=>e.extinfo&&!e.extinfo.disabledDeps);Nt&&(pxt.debug(`using alternative extinfo (due to ${e.disabledDeps})`),e=Nt.extinfo,t=Nt.target)}Nt.hexfile.setupFor(t,e||Nt.emptyExtInfo()),Nt.hexfile.setupInlineAssembly(F)}let U,H=new Tn;function c(){H.reset(),U=null,y.breakpoints=[{id:0,isDebuggerStmt:!1,fileName:"bogus",start:0,length:0,line:0,column:0}],y.procCallLocations=[]}H.res=y,H.options=F,H.target=F.target,F.computeUsedSymbols&&(y.usedSymbols={},y.usedArguments={});let u=[];if(!F.forceEmit||0==y.diagnostics.length){let e=n.getSourceFiles().slice();const Nt=e.find(e=>e.fileName===pxt.MAIN_TS),F=(Nt&&(e=e.filter(e=>e.fileName!==pxt.MAIN_TS)).push(Nt),e.find(e=>e.fileName===pxt.TUTORIAL_CODE_STOP));F&&(e=e.filter(e=>e.fileName!==pxt.TUTORIAL_CODE_STOP)).push(F),e.forEach(e=>{e.statements.forEach(e=>{u.push(e)})})}let d=n.getSourceFiles().filter(e=>Nt.Util.endsWith(e.fileName,i))[0],e={kind:Nt.SK.FunctionDeclaration,parameters:[],name:{text:"<main>",pos:0,end:0},body:{kind:Nt.SK.Block,statements:u},parent:d,pos:0,end:0};const p=Ot(Ct=e);for(p.flags|=3,z(e),m=[],c(),r=!0,ft(e);function(){for(U=v(e);0<m.length;)ft(m.pop())}(),!function(){r=!1;const e=H.usedClassInfos.length;for(var t of H.usedClassInfos){for(var n of t.allMethods()){const e=Ot(n),o=k(n);8&e.flags?o.virtualParent&&X(o.virtualParent.decl):(o.virtualParent&&o.virtualParent.isUsed||ue(n)||function(e){return null!=Nt.U.lookup(H.explicitlyUsedIfaceMembers,e)}(Qt(n)))&&X(n)}t=Oe(t.decl);t&&X(t)}return r=!0,0==m.length&&e==H.usedClassInfos.length}(););{let e=H.globals.slice(0);e.forEach((e,t)=>e.index=t);const bt=e=>0==e?10:Ht(e);e.sort((e,t)=>bt(e.bitSize)-bt(t.bitSize)||e.index-t.index);let t=4*Nt.numReservedGlobals,n=0;for(var g of e){const e=Mt()?0:g.bitSize;for(var h=Ht(e);t&h-1;)t++;n||0!=e||(n=t),g.index=t,t+=h}H.globalsWords=t+3>>2,H.nonPtrGlobals=n?n>>2:H.globalsWords}r=!1;{for(var _ of H.usedClassInfos)!function e(n){if(Nt.assert(n.isUsed,"inf.isUsed"),n.vtable)return n.vtable;let i=n.baseClassInfo?e(n.baseClassInfo).slice(0):[];n.derivedClasses=[],n.baseClassInfo&&n.baseClassInfo.derivedClasses.push(n);for(var s of n.usedMethods()){H.numMethods++;let r=k(s);const a=Jt(s);if(ue(s)&&!a.shim&&(n.toStringMethod=v(s),n.toStringMethod.info.usedAsIface=!0),r.virtualParent){H.numVirtMethods++;let t=Gt(s),n=!1,o=v(s);Nt.U.assert(!!o);for(let e=0;e<i.length;++e)Gt(i[e].action)==t&&(i[e]=o,r.virtualIndex=e,n=!0);n||(r.virtualIndex=i.length,i.push(o))}}n.vtable=i,n.itable=[];const o={};for(var r of n.allfields){let e=Qt(r),t=Xe(n,r,!1);o[e]=!0,n.itable.push({name:e,info:(t.idx+1)*(Mt()?1:4),idx:W(e),proc:null})}for(let e=n;e;e=e.baseClassInfo)for(var t of e.usedMethods()){const i=Qt(t);if(!Jt(t).shim){const l=v(t),c=n.itable.find(e=>e.name==i),u=t.kind==Nt.SK.SetAccessor,d=t.kind==Nt.SK.GetAccessor;c?(u&&!c.setProc?c.setProc=l:d&&!c.proc&&(c.proc=l),c.info=0):n.itable.push({name:i,info:0,idx:W(i),proc:u?null:l,setProc:u?l:null}),l.info.usedAsIface=!0}}return n.vtable}(_);var T,E,I,D,t;(t=Object.keys(H.ifaceMemberMap)).sort(Nt.U.strcmp),t.unshift(""),H.emitString(""),H.ifaceMembers=t,H.ifaceMemberMap={};let e=0;for(T of t)H.ifaceMemberMap[T]=e++;for(E of H.usedClassInfos)for(var N of E.itable)N.idx=W(N.name);for(I of H.usedClassInfos)I.lastSubtypeNo=void 0,I.classNo=void 0;let n=pxt.BuiltInType.User0;const vt=e=>{Nt.U.assert(!e.classNo),e.classNo=n++;for(var t of e.derivedClasses)t.isUsed&&vt(t);e.lastSubtypeNo=n-1};for(D of H.usedClassInfos){let e=D;for(;e.baseClassInfo;)e=e.baseClassInfo;e.classNo||vt(e)}}var w,t=Nt.U.cpuUs();y.times.pass0=t-s;let O=a.getDiagnostics();c(),r=!1,H.finalPass=!0,B(e),Nt.U.assert(0==m.length),y.configData=[];for(w of Object.keys(S))S["!"+w]||y.configData.push({name:w.replace(/^\!/,""),key:S[w].key,value:S[w].value});y.configData.sort((e,t)=>e.key-t.key);var R=Nt.U.cpuUs();return y.times.pass1=R-t,_t(e,function(){if(!F.noEmit){H.writeFile=(e,t)=>{y.outfiles[e]=t};for(var e of H.procs)e.cachedJS&&!e.inlineBody||e.resolve();Nt.target.isNative&&(H.procs=H.procs.filter(e=>!(e.inlineBody&&!e.info.usedAsIface&&!e.info.usedAsValue))),F.target.isNative?(F.extinfo.yotta&&H.writeFile("yotta.json",JSON.stringify(F.extinfo.yotta,null,2)),F.extinfo.platformio&&H.writeFile("platformio.json",JSON.stringify(F.extinfo.platformio,null,2)),F.target.nativeType==Nt.NATIVE_TYPE_VM?Nt.vmEmit(H,F):Nt.processorEmit(H,F,y)):Nt.jsEmit(H)}}),y.times.passFinal=Nt.U.cpuUs()-R,F.ast&&(t=Nt.U.cpuUs(),Nt.annotate(n,i,Nt.target),y.times.passAnnotate=Nt.U.cpuUs()-t),Nt.compileOptions=null,0==O.length&&(O=a.getDiagnostics()),Nt.compilerHooks.postBinary&&Nt.compilerHooks.postBinary(n,F,y),{diagnostics:O,emittedFiles:void 0,emitSkipped:!!F.noEmit};function P(e,t,n,o,r,i){var s;s=Nt.DiagnosticCategory.Error,e=e,t=t,n=n,o=o,r=r,i=i,a.add(Dt.createDiagnosticForNode(e,{code:t,message:n,key:n.replace(/^[a-zA-Z]+/g,"_"),category:s},o,r,i))}function V(e,t,n=9202){if(t)return Lt(n,t);e||Lt(n,Bt("Sorry, this language feature is not supported"));let o=Pt(e),r=!1,i=null;switch(e.kind){case Dt.SyntaxKind.ForInStatement:o=Bt("for in loops");break;case Dt.SyntaxKind.ForOfStatement:o=Bt("for of loops"),r=!0;break;case Dt.SyntaxKind.PropertyAccessExpression:o=Bt("property access");break;case Dt.SyntaxKind.DeleteExpression:o=Bt("delete");break;case Dt.SyntaxKind.GetAccessor:o=Bt("get accessor method"),r=!0;break;case Dt.SyntaxKind.SetAccessor:o=Bt("set accessor method"),r=!0;break;case Dt.SyntaxKind.TaggedTemplateExpression:o=Bt("tagged templates");break;case Dt.SyntaxKind.SpreadElement:o=Bt("spread");break;case Dt.SyntaxKind.TryStatement:case Dt.SyntaxKind.CatchClause:case Dt.SyntaxKind.FinallyKeyword:case Dt.SyntaxKind.ThrowStatement:o=Bt("throwing and catching exceptions");break;case Dt.SyntaxKind.ClassExpression:o=Bt("class expressions"),i=Bt("declare a class as class C {} not let C = class {}")}let s="";return s=r?Bt("{0} not currently supported",o):Bt("{0} not supported",Dt.SyntaxKind[e.kind]),i&&(s+=" - "+i),Lt(n,s)}function se(e){return Rt(e)+""}function k(e){var t=Ot(e);return t.functionInfo||(t.functionInfo=new vn(e)),t.functionInfo}function b(e){e=Ot(e);return e.variableInfo||(e.variableInfo={}),e.variableInfo}function L(t,e=!1){var n=b(t),o=(e&&(n.written=!0),jt(t));if(null!=o&&o!=U.action){let e=U.action;for(;e&&e!=o;){var r=k(e);r.capturedVars.indexOf(t)<0&&r.capturedVars.push(t),e=jt(e)}n.captured=!0}}function M(e){var t=e(H);return r&&H.recordAction(f,e),t}function W(n,o=!1){return M(e=>{o&&!Nt.U.lookup(e.explicitlyUsedIfaceMembers,n)&&(Nt.U.assert(!e.finalPass),e.explicitlyUsedIfaceMembers[n]=!0);let t=Nt.U.lookup(e.ifaceMemberMap,n);return null==t&&(Nt.U.assert(!e.finalPass),t=e.ifaceMemberMap[n]=-1,e.emitString(n)),t})}function ae(e){e.flags&Dt.TypeFlags.Void&&Lt(9203,Bt("void-typed variables not supported"))}function le(e){var t=Ot(e);ae(nn(e)),t.cell||(t.cell=new Nt.ir.Cell(null,e,b(e))),H.globals.indexOf(t.cell)<0&&H.globals.push(t.cell)}function ce(t){var e;if($t(t))return z(t),(e=Ot(t)).cell||le(t),e.cell;{let e=U.localIndex(t);return e||(H.finalPass?Lt(9204,Bt("cannot locate identifer")):e=U.mkLocal(t,b(t))),e}}function ue(e){return e.kind==Nt.SK.MethodDeclaration&&0==e.parameters.length&&"toString"==Qt(e)}function de(e){if(32&e.flags||16&e.flags&&Nt.compileOptions.skipPxtModulesEmit)throw y.needsFullRecompile=!0,Lt(9200,Bt("full recompile required"))}function G(e,t=null){const n=Ot(t=t||e.symbol.valueDeclaration);if(!n.classInfo){const e=fn(t)+"__C"+Rt(t),g=new cn(e,t),h=((n.classInfo=g).attrs.autoCreate&&(A[g.attrs.autoCreate]=!0),g.baseClassInfo=function(e){if(e.heritageClauses)for(var t of e.heritageClauses)switch(t.token){case Nt.SK.ExtendsKeyword:if(!t.types||1!=t.types.length)throw Lt(9228,Bt("invalid extends clause"));var n=nn(t.types[0]);if(n&&en(n))return St.getTypeAtLocation(e),G(n);throw Lt(9228,Bt("cannot inherit from this type"));case Nt.SK.ImplementsKeyword:break;default:throw Lt(9228,Bt("invalid heritage clause"))}return null}(t),g.baseClassInfo?Nt.U.toDictionary(g.baseClassInfo.allfields,e=>Qt(e)):{}),_=(e,t=g.baseClassInfo)=>t?t.methods[e]||_(e,t.baseClassInfo):null;for(var o of t.members)if(o.kind==Nt.SK.PropertyDeclaration){var r=o;Wt(r)||g.allfields.push(r);const n=Qt(r);(_(n)||Nt.U.lookup(h,n))&&P(r,9279,Bt("redefinition of '{0}' as field",n))}else if(o.kind==Nt.SK.Constructor)for(var i of o.parameters)an(i)&&g.allfields.push(i);else if(Kt(o)){r=k(o);r.parentClassInfo=g,r.isUsed&&q(g);const n=Qt(o);g.methods.hasOwnProperty(n)||(g.methods[n]=[]),g.methods[n].push(o);o=Nt.U.lookup(h,n);if(o){const e=Ot(o);64&e.flags||(e.flags|=64,8&e.flags&&W(n,!0),de(e))}}if(g.baseClassInfo){g.allfields=g.baseClassInfo.allfields.concat(g.allfields);{var s=g;for(var a of s.allMethods()){let t=null;var l,c,u=Gt(a),d=Qt(a);for(let e=s.baseClassInfo;e;e=e.baseClassInfo)if(e.methods.hasOwnProperty(d))for(var p of e.methods[d])Gt(p)==u&&(t=p);t&&(l=k(a),c=k(t),t.parameters.length!=a.parameters.length&&P(a,9255,Bt("the overriding method is currently required to have the same number of arguments as the base one")),(l.virtualParent=c).virtualParent||(de(Ot(t)),c.virtualParent=c),Nt.assert(c.virtualParent==c,"pinf.virtualParent == pinf"))}}}}return n.classInfo}function pe(e){return!!e&&!Vt(e)&&(e.kind!==Nt.SK.ArrayLiteralExpression?null==Z(e):e.elements.some(pe))}function K(e){var t=Q(e);return t?ee(t.val):$t(e)&&Jt(e).shim?Ae(e,e,[]):(t=ce(e),L(e),t.load())}function ge(e){Jt(e).shim&&Lt(9207,Bt("built-in functions cannot be yet used as values; did you forget ()?"));var t=k(e);return he(t),t.location?t.location.load():(Nt.assert(!H.finalPass||0==t.capturedVars.length,"!bin.finalPass || info.capturedVars.length == 0"),t.usedAsValue=!0,X(e),Pe(e))}function he(e){void 0===e.usedBeforeDecl?e.usedBeforeDecl=!0:H.finalPass&&e.usedBeforeDecl&&e.capturedVars.length&&jt(e.decl)&&!e.alreadyEmitted&&Lt(9278,Bt("function referenced before all variables it uses are defined"))}function _e(e){var t=$(e),n=Q(t);if(n)return ee(n.val);if(t&&(Xt(t)||Yt(t)))return K(t);if(t&&t.kind==Nt.SK.FunctionDeclaration)return ge(t);if("undefined"==e.text)return ee(void 0);throw V(e,Bt("Unknown or undeclared identifier"),9235)}function me(e){e=function e(t){return t?Kt(t)?t:e(t.parent):null}(e),e||Lt(9208,Bt("'this' used outside of a method")),e=k(e);return e.thisParameter||Nt.oops("no this"),K(e.thisParameter)}function fe(e){let t;var n,o;return(t=""==e?Nt.ir.rtcall("String_::mkEmpty",[]):(o=e,n=M(e=>e.emitString(o)),Nt.ir.ptrlit(n,JSON.stringify(e)))).isStringLiteral=!0,t}function j(e){var t=xe(e),n=re(e);return Nt.target.isNative||Vt(e)?J(n,t):J(Nt.ir.rtcallMask("String_::stringConv",1,1,[n]),!0)}function ye(e){let o=0,t=(e,t)=>{return Vt(n=t)&&""==n.text?e:(o++,ne("String_::concat",[J(e,!0),j(t)],null));var n},n=Ot(j(e.head)).valueOverride;for(var r of e.templateSpans)n=t(n,r.expression),n=t(n,r.literal);return 0==o?ne("String_::concat",[J(n,!0),J(Nt.ir.rtcall("String_::mkEmpty",[]),!1)],null):n}function ke(e){e=Dt.getDeclarationOfKind(e.symbol,Nt.SK.GetAccessor);if(null==e)throw Lt(9281,Bt("setter currently requires a corresponding getter"));return e}function be(e){if(e.kind==Nt.SK.Parameter||e.kind==Nt.SK.PropertyDeclaration)return e=Ot(e),Nt.target.switches.slowFields||64&e.flags}function ve(e,t=null){let n=nn(e.expression),o={callingConvention:0,paramDefl:{}},r=null,i=!1;if(!t&&sn(n)?r="String_::charAt":Zt(n)?r=t?"Array_::setAt":"Array_::getAt":zt(s=n)&&(s.objectFlags&Dt.ObjectFlags.Interface||s.objectFlags&Dt.ObjectFlags.Anonymous)&&(o=hn(n.symbol),r=t?o.indexerSet:o.indexerGet),!r&&n.flags&(Dt.TypeFlags.Any|Dt.TypeFlags.StructuredOrTypeVariable)&&(r=t?"pxtrt::mapSetGeneric":"pxtrt::mapGetGeneric",i=!0),r){if(i||ot(e.argumentExpression))return ne(r,[e.expression,e.argumentExpression],o,t?[t]:[]);throw V(e,Bt("non-numeric indexer on {0}",r),9238)}var s;throw V(e,Bt("unsupported indexer"),9239)}function Te(e){var t=!(!$t(t=e)||pe(t.initializer)&&!Jt(t).whenUsed)||(t=e).kind==Nt.SK.FunctionDeclaration&&!jt(t)||Kt(t)||Dt.isClassDeclaration(e);return!Nt.target.switches.noTreeShake&&(!F.testMode||!t||wt(e))&&t}function Ee(e){return!Te(e)||(e=Ot(e),H.finalPass?8&e.flags:e==f)}function z(e){var t;e&&((t=Ot(e)).classInfo?q(t.classInfo):(F.computeUsedSymbols&&e.symbol&&(y.usedSymbols[qt(St,e)]=null),Mt()&&Kt(e)&&W(Qt(e),!0),Se(e),8&t.flags||(t.flags|=8,Te(e)&&m.push(e))))}function X(e){z(e)}function Se(e){r&&(f?f.usedNodes[se(e)]=e:Nt.U.oops("no using ctx for: "+Qt(e)))}function Ce(e){if(!e)return null;var t=Ot(e);if(void 0!==t.declCache)return t.declCache;let n,o=St.getSymbolAtLocation(e);return n=o&&!(n=o.valueDeclaration)&&o.declarations&&(t=o.declarations[0])&&t.kind==Dt.SyntaxKind.ImportEqualsDeclaration&&(o=St.getSymbolAtLocation(t.moduleReference))?o.valueDeclaration:n}function $(e){let t=Ce(e);return z(t),!t&&e&&e.kind==Nt.SK.PropertyAccessExpression&&(e=e,Ot(t={kind:Nt.SK.PropertySignature,symbol:{isBogusSymbol:!0,name:e.name.getText()},name:e.name}).flags|=2),p.declCache=t||null,t}function xe(e){return e.kind==Nt.SK.NullKeyword||e.kind==Nt.SK.NumericLiteral?!!e.isRefOverride:!Vt(e)}function Be(e){Nt.assert(e.length<=8,"args.length <= 8");let n=0;return e.forEach((e,t)=>{xe(e)&&(n|=1<<t)}),n}function Ae(e,t,n){let o=Jt(e),r=!(nn(t).flags&Dt.TypeFlags.Void),i=o.shim;if(0<=i.indexOf("(")){var s=/(.*)\((.*)\)$/.exec(i);if(s){n.length&&Nt.U.userError("no arguments expected");var a=[];if(s[2].replace(/\s/g,"")){for(var l of s[2].split(/,/)){let e=parseInt(l);isNaN(e)&&null==(e=null==(e=tt(t,l))?function(e,t){let n=et(e,t,"userconfig");return n=null==n?et(e,t,"config"):n}(t,l):e)&&Nt.U.userError("invalid argument: "+l+" in "+i),a.push(Nt.ir.numlit(e))}4<a.length&&Nt.U.userError("too many args")}return i=s[1],F.target.isNative&&Nt.hexfile.validateShim(rn(e),i,o,!0,a.map(e=>!0)),Nt.ir.rtcallMask(i,0,o.callingConvention,a)}}return"TD_NOOP"==i?(Nt.assert(!r,"!hasRet"),Nt.target.switches.profile&&"perfCounter"==o.shimArgument&&(n[0]&&n[0].kind==Nt.SK.StringLiteral&&(U.perfCounterName=n[0].text),U.perfCounterName||(U.perfCounterName=U.getFullName())),ee(void 0)):"TD_ID"==i||"ENUM_GET"===i?(Nt.assert(1==n.length,"args.length == 1"),re(n[0])):(F.target.shimRenames&&Nt.U.lookup(F.target.shimRenames,i)&&(i=F.target.shimRenames[i]),F.target.isNative&&Nt.hexfile.validateShim(rn(e),i,o,r,n.map(ot)),ne(i,n,o))}function Ie(e,o,r){if(e){var t=e.getParameters(),n=o.length;t.length>o.length&&t.slice(o.length).forEach(n=>{if(n.valueDeclaration&&n.valueDeclaration.kind==Nt.SK.Parameter){n=n.valueDeclaration;if(n.initializer)!function(e){switch(e.kind){case Nt.SK.UndefinedKeyword:case Nt.SK.NullKeyword:case Nt.SK.TrueKeyword:case Nt.SK.FalseKeyword:case Nt.SK.NumericLiteral:return 1;case Nt.SK.PropertyAccessExpression:return re(e).exprKind==Tt.NumberLiteral;default:return}}(n.initializer)&&Lt(9212,Bt("only numbers, null, true and false supported as default arguments")),o.push(n.initializer);else{let e=gn(r,Qt(n)),t=e?ee(parseInt(e)):null;null==t&&(t=ee(void 0)),o.push(J(t))}}else Lt(9213,Bt("unsupported default argument (shouldn't happen)"))});for(let e=0;e<n;e++){var i=t[e];i&&i.valueDeclaration&&i.valueDeclaration.kind==Nt.SK.Parameter&&(o[e],i.valueDeclaration)}r.imageLiteral&&(Vt(o[0])||Lt(9214,Bt("Only image literals (string literals) supported here; {0}",Pt(o[0]))),o[0]=function(t){t=t||"0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n";let n=0,o=0,r=0,i="",s=0;t+="\n";for(let e=0;e<t.length;++e)switch(t[e]){case".":case"_":case"0":i+="0,",n++,s++;break;case"#":case"*":case"1":i+="255,",n++,s++;break;case"\t":case"\r":case" ":break;case"\n":n&&(0==o?o=n:n!=o&&Lt(9205,Bt("lines in image literal have to have the same width (got {0} and then {1} pixels)",o,n)),n=0,r++);break;default:Lt(9206,Bt("Only 0 . _ (off) and 1 # * (on) are allowed in image literals"))}var e="_img"+H.lblNo++,a=(s%2!=0&&(i+="0"),H.otherLiterals.push(`
.balign 4
${e}: .short 0xffff
        .short ${o}, ${r}
        .byte ${i}
`),"new pxsim.Image("+o+", ["+i+"])");return{kind:Nt.SK.NumericLiteral,imageLiteral:e,jsLit:a}}(o[0].text))}}function Y(n,e,o,t,r=null,i=null){var s;r=r||$(e);let a=!1,l=!1,c=!1;var u=n===e;if(r)switch(r.kind){case Nt.SK.PropertySignature:case Nt.SK.PropertyAssignment:case Nt.SK.PropertyDeclaration:case Nt.SK.MethodSignature:a=!0;break;case Nt.SK.Parameter:an(r)&&(a=!0);break;case Nt.SK.GetAccessor:case Nt.SK.SetAccessor:case Nt.SK.MethodDeclaration:a=!0,l=!0,c=Wt(r);break;case Nt.SK.FunctionDeclaration:c=!0;break;case Nt.SK.ModuleDeclaration:break;default:r=null}else e.kind==Nt.SK.PropertyAccessExpression&&(a=!0);Nt.target.switches.slowMethods&&(l=!1);var d=Jt(r);let p=o.slice(0);if((a=a&&Wt(r)?!1:a)&&!i&&e.kind==Nt.SK.PropertyAccessExpression&&(i=e.expression),y.usedArguments&&d.trackArgs){let t=i?[i].concat(p):p,e=d.trackArgs.map(e=>t[e]).map(e=>{var t=$(e);return!t||t.kind!=Nt.SK.EnumMember&&t.kind!=Nt.SK.VariableDeclaration?e&&e.kind==Nt.SK.StringLiteral?e.text:"*":qt(St,t)}).join(","),n=qt(St,r),o=y.usedArguments[n];(o=o||(y.usedArguments[n]=[])).indexOf(e)<0&&o.push(e)}function g(){var e=we(r,n,p.map(e=>re(e))),t=e.data;return p[0]&&t.proc&&t.proc.classInfo&&(t.isThis=p[0].kind==Nt.SK.ThisKeyword),e}if(Ie(t,p,d),c&&!k(r).location)return d.shim&&!Ve(r)?Ae(r,n,p):(X(r),g());if(e.kind==Nt.SK.SuperKeyword){let t=U.classInfo.baseClassInfo.ctor;for(let e=U.classInfo.baseClassInfo;e&&!t;e=e.baseClassInfo)t=e.ctor;if(!t&&H.finalPass)throw Lt(9280,Bt("super() call requires an explicit constructor in base class"));o=p.map(e=>re(e));return o.unshift(me(e)),De(t,n,o)}if(a){if(Nt.U.assert(!Wt(r)),i?p.unshift(i):V(n,Bt("strange method call"),9241),!r){Nt.U.assert(e.kind==Nt.SK.PropertyAccessExpression);const Dt=e.name.text;return Ne(p.map(e=>re(e)),{ifaceIndex:W(Dt,!0),callLocationIndex:kt(n),noArgs:u})}var h=k(r);if(h.parentClassInfo&&q(h.parentClassInfo),X(r),i.kind==Nt.SK.SuperKeyword)return g();const o=!!h.virtualParent,t=!!Mt()||!!Nt.target.switches.slowMethods;if(o&&!t)return r.kind==Nt.SK.MethodDeclaration?Nt.U.assert(!u):r.kind==Nt.SK.GetAccessor||r.kind==Nt.SK.SetAccessor?Nt.U.assert(u):Nt.U.assert(!1),Nt.U.assert(!H.finalPass||null!=h.virtualIndex,"!bin.finalPass || info.virtualIndex != null"),Ne(p.map(e=>re(e)),{classInfo:h.parentClassInfo,virtualIndex:h.virtualIndex,noArgs:u,isThis:p[0].kind==Nt.SK.ThisKeyword});if(d.shim&&!Ve(r))return Ae(r,n,p);if(d.helper){let e,t=St.getSymbolsInScope(n,Dt.SymbolFlags.Module);for(var _ of t)if("helpers"==_.name)for(var m of _.declarations||[_.valueDeclaration])if(m.kind==Nt.SK.ModuleDeclaration)for(var f of m.body.statements)(null==(s=f.symbol)?void 0:s.name)==d.helper&&(e=f);return e||Lt(9215,Bt("helpers.{0} not found",d.helper)),e.kind!=Nt.SK.FunctionDeclaration&&Lt(9216,Bt("helpers.{0} isn't a function",d.helper)),X(r=e),g()}return o||Nt.target.switches.slowMethods||!l?Ne(p.map(e=>re(e)),{ifaceIndex:W(Qt(r),!0),isSet:u&&2==p.length,callLocationIndex:kt(n),noArgs:u}):(Nt.U.assert(r.kind!=Nt.SK.MethodSignature),g())}return r&&r.kind==Nt.SK.ModuleDeclaration&&("String"==Qt(r)?Lt(9219,Bt('to convert X to string use: X + ""')):Lt(9220,Bt("namespaces cannot be called directly"))),p.unshift(e),Nt.U.assert(!u),Ne(p.map(e=>re(e)),{virtualIndex:-1,callLocationIndex:kt(n),noArgs:u})}function De(e,t,n){Nt.U.assert(!H.finalPass||!!e);e={proc:e,callLocationIndex:kt(t),virtualIndex:null,ifaceIndex:null};return Nt.ir.op(Tt.ProcCall,n,e)}function Ne(e,t){return Nt.ir.op(Tt.ProcCall,e,t)}function v(e){return Ot(e).proc}function we(e,t,n){var o=v(e);return e.kind==Nt.SK.FunctionDeclaration&&he(k(e)),Nt.assert(!!o||!H.finalPass,"!!proc || !bin.finalPass"),De(o,t,n)}function Oe(e){return e.members.filter(e=>e.kind==Nt.SK.Constructor)[0]}function q(e){Se(e.decl),e.isUsed||(Ot(e.decl).flags|=8,e.baseClassInfo&&q(e.baseClassInfo),H.usedClassInfos.push(e))}function Re(e){var t,n=e.parameters.slice(0);return!Wt(e)&&Kt(e)&&((t=k(e)).thisParameter||(t.thisParameter={kind:Nt.SK.Parameter,name:{text:"this"},isThisParameter:!0,parent:e}),n.unshift(t.thisParameter)),n}function Pe(e){e=yn(e);return Nt.ir.ptrlit(e+"_Lit",e)}function Le(){const e=l;if(0<e.length){l=[];for(var t of e){const e=U;try{Fe(t)}finally{U=e}}}}function Me(e){H.finalPass&&e.functionsToDefine&&Nt.U.pushRange(l,e.functionsToDefine)}function Fe(n){const e=k(n);let o=null;if(H.finalPass){if(e.alreadyEmitted)return Nt.U.assert(e.usedBeforeDecl),null;e.alreadyEmitted=!0}let t=n.kind==Nt.SK.ArrowFunction||n.kind==Nt.SK.FunctionExpression,r=e.capturedVars.slice(0),i=r.map((e,t)=>{t=new Nt.ir.Cell(t,e,b(e));return t.iscap=!0,t});void 0===e.usedBeforeDecl&&(e.usedBeforeDecl=!1),0<r.length?(Nt.assert(null!=jt(n),"getEnclosingFunction(node) != null)"),o=Nt.ir.shared(Nt.ir.rtcall("pxt::mkAction",[Nt.ir.numlit(r.length),Pe(n)])),e.usedAsValue=!0,r.forEach((e,t)=>{var n=U.localIndex(e),e=(n||Lt(9223,Bt("cannot find captured value: {0}",St.symbolToString(e.symbol))),n.loadCore());U.emitExpr(Nt.ir.rtcall("pxtrt::stclo",[o,Nt.ir.numlit(t),e]))}),n.kind==Nt.SK.FunctionDeclaration&&(e.location=U.mkLocal(n,b(n)),U.emitExpr(e.location.storeDirect(o)),o=null)):t&&(o=Pe(n),e.usedAsValue=!0),Nt.assert(!!o==t,"!!lit == isExpression");var s=v(n);if(s)(U=s).reset();else{Nt.assert(!H.finalPass,"!bin.finalPass");const o=Ot(n),t=new Nt.ir.Procedure;t.isRoot=!!(1&o.flags),t.action=n,t.info=e,(o.proc=t).usingCtx=f,U=t,M(e=>e.addProc(t))}U.captured=i;var a,l,c=[];if(n.parent.kind==Nt.SK.ClassDeclaration){s=G(null,n.parent);if(U.classInfo?Nt.assert(U.classInfo==s,"proc.classInfo == classInfo"):U.classInfo=s,n.kind==Nt.SK.Constructor){if(s.baseClassInfo)for(var u of s.baseClassInfo.decl.members)u.kind==Nt.SK.Constructor&&X(u);s.ctor?Nt.assert(s.ctor==U,"classInfo.ctor == proc"):s.ctor=U;for(var d of s.allfields)d.kind!=Nt.SK.PropertyDeclaration||Wt(d)||(d=d).initializer&&c.push(d)}}const p=[],g=[];U.args=Re(n).map((e,t)=>{e.name.kind===Nt.SK.ObjectBindingPattern&&p.push(e),n.kind==Nt.SK.Constructor&&an(e)&&g.push(e);t=new Nt.ir.Cell(t,e,b(e));return Me(t.info),t.isarg=!0,t}),U.args.forEach(e=>{var t;e.isByRefLocal()&&(t=Nt.ir.shared(Nt.ir.rtcall("pxtrt::mklocRef",[])),U.emitExpr(Nt.ir.rtcall("pxtrt::stlocRef",[t,e.loadCore()],1)),U.emitExpr(e.storeDirect(t)))}),p.forEach(e=>ht(e));for(a of g){var h=Xe(U.classInfo,$e(U.classInfo,Qt(a)),!1),h=Nt.ir.op(Tt.FieldAccess,[K(e.thisParameter)],h);U.emitExpr(Nt.ir.op(Tt.Store,[h,K(a)]))}for(l of c){var _=Xe(U.classInfo,$e(U.classInfo,Qt(l)),!1),_=Nt.ir.op(Tt.FieldAccess,[K(e.thisParameter)],_);U.emitExpr(Nt.ir.op(Tt.Store,[_,re(l.initializer)]))}if(Le(),n.body.kind==Nt.SK.Block){if(B(n.body),on(U.action)){const e=U.body[U.body.length-1];e&&e.stmtKind==Nt.ir.SK.Jmp&&e.jmpMode==Nt.ir.JmpMode.Always||U.emitJmp(x(n).ret,ee(void 0),Nt.ir.JmpMode.Always)}}else{s=re(n.body);U.emitJmp(x(n).ret,s,Nt.ir.JmpMode.Always)}U.emitLblDirect(x(n).ret),U.stackEmpty();s=U.mkLabel("final");if(on(U.action)?U.emitJmp(s):U.emitJmp(s,ee(void 0)),U.emitLbl(s),e.capturedVars.length&&e.usedBeforeDecl&&n.kind==Nt.SK.FunctionDeclaration&&!H.finalPass){e.capturedVars.sort((e,t)=>t.pos-e.pos);const Nt=b(e.capturedVars[0]);Nt.functionsToDefine||(Nt.functionsToDefine=[]),Nt.functionsToDefine.push(n)}return Nt.assert(!H.finalPass||0==m.length,"!bin.finalPass || usedWorkList.length == 0"),o}function Ue(e){e=Nt.ir.shared(e);return U.emitExpr(e),e}function He(){return Ue(Nt.ir.op(Tt.JmpValue,[]))}function Ve(e){return!F.target.isNative&&e.body&&(e.body.kind!=Nt.SK.Block||0<e.body.statements.length)}function We(n){if(Ee(n)&&!(32&Ot(n).flags)){var e=Jt(n);if(null!=e.shim){if("@"==e.shim[0])return;if(F.target.isNative&&Nt.hexfile.validateShim(rn(n),e.shim,e,on(n),Re(n).map(e=>ln(nn(e)))),!Ve(n))return}if(!Dt.isInAmbientContext(n)&&n.body){let e=null,t=U;try{e=Fe(n)}finally{U=t}return e}}}function Ge(){}function Ke(e){e.needsIRCache=!0,o.push(e)}function je(e,t=null){let n=o.length;return e.kind!=Nt.SK.PropertyAccessExpression&&e.kind!=Nt.SK.ElementAccessExpression||Ke(e.expression),t&&Ke(t),o.length==n?Ge:()=>{for(let e=n;e<o.length;++e)o[e].cachedIR=null,o[e].needsIRCache=!1;o.splice(n,o.length-n)}}function J(e,t=!1){t={kind:Nt.SK.NullKeyword,isRefOverride:t};return Ot(t).valueOverride=e,t}function ze(e,t,n,o=null){var r=je(e),o=o?re(o):ee(1),i=Nt.ir.shared(re(e)),t=Nt.ir.shared(Je(t,i,o));return Ye(e,J(t,!0)),r(),n?i:t}function Xe(e,t,n=!0){Wt(t)&&Nt.U.oops("fieldIndex on static field: "+Qt(t));var o=Jt(t),r=e.allfields.indexOf(t);return r<0&&H.finalPass&&Nt.U.oops("missing field"),{idx:r,name:Qt(t),isRef:!0,shimName:o.shim,classInfo:e,needsCheck:n}}function $e(e,t){e=e.allfields.filter(e=>e.name.text==t)[0];return e||Lt(9224,Bt("field {0} not found",t)),e}function Ye(e,t){var n=$(e),o=$t(n);if(e.kind==Nt.SK.Identifier||o)n&&(o||Xt(n)||Yt(n))?(o=ce(n),L(n,!0),U.emitExpr(o.storeByRef(re(t)))):V(e,Bt("bad target identifier"),9248);else if(e.kind==Nt.SK.PropertyAccessExpression){n=$(e);!n||n.kind!=Nt.SK.GetAccessor&&n.kind!=Nt.SK.SetAccessor?n&&(n.kind==Nt.SK.PropertySignature||n.kind==Nt.SK.PropertyAssignment||be(n))?U.emitExpr(Y(e,e,[t],null,n)):(o=re(e),U.emitExpr(Nt.ir.op(Tt.Store,[o,re(t)]))):(ke(n),(n=Dt.getDeclarationOfKind(n.symbol,Nt.SK.SetAccessor))||V(e,Bt("setter not available"),9253),U.emitExpr(Y(e,e,[t],null,n)))}else if(e.kind==Nt.SK.ElementAccessExpression)U.emitExpr(ve(e,t));else if(e.kind==Nt.SK.ArrayLiteralExpression)if(t.kind==Nt.SK.ArrayLiteralExpression){const Dt=t.elements.map(e=>{e=Nt.ir.shared(re(e));return U.emitExpr(e),e});e.elements.forEach((e,t)=>{Ye(e,J(Dt[t]))})}else{const Dt=Nt.ir.shared(re(t));e.elements.forEach((e,t)=>{Ye(e,J(te("Array_::getAt",[Dt,Nt.ir.numlit(t)])))})}else V(e,Bt("bad assignment target"),9249)}function qe(e){if(Ut())switch(e){case"numops::adds":case"numops::subs":case"numops::eors":case"numops::ands":case"numops::orrs":return"@nomask@"+e}return Mt()&&"pxt::switch_eq"===e?"numops::eq":e}function Je(e,t,n){return te(qe(e),[t,n])}function Qe(e,t){if(t){var n=t.val;switch(function e(t){if(t.kind==Nt.SK.Identifier)return t.text;if(t.kind==Nt.SK.PropertyAccessExpression){const Nt=t,n=e(Nt.expression);if(n)return n+"."+Nt.name.text}return null}(e)){case"Math.floor":return{val:Math.floor(n)};case"Math.ceil":return{val:Math.ceil(n)};case"Math.round":return{val:Math.round(n)}}}return null}function Q(e){if(!e)return null;var t=Ot(e);if(void 0===t.constantFolded)if(Xt(e)&&e.parent.flags&Dt.NodeFlags.Const){const Dt=e;Dt.initializer&&(t.constantFolded=Z(Dt.initializer))}else if(e.kind==Nt.SK.EnumMember){const Dt=e,n=function(e){let t=Jt(e).enumval;if(!t){e=St.getConstantValue(e);if(null==e)return null;t=e+""}return/^[+-]?\d+$/.test(t)||/^0x[A-Fa-f\d]{2,8}$/.test(t)?t:(Nt.U.userError("enumval only support number literals"),"0")}(Dt);if(null==n)t.constantFolded=Z(Dt.initializer);else{const Dt=parseInt(n);isNaN(Dt)||(t.constantFolded={val:Dt})}}else if(e.kind==Nt.SK.PropertyDeclaration&&Wt(e)&&pn(e)){const Dt=e;t.constantFolded=Z(Dt.initializer)}return t.constantFolded}function Z(e){var t;return e?(void 0===(t=Ot(e)).constantFolded&&(t.constantFolded=null,e=function(e){if(!e)return null;switch(e.kind){case Nt.SK.PrefixUnaryExpression:var t=e,n=Z(t.operand),t=t.operator;if(!n)return null;var o=n.val;switch(t){case Nt.SK.PlusToken:return{val:+o};case Nt.SK.MinusToken:return{val:-o};case Nt.SK.TildeToken:return{val:~o};case Nt.SK.ExclamationToken:return{val:!o};default:return null}return;case Nt.SK.BinaryExpression:n=e,t=Z(n.left);if(t){var r=Z(n.right);if(r){var i=n.operatorToken.kind;if(!t||!r)return null;var s=t.val,a=r.val;switch(i){case Nt.SK.PlusToken:return{val:s+a};case Nt.SK.MinusToken:return{val:s-a};case Nt.SK.SlashToken:return{val:s/a};case Nt.SK.PercentToken:return{val:s%a};case Nt.SK.AsteriskToken:return{val:s*a};case Nt.SK.AsteriskAsteriskToken:return{val:s**a};case Nt.SK.AmpersandToken:return{val:s&a};case Nt.SK.BarToken:return{val:s|a};case Nt.SK.CaretToken:return{val:s^a};case Nt.SK.LessThanLessThanToken:return{val:s<<a};case Nt.SK.GreaterThanGreaterThanToken:return{val:s>>a};case Nt.SK.GreaterThanGreaterThanGreaterThanToken:return{val:s>>>a};case Nt.SK.LessThanEqualsToken:return{val:s<=a};case Nt.SK.LessThanToken:return{val:s<a};case Nt.SK.GreaterThanEqualsToken:return{val:a<=s};case Nt.SK.GreaterThanToken:return{val:a<s};case Nt.SK.EqualsEqualsToken:return{val:s==a};case Nt.SK.EqualsEqualsEqualsToken:return{val:s===a};case Nt.SK.ExclamationEqualsEqualsToken:return{val:s!==a};case Nt.SK.ExclamationEqualsToken:return{val:s!=a};case Nt.SK.BarBarToken:return{val:s||a};case Nt.SK.AmpersandAmpersandToken:return{val:s&&a};default:return null}return}else;}return null;case Nt.SK.NumericLiteral:{const Nt=parseFloat(e.text);return isNaN(Nt)?null:{val:Nt}}case Nt.SK.NullKeyword:return{val:null};case Nt.SK.TrueKeyword:return{val:!0};case Nt.SK.FalseKeyword:return{val:!1};case Nt.SK.UndefinedKeyword:return{val:void 0};case Nt.SK.CallExpression:{const Nt=e;return 1==Nt.arguments.length?Qe(Nt.expression,Z(Nt.arguments[0])):null}case Nt.SK.PropertyAccessExpression:case Nt.SK.Identifier:return Q(Ce(e));case Nt.SK.AsExpression:return Z(e.expression);default:return null}}(e),t.constantFolded=e),t.constantFolded):null}function Ze(e){let t=Nt.target.switches.boxDebug,n=null;if(t)try{Nt.target.switches.boxDebug=!1,n=re(e)}finally{Nt.target.switches.boxDebug=t}else n=re(e);e=nt(n);if(void 0===e)throw Lt(9267,Bt("a constant number-like expression is required here"));return e}function et(e,t,n){var o,e=St.getSymbolsInScope(e,Dt.SymbolFlags.Module).filter(e=>e.name==n&&!!e.valueDeclaration)[0];if(e)for(var r of e.valueDeclaration.body.statements)if(r.kind==Nt.SK.VariableStatement)for(o of r.declarationList.declarations)if(o.symbol.name==t)return Ze(o.initializer);return null}function tt(e,t){var e=St.getSymbolsInScope(e,Dt.SymbolFlags.Enum).filter(e=>"DAL"==e.name&&!!e.valueDeclaration)[0];return(e=e&&e.valueDeclaration.members.filter(e=>e.symbol.name==t)[0])?St.getConstantValue(e):null}function nt(e){var t;if(e.exprKind==Nt.ir.EK.NumberLiteral)return t=e.data,F.target.isNative&&!Mt()?t==Nt.taggedNull||t==Nt.taggedUndefined||t==Nt.taggedFalse?0:t==Nt.taggedTrue?1:"number"==typeof t?t>>1:void 0:"number"==typeof t?t:void 0;if(e.exprKind==Nt.ir.EK.RuntimeCall&&2==e.args.length){var n=nt(e.args[0]),o=nt(e.args[1]);if(void 0!==n&&void 0!==o)switch(e.data){case"numops::orrs":return n|o;case"numops::adds":return n+o;default:return void console.log(e)}}}function ee(e){if(!F.target.isNative||Mt())return Nt.ir.numlit(e);{const F=mn(e);if(null!=F)return Nt.ir.numlit(F);var t;if("number"==typeof e)return!Nt.target.switches.boxDebug&&(0|e)==e&&-1073741824<=e&&e<=1073741823?Nt.ir.numlit(e<<1|1):(t=H.emitDouble(e),Nt.ir.ptrlit(t,JSON.stringify(e)));throw Nt.U.oops("bad literal: "+e)}}function ot(e){if(e.kind==Nt.SK.NullKeyword){var t=Ot(e).valueOverride;if(null!=t)return t.exprKind==Tt.NumberLiteral?!F.target.isNative||!!(1&t.data):t.exprKind==Tt.RuntimeCall&&"pxt::ptrOfLiteral"==t.data?t.args[0].exprKind==Tt.PointerLiteral&&!isNaN(parseFloat(t.args[0].jsInfo)):t.exprKind==Tt.PointerLiteral&&!isNaN(parseFloat(t.jsInfo))}return e.kind==Nt.SK.NumericLiteral||ln(nn(e))}function te(e,t){return Nt.ir.rtcallMask(e,(1<<t.length)-1,0,t)}function ne(s,e,a,t=null){let l=[],n=Nt.hexfile.lookupFunc(s);var o;Ut()&&(o=Nt.U.lookup(bn,s))&&(n=o,s=o.name),n&&(l=n.argsFmt);let c=Be(e=t?e.concat(t):e),u=[],r=e.map((e,t)=>{var n,o=re(e);if(!Ft())return o;let r=l[t+1],i=ot(e);if(r=!r&&s.indexOf("::")<0?i?"I":"_":r){if("_"==r[0]||"T"==r||"N"==r)return(n=function(){switch(r){case"_Buffer":return pxt.BuiltInType.BoxedBuffer;case"_Image":return Nt.target.imageRefTag||pxt.BuiltInType.RefImage;case"_Action":return pxt.BuiltInType.RefAction;case"_RefCollection":return pxt.BuiltInType.RefCollection;default:return null}}())&&u.push({argIdx:t,method:"_validate",refTag:n,refTagNullable:!!a.argsNullable}),o;if("I"==r)return o.exprKind==Tt.NumberLiteral&&"number"==typeof o.data?Nt.ir.numlit(o.data>>1):(u.push({argIdx:t,method:"pxt::toInt"}),o);if("B"==r)return c&=~(1<<t),oe(e,o);if("S"==r)return o.isStringLiteral||(u.push({argIdx:t,method:"_pxt_stringConv",returnsRef:!0}),c|=1<<t),o;if("F"==r||"D"==r)return"D"==r&&Nt.U.oops("double arguments not yet supported"),i||Nt.U.userError("argsFmt=...F/D... but argument not a number in "+s),u.push({argIdx:t,method:"D"==r?"pxt::toDouble":"pxt::toFloat"}),o;throw Nt.U.oops("invalid format specifier: "+r)}throw Nt.U.userError("not enough args for "+s)}),i=Nt.ir.rtcallMask(s,c,a?a.callingConvention:0,r);return i.mask||(i.mask={refMask:0}),i.mask.conversions=u,F.target.isNative&&("I"==(o=l[0])?i=un(i):"B"==o?i=dn(i):"F"==o?i=(t=i,Ft()?Nt.ir.rtcall("pxt::fromFloat",[t]):t):"D"==o&&(Nt.U.oops("double returns not yet supported"),i=(e=i,Ft()?Nt.ir.rtcall("pxt::fromDouble",[e]):e))),i}function C(n){H.numStmts++;var e=Nt.assembler.debug||Nt.target.switches.size;let o=!!F.breakpoints;if(e||o){var r=Dt.getSourceFileOfNode(n);if(F.justMyCode&&wt(r)&&(o=!1),e||o){let t=n.pos;for(;/^\s$/.exec(r.text[t]);)t++;for(;"/"==r.text[t]&&"/"==r.text[t+1];){for(;r.text[t]&&"\n"!=r.text[t];)t++;t++}var i=Dt.getLineAndCharacterOfPosition(r,t);if(e){let e=n.end;80<e-t&&(e=t+80);const F=r.text.slice(t,e).trim().replace(/\n[^]*/,"...");U.emit(Nt.ir.comment(`${r.fileName.replace(/pxt_modules\//,"")}(${i.line+1},${i.character+1}): `+F))}o&&(e=Dt.getLineAndCharacterOfPosition(r,n.end),n={id:y.breakpoints.length,isDebuggerStmt:n.kind==Nt.SK.DebuggerStatement,fileName:r.fileName,start:t,length:n.end-t,line:i.line,endLine:e.line,column:i.character,endColumn:e.character},y.breakpoints.push(n),(i=Nt.ir.stmt(Nt.ir.SK.Breakpoint,null)).breakpointInfo=n,U.emit(i))}}}function rt(e,t){switch(t){case Nt.SK.PlusToken:return"numops::adds";case Nt.SK.MinusToken:return"numops::subs";case Nt.SK.SlashToken:return"numops::div";case Nt.SK.PercentToken:return"numops::mod";case Nt.SK.AsteriskToken:return"numops::muls";case Nt.SK.AsteriskAsteriskToken:return"Math_::pow";case Nt.SK.AmpersandToken:return"numops::ands";case Nt.SK.BarToken:return"numops::orrs";case Nt.SK.CaretToken:return"numops::eors";case Nt.SK.LessThanLessThanToken:return"numops::lsls";case Nt.SK.GreaterThanGreaterThanToken:return"numops::asrs";case Nt.SK.GreaterThanGreaterThanGreaterThanToken:return"numops::lsrs";case Nt.SK.LessThanEqualsToken:return"numops::le";case Nt.SK.LessThanToken:return"numops::lt";case Nt.SK.GreaterThanEqualsToken:return"numops::ge";case Nt.SK.GreaterThanToken:return"numops::gt";case Nt.SK.EqualsEqualsToken:return"numops::eq";case Nt.SK.EqualsEqualsEqualsToken:return"numops::eqq";case Nt.SK.ExclamationEqualsEqualsToken:return"numops::neqq";case Nt.SK.ExclamationEqualsToken:return"numops::neq";default:return null}}function it(e){e.statements.forEach(B)}function st(e){if(!(e.flags&Dt.NodeFlags.Let||e.flags&Dt.NodeFlags.Const))throw Lt(9260,Bt("variable needs to be defined using 'let' instead of 'var'"))}function oe(e,t=null){if(!t&&Ut()&&e.kind==Nt.SK.BinaryExpression){var n=e,o=Nt.U.lookup(Nt.thumbCmpMap,rt(0,n.operatorToken.kind));if(o)return Nt.ir.rtcall(o,[re(n.left),re(n.right)])}return t=t||re(e),Mt()?t:Nt.ir.rtcall("numops::toBoolDecr",[t])}function x(e){e=Rt(e);return{fortop:".fortop."+e,cont:".cont."+e,brk:".brk."+e,ret:".ret."+e}}function at(e){if(!e)return 1;switch(e.kind){case Nt.SK.Identifier:case Nt.SK.StringLiteral:case Nt.SK.NumericLiteral:case Nt.SK.NullKeyword:return 1}}function lt(e){return re(e)}function ct(e){at(e)||(C(e),e=lt(e),U.emitExpr(e),U.stackEmpty())}function ut(e=1){for(;e--;)U.emitExpr(te("pxt::endTry",[]))}function dt(){Lt(9282,Bt("jumps (return, break, continue) through finally blocks not supported yet"))}function pt(e){let t=0;if(e.kind==Dt.SyntaxKind.Block&&e.parent)if(e.parent.kind==Dt.SyntaxKind.CatchClause)e.parent.parent.finallyBlock&&(t++,dt());else if(e.parent.kind==Dt.SyntaxKind.TryStatement){const Dt=e.parent;Dt.tryBlock==e&&(Dt.catchClause&&t++,Dt.finallyBlock)&&(t++,dt())}return t}function gt(t,n,o){if(t.name.kind===Nt.SK.ObjectBindingPattern||t.name.kind==Nt.SK.ArrayBindingPattern)return n||(n=t.initializer?Nt.ir.shared(re(t.initializer)):K(t),o=t.initializer?nn(t.initializer):nn(t)),t.name.elements.forEach(e=>gt(e,n,o)),U.stackEmpty(),null;if(!Ee(t))return null;if(Q(t))return null;let e;if(Me((e=$t(t)?(le(t),ce(t)):U.mkLocal(t,b(t))).info),e.isByRefLocal()&&U.emitExpr(e.storeDirect(Nt.ir.rtcall("pxtrt::mklocRef",[]))),ae(nn(t)),t.kind===Nt.SK.BindingElement){C(t);var[r,,]=function e(t,n,o){const r=t.parent.parent;if(r.kind===Nt.SK.BindingElement){const t=e(r,n,o);n=t[0],o=t[1]}if(t.parent.kind==Nt.SK.ArrayBindingPattern){const r=t.parent.elements.indexOf(t),i=(t.dotDotDotToken&&Lt(9203,Bt("spread operator not supported yet")),_n(o,r));return[te("Array_::getAt",[n,Nt.ir.numlit(r)]),i]}return function(e,t,n,o){const r=St.getPropertyOfType(n,o),i=(Nt.U.assert(!!r,"field sym"),St.getTypeOfSymbolAtLocation(r,e));let s;if(tn(n)){const e=G(n);s=Nt.ir.op(Tt.FieldAccess,[t],Xe(e,$e(e,o)))}else s=Ne([t],{ifaceIndex:W(o,!0),callLocationIndex:kt(e),noArgs:!0});return[s,i]}(t,n,o,(t.propertyName||t.name).text)}(t,n,o);U.emitExpr(e.storeByRef(r))}else if(t.initializer){if(C(t),$t(t)){let e=Jt(t).jres;e&&("true"==e&&(e=qt(St,t)),(r=Nt.U.lookup(F.jres||{},e))?ie=r:Lt(9270,Bt("resource '{0}' not found in any .jres file",e)))}t.initializer,U.emitExpr(e.storeByRef(re(t.initializer))),ie=null,U.stackEmpty()}else!function(e){for(;e;){if(function(e){switch(e.kind){case Nt.SK.WhileStatement:case Nt.SK.ForInStatement:case Nt.SK.ForOfStatement:case Nt.SK.ForStatement:case Nt.SK.DoStatement:return 1;default:return}}(e))return 1;e=e.parent}}(t)||(C(t),U.emitExpr(e.storeByRef(ee(void 0))),U.stackEmpty());return e}function ht(e){return gt(e,null,null)}function _t(e,t){var n=xt;It++;try{xt=null;var o=t(e);return xt&&Lt(At,xt),xt=n,It--,o}catch(t){return It--,xt=null,P(e,t.ksErrorCode||9200,t.message),pxt.debug(t.stack),null}}function re(e,t=!0){var n;return t&&e.cachedIR?e.cachedIR:(n=_t(e,mt)||ee(void 0),t&&e.needsIRCache?(e.cachedIR=Nt.ir.shared(n),e.cachedIR):n)}function mt(e){e=function(n){switch(n.kind){case Nt.SK.NullKeyword:return Ot(n).valueOverride||ee(null);case Nt.SK.TrueKeyword:return ee(!0);case Nt.SK.FalseKeyword:return ee(!1);case Nt.SK.TemplateHead:case Nt.SK.TemplateMiddle:case Nt.SK.TemplateTail:case Nt.SK.NumericLiteral:case Nt.SK.StringLiteral:case Nt.SK.NoSubstitutionTemplateLiteral:var o=n;if(o.kind==Nt.SK.NumericLiteral)return o.imageLiteral?Nt.ir.ptrlit(o.imageLiteral,o.jsLit):ee(parseFloat(o.text));if(Vt(o))return fe(o.text);throw Nt.oops();case Nt.SK.TaggedTemplateExpression:{var l=n;function r(e){return/^[0-9a-f]$/i.test(e)}var i,s,o=$(l.tag);if(!o)throw V(l,Bt("invalid tagged template"),9265);let t,a=Jt(o),e={decl:o,qName:o?qt(St,o):"?",args:[l.template],isExpression:!0};function c(e){t=function(t,s){let e=ie;if("_"==s[0]&&"_"==s[1]&&F.jres[s]&&(e=F.jres[s],s=""),""==s&&e){var a=/font\/x-mkcd-b(\d+)/.exec(e.mimeType);if(a)if(H.finalPass){let t=parseInt(a[1]),n=atob(e.data),o=H.usedChars,r="",i="";for(let e=0;e<n.length;e+=t){var l=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8);(l<128||o[l>>5]&1<<(31&l))&&(r+=n.slice(e,e+t),i+=l+", ")}s=Nt.U.toHex(Nt.U.stringToUint8Array(r))}else s="aabbccdd";else e.dataEncoding&&"base64"!=e.dataEncoding?"hex"==e.dataEncoding?s=e.data:Lt(9271,Bt("invalid jres encoding '{0}' on '{1}'",e.dataEncoding,e.id)):s=Nt.U.toHex(Nt.U.stringToUint8Array(Dt.pxtc.decodeBase64(e.data)))}if(/^e[14]/i.test(s)&&t.parent&&t.parent.kind==Nt.SK.CallExpression&&"image.ofBuffer"==t.parent.expression.getText()){const Dt=/^e([14])(..)(..)..(.*)/i.exec(s);s=`870${Dt[1]}${Dt[2]}00${Dt[3]}000000`+Dt[4]}let n="";for(let e=0;e<s.length;++e){var o=s[e];if(!r(o)){if(/^[\s\.]$/.test(o))continue;throw V(t,Bt("invalid character in hex literal '{0}'",o),9265)}r(s[e+1])&&(n+=o+s[e+1],e++)}if(Nt.target.isNative){const Dt=H.emitHexLiteral(n.toLowerCase());return Nt.ir.ptrlit(Dt,Dt)}{const Dt="_hex"+se(t);return Nt.ir.ptrlit(Dt,{hexlit:n.toLowerCase()})}}(l,e(l.template.text))}if(Ot(l).callInfo=e,l.template.kind!=Nt.SK.NoSubstitutionTemplateLiteral)throw V(l,Bt("substitution not supported in hex literal",a.shim),9265);switch(a.shim){case"@hex":c(e=>e);break;case"@f4":c(function(t){if(!Array.isArray(a.groups))throw V(l,Bt("missing groups in @f4 literal"),9272);let n=[],o=[],r={},i=0;a.groups.forEach((e,t)=>{for(var n of e)r[n]=t}),t+="\n";for(let e=0;e<t.length;++e){var s=t[e];switch(s){case" ":case"\t":break;case"\n":0<o.length&&(n.push(o),i=Math.max(o.length,i),o=[]);break;default:let e=Nt.U.lookup(r,s);if(null==e){if(2!=a.groups.length)throw V(l,Bt("invalid character in image literal: '{0}'",e),9273);e=1}o.push(e)}}let e=8;return a.groups.length<=2?e=1:a.groups.length<=16&&(e=4),Nt.f4EncodeImg(i,n.length,e,(e,t)=>n[t][e]||0)});break;default:if(void 0===a.shim&&a.helper){var u=l.template;var d=a;let e,t=St.getSymbolsInScope(u,Dt.SymbolFlags.Module);for(s of t)if("helpers"==s.name)for(var p of s.declarations||[s.valueDeclaration])if(p.kind==Nt.SK.ModuleDeclaration)for(var g of p.body.statements)(null==(i=g.symbol)?void 0:i.name)==d.helper&&(e=g);e||Lt(9215,Bt("helpers.{0} not found",d.helper)),e.kind!=Nt.SK.FunctionDeclaration&&Lt(9216,Bt("helpers.{0} isn't a function",d.helper));var h=e;return X(h),we(h,u,[fe(u.text)]);return}throw V(l,Bt("invalid shim '{0}' on tagged template",a.shim),9265)}return t=a.helper?Nt.ir.rtcall(a.helper,[t]):t;return}case Nt.SK.PropertyAccessExpression:{var t=n;let e=$(t);var a=Q(e);if(a)return ee(a.val);if((e=e.kind==Nt.SK.SetAccessor?ke(e):e).kind==Nt.SK.GetAccessor)return Y(t,t,[],null,e);if(e.kind==Nt.SK.EnumMember)throw Lt(9210,Bt("Cannot compute enum value"));if(e.kind==Nt.SK.PropertySignature||e.kind==Nt.SK.PropertyAssignment)return Y(t,t,[],null,e,t.expression);if(e.kind==Nt.SK.PropertyDeclaration||e.kind==Nt.SK.Parameter)return Wt(e)?K(e):be(e)?Y(t,t,[],null,e,t.expression):(a=function(t){var n=nn(t.expression);if(tn(n)){n=G(n);let e=t.expression.kind==Nt.SK.ThisKeyword;return Nt.target.switches.noThisCheckOpt&&(e=!1),Xe(n,$e(n,t.name.text),!e)}throw V(t,Bt("bad field access"),9247)}(t),Nt.ir.op(Tt.FieldAccess,[re(t.expression)],a));if(Kt(e)||e.kind==Nt.SK.MethodSignature)throw Lt(9211,Bt("cannot use method as lambda; did you forget '()' ?"));if(e.kind==Nt.SK.FunctionDeclaration)return ge(e);if(Xt(e))return K(e);throw V(t,Bt("Unknown property access for {0}",Pt(e)),9237);return}case Nt.SK.BinaryExpression:var _=n;if(_.operatorToken.kind==Nt.SK.EqualsToken){let e=(f=_).right;f.parent.kind==Nt.SK.ExpressionStatement&&(e=null);var m=je(f.left,e),f=(Ye(f.left,f.right),e?re(e):ee(void 0));return m(),f}{var y,k,b,v,T,E,S,C,m=Z(_);if(m)return ee(m.val);let e=null,t=null;if((_.operatorToken.kind==Nt.SK.PlusToken||_.operatorToken.kind==Nt.SK.PlusEqualsToken)&&(e=nn(_.left),t=nn(_.right),sn(e)||sn(t)&&_.operatorToken.kind==Nt.SK.PlusToken)&&(Ot(_).exprInfo={leftType:St.typeToString(e),rightType:St.typeToString(t)}),_.operatorToken.kind==Nt.SK.CommaToken)return at(_.left)?re(_.right):(f=lt(_.left),Nt.ir.op(Tt.Sequence,[f,re(_.right)]));switch(_.operatorToken.kind){case Nt.SK.BarBarToken:case Nt.SK.AmpersandAmpersandToken:return k=re((y=_).left),sn(nn(y.left)),b=U.mkLabel("lazy"),k=Nt.ir.shared(k),v=Nt.ir.rtcall("numops::toBool",[k]),T=U.mkLabel("lazySkip"),E=y.operatorToken.kind==Nt.SK.BarBarToken?Nt.ir.JmpMode.IfZero:y.operatorToken.kind==Nt.SK.AmpersandAmpersandToken?Nt.ir.JmpMode.IfNotZero:Nt.U.oops(),U.emitJmp(T,v,E),U.emitJmp(b,k,Nt.ir.JmpMode.Always,k),U.emitLbl(T),U.emitExpr(te("langsupp::ignore",[k])),U.emitJmp(b,re(y.right),Nt.ir.JmpMode.Always),U.emitLbl(b),He();case Nt.SK.InstanceOfKeyword:return E=nn((v=_).right),(T=tn(E)?$(v.right):null)&&T.kind==Nt.SK.ClassDeclaration||Lt(9275,Bt("unsupported instanceof expression")),q(E=G(E,T)),(T=Nt.ir.op(Nt.ir.EK.InstanceOf,[re(v.left)],E)).jsInfo="bool",T}return _.operatorToken.kind==Nt.SK.PlusToken&&(sn(e)||sn(t))?ne("String_::concat",[j(_.left),j(_.right)],null):_.operatorToken.kind==Nt.SK.PlusEqualsToken&&sn(e)?(C=je(_.left),S=Nt.ir.shared(ne("String_::concat",[j(_.left),j(_.right)],null)),Ye(_.left,J(S)),C(),S):(C=function(){switch(_.operatorToken.kind){case Nt.SK.PlusEqualsToken:return Nt.SK.PlusToken;case Nt.SK.MinusEqualsToken:return Nt.SK.MinusToken;case Nt.SK.AsteriskEqualsToken:return Nt.SK.AsteriskToken;case Nt.SK.AsteriskAsteriskEqualsToken:return Nt.SK.AsteriskAsteriskToken;case Nt.SK.SlashEqualsToken:return Nt.SK.SlashToken;case Nt.SK.PercentEqualsToken:return Nt.SK.PercentToken;case Nt.SK.LessThanLessThanEqualsToken:return Nt.SK.LessThanLessThanToken;case Nt.SK.GreaterThanGreaterThanEqualsToken:return Nt.SK.GreaterThanGreaterThanToken;case Nt.SK.GreaterThanGreaterThanGreaterThanEqualsToken:return Nt.SK.GreaterThanGreaterThanGreaterThanToken;case Nt.SK.AmpersandEqualsToken:return Nt.SK.AmpersandToken;case Nt.SK.BarEqualsToken:return Nt.SK.BarToken;case Nt.SK.CaretEqualsToken:return Nt.SK.CaretToken;default:return Nt.SK.Unknown}}(),(S=rt(0,C||_.operatorToken.kind))||V(_.operatorToken,Bt("unsupported operator"),9250),C?ze(_.left,S,!1,_.right):(C=qe(S),a=[_.left,_.right],Nt.ir.rtcallMask(C,Be(a),0,a.map(e=>re(e)))))}case Nt.SK.PrefixUnaryExpression:var e=n,t=Z(e);if(t)return ee(t.val);switch(e.operator){case Nt.SK.ExclamationToken:return dn(Nt.ir.rtcall("Boolean_::bang",[oe(e.operand)]));case Nt.SK.PlusPlusToken:return ze(e.operand,"numops::adds",!1);case Nt.SK.MinusMinusToken:return ze(e.operand,"numops::subs",!1);case Nt.SK.PlusToken:case Nt.SK.MinusToken:var x=re(e.operand),B=nt(x);return null!=B?ee(-B):e.operator==Nt.SK.MinusToken?Je("numops::subs",ee(0),x):Je("numops::subs",x,ee(0));case Nt.SK.TildeToken:B=re(e.operand),x=nt(B);return null!=x?ee(~x):te(qe("numops::bnot"),[B]);default:throw V(e,Bt("unsupported prefix unary operation"),9245)}return;case Nt.SK.PostfixUnaryExpression:var A=n;if(kn(nn(A.operand)))switch(A.operator){case Nt.SK.PlusPlusToken:return ze(A.operand,"numops::adds",!0);case Nt.SK.MinusMinusToken:return ze(A.operand,"numops::subs",!0)}throw V(A,Bt("unsupported postfix unary operation"),9246);case Nt.SK.ElementAccessExpression:return ve(n);case Nt.SK.ParenthesizedExpression:return re(n.expression);case Nt.SK.TypeAssertionExpression:return n.expression,re(n.expression);case Nt.SK.ArrayLiteralExpression:var I=n;_n(nn(I));var D,L=Nt.ir.shared(Nt.ir.rtcall("Array_::mk",[]));for(D of I.elements){var M=xe(D)?2:0;U.emitExpr(Nt.ir.rtcall("Array_::push",[L,re(D)],M))}return L;case Nt.SK.NewExpression:I=n;if((N=St.getTypeAtLocation(I))&&Zt(N))throw Nt.oops();if(N&&tn(N)){let t,e=$(I.expression);e.kind!=Nt.SK.ClassDeclaration&&Lt(9221,Bt("new expression only supported on class types"));var N=G(nn(I),e);for(let e=N;e&&!(t=Oe(e.decl));e=e.baseClassInfo);q(N);let n=N.id+"_VT",o=Nt.ir.rtcall("pxt::mkClassInstance",[Nt.ir.ptrlit(n,n)]);return t?(o=Ue(o),z(t),N=(I.arguments||[]).slice(0),P=Jt(t),Ie(St.getResolvedSignature(I),N,P),N=N.map(e=>re(e)),P.shim?Nt.ir.rtcall(P.shim,N):(N.unshift(o),U.emitExpr(we(t,I,N)),o)):(I.arguments&&I.arguments.length&&Lt(9222,Bt("constructor with arguments not found")),o)}throw V(I,Bt("unknown type for new"),9243);case Nt.SK.SuperKeyword:case Nt.SK.ThisKeyword:return me(n);case Nt.SK.CallExpression:return P=n,N=St.getResolvedSignature(P),Y(P,P.expression,P.arguments,N);case Nt.SK.FunctionExpression:case Nt.SK.ArrowFunction:return We(n);case Nt.SK.Identifier:return _e(n);case Nt.SK.ConditionalExpression:return w=n,O=U.mkLabel("condexprz"),R=U.mkLabel("condexprfin"),U.emitJmp(O,oe(w.condition),Nt.ir.JmpMode.IfZero),U.emitJmp(R,re(w.whenTrue),Nt.ir.JmpMode.Always),U.emitLbl(O),U.emitJmp(R,re(w.whenFalse),Nt.ir.JmpMode.Always),U.emitLbl(R),He();case Nt.SK.AsExpression:return n.expression,re(n.expression);case Nt.SK.TemplateExpression:return ye(n);case Nt.SK.ObjectLiteralExpression:{O=n;let i=Nt.ir.shared(Nt.ir.rtcall("pxtrt::mkMap",[]));return O.properties.forEach(e=>{let t,n;if(Nt.assert(!e.questionToken),e.kind==Nt.SK.ShorthandPropertyAssignment){const i=e,o=(Nt.assert(!i.equalsToken&&!i.objectAssignmentInitializer),t=e.name.text,St.getShorthandAssignmentValueSymbol(e)),r=o&&o.valueDeclaration&&o.valueDeclaration.name;if(!r||r.kind!=Nt.SK.Identifier)throw V(e);n=_e(r)}else{if(e.name.kind==Nt.SK.ComputedPropertyName){const Nt=e.name.expression;return void U.emitExpr(ne("pxtrt::mapSetByString",[J(i,!0),Nt,e.initializer],null))}t=e.name.kind==Nt.SK.StringLiteral?e.name.text:e.name.getText(),n=re(e.initializer)}const o=Nt.target.isNative?Nt.ir.numlit(W(t)):Nt.ir.ptrlit(null,JSON.stringify(t)),r=[i,o,n];U.emitExpr(Nt.ir.rtcall(Nt.target.isNative?"pxtrt::mapSet":"pxtrt::mapSetByString",r))}),i;return}case Nt.SK.TypeOfExpression:return ne("pxt::typeOf",[n.expression],null);case Dt.SyntaxKind.DeleteExpression:{w=n;let e,t;if(w.expression.kind==Nt.SK.PropertyAccessExpression){const Nt=w.expression;e=Nt.expression,t=J(fe(Nt.name.text))}else{if(w.expression.kind!=Nt.SK.ElementAccessExpression)throw Lt(9276,Bt("expression not supported as argument to 'delete'"));{const Nt=w.expression;e=Nt.expression,t=Nt.argumentExpression}}w=nn(e);if(en(w))throw Lt(9277,Bt("'delete' not supported on class types"));if(Zt(w))throw Lt(9277,Bt("'delete' not supported on array"));return ne("pxtrt::mapDeleteByString",[e,t],null);return}default:return V(n),null}var w,O,R,P}(e);if(e.isExpr())return e;throw new Error("expecting expression")}function ft(e){var t=Ot(e);if(t.usedNodes){r=!1;for(var n of Nt.U.values(t.usedNodes))z(n);for(var o of t.usedActions)o(H);r=!0}else $t(e)||Dt.isClassDeclaration(e)?(r=!1,(f=t).usedNodes=null,f.usedActions=null,$t(e)&&!Q(e)&&le(e),B(e),r=!0):((f=t).usedNodes={},f.usedActions=[],B(e),f=null)}function B(e){_t(e,yt)}function yt(s){switch(s.kind){case Nt.SK.SourceFile:return void s.statements.forEach(B);case Nt.SK.InterfaceDeclaration:var e=s,t=e,n=e=>{e&&e.kind==Nt.SK.ClassDeclaration&&Lt(9261,Bt("Interface with same name as a class not supported"))};if(n(t.symbol.valueDeclaration),t.symbol.declarations&&t.symbol.declarations.forEach(n),t.heritageClauses)for(var o of t.heritageClauses)o.token===Nt.SK.ExtendsKeyword&&en(nn(o.types[0]))&&Lt(9262,Bt("Extending a class by an interface not supported."));return void((n=Jt(e)).autoCreate&&(A[n.autoCreate]=!0));case Nt.SK.VariableStatement:var r=s;if(r.declarationList.flags&Dt.NodeFlags.Const){var i=r.parent&&r.parent.kind==Nt.SK.ModuleBlock?Qt(r.parent.parent):"?";if("config"==i||"userconfig"==i)for(var a of r.declarationList.declarations){let t=rn(a);if(a.initializer){var a=Ze(a.initializer),l=tt(r,"CFG_"+t);if(null==l||0==l)throw Lt(9268,Bt("can't find DAL.CFG_{0}",t));"userconfig"==i&&(t="!"+t);{c=void 0;var c={name:t,key:l,value:a};let e=Nt.U.lookup(S,c.name);if(e||(e=c,S[c.name]=e),e.value!=c.value)throw Lt(9269,Bt("conflicting values for config.{0}",c.name))}}}}return void(Dt.isInAmbientContext(r)||(st(r.declarationList),r.declarationList.declarations.forEach(B)));case Nt.SK.ModuleDeclaration:return void B(s.body);case Nt.SK.EnumDeclaration:return;case Nt.SK.FunctionDeclaration:case Nt.SK.Constructor:case Nt.SK.MethodDeclaration:return void We(s);case Nt.SK.ExpressionStatement:return void ct(s.expression);case Nt.SK.Block:case Nt.SK.ModuleBlock:return it(s);case Nt.SK.VariableDeclaration:return ht(s),void Le();case Nt.SK.IfStatement:return C(t=s),e=U.mkLabel("else"),U.emitJmpZ(e,oe(t.expression)),B(t.thenStatement),n=U.mkLabel("afterif"),U.emitJmp(n),U.emitLbl(e),t.elseStatement&&B(t.elseStatement),void U.emitLbl(n);case Nt.SK.WhileStatement:return C(v=s),T=x(v),U.emitLblDirect(T.cont),C(v.expression),U.emitJmpZ(T.brk,oe(v.expression)),B(v.statement),U.emitJmp(T.cont),void U.emitLblDirect(T.brk);case Nt.SK.DoStatement:return C(v=s),T=x(v),U.emitLblDirect(T.cont),B(v.statement),C(v.expression),U.emitJmpZ(T.brk,oe(v.expression)),U.emitJmp(T.cont),void U.emitLblDirect(T.brk);case Nt.SK.ForStatement:return(b=s).initializer&&b.initializer.kind==Nt.SK.VariableDeclarationList?(st(b.initializer),b.initializer.declarations.forEach(B)):ct(b.initializer),C(b),u=x(b),U.emitLblDirect(u.fortop),b.condition&&(C(b.condition),U.emitJmpZ(u.brk,oe(b.condition))),B(b.statement),U.emitLblDirect(u.cont),ct(b.incrementor),U.emitJmp(u.fortop),void U.emitLblDirect(u.brk);case Nt.SK.ForOfStatement:b=s;if(b.initializer&&b.initializer.kind==Nt.SK.VariableDeclarationList){u=b.initializer;if(1!=u.declarations.length)V(b,"only a single variable may be used to iterate a collection");else{st(u);let e=nn(b.expression),t="",n="";if(sn(e))t="String_::charAt",n="String_::length";else{if(!Zt(e))return void V(b.expression,"cannot use for...of with this expression");t="Array_::getAt",n="Array_::length"}z(u.declarations[0]);var u=ht(u.declarations[0]),d=(Nt.U.assert(!!u||!H.finalPass),U.stackEmpty(),U.mkLocalUnnamed()),p=(U.emitExpr(d.storeByRef(re(b.expression))),U.mkLocalUnnamed()),g=(U.emitExpr(p.storeByRef(ee(0))),U.stackEmpty(),C(b),x(b)),h=(U.emitLblDirect(g.fortop),Nt.ir.rtcall(n,[d.loadCore()])),h=Je("numops::lt_bool",p.load(),un(h));U.emitJmpZ(g.brk,h),u&&U.emitExpr(u.storeByRef(Nt.ir.rtcall(t,[d.loadCore(),(h=p.loadCore(),Ft()?Nt.ir.rtcall("pxt::toInt",[h]):h)]))),Le(),B(b.statement),U.emitLblDirect(g.cont),U.emitExpr(p.storeByRef(Je("numops::adds",p.load(),ee(1)))),U.emitJmp(g.fortop),U.emitLblDirect(g.brk),U.emitExpr(d.storeByRef(ee(void 0)))}}else V(b,"only a single variable may be used to iterate a collection");return;case Nt.SK.ContinueStatement:case Nt.SK.BreakStatement:{h=s;C(h);let n=h.label?h.label.text:null,o=h.kind==Nt.SK.BreakStatement,r=0,e=function e(t){return t?n&&t.kind==Nt.SK.LabeledStatement&&t.label.text==n?t.statement:t.kind==Nt.SK.SwitchStatement&&!n&&o||!n&&Dt.isIterationStatement(t,!1)?t:(r+=pt(t),e(t.parent)):null}(h);e?(p=x(e),ut(r),h.kind==Nt.SK.ContinueStatement?Dt.isIterationStatement(e,!1)?U.emitJmp(p.cont):P(h,9231,Bt("continue on non-loop")):h.kind==Nt.SK.BreakStatement?U.emitJmp(p.brk):Nt.oops()):P(h,9230,Bt("cannot find outer loop"));return}case Nt.SK.LabeledStatement:return d=x((g=s).statement),B(g.statement),void U.emitLblDirect(d.brk);case Nt.SK.ReturnStatement:{var _=s;C(_);let e=null,t=(_.expression?e=re(_.expression):on(U.action)&&(e=ee(void 0)),0);for(let e=_;e&&e!=U.action;e=e.parent)t+=pt(e);ut(t),U.emitJmp(x(U.action).ret,e,Nt.ir.JmpMode.Always);return}case Nt.SK.ClassDeclaration:return(k=G(null,_=s)).isUsed&&H.usedClassInfos.indexOf(k)<0&&H.usedClassInfos.push(k),void _.members.forEach(B);case Nt.SK.PropertyDeclaration:case Nt.SK.PropertyAssignment:return void(Wt(k=s)?ht(k):k.initializer&&(k=G(nn(k.parent)),H.finalPass)&&k.isUsed&&!k.ctor&&Lt(9209,Bt("class field initializers currently require an explicit constructor")));case Nt.SK.SwitchStatement:{var m=s;C(m);let r,e=x(m),i=Nt.ir.shared(re(m.expression)),n=m.caseBlock.clauses.map(e=>{var t,n,o=U.mkLabel("switch");return e.kind==Nt.SK.CaseClause?(t=re((n=e).expression),n=xe(n.expression)?1:0,n=Nt.ir.rtcallMask(qe("pxt::switch_eq"),n,0,[t,i]),U.emitJmp(o,n,Nt.ir.JmpMode.IfNotZero,i)):e.kind==Nt.SK.DefaultClause?(Nt.assert(!r,"!defaultLabel"),r=o):Nt.oops(),o});r?U.emitJmp(r,i):U.emitJmp(e.brk,i),m.caseBlock.clauses.forEach((e,t)=>{U.emitLbl(n[t]),e.statements.forEach(B)}),U.emitLblDirect(e.brk);return}case Nt.SK.TypeAliasDeclaration:return;case Dt.SyntaxKind.TryStatement:{var f=s;const E=e=>te("pxt::beginTry",[Nt.ir.ptrlit(e.lblName,e)]);C(f);var m=U.mkLabel("catch"),y=(m.lblName="_catch_"+Rt(f),U.mkLabel("finally"));if(y.lblName="_finally_"+Rt(f),f.finallyBlock&&U.emitExpr(E(y)),f.catchClause&&U.emitExpr(E(m)),U.stackEmpty(),it(f.tryBlock),U.stackEmpty(),f.catchClause){const Nt=U.mkLabel("catchend"),E=(ut(),U.emitJmp(Nt),U.emitLbl(m),f.catchClause.variableDeclaration);if(E){ht(E);const f=ce(E);U.emitExpr(f.storeByRef(te("pxt::getThrownValue",[])))}Le(),it(f.catchClause.block),U.emitLbl(Nt)}f.finallyBlock&&(ut(),U.emitLbl(y),it(f.finallyBlock),U.emitExpr(te("pxt::endFinally",[])));return}case Dt.SyntaxKind.ThrowStatement:return C(y=s),void U.emitExpr(te("pxt::throwValue",[re(y.expression)]));case Nt.SK.DebuggerStatement:return void C(s);case Nt.SK.GetAccessor:case Nt.SK.SetAccessor:return void We(s);case Nt.SK.ImportEqualsDeclaration:case Nt.SK.EmptyStatement:case Nt.SK.SemicolonClassElement:return;default:V(s)}var k,b,u,v,T}function kt(e){return y.procCallLocations.push(Nt.nodeLocationInfo(e))-1}},Nt.isStringType=sn;class Tn{constructor(){this.procs=[],this.globals=[],this.finalPass=!1,this.writeFile=(e,t)=>{},this.usedClassInfos=[],this.numStmts=1,this.commSize=0,this.itEntries=0,this.itFullEntries=0,this.numMethods=0,this.numVirtMethods=0,this.usedChars=new Uint32Array(2048),this.explicitlyUsedIfaceMembers={},this.ifaceMemberMap={},this.strings={},this.hexlits={},this.doubles={},this.otherLiterals=[],this.codeHelpers={},this.lblNo=0}reset(){this.lblNo=0,this.otherLiterals=[],this.strings={},this.hexlits={},this.doubles={},this.numStmts=0}getTitle(){var e=this.options.name||Nt.U.lf("Untitled");return 90<=e.length?e.slice(0,87)+"...":e}addProc(e){Nt.assert(!this.finalPass,"!this.finalPass"),this.procs.push(e),e.seqNo=this.procs.length}recordHelper(e,t,n){var o=e=>{e.codeHelpers[t]||(e.codeHelpers[t]=n(e))};o(this),this.recordAction(e,o)}recordAction(e,t){e?e.usedActions&&e.usedActions.push(t):Nt.U.oops("no using ctx!")}emitLabelled(e,t,n){var o=Nt.U.lookup(t,e);return null!=o?o:(o=n+this.lblNo++,t[e]=o)}emitDouble(e){return this.emitLabelled(Nt.target.switches.numFloat?(t=e,(n=new Float32Array(1))[0]=t,Nt.U.toHex(new Uint8Array(n.buffer))):(t=e,(n=new Float64Array(1))[0]=t,Nt.U.toHex(new Uint8Array(n.buffer))),this.doubles,"_dbl");var t,n}emitString(t){if(!this.finalPass)for(let e=0;e<t.length;++e){var n=t.charCodeAt(e);128<=n&&(this.usedChars[n>>5]|=1<<(31&n))}return this.emitLabelled(t,this.strings,"_str")}emitHexLiteral(e){return this.emitLabelled(e,this.hexlits,"_hexlit")}setPerfCounters(e){if(!Nt.target.switches.profile)return[];const t=e.slice();return this.procs.forEach(e=>{e.perfCounterName&&(Nt.U.assert(Nt.target.switches.profile),e.perfCounterNo=t.length,t.push(e.perfCounterName))}),t}}function an(e){if(e.modifiers&&e.parent.kind==Nt.SK.Constructor)for(var t of e.modifiers)if(t.kind==Nt.SK.PrivateKeyword||t.kind==Nt.SK.PublicKeyword||t.kind==Nt.SK.ProtectedKeyword)return!0;return!1}function ln(e){return e.flags&Dt.TypeFlags.Union?e.types.every(e=>ln(e)):!!(e.flags&(Dt.TypeFlags.NumberLike|Dt.TypeFlags.EnumLike|Dt.TypeFlags.BooleanLike))}Nt.Binary=Tn,Nt.isCtorField=an}}(ts=ts||{}),function(ts){var pxtc;!function(pxtc){function getTsCompilerOptions(e){var t=ts.getDefaultCompilerOptions();return t.target=ts.ScriptTarget.ES5,t.module=ts.ModuleKind.None,t.noImplicitAny=!0,t.noImplicitReturns=!0,t.allowUnreachableCode=!0,t}function nodeLocationInfo(e){var t=ts.getSourceFileOfNode(e),n=e.getStart?e.getStart():e.pos,{line:o,character:r}=ts.getLineAndCharacterOfPosition(t,n),{line:i,character:s}=ts.getLineAndCharacterOfPosition(t,e.end);return{start:n,length:e.end-n,line:o,column:r,endLine:i,endColumn:s,fileName:t.fileName}}function patchUpDiagnostics(e,t=!1){t=(e=t?e.filter(e=>5012!==e.code):e).filter(e=>1148==e.code);return(e=0<t.length?t:e).map(e=>{var t;return e.file?(t=ts.getLineAndCharacterOfPosition(e.file,e.start),1148==(t={code:e.code,start:e.start,length:e.length,line:t.line,column:t.character,messageText:ts.flattenDiagnosticMessageText(e.messageText,"\n"),category:e.category,fileName:e.file.fileName}).code&&(t.messageText=pxtc.Util.lf("all symbols in top-level scope are always exported; please use a namespace if you want to export only some")),t):{code:e.code,start:e.start,length:e.length,line:0,column:0,messageText:ts.flattenDiagnosticMessageText(e.messageText,"\n"),category:e.category,fileName:"?"}})}function py2tsIfNecessary(e){if(e.target.preferredEditor==pxt.PYTHON_PROJECT_NAME)return pxtc.transpile.pyToTs(e)}function mkCompileResult(){return{outfiles:{},diagnostics:[],success:!1,times:{}}}function storeGeneratedFiles(e,t){for(var n of e.generatedFiles||[])t.outfiles[n]=e.fileSystem[n]}function runConversionsAndStoreResults(e,t){var n=pxtc.U.cpuUs(),o=(t=t||mkCompileResult(),py2tsIfNecessary(e)),o=(storeGeneratedFiles(e,t=o?Object.assign(Object.assign({},t),{diagnostics:o.diagnostics,sourceMap:o.sourceMap,globalNames:o.globalNames}):t),e.sourceFiles||(e.sourceFiles=Object.keys(e.fileSystem)),e.sourceFiles.indexOf(pxt.MAIN_TS)),o=(0<=o&&(e.sourceFiles.splice(o,1),e.sourceFiles.push(pxt.MAIN_TS)),e.sourceFiles.indexOf(pxt.TUTORIAL_CODE_STOP));return 0<=o&&(e.sourceFiles.splice(o,1),e.sourceFiles.push(pxt.TUTORIAL_CODE_STOP)),t.times.conversions=pxtc.U.cpuUs()-n,t}function timesToMs(e){for(var t of Object.keys(e.times))e.times[t]=Math.round(e.times[t])/1e3}function buildProgram(e,r){let i={};for(var t in e.fileSystem)i[normalizePath(t)]=e.fileSystem[t];var n=getTsCompilerOptions(e),o={getSourceFile:(e,t,n)=>{e=normalizePath(e);let o="";return i.hasOwnProperty(e)?o=i[e]:n&&n("File not found: "+e),null==o&&(n("File not found: "+e),o=""),ts.createSourceFile(e,o,t,!0)},fileExists:e=>(e=normalizePath(e),i.hasOwnProperty(e)),getCanonicalFileName:e=>e,getDefaultLibFileName:()=>"no-default-lib.d.ts",writeFile:(e,t,n,o)=>{r.outfiles[e]=t},getCurrentDirectory:()=>".",useCaseSensitiveFileNames:()=>!0,getNewLine:()=>"\n",readFile:e=>(e=normalizePath(e),i[e]||""),directoryExists:e=>!0,getDirectories:()=>[]},s=e.sourceFiles.filter(e=>pxtc.U.endsWith(e,".ts"));return ts.createProgram(s,n,o)}function isPxtModulesFilename(e){return pxtc.U.startsWith(e,"pxt_modules/")}function compile(opts,service){pxtc.compilerHooks||(pxtc.compilerHooks={},opts.target.compilerExtension&&eval(opts.target.compilerExtension)),pxtc.compilerHooks.init&&pxtc.compilerHooks.init(opts,service);let startTime=pxtc.U.cpuUs(),res=mkCompileResult(),program;if(service)storeGeneratedFiles(opts,res),program=service.getProgram();else{if(runConversionsAndStoreResults(opts,res),0<res.diagnostics.length)return res;program=buildProgram(opts,res)}const entryPoint=opts.sourceFiles.filter(e=>pxtc.U.endsWith(e,".ts")).pop().replace(/.*\//,"");if(res.diagnostics=patchUpDiagnostics(program.getSyntacticDiagnostics(),opts.ignoreFileResolutionErrors),0<res.diagnostics.length)opts.forceEmit&&(pxt.debug("syntactic errors, forcing emit"),pxtc.compileBinary(program,opts,res,entryPoint));else{res.diagnostics=patchUpDiagnostics(program.getOptionsDiagnostics().concat(pxtc.Util.toArray(program.getGlobalDiagnostics())),opts.ignoreFileResolutionErrors);const semStart=pxtc.U.cpuUs(),emitStart=(0==res.diagnostics.length&&(res.diagnostics=patchUpDiagnostics(program.getSemanticDiagnostics(),opts.ignoreFileResolutionErrors)),pxtc.U.cpuUs());if(res.times["typescript-syn"]=semStart-startTime,res.times["typescript-sem"]=emitStart-semStart,res.times.typescript=emitStart-startTime,opts.ast&&(res.ast=program),opts.ast||opts.forceEmit||0==res.diagnostics.length){const e=pxtc.compileBinary(program,opts,res,entryPoint);res.times.compilebinary=pxtc.U.cpuUs()-emitStart,res.diagnostics=res.diagnostics.concat(patchUpDiagnostics(e.diagnostics))}0==res.diagnostics.length&&(res.success=!0);for(var e of opts.sourceFiles)pxtc.Util.startsWith(e,"built/")&&(res.outfiles[e.slice(6)]=opts.fileSystem[e]);res.times.all=pxtc.U.cpuUs()-startTime,pxt.tickEvent("compile",res.times)}return res}function decompile(e,t,n,o=!1){var r=e.getSourceFile(n),n=(pxtc.annotate(e,n,pxtc.target||pxt.appTarget&&pxt.appTarget.compile),pxtc.getApiInfo(e,t.jres)),n=pxtc.getBlocksInfo(n,t.bannedCategories),o={snippetMode:t.snippetMode||!1,alwaysEmitOnStart:t.alwaysDecompileOnStart,includeGreyBlockMessages:o,generateSourceMap:!!t.ast,allowedArgumentTypes:t.allowedArgumentTypes||["number","boolean","string"],errorOnGreyBlocks:!!t.errorOnGreyBlocks},[t,,]=pxtc.decompiler.buildRenameMap(e,r,{declarations:"variables",takenNames:{}});return pxtc.decompiler.decompileToBlocks(n,r,o,t)}function decompileSnippets(e,t,n=!1){const o=pxtc.getApiInfo(e,t.jres),r=pxtc.getBlocksInfo(o,t.bannedCategories),i=new pxtc.decompiler.RenameMap([]),s={snippetMode:t.snippetMode||!1,alwaysEmitOnStart:t.alwaysDecompileOnStart,includeGreyBlockMessages:n,generateSourceMap:!!t.ast,allowedArgumentTypes:t.allowedArgumentTypes||["number","boolean","string"],errorOnGreyBlocks:!!t.errorOnGreyBlocks};let a;var l=[];if(t.sourceTexts)for(let e=0;e<t.sourceTexts.length;e++){t.fileSystem[pxt.MAIN_TS]=t.sourceTexts[e],t.fileSystem[pxt.MAIN_BLOCKS]="";var c=getTSProgram(t,a);const o=c.getSourceFile(pxt.MAIN_TS),u=pxtc.decompiler.decompileToBlocks(r,o,s,i);l.push(u.outfiles[pxt.MAIN_BLOCKS]),a=c}return l}function getTSProgram(e,t){let r={},i={};for(var n in e.fileSystem)i[normalizePath(n)]=e.fileSystem[n];var o=getTsCompilerOptions(e),s={getSourceFile:(e,t,n)=>{e=normalizePath(e);let o="";return i.hasOwnProperty(e)?o=i[e]:n&&n("File not found: "+e),null==o&&(n("File not found: "+e),o=""),ts.createSourceFile(e,o,t,!0)},fileExists:e=>(e=normalizePath(e),i.hasOwnProperty(e)),getCanonicalFileName:e=>e,getDefaultLibFileName:()=>"no-default-lib.d.ts",writeFile:(e,t,n,o)=>{r[e]=t},getCurrentDirectory:()=>".",useCaseSensitiveFileNames:()=>!0,getNewLine:()=>"\n",readFile:e=>(e=normalizePath(e),i[e]||""),directoryExists:e=>!0,getDirectories:()=>[]};e.sourceFiles||(e.sourceFiles=Object.keys(e.fileSystem));let a=e.sourceFiles.filter(e=>pxtc.U.endsWith(e,".ts")),l=a.filter(e=>e!=pxt.MAIN_TS);a.length>l.length&&(a=l).push(pxt.MAIN_TS);var c=a.indexOf(pxt.TUTORIAL_CODE_STOP),c=(0<=c&&(a.splice(c,1),a.push(pxt.TUTORIAL_CODE_STOP)),ts.createProgram(a,o,s,t));return pxtc.annotate(c,pxt.MAIN_TS,pxtc.target||pxt.appTarget&&pxt.appTarget.compile),c}function normalizePath(e){e=e.replace(/\\/g,"/");const t=[];return e.split("/").forEach(e=>{".."===e&&t.length?t.pop():"."!==e&&t.push(e)}),t.join("/")}pxtc.getTsCompilerOptions=getTsCompilerOptions,pxtc.nodeLocationInfo=nodeLocationInfo,pxtc.patchUpDiagnostics=patchUpDiagnostics,pxtc.py2tsIfNecessary=py2tsIfNecessary,pxtc.storeGeneratedFiles=storeGeneratedFiles,pxtc.runConversionsAndStoreResults=runConversionsAndStoreResults,pxtc.timesToMs=timesToMs,pxtc.isPxtModulesFilename=isPxtModulesFilename,pxtc.compile=compile,pxtc.decompile=decompile,pxtc.decompileSnippets=decompileSnippets,pxtc.getTSProgram=getTSProgram}(pxtc=ts.pxtc||(ts.pxtc={}))}(ts=ts||{}),function(d){{var e=d.elf||(d.elf={});const p=["type","offset","vaddr","paddr","filesz","memsz","flags","align"],g=d.HF2.read32,h=d.HF2.read16;e.parse=function(i){1179403647!=g(i,0)&&d.U.userError("no magic"),1!=i[4]&&d.U.userError("not 32 bit"),1!=i[5]&&d.U.userError("not little endian"),1!=i[6]&&d.U.userError("bad version"),2!=h(i,16)&&d.U.userError("wrong object type"),40!=h(i,18)&&d.U.userError("not ARM");let s=g(i,28),a=(g(i,32),0==s&&d.U.userError("expecting program headers"),h(i,42)),e=h(i,44),t=d.U.range(e).map(e=>{var t,n=s+e*a,o={},e=n;for(t of p)o[t]=g(i,n),n+=4;var r=o;return r._filepos=e,r}),n=i.length+1;for(;15&n;)n++;let o=0;for(var r of t)1==r.type&&(o=Math.max(o,r.vaddr+r.memsz));let l=(o+4096-1&-4096)+(4095&n),c=-1;for(var u of t)4==u.type&&(c=u._filepos);return{imageMemStart:l,imageFileStart:n,phOffset:c,template:i}},e.patch=function(t,n){var o=new Uint8Array(t.imageFileStart+n.length);o.fill(0),d.U.memcpy(o,0,t.template),d.U.memcpy(o,t.imageFileStart,n);{var r=o,i={_filepos:t.phOffset,type:1,offset:t.imageFileStart,vaddr:t.imageMemStart,paddr:t.imageMemStart,filesz:n.length,memsz:n.length,flags:5,align:4096},s;let e=i._filepos;for(s of p)d.HF2.write32(r,e,i[s]||0),e+=4}return o}}}(pxt=pxt||{}),function(l){{var e=l.esp||(l.esp={});const u=l.HF2.read32,d=l.HF2.read16,p=[{name:"esp32",chipId:0,memmap:[{from:0,to:65536,id:"PADDING"},{from:1061158912,to:1065353216,id:"DROM"},{from:1065353216,to:1069547520,id:"EXTRAM_DATA"},{from:1073217536,to:1073225728,id:"RTC_DRAM"},{from:1073283072,to:1073741824,id:"BYTE_ACCESSIBLE"},{from:1073405952,to:1073741824,id:"DRAM"},{from:1073610752,to:1073741820,id:"DIRAM_DRAM"},{from:1073741824,to:1074200576,id:"IROM"},{from:1074200576,to:1074233344,id:"CACHE_PRO"},{from:1074233344,to:1074266112,id:"CACHE_APP"},{from:1074266112,to:1074397184,id:"IRAM"},{from:1074397184,to:1074528252,id:"DIRAM_IRAM"},{from:1074528256,to:1074536448,id:"RTC_IRAM"},{from:1074593792,to:1077936128,id:"IROM"},{from:1342177280,to:1342185472,id:"RTC_DATA"}]},{name:"esp32-s2",chipId:2,memmap:[{from:0,to:65536,id:"PADDING"},{from:1056964608,to:1073217536,id:"DROM"},{from:1062207488,to:1073217536,id:"EXTRAM_DATA"},{from:1073340416,to:1073348608,id:"RTC_DRAM"},{from:1073340416,to:1073741824,id:"BYTE_ACCESSIBLE"},{from:1073340416,to:1074208768,id:"MEM_INTERNAL"},{from:1073414144,to:1073741824,id:"DRAM"},{from:1073741824,to:1073848576,id:"IROM_MASK"},{from:1073872896,to:1074200576,id:"IRAM"},{from:1074200576,to:1074208768,id:"RTC_IRAM"},{from:1074266112,to:1082130432,id:"IROM"},{from:1342177280,to:1342185472,id:"RTC_DATA"}]},{name:"esp32-s3",chipId:4,memmap:[{from:0,to:65536,id:"PADDING"},{from:1006632960,to:1023410176,id:"DROM"},{from:1023410176,to:1040187392,id:"EXTRAM_DATA"},{from:1611653120,to:1611661312,id:"RTC_DRAM"},{from:1070104576,to:1070596096,id:"BYTE_ACCESSIBLE"},{from:1070104576,to:1077813248,id:"MEM_INTERNAL"},{from:1070104576,to:1070596096,id:"DRAM"},{from:1073741824,to:1073848576,id:"IROM_MASK"},{from:1077346304,to:1077805056,id:"IRAM"},{from:1611653120,to:1611661312,id:"RTC_IRAM"},{from:1107296256,to:1115684864,id:"IROM"},{from:1342177280,to:1342185472,id:"RTC_DATA"}]},{name:"esp32-c3",chipId:5,memmap:[{from:0,to:65536,id:"PADDING"},{from:1006632960,to:1015021568,id:"DROM"},{from:1070071808,to:1070465024,id:"DRAM"},{from:1070104576,to:1070596096,id:"BYTE_ACCESSIBLE"},{from:1072693248,to:1072824320,id:"DROM_MASK"},{from:1073741824,to:1074135040,id:"IROM_MASK"},{from:1107296256,to:1115684864,id:"IROM"},{from:1077395456,to:1077805056,id:"IRAM"},{from:1342177280,to:1342185472,id:"RTC_IRAM"},{from:1342177280,to:1342185472,id:"RTC_DRAM"},{from:1611653120,to:1611661312,id:"MEM_INTERNAL2"}]}];function a(e){return`0x${e.addr.toString(16)} 0x${e.data.length.toString(16)} bytes; ${e.isDROM?"drom ":""}${e.isMapped?"mapped ":""}${l.U.toHex(e.data.slice(0,20))}...`}function t(t){if(233!=t[0])throw new Error("ESP: invalid magic: "+t[0]);let n=24;const o=d(t,12),r=p.find(e=>e.chipId==o);if(!r)throw new Error("ESP: unknown chipid: "+o);var i={header:t.slice(0,n),chipName:r.name,segments:[]},s=t[1];for(let e=0;e<s;++e){const d=u(t,n),p=u(t,n+4),o=(n+=8,t.slice(n,n+p));if(o.length!=p)throw new Error("too short file");if(n+=p,!a(d,"PADDING")){const r=i.segments.filter(e=>e.addr+e.data.length==d)[0];r?r.data=l.U.uint8ArrayConcat([r.data,o]):i.segments.push({addr:d,isMapped:a(d,"DROM")||a(d,"IROM"),isDROM:a(d,"DROM"),data:o})}}return i;function a(t,n){return r.memmap.some(e=>e.id==n&&e.from<=t&&t<=e.to)}}function c(e){e=l.U.flatClone(e);return e.segments=e.segments.map(l.U.flatClone),e}e.toBuffer=function(e,t=!0){let n=(e=function(t){const n=65535,o=((t=c(t)).segments.sort((e,t)=>e.addr-t.addr),l.debug("esp padding:\n"+t.segments.map(a).join("\n")+"\n"),t.segments.filter(e=>e.isMapped)),r=t.segments.filter(e=>!e.isMapped);t.segments=[];let i=t.header.length;for(const t of o){const o=t.addr+t.data.length&n;if(o<36){const n=new Uint8Array(36-o);t.data=l.U.uint8ArrayConcat([t.data,n])}}for(;0<o.length;){let e=o[0];const r=function(e){let t=(e.addr-8&n)-i&n;return 0==t?0:((t-=8)<0&&(t+=65536),t)}(e);if(0<r)e=s(r);else{if((i+8&n)!=(e.addr&n))throw new Error(`pad oops 0 ${i}+8 != ${e.addr} (mod mask)`);o.shift()}if(t.segments.push(e),3&(i+=8+e.data.length))throw new Error("pad oops 1")}return t.segments=t.segments.concat(r),l.debug("esp padded:\n"+t.segments.map(a).join("\n")+"\n"),t;function s(e){var t,n;return!r.length||e<=8?{addr:0,isMapped:!1,isDROM:!1,data:new Uint8Array(e)}:(n={addr:(t=r[0]).addr,isMapped:t.isMapped,isDROM:t.isDROM,data:t.data.slice(0,e)},t.data=t.data.slice(e),t.addr+=n.data.length,0==t.data.length&&r.shift(),n)}}(e)).header.length;for(const l of e.segments)n+=8+l.data.length;n=n+16&-16;let o=new Uint8Array(n),r=(o.set(e.header),o[1]=e.segments.length,e.header.length),i=239;for(const t of e.segments){l.HF2.write32(o,r,t.addr),l.HF2.write32(o,r+4,t.data.length),o.set(t.data,r+8),r+=8+t.data.length;for(let e=0;e<t.data.length;++e)i^=t.data[e]}if(o[o.length-1]=i,t){o[23]=1;const e=ts.pxtc.BrowserImpl.sha256buffer(o);o=l.U.uint8ArrayConcat([o,l.U.fromHex(e)])}else o[23]=0;return o},e.parseBuffer=t,e.parseB64=function(e){return t(l.U.stringToUint8Array(atob(e.join(""))))},e.cloneStruct=c}}(pxt=pxt||{}),function(p){{var y=p.pxtc||(p.pxtc={}),e;let m;(e=m=m||{})[e.None=0]="None",e[e.Whitespace=1]="Whitespace",e[e.Identifier=2]="Identifier",e[e.Keyword=3]="Keyword",e[e.Operator=4]="Operator",e[e.CommentLine=5]="CommentLine",e[e.CommentBlock=6]="CommentBlock",e[e.NewLine=7]="NewLine",e[e.Literal=8]="Literal",e[e.Tree=9]="Tree",e[e.Block=10]="Block",e[e.EOF=11]="EOF";let d,f=p.SyntaxKind;function k(e){switch(e){case f.CommaToken:return 1;case f.EqualsToken:case f.PlusEqualsToken:case f.MinusEqualsToken:case f.AsteriskEqualsToken:case f.AsteriskAsteriskEqualsToken:case f.SlashEqualsToken:case f.PercentEqualsToken:case f.LessThanLessThanEqualsToken:case f.GreaterThanGreaterThanEqualsToken:case f.GreaterThanGreaterThanGreaterThanEqualsToken:case f.AmpersandEqualsToken:case f.BarEqualsToken:case f.CaretEqualsToken:return 1;case f.QuestionToken:case f.ColonToken:case f.BarBarToken:case f.AmpersandAmpersandToken:case f.BarToken:case f.CaretToken:case f.AmpersandToken:return 1;case f.EqualsEqualsToken:case f.ExclamationEqualsToken:case f.EqualsEqualsEqualsToken:case f.ExclamationEqualsEqualsToken:return 1;case f.LessThanToken:case f.GreaterThanToken:case f.LessThanEqualsToken:case f.GreaterThanEqualsToken:case f.InstanceOfKeyword:case f.InKeyword:case f.AsKeyword:return 1;case f.LessThanLessThanToken:case f.GreaterThanGreaterThanToken:case f.GreaterThanGreaterThanGreaterThanToken:return 1;case f.PlusToken:case f.MinusToken:return 1;case f.AsteriskToken:case f.SlashToken:case f.PercentToken:case f.AsteriskAsteriskToken:case f.DotToken:return 1;default:return}}function g(e,t){for(;e[t]&&e[t].kind==m.Whitespace;)t++;return t}function b(){return{kind:m.EOF,synKind:f.EndOfFileToken,pos:0,lineNo:0,text:""}}function v(e,t){return{kind:m.Whitespace,synKind:f.WhitespaceTrivia,pos:e.pos-t.length,lineNo:e.lineNo,text:t}}function T(e){return{kind:m.Block,synKind:f.OpenBraceToken,pos:e[0].pos,lineNo:e[0].lineNo,stmts:[{tokens:e}],text:"{",endToken:null}}function E(o,r,i=null){let s,a=[],l=0,c=!1;for(o=o.concat([b()]);o[l].kind!=m.EOF;){var e=l;_(),y.Util.assert(l>e,"Error at "+o[l].text),function(e){if(0!=(e=r?S(e):e).length){if(e.forEach(u),e=function n(o){let r=[],i=0;for(;i<o.length;)if(o[i].blockSpanLength){let e=o.slice(i,i+o[i].blockSpanLength),t=!!e[0].blockSpanIsVirtual;delete e[0].blockSpanLength,delete e[0].blockSpanIsVirtual,i+=e.length,e=n(e),t?r.push((s=e,{kind:m.Tree,synKind:f.WhitespaceTrivia,pos:s[0].pos,lineNo:s[0].lineNo,children:s,endToken:null,text:""})):(r.push(v(e[0]," ")),r.push(T(S(e))))}else r.push(o[i++]);var s;return r}(e),r&&0<a.length){var t=a[a.length-1].tokens[0].synKind,n=e[0].synKind;if(t==f.IfKeyword&&n==f.ElseKeyword||t==f.TryKeyword&&n==f.CatchKeyword||t==f.TryKeyword&&n==f.FinallyKeyword||t==f.CatchKeyword&&n==f.FinallyKeyword)return e.unshift(v(e[0]," ")),y.Util.pushRange(a[a.length-1].tokens,e)}a.push({tokens:e})}}(o.slice(e,l))}return a;function u(e){e.kind==m.Tree&&(e.children=y.Util.concat(E(e.children,!1,e).map(e=>e.tokens)))}function d(){for(;;)switch(l++,o[l].kind){case m.Whitespace:case m.CommentBlock:case m.CommentLine:case m.NewLine:break;default:return}}function p(){for(;o[l].kind==m.Whitespace;)l++;o[l].kind==m.NewLine&&l++}function g(){y.Util.assert(o[l].synKind==f.OpenBraceToken);var e=o[l],t=(y.Util.assert(e.kind==m.Tree),o[l]);t.stmts=E(e.children,!0,s),delete e.children,t.kind=m.Block,l++,c=!0}function h(){var e=l+1;d(),o[l].synKind==f.OpenBraceToken?(g(),p()):(_(),o[e].blockSpanLength=l-e)}function _(){for(;;){let e=o[l],t=l;if(s=e,c=!1,e.kind==m.EOF)return;if(r&&e.synKind==f.SemicolonToken)return l++,p();if(e.synKind==f.EqualsGreaterThanToken){if(d(),o[l].synKind==f.OpenBraceToken){g();continue}{var n=l;_();let e=l;for(;o[e].kind==m.NewLine;)e--;return o[n].blockSpanLength=e-n,o[n].blockSpanIsVirtual=!0}}if(r&&k(e.synKind)){n=l;if(d(),!function(e){if(e)switch(e.synKind){case f.IfKeyword:case f.ElseKeyword:case f.LetKeyword:case f.ConstKeyword:case f.VarKeyword:case f.DoKeyword:case f.WhileKeyword:case f.SwitchKeyword:case f.CaseKeyword:case f.DefaultKeyword:case f.ForKeyword:case f.ReturnKeyword:case f.BreakKeyword:case f.ContinueKeyword:case f.TryKeyword:case f.CatchKeyword:case f.FinallyKeyword:case f.DeleteKeyword:case f.FunctionKeyword:case f.ClassKeyword:case f.YieldKeyword:case f.DebuggerKeyword:return 1;default:return}}(o[l]))continue;l=n}if(r&&e.kind==m.NewLine){if(d(),k((e=o[l]).synKind)&&e.synKind!=f.PlusToken&&e.synKind!=f.MinusToken)continue;return l=t+1}if(e.synKind==f.OpenBraceToken&&i&&i.synKind==f.ClassKeyword){let e=l-1;for(;0<=e&&o[e].kind==m.Whitespace;)e--;if(e<0||o[e].synKind!=f.EqualsToken)return l--,h()}switch(y.Util.assert(t==l),e.synKind){case f.ForKeyword:case f.WhileKeyword:case f.IfKeyword:case f.CatchKeyword:if(d(),o[l].synKind!=f.OpenParenToken)continue;return h();case f.DoKeyword:if(h(),l--,d(),o[l].synKind!=f.WhileKeyword)return;l++;continue;case f.ElseKeyword:if(d(),o[l].synKind==f.IfKeyword)continue;return l=t,h();case f.TryKeyword:case f.FinallyKeyword:return h();case f.ClassKeyword:case f.NamespaceKeyword:case f.ModuleKeyword:case f.InterfaceKeyword:case f.FunctionKeyword:for(;;)switch(l++,o[l].kind){case m.EOF:return;case m.Tree:if(o[l].synKind==f.OpenBraceToken)return l--,void h()}return}y.Util.assert(!c,"forgot continue/return after expectBlock"),l++}}}function t(e){return e&&(e.kind==m.Whitespace||e.kind==m.NewLine)}function h(t){let n=[],o=!1;for(let e=0;e<t.length;++e)t[e=o?g(t,e):e]&&(n.push(t[e]),o=t[e].kind==m.NewLine);return n}function S(e){for(e=e.slice(0);t(e[0]);)e.shift();for(;t(e[e.length-1]);)e.pop();return e}function _(r,e){if(e.synKind==f.NoSubstitutionTemplateLiteral&&/^`[\s\.#01]*`$/.test(e.text)){var i=e.text.slice(1,e.text.length-1).split("\n").map(e=>e.replace(/\s/g,"")).filter(e=>!!e);if(!(i.length<4||5<i.length)){let n=Math.floor((Math.max(...i.map(e=>e.length))+2)/5),o=(n<=0&&(n=1),"`\n");for(let t=0;t<5;++t){let e=i[t]||"";for(;e.length<5*n;)e+=".";e=(e=(e=e.replace(/0/g,".")).replace(/1/g,"#")).replace(/...../g,e=>"/"+e),o+=r+e.replace(/./g,e=>" "+e).replace(/\//g," ").slice(3)+"\n"}o+=r+"`",e.text=o}}}y.toStr=function e(t){return Array.isArray(t)?"[[ "+t.map(e).join("  ")+" ]]":"string"==typeof t.text?JSON.stringify(t.text):t+""},y.format=function(e,t){let n=E(function(o){let r=[];r.push({synKind:f.EndOfFileToken,token:{children:[]}});var i,s;for(let n=0;n<o.length;++n){let e=o[n],t=r[r.length-1];if(t.token.children.push(e),e.kind===m.Operator)switch(e.synKind){case f.OpenBraceToken:case f.OpenParenToken:case f.OpenBracketToken:s=(i=e).synKind+1,i.children=[],i.kind=m.Tree,r.push({synKind:s,token:i});break;case f.CloseBraceToken:case f.CloseParenToken:case f.CloseBracketToken:for(t.token.children.pop();;){if((t=r.pop()).synKind==e.synKind){t.token.endToken=e;break}if(0==r.length||t.synKind==f.CloseBraceToken){r.push(t);break}}}}return r[0].token.children}(function(n,o){let r=[],e=!0,i=1;for(let t=0;t<n.length;++t){if(e){var s=t;if(n[t=g(n,t)].kind==m.NewLine){let e=!1;0<=o&&n[t].pos>=o&&(o=-1,e=!0),r.push({text:"",kind:m.CommentLine,pos:n[t].pos,lineNo:i,synKind:f.SingleLineCommentTrivia,isCursor:e})}else t=s}r.push(n[t]),n[t].lineNo=i,n[t].kind==m.NewLine?(e=!0,i++):e=!1,0<=o&&n[t].pos>=o&&(o=-1)}return r}(function(e){d=e;let n=p.createScanner(p.ScriptTarget.Latest,!1,p.LanguageVariant.Standard,e,e=>{var t=n.getTextPos();console.log("scanner error",t,e.message)}),t=[],o=0,r=-1;for(;;){let e=n.scan();e==f.CloseBraceToken&&o==r&&(r=-1,e=n.reScanTemplateToken());var i={kind:function(e){switch(e){case f.EndOfFileToken:return m.EOF;case f.SingleLineCommentTrivia:return m.CommentLine;case f.MultiLineCommentTrivia:return m.CommentBlock;case f.NewLineTrivia:return m.NewLine;case f.WhitespaceTrivia:return m.Whitespace;case f.ShebangTrivia:case f.ConflictMarkerTrivia:return m.CommentBlock;case f.NumericLiteral:case f.StringLiteral:case f.RegularExpressionLiteral:case f.NoSubstitutionTemplateLiteral:case f.TemplateHead:case f.TemplateMiddle:case f.TemplateTail:return m.Literal;case f.Identifier:return m.Identifier;default:return e<f.Identifier?m.Operator:m.Keyword}}(e=(e=e==f.SlashEqualsToken&&(i=n.reScanSlashToken())==f.RegularExpressionLiteral?i:e)==f.GreaterThanToken?n.reScanGreaterToken():e),synKind:e,lineNo:0,pos:n.getTokenPos(),text:n.getTokenText()};if(e==f.OpenBraceToken&&o++,e==f.CloseBraceToken&&--o<0&&(o=-1e7),t.push(i),e!=f.TemplateHead&&e!=f.TemplateMiddle||(r=o),i.kind==m.EOF)break}return{tokens:t,braceBalance:o}}(e).tokens,t)),!0),s="",a="",o=-1,r=0;return n.forEach(c),n.forEach(e=>e.tokens.forEach(i)),-1==o&&(o=a.length),{formatted:a,pos:o};function i(e){var t;e.kind==m.Tree?((t=e).synKind,f.OpenBraceToken,t.children.forEach(i)):e.kind==m.Block&&e.stmts.forEach(e=>e.tokens.forEach(i))}function l(e,t){r==e.lineNo?t():(r=e.lineNo,e=s,s+="    ",t(),s=e)}function c(e){let t=h(e.tokens);(1!=t.length||t[0].isCursor||""!=t[0].text)&&(a+=s,l(t[0],()=>{!function r(i){i=function(t){let o=[],r=0,i=b();for(t=t.concat([b()]);r<t.length;){r=g(t,r);let n=t[r];if(n.kind==m.EOF)break;let e=g(t,r+1);if(n.kind==m.NewLine&&t[e].synKind==f.OpenBraceToken)r=e;else{let e=!0,t=0==o.length?(s=n,{kind:m.NewLine,synKind:f.NewLineTrivia,pos:s.pos,lineNo:s.lineNo,text:"\n"}):o[o.length-1];switch(t.synKind){case f.ExclamationToken:case f.TildeToken:case f.DotToken:e=!1;break;case f.PlusToken:case f.MinusToken:case f.PlusPlusToken:case f.MinusMinusToken:t.isPrefix&&(e=!1)}switch(n.synKind){case f.DotToken:case f.CommaToken:case f.NewLineTrivia:case f.ColonToken:case f.SemicolonToken:case f.OpenBracketToken:e=!1;break;case f.PlusPlusToken:case f.MinusMinusToken:t.kind!=m.Tree&&t.kind!=m.Identifier&&t.kind!=m.Keyword||(e=!1);case f.PlusToken:case f.MinusToken:i.kind!=m.EOF&&!k(i.synKind)&&i.synKind!=f.SemicolonToken||(n.isPrefix=!0);break;case f.OpenParenToken:if(t.kind==m.Identifier&&(e=!1),t.kind==m.Keyword)switch(t.synKind){case f.IfKeyword:case f.ForKeyword:case f.WhileKeyword:case f.SwitchKeyword:case f.ReturnKeyword:case f.ThrowKeyword:case f.CatchKeyword:break;default:e=!1}}(e=t.kind==m.NewLine?!1:e)&&o.push(v(n," ")),o.push(n),n.kind!=m.NewLine&&(i=n),r++}}var s;return o}(i);for(let o=0;o<i.length;++o){let n=i[o];switch(_(s,n),u(n),n.kind){case m.Tree:let e=n;l(n,()=>{r(h(e.children))}),e.endToken&&u(e.endToken);break;case m.Block:let t=n;0==t.stmts.length?a+=" ":(a+="\n",t.stmts.forEach(c),a+=s.slice(4)),t.endToken?u(t.endToken):a+="}";break;case m.NewLine:i[o+1]&&i[o+1].kind==m.CommentLine&&""==i[o+1].text&&!i[o+1].isCursor||(o==i.length-1?a+=s.slice(4):a+=s);break;case m.Whitespace:}}}(t)}),"\n"==a[a.length-1])||(a+="\n")}function u(e){-1==o&&e.pos+e.text.length>=t&&(o=a.length+(t-e.pos)),a+=e.text}}}}(ts=ts||{}),function(h){{var b=h.pxtc||(h.pxtc={});let f;function v(o,r){if(r.packedSource){let e=o.currPtr+4096&-256,n=new Uint8Array(256);for(let t=0;t<r.packedSource.length;t+=256){for(let e=0;e<256;++e)n[e]=r.packedSource.charCodeAt(t+e);b.UF2.writeBytes(o,e,n,b.UF2.UF2_FLAG_NOFLASH),e+=256}}}{var s=f=b.hexfile||(b.hexfile={});s.asmTotalSource="";let a={},i=[],k={commBase:0,funcInfo:{},codeStartIdx:-1,codePaddingSize:0,sha:null,codeStartAddrPadded:void 0,hexlines:void 0,jmpStartAddr:void 0,jmpStartIdx:void 0,codeStartAddr:void 0,elfInfo:void 0,espInfo:void 0};function T(e){let t="",n=0;for(;n<e.length;n+=2)t=e[n]+e[n+1]+t;return b.assert(n==e.length),t}function _(e){if(!(e=e.replace(/^[\s:]/,"")))return[];let t=[];if(e.replace(/([a-f0-9][a-f0-9])/gi,e=>(t.push(parseInt(e,16)),"")))throw b.oops("bad bytes "+e);return t}function m(e){return e.flashCodeAlign||1024}s.getCommBase=function(){return k.commBase},s.getStartAddress=function(){return k.codeStartAddrPadded},s.setupInlineAssembly=function(e){a={};var t,n=e.sourceFiles.filter(e=>b.U.endsWith(e,".asm"));s.asmTotalSource="";let o=0;for(t of n){var r=e.fileSystem[t],r=(r.replace(/^\s*(\w+):/gm,(e,t)=>(a[t]=!0,"")),".section code\n@stackmark func\n@scope user"+o+++"\n"+r+"\n@stackempty func\n@scope\n");s.asmTotalSource+=r}},s.parseHexBytes=_,s.parseHexRecord=function(e){e=_(e);return{len:e[0],addr:e[1]<<8|e[2],type:e[3],data:e.slice(4,e.length-1),checksum:e[e.length-1]}},s.flashCodeAlign=m;const B="0108010842424242010801083ed8e98d";function l(e){return k.funcInfo[e]}function E(){let e=k.sha?k.sha.slice(0,16):"";for(;e.length<16;)e+="0";return e.toUpperCase()}function S(e){let t=0,n=":";return e.forEach(e=>t+=e),e.push(255&-t),e.forEach(e=>n+=("0"+e.toString(16)).slice(-2)),n.toUpperCase()}s.setupFor=function(a,n){if(!(k=i.find(e=>e.sha==n.sha))){k={commBase:0,funcInfo:{},codeStartIdx:-1,codePaddingSize:0,sha:null,codeStartAddrPadded:void 0,hexlines:void 0,jmpStartAddr:void 0,jmpStartIdx:void 0,codeStartAddr:void 0,elfInfo:void 0,espInfo:void 0},(i=10<i.length?[]:i).push(k);let s=n.functions;k.commBase=n.commBase||0,k.sha=n.sha;const h=n.hexinfo.hex;if(k.hexlines=h,b.target.nativeType==b.NATIVE_TYPE_VM){k.codeStartAddr=0,k.codeStartAddrPadded=0,k.jmpStartAddr=-1,k.jmpStartIdx=-1;for(var e of s)k.funcInfo[e.name]=e,e.value=16777215;if(b.target.useESP){const a=pxt.esp.parseB64(h),o=b.U.fromHex(B),i=(t,n)=>{for(let e=0;e<o.length;++e)if(t[n+e]!=o[e])return!1;return!0},T=a.segments.filter(e=>e.isDROM);b.U.assert(1==T.length);let t=!1;const m=T[0];k.codeStartAddr=m.addr+m.data.length,k.codeStartAddrPadded=k.codeStartAddr+255&-256,k.codePaddingSize=k.codeStartAddrPadded-k.codeStartAddr,pxt.debug(`user code start: 0x${k.codeStartAddrPadded.toString(16)}; dromlen=${m.data.length} pad=`+k.codePaddingSize);for(let e=0;e<m.data.length;e+=32)if(i(m.data,e)){t=!0;const b=e+=o.length;for(var r of n.vmPointers||[])"0"!=r&&(r=r.replace(/^&/,""),k.funcInfo[r]={name:r,argsFmt:[],value:pxt.HF2.read32(m.data,e)},e+=4);pxt.HF2.write32(m.data,b,k.codeStartAddrPadded);break}b.U.assert(t||0==(n.vmPointers||[]).length),k.espInfo=a,k.codeStartAddrPadded=0}}else if(h.length<=2){const a=b.U.fromHex(h[0]);if(a[2]<=2&&96==a[3]){const b=1610612736,n=4096,e=a.length+4096-1&-4096;k.elfInfo={template:a,imageMemStart:1610612736+e,imageFileStart:e,phOffset:-1e3}}else k.elfInfo=pxt.elf.parse(a);k.codeStartAddr=k.elfInfo.imageMemStart,k.codeStartAddrPadded=k.elfInfo.imageMemStart;var t=h[0].indexOf(B);t<0&&b.oops("no jmp table in elf"),k.jmpStartAddr=t/2,k.jmpStartIdx=-1,p(h[0].slice(t+32,t+32+8*s.length+16)),void g()}else{var o,l=h;for(let e=0;e<l.length;++e)"2"==l[e][8]&&(o=/^:02....02(....)..$/.exec(l[e]),b.U.assert(!!o),o=16*parseInt(o[1],16),b.U.assert(0==(65535&o)),l[e]=S([2,0,0,4,0,o>>16]));let e=0,t="0000",r=0,i=0;k.codeStartAddr=0;for(var c=()=>{if(!k.codeStartAddr){var e=_(h[i]),t=16-(r+e[0]&15)&15;if(t)if(15&e[2]){var n=r+e[0],o=[t,n>>8,255&n,0];for(let e=0;e<t;++e)o.push(0);i++,h.splice(i,0,S(o)),k.codeStartAddr=n+t}else{if(16!=e[0]){for(e.pop(),e[0]=16;e.length<20;)e.push(0);h[i]=S(e)}k.codeStartAddr=r+16}else k.codeStartAddr=r+e[0];k.codeStartIdx=i+1;n=m(a),n=(k.codeStartAddrPadded=(k.codeStartAddr&~(n-1))+n,k.codeStartAddrPadded-k.codeStartAddr);b.assert(0==(15&n)),k.codePaddingSize=n}};e<h.length;++e){var u=/:02000004(....)/.exec(h[e]);u&&(t=u[1]),(u=/^:..(....)00/.exec(h[e]))&&(u=parseInt(t+u[1],16),!a.flashUsableEnd&&r&&65536<u-r&&c(),a.flashUsableEnd&&u>=a.flashUsableEnd&&c(),i=e,r=u),/^:00000001/.test(h[e])&&c(),/^:10....000108010842424242010801083ED8E98D/.exec(h[e])&&(k.jmpStartAddr=r,k.jmpStartIdx=e)}pxt.debug(`code start: ${k.codeStartAddrPadded}, jmptbl: `+k.jmpStartAddr),k.jmpStartAddr||b.oops("No hex start"),k.codeStartAddr||b.oops("No hex end"),k.funcInfo={};for(let e=k.jmpStartIdx+1;e<h.length;++e){var d=/^:..(....)00(.{4,})/.exec(h[e]);if(d&&(p(d[2]),0==s.length))break}function p(n){for(var o=a.shortPointers?4:8;n.length>=o;){let e=n.slice(0,o),t=parseInt(T(e),16);n=n.slice(o);var r=s.shift();if(!r)break;k.funcInfo[r.name]=r,t||b.U.oops("No value for "+r.name+" / "+e),0==r.argsFmt.length?t^=1:a.runtimeIsARM||a.nativeType!=b.NATIVE_TYPE_THUMB||1&t||b.U.oops("Non-thumb addr for "+r.name+" / "+e),r.value=t}}function g(){s.length&&b.oops("premature EOF in hex file; missing: "+s.map(e=>e.name).join(", "))}g()}}},s.validateShim=function(e,t,n,o,r){if("TD_ID"!=t&&"TD_NOOP"!=t&&"ENUM_GET"!=t&&!b.U.lookup(a,t)){var i=e+`(...) (shim=${t})`,s=l(t);if(s){o?"V"==s.argsFmt[0]&&b.U.userError("expecting function for "+i):"V"!=s.argsFmt[0]&&b.U.userError("expecting procedure for "+i);for(let e=0;e<r.length;++e)s.argsFmt[e+1]||b.U.userError("excessive parameters passed to "+i);r.length!=s.argsFmt.length-1&&b.U.userError(`not enough arguments for ${i} (got ${r.length}; fmt=${s.argsFmt.join(",")})`)}else b.U.userError("function not found: "+i)}},s.lookupFunc=l,s.lookupFunctionAddr=function(e){return"_pxt_comm_base"==e?k.commBase:(e=l(e))?e.value:null},s.hexTemplateHash=E,s.hexPrelude=function(){return`    .startaddr 0x${k.codeStartAddrPadded.toString(16)}
`},s.hexBytes=S,s.patchHex=function(n,o,e,t){let r=k.hexlines.slice(0,k.codeStartIdx);n.target.useESP||(u=2*o.length+7>>3,b.assert(u<64e3,"program too large, bytes: "+2*o.length),o[17]=u,o[20]=n.commSize);let i=[];for(let e=0;e<k.codePaddingSize>>1;++e)i.push(0);o=i.concat(o);let s=0;function a(t,e){var n=[16,e>>8&255,255&e,0];for(let e=0;e<8;++e)n.push(255&(t[s]||0)),n.push((t[s]||0)>>>8),s++;return n}var l=[16912,0,65535&k.codeStartAddrPadded,k.codeStartAddrPadded>>>16],c=E();for(let e=0;e<4;++e)l.push(parseInt(T(c.slice(4*e,4*e+4)),16));var u,d=t?b.UF2.newBlockFile(b.target.uf2Family):null;if(k.elfInfo){var p=new Uint8Array(2*o.length);for(let e=0;e<o.length;++e)pxt.HF2.write16(p,2*e,o[e]);var g=pxt.elf.patch(k.elfInfo,p);for(let e=0;e<l.length;++e)pxt.HF2.write16(g,2*e+k.jmpStartAddr,l[e]);if(!d||n.target.switches.rawELF)return[b.U.uint8ArrayToString(g)];{let e=n.options.name||"pxt";return e=e.replace(/[^a-zA-Z0-9\-\.]+/g,"_"),d.filename="Projects/"+e+".elf",b.UF2.writeBytes(d,0,g),[b.UF2.serializeFile(d)]}}if(k.espInfo){const e=pxt.esp.cloneStruct(k.espInfo),T=e.segments.find(e=>e.isDROM);let t=T.data.length;const r=new Uint8Array(t+2*o.length+255&-256);r.set(T.data);for(let e=0;e<o.length;++e)pxt.HF2.write16(r,t,o[e]),t+=2;T.data=r;const i=pxt.esp.toBuffer(e);return d?(b.UF2.writeBytes(d,0,i),v(d,n),[b.UF2.serializeFile(d)]):[b.U.uint8ArrayToString(i)]}if(d){if(b.UF2.writeHex(d,r),b.UF2.writeBytes(d,k.jmpStartAddr,a(l,k.jmpStartIdx).slice(4)),n.checksumBlock){var h,_=[];for(h of n.checksumBlock)_.push(255&h,h>>8);b.UF2.writeBytes(d,n.target.flashChecksumAddr,_)}}else r[k.jmpStartIdx]=S(a(l,k.jmpStartAddr)),n.checksumBlock&&b.U.oops("checksum block in HEX not implemented yet");s=0,e&&(r=[]);let m=k.codeStartAddr,f=m-16>>16;for(;s<o.length;)d?b.UF2.writeBytes(d,m,a(o,m).slice(4)):(m>>16!=f&&(f=m>>16,r.push(S([2,0,0,4,f>>8,255&f]))),r.push(S(a(o,m)))),m+=16;if(e||(u=k.hexlines.slice(k.codeStartIdx),d?b.UF2.writeHex(d,u):b.Util.pushRange(r,u)),!d&&n.target.moveHexEof){for(;!r[r.length-1];)r.pop();":00000001FF"==r[r.length-1]&&r.pop()}if(n.packedSource)if(d)v(d,n);else{let e=0;for(let t=0;t<n.packedSource.length;t+=16){var y=[16,e>>8&255,255&e,14];for(let e=0;e<16;++e)y.push(255&(n.packedSource.charCodeAt(t+e)||0));r.push(S(y)),e+=16}}return!d&&n.target.moveHexEof&&r.push(":00000001FF"),d?[b.UF2.serializeFile(d)]:r}}b.hexDump=function(o,e=0){function r(e,t=8){let n=e.toString(16);for(;n.length<t;)n="0"+n;return n}let i="";for(let n=0;n<o.length;n+=16){i+=r(e+n)+": ";let t="";for(let e=0;e<16;e++){0==(3&e)&&(i+=" ");var s=o[n+e];null!=s?(i+=r(s,2)+" ",t+=32<=s&&s<127?String.fromCharCode(s):"."):i+="   "}i+=" "+t+"\n"}return i},b.asmline=function(e){return 0<=e.indexOf("\n")?e.replace(/^\s*/gm,"").replace(/^(.*)$/gm,(e,t)=>";"==t[0]&&" "==t[1]||/:\*$/.test(t)?t:"    "+t)+"\n":(e=/(^[\s;])|(:$)/.test(e)?e:"    "+e)+"\n"},b.firstMethodOffset=function(){return 9};const e=[21078089,22513679,15655169,18636881,19658081,21486649,21919277,20041213,20548751,16180187,18361627,19338023,19772677,16506547,23530697,22998697,21225203,19815283,23679599,19822889,21136133,19540043,21837031,18095489,23924267,23434627,22582379,21584111,22615171,23403001,19640683,19998031,18460439,20105387,17595791,16482043,23199959,18881641,21578371,22765747,20170273,16547639,16434589,21435019,20226751,19506731,21454393,23224541,23431973,23745511];function y(s){let a=32;b.U.assert(b.U.unique(s,e=>""+e).length==s.length,"non unique");for(let i=2;;i<<=1)if(a--,!(i<s.length)){let t,o=-1,r=-1;for(var l of e){var c,u=l<<8|a,d=new Uint16Array(i+b.vtLookups+1);b.U.assert(0==(1&d.length));let n=0,e=[];for(c of s){b.U.assert(0<c);var p=Math.imul(c,u)>>>a;e.push(p);let t=!1;for(let e=0;e<b.vtLookups;e++){if(!d[p+e]){t=!0,d[p+e]=c;break}n++}if(!t){n=-1;break}}(-1==o||o>n)&&(o=n,r=u,t=d)}if(0<=o)return{mult:r,mapping:t,size:i}}}function k(e,t,n){var o=y(e.itable.map(e=>e.idx));let r=b.target.shortPointers?".short":".word",i=`
        .balign 4
${e.id}_VT:
        .short ${4*e.allfields.length+4}  ; size in bytes
        .byte ${pxt.ValTypeObject}, ${pxt.VTABLE_MAGIC} ; magic
        ${r} ${e.id}_IfaceVT
        .short ${e.classNo} ; class-id
        .short 0 ; reserved
        .word ${o.mult} ; hash-mult
`,s=e=>{"0"!=e&&(e+="@fn"),i+=`        ${r} ${e}
`};s("pxt::RefRecord_destroy"),s("pxt::RefRecord_print"),s("pxt::RefRecord_scan"),s("pxt::RefRecord_gcsize");var a,l,c=e.toStringMethod;s(c?c.vtLabel():"0");for(a of e.vtable)s(a.label()+"_nochk");i+=`
        .balign ${b.target.shortPointers?2:4}
${e.id}_IfaceVT:
`;const u=2*o.mapping.length;let d="",p=u,g={};for(l of e.itable){g[l.idx+""]=p;const e=l.proc?l.proc.isGetter()?1:2:0;d=(d+=`  .short ${l.idx}, ${e} ; ${l.name}
`)+`  .word ${l.proc?l.proc.vtLabel()+"@fn":l.info}
`,p+=8,l.setProc&&(d=(d+=`  .short ${l.idx}, 0 ; set ${l.name}
`)+`  .word ${l.setProc.vtLabel()}@fn
`,p+=8)}d+="  .word 0, 0 ; the end\n",p+=8;var h=o.mapping;for(let e=0;e<h.length;++e)n.itEntries++,h[e]&&n.itFullEntries++;return i=(i+="  .short "+b.U.toArray(h).map((e,t)=>(g[e+""]||u)-2*t).join(", ")+"\n")+d+"\n"}b.vtLookups=3,b.computeHashMultiplier=y,b.vtableToAsm=k;const x=["GC"];function r(e){var t=e.nativeType==b.NATIVE_TYPE_VM?new b.assembler.VMFile(new b.vm.VmProcessor(e)):new b.assembler.File(new b.thumb.ThumbProcessor);return t.ei.testAssembler(),e.switches.noPeepHole&&(t.disablePeepHole=!0),t.lookupExternalLabel=f.lookupFunctionAddr,t.normalizeExternalLabel=e=>{var t=f.lookupFunc(e);return t?t.name:e},t}function i(e){if(0<e.errors.length){let n="";throw e.errors.forEach(e=>{var t=/^user(\d+)/.exec(e.scope);t&&(parseInt(t[1]),n=(n+=b.U.lf("At inline assembly:\n"))+e.message)}),n&&(console.log(b.U.lf("errors in inline assembly")),console.log(n)),new Error(e.errors[0].message)}}function C(e,t,n){var o=r(e);return o.emit(n),n=`; Interface tables: ${t.itFullEntries}/${t.itEntries} (${Math.round(100*t.itFullEntries/t.itEntries)}%)
; Virtual methods: ${t.numVirtMethods} / ${t.numMethods}
`+o.getSource(!0,t.numStmts,e.flashEnd),i(o),{src:n,buf:o.buf,thumbFile:o}}function a(o,r,i,n){var e=i.extinfo.disabledDeps,s=(o=e?""+f.hexPrelude()+`
; compilation disabled on this variant due to ${i.extinfo.disabledDeps}
.hex 718E3B92C615A841C49866C975EE5197
.string "${i.extinfo.disabledDeps}"`:`; start
${f.hexPrelude()}
    .hex 708E3B92C615A841C49866C975EE5197 ; magic number
    .hex ${f.hexTemplateHash()} ; hex template hash
    .hex 873266330af9dbdb ; replaced in binary by program hash
`+o,i.embedBlob&&(r.packedSource=function(e,t){let n=b.Util.toUTF8(e),o=(n.length,t.length,"A//");return(o=(o+=b.U.uint8ArrayToString([255&n.length,n.length>>8,255&t.length,t.length>>8,0,0,0,0]))+n+t).length%2&&(o+="\0"),o}(i.embedMeta,h.pxtc.decodeBase64(i.embedBlob)),!r.target.noSourceInFlash)&&r.packedSource.length<4e4&&(o+=function(t){let n="";for(let e=0;e<t.length;++e){var o=255&t.charCodeAt(e);n+=o<=15?"0"+o.toString(16):o.toString(16)}return`
    .balign 16
_stored_program: .hex ${n}
`}(r.packedSource),r.packedSource=null),f.flashCodeAlign(i.target));if(!e&&i.target.flashChecksumAddr){let e=0;for(;s>1<<e;)e++;var a=parseInt(f.hexTemplateHash().slice(8,16),16);const r=f.getStartAddress()/s;a=4294967040&a|e;let t=0,n=r;i.target.flashChecksumAddr<f.getStartAddress()&&(t=Math.ceil((i.target.flashChecksumAddr+32)/s),n-=t),o+=`
    .balign 4
__end_marker:
    .word ${a}

; ------- this will get removed from the final binary ------
__flash_checksums:
    .word 0x87eeb07c ; magic
    .word __end_marker ; end marker position
    .word ${a} ; end marker
    ; template region
    .short ${t}, ${n}
    .word 0x${f.hexTemplateHash().slice(0,8)}
    ; user region
    .short ${r}, 0xffff
    .hex 87326633 ; replaced later
    .word 0x0 ; terminator
`}const t=i.extinfo.outputPrefix||"",l=(r.writeFile(t+b.BINARY_ASM,o),C(i.target,r,o));if(l.thumbFile.commPtr&&(r.commSize=l.thumbFile.commPtr-f.getCommBase()),l.src&&r.writeFile(t+b.BINARY_ASM,l.src),e)return g();var a=n.configData||[];if(a.some(e=>"BOOTLOADER_BOARD_ID"==e.name)){let e="const uint32_t configData[] = {\n";e=(e+="    0x1e9e10f1, 0x20227a79, // magic\n")+`    ${a.length}, 0, // num. entries; reserved
`;for(var c of a)e+=`    ${c.key}, 0x${c.value.toString(16)}, // ${c.name}
`;e+="    0, 0\n};\n",r.writeFile(t+"config.c",e)}if(l.buf){const h=l.buf;let t="";for(let e=0;e<h.length;++e)t+=String.fromCharCode(255&h[e],h[e]>>8);const o=b.U.sha256(t).slice(0,16),n=b.U.range(4).map(e=>parseInt(o.slice(2*e,2*e+2),16));b.U.assert(12935==h[12]);for(let e=0;e<n.length;++e)h[12+e]=n[e];i.target.flashChecksumAddr&&(e=l.thumbFile.lookupLabel("__flash_checksums")/2,b.U.assert(e==h.length-16),a=h.slice(h.length-16),h.splice(h.length-16,16),i=Math.ceil(2*h.length/s),b.U.assert(12935==a[a.length-4]),a[a.length-4]=n[0],a[a.length-3]=n[1],a[a.length-5]=i,r.checksumBlock=a),g()}if(!n.procDebugInfo){for(var u of n.breakpoints){var d=b.U.lookup(l.thumbFile.getLabels(),"__brkp_"+u.id);null!=d&&(u.binAddr=d)}for(var p of r.procs)p.fillDebugInfo(l.thumbFile);if(n.procDebugInfo=r.procs.map(e=>e.debugInfo),r.target.switches.size){const f=[];for(const o of r.procs){const r=h.pxtc.nodeLocationInfo(o.action),i=[r.fileName.replace("pxt_modules/",""),b.getDeclName(o.action),o.debugInfo.size,"function",r.line+1];f.push(i.map(e=>`"${e}"`).join(","))}f.sort(),f.unshift("filename,name,size,type,line"),r.writeFile(t+"size.csv",f.join("\n"))}}function g(){if(pxt.isOutputText(b.target)){const h=f.patchHex(r,l.buf,!1,!1).join("\r\n")+"\r\n";r.writeFile(t+pxt.outputName(b.target),h)}else{var e=h.pxtc.encodeBase64(f.patchHex(r,l.buf,!1,!!b.target.useUF2)[0]);r.writeFile(t+pxt.outputName(b.target),e)}}}b.processorInlineAssemble=function(e,t){var n=r(e),o=(n.disablePeepHole=!0,n.emit(t),i(n),[]);for(let e=0;e<n.buf.length;e+=2)o.push(((n.buf[e+1]||0)<<16|n.buf[e])>>>0);return o},b.assemble=C,b.processorEmit=function(e,t,n){var o=function(t){let n=`
    .short ${t.globalsWords}   ; num. globals
    .short 0 ; patched with number of 64 bit words resulting from assembly
    .word _pxt_config_data
    .short 0 ; patched with comm section size
    .short ${t.nonPtrGlobals} ; number of globals that are not pointers (they come first)
    .word _pxt_iface_member_names
    .word _pxt_lambda_trampoline@fn
    .word _pxt_perf_counters
    .word _pxt_restore_exception_state@fn
    .word ${t.emitString(t.getTitle())} ; name
`,o=null;o=new b.ThumbSnippets;var e,r,i,s,a,l=t.setPerfCounters(x),c=(t.procs.forEach(e=>{e=new b.ProctoAssembler(o,t,e);n+="\n"+e.getAssembly()+"\n"}),new b.ProctoAssembler(o,t,null));c.emitHelpers(),n=(n+="\n"+c.getAssembly()+"\n")+f.asmTotalSource+"_code_end:\n\n",b.U.iterMap(t.codeHelpers,(e,t)=>{n+=`    .section code
${t}:
${e}
`}),n=n+o.arithmetic()+"_helpers_end:\n\n",t.usedClassInfos.forEach(e=>{n+=k(e,0,t)}),n=(n+="\n.balign 4\n_pxt_iface_member_names:\n")+`    .word ${t.ifaceMembers.length}
`;let u=0;for(e of t.ifaceMembers){var d=t.emitString(e);n+=`    .word ${d}  ; ${u++} .${e}
`}n=(n+="    .word 0\n")+"_vtables_end:\n\n\n.balign 4\n_pxt_config_data:\n";for(r of t.res.configData||[])n+=`    .word ${r.key}, ${r.value}  ; ${r.name}=${r.value}
`;n+="    .word 0\n\n";var p=o,g=t;for(i of b.U.unique(g.ifaceMembers.concat(Object.keys(g.strings)),e=>e))g.otherLiterals.push(p.string_literal(g.strings[i],i));for(s of Object.keys(g.doubles)){var h=g.doubles[s];g.otherLiterals.push(`
.balign 4
${h}: ${p.obj_header("pxt::number_vt")}
        .hex ${s}
`)}for(a of Object.keys(g.hexlits))g.otherLiterals.push(p.hex_literal(g.hexlits[a],a)),g.otherLiterals.push();n=(n=n+t.otherLiterals.join("")+"\n.balign 4\n.section code\n_pxt_perf_counters:\n")+`    .word ${l.length}
`;let _="";for(let e=0;e<l.length;++e){var m=".perf"+e;n+=`    .word ${m}
`,_+=m+`: .string ${JSON.stringify(l[e])}
`}return n=n+_+"_literals_end:\n"}(e),r=b.U.flatClone(t);f.setupFor(t.target,t.extinfo||b.emptyExtInfo()),a(o,e,t,n);const i=r.otherMultiVariants||[];if(i.length)try{for(var s of i){const i=b.U.flatClone(r);i.extinfo=s.extinfo,s.target.isNative=!0,i.target=s.target,f.setupFor(i.target,i.extinfo),a(o,e,i,n)}}finally{f.setupFor(r.target,r.extinfo)}},b.validateShim=f.validateShim}}(ts=ts||{}),function(e){(e.pxtc||(e.pxtc={})).getHelpForKeyword=function(e,t){var n={abstract:null,any:null,as:null,break:null,case:null,catch:null,class:null,continue:null,const:null,constructor:null,debugger:null,declare:null,delete:null,do:null,else:null,enum:null,export:null,extends:null,false:lf("Represents the negative outcome of a logical expression"),finally:null,for:null,from:null,function:null,get:null,if:null,implements:null,in:null,instanceof:null,interface:null,is:null,let:null,namespace:null,new:null,null:null,private:null,protected:null,public:null,return:null,set:null,static:null,super:null,switch:null,this:null,throw:null,true:lf("Represents the positive outcome of a logical expression"),try:null,type:null,typeof:null,undefined:null,void:null,while:null,with:null,of:null};return(t?{True:n.true,False:n.false,None:null,abs:null,all:null,any:null,ascii:null,bin:null,bool:null,bytearray:null,bytes:null,callable:null,chr:null,classmethod:null,compile:null,complex:null,copyright:null,credits:null,delattr:null,dict:null,dir:null,divmod:null,enumerate:null,eval:null,exec:null,exit:null,filter:null,float:null,format:null,frozenset:null,getattr:null,globals:null,hasattr:null,hash:null,help:null,hex:null,id:null,input:null,int:null,isinstance:null,issubclass:null,iter:null,len:null,license:null,list:null,locals:null,map:null,max:null,memoryview:null,min:null,next:null,object:null,oct:null,open:null,ord:null,pow:null,print:null,property:null,quit:null,range:null,repr:null,reversed:null,round:null,set:null,setattr:null,slice:null,sorted:null,staticmethod:null,str:null,sum:null,super:null,tuple:null,type:null,vars:null}:n)[e]}}(ts=ts||{}),function(e){(e.pxtc||(e.pxtc={})).LSHost=class{constructor(e){this.p=e}getCompilationSettings(){var e=this.p.getCompilerOptions();return e.noLib=!0,e}getNewLine(){return"\n"}getScriptFileNames(){return this.p.getSourceFiles().map(e=>e.fileName)}getScriptVersion(e){return"0"}getScriptSnapshot(e){const t=this.p.getSourceFile(e);return{getLength:()=>t.getFullText().length,getText:()=>t.getFullText(),getChangeRange:()=>{}}}getCurrentDirectory(){return"."}getDefaultLibFileName(e){return""}useCaseSensitiveFileNames(){return!0}}}(ts=ts||{}),function(B){function A(e){e=null==(e=null==(e=null==e?void 0:e.pxt)?void 0:e.callInfo)?void 0:e.qName;return H.lastApiInfo.apis.byQName[e]}function I(t,n,o){if(t&&!(n<0)){let e=t.parameters[n];if(t.attributes._def){var r=t.attributes._def.parameters[n].shadowBlockId;if(r){const t=o.blocksById[r],n=H.lastApiInfo.apis.byQName[t.qName];"TD_ID"===n.attributes.shim&&1===n.parameters.length&&(e=n.parameters[0])}}return e}}function D(e,t,n,o,r=!1){const i={};o.forEach(e=>{var t;let n=e.symbol.retType;r&&(7==e.symbol.kind?n=e.symbol.namespace:4==e.symbol.kind&&1<(null==(t=null==(t=null==(t=e.symbol.attributes)?void 0:t.enumIdentity)?void 0:t.split("."))?void 0:t.length)&&(n=t[0])),i[n]=[...i[n]||[],e]});var s,o=i[e]||[];let a=[];for(s of o){const o=l(s.symbol,t,B.SymbolFlags.Enum);if(o){const B=n.getTypeOfSymbolAtLocation(o,t),e=U.getEnumMembers(n,B).map(e=>U.enumMemberToQName(n,e)).map(e=>H.lastApiInfo.apis.byQName[e]);a=[...a,...e]}}return[...o,...L(a,1)]}function i(e){return e.flags&B.SymbolFlags.Variable?4:e.flags&B.SymbolFlags.Class?8:e.flags&B.SymbolFlags.Enum?6:e.flags&B.SymbolFlags.EnumMember?7:e.flags&B.SymbolFlags.Method?1:e.flags&B.SymbolFlags.Module?5:e.flags&B.SymbolFlags.Property?2:0}function N(e){return{kind:0,name:e,pyName:e,qName:e,pyQName:e,namespace:"",attributes:{callingConvention:0,paramDefl:{}},fileName:pxt.MAIN_TS,parameters:[],retType:"any"}}function w(e,t){var n=e.getName(),o=/(.*)\.(.*)/.exec(n),r=o?o[2]:n,o=o?o[1]:"",t=null!=(t=null==(t=t.getSymbol())?void 0:t.getName())?t:"any";return{kind:i(e),name:r,pyName:r,qName:n,pyQName:n,namespace:o,attributes:{callingConvention:0,paramDefl:{}},fileName:pxt.MAIN_TS,parameters:[],retType:t}}function O(e,t,n){if(e)return t.byQName[n.getFullyQualifiedName(e)]}function R(e,t){return e.weight!==t.weight?t.weight-e.weight:U.compareSymbols(e.symbol,t.symbol)}function P(e,t){return{symbol:e,weight:t}}function L(e,t){return e.map(e=>P(e,t))}function M(e,t){return e.flags&B.TypeFlags.NumberLiteral?"Number":e.flags&B.TypeFlags.StringLiteral?"String":e.flags&B.TypeFlags.BooleanLiteral?"Boolean":null!=(e={number:"Number",string:"String",boolean:"Boolean"}[t=t.typeToString(e)])?e:t}function n(e,t){return"."===t.charAt(0)&&(t=t.substr(1)),e.substr(0,e.lastIndexOf(".")+1)+t}function l(e,t,n){var o,r=H.service&&H.service.getProgram().getTypeChecker();if(r)for(o of r.getSymbolsInScope(t,n))if(o.escapedName.toString()===e.qName)return o;return null}function F({symbol:e}){return!(/^__/.test(e.name)||/^__/.test(e.namespace)||e.attributes.hidden||e.attributes.deprecated||"TD_ID"==e.attributes.shim||e.attributes.blockAliasFor)}var U,H;U=B.pxtc||(B.pxtc={}),(H=U.service||(U.service={})).getCallSymbol=A,H.getParameter=I,H.getApisForTsType=D,H.getBasicKindDefault=function(e,t){switch(e){case U.SK.StringKeyword:return'""';case U.SK.NumberKeyword:return"0";case U.SK.BooleanKeyword:return t?"False":"false";case U.SK.ArrayType:return"[]";case U.SK.NullKeyword:return t?"None":"null";default:return}},H.tsSymbolToPxtSymbolKind=i,H.makePxtSymbolFromKeyword=N,H.makePxtSymbolFromTsSymbol=w,H.getPxtSymbolFromTsSymbol=O,H.compareCompletionSymbols=R,H.completionSymbol=P,H.completionSymbols=L,H.getNodeAndSymbolAtLocation=function(e,t,n,o){var t=e.getSourceFile(t),r=e.getTypeChecker(),t=U.findInnerMostNodeAtPosition(t,n);if(t){const e=r.getSymbolAtLocation(t);if(e)return[t,O(e,o,r)]}return null},H.tsTypeToPxtTypeString=M,H.filenameWithExtension=n,H.getWordAtPosition=function(t,e){let n=e,o=e;for(;0<n&&r(n);)--n;for(;o<t.length-1&&r(o);)++o;return n!=o?{text:t.substring(n+1,o),start:n+1,end:o}:null;function r(e){e=t.charCodeAt(e);return 65<=e&&e<=90||97<=e&&e<=122}},H.getTsSymbolFromPxtSymbol=l,H.getDefaultEnumValue=function(e,t){const n=H.service&&H.service.getProgram().getTypeChecker(),o=U.getEnumMembers(n,e);for(const e of o)if(e.name.kind===U.SK.Identifier){const o=U.enumMemberToQName(n,e),r=H.lastApiInfo.apis.byQName[o];return r?r.attributes.alias?t&&r.attributes.pyAlias||r.attributes.alias:t?r.pyQName:r.qName:o}return"0"},H.getCompletions=function(s){const{fileName:e,fileContent:t,position:a,wordStartPos:l,wordEndPos:c,runtime:u}=s;let d=t;t&&H.host.setFile(e,t);const p=n(e,"ts"),g={startPos:l,endPos:c},h=/\.py$/.test(e),_={entries:[],isMemberCompletion:!1,isNewIdentifierLocation:!0,isTypeLocation:!1,namespace:[]};var m=d.lastIndexOf("\n",a-1),m=Math.max(0,m),m=d.substring(m+1,a),f=h?"#":"//";if(!m.trim().startsWith(f)){let t=-1,n=-1;for(let e=a-1;0<=e;--e){if("."==d[e]){t=e;break}if(!/\w/.test(d[e]))break;-1==n&&(n=e)}t==a-1?d=d.slice(0,a)+"_"+d.slice(a):-1==n&&(d=d.slice(0,a)+"_"+d.slice(a),n=a);const y=-1!==t,k=(_.isMemberCompletion=y)?d.slice(t+1,c):d.slice(l,c),b=(y&&(n=t),{});m=H.cloneCompileOpts(H.host.opts);m.fileSystem[e]=d,H.addApiInfo(m),m.syntaxInfo={position:n,type:_.isMemberCompletion?"memberCompletion":"identifierCompletion"};let o,r=[];if(h){const B=U.transpile.pyToTs(m);if(B.syntaxInfo&&B.syntaxInfo.symbols&&(r=L(B.syntaxInfo.symbols,1)),B.globalNames&&(H.lastGlobalNames=B.globalNames),!r.length&&B.globalNames&&(r=L(pxt.U.values(B.globalNames),1)),Object.keys(B.outfiles).forEach(e=>{e===p&&H.host.setFile(e,B.outfiles[e])}),B.sourceMap){const H=d,A=B.outfiles[p]||"",I=U.BuildSourceMapHelpers(B.sourceMap,A,H).py.smallestOverlap(g);I&&(o=I.ts.startPos)}!y&&50<r.length&&(r=r.filter(e=>0<=(h?e.symbol.pyQName:e.symbol.qName).toLowerCase().indexOf(k.toLowerCase()))),m.ast=!0,U.compile(m,H.service)}else o=a,m.ast=!0,H.host.setOpts(m),H.runConversionsAndCompileUsingService();const v=H.service.getProgram(),T=v.getSourceFile(p),E=v.getTypeChecker();let i=U.findInnerMostNodeAtPosition(T,o);if(!(U.decompiler.buildCommentMap(T).some(e=>e.start<=a&&a<=e.end)||i&&[U.SK.StringLiteral,U.SK.FirstTemplateToken,U.SK.NoSubstitutionTemplateLiteral].some(e=>i.kind===e))){_.namespace=U.getCurrentNamespaces(i);let e=!1;if(y){const B=U.findInnerMostNodeAtPosition(T,h?o:t-1);if(B){const A=E.getSymbolAtLocation(B);if(m=0<(null==(f=null==A?void 0:A.members)?void 0:f.size)?E.getDeclaredTypeOfSymbol(A):A?E.getTypeOfSymbolAtLocation(A,B):E.getTypeAtLocation(B)){const B=m.symbol?E.getFullyQualifiedName(m.symbol):M(m,E);B&&(r=m.getApparentProperties().map(e=>B+"."+e.getName()).map(e=>H.lastApiInfo.apis.byQName[e]).filter(e=>!!e).map(e=>P(e,1)),e=!0)}}}var f=pxt.U.values(H.lastApiInfo.apis.byQName);if(0===r.length&&(r=L(f.filter(e=>0<=(h?e.pyQName:e.qName).toLowerCase().indexOf(k.toLowerCase())),1)),!h&&!e){i=(i=U.findInnerMostNodeAtPosition(T,l))||T.getSourceFile();let e=B.SymbolFlags.Variable,t=E.getSymbolsInScope(i,e),n=i.getText();m=(t="_"!==n?t.filter(e=>0<=e.name.indexOf(n)):t).map(e=>{let t=O(e,H.lastApiInfo.apis,E);return t=t||w(e,E.getTypeOfSymbolAtLocation(e,i))}).filter(e=>!!e).map(e=>P(e,1));m.forEach(e=>e.weight+=5),r=[...r,...m]}f=U.getParentCallExpression(i);if(f){let e=U.findCurrentCallArgIdx(f,i,o);if(0<=e){const U=H.blocksInfoOp(H.lastApiInfo.apis,u.bannedCategories),s=A(f);if(s){const H=I(s,e=e>=s.parameters.length?s.parameters.length-1:e,U);H&&D(H.type,f,E,r,H.isEnum).forEach(e=>e.weight=10)}}}if(!y){let e;f=(e=h?(m=pxt.py.keywords,Object.keys(m)):[...ts.pxtc.reservedWords,...ts.pxtc.keywordTypes]).filter(e=>0<=e.indexOf(k)).map(N).map(e=>P(e,0));r=[...r,...f]}m=h&&H.lastGlobalNames?H.lastGlobalNames:H.lastApiInfo.apis.byQName;r.map(e=>!e.symbol.attributes.alias||y&&7===e.symbol.kind?e:P(H.lastApiInfo.apis.byQName[e.symbol.attributes.alias],e.weight)).filter(F).forEach(e=>{b[e.symbol.qName]=e}),(r=pxt.Util.values(b).filter(e=>!!e&&!!e.symbol)).sort(R),s.light&&100<r.length&&(r=r.splice(0,100));const{bannedCategories:S,screenSize:C}=s.runtime,x={takenNames:m,blocksInfo:H.blocksInfoOp(H.lastApiInfo.apis,S),screenSize:C,apis:H.lastApiInfo.apis,checker:null==(f=null===H.service||void 0===H.service?void 0:H.service.getProgram())?void 0:f.getTypeChecker()};r.forEach(e=>{var e=e.symbol,t=h,n=x,o=H.lastApiInfo.decls[e.qName];if(B.isFunctionLike(o)&&(e.snippetAddsDefinitions||t&&!e.pySnippet||!t&&!e.snippet)){const B=H.getSnippet(n,e,o,t),r=H.snippetStringify(B),i=H.snippetStringify(B,!0),s=H.snippetAddsDefinitions(B);t?(e.pySnippet=r,e.pySnippetWithMarkers=i):(e.snippet=r,e.snippetWithMarkers=i),e.snippetAddsDefinitions=s}}),_.entries=r.map(e=>e.symbol)}}return _}}(ts=ts||{}),function(s){function i(e){e=t(e),s.sys.write(e)}function a(e){for(const t of e)i(t)}function t(e){let t;var n;t=void 0!==e.file?({line:r,character:i}=s.getLineAndCharacterOfPosition((n=e).file,n.start),o=n.file.fileName,Object.assign({fileName:o,line:r,column:i},n)):Object.assign({fileName:void 0,line:void 0,column:void 0},e);{var o=t;let e="";o.fileName&&(e+=`${o.fileName}(${o.line+1},${o.column+1}): `);var r=s.sys?s.sys.newLine:"\n",i=u.DiagnosticCategory[o.category].toLowerCase();return e+=`${i} TS${o.code}: `+u.flattenDiagnosticMessageText(o.messageText,r)+r}}function l(e,t){var n=s.createCompilerHost(t);return n.getDefaultLibFileName=()=>"node_modules/pxt-core/pxtcompiler/ext-typescript/lib/lib.d.ts",s.createProgram(e,t,n)}function c(e){let t=e.getSyntacticDiagnostics();return(t=0===t.length&&0===(t=e.getOptionsDiagnostics().concat(u.Util.toArray(e.getGlobalDiagnostics()))).length?e.getSemanticDiagnostics():t).slice(0)}var u;(u=s.pxtc||(s.pxtc={})).getDiagnosticString=t,u.plainTscCompileDir=function(n){const o=s.parseCommandLine([]);let r=s.findConfigFile(n,s.sys.fileExists);var e=function(){var e=s.sys.readFile(r),e=s.parseConfigFileTextToJson(r,e),t=e.config;if(t){if(!(0<(t=s.parseJsonConfigFileContent(t,s.sys,n,o.options,r)).errors.length))return t;a(t.errors)}else a([e.error]);s.sys.exit(s.ExitStatus.DiagnosticsPresent_OutputsSkipped)}(),e=l(e.fileNames,e.options);return c(e).forEach(i),e},u.plainTscCompileFiles=l,u.getProgramDiagnostics=c}(ts=ts||{}),function(m){{var f=m.pxtc||(m.pxtc={});function y(e){if(!e||!e.kind)return null;switch(e.kind){case m.SyntaxKind.StringKeyword:return"str";case m.SyntaxKind.NumberKeyword:return"number";case m.SyntaxKind.BooleanKeyword:return"bool";case m.SyntaxKind.VoidKeyword:return"None";case m.SyntaxKind.FunctionType:return n=y((t=e).type),`(${t.parameters.map(e=>e.type).map(y).join(", ")}) -> `+n;case m.SyntaxKind.ArrayType:return`List[${y(e.elementType)}]`;case m.SyntaxKind.TypeReference:t=e;return t.typeName&&t.typeName.getText?t.typeName.getText():"";case m.SyntaxKind.AnyKeyword:return"any";default:return pxt.tickEvent("depython.todo.tstypenodetopytype",{kind:e.kind}),""}var t,n}function k(e){if(!e||!e.flags)return null;switch(e.flags){case m.TypeFlags.String:return"str";case m.TypeFlags.Number:return"number";case m.TypeFlags.Boolean:return"bool";case m.TypeFlags.Void:return"None";case m.TypeFlags.Any:return"any";default:return pxt.tickEvent("depython.todo.tstypetopytype",{kind:e.flags}),""}}function r(e){return!!e.attributes.block&&!!e.attributes.blockId}let o;function d(t,n){function e(e){return-e(t)+e(n)}return e(e=>r(e)?1:-1)||e(e=>e.namespace?-1:1)||(o||((o={})[4]=100,o[5]=101,o[3]=99,o[2]=98,o[1]=97,o[8]=89,o[6]=81,o[7]=80),e(e=>o[e.kind]||0))||e(e=>e.attributes.weight||50)||f.U.strcmp(t.name,n.name)}function i(e,t,n=!1){const i={byQName:{},jres:t},s={},a=e.getTypeChecker(),l=o=>{var r;if(o.kind!=f.SK.VariableStatement){if(f.isExported(o)){if(!o.symbol)return void console.warn("no symbol",o);let e=b(a,o.symbol),n=(o.kind==f.SK.SetAccessor&&(e+="@set"),s[e]=o,function(p,s,a){function g(e,t,n=!1){let o=p.getTypeAtLocation(t);if(!o)return"None";n&&(o=o.getCallSignatures()[0].getReturnType());t=p.typeToString(o,void 0,m.TypeFormatFlags.UseFullyQualifiedType);return/^\d/.test(t)?"number":"this"==t?b(p,o.symbol):t}var l,c=function(){switch(a.kind){case f.SK.MethodDeclaration:case f.SK.MethodSignature:return 1;case f.SK.PropertyDeclaration:case f.SK.PropertySignature:case f.SK.GetAccessor:case f.SK.SetAccessor:return 2;case f.SK.Constructor:case f.SK.FunctionDeclaration:return 3;case f.SK.VariableDeclaration:return 4;case f.SK.ModuleDeclaration:return 5;case f.SK.EnumDeclaration:return 6;case f.SK.EnumMember:return 7;case f.SK.ClassDeclaration:return 8;case f.SK.InterfaceDeclaration:return 9;default:return 0}}();if(0==c)return null;{let e=a,d=f.parseComments(e);if(d.weight<0)return null;let t,n=/^(.*)\.(.*)/.exec(s),o=3==c||1==c,r=null,i=m.getSourceFileOfNode(a);if(i&&(l=/^pxt_modules\/([^\/]+)/.exec(i.fileName))&&(r=l[1]),8==c||9==c)if(t=[],a.heritageClauses)for(var u of a.heritageClauses)if(u.types)for(var h of u.types)t.push(g(0,h));6!=c&&7!==c||(t=t||[]).push("Number");var _={kind:c,qName:s,namespace:n?n[1]:"",name:n?n[2]:s,fileName:a.getSourceFile().fileName,attributes:d,pkg:r,pkgs:null,extendsTypes:t,retType:a.kind==m.SyntaxKind.Constructor?"void":5==c?"":g(e.type,e,o),parameters:o?f.Util.toArray(e.parameters).map((n,e)=>{let t,o,r=f.getName(n),i=d.paramHelp[r]||"",s=d.paramMin&&d.paramMin[r],a=d.paramMax&&d.paramMax[r];if(/\beg\.?:\s*(.+)/.exec(i),n.type&&n.type.kind===f.SK.FunctionType){const y=p.getSignatureFromDeclaration(n.type).getParameters();"objectdestructuring"===d.mutate?(f.assert(0<y.length),t=p.getTypeAtLocation(y[0].valueDeclaration).getProperties().map(e=>({name:e.getName(),type:p.typeToString(p.getTypeOfSymbolAtLocation(e,y[0].valueDeclaration))}))):o=y.map((e,t)=>({name:e.getName(),type:p.typeToString(p.getTypeOfSymbolAtLocation(e,n),void 0,m.TypeFormatFlags.UseFullyQualifiedType)}))}var l={},c=p.getTypeAtLocation(n),u=c&&!!(c.flags&(m.TypeFlags.Enum|m.TypeFlags.EnumLiteral));if(d.block&&d.paramShadowOptions){const m=[];d.block.replace(/%(\w+)/g,(e,t)=>(m.push(t),"")),d.paramShadowOptions[m[e]]&&(l.fieldEditorOptions={value:d.paramShadowOptions[m[e]]})}s&&(l.min={value:s}),a&&(l.max={value:a});e=n.type&&y(n.type)||c&&k(c)||"unknown",c=n.initializer?n.initializer.getText():f.getExplicitDefault(d,r)||(n.questionToken?"undefined":void 0);return{name:r,description:i,type:g(n.type,n),pyTypeString:e,initializer:c,default:d.paramDefl[r],properties:t,handlerParameters:o,options:l,isEnum:u}}):null,snippet:m.isFunctionLike(a)?null:void 0};switch(_.kind){case 7:_.pyName=f.U.snakify(_.name).toUpperCase();break;case 4:case 1:case 2:case 3:_.pyName=f.U.snakify(_.name);break;default:_.pyName=_.name}return a.kind!==f.SK.GetAccessor&&(a.kind!==f.SK.PropertyDeclaration&&a.kind!==f.SK.PropertySignature||!f.isReadonly(a))||(_.isReadOnly=!0),_}}(a,e,o));if(n){let t=f.U.lookup(i.byQName,e);if(t)if(9==t.kind&&9!=n.kind)i.byQName[e+"@type"]=t;else if(9!=t.kind&&9==n.kind)i.byQName[e+"@type"]=n,n=t;else{const o=null==(r=t.attributes._source)?void 0:r.trim(),i=null==(r=n.attributes._source)?void 0:r.trim();let e=o+"\n"+i;o&&0<=(null==i?void 0:i.indexOf(o))?e=i:i&&0<=(null==o?void 0:o.indexOf(i))&&(e=o),n.attributes=f.parseCommentString(e),5!==t.kind||(n.pkgs=t.pkgs||[],t.pkg===n.pkg)||n.pkgs.find(e=>e===t.pkg)||n.pkgs.push(t.pkg),t.extendsTypes&&(n.extendsTypes=n.extendsTypes||[],t.extendsTypes.forEach(e=>{-1===n.extendsTypes.indexOf(e)&&n.extendsTypes.push(e)}))}!o.parent||o.parent.kind!=f.SK.ClassDeclaration&&o.parent.kind!=f.SK.InterfaceDeclaration||f.isStatic(o)||(n.isInstance=!0),i.byQName[e]=n}}o.kind==f.SK.ModuleDeclaration?(r=o).body.kind==f.SK.ModuleBlock?r.body.statements.forEach(l):r.body.kind==f.SK.ModuleDeclaration&&l(r.body):o.kind!=f.SK.InterfaceDeclaration&&o.kind!=f.SK.ClassDeclaration&&o.kind!=f.SK.EnumDeclaration||o.members.forEach(l)}else o.declarationList.declarations.forEach(l)};for(var o of e.getSourceFiles())o.statements.forEach(l);var r,c=[];for(r in i.byQName){var u,d,p=i.byQName[r];p.qName=r,p.attributes._source=null,p.extendsTypes&&p.extendsTypes.length&&c.push(p);let e=p.attributes.jres;e&&("true"==e&&(e=r),(u=f.U.lookup(t||{},e))&&u.icon&&!p.attributes.iconURL&&(p.attributes.iconURL=u.icon),u)&&u.data&&!p.attributes.jresURL&&(p.attributes.jresURL="data:"+u.mimeType+";base64,"+u.data),p.pyName&&((u=f.U.lookup(f.ts2PyFunNameMap,p.qName))&&u.n?(p.pyQName=u.n,p.pySnippet=u.snippet,p.pySnippetName=u.n,p.pySnippetWithMarkers=void 0):p.namespace?(d=i.byQName[p.namespace])?p.pyQName=d.pyQName+"."+p.pyName:(pxt.log("namespace missing: "+p.namespace),p.pyQName=p.namespace+"."+p.pyName):p.pyQName=p.pyName)}let g={},h=e=>{if(!f.U.lookup(g,e.qName)){g[e.qName]=!0;var t,n={};n[e.qName]=!0;for(t of e.extendsTypes||[]){n[t]=!0;var o=i.byQName[t];if(o){h(o);for(var r of o.extendsTypes)n[r]=!0}}e.extendsTypes=Object.keys(n)}};return c.forEach(h),n&&delete i.byQName["Array.map"],{apis:i,decls:s}}function b(e,t){return t.isBogusSymbol?t.name:e.getFullyQualifiedName(t)}f.placeholderChar="",f.ts2PyFunNameMap={"Math.trunc":{n:"int",t:m.SyntaxKind.NumberKeyword,snippet:"int(0)"},"Math.min":{n:"min",t:m.SyntaxKind.NumberKeyword,snippet:"min(0, 0)"},"Math.max":{n:"max",t:m.SyntaxKind.NumberKeyword,snippet:"max(0, 0)"},"Math.abs":{n:"abs",t:m.SyntaxKind.NumberKeyword,snippet:"abs(0)"},"console.log":{n:"print",t:m.SyntaxKind.VoidKeyword,snippet:'print(":)")'},".length":{n:"len",t:m.SyntaxKind.NumberKeyword},".toLowerCase()":{n:"string.lower",t:m.SyntaxKind.StringKeyword},".toUpperCase()":{n:"string.upper",t:m.SyntaxKind.StringKeyword},".charCodeAt(0)":{n:"ord",t:m.SyntaxKind.NumberKeyword},"pins.createBuffer":{n:"bytearray",t:m.SyntaxKind.Unknown},"pins.createBufferFromArray":{n:"bytes",t:m.SyntaxKind.Unknown},"control.createBuffer":{n:"bytearray",t:m.SyntaxKind.Unknown},"control.createBufferFromArray":{n:"bytes",t:m.SyntaxKind.Unknown},"!!":{n:"bool",t:m.SyntaxKind.BooleanKeyword},"Array.indexOf":{n:"Array.index",t:m.SyntaxKind.Unknown},"Array.push":{n:"Array.append",t:m.SyntaxKind.Unknown},parseInt:{n:"int",t:m.SyntaxKind.NumberKeyword,snippet:'int("0")'},"_py.range":{n:"range",t:m.SyntaxKind.Unknown,snippet:"range(4)"}},f.emitPyTypeFromTypeNode=y,f.emitPyTypeFromTsType=k,f.genDocs=function(o,e,r={}){pxt.debug("generating docs for "+o),pxt.debug(JSON.stringify(Object.keys(e.byQName),null,2));const i={},t=f.Util.values(e.byQName),n=t.filter(e=>7==e.kind).sort(d),s={},a={},l={},c=t=>{var e;r.locs&&t.qName&&!/^__/.test(t.name)&&(pxt.debug("loc: "+t.qName),7!=t.kind&&(e=m.pxtc.blocksCategory(t))&&(a["{id:category}"+e]=e),t.attributes.jsDoc&&(l[t.qName]=t.attributes.jsDoc),t.attributes.block&&(a[t.qName+"|block"]=t.attributes.block),t.attributes.group&&(a["{id:group}"+t.attributes.group]=t.attributes.group),t.attributes.subcategory&&(a["{id:subcategory}"+t.attributes.subcategory]=t.attributes.subcategory),t.parameters)&&t.parameters.filter(e=>!!e.description).forEach(e=>{l[t.qName+"|param|"+e.name]=e.description})},u=(t,e)=>{if(r.locs){const n={};Object.keys(t).sort().forEach(e=>n[e]=t[e]),i[o+e+"-strings.json"]=JSON.stringify(n,null,2)}};for(const m of t){if(5==m.kind){if(!t.filter(e=>e.namespace==m.name&&!!e.attributes.jsDoc)[0])continue;m.attributes.block||(m.attributes.block=m.name)}c(m)}return r.locs&&n.forEach(e=>{e.attributes.block&&(a[e.qName+"|block"]=e.attributes.block),e.attributes.jsDoc&&(a[e.qName]=e.attributes.jsDoc)}),u(a,""),u(l,"-jsdoc"),r.pxtsnippet&&(r.pxtsnippet.forEach(e=>{{var n=s;const o=["label","title","hint","errorMessage"];n[e.label]=e.label,e.questions.forEach(t=>{o.forEach(e=>{t[e]&&(n[t[e]]=t[e])})})}}),u(s,"-snippet")),i},f.hasBlock=r,f.compareSymbols=d,f.getApiInfo=function(e,t,n=!1){return i(e,t,n).apis},f.internalGetApiInfo=i,f.getFullName=b}}(ts=ts||{}),function(a){var d=a.pxtc||(a.pxtc={});{var p=d.service||(d.service={});let l,n,e={fileSystem:{},sourceFiles:[],target:{isNative:!1,hasHex:!1,switches:{}}};class o{constructor(){this.opts=e,this.fileVersions={},this.projectVer=0,this.pxtModulesOK=null}getProjectVersion(){return this.projectVer+""}setFile(e,t){this.opts.fileSystem[e]!=t&&(this.fileVersions[e]=(this.fileVersions[e]||0)+1,this.opts.fileSystem[e]=t,this.projectVer++)}reset(){this.setOpts(e),this.pxtModulesOK=null}setOpts(e){d.Util.iterMap(e.fileSystem,(e,t)=>{this.opts.fileSystem[e]!=t&&(this.fileVersions[e]=(this.fileVersions[e]||0)+1)}),this.opts=Object.assign(Object.assign({},e),{fileSystem:Object.assign({},e.fileSystem)}),this.projectVer++}getCompilationSettings(){return d.getTsCompilerOptions(this.opts)}getScriptFileNames(){return this.opts.sourceFiles.filter(e=>d.U.endsWith(e,".ts"))}getScriptVersion(e){return(this.fileVersions[e]||0).toString()}getScriptSnapshot(e){e=this.opts.fileSystem[e];return null!=e?a.ScriptSnapshot.fromString(e):null}getNewLine(){return"\n"}getCurrentDirectory(){return"."}getDefaultLibFileName(e){return"no-default-lib.d.ts"}log(e){console.log("LOG",e)}trace(e){console.log("TRACE",e)}error(e){console.error("ERROR",e)}useCaseSensitiveFileNames(){return!0}}function c(e,t){return e?(p.lastLocBlocksInfo||(p.lastLocBlocksInfo=d.getBlocksInfo(e,t)),p.lastLocBlocksInfo):(p.lastBlocksInfo||(p.lastBlocksInfo=d.getBlocksInfo(p.lastApiInfo.apis,t)),p.lastBlocksInfo)}function g(e){return p.lastApiInfo||(p.lastApiInfo=d.internalGetApiInfo(p.service.getProgram(),e.jres)),p.lastApiInfo}function h(e){var t;e.apisInfo||(t=g(e),e.apisInfo=d.U.clone(t.apis))}function _(e){e=pxt.U.flatClone(e);return e.fileSystem=pxt.U.flatClone(e.fileSystem),e}p.blocksInfoOp=c,p.getLastApiInfo=g,p.addApiInfo=h,p.cloneCompileOpts=_,p.IsOpErr=function(e){return!!e.errorMessage};const r={reset:()=>{p.service=a.createLanguageService(p.host),p.lastApiInfo=void 0,p.lastGlobalNames=void 0,p.host.reset()},setOptions:e=>{p.host.setOpts(e.options)},syntaxInfo:t=>{var e,n,o;let r=t.fileContent;t.fileContent&&p.host.setFile(t.fileName,t.fileContent);var i=_(p.host.opts);i.fileSystem[t.fileName]=r,h(i),i.syntaxInfo={position:t.position,type:t.infoType};const s=i.target.preferredEditor==pxt.PYTHON_PROJECT_NAME,a="symbol"===i.syntaxInfo.type,l="signature"===i.syntaxInfo.type;if(s){var c=d.transpile.pyToTs(i);c.globalNames&&(p.lastGlobalNames=c.globalNames)}else{i.ast=!0,p.host.setOpts(i),m();const n=p.service.getProgram(),o=n.getSourceFile(t.fileName),r=n.getTypeChecker();if(a||l){var u,c=d.findInnerMostNodeAtPosition(o,t.position);if(c)if(a){const t=r.getSymbolAtLocation(c);t&&(u=p.getPxtSymbolFromTsSymbol(t,i.apisInfo,r),i.syntaxInfo.symbols=[u],i.syntaxInfo.beginPos=c.getStart(),i.syntaxInfo.endPos=c.getEnd())}else if(l){const p=null==(e=null==c?void 0:c.pxt)?void 0:e.callInfo;if(p){const e=i.apisInfo.byQName[p.qName],o=(i.syntaxInfo.symbols=[e],i.syntaxInfo.beginPos=c.getStart(),i.syntaxInfo.endPos=c.getEnd(),d.getParentCallExpression(c));if(o){const p=d.findCurrentCallArgIdx(o,c,t.position);i.syntaxInfo.auxResult=p}}}}}if(a&&(null==(n=i.syntaxInfo.symbols)||!n.length)){const e=p.getWordAtPosition(t.fileContent,t.position);if(e)if(s&&"range"===e.text){const t=g(i).apis;t.byQName["_py.range"]&&(i.syntaxInfo.symbols=[t.byQName["_py.range"]],i.syntaxInfo.beginPos=e.start,i.syntaxInfo.endPos=e.end)}else{const t=d.getHelpForKeyword(e.text,s);t&&(i.syntaxInfo.auxResult={documentation:t,displayString:p.displayStringForKeyword(e.text,s)},i.syntaxInfo.beginPos=e.start,i.syntaxInfo.endPos=e.end)}}if(null!=(o=i.syntaxInfo.symbols)&&o.length){const t=g(i).apis;s&&(i.syntaxInfo.symbols=i.syntaxInfo.symbols.map(e=>t.byQName[e.qName]||e)),a&&(i.syntaxInfo.auxResult=i.syntaxInfo.symbols.map(e=>p.displayStringForSymbol(e,s,t)))}return i.syntaxInfo},getCompletions:e=>p.getCompletions(e),compile:e=>{p.host.setOpts(e.options);e=m();return d.timesToMs(e),e},decompile:e=>(p.host.setOpts(e.options),d.decompile(p.service.getProgram(),e.options,e.fileName,!1)),pydecompile:e=>(p.host.setOpts(e.options),d.transpile.tsToPy(p.service.getProgram(),e.fileName)),decompileSnippets:e=>(p.host.setOpts(e.options),d.decompileSnippets(p.service.getProgram(),e.options,!1)),assemble:e=>({words:d.processorInlineAssemble(p.host.opts.target,e.fileContent)}),py2ts:e=>(h(e.options),d.transpile.pyToTs(e.options)),fileDiags:e=>d.patchUpDiagnostics(function(e){if(!/\.ts$/.test(e))return[];let t=p.service.getSyntacticDiagnostics(e);return t=(t=t&&t.length?t:p.service.getSemanticDiagnostics(e))||[]}(e.fileName)),allDiags:()=>{var e=m();return d.timesToMs(e),p.host.opts.target.switches.time&&console.log("DIAG-TIME",e.times),e},format:e=>{e=e.format;return d.format(e.input,e.pos)},apiInfo:()=>{if(p.lastBlocksInfo=void 0,l=void 0,p.host.opts!==e)return p.lastApiInfo=d.internalGetApiInfo(p.service.getProgram(),p.host.opts.jres),p.lastApiInfo.apis},snippet:e=>{var t=e.snippet;if(p.lastApiInfo){var n,o,r,i=p.lastApiInfo.apis.byQName[t.qName],s=p.lastApiInfo.decls[t.qName];if(i&&s&&a.isFunctionLike(s))return r={},r=(t=!!t.python)&&p.lastGlobalNames?p.lastGlobalNames:p.lastApiInfo.apis.byQName,{bannedCategories:e,screenSize:n}=e.runtime,o=p.lastApiInfo["apis"],o={apis:o,blocksInfo:c(o,e),takenNames:r,bannedCategories:e,screenSize:n,checker:p.service&&p.service.getProgram().getTypeChecker()},r=p.getSnippet(o,i,s,t),p.snippetStringify(r)}},blocksInfo:e=>c(e,e.blocks&&e.blocks.bannedCategories),apiSearch:i=>{const o=i.search,s=c(o.localizedApis,i.blocks&&i.blocks.bannedCategories),e=(o.localizedStrings&&pxt.Util.setLocalizedStrings(o.localizedStrings),(t,e,n)=>{if(t)return"string"==typeof t?t:e?t[e]:Object.keys(t).map(e=>t[e]).join(" ")});if(!p.builtinItems){p.builtinItems=[],p.blockDefinitions=pxt.blocks.blockDefinitions();for(const i in p.blockDefinitions){const o=p.blockDefinitions[i];if(o.operators)for(const l in o.operators)o.operators[l].forEach(e=>p.builtinItems.push({id:i,name:o.name,jsdoc:"string"==typeof o.tooltip?o.tooltip:o.tooltip[e],block:e,field:[l,e],builtinBlock:!0}));else p.builtinItems.push({id:i,name:o.name,jsdoc:e(o.tooltip,o.tooltipSearch),block:e(o.block,o.blockTextSearch),builtinBlock:!0})}}let a;if(!l||o.subset){const i={};let e=[],t=(o.subset&&(p.tbSubset=o.subset,e=p.builtinItems.filter(e=>!!p.tbSubset[e.id])),p.tbSubset?a=s.blocks.filter(e=>!!p.tbSubset[e.attributes.blockId]):(a=s.blocks,e=p.builtinItems),a.map(e=>({id:e.attributes.blockId,qName:e.qName,name:e.name,namespace:e.namespace,block:(e=>{if(null!=(o=e.attributes)&&o._def){var t,n=[],o=e.attributes._def,r=pxt.blocks.compileInfo(e);for(t of o.parts)switch(t.kind){case"label":n.push(t.text);break;case"param":var i=r.definitionNameToParam[t.name];n.push((null==i?void 0:i.defaultValue)||t.varName||(null==i?void 0:i.actualName)||t.name)}return n.join(" ")}return e.attributes.block})(e),params:(e=>{const t=null==(e=e.attributes)?void 0:e.paramHelp;return t&&Object.keys(t).map(e=>t[e]).join(" "),""})(e),jsdoc:e.attributes.jsDoc,localizedCategory:p.tbSubset&&"string"==typeof p.tbSubset[e.attributes.blockId]?p.tbSubset[e.attributes.blockId]:void 0}))),n={},r=(e.forEach(e=>n[e.id]=!0),t=t.filter(e=>!(e.id in n)),0);a.forEach(e=>{var t,n=i[e.qName]=(n=(e=e).attributes.weight||50,(1e3*((t=s.apis.byQName[e.namespace])&&t.attributes.weight||50)+n)*(t&&t.attributes.advanced||e.attributes.advanced?1:1e6));r=Math.max(r,n)}),t=t.concat(e),l=new Fuse(t,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:16,minMatchCharLength:2,findAllMatches:!1,caseSensitive:!1,keys:[{name:"name",weight:.3},{name:"namespace",weight:.1},{name:"localizedCategory",weight:.1},{name:"block",weight:.4375},{name:"params",weight:.0625},{name:"jsdoc",weight:.0625}],sortFn:function(e,t){var n=e.qName?1-i[e.item.qName]/r:1,o=t.qName?1-i[t.item.qName]/r:1;return e.score*(1+n/10)-t.score*(1+o/10)}})}return l.search(o.term).slice(0,7)},projectSearch:e=>{var e=e.projectSearch,t=e.headers;return(n=n||new Fuse(t,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:16,minMatchCharLength:2,findAllMatches:!1,caseSensitive:!1,keys:[{name:"name",weight:.3}]})).search(e.term)},projectSearchClear:()=>{n=void 0}};function m(){h(p.host.opts);const e=d.U.flatClone(p.host.opts.fileSystem);let t=d.runConversionsAndStoreResults(p.host.opts);null!=t&&t.globalNames&&(p.lastGlobalNames=t.globalNames);var n,o=p.host.opts.fileSystem;p.host.opts.fileSystem=e;for(n of Object.keys(o))p.host.setFile(n,o[n]);if(0==t.diagnostics.length){p.host.opts.skipPxtModulesEmit=!1,p.host.opts.skipPxtModulesTSC=!1;const e=p.host.opts.target.isNative?"native":"js";!p.host.opts.target.switches.noIncr&&p.host.pxtModulesOK&&(p.host.opts.skipPxtModulesTSC=!0,p.host.opts.noEmit?p.host.opts.skipPxtModulesEmit=!0:p.host.opts.target.isNative?p.host.opts.skipPxtModulesEmit=!1:"js"!=p.host.pxtModulesOK||p.host.opts.breakpoints&&!p.host.opts.justMyCode||(p.host.opts.skipPxtModulesEmit=!0));var r=d.compile(p.host.opts,p.service);((t=Object.assign({sourceMap:t.sourceMap},r)).needsFullRecompile||(!t.success||t.diagnostics.length)&&p.host.opts.clearIncrBuildAndRetryOnError)&&(pxt.debug("triggering full recompile"),pxt.tickEvent("compile.fullrecompile"),p.host.opts.skipPxtModulesEmit=!1,r=d.compile(p.host.opts,p.service),t=Object.assign({sourceMap:t.sourceMap},r)),t.diagnostics.every(e=>!d.isPxtModulesFilename(e.fileName))&&(p.host.pxtModulesOK=e),t.ast&&(r=d.internalGetApiInfo(t.ast))&&(p.lastApiInfo=r)}return t}p.runConversionsAndCompileUsingService=m,p.performOperation=function(e,t){p.service||(p.host=new o,p.service=a.createLanguageService(p.host));let n=null;if(r.hasOwnProperty(e))try{n=(0,r[e])(t)||{}}catch(e){n={errorMessage:e.stack}}else n={errorMessage:"No such operation: "+e};return n}}}(ts=ts||{}),function(P){function a(e){return"object"==typeof e&&void 0!==e.default}function l(e){return"object"==typeof e&&"number"==typeof e.length}function L(e,r=!1){const i={};let s=1;return function t(n){if(a(n)){if(r){if(c(n.default))return t(n.default);const r=L(n.default,!1);let e=i[r];var o;return(e&&!n.isLiteral||(e=s,s++,i[r]=e),0<=r.indexOf(".")&&r.indexOf(" ")<0)?((o=r.split("."))[o.length-1]="${"+e+":"+o[o.length-1]+"}",o.join(".")):"${"+e+":"+r+"}"}return t(n.default)}return l(n)?n.map(e=>t(e)).join(""):n}(e)}function c(e){return!!a(e)||!!l(e)&&e.map(c).reduce((e,t)=>e||t,!1)}function M(e){return e.attributes.shim&&"@"==e.attributes.shim[0]||e.attributes.pyConvertToTaggedTemplate}var F,U;F=P.pxtc||(P.pxtc={}),(U=F.service||(F.service={})).snippetStringify=L,U.snippetHasReplacementPoints=c,U.snippetAddsDefinitions=function e(t){return a(t)?t.isDefinition||e(t.default):!!l(t)&&t.map(e).reduce((e,t)=>e||t,!1)},U.getSnippet=function i(s,a,e,l,c=0){let{apis:u,takenNames:t,blocksInfo:n,screenSize:d,checker:p}=s;const g=pxt.py.INDENT,h=l?"python":"typescript";let o=a.namespace,r=!1,_=!1,m="",f=0,y=[];if(M(a))return l?a.name+'(""" """)':a.name+"``";let k="";k=e.kind==F.SK.Constructor?N(e.symbol)||e.parent.name.getText():N(e.symbol)||e.name.getText(),l&&(k=F.U.snakify(k));const b=a.attributes;if("TD_ID"===b.shim&&c&&e.parameters.length)return I(e.parameters[0]);const v=n.blocksById,T=e.parameters?e.parameters.filter(e=>!e.initializer&&!e.questionToken):[],E=T.map(I).map(e=>({default:e,isLiteral:!0})),S=a;if(S.attributes.block)if(S.attributes.defaultInstance)o=S.attributes.defaultInstance,l&&(o=o&&F.U.snakify(o));else if(S.namespace){const P=u.byQName[S.namespace];if(P.attributes.fixedInstances){let e,t=F.Util.values(u.byQName),n=t.filter(e=>4===e.kind&&e.attributes.fixedInstance);const a=n.filter(e=>e.retType==P.qName).sort((e,t)=>e.name.localeCompare(t.name));e=(a.length?a:n.filter(e=>{return-1!==(n=P.qName,t.filter(e=>e.extendsTypes).filter(e=>e.extendsTypes.reduce((e,t)=>e||-1!=t.indexOf(n),!1)).reduce((e,t)=>e.concat(t.extendsTypes),[]).indexOf(e.retType));var n}).sort((e,t)=>e.name.localeCompare(t.name)))[0],(m=(e?(o=""+w(e),e):P).namespace)&&(_=!0),r=!0}else if(1==S.kind||2==S.kind){const P=pxt.blocks.compileInfo(S);if(P.thisParameter){let e;P.thisParameter.definitionName&&(e="my"+(e=(e=P.thisParameter.definitionName)[0].toUpperCase()+e.substring(1))),o=P.thisParameter.defaultValue||e,l&&(o=o&&F.U.snakify(o))}r=!0}else if(8===P.kind)return}var C,e=b&&(l?b.pySnippet:b.snippet);let x;if(e)x=[e];else if(x=[k],null!=E&&E.length||1==S.kind||3==S.kind||8==S.kind){const P=E.reduce((e,t)=>[...e,e.length?", ":"",t],[]);x=x.concat(["(",...P,")"])}let B=o?[o,".",...x]:x;return B=_?[(e=m,(C=e.indexOf("."))<0?e:e.substring(0,C)),".",...B]:B,b&&b.blockSetVariable&&(B=l?[{default:A(F.U.snakify(b.blockSetVariable)),isDefinition:!0}," = ",...B]:["let ",{default:A(b.blockSetVariable),isDefinition:!0}," = ",...B]),[y,B];function A(e){return t[e]?P.pxtc.decompiler.getNewName(e,t,!1):e}function I(t){const n=t.type;if(n){var e=t.name.kind===F.SK.Identifier?t.name.text:void 0,o=null==(o=null==b?void 0:b.paramDefl)?void 0:o[e];if(o){let e;if(n.kind==F.SK.AnyKeyword){const U=o.toUpperCase();e=Number.isNaN(+U)?"FALSE"==U||"TRUE"==U?F.SK.BooleanKeyword:U.includes(".")?F.SK.EnumKeyword:F.SK.StringKeyword:F.SK.NumberKeyword}if(n.kind===F.SK.StringKeyword||e===F.SK.StringKeyword)return 0!=o.indexOf('"')?`"${o}"`:o;const i=null==p?void 0:p.getTypeAtLocation(t),s=U.getPxtSymbolFromTsSymbol(null==i?void 0:i.symbol,u,p);return null!=s&&s.attributes.fixedInstances&&l?pxt.Util.snakify(o):l?F.tsSnippetToPySnippet(o,s):o}o=function(t){var e=null==(e=pxt.blocks.compileInfo(a).parameters)?void 0:e.find(e=>e.actualName===t);if(null!=e&&e.shadowBlockId){e=v[e.shadowBlockId];if(e){var n=null==(n=e.attributes)?void 0:n.paramFieldEditor;if(n){n=n[t];if(n){e=e.attributes.paramFieldEditorOptions||{};if("sprite"===n){n=e[t];const r={initColor:0,initWidth:16,initHeight:16};if(null!=n&&n.sizes){const o=n.sizes.split(";"),i=[];for(let e=0;e<o.length;e++){const r=o[e].split(",");if(2===r.length){let e=parseInt(r[0]),t=parseInt(r[1]);isNaN(e)||isNaN(t)||(e<0&&d&&(e=d.width),t<0&&d&&(t=d.height),i.push([e,t]))}}0<i.length&&(r.initWidth=i[0][0],r.initHeight=i[0][1])}return r.initColor=o(null==n?void 0:n.initColor,r.initColor),r.initWidth=o(null==n?void 0:n.initWidth,r.initWidth),r.initHeight=o(null==n?void 0:n.initHeight,r.initHeight),pxt.sprite.imageLiteralFromDimensions(r.initWidth,r.initHeight,r.initColor,h);function o(e,t){e=parseInt(e);return isNaN(e)?t:e}}}}}}return null}(e);if(o)return o;o=function(e){let t=(b._shadowOverrides||{})[e];if(!t){const n=pxt.blocks.compileInfo(a);for(const r of n.parameters)if(r.actualName===e){t=r.shadowBlockId;break}}if(!t)return null;let n=v[t];var o;return n?("TD_ID"===n.attributes.shim&&n.parameters.length&&(o=n.parameters[0].type,n=u.byQName[o]||n),n):null}(e);if(o){var r=U.getTsSymbolFromPxtSymbol(o,t,P.SymbolFlags.Enum);if(r){r=p.getTypeOfSymbolAtLocation(r,t);if(r){r=D(r);if(r)return r}}const n=o.attributes;if("KIND_GET"===n.shim&&n.blockId){const P=n.kindNamespace||a.namespace,U=F.Util.values(u.byQName).find(e=>e.namespace===P&&e.attributes.isKind);if(U)return l?U.pyQName:U.qName}if(c<3&&U.lastApiInfo.decls[o.qName]){r=i(s,o,U.lastApiInfo.decls[o.qName],l,c+1);if(r)return r}}if(n.kind===F.SK.StringKeyword&&"leds"===e)return l?'"""\n. . . . .\n. . . . .\n. . # . .\n. . . . .\n. . . . .\n"""':"`\n. . . . .\n. . . . .\n. . # . .\n. . . . .\n. . . . .\n`";if(n.kind===F.SK.FunctionType){const P=n;o=p?p.getSignatureFromDeclaration(P):void 0;return o?O(o,!0):R(e)}r=U.getBasicKindDefault(n.kind,l);if(void 0!==r)return r;o=p&&p.getTypeAtLocation(t);if(o){e=D(o);if(e)return e}}return l?"None":"null"}function D(e){if(e.symbol&&e.symbol.flags&P.SymbolFlags.Enum)return U.getDefaultEnumValue(e,l);var o,t=U.getPxtSymbolFromTsSymbol(e.symbol,u,p);if(F.isObjectType(e)){const F=t&&t.attributes&&(l?t.attributes.pySnippet:t.attributes.snippet);if(F)return F;if(e.objectFlags&P.ObjectFlags.Anonymous){const F=p.getSignaturesOfType(e,P.SignatureKind.Call);return F&&F.length?O(F[0],!1):R()}}if(e.flags&P.TypeFlags.NumberLike)return"0";if(t&&t.attributes.fixedInstances){o=t;const P=pxt.Util.values(u.byQName).filter(e=>{return 4===e.kind&&e.attributes.fixedInstance&&(t=u,e=e.retType,n=o.qName,e==n||!(!(t=t.byQName[e])||!t.extendsTypes)&&0<=t.extendsTypes.indexOf(n));var t,n});if(P.length){const F=P[0];return l?F.pyQName:F.qName}}}function N(e){if(p){e=F.getFullName(p,e),e=u.byQName[e];if(e)return w(e)}}function w(e){return l?e.pyName:e.name}function O(t,n){let o="",e=p.getReturnTypeOfSignature(t);if(e.flags&P.TypeFlags.NumberLike?o="return 0":e.flags&P.TypeFlags.StringLike?o='return ""':e.flags&(P.TypeFlags.Boolean|P.TypeFlags.BooleanLiteral)&&(o=l?"return False":"return false"),l){var r=b.optionalVariableArgs?"()":`(${t.parameters.map(e=>e.name).join(", ")})`;let e=k||"fn";0<f++&&(e+=f),n&&!/^on/i.test(e)&&(e="on"+pxt.Util.capitalize(e));n=T.filter(e=>{e=p&&p.getTypeAtLocation(e);return!!(e&&e.symbol&&e.symbol.flags&P.SymbolFlags.Enum)}).map(e=>{var e=L(I(e)).toLowerCase(),t=e.lastIndexOf(".");return-1!==t?e.substr(t+1):e}).join("_");return n&&(e+="_"+n),e=A(e=F.U.snakify(e)),y=[...y,y.length?"\n":"","def ",{default:e,isDefinition:!0},r,`:
`+g,{default:o||"pass"},"\n"],{default:e}}{let e="()";return b.optionalVariableArgs||(n=P.mapToDisplayParts(e=>{p.getSymbolDisplayBuilder().buildSignatureDisplay(t,e,void 0,P.TypeFormatFlags.UseFullyQualifiedType)}),r=P.displayPartsToString(n),e=r.substr(0,r.lastIndexOf(":"))),["function",e,` {
`+g,{default:o},"\n}"]}}function R(e){return l?(e=A(e=F.U.snakify(e=e||"fn")),y=[...y,y.length?"\n":"","def ",{default:e,isDefinition:!0},`():
`+g,{default:"pass"},"\n"],{default:e}):"function () {}"}},U.isTaggedTemplate=M}(ts=ts||{}),function(e){(e=(e=e.pxtc||(e.pxtc={})).transpile||(e.transpile={})).pyToTs=function(e,t=0){return pxt.py.py2ts(e)},e.tsToPy=function(e,t="main.ts"){return pxt.py.decompileToPython(e,t)}}(ts=ts||{}),function(s){{var a=s.pxtc||(s.pxtc={}),e;let o;function r(e,t){var n;if(e)return(n=t(e))===o.Continue?r(e.parent,t):n!==o.Abort?n===o.Found?e:n:void 0}function i(e){return r(e,e=>s.isModuleDeclaration(e)?o.Found:o.Continue)}a.getParentCallExpression=function(e){return r(e,e=>s.isCallExpression(e)?o.Found:s.isBlock(e)?o.Abort:o.Continue)},a.findCurrentCallArgIdx=function(e,t,n){let o=e.arguments.map(e=>e===t).indexOf(!0);if(!(0<=o)){if(!(e.arguments.pos<=n&&n<e.end))return-1;if(0===e.arguments.length)return 0;o=0;for(var r of e.arguments){if(!(r.end<=n))break;o++}e.arguments.hasTrailingComma||(o=Math.max(0,o-1))}return o},(e=o=a.TraverseCheck||(a.TraverseCheck={}))[e.Found=0]="Found",e[e.Continue=1]="Continue",e[e.Abort=2]="Abort",a.traverseUp=r,a.enumMemberToQName=function(e,t){if(t.name.kind===a.SK.Identifier)return e.getFullyQualifiedName(e.getSymbolAtLocation(t.name))},a.findInnerMostNodeAtPosition=function e(t,n){for(var o of t.getChildren())if(!(o.kind>=s.SyntaxKind.FirstPunctuation&&o.kind<=s.SyntaxKind.LastPunctuation)){var r=o.getStart(),i=o.getEnd();if(r<=n&&n<i)return e(o,n)}return t&&t.kind===a.SK.SourceFile?null:t},a.getParentNamespace=i,a.getCurrentNamespaces=function e(t){var n;return(t=t&&i(t))?(n=t.name.getText(),[...e(t.parent),n]):[]},a.getEnumMembers=function(e,t){if(e&&t.symbol&&t.symbol.declarations&&t.symbol.declarations.length)for(let e=0;e<t.symbol.declarations.length;e++){var n=t.symbol.declarations[e];if(n.kind===a.SK.EnumDeclaration)return n.members}},a.isExported=function(e){if(e.modifiers&&e.modifiers.some(e=>e.kind==a.SK.PrivateKeyword||e.kind==a.SK.ProtectedKeyword))return!1;let t=e.symbol;if(!t)return!1;for(;;){var n=t.parent;if(!n)break;t=n}let o=t.valueDeclaration||t.declarations[0];return!(!(o=o.kind==a.SK.VariableDeclaration?o.parent.parent:o).parent||o.parent.kind!=a.SK.SourceFile)},a.isReadonly=function(e){return e.modifiers&&e.modifiers.some(e=>e.kind==a.SK.ReadonlyKeyword)}}}(ts=ts||{}),function(e){var u=e.pxtc||(e.pxtc={});{var a=u.vm||(u.vm={});const d=u.assembler.emitErr,n=d("opcode name doesn't match","<name>");class r extends u.assembler.Instruction{constructor(e,t,n){super(e,t,n,n,!1)}emit(r){var t=r.words;if(t[0]!=this.name)return n;let i=this.opcode,s=1,a=[],l=null,c=null;for(let e=0;e<this.args.length;++e){let n=this.args[e],o=t[s++];if("$"==n[0]){let e=this.ei.encoders[n],t=null;if(e.isImmediate||e.isLabel){if(!o)return d("expecting number",o);if(o=o.replace(/^#/,""),null==(t=r.bin.parseOneInt(o)))return d("expecting number",o)}else u.oops();if(null==t)return d("didn't understand it",o);u.U.assert(0<=t),11111!=t&&"$lbl"==n&&(t=t-(r.bin.location()+2)>>1),a.push(t);const s=t;if(null==(t=e.encode(t)))return d(`argument (${s}) out of range or mis-aligned`,o);"$i3"==n?t=c|t<<6:"$i5"==n&&(t=c|t<<8),"$i2"==n||"$i4"==n?c=t:"$rt"==n?(11111!=t&&4096<t&&u.U.oops("label: "+o+" v="+t),i=32768|t,"callrt.p"==this.name&&(i|=8192)):r.isLong||t<0||255<t?(r.isLong=!0,"$lbl"==n&&--t,i=t>>9&65535|49152,l=this.opcode+(t<<7)&65535):i=this.opcode+(t<<7)&65535}else if(n!=o)return d("expecting "+n,o)}return t[s]?d("trailing tokens",t[s]):{stack:0,opcode:i,opcode2:l,numArgs:a,labelName:r.bin.normalizeExternalLabel(null)}}}a.VmInstruction=r,a.withPush={},a.opcodes=["stloc     $i1","ldloc     $i1","stfld     $i4, $i5","ldfld     $i4, $i5","newobj    $i1","ldcap     $i1","bitconv   $i1","stglb     $i1","ldglb     $i1","ldint     $i1","ldintneg  $i1","ldspecial $i1","ldnumber  $i1","ldlit     $i1","checkinst $i1","mapget","mapset","ret       $i2, $i3","popmany   $i1","pushmany  $i1","callind   $i1","callproc  $i1","calliface $i2, $i3","callget   $i1","callset   $i1","jmp       $lbl","jmpnz     $lbl","jmpz      $lbl","try       $lbl","push","pop"];class t extends u.assembler.AbstractProcessor{constructor(e){super(),this.addEnc("$i1","#0-8388607",e=>this.inrange(8388607,e,e)),this.addEnc("$i2","#0-31",e=>this.inrange(31,e,e)),this.addEnc("$i3","#0-262143",e=>this.inrange(262143,e,e)),this.addEnc("$i4","#0-255",e=>this.inrange(255,e,e)),this.addEnc("$i5","#0-32767",e=>this.inrange(32767,e,e)),this.addEnc("$lbl","LABEL",e=>this.inminmax(-4194304,4194303,e,e)).isLabel=!0;let t=1,n=this.addEnc("$rt","SHIM",e=>this.inrange(8388607,e,e)).isLabel=!0;for(var o of a.opcodes.concat(["callrt $rt"])){let e=new r(this,o,t);this.instructions[e.name]=[e],!n&&"callrt"!=e.name||(a.withPush[e.name]=!0,e=new r(this,o.replace(/\w+/,e=>e+".p"),64|t),this.instructions[e.name]=[e]),"mapset.p"==e.name&&(n=!1),t++}}testAssembler(){}postProcessRelAddress(e,t){return t}postProcessAbsAddress(e,t){return t}getAddressFromLabel(e,t,n,o=0){n=e.lookupLabel(n);return null==n?null:t.is32bit?n:n-(e.pc()+2)}toFnPtr(e,t){return e}wordSize(){return 8}peephole(e,t,n){let o=e.getOp(),r="";var i,s;t&&(i=o+";"+(r=t.getOp()),(s=this.file.peepCounts)[i]=(s[i]||0)+1),"stloc"==o&&"ldloc"==r&&e.numArgs[0]==t.numArgs[0]?(/LAST/.test(t.text)&&e.update(""),t.update("")):a.withPush[o]&&"push"==r&&(e.update(e.text.replace(/\w+/,e=>e+".p")),t.update(""))}}a.VmProcessor=t}}(ts=ts||{}),function(e){var t;e=e.py||(e.py={}),(t=e.VarModifier||(e.VarModifier={}))[t.NonLocal=0]="NonLocal",t[t.Global=1]="Global",e.isIndex=function(e){return"Index"===e.kind},e.isSubscript=function(e){return"Subscript"===e.kind}}(pxt=pxt||{}),function(F){{var U=F.py||(F.py={}),H=F.blocks;let A,I,b,r,D,N,w,O,R,P,_=0,t=0,L=0,i="???";function h(e){return null==e}function ee(e){return null!=e}function d(e){return F.tickEvent("python.todo.statement",{kind:e.kind}),H.mkStmt(H.mkText("TODO: "+e.kind))}function o(e){return F.tickEvent("python.todo.expression",{kind:e.kind}),H.mkText(" {TODO: "+e.kind+"} ")}const J=a({primType:"string"}),g=a({primType:"number"}),Xe=a({primType:"boolean"}),$e=a({primType:"void"}),Q=a({primType:"any"});let M;const Ye={str:J,string:J,number:g,bool:Xe,void:$e,any:Q};function te(e){e=F.U.flatClone(e);return delete e.pyAST,delete e.pyInstanceType,delete e.pyRetType,delete e.pySymbolType,delete e.moduleTypeMarker,delete e.declared,e.parameters&&(e.parameters=e.parameters.map(e=>(delete(e=F.U.flatClone(e)).pyType,e))),e}function V(e){if("("==e[0]&&F.U.endsWith(e,")"))return V(e.slice(1,-1));var t=e.indexOf(" => ");if(0<t){const F=e.slice(t+4);if(-1==F.indexOf(")[]")){const n=V(F),o=e.slice(1,t-1);return ne(n,(o?o.split(/, /):[]).map(e=>V(e.replace(/\w+\??: /,""))))}}if(F.U.endsWith(e,"[]"))return T(V(e.slice(0,-2)));if("_py.Array"===e)return T(Q);const n=F.U.lookup(Ye,e);if(n)return n;if(e&&!isNaN(e))return g;if("T"==e||"U"==e)return a({primType:"'"+e});if(0<=e.indexOf("|"))return a({primType:"@union",typeArgs:e.split("|").map(e=>e.trim()).map(V)});let o=s(e+"@type")||s(e);return o?7==o.kind?g:8==o.kind||9==o.kind?o.pyInstanceType||a({classType:o}):6==o.kind?g:(W(null,9502,F.U.lf("'{0}' is not a type near '{1}'",e,i||"???")),a({primType:e})):(W(null,9501,F.U.lf("unknown type '{0}' near '{1}'",e,i||"???")),a({primType:e}))}function m(e){if(!e.pySymbolType){if(i=e.pyQName,e.parameters){pxtc.service.isTaggedTemplate(e)&&(e.parameters=[{name:"literal",description:"",type:"string",options:{}}]);for(var t of e.parameters)t.pyType||(t.pyType=V(t.type))}var n=e.pyRetType;if(Ee(e)?e.pyRetType=a({moduleType:e}):e.retType?e.pyRetType=V(e.retType):e.pyRetType||(F.U.oops("no type for: "+e.pyQName),e.pyRetType=a({})),n&&G(e.pyAST,n,e.pyRetType),3==e.kind||1==e.kind){n=e.parameters.map(e=>e.pyType);if(n.some(h))return W(null,9526,F.U.lf("function symbol is missing parameter types near '{1}'",i||"???")),a({});e.pySymbolType=ne(e.pyRetType,n.filter(ee))}else e.pySymbolType=e.pyRetType;8!=e.kind&&9!=e.kind||(e.pyInstanceType=a({classType:e})),i=void 0}return e.pySymbolType}function s(e){return F.U.lookup(I,e)||F.U.lookup(A,e)}function v(e){if(e)return(e=s(e))&&m(e),e}function a(e={}){e=F.U.flatClone(e);return e.tid=++t,e}function T(e){return a({primType:"@array",typeArgs:[e]})}function ne(e,t){return a({primType:"@fn"+t.length,typeArgs:[e].concat(t)})}function oe(e){return F.U.startsWith(e.primType||"","@fn")}function re(e){return e.primType&&!F.U.startsWith(e.primType,"@")}function ie(e){return F.U.startsWith(e.primType||"","@union")}function E(){return b.currFun||b.currClass||b.currModule}function se(){let e=E();for(;e&&e.parent;)e=e.parent;return e}function ae(){return"main"==b.currModule.name&&!b.currFun&&!b.currClass}function f(t,e,n,o){let r=(o=o||E()).vars[t],i=null==r?void 0:r.symbol;if(!i){let e=y(o);e&&(e+=".");var s=e+t;i=!_e(o)||n!==U.VarModifier.Global&&n!==U.VarModifier.NonLocal?_e(o)?he(4,t):l(4,s):l(4,t),r={symbol:i,modifier:n},o.vars[t]=r}for(var a of Object.keys(e))i[a]=e[a];return r}function S(e){return e.unifyWith?(e.unifyWith=S(e.unifyWith),e.unifyWith):e}function y(e){let t=e,n="";return t.parent&&"FunctionDef"!==t.parent.kind&&"AsyncFunctionDef"!==t.parent.kind&&((n=y(t.parent))?n+=".":n=""),"Module"==e.kind&&"main"==e.name?"":e.name?n+e.name:n+"?"+e.kind}function le(e){var t,n=F.U.lookup(Ze,e);if(n)return n;for(t of F.U.values(b.currModule.vars)){var o=t.symbol;if(o.isImport){if(o.expandsTo==e)return o.pyName||W(null,9553,lf("missing pyName")),o.pyName;if(o.isImport&&F.U.startsWith(e,(o.expandsTo||"")+"."))return o.pyName+e.slice(o.expandsTo.length)}}return e}function C(e){return(e=S(e)).primType?e.typeArgs&&"@array"==e.primType?C(e.typeArgs[0])+"[]":oe(e)&&e.typeArgs?"("+e.typeArgs.slice(1).map(e=>"_: "+C(e)).join(", ")+") => "+C(e.typeArgs[0]):ie(e)&&e.typeArgs?e.typeArgs.map(C).join(" | "):e.primType+"":e.classType&&e.classType.pyQName?le(e.classType.pyQName)+"":e.moduleType&&e.moduleType.pyQName?le(e.moduleType.pyQName)+"":"any"}function W(e,t,n){var o;N.push((e=e,o=pxtc.DiagnosticCategory.Error,t=t,n=n,(e=e||r)&&b&&b.currModule?{fileName:D,start:e.startPos,length:e.endPos-e.startPos,line:void 0,column:void 0,code:t,category:o,messageText:n}:{fileName:D,start:0,length:0,line:void 0,column:void 0,code:t,category:o,messageText:n}))}function x(e){return e.primType||e.classType||(e.moduleType?(e.moduleType.moduleTypeMarker||(e.moduleType.moduleTypeMarker={}),e.moduleType.moduleTypeMarker):null)}function ce(e){return!x(S(e))}function ue(e,t,n){(t=S(t)).classType!=n&&(ce(t)?t.classType=n:G(e,t,(m(e=n),e.pyInstanceType||W(null,9527,F.U.lf("Instance type symbol '{0}' is missing pyInstanceType",e)),e.pyInstanceType)))}function B(e,t){G(e,K(e),t)}function G(t,n,o){if(n!==o&&(n=S(n))!==(o=S(o))&&!ge(n)&&!ge(o)){if("any"===n.primType)return n.unifyWith=o;var e,r,i=x(n),s=x(o);if(i&&s)if(i===s){if(n.unifyWith=o,n.typeArgs&&o.typeArgs)for(let e=0;e<Math.min(n.typeArgs.length,o.typeArgs.length);++e)G(t,n.typeArgs[e],o.typeArgs[e]);n.unifyWith=o}else e=n,r=o,W(t,9500,F.U.lf("types not compatible: {0} and {1}",C(e),C(r)));else i&&!s?G(t,o,n):(L++,n.unifyWith=o)}}function de(e,t){var n=S(K(e)),t=S(t);!function e(t,n){var o=S(t),t=S(n);if(o===t)return 1;const r=x(o),i=x(t);if(r===i)return 1;if(r&&i){if(pe(r)&&pe(i)&&r.extendsTypes&&r.extendsTypes.length&&r.extendsTypes.some(e=>e===i.qName))return 1;if(ie(t))for(var s of t.typeArgs||[])if(e(o,s))return 1}}(n,t)&&(oe(n)||oe(t)||re(n)||re(t))&&G(e,n,t)}function pe(e){return!(null==(e=e)||!e.name)}function ge(e){return null!=(e=null==e?void 0:e.primType)&&e.startsWith("'")}function he(e,t){var n=/(.*)\.(.*)/.exec(t),o=n?n[2]:t;return{kind:e,name:o,pyName:o,qName:t,pyQName:t,namespace:n?n[1]:"",attributes:{},pyRetType:a()}}function l(e,t){let n=I[t];return n?n.kind=e:((n=he(e,t)).pyQName||W(null,9527,F.U.lf("Symbol '{0}' is missing pyQName",t)),I[n.pyQName]=n),n}function _e(e){let t=e;for(;t;){if("FunctionDef"==t.kind)return 1;t=t.parent}}function me(t,n,o){if(!n.symInfo){let e=y(n);F.U.endsWith(e,".__init__")&&(e=e.slice(0,-9)+".__constructor"),_e(o=o||E())?n.symInfo=he(t,e):n.symInfo=l(t,e);t=n.symInfo;t.pyAST=n,t.pyName||W(null,9528,F.U.lf("Symbol '{0}' is missing pyName",t.qName||t.name)),o.vars[t.pyName]={symbol:t}}return n.symInfo}function fe(e){let t=e.symInfo.qName;return F.U.values(I).filter(e=>e.namespace==t&&2==e.kind)}function k(e,t,n=!1,o=!1){var r=e.pyQName+"."+t,i=v(r);if(i)return i;if(!o)for(var s of e.extendsTypes||[]){s=v(s);if(s){s==e&&F.U.userError("field lookup loop on: "+s.qName+" / "+t);s=k(s,t,!0);if(s)return s}}return!n&&e.pyAST&&"ClassDef"==e.pyAST.kind?((i=l(2,r)).isInstance=!0,i):null}function ye(e,t,n=!1){const o=K(e),r=[(i=S(o)).classType,...ke(i.primType),i.moduleType].filter(ee);var i,s,a;for(s of r){var l=k(s,t,n);if(l)return o.moduleType?l.isInstance&&W(null,9505,F.U.lf("the field '{0}' of '{1}' is not static",t,s.pyQName)):(l.isInstance||W(null,9504,F.U.lf("the field '{0}' of '{1}' is static",t,s.pyQName)),($(a=e,"super")&&0==a.args.length||"Name"==(a=e).kind&&"self"==a.id&&(b.currClass||W(null,9529,F.U.lf("no class context found for {0}",l.pyQName)),l.namespace!=b.currClass.symInfo.qName))&&(l.isProtected=!0)),l}return null}function ke(e){let t=[];return"@array"==e?t=[s("_py.Array"),s("Array")]:"string"==e&&(t=[s("_py.String"),s("String")]),t.filter(e=>!!e)}function be(e){let t=E(),n=F.U.lookup(t.vars,e);if(n)return n;for(;t;){var o=F.U.lookup(t.vars,e);if(o)return o;for(;(t=t.parent)&&"ClassDef"==t.kind;);}return null}function ve(e){if(!e)return null;const t=e.indexOf(".");if(0<t){const n=be(e.slice(0,t)),o=null==n?void 0:n.symbol;o&&o.pyQName!=o.pyName&&(e=o.pyQName+e.slice(t))}else{const t=be(e);if(t)return t}let n=v(e);return n?{symbol:n}:void 0}function Te(e){return null==(e=ve(e))?void 0:e.symbol}function K(e){return e.tsType?S(e.tsType):(e.tsType=a(),e.tsType)}function Ee(e){if(e)switch(e.kind){case 5:case 9:case 8:case 6:return 1;default:return}}function Se(e){var t=F.U.flatClone(b);let n;try{n=e()}finally{b=t}return n}function Ce(e,t){return 0==t.length?H.mkText(""):H.mkGroup([H.mkText("/* TODO: "+e+" "),H.mkGroup(t),H.mkText(" */"),H.mkNewLine()])}function xe(e){var t=Y(e.value);return e.arg?H.mkInfix(H.mkText(e.arg),"=",t):H.mkGroup([H.mkText("**"),t])}function Be(e){if(!e)return a();var t=z(e);if(t){var n=s(t+"@type")||s(t);if(n){if(m(n),6==n.kind)return g;if(n.pyInstanceType)return n.pyInstanceType}else if(Ye[t])return Ye[t];W(e,9506,F.U.lf("cannot find type '{0}'",t))}else if(U.isSubscript(e)&&"List"===z(e.value)&&U.isIndex(e.slice))return T(Be(e.slice.value));return W(e,9507,F.U.lf("invalid type syntax")),a({})}const qe={Sub:1,Div:1,Pow:1,LShift:1,RShift:1,BitOr:1,BitXor:1,BitAnd:1,FloorDiv:1,Mult:1},Je={Add:"+",Sub:"-",Mult:"*",MatMult:"Math.matrixMult",Div:"/",Mod:"%",Pow:"**",LShift:"<<",RShift:">>",BitOr:"|",BitXor:"^",BitAnd:"&",FloorDiv:"Math.idiv",And:"&&",Or:"||",Eq:"==",NotEq:"!=",Lt:"<",LtE:"<=",Gt:">",GtE:">=",Is:"===",IsNot:"!==",In:"py.In",NotIn:"py.NotIn"},Qe={Invert:"~",Not:"!",UAdd:"P+",USub:"P-"},Ze={"adafruit_bus_device.i2c_device.I2CDevice":"pins.I2CDevice"};function c(e){b.blockDepth++;e=H.mkBlock(e.map(q));return b.blockDepth--,e}function Ae(e){e.vars||(e.vars={},e.parent=E(),e.blockDepth=b.blockDepth)}function Ie(e,t=!1){return"any"===C(e)?t?H.mkText(": any"):H.mkText(""):H.mkText(": "+C(e))}function e(e,t){try{return Se(t)}catch(t){return console.log(t),H.mkStmt(Ce("conversion failed for "+(e.name||e.kind),[]))}}function De(e){if(e&&e.pyAST&&"FunctionDef"==e.pyAST.kind)return(e=e.pyAST).callers&&1==e.callers.length&&!e.callers[0].inCalledPosition}function Ne(g,h=!1){return e(g,()=>{var e=!!b.currClass&&!b.currFun,t=ae(),n=!!b.currFun,o=(Ae(g),Te(y(g))),r=me(e?1:3,g);if(!h&&(o&&o.declared===_&&W(g,9520,lf("Duplicate function declaration")),r.declared=_,De(r)))return H.mkText("");e&&(r.isInstance=!0),b.currFun=g;let i="",s=g.name;var o=[Ce("decorators",g.decorator_list.filter(e=>"property"==z(e)?!(i="get"):"Attribute"!=e.kind||"setter"!=e.attr||"Name"!=e.value.kind||(s=e.value.id,!(i="set"))).map(Y))],a=(1<=g.body.length&&"Raise"==g.body[0].kind&&(g.alwaysThrows=!0),e?(b.currClass||W(g,9531,lf("method '{0}' is missing current class context",r.pyQName)),r.pyRetType||W(g,9532,lf("method '{0}' is missing a return type",r.pyQName)),"__init__"==g.name?(o.push(H.mkText("constructor")),ue(g,r.pyRetType,b.currClass.symInfo)):("__get__"!=s&&"__set__"!=s||(a=null==(a=g.vars.value)?void 0:a.symbol,"__set__"==s&&a&&(d=k(b.currClass.symInfo,"__get__"))&&d.pyAST&&"FunctionDef"==d.pyAST.kind&&G(g,a.pyRetType,d.pyRetType),s=s.replace(/_/g,"")),i=i||("_"==s[0]?r.isProtected?"protected":"private":"public"),o.push(H.mkText(i+" "),X(s)))):(F.U.assert(!i),"_"==g.name[0]||t||h||n?o.push(H.mkText("function "),X(s)):o.push(H.mkText("export function "),X(s))),g.returns?Be(g.returns):r.pyRetType),l=(o.push(function(r,e){const i=r.args;i.kwonlyargs.length&&W(r,9517,F.U.lf("keyword-only arguments not supported yet"));var t=i.args.slice();if(e?("self"!=t[0].arg&&W(r,9518,F.U.lf("first argument of method has to be called 'self'")),t.shift()):t.some(e=>"self"==e.arg)&&W(r,9519,F.U.lf("non-methods cannot have an argument called 'self'")),!r.symInfo.parameters){let o=i.defaults.length-t.length;r.symInfo.parameters=t.map(e=>{e.annotation||W(r,9519,F.U.lf("Arg '{0}' missing annotation",e.arg));let t=Be(e.annotation),n="";return 0<=o&&(n=H.flattenNode([Y(i.defaults[o])]).output,G(e,t,K(i.defaults[o]))),o++,{name:e.arg,description:"",type:"",initializer:n,default:n,pyType:t}})}e=r.symInfo.parameters.map(e=>{var t=f(e.name,{isParam:!0}),t=null==t?void 0:t.symbol,t=(e.pyType||W(r,9530,F.U.lf("parameter '{0}' missing pyType",e.name)),G(r,m(t),e.pyType),[X(e.name),Ie(e.pyType,!0)]);return e.default&&t.push(H.mkText(" = "+e.default)),H.mkGroup(t)});return i.vararg&&e.push(H.mkText("TODO *"+i.vararg.arg)),i.kwarg&&e.push(H.mkText("TODO **"+i.kwarg.arg)),H.H.mkParenthesizedExpression(H.mkCommaSep(e))}(g,e),a&&S(a)!=$e?Ie(a):H.mkText("")),m(r),g.body.map(q));if("__init__"==g.name){b.currClass||W(g,9533,lf("__init__ method '{0}' is missing current class context",r.pyQName));for(var c of fe(b.currClass)){var u=c.pyAST;u&&u.value&&l.push(H.mkStmt(H.mkText(`this.${j(c.pyName)} = `),Y(u.value)))}}var d=We(g);o.push(H.mkBlock(d.concat(l)));let p=H.mkGroup(o);return h?o[o.length-1].noFinalNewline=!0:p=H.mkStmt(p),p})}const et={FunctionDef:e=>Ne(e),ClassDef:o=>e(o,()=>{Ae(o);var e=me(8,o),t=(F.U.assert(!b.currClass),ae()),t=((b.currClass=o).isNamespace=o.decorator_list.some(e=>"Name"==e.kind&&"namespace"==e.id),o.isNamespace?[H.mkText("namespace "),X(o.name)]:[Ce("keywords",o.keywords.map(xe)),Ce("decorators",o.decorator_list.map(Y)),H.mkText(t?"class ":"export class "),X(o.name)]),e=(!o.isNamespace&&0<o.bases.length&&("Enum"==z(o.bases[0])?o.isEnum=!0:(t.push(H.mkText(" extends ")),t.push(H.mkCommaSep(o.bases.map(Y))),(n=(n=Te(p(o.bases[0])))&&n.pyAST&&"ClassDef"==n.pyAST.kind?n.pyAST:null)&&(o.baseClass=n,e.extendsTypes=[n.symInfo.pyQName]))),c(o.body)),n=(t.push(e),fe(o).filter(e=>2==e.kind&&e.isInstance).map(e=>(e.pyName&&e.pyRetType||W(o,9535,lf("field definition missing py name or ret type",e.qName)),e)).map(e=>H.mkStmt(e.pyName&&"_"==e.pyName[0]?e.isProtected?H.mkText("protected "):H.mkText("private "):H.mkText(""),X(e.pyName),Ie(e.pyRetType))));return e.children=n.concat(e.children),H.mkStmt(H.mkGroup(t))}),Return:e=>{var t;return e.value?((t=b.currFun)&&(t.symInfo.pyRetType||W(e,9536,lf("function '{0}' missing return type",t.symInfo.pyQName)),B(e.value,t.symInfo.pyRetType)),H.mkStmt(H.mkText("return "),Y(e.value))):H.mkStmt(H.mkText("return"))},AugAssign:e=>{var t=Je[e.op];return 3<t.length?H.mkStmt(H.mkInfix(Y(e.target),"=",H.H.mkCall(t,[Y(e.target),Y(e.value)]))):H.mkStmt(Y(e.target),H.mkText(" "+t+"= "),Y(e.value))},Assign:e=>n(e),AnnAssign:e=>n(e),For:e=>{var t,n,o,r,i;if(F.U.assert(0==e.orelse.length),e.target.forTargetEndPos=e.endPos,$(e.iter,"range"))return t=e.iter,n=Y(e.target),o=X(p(e.target)),B(e.target,g),r=1==t.args.length?H.mkText("0"):Y(t.args[0]),i=Y(t.args[1==t.args.length?0:1]),H.mkStmt(H.mkText("for ("),H.mkInfix(n,"=",r),H.mkText("; "),H.mkInfix(o,"<",i),H.mkText("; "),3<=t.args.length?H.mkInfix(o,"+=",Y(t.args[2])):H.mkPostfix([o],"++"),H.mkText(")"),c(e.body));if(1<_){const F=K(e.target);B(e.iter,K(e.iter)==J?F:T(F))}return H.mkStmt(H.mkText("for ("),Y(e.target),H.mkText(" of "),Y(e.iter),H.mkText(")"),c(e.body))},While:e=>(F.U.assert(0==e.orelse.length),H.mkStmt(H.mkText("while ("),Y(e.test),H.mkText(")"),c(e.body))),If:e=>{let n=e=>{var t=[H.mkText("if ("),Y(e.test),H.mkText(")"),c(e.body)];return e.orelse.length&&(t[t.length-1].noFinalNewline=!0,1==e.orelse.length&&"If"==e.orelse[0].kind?(t.push(H.mkText(" else ")),F.U.pushRange(t,n(e.orelse[0]))):t.push(H.mkText(" else"),c(e.orelse))),t};return H.mkStmt(H.mkGroup(n(e)))},With:o=>{if(1==o.items.length&&(r="pins.I2CDevice",(i=K(o.items[0].context_expr)).classType&&i.classType.pyQName==r||C(i)==r)){let e=o.items[0],t=[],n=Y(e.context_expr);return e.optional_vars&&(i=z(e.optional_vars))&&(r=null==(r=f(i,{isLocal:!0}))?void 0:r.symbol,i=j(i),t.push(H.mkStmt(H.mkText("const "+i+" = "),n)),r.pyRetType||W(o,9537,lf("function '{0}' missing return type",r.pyQName)),B(e.context_expr,r.pyRetType),n=H.mkText(i)),t.push(H.mkStmt(H.mkInfix(n,".",H.mkText("begin()")))),F.U.pushRange(t,o.body.map(q)),t.push(H.mkStmt(H.mkInfix(n,".",H.mkText("end()")))),H.mkGroup(t)}var r,i;let s=[],e=o.items.map((e,t)=>{let n="with"+t;return e.optional_vars&&(f(t=p(e.optional_vars),{isLocal:!0}),n=j(t)),s.push(H.mkStmt(H.mkText(n+".end()"))),H.mkStmt(H.mkText("const "+n+" = "),H.mkInfix(Y(e.context_expr),".",H.mkText("begin()")))});return F.U.pushRange(e,o.body.map(q)),F.U.pushRange(e,s),H.mkBlock(e)},Raise:e=>{let t,n=e.exc||e.cause;return n?(t=(t=n&&"Call"==n.kind&&1==n.args.length?Y(n.args[0]):t)||H.mkGroup([H.mkText("`"),Y(n),H.mkText("`")]),H.mkStmt(H.H.mkCall("control.fail",[t]))):H.mkStmt(H.mkText("throw"))},Assert:e=>(e.msg||W(e,9537,lf("assert missing message")),H.mkStmt(H.H.mkCall("control.assert",[e.test,e.msg].filter(e=>!!e).map(Y)))),Import:e=>{for(var t of e.names)t.asname&&f(t.asname,{expandsTo:t.name}),n=e,t=t.name,o=void 0,o=v(t),o||W(n,9503,F.U.lf("No module named '{0}'",t));var n,o;return H.mkText("")},ImportFrom:e=>{var t,n,o,r,i=[];for(t of e.names)"*"==t.name?(e.module||W(e,9538,lf("import missing module name")),f(e.module,{isImportStar:!0})):(o=v(n=e.module+"."+t.name),r=t.asname||t.name,Ee(o)?(f(r,{isImport:o,expandsTo:n}),i.push(H.mkStmt(H.mkText(`import ${j(r)} = `+n)))):f(r,{expandsTo:n}));return H.mkGroup(i)},ExprStmt:e=>{return"Str"==e.value.kind?((t=e.value.s).trim().split(/\n/).length<=1?t=t.trim():t+="\n",H.mkStmt(H.mkText("/** "+t+" */"))):H.mkStmt(Y(e.value));var t},Pass:e=>H.mkStmt(H.mkText("")),Break:e=>H.mkStmt(H.mkText("break")),Continue:e=>H.mkStmt(H.mkText("continue")),Delete:e=>(W(e,9550,F.U.lf("delete statements are unsupported")),d(e)),Try:e=>{var t,n=[H.mkText("try"),c(e.body.concat(e.orelse))];for(t of e.handlers)n.push(H.mkText("catch ("),t.name?X(t.name):H.mkText("_")),t.type&&n.push(H.mkText("/* instanceof "),Y(t.type),H.mkText(" */")),n.push(H.mkText(")"),c(t.body));return e.finalbody.length&&n.push(H.mkText("finally"),c(e.finalbody)),H.mkStmt(H.mkGroup(n))},AsyncFunctionDef:e=>(W(e,9551,F.U.lf("async function definitions are unsupported")),d(e)),AsyncFor:e=>(W(e,9552,F.U.lf("async for statements are unsupported")),d(e)),AsyncWith:e=>(W(e,9553,F.U.lf("async with statements are unsupported")),d(e)),Global:e=>{var t=se();E();for(const H of e.names)F.U.lookup(t.vars,H)||W(e,9521,F.U.lf("No binding found for global variable")),f(H,{},U.VarModifier.Global).firstRefPos<e.startPos&&W(e,9522,F.U.lf("Variable referenced before global declaration"));return H.mkStmt(H.mkText(""))},Nonlocal:e=>{var t=se(),n=E();for(const H of e.names){var o=Ve(H,n);o&&o!==t&&o.vars[H].modifier!==U.VarModifier.Global||W(e,9523,F.U.lf("No binding found for nonlocal variable")),f(H,{},U.VarModifier.NonLocal).firstRefPos<e.startPos&&W(e,9524,F.U.lf("Variable referenced before nonlocal declaration"))}return H.mkStmt(H.mkText(""))}};function n(e){let t,n,o,r;if("Assign"===e.kind){if(1!=e.targets.length)return W(e,9553,F.U.lf("multi-target assignment statements are unsupported")),d(e);r=e.targets[0],o=e.value,t=null,n=null}else{if("AnnAssign"!==e.kind)return e;r=e.target,o=e.value||null,t=e.annotation,n=Be(t),B(r,n)}let i,s="",a=!!o&&$(o,"const"),l=z(r)||"";if(ae()||b.currClass||b.currFun||"_"==l[0]||(s="export "),l&&b.currClass&&!b.currFun){a=!(!o||!b.currClass.isNamespace);var c=k(b.currClass.symInfo,l);if(c||W(e,9544,lf("cannot get class field")),0==_)return H.mkText("/* skip for now */");c.pyRetType||W(e,9539,lf("function '{0}' missing return type",c.pyQName)),B(r,c.pyRetType),c.isInstance=!1,s=b.currClass.isNamespace?`export ${a?"const":"let"} `:"static "}if(!o)return W(e,9555,F.U.lf("unable to determine value of assignment")),d(e);if(B(r,K(o)),a)return f(p(r),{}),/^static /.test(s)||/const/.test(s)||(s+="const "),H.mkStmt(H.mkText(s),H.mkInfix(Y(r),"=",Y(o)));var u;if(!s&&"Tuple"==r.kind)return c=r,u=[H.mkText("let "),H.mkText("[")],c.elts.filter(e=>"Name"!==e.kind).length?(W(e,9556,F.U.lf("non-trivial tuple assignment unsupported")),d(e)):(e=c.elts.map(e=>e).map(function(e){return Re(e,"identifierCompletion"),K(e),Le(e),we(e,!0)}),u.push(H.mkCommaSep(e)),u.push(H.mkText("]")),H.mkStmt(H.mkInfix(H.mkGroup(u),"=",Y(o))));if("Name"===r.kind){const F=E().vars[l],e=null==F?void 0:F.symbol;e&&4===e.kind&&void 0===F.modifier&&(void 0===F.firstAssignPos||F.firstAssignPos>r.startPos)&&(F.firstAssignPos=r.startPos,F.firstAssignDepth=b.blockDepth)}if(t&&n&&("NameConstant"===o.kind&&null===o.value||"List"===o.kind&&0===o.elts.length)){const F=C(n);i=H.mkInfix(Y(r),":",H.mkText(F))}return i=i||Y(r),H.mkStmt(H.mkText(s),H.mkInfix(i,"=",Y(o)))}function we(e,t=!1){let n=e.id,o=ve(n),r=null==o?void 0:o.symbol,i=E().vars[n],s=null==i?void 0:i.symbol;return void 0===e.isdef&&(!r||4===r.kind&&r!==s?(o=b.currClass&&!b.currFun?(e.isdef=!1,f(n,{})):f(n,{isLocal:e.isdef=!0}),r=o.symbol):e.isdef=!1,e.symbolInfo=r,e.tsType||W(e,9540,lf("definition missing ts type")),r.pyRetType||W(e,9568,lf("missing py return type")),G(e,e.tsType,r.pyRetType)),e.isdef&&Ge(o,E())&&(e.isdef=!1),Me(o,e),e.isdef&&!t?H.mkGroup([H.mkText("let "),X(n)]):X(n)}function j(e){return H.isReservedWord(e)?e+"_":e}function z(e){var t;if("Name"==e.kind)return(n=null==(n=be(t=e.id))?void 0:n.symbol)&&n.expandsTo?n.expandsTo:t;if("Attribute"==e.kind){var n=z(e.value);if(n)return n+"."+e.attr}}function p(e){var t=z(e);return t||W(null,9542,lf("Cannot get name of unknown expression kind '{0}'",e.kind)),t}function X(e){return"self"==e?H.mkText("this"):H.mkText(j(e))}function $(e,t){return"Call"==e.kind&&z(e.func)===t}function u(e,t,n){t=Je[t];return F.U.assert(!!t),3<t.length?H.H.mkCall(t,[e,n]):H.mkInfix(e,t,n)}const tt={memoryview:{n:"",t:M},const:{n:"",t:g},"micropython.const":{n:"",t:g}},Z=function(){let n={};return Object.keys(pxtc.ts2PyFunNameMap).forEach(e=>{var t=pxtc.ts2PyFunNameMap[e];t&&t.n&&(e={n:e,t:function(e){switch(e){case ts.SyntaxKind.StringKeyword:return J;case ts.SyntaxKind.NumberKeyword:return g;case ts.SyntaxKind.BooleanKeyword:return Xe;case ts.SyntaxKind.VoidKeyword:return $e;case ts.SyntaxKind.AnyKeyword:return Q;default:return M}}(t.t),scale:t.scale},n[t.n]=e)}),Object.keys(tt).forEach(e=>{n[e]=tt[e]}),n}();function Oe(e){return O&&e.startPos<=O.position&&O.position<=e.endPos}function Re(e,t){100<_&&O&&null==R&&(O.type==t||"symbol"==O.type)&&Oe(e)&&(R=e,P=E())}function Pe(e,t){t&&t.pyAST&&"FunctionDef"==t.pyAST.kind&&((t=t.pyAST).callers||(t.callers=[]),t.callers.indexOf(e)<0)&&t.callers.push(e)}const nt={BoolOp:t=>{let n=Y(t.values[0]);for(let e=1;e<t.values.length;++e)n=u(n,t.op,Y(t.values[e]));return n},BinOp:t=>{var e,n,o=function(){if("Mod"!=t.op||"Str"!=t.left.kind||"Tuple"!=t.right.kind&&"List"!=t.right.kind)return null;{let e=t.left.s,r=t.right.elts,i=(r=r.slice(),[H.mkText("`")]);return e.replace(/([^%]+)|(%[\d\.]*([a-zA-Z%]))/g,(e,t,n,o)=>{return t?i.push(H.mkText(t.replace(/[`\\$]/g,e=>"\\"+e))):(t=(t=r.shift())?Y(t):H.mkText("???"),i.push(H.mkText("${"),t,H.mkText("}"))),""}),i.push(H.mkText("`")),H.mkGroup(i)}}();return o||(e=Y(t.left),n=Y(t.right),ze(t.left)&&ze(t.right)&&"Add"===t.op?H.H.extensionCall("concat",[e,n],!1):(o=u(e,t.op,n),qe[t.op]&&(B(t.left,g),B(t.right,g),t.tsType||W(t,9570,lf("binary op missing ts type")),G(t,t.tsType,g)),o))},UnaryOp:e=>{var t=Qe[e.op];return F.U.assert(!!t),H.mkInfix(null,t,Y(e.operand))},Lambda:e=>(W(e,9574,F.U.lf("lambda expressions are not supported yet")),o(e)),IfExp:e=>H.mkInfix(H.mkInfix(Y(e.test),"?",Y(e.body)),":",Y(e.orelse)),Dict:n=>{b.blockDepth++;var e=n.keys.map((e,t)=>{t=n.values[t];return void 0===e?o(n):H.mkStmt(H.mkInfix(Y(e),":",Y(t)),H.mkText(","))}),e=H.mkBlock(e);return b.blockDepth--,e},Set:e=>o(e),ListComp:e=>o(e),SetComp:e=>o(e),DictComp:e=>o(e),GeneratorExp:n=>{if(1==n.generators.length&&"Comprehension"==n.generators[0].kind){let t=n.generators[0];if(0==t.ifs.length)return Se(()=>{var e=p(t.target);return f(e,{isParam:!0}),H.mkInfix(Y(t.iter),".",H.H.mkCall("map",[H.mkGroup([X(e),H.mkText(" => "),Y(n.elt)])]))})}return o(n)},Await:e=>o(e),Yield:e=>o(e),YieldFrom:e=>o(e),Compare:t=>{var e;if(1==t.ops.length&&("In"==t.ops[0]||"NotIn"==t.ops[0]))return S(K(t.comparators[0]))==J&&B(t.left,J),e=H.mkInfix(Y(t.comparators[0]),".",H.H.mkCall("indexOf",[Y(t.left)])),H.mkInfix(e,"In"==t.ops[0]?">=":"<",H.mkText("0"));let n=u(Y(t.left),t.ops[0],Y(t.comparators[0]));for(let e=1;e<t.ops.length;++e)n=u(n,"And",u(Y(t.comparators[e-1]),t.ops[e],Y(t.comparators[e])));return n},Call:n=>{n.func.inCalledPosition=!0;let t,o,r=z(n.func),e=Te(r),i=e&&8==e.kind,s=e,a="";var l;i?s=Te(e.pyQName+".__constructor"):"Attribute"==n.func.kind&&(l=n.func,o=l.value,(t=K(o)).classType||t.primType)&&(a=l.attr,s=ye(o,a,!0))&&(a=s.name);let c=n.args.slice();if("super"==r&&0==c.length)return b.currClass&&b.currClass.baseClass&&(n.tsType||W(n,9543,lf("call expr missing ts type")),ue(n,n.tsType,b.currClass.baseClass.symInfo)),H.mkText("super");if($(n,"int")&&1===c.length&&c[0]){const F=c[0],n=Y(F),t=K(F);if("string"===t.primType)return H.mkGroup([H.mkText("parseInt"),H.mkText("("),n,H.mkText(")")]);if("number"===t.primType)return H.mkGroup([H.mkInfix(H.mkText("Math"),".",H.mkText("trunc")),H.mkText("("),n,H.mkText(")")])}if(!s){let e=F.U.lookup(Z,r);if((a=e?"":a)&&(r=C(t)+"."+a,(e=F.U.lookup(Z,r))||"@array"!=x(S(t))||(r="Array."+a,e=F.U.lookup(Z,r))),a="",e)if("."==e.n[0]&&c.length){if(o=c.shift(),t=K(o),a=e.n.slice(1),(s=ye(o,a))&&2==s.kind)return H.mkInfix(Y(o),".",H.mkText(a))}else s=v(e.n)}if($(n,"str"))return G(n,n.tsType,J),H.mkInfix(H.mkText('""'),"+",Y(n.args[0]));s||W(n,9508,F.U.lf("can't find called function '{0}'",r));let u=s?s.parameters:null,d=[];if(u){for(c.length>u.length&&W(n,9510,F.U.lf("too many arguments in call to '{0}'",s.pyQName));c.length<u.length;)c.push(null);c=c.slice(0,u.length);for(let t of n.keywords){var p=u.findIndex(e=>e.name==t.arg);p<0?W(t,9511,F.U.lf("'{0}' doesn't have argument named '{1}'",s.pyQName,t.arg)):null!=c[p]?W(t,9512,F.U.lf("argument '{0} already specified in call to '{1}'",t.arg,s.pyQName)):c[p]=t.value}for(let e=c.length-1;0<=e&&u[e].initializer&&null==c[e];e--)c.pop();for(let e=0;e<c.length;++e){var g=c[e];if(null!=g||u[e].initializer)if(g){u[e].pyType||W(n,9545,lf("formal arg missing py type"));const F=u[e].pyType;"any"!==F.primType&&de(g,F),"Name"==g.kind&&De(g.symbolInfo)?d.push(Ne(g.symbolInfo.pyAST,!0)):d.push(Y(g))}else u[e].initializer||W(n,9547,lf("formal arg missing initializer")),d.push(H.mkText(u[e].initializer));else W(n,9513,F.U.lf("missing argument '{0}' in call to '{1}'",u[e].name,s.pyQName)),d.push(H.mkText("null"))}}else s&&W(n,9509,F.U.lf("calling non-function")),d=c.map(Y);if(!R&&O&&"signature"==O.type&&Oe(n)){R=n,P=E();for(let e=O.auxResult=0;e<c.length;++e){O.auxResult=e;var h=c[e];if(!h)break;if(h.startPos<=O.position&&O.position<=h.endPos)break}}if(s){s.pyRetType||W(n,9549,lf("function missing pyRetType"));if(o&&ze(o)&&t){var _=n;var m=s;var f=t;switch(m.qName){case"Array.pop":case"Array.removeAt":case"Array.shift":case"Array.find":case"Array.get":case"Array._pickRandom":B(_,f.typeArgs[0]);break;case"Array.concat":case"Array.slice":case"Array.filter":case"Array.fill":B(_,f);break;case"Array.reduce":if("Call"===_.kind&&1<_.args.length){const m=K(_.args[1]);m&&B(_,m)}break;case"Array.map":B(_,T(Q));break;default:B(_,m.pyRetType)}}else B(n,s.pyRetType);n.symbolInfo=s;if(s.attributes.py2tsOverride){const F=function(e){var t=new RegExp(/([^\$]*\()?([^\$\(]*)\$(\d)(?:(?:(?:=(\d+|'[a-zA-Z0-9_]*'|false|true|null|undefined))|(\?)|))/,"y"),n=[];let o,r=0;for(;r=t.lastIndex,(o=t.exec(e))&&(o[1]&&n.push({kind:"text",text:o[1]}),n.push({kind:"arg",prefix:o[2],index:parseInt(o[3]),default:o[4],isOptional:!!o[5]})),o;);return null!=r?n.push({kind:"text",text:e.substr(r)}):n.push({kind:"text",text:e}),{parts:n}}(s.attributes.py2tsOverride);if(F)return a&&!o&&W(n,9550,lf("missing recv")),(l=function(e,t,n){var o=[];for(const n of e.parts)if("text"===n.kind)o.push(H.mkText(n.text));else if(t[n.index]||n.default)n.prefix&&o.push(H.mkText(n.prefix)),t[n.index]?o.push(t[n.index]):o.push(H.mkText(n.default));else if(!n.isOptional)return;return n?H.mkInfix(n,".",H.mkGroup(o)):H.mkGroup(o)}(F,d,a?Y(o):void 0))||W(n,9555,lf("buildOverride failed unexpectedly")),l}else if(s.attributes.pyHelper)return H.mkGroup([H.mkInfix(H.mkText("_py"),".",H.mkText(s.attributes.pyHelper)),H.mkText("("),H.mkCommaSep(o?[Y(o)].concat(d):d),H.mkText(")")])}let y=a?H.mkInfix(Y(o),".",H.mkText(a)):Y(n.func),k=[y,H.mkText("("),H.mkCommaSep(d),H.mkText(")")];return s&&1==d.length&&pxtc.service.isTaggedTemplate(s)&&(k=[y,(l=d[0]).type==H.NT.Prefix&&'"'==l.op[0]?H.mkText(H.backtickLit(JSON.parse(l.op))):l]),i&&(e&&e.pyQName||W(n,9551,lf("missing namedSymbol or pyQName")),k[0]=H.mkText(le(e.pyQName)),k.unshift(H.mkText("new "))),H.mkGroup(k)},Num:e=>(e.tsType||W(e,9556,lf("tsType missing")),G(e,e.tsType,g),H.mkText(e.ns)),Str:e=>(e.tsType||W(e,9557,lf("tsType missing")),G(e,e.tsType,J),H.mkText(H.stringLit(e.s))),FormattedValue:e=>o(e),JoinedStr:e=>o(e),Bytes:e=>H.mkText(`hex\`${F.U.toHex(new Uint8Array(e.s))}\``),NameConstant:e=>(null!==e.value&&(e.tsType||W(e,9558,lf("tsType missing")),G(e,e.tsType,Xe)),H.mkText(JSON.stringify(e.value))),Ellipsis:e=>o(e),Constant:e=>o(e),Attribute:e=>{let t=Y(e.value),n=K(e.value),o=ye(e.value,e.attr),r=e.attr;var i;return Re(e,"memberCompletion"),o?(e.symbolInfo=o,Pe(e,o),e.tsType&&o.pyRetType||W(e,9559,lf("tsType or pyRetType missing")),G(e,e.tsType,o.pyRetType),r=o.name):n.moduleType?(i=v(n.moduleType.pyQName+"."+e.attr))?(e.symbolInfo=i,Pe(e,i),B(e,m(i)),r=i.name):W(e,9514,F.U.lf("module '{0}' has no attribute '{1}'",n.moduleType.pyQName,e.attr)):2<_&&W(e,9515,F.U.lf("unknown object type; cannot lookup attribute '{0}'",e.attr)),H.mkInfix(t,".",H.mkText(j(r)))},Subscript:e=>{var t,n;return"Index"==e.slice.kind?(n=S(K(e.value)),ze(e.value)?B(e,n.typeArgs[0]):"string"===n.primType?B(e,n):2<_&&ce(K(e))&&B(e,Q),n=e.slice.value,2<_&&ce(K(n))&&B(n,g),H.mkGroup([Y(e.value),H.mkText("["),Y(n),H.mkText("]")])):"Slice"==e.slice.kind?(B(e,n=K(e.value)),(t=e.slice).step?(n="string"===(null==n?void 0:n.primType),H.H.mkCall(n?"_py.stringSlice":"_py.slice",[Y(e.value),t.lower?Y(t.lower):H.mkText("null"),t.upper?Y(t.upper):H.mkText("null"),Y(t.step)])):H.mkInfix(Y(e.value),".",H.H.mkCall("slice",[t.lower?Y(t.lower):H.mkText("0"),t.upper?Y(t.upper):null].filter(ee)))):o(e)},Starred:e=>H.mkGroup([H.mkText("... "),Y(e.value)]),Name:e=>{var t,n;return Re(e,"identifierCompletion"),"self"==e.id&&b.currClass?(e.tsType||W(e,9560,lf("missing tsType")),ue(e,e.tsType,b.currClass.symInfo),H.mkText("this")):(n=null==(t=Le(e))?void 0:t.symbol)&&n.isImport?X(n.name):(Me(t,e),0<=e.ctx.indexOf("Load")?n?null!=n&&n.qName?X(n.qName.replace("@type","")):(W(e,9561,lf("missing qName")),X("unknown")):X(p(e)):we(e))},List:Fe,Tuple:Fe};function Le(e){let t=ve(e.id),n=null==t?void 0:t.symbol;var o;if(t||(o=F.U.lookup(Z,e.id))&&(t=ve(o.n)),t&&n){if(e.symbolInfo=n,e.tsType||W(e,9562,lf("missing tsType")),G(e,e.tsType,m(n)),n.isImport)return t;Pe(e,n),e.forTargetEndPos&&t.forVariableEndPos!==e.forTargetEndPos&&(t.forVariableEndPos?t.lastRefPos=t.forVariableEndPos+1:t.forVariableEndPos=e.forTargetEndPos)}else 0<_&&W(e,9516,F.U.lf("name '{0}' is not defined",e.id));return t}function Me(e,t){if(e){if(e.modifier===U.VarModifier.Global){const U=se();U&&U.vars[e.symbol.name]&&(e=U.vars[e.symbol.name])}else if(e.modifier===U.VarModifier.NonLocal){const U=Ve(e.symbol.name,E());U&&(e=U.vars[e.symbol.name])}(void 0===e.firstRefPos||e.firstRefPos>t.startPos)&&(e.firstRefPos=t.startPos),(void 0===e.lastRefPos||e.lastRefPos<t.startPos)&&(e.lastRefPos=t.startPos)}}function Fe(e){return e.tsType||W(e,9563,lf("missing tsType")),G(e,e.tsType,T(e.elts[0]?K(e.elts[0]):a())),H.mkGroup([H.mkText("["),H.mkCommaSep(e.elts.map(Y)),H.mkText("]")])}function Ue(e){return e.startPos+":"+e.endPos}function Y(e){r=e;var t=nt[e.kind],t=(t||F.U.oops(e.kind+" - unknown expr"),K(e),t(e));return t.id=Ue(e),t}function q(e){r=e;var t=et[e.kind];t||F.U.oops(e.kind+" - unknown stmt");let n=(e._comments||[]).map(e=>e.value),o=t(e);return(o=n.length?H.mkGroup(n.map(e=>H.mkStmt(H.H.mkComment(e))).concat(o)):o).id=Ue(e),o}function He(e){return!e||(e.type==H.NT.Prefix&&""==e.op?e.children.every(He):e.type==H.NT.NewLine)}function Ve(e,t){var n;if(t)return(n=t.vars&&t.vars[e])&&n.modifier!=U.VarModifier.NonLocal?t:Ve(e,t.parent)}function We(e){var t,n,o=[];for(const r of Object.keys(e.vars))t=e.vars[r],Ge(t,e)&&o.push((t=null==t?void 0:t.symbol,n=void 0,n=X(t.name),t=C(m(t)),H.mkStmt(H.mkGroup([H.mkText("let "),n,H.mkText(": "+t+";")]))));return o}function Ge(e,t){return 4===e.symbol.kind&&!e.symbol.isParam&&void 0===e.modifier&&(e.lastRefPos>e.forVariableEndPos||e.firstRefPos<e.firstAssignPos||e.firstAssignDepth>t.blockDepth)&&("Module"!==t.kind||"main"!==t.name||0!==e.firstAssignDepth)}function Ke(e){var t;if(F.U.assert("Module"==e.kind),!e.tsBody)return b={currClass:void 0,currFun:void 0,currModule:t=e,blockDepth:0},D=t.tsFilename.replace(/\.ts$/,".py"),e.vars||(e.vars={}),(t=We(e).concat(e.body.map(q))).every(He)?void 0:"main"==e.name?t:[H.mkText("namespace "+e.name+" "),H.mkBlock(t)]}function je(e){_=e,N=[],L=0,r=void 0}function ze(e){e=S(K(e));return e&&"@array"===e.primType}U.py2ts=function(t){var n=[],e={},o=(N=[],F.U.assert(!!t.sourceFiles,"missing sourceFiles! Cannot convert py to ts"),t.sourceFiles.filter(e=>F.U.endsWith(e,".py")));if(0==o.length)return{outfiles:e,diagnostics:N,success:0===N.length,sourceMap:[]};let r=(e,t)=>e.substr(0,e.length-t.length),i=F.U.toDictionary(o,e=>r(e,".py")),s=t.sourceFiles.filter(e=>F.U.endsWith(e,".ts")).filter(e=>r(e,".ts")in i);F.U.assert(!!t.apisInfo,"missing apisInfo! Cannot convert py to ts"),D=o[0];var a=t.apisInfo,l=s;I={},A={};var c,u=F.U.toDictionary(l,e=>e);for(c of F.U.values(a.byQName))if(!u.hasOwnProperty(c.fileName)){let t=c;t.extendsTypes&&(t.extendsTypes=t.extendsTypes.filter(e=>e!=t.qName)),t.pyQName&&t.qName||W(null,9526,F.U.lf("Symbol '{0}' is missing qName for '{1}'",t.name,t.pyQName?"ts":"py")),A[t.pyQName]=t,A[t.qName]=t}M=V("Buffer"),w=t,O=void 0,t.generatedFiles||(t.generatedFiles=[]);for(const U of o){var d=U,p=U.replace(/\.py$/,"").replace(/.*\//,""),g=t.fileSystem[U];try{D=U;var h=F.py.lex(g),_=F.py.parse(g,d,h);F.U.pushRange(N,_.diagnostics),n.push({kind:"Module",body:_.stmts,blockDepth:0,name:p,source:g,tsFilename:d.replace(/\.py$/,".ts")})}catch(e){console.log("Parse error",e)}}var m,l=N;for(let e=0;e<5;++e){je(e);for(var f of n)try{Ke(f)}catch(e){console.log("Conv pass error",e)}if(0==L)break}je(1e3),R=void 0,O=t.syntaxInfo||{position:0,type:"symbol"};let y=[];for(m of n)try{var k=Ke(m);if(!k)continue;var b=H.flattenNode(k);function v(e){var t=e.id.split(":");if(2==t.length)return{py:{startPos:(t=t.map(e=>parseInt(e)))[0],endPos:t[1]},ts:{startPos:e.startPos,endPos:e.endPos}}}t.sourceFiles.push(m.tsFilename),t.generatedFiles.push(m.tsFilename),t.fileSystem[m.tsFilename]=b.output,e[m.tsFilename]=b.output,y=b.sourceMap.map(v).filter(e=>!!e)}catch(e){console.log("Conv error",e)}N=l.concat(N);let T={};a=F.U.values(A).concat(F.U.values(I));let E=[];var S=e=>{(e=>{switch(e.kind){case 6:case 7:case 4:case 3:case 5:return!0;case 2:case 1:return!e.isInstance;default:return!1}})(e)&&E.indexOf(e)<0&&(e=te(e),T[e.qName||e.name]=e)};for(let e=P;e;e=e.parent)e&&e.vars&&F.U.values(e.vars).map(e=>e.symbol).forEach(S);if(a.forEach(S),O&&R){if(R=R,O.beginPos=R.startPos,O.endPos=R.endPos,O.symbols||(O.symbols=[]),E=O.symbols.slice(),"memberCompletion"==O.type&&"Attribute"==R.kind){const F=K(R.value);if(F.moduleType)for(var C of a)C.isInstance||C.namespace!=F.moduleType.qName||O.symbols.push(C);else if(F.classType||F.primType){const U=F.classType||ke(F.primType).reduce((e,t)=>e||t,null);if(U){U.extendsTypes&&U.qName||W(null,9567,lf("missing extendsTypes or qName"));var x,B=U.extendsTypes.concat(U.qName);for(x of a)x.isInstance&&0<=B.indexOf(x.namespace)&&O.symbols.push(x)}}}else"identifierCompletion"==O.type?O.symbols=F.U.values(T):(o=R.symbolInfo)&&O.symbols.push(o);O.symbols=O.symbols.map(te)}l=function(){for(var e of N)U.patchPosition(e,t.fileSystem[e.fileName]);return N}();return{outfiles:e,success:0===l.length,diagnostics:l,syntaxInfo:O,globalNames:T,sourceMap:y}}}}(pxt=pxt||{}),function(I){{var D=I.py||(I.py={}),e;let v;(e=v=D.TokenType||(D.TokenType={}))[e.Id=0]="Id",e[e.Op=1]="Op",e[e.Keyword=2]="Keyword",e[e.Number=3]="Number",e[e.String=4]="String",e[e.NewLine=5]="NewLine",e[e.Comment=6]="Comment",e[e.Indent=7]="Indent",e[e.Dedent=8]="Dedent",e[e.EOF=9]="EOF",e[e.Error=10]="Error",D.keywords={False:!0,None:!0,True:!0,and:!0,as:!0,assert:!0,async:!0,await:!0,break:!0,class:!0,continue:!0,def:!0,del:!0,elif:!0,else:!0,except:!0,finally:!0,for:!0,from:!0,global:!0,if:!0,import:!0,in:!0,is:!0,lambda:!0,nonlocal:!0,not:!0,or:!0,pass:!0,raise:!0,return:!0,try:!0,while:!0,with:!0,yield:!0};let T,E,S=[];const N={"%":"Mod","&":"BitAnd","*":"Mult","**":"Pow","+":"Add","-":"Sub","/":"Div","//":"FloorDiv","<<":"LShift",">>":"RShift","@":"MatMult","^":"BitXor","|":"BitOr"},w={"!":"Bang","!=":"NotEq","(":"LParen",")":"RParen",",":"Comma","->":"Arrow",".":"Dot",":":"Colon",";":"Semicolon","<":"Lt","<=":"LtE","=":"Assign","==":"Eq",">":"Gt",">=":"GtE","[":"LSquare","]":"RSquare","{":"LBracket","}":"RBracket","~":"Invert"},O={b:/^[_0-1]$/,B:/^[_0-1]$/,o:/^[_0-7]$/,O:/^[_0-7]$/,x:/^[_0-9a-fA-F]$/,X:/^[_0-9a-fA-F]$/},R={b:2,B:2,o:8,O:8,x:16,X:16};let C,x,B=0,A=0;function o(t,n){let o=0,r=0;for(let e=0;e<t;++e)10==n.charCodeAt(e)&&(o++,r=e);return{line:o,column:t-r-1}}function i(e){switch(e.type){case v.Id:return`id(${e.value})`;case v.Op:return"'"+E[e.value]+"'";case v.Keyword:return e.value;case v.Number:return`num(${e.value})`;case v.String:return e.stringPrefix+JSON.stringify(e.value);case v.NewLine:return"<nl>";case v.Comment:return`/* ${e.value} */`;case v.Indent:return"indent"+e.value;case v.Dedent:return"dedent";case v.Error:return`[ERR: ${e.value}]`;case v.EOF:return"End of file";default:return"???"}}D.position=o,D.patchPosition=function(e,t){var n;e.start||e.length?(n=o(e.start,t),e.line=n.line,e.column=n.column,0<e.length&&(n=o(e.start+e.length-1,t),e.endLine=n.line,e.endColumn=n.column+2)):(e.start=0,e.length=0,e.line=0,e.column=0)},D.tokenToString=i,D.friendlyTokenToString=function(e,t){let n=e.endPos-e.startPos,o="";return o=(o=0==n?i(e):20<n?"`"+t.slice(e.startPos,e.startPos+20)+"`...":"`"+t.slice(e.startPos,e.endPos)+"`").replace(/\r/g,"").replace(/\n/g,"\\n").replace(/\t/g,"\\t")},D.tokensToString=function(e){let t="",n=0;for(var o of e){var r=i(o);70<n+r.length&&(n=0,t+="\n"),0!=n&&(t+=" "),t+=r,n+=r.length,o.type!=v.NewLine&&o.type!=v.Comment||(n=0,t+="\n")}return t},D.lex=function(e){if(0==S.length){var t,n,o={'"':p,"'":p,"#":m,"\\":_,".":y};T=I.U.clone(w);for(t of Object.keys(N))T[t]=N[t],T[t+"="]=N[t]+"Assign";E={};for(n of Object.keys(T))E[T[n]]=n;for(let t=0;t<128;++t)if(D.rx.isIdentifierStart(t))S[t]=s;else{var r=String.fromCharCode(t);if(o.hasOwnProperty(r))S[t]=o[r];else if(T.hasOwnProperty(r)){let e=!1,o=T[r];for(var i of Object.keys(T))i!=r&&i.startsWith(r)&&(e=!0);S[t]=e?()=>{var e,t=o,n=x.slice(A,B+1);2==n.length&&T.hasOwnProperty(n)&&(e=x.slice(A,B+2),t=3==e.length&&T.hasOwnProperty(e)?(B+=2,T[e]):(B++,T[n])),a(t)}:()=>a(o)}else D.rx.isSpace(t)?S[t]=()=>{}:13==t?S[t]=()=>{10==x.charCodeAt(B)&&B++,g()}:D.rx.isNewline(t)?S[t]=g:k(t)?S[t]=f:S[t]=b}}for(x=e,C=[],B=0,A=0,h();B<x.length;){A=B;const I=x.charCodeAt(B++);I<128?S[I]():D.rx.isIdentifierStart(I)?s():D.rx.isSpace(I)||(D.rx.isNewline(I)?g:b)()}return A=B,g(),c(v.EOF,""),C;function c(e,t,n){e={type:e,value:t,startPos:A,endPos:B,auxValue:n};return C.push(e),e}function u(e){c(v.Error,e)}function s(){for(;D.rx.isIdentifierChar(x.charCodeAt(B));)B++;var e=x.slice(A,B),t=x.charCodeAt(B);D.keywords.hasOwnProperty(e)?c(v.Keyword,e):34==t||39==t?l(e):c(v.Id,e)}function a(e){c(v.Op,e)}function d(e){switch(e){case 97:return 7;case 98:return 8;case 102:return 12;case 110:return 10;case 114:return 13;case 116:return 9;case 118:return 11;default:return 0}}function l(e){var t,n,o=x.charCodeAt(B++);let r=!1,i=(x.charCodeAt(B)==o&&x.charCodeAt(B+1)==o&&(B+=2,r=!0),0<=(e=e.toLowerCase()).indexOf("r")),s="",a="";for(;;){const v=x.charCodeAt(B++);if(v==o){if(!r)break;if(x.charCodeAt(B)==o&&x.charCodeAt(B+1)==o){B+=2;break}a+="\\"+String.fromCharCode(o),s+=String.fromCharCode(o)}else if(92==v){let e=x.charCodeAt(B++);13==e&&10==x.charCodeAt(B)&&(e=10,B++),34==e||39==e||92==e?(i&&(a+="\\",s+="\\"),a+="\\"+String.fromCharCode(e),s+=String.fromCharCode(e)):!i&&d(e)?(a+="\\"+String.fromCharCode(e),s+=String.fromCharCode(d(e))):D.rx.isNewline(e)?i&&(s+="\\"+String.fromCharCode(e),a=(a+="\\\\")+(10==e?"\\n":"\\u"+("0000"+e.toString(16)).slice(-4))):i||48!=e?i||117!=e&&120!=e?(a+="\\\\"+String.fromCharCode(e),s+="\\"+String.fromCharCode(e)):(n=117==e?4:2,t=x.slice(B,B+n),B+=n,n=parseInt(t,16),isNaN(n)&&u(I.U.lf("invalid unicode or hex escape")),a+="\\"+String.fromCharCode(e)+t,s+=String.fromCharCode(n)):(a+="\\\\x00",s+="\0")}else{if(isNaN(v)){u(I.U.lf("end of file in a string"));break}if(D.rx.isNewline(v)&&!r){u(I.U.lf("new line in a string"));break}s+=String.fromCharCode(v),a+=String.fromCharCode(v)}}var l=c(v.String,s);l.quoted=a,l.stringPrefix=e}function p(){B--,l("")}function g(){c(v.NewLine,""),h()}function h(){let e=0;for(;;){var t=x.charCodeAt(B);if(9!=t){if(32!=t)break;e++}else e=e+8&-8;B++}c(v.Indent,""+e)}function _(){var e=x.charCodeAt(B);D.rx.isNewline(e)?(B++,13==e&&10==x.charCodeAt(B)&&B++):u(I.U.lf("unexpected character after line continuation character"))}function m(){for(c(v.NewLine,"");B<x.length&&!D.rx.isNewline(x.charCodeAt(B));)B++;c(v.Comment,x.slice(A+1,B)),13==x.charCodeAt(B)&&10==x.charCodeAt(B+1)&&B++,B++,h()}function f(){let e=x[A],t="";if("0"==e){var n,o=x[B];const i=O[o];if(i){for(B++;;){const I=x[B];if(!i.test(I))break;t+=I,B++}return void(t?(n=parseInt(t,R[o]),isNaN(n)&&u(I.U.lf("invalid number")),c(v.Number,e+o+t,n)):u(I.U.lf("expecting numbers to follow 0b, 0o, 0x")))}}let r=!1,i=!1,s=!1;for(B=A;;){const I=x.charCodeAt(B);if((!s||43!=I&&45!=I)&&(s=!1,95!=I)&&!k(I))if(i||r||46!=I){if(i||69!=I&&101!=I)break;i=!0,s=!0}else r=!0;t+=String.fromCharCode(I),B++}!r&&!i&&"0"==e&&1<t.length&&!/^0+/.test(t)&&u(I.U.lf("unexpected leading zero"));o=parseFloat(t);isNaN(o)&&u(I.U.lf("invalid number")),c(v.Number,t,o)}function y(){k(x.charCodeAt(B))?f():c(v.Op,"Dot")}function k(e){return 48<=e&&e<=57}function b(){u(I.U.lf("invalid token"))}}}}(pxt=pxt||{}),function(g){{var h=g.py||(g.py={});let l,r,i,s,a,c,u,d,p;function _(){return r[a]}function m(){for(;r[a];a++){var t=r[a];if(t.type!=h.TokenType.Comment){if(0<=l&&t.type==h.TokenType.Op)switch(t.value){case"LParen":case"LSquare":case"LBracket":l++;break;case"RParen":case"RSquare":case"RBracket":l--}if(t.type!=h.TokenType.Error){if(0<l){if(t.type==h.TokenType.NewLine||t.type==h.TokenType.Indent)continue}else if(t.type==h.TokenType.Indent){if(r[a+1].type==h.TokenType.NewLine){a++;continue}var n=parseInt(t.value),e=u[u.length-1];if(n==e)continue;if(e<n)return u.push(n);{t.type=h.TokenType.Dedent;let e=0;for(;u.length;){var o=u[u.length-1];if(!(n<o)){for(o!=n&&y(9552,g.U.lf("inconsitent indentation"));1<e;)r.splice(a,0,t),e--;return}u.pop(),e++}}}return}y(9551,t.value)}else c.push(t)}}function f(){(d=_()).type!=h.TokenType.EOF&&(a++,m())}function y(e,t){t=t||g.U.lf("invalid syntax"),e=e||9550;var n=_(),t={code:e,category:pxtc.DiagnosticCategory.Error,messageText:g.U.lf("{0} near {1}",t,h.friendlyTokenToString(n,i)),fileName:s,start:n.startPos,length:n.endPos?n.endPos-n.startPos:0,line:0,column:0};h.patchPosition(t,i),p.push(t),9572!=e&&100<p.length&&g.U.userError(g.U.lf("too many parse errors"))}function t(e,t){var n=_();(n.type==e&&n.value==t||(y(9553,g.U.lf("expecting {0}",h.tokenToString({type:e,value:t,startPos:0,endPos:0}))),n.type!=h.TokenType.NewLine))&&f()}function k(){t(h.TokenType.NewLine,"")}function b(e){t(h.TokenType.Keyword,e)}function v(e){t(h.TokenType.Op,e)}function T(){var e=_();return e.type==h.TokenType.Keyword?e.value:""}function E(){var e=_();return e.type==h.TokenType.Op?e.value:""}const ve={if:function e(){var t=S("If");return f(),t.test=N(),t.body=o(),"elif"==T()?t.orelse=[e()]:t.orelse=x(),C(t)},while:function(){var e=S("While");return b("while"),e.test=N(),e.body=o(),e.orelse=x(),C(e)},for:function(){var e=S("For");return b("for"),e.target=Q(),I(e.target),b("in"),e.iter=A(),e.body=o(),e.orelse=x(),C(e)},try:function(){var e=S("Try");b("try"),e.body=o();let t=!(e.handlers=[]);for(;"except"==T();){var n=S("ExceptHandler");e.handlers.push(n),f(),"Colon"!=E()?(t&&y(),n.type=N(),"as"==T()?(f(),n.name=H()):n.name=void 0):(t=!0,n.type=void 0,n.name=void 0),n.body=o()}return e.orelse=x(),0==e.handlers.length&&e.orelse.length&&y(),"finally"==T()?(f(),e.finalbody=o()):e.finalbody=[],C(e)},with:function(){var e=S("With");return b("with"),e.items=fe(g.U.lf("with item"),j),e.body=o(),C(e)},def:function(){var e=S("FunctionDef");return b("def"),e.name=H(),v("LParen"),e.args=te(!0),v("RParen"),e.returns=void 0,"Arrow"==E()&&(f(),e.returns=N()),e.body=o(),C(e)},class:function(){var e,t=S("ClassDef");return b("class"),t.name=H(),"LParen"==E()?(e=ke(),t.bases=e.args,t.keywords=e.keywords):(t.bases=[],t.keywords=[]),t.body=o(),C(t)}},Te={del:function(){var e=S("Delete");return b("del"),e.targets=F(g.U.lf("expression"),R),C(e)},pass:function(){var e=S("Pass");return b("pass"),C(e)},break:function(){var e=S("Break");return f(),C(e)},continue:function(){var e=S("Continue");return f(),C(e)},return:function(){var e=S("Return");return f(),n()?e.value=void 0:e.value=A(),C(e)},raise:function(){var e=S("Raise");return b("raise"),e.exc=void 0,e.cause=void 0,n()||(e.exc=N(),"from"==T()&&(f(),e.cause=N())),C(e)},global:B,nonlocal:function(){var e=B();return e.kind="Nonlocal",e},import:function(){var e=S("Import");return f(),e.names=fe(g.U.lf("import name"),$),C(e)},from:function(){var e,t=S("ImportFrom");return f(),t.level=function(){let e=0;for(;;){if("Dot"==E())e+=1;else{if("Ellipsis"!=E())return e;e+=3}f()}}(),_().type==h.TokenType.Id?t.module=X():t.module=void 0,t.level||t.module||y(),b("import"),"Mult"==E()?(f(),(e=S("Alias")).name="*",t.names=[e]):"LParen"==E()?(f(),t.names=F(g.U.lf("import name"),Y),v("RParen")):t.names=F(g.U.lf("import name"),Y),C(t)},assert:function(){var e=S("Assert");return f(),e.test=N(),"Comma"==E()?(f(),e.msg=N()):e.msg=void 0,C(e)},yield:function(){var e;return _(),f(),"from"==T()?(e=S("YieldFrom")).value=N():(e=S("Yield"),n()||(e.value=A())),z(C(e))}};function o(){if(v("Colon"),_().type!=h.TokenType.NewLine)return ee();{let e;if(f(),_().type!=h.TokenType.Indent)y(9554,g.U.lf("expected an indented block")),e=D();else{var t=parseInt(_().value);for(f(),e=D();;){if(_().type==h.TokenType.Dedent){const g=isNaN(t)||parseInt(_().value)<t;if(f(),g)break}if(g.U.pushRange(e,D()),_().type==h.TokenType.EOF)break}}return e}}function S(e,t){t=t||_();return{startPos:t.startPos,endPos:t.endPos,kind:e}}function C(e){return e.endPos=d.endPos,e}function x(){return"else"==T()?(f(),o()):[]}function j(){var e=S("WithItem");return e.context_expr=N(),e.optional_vars=void 0,"as"==T()&&(f(),e.optional_vars=R()),C(e)}function z(e){var t=S("ExprStmt");return t.startPos=e.startPos,t.endPos=e.endPos,t.value=e,t}function n(){var e=_();return e.type==h.TokenType.NewLine||e.type==h.TokenType.Op&&"Semicolon"==e.value}function B(){var e=S("Global");for(f(),e.names=[];e.names.push(H()),"Comma"==E();)f();return C(e)}function X(){let e="";for(;;){if(e+=H(),"Dot"!=E())return e;e+=".",f()}}function $(){var e=S("Alias");return e.name=X(),"as"==T()?(f(),e.asname=H()):e.asname=void 0,C(e)}function Y(){var e=S("Alias");return e.name=H(),"as"==T()?(f(),e.asname=H()):e.asname=void 0,C(e)}function q(e,t){e=S("Tuple",e);return e.elts=t,C(e)}function e(e){var t=_(),e=F(g.U.lf("expression"),e),n=e[0];return 1!=e.length?q(t,e):n}function J(){return e(P)}function A(){return e(N)}function Q(){return e(R)}function I(e){"Tuple"==e.kind?e.elts.forEach(I):e.ctx="Store"}function Z(){var e=g.U.lookup(Te,T());return(e||function(){let e=_(),t=J(),n=E();if("Assign"==n){var o=S("Assign");for(o.targets=[t];;){if(f(),t=J(),"Assign"!=(n=E())){o.value=t;break}o.targets.push(t)}return o.targets.forEach(I),C(o)}var r;return"Colon"==n?((r=S("AnnAssign")).target=t,f(),r.annotation=N(),"Assign"==E()&&(f(),r.value=N()),r.simple=e.type==h.TokenType.Id&&"Name"==t.kind?1:0,I(r.target),C(r)):g.U.endsWith(n,"Assign")?((r=S("AugAssign")).target=t,r.op=n.replace("Assign",""),f(),r.value=A(),I(r.target),C(r)):"Semicolon"==n||_().type==h.TokenType.NewLine?((r=S("ExprStmt")).value=t,C(r)):(y(9555,g.U.lf("unexpected token")),f(),null)})()}function ee(){for(var e=[Z()];"Semicolon"==E()&&(f(),_().type!=h.TokenType.NewLine);)e.push(Z());return k(),e.filter(e=>!!e)}function D(){for(var e,t=p.length,n=_().type==h.TokenType.Indent,o=(n&&(f(),y(9573,g.U.lf("unexpected indent"))),[]);"MatMult"==E();)f(),o.push(be()),k();let r=T(),i=g.U.lookup(ve,T()),s=[],a=c;if(c=[],"class"==r||"def"==r?((e=i()).decorator_list=o,s=[e]):o.length?y(9556,g.U.lf("decorators not allowed here")):s=i?[i()]:ee(),a.length&&s.length&&(s[0]._comments=a),p.length>t){for(l=-1;d.type!=h.TokenType.Dedent&&d.type!=h.TokenType.NewLine&&(f(),_().type!=h.TokenType.EOF););n&&_().type===h.TokenType.Dedent&&f(),l=0}return s}function te(t){var n=S("Arguments");for(n.args=[],n.defaults=[],n.kwonlyargs=[],n.kw_defaults=[],n.vararg=void 0;;){var e=E();if("Colon"==e||"RParen"==e)break;if("Mult"==e)n.vararg&&y(9557,g.U.lf("multiple *arg")),f(),_().type==h.TokenType.Id?n.vararg=o():n.vararg=void 0;else if("Pow"==e)n.kwarg&&y(9558,g.U.lf("multiple **arg")),f(),n.kwarg=o();else{n.kwarg&&y(9559,g.U.lf("arguments after **"));let e,t=o();"Assign"==E()&&(f(),e=N()),void 0!==n.vararg&&e?(n.kwonlyargs.push(t),n.kw_defaults.push(e)):(n.args.push(t),e?n.defaults.push(e):n.defaults.length&&y(9560,g.U.lf("non-default argument follows default argument")))}if("Comma"!=E())break;f()}return n.kwarg||(n.kwarg=void 0),n.vararg||(n.vararg=void 0),C(n);function o(){var e=S("Arg");return e.arg=H(),e.annotation=void 0,t&&"Colon"==E()&&(f(),e.annotation=N()),e}}function ne(e){var t=S("Lambda");return f(),t.args=te(!1),v("Colon"),t.body=(e?ge:N)(),C(t)}function N(){var e,t;return"lambda"==T()?ne():(t=_(),e=w(),"if"==T()?((t=S("IfExp",t)).body=e,b("if"),t.test=w(),b("else"),t.orelse=N(),C(t)):e)}function oe(e,t){var n=_(),o=t();if(T()!=e)return o;var r=S("BoolOp",n);for(r.op="or"==e?"Or":"And",r.values=[o];T()==e;)b(e),r.values.push(t());return C(r)}function re(){return oe("and",ie)}function w(){return oe("or",re)}function ie(){if("not"==T())return e=S("UnaryOp"),f(),e.op="Not",e.operand=ie(),C(e);var e=_(),t=R();if(!se())return t;var n=S("Compare",e);for(n.left=t,n.comparators=[],n.ops=[];;){let e=se();if(!e)break;f(),"NotIn"==e?b("in"):"Is"==e&&"not"==T()&&(f(),e="IsNot"),n.ops.push(e),n.comparators.push(R())}return C(n)}const W={Lt:"Lt",Gt:"Gt",Eq:"Eq",GtE:"GtE",LtE:"LtE",NotEq:"NotEq",in:"In",not:"NotIn",is:"Is"};function se(){return W[E()]||W[T()]||null}const G={Invert:"Invert",Sub:"USub",Add:"UAdd"};function O(e,t){let n=_(),o=e();for(;;){var r=E();if(!(r&&0<=t.indexOf(","+r+",")))return o;var i=S("BinOp",n);i.left=o,i.op=r,f(),i.right=e(),o=i}}function ae(){return O(V,",Mult,MatMult,Div,Mod,FloorDiv,")}function le(){return O(ae,",Add,Sub,")}function ce(){return O(le,",LShift,RShift,")}function ue(){return O(ce,",BitAnd,")}function de(){return O(ue,",BitXor,")}function R(){return O(de,",BitOr,")}function pe(){let e,t=_();var n;if("Colon"!=E()&&(e=N()),"Colon"==E())return(n=S("Slice",t)).lower=e,f(),o=E(),n.upper="Colon"!=o&&"Comma"!=o&&"RSquare"!=o?N():void 0,n.step=void 0,"Colon"==E()&&(f(),"Comma"!=(o=E()))&&"RSquare"!=o&&(n.step=N()),C(n);e||y(9570,g.U.lf("unable to parse lower subscript"));var o=S("Index");return o.value=e,C(o)}function P(){var e;return"Mult"==E()?((e=S("Starred")).value=R(),C(e)):N()}function ge(){return"lambda"==T()?ne(!0):w()}function L(){for(var e=[];;){var t=S("Comprehension");for(t.is_async=0,e.push(t),b("for"),t.target=Q(),I(t.target),b("in"),t.iter=w(),t.ifs=[];"if"==T();)f(),t.ifs.push(ge());if("for"!=T())return e}}function he(){var e,t,n=_();return"Mult"==E()?(e=S("Starred"),f(),e.value=N(),C(e)):"Pow"==E()?(e=S("Keyword"),f(),e.arg=void 0,e.value=N(),C(e)):(e=N(),"Assign"==E()?("Name"!=e.kind&&y(9561,g.U.lf("invalid keyword argument; did you mean ==?")),f(),(t=S("Keyword",n)).arg=e.id||"???",t.value=N(),C(t)):"for"==T()?((t=S("GeneratorExp",n)).elt=e,t.generators=L(),C(t)):e)}function M(){var e=S("NameConstant");return e.value=null,f(),C(e)}function _e(){var t,n=_();if(n.type==h.TokenType.Id)return t=S("Name"),f(),t.id=n.value,t.ctx="Load",C(t);if(n.type==h.TokenType.Number)return t=S("Num"),f(),t.ns=n.value,t.n=n.auxValue,C(t);if(n.type!=h.TokenType.String)return n.type==h.TokenType.Keyword?"None"==n.value||"True"==n.value||"False"==n.value?(t=S("NameConstant"),f(),t.value="True"==n.value||"False"!=n.value&&null,C(t)):(y(9564,g.U.lf("expecting atom")),M()):n.type==h.TokenType.Op?"LParen"==(t=n.value)?ye("RParen","Tuple","GeneratorExp"):"LSquare"==t?ye("RSquare","List","ListComp"):("LBracket"==t?function(){let i=_();var e,t,n;return f(),"Pow"==E()?(f(),o(void 0,R())):"RBracket"==E()?(e=S("Dict",i),f(),e.keys=[],e.values=[],C(e)):"Starred"!=(e=P()).kind&&"Colon"==E()?(f(),o(e,N())):(e=e,"for"==T()?("Starred"==e.kind&&y(9562,g.U.lf("iterable unpacking cannot be used in comprehension")),(t=S("SetComp",i)).elt=e,t.generators=L()):((t=S("Set",i)).elts=[e],"Comma"==E()?(n=U("RBracket",g.U.lf("set element"),P),t.elts=[e].concat(n)):v("RBracket")),C(t));function s(){var e;return"Pow"==E()?(f(),[null,R()]):(e=N(),v("Colon"),[e,N()])}function o(e,t){var n;if("for"==T())return e||y(9563,g.U.lf("dict unpacking cannot be used in dict comprehension")),(n=S("DictComp",i)).key=e,n.value=t,n.generators=L(),C(n);var o,r=S("Dict",i);if(r.keys=[e],r.values=[t],"Comma"==E())for(o of U("RBracket",g.U.lf("dict element"),s))2<=o.length&&o[0]&&o[1]&&(r.keys.push(o[0]),r.values.push(o[1]));else v("RBracket");return C(r)}}:(y(9565,g.U.lf("unexpected operator")),M))():(y(9566,g.U.lf("unexpected token")),M());{f();let e=n.value;for(;_().type==h.TokenType.String;)e+=_().value,f();return"b"==n.stringPrefix?((t=S("Bytes",n)).s=g.U.toArray(g.U.stringToUint8Array(e)),C(t)):((t=S("Str",n)).s=e,C(t))}}function me(){var e=E();return"RParen"==e||"RSquare"==e||"RBracket"==e||"Colon"==e||"Semicolon"==e||g.U.endsWith(e,"Assign")||"in"==T()||_().type==h.TokenType.NewLine}function F(e,t){var n=[];if(me())return n;for(;;){n.push(t());var o="Comma"==E();if(o&&f(),me())return n;if(!o)return y(9567,g.U.lf("expecting {0}",e)),n}}function fe(e,t){for(var n=[];n.push(t()),"Comma"==E();)f();return n}function U(e,t,n){f();var o=[];if(E()!=e)for(;;){o.push(n());var r="Comma"==E();if(r&&f(),E()==e)break;if(!r){y(9568,g.U.lf("expecting {0}",t));break}}return v(e),o}function ye(e,t,n){var o,r=_();return f(),E()==e?(f(),(o=S(t,r)).elts=[],C(o)):(o=P(),"for"==T()?((n=S(n,r)).elt=o,n.generators=L(),v(e),C(n)):"Comma"==E()?(n=S(t,r),f(),n.elts=F(g.U.lf("expression"),P),n.elts.unshift(o),v(e),C(n)):(v(e),"List"==t?((n=S(t,r)).elts=[o],C(n)):o))}function H(){var e=_();return e.type!=h.TokenType.Id&&y(9569,g.U.lf("expecting identifier")),f(),e.value}function ke(){var e,t=[],n=[];for(e of U("RParen",g.U.lf("argument"),he))("Keyword"==e.kind?n:(n.length&&y(9570,g.U.lf("positional argument follows keyword argument")),t)).push(e);return{args:t,keywords:n}}function be(){let e=_(),t=_e();for(;;){n=e,o=t,l=a=s=i=r=void 0;i="LParen"==(l=E())?((r=S("Call",n)).func=o,a=ke(),r.args=a.args,r.keywords=a.keywords,C(r)):"LSquare"==l?(a=_(),(r=S("Subscript",n)).value=o,0==(i=U("RSquare",g.U.lf("subscript"),pe)).length?y(9571,g.U.lf("need non-empty index list")):1==i.length?r.slice=i[0]:i.every(e=>"Index"==e.kind)?((s=i[0]).value=q(a,i.map(e=>e.value)),r.slice=s):((s=S("ExtSlice",a)).dims=i,r.slice=C(s)),C(r)):"Dot"==l?((a=S("Attribute",n)).value=o,f(),a.attr=H(),C(a)):o;if(i===t)return t;t=i}var n,o,r,i,s,a,l}function V(){var e,t;return G[E()]?((t=S("UnaryOp")).op=G[E()],f(),t.operand=V(),C(t)):(_(),t=be(),"Pow"==E()?(e=S("BinOp"),f(),e.left=t,e.op="Pow",e.right=V(),C(e)):t)}const K={kind:1,id:2,n:3,s:4,func:5,key:6,elt:7,elts:8,keys:9,left:10,ops:11,comparators:12,names:13,items:14,test:15,targets:16,dims:17,context_expr:18,name:19,bases:20,type:21,inClass:22,target:23,annotation:24,simple:25,op:26,operand:27,right:28,values:29,iter:30,ifs:31,is_async:32,value:33,slice:34,attr:35,generators:36,args:37,keywords:38,body:39,handlers:40,orelse:41,finalbody:42,decorator_list:43,kwonlyargs:44,kw_defaults:45,defaults:46,arg:47},Ee={lineno:1,col_offset:1,startPos:1,endPos:1,kind:1},Se={body:1,orelse:1,finalbody:1},Ce={_comments:1,ctx:1,ns:1};h.dump=function(e,c=!1){const u=(n,o)=>{if(Array.isArray(o)){let t="";for(let e=0;e<o.length;++e)0<e&&(t+=", "),t+=u(n,o[e]);return"["+t+"]"}if(!o||!o.kind)return JSON.stringify(o);let e="",t=Object.keys(o);t.sort((e,t)=>(K[e]||100)-(K[t]||100)||g.U.strcmp(e,t));for(var r of t)if(!(g.U.lookup(Ee,r)||c&&g.U.lookup(Ce,r)))if(e&&(e+=", "),e+=r+"=",Array.isArray(o[r])&&o[r].length&&g.U.lookup(Se,r)){e+="[\n";var i,s=n+"  ";for(i of o[r])e+=s+u(s,i)+"\n";e+=n+"]"}else if("_comments"==r){e+="[\n";var a,l=n+"  ";for(a of o[r])e+=l+JSON.stringify(a.value)+"\n";e+=n+"]"}else e+=u(n,o[r]);return o.kind+"("+e+")"};let t="";for(var n of e)t+=u("",n)+"\n";return t},h.parse=function(e,t,n){i=e,s=t,r=n,l=0,a=0,c=[],u=[0],p=[];let o=[];try{if(d=r[0],m(),_().type!=h.TokenType.EOF)for(o=D();_().type!=h.TokenType.EOF;)g.U.pushRange(o,D())}catch(e){y(9572,g.U.lf("exception: {0}",e.message))}return{stmts:o,diagnostics:p}}}}(pxt=pxt||{}),function(M){function F(e,t,n){e={fileName:e.getSourceFile().fileName,start:e.getStart(),length:e.getEnd()-e.getStart(),line:void 0,column:void 0,code:t,category:pxtc.DiagnosticCategory.Error,messageText:n},t=new Error(n);throw t.pyDiagnostic=e,t}function e(t){return e=>(e||"").split("\n").map(e=>""+U.INDENT.repeat(t)+e).join("\n")}var U;(U=M.py||(M.py={})).decompileToPython=function(e,t){var n={blocksInfo:void 0,outfiles:{},diagnostics:[],success:!0,times:{}};try{var o=function(e,n){const p=e.getTypeChecker(),o=(new ts.pxtc.LSHost(e),e.getSourceFile(n)),r=pxtc.decompiler.buildCommentMap(o),t=M.U.toSet(["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EnvironmentError","Exception","False","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","NameError","None","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","True","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError","_","__build_class__","__debug__","__doc__","__import__","__loader__","__name__","__package__","__spec__","abs","all","any","ascii","bin","bool","bytearray","bytes","callable","chr","classmethod","compile","complex","copyright","credits","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","license","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","quit","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip",...Object.keys(M.py.keywords)],e=>e),[i,s]=ts.pxtc.decompiler.buildRenameMap(e,o,{takenNames:t,declarations:"all"}),a=pxtc.getApiInfo(e),u=M.U.mapMap(a.byQName,(e,t)=>t.fileName==n?void 0:t),c=U.computeScopeVariableLookup(o);{let t=(e=o).getChildren().map(y).reduce((e,t)=>e.concat(t),[]).reduce((e,t)=>t||e[e.length-1]?[...e,t]:e,[]);return r.filter(e=>!e.owner).forEach(e=>t.push(...d(e))),t.join("\n")}function b(e){if(!e.getSourceFile())return null;let t=e.getText();var n=p.getSymbolAtLocation(e),n=(n&&(t=p.getFullyQualifiedName(n)),u[t]);if(n&&n.attributes.alias)return n.attributes.alias;if(n&&n.pyQName){if(n.isInstance){if(ts.isPropertyAccessExpression(e))return null;const t=new RegExp(`(?:^|.)${n.namespace}.(.+)`).exec(n.pyQName);if(t)return t[1]}return n.pyQName}return t in pxtc.ts2PyFunNameMap?pxtc.ts2PyFunNameMap[t].n:null}function v(e){var t=b(e);if(t)return t;if(!ts.isIdentifier(e))return M.tickEvent("depython.todo.advancedname"),F(e,3001,"Unsupported advanced name format: "+e.getText());let n=e.text;if(e.getSourceFile()){const M=i.getRenameForPosition(e.getStart());M&&(n=M.name)}return n}function g(e,t){return 0!=(e.flags&t)}function l(e,t){return g(p.getTypeAtLocation(e),t)}function T(e){return l(e,ts.TypeFlags.StringLike)}function f(e){return l(e,ts.TypeFlags.NumberLike)}function y(e){switch(e.kind){case ts.SyntaxKind.SyntaxList:return e._children.map(y).reduce((e,t)=>e.concat(t),[]);case ts.SyntaxKind.EndOfFileToken:case ts.SyntaxKind.OpenBraceToken:case ts.SyntaxKind.CloseBraceToken:return[];default:return n=k(t=e),pxtc.decompiler.getCommentsForStatement(t,r).map(d).reduce((e,t)=>e.concat(t),[]).concat(n)}var t,n}function d(e){var t=[];if(e.kind===pxtc.decompiler.CommentKind.SingleLine)t.push("# "+e.text);else{t.push('"""');for(const n of e.lines)t.push(n);t.push('"""')}return t}function k(i){{if(ts.isVariableStatement(i))return i.declarationList.declarations.map(B).reduce((e,t)=>e.concat(t),[]);if(ts.isClassDeclaration(i))return m=i,M.tickEvent("depython.todo.classes"),F(m,3016,"Unsupported: classes are not supported in Python right now.");if(ts.isEnumDeclaration(i)){m=i;var t=[],n=(t.push(`class ${v(m.name)}(Enum):`),m.members.every(e=>!!e.initializer)),o=!m.members.every(e=>!!e.initializer),r;if(!n&&!o)return M.tickEvent("depython.todo.enummix"),F(m,3005,"Unsupported enum decleration: has mixture of explicit and implicit initialization");if(n)return M.tickEvent("depython.todo.enuminit"),F(m,3006,"Unsupported: explicit enum initialization");let e=0;for(r of m.members)t.push(U.indent1(v(r.name)+" = "+e++));return t}var n,o,s,s,a,l,c,u,d,e,p,g,e,p,e,p,g;if(ts.isExpressionStatement(i))return(n=S((o=i).expression))||([n,o]=L(o.expression),o.length?["",...o,...n,""]:[...o,...n]);if(ts.isFunctionDeclaration(i))return x(i);if(ts.isIfStatement(i))return{supportStmts:s,ifStmt:a,rest:l}=function r(i){let s=[],[e,t]=L(i.expression);s=s.concat(t);let n=`if ${I(e)}:`,a=[],o=E(i.thenStatement);if(a=a.concat(o),i.elseStatement)if(ts.isIfStatement(i.elseStatement)){let{supportStmts:e,ifStmt:t,rest:n}=r(i.elseStatement),o="el"+t;s=s.concat(e),a.push(o),a=a.concat(n)}else{a.push("else:");let e=E(i.elseStatement);a=a.concat(e)}return{supportStmts:s,ifStmt:n,rest:a}}(s=i),s.concat([a]).concat(l);if(ts.isForStatement(i)){if(a=function(e){if(!e.initializer)return null;if(e.initializer.kind!==ts.SyntaxKind.VariableDeclarationList)return null;var t=e.initializer;if(1!==t.declarations.length)return null;var t=t.declarations[0],n=v(t.name);if(!t.initializer||!function(e){return function t(e,n){let o=e=>t(e,n);return ts.isBinaryExpression(e)?o(e.left)&&o(e.right):ts.isPropertyAccessExpression(e)?o(e.expression):ts.isPrefixUnaryExpression(e)||ts.isPostfixUnaryExpression(e)?e.operator!==ts.SyntaxKind.PlusPlusToken&&e.operator!==ts.SyntaxKind.MinusMinusToken&&o(e.operand):ts.isParenthesizedExpression(e)?o(e.expression):ts.isArrayLiteralExpression(e)?e.elements.map(o).reduce((e,t)=>e&&t,!0):ts.isElementAccessExpression(e)?o(e.expression)&&(!e.argumentExpression||o(e.argumentExpression)):n(e)}(e,e=>{switch(e.kind){case ts.SyntaxKind.PropertyAccessExpression:case ts.SyntaxKind.BinaryExpression:case ts.SyntaxKind.ParenthesizedExpression:case ts.SyntaxKind.ArrayLiteralExpression:case ts.SyntaxKind.ElementAccessExpression:case ts.SyntaxKind.TrueKeyword:case ts.SyntaxKind.FalseKeyword:case ts.SyntaxKind.NullKeyword:case ts.SyntaxKind.UndefinedKeyword:case ts.SyntaxKind.NumericLiteral:case ts.SyntaxKind.StringLiteral:case ts.SyntaxKind.NoSubstitutionTemplateLiteral:return!0;case ts.SyntaxKind.CallExpression:case ts.SyntaxKind.NewExpression:case ts.SyntaxKind.FunctionExpression:case ts.SyntaxKind.ArrowFunction:case ts.SyntaxKind.Identifier:case ts.SyntaxKind.ThisKeyword:return!1;case ts.SyntaxKind.PrefixUnaryExpression:case ts.SyntaxKind.PostfixUnaryExpression:return e.operator!==ts.SyntaxKind.PlusPlusToken&&e.operator!==ts.SyntaxKind.MinusMinusToken}return!1})}(t.initializer)||!f(t.initializer))return null;var[t,o]=L(t.initializer);if(o.length)return null;o=I(t);if(!e.condition)return null;if(!ts.isBinaryExpression(e.condition))return null;if(!ts.isIdentifier(e.condition.left))return null;if(v(e.condition.left)!=n)return null;if(!f(e.condition.right))return null;var[t,r]=L(e.condition.right);if(r.length)return null;let i=I(t),s=i;if(e.condition.operatorToken.kind===ts.SyntaxKind.LessThanEqualsToken&&function(e){var t=Math.floor(Number(e));return t!==1/0&&String(t)===e}(i))s=""+(Number(i)+1);else if(e.condition.operatorToken.kind!==ts.SyntaxKind.LessThanToken)return null;return e.incrementor&&(ts.isPostfixUnaryExpression(e.incrementor)||ts.isPrefixUnaryExpression(e.incrementor))&&e.incrementor.operator===ts.SyntaxKind.PlusPlusToken&&o<s?{name:n,fromIncl:o,toExcl:s}:null}(s=i))return{name:a,fromIncl:u,toExcl:c}=a,a="0"===u?`for ${a} in range(${c}):`:`for ${a} in range(${u}, ${c}):`,u=E(s.statement),[a].concat(u);let e,t=[];s.initializer&&(t=ts.isVariableDeclarationList(s.initializer)?(c=s.initializer.declarations.map(B).reduce((e,t)=>e.concat(t),[]),t.concat(c)):([a,u]=L(s.initializer),t.concat(u).concat(a)));let n=`while ${e=s.condition?([a,d]=L(s.condition),t=t.concat(d),I(a)):"True"}:`,o=(t.push(n),k(s.statement).map(U.indent1));return 0!==o.length||s.incrementor||(o=[U.indent1("pass")]),t=t.concat(o),s.incrementor&&(d=S(s.incrementor),t=d?t.concat(d.map(U.indent1)):([a,s]=L(s.incrementor),t.concat(s).concat(a.map(U.indent1)))),t}if(ts.isForOfStatement(i)){if(l=i,!ts.isVariableDeclarationList(l.initializer))return M.tickEvent("depython.todo.forof.complexexp"),F(l,3003,"Unsupported expression in for..of initializer: "+l.initializer.getText());if(1!==(g=l.initializer.declarations.map(e=>v(e.name))).length)return M.tickEvent("depython.todo.forof.multidecl"),F(l,3004,"Unsupported multiple declerations in for..of: "+l.initializer.getText());let e=g[0],[t,n]=L(l.expression),o=n,r=(o=o.concat(D(`for ${e} in `,t,":")),E(l.statement));return o=o.concat(r)}return ts.isWhileStatement(i)?([e,p]=L((g=i).expression),g=E(g.statement),e=D("while ",e,":"),p.concat(e).concat(g)):ts.isReturnStatement(i)?(p=i).expression?([p,e]=L(p.expression),p=D("return ",p),e.concat(p)):["return"]:ts.isBlock(i)?C(i):ts.isTypeAliasDeclaration(i)?(h=i,_=pxtc.emitPyTypeFromTypeNode(h.type),[v(h.name)+" = "+_]):ts.isEmptyStatement(i)?[]:ts.isModuleDeclaration(i)?(_=v((h=i).name),h=h.body&&h.body.getChildren().map(y).reduce((e,t)=>e.concat(t),[]).map(e=>U.indent1(e)),["@namespace",`class ${_}:`].concat(h||[])):ts.isBreakStatement(i)?["break"]:ts.isContinueStatement(i)?["continue"]:(M.tickEvent("depython.todo.statement",{statement:i.kind}),F(i,3002,`Not supported in MakeCode Python: ${ts.SyntaxKind[i.kind]} (${i.kind})`))}var h,_,m}function E(e){let t=k(e).map(U.indent1);return t=t.length<1?[U.indent1("pass")]:t}function S(e){var t,n;return t=e,!ts.isPrefixUnaryExpression(t)&&!ts.isPostfixUnaryExpression(t)||t.operator!==ts.SyntaxKind.MinusMinusToken&&t.operator!==ts.SyntaxKind.PlusPlusToken?null:([t,n]=L(e.operand),e=e.operator===ts.SyntaxKind.MinusMinusToken?" -= 1":" += 1",(n=n).push(I(t)+e),n)}function C(e){return e.getChildren().map(y).reduce((e,t)=>e.concat(t),[])}function x(e,t,n,s){let o=[];e.kind!==ts.SyntaxKind.MethodDeclaration&&e.kind!==ts.SyntaxKind.Constructor||o.push("self");var n=(n?function(n,o){var r=[],i={};for(let t=0;t<Math.max(n.length,o.length);t++){let e;var s;n[t]?(e=n[t],i[v(e.name)]=!0):(s=v((e=o[t]).name),i[s]&&(s=pxtc.decompiler.getNewName(s,i),e=Object.assign({altName:s},o[t]))),r.push(e)}return ts.createNodeArray(r,!1)}(e.parameters,n):e.parameters).map(o=>{{var r=!s;let e=o.altName||v(o.name),t="",n=(o.type&&r&&(r=pxtc.emitPyTypeFromTypeNode(o.type))&&-1===r.indexOf("(TODO")&&(t=": "+r),"");if(o.initializer){var[r,i]=L(o.initializer);if(i.length)return M.tickEvent("depython.todo.complexinit"),F(o,3007,"Unsupported: complex expression in parameter default value not supported. Expression: "+o.initializer.getText());n=" = "+I(r)}return""+e+t+n}});let r,i=(o=o.concat(n)).join(", "),a=[];if(t)r=t;else{if(!e.name)return M.tickEvent("depython.todo.anonymousfunc"),F(e,3012,"Unsupported: anonymous function decleration");r=v(e.name)}if(a.push(`def ${r}(${i}):`),!e.body)return M.tickEvent("depython.todo.funcwithoutbody"),F(e,3013,"Unsupported: function decleration without body");let l=[];return ts.isBlock(e.body)?l=C(e.body):([n,t]=L(e.body),(l=l.concat(t)).concat(n)),l.length?((t=c.getExplicitGlobals(e).map(e=>v(e)))&&t.length&&l.unshift("global "+t.join(", ")),(n=c.getExplicitNonlocals(e).map(e=>v(e)))&&n.length&&l.unshift("nonlocal "+n.join(", ")),a=a.concat(l.map(U.indent1))):a.push(U.indent1("pass")),a}function B(o){let r=[],i=v(o.name);if(o.initializer){let e,[t,n]=L(o.initializer);r=r.concat(n),e=o.type?`${i}: ${pxtc.emitPyTypeFromTypeNode(o.type)} = `+I(t):i+" = "+I(t),r.push(e)}return r}function A(e,t){return[[e],t||[]]}function I(e,t="\n"){return e.join(t)}function D(e="",t,n=""){return t[0]=e+t[0],t[t.length-1]=t[t.length-1]+n,t}function N(e,t){switch(e){case ts.SyntaxKind.BarBarToken:return"or";case ts.SyntaxKind.AmpersandAmpersandToken:return"and";case ts.SyntaxKind.ExclamationToken:return"not";case ts.SyntaxKind.LessThanToken:return"<";case ts.SyntaxKind.LessThanEqualsToken:return"<=";case ts.SyntaxKind.GreaterThanToken:return">";case ts.SyntaxKind.GreaterThanEqualsToken:return">=";case ts.SyntaxKind.EqualsEqualsEqualsToken:case ts.SyntaxKind.EqualsEqualsToken:return"==";case ts.SyntaxKind.ExclamationEqualsEqualsToken:case ts.SyntaxKind.ExclamationEqualsToken:return"!=";case ts.SyntaxKind.EqualsToken:return"=";case ts.SyntaxKind.PlusToken:return"+";case ts.SyntaxKind.MinusToken:return"-";case ts.SyntaxKind.AsteriskToken:return"*";case ts.SyntaxKind.PlusEqualsToken:return"+=";case ts.SyntaxKind.MinusEqualsToken:return"-=";case ts.SyntaxKind.PercentToken:return"%";case ts.SyntaxKind.SlashToken:return"/";case ts.SyntaxKind.PlusPlusToken:case ts.SyntaxKind.MinusMinusToken:return M.tickEvent("depython.todo.unsupportedop",{op:e}),F(t,3008,"Unsupported ++ and -- in an expression (not a statement or for loop)");case ts.SyntaxKind.AmpersandToken:return"&";case ts.SyntaxKind.CaretToken:return"^";case ts.SyntaxKind.LessThanLessThanToken:return"<<";case ts.SyntaxKind.GreaterThanGreaterThanToken:return">>";case ts.SyntaxKind.GreaterThanGreaterThanGreaterThanToken:return M.tickEvent("depython.todo.unsupportedop",{op:e}),F(t,3009,"Unsupported operator: >>>");case ts.SyntaxKind.AsteriskAsteriskToken:return"**";case ts.SyntaxKind.AsteriskAsteriskEqualsToken:return"**=";case ts.SyntaxKind.PercentEqualsToken:return"%=";case ts.SyntaxKind.AsteriskEqualsToken:return"*=";case ts.SyntaxKind.SlashEqualsToken:return"/=";default:return M.tickEvent("depython.todo.unsupportedop",{op:e}),F(t,3008,`Unsupported Python operator (code: ${e})`)}}function h(e){var t;return ts.isPropertyAccessExpression(e)?(t=(t=v(e.name)).substr(t.lastIndexOf(".")+1),ts.isIdentifier(e.expression)?[t]:h(e.expression).concat([t])):ts.isIdentifier(e)?[v(e)]:[]}function _(e,t,n,o){let r="",i=(t&&(r=h(t).map(M.U.snakify).join("_")),[]);if(n&&1<n.length&&o&&1<o.length)for(let e=0;e<n.length&&e<o.length;e++){var s=o[e];g(p.getTypeAtLocation(s),ts.TypeFlags.EnumLike)&&(s=h(s).map(M.U.snakify),i=i.concat(s))}let a=i.join("_"),l="",c=(r||a||!e||(l=v(e.name)),([r,a,l].filter(e=>e).map(M.U.snakify).map(e=>e.toLowerCase()).join("_")||"my_callback").split("_"));4<c.length&&(c=function(e){var t={},n=[];for(var o of e)o in t||(t[o]=!0,n.push(o));return n}(c));for(var u=M.U.toDictionary(["any","on","event"],e=>e);2<c.length;){var d=function(e,t){let n=[],o=!1;for(var r of e)r in t&&!o?o=!0:n.push(r);return n}(c,u);if(d.length==c.length)break;c=d}return(c=["on",...c]).join("_")}function w(r){var e=r.join(", ");return 60<e.length&&1<r.length?r.map((e,t)=>{var n,o=","==e.charAt(e.length-1)?"":",";return 0==t?(e=1<(n=e.split("\n")).length?n.shift()+"\n"+U.indent1(n.join("\n")):e)+o:t==r.length-1?U.indent1(e):U.indent1(e+o)}):[e]}function O(i){let e=p.getTypeAtLocation(i.expression),t=p.typeToTypeNode(e),s=ts.createNodeArray([]);if(ts.isFunctionTypeNode(t)&&(s=t.parameters,i.arguments)&&s.length<i.arguments.length)return M.tickEvent("depython.todo.argparammismatch",{kind:i.kind}),F(i,3010,"TODO: Unsupported call site where caller the arguments outnumber the callee parameters: "+i.getText());var n=(n=i.expression).getSourceFile()&&(n=n.getText(),u[n])||null;if(i.arguments&&n&&"TD_ID"==n.attributes.shim)return L(i.arguments[0]);if(ts.isPropertyAccessExpression(i.expression)&&"toString"===i.expression.name.getText()){const[M,F]=L(i.expression.expression);return[D("str(",M,")"),F]}let[o,r]=L(i.expression),a=I(o),l=(i.arguments||ts.createNodeArray()).map((e,t,n)=>{return e=e,t=s[t],o=i.expression,r=s,n=n,(ts.isFunctionExpression(e)||ts.isArrowFunction(e))&&t&&t.type&&ts.isFunctionTypeNode(t.type)?R(e,_(t,o,r,n),void 0,!0):L(e);var o,r}),c=l.map(([,e])=>e).reduce((e,t)=>e.concat(t),r);return 0===a.indexOf("_py.py_")?l.length<=0?(M.tickEvent("depython.todo._pynoargs"),F(i,3014,"Unsupported: call expression has no arguments for _py.py_ fn")):(a=a.substr(7).split("_").filter((e,t)=>0!==t).join("_"),[D(`${l.shift()[0]}.${a}(`,w(l.map(([e])=>e).reduce((e,t)=>e.concat(t),[])),")"),c]):[D(a+"(",w(l.map(([e])=>e).reduce((e,t)=>e.concat(t),[])),")"),c]}function R(e,t,n,o){t=e.name?v(e.name):("string"!=typeof(t=t||"my_function")&&(t=v(t)),s[t]?pxtc.decompiler.getNewName(t,s):(s[t]=!0,t));return A(t,x(e,t,n,o))}function P(e){switch(e){case ts.SyntaxKind.ExclamationToken:return" ";case ts.SyntaxKind.PlusToken:case ts.SyntaxKind.MinusToken:return"";default:return" "}}function L(l){if(ts.isBinaryExpression(l)){var c=l;let e=T(c.left),t=T(c.right),n=c.operatorToken.kind===ts.SyntaxKind.PlusToken&&(e||t),[o,r]=L(c.left),i=(n&&!e&&(o=D("str(",o,")")),N(c.operatorToken.kind,c)),[s,a]=L(c.right);return n&&!t&&(s=D("str(",s,")")),c=r.concat(a),[D(I(o)+" "+i+" ",s),c]}if(ts.isPropertyAccessExpression(l))return(s=b(c=l))?A(s):([s,a]=L(c.expression),A("length"===(c=v(c.name))?`len(${I(s)})`:I(s)+"."+c,a));var e,t,n,o,r,i,s,a,u,d,p,g,h,_,m,f,y,k;if(ts.isCallExpression(l))return O(l);if(ts.isNewExpression(l))return O(l);if(ts.isFunctionExpression(l)||ts.isArrowFunction(l))return R(l);if(ts.isPrefixUnaryExpression(l))return a=N((s=l).operator,s),[d,u]=L(s.operand),A(""+a+P(s.operator)+I(d),u);if(ts.isPostfixUnaryExpression(l))return u=N((d=l).operator,d),[p,g]=L(d.operand),d=P(d.operator),A(""+I(p)+d+u,g);if(ts.isParenthesizedExpression(l))return[p,g]=L((p=l).expression),A(`(${I(p)})`,g);if(ts.isArrayLiteralExpression(l))return t=(e=(e=l).elements.map(L)).map(([,e])=>e).reduce((e,t)=>e.concat(t),[]),[D("[",w(e.map(([e])=>e).reduce((e,t)=>e.concat(t),[])),"]"),t];if(ts.isElementAccessExpression(l))return(e=l).argumentExpression?([t,r]=L(e.expression),[o,n]=L(e.argumentExpression),r=r.concat(n),A(`${I(t)}[${I(o)}]`,r)):(M.tickEvent("depython.todo.accesswithoutexp"),F(e,3015,"Unsupported: element access expression without an argument expression"));if(ts.isNoSubstitutionTemplateLiteral(l)||ts.isTaggedTemplateExpression(l))return n=l,ts.isNoSubstitutionTemplateLiteral(n)?A(`"""
${U.indent1(n.text.trim())}
"""`):([o,r]=L(n.tag),[n,i]=L(n.template),r=r.concat(i),A(`${I(o)}(${I(n)})`,r));switch(l.kind){case ts.SyntaxKind.TrueKeyword:return A("True");case ts.SyntaxKind.FalseKeyword:return A("False");case ts.SyntaxKind.ThisKeyword:return A("self");case ts.SyntaxKind.NullKeyword:case ts.SyntaxKind.UndefinedKeyword:return A("None")}return ts.isIdentifier(l)?"undefined"==(i=l).text?A("None"):A(v(i)):ts.isNumericLiteral(l)||ts.isStringLiteral(l)?A(l.getText()):ts.isConditionalExpression(l)?([h,k]=L((f=l).condition),[_,m]=L(f.whenTrue),[f,y]=L(f.whenFalse),k=k.concat(m).concat(y),A(`${_} if ${I(h)} else `+I(f),k)):(M.tickEvent("depython.todo.expression",{kind:l.kind}),F(l,3017,"Unsupported expression kind: "+l.kind))}}(e,t),r=t.replace(/(\.py)?\.\w*$/i,"")+".py";n.outfiles[r]=o}catch(e){e.pyDiagnostic?n.diagnostics=[e.pyDiagnostic]:M.reportException(e),n.success=!1}return n},U.INDENT="    ",U.indent=e,U.indent1=e(1)}(pxt=pxt||{}),function(e){e=e.py||(e.py={});{e=e.rx||(e.rx={});const t=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/;e.isIdentifierStart=function(e){return ts.pxtc.isIdentifierStart(e,ts.pxtc.ScriptTarget.ES5)},e.isIdentifierChar=function(e){return ts.pxtc.isIdentifierPart(e,ts.pxtc.ScriptTarget.ES5)},e.isSpace=function(e){return!!(32===e||9===e||11===e||12===e||160===e||5760<=e&&t.test(String.fromCharCode(e)))},e.isNewline=function(e){return 10===e||13===e||8232===e||8233===e}}}(pxt=pxt||{}),function(e){function s(e){const s={refs:[],children:[],owner:void 0};return function t(n){var o;if(!n)return s;if(ts.isPropertyAccessOrQualifiedName(n))return s;if(ts.isIdentifier(n))return{refs:[{kind:"read",node:n,varName:n.text}],children:[],owner:void 0};if(ts.isVariableDeclaration(n)||ts.isParameter(n)){const s=t(n.initializer);return{refs:[...s.refs,{kind:"decl",node:n,varName:n.name.getText()}],children:s.children,owner:void 0}}if(ts.isPrefixUnaryExpression(n)||ts.isPostfixUnaryExpression(n)){const s=t(n.operand),i=n.operand.getText();return a(s,{refs:[{kind:"assign",node:n,varName:i}],children:[],owner:void 0})}if(o=n,r=[ts.SyntaxKind.EqualsToken,ts.SyntaxKind.PlusEqualsToken,ts.SyntaxKind.MinusEqualsToken,ts.SyntaxKind.AsteriskEqualsToken,ts.SyntaxKind.AsteriskAsteriskEqualsToken,ts.SyntaxKind.SlashEqualsToken,ts.SyntaxKind.PercentEqualsToken,ts.SyntaxKind.LessThanLessThanEqualsToken,ts.SyntaxKind.GreaterThanGreaterThanEqualsToken,ts.SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken,ts.SyntaxKind.AmpersandEqualsToken,ts.SyntaxKind.BarEqualsToken,ts.SyntaxKind.CaretEqualsToken],ts.isBinaryExpression(o)&&r.some(e=>o.operatorToken.kind===e)){const s=t(n.right);let e;n.operatorToken.kind!==ts.SyntaxKind.EqualsToken&&(e=t(n.left));var r=n.left.getText();return a(e,a(s,{refs:[{kind:"assign",node:n,varName:r}],children:[],owner:void 0}))}if(ts.isFunctionExpression(n)||ts.isArrowFunction(n)||ts.isFunctionDeclaration(n)||ts.isMethodDeclaration(n)){r=null==(i=n.name)?void 0:i.getText();let e;r&&(e={kind:"decl",node:n,varName:r});var i=a(n.parameters.map(e=>t(e)).reduce(a,s),t(n.body));return i.owner=n,{refs:e?[e]:[],children:[i],owner:void 0}}return n.getChildren().map(t).reduce(a,s)}(e);function a(e,t){return e&&t?{refs:[...e.refs,...t.refs],children:[...e.children,...t.children],owner:e.owner||t.owner}:e||t||s}}function u(e,t,n=[]){var o=[],r=[],i=[],s=[],a={};for(const u of e.refs)"read"===u.kind||"assign"===u.kind?(a[u.varName]?i:function(t){return n.map(e=>e[t.varName]).reduce((e,t)=>t||e,void 0)}(u)?r:t&&t[u.varName]?o:s).push(u):a[u.varName]=u;const l=t||a,c=t?[...n,a]:[];return{globalUsage:o,nonlocalUsage:r,localUsage:i,environmentUsage:s,children:e.children.map(e=>u(e,l,c)),owner:e.owner}}function a(e){return e.kind+":"+e.varName}var l;(l=e.py||(e.py={})).computeScopeVariableLookup=function(e){const t=u(s(e)),o=new Map,r=new Map;return function e(t){var n=i([...(n=t).globalUsage,...n.environmentUsage].filter(e=>"assign"===e.kind).map(e=>e)),n=(o.set(t.owner,n),i(t.nonlocalUsage.filter(e=>"assign"===e.kind).map(e=>e)));r.set(t.owner,n),t.children.forEach(e)}(t),{getExplicitGlobals:e=>o.get(e)||[],getExplicitNonlocals:e=>r.get(e)||[]};function n(e){e=e.node.operand||e.node.left;return ts.isIdentifier(e)?e:void 0}function i(e){return e.map(n).filter(e=>!!e).map(e=>e).reduce((e,t)=>e.find(e=>e.text===t.text)?e:[...e,t],[])}},l.toStringVariableScopes=function(e){var e=s(e),t=u(e);return function e(t){return[t.refs.map(a).join(", "),...t.children.map(e).map(e=>e.map(l.indent1)).map(e=>["{",...e,"}"]).reduce((e,t)=>[...e,...t],[])]}(e).join("\n")+"\n\n\n"+function e(t){var n=t.globalUsage.map(a).join(", "),o=t.nonlocalUsage.map(a).join(", "),r=t.localUsage.map(a).join(", "),i=t.environmentUsage.map(a).join(", ");return[n?"global "+n:"",o?"nonlocal "+o:"",r?"local "+r:"",i?"env "+i:"",...t.children.map(e).map(e=>e.map(l.indent1)).map(e=>["{",...e,"}"]).reduce((e,t)=>[...e,...t],[])].filter(e=>!!e)}(t).join("\n")}}(pxt=pxt||{});var $jscomp=$jscomp||{},COMPILED=($jscomp.scope={},!0),goog=goog||{},Blockly=(goog.global=this||self,goog.isDef=function(e){return void 0!==e},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.exportPath_=function(e,t,n){e=e.split("."),n=n||goog.global,e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(var o;e.length&&(o=e.shift());)e.length||void 0===t?n=n[o]&&n[o]!==Object.prototype[o]?n[o]:n[o]={}:n[o]=t},goog.define=function(e,t){var n,o;return COMPILED||(n=goog.global.CLOSURE_UNCOMPILED_DEFINES,o=goog.global.CLOSURE_DEFINES,n&&void 0===n.nodeType&&Object.prototype.hasOwnProperty.call(n,e)?t=n[e]:o&&void 0===o.nodeType&&Object.prototype.hasOwnProperty.call(o,e)&&(t=o[e])),t},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var n=e;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(e,t)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e.nonce||e.getAttribute("nonce")))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if("string"!=typeof e||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e].exports;if(!goog.implicitNamespaces_[e])return null!=(e=goog.getObjectByName(e))?e:null}return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){var e;return!(!goog.moduleLoaderState_||goog.moduleLoaderState_.type!=goog.ModuleType.ES6)||!!(e=goog.global.$jscomp)&&"function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(e in goog.loadedModules_)throw Error('Module with namespace "'+e+'" already exists.')}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&null!=goog.getObjectByName(e)},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t},goog.globalize=function(e,t){for(var n in t=t||goog.global,e)t[n]=e[n]},goog.addDependency=function(e,t,n,o){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(e,t,n,o)},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(e),goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(e)}finally{goog.moduleLoaderState_=t}}return null}},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_||(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(e))var n=e.call(void 0,{});else{if("string"!=typeof e)throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),n=goog.loadModuleFromSource_.call(void 0,e)}var o=goog.moduleLoaderState_.moduleName;if("string"!=typeof o||!o)throw Error('Invalid module name "'+o+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(o,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof n&&null!=n&&Object.seal(n),goog.loadedModules_[o]={exports:n,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(e,t,n){var o=goog.global.$jscomp,r=(o||(goog.global.$jscomp=o={}),o.transpile);if(!r){var i=goog.basePath+goog.TRANSPILER,s=goog.loadFileSync_(i);if(s){if(function(){(0,eval)(s+"\n//# sourceURL="+i)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,r=(o=goog.global.$jscomp).transpile}}return(r=r||(o.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}))(e,t,n)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t,n=goog.typeOf(e);if("object"!=n&&"array"!=n)return e;if("function"==typeof e.clone)return e.clone();for(t in n="array"==n?[]:{},e)n[t]=goog.cloneObject(e[t]);return n},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(t,n,e){var o;if(t)return 2<arguments.length?(o=Array.prototype.slice.call(arguments,2),function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,o),t.apply(n,e)}):function(){return t.apply(n,arguments)};throw Error()},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}var t,n;goog.evalWorksForGlobals_?goog.global.eval(e):((n=(t=goog.global.document).createElement("script")).type="text/javascript",n.defer=!1,n.appendChild(t.createTextNode(e)),t.head.appendChild(n),t.head.removeChild(n))}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);function o(e){return goog.cssNameMapping_[e]||e}var n=function(e){e=e.split("-");for(var t=[],n=0;n<e.length;n++)t.push(o(e[n]));return t.join("-")},n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?o:n:function(e){return e};return e=t?e+"-"+n(t):n(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,n,t){return t&&t.html&&(e=e.replace(/</g,"&lt;")),e=n?e.replace(/\{\$([^}]+)}/g,function(e,t){return null!=n&&t in n?n[t]:e}):e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,i){function t(){}t.prototype=i.prototype,e.superClass_=i.prototype,e.prototype=new t,(e.prototype.constructor=e).base=function(e,t,n){for(var o=Array(arguments.length-2),r=2;r<arguments.length;r++)o[r-2]=arguments[r];return i.prototype[t].apply(e,o)}},goog.base=function(e,t,n){var o=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!o)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(void 0!==o.superClass_){for(var r=Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return o.superClass_.constructor.apply(e,r)}if("string"!=typeof t&&"symbol"!=typeof t)throw Error("method names provided to goog.base must be a string or a symbol");for(r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];for(var i=!1,s=e.constructor.prototype;s;s=Object.getPrototypeOf(s))if(s[t]===o)i=!0;else if(i)return s[t].apply(e,r);if(e[t]===o)return e.constructor.prototype[t].apply(e,r);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var n=t.constructor,o=t.statics;return n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),n=goog.defineClass.createSealingConstructor_(n,e),e&&goog.inherits(n,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(n.prototype,t),null!=o&&(o instanceof Function?o(n):goog.defineClass.applyProperties_(n,o)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(t,e){var n,o;return goog.defineClass.SEAL_CLASS_INSTANCES?(n=!goog.defineClass.isUnsealable_(e),o=function(){var e=t.apply(this,arguments)||this;return e[goog.UID_PROPERTY_]=e[goog.UID_PROPERTY_],this.constructor===o&&n&&Object.seal instanceof Function&&Object.seal(e),e}):t},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);for(var o=0;o<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;o++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.isDocumentLoading_=function(){var e=goog.global.document;return e.attachEvent?"complete"!=e.readyState:"loading"==e.readyState},goog.findBasePath_=function(){if(null!=goog.global.CLOSURE_BASE_PATH&&"string"==typeof goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document,t=(e=(t=e.currentScript)?[t]:e.getElementsByTagName("SCRIPT")).length-1;0<=t;--t){var n=e[t].src,o=-1==(o=n.lastIndexOf("?"))?n.length:o;if("base.js"==n.substr(o-7,7)){goog.basePath=n.substr(0,o-7);break}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null,this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(t,n){e?d[t]=!0:n()?d[c=t]=!1:e=d[t]=!0}function b(a){try{return!!eval(a)}catch(e){return!1}}var c="es3",d={es3:!1},e=!1,f=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",function(){return b("[1,].length==1")}),a("es6",function(){return!f.match(/Edge\/(\d+)(\.\d)*/i)&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')}),a("es7",function(){return b("2 ** 2 == 4")}),a("es8",function(){return b("async () => 1, true")}),a("es9",function(){return b("({...rest} = {}), true")}),a("es_next",function(){return!1}),{target:c,map:d}},goog.Transpiler.prototype.needsTranspile=function(e,t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;var n;if(this.requiresTranspilation_||(n=this.createRequiresTranspilation_(),this.requiresTranspilation_=n.map,this.transpilationTarget_=this.transpilationTarget_||n.target),e in this.requiresTranspilation_)return!!this.requiresTranspilation_[e]||!(!goog.inHtmlDocument_()||"es6"!=t||"noModule"in goog.global.document.createElement("script"));throw Error("Unknown language mode: "+e)},goog.Transpiler.prototype.transpile=function(e,t){return goog.transpile_(e,t,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={},this.idToPath_={},this.written_={},this.loadingDeps_=[],this.depsToLoad_=[],this.paused_=!1,this.factory_=new goog.DependencyFactory(goog.transpiler_),this.deferredCallbacks_={},this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(e,t){function n(){o&&(goog.global.setTimeout(o,0),o=null)}var o=t;if(e.length){t=[];for(var r=0;r<e.length;r++){var i=this.getPathFromDeps_(e[r]);if(!i)throw Error("Unregonized namespace: "+e[r]);t.push(this.dependencies_[i])}for(var i=goog.require,s=0,r=0;r<e.length;r++)i(e[r]),t[r].onLoad(function(){++s==e.length&&n()})}else n()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1)),this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(e,t){(e=this.getPathFromDeps_(e))&&(t||this.areDepsLoaded_(this.dependencies_[e].requires))&&(t=this.deferredCallbacks_[e])&&(delete this.deferredCallbacks_[e],t())},goog.DebugLoader_.prototype.setDependencyFactory=function(e){this.factory_=e},goog.DebugLoader_.prototype.load_=function(e){if(!this.getPathFromDeps_(e))throw goog.logToConsole_(e="goog.require could not find: "+e),Error(e);var n=this,o=[],r=function(e){var t=n.getPathFromDeps_(e);if(!t)throw Error("Bad dependency path or symbol: "+e);if(!n.written_[t]){for(n.written_[t]=!0,e=n.dependencies_[t],t=0;t<e.requires.length;t++)goog.isProvided_(e.requires[t])||r(e.requires[t]);o.push(e)}};r(e),e=!!this.depsToLoad_.length,this.depsToLoad_=this.depsToLoad_.concat(o),this.paused_||e||this.loadDeps_()},goog.DebugLoader_.prototype.loadDeps_=function(){for(var r=this,i=this.paused_;this.depsToLoad_.length&&!i;)!function(){var t=!1,n=r.depsToLoad_.shift(),e=!1,o=(r.loading_(n),{pause:function(){if(t)throw Error("Cannot call pause after the call to load.");i=!0},resume:function(){t?r.resume_():i=!1},loaded:function(){if(e)throw Error("Double call to loaded.");e=!0,r.loaded_(n)},pending:function(){for(var e=[],t=0;t<r.loadingDeps_.length;t++)e.push(r.loadingDeps_[t]);return e},setModuleState:function(e){goog.moduleLoaderState_={type:e,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(e,t,n){n&&(goog.loadedModules_[n]={exports:t,type:goog.ModuleType.ES6,moduleId:n||""})},registerGoogModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.GOOG,moduleId:e}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(e){if(t)throw Error("Cannot register with defer after the call to load.");r.defer_(n,e)},areDepsLoaded:function(){return r.areDepsLoaded_(n.requires)}});try{n.load(o)}finally{t=!0}}();i&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(e){this.loadingDeps_.push(e)},goog.DebugLoader_.prototype.loaded_=function(e){for(var t=0;t<this.loadingDeps_.length;t++)if(this.loadingDeps_[t]==e){this.loadingDeps_.splice(t,1);break}for(t=0;t<this.deferredQueue_.length;t++)if(this.deferredQueue_[t]==e.path){this.deferredQueue_.splice(t,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);e.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(e){for(var t=0;t<e.length;t++){var n=this.getPathFromDeps_(e[t]);if(!n||!(n in this.deferredCallbacks_)&&!goog.isProvided_(e[t]))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=function(e){return e in this.idToPath_?this.idToPath_[e]:e in this.dependencies_?e:null},goog.DebugLoader_.prototype.defer_=function(e,t){this.deferredCallbacks_[e.path]=t,this.deferredQueue_.push(e.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(e,t,n){},goog.LoadController.prototype.setModuleState=function(e){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(e){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(e,t,n,o,r){this.path=e,this.relativePath=t,this.provides=n,this.requires=o,this.loadFlags=r,this.loaded_=!1,this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var e=this.path,t=e.indexOf("://");return e=0<=t&&0<=(t=(e=e.substring(t+3)).indexOf("/"))?e.substring(t+1):e},goog.Dependency.prototype.onLoad=function(e){this.loaded_?e():this.loadCallbacks_.push(e)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var e=this.loadCallbacks_;this.loadCallbacks_=[];for(var t=0;t<e.length;t++)e[t]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(e){var t=Math.random().toString(32);return goog.Dependency.callbackMap_[t]=e,t},goog.Dependency.unregisterCallback_=function(e){delete goog.Dependency.callbackMap_[e]},goog.Dependency.callback_=function(e,t){if(!(e in goog.Dependency.callbackMap_))throw Error("Callback key "+e+" does not exist (was base.js loaded more than once?).");for(var e=goog.Dependency.callbackMap_[e],n=[],o=1;o<arguments.length;o++)n.push(arguments[o]);e.apply(void 0,n)},goog.Dependency.prototype.load=function(t){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?t.loaded():t.pause();else if(goog.inHtmlDocument_()){var n,e,o,r=goog.global.document;if("complete"==r.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path))return void t.loaded();throw Error('Cannot write "'+this.path+'" after document load')}!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()?(n=goog.Dependency.registerCallback_(function(e){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=e.readyState||(goog.Dependency.unregisterCallback_(n),t.loaded())}),e=!goog.DebugLoader_.IS_OLD_IE_&&goog.getScriptNonce()?' nonce="'+goog.getScriptNonce()+'"':"",e='<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+n+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+e+"><\/script>",r.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(e):e)):((o=r.createElement("script")).defer=goog.Dependency.defer_,o.async=!1,o.type="text/javascript",(e=goog.getScriptNonce())&&o.setAttribute("nonce",e),goog.DebugLoader_.IS_OLD_IE_?(t.pause(),o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(t.loaded(),t.resume())}):o.onload=function(){o.onload=null,t.loaded()},o.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path,r.head.appendChild(o))}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),t.loaded()):t.pause()},goog.Es6ModuleDependency=function(e,t,n,o,r){goog.Dependency.call(this,e,t,n,o,r)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(t){var r,n,e,o,i,s;goog.global.CLOSURE_IMPORT_SCRIPT?goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?t.loaded():t.pause():goog.inHtmlDocument_()?(r=goog.global.document,n=this,goog.isDocumentLoading_()?(e=function(e,t){e=t?'<script type="module" crossorigin>'+t+"<\/script>":'<script type="module" crossorigin src="'+e+'"><\/script>',r.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(e):e)},goog.Dependency.defer_=!0):e=function(e,t){var n=r.createElement("script"),o=(n.defer=!0,n.async=!1,n.type="module",n.setAttribute("crossorigin",!0),goog.getScriptNonce());o&&n.setAttribute("nonce",o),t?n.textContent=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(t):t:n.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(e):e,r.head.appendChild(n)},e(void 0,'goog.Dependency.callback_("'+(o=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(o),t.setModuleState(goog.ModuleType.ES6)}))+'")'),e(this.path,void 0),i=goog.Dependency.registerCallback_(function(e){goog.Dependency.unregisterCallback_(i),t.registerEs6ModuleExports(n.path,e,goog.moduleLoaderState_.moduleName)}),e(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+i+'", m)'),e(void 0,'goog.Dependency.callback_("'+(s=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(s),t.clearModuleState(),t.loaded()}))+'")')):(goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),t.pause())},goog.TransformedDependency=function(e,t,n,o,r){goog.Dependency.call(this,e,t,n,o,r),this.contents_=null,this.lazyFetch_=!(goog.inHtmlDocument_()&&"noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(n){function o(){c.contents_=goog.loadFileSync_(c.path),c.contents_&&(c.contents_=c.transform(c.contents_),c.contents_)&&(c.contents_+="\n//# sourceURL="+c.path)}function e(){if(c.lazyFetch_&&o(),c.contents_){r&&n.setModuleState(goog.ModuleType.ES6);try{var e,t=c.contents_;c.contents_=null,goog.globalEval(t),r&&(e=goog.moduleLoaderState_.moduleName)}finally{r&&n.clearModuleState()}r&&goog.global.$jscomp.require.ensure([c.getPathName()],function(){n.registerEs6ModuleExports(c.path,goog.global.$jscomp.require(c.getPathName()),e)}),n.loaded()}}var r,t,i,s,a,l,c=this;goog.global.CLOSURE_IMPORT_SCRIPT?(o(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,n.loaded()):n.pause()):(r=this.loadFlags.module==goog.ModuleType.ES6,this.lazyFetch_||o(),l=(s=1<n.pending().length)&&goog.DebugLoader_.IS_OLD_IE_,s=goog.Dependency.defer_&&(s||goog.isDocumentLoading_()),l||s?n.defer(function(){e()}):(t=goog.global.document,l=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global,r&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!l?(goog.Dependency.defer_=!0,n.pause(),i=t.onreadystatechange,t.onreadystatechange=function(){"interactive"==t.readyState&&(t.onreadystatechange=i,e(),n.resume()),goog.isFunction(i)&&i.apply(void 0,arguments)}):!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?(s=goog.global.document,a=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(a),e()}),l='<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+a+'");')+"<\/script>",s.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(l):l)):e()))},goog.TransformedDependency.prototype.transform=function(e){},goog.TranspiledDependency=function(e,t,n,o,r,i){goog.TransformedDependency.call(this,e,t,n,o,r),this.transpiler=i},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(e){return this.transpiler.transpile(e,this.getPathName())},goog.PreTranspiledEs6ModuleDependency=function(e,t,n,o,r){goog.TransformedDependency.call(this,e,t,n,o,r)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(e){return e},goog.GoogModuleDependency=function(e,t,n,o,r,i,s){goog.TransformedDependency.call(this,e,t,n,o,r),this.needsTranspile_=i,this.transpiler_=s},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(e){return this.needsTranspile_&&(e=this.transpiler_.transpile(e,this.getPathName())),goog.LOAD_MODULE_USING_EVAL&&void 0!==goog.global.JSON?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(e,t,n,o){t=t||[],e=e.replace(/\\/g,"/");var r=goog.normalizePath_(goog.basePath+e);for(o&&"boolean"!=typeof o||(o=o?{module:goog.ModuleType.GOOG}:{}),n=this.factory_.createDependency(r,e,t,n,o,goog.transpiler_.needsTranspile(o.lang||"es3",o.module)),this.dependencies_[r]=n,n=0;n<t.length;n++)this.idToPath_[t[n]]=r;this.idToPath_[e]=r},goog.DependencyFactory=function(e){this.transpiler=e},goog.DependencyFactory.prototype.createDependency=function(e,t,n,o,r,i){return r.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(e,t,n,o,r,i,this.transpiler):i?new goog.TranspiledDependency(e,t,n,o,r,this.transpiler):new(r.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?goog.PreTranspiledEs6ModuleDependency:goog.Es6ModuleDependency:goog.Dependency)(e,t,n,o,r)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(e){goog.debugLoader_.setDependencyFactory(e)},goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(e,t){goog.debugLoader_.bootstrap(e,t)}),goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(e){return e},goog.createTrustedTypesPolicy=function(e){var t=null,n=goog.global.trustedTypes||goog.global.TrustedTypes;if(n&&n.createPolicy)try{t=n.createPolicy(e,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(e){goog.logToConsole_(e.message)}return t},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,{constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:3,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:48,CONNECTING_SNAP_RADIUS:96,CONNECTION_INDICATOR_RADIUS:9,CURRENT_CONNECTION_PREFERENCE:20,BUMP_DELAY:0,BUMP_RANDOMNESS:10,COLLAPSE_CHARS:30,LONGPRESS:750,SOUND_LIMIT:100,DRAG_STACK:!0,HSV_SATURATION:.45,HSV_VALUE:.65,SPRITE:{width:96,height:124,url:"sprites.png"},INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4,DUMMY_INPUT:5,ALIGN_LEFT:-1,ALIGN_CENTRE:0,ALIGN_RIGHT:1,DRAG_NONE:0,DRAG_STICKY:1,DRAG_BEGIN:1,DRAG_FREE:2,OPPOSITE_TYPE:[]}),resizeFromKeyboard=(Blockly.OPPOSITE_TYPE[Blockly.INPUT_VALUE]=Blockly.OUTPUT_VALUE,Blockly.OPPOSITE_TYPE[Blockly.OUTPUT_VALUE]=Blockly.INPUT_VALUE,Blockly.OPPOSITE_TYPE[Blockly.NEXT_STATEMENT]=Blockly.PREVIOUS_STATEMENT,Blockly.OPPOSITE_TYPE[Blockly.PREVIOUS_STATEMENT]=Blockly.NEXT_STATEMENT,Blockly.TOOLBOX_AT_TOP=0,Blockly.TOOLBOX_AT_BOTTOM=1,Blockly.TOOLBOX_AT_LEFT=2,Blockly.TOOLBOX_AT_RIGHT=3,Blockly.OUTPUT_SHAPE_HEXAGONAL=1,Blockly.OUTPUT_SHAPE_ROUND=2,Blockly.OUTPUT_SHAPE_SQUARE=3,Blockly.DELETE_AREA_NONE=null,Blockly.DELETE_AREA_TRASH=1,Blockly.DELETE_AREA_TOOLBOX=2,Blockly.VARIABLE_CATEGORY_NAME="VARIABLE",Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",Blockly.PROCEDURE_CATEGORY_NAME="PROCEDURE",Blockly.CREATE_VARIABLE_ID="CREATE_VARIABLE",Blockly.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",Blockly.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",Blockly.FUNCTION_DEFINITION_BLOCK_TYPE="function_definition",Blockly.FUNCTION_DECLARATION_BLOCK_TYPE="function_declaration",Blockly.FUNCTION_CALL_BLOCK_TYPE="function_call",Blockly.FUNCTION_CALL_OUTPUT_BLOCK_TYPE="function_call_output",Blockly.utils={},Blockly.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),Blockly.Msg={},Blockly.utils.global.Blockly||(Blockly.utils.global.Blockly={}),Blockly.utils.global.Blockly.Msg||(Blockly.utils.global.Blockly.Msg=Blockly.Msg),Blockly.utils.colour={},Blockly.utils.colour.parse=function(e){e=String(e).toLowerCase().trim();var t,n=Blockly.utils.colour.names[e];return n||(n="#"==(n="0x"==e.substring(0,2)?"#"+e.substring(2):e)[0]?n:"#"+n,/^#[0-9a-f]{6}$/.test(n)?n:/^#[0-9a-f]{3}$/.test(n)?["#",n[1],n[1],n[2],n[2],n[3],n[3]].join(""):(t=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/))&&(e=Number(t[1]),n=Number(t[2]),t=Number(t[3]),0<=e)&&e<256&&0<=n&&n<256&&0<=t&&t<256?Blockly.utils.colour.rgbToHex(e,n,t):null)},Blockly.utils.colour.rgbToHex=function(e,t,n){return t=e<<16|t<<8|n,e<16?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},Blockly.utils.colour.rgbArrayToHex=function(e){return Blockly.utils.colour.rgbToHex(e[0],e[1],e[2])},Blockly.utils.colour.hexToRgb=function(e){return(e=Blockly.utils.colour.parse(e))?[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]:[0,0,0]},Blockly.utils.colour.hsvToHex=function(e,t,n){var o=0,r=0,i=0;if(0==t)i=r=o=n;else{var s=Math.floor(e/60),a=e/60-s,l=(e=n*(1-t),n*(1-t*a));switch(t=n*(1-t*(1-a)),s){case 1:o=l,r=n,i=e;break;case 2:o=e,r=n,i=t;break;case 3:o=e,r=l,i=n;break;case 4:o=t,r=e,i=n;break;case 5:o=n,r=e,i=l;break;case 6:case 0:o=n,r=t,i=e}}return Blockly.utils.colour.rgbToHex(Math.floor(o),Math.floor(r),Math.floor(i))},Blockly.hueToRgb=function(e){return Blockly.utils.colour.hsvToHex(e,Blockly.HSV_SATURATION,255*Blockly.HSV_VALUE)},Blockly.utils.colour.blend=function(e,t,n){return(e=Blockly.utils.colour.parse(e))&&(t=Blockly.utils.colour.parse(t))?(e=Blockly.utils.colour.hexToRgb(e),t=Blockly.utils.colour.hexToRgb(t),Blockly.utils.colour.rgbToHex(Math.round(t[0]+n*(e[0]-t[0])),Math.round(t[1]+n*(e[1]-t[1])),Math.round(t[2]+n*(e[2]-t[2])))):null},Blockly.utils.colour.darken=function(e,t){return Blockly.utils.colour.blend("#000000",e,t)},Blockly.utils.colour.lighten=function(e,t){return Blockly.utils.colour.blend("#ffffff",e,t)},Blockly.utils.colour.luminance=function(e){return(.2126*e[0]+.7152*e[1]+.0722*e[2])/255},Blockly.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},Blockly.utils.Coordinate=function(e,t){this.x=e,this.y=t},Blockly.utils.Coordinate.equals=function(e,t){return e==t||!(!e||!t)&&e.x==t.x&&e.y==t.y},Blockly.utils.Coordinate.distance=function(e,t){var n=e.x-t.x;return e=e.y-t.y,Math.sqrt(n*n+e*e)},Blockly.utils.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},Blockly.utils.Coordinate.difference=function(e,t){return new Blockly.utils.Coordinate(e.x-t.x,e.y-t.y)},Blockly.utils.Coordinate.sum=function(e,t){return new Blockly.utils.Coordinate(e.x+t.x,e.y+t.y)},Blockly.utils.Coordinate.prototype.scale=function(e){return this.x*=e,this.y*=e,this},Blockly.utils.Coordinate.prototype.translate=function(e,t){return this.x+=e,this.y+=t,this},Blockly.utils.Coordinate.prototype.clone=function(){return new Blockly.utils.Coordinate(this.x,this.y)},Blockly.utils.string={},Blockly.utils.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},Blockly.utils.string.shortestStringLength=function(e){return e.length?e.reduce(function(e,t){return e.length<t.length?e:t}).length:0},Blockly.utils.string.commonWordPrefix=function(e,t){if(!e.length)return 0;if(1==e.length)return e[0].length;var n=0;t=t||Blockly.utils.string.shortestStringLength(e);for(var o=0;o<t;o++){for(var r=e[0][o],i=1;i<e.length;i++)if(r!=e[i][o])return n;" "==r&&(n=o+1)}for(i=1;i<e.length;i++)if((r=e[i][o])&&" "!=r)return n;return t},Blockly.utils.string.commonWordSuffix=function(e,t){if(!e.length)return 0;if(1==e.length)return e[0].length;var n=0;t=t||Blockly.utils.string.shortestStringLength(e);for(var o=0;o<t;o++){for(var r=e[0].substr(-o-1,1),i=1;i<e.length;i++)if(r!=e[i].substr(-o-1,1))return n;" "==r&&(n=o+1)}for(i=1;i<e.length;i++)if((r=e[i].charAt(e[i].length-o-1))&&" "!=r)return n;return t},Blockly.utils.string.wrap=function(e,t){e=e.split("\n");for(var n=0;n<e.length;n++)e[n]=Blockly.utils.string.wrapLine_(e[n],t);return e.join("\n")},Blockly.utils.string.wrapLine_=function(e,t){if(e.length<=t)return e;for(var n=e.trim().split(/\s+/),o=0;o<n.length;o++)n[o].length>t&&(t=n[o].length);o=-1/0;var r=1;do{for(var i=o,s=e,a=(e=[],n.length/r),l=1,o=0;o<n.length-1;o++)l<(o+1.5)/a?(l++,e[o]=!0):e[o]=!1}while(e=Blockly.utils.string.wrapMutate_(n,e,t),o=Blockly.utils.string.wrapScore_(n,e,t),e=Blockly.utils.string.wrapToText_(n,e),r++,i<o);return s},Blockly.utils.string.wrapScore_=function(e,t,n){for(var o=[0],r=[],i=0;i<e.length;i++)o[o.length-1]+=e[i].length,!0===t[i]?(o.push(0),r.push(e[i].charAt(e[i].length-1))):!1===t[i]&&o[o.length-1]++;for(e=Math.max.apply(Math,o),i=t=0;i<o.length;i++)t=(t-=2*Math.pow(Math.abs(n-o[i]),1.5))-Math.pow(e-o[i],1.5),-1!=".?!".indexOf(r[i])?t+=n/3:-1!=",;)]}".indexOf(r[i])&&(t+=n/4);return 1<o.length&&o[o.length-1]<=o[o.length-2]&&(t+=.5),t},Blockly.utils.string.wrapMutate_=function(e,t,n){for(var o,r,i,s=Blockly.utils.string.wrapScore_(e,t,n),a=0;a<t.length-1;a++)t[a]!=t[a+1]&&((r=[].concat(t))[a]=!r[a],r[a+1]=!r[a+1],s<(i=Blockly.utils.string.wrapScore_(e,r,n)))&&(s=i,o=r);return o?Blockly.utils.string.wrapMutate_(e,o,n):t},Blockly.utils.string.wrapToText_=function(e,t){for(var n=[],o=0;o<e.length;o++)n.push(e[o]),void 0!==t[o]&&n.push(t[o]?"\n":" ");return n.join("")},Blockly.utils.Size=function(e,t){this.width=e,this.height=t},Blockly.utils.Size.equals=function(e,t){return e==t||!(!e||!t)&&e.width==t.width&&e.height==t.height},Blockly.utils.style={},Blockly.utils.style.getSize=function(e){var t,n,o,r,i;return"none"!=Blockly.utils.style.getStyle_(e,"display")?Blockly.utils.style.getSizeWithDisplay_(e):(n=(t=e.style).display,o=t.visibility,r=t.position,t.visibility="hidden",t.position="absolute",t.display="inline",i=e.offsetWidth,e=e.offsetHeight,t.display=n,t.position=r,t.visibility=o,new Blockly.utils.Size(i,e))},Blockly.utils.style.getSizeWithDisplay_=function(e){return new Blockly.utils.Size(e.offsetWidth,e.offsetHeight)},Blockly.utils.style.getStyle_=function(e,t){return Blockly.utils.style.getComputedStyle(e,t)||Blockly.utils.style.getCascadedStyle(e,t)||e.style&&e.style[t]},Blockly.utils.style.getComputedStyle=function(e,t){return document.defaultView&&document.defaultView.getComputedStyle&&(e=document.defaultView.getComputedStyle(e,null))&&(e[t]||e.getPropertyValue(t))||""},Blockly.utils.style.getCascadedStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:null},Blockly.utils.style.getPageOffset=function(e){var t=new Blockly.utils.Coordinate(0,0),n=(e=e.getBoundingClientRect(),document.documentElement),n=new Blockly.utils.Coordinate(window.pageXOffset||n.scrollLeft,window.pageYOffset||n.scrollTop);return t.x=e.left+n.x,t.y=e.top+n.y,t},Blockly.utils.style.getViewportPageOffset=function(){var e=document.body,t=document.documentElement;return new Blockly.utils.Coordinate(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},Blockly.utils.style.setElementShown=function(e,t){e.style.display=t?"":"none"},Blockly.utils.style.isRightToLeft=function(e){return"rtl"==Blockly.utils.style.getStyle_(e,"direction")},Blockly.utils.style.getBorderBox=function(e){var t=Blockly.utils.style.getComputedStyle(e,"borderLeftWidth"),n=Blockly.utils.style.getComputedStyle(e,"borderRightWidth"),o=Blockly.utils.style.getComputedStyle(e,"borderTopWidth");return e=Blockly.utils.style.getComputedStyle(e,"borderBottomWidth"),{top:parseFloat(o),right:parseFloat(n),bottom:parseFloat(e),left:parseFloat(t)}},Blockly.utils.style.scrollIntoContainerView=function(e,t,n){e=Blockly.utils.style.getContainerOffsetToScrollInto(e,t,n),t.scrollLeft=e.x,t.scrollTop=e.y},Blockly.utils.style.getContainerOffsetToScrollInto=function(e,t,n){var o=Blockly.utils.style.getPageOffset(e),r=Blockly.utils.style.getPageOffset(t),i=Blockly.utils.style.getBorderBox(t),s=o.x-r.x-i.left,o=o.y-r.y-i.top,r=Blockly.utils.style.getSizeWithDisplay_(e);return e=t.clientWidth-r.width,r=t.clientHeight-r.height,i=t.scrollLeft,t=t.scrollTop,n?(i+=s-e/2,t+=o-r/2):(i+=Math.min(s,Math.max(s-e,0)),t+=Math.min(o,Math.max(o-r,0))),new Blockly.utils.Coordinate(i,t)},Blockly.utils.userAgent={},function(e){function t(e){return-1!=n.indexOf(e.toUpperCase())}Blockly.utils.userAgent.raw=e;var n=Blockly.utils.userAgent.raw.toUpperCase();Blockly.utils.userAgent.IE=t("Trident")||t("MSIE"),Blockly.utils.userAgent.EDGE=t("Edge"),Blockly.utils.userAgent.EDGE_OR_IE=Blockly.utils.userAgent.EDGE||Blockly.utils.userAgent.IE,Blockly.utils.userAgent.JAVA_FX=t("JavaFX"),Blockly.utils.userAgent.CHROME=(t("Chrome")||t("CriOS"))&&!Blockly.utils.userAgent.EDGE,Blockly.utils.userAgent.WEBKIT=t("WebKit")&&!Blockly.utils.userAgent.EDGE,Blockly.utils.userAgent.GECKO=t("Gecko")&&!Blockly.utils.userAgent.WEBKIT&&!Blockly.utils.userAgent.IE&&!Blockly.utils.userAgent.EDGE,Blockly.utils.userAgent.ANDROID=t("Android"),Blockly.utils.userAgent.IPAD=t("iPad"),Blockly.utils.userAgent.IPOD=t("iPod"),Blockly.utils.userAgent.IPHONE=t("iPhone")&&!Blockly.utils.userAgent.IPAD&&!Blockly.utils.userAgent.IPOD,Blockly.utils.userAgent.MAC=t("Macintosh"),Blockly.utils.userAgent.TABLET=Blockly.utils.userAgent.IPAD||Blockly.utils.userAgent.ANDROID&&!t("Mobile")||t("Silk"),Blockly.utils.userAgent.MOBILE=!Blockly.utils.userAgent.TABLET&&(Blockly.utils.userAgent.IPOD||Blockly.utils.userAgent.IPHONE||Blockly.utils.userAgent.ANDROID||t("IEMobile"))}(Blockly.utils.global.navigator&&Blockly.utils.global.navigator.userAgent||""),Blockly.utils.noEvent=function(e){e.preventDefault(),e.stopPropagation()},Blockly.utils.isTargetInput=function(e){return"textarea"==e.target.type||"text"==e.target.type||"number"==e.target.type||"email"==e.target.type||"password"==e.target.type||"search"==e.target.type||"tel"==e.target.type||"url"==e.target.type||e.target.isContentEditable},Blockly.utils.getRelativeXY=function(e){var t=new Blockly.utils.Coordinate(0,0),n=e.getAttribute("x");return n&&(t.x=parseInt(n,10)),(n=e.getAttribute("y"))&&(t.y=parseInt(n,10)),(n=(n=e.getAttribute("transform"))&&n.match(Blockly.utils.getRelativeXY.XY_REGEX_))&&(t.x+=Number(n[1]),n[3])&&(t.y+=Number(n[3])),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(Blockly.utils.getRelativeXY.XY_STYLE_REGEX_))&&(t.x+=Number(e[1]),e[3])&&(t.y+=Number(e[3])),t},Blockly.utils.getInjectionDivXY_=function(e){for(var t=0,n=0;e;){var o=Blockly.utils.getRelativeXY(e);if(t+=o.x,n+=o.y,-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new Blockly.utils.Coordinate(t,n)},Blockly.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Blockly.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Blockly.utils.isRightButton=function(e){return!(!e.ctrlKey||!Blockly.utils.userAgent.MAC)||2==e.button},Blockly.utils.mouseToSvg=function(e,t,n){var o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,n=n||t.getScreenCTM().inverse(),o.matrixTransform(n)},Blockly.utils.getScrollDeltaPixels=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*Blockly.LINE_MODE_MULTIPLIER,y:e.deltaY*Blockly.LINE_MODE_MULTIPLIER};case 2:return{x:e.deltaX*Blockly.PAGE_MODE_MULTIPLIER,y:e.deltaY*Blockly.PAGE_MODE_MULTIPLIER}}},Blockly.utils.tokenizeInterpolation=function(e){return Blockly.utils.tokenizeInterpolation_(e,!0)},Blockly.utils.replaceMessageReferences=function(e){return"string"!=typeof e?e:(e=Blockly.utils.tokenizeInterpolation_(e,!1)).length?String(e[0]):""},Blockly.utils.checkMessageReferences=function(e){var t=!0,n=Blockly.Msg;e=e.match(/%{BKY_[A-Z]\w*}/gi);for(var o=0;o<e.length;o++)null==n[e[o].toUpperCase().slice(6,-1)]&&(t=!1);return t},Blockly.utils.tokenizeInterpolation_=function(e,t){var n=[],o=e.split(""),r=(o.push(""),0);e=[];for(var i=null,s=0;s<o.length;s++){var a=o[s];0==r?"%"==a?((a=e.join(""))&&n.push(a),e.length=0,r=1):e.push(a):1==r?"%"==a?(e.push(a),r=0):t&&"0"<=a&&a<="9"?(r=2,i=a,(a=e.join(""))&&n.push(a),e.length=0):r="{"==a?3:(e.push("%",a),0):2==r?"0"<=a&&a<="9"?i+=a:(n.push(parseInt(i,10)),s--,r=0):3==r&&(""==a?(e.splice(0,0,"%{"),s--,r=0):"}"!=a?e.push(a):(r=e.join(""),/[A-Z]\w*/i.test(r)&&(a=r.toUpperCase(),a=Blockly.utils.string.startsWith(a,"BKY_")?a.substring(4):null)&&a in Blockly.Msg?"string"==typeof(r=Blockly.Msg[a])?Array.prototype.push.apply(n,Blockly.utils.tokenizeInterpolation_(r,t)):n.push(t?String(r):r):n.push("%{"+r+"}"),r=e.length=0))}for((a=e.join(""))&&n.push(a),t=[],s=e.length=0;s<n.length;++s)("string"==typeof n[s]?e:((a=e.join(""))&&t.push(a),e.length=0,t)).push(n[s]);return(a=e.join(""))&&t.push(a),e.length=0,t},Blockly.utils.genUid=function(){for(var e=Blockly.utils.genUid.soup_.length,t=[],n=0;n<20;n++)t[n]=Blockly.utils.genUid.soup_.charAt(Math.random()*e);return t.join("")},Blockly.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Blockly.utils.is3dSupported=function(){if(void 0===Blockly.utils.is3dSupported.cached_){if(!Blockly.utils.global.getComputedStyle)return!1;var e,t=document.createElement("p"),n="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(e in document.body.insertBefore(t,null),o)if(void 0!==t.style[e]){if(t.style[e]="translate3d(1px,1px,1px)",!(n=Blockly.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(o[e])}document.body.removeChild(t),Blockly.utils.is3dSupported.cached_="none"!==n}return Blockly.utils.is3dSupported.cached_},Blockly.utils.runAfterPageLoad=function(e){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");var t;"complete"==document.readyState?e():t=setInterval(function(){"complete"==document.readyState&&(clearInterval(t),e())},10)},Blockly.utils.getViewportBBox=function(){var e=Blockly.utils.style.getViewportPageOffset();return{right:document.documentElement.clientWidth+e.x,bottom:document.documentElement.clientHeight+e.y,top:e.y,left:e.x}},Blockly.utils.arrayRemove=function(e,t){return-1!=(t=e.indexOf(t))&&(e.splice(t,1),!0)},Blockly.utils.getDocumentScroll=function(){var e=document.documentElement,t=window;return Blockly.utils.userAgent.IE&&t.pageYOffset!=e.scrollTop?new Blockly.utils.Coordinate(e.scrollLeft,e.scrollTop):new Blockly.utils.Coordinate(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},Blockly.utils.getBlockTypeCounts=function(e,t){var n=Object.create(null),o=e.getDescendants(!0);for(t&&(e=e.getNextBlock())&&(e=o.indexOf(e),o.splice(e,o.length-e)),e=0;t=o[e];e++)n[t.type]?n[t.type]++:n[t.type]=1;return n},!0),initialWidth=0,lastHeight=0,debounceTimeout=null,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,LabelMode,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxt,pxt,pxt;Blockly.utils.resizeTracker=function(t){debounceTimeout&&clearTimeout(debounceTimeout),debounceTimeout=setTimeout(function(){var e=t.getInjectionDiv();resizeFromKeyboard=!0,e&&(initialWidth=e.clientWidth,lastHeight=e.clientHeight)},1e3);var e,n=t.getInjectionDiv();n&&(0==initialWidth&&(resizeFromKeyboard=!0,initialWidth=n.clientWidth,lastHeight=n.clientHeight),resizeFromKeyboard)&&(e=n.clientHeight,n.clientWidth!=initialWidth&&(resizeFromKeyboard=!1),lastHeight<e?resizeFromKeyboard=!1:lastHeight=e)},Blockly.utils.isOnScreenKeyboardResize=function(){return!(!Blockly.utils.dom.hasClass(document.activeElement,"blocklyHtmlInput")||!resizeFromKeyboard)},Blockly.utils.screenToWsCoordinates=function(e,t){var n=t.x,o=(t=t.y,e.getInjectionDiv().getBoundingClientRect()),n=new Blockly.utils.Coordinate(n-o.left,t-o.top);return t=e.getOriginOffsetInPixels(),Blockly.utils.Coordinate.difference(n,t).scale(1/e.scale)},Blockly.utils.parseBlockColour=function(e){var t="string"==typeof e?Blockly.utils.replaceMessageReferences(e):e,n=Number(t);if(!isNaN(n)&&0<=n&&n<=360)return{hue:n,hex:Blockly.utils.colour.hsvToHex(n,Blockly.HSV_SATURATION,255*Blockly.HSV_VALUE)};if(n=Blockly.utils.colour.parse(t))return{hue:null,hex:n};throw n='Invalid colour: "'+t+'"',e!=t&&(n+=' (from "'+e+'")'),Error(n)},Blockly.Events={},Blockly.Events.group_="",Blockly.Events.recordUndo=!0,Blockly.Events.disabled_=0,Blockly.Events.CREATE="create",Blockly.Events.BLOCK_CREATE=Blockly.Events.CREATE,Blockly.Events.DELETE="delete",Blockly.Events.BLOCK_DELETE=Blockly.Events.DELETE,Blockly.Events.CHANGE="change",Blockly.Events.BLOCK_CHANGE=Blockly.Events.CHANGE,Blockly.Events.MOVE="move",Blockly.Events.BLOCK_MOVE=Blockly.Events.MOVE,Blockly.Events.VAR_CREATE="var_create",Blockly.Events.VAR_DELETE="var_delete",Blockly.Events.VAR_RENAME="var_rename",Blockly.Events.COMMENT_CREATE="comment_create",Blockly.Events.COMMENT_DELETE="comment_delete",Blockly.Events.COMMENT_CHANGE="comment_change",Blockly.Events.COMMENT_MOVE="comment_move",Blockly.Events.UI="ui",Blockly.Events.END_DRAG="end_drag",Blockly.Events.COMMENT_CREATE="comment_create",Blockly.Events.COMMENT_DELETE="comment_delete",Blockly.Events.COMMENT_CHANGE="comment_change",Blockly.Events.COMMENT_MOVE="comment_move",Blockly.Events.FINISHED_LOADING="finished_loading",Blockly.Events.BUMP_EVENTS=[Blockly.Events.BLOCK_CREATE,Blockly.Events.BLOCK_MOVE,Blockly.Events.COMMENT_CREATE,Blockly.Events.COMMENT_MOVE],Blockly.Events.FIRE_QUEUE_=[],Blockly.Events.fire=function(e){Blockly.Events.isEnabled()&&(Blockly.Events.FIRE_QUEUE_.length||setTimeout(Blockly.Events.fireNow_,0),Blockly.Events.FIRE_QUEUE_.push(e))},Blockly.Events.fireNow_=function(){for(var e,t,n=Blockly.Events.filter(Blockly.Events.FIRE_QUEUE_,!0),o=Blockly.Events.FIRE_QUEUE_.length=0;e=n[o];o++)e.workspaceId&&(t=Blockly.Workspace.getById(e.workspaceId))&&t.fireChangeListener(e)},Blockly.Events.filter=function(e,t){e=e.slice(),t||e.reverse();for(var n,o,r,i,s=[],a=Object.create(null),l=0;n=e[l];l++)n.isNull()||(i=(r=a[o=[n.type,n.blockId,n.workspaceId].join(" ")])?r.event:null,r?n.type==Blockly.Events.MOVE&&r.index==l-1?(i.newParentId=n.newParentId,i.newInputName=n.newInputName,i.newCoordinate=n.newCoordinate,r.index=l):n.type==Blockly.Events.CHANGE&&n.element==i.element&&n.name==i.name?i.newValue=n.newValue:(n.type!=Blockly.Events.UI||"click"!=n.element||"commentOpen"!=i.element&&"mutatorOpen"!=i.element&&"warningOpen"!=i.element&&"breakpointSet"!=i.element)&&(a[o]={event:n,index:1},s.push(n)):(a[o]={event:n,index:l},s.push(n)));for(e=s.filter(function(e){return!e.isNull()}),t||e.reverse(),l=1;n=e[l];l++)n.type==Blockly.Events.CHANGE&&"mutation"==n.element&&e.unshift(e.splice(l,1)[0]);return e},Blockly.Events.clearPendingUndo=function(){for(var e,t=0;e=Blockly.Events.FIRE_QUEUE_[t];t++)e.recordUndo=!1},Blockly.Events.disable=function(){Blockly.Events.disabled_++},Blockly.Events.enable=function(){Blockly.Events.disabled_--},Blockly.Events.isEnabled=function(){return 0==Blockly.Events.disabled_},Blockly.Events.getGroup=function(){return Blockly.Events.group_},Blockly.Events.setGroup=function(e){Blockly.Events.group_="boolean"==typeof e?e?Blockly.utils.genUid():"":e},Blockly.Events.getDescendantIds=function(e){var t=[];e=e.getDescendants(!1);for(var n,o=0;n=e[o];o++)t[o]=n.id;return t},Blockly.Events.fromJson=function(e,t){switch(e.type){case Blockly.Events.CREATE:var n=new Blockly.Events.Create(null);break;case Blockly.Events.DELETE:n=new Blockly.Events.Delete(null);break;case Blockly.Events.CHANGE:n=new Blockly.Events.Change(null,"","","","");break;case Blockly.Events.MOVE:n=new Blockly.Events.Move(null);break;case Blockly.Events.VAR_CREATE:n=new Blockly.Events.VarCreate(null);break;case Blockly.Events.VAR_DELETE:n=new Blockly.Events.VarDelete(null);break;case Blockly.Events.VAR_RENAME:n=new Blockly.Events.VarRename(null,"");break;case Blockly.Events.UI:n=new Blockly.Events.Ui(null,"","","");break;case Blockly.Events.COMMENT_CREATE:n=new Blockly.Events.CommentCreate(null);break;case Blockly.Events.COMMENT_CHANGE:n=new Blockly.Events.CommentChange(null,"","");break;case Blockly.Events.COMMENT_MOVE:n=new Blockly.Events.CommentMove(null);break;case Blockly.Events.COMMENT_DELETE:new Blockly.Events.CommentDelete(null);case Blockly.Events.END_DRAG:n=new Blockly.Events.EndBlockDrag(null,!1);break;case Blockly.Events.FINISHED_LOADING:n=new Blockly.Events.FinishedLoading(t);break;default:throw Error("Unknown event type.")}return n.fromJson(e),n.workspaceId=t.id,n},Blockly.Events.disableOrphans=function(e){if((e.type==Blockly.Events.MOVE||e.type==Blockly.Events.CREATE)&&e.workspaceId){var t=Blockly.Workspace.getById(e.workspaceId);if(e=t.getBlockById(e.blockId)){var n=e.getParent();if(n&&n.isEnabled())for(t=e.getDescendants(!1),e=0;n=t[e];e++)n.setEnabled(!0);else if((e.outputConnection||e.previousConnection)&&!t.isDragging())for(;e.setEnabled(!1),e=e.getNextBlock(););}}},Blockly.Events.Abstract=function(){this.workspaceId=void 0,this.group=Blockly.Events.getGroup(),this.recordUndo=Blockly.Events.recordUndo},Blockly.Events.Abstract.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),e},Blockly.Events.Abstract.prototype.fromJson=function(e){this.group=e.group},Blockly.Events.Abstract.prototype.isNull=function(){return!1},Blockly.Events.Abstract.prototype.run=function(e){},Blockly.Events.Abstract.prototype.getEventWorkspace_=function(){var e;if(e=this.workspaceId?Blockly.Workspace.getById(this.workspaceId):e)return e;throw Error("Workspace is null. Event must have been generated from real Blockly events.")},Blockly.utils.object={},Blockly.utils.object.inherits=function(e,t){e.superClass_=t.prototype,e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Blockly.utils.object.mixin=function(e,t){for(var n in t)e[n]=t[n]},Blockly.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})},Blockly.Events.Ui=function(e,t,n,o){Blockly.Events.Ui.superClass_.constructor.call(this),this.blockId=e?e.id:null,this.workspaceId=e&&e.workspace?e.workspace.id:void 0,this.element=t,this.oldValue=n,this.newValue=o,this.recordUndo=!1},Blockly.utils.object.inherits(Blockly.Events.Ui,Blockly.Events.Abstract),Blockly.Events.Ui.prototype.type=Blockly.Events.UI,Blockly.Events.Ui.prototype.toJson=function(){var e=Blockly.Events.Ui.superClass_.toJson.call(this);return e.element=this.element,void 0!==this.newValue&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e},Blockly.Events.Ui.prototype.fromJson=function(e){Blockly.Events.Ui.superClass_.fromJson.call(this,e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId},Blockly.utils.dom={},Blockly.utils.dom.SVG_NS="http://www.w3.org/2000/svg",Blockly.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",Blockly.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",Blockly.utils.dom.Node={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},Blockly.utils.dom.cacheWidths_=null,Blockly.utils.dom.cacheReference_=0,Blockly.utils.dom.canvasContext_=null,Blockly.utils.dom.createSvgElement=function(e,t,n){for(var o in e=document.createElementNS(Blockly.utils.dom.SVG_NS,e),t)e.setAttribute(o,t[o]);return document.body.runtimeStyle&&(e.runtimeStyle=e.currentStyle=e.style),n&&n.appendChild(e),e},Blockly.utils.dom.addClass=function(e,t){var n=e.getAttribute("class")||"";return-1==(" "+n+" ").indexOf(" "+t+" ")&&(n&&(n+=" "),e.setAttribute("class",n+t),!0)},Blockly.utils.dom.removeClass=function(e,t){if(-1==(" "+(n=e.getAttribute("class"))+" ").indexOf(" "+t+" "))return!1;for(var n=n.split(/\s+/),o=0;o<n.length;o++)n[o]&&n[o]!=t||(n.splice(o,1),o--);return n.length?e.setAttribute("class",n.join(" ")):e.removeAttribute("class"),!0},Blockly.utils.dom.hasClass=function(e,t){return-1!=(" "+e.getAttribute("class")+" ").indexOf(" "+t+" ")},Blockly.utils.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},Blockly.utils.dom.insertAfter=function(e,t){var n=t.nextSibling;if(!(t=t.parentNode))throw Error("Reference node has no parent.");n?t.insertBefore(e,n):t.appendChild(e)},Blockly.utils.dom.containsNode=function(e,t){return!!(e.compareDocumentPosition(t)&Blockly.utils.dom.Node.DOCUMENT_POSITION_CONTAINED_BY)},Blockly.utils.dom.setCssTransform=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},Blockly.utils.dom.startTextWidthCache=function(){Blockly.utils.dom.cacheReference_++,Blockly.utils.dom.cacheWidths_||(Blockly.utils.dom.cacheWidths_={})},Blockly.utils.dom.stopTextWidthCache=function(){Blockly.utils.dom.cacheReference_--,Blockly.utils.dom.cacheReference_||(Blockly.utils.dom.cacheWidths_=null)},Blockly.utils.dom.getTextWidth=function(e){var t,n=e.textContent+"\n"+e.className.baseVal;if(!Blockly.utils.dom.cacheWidths_||!(t=Blockly.utils.dom.cacheWidths_[n])){try{t=Blockly.utils.userAgent.IE||Blockly.utils.userAgent.EDGE?e.getBBox().width:e.getComputedTextLength()}catch(t){return 8*e.textContent.length}Blockly.utils.dom.cacheWidths_&&(Blockly.utils.dom.cacheWidths_[n]=t)}return t},Blockly.utils.dom.getFastTextWidth=function(e,t,n,o){var r,i=e.textContent;return e=i+"\n"+e.className.baseVal,Blockly.utils.dom.cacheWidths_&&(r=Blockly.utils.dom.cacheWidths_[e])||(Blockly.utils.dom.canvasContext_||((r=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(r),Blockly.utils.dom.canvasContext_=r.getContext("2d")),Blockly.utils.dom.canvasContext_.font=n+" "+t+"pt "+o,r=Blockly.utils.dom.canvasContext_.measureText(i).width,Blockly.utils.dom.cacheWidths_&&(Blockly.utils.dom.cacheWidths_[e]=r)),r},Blockly.BlockDragSurfaceSvg=function(e){this.container_=e,this.createDom()},Blockly.BlockDragSurfaceSvg.prototype.SVG_=null,Blockly.BlockDragSurfaceSvg.prototype.dragGroup_=null,Blockly.BlockDragSurfaceSvg.prototype.container_=null,Blockly.BlockDragSurfaceSvg.prototype.scale_=1,Blockly.BlockDragSurfaceSvg.prototype.surfaceXY_=null,Blockly.BlockDragSurfaceSvg.prototype.dragShadowFilterId_="",Blockly.BlockDragSurfaceSvg.SHADOW_STD_DEVIATION=6,Blockly.BlockDragSurfaceSvg.prototype.createDom=function(){var e;this.SVG_||(this.SVG_=Blockly.utils.dom.createSvgElement("svg",{xmlns:Blockly.utils.dom.SVG_NS,"xmlns:html":Blockly.utils.dom.HTML_NS,"xmlns:xlink":Blockly.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),e=Blockly.utils.dom.createSvgElement("defs",{},this.SVG_),this.dragShadowFilterId_=this.createDropShadowDom_(e),this.dragGroup_=Blockly.utils.dom.createSvgElement("g",{},this.SVG_),this.dragGroup_.setAttribute("filter","url(#"+this.dragShadowFilterId_+")"))},Blockly.BlockDragSurfaceSvg.prototype.createDropShadowDom_=function(e){var t=String(Math.random()).substring(2);return e=Blockly.utils.dom.createSvgElement("filter",{id:"blocklyDragShadowFilter"+t,height:"140%",width:"140%",y:"-20%",x:"-20%"},e),Blockly.utils.dom.createSvgElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:Blockly.BlockDragSurfaceSvg.SHADOW_STD_DEVIATION},e),t=Blockly.utils.dom.createSvgElement("feComponentTransfer",{result:"offsetBlur"},e),Blockly.utils.dom.createSvgElement("feFuncA",{type:"linear",slope:Blockly.Colours.dragShadowOpacity},t),Blockly.utils.dom.createSvgElement("feComposite",{in:"SourceGraphic",in2:"offsetBlur",operator:"over"},e),e.id},Blockly.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(e){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(e),this.SVG_.style.display="block",this.surfaceXY_=new Blockly.utils.Coordinate(0,0),document.getElementsByClassName("injectionDiv")[0].style.overflow="visible"},Blockly.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(e,t,n){this.scale_=n,e=e.toFixed(0),t=t.toFixed(0),this.dragGroup_.setAttribute("transform","translate("+e+","+t+") scale("+n+")")},Blockly.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var e=this.surfaceXY_.x,t=this.surfaceXY_.y,e=e.toFixed(0),t=t.toFixed(0);this.SVG_.style.display="block",Blockly.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+t+"px, 0px)")},Blockly.BlockDragSurfaceSvg.prototype.translateSurface=function(e,t){this.surfaceXY_=new Blockly.utils.Coordinate(e*this.scale_,t*this.scale_),this.translateSurfaceInternal_()},Blockly.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var e=Blockly.utils.getRelativeXY(this.SVG_);return new Blockly.utils.Coordinate(e.x/this.scale_,e.y/this.scale_)},Blockly.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},Blockly.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},Blockly.BlockDragSurfaceSvg.prototype.clearAndHide=function(e){if(e?this.getCurrentBlock()&&e.appendChild(this.getCurrentBlock()):this.getCurrentBlock()&&this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null,document.getElementsByClassName("injectionDiv")[0].style.overflow="hidden"},Blockly.BlockDragSurfaceSvg.prototype.setOpacity=function(e){this.SVG_.setAttribute("opacity",e)},Blockly.utils.IdGenerator={},Blockly.utils.IdGenerator.nextId_=0,Blockly.utils.IdGenerator.getNextUniqueId=function(){return"blockly:"+(Blockly.utils.IdGenerator.nextId_++).toString(36)},Blockly.Component=function(){this.rightToLeft_=Blockly.Component.defaultRightToLeft,this.id_=null,this.inDocument_=!1,this.parent_=this.element_=null,this.children_=[],this.childIndex_={}},Blockly.Component.defaultRightToLeft=!1,Blockly.Component.Error={ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds"},Blockly.Component.prototype.getId=function(){return this.id_||(this.id_=Blockly.utils.IdGenerator.getNextUniqueId())},Blockly.Component.prototype.getElement=function(){return this.element_},Blockly.Component.prototype.setElementInternal=function(e){this.element_=e},Blockly.Component.prototype.setParent=function(e){if(this==e)throw Error(Blockly.Component.Error.PARENT_UNABLE_TO_BE_SET);if(e&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=e)throw Error(Blockly.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=e},Blockly.Component.prototype.getParent=function(){return this.parent_},Blockly.Component.prototype.isInDocument=function(){return this.inDocument_},Blockly.Component.prototype.createDom=function(){this.element_=document.createElement("div")},Blockly.Component.prototype.render=function(e){this.render_(e)},Blockly.Component.prototype.renderBefore=function(e){this.render_(e.parentNode,e)},Blockly.Component.prototype.render_=function(e,t){if(this.inDocument_)throw Error(Blockly.Component.Error.ALREADY_RENDERED);this.element_||this.createDom(),e?e.insertBefore(this.element_,t||null):document.body.appendChild(this.element_),this.parent_&&!this.parent_.isInDocument()||this.enterDocument()},Blockly.Component.prototype.enterDocument=function(){this.inDocument_=!0,this.forEachChild(function(e){!e.isInDocument()&&e.getElement()&&e.enterDocument()})},Blockly.Component.prototype.exitDocument=function(){this.forEachChild(function(e){e.isInDocument()&&e.exitDocument()}),this.inDocument_=!1},Blockly.Component.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},Blockly.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument(),this.forEachChild(function(e){e.dispose()}),this.element_&&Blockly.utils.dom.removeNode(this.element_),this.parent_=this.element_=this.childIndex_=this.children_=null},Blockly.Component.prototype.addChild=function(e,t){this.addChildAt(e,this.getChildCount(),t)},Blockly.Component.prototype.addChildAt=function(e,t,n){if(e.inDocument_&&(n||!this.inDocument_))throw Error(Blockly.Component.Error.ALREADY_RENDERED);if(t<0||t>this.getChildCount())throw Error(Blockly.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);var o;(this.childIndex_[e.getId()]=e).getParent()==this&&-1<(o=this.children_.indexOf(e))&&this.children_.splice(o,1),e.setParent(this),this.children_.splice(t,0,e),e.inDocument_&&this.inDocument_&&e.getParent()==this?(t=(n=this.getContentElement()).childNodes[t]||null)!=e.getElement()&&n.insertBefore(e.getElement(),t):n?(this.element_||this.createDom(),t=this.getChildAt(t+1),e.render_(this.getContentElement(),t?t.element_:null)):this.inDocument_&&!e.inDocument_&&e.element_&&e.element_.parentNode&&e.element_.parentNode.nodeType==Blockly.utils.dom.Node.ELEMENT_NODE&&e.enterDocument()},Blockly.Component.prototype.getContentElement=function(){return this.element_},Blockly.Component.prototype.isRightToLeft=function(){return this.rightToLeft_},Blockly.Component.prototype.setRightToLeft=function(e){if(this.inDocument_)throw Error(Blockly.Component.Error.ALREADY_RENDERED);this.rightToLeft_=e},Blockly.Component.prototype.hasChildren=function(){return 0!=this.children_.length},Blockly.Component.prototype.getChildCount=function(){return this.children_.length},Blockly.Component.prototype.getChild=function(e){return e&&this.childIndex_[e]||null},Blockly.Component.prototype.getChildAt=function(e){return this.children_[e]||null},Blockly.Component.prototype.forEachChild=function(e,t){for(var n=0;n<this.children_.length;n++)e.call(t,this.children_[n],n)},Blockly.Component.prototype.indexOfChild=function(e){return this.children_.indexOf(e)},Blockly.Colours={text:"#575E75",workspace:"#F9F9F9",toolboxHover:"#4C97FF",toolboxSelected:"#e9eef2",toolboxText:"#575E75",toolbox:"#FFFFFF",flyout:"#444",scrollbar:"#CECDCE",scrollbarHover:"#CECDCE",textField:"#FFFFFF",insertionMarker:"#000000",insertionMarkerOpacity:.2,dragShadowOpacity:.4,stackGlow:"#FFF200",stackGlowSize:4,stackGlowOpacity:1,replacementGlow:"#FFF200",replacementGlowSize:2,replacementGlowOpacity:1,highlightGlow:"#FFF200",highlightGlowSize:1.1,highlightGlowOpacity:1,selectedGlow:"#FFF200",selectedGlowSize:.4,warningGlow:"#E53D00",warningGlowSize:1.1,warningGlowOpacity:1,colourPickerStroke:"#FFFFFF",fieldShadow:"rgba(255, 255, 255, 0.2)",dropDownShadow:"rgba(0, 0, 0, .3)",numPadBackground:"#547AB2",numPadBorder:"#435F91",numPadActiveBackground:"#435F91",numPadText:"#FFFFFF",valueReportBackground:"#FFFFFF",valueReportBorder:"#AAAAAA",canvasTransitionLength:500},Blockly.Css={},Blockly.Css.injected_=!1,Blockly.Css.register=function(e){if(Blockly.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(Blockly.Css.CONTENT,e),e.length=0},Blockly.Css.inject=function(e,t){if(!Blockly.Css.injected_){Blockly.Css.injected_=!0;var n=Blockly.Css.CONTENT.join("\n");if(Blockly.Css.CONTENT.length=0,e){for(var o in e=t.replace(/[\\/]$/,""),n=n.replace(/<<<PATH>>>/g,e),Blockly.Colours)Blockly.Colours.hasOwnProperty(o)&&(n=n.replace(new RegExp("\\$colour\\_"+o,"g"),Blockly.Colours[o]));(o=document.createElement("style")).id="blockly-common-style",n=document.createTextNode(n),o.appendChild(n),document.head.insertBefore(o,document.head.firstChild)}}},Blockly.Css.setCursor=function(e){console.warn("Deprecated call to Blockly.Css.setCursor. See https://github.com/google/blockly/issues/981 for context")},Blockly.Css.CONTENT=[".blocklySvg {","background-color: $colour_workspace;","outline: none;","overflow: hidden;","position: absolute;","display: block;","touch-action: none;","}",".blocklyRelativeWrapper {","position: relative;","width: 100%;","height: 100%;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyWidgetDiv.fieldTextInput {","overflow: hidden;","border: 1px solid;","box-sizing: border-box;","transform-origin: 0 0;","-ms-transform-origin: 0 0;","-moz-transform-origin: 0 0;","-webkit-transform-origin: 0 0;","}",".blocklyTextDropDownArrow {","position: absolute;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","touch-action: none;","cursor: move;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyTransitioning {","transition: all 0.5s ease-in-out;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 9pt;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","box-shadow: 0px 0px 8px 1px "+Blockly.Colours.dropDownShadow+";","padding: 4px;","box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.focused {","box-shadow: 0px 0px 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyDropDownButtonHover {","box-shadow: 0px 0px 0px 4px "+Blockly.Colours.fieldShadow+";","}",".blocklyDropDownButton:active {","box-shadow: 0px 0px 0px 6px "+Blockly.Colours.fieldShadow+";","}",".blocklyDropDownButton > img {","width: 80%;","height: 80%;","margin-top: 5%","}",".blocklyDropDownPlaceholder {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","}",".blocklyNumPadButton {","display: inline-block;","float: left;","padding: 0;","width: 48px;","height: 48px;","margin: 4px;","border-radius: 4px;","background: $colour_numPadBackground;","color: $colour_numPadText;","outline: none;","border: 1px solid $colour_numPadBorder;","cursor: pointer;","font-weight: 600;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 12pt;","-webkit-tap-highlight-color: rgba(0,0,0,0);","}",".blocklyNumPadButton > img {","margin-top: 10%;","width: 80%;","height: 80%;","}",".blocklyNumPadButton:active {","background: $colour_numPadActiveBackground;","-webkit-tap-highlight-color: rgba(0,0,0,0);","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".valueReportBox {","min-width: 50px;","max-width: 300px;","max-height: 200px;","overflow: auto;","word-wrap: break-word;","text-align: center;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: .8em;","}",".blocklyResizeSE {","cursor: se-resize;","fill: transparent;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: transparent;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #FFF200;","stroke-width: 4px;","}",".blocklyPath {","stroke-width: 1px;","transition: stroke .4s;","}",".blocklyDraggable:not(.blocklySelected)>.blocklyPath.blocklyReporterHover {","stroke-width: 2px;","stroke: white;","}",".blocklyBlockBackground.blocklyFieldHover {","stroke-width: 2px;","stroke: white;","}",".blocklySelected>.blocklyPath {","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","touch-action: none;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","touch-action: none;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPath {","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDisabled .blocklyEditableText .blocklyBlockBackground,",".blocklyDisabled .blocklyNonEditableText .blocklyBlockBackground,",'.blocklyDisabled g[data-argument-type="dropdown"] .blocklyBlockBackground {',"fill-opacity: 0.1 !important;","}",".blocklyInsertionMarker>.blocklyPath {","stroke: none;","}",".blocklyInsertionMarker>.blocklyIconGroup {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none","}",".blocklyReplaceable .blocklyPath {","fill-opacity: 0.5;","}",".blocklyReplaceable .blocklyPathLight,",".blocklyReplaceable .blocklyPathDark {","display: none;","}",".blocklyText {","cursor: default;","fill: #fff;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 12pt;","font-weight: bold;","}",".blocklyTextTruncated {","font-size: 11pt;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>g>text {","pointer-events: none;","}",".blocklyNonEditableText>text,",".blocklyEditableText>text,",".blocklyNonEditableText>g>text,",".blocklyEditableText>g>text {","fill: $colour_text;","}",".blocklyDropdownText {","fill: #fff !important;","}",".blocklyBubbleText {","fill: #fff;","}",".blocklyBubbleCanvas {","user-select: none;","-moz-user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklySvg text, .blocklyBlockDragSurface text, .blocklyFlyout text, .blocklyToolboxDiv text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup,",".blocklyBreakpointIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyBreakpointIconGroup:hover,",".blocklyBreakpointIconGroupReadonly {","fill-opacity: .6;","}",".blocklyIconShape {","fill: #000;","stroke-width: 1px;","stroke: #fff;","cursor: pointer;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","background-color: #FAF6BD;","}",".blocklyUneditableMinimalBody {","fill: #FAF6BD;","}",".blocklyHtmlInput {","border: none;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 12pt;","height: 100%;","margin: 0;","outline: none;","box-sizing: border-box;","width: 100%;","text-align: center;","color: $colour_text;","font-weight: bold;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","touch-action: none;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: $colour_flyout;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal, .blocklyScrollbarVertical {","position: absolute;","outline: none;","touch-action: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: $colour_scrollbar;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: $colour_scrollbarHover;","}",".blocklyZoom>image {","opacity: 1;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropDownNumPad {","background-color: $colour_numPadBackground;","}",".blocklyWidgetDiv .blocklyDropdownMenu .goog-menuitem,",".blocklyDropDownDiv .blocklyDropdownMenu .goog-menuitem {","padding-left: 28px;","}",".blocklyWidgetDiv .blocklyDropdownMenu .goog-menuitem.goog-menuitem-rtl,",".blocklyDropDownDiv .blocklyDropdownMenu .goog-menuitem.goog-menuitem-rtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","}",".blocklyWidgetDiv .goog-menu {","background: #fff;","border-color: transparent;","border-style: solid;","border-width: 1px;","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .goog-menu {","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);","}",".blocklyWidgetDiv .goog-menu.focused {","box-shadow: 0px 0px 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .goog-menu {","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","}",".blocklyWidgetDiv .goog-menuitem,",".blocklyDropDownDiv .goog-menuitem {","color: #000;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"list-style: none;","margin: 0;","min-width: 7em;","border: none;","padding: 6px 15px;","white-space: nowrap;","cursor: pointer;","}",".blocklyWidgetDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyWidgetDiv .goog-menu-noicon .goog-menuitem,",".blocklyDropDownDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyDropDownDiv .goog-menu-noicon .goog-menuitem {","padding-left: 12px;","}",".blocklyWidgetDiv .goog-menuitem-content,",".blocklyDropDownDiv .goog-menuitem-content {","font-family: Arial, sans-serif;","font-size: 13px;","}",".blocklyWidgetDiv .goog-menuitem-content {","color: #000;","}",".blocklyDropDownDiv .goog-menuitem-content {","color: #000;","}",".blocklyWidgetDiv .goog-menuitem-disabled,",".blocklyDropDownDiv .goog-menuitem-disabled {","cursor: inherit;","}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-content,",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-content {","color: #ccc !important;","}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-icon {","opacity: .3;","filter: alpha(opacity=30);","}",".blocklyWidgetDiv .goog-menuitem-highlight ,",".blocklyDropDownDiv .goog-menuitem-highlight {","background-color: rgba(0,0,0,.1);","}",".blocklyWidgetDiv .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-icon {","background-repeat: no-repeat;","height: 16px;","left: 6px;","position: absolute;","right: auto;","vertical-align: middle;","width: 16px;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {","left: auto;","right: 6px;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;","position: static;","float: left;","margin-left: -24px;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {","float: right;","margin-right: -24px;","}",".blocklyWidgetDiv .goog-menuseparator, ",".blocklyDropDownDiv .goog-menuseparator {","border-top: 1px solid #ccc;","margin: 4px 0;","padding: 0;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyDropDownDiv .goog-slider-horizontal {","margin: 8px;","height: 22px;","width: 150px;","position: relative;","outline: none;","border-radius: 11px;","margin-bottom: 20px;","background: #547AB2","}",".blocklyDropDownDiv .goog-slider-horizontal .goog-slider-thumb {","width: 26px;","height: 26px;","top: -1px;","position: absolute;","background-color: white;","border-radius: 100%;","-webkit-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","-moz-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","cursor: pointer","}",".blocklyFieldSliderLabel {",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 0.65rem;","color: $colour_toolboxText;","margin: 8px;","}",".blocklyFieldSliderLabelText {","font-weight: bold;","}",".blocklyFieldSliderReadout {","margin-left: 10px;","}",".blocklyHighlighted>.blocklyPath {","stroke: #ff8b27;","stroke-width: 5px;","}",".argumentEditorRemoveIcon {","position: absolute;","width: 24px;","height: 24px;","top: -40px;","left: 50%;","margin-left: -12px;","cursor: pointer;","}",".functioneditor i.argumentEditorTypeIcon {","position: absolute;","width: 24px;","height: 24px;","top: 40px;","left: 50%;","margin-left: -12px;","}",".blocklyWidgetDiv.fieldTextInput.argumentEditorInput {","overflow: visible;","}",".functionNameText {","font-weight: bold;","}",".field-text-quote {","fill: #a31515 !important;","}",""],Blockly.utils.math={},Blockly.utils.math.toRadians=function(e){return e*Math.PI/180},Blockly.utils.math.toDegrees=function(e){return 180*e/Math.PI},Blockly.utils.math.clamp=function(e,t,n){var o;return n<e&&(o=n,n=e,e=o),Math.max(e,Math.min(t,n))},Blockly.DropDownDiv=function(){},Blockly.DropDownDiv.boundsElement_=null,Blockly.DropDownDiv.owner_=null,Blockly.DropDownDiv.positionToField_=null,Blockly.DropDownDiv.ARROW_SIZE=16,Blockly.DropDownDiv.BORDER_SIZE=1,Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,Blockly.DropDownDiv.PADDING_Y=20,Blockly.DropDownDiv.ANIMATION_TIME=.25,Blockly.DropDownDiv.animateOutTimer_=null,Blockly.DropDownDiv.onHide_=null,Blockly.DropDownDiv.rendererClassName_=null,Blockly.DropDownDiv.themeClassName_=null,Blockly.DropDownDiv.createDom=function(){var e,t;Blockly.DropDownDiv.DIV_||((e=document.createElement("div")).className="blocklyDropDownDiv",document.body.appendChild(e),Blockly.DropDownDiv.DIV_=e,(t=document.createElement("div")).className="blocklyDropDownContent",e.appendChild(t),Blockly.DropDownDiv.content_=t,(t=document.createElement("div")).className="blocklyDropDownArrow",e.appendChild(t),Blockly.DropDownDiv.arrow_=t,Blockly.DropDownDiv.DIV_.style.opacity=0,Blockly.DropDownDiv.DIV_.style.transition="transform "+Blockly.DropDownDiv.ANIMATION_TIME+"s, opacity "+Blockly.DropDownDiv.ANIMATION_TIME+"s",e.addEventListener("focusin",function(){Blockly.utils.dom.addClass(e,"focused")}),e.addEventListener("focusout",function(){Blockly.utils.dom.removeClass(e,"focused")}))},Blockly.DropDownDiv.setBoundsElement=function(e){Blockly.DropDownDiv.boundsElement_=e},Blockly.DropDownDiv.getContentDiv=function(){return Blockly.DropDownDiv.content_},Blockly.DropDownDiv.clearContent=function(){Blockly.DropDownDiv.content_.innerHTML="",Blockly.DropDownDiv.content_.style.width=""},Blockly.DropDownDiv.setColour=function(e,t){Blockly.DropDownDiv.DIV_.style.backgroundColor=e,Blockly.DropDownDiv.DIV_.style.borderColor=t},Blockly.DropDownDiv.showPositionedByBlock=function(e,t,n,o){return Blockly.DropDownDiv.showPositionedByRect_(Blockly.DropDownDiv.getScaledBboxOfBlock_(t),e,n,o)},Blockly.DropDownDiv.showPositionedByField=function(e,t,n){return Blockly.DropDownDiv.positionToField_=!0,Blockly.DropDownDiv.showPositionedByRect_(Blockly.DropDownDiv.getScaledBboxOfField_(e),e,t,n)},Blockly.DropDownDiv.getScaledBboxOfBlock_=function(e){var t=e.getSvgRoot(),n=t.getBBox(),o=e.workspace.scale;return e=n.height*o,n=n.width*o,t=Blockly.utils.style.getPageOffset(t),new Blockly.utils.Rect(t.y,t.y+e,t.x,t.x+n)},Blockly.DropDownDiv.getScaledBboxOfField_=function(e){return e=e.getScaledBBox(),new Blockly.utils.Rect(e.top,e.bottom,e.left,e.right)},Blockly.DropDownDiv.showPositionedByRect_=function(e,t,n,o){var r=e.left+(e.right-e.left)/2,i=e.bottom;return e=e.top,o&&(e+=o),o=t.getSourceBlock(),Blockly.DropDownDiv.setBoundsElement(o.workspace.getParentSvg().parentNode),Blockly.DropDownDiv.show(t,o.RTL,r,i,r,e,n)},Blockly.DropDownDiv.show=function(e,t,n,o,r,i,s){return Blockly.DropDownDiv.owner_=e,Blockly.DropDownDiv.onHide_=s||null,(e=Blockly.DropDownDiv.DIV_).style.direction=t?"rtl":"ltr",Blockly.DropDownDiv.rendererClassName_=Blockly.getMainWorkspace().getRenderer().name+"-renderer",Blockly.DropDownDiv.themeClassName_=Blockly.getMainWorkspace().getTheme().name+"-theme",Blockly.utils.dom.addClass(e,Blockly.DropDownDiv.rendererClassName_),Blockly.utils.dom.addClass(e,Blockly.DropDownDiv.themeClassName_),Blockly.DropDownDiv.positionInternal_(n,o,r,i)},Blockly.DropDownDiv.getBoundsInfo_=function(){var e=Blockly.utils.style.getPageOffset(Blockly.DropDownDiv.boundsElement_),t=Blockly.utils.style.getSize(Blockly.DropDownDiv.boundsElement_);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},Blockly.DropDownDiv.getPositionMetrics_=function(e,t,n,o){var r=Blockly.DropDownDiv.getBoundsInfo_(),i=Blockly.utils.style.getSize(Blockly.DropDownDiv.DIV_);return t+i.height<r.bottom?Blockly.DropDownDiv.getPositionBelowMetrics_(e,t,r,i):o-i.height>r.top?Blockly.DropDownDiv.getPositionAboveMetrics_(n,o,r,i):t+i.height<document.documentElement.clientHeight?Blockly.DropDownDiv.getPositionBelowMetrics_(e,t,r,i):o-i.height>document.documentElement.clientTop?Blockly.DropDownDiv.getPositionAboveMetrics_(n,o,r,i):Blockly.DropDownDiv.getPositionTopOfPageMetrics_(e,r,i)},Blockly.DropDownDiv.getPositionBelowMetrics_=function(e,t,n,o){return{initialX:(e=Blockly.DropDownDiv.getPositionX(e,n.left,n.right,o.width)).divX,initialY:t,finalX:e.divX,finalY:t+Blockly.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:-(Blockly.DropDownDiv.ARROW_SIZE/2+Blockly.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},Blockly.DropDownDiv.getPositionAboveMetrics_=function(e,t,n,o){return{initialX:(e=Blockly.DropDownDiv.getPositionX(e,n.left,n.right,o.width)).divX,initialY:t-o.height,finalX:e.divX,finalY:t-o.height-Blockly.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:o.height-2*Blockly.DropDownDiv.BORDER_SIZE-Blockly.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},Blockly.DropDownDiv.getPositionTopOfPageMetrics_=function(e,t,n){return{initialX:(e=Blockly.DropDownDiv.getPositionX(e,t.left,t.right,n.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowVisible:!1}},Blockly.DropDownDiv.getPositionX=function(e,t,n,o){var r=e;return e=Blockly.utils.math.clamp(t,e-o/2,n-o),r-=Blockly.DropDownDiv.ARROW_SIZE/2,t=Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING,{arrowX:o=Blockly.utils.math.clamp(t,r-e,o-t-Blockly.DropDownDiv.ARROW_SIZE),divX:e}},Blockly.DropDownDiv.isVisible=function(){return!!Blockly.DropDownDiv.owner_},Blockly.DropDownDiv.isDisplayed=function(){return"none"!=Blockly.DropDownDiv.DIV_.style.display},Blockly.DropDownDiv.hideIfOwner=function(e,t){return Blockly.DropDownDiv.owner_===e&&(t?Blockly.DropDownDiv.hideWithoutAnimation():Blockly.DropDownDiv.hide(),!0)},Blockly.DropDownDiv.hide=function(){var e=Blockly.DropDownDiv.DIV_;e.style.transform="translate(0, 0)",e.style.opacity=0,Blockly.DropDownDiv.animateOutTimer_=setTimeout(function(){Blockly.DropDownDiv.hideWithoutAnimation()},1e3*Blockly.DropDownDiv.ANIMATION_TIME),Blockly.DropDownDiv.onHide_&&(Blockly.DropDownDiv.onHide_(),Blockly.DropDownDiv.onHide_=null)},Blockly.DropDownDiv.hideWithoutAnimation=function(){var e;Blockly.DropDownDiv.isVisible()&&(Blockly.DropDownDiv.animateOutTimer_&&clearTimeout(Blockly.DropDownDiv.animateOutTimer_),(e=Blockly.DropDownDiv.DIV_).style.transform="",e.style.left="",e.style.top="",e.style.opacity=0,e.style.display="none",e.style.backgroundColor="",e.style.borderColor="",Blockly.DropDownDiv.onHide_&&(Blockly.DropDownDiv.onHide_(),Blockly.DropDownDiv.onHide_=null),Blockly.DropDownDiv.clearContent(),Blockly.DropDownDiv.owner_=null,Blockly.DropDownDiv.rendererClassName_&&(Blockly.utils.dom.removeClass(e,Blockly.DropDownDiv.rendererClassName_),Blockly.DropDownDiv.rendererClassName_=null),Blockly.DropDownDiv.themeClassName_&&(Blockly.utils.dom.removeClass(e,Blockly.DropDownDiv.themeClassName_),Blockly.DropDownDiv.themeClassName_=null),Blockly.getMainWorkspace().markFocused())},Blockly.DropDownDiv.positionInternal_=function(e,t,n,o){(e=Blockly.DropDownDiv.getPositionMetrics_(e,t,n,o)).arrowVisible?(Blockly.DropDownDiv.arrow_.style.display="",Blockly.DropDownDiv.arrow_.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",Blockly.DropDownDiv.arrow_.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Blockly.DropDownDiv.arrow_.style.display="none",t=Math.floor(e.initialX),n=Math.floor(e.initialY),o=Math.floor(e.finalX);var r=Math.floor(e.finalY),i=Blockly.DropDownDiv.DIV_;return i.style.left=t+"px",i.style.top=n+"px",i.style.display="block",i.style.opacity=1,i.style.transform="translate("+(o-t)+"px,"+(r-n)+"px)",e.arrowAtTop},Blockly.DropDownDiv.repositionForWindowResize=function(){var e,t;Blockly.DropDownDiv.isVisible()&&Blockly.DropDownDiv.isDisplayed()?(e=Blockly.DropDownDiv.owner_,t=Blockly.DropDownDiv.owner_.getSourceBlock(),t=(e=Blockly.DropDownDiv.positionToField_?Blockly.DropDownDiv.getScaledBboxOfField_(e):Blockly.DropDownDiv.getScaledBboxOfBlock_(t)).left+(e.right-e.left)/2,Blockly.DropDownDiv.positionInternal_(t,e.bottom,t,e.top)):Blockly.DropDownDiv.hideWithoutAnimation()},Blockly.Grid=function(e,t){this.gridPattern_=e,this.spacing_=t.spacing,this.length_=t.length,this.line2_=(this.line1_=e.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=t.snap,this.imageOptions_=t.image},Blockly.Grid.prototype.scale_=1,Blockly.Grid.prototype.dispose=function(){this.gridPattern_=null},Blockly.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},Blockly.Grid.prototype.getSpacing=function(){return this.spacing_},Blockly.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},Blockly.Grid.prototype.update=function(e){this.scale_=e;var t=this.spacing_*e||100,n=(this.gridPattern_.setAttribute("width",this.imageOptions_&&this.imageOptions_.width?this.imageOptions_.width:t),this.gridPattern_.setAttribute("height",this.imageOptions_&&this.imageOptions_.height?this.imageOptions_.height:t),(t=Math.floor(this.spacing_/2)+.5)-this.length_/2),o=t+this.length_/2;t*=e,n*=e,o*=e,this.imageOptions_?this.gridPattern_.setAttribute("patternTransform","scale("+e+")"):(this.setLineAttributes_(this.line1_,e,n,o,t,t),this.setLineAttributes_(this.line2_,e,t,t,n,o))},Blockly.Grid.prototype.setLineAttributes_=function(e,t,n,o,r,i){e&&(e.setAttribute("stroke-width",t),e.setAttribute("x1",n),e.setAttribute("y1",r),e.setAttribute("x2",o),e.setAttribute("y2",i))},Blockly.Grid.prototype.moveTo=function(e,t){this.gridPattern_.setAttribute("x",e),this.gridPattern_.setAttribute("y",t),(Blockly.utils.userAgent.IE||Blockly.utils.userAgent.EDGE)&&this.update(this.scale_)},Blockly.Grid.createDom=function(e,t,n){return e=Blockly.utils.dom.createSvgElement("pattern",{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},n),0<t.length&&0<t.spacing?(Blockly.utils.dom.createSvgElement("line",{stroke:t.colour},e),1<t.length&&Blockly.utils.dom.createSvgElement("line",{stroke:t.colour},e)):t.image&&t.image.path?(t=t.image,delete(n=JSON.parse(JSON.stringify(t))).path,Blockly.utils.dom.createSvgElement("image",n,e).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.path),this.imageOptions_=t):Blockly.utils.dom.createSvgElement("line",{},e),e},Blockly.Theme=function(e,t,n,o){this.name=e,this.blockStyles=t,this.categoryStyles=n,this.componentStyles_=o||Object.create(null)},Blockly.Theme.prototype.getComponentStyle=function(e){return(e=this.componentStyles_[e])&&"string"==typeof propertyValue&&this.getComponentStyle(e)?this.getComponentStyle(e):e?String(e):null},Blockly.Theme.prototype.setComponentStyle=function(e,t){this.componentStyles_[e]=t},Blockly.Themes={},Blockly.Themes.Classic={},Blockly.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},field_blocks:{colourPrimary:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},Blockly.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},Blockly.Themes.Classic=new Blockly.Theme("classic",Blockly.Themes.Classic.defaultBlockStyles,Blockly.Themes.Classic.categoryStyles),Blockly.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},Blockly.user={},Blockly.user.keyMap={},Blockly.user.keyMap.map_={},Blockly.user.keyMap.modifierKeys={SHIFT:"Shift",CONTROL:"Control",ALT:"Alt",META:"Meta"},Blockly.user.keyMap.setActionForKey=function(e,t){var n=Blockly.user.keyMap.getKeyByAction(t);n&&delete Blockly.user.keyMap.map_[n],Blockly.user.keyMap.map_[e]=t},Blockly.user.keyMap.setKeyMap=function(e){Blockly.user.keyMap.map_=e},Blockly.user.keyMap.getKeyMap=function(){var e={};return Blockly.utils.object.mixin(e,Blockly.user.keyMap.map_),e},Blockly.user.keyMap.getActionByKeyCode=function(e){return Blockly.user.keyMap.map_[e]},Blockly.user.keyMap.getKeyByAction=function(e){for(var t,n=Object.keys(Blockly.user.keyMap.map_),o=0;t=n[o];o++)if(Blockly.user.keyMap.map_[t].name===e.name)return t;return null},Blockly.user.keyMap.serializeKeyEvent=function(e){for(var t,n=Blockly.utils.object.values(Blockly.user.keyMap.modifierKeys),o="",r=0;t=n[r];r++)e.getModifierState(t)&&(o+=t);return o+e.keyCode},Blockly.user.keyMap.checkModifiers_=function(e,t){for(var n,o=0;n=e[o];o++)if(t.indexOf(n)<0)throw Error(n+" is not a valid modifier key.")},Blockly.user.keyMap.createSerializedKey=function(e,t){var n="",o=Blockly.utils.object.values(Blockly.user.keyMap.modifierKeys);Blockly.user.keyMap.checkModifiers_(t,o);for(var r,i=0;r=o[i];i++)-1<t.indexOf(r)&&(n+=r);return n+e},Blockly.user.keyMap.createDefaultKeyMap=function(){var e={},t=Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.K,[Blockly.user.keyMap.modifierKeys.CONTROL,Blockly.user.keyMap.modifierKeys.SHIFT]),n=Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.W,[Blockly.user.keyMap.modifierKeys.SHIFT]),o=Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.A,[Blockly.user.keyMap.modifierKeys.SHIFT]),r=Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.S,[Blockly.user.keyMap.modifierKeys.SHIFT]),i=Blockly.user.keyMap.createSerializedKey(Blockly.utils.KeyCodes.D,[Blockly.user.keyMap.modifierKeys.SHIFT]);return e[Blockly.utils.KeyCodes.W]=Blockly.navigation.ACTION_PREVIOUS,e[Blockly.utils.KeyCodes.A]=Blockly.navigation.ACTION_OUT,e[Blockly.utils.KeyCodes.S]=Blockly.navigation.ACTION_NEXT,e[Blockly.utils.KeyCodes.D]=Blockly.navigation.ACTION_IN,e[Blockly.utils.KeyCodes.I]=Blockly.navigation.ACTION_INSERT,e[Blockly.utils.KeyCodes.ENTER]=Blockly.navigation.ACTION_MARK,e[Blockly.utils.KeyCodes.X]=Blockly.navigation.ACTION_DISCONNECT,e[Blockly.utils.KeyCodes.T]=Blockly.navigation.ACTION_TOOLBOX,e[Blockly.utils.KeyCodes.E]=Blockly.navigation.ACTION_EXIT,e[Blockly.utils.KeyCodes.ESC]=Blockly.navigation.ACTION_EXIT,e[t]=Blockly.navigation.ACTION_TOGGLE_KEYBOARD_NAV,e[n]=Blockly.navigation.ACTION_MOVE_WS_CURSOR_UP,e[o]=Blockly.navigation.ACTION_MOVE_WS_CURSOR_LEFT,e[r]=Blockly.navigation.ACTION_MOVE_WS_CURSOR_DOWN,e[i]=Blockly.navigation.ACTION_MOVE_WS_CURSOR_RIGHT,e},Blockly.utils.xml={},Blockly.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",Blockly.utils.xml.document=function(){return document},Blockly.utils.xml.createElement=function(e){return Blockly.utils.xml.document().createElementNS(Blockly.utils.xml.NAME_SPACE,e)},Blockly.utils.xml.createTextNode=function(e){return Blockly.utils.xml.document().createTextNode(e)},Blockly.utils.xml.textToDomDocument=function(e){return(new DOMParser).parseFromString(e,"text/xml")},Blockly.utils.xml.domToText=function(e){return(new XMLSerializer).serializeToString(e)},Blockly.Events.BlockBase=function(e){Blockly.Events.BlockBase.superClass_.constructor.call(this),this.blockId=e.id,this.workspaceId=e.workspace.id},Blockly.utils.object.inherits(Blockly.Events.BlockBase,Blockly.Events.Abstract),Blockly.Events.BlockBase.prototype.toJson=function(){var e=Blockly.Events.BlockBase.superClass_.toJson.call(this);return e.blockId=this.blockId,e},Blockly.Events.BlockBase.prototype.fromJson=function(e){Blockly.Events.BlockBase.superClass_.fromJson.call(this,e),this.blockId=e.blockId},Blockly.Events.Change=function(e,t,n,o,r){e&&(Blockly.Events.Change.superClass_.constructor.call(this,e),this.element=t,this.name=n,this.oldValue=o,this.newValue=r)},Blockly.utils.object.inherits(Blockly.Events.Change,Blockly.Events.BlockBase),Blockly.Events.BlockChange=Blockly.Events.Change,Blockly.Events.Change.prototype.type=Blockly.Events.CHANGE,Blockly.Events.Change.prototype.toJson=function(){var e=Blockly.Events.Change.superClass_.toJson.call(this);return e.element=this.element,this.name&&(e.name=this.name),e.newValue=this.newValue,e},Blockly.Events.Change.prototype.fromJson=function(e){Blockly.Events.Change.superClass_.fromJson.call(this,e),this.element=e.element,this.name=e.name,this.newValue=e.newValue},Blockly.Events.Change.prototype.isNull=function(){return this.oldValue==this.newValue},Blockly.Events.Change.prototype.run=function(e){var t=this.getEventWorkspace_().getBlockById(this.blockId);if(t)switch(t.mutator&&t.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"breakpoint":t.enableBreakpoint(e);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":t.setEnabled(!e);break;case"inline":t.setInputsInline(!!e);break;case"mutation":var n,o="";t.mutationToDom&&(o=(o=t.mutationToDom())&&Blockly.Xml.domToText(o)),t.domToMutation&&(n=Blockly.Xml.textToDom(e||"<mutation/>"),t.domToMutation(n),t.initSvg(),t.rendered)&&t.render(),Blockly.Events.fire(new Blockly.Events.Change(t,"mutation",null,o,e));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},Blockly.Events.Create=function(e){e&&(Blockly.Events.Create.superClass_.constructor.call(this,e),this.xml=e.workspace.rendered?Blockly.Xml.blockToDomWithXY(e):Blockly.Xml.blockToDom(e),this.ids=Blockly.Events.getDescendantIds(e))},Blockly.utils.object.inherits(Blockly.Events.Create,Blockly.Events.BlockBase),Blockly.Events.BlockCreate=Blockly.Events.Create,Blockly.Events.Create.prototype.type=Blockly.Events.CREATE,Blockly.Events.Create.prototype.toJson=function(){var e=Blockly.Events.Create.superClass_.toJson.call(this);return e.xml=Blockly.Xml.domToText(this.xml),e.ids=this.ids,e},Blockly.Events.Create.prototype.fromJson=function(e){Blockly.Events.Create.superClass_.fromJson.call(this,e),this.xml=Blockly.Xml.textToDom(e.xml),this.ids=e.ids},Blockly.Events.Create.prototype.run=function(e){var t,n=this.getEventWorkspace_();if(e)(e=Blockly.utils.xml.createElement("xml")).appendChild(this.xml),Blockly.Xml.domToWorkspace(e,n);else{e=0;for(;t=this.ids[e];e++){var o=n.getBlockById(t);o?o.dispose(!1):t==this.blockId&&console.warn("Can't uncreate non-existent block: "+t)}}},Blockly.Events.Delete=function(e){if(e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");Blockly.Events.Delete.superClass_.constructor.call(this,e),this.oldXml=e.workspace.rendered?Blockly.Xml.blockToDomWithXY(e):Blockly.Xml.blockToDom(e),this.ids=Blockly.Events.getDescendantIds(e)}},Blockly.utils.object.inherits(Blockly.Events.Delete,Blockly.Events.BlockBase),Blockly.Events.BlockDelete=Blockly.Events.Delete,Blockly.Events.Delete.prototype.type=Blockly.Events.DELETE,Blockly.Events.Delete.prototype.toJson=function(){var e=Blockly.Events.Delete.superClass_.toJson.call(this);return e.ids=this.ids,e},Blockly.Events.Delete.prototype.fromJson=function(e){Blockly.Events.Delete.superClass_.fromJson.call(this,e),this.ids=e.ids},Blockly.Events.Delete.prototype.run=function(e){var t,n=this.getEventWorkspace_();if(e){e=0;for(;t=this.ids[e];e++){var o=n.getBlockById(t);o?o.dispose(!1):t==this.blockId&&console.warn("Can't delete non-existent block: "+t)}}else(e=Blockly.utils.xml.createElement("xml")).appendChild(this.oldXml),Blockly.Xml.domToWorkspace(e,n)},Blockly.Events.Move=function(e){e&&(Blockly.Events.Move.superClass_.constructor.call(this,e),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)},Blockly.utils.object.inherits(Blockly.Events.Move,Blockly.Events.BlockBase),Blockly.Events.BlockMove=Blockly.Events.Move,Blockly.Events.Move.prototype.type=Blockly.Events.MOVE,Blockly.Events.Move.prototype.toJson=function(){var e=Blockly.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(e.newParentId=this.newParentId),this.newInputName&&(e.newInputName=this.newInputName),this.newCoordinate&&(e.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),e},Blockly.Events.Move.prototype.fromJson=function(e){Blockly.Events.Move.superClass_.fromJson.call(this,e),this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate&&(e=e.newCoordinate.split(","),this.newCoordinate=new Blockly.utils.Coordinate(Number(e[0]),Number(e[1])))},Blockly.Events.Move.prototype.recordNew=function(){var e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate},Blockly.Events.Move.prototype.currentLocation_=function(){var e=this.getEventWorkspace_().getBlockById(this.blockId),t={},n=e.getParent();return n?(t.parentId=n.id,(e=n.getInputWithBlock(e))&&(t.inputName=e.name)):t.coordinate=e.getRelativeToSurfaceXY(),t},Blockly.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&Blockly.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},Blockly.Events.Move.prototype.run=function(e){var t,n,o,r,i=this.getEventWorkspace_(),s=i.getBlockById(this.blockId);s?(t=e?this.newParentId:this.oldParentId,n=e?this.newInputName:this.oldInputName,e=e?this.newCoordinate:this.oldCoordinate,o=null,t&&!(o=i.getBlockById(t))?console.warn("Can't connect to non-existent block: "+t):(s.getParent()&&s.unplug(),e?(n=s.getRelativeToSurfaceXY(),s.moveBy(e.x-n.x,e.y-n.y)):(s=s.outputConnection||s.previousConnection,n?(i=o.getInput(n))&&(r=i.connection):s.type==Blockly.PREVIOUS_STATEMENT&&(r=o.nextConnection),r?s.connect(r):console.warn("Can't connect to non-existent input: "+n)))):console.warn("Can't move non-existent block: "+this.blockId)},Blockly.Events.FinishedLoading=function(e){this.workspaceId=e.id,this.group=Blockly.Events.getGroup(),this.recordUndo=!1},Blockly.utils.object.inherits(Blockly.Events.FinishedLoading,Blockly.Events.Ui),Blockly.Events.FinishedLoading.prototype.type=Blockly.Events.FINISHED_LOADING,Blockly.Events.FinishedLoading.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),this.workspaceId&&(e.workspaceId=this.workspaceId),e},Blockly.Events.FinishedLoading.prototype.fromJson=function(e){this.workspaceId=e.workspaceId,this.group=e.group},Blockly.Events.VarBase=function(e){Blockly.Events.VarBase.superClass_.constructor.call(this),this.varId=e.getId(),this.workspaceId=e.workspace.id},Blockly.utils.object.inherits(Blockly.Events.VarBase,Blockly.Events.Abstract),Blockly.Events.VarBase.prototype.toJson=function(){var e=Blockly.Events.VarBase.superClass_.toJson.call(this);return e.varId=this.varId,e},Blockly.Events.VarBase.prototype.fromJson=function(e){Blockly.Events.VarBase.superClass_.toJson.call(this),this.varId=e.varId},Blockly.Events.VarCreate=function(e){e&&(Blockly.Events.VarCreate.superClass_.constructor.call(this,e),this.varType=e.type,this.varName=e.name)},Blockly.utils.object.inherits(Blockly.Events.VarCreate,Blockly.Events.VarBase),Blockly.Events.VarCreate.prototype.type=Blockly.Events.VAR_CREATE,Blockly.Events.VarCreate.prototype.toJson=function(){var e=Blockly.Events.VarCreate.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},Blockly.Events.VarCreate.prototype.fromJson=function(e){Blockly.Events.VarCreate.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},Blockly.Events.VarCreate.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)},Blockly.Events.VarDelete=function(e){e&&(Blockly.Events.VarDelete.superClass_.constructor.call(this,e),this.varType=e.type,this.varName=e.name)},Blockly.utils.object.inherits(Blockly.Events.VarDelete,Blockly.Events.VarBase),Blockly.Events.VarDelete.prototype.type=Blockly.Events.VAR_DELETE,Blockly.Events.VarDelete.prototype.toJson=function(){var e=Blockly.Events.VarDelete.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},Blockly.Events.VarDelete.prototype.fromJson=function(e){Blockly.Events.VarDelete.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},Blockly.Events.VarDelete.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)},Blockly.Events.VarRename=function(e,t){e&&(Blockly.Events.VarRename.superClass_.constructor.call(this,e),this.oldName=e.name,this.newName=t)},Blockly.utils.object.inherits(Blockly.Events.VarRename,Blockly.Events.VarBase),Blockly.Events.VarRename.prototype.type=Blockly.Events.VAR_RENAME,Blockly.Events.VarRename.prototype.toJson=function(){var e=Blockly.Events.VarRename.superClass_.toJson.call(this);return e.oldName=this.oldName,e.newName=this.newName,e},Blockly.Events.VarRename.prototype.fromJson=function(e){Blockly.Events.VarRename.superClass_.fromJson.call(this,e),this.oldName=e.oldName,this.newName=e.newName},Blockly.Events.VarRename.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)},Blockly.Xml={},Blockly.Xml.workspaceToDom=function(e,t){var n=Blockly.utils.xml.createElement("xml");(i=Blockly.Xml.variablesToDom(e.getAllVariables(e))).hasChildNodes()&&n.appendChild(i);for(var o,r=e.getTopComments(!0),i=0;o=r[i];i++)n.appendChild(o.toXmlWithXY(t));for(e=e.getTopBlocks(!0),i=0;r=e[i];i++)n.appendChild(Blockly.Xml.blockToDomWithXY(r,t));return n},Blockly.Xml.variablesToDom=function(e){for(var t,n=Blockly.utils.xml.createElement("variables"),o=0;t=e[o];o++){var r=Blockly.utils.xml.createElement("variable");r.appendChild(Blockly.utils.xml.createTextNode(t.name)),t.type&&r.setAttribute("type",t.type),r.id=t.getId(),n.appendChild(r)}return n},Blockly.Xml.blockToDomWithXY=function(e,t){e.workspace.RTL&&(n=e.workspace.getWidth()),t=Blockly.Xml.blockToDom(e,t);var n,o=e.getRelativeToSurfaceXY();return t.setAttribute("x",Math.round(e.workspace.RTL?n-o.x:o.x)),t.setAttribute("y",Math.round(o.y)),t},Blockly.Xml.fieldToDom_=function(e){var t;return e.isSerializable()?((t=Blockly.utils.xml.createElement("field")).setAttribute("name",e.name||""),e.toXml(t)):null},Blockly.Xml.allFieldsToDom_=function(e,t){for(var n,o=0;n=e.inputList[o];o++)for(var r,i=0;r=n.fieldRow[i];i++)(r=Blockly.Xml.fieldToDom_(r))&&t.appendChild(r)},Blockly.Xml.blockToDom=function(e,t){var n,o,r,i,s=Blockly.utils.xml.createElement(e.isShadow()?"shadow":"block");for(s.setAttribute("type",e.type),t||s.setAttribute("id",e.id),e.mutationToDom&&(n=e.mutationToDom())&&(n.hasChildNodes()||n.hasAttributes())&&s.appendChild(n),Blockly.Xml.allFieldsToDom_(e,s),e.isBreakpointSet()&&(n=Blockly.utils.xml.createElement("breakpoint"),s.appendChild(n)),(n=e.getCommentText())&&(o=e.commentModel.size,r=e.commentModel.pinned,l=e.getCommentIcon&&e.getCommentIcon()?e.getCommentIcon().getRelativePosition():null,(i=Blockly.utils.xml.createElement("comment")).appendChild(Blockly.utils.xml.createTextNode(n)),"object"==typeof e.comment&&(i.setAttribute("pinned",r),i.setAttribute("h",o.height),i.setAttribute("w",o.width),l)&&(i.setAttribute("relx",l.x),i.setAttribute("rely",l.y)),s.appendChild(i)),e.data&&((n=Blockly.utils.xml.createElement("data")).appendChild(Blockly.utils.xml.createTextNode(e.data)),s.appendChild(n)),o=0;r=e.inputList[o];o++){var a,l=!0;r.type!=Blockly.DUMMY_INPUT&&(i=r.connection.targetBlock(),r.type==Blockly.INPUT_VALUE?a=Blockly.utils.xml.createElement("value"):r.type==Blockly.NEXT_STATEMENT&&(a=Blockly.utils.xml.createElement("statement")),!(n=r.connection.getShadowDom())||i&&i.isShadow()||a.appendChild(Blockly.Xml.cloneShadow_(n,t)),i&&(a.appendChild(Blockly.Xml.blockToDom(i,t)),l=!1),a.setAttribute("name",r.name),l||s.appendChild(a))}return null!=e.inputsInline&&e.inputsInline!=e.inputsInlineDefault&&s.setAttribute("inline",e.inputsInline),e.isCollapsed()&&s.setAttribute("collapsed",!0),e.isEnabled()||s.setAttribute("disabled",!0),e.isDeletable()||e.isShadow()||s.setAttribute("deletable",!1),e.isMovablePersisted()||e.isShadow()||s.setAttribute("movable",!1),e.isEditablePersisted()||s.setAttribute("editable",!1),(o=e.getNextBlock())&&((a=Blockly.utils.xml.createElement("next")).appendChild(Blockly.Xml.blockToDom(o,t)),s.appendChild(a)),!(n=e.nextConnection&&e.nextConnection.getShadowDom())||o&&o.isShadow()||a.appendChild(Blockly.Xml.cloneShadow_(n,t)),s},Blockly.Xml.cloneShadow_=function(e,t){for(var n,o=e=e.cloneNode(!0);o;)if(t&&"shadow"==o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)o=(n=o).parentNode,n.nodeType==Blockly.utils.dom.Node.TEXT_NODE&&""==n.data.trim()&&o.firstChild!=n&&Blockly.utils.dom.removeNode(n);o&&(o=(n=o).nextSibling,n.nodeType==Blockly.utils.dom.Node.TEXT_NODE)&&""==n.data.trim()&&Blockly.utils.dom.removeNode(n)}return e},Blockly.Xml.domToText=function(e){return Blockly.utils.xml.domToText(e)},Blockly.Xml.domToPrettyText=function(e){e=Blockly.Xml.domToText(e).split("<");for(var t="",n=1;n<e.length;n++){var o=e[n];"/"==o[0]&&(t=t.substring(2)),e[n]=t+"<"+o,"/"!=o[0]&&"/>"!=o.slice(-2)&&(t+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},Blockly.Xml.textToDom=function(e){e=e.replace(/xmlns="(.*?)"/,'xmlns="'+Blockly.utils.xml.NAME_SPACE+'"');var t=Blockly.utils.xml.textToDomDocument(e);if(t&&t.documentElement&&!t.getElementsByTagName("parsererror").length)return t.documentElement;throw Error("textToDom was unable to parse: "+e)},Blockly.Xml.clearWorkspaceAndLoadFromXml=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=Blockly.Xml.domToWorkspace(e,t),t.setResizesEnabled(!0),e},Blockly.Xml.domToWorkspace=function(e,t){e instanceof Blockly.Workspace&&(n=e,e=t,t=n,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")),t.loadingEventsDisabled=!0,t.RTL&&(o=t.getWidth()),n=[],Blockly.utils.dom.startTextWidthCache();var n,o,r=Blockly.Events.getGroup(),i=(r||Blockly.Events.setGroup(!0),t.setResizesEnabled&&t.setResizesEnabled(!1),!0);try{for(var s,a=0;s=e.childNodes[a];a++){var l=s.nodeName.toLowerCase(),c=s;if("block"==l||"shadow"==l&&!Blockly.Events.recordUndo){var u=Blockly.Xml.domToBlock(c,t),d=(n.push(u.id),c.hasAttribute("x")?parseInt(c.getAttribute("x"),10):10),p=c.hasAttribute("y")?parseInt(c.getAttribute("y"),10):10;isNaN(d)||isNaN(p)||u.moveBy(t.RTL?o-d:d,p),i=!1}else{if("shadow"==l)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==l)t.rendered?Blockly.WorkspaceCommentSvg?Blockly.WorkspaceCommentSvg.fromXml(c,t,o):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):Blockly.WorkspaceComment?Blockly.WorkspaceComment.fromXml(c,t):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==l){if(!i)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");Blockly.Xml.domToVariables(c,t),i=!1}}}}finally{r||Blockly.Events.setGroup(!1),Blockly.utils.dom.stopTextWidthCache()}return t.setResizesEnabled&&t.setResizesEnabled(!0),t.loadingEventsDisabled=!1,t.getAllBlocks(!1).forEach(function(e){e.onLoadedIntoWorkspace()}),Blockly.Events.fire(new Blockly.Events.FinishedLoading(t)),n},Blockly.Xml.appendDomToWorkspace=function(e,t){if(t.hasOwnProperty("scale")&&(a=t.getBlocksBoundingBox()),e=Blockly.Xml.domToWorkspace(e,t),a&&a.top!=a.bottom){for(var n=a.bottom,o=t.RTL?a.right:a.left,r=1/0,i=-1/0,s=1/0,a=0;a<e.length;a++){var l=t.getBlockById(e[a]).getRelativeToSurfaceXY();l.y<s&&(s=l.y),l.x<r&&(r=l.x),l.x>i&&(i=l.x)}for(n=n-s+10,o=t.RTL?o-i:o-r,a=0;a<e.length;a++)t.getBlockById(e[a]).moveBy(o,n)}return e},Blockly.Xml.domToBlock=function(e,t){var n;e instanceof Blockly.Workspace&&(n=e,e=t,t=n,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")),Blockly.Events.disable(),n=t.getAllVariables();try{var o=Blockly.Xml.domToBlockHeadless_(e,t),r=o.getDescendants(!1);if(t.rendered){o.setConnectionTracking(!1);for(var i=r.length-1;0<=i;i--)r[i].initSvg();for(i=r.length-1;0<=i;i--)r[i].render(!1);setTimeout(function(){o.disposed||o.setConnectionTracking(!0)},1),o.updateDisabled(),t.resizeContents()}else for(i=r.length-1;0<=i;i--)r[i].initModel()}finally{Blockly.Events.enable()}if(Blockly.Events.isEnabled()){for(e=Blockly.Variables.getAddedVariables(t,n),i=0;i<e.length;i++)Blockly.Events.fire(new Blockly.Events.VarCreate(e[i]));Blockly.Events.fire(new Blockly.Events.BlockCreate(o))}return o},Blockly.Xml.domToVariables=function(e,t){for(var n,o,r,i=0;n=e.childNodes[i];i++)n.nodeType==Blockly.utils.dom.Node.ELEMENT_NODE&&(o=n.getAttribute("type"),r=n.getAttribute("id"),t.createVariable(n.textContent,o,r))},Blockly.Xml.domToBlockHeadless_=function(e,t){var n=null;if(!(i=e.getAttribute("type")))throw TypeError("Block type unspecified: "+e.outerHTML);for(var o=e.getAttribute("id"),n=t.newBlock(i,o),r=null,i=0;s=e.childNodes[i];i++)if(s.nodeType!=Blockly.utils.dom.Node.TEXT_NODE){var s,a,l,c=r=null;for(o=0;a=s.childNodes[o];o++)a.nodeType==Blockly.utils.dom.Node.ELEMENT_NODE&&("block"==a.nodeName.toLowerCase()?r=a:"shadow"==a.nodeName.toLowerCase()&&(c=a));switch(!r&&c&&(r=c),a=s.getAttribute("name"),(o=s).nodeName.toLowerCase()){case"mutation":n.domToMutation&&(n.domToMutation(o),n.initSvg)&&n.initSvg();break;case"comment":Blockly.Comment?(r=o.textContent,c="true"==o.getAttribute("pinned"),s=parseInt(o.getAttribute("w"),10),a=parseInt(o.getAttribute("h"),10),l=parseInt(o.getAttribute("relx"),10),o=parseInt(o.getAttribute("rely"),10),n.setCommentText(r),n.commentModel.pinned=c,isNaN(s)||isNaN(a)||(n.commentModel.size=new Blockly.utils.Size(s,a)),isNaN(l)||isNaN(o)||(n.commentModel.xy=new Blockly.utils.Coordinate(l,o)),c&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)):console.warn("Missing require for Blockly.Comment, ignoring block comment.");break;case"data":n.data=s.textContent;break;case"title":case"field":Blockly.Xml.domToField_(n,a,o);break;case"value":case"statement":if((o=n.getInput(a))&&(c&&o.connection.setShadowDom(c),r))if((r=Blockly.Xml.domToBlockHeadless_(r,t)).outputConnection)o.connection.connect(r.outputConnection);else{if(!r.previousConnection)throw TypeError("Child block does not have output or previous statement.");o.connection.connect(r.previousConnection)}break;case"next":if(c&&n.nextConnection&&n.nextConnection.setShadowDom(c),r){if(!n.nextConnection)throw TypeError("Next statement does not exist.");if(n.nextConnection.isConnected())throw TypeError("Next statement is already connected.");if(!(r=Blockly.Xml.domToBlockHeadless_(r,t)).previousConnection)throw TypeError("Next block does not have previous statement.");n.nextConnection.connect(r.previousConnection)}break;case"breakpoint":n.setBreakpoint(!0);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}}return(t=e.getAttribute("inline"))&&n.setInputsInline("true"==t),(t=e.getAttribute("disabled"))&&n.setEnabled("true"!=t&&"disabled"!=t),(t=e.getAttribute("deletable"))&&n.setDeletable("true"==t),(t=e.getAttribute("movable"))&&n.setMovable("true"==t),(t=e.getAttribute("editable"))&&n.setEditable("true"==t),(t=e.getAttribute("collapsed"))&&n.setCollapsed("true"==t),"shadow"==e.nodeName.toLowerCase()&&n.setShadow(!0),n},Blockly.Xml.domToField_=function(e,t,n){var o=e.getField(t);o?o.fromXml(n):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},Blockly.Xml.deleteNext=function(e){for(var t,n=0;t=e.childNodes[n];n++)if("next"==t.nodeName.toLowerCase()){e.removeChild(t);break}},Blockly.Options=function(e){var t,n,o,r,i,s,a,l,c,u,d=!!e.readOnly,p=(d?(t=null,l=a=s=i=r=o=n=!1):(t=Blockly.Options.parseToolboxTree(e.toolbox||null),n=null!=e.hasCategories?e.hasCategories:!(!t||!t.getElementsByTagName("category").length),void 0===(o=e.trashcan)&&(o=n),c=e.maxTrashcanContents,o?void 0===c&&(c=32):c=0,void 0===(r=e.collapse)&&(r=n),void 0===(i=e.comments)&&(i=n),void 0===(s=e.disable)&&(s=n),void 0===(a=e.sounds)&&(a=!0),void 0===(u=e.inline)&&(u=!1)),!!e.rtl),g=e.horizontalLayout,h="end"!==e.toolboxPosition,_=(g=void 0===g?!1:g)?h?Blockly.TOOLBOX_AT_TOP:Blockly.TOOLBOX_AT_BOTTOM:h==p?Blockly.TOOLBOX_AT_RIGHT:Blockly.TOOLBOX_AT_LEFT,m=e.css,f=(void 0===m&&(m=!0),"https://blockly-demo.appspot.com/static/media/"),y=(e.media?f=e.media:e.path&&(f=e.path+"media/"),void 0===e.oneBasedIndex||!!e.oneBasedIndex),k=(h=e.keyMap||Blockly.user.keyMap.createDefaultKeyMap(),e.renderer||"geras"),b=e.colours;if(b)for(var v in b)b.hasOwnProperty(v)&&Blockly.Colours.hasOwnProperty(v)&&(Blockly.Colours[v]=b[v]);this.RTL=p,this.oneBasedIndex=y,this.collapse=r,this.comments=i,this.debugMode=l,this.disable=s,this.readOnly=d,this.maxBlocks=e.maxBlocks||1/0,this.maxInstances=e.maxInstances,this.inline=u,this.newFunctions=1==e.newFunctions,this.pathToMedia=f,this.hasCategories=n,this.moveOptions=Blockly.Options.parseMoveOptions(e,n),this.hasScrollbars=this.moveOptions.scrollbars,this.hasTrashcan=o,this.maxTrashcanContents=c,this.hasSounds=a,this.hasCss=m,this.horizontalLayout=g,this.languageTree=t,this.gridOptions=Blockly.Options.parseGridOptions_(e),this.zoomOptions=Blockly.Options.parseZoomOptions_(e),this.toolboxPosition=_,d=e.toolboxOptions||{},this.toolboxOptions={},null==d.border&&(d.border=!0),null==d.colour&&(d.colour=!1),null==d.inverted&&(d.inverted=!1),null==d.invertedMultiplier&&(d.invertedMultiplier=.3),null==d.disabledOpacity&&(d.disabledOpacity=.4),this.toolboxOptions.border=d.border,this.toolboxOptions.colour=d.colour,this.toolboxOptions.inverted=d.inverted,this.toolboxOptions.invertedMultiplier=d.invertedMultiplier,this.toolboxOptions.disabledOpacity=d.disabledOpacity,this.theme=Blockly.Options.parseThemeOptions_(e),this.keyMap=h,this.renderer=k},Blockly.BlocklyOptions=function(){},Blockly.Options.prototype.parentWorkspace=null,Blockly.Options.parseMoveOptions=function(e,t){var n=e.move||{},o={};return o.scrollbars=void 0===n.scrollbars&&void 0===e.scrollbars?t:!!n.scrollbars||!!e.scrollbars,o.wheel=!(!o.scrollbars||void 0===n.wheel||!n.wheel),o.drag=!(!o.scrollbars||void 0!==n.drag&&!n.drag),o},Blockly.Options.parseZoomOptions_=function(e){e=e.zoom||{};var t={};return t.controls=void 0!==e.controls&&!!e.controls,t.wheel=void 0!==e.wheel&&!!e.wheel,t.startScale=void 0===e.startScale?1:Number(e.startScale),t.maxScale=void 0===e.maxScale?3:Number(e.maxScale),t.minScale=void 0===e.minScale?.3:Number(e.minScale),t.scaleSpeed=void 0===e.scaleSpeed?1.2:Number(e.scaleSpeed),t.pinch=void 0===e.pinch?t.wheel||t.controls:!!e.pinch,t},Blockly.Options.parseGridOptions_=function(e){e=e.grid||{};var t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=void 0===e.length?1:Number(e.length),t.snap=0<t.spacing&&!!e.snap,t.image=Blockly.Options.parseGridImageOptions_(e),t},Blockly.Options.parseGridImageOptions_=function(e){return(e=e.image)&&e.path?(e.width=e.width||100,e.height=e.height||100,e):null},Blockly.Options.parseThemeOptions_=function(e){return(e=e.theme||Blockly.Themes.Classic)instanceof Blockly.Theme?e:new Blockly.Theme("builtin",e.blockStyles,e.categoryStyles,e.componentStyles)},Blockly.Options.parseToolboxTree=function(e){if(e){if("string"!=typeof e&&(Blockly.utils.userAgent.IE&&e.outerHTML?e=e.outerHTML:e instanceof Element||(e=null)),"string"==typeof e&&"xml"!=(e=Blockly.Xml.textToDom(e)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e=null;return e},Blockly.Touch={},Blockly.Touch.TOUCH_ENABLED="ontouchstart"in Blockly.utils.global||!!(Blockly.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!Blockly.utils.global.navigator||!Blockly.utils.global.navigator.maxTouchPoints&&!Blockly.utils.global.navigator.msMaxTouchPoints),Blockly.Touch.touchIdentifier_=null,Blockly.Touch.TOUCH_MAP={},Blockly.utils.global.PointerEvent?Blockly.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:Blockly.Touch.TOUCH_ENABLED&&(Blockly.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),Blockly.longPid_=0,Blockly.longStart=function(e,t){Blockly.longStop_(),e.changedTouches&&1!=e.changedTouches.length||(Blockly.longPid_=setTimeout(function(){e.changedTouches&&(e.button=2,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),t&&t.handleRightClick(e)},Blockly.LONGPRESS))},Blockly.longStop_=function(){Blockly.longPid_&&(clearTimeout(Blockly.longPid_),Blockly.longPid_=0)},Blockly.Touch.clearTouchIdentifier=function(){Blockly.Touch.touchIdentifier_=null},Blockly.Touch.shouldHandleEvent=function(e){return!Blockly.Touch.isMouseOrTouchEvent(e)||Blockly.Touch.checkTouchIdentifier(e)},Blockly.Touch.getTouchIdentifierFromEvent=function(e){return null!=e.pointerId?e.pointerId:e.changedTouches&&e.changedTouches[0]&&void 0!==e.changedTouches[0].identifier&&null!==e.changedTouches[0].identifier?e.changedTouches[0].identifier:"mouse"},Blockly.Touch.checkTouchIdentifier=function(e){var t=Blockly.Touch.getTouchIdentifierFromEvent(e);return void 0!==Blockly.Touch.touchIdentifier_&&null!==Blockly.Touch.touchIdentifier_?Blockly.Touch.touchIdentifier_==t:("mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type)&&(Blockly.Touch.touchIdentifier_=t,!0)},Blockly.Touch.setClientFromTouch=function(e){var t;Blockly.utils.string.startsWith(e.type,"touch")&&(t=e.changedTouches[0],e.clientX=t.clientX,e.clientY=t.clientY)},Blockly.Touch.isMouseOrTouchEvent=function(e){return Blockly.utils.string.startsWith(e.type,"touch")||Blockly.utils.string.startsWith(e.type,"mouse")||Blockly.utils.string.startsWith(e.type,"pointer")},Blockly.Touch.isTouchEvent=function(e){return!(e instanceof PointerEvent&&"mouse"==e.pointerType)&&(Blockly.utils.string.startsWith(e.type,"touch")||Blockly.utils.string.startsWith(e.type,"pointer"))},Blockly.Touch.splitEventByTouches=function(e){var t=[];if(e.changedTouches)for(var n=0;n<e.changedTouches.length;n++)t[n]={type:e.type,changedTouches:[e.changedTouches[n]],target:e.target,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}};else t.push(e);return t},Blockly.ScrollbarPair=function(e){this.workspace_=e,this.hScroll=new Blockly.Scrollbar(e,!0,!0,"blocklyMainWorkspaceScrollbar"),this.vScroll=new Blockly.Scrollbar(e,!1,!0,"blocklyMainWorkspaceScrollbar"),this.corner_=Blockly.utils.dom.createSvgElement("rect",{height:Blockly.Scrollbar.scrollbarThickness,width:Blockly.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),Blockly.utils.dom.insertAfter(this.corner_,e.getBubbleCanvas())},Blockly.ScrollbarPair.prototype.oldHostMetrics_=null,Blockly.ScrollbarPair.prototype.dispose=function(){Blockly.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll.dispose(),this.hScroll=null,this.vScroll.dispose(),this.vScroll=null},Blockly.ScrollbarPair.prototype.resize=function(){var e,t,n=this.workspace_.getMetrics();n&&(t=e=!1,this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==n.viewWidth&&this.oldHostMetrics_.viewHeight==n.viewHeight&&this.oldHostMetrics_.absoluteTop==n.absoluteTop&&this.oldHostMetrics_.absoluteLeft==n.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.contentWidth==n.contentWidth&&this.oldHostMetrics_.viewLeft==n.viewLeft&&this.oldHostMetrics_.contentLeft==n.contentLeft||(e=!0),this.oldHostMetrics_&&this.oldHostMetrics_.contentHeight==n.contentHeight&&this.oldHostMetrics_.viewTop==n.viewTop&&this.oldHostMetrics_.contentTop==n.contentTop||(t=!0)):t=e=!0,e&&this.hScroll.resize(n),t&&this.vScroll.resize(n),this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==n.viewWidth&&this.oldHostMetrics_.absoluteLeft==n.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position_.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==n.viewHeight&&this.oldHostMetrics_.absoluteTop==n.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position_.y),this.oldHostMetrics_=n)},Blockly.ScrollbarPair.prototype.set=function(e,t){var n={},o=(e*=this.hScroll.ratio_,t*=this.vScroll.ratio_,this.vScroll.scrollViewSize_);n.x=this.getRatio_(e,this.hScroll.scrollViewSize_),n.y=this.getRatio_(t,o),this.workspace_.setMetrics(n),this.hScroll.setHandlePosition(e),this.vScroll.setHandlePosition(t)},Blockly.ScrollbarPair.prototype.getRatio_=function(e,t){return e/=t,isNaN(e)?0:e},Blockly.Scrollbar=function(e,t,n,o){this.workspace_=e,this.pair_=n||!1,this.horizontal_=t,this.svgGroup_=this.oldHostMetrics_=null,this.createDom_(o),this.position_=new Blockly.utils.Coordinate(0,0),e=Blockly.Scrollbar.scrollbarThickness,t?(this.svgBackground_.setAttribute("height",e),this.outerSvg_.setAttribute("height",e),this.svgHandle_.setAttribute("height",e-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",e),this.outerSvg_.setAttribute("width",e),this.svgHandle_.setAttribute("width",e-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Blockly.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=Blockly.bindEventWithChecks_(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},Blockly.Scrollbar.prototype.origin_=new Blockly.utils.Coordinate(0,0),Blockly.Scrollbar.prototype.originHasChanged_=!0,Blockly.Scrollbar.prototype.startDragMouse_=0,Blockly.Scrollbar.prototype.scrollViewSize_=0,Blockly.Scrollbar.prototype.handleLength_=0,Blockly.Scrollbar.prototype.handlePosition_=0,Blockly.Scrollbar.prototype.isVisible_=!0,Blockly.Scrollbar.prototype.containerVisible_=!0,Blockly.Scrollbar.scrollbarThickness=15,Blockly.Touch.TOUCH_ENABLED&&(Blockly.Scrollbar.scrollbarThickness=25),Blockly.Scrollbar.metricsAreEquivalent_=function(e,t){return!(!e||!t||e.viewWidth!=t.viewWidth||e.viewHeight!=t.viewHeight||e.viewLeft!=t.viewLeft||e.viewTop!=t.viewTop||e.absoluteTop!=t.absoluteTop||e.absoluteLeft!=t.absoluteLeft||e.contentWidth!=t.contentWidth||e.contentHeight!=t.contentHeight||e.contentLeft!=t.contentLeft||e.contentTop!=t.contentTop)},Blockly.Scrollbar.prototype.dispose=function(){this.cleanUp_(),Blockly.unbindEvent_(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,Blockly.unbindEvent_(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,Blockly.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},Blockly.Scrollbar.prototype.setHandleLength_=function(e){this.handleLength_=e,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},Blockly.Scrollbar.prototype.setHandlePosition=function(e){this.handlePosition_=e,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},Blockly.Scrollbar.prototype.setScrollViewSize_=function(e){this.scrollViewSize_=e,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollViewSize_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollViewSize_)},Blockly.ScrollbarPair.prototype.setContainerVisible=function(e){this.hScroll.setContainerVisible(e),this.vScroll.setContainerVisible(e)},Blockly.Scrollbar.prototype.setPosition_=function(e,t){this.position_.x=e,this.position_.y=t,Blockly.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position_.x+this.origin_.x)+"px,"+(this.position_.y+this.origin_.y)+"px)")},Blockly.Scrollbar.prototype.resize=function(e){if(e=e||this.workspace_.getMetrics()){if(this.originHasChanged_)this.originHasChanged_=!1;else if(Blockly.Scrollbar.metricsAreEquivalent_(e,this.oldHostMetrics_))return;this.oldHostMetrics_=e,this.horizontal_?this.resizeHorizontal_(e):this.resizeVertical_(e),this.onScroll_()}},Blockly.Scrollbar.prototype.resizeHorizontal_=function(e){this.resizeViewHorizontal(e)},Blockly.Scrollbar.prototype.resizeViewHorizontal=function(e){var t=e.viewWidth-1;this.pair_&&(t-=Blockly.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,t)),t=e.absoluteLeft+.5,this.pair_&&this.workspace_.RTL&&(t+=Blockly.Scrollbar.scrollbarThickness),this.setPosition_(t,e.absoluteTop+e.viewHeight-Blockly.Scrollbar.scrollbarThickness-.5),this.resizeContentHorizontal(e)},Blockly.Scrollbar.prototype.resizeContentHorizontal=function(e){this.pair_||this.setVisible(this.scrollViewSize_<e.contentWidth),this.ratio_=this.scrollViewSize_/e.contentWidth,-1/0!=this.ratio_&&1/0!=this.ratio_&&!isNaN(this.ratio_)||(this.ratio_=0),this.setHandleLength_(Math.max(0,e.viewWidth*this.ratio_)),this.setHandlePosition(this.constrainHandle_((e.viewLeft-e.contentLeft)*this.ratio_))},Blockly.Scrollbar.prototype.resizeVertical_=function(e){this.resizeViewVertical(e)},Blockly.Scrollbar.prototype.resizeViewVertical=function(e){var t=e.viewHeight-1;this.pair_&&(t-=Blockly.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,t)),t=e.absoluteLeft+.5,this.workspace_.RTL||(t+=e.viewWidth-Blockly.Scrollbar.scrollbarThickness-1),this.setPosition_(t,e.absoluteTop+.5),this.resizeContentVertical(e)},Blockly.Scrollbar.prototype.resizeContentVertical=function(e){this.pair_||this.setVisible(this.scrollViewSize_<e.contentHeight),this.ratio_=this.scrollViewSize_/e.contentHeight,-1/0!=this.ratio_&&1/0!=this.ratio_&&!isNaN(this.ratio_)||(this.ratio_=0),this.setHandleLength_(Math.max(0,e.viewHeight*this.ratio_)),this.setHandlePosition(this.constrainHandle_((e.viewTop-e.contentTop)*this.ratio_))},Blockly.Scrollbar.prototype.createDom_=function(e){var t="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");e&&(t+=" "+e),this.outerSvg_=Blockly.utils.dom.createSvgElement("svg",{class:t},null),this.svgGroup_=Blockly.utils.dom.createSvgElement("g",{},this.outerSvg_),this.svgBackground_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyScrollbarBackground"},this.svgGroup_),e=Math.floor((Blockly.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyScrollbarHandle",rx:e,ry:e},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),Blockly.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},Blockly.Scrollbar.prototype.isVisible=function(){return this.isVisible_},Blockly.Scrollbar.prototype.setContainerVisible=function(e){var t=e!=this.containerVisible_;this.containerVisible_=e,t&&this.updateDisplay_()},Blockly.Scrollbar.prototype.setVisible=function(e){var t=e!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=e,t&&this.updateDisplay_()},Blockly.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},Blockly.Scrollbar.prototype.onMouseDownBar_=function(e){var t,n,o,r;this.workspace_.markFocused(),Blockly.Touch.clearTouchIdentifier(),this.cleanUp_(),Blockly.utils.isRightButton(e)?e.stopPropagation():(t=Blockly.utils.mouseToSvg(e,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM()),t=this.horizontal_?t.x:t.y,n=Blockly.utils.getInjectionDivXY_(this.svgHandle_),n=this.horizontal_?n.x:n.y,o=this.handlePosition_,r=.95*this.handleLength_,t<=n?o-=r:t>=n+this.handleLength_&&(o+=r),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),this.setHandlePosition(this.constrainHandle_(o)),this.onScroll_(),e.stopPropagation(),e.preventDefault())},Blockly.Scrollbar.prototype.onMouseDownHandle_=function(e){this.workspace_.markFocused(),this.cleanUp_(),Blockly.utils.isRightButton(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?e.clientX:e.clientY,Blockly.Scrollbar.onMouseUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",this,this.onMouseUpHandle_),Blockly.Scrollbar.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",this,this.onMouseMoveHandle_),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),e.stopPropagation(),e.preventDefault())},Blockly.Scrollbar.prototype.onMouseMoveHandle_=function(e){this.setHandlePosition(this.constrainHandle_(this.startDragHandle+((this.horizontal_?e.clientX:e.clientY)-this.startDragMouse_))),this.onScroll_()},Blockly.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),Blockly.Touch.clearTouchIdentifier(),this.cleanUp_()},Blockly.Scrollbar.prototype.cleanUp_=function(){Blockly.hideChaff(!0),Blockly.Scrollbar.onMouseUpWrapper_&&(Blockly.unbindEvent_(Blockly.Scrollbar.onMouseUpWrapper_),Blockly.Scrollbar.onMouseUpWrapper_=null),Blockly.Scrollbar.onMouseMoveWrapper_&&(Blockly.unbindEvent_(Blockly.Scrollbar.onMouseMoveWrapper_),Blockly.Scrollbar.onMouseMoveWrapper_=null)},Blockly.Scrollbar.prototype.constrainHandle_=function(e){return e<=0||isNaN(e)||this.scrollViewSize_<this.handleLength_?0:Math.min(e,this.scrollViewSize_-this.handleLength_)},Blockly.Scrollbar.prototype.onScroll_=function(){var e=this.handlePosition_/this.scrollViewSize_,t=(isNaN(e)&&(e=0),{});this.horizontal_?t.x=e:t.y=e,this.workspace_.setMetrics(t)},Blockly.Scrollbar.prototype.set=function(e){e=this.constrainHandle_(e*this.ratio_),this.handlePosition_!==e&&(this.setHandlePosition(e),this.onScroll_())},Blockly.Scrollbar.prototype.setOrigin=function(e,t){this.origin_=new Blockly.utils.Coordinate(e,t)},Blockly.Tooltip={},Blockly.Tooltip.visible=!1,Blockly.Tooltip.blocked_=!1,Blockly.Tooltip.LIMIT=50,Blockly.Tooltip.mouseOutPid_=0,Blockly.Tooltip.showPid_=0,Blockly.Tooltip.lastX_=0,Blockly.Tooltip.lastY_=0,Blockly.Tooltip.element_=null,Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.OFFSET_X=0,Blockly.Tooltip.OFFSET_Y=10,Blockly.Tooltip.RADIUS_OK=10,Blockly.Tooltip.HOVER_MS=750,Blockly.Tooltip.MARGINS=5,Blockly.Tooltip.DIV=null,Blockly.Tooltip.createDom=function(){Blockly.Tooltip.DIV||(Blockly.Tooltip.DIV=document.createElement("div"),Blockly.Tooltip.DIV.className="blocklyTooltipDiv",document.body.appendChild(Blockly.Tooltip.DIV))},Blockly.Tooltip.bindMouseEvents=function(e){Blockly.bindEvent_(e,"mouseover",null,Blockly.Tooltip.onMouseOver_),Blockly.bindEvent_(e,"mouseout",null,Blockly.Tooltip.onMouseOut_),e.addEventListener("mousemove",Blockly.Tooltip.onMouseMove_,!1)},Blockly.Tooltip.onMouseOver_=function(e){if(!Blockly.Tooltip.blocked_){for(e=e.currentTarget;"string"!=typeof e.tooltip&&"function"!=typeof e.tooltip;)e=e.tooltip;Blockly.Tooltip.element_!=e&&(Blockly.Tooltip.hide(),Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.element_=e),clearTimeout(Blockly.Tooltip.mouseOutPid_)}},Blockly.Tooltip.onMouseOut_=function(e){Blockly.Tooltip.blocked_||(Blockly.Tooltip.mouseOutPid_=setTimeout(function(){Blockly.Tooltip.element_=null,Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.hide()},1),clearTimeout(Blockly.Tooltip.showPid_))},Blockly.Tooltip.onMouseMove_=function(e){var t;Blockly.Tooltip.element_&&Blockly.Tooltip.element_.tooltip&&!Blockly.Tooltip.blocked_&&(Blockly.Tooltip.visible?(t=Blockly.Tooltip.lastX_-e.pageX,e=Blockly.Tooltip.lastY_-e.pageY,Math.sqrt(t*t+e*e)>Blockly.Tooltip.RADIUS_OK&&Blockly.Tooltip.hide()):Blockly.Tooltip.poisonedElement_!=Blockly.Tooltip.element_&&(clearTimeout(Blockly.Tooltip.showPid_),Blockly.Tooltip.lastX_=e.pageX,Blockly.Tooltip.lastY_=e.pageY,Blockly.Tooltip.showPid_=setTimeout(Blockly.Tooltip.show_,Blockly.Tooltip.HOVER_MS)))},Blockly.Tooltip.hide=function(){Blockly.Tooltip.visible&&(Blockly.Tooltip.visible=!1,Blockly.Tooltip.DIV)&&(Blockly.Tooltip.DIV.style.display="none"),Blockly.Tooltip.showPid_&&clearTimeout(Blockly.Tooltip.showPid_)},Blockly.Tooltip.block=function(){Blockly.Tooltip.hide(),Blockly.Tooltip.blocked_=!0},Blockly.Tooltip.unblock=function(){Blockly.Tooltip.blocked_=!1},Blockly.Tooltip.show_=function(){if(!Blockly.Tooltip.blocked_&&(Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_,Blockly.Tooltip.DIV)){Blockly.Tooltip.DIV.innerHTML="";for(var e=Blockly.Tooltip.element_.tooltip;"function"==typeof e;)e=e();for(var e=(e=Blockly.utils.string.wrap(e,Blockly.Tooltip.LIMIT)).split("\n"),t=0;t<e.length;t++){var n=document.createElement("div");n.appendChild(document.createTextNode(e[t])),Blockly.Tooltip.DIV.appendChild(n)}e=Blockly.Tooltip.element_.RTL,t=document.documentElement.clientWidth,n=document.documentElement.clientHeight,Blockly.Tooltip.DIV.style.direction=e?"rtl":"ltr",Blockly.Tooltip.DIV.style.display="block",Blockly.Tooltip.visible=!0;var o=Blockly.Tooltip.lastX_,o=e?o-(Blockly.Tooltip.OFFSET_X+Blockly.Tooltip.DIV.offsetWidth):o+Blockly.Tooltip.OFFSET_X,r=Blockly.Tooltip.lastY_+Blockly.Tooltip.OFFSET_Y;r+Blockly.Tooltip.DIV.offsetHeight>n+window.scrollY&&(r-=Blockly.Tooltip.DIV.offsetHeight+2*Blockly.Tooltip.OFFSET_Y),e?o=Math.max(Blockly.Tooltip.MARGINS-window.scrollX,o):o+Blockly.Tooltip.DIV.offsetWidth>t+window.scrollX-2*Blockly.Tooltip.MARGINS&&(o=t-Blockly.Tooltip.DIV.offsetWidth-2*Blockly.Tooltip.MARGINS),Blockly.Tooltip.DIV.style.top=r+"px",Blockly.Tooltip.DIV.style.left=o+"px"}},Blockly.WorkspaceDragSurfaceSvg=function(e){this.container_=e,this.createDom()},Blockly.WorkspaceDragSurfaceSvg.prototype.SVG_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.dragGroup_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.container_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=Blockly.utils.dom.createSvgElement("svg",{xmlns:Blockly.utils.dom.SVG_NS,"xmlns:html":Blockly.utils.dom.HTML_NS,"xmlns:xlink":Blockly.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},Blockly.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(e,t){e=e.toFixed(0),t=t.toFixed(0),this.SVG_.style.display="block",Blockly.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+t+"px, 0px)")},Blockly.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return Blockly.utils.getRelativeXY(this.SVG_)},Blockly.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var t=this.SVG_.childNodes[0],n=this.SVG_.childNodes[1];if(!(t&&n&&Blockly.utils.dom.hasClass(t,"blocklyBlockCanvas")&&Blockly.utils.dom.hasClass(n,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?Blockly.utils.dom.insertAfter(t,this.previousSibling_):e.insertBefore(t,e.firstChild),Blockly.utils.dom.insertAfter(n,t),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");Blockly.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},Blockly.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(e,t,n,o,r,i){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=n,e.setAttribute("transform","translate(0, 0) scale("+i+")"),t.setAttribute("transform","translate(0, 0) scale("+i+")"),this.SVG_.setAttribute("width",o),this.SVG_.setAttribute("height",r),this.SVG_.appendChild(e),this.SVG_.appendChild(t),this.SVG_.style.display="block"},Blockly.ASTNode=function(e,t,n){if(!t)throw Error("Cannot create a node without a location.");this.type_=e,this.isConnection_=Blockly.ASTNode.isConnectionType_(e),this.location_=t,this.processParams_(n||null)},Blockly.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},Blockly.ASTNode.NAVIGATE_ALL_FIELDS=!1,Blockly.ASTNode.DEFAULT_OFFSET_Y=-20,Blockly.ASTNode.isConnectionType_=function(e){switch(e){case Blockly.ASTNode.types.PREVIOUS:case Blockly.ASTNode.types.NEXT:case Blockly.ASTNode.types.INPUT:case Blockly.ASTNode.types.OUTPUT:return!0}return!1},Blockly.ASTNode.createFieldNode=function(e){return e?new Blockly.ASTNode(Blockly.ASTNode.types.FIELD,e):null},Blockly.ASTNode.createConnectionNode=function(e){return e?e.type==Blockly.INPUT_VALUE||e.type==Blockly.NEXT_STATEMENT&&e.getParentInput()?Blockly.ASTNode.createInputNode(e.getParentInput()):e.type==Blockly.NEXT_STATEMENT?new Blockly.ASTNode(Blockly.ASTNode.types.NEXT,e):e.type==Blockly.OUTPUT_VALUE?new Blockly.ASTNode(Blockly.ASTNode.types.OUTPUT,e):e.type==Blockly.PREVIOUS_STATEMENT?new Blockly.ASTNode(Blockly.ASTNode.types.PREVIOUS,e):null:null},Blockly.ASTNode.createInputNode=function(e){return e&&e.connection?new Blockly.ASTNode(Blockly.ASTNode.types.INPUT,e.connection):null},Blockly.ASTNode.createBlockNode=function(e){return e?new Blockly.ASTNode(Blockly.ASTNode.types.BLOCK,e):null},Blockly.ASTNode.createStackNode=function(e){return e?new Blockly.ASTNode(Blockly.ASTNode.types.STACK,e):null},Blockly.ASTNode.createWorkspaceNode=function(e,t){return t&&e?new Blockly.ASTNode(Blockly.ASTNode.types.WORKSPACE,e,{wsCoordinate:t}):null},Blockly.ASTNode.prototype.processParams_=function(e){e&&e.wsCoordinate&&(this.wsCoordinate_=e.wsCoordinate)},Blockly.ASTNode.prototype.getLocation=function(){return this.location_},Blockly.ASTNode.prototype.getType=function(){return this.type_},Blockly.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},Blockly.ASTNode.prototype.isConnection=function(){return this.isConnection_},Blockly.ASTNode.prototype.findNextForInput_=function(){for(var e,t=(n=this.location_.getParentInput()).getSourceBlock(),n=t.inputList.indexOf(n)+1;e=t.inputList[n];n++){for(var o,r=e.fieldRow,i=0;o=r[i];i++)if(o.isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(o);if(e.connection)return Blockly.ASTNode.createInputNode(e)}return null},Blockly.ASTNode.prototype.findNextForField_=function(){for(var e=(o=this.location_).getParentInput(),t=o.getSourceBlock(),n=t.inputList.indexOf(e),o=e.fieldRow.indexOf(o)+1;e=t.inputList[n];n++){for(var r=e.fieldRow;o<r.length;){if(r[o].isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(r[o]);o++}if(o=0,e.connection)return Blockly.ASTNode.createInputNode(e)}return null},Blockly.ASTNode.prototype.findPrevForInput_=function(){for(var e,t=this.location_.getParentInput(),n=t.getSourceBlock(),o=n.inputList.indexOf(t);e=n.inputList[o];o--){if(e.connection&&e!==t)return Blockly.ASTNode.createInputNode(e);for(var r,i=(e=e.fieldRow).length-1;r=e[i];i--)if(r.isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(r)}return null},Blockly.ASTNode.prototype.findPrevForField_=function(){for(var e,t=(r=this.location_).getParentInput(),n=r.getSourceBlock(),o=n.inputList.indexOf(t),r=t.fieldRow.indexOf(r)-1;e=n.inputList[o];o--){if(e.connection&&e!==t)return Blockly.ASTNode.createInputNode(e);for(e=e.fieldRow;-1<r;){if(e[r].isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(e[r]);r--}0<=o-1&&(r=n.inputList[o-1].fieldRow.length-1)}return null},Blockly.ASTNode.prototype.navigateBetweenStacks_=function(e){if(!(o=(o=this.getLocation())instanceof Blockly.Block?o:o.getSourceBlock())||!o.workspace)return null;for(var t,n=o.getRootBlock(),o=n.workspace.getTopBlocks(!0),r=0;t=o[r];r++)if(n.id==t.id)return-1==(e=r+(e?1:-1))||e==o.length?null:Blockly.ASTNode.createStackNode(o[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")},Blockly.ASTNode.prototype.findTopASTNodeForBlock_=function(e){var t=e.previousConnection||e.outputConnection;return t?Blockly.ASTNode.createConnectionNode(t):Blockly.ASTNode.createBlockNode(e)},Blockly.ASTNode.prototype.getOutAstNodeForBlock_=function(e){var t;return e?(t=(e=e.getTopStackBlock()).previousConnection||e.outputConnection)&&t.targetConnection&&t.targetConnection.getParentInput()?Blockly.ASTNode.createInputNode(t.targetConnection.getParentInput()):Blockly.ASTNode.createStackNode(e):null},Blockly.ASTNode.prototype.findFirstFieldOrInput_=function(e){e=e.inputList;for(var t,n=0;t=e[n];n++){for(var o,r=t.fieldRow,i=0;o=r[i];i++)if(o.isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(o);if(t.connection)return Blockly.ASTNode.createInputNode(t)}return null},Blockly.ASTNode.prototype.getSourceBlock=function(){return this.getType()===Blockly.ASTNode.types.BLOCK||this.getType()===Blockly.ASTNode.types.STACK?this.getLocation():this.getType()===Blockly.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},Blockly.ASTNode.prototype.next=function(){switch(this.type_){case Blockly.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case Blockly.ASTNode.types.OUTPUT:return Blockly.ASTNode.createBlockNode(this.location_.getSourceBlock());case Blockly.ASTNode.types.FIELD:return this.findNextForField_();case Blockly.ASTNode.types.INPUT:return this.findNextForInput_();case Blockly.ASTNode.types.BLOCK:return Blockly.ASTNode.createConnectionNode(this.location_.nextConnection);case Blockly.ASTNode.types.PREVIOUS:return Blockly.ASTNode.createBlockNode(this.location_.getSourceBlock());case Blockly.ASTNode.types.NEXT:return Blockly.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},Blockly.ASTNode.prototype.in=function(){switch(this.type_){case Blockly.ASTNode.types.WORKSPACE:var e=this.location_.getTopBlocks(!0);if(0<e.length)return Blockly.ASTNode.createStackNode(e[0]);break;case Blockly.ASTNode.types.STACK:return e=this.location_,this.findTopASTNodeForBlock_(e);case Blockly.ASTNode.types.BLOCK:return e=this.location_,this.findFirstFieldOrInput_(e);case Blockly.ASTNode.types.INPUT:return Blockly.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},Blockly.ASTNode.prototype.prev=function(){switch(this.type_){case Blockly.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case Blockly.ASTNode.types.FIELD:return this.findPrevForField_();case Blockly.ASTNode.types.INPUT:return this.findPrevForInput_();case Blockly.ASTNode.types.BLOCK:var e=this.location_;return Blockly.ASTNode.createConnectionNode(e.previousConnection||e.outputConnection);case Blockly.ASTNode.types.PREVIOUS:if((e=this.location_.targetConnection)&&!e.getParentInput())return Blockly.ASTNode.createConnectionNode(e);break;case Blockly.ASTNode.types.NEXT:return Blockly.ASTNode.createBlockNode(this.location_.getSourceBlock())}return null},Blockly.ASTNode.prototype.out=function(){switch(this.type_){case Blockly.ASTNode.types.STACK:var e=this.location_.getRelativeToSurfaceXY(),e=new Blockly.utils.Coordinate(e.x,e.y+Blockly.ASTNode.DEFAULT_OFFSET_Y);return Blockly.ASTNode.createWorkspaceNode(this.location_.workspace,e);case Blockly.ASTNode.types.OUTPUT:return(e=this.location_.targetConnection)?Blockly.ASTNode.createConnectionNode(e):Blockly.ASTNode.createStackNode(this.location_.getSourceBlock());case Blockly.ASTNode.types.FIELD:case Blockly.ASTNode.types.INPUT:return Blockly.ASTNode.createBlockNode(this.location_.getSourceBlock());case Blockly.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case Blockly.ASTNode.types.PREVIOUS:case Blockly.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null},Blockly.Blocks={},Blockly.Icon=function(e){this.block_=e},Blockly.Icon.prototype.collapseHidden=!0,Blockly.Icon.prototype.SIZE=25,Blockly.Icon.prototype.bubble_=null,Blockly.Icon.prototype.iconXY_=null,Blockly.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&Blockly.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),Blockly.bindEventWithChecks_(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},Blockly.Icon.prototype.dispose=function(){Blockly.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},Blockly.Icon.prototype.updateEditable=function(){},Blockly.Icon.prototype.isVisible=function(){return!!this.bubble_},Blockly.Icon.prototype.iconClick_=function(e){this.block_.workspace.isDragging()||this.block_.isInFlyout||Blockly.utils.isRightButton(e)||this.setVisible(!this.isVisible())},Blockly.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary,this.block_.style.colourSecondary)},Blockly.Icon.prototype.renderIcon=function(e){if(this.collapseHidden&&this.block_.isCollapsed()||this.block_.isInsertionMarker())return this.iconGroup_.setAttribute("display","none"),e;this.iconGroup_.setAttribute("display","block");var t=this.SIZE;return this.block_.RTL&&(e-=t),this.iconGroup_.setAttribute("transform","translate("+e+",9),scale(1.4)"),this.computeIconLocation(),this.block_.RTL?e-Blockly.BlockSvg.SEP_SPACE_X:e+(t+Blockly.BlockSvg.SEP_SPACE_X)},Blockly.Icon.prototype.moveIcon=function(e,t){var n=this.SIZE;return this.block_.RTL&&(e-=n),this.iconGroup_.setAttribute("transform","translate("+e+","+(9+t)+"),scale(1.4)"),this.block_.RTL?e-Blockly.BlockSvg.SEP_SPACE_X:e+(n+Blockly.BlockSvg.SEP_SPACE_X)},Blockly.Icon.prototype.setIconLocation=function(e){this.iconXY_=e,this.isVisible()&&this.bubble_.setAnchorLocation(e)},Blockly.Icon.prototype.computeIconLocation=function(){var e=this.block_.getRelativeToSurfaceXY(),t=Blockly.utils.getRelativeXY(this.iconGroup_),e=new Blockly.utils.Coordinate(e.x+t.x+this.SIZE/2,e.y+t.y+this.SIZE/2);Blockly.utils.Coordinate.equals(this.getIconLocation(),e)||this.setIconLocation(e)},Blockly.Icon.prototype.getIconLocation=function(){return this.iconXY_},Blockly.Icon.prototype.getCorrectedSize=function(){return new Blockly.utils.Size(Blockly.Icon.prototype.SIZE,Blockly.Icon.prototype.SIZE-2)},Blockly.Breakpoint=function(e){Blockly.Breakpoint.superClass_.constructor.call(this,e),this.createIcon(),this.set_=e.isBreakpointSet()||!1},Blockly.utils.object.inherits(Blockly.Breakpoint,Blockly.Icon),Blockly.Breakpoint.prototype.collapseHidden=!1,Blockly.Breakpoint.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyBreakpointIconGroup"},null),this.block_.isInFlyout&&Blockly.utils.dom.addClass(this.iconGroup_,"blocklyBreakpointIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),Blockly.bindEventWithChecks_(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},Blockly.Breakpoint.prototype.drawIcon_=function(e){var t=this.block_.isBreakpointSet()?"#f00":"#ccc";this.bigDot=Blockly.utils.dom.createSvgElement("circle",{class:"blocklyBreakpointSymbol",fill:t,stroke:"white","stroke-width":2,cx:7,cy:11.5,r:8},e)},Blockly.Breakpoint.prototype.enableBreakpoint=function(){this.setVisible(this.block_.isBreakpointSet())},Blockly.Breakpoint.prototype.dispose=function(){this.block_.breakpoint=null,goog.dom.removeNode(this.iconGroup_),this.block_=this.iconGroup_=null},Blockly.Breakpoint.prototype.setVisible=function(e){e!=this.isVisible()&&(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,"breakpointSet",!e,e)),e?this.bigDot.setAttribute("fill","#f00"):this.bigDot.setAttribute("fill","#ccc"),this.set_=!this.set_,this.block_.setBreakpoint(e))},Blockly.Breakpoint.prototype.isVisible=function(){return!!this.set_},Blockly.Breakpoint.prototype.setIconLocation=function(e){this.iconXY_=e},Blockly.Breakpoint.prototype.updateColour=function(){},Blockly.Breakpoint.prototype.applyColour=function(){},Blockly.Connection=function(e,t){this.sourceBlock_=e,this.type=t},Blockly.Connection.CAN_CONNECT=0,Blockly.Connection.REASON_SELF_CONNECTION=1,Blockly.Connection.REASON_WRONG_TYPE=2,Blockly.Connection.REASON_TARGET_NULL=3,Blockly.Connection.REASON_CHECKS_FAILED=4,Blockly.Connection.REASON_DIFFERENT_WORKSPACES=5,Blockly.Connection.REASON_SHADOW_PARENT=6,Blockly.Connection.REASON_CUSTOM_PROCEDURE=7,Blockly.Connection.prototype.targetConnection=null,Blockly.Connection.prototype.disposed=!1,Blockly.Connection.prototype.check_=null,Blockly.Connection.prototype.shadowDom_=null,Blockly.Connection.prototype.x=0,Blockly.Connection.prototype.y=0,Blockly.Connection.prototype.connect_=function(e){var t,n,o=this,r=o.getSourceBlock(),i=e.getSourceBlock(),s=!1;if(o==r.getFirstStatementConnection()&&(s=!0),e.isConnected()&&(s&&(n=e.targetConnection),e.disconnect()),o.isConnected()){var a,l=o.targetBlock(),c=o.getShadowDom();if(o.setShadowDom(null),l.isShadow())c=Blockly.Xml.blockToDom(l),l.dispose(!1),l=null;else if(o.type==Blockly.NEXT_STATEMENT){if(!l.previousConnection)throw Error("Orphan block does not have a previous connection.");for(var u=i;u.nextConnection;){var d=u.getNextBlock();if(!d||d.isShadow()){l.previousConnection.checkType(u.nextConnection)&&(u.nextConnection.connect(l.previousConnection),l=null);break}u=d}}l&&(o.disconnect(),Blockly.Events.recordUndo)&&(a=Blockly.Events.getGroup(),setTimeout(function(){l.workspace&&!l.getParent()&&(Blockly.Events.setGroup(a),l.outputConnection?l.outputConnection.onFailedConnect(o):l.previousConnection&&l.previousConnection.onFailedConnect(o),Blockly.Events.setGroup(!1))},Blockly.BUMP_DELAY)),o.setShadowDom(c)}s&&n&&n.connect(r.previousConnection),Blockly.Events.isEnabled()&&(t=new Blockly.Events.BlockMove(i)),Blockly.Connection.connectReciprocally_(o,e),i.setParent(r),t&&(t.recordNew(),Blockly.Events.fire(t))},Blockly.Connection.prototype.dispose=function(){var e;this.isConnected()&&(this.setShadowDom(null),(e=this.targetBlock()).isShadow()?e.dispose(!1):e.unplug()),this.disposed=!0},Blockly.Connection.prototype.isConnectedToNonInsertionMarker=function(){return this.targetConnection&&!this.targetBlock().isInsertionMarker()},Blockly.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},Blockly.Connection.prototype.isSuperior=function(){return this.type==Blockly.INPUT_VALUE||this.type==Blockly.NEXT_STATEMENT},Blockly.Connection.prototype.isConnected=function(){return!!this.targetConnection},Blockly.Connection.prototype.canConnectWithReason=function(e){var t,n;return e?(this.isSuperior()?(t=this.sourceBlock_,n=e.getSourceBlock()):(n=this.sourceBlock_,t=e.getSourceBlock()),t&&t==n?Blockly.Connection.REASON_SELF_CONNECTION:e.type!=Blockly.OPPOSITE_TYPE[this.type]?Blockly.Connection.REASON_WRONG_TYPE:t&&n&&t.workspace!==n.workspace?Blockly.Connection.REASON_DIFFERENT_WORKSPACES:this.checkType(e)?Blockly.Connection.CAN_CONNECT:Blockly.Connection.REASON_CHECKS_FAILED):Blockly.Connection.REASON_TARGET_NULL},Blockly.Connection.prototype.checkConnection=function(e){switch(this.canConnectWithReason(e)){case Blockly.Connection.CAN_CONNECT:break;case Blockly.Connection.REASON_SELF_CONNECTION:throw Error("Attempted to connect a block to itself.");case Blockly.Connection.REASON_DIFFERENT_WORKSPACES:throw Error("Blocks not on same workspace.");case Blockly.Connection.REASON_WRONG_TYPE:throw Error("Attempt to connect incompatible types.");case Blockly.Connection.REASON_TARGET_NULL:throw Error("Target connection is null.");case Blockly.Connection.REASON_CHECKS_FAILED:throw Error("Connection checks failed. "+this+" expected "+this.check_+", found "+e.check_);case Blockly.Connection.REASON_SHADOW_PARENT:throw Error("Connecting non-shadow to shadow block.");case Blockly.Connection.REASON_CUSTOM_PROCEDURE:throw Error("Trying to replace a shadow on a custom procedure definition.");default:throw Error("Unknown connection failure: this should never happen!")}},Blockly.Connection.prototype.canConnectToPrevious_=function(e){var t,n,o;return!(this.targetConnection||-1!=Blockly.draggingConnections.indexOf(e)||(t=this.sourceBlock_.getFirstStatementConnection(),n=this==t,o=this==this.sourceBlock_.nextConnection,null!=t&&!n&&!o)||(t=null!=this.sourceBlock_.previousConnection,!(n&&t||!e.targetConnection)&&(!(e=e.targetBlock()).isInsertionMarker()||e.getPreviousBlock())))},Blockly.Connection.prototype.isConnectionAllowed=function(e){if(e.sourceBlock_.isInsertionMarker()||this.canConnectWithReason(e)!=Blockly.Connection.CAN_CONNECT)return!1;switch(this.sourceBlock_.getFirstStatementConnection(),e.type){case Blockly.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e);case Blockly.OUTPUT_VALUE:return!1;case Blockly.INPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isMovable()&&!e.targetBlock().isShadow())return!1;if(e.targetConnection){var t=e.targetBlock();if(t.isShadow()&&Blockly.Functions.isFunctionArgumentReporter(t))return!1}if(Blockly.Functions.isFunctionArgumentReporter(this.sourceBlock_)&&(t=e.getSourceBlock().getRootBlock()).isEnabled()&&!Blockly.pxtBlocklyUtils.hasMatchingArgumentReporter(t,this.sourceBlock_))return!1;break;case Blockly.NEXT_STATEMENT:if(e.isConnected()&&!this.sourceBlock_.nextConnection&&!e.targetBlock().isShadow()&&e.targetBlock().nextConnection)return!1;break;default:throw Error("Unknown connection type in isConnectionAllowed")}return-1==Blockly.draggingConnections.indexOf(e)},Blockly.Connection.prototype.onFailedConnect=function(e){},Blockly.Connection.prototype.connect=function(e){var t;this.targetConnection!=e&&(this.checkConnection(e),(t=Blockly.Events.getGroup())||Blockly.Events.setGroup(!0),this.isSuperior()?this.connect_(e):e.connect_(this),t||Blockly.Events.setGroup(!1))},Blockly.Connection.connectReciprocally_=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");(e.targetConnection=t).targetConnection=e},Blockly.Connection.singleConnection_=function(e,t){for(var n=null,o=0;o<e.inputList.length;o++){var r=e.inputList[o].connection;if(r&&r.type==Blockly.INPUT_VALUE&&t.outputConnection.checkType(r)){if(n)return null;n=r}}return n},Blockly.Connection.lastConnectionInRow=function(e,t){for(var n;n=Blockly.Connection.singleConnection_(e,t);)if(!(e=n.targetBlock())||e.isShadow())return n;return null},Blockly.Connection.prototype.disconnect=function(){var e,t,n=this.targetConnection;if(!n)throw Error("Source connection not connected.");if(n.targetConnection!=this)throw Error("Target connection not connected to source connection.");this.isSuperior()?(e=this.sourceBlock_,t=n.getSourceBlock(),n=this):(e=n.getSourceBlock(),t=this.sourceBlock_);var o=Blockly.Events.getGroup();o||Blockly.Events.setGroup(!0),this.disconnectInternal_(e,t),n.respawnShadow_(),o||Blockly.Events.setGroup(!1)},Blockly.Connection.prototype.disconnectInternal_=function(e,t){var n;Blockly.Events.isEnabled()&&(n=new Blockly.Events.BlockMove(t)),this.targetConnection=this.targetConnection.targetConnection=null,t.setParent(null),n&&(n.recordNew(),Blockly.Events.fire(n))},Blockly.Connection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),t=this.getShadowDom();if(e.workspace&&t&&Blockly.Events.recordUndo)if((e=Blockly.Xml.domToBlock(t,e.workspace)).outputConnection)this.connect(e.outputConnection);else{if(!e.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(e.previousConnection)}},Blockly.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},Blockly.Connection.prototype.checkType=function(e){if(!this.check_||!e.check_)return!0;for(var t=0;t<this.check_.length;t++)if(-1!=e.check_.indexOf(this.check_[t]))return!0;return!1},Blockly.Connection.prototype.checkType_=function(e){return console.warn("Deprecated call to Blockly.Connection.prototype.checkType_, use Blockly.Connection.prototype.checkType instead."),this.checkType(e)},Blockly.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.checkType(this.targetConnection)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},Blockly.Connection.prototype.setCheck=function(e){return e?(Array.isArray(e)||(e=[e]),this.check_=e,this.onCheckChanged_()):this.check_=null,this},Blockly.Connection.prototype.getCheck=function(){return this.check_},Blockly.Connection.prototype.getOutputShape=function(){return this.check_?-1!==this.check_.indexOf("Boolean")?Blockly.OUTPUT_SHAPE_HEXAGONAL:(-1===this.check_.indexOf("Number")&&this.check_.indexOf("String"),Blockly.OUTPUT_SHAPE_ROUND):Blockly.OUTPUT_SHAPE_ROUND},Blockly.Connection.prototype.setShadowDom=function(e){this.shadowDom_=e},Blockly.Connection.prototype.getShadowDom=function(){return this.shadowDom_},Blockly.Connection.prototype.neighbours=function(e){return[]},Blockly.Connection.prototype.getParentInput=function(){for(var e=null,t=this.sourceBlock_,n=t.inputList,o=0;o<t.inputList.length;o++)if(n[o].connection===this){e=n[o];break}return e},Blockly.Connection.prototype.toString=function(){var e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection==this)var t="Output Connection of ";else if(e.previousConnection==this)t="Previous Connection of ";else if(e.nextConnection==this)t="Next Connection of ";else{for(var n,t=null,o=0;n=e.inputList[o];o++)if(n.connection==this){t=n;break}if(!t)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";t='Input "'+t.name+'" connection on '}return t+e.toDevString()},Blockly.Extensions={},Blockly.Extensions.ALL_={},Blockly.Extensions.register=function(e,t){if("string"!=typeof e||""==e.trim())throw Error('Error: Invalid extension name "'+e+'"');if(Blockly.Extensions.ALL_[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof t)throw Error('Error: Extension "'+e+'" must be a function');Blockly.Extensions.ALL_[e]=t},Blockly.Extensions.registerMixin=function(e,t){if(!t||"object"!=typeof t)throw Error('Error: Mixin "'+e+'" must be a object');Blockly.Extensions.register(e,function(){this.mixin(t)})},Blockly.Extensions.registerMutator=function(e,t,n,o){var r='Error when registering mutator "'+e+'": ',i=(Blockly.Extensions.checkHasFunction_(r,t.domToMutation,"domToMutation"),Blockly.Extensions.checkHasFunction_(r,t.mutationToDom,"mutationToDom"),Blockly.Extensions.checkMutatorDialog_(t,r));if(n&&"function"!=typeof n)throw Error('Extension "'+e+'" is not a function');Blockly.Extensions.register(e,function(){if(i){if(!Blockly.Mutator)throw Error(r+"Missing require for Blockly.Mutator");this.setMutator(new Blockly.Mutator(o||[]))}this.mixin(t),n&&n.apply(this)})},Blockly.Extensions.unregister=function(e){Blockly.Extensions.ALL_[e]?delete Blockly.Extensions.ALL_[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Blockly.Extensions.apply=function(e,t,n){var o,r=Blockly.Extensions.ALL_[e];if("function"!=typeof r)throw Error('Error: Extension "'+e+'" not found.');if(n?Blockly.Extensions.checkNoMutatorProperties_(e,t):o=Blockly.Extensions.getMutatorProperties_(t),r.apply(t),n)Blockly.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+e+'": ',t);else if(!Blockly.Extensions.mutatorPropertiesMatch_(o,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},Blockly.Extensions.checkHasFunction_=function(e,t,n){if(!t)throw Error(e+'missing required property "'+n+'"');if("function"!=typeof t)throw Error(e+'" required property "'+n+'" must be a function')},Blockly.Extensions.checkNoMutatorProperties_=function(e,t){if(Blockly.Extensions.getMutatorProperties_(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},Blockly.Extensions.checkMutatorDialog_=function(e,t){var n=void 0!==e.compose,o=void 0!==e.decompose;if(n&&o){if("function"!=typeof e.compose)throw Error(t+"compose must be a function.");if("function"!=typeof e.decompose)throw Error(t+"decompose must be a function.");return!0}if(n||o)throw Error(t+'Must have both or neither of "compose" and "decompose"');return!1},Blockly.Extensions.checkBlockHasMutatorProperties_=function(e,t){if("function"!=typeof t.domToMutation)throw Error(e+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof t.mutationToDom)throw Error(e+'Applying a mutator didn\'t add "mutationToDom"');Blockly.Extensions.checkMutatorDialog_(t,e)},Blockly.Extensions.getMutatorProperties_=function(e){var t=[];return void 0!==e.domToMutation&&t.push(e.domToMutation),void 0!==e.mutationToDom&&t.push(e.mutationToDom),void 0!==e.compose&&t.push(e.compose),void 0!==e.decompose&&t.push(e.decompose),t},Blockly.Extensions.mutatorPropertiesMatch_=function(e,t){if((t=Blockly.Extensions.getMutatorProperties_(t)).length!=e.length)return!1;for(var n=0;n<t.length;n++)if(e[n]!=t[n])return!1;return!0},Blockly.Extensions.buildTooltipForDropdown=function(n,o){var r=[];return"object"==typeof document&&Blockly.utils.runAfterPageLoad(function(){for(var e in o)Blockly.utils.checkMessageReferences(o[e])}),function(){this.type&&-1==r.indexOf(this.type)&&(Blockly.Extensions.checkDropdownOptionsInTable_(this,n,o),r.push(this.type)),this.setTooltip(function(){var e=String(this.getFieldValue(n)),t=o[e];return null==t?-1==r.indexOf(this.type)&&(e="No tooltip mapping for value "+e+" of field "+n,null!=this.type&&(e+=" of block type "+this.type),console.warn(e+".")):t=Blockly.utils.replaceMessageReferences(t),t}.bind(this))}},Blockly.Extensions.checkDropdownOptionsInTable_=function(e,t,n){if(!(o=e.getField(t)).isOptionListDynamic())for(var o=o.getOptions(),r=0;r<o.length;++r){var i=o[r][1];null==n[i]&&console.warn("No tooltip mapping for value "+i+" of field "+t+" of block type "+e.type)}},Blockly.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&Blockly.utils.runAfterPageLoad(function(){Blockly.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var e=this.getField(n);return Blockly.utils.replaceMessageReferences(t).replace("%1",e?e.getText():"")}.bind(this))}},Blockly.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var e=this.getParent();return e&&e.getInputsInline()&&e.tooltip||this.tooltipWhenNotConnected_}.bind(this))},Blockly.Extensions.register("parent_tooltip_when_inline",Blockly.Extensions.extensionParentTooltip_),Blockly.blockAnimations={},Blockly.blockAnimations.disconnectPid_=0,Blockly.blockAnimations.disconnectGroup_=null,Blockly.blockAnimations.disposeUiEffect=function(e){var t=e.workspace,n=e.getSvgRoot();t.getAudioManager().play("delete"),e=t.getSvgXY(n),(n=n.cloneNode(!0)).translateX_=e.x,n.translateY_=e.y,n.setAttribute("transform","translate("+e.x+","+e.y+")"),t.getParentSvg().appendChild(n),n.bBox_=n.getBBox(),Blockly.blockAnimations.disposeUiStep_(n,t.RTL,new Date,t.scale)},Blockly.blockAnimations.disposeUiStep_=function(e,t,n,o){var r=(new Date-n)/150;1<r?Blockly.utils.dom.removeNode(e):(e.setAttribute("transform","translate("+(e.translateX_+(t?-1:1)*e.bBox_.width*o/2*r)+","+(e.translateY_+e.bBox_.height*o*r)+") scale("+(1-r)*o+")"),setTimeout(Blockly.blockAnimations.disposeUiStep_,10,e,t,n,o))},Blockly.blockAnimations.connectionUiEffect=function(e){var t,n=e.workspace,o=n.scale;n.getAudioManager().play("click"),o<1||(t=n.getSvgXY(e.getSvgRoot()),e.outputConnection?(t.x+=(e.RTL?3:-3)*o,t.y+=13*o):e.previousConnection&&(t.x+=(e.RTL?-23:23)*o,t.y+=3*o),e=Blockly.utils.dom.createSvgElement("circle",{cx:t.x,cy:t.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),Blockly.blockAnimations.connectionUiStep_(e,new Date,o))},Blockly.blockAnimations.connectionUiStep_=function(e,t,n){var o=(new Date-t)/150;1<o?Blockly.utils.dom.removeNode(e):(e.setAttribute("r",25*o*n),e.style.opacity=1-o,Blockly.blockAnimations.disconnectPid_=setTimeout(Blockly.blockAnimations.connectionUiStep_,10,e,t,n))},Blockly.blockAnimations.disconnectUiEffect=function(e){var t;e.workspace.getAudioManager().play("disconnect"),e.workspace.scale<1||(t=e.getHeightWidth().height,t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),Blockly.blockAnimations.disconnectUiStep_(e.getSvgRoot(),t,new Date))},Blockly.blockAnimations.disconnectUiStep_=function(e,t,n){var o=(new Date-n)/200;1<o?e.skew_="":(e.skew_="skewX("+Math.round(Math.sin(o*Math.PI*3)*(1-o)*t)+")",Blockly.blockAnimations.disconnectGroup_=e,Blockly.blockAnimations.disconnectPid_=setTimeout(Blockly.blockAnimations.disconnectUiStep_,10,e,t,n)),e.setAttribute("transform",e.translate_+e.skew_)},Blockly.blockAnimations.disconnectUiStop=function(){var e;Blockly.blockAnimations.disconnectGroup_&&(clearTimeout(Blockly.blockAnimations.disconnectPid_),(e=Blockly.blockAnimations.disconnectGroup_).skew_="",e.setAttribute("transform",e.translate_),Blockly.blockAnimations.disconnectGroup_=null)},Blockly.Events.EndBlockDrag=function(e){e&&(Blockly.Events.EndBlockDrag.superClass_.constructor.call(this,e),this.recordUndo=!1,this.blockId=e.id,this.allNestedIds=e.getDescendants().map(function(e){return e.id}))},Blockly.utils.object.inherits(Blockly.Events.EndBlockDrag,Blockly.Events.BlockBase),Blockly.Events.EndBlockDrag.prototype.type=Blockly.Events.END_DRAG,Blockly.Events.EndBlockDrag.prototype.toJson=function(){var e=Blockly.Events.EndBlockDrag.superClass_.toJson.call(this);return this.blockId&&(e.blockId=this.blockId),this.allNestedIds&&(e.allNestedIds=this.allNestedIds),e},Blockly.Events.EndBlockDrag.prototype.fromJson=function(e){Blockly.Events.EndBlockDrag.superClass_.fromJson.call(this,e),this.blockId=e.blockId,this.allNestedIds=e.allNestedIds},Blockly.InsertionMarkerManager=function(e){this.topBlock_=Blockly.selected=e,this.workspace_=e.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.connectionIndicator_=this.connectionLine_=this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.markerConnection_=null,this.highlightingBlock_=!1,this.highlightedBlock_=null,this.availableConnections_=this.initAvailableConnections_()},Blockly.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,Blockly.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{Blockly.Events.enable()}},Blockly.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},Blockly.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},Blockly.InsertionMarkerManager.prototype.applyConnections=function(){var e;this.closestConnection_&&(Blockly.Events.disable(),this.hidePreview_(),Blockly.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)&&(e=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_,Blockly.blockAnimations.connectionUiEffect(e.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront())},Blockly.InsertionMarkerManager.prototype.update=function(e,t){var n=this.getCandidate_(e);((this.wouldDeleteBlock_=this.shouldDelete_(n,t))||this.shouldUpdatePreviews_(n,e))&&(Blockly.Events.disable(),this.maybeHidePreview_(n),this.maybeShowPreview_(n),Blockly.Events.enable()),this.updateConnectionLine_(e)},Blockly.InsertionMarkerManager.prototype.createMarkerBlock_=function(e){var t=e.type;Blockly.Events.disable();try{this.workspace_.loadingEventsDisabled=!0;var n=this.workspace_.newBlock(t);for(this.workspace_.loadingEventsDisabled=!1,n.setInsertionMarker(!0),e.mutationToDom&&(i=e.mutationToDom())&&n.domToMutation(i),n.setCollapsed(e.isCollapsed()),t=0;t<e.inputList.length;t++){var o=e.inputList[t];if(o.isVisible())for(var r=n.inputList[t],i=0;i<o.fieldRow.length;i++)r.fieldRow[i].setValue(o.fieldRow[i].getValue())}n.initSvg(),n.getSvgRoot().setAttribute("visibility","hidden")}finally{Blockly.Events.enable()}return n},Blockly.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var e=this.topBlock_.getConnections_(!1),t=this.topBlock_.lastConnectionInStack();return t&&t!=this.topBlock_.nextConnection&&(e.push(t),this.lastOnStack_=t,this.lastMarker_=this.createMarkerBlock_(t.getSourceBlock())),e},Blockly.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(e,t){var n=e.local,o=e.closest;return e=e.radius,n&&o?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==o&&this.localConnection_==n||(n=this.localConnection_.x+t.x-this.closestConnection_.x,t=this.localConnection_.y+t.y-this.closestConnection_.y,t=Math.sqrt(n*n+t*t),o&&e>t-Blockly.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},Blockly.InsertionMarkerManager.prototype.getCandidate_=function(e){for(var t=this.getStartRadius_(),n=null,o=null,r=0;r<this.availableConnections_.length;r++){var i=this.availableConnections_[r],s=i.closest(t,e);s.connection&&(n=s.connection,o=i,t=s.radius)}return{closest:n,local:o,radius:t}},Blockly.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?Blockly.CONNECTING_SNAP_RADIUS:Blockly.SNAP_RADIUS},Blockly.InsertionMarkerManager.prototype.shouldReplace_=function(){var e=this.closestConnection_,t=this.localConnection_;return t.type==Blockly.OUTPUT_VALUE?!e||!this.workspace_.getRenderer().shouldInsertDraggedBlock(this.topBlock_,e):t!=t.getSourceBlock().getFirstStatementConnection()&&!(this.topBlock_.nextConnection||t.type!=Blockly.PREVIOUS_STATEMENT||!e.isConnected())},Blockly.InsertionMarkerManager.prototype.shouldDelete_=function(e,t){return e=e&&!!e.closest&&t!=Blockly.DELETE_AREA_TOOLBOX,!!t&&!this.topBlock_.getParent()&&this.topBlock_.isDeletable()&&!e},Blockly.InsertionMarkerManager.prototype.maybeShowPreview_=function(e){var t;this.wouldDeleteBlock_||(t=e.closest,e=e.local,t&&(t==this.closestConnection_||t.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=t,this.localConnection_=e,this.showPreview_())))},Blockly.InsertionMarkerManager.prototype.showPreview_=function(){this.shouldReplace_()?(this.highlightBlock_(),this.createConnectionLine_()):this.connectMarker_(),this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.highlight()},Blockly.InsertionMarkerManager.prototype.createConnectionLine_=function(){var e;this.connectionLine_||(this.connectionLine_=Blockly.utils.dom.createSvgElement("line",{class:"blocklyConnectionLine",x1:0,y1:0,x2:0,y2:0},this.localConnection_.sourceBlock_.getSvgRoot()),this.connectionIndicator_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyInputConnectionIndicator"},this.closestConnection_.sourceBlock_.getSvgRoot()),Blockly.utils.dom.createSvgElement("circle",{r:Blockly.CONNECTION_INDICATOR_RADIUS},this.connectionIndicator_),e=this.closestConnection_.offsetInBlock_,this.connectionIndicator_.setAttribute("transform","translate("+e.x+","+e.y+")"))},Blockly.InsertionMarkerManager.prototype.updateConnectionLine_=function(e){var t,n,o,r;this.closestConnection_&&this.localConnection_&&this.connectionLine_&&(t=Blockly.CONNECTION_INDICATOR_RADIUS,n=this.localConnection_.offsetInBlock_,o=this.closestConnection_.x-this.localConnection_.x-e.x+n.x,e=this.closestConnection_.y-this.localConnection_.y-e.y+n.y,r=Math.atan2(e-n.y,o-n.x),Math.sqrt(Math.pow(o-n.x,2)+Math.pow(e-n.y,2))<2*t+1?Blockly.utils.dom.addClass(this.connectionLine_,"hidden"):(Blockly.utils.dom.removeClass(this.connectionLine_,"hidden"),this.connectionLine_.setAttribute("x1",n.x+Math.cos(r)*t),this.connectionLine_.setAttribute("y1",n.y+Math.sin(r)*t),this.connectionLine_.setAttribute("x2",o-Math.cos(r)*t),this.connectionLine_.setAttribute("y2",e-Math.sin(r)*t)))},Blockly.InsertionMarkerManager.prototype.hideConnectionLine_=function(){this.localConnection_&&this.connectionLine_&&(this.localConnection_.sourceBlock_.getSvgRoot().removeChild(this.connectionLine_),this.connectionLine_=null,this.closestConnection_.sourceBlock_.getSvgRoot().removeChild(this.connectionIndicator_),this.connectionIndicator_=null)},Blockly.InsertionMarkerManager.prototype.maybeHidePreview_=function(e){var t;(!e.closest||(t=this.closestConnection_!=e.closest,e=this.localConnection_!=e.local,this.closestConnection_&&this.localConnection_&&(t||e||this.wouldDeleteBlock_)))&&this.hidePreview_(),this.localConnection_=this.closestConnection_=this.markerConnection_=null},Blockly.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.highlightingBlock_?(this.unhighlightBlock_(),this.hideConnectionLine_()):this.markerConnection_&&this.disconnectMarker_()},Blockly.InsertionMarkerManager.prototype.highlightBlock_=function(){var e=this.closestConnection_,t=this.localConnection_;e.targetBlock()?(this.highlightedBlock_=e.targetBlock(),e.targetBlock().highlightForReplacement(!0)):t.type==Blockly.OUTPUT_VALUE&&(this.highlightedBlock_=e.getSourceBlock(),e.getSourceBlock().highlightShapeForInput(e,!0)),this.highlightingBlock_=!0},Blockly.InsertionMarkerManager.prototype.unhighlightBlock_=function(){var e=this.closestConnection_;e.type!=Blockly.INPUT_VALUE||e.isConnected()?this.highlightedBlock_.highlightForReplacement(!1):this.highlightedBlock_.highlightShapeForInput(e,!1),this.highlightedBlock_=null,this.highlightingBlock_=!1},Blockly.InsertionMarkerManager.prototype.disconnectMarker_=function(){if(this.markerConnection_){var e=this.markerConnection_,t=e.getSourceBlock(),n=t.nextConnection,o=t.previousConnection,r=t.outputConnection,r=e.type==Blockly.INPUT_VALUE&&!(r&&r.targetConnection);if(!(e!=n||o&&o.targetConnection)||r?e.targetBlock().unplug(!1):e.type==Blockly.NEXT_STATEMENT&&e!=n?((n=e.targetConnection).getSourceBlock().unplug(!1),o=o?o.targetConnection:null,t.unplug(!0),o&&o.connect(n)):t.unplug(!0),e.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,t.getSvgRoot().setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},Blockly.InsertionMarkerManager.prototype.connectMarker_=function(){var e=this.localConnection_,t=this.closestConnection_,n=this.lastOnStack_&&e==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((e=n.getMatchingConnection(e.getSourceBlock(),e))==this.markerConnection_)throw Error("Made it to connectMarker_ even though the marker isn't changing");n.render(),n.rendered=!0,n.getSvgRoot().setAttribute("visibility","visible"),e&&t&&n.positionNearConnection(e,t),t&&e.connect(t),this.markerConnection_=e},Blockly.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var e=[];return this.firstMarker_&&e.push(this.firstMarker_),this.lastMarker_&&e.push(this.lastMarker_),e},Blockly.BlockDragger=function(e,t,n){this.draggingBlock_=e,this.workspace_=t,this.draggedConnectionManager_=new Blockly.InsertionMarkerManager(this.draggingBlock_,this.pixelsToWorkspaceUnits_(Blockly.utils.Coordinate.difference(n,this.workspaceOriginInPixels_()))),this.deleteArea_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=Blockly.BlockDragger.initIconData_(e)},Blockly.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},Blockly.BlockDragger.initIconData_=function(e){var t=[];e=e.getDescendants(!1);for(var n=0;o=e[n];n++)for(var o=o.getIcons(),r=0;r<o.length;r++){var i={location:o[r].getIconLocation(),icon:o[r]};i.location&&t.push(i)}return t},Blockly.BlockDragger.prototype.startBlockDrag=function(e,t){var n=this;Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),t&&(this.dragIconData_=this.dragIconData_.filter(function(e){return e.icon.block_.id==n.draggingBlock_.id})),Blockly.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),Blockly.blockAnimations.disconnectUiStop(),(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())&&(this.draggingBlock_.unplug(t),e=this.pixelsToWorkspaceUnits_(e),e=Blockly.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),Blockly.blockAnimations.disconnectUiEffect(this.draggingBlock_)),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface(),(e=this.workspace_.getToolbox())&&(t=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.addStyle(t))},Blockly.BlockDragger.prototype.fireDragStartEvent_=function(){var e=new Blockly.Events.Ui(this.draggingBlock_,"dragStart",null,this.draggingBlock_.getDescendants(!1));Blockly.Events.fire(e)},Blockly.BlockDragger.prototype.dragBlock=function(e,t){t=this.pixelsToWorkspaceUnits_(t);var n=Blockly.utils.Coordinate.sum(this.startXY_,t);this.draggingBlock_.moveDuringDrag(n),this.dragIcons_(t),this.deleteArea_=this.workspace_.isDeleteArea(e),this.draggedConnectionManager_.update(t,this.deleteArea_),this.updateCursorDuringBlockDrag_()},Blockly.BlockDragger.prototype.endBlockDrag=function(e,t){this.dragBlock(e,t),this.dragIconData_=[],this.fireDragEndEvent_(),Blockly.utils.dom.stopTextWidthCache(),Blockly.blockAnimations.disconnectUiStop(),e=this.pixelsToWorkspaceUnits_(t),t=Blockly.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.moveOffDragSurface(t),this.maybeDeleteBlock_()||(this.draggingBlock_.moveConnections(e.x,e.y),this.draggingBlock_.setDragging(!1),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()),this.workspace_.setResizesEnabled(!0),(e=this.workspace_.getToolbox())&&(t=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",e.removeStyle(t)),Blockly.Events.setGroup(!1)},Blockly.BlockDragger.prototype.fireDragEndEvent_=function(){var e=new Blockly.Events.EndBlockDrag(this.draggingBlock_);Blockly.Events.fire(e)},Blockly.BlockDragger.prototype.fireMoveEvent_=function(){var e=new Blockly.Events.BlockMove(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),Blockly.Events.fire(e)},Blockly.BlockDragger.prototype.maybeDeleteBlock_=function(){var e=this.workspace_.trashcan;return this.wouldDeleteBlock_?(e&&setTimeout(e.close.bind(e),100),this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0)):e&&e.close(),this.wouldDeleteBlock_},Blockly.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock();var e=this.workspace_.trashcan;this.wouldDeleteBlock_?(this.draggingBlock_.setDeleteStyle(!0),this.deleteArea_==Blockly.DELETE_AREA_TRASH&&e&&e.setOpen(!0)):(this.draggingBlock_.setDeleteStyle(!1),e&&e.setOpen(!1))},Blockly.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new Blockly.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},Blockly.BlockDragger.prototype.workspaceOriginInPixels_=function(){var e=goog.style.getPageOffset(this.workspace_.getInjectionDiv()),t=this.workspace_.getOriginOffsetInPixels();return Blockly.utils.Coordinate.sum(e,t)},Blockly.BlockDragger.prototype.dragIcons_=function(e){for(var t=0;t<this.dragIconData_.length;t++){var n=this.dragIconData_[t];n.icon.setIconLocation(Blockly.utils.Coordinate.sum(n.location,e))}},Blockly.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},Blockly.VariableMap=function(e){this.variableMap_=Object.create(null),this.workspace=e},Blockly.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},Blockly.VariableMap.prototype.renameVariable=function(e,t){var n=this.getVariable(t,e.type),o=this.workspace.getAllBlocks(!1);Blockly.Events.setGroup(!0);try{n&&n.getId()!=e.getId()?this.renameVariableWithConflict_(e,t,n,o):this.renameVariableAndUses_(e,t,o)}finally{Blockly.Events.setGroup(!1)}},Blockly.VariableMap.prototype.renameVariableById=function(e,t){var n=this.getVariableById(e);if(!n)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(n,t)},Blockly.VariableMap.prototype.renameVariableAndUses_=function(e,t,n){for(Blockly.Events.fire(new Blockly.Events.VarRename(e,t)),e.name=t,t=0;t<n.length;t++)n[t].updateVarName(e)},Blockly.VariableMap.prototype.renameVariableWithConflict_=function(e,t,n,o){var r=e.type;for(t!=n.name&&this.renameVariableAndUses_(n,t,o),t=0;t<o.length;t++)o[t].renameVarById(e.getId(),n.getId());Blockly.Events.fire(new Blockly.Events.VarDelete(e)),e=this.getVariablesOfType(r).indexOf(e),this.variableMap_[r].splice(e,1)},Blockly.VariableMap.prototype.createVariable=function(e,t,n){var o=this.getVariable(e,t);if(!o){if(n&&this.getVariableById(n))throw Error('Variable id, "'+n+'", is already in use.');o=n||Blockly.utils.genUid(),o=new Blockly.VariableModel(this.workspace,e,t=t||"",o),(e=this.variableMap_[t]||[]).push(o),delete this.variableMap_[t],this.variableMap_[t]=e}return o},Blockly.VariableMap.prototype.deleteVariable=function(e){for(var t,n=this.variableMap_[e.type],o=0;t=n[o];o++)if(t.getId()==e.getId()){n.splice(o,1),Blockly.Events.fire(new Blockly.Events.VarDelete(e));break}},Blockly.VariableMap.prototype.deleteVariableById=function(e){var t=this.getVariableById(e);if(t){var n,o=t.name,r=this.getVariableUsesById(e);for(e=0;n=r[e];e++)if("procedures_defnoreturn"==n.type||"procedures_defreturn"==n.type)return e=n.getFieldValue("NAME"),o=Blockly.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",e),void Blockly.alert(o);var i=this;1<r.length?(o=Blockly.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(r.length)).replace("%2",o),Blockly.confirm(o,function(e){e&&t&&i.deleteVariableInternal(t,r)})):i.deleteVariableInternal(t,r)}else console.warn("Can't delete non-existent variable: "+e)},Blockly.VariableMap.prototype.deleteVariableInternal=function(e,t){var n=Blockly.Events.getGroup();n||Blockly.Events.setGroup(!0);try{for(var o=0;o<t.length;o++)t[o].dispose(!0);this.deleteVariable(e)}finally{n||Blockly.Events.setGroup(!1)}},Blockly.VariableMap.prototype.getVariable=function(e,t){if(t=this.variableMap_[t||""])for(var n,o=0;n=t[o];o++)if(Blockly.Names.equals(n.name,e))return n;return null},Blockly.VariableMap.prototype.getVariableById=function(e){for(var t=Object.keys(this.variableMap_),n=0;n<t.length;n++)for(var o,r=t[n],i=0;o=this.variableMap_[r][i];i++)if(o.getId()==e)return o;return null},Blockly.VariableMap.prototype.getVariablesOfType=function(e){return(e=this.variableMap_[e||""])?e.slice():[]},Blockly.VariableMap.prototype.getVariableTypes=function(e){var t={};Blockly.utils.object.mixin(t,this.variableMap_),e&&e.getPotentialVariableMap()&&Blockly.utils.object.mixin(t,e.getPotentialVariableMap().variableMap_),e=Object.keys(t);for(var t=!1,n=0;n<e.length;n++)""==e[n]&&(t=!0);return t||e.push(""),e},Blockly.VariableMap.prototype.getAllVariables=function(){var e,t=[];for(e in this.variableMap_)t=t.concat(this.variableMap_[e]);return t},Blockly.VariableMap.prototype.getAllVariableNames=function(){var e,t=[];for(e in this.variableMap_)for(var n,o=this.variableMap_[e],r=0;n=o[r];r++)t.push(n.name);return t},Blockly.VariableMap.prototype.getVariableUsesById=function(e){for(var t=[],n=this.workspace.getAllBlocks(!1),o=0;o<n.length;o++){var r=n[o].getVarModels();if(r)for(var i=0;i<r.length;i++)r[i].getId()==e&&t.push(n[o])}return t},Blockly.Workspace=function(e){this.id=Blockly.utils.genUid(),(Blockly.Workspace.WorkspaceDB_[this.id]=this).options=e||{},this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.loadingEventsDisabled=!1,this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.tapListeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new Blockly.VariableMap(this),this.potentialVariableMap_=null},Blockly.Workspace.prototype.rendered=!1,Blockly.Workspace.prototype.isClearing=!1,Blockly.Workspace.prototype.MAX_UNDO=1024,Blockly.Workspace.prototype.connectionDBList=null,Blockly.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete Blockly.Workspace.WorkspaceDB_[this.id]},Blockly.Workspace.SCAN_ANGLE=3,Blockly.Workspace.prototype.sortObjects_=function(e,t){return e=e.getRelativeToSurfaceXY(),t=t.getRelativeToSurfaceXY(),e.y+Blockly.Workspace.prototype.sortObjects_.offset*e.x-(t.y+Blockly.Workspace.prototype.sortObjects_.offset*t.x)},Blockly.Workspace.prototype.addTopBlock=function(e){this.topBlocks_.push(e)},Blockly.Workspace.prototype.removeTopBlock=function(e){if(!Blockly.utils.arrayRemove(this.topBlocks_,e))throw Error("Block not present in workspace's list of top-most blocks.")},Blockly.Workspace.prototype.getTopBlocks=function(e){var t=[].concat(this.topBlocks_);return e&&1<t.length&&(this.sortObjects_.offset=Math.sin(Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t},Blockly.Workspace.prototype.addTypedBlock=function(e){this.typedBlocksDB_[e.type]||(this.typedBlocksDB_[e.type]=[]),this.typedBlocksDB_[e.type].push(e)},Blockly.Workspace.prototype.removeTypedBlock=function(e){this.typedBlocksDB_[e.type].splice(this.typedBlocksDB_[e.type].indexOf(e),1),this.typedBlocksDB_[e.type].length||delete this.typedBlocksDB_[e.type]},Blockly.Workspace.prototype.getBlocksByType=function(e,t){return this.typedBlocksDB_[e]?(e=this.typedBlocksDB_[e].slice(0),t&&1<e.length&&(this.sortObjects_.offset=Math.sin(Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e):[]},Blockly.Workspace.prototype.addTopComment=function(e){this.topComments_.push(e),this.commentDB_[e.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB_[e.id]=e},Blockly.Workspace.prototype.removeTopComment=function(e){if(!Blockly.utils.arrayRemove(this.topComments_,e))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[e.id]},Blockly.Workspace.prototype.getTopComments=function(e){var t=[].concat(this.topComments_);return e&&1<t.length&&(this.sortObjects_.offset=Math.sin(Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t},Blockly.Workspace.prototype.getTopComments=function(e){var n,t=[].concat(this.topComments_);return e&&1<t.length&&(n=Math.sin(goog.math.toRadians(Blockly.Workspace.SCAN_ANGLE)),this.RTL&&(n*=-1),t.sort(function(e,t){return e=e.getRelativeToSurfaceXY(),t=t.getRelativeToSurfaceXY(),e.y+n*e.x-(t.y+n*t.x)})),t},Blockly.Workspace.prototype.getAllBlocks=function(e){if(e){e=this.getTopBlocks(!0);for(var t=[],n=0;n<e.length;n++)t.push.apply(t,e[n].getDescendants(!0))}else for(t=this.getTopBlocks(!1),n=0;n<t.length;n++)t.push.apply(t,t[n].getChildren(!1));return t.filter(function(e){return!e.isInsertionMarker()})},Blockly.Workspace.prototype.clear=function(){this.isClearing=!0;try{var e=Blockly.Events.getGroup();for(e||Blockly.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);e||Blockly.Events.setGroup(!1),this.variableMap_.clear(),Blockly.DropDownDiv&&Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.WidgetDiv&&Blockly.WidgetDiv.hide(!0),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},Blockly.Workspace.prototype.renameVariableById=function(e,t){this.variableMap_.renameVariableById(e,t)},Blockly.Workspace.prototype.createVariable=function(e,t,n){return this.variableMap_.createVariable(e,t,n)},Blockly.Workspace.prototype.getVariableUsesById=function(e){return this.variableMap_.getVariableUsesById(e)},Blockly.Workspace.prototype.deleteVariableById=function(e){this.variableMap_.deleteVariableById(e)},Blockly.Workspace.prototype.deleteVariableInternal_=function(e,t){this.variableMap_.deleteVariableInternal(e,t)},Blockly.Workspace.prototype.variableIndexOf=function(e){return console.warn("Deprecated call to Blockly.Workspace.prototype.variableIndexOf"),-1},Blockly.Workspace.prototype.getVariable=function(e,t){return this.variableMap_.getVariable(e,t)},Blockly.Workspace.prototype.getVariableById=function(e){return this.variableMap_.getVariableById(e)},Blockly.Workspace.prototype.getVariablesOfType=function(e){return this.variableMap_.getVariablesOfType(e)},Blockly.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},Blockly.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},Blockly.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},Blockly.Workspace.prototype.getWidth=function(){return 0},Blockly.Workspace.prototype.newBlock=function(e,t){return e=new Blockly.Block(this,e,t),this.loadingEventsDisabled||e.onLoadedIntoWorkspace(),e},Blockly.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},Blockly.Workspace.prototype.remainingCapacityOfType=function(e){return this.options.maxInstances?(this.options.maxInstances[e]||1/0)-this.getBlocksByType(e,!1).length:1/0},Blockly.Workspace.prototype.isCapacityAvailable=function(e){if(!this.hasBlockLimits())return!0;var t,n=0;for(t in e){if(e[t]>this.remainingCapacityOfType(t))return!1;n+=e[t]}return!(n>this.remainingCapacity())},Blockly.Workspace.prototype.hasBlockLimits=function(){return 1/0!=this.options.maxBlocks||!!this.options.maxInstances},Blockly.Workspace.prototype.undo=function(e){var t=e?this.redoStack_:this.undoStack_,n=e?this.undoStack_:this.redoStack_,o=t.pop();if(o){for(var r=[o];t.length&&o.group&&o.group==t[t.length-1].group;)r.push(t.pop());for(t=0;o=r[t];t++)n.push(o);r=Blockly.Events.filter(r,e),Blockly.Events.recordUndo=!1;try{for(t=0;o=r[t];t++)o.run(e)}finally{Blockly.Events.recordUndo=!0}}},Blockly.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,Blockly.Events.clearPendingUndo()},Blockly.Workspace.prototype.hasRedoStack=function(){return 0!=this.redoStack_.length},Blockly.Workspace.prototype.hasUndoStack=function(){return 0!=this.undoStack_.length},Blockly.Workspace.prototype.addChangeListener=function(e){return this.listeners_.push(e),e},Blockly.Workspace.prototype.removeChangeListener=function(e){Blockly.utils.arrayRemove(this.listeners_,e)},Blockly.Workspace.prototype.fireChangeListener=function(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var t,n=0;t=this.listeners_[n];n++)t(e)},Blockly.Workspace.prototype.getBlockById=function(e){var t=this.blockDB_[e];return(t=!t&&this.getFlyout()&&this.getFlyout().getWorkspace()?this.getFlyout().getWorkspace().blockDB_[e]:t)||null},Blockly.Workspace.prototype.getFlyout=function(){return null},Blockly.Workspace.prototype.getCommentById=function(e){return this.commentDB_[e]||null},Blockly.Workspace.prototype.addCommentById=function(e){this.commentDB_[e.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB_[e.id]=e},Blockly.Workspace.prototype.removeCommentById=function(e){delete this.commentDB_[e]},Blockly.Workspace.prototype.setBlockById=function(e,t){this.blockDB_[e]=t},Blockly.Workspace.prototype.removeBlockById=function(e){delete this.blockDB_[e]},Blockly.Workspace.prototype.getCommentById=function(e){return this.commentDB_[e]||null},Blockly.Workspace.prototype.allInputsFilled=function(e){for(var t,n=this.getTopBlocks(!1),o=0;t=n[o];o++)if(!t.allInputsFilled(e))return!1;return!0},Blockly.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},Blockly.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new Blockly.VariableMap(this)},Blockly.Workspace.prototype.getVariableMap=function(){return this.variableMap_},Blockly.Workspace.prototype.setVariableMap=function(e){this.variableMap_=e},Blockly.Workspace.WorkspaceDB_=Object.create(null),Blockly.Workspace.getById=function(e){return Blockly.Workspace.WorkspaceDB_[e]||null},Blockly.Workspace.prototype.setDebugModeOption=function(e){this.options.debugMode=e},Blockly.Workspace.getAll=function(){var e,t=[];for(e in Blockly.Workspace.WorkspaceDB_)t.push(Blockly.Workspace.WorkspaceDB_[e]);return t},Blockly.Bubble=function(e,t,n,o,r,i){this.workspace_=e,this.content_=t,this.shape_=n,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,n=Blockly.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(n=-n),this.arrow_radians_=Blockly.utils.math.toRadians(n),e.getBubbleCanvas().appendChild(this.createDom_(t,!(!r||!i))),this.setAnchorLocation(o),r&&i||(r=(e=this.content_.getBBox()).width+2*Blockly.Bubble.BORDER_WIDTH,i=e.height+2*Blockly.Bubble.BORDER_WIDTH),this.setBubbleSize(r,i),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},Blockly.Bubble.BORDER_WIDTH=1,Blockly.Bubble.RESIZE_SIZE=12*Blockly.Bubble.BORDER_WIDTH,Blockly.Bubble.ARROW_THICKNESS=5,Blockly.Bubble.ARROW_ANGLE=20,Blockly.Bubble.ARROW_BEND=4,Blockly.Bubble.ANCHOR_RADIUS=8,Blockly.Bubble.LINE_THICKNESS=1,Blockly.Bubble.onMouseUpWrapper_=null,Blockly.Bubble.onMouseMoveWrapper_=null,Blockly.Bubble.unbindDragEvents_=function(){Blockly.Bubble.onMouseUpWrapper_&&(Blockly.unbindEvent_(Blockly.Bubble.onMouseUpWrapper_),Blockly.Bubble.onMouseUpWrapper_=null),Blockly.Bubble.onMouseMoveWrapper_&&(Blockly.unbindEvent_(Blockly.Bubble.onMouseMoveWrapper_),Blockly.Bubble.onMouseMoveWrapper_=null)},Blockly.Bubble.bubbleMouseUp_=function(e){Blockly.Touch.clearTouchIdentifier(),Blockly.Bubble.unbindDragEvents_()},Blockly.Bubble.prototype.rendered_=!1,Blockly.Bubble.prototype.anchorXY_=null,Blockly.Bubble.prototype.relativeLeft_=0,Blockly.Bubble.prototype.relativeTop_=0,Blockly.Bubble.prototype.width_=0,Blockly.Bubble.prototype.height_=0,Blockly.Bubble.prototype.autoLayout_=!0,Blockly.Bubble.prototype.useArrow_=!1,Blockly.Bubble.prototype.createDom_=function(e,t){this.bubbleGroup_=Blockly.utils.dom.createSvgElement("g",{},null);var n={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return!Blockly.utils.userAgent.JAVA_FX&&this.useArrow_||(n={}),n=Blockly.utils.dom.createSvgElement("g",n,this.bubbleGroup_),this.bubbleArrow_=Blockly.utils.dom.createSvgElement(this.useArrow_?"path":"line",{},n),this.bubbleBack_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyDraggable",x:0,y:0,rx:Blockly.Bubble.BORDER_WIDTH,ry:Blockly.Bubble.BORDER_WIDTH},n),this.bubbleGroup_.appendChild(e),t?(this.resizeGroup_=Blockly.utils.dom.createSvgElement("g",{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e=Blockly.Bubble.RESIZE_SIZE,Blockly.utils.dom.createSvgElement("polygon",{points:"0,x x,x x,0".replace(/x/g,e.toString())},this.resizeGroup_),Blockly.utils.dom.createSvgElement("line",{class:"blocklyResizeLine",x1:e/3,y1:e-1,x2:e-1,y2:e/3},this.resizeGroup_),Blockly.utils.dom.createSvgElement("line",{class:"blocklyResizeLine",x1:2*e/3,y1:e-1,x2:e-1,y2:2*e/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=Blockly.bindEventWithChecks_(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=Blockly.bindEventWithChecks_(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_},Blockly.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},Blockly.Bubble.prototype.setSvgId=function(e){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=e)},Blockly.Bubble.prototype.bubbleMouseDown_=function(e){var t=this.workspace_.getGesture(e);t&&t.handleBubbleStart(e,this)},Blockly.Bubble.prototype.showContextMenu=function(e){},Blockly.Bubble.prototype.isDeletable=function(){return!1},Blockly.Bubble.prototype.resizeMouseDown_=function(e){this.promote(),Blockly.Bubble.unbindDragEvents_(),Blockly.utils.isRightButton(e)||(this.workspace_.startDrag(e,new Blockly.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),Blockly.Bubble.onMouseUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",this,Blockly.Bubble.bubbleMouseUp_),Blockly.Bubble.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",this,this.resizeMouseMove_),Blockly.hideChaff()),e.stopPropagation()},Blockly.Bubble.prototype.resizeMouseMove_=function(e){this.autoLayout_=!1,e=this.workspace_.moveDrag(e),this.setBubbleSize(this.workspace_.RTL?-e.x:e.x,e.y),this.workspace_.RTL&&this.positionBubble_()},Blockly.Bubble.prototype.registerResizeEvent=function(e){this.resizeCallback_=e},Blockly.Bubble.prototype.registerMoveEvent=function(e){this.moveCallback_=e},Blockly.Bubble.prototype.promote=function(){var e=this.bubbleGroup_.parentNode;return e.lastChild!==this.bubbleGroup_&&(e.appendChild(this.bubbleGroup_),!0)},Blockly.Bubble.prototype.setAnchorLocation=function(e){this.anchorXY_=e,this.rendered_&&this.positionBubble_()},Blockly.Bubble.prototype.layoutBubble_=function(){(a=this.workspace_.getMetrics()).viewLeft/=this.workspace_.scale,a.viewWidth/=this.workspace_.scale,a.viewTop/=this.workspace_.scale,a.viewHeight/=this.workspace_.scale;var e=this.getOptimalRelativeLeft_(a),t=this.getOptimalRelativeTop_(a),n=this.shape_.getBBox(),o={x:e,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},r={x:-this.width_-30,y:t},t={x:n.width,y:t},i={x:e,y:n.height},e=n.width<n.height?t:i,n=n.width<n.height?i:t,i=(t=this.getOverlap_(o,a),this.getOverlap_(r,a)),s=this.getOverlap_(e,a),a=this.getOverlap_(n,a);t==(a=Math.max(t,i,s,a))?(this.relativeLeft_=o.x,this.relativeTop_=o.y):i==a?(this.relativeLeft_=r.x,this.relativeTop_=r.y):s==a?(this.relativeLeft_=e.x,this.relativeTop_=e.y):(this.relativeLeft_=n.x,this.relativeTop_=n.y)},Blockly.Bubble.prototype.getOverlap_=function(e,t){var n=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x+this.anchorXY_.x;return e=e.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(n+this.width_,t.viewLeft+t.viewWidth)-Math.max(n,t.viewLeft))*(Math.min(e+this.height_,t.viewTop+t.viewHeight)-Math.max(e,t.viewTop))/(this.width_*this.height_)))},Blockly.Bubble.prototype.getOptimalRelativeLeft_=function(e){var t,n,o,r,i=-this.width_/4;return this.width_>e.viewWidth||(this.workspace_.RTL?(n=(t=this.anchorXY_.x-i)-this.width_,o=e.viewLeft+e.viewWidth,r=e.viewLeft+Blockly.Scrollbar.scrollbarThickness/this.workspace_.scale):(t=(n=i+this.anchorXY_.x)+this.width_,r=e.viewLeft,o=e.viewLeft+e.viewWidth-Blockly.Scrollbar.scrollbarThickness/this.workspace_.scale),this.workspace_.RTL?n<r?i=-(r-this.anchorXY_.x+this.width_):o<t&&(i=-(o-this.anchorXY_.x)):n<r?i=r-this.anchorXY_.x:o<t&&(i=o-this.anchorXY_.x-this.width_)),i},Blockly.Bubble.prototype.getOptimalRelativeTop_=function(e){var t,n,o,r,i=-this.height_/4;return this.height_>e.viewHeight||(n=(t=this.anchorXY_.y+i)+this.height_,o=e.viewTop,e=e.viewTop+e.viewHeight-Blockly.Scrollbar.scrollbarThickness/this.workspace_.scale,r=this.anchorXY_.y,t<o?i=o-r:e<n&&(i=e-r-this.height_)),i},Blockly.Bubble.prototype.positionBubble_=function(){var e=this.anchorXY_.x,e=this.workspace_.RTL?e-this.relativeLeft_:e+this.relativeLeft_;this.moveTo(e,this.relativeTop_+this.anchorXY_.y)},Blockly.Bubble.prototype.moveTo=function(e,t){this.bubbleGroup_.setAttribute("transform","translate("+e+","+t+")")},Blockly.Bubble.prototype.setDragging=function(e){!e&&this.moveCallback_&&this.moveCallback_()},Blockly.Bubble.prototype.getBubbleSize=function(){return new Blockly.utils.Size(this.width_,this.height_)},Blockly.Bubble.prototype.setBubbleSize=function(e,t){var n,o=2*Blockly.Bubble.BORDER_WIDTH;e=Math.max(e,45+o),t=Math.max(t,20+o),this.width_=e,this.height_=t,this.bubbleBack_.setAttribute("width",e),this.bubbleBack_.setAttribute("height",t),this.resizeGroup_&&(n=Blockly.Bubble.RESIZE_SIZE,this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+n+","+(t-o)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(e-n)+","+(t-n)+")")),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},Blockly.Bubble.prototype.renderArrow_=function(){this.useArrow_?this.drawArrow_():this.drawLine_()},Blockly.Bubble.prototype.drawArrow_=function(){var e,t,n,o,r,i,s,a=[],l=this.width_/2,c=this.height_/2,u=-this.relativeLeft_,d=-this.relativeTop_;l==u&&c==d?a.push("M "+l+","+c):(d-=c,u-=l,this.workspace_.RTL&&(u*=-1),e=Math.sqrt(d*d+u*u),t=Math.acos(u/e),(r=(t=d<0?2*Math.PI-t:t)+Math.PI/2)>2*Math.PI&&(r-=2*Math.PI),n=Math.sin(r),o=Math.cos(r),r=((i=this.getBubbleSize()).width+i.height)/Blockly.Bubble.ARROW_THICKNESS,r=Math.min(r,i.width,i.height)/4,u=l+(i=1-Blockly.Bubble.ANCHOR_RADIUS/e)*u,d=c+i*d,i=l+r*o,s=c+r*n,l-=r*o,c-=r*n,(n=t+this.arrow_radians_)>2*Math.PI&&(n-=2*Math.PI),t=Math.sin(n)*e/Blockly.Bubble.ARROW_BEND,e=Math.cos(n)*e/Blockly.Bubble.ARROW_BEND,a.push("M"+i+","+s),a.push("C"+(i+e)+","+(s+t)+" "+u+","+d+" "+u+","+d),a.push("C"+u+","+d+" "+(l+e)+","+(c+t)+" "+l+","+c)),a.push("z"),this.bubbleArrow_.setAttribute("d",a.join(" "))},Blockly.Bubble.prototype.drawLine_=function(){var e=this.width_/2,t=Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT/2,n=-this.relativeLeft_,o=-this.relativeTop_;e==n&&t==o||(o-=t,n-=e,this.workspace_.RTL&&(n=-1*n-this.width_),this.bubbleArrow_.setAttribute("x1",e),this.bubbleArrow_.setAttribute("y1",t),this.bubbleArrow_.setAttribute("x2",e+n),this.bubbleArrow_.setAttribute("y2",t+o),this.bubbleArrow_.setAttribute("stroke-width",Blockly.Bubble.LINE_THICKNESS))},Blockly.Bubble.prototype.setColour=function(e,t){this.bubbleBack_.setAttribute("fill",e),this.useArrow_?this.bubbleArrow_.setAttribute("fill",e):(this.bubbleBack_.setAttribute("stroke",t),this.bubbleArrow_.setAttribute("stroke",t))},Blockly.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&Blockly.unbindEvent_(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&Blockly.unbindEvent_(this.onMouseDownResizeWrapper_),Blockly.Bubble.unbindDragEvents_(),Blockly.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},Blockly.Bubble.prototype.moveDuringDrag=function(e,t){e?e.translateSurface(t.x,t.y):this.moveTo(t.x,t.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x-this.anchorXY_.x,this.relativeTop_=t.y-this.anchorXY_.y,this.renderArrow_()},Blockly.Bubble.prototype.getRelativeToSurfaceXY=function(){return new Blockly.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},Blockly.Bubble.prototype.setAutoLayout=function(e){this.autoLayout_=e},Blockly.Events.CommentBase=function(e){this.commentId=e.id,this.workspaceId=e.workspace.id,this.blockId=e.blockId||null,this.group=Blockly.Events.getGroup(),this.recordUndo=Blockly.Events.recordUndo},Blockly.utils.object.inherits(Blockly.Events.CommentBase,Blockly.Events.Abstract),Blockly.Events.CommentBase.prototype.toJson=function(){var e=Blockly.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(e.commentId=this.commentId),this.blockId&&(e.blockId=this.blockId),e},Blockly.Events.CommentBase.prototype.fromJson=function(e){Blockly.Events.CommentBase.superClass_.fromJson.call(this,e),this.commentId=e.commentId,this.group=e.group,this.blockId=e.blockId},Blockly.Events.CommentBase.prototype.getComment_=function(){return this.getEventWorkspace_().getCommentById(this.commentId)},Blockly.Events.CommentChange=function(e,t,n){e&&(Blockly.Events.CommentChange.superClass_.constructor.call(this,e),this.oldContents_=t,this.newContents_=n)},Blockly.utils.object.inherits(Blockly.Events.CommentChange,Blockly.Events.CommentBase),Blockly.Events.CommentChange.prototype.type=Blockly.Events.COMMENT_CHANGE,Blockly.Events.CommentChange.prototype.toJson=function(){var e=Blockly.Events.CommentChange.superClass_.toJson.call(this);return e.newContents=this.newContents_,e},Blockly.Events.CommentChange.prototype.fromJson=function(e){Blockly.Events.CommentChange.superClass_.fromJson.call(this,e),this.newContents_=e.newValue},Blockly.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},Blockly.Events.CommentChange.prototype.run=function(e){var t=this.getComment_();t?((e=e?this.newContents_:this.oldContents_).hasOwnProperty("minimized")&&t.setMinimized(e.minimized),e.hasOwnProperty("width")&&e.hasOwnProperty("height")&&t.setSize(e.width,e.height),e.hasOwnProperty("text")&&t.setContent(e.text)):console.warn("Can't change non-existent comment: "+this.commentId)},Blockly.Events.CommentCreate=function(e){e&&(Blockly.Events.CommentCreate.superClass_.constructor.call(this,e),this.text=e.getContent(),this.xy=e.getXY(),this.width=e.getWidth(),this.height=e.getHeight(),this.minimized=e.isMinimized()||!1,this.xml=e.toXmlWithXY())},Blockly.utils.object.inherits(Blockly.Events.CommentCreate,Blockly.Events.CommentBase),Blockly.Events.CommentCreate.prototype.type=Blockly.Events.COMMENT_CREATE,Blockly.Events.CommentCreate.prototype.toJson=function(){var e=Blockly.Events.CommentCreate.superClass_.toJson.call(this);return e.xml=Blockly.Xml.domToText(this.xml),e},Blockly.Events.CommentCreate.prototype.fromJson=function(e){Blockly.Events.CommentCreate.superClass_.fromJson.call(this,e),this.xml=Blockly.Xml.textToDom("<xml>"+e.xml+"</xml>").firstChild},Blockly.Events.CommentCreate.prototype.run=function(e){var t;e?(e=this.getEventWorkspace_(),this.blockId?(e=e.getBlockById(this.blockId))&&e.setCommentText("",this.commentId,this.xy.x,this.xy.y,this.minimized):((t=Blockly.utils.xml.createElement("xml")).appendChild(this.xml),Blockly.Xml.domToWorkspace(t,e))):(e=this.getComment_())?e.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+this.commentId)},Blockly.Events.CommentDelete=function(e){e&&(Blockly.Events.CommentDelete.superClass_.constructor.call(this,e),this.xy=e.getXY(),this.minimized=e.isMinimized()||!1,this.text=e.getContent(),this.height=e.getHeight(),this.width=e.getWidth(),this.xml=e.toXmlWithXY())},Blockly.utils.object.inherits(Blockly.Events.CommentDelete,Blockly.Events.CommentBase),Blockly.Events.CommentDelete.prototype.type=Blockly.Events.COMMENT_DELETE,Blockly.Events.CommentDelete.prototype.toJson=function(){return Blockly.Events.CommentDelete.superClass_.toJson.call(this)},Blockly.Events.CommentDelete.prototype.fromJson=function(e){Blockly.Events.CommentDelete.superClass_.fromJson.call(this,e)},Blockly.Events.CommentDelete.prototype.run=function(e){var t;e?(e=this.getComment_())?e.dispose(!1,!1):console.warn("Can't delete non-existent comment: "+this.commentId):(e=this.getEventWorkspace_(),this.blockId?((e=e.getBlockById(this.blockId)).setCommentText(this.text,this.commentId,this.xy.x,this.xy.y,this.minimized),e.comment.setSize(this.width,this.height)):((t=Blockly.utils.xml.createElement("xml")).appendChild(this.xml),Blockly.Xml.domToWorkspace(t,e)))},Blockly.Events.CommentMove=function(e){e&&(Blockly.Events.CommentMove.superClass_.constructor.call(this,e),this.comment_=e,this.workspaceWidth_=e.workspace.getWidth(),this.oldCoordinate_=this.currentLocation_(),this.newCoordinate_=null)},Blockly.utils.object.inherits(Blockly.Events.CommentMove,Blockly.Events.CommentBase),Blockly.Events.CommentMove.prototype.currentLocation_=function(){var e,t=this.comment_.getXY();return this.comment_.workspace.RTL?(e=this.comment_ instanceof Blockly.ScratchBlockComment?(e=this.comment_.getBubbleSize().width,this.workspaceWidth_-t.x-e):this.workspaceWidth_-t.x,new Blockly.utils.Coordinate(e,t.y)):t},Blockly.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.currentLocation_(),this.comment_=null},Blockly.Events.CommentMove.prototype.type=Blockly.Events.COMMENT_MOVE,Blockly.Events.CommentMove.prototype.setOldCoordinate=function(e){this.oldCoordinate_=new Blockly.utils.Coordinate(this.comment_.workspace.RTL?this.workspaceWidth_-e.x:e.x,e.y)},Blockly.Events.CommentMove.prototype.toJson=function(){var e=Blockly.Events.CommentMove.superClass_.toJson.call(this);return this.newCoordinate_&&(e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),e},Blockly.Events.CommentMove.prototype.fromJson=function(e){Blockly.Events.CommentMove.superClass_.fromJson.call(this,e),e.newCoordinate&&(e=e.newCoordinate.split(","),this.newCoordinate_=new Blockly.utils.Coordinate(Number(e[0]),Number(e[1])))},Blockly.Events.CommentMove.prototype.isNull=function(){return Blockly.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},Blockly.Events.CommentMove.prototype.run=function(e){var t,n=this.getComment_();n?(e=e?this.newCoordinate_:this.oldCoordinate_,t=n.getXY(),n.workspace.RTL?n.moveBy(-(e.x-(this.workspaceWidth_-t.x)),e.y-t.y):n.moveBy(e.x-t.x,e.y-t.y)):console.warn("Can't move non-existent comment: "+this.commentId)},Blockly.BubbleDragger=function(e,t){this.draggingBubble_=e,this.workspace_=t,this.deleteArea_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=Blockly.utils.is3dSupported()&&t.getBlockDragSurface()?t.getBlockDragSurface():null},Blockly.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},Blockly.BubbleDragger.prototype.startBubbleDrag=function(){Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0);var e,t=this.workspace_.getToolbox();t&&(e=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",t.addStyle(e))},Blockly.BubbleDragger.prototype.dragBubble=function(e,t){t=this.pixelsToWorkspaceUnits_(t),t=Blockly.utils.Coordinate.sum(this.startXY_,t),this.draggingBubble_.moveDuringDrag(this.dragSurface_,t),this.draggingBubble_.isDeletable()&&(this.deleteArea_=this.workspace_.isDeleteArea(e),this.updateCursorDuringBubbleDrag_())},Blockly.BubbleDragger.prototype.maybeDeleteBubble_=function(){var e=this.workspace_.trashcan;return this.wouldDeleteBubble_?(e&&setTimeout(e.close.bind(e),100),this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):e&&e.close(),this.wouldDeleteBubble_},Blockly.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.wouldDeleteBubble_=this.deleteArea_!=Blockly.DELETE_AREA_NONE;var e=this.workspace_.trashcan;this.wouldDeleteBubble_?(this.draggingBubble_.setDeleteStyle(!0),this.deleteArea_==Blockly.DELETE_AREA_TRASH&&e&&e.setOpen(!0)):(this.draggingBubble_.setDeleteStyle(!1),e&&e.setOpen(!1))},Blockly.BubbleDragger.prototype.endBubbleDrag=function(e,t){this.dragBubble(e,t),e=this.pixelsToWorkspaceUnits_(t),e=Blockly.utils.Coordinate.sum(this.startXY_,e),this.draggingBubble_.moveTo(e.x,e.y),this.maybeDeleteBubble_()||(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),this.workspace_.getToolbox()&&(e=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",this.workspace_.getToolbox().removeStyle(e)),Blockly.Events.setGroup(!1)},Blockly.BubbleDragger.prototype.fireMoveEvent_=function(){var e;this.draggingBubble_.isComment&&((e=new Blockly.Events.CommentMove(this.draggingBubble_)).setOldCoordinate(this.startXY_),e.recordNew(),Blockly.Events.fire(e))},Blockly.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new Blockly.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},Blockly.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},Blockly.WorkspaceDragger=function(e){this.workspace_=e,this.startScrollXY_=new Blockly.utils.Coordinate(e.scrollX,e.scrollY)},Blockly.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},Blockly.WorkspaceDragger.prototype.startDrag=function(){Blockly.selected&&Blockly.selected.unselect(),this.workspace_.setupDragSurface()},Blockly.WorkspaceDragger.prototype.endDrag=function(e){this.drag(e),this.workspace_.resetDragSurface()},Blockly.WorkspaceDragger.prototype.drag=function(e){e=Blockly.utils.Coordinate.sum(this.startScrollXY_,e),this.workspace_.scroll(e.x,e.y)},Blockly.FlyoutDragger=function(e){Blockly.FlyoutDragger.superClass_.constructor.call(this,e.getWorkspace()),this.scrollbar_=e.scrollbar_,this.horizontalLayout_=e.horizontalLayout_},Blockly.utils.object.inherits(Blockly.FlyoutDragger,Blockly.WorkspaceDragger),Blockly.FlyoutDragger.prototype.drag=function(e){e=Blockly.utils.Coordinate.sum(this.startScrollXY_,e),this.horizontalLayout_?this.scrollbar_.set(-e.x):this.scrollbar_.set(-e.y)},Blockly.Action=function(e,t){this.name=e,this.desc=t},Blockly.navigation={},Blockly.navigation.loggingCallback=null,Blockly.navigation.STATE_FLYOUT=1,Blockly.navigation.STATE_WS=2,Blockly.navigation.STATE_TOOLBOX=3,Blockly.navigation.WS_MOVE_DISTANCE=40,Blockly.navigation.currentState_=Blockly.navigation.STATE_WS,Blockly.navigation.actionNames={PREVIOUS:"previous",NEXT:"next",IN:"in",OUT:"out",INSERT:"insert",MARK:"mark",DISCONNECT:"disconnect",TOOLBOX:"toolbox",EXIT:"exit",TOGGLE_KEYBOARD_NAV:"toggle_keyboard_nav",MOVE_WS_CURSOR_UP:"move workspace cursor up",MOVE_WS_CURSOR_DOWN:"move workspace cursor down",MOVE_WS_CURSOR_LEFT:"move workspace cursor left",MOVE_WS_CURSOR_RIGHT:"move workspace cursor right"},Blockly.navigation.MARKER_NAME="local_marker_1",Blockly.navigation.getMarker=function(){return Blockly.getMainWorkspace().getMarker(Blockly.navigation.MARKER_NAME)},Blockly.navigation.focusToolbox_=function(){var e=Blockly.getMainWorkspace().getToolbox();e&&(Blockly.navigation.currentState_=Blockly.navigation.STATE_TOOLBOX,Blockly.navigation.resetFlyout_(!1),Blockly.navigation.getMarker().getCurNode()||Blockly.navigation.markAtCursor_(),e.selectFirstCategory())},Blockly.navigation.focusFlyout_=function(){Blockly.navigation.currentState_=Blockly.navigation.STATE_FLYOUT;var e=(t=Blockly.getMainWorkspace()).getToolbox(),t=e?e.flyout_:t.getFlyout();Blockly.navigation.getMarker().getCurNode()||Blockly.navigation.markAtCursor_(),t&&t.getWorkspace()&&0<(t=t.getWorkspace().getTopBlocks(!0)).length&&(t=t[0],t=Blockly.ASTNode.createStackNode(t),Blockly.navigation.getFlyoutCursor_().setCurNode(t))},Blockly.navigation.focusWorkspace_=function(){Blockly.hideChaff();var e=Blockly.getMainWorkspace(),t=e.getCursor(),n=!!e.getToolbox(),o=e.getTopBlocks(!0);Blockly.navigation.resetFlyout_(n),Blockly.navigation.currentState_=Blockly.navigation.STATE_WS,0<o.length?t.setCurNode(Blockly.navigation.getTopNode(o[0])):(n=new Blockly.utils.Coordinate(100,100),e=Blockly.ASTNode.createWorkspaceNode(e,n),t.setCurNode(e))},Blockly.navigation.getFlyoutCursor_=function(){var e=Blockly.getMainWorkspace(),t=null;return t=e.rendered?(e=(t=e.getToolbox())?t.flyout_:e.getFlyout())?e.workspace_.getCursor():null:t},Blockly.navigation.insertFromFlyout=function(){var e,t=Blockly.getMainWorkspace(),n=t.getFlyout();n&&n.isVisible()?(e=Blockly.navigation.getFlyoutCursor_().getCurNode().getLocation()).isEnabled()?((n=n.createBlock(e)).render(),n.setConnectionTracking(!0),t.getCursor().setCurNode(Blockly.ASTNode.createBlockNode(n)),Blockly.navigation.modify_()||Blockly.navigation.warn_("Something went wrong while inserting a block from the flyout."),Blockly.navigation.focusWorkspace_(),t.getCursor().setCurNode(Blockly.navigation.getTopNode(n)),Blockly.navigation.removeMark_()):Blockly.navigation.warn_("Can't insert a disabled block."):Blockly.navigation.warn_("Trying to insert from the flyout when the flyout does not  exist or is not visible")},Blockly.navigation.resetFlyout_=function(e){Blockly.navigation.getFlyoutCursor_()&&(Blockly.navigation.getFlyoutCursor_().hide(),e)&&Blockly.getMainWorkspace().getFlyout().hide()},Blockly.navigation.modifyWarn_=function(){var e=Blockly.navigation.getMarker().getCurNode(),t=Blockly.getMainWorkspace().getCursor().getCurNode();return e?t?(e=e.getType(),t=t.getType(),e==Blockly.ASTNode.types.FIELD?(Blockly.navigation.warn_("Should not have been able to mark a field."),!1):e==Blockly.ASTNode.types.BLOCK?(Blockly.navigation.warn_("Should not have been able to mark a block."),!1):e==Blockly.ASTNode.types.STACK?(Blockly.navigation.warn_("Should not have been able to mark a stack."),!1):t==Blockly.ASTNode.types.FIELD?(Blockly.navigation.warn_("Cannot attach a field to anything else."),!1):t!=Blockly.ASTNode.types.WORKSPACE||(Blockly.navigation.warn_("Cannot attach a workspace to anything else."),!1)):(Blockly.navigation.warn_("Cannot insert with no cursor node."),!1):(Blockly.navigation.warn_("Cannot insert with no marked node."),!1)},Blockly.navigation.moveBlockToWorkspace_=function(e,t){return!!e&&(e.isShadow()?(Blockly.navigation.warn_("Cannot move a shadow block to the workspace."),!1):(e.getParent()&&e.unplug(!1),e.moveTo(t.getWsCoordinate()),!0))},Blockly.navigation.modify_=function(){var e,t,n,o,r=Blockly.navigation.getMarker().getCurNode(),i=Blockly.getMainWorkspace().getCursor().getCurNode();return!!Blockly.navigation.modifyWarn_()&&(e=r.getType(),t=i.getType(),n=i.getLocation(),o=r.getLocation(),r.isConnection()&&i.isConnection()?Blockly.navigation.connect_(n,o):!r.isConnection()||t!=Blockly.ASTNode.types.BLOCK&&t!=Blockly.ASTNode.types.STACK?e==Blockly.ASTNode.types.WORKSPACE?(i=i?i.getSourceBlock():null,Blockly.navigation.moveBlockToWorkspace_(i,r)):(Blockly.navigation.warn_("Unexpected state in Blockly.navigation.modify_."),!1):Blockly.navigation.insertBlock(n,o))},Blockly.navigation.disconnectChild_=function(e,t){var n=e.getSourceBlock(),o=t.getSourceBlock();n.getRootBlock()==o.getRootBlock()&&(-1<n.getDescendants(!1).indexOf(o)?Blockly.navigation.getInferiorConnection_(t):Blockly.navigation.getInferiorConnection_(e)).disconnect()},Blockly.navigation.moveAndConnect_=function(e,t){var n;return!(!e||!t||(n=e.getSourceBlock(),t.canConnectWithReason(e)!=Blockly.Connection.CAN_CONNECT)||(Blockly.navigation.disconnectChild_(e,t),t.isSuperior()||n.getRootBlock().positionNearConnection(e,t),t.connect(e),0))},Blockly.navigation.getInferiorConnection_=function(e){var t=e.getSourceBlock();return e.isSuperior()?t.previousConnection||t.outputConnection||null:e},Blockly.navigation.getSuperiorConnection_=function(e){return e.isSuperior()?e:e.targetConnection||null},Blockly.navigation.connect_=function(e,t){if(e&&t){var n=Blockly.navigation.getInferiorConnection_(e),o=Blockly.navigation.getSuperiorConnection_(t),r=Blockly.navigation.getSuperiorConnection_(e),i=Blockly.navigation.getInferiorConnection_(t);if(n&&o&&Blockly.navigation.moveAndConnect_(n,o)||r&&i&&Blockly.navigation.moveAndConnect_(r,i)||Blockly.navigation.moveAndConnect_(e,t))return!0;try{t.checkConnection(e)}catch(e){Blockly.navigation.warn_("Connection failed with error: "+e)}}return!1},Blockly.navigation.insertBlock=function(e,t){switch(t.type){case Blockly.PREVIOUS_STATEMENT:if(Blockly.navigation.connect_(e.nextConnection,t))return!0;break;case Blockly.NEXT_STATEMENT:if(Blockly.navigation.connect_(e.previousConnection,t))return!0;break;case Blockly.INPUT_VALUE:if(Blockly.navigation.connect_(e.outputConnection,t))return!0;break;case Blockly.OUTPUT_VALUE:for(var n=0;n<e.inputList.length;n++){var o=e.inputList[n].connection;if(o&&o.type===Blockly.INPUT_VALUE&&Blockly.navigation.connect_(o,t))return!0}if(e.outputConnection&&Blockly.navigation.connect_(e.outputConnection,t))return!0}return Blockly.navigation.warn_("This block can not be inserted at the marked location."),!1},Blockly.navigation.disconnectBlocks_=function(){var e,t=Blockly.getMainWorkspace(),n=t.getCursor().getCurNode();n.isConnection()?(e=n.getLocation()).isConnected()?(n=e.isSuperior()?e:e.targetConnection,(e=e.isSuperior()?e.targetConnection:e).getSourceBlock().isShadow()?Blockly.navigation.log_("Cannot disconnect a shadow block"):(n.disconnect(),e.bumpAwayFrom(n),n.getSourceBlock().getRootBlock().bringToFront(),n=Blockly.ASTNode.createConnectionNode(n),t.getCursor().setCurNode(n))):Blockly.navigation.log_("Cannot disconnect unconnected connection"):Blockly.navigation.log_("Cannot disconnect blocks when the cursor is not on a connection")},Blockly.navigation.markAtCursor_=function(){Blockly.navigation.getMarker().setCurNode(Blockly.getMainWorkspace().getCursor().getCurNode())},Blockly.navigation.removeMark_=function(){var e=Blockly.navigation.getMarker();e.setCurNode(null),e.hide()},Blockly.navigation.setState=function(e){Blockly.navigation.currentState_=e},Blockly.navigation.getTopNode=function(e){var t=e.previousConnection||e.outputConnection;return t?Blockly.ASTNode.createConnectionNode(t):Blockly.ASTNode.createBlockNode(e)},Blockly.navigation.moveCursorOnBlockDelete=function(e){var t,n=Blockly.getMainWorkspace();(n=n&&n.getCursor())&&((t=(t=n.getCurNode())?t.getSourceBlock():null)===e?t.getParent()?(e=t.previousConnection||t.outputConnection)&&n.setCurNode(Blockly.ASTNode.createConnectionNode(e.targetConnection)):n.setCurNode(Blockly.ASTNode.createWorkspaceNode(t.workspace,t.getRelativeToSurfaceXY())):t&&-1<e.getChildren(!1).indexOf(t)&&n.setCurNode(Blockly.ASTNode.createWorkspaceNode(t.workspace,t.getRelativeToSurfaceXY())))},Blockly.navigation.moveCursorOnBlockMutation=function(e){var t,n=Blockly.getMainWorkspace().getCursor();n&&(t=(t=n.getCurNode())?t.getSourceBlock():null)===e&&n.setCurNode(Blockly.ASTNode.createBlockNode(t))},Blockly.navigation.enableKeyboardAccessibility=function(){Blockly.getMainWorkspace().keyboardAccessibilityMode||(Blockly.getMainWorkspace().keyboardAccessibilityMode=!0,Blockly.navigation.focusWorkspace_())},Blockly.navigation.disableKeyboardAccessibility=function(){var e;Blockly.getMainWorkspace().keyboardAccessibilityMode&&(e=Blockly.getMainWorkspace(),Blockly.getMainWorkspace().keyboardAccessibilityMode=!1,e.getCursor().hide(),Blockly.navigation.getMarker().hide(),Blockly.navigation.getFlyoutCursor_())&&Blockly.navigation.getFlyoutCursor_().hide()},Blockly.navigation.log_=function(e){Blockly.navigation.loggingCallback?Blockly.navigation.loggingCallback("log",e):console.log(e)},Blockly.navigation.warn_=function(e){Blockly.navigation.loggingCallback?Blockly.navigation.loggingCallback("warn",e):console.warn(e)},Blockly.navigation.error_=function(e){Blockly.navigation.loggingCallback?Blockly.navigation.loggingCallback("error",e):console.error(e)},Blockly.navigation.onKeyPress=function(e){return e=Blockly.user.keyMap.serializeKeyEvent(e),!!(e=Blockly.user.keyMap.getActionByKeyCode(e))&&Blockly.navigation.onBlocklyAction(e)},Blockly.navigation.onBlocklyAction=function(e){var t=Blockly.getMainWorkspace().options.readOnly,n=!1;return Blockly.getMainWorkspace().keyboardAccessibilityMode?(!t||-1<Blockly.navigation.READONLY_ACTION_LIST.indexOf(e))&&(n=Blockly.navigation.handleActions_(e)):e.name===Blockly.navigation.actionNames.TOGGLE_KEYBOARD_NAV&&(Blockly.navigation.enableKeyboardAccessibility(),n=!0),n},Blockly.navigation.handleActions_=function(e){return e.name==Blockly.navigation.actionNames.TOOLBOX||Blockly.navigation.currentState_==Blockly.navigation.STATE_TOOLBOX?Blockly.navigation.toolboxOnAction_(e):e.name==Blockly.navigation.actionNames.TOGGLE_KEYBOARD_NAV?(Blockly.navigation.disableKeyboardAccessibility(),!0):Blockly.navigation.currentState_==Blockly.navigation.STATE_WS?Blockly.navigation.workspaceOnAction_(e):Blockly.navigation.currentState_==Blockly.navigation.STATE_FLYOUT&&Blockly.navigation.flyoutOnAction_(e)};Blockly.navigation.flyoutOnAction_=function(e){var t=Blockly.getMainWorkspace(),n=t.getToolbox();if((t=n?n.flyout_:t.getFlyout())&&t.onBlocklyAction(e))return!0;switch(e.name){case Blockly.navigation.actionNames.OUT:return Blockly.navigation.focusToolbox_(),!0;case Blockly.navigation.actionNames.MARK:return Blockly.navigation.insertFromFlyout(),!0;case Blockly.navigation.actionNames.EXIT:return Blockly.navigation.focusWorkspace_(),!0;default:return!1}},Blockly.navigation.toolboxOnAction_=function(e){var t=Blockly.getMainWorkspace(),n=t.getToolbox();return!((!n||!n.onBlocklyAction(e))&&(e.name===Blockly.navigation.actionNames.TOOLBOX?(t.getToolbox()?Blockly.navigation.focusToolbox_():Blockly.navigation.focusFlyout_(),0):e.name===Blockly.navigation.actionNames.IN?(Blockly.navigation.focusFlyout_(),0):e.name!==Blockly.navigation.actionNames.EXIT||(Blockly.navigation.focusWorkspace_(),0)))},Blockly.navigation.moveWSCursor_=function(e,t){var n=Blockly.getMainWorkspace().getCursor(),o=Blockly.getMainWorkspace().getCursor().getCurNode();return o.getType()===Blockly.ASTNode.types.WORKSPACE&&(o=o.getWsCoordinate(),e=e*Blockly.navigation.WS_MOVE_DISTANCE+o.x,t=t*Blockly.navigation.WS_MOVE_DISTANCE+o.y,n.setCurNode(Blockly.ASTNode.createWorkspaceNode(Blockly.getMainWorkspace(),new Blockly.utils.Coordinate(e,t))),!0)},Blockly.navigation.workspaceOnAction_=function(e){if(Blockly.getMainWorkspace().getCursor().onBlocklyAction(e))return!0;switch(e.name){case Blockly.navigation.actionNames.INSERT:return Blockly.navigation.modify_(),!0;case Blockly.navigation.actionNames.MARK:return Blockly.navigation.handleEnterForWS_(),!0;case Blockly.navigation.actionNames.DISCONNECT:return Blockly.navigation.disconnectBlocks_(),!0;case Blockly.navigation.actionNames.MOVE_WS_CURSOR_UP:return Blockly.navigation.moveWSCursor_(0,-1);case Blockly.navigation.actionNames.MOVE_WS_CURSOR_DOWN:return Blockly.navigation.moveWSCursor_(0,1);case Blockly.navigation.actionNames.MOVE_WS_CURSOR_LEFT:return Blockly.navigation.moveWSCursor_(-1,0);case Blockly.navigation.actionNames.MOVE_WS_CURSOR_RIGHT:return Blockly.navigation.moveWSCursor_(1,0);default:return!1}},Blockly.navigation.handleEnterForWS_=function(){var e=Blockly.getMainWorkspace().getCursor().getCurNode(),t=e.getType();t==Blockly.ASTNode.types.FIELD?e.getLocation().showEditor():e.isConnection()||t==Blockly.ASTNode.types.WORKSPACE?Blockly.navigation.markAtCursor_():t==Blockly.ASTNode.types.BLOCK?Blockly.navigation.warn_("Cannot mark a block."):t==Blockly.ASTNode.types.STACK&&Blockly.navigation.warn_("Cannot mark a stack.")},Blockly.navigation.ACTION_PREVIOUS=new Blockly.Action(Blockly.navigation.actionNames.PREVIOUS,"Go to the previous location."),Blockly.navigation.ACTION_OUT=new Blockly.Action(Blockly.navigation.actionNames.OUT,"Go to the parent of the current location."),Blockly.navigation.ACTION_NEXT=new Blockly.Action(Blockly.navigation.actionNames.NEXT,"Go to the next location."),Blockly.navigation.ACTION_IN=new Blockly.Action(Blockly.navigation.actionNames.IN,"Go to the first child of the current location."),Blockly.navigation.ACTION_INSERT=new Blockly.Action(Blockly.navigation.actionNames.INSERT,"Connect the current location to the marked location."),Blockly.navigation.ACTION_MARK=new Blockly.Action(Blockly.navigation.actionNames.MARK,"Mark the current location."),Blockly.navigation.ACTION_DISCONNECT=new Blockly.Action(Blockly.navigation.actionNames.DISCONNECT,"Disconnect the block at the current location from its parent."),Blockly.navigation.ACTION_TOOLBOX=new Blockly.Action(Blockly.navigation.actionNames.TOOLBOX,"Open the toolbox."),Blockly.navigation.ACTION_EXIT=new Blockly.Action(Blockly.navigation.actionNames.EXIT,"Close the current modal, such as a toolbox or field editor."),Blockly.navigation.ACTION_TOGGLE_KEYBOARD_NAV=new Blockly.Action(Blockly.navigation.actionNames.TOGGLE_KEYBOARD_NAV,"Turns on and off keyboard navigation."),Blockly.navigation.ACTION_MOVE_WS_CURSOR_LEFT=new Blockly.Action(Blockly.navigation.actionNames.MOVE_WS_CURSOR_LEFT,"Move the workspace cursor to the lefts."),Blockly.navigation.ACTION_MOVE_WS_CURSOR_RIGHT=new Blockly.Action(Blockly.navigation.actionNames.MOVE_WS_CURSOR_RIGHT,"Move the workspace cursor to the right."),Blockly.navigation.ACTION_MOVE_WS_CURSOR_UP=new Blockly.Action(Blockly.navigation.actionNames.MOVE_WS_CURSOR_UP,"Move the workspace cursor up."),Blockly.navigation.ACTION_MOVE_WS_CURSOR_DOWN=new Blockly.Action(Blockly.navigation.actionNames.MOVE_WS_CURSOR_DOWN,"Move the workspace cursor down."),Blockly.navigation.READONLY_ACTION_LIST=[Blockly.navigation.ACTION_PREVIOUS,Blockly.navigation.ACTION_OUT,Blockly.navigation.ACTION_IN,Blockly.navigation.ACTION_NEXT,Blockly.navigation.ACTION_TOGGLE_KEYBOARD_NAV],Blockly.pxtBlocklyUtils={},Blockly.pxtBlocklyUtils._duplicateOnDragWhitelist=null,Blockly.pxtBlocklyUtils.measureText=function(e,t,n,o){var r=document.createElement("canvas").getContext("2d");return r.font=n+" "+e+" "+t,r.measureText(o).width},Blockly.pxtBlocklyUtils.isShadowArgumentReporter=function(e){return e.isShadow()&&("variables_get_reporter"===e.type||"argument_reporter_boolean"===e.type||"argument_reporter_number"===e.type||"argument_reporter_string"===e.type||"argument_reporter_array"===e.type||"argument_reporter_custom"===e.type||Blockly.pxtBlocklyUtils._duplicateOnDragWhitelist&&-1!==Blockly.pxtBlocklyUtils._duplicateOnDragWhitelist.indexOf(e.type))},Blockly.pxtBlocklyUtils.whitelistDraggableBlockTypes=function(e){Blockly.pxtBlocklyUtils._duplicateOnDragWhitelist=e.slice()},Blockly.pxtBlocklyUtils.hasMatchingArgumentReporter=function(e,t){for(var n=t.getFieldValue("VALUE"),o=t.getTypeName(),r=0;r<e.inputList.length;++r){var i=e.inputList[r];if(i.type==Blockly.INPUT_VALUE){var s=i.connection.targetBlock();if(s&&s.type==t.type&&(i=s.getFieldValue("VALUE"),s=s.getTypeName(),i==n)&&o==s)return!0}}return!1},Blockly.Gesture=function(e,t){this.mouseDownXY_=null,this.currentDragDeltaXY_=new Blockly.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=t,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=e,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.shouldDuplicateOnDrag_=this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!Blockly.DRAG_STACK},Blockly.Gesture.prototype.dispose=function(){Blockly.Touch.clearTouchIdentifier(),Blockly.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&Blockly.unbindEvent_(this.onMoveWrapper_),this.onUpWrapper_&&Blockly.unbindEvent_(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},Blockly.Gesture.prototype.updateFromEvent_=function(e){var t=new Blockly.utils.Coordinate(e.clientX,e.clientY);this.updateDragDelta_(t)&&(this.updateIsDragging_(),Blockly.longStop_()),this.mostRecentEvent_=e},Blockly.Gesture.prototype.updateDragDelta_=function(e){return this.currentDragDeltaXY_=Blockly.utils.Coordinate.difference(e,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=Blockly.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?Blockly.FLYOUT_DRAG_RADIUS:Blockly.DRAG_RADIUS))},Blockly.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace_,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},Blockly.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},Blockly.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():(this.targetBlock_.isMovable()||this.shouldDuplicateOnDrag_)&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_)&&(this.startDraggingBlock_(),!0)},Blockly.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=this.flyout_?new Blockly.FlyoutDragger(this.flyout_):new Blockly.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},Blockly.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},Blockly.Gesture.prototype.startDraggingBlock_=function(){this.shouldDuplicateOnDrag_&&this.duplicateOnDrag_(),this.blockDragger_=new Blockly.BlockDragger(this.targetBlock_,this.startWorkspace_,this.mouseDownXY_),this.blockDragger_.startBlockDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_)},Blockly.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new Blockly.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},Blockly.Gesture.prototype.doStart=function(e){Blockly.utils.isTargetInput(e)?this.cancel():(this.hasStarted_=!0,Blockly.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),Blockly.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,Blockly.Tooltip.block(),this.targetBlock_&&(!this.targetBlock_.isInFlyout&&e.shiftKey&&this.targetBlock_.workspace.keyboardAccessibilityMode?this.creatorWorkspace_.getCursor().setCurNode(Blockly.navigation.getTopNode(this.targetBlock_)):this.targetBlock_.select()),Blockly.utils.isRightButton(e)?this.handleRightClick(e):("touchstart"!=e.type.toLowerCase()&&"pointerdown"!=e.type.toLowerCase()||"mouse"==e.pointerType||Blockly.longStart(e,this),this.mouseDownXY_=new Blockly.utils.Coordinate(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e)))},Blockly.Gesture.prototype.bindMouseEvents=function(e){this.onMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this)),e.preventDefault(),e.stopPropagation()},Blockly.Gesture.prototype.handleMove=function(e){this.updateFromEvent_(e),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),e.preventDefault(),e.stopPropagation()},Blockly.Gesture.prototype.handleUp=function(e){this.updateFromEvent_(e),Blockly.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(e,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_(e):this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e),e.preventDefault(),e.stopPropagation(),this.dispose())},Blockly.Gesture.prototype.cancel=function(){this.isEnding_||(this.isEnding_=!0,Blockly.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},Blockly.Gesture.prototype.handleRightClick=function(e){this.targetBlock_?(this.bringBlockToFront_(),Blockly.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(e)):this.startBubble_?this.startBubble_.showContextMenu(e):this.startWorkspace_&&!this.flyout_&&(Blockly.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()},Blockly.Gesture.prototype.handleWsStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(t),this.mostRecentEvent_=e,this.doStart(e),this.startWorkspace_.keyboardAccessibilityMode&&Blockly.navigation.setState(Blockly.navigation.STATE_WS)},Blockly.Gesture.prototype.handleFlyoutStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(t),this.handleWsStart(e,t.getWorkspace())},Blockly.Gesture.prototype.handleBlockStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent_=e},Blockly.Gesture.prototype.handleBubbleStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent_=e},Blockly.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},Blockly.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},Blockly.Gesture.prototype.doBlockClick_=function(){this.flyout_&&this.flyout_.autoClose?this.targetBlock_.isEnabled()&&(Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump()):Blockly.WidgetDiv.isVisible()||Blockly.DropDownDiv.isVisible()||Blockly.Events.fire(new Blockly.Events.Ui(this.startBlock_,"click",void 0,void 0)),this.bringBlockToFront_(),Blockly.Events.setGroup(!1)},Blockly.Gesture.prototype.doWorkspaceClick_=function(e){var t=this.creatorWorkspace_;e.shiftKey&&t.keyboardAccessibilityMode?(e=new Blockly.utils.Coordinate(e.clientX,e.clientY),e=Blockly.utils.screenToWsCoordinates(t,e),e=Blockly.ASTNode.createWorkspaceNode(t,e),t.getCursor().setCurNode(e)):Blockly.selected&&Blockly.selected.unselect()},Blockly.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},Blockly.Gesture.prototype.setStartField=function(e){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=e)},Blockly.Gesture.prototype.setStartBubble=function(e){this.startBubble_||(this.startBubble_=e)},Blockly.Gesture.prototype.setStartBlock=function(e){this.startBlock_||this.startBubble_||(this.startBlock_=e,this.shouldDuplicateOnDrag_=!e.disabled&&!e.getInheritedDisabled()&&!e.isInFlyout&&Blockly.pxtBlocklyUtils.isShadowArgumentReporter(e),e.isInFlyout&&e!=e.getRootBlock()?this.setTargetBlock_(e.getRootBlock()):this.setTargetBlock_(e))},Blockly.Gesture.prototype.setTargetBlock_=function(e){e.isShadow()&&!this.shouldDuplicateOnDrag_?this.setTargetBlock_(e.getParent()):this.targetBlock_=e},Blockly.Gesture.prototype.setStartWorkspace_=function(e){this.startWorkspace_||(this.startWorkspace_=e)},Blockly.Gesture.prototype.setStartFlyout_=function(e){this.flyout_||(this.flyout_=e)},Blockly.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},Blockly.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},Blockly.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},Blockly.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},Blockly.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},Blockly.Gesture.prototype.hasStarted=function(){return this.hasStarted_},Blockly.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},Blockly.Gesture.inProgress=function(){for(var e,t=Blockly.Workspace.getAll(),n=0;e=t[n];n++)if(e.currentGesture_)return!0;return!1},Blockly.Gesture.prototype.forceStartBlockDrag=function(e,t){this.handleBlockStart(e,t),this.handleWsStart(e,t.workspace),this.hasExceededDragRadius_=this.isDraggingBlock_=!0,this.startDraggingBlock_()},Blockly.Gesture.prototype.duplicateOnDrag_=function(){var e=null;Blockly.Events.disable();try{this.startWorkspace_.setResizesEnabled(!1);var t=Blockly.Xml.blockToDom(this.targetBlock_);if("variables_get_reporter"==t.getAttribute("type")){var n=t.firstChild;if(!n)throw"unable to create a variable_get block from a variables_get_reporter block, block has no VAR field";var o=document.createElement("block"),r=(o.setAttribute("type","variables_get"),document.createElement("field"));r.setAttribute("name",n.getAttribute("name")),r.setAttribute("id",n.getAttribute("id")),r.textContent=n.textContent,o.appendChild(r),t=o}this.targetBlock_.inputList[0]&&this.targetBlock_.inputList[0].fieldRow[0]&&this.targetBlock_.inputList[0].fieldRow[0].clearHover&&this.targetBlock_.inputList[0].fieldRow[0].clearHover();var e=Blockly.Xml.domToBlock(t,this.startWorkspace_),i=this.targetBlock_.getRelativeToSurfaceXY();e.moveBy(i.x,i.y),e.setShadow(!1),e.setMovable(!0)}finally{Blockly.Events.enable()}e?(Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(e)),e.select(),this.targetBlock_=e):console.error("Something went wrong while duplicating a block.")},Blockly.Field=function(e,t,n){this.tooltip_=this.validator_=this.value_=null,this.size_=new Blockly.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t)},Blockly.Field.prototype.name=void 0,Blockly.Field.prototype.className_="blocklyText",Blockly.Field.prototype.disposed=!1,Blockly.Field.prototype.maxDisplayLength=1/0,Blockly.Field.prototype.sourceBlock_=null,Blockly.Field.prototype.isDirty_=!0,Blockly.Field.prototype.visible_=!0,Blockly.Field.prototype.argType_=null,Blockly.Field.prototype.clickTarget_=null,Blockly.Field.NBSP="",Blockly.Field.IE_TEXT_OFFSET="0.3em",Blockly.Field.prototype.EDITABLE=!0,Blockly.Field.prototype.SERIALIZABLE=!1,Blockly.Field.prototype.configure_=function(e){var t=e.tooltip;(t="string"==typeof t?Blockly.utils.replaceMessageReferences(e.tooltip):t)&&this.setTooltip(t)},Blockly.Field.prototype.setSourceBlock=function(e){if(this.sourceBlock_)throw Error("Field already bound to a block.");(this.sourceBlock_=e).workspace.rendered&&(this.constants_=e.workspace.getRenderer().getConstants())},Blockly.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},Blockly.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=Blockly.utils.dom.createSvgElement("g",{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.setDataAttribute_(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},Blockly.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},Blockly.Field.prototype.initModel=function(){},Blockly.Field.prototype.onLoadedIntoWorkspace=function(){},Blockly.Field.prototype.createBorderRect_=function(){this.size_.height=Math.max(this.size_.height,this.constants_.FIELD_BORDER_RECT_HEIGHT),this.size_.width=Math.max(this.size_.width,2*this.constants_.FIELD_BORDER_RECT_X_PADDING),this.borderRect_=Blockly.utils.dom.createSvgElement("rect",{rx:this.constants_.FIELD_BORDER_RECT_RADIUS,ry:this.constants_.FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},Blockly.Field.prototype.createTextElement_=function(){var e=this.borderRect_?this.constants_.FIELD_BORDER_RECT_X_PADDING:0,t=this.constants_.FIELD_TEXT_BASELINE_CENTER,n=this.constants_.FIELD_TEXT_BASELINE_Y;this.size_.height=Math.max(this.size_.height,t?this.constants_.FIELD_TEXT_HEIGHT:n),this.size_.height>this.constants_.FIELD_TEXT_HEIGHT&&(n+=(this.size_.height-n)/2),this.textElement_=Blockly.utils.dom.createSvgElement("text",{class:"blocklyText",y:t?this.size_.height/2:n,dy:this.constants_.FIELD_TEXT_Y_OFFSET,x:e},this.fieldGroup_),t&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},Blockly.Field.prototype.setDataAttribute_=function(){null!==this.getArgTypes()&&(this.sourceBlock_.isShadow()?this.sourceBlock_.svgGroup_:this.fieldGroup_).setAttribute("data-argument-type",this.getArgTypes())},Blockly.Field.prototype.bindEvents_=function(){Blockly.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},Blockly.Field.prototype.fromXml=function(e){this.setValue(e.textContent)},Blockly.Field.prototype.toXml=function(e){return e.textContent=this.getValue(),e},Blockly.Field.prototype.dispose=function(){Blockly.DropDownDiv.hideIfOwner(this),Blockly.WidgetDiv.hideIfOwner(this),this.mouseDownWrapper_&&Blockly.unbindEvent_(this.mouseDownWrapper_),Blockly.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},Blockly.Field.prototype.updateEditable=function(){var e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(Blockly.utils.dom.addClass(e,"blocklyEditableText"),Blockly.utils.dom.removeClass(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(Blockly.utils.dom.addClass(e,"blocklyNonEditableText"),Blockly.utils.dom.removeClass(e,"blocklyEditableText"),e.style.cursor=""))},Blockly.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},Blockly.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},Blockly.Field.prototype.isSerializable=function(){var e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e},Blockly.Field.prototype.isVisible=function(){return this.visible_},Blockly.Field.prototype.setVisible=function(e){var t;this.visible_!=e&&(this.visible_=e,t=this.getSvgRoot())&&(t.style.display=e?"block":"none")},Blockly.Field.prototype.addArgType=function(e){null==this.argType_&&(this.argType_=[]),this.argType_.push(e)},Blockly.Field.prototype.getArgTypes=function(){return null===this.argType_||0===this.argType_.length?null:this.argType_.join(" ")},Blockly.Field.prototype.setValidator=function(e){this.validator_=e},Blockly.Field.prototype.getValidator=function(){return this.validator_},Blockly.Field.prototype.classValidator=function(e){return e},Blockly.Field.prototype.callValidator=function(e){var t=this.classValidator(e);if(null===t)return null;if(void 0!==t&&(e=t),t=this.getValidator()){if(null===(t=t.call(this,e)))return null;void 0!==t&&(e=t)}return e},Blockly.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},Blockly.Field.prototype.applyColour=function(){},Blockly.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_(),this.updateSize_())},Blockly.Field.prototype.showEditor=function(e){this.isClickable()&&this.showEditor_(e)},Blockly.Field.prototype.updateWidth=function(){console.warn("Deprecated call to updateWidth, call Blockly.Field.updateSize_ to force an update to the size of the field, or Blockly.utils.dom.getTextWidth() to check the size of the field."),this.updateSize_()},Blockly.Field.prototype.updateSize_=function(){var e=Blockly.utils.dom.getFastTextWidth(this.textElement_,this.constants_.FIELD_TEXT_FONTSIZE,this.constants_.FIELD_TEXT_FONTWEIGHT,this.constants_.FIELD_TEXT_FONTFAMILY);this.borderRect_&&(e+=2*this.constants_.FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",e)),this.size_.width=e},Blockly.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&!this.sourceBlock_.isInsertionMarker_&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new Blockly.utils.Size(0,0)},Blockly.Field.prototype.getScaledBBox=function(){var e,t,n,o;return this.borderRect_?(o=this.borderRect_.getBoundingClientRect(),t=Blockly.utils.style.getPageOffset(this.borderRect_),n=o.width,o=o.height):(o=this.sourceBlock_.getHeightWidth(),e=this.sourceBlock_.workspace.scale,t=this.getAbsoluteXY_(),n=o.width*e,o=o.height*e,Blockly.utils.userAgent.GECKO?(t.x+=1.5*e,t.y+=1.5*e):Blockly.utils.userAgent.EDGE||Blockly.utils.userAgent.IE||(t.x-=.5*e,t.y-=.5*e),n+=+e,o+=+e),{top:t.y,bottom:t.y+o,left:t.x,right:t.x+n}},Blockly.Field.prototype.getDisplayText_=function(){var e=this.getText();return e?(e=(e=e.length>this.maxDisplayLength?e.substring(0,this.maxDisplayLength-2)+"":e).replace(/\s/g,Blockly.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+=""),e):Blockly.Field.NBSP},Blockly.Field.prototype.getText=function(){if(this.getText_){var e=this.getText_.call(this);if(null!==e)return String(e)}return String(this.getValue())},Blockly.Field.prototype.setText=function(e){throw Error("setText method is deprecated")},Blockly.Field.prototype.markDirty=function(){this.isDirty_=!0},Blockly.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())},Blockly.Field.prototype.setValue=function(e){var t;null!==e&&(t=this.doClassValidation_(e),(e=this.processValidation_(e,t))instanceof Error||(t=this.getValidator())&&(t=t.call(this,e),(e=this.processValidation_(e,t))instanceof Error)||(t=this.getValue())!==e&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name||null,t,e)),this.doValueUpdate_(e),this.isDirty_)&&this.forceRerender())},Blockly.Field.prototype.processValidation_=function(e,t){return null===t?(this.doValueInvalid_(e),this.isDirty_&&this.forceRerender(),Error()):e=void 0!==t?t:e},Blockly.Field.prototype.getValue=function(){return this.value_},Blockly.Field.prototype.doClassValidation_=function(e){return null==e?null:this.classValidator(e)},Blockly.Field.prototype.doValueUpdate_=function(e){this.value_=e,this.isDirty_=!0},Blockly.Field.prototype.doValueInvalid_=function(e){},Blockly.Field.prototype.onMouseDown_=function(e){this.sourceBlock_&&this.sourceBlock_.workspace&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)},Blockly.Field.prototype.setTooltip=function(e){var t=this.getClickTarget_();t?t.tooltip=e||""===e?e:this.sourceBlock_:this.tooltip_=e},Blockly.Field.prototype.getClickTarget_=function(){if(this.clickTarget_)return this.clickTarget_;if(!this.sourceBlock_)return null;for(var e,t=0,n=0,o=0;e=this.sourceBlock_.inputList[o];o++){for(var r,i=0;r=e.fieldRow[i];i++)r instanceof Blockly.FieldLabel||t++;e.connection&&n++}return this.clickTarget_=(t<=1&&this.sourceBlock_.outputConnection&&!n?this.sourceBlock_:this).getSvgRoot()},Blockly.Field.prototype.getTotalFields_=function(){for(var e,t=0,n=0;e=this.sourceBlock_.inputList[n];n++)t+=e.fieldRow.length;return t},Blockly.Field.prototype.getAbsoluteXY_=function(){return Blockly.utils.style.getPageOffset(this.getClickTarget_())},Blockly.Field.prototype.referencesVariables=function(){return!1},Blockly.Field.prototype.getParentInput=function(){for(var e=null,t=this.sourceBlock_,n=t.inputList,o=0;o<t.inputList.length;o++)for(var r=n[o],i=r.fieldRow,s=0;s<i.length;s++)if(i[s]===this){e=r;break}return e},Blockly.Field.prototype.getFlipRtl=function(){return!1},Blockly.Field.prototype.isTabNavigable=function(){return!1},Blockly.Field.prototype.onBlocklyAction=function(e){return!1},Blockly.Field.prototype.setCursorSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},Blockly.Field.prototype.setMarkerSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.markerSvg_=e):this.markerSvg_=null},Blockly.fieldRegistry={},Blockly.fieldRegistry.typeMap_={},Blockly.fieldRegistry.register=function(e,t){if("string"!=typeof e||""==e.trim())throw Error('Invalid field type "'+e+'". The type must be a non-empty string.');if(Blockly.fieldRegistry.typeMap_[e])throw Error('Error: Field "'+e+'" is already registered.');if(!t||"function"!=typeof t.fromJson)throw Error('Field "'+t+'" must have a fromJson function');e=e.toLowerCase(),Blockly.fieldRegistry.typeMap_[e]=t},Blockly.fieldRegistry.unregister=function(e){Blockly.fieldRegistry.typeMap_[e]?delete Blockly.fieldRegistry.typeMap_[e]:console.warn('No field mapping for type "'+e+'" found to unregister')},Blockly.fieldRegistry.fromJson=function(e){var t=e.type.toLowerCase();return(t=Blockly.fieldRegistry.typeMap_[t])?t.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},Blockly.FieldLabel=function(e,t,n){this.class_=null,Blockly.FieldLabel.superClass_.constructor.call(this,e=null==e?"":e,null,n),n||(this.class_=t||null)},Blockly.utils.object.inherits(Blockly.FieldLabel,Blockly.Field),Blockly.FieldLabel.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return new Blockly.FieldLabel(t,void 0,e)},Blockly.FieldLabel.prototype.EDITABLE=!1,Blockly.FieldLabel.prototype.bindEvents_=function(){},Blockly.FieldLabel.prototype.configure_=function(e){Blockly.FieldLabel.superClass_.configure_.call(this,e),this.class_=e.class},Blockly.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&Blockly.utils.dom.addClass(this.textElement_,this.class_)},Blockly.FieldLabel.prototype.doClassValidation_=function(e){return null==e?null:String(e)},Blockly.FieldLabel.prototype.setClass=function(e){this.textElement_&&(this.class_&&Blockly.utils.dom.removeClass(this.textElement_,this.class_),e)&&Blockly.utils.dom.addClass(this.textElement_,e),this.class_=e},Blockly.fieldRegistry.register("field_label",Blockly.FieldLabel),Blockly.FieldLabelHover=function(e,t){Blockly.FieldLabelHover.superClass_.constructor.call(this,e,t),this.arrowWidth_=0},Blockly.utils.object.inherits(Blockly.FieldLabelHover,Blockly.FieldLabel),Blockly.FieldLabelHover.prototype.initView=function(){Blockly.FieldLabelHover.superClass_.initView.call(this),this.sourceBlock_.isEditable()&&(this.mouseOverWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseover",this,this.onMouseOver_),this.mouseOutWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseout",this,this.onMouseOut_))},Blockly.FieldLabelHover.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return new Blockly.FieldLabelHover(t,e.class)},Blockly.FieldLabelHover.prototype.EDITABLE=!1,Blockly.FieldLabelHover.prototype.SERIALIZABLE=!0,Blockly.FieldLabelHover.prototype.updateWidth=function(){this.size_.width=Blockly.utils.dom.getFastTextWidth(this.textElement_,this.constants_.FIELD_TEXT_FONTSIZE,this.constants_.FIELD_TEXT_FONTWEIGHT,this.constants_.FIELD_TEXT_FONTFAMILY)},Blockly.FieldLabelHover.prototype.onMouseOver_=function(e){this.sourceBlock_.isInFlyout||!this.sourceBlock_.isShadow()||(e=this.sourceBlock_.workspace.getGesture(e))&&e.isDragging()||!this.sourceBlock_.pathObject.svgPath||(Blockly.utils.dom.addClass(this.sourceBlock_.pathObject.svgPath,"blocklyFieldHover"),this.sourceBlock_.pathObject.svgPath.style.strokeDasharray="2")},Blockly.FieldLabelHover.prototype.clearHover=function(){this.sourceBlock_.pathObject.svgPath&&(Blockly.utils.dom.removeClass(this.sourceBlock_.pathObject.svgPath,"blocklyFieldHover"),this.sourceBlock_.pathObject.svgPath.style.strokeDasharray="")},Blockly.FieldLabelHover.prototype.onMouseOut_=function(e){this.sourceBlock_.isInFlyout||!this.sourceBlock_.isShadow()||(e=this.sourceBlock_.workspace.getGesture(e))&&e.isDragging()||this.clearHover()},Blockly.FieldLabelHover.dispose=function(){this.mouseOverWrapper_&&(Blockly.unbindEvent_(this.mouseOverWrapper_),this.mouseOverWrapper_=null),this.mouseOutWrapper_&&(Blockly.unbindEvent_(this.mouseOutWrapper_),this.mouseOutWrapper_=null),Blockly.FieldLabelHover.superClass_.dispose.call(this),this.variableMap_=this.workspace_=null},Blockly.fieldRegistry.register("field_label_hover",Blockly.FieldLabelHover),Blockly.FieldVariableGetter=function(e,t,n,o,r){this.defaultVariableName=e||"",this.size_=new Blockly.utils.Size(0,0),r&&this.configure_(r),t&&this.setValidator(t),r||this.setTypes_(n,o)},Blockly.utils.object.inherits(Blockly.FieldVariableGetter,Blockly.Field),Blockly.FieldVariableGetter.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.variable);return new Blockly.FieldVariableGetter(t,null,e.variableTypes,e.defaultType)},Blockly.FieldVariableGetter.prototype.workspace_=null,Blockly.FieldVariableGetter.prototype.CURSOR="copy",Blockly.FieldVariableGetter.prototype.EDITABLE=!1,Blockly.FieldVariableGetter.prototype.SERIALIZABLE=!0,Blockly.FieldVariableGetter.prototype.initView=function(){this.createTextElement_(),this.sourceBlock_.isEditable()&&(this.mouseOverWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseover",this,this.onMouseOver_),this.mouseOutWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseout",this,this.onMouseOut_))},Blockly.FieldVariableGetter.prototype.initModel=function(){var e;this.variable_||(e=Blockly.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_),this.doValueUpdate_(e.getId()))},Blockly.FieldVariableGetter.prototype.onMouseOver_=function(e){this.sourceBlock_.isInFlyout||(e=this.sourceBlock_.workspace.getGesture(e))&&e.isDragging()||!(e=this.sourceBlock_.pathObject.svgPath)||(Blockly.utils.dom.addClass(e,"blocklyFieldHover"),e.style.strokeDasharray="2")},Blockly.FieldVariableGetter.prototype.clearHover=function(){var e=this.sourceBlock_.pathObject.svgPath;e&&(Blockly.utils.dom.removeClass(e,"blocklyFieldHover"),e.style.strokeDasharray="")},Blockly.FieldVariableGetter.prototype.onMouseOut_=function(e){this.sourceBlock_.isInFlyout||(e=this.sourceBlock_.workspace.getGesture(e))&&e.isDragging()||this.clearHover()},Blockly.FieldVariableGetter.dispose=function(){this.mouseOverWrapper_&&(Blockly.unbindEvent_(this.mouseOverWrapper_),this.mouseOverWrapper_=null),this.mouseOutWrapper_&&(Blockly.unbindEvent_(this.mouseOutWrapper_),this.mouseOutWrapper_=null),Blockly.FieldVariableGetter.superClass_.dispose.call(this),this.variableMap_=this.workspace_=null},Blockly.FieldVariableGetter.prototype.fromXml=function(e){e.getAttribute("id");var t=e.textContent,n=e.getAttribute("variabletype")||e.getAttribute("variableType")||"",t=Blockly.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,t,n);if(null!=n&&n!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+Blockly.Xml.domToText(e)+".");this.setValue(t.getId())},Blockly.FieldVariableGetter.prototype.toXml=function(e){return this.initModel(),e.id=this.variable_.getId(),e.textContent=this.variable_.name,this.variable_.type&&e.setAttribute("variabletype",this.variable_.type),e},Blockly.FieldVariableGetter.prototype.setSourceBlock=function(e){goog.asserts.assert(!e.isShadow(),"Variable fields are not allowed to exist on shadow blocks."),Blockly.FieldVariableGetter.superClass_.setSourceBlock.call(this,e)},Blockly.FieldVariableGetter.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},Blockly.FieldVariableGetter.prototype.getText=function(){return this.variable_?this.variable_.name:""},Blockly.FieldVariableGetter.prototype.getVariable=function(){return this.variable_},Blockly.FieldVariableGetter.prototype.doValueUpdate_=function(e){this.variable_=Blockly.Variables.getVariable(this.sourceBlock_.workspace,e),Blockly.FieldVariableGetter.superClass_.doValueUpdate_.call(this,e)},Blockly.FieldVariableGetter.prototype.doClassValidation_=function(e){var t;return null===e?null:(t=Blockly.Variables.getVariable(this.sourceBlock_.workspace,e))?(t=t.type,this.typeIsAllowed_(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)},Blockly.FieldVariableGetter.prototype.typeIsAllowed_=function(e){var t=this.getVariableTypes_();if(!t)return!0;for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1},Blockly.FieldVariableGetter.prototype.getVariableTypes_=function(){var e=this.variableTypes;if(null===e&&this.sourceBlock_)return this.sourceBlock_.workspace.getVariableTypes();if(0==(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e},Blockly.FieldVariableGetter.prototype.setTypes_=function(e,t){if(t=t||"",null==e)e=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var n=!1,o=0;o<e.length;o++)e[o]==t&&(n=!0);if(!n)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}this.defaultType_=t,this.variableTypes=e},Blockly.FieldVariableGetter.prototype.showEditor_=function(){},Blockly.FieldVariableGetter.prototype.updateEditable=function(){!this.sourceBlock_.isInFlyout&&this.sourceBlock_.isEditable()&&(this.sourceBlock_.pathObject.svgPath.style.cursor=this.CURSOR)},Blockly.FieldVariableGetter.prototype.referencesVariables=function(){return!0},Blockly.fieldRegistry.register("field_variable_getter",Blockly.FieldVariableGetter),Blockly.Input=function(e,t,n,o){if(e!=Blockly.DUMMY_INPUT&&!t)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=e,this.name=t,this.sourceBlock_=n,this.connection=o,this.fieldRow=[]},Blockly.Input.prototype.align=Blockly.ALIGN_LEFT,Blockly.Input.prototype.visible_=!0,Blockly.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},Blockly.Input.prototype.appendField=function(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this},Blockly.Input.prototype.insertFieldAt=function(e,t,n){if(e<0||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(t||""==t&&n)&&((t="string"==typeof t?new Blockly.FieldLabel(t):t).setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&t.init(),t.name=n,t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),++e,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock_.rendered)&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),e},Blockly.Input.prototype.removeField=function(e){for(var t,n=0;t=this.fieldRow[n];n++)if(t.name===e)return t.dispose(),this.fieldRow.splice(n,1),void(this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()));throw Error('Field "%s" not found.',e)},Blockly.Input.prototype.isVisible=function(){return this.visible_},Blockly.Input.prototype.setVisible=function(e){var t=[];if(this.visible_!=e){for(var n,o=(this.visible_=e)?"block":"none",r=0;n=this.fieldRow[r];r++)n.setVisible(e);this.connection&&(e?t=this.connection.startTrackingAll():this.connection.stopTrackingAll(),r=this.connection.targetBlock())&&(r.getSvgRoot().style.display=o,e||(r.rendered=!1))}return t},Blockly.Input.prototype.markDirty=function(){for(var e,t=0;e=this.fieldRow[t];t++)e.markDirty()},Blockly.Input.prototype.setCheck=function(e){if(this.connection)return this.connection.setCheck(e),this;throw Error("This input does not have a connection.")},Blockly.Input.prototype.setAlign=function(e){return this.align=e,this.sourceBlock_.rendered&&this.sourceBlock_.render(),this},Blockly.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init(this.sourceBlock_)},Blockly.Input.prototype.dispose=function(){for(var e,t=0;e=this.fieldRow[t];t++)e.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},Blockly.Block=function(e,t,n){if(Blockly.Generator&&void 0!==Blockly.Generator.prototype[t])throw Error('Block prototypeName "'+t+'" conflicts with Blockly.Generator members.');var o=e&&e.getFlyout&&e.getFlyout()?e.getFlyout().getWorkspace():null;if(this.id=!n||e.getBlockById(n)||o&&o.getBlockById(n)?Blockly.utils.genUid():n,e.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=this.startHat=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new Blockly.utils.Size(160,80),xy:new Blockly.utils.Coordinate(10,10)},this.xy_=new Blockly.utils.Coordinate(0,0),this.workspace=e,this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,this.isInsertionMarker_=!1,this.hat=void 0,t){if(this.type=t,!(n=Blockly.Blocks[t])||"object"!=typeof n)throw TypeError("Unknown block type: "+t);Blockly.utils.object.mixin(this,n)}if(e.addTopBlock(this),e.addTypedBlock(this),"function"==typeof this.init&&this.init(),this.inputsInlineDefault=this.inputsInline,Blockly.Events.isEnabled()){(e=Blockly.Events.getGroup())||Blockly.Events.setGroup(!0);try{Blockly.Events.fire(new Blockly.Events.BlockCreate(this))}finally{e||Blockly.Events.setGroup(!1)}}"function"==typeof this.onchange&&this.setOnChange(this.onchange)},Blockly.Block.prototype.data=null,Blockly.Block.prototype.disposed=!1,Blockly.Block.prototype.hue_=null,Blockly.Block.prototype.colour_="#000000",Blockly.Block.prototype.styleName_=null,Blockly.Block.prototype.dispose=function(e){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockDelete(this)),Blockly.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),Blockly.selected==this&&(Blockly.selected=null);for(var t,n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);for(n=0;t=this.inputList[n];n++)t.dispose();this.inputList.length=0;for(var o,r=this.getConnections_(!0),n=0;o=r[n];n++)o.dispose()}finally{Blockly.Events.enable(),this.disposed=!0}}},Blockly.Block.prototype.initModel=function(){for(var e,t=0;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.initModel&&n.initModel()},Blockly.Block.prototype.unplug=function(e){this.outputConnection?this.unplugFromRow_(e):this.previousConnection&&this.unplugFromStack_(e)},Blockly.Block.prototype.unplugFromRow_=function(e){var t=null;this.outputConnection.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&(e=e&&this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&((e=e.targetConnection).disconnect(),e.checkType(t)?t.connect(e):e.onFailedConnect(t))},Blockly.Block.prototype.getOnlyValueConnection_=function(){for(var e=null,t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;if(n&&n.type==Blockly.INPUT_VALUE&&n.targetConnection){if(e)return null;e=n}}return e},Blockly.Block.prototype.unplugFromStack_=function(e){var t=null,n=(this.previousConnection.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect()),this.getNextBlock());e&&n&&!n.isShadow()&&((e=this.nextConnection.targetConnection).disconnect(),t)&&t.checkType(e)&&t.connect(e)},Blockly.Block.prototype.getConnections_=function(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(var t,n=0;t=this.inputList[n];n++)t.connection&&e.push(t.connection);return e},Blockly.Block.prototype.lastConnectionInStack=function(){for(var e=this.nextConnection;e;){var t=e.targetBlock();if(!t)return e;e=t.nextConnection}return null},Blockly.Block.prototype.bumpNeighbours=function(){console.warn("Not expected to reach Block.bumpNeighbours function. BlockSvg.bumpNeighbours was expected to be called instead.")},Blockly.Block.prototype.getParent=function(){return this.parentBlock_},Blockly.Block.prototype.getInputWithBlock=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.connection&&t.connection.targetBlock()==e)return t;return null},Blockly.Block.prototype.getInputWithConnection=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.connection==e)return t;return null},Blockly.Block.prototype.getSurroundParent=function(){var e=this;do{var t=e;if(!(e=e.getParent()))return null}while(e.getNextBlock()==t);return e},Blockly.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},Blockly.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},Blockly.Block.prototype.getFirstStatementConnection=function(){for(var e,t=0;e=this.inputList[t];t++)if(e.connection&&e.connection.type==Blockly.NEXT_STATEMENT)return e.connection;return null},Blockly.Block.prototype.getRootBlock=function(){var e=this;do{var t=e,e=t.parentBlock_}while(e);return t},Blockly.Block.prototype.getTopStackBlock=function(){var e=this;do{var t=e.getPreviousBlock()}while(t&&t.getNextBlock()==e&&(e=t));return e},Blockly.Block.prototype.getChildren=function(e){if(!e)return this.childBlocks_;e=[];for(var t,n=0;t=this.inputList[n];n++)t.connection&&(t=t.connection.targetBlock())&&e.push(t);return(n=this.getNextBlock())&&e.push(n),e},Blockly.Block.prototype.setParent=function(e){if(e!=this.parentBlock_){if(this.parentBlock_){if(Blockly.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}},Blockly.Block.prototype.getDescendants=function(e,t){for(var n,o=[this],r=this.getChildren(e),i=0;n=r[i];i++)t&&n.isShadow()||o.push.apply(o,n.getDescendants(e));return o},Blockly.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.Block.prototype.inDebugWorkspace=function(){return!(!this.workspace||!this.workspace.options.debugMode)},Blockly.Block.prototype.setDeletable=function(e){this.deletable_=e},Blockly.Block.prototype.isMovable=function(){return this.isMovablePersisted()&&!this.inDebugWorkspace()},Blockly.Block.prototype.isMovablePersisted=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.Block.prototype.setMovable=function(e){this.movable_=e},Blockly.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(Blockly.utils.getBlockTypeCounts(this,!0))},Blockly.Block.prototype.isShadow=function(){return this.isShadow_},Blockly.Block.prototype.setShadow=function(e){this.isShadow_=e},Blockly.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},Blockly.Block.prototype.setInsertionMarker=function(e){this.isInsertionMarker_!=e&&(this.isInsertionMarker_=e)&&(this.setColour(Blockly.Colours.insertionMarker),this.setOpacity(Blockly.Colours.insertionMarkerOpacity),Blockly.utils.dom.addClass(this.svgGroup_,"blocklyInsertionMarker"))},Blockly.Block.prototype.isEditable=function(){return this.isEditablePersisted()&&!this.inDebugWorkspace()},Blockly.Block.prototype.isEditablePersisted=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.Block.prototype.setEditable=function(e){this.editable_=e,e=0;for(var t;t=this.inputList[e];e++)for(var n,o=0;n=t.fieldRow[o];o++)n.updateEditable()},Blockly.Block.prototype.isDisposed=function(){return this.disposed},Blockly.Block.prototype.getMatchingConnection=function(e,t){var n=this.getConnections_(!0);if(e=e.getConnections_(!0),n.length!=e.length)throw Error("Connection lists did not match in length.");for(var o=0;o<e.length;o++)if(e[o]==t)return n[o];return null},Blockly.Block.prototype.setHelpUrl=function(e){this.helpUrl=e},Blockly.Block.prototype.setTooltip=function(e){this.tooltip=e},Blockly.Block.prototype.getColour=function(){return this.colour_},Blockly.Block.prototype.getStyleName=function(){return this.styleName_},Blockly.Block.prototype.getHue=function(){return this.hue_},Blockly.Block.prototype.setColour=function(e){e=Blockly.utils.parseBlockColour(e),this.hue_=e.hue,this.colour_=e.hex},Blockly.Block.prototype.setStyle=function(e){this.styleName_=e},Blockly.Block.prototype.setOnChange=function(e){if(e&&"function"!=typeof e)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=e)&&(this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},Blockly.Block.prototype.getField=function(e){for(var t,n=0;t=this.inputList[n];n++)for(var o,r=0;o=t.fieldRow[r];r++)if(o.name==e)return o;return null},Blockly.Block.prototype.getVars=function(){for(var e,t=[],n=0;e=this.inputList[n];n++)for(var o,r=0;o=e.fieldRow[r];r++)o.referencesVariables()&&t.push(o.getValue());return t},Blockly.Block.prototype.getVarModels=function(){for(var e,t=[],n=0;e=this.inputList[n];n++)for(var o,r=0;o=e.fieldRow[r];r++)o.referencesVariables()&&(o=this.workspace.getVariableById(o.getValue()))&&t.push(o);return t},Blockly.Block.prototype.updateVarName=function(e){for(var t,n=0;t=this.inputList[n];n++)for(var o,r=0;o=t.fieldRow[r];r++)o.referencesVariables()&&e.getId()==o.getValue()&&o.forceRerender()},Blockly.Block.prototype.renameVarById=function(e,t){for(var n,o=0;n=this.inputList[o];o++)for(var r,i=0;r=n.fieldRow[i];i++)r.referencesVariables()&&e==r.getValue()&&r.setValue(t)},Blockly.Block.prototype.getFieldValue=function(e){return(e=this.getField(e))?e.getValue():null},Blockly.Block.prototype.setFieldValue=function(e,t){var n=this.getField(t);if(!n)throw Error('Field "'+t+'" not found.');n.setValue(e)},Blockly.Block.prototype.setPreviousStatement=function(e,t){if(e){if(void 0===t&&(t=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(Blockly.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(t)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},Blockly.Block.prototype.setNextStatement=function(e,t){if(e)void 0===t&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Blockly.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},Blockly.Block.prototype.setOutput=function(e,t){if(e){if(void 0===t&&(t=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(Blockly.OUTPUT_VALUE)}this.outputConnection.setCheck(t)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},Blockly.Block.prototype.setInputsInline=function(e){this.inputsInline!=e&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)},Blockly.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==Blockly.DUMMY_INPUT&&this.inputList[e].type==Blockly.DUMMY_INPUT)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==Blockly.INPUT_VALUE&&this.inputList[e].type==Blockly.DUMMY_INPUT)return!0;return!1},Blockly.Block.prototype.setStartHat=function(e){this.startHat!=e&&(this.startHat=e)},Blockly.Block.prototype.getStartHat=function(){return this.startHat},Blockly.Block.prototype.setOutputShape=function(e){this.outputShape_=e},Blockly.Block.prototype.getOutputShape=function(){return this.outputShape_},Blockly.Block.prototype.setDisabled=function(e){console.warn("Deprecated call to Blockly.Block.prototype.setDisabled, use Blockly.Block.prototype.setEnabled instead."),this.setEnabled(!e)},Blockly.Block.prototype.isEnabled=function(){return!this.disabled},Blockly.Block.prototype.setEnabled=function(e){this.isEnabled()!=e&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,"disabled",null,this.disabled,!e)),this.disabled=!e)},Blockly.Block.prototype.getInheritedDisabled=function(){for(var e=this.getSurroundParent();e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1},Blockly.Block.prototype.isCollapsed=function(){return this.collapsed_},Blockly.Block.prototype.setCollapsed=function(e){this.collapsed_!=e&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)},Blockly.Block.prototype.toString=function(e,t,n){var o=[],r=t||"?";if(this.collapsed_)o.push(this.getInput("_TEMP_COLLAPSED_INPUT").fieldRow[0].getText());else for(var i,s=0;(i=this.inputList[s])&&(!n||i.type!=Blockly.NEXT_STATEMENT&&i.type!=Blockly.PREVIOUS_STATEMENT);s++){for(var a,l=0;a=i.fieldRow[l];l++)o.push(a.getText());i.connection&&((i=i.connection.targetBlock())?o.push(i.toString(void 0,t)):o.push(r))}return o=o.join(" ").trim()||"???",o=e&&o.length>e?o.substring(0,e-3)+"...":o},Blockly.Block.prototype.appendValueInput=function(e){return this.appendInput_(Blockly.INPUT_VALUE,e)},Blockly.Block.prototype.appendStatementInput=function(e){return this.appendInput_(Blockly.NEXT_STATEMENT,e)},Blockly.Block.prototype.appendDummyInput=function(e){return this.appendInput_(Blockly.DUMMY_INPUT,e||"")},Blockly.Block.prototype.jsonInit=function(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,t):this.jsonInitColour_(e,t);for(var n=0;void 0!==e["message"+n];)this.interpolate_(e["message"+n],e["args"+n]||[],e["lastDummyAlign"+n],t),n++;if(void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline),void 0!==e.startHat&&this.setStartHat(e.startHat),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(n=e.tooltip,n=Blockly.utils.replaceMessageReferences(n),this.setTooltip(n)),void 0!==e.enableContextMenu&&(n=e.enableContextMenu,this.contextMenu=!!n),void 0!==e.helpUrl&&(n=e.helpUrl,n=Blockly.utils.replaceMessageReferences(n),this.setHelpUrl(n)),"string"==typeof e.extensions&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&Blockly.Extensions.apply(e.mutator,this,!0),Array.isArray(e.extensions))for(t=e.extensions,n=0;n<t.length;++n)Blockly.Extensions.apply(t[n],this,!1);void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.category&&this.setCategory(e.category)},Blockly.Block.prototype.setColourFromRawValues_=function(e,t,n){e=goog.isString(e)?Blockly.utils.replaceMessageReferences(e):e,t=goog.isString(t)?Blockly.utils.replaceMessageReferences(t):t,n=goog.isString(n)?Blockly.utils.replaceMessageReferences(n):n,this.setColour(e,t,n)},Blockly.Block.prototype.jsonInitColour_=function(e,t){if("colour"in e)if(void 0===e.colour)console.warn(t+"Undefined colour value.");else{var n=e.colour;try{this.setColourFromRawValues_(n,e.colourSecondary,e.colourTertiary)}catch(e){console.warn(t+"Illegal colour value: ",n)}}},Blockly.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(e){console.warn(n+"Style does not exist: ",t)}},Blockly.Block.prototype.mixin=function(e,t){if(void 0!==t&&"boolean"!=typeof t)throw Error("opt_disableCheck must be a boolean if provided");if(!t){for(var n in t=[],e)void 0!==this[n]&&t.push(n);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Blockly.utils.object.mixin(this,e)},Blockly.Block.prototype.interpolate_=function(e,t,n,o){var r=Blockly.utils.tokenizeInterpolation(e),i=[],s=0;e=[];for(var a=0;a<r.length;a++){var l=r[a];if("number"==typeof l){if(l<=0||l>t.length)throw Error('Block "'+this.type+'": Message index %'+l+" out of range.");if(i[l])throw Error('Block "'+this.type+'": Message index %'+l+" duplicated.");i[l]=!0,s++,e.push(t[l-1])}else(l=l.trim())&&e.push(l)}if(s!=t.length)throw Error('Block "'+this.type+'": Message does not reference all '+t.length+" arg(s).");for(e.length&&("string"==typeof e[e.length-1]||Blockly.utils.string.startsWith(e[e.length-1].type,"field_"))&&(a={type:"input_dummy"},n&&(a.align=n),e.push(a)),n={LEFT:Blockly.ALIGN_LEFT,RIGHT:Blockly.ALIGN_RIGHT,CENTRE:Blockly.ALIGN_CENTRE,CENTER:Blockly.ALIGN_CENTRE},t=[],a=0;a<e.length;a++)if("string"==typeof(i=e[a]))t.push([i,void 0]);else{r=s=null;do{if(l=!1,"string"==typeof i)s=new Blockly.FieldLabel(i);else switch(i.type){case"input_value":r=this.appendValueInput(i.name);break;case"input_statement":r=this.appendStatementInput(i.name);break;case"input_dummy":r=this.appendDummyInput(i.name);break;default:!(s=Blockly.fieldRegistry.fromJson(i))&&i.alt&&(i=i.alt,l=!0)}}while(l);if(s)t.push([s,i.name]);else if(r){for(i.check&&r.setCheck(i.check),i.align&&(void 0===(s=n[i.align.toUpperCase()])?console.warn(o+"Illegal align value: ",i.align):r.setAlign(s)),i=0;i<t.length;i++)r.appendField(t[i][0],t[i][1]);t.length=0}}},Blockly.Block.prototype.appendInput_=function(e,t){var n=null;return e!=Blockly.INPUT_VALUE&&e!=Blockly.NEXT_STATEMENT||(n=this.makeConnection_(e)),e=new Blockly.Input(e,t,this,n),this.inputList.push(e),e},Blockly.Block.prototype.moveInputBefore=function(e,t){if(e!=t){for(var n,o=-1,r=t?-1:this.inputList.length,i=0;n=this.inputList[i];i++)if(n.name==e){if(o=i,-1!=r)break}else if(t&&n.name==t&&(r=i,-1!=o))break;if(-1==o)throw Error('Named input "'+e+'" not found.');if(-1==r)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(o,r)}},Blockly.Block.prototype.moveNumberedInputBefore=function(e,t){if(e==t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");var n=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,n)},Blockly.Block.prototype.removeInput=function(e,t){for(var n,o=0;n=this.inputList[o];o++)if(n.name==e)return n.dispose(),void this.inputList.splice(o,1);if(!t)throw Error("Input not found: "+e)},Blockly.Block.prototype.getInput=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.name==e)return t;return null},Blockly.Block.prototype.getInputTargetBlock=function(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()},Blockly.Block.prototype.getCommentText=function(){return this.commentModel.text},Blockly.Block.prototype.setCommentText=function(e){this.commentModel.text!=e&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)},Blockly.Block.prototype.enableBreakpoint=function(e){var t=!1;e?(this.breakpoint||(this.breakpoint=new Blockly.Breakpoint(this),t=!0),this.breakpoint.setVisible(this.isBreakpointSet())):this.breakpoint&&(this.breakpoint.dispose(),t=!0),t&&Blockly.Events.fire(new Blockly.Events.BlockChange(this,"breakpoint",null,!e,e))},Blockly.Block.prototype.isBreakpointSet=function(){return this.breakpointSet_||!1},Blockly.Block.prototype.setBreakpoint=function(e){this.breakpointSet_=e},Blockly.Block.prototype.setOutputShape=function(e){this.outputShape_=e},Blockly.Block.prototype.getOutputShape=function(){return this.outputShape_||Blockly.OUTPUT_SHAPE_ROUND},Blockly.Block.prototype.setCategory=function(e){this.category_=e},Blockly.Block.prototype.getCategory=function(){return this.category_},Blockly.Block.prototype.setWarningText=function(e,t){},Blockly.Block.prototype.setMutator=function(e){},Blockly.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},Blockly.Block.prototype.moveBy=function(e,t){if(this.parentBlock_)throw Error("Block has parent.");var n=new Blockly.Events.BlockMove(this);this.xy_.translate(e,t),n.recordNew(),Blockly.Events.fire(n)},Blockly.Block.prototype.makeConnection_=function(e){return new Blockly.Connection(this,e)},Blockly.Block.prototype.allInputsFilled=function(e){if(!(e=void 0===e?!0:e)&&this.isShadow())return!1;for(var t,n=0;t=this.inputList[n];n++)if(t.connection&&(!(t=t.connection.targetBlock())||!t.allInputsFilled(e)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(e)},Blockly.Block.prototype.toDevString=function(){var e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e},Blockly.Block.prototype.onLoadedIntoWorkspace=function(){for(var e,t=0;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.onLoadedIntoWorkspace&&n.onLoadedIntoWorkspace()},Blockly.blockRendering={},Blockly.blockRendering.IPathObject=function(e,t){},Blockly.utils.aria={},Blockly.utils.aria.ARIA_PREFIX_="aria-",Blockly.utils.aria.ROLE_ATTRIBUTE_="role",Blockly.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem",SEPARATOR:"separator"},Blockly.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin",DISABLED:"disabled"},Blockly.utils.aria.setRole=function(e,t){e.setAttribute(Blockly.utils.aria.ROLE_ATTRIBUTE_,t)},Blockly.utils.aria.setState=function(e,t,n){Array.isArray(n)&&(n=n.join(" ")),e.setAttribute(Blockly.utils.aria.ARIA_PREFIX_+t,n)},Blockly.Menu=function(){Blockly.Component.call(this),this.openingCoords=null,this.highlightedIndex_=-1,this.onKeyDownWrapper_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=null},Blockly.utils.object.inherits(Blockly.Menu,Blockly.Component),Blockly.Menu.prototype.createDom=function(){var e=document.createElement("div");e.id=this.getId(),this.setElementInternal(e),e.className="goog-menu goog-menu-vertical blocklyNonSelectable",e.tabIndex=0,Blockly.utils.aria.setRole(e,this.roleName_||Blockly.utils.aria.Role.MENU)},Blockly.Menu.prototype.focus=function(){var e=this.getElement();e&&(e.focus({preventScroll:!0}),Blockly.utils.dom.addClass(e,"focused"))},Blockly.Menu.prototype.blur=function(){var e=this.getElement();e&&(e.blur(),Blockly.utils.dom.removeClass(e,"focused"))},Blockly.Menu.prototype.setRole=function(e){this.roleName_=e},Blockly.Menu.prototype.enterDocument=function(){Blockly.Menu.superClass_.enterDocument.call(this),this.forEachChild(function(e){e.isInDocument()&&this.registerChildId_(e)},this),this.attachEvents_()},Blockly.Menu.prototype.exitDocument=function(){this.setHighlightedIndex(-1),Blockly.Menu.superClass_.exitDocument.call(this)},Blockly.Menu.prototype.disposeInternal=function(){Blockly.Menu.superClass_.disposeInternal.call(this),this.detachEvents_()},Blockly.Menu.prototype.attachEvents_=function(){var e=this.getElement();this.mouseOverHandler_=Blockly.bindEventWithChecks_(e,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=Blockly.bindEventWithChecks_(e,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=Blockly.bindEventWithChecks_(e,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=Blockly.bindEventWithChecks_(e,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownWrapper_=Blockly.bindEventWithChecks_(e,"keydown",this,this.handleKeyEvent)},Blockly.Menu.prototype.detachEvents_=function(){this.mouseOverHandler_&&(Blockly.unbindEvent_(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(Blockly.unbindEvent_(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(Blockly.unbindEvent_(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(Blockly.unbindEvent_(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownWrapper_&&(Blockly.unbindEvent_(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null)},Blockly.Menu.prototype.childElementIdMap_=null,Blockly.Menu.prototype.registerChildId_=function(e){var t=(t=e.getElement()).id||(t.id=e.getId());this.childElementIdMap_||(this.childElementIdMap_={}),this.childElementIdMap_[t]=e},Blockly.Menu.prototype.getMenuItem=function(e){if(this.childElementIdMap_)for(var t=this.getElement();e&&e!==t;){var n=e.id;if(n in this.childElementIdMap_)return this.childElementIdMap_[n];e=e.parentNode}return null},Blockly.Menu.prototype.unhighlightCurrent=function(){var e=this.getHighlighted();e&&e.setHighlighted(!1)},Blockly.Menu.prototype.clearHighlighted=function(){this.unhighlightCurrent(),this.setHighlightedIndex(-1)},Blockly.Menu.prototype.getHighlighted=function(){return this.getChildAt(this.highlightedIndex_)},Blockly.Menu.prototype.setHighlightedIndex=function(e){var t=this.getChildAt(e);t?(t.setHighlighted(!0),this.highlightedIndex_=e):-1<this.highlightedIndex_&&(this.getHighlighted().setHighlighted(!1),this.highlightedIndex_=-1),t&&Blockly.utils.style.scrollIntoContainerView(t.getElement(),this.getElement())},Blockly.Menu.prototype.setHighlighted=function(e){this.setHighlightedIndex(this.indexOfChild(e))},Blockly.Menu.prototype.highlightNext=function(){this.unhighlightCurrent(),this.highlightHelper(function(e,t){return(e+1)%t},this.highlightedIndex_)},Blockly.Menu.prototype.highlightPrevious=function(){this.unhighlightCurrent(),this.highlightHelper(function(e,t){return--e<0?t-1:e},this.highlightedIndex_)},Blockly.Menu.prototype.highlightHelper=function(e,t){t=t<0?-1:t;var n=this.getChildCount();t=e.call(this,t,n);for(var o=0;o<=n;){var r=this.getChildAt(t);if(r&&this.canHighlightItem(r))return this.setHighlightedIndex(t),!0;o++,t=e.call(this,t,n)}return!1},Blockly.Menu.prototype.canHighlightItem=function(e){return e.isEnabled()},Blockly.Menu.prototype.handleMouseOver_=function(e){(e=this.getMenuItem(e.target))&&e.isEnabled()&&this.getHighlighted()!==e&&(this.unhighlightCurrent(),this.setHighlighted(e))},Blockly.Menu.prototype.handleClick_=function(e){var t=this.openingCoords;if(this.openingCoords=null,t&&"number"==typeof e.clientX){var n=new Blockly.utils.Coordinate(e.clientX,e.clientY);if(Blockly.utils.Coordinate.distance(t,n)<1)return}(t=this.getMenuItem(e.target))&&t.handleClick(e)&&e.preventDefault()},Blockly.Menu.prototype.handleMouseEnter_=function(e){this.focus()},Blockly.Menu.prototype.handleMouseLeave_=function(e){this.getElement()&&(this.blur(),this.clearHighlighted())},Blockly.Menu.prototype.handleKeyEvent=function(e){return!(0==this.getChildCount()||!this.handleKeyEventInternal(e)||(e.preventDefault(),e.stopPropagation(),0))},Blockly.Menu.prototype.handleKeyEventInternal=function(e){var t=this.getHighlighted();if(!t||"function"!=typeof t.handleKeyEvent||!t.handleKeyEvent(e)){if(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)return!1;switch(e.keyCode){case Blockly.utils.KeyCodes.ENTER:t&&t.performActionInternal(e);break;case Blockly.utils.KeyCodes.UP:this.highlightPrevious();break;case Blockly.utils.KeyCodes.DOWN:this.highlightNext();break;default:return!1}}return!0},Blockly.MenuItem=function(e,t){Blockly.Component.call(this),this.setContentInternal(e),this.setValue(t),this.enabled_=!0},Blockly.utils.object.inherits(Blockly.MenuItem,Blockly.Component),Blockly.MenuItem.prototype.createDom=function(){var e=document.createElement("div"),t=(e.id=this.getId(),this.setElementInternal(e),e.className="goog-menuitem goog-option "+(this.enabled_?"":"goog-menuitem-disabled ")+(this.checked_?"goog-option-selected ":"")+(this.isRightToLeft()?"goog-menuitem-rtl ":""),this.getContentWrapperDom()),n=(e.appendChild(t),this.getCheckboxDom());n&&t.appendChild(n),t.appendChild(this.getContentDom()),Blockly.utils.aria.setRole(e,this.roleName_||(this.checkable_?Blockly.utils.aria.Role.MENUITEMCHECKBOX:Blockly.utils.aria.Role.MENUITEM)),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1)},Blockly.MenuItem.prototype.getCheckboxDom=function(){var e;return this.checkable_?((e=document.createElement("div")).className="goog-menuitem-checkbox",e):null},Blockly.MenuItem.prototype.getContentDom=function(){var e=this.content_;return e="string"==typeof e?document.createTextNode(e):e},Blockly.MenuItem.prototype.getContentWrapperDom=function(){var e=document.createElement("div");return e.className="goog-menuitem-content",e},Blockly.MenuItem.prototype.setContentInternal=function(e){this.content_=e},Blockly.MenuItem.prototype.setValue=function(e){this.value_=e},Blockly.MenuItem.prototype.getValue=function(){return this.value_},Blockly.MenuItem.prototype.setRole=function(e){this.roleName_=e},Blockly.MenuItem.prototype.setCheckable=function(e){this.checkable_=e},Blockly.MenuItem.prototype.setChecked=function(e){var t;this.checkable_&&(this.checked_=e,t=this.getElement())&&this.isEnabled()&&(e?(Blockly.utils.dom.addClass(t,"goog-option-selected"),Blockly.utils.aria.setState(t,Blockly.utils.aria.State.SELECTED,!0)):(Blockly.utils.dom.removeClass(t,"goog-option-selected"),Blockly.utils.aria.setState(t,Blockly.utils.aria.State.SELECTED,!1)))},Blockly.MenuItem.prototype.setHighlighted=function(e){this.highlight_=e;var t=this.getElement();t&&this.isEnabled()&&(e?Blockly.utils.dom.addClass(t,"goog-menuitem-highlight"):Blockly.utils.dom.removeClass(t,"goog-menuitem-highlight"))},Blockly.MenuItem.prototype.isEnabled=function(){return this.enabled_},Blockly.MenuItem.prototype.setEnabled=function(e){this.enabled_=e,(e=this.getElement())&&(this.enabled_?Blockly.utils.dom.removeClass(e,"goog-menuitem-disabled"):Blockly.utils.dom.addClass(e,"goog-menuitem-disabled"))},Blockly.MenuItem.prototype.handleClick=function(e){this.isEnabled()&&(this.setHighlighted(!0),this.performActionInternal())},Blockly.MenuItem.prototype.performActionInternal=function(){this.checkable_&&this.setChecked(!this.checked_),this.actionHandler_&&this.actionHandler_.call(this.actionHandlerObj_,this)},Blockly.MenuItem.prototype.onAction=function(e,t){this.actionHandler_=e,this.actionHandlerObj_=t},Blockly.utils.uiMenu={},Blockly.utils.uiMenu.getSize=function(e){e=e.getElement();var t=Blockly.utils.style.getSize(e),n=Blockly.utils.style.getBorderBox(e);return t.height=e.scrollHeight+n.top+n.bottom+1,t},Blockly.utils.uiMenu.adjustBBoxesForRTL=function(e,t,n){t.left+=n.width,t.right+=n.width,e.left+=n.width,e.right+=n.width},goog.debug={},goog.debug.Error=function(e){var t;Error.captureStackTrace?Error.captureStackTrace(this,goog.debug.Error):(t=Error().stack)&&(this.stack=t),e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){for(var n="",o=(e=e.split("%s")).length-1,r=0;r<o;r++)n+=e[r]+(r<t.length?t[r]:"%s");return n+e[o]},goog.asserts.doAssertFailure_=function(e,t,n,o){var r,i="Assertion failed";n?(i+=": "+n,r=o):e&&(i+=": "+e,r=t),e=new goog.asserts.AssertionError(""+i,r||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertExists=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&null==e&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&"number"!=typeof e&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&"string"!=typeof e&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&"boolean"!=typeof e&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,o){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:n<0?Math.max(0,e.length+n):n,"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,n);for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==n?e.length-1:n)}:function(e,t,n){if((n=null==n?e.length-1:n)<0&&(n=Math.max(0,e.length+n)),"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.lastIndexOf(t,n);for(;0<=n;n--)if(n in e&&e[n]===t)return n;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,n){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var o=e.length,r="string"==typeof e?e.split(""):e,i=0;i<o;i++)i in r&&t.call(n,r[i],i,e)},goog.array.forEachRight=function(e,t,n){var o=e.length,r="string"==typeof e?e.split(""):e;for(--o;0<=o;--o)o in r&&t.call(n,r[o],o,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,n)}:function(e,t,n){for(var o,r=e.length,i=[],s=0,a="string"==typeof e?e.split(""):e,l=0;l<r;l++)l in a&&(o=a[l],t.call(n,o,l,e))&&(i[s++]=o);return i},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var o=e.length,r=Array(o),i="string"==typeof e?e.split(""):e,s=0;s<o;s++)s in i&&(r[s]=t.call(n,i[s],s,e));return r},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,n,o){return goog.asserts.assert(null!=e.length),o&&(t=goog.bind(t,o)),Array.prototype.reduce.call(e,t,n)}:function(n,o,e,r){var i=e;return goog.array.forEach(n,function(e,t){i=o.call(r,i,e,t,n)}),i},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,n,o){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),o&&(t=goog.bind(t,o)),Array.prototype.reduceRight.call(e,t,n)}:function(n,o,e,r){var i=e;return goog.array.forEachRight(n,function(e,t){i=o.call(r,i,e,t,n)}),i},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,n)}:function(e,t,n){for(var o=e.length,r="string"==typeof e?e.split(""):e,i=0;i<o;i++)if(i in r&&t.call(n,r[i],i,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,n)}:function(e,t,n){for(var o=e.length,r="string"==typeof e?e.split(""):e,i=0;i<o;i++)if(i in r&&!t.call(n,r[i],i,e))return!1;return!0},goog.array.count=function(e,o,r){var i=0;return goog.array.forEach(e,function(e,t,n){o.call(r,e,t,n)&&++i},r),i},goog.array.find=function(e,t,n){return(t=goog.array.findIndex(e,t,n))<0?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,n){for(var o=e.length,r="string"==typeof e?e.split(""):e,i=0;i<o;i++)if(i in r&&t.call(n,r[i],i,e))return i;return-1},goog.array.findRight=function(e,t,n){return(t=goog.array.findIndexRight(e,t,n))<0?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,n){var o=e.length,r="string"==typeof e?e.split(""):e;for(--o;0<=o;o--)if(o in r&&t.call(n,r[o],o,e))return o;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,n){goog.array.splice(e,n,0,t)},goog.array.insertArrayAt=function(e,t,n){goog.partial(goog.array.splice,e,n,0).apply(null,t)},goog.array.insertBefore=function(e,t,n){2==arguments.length||(n=goog.array.indexOf(e,n))<0?e.push(t):goog.array.insertAt(e,t,n)},goog.array.remove=function(e,t){var n;return(n=0<=(t=goog.array.indexOf(e,t)))&&goog.array.removeAt(e,t),n},goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,n){return 0<=(t=goog.array.findIndex(e,t,n))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(n,o,r){var i=0;return goog.array.forEachRight(n,function(e,t){o.call(r,e,t,n)&&goog.array.removeAt(n,t)&&i++}),i},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var n=Array(t),o=0;o<t;o++)n[o]=e[o];return n}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(goog.isArrayLike(o)){var r=e.length||0,i=o.length||0;e.length=r+i;for(var s=0;s<i;s++)e[r+s]=o[s]}else e.push(o)}},goog.array.splice=function(e,t,n,o){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,n){return goog.asserts.assert(null!=e.length),arguments.length<=2?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)},goog.array.removeDuplicates=function(e,t,n){t=t||e;var o=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};n=n||o;for(var o={},r=0,i=0;i<e.length;){var s=e[i++],a=n(s);Object.prototype.hasOwnProperty.call(o,a)||(o[a]=!0,t[r++]=s)}t.length=r},goog.array.binarySearch=function(e,t,n){return goog.array.binarySearch_(e,n||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,n){return goog.array.binarySearch_(e,t,!0,void 0,n)},goog.array.binarySearch_=function(e,t,n,o,r){for(var i,s=0,a=e.length;s<a;){var l=s+(a-s>>>1),c=n?t.call(r,e[l],l,e):t(o,e[l]);0<c?s=l+1:(a=l,i=!c)}return i?s:-s-1},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var n=Array(e.length),o=0;o<e.length;o++)n[o]={index:o,value:e[o]};var r=t||goog.array.defaultCompare;for(goog.array.sort(n,function(e,t){return r(e.value,t.value)||e.index-t.index}),o=0;o<e.length;o++)e[o]=n[o].value},goog.array.sortByKey=function(e,n,t){var o=t||goog.array.defaultCompare;goog.array.sort(e,function(e,t){return o(n(e),n(t))})},goog.array.sortObjectsByKey=function(e,t,n){goog.array.sortByKey(e,function(e){return e[t]},n)},goog.array.isSorted=function(e,t,n){t=t||goog.array.defaultCompare;for(var o=1;o<e.length;o++){var r=t(e[o-1],e[o]);if(0<r||0==r&&n)return!1}return!0},goog.array.equals=function(e,t,n){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var o=e.length;n=n||goog.array.defaultCompareEquality;for(var r=0;r<o;r++)if(!n(e[r],t[r]))return!1;return!0},goog.array.compare3=function(e,t,n){n=n||goog.array.defaultCompare;for(var o=Math.min(e.length,t.length),r=0;r<o;r++){var i=n(e[r],t[r]);if(0!=i)return i}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return t<e?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,n){return(n=goog.array.binarySearch(e,t,n))<0&&(goog.array.insertAt(e,t,-(n+1)),!0)},goog.array.binaryRemove=function(e,t,n){return 0<=(t=goog.array.binarySearch(e,t,n))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,n){for(var o={},r=0;r<e.length;r++){var i=e[r],s=t.call(n,i,r,e);void 0!==s&&(o[s]||(o[s]=[])).push(i)}return o},goog.array.toObject=function(n,o,r){var i={};return goog.array.forEach(n,function(e,t){i[o.call(r,e,t,n)]=e}),i},goog.array.range=function(e,t,n){var o=[],r=0,i=e;if(void 0!==t&&(r=e,i=t),(n=n||1)*(i-r)<0)return[];if(0<n)for(e=r;e<i;e+=n)o.push(e);else for(e=r;i<e;e+=n)o.push(e);return o},goog.array.repeat=function(e,t){for(var n=[],o=0;o<t;o++)n[o]=e;return n},goog.array.flatten=function(e){for(var t=[],n=0;n<arguments.length;n++){var o=arguments[n];if(goog.isArray(o))for(var r=0;r<o.length;r+=8192)for(var i=goog.array.slice(o,r,r+8192),i=goog.array.flatten.apply(null,i),s=0;s<i.length;s++)t.push(i[s]);else t.push(o)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):t<0&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,n){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=n&&n<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,n,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],n=e.length,o=1;o<arguments.length;o++)arguments[o].length<n&&(n=arguments[o].length);for(o=0;o<n;o++){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i][o]);t.push(r)}return t},goog.array.shuffle=function(e,t){t=t||Math.random;for(var n=e.length-1;0<n;n--){var o=Math.floor(t()*(n+1)),r=e[n];e[n]=e[o],e[o]=r}},goog.array.copyByIndex=function(t,e){var n=[];return goog.array.forEach(e,function(e){n.push(t[e])}),n},goog.array.concatMap=function(e,t,n){return goog.array.concat.apply([],goog.array.map(e,t,n))},goog.string={},goog.string.internal={},goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.internal.endsWith=function(e,t){var n=e.length-t.length;return 0<=n&&e.indexOf(t,n)==n},goog.string.internal.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.internal.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.internal.caseInsensitiveCompare=function(e,t){return(e=String(e).toLowerCase())<(t=String(t).toLowerCase())?-1:e==t?0:1},goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.internal.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=(e=-1!=(e=-1!=(e=-1!=(e=-1!=(e=-1!=e.indexOf("&")?e.replace(goog.string.internal.AMP_RE_,"&amp;"):e).indexOf("<")?e.replace(goog.string.internal.LT_RE_,"&lt;"):e).indexOf(">")?e.replace(goog.string.internal.GT_RE_,"&gt;"):e).indexOf('"')?e.replace(goog.string.internal.QUOT_RE_,"&quot;"):e).indexOf("'")?e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;"):e).indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())},goog.string.internal.compareVersions=function(e,t){var n=0;e=goog.string.internal.trim(String(e)).split("."),t=goog.string.internal.trim(String(t)).split(".");for(var o=Math.max(e.length,t.length),r=0;0==n&&r<o;r++){var i=e[r]||"",s=t[r]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;var n=0==i[1].length?0:parseInt(i[1],10),a=0==s[1].length?0:parseInt(s[1],10)}while(n=goog.string.internal.compareElements_(n,a)||goog.string.internal.compareElements_(0==i[2].length,0==s[2].length)||goog.string.internal.compareElements_(i[2],s[2]),i=i[3],s=s[3],0==n)}return n},goog.string.internal.compareElements_=function(e,t){return e<t?-1:t<e?1:0},goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return(e=e&&e.userAgent)||""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,n=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,o=[];t=n.exec(e);)o.push([t[1],t[2],t[3]||void 0]);return o},goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},goog.object.forEach=function(e,t,n){for(var o in e)t.call(n,e[o],o,e)},goog.object.filter=function(e,t,n){var o,r={};for(o in e)t.call(n,e[o],o,e)&&(r[o]=e[o]);return r},goog.object.map=function(e,t,n){var o,r={};for(o in e)r[o]=t.call(n,e[o],o,e);return r},goog.object.some=function(e,t,n){for(var o in e)if(t.call(n,e[o],o,e))return!0;return!1},goog.object.every=function(e,t,n){for(var o in e)if(!t.call(n,e[o],o,e))return!1;return!0},goog.object.getCount=function(e){var t,n=0;for(t in e)n++;return n},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,n=[],o=0;for(t in e)n[o++]=e[t];return n},goog.object.getKeys=function(e){var t,n=[],o=0;for(t in e)n[o++]=t;return n},goog.object.getValueByKeys=function(e,t){for(var n=(o=goog.isArrayLike(t))?t:arguments,o=o?0:1;o<n.length;o++){if(null==e)return;e=e[n[o]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},goog.object.findKey=function(e,t,n){for(var o in e)if(t.call(n,e[o],o,e))return o},goog.object.findValue=function(e,t,n){return(t=goog.object.findKey(e,t,n))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var n;return(n=t in e)&&delete e[t],n},goog.object.add=function(e,t,n){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,n)},goog.object.get=function(e,t,n){return null!==e&&t in e?e[t]:n},goog.object.set=function(e,t,n){e[t]=n},goog.object.setIfUndefined=function(e,t,n){return t in e?e[t]:e[t]=n},goog.object.setWithReturnValueIfNotSet=function(e,t,n){return t in e?e[t]:(n=n(),e[t]=n)},goog.object.equals=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(var o in t)if(!(o in e))return!1;return!0},goog.object.clone=function(e){var t,n={};for(t in e)n[t]=e[t];return n},goog.object.unsafeClone=function(e){var t,n=goog.typeOf(e);if("object"!=n&&"array"!=n)return e;if(goog.isFunction(e.clone))return e.clone();for(t in n="array"==n?[]:{},e)n[t]=goog.object.unsafeClone(e[t]);return n},goog.object.transpose=function(e){var t,n={};for(t in e)n[e[t]]=t;return n},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var n,o,r=1;r<arguments.length;r++){for(n in o=arguments[r])e[n]=o[n];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)n=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(e))return goog.object.create.apply(null,e);if(t%2)throw Error("Uneven number of arguments");for(var n={},o=0;o<t;o+=2)n[arguments[o]]=arguments[o+1];return n},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(e))return goog.object.createSet.apply(null,e);for(var n={},o=0;o<t;o++)n[arguments[o]]=!0;return n},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,n){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var o={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||n);){for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++)o[r[i]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(o)},goog.object.getSuperClass=function(e){return(e=Object.getPrototypeOf(e.prototype))&&e.constructor},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,n),t[e]||""}var t,n,o=goog.labs.userAgent.util.getUserAgent();return goog.labs.userAgent.browser.isIE()?goog.labs.userAgent.browser.getIEVersion_(o):(o=goog.labs.userAgent.util.extractVersionTuples(o),t={},goog.array.forEach(o,function(e){t[e[0]]=e[1]}),n=goog.partial(goog.object.containsKey,t),goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?e(["Edg"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS"]):(o=o[2])&&o[1]||"")},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){if((t=/rv: *([\d\.]*)/.exec(e))&&t[1])return t[1];var t="",n=/MSIE +([\d\.]+)/.exec(e);if(n&&n[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==n[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=n[1];return t},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(e){var t;return goog.asserts.ENABLE_ASSERTS&&(t=goog.dom.asserts.getWindow_(e))&&(!e||!(e instanceof t.Location)&&e instanceof t.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(e)),e},goog.dom.asserts.assertIsElementType_=function(e,t){var n;return!goog.asserts.ENABLE_ASSERTS||!(n=goog.dom.asserts.getWindow_(e))||void 0===n[t]||e&&(e instanceof n[t]||!(e instanceof n.Location||e instanceof n.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,goog.dom.asserts.debugStringForType_(e)),e},goog.dom.asserts.assertIsHTMLAnchorElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(e){if(!goog.isObject(e))return void 0===e?"undefined":null===e?"null":typeof e;try{return e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(e){try{var t,n=e&&e.ownerDocument;if((t=n&&(n.defaultView||n.parentWindow)||goog.global).Element&&t.Location)return t}catch(e){}return null},goog.functions={},goog.functions.constant=function(e){return function(){return e}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(e,t){return e},goog.functions.error=function(e){return function(){throw Error(e)}},goog.functions.fail=function(e){return function(){throw e}},goog.functions.lock=function(e,t){return t=t||0,function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}},goog.functions.nth=function(e){return function(){return arguments[e]}},goog.functions.partialRight=function(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=Array.prototype.slice.call(arguments);return e.push.apply(e,n),t.apply(this,e)}},goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))},goog.functions.equalTo=function(t,n){return function(e){return n?t==e:t===e}},goog.functions.compose=function(e,t){var n=arguments,o=n.length;return function(){var e;o&&(e=n[o-1].apply(this,arguments));for(var t=o-2;0<=t;t--)e=n[t].call(this,e);return e}},goog.functions.sequence=function(e){var n=arguments,o=n.length;return function(){for(var e,t=0;t<o;t++)e=n[t].apply(this,arguments);return e}},goog.functions.and=function(e){var t=arguments,n=t.length;return function(){for(var e=0;e<n;e++)if(!t[e].apply(this,arguments))return!1;return!0}},goog.functions.or=function(e){var t=arguments,n=t.length;return function(){for(var e=0;e<n;e++)if(t[e].apply(this,arguments))return!0;return!1}},goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}},goog.functions.create=function(e,t){var n=function(){};return n.prototype=e.prototype,n=new n,e.apply(n,Array.prototype.slice.call(arguments,1)),n},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(e){var t,n=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(n||(t=e(),n=!0),t):e()}},goog.functions.once=function(e){var t=e;return function(){var e;t&&(e=t,t=null,e())}},goog.functions.debounce=function(n,o,r){var i=0;return function(e){goog.global.clearTimeout(i);var t=arguments;i=goog.global.setTimeout(function(){n.apply(r,t)},o)}},goog.functions.throttle=function(e,t,n){function o(){i=0,s&&(s=!1,a())}var r,i=0,s=!1,a=function(){i=goog.global.setTimeout(o,t),e.apply(n,r)};return function(e){r=arguments,i?s=!0:a()}},goog.functions.rateLimit=function(t,n,o){function r(){i=0}var i=0;return function(e){i||(i=goog.global.setTimeout(r,n),t.apply(o,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(e){this.tagName_=e},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(e){return!0===goog.dom.tags.VOID_TAGS_[e]},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string.TypedString=function(){},goog.string.Const=function(e,t){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(e){return e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?e.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+e+"'"),"type_error:Const")},goog.string.Const.from=function(e){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeScript.fromConstantAndArgs=function(e,t){for(var n=[],o=1;o<arguments.length;o++)n.push(goog.html.SafeScript.stringify_(arguments[o]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(e)+")("+n.join(", ")+");")},goog.html.SafeScript.fromJson=function(e){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(e))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(e){return goog.html.SafeScript.unwrapTrustedScript(e).toString()},goog.html.SafeScript.unwrapTrustedScript=function(e){return e instanceof goog.html.SafeScript&&e.constructor===goog.html.SafeScript&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(e){return JSON.stringify(e).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(e):e,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)},goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)},goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(null!=e)return e;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return void 0!==goog.global.URL&&void 0!==goog.global.URL.createObjectURL?goog.global.URL:void 0!==goog.global.webkitURL&&void 0!==goog.global.webkitURL.createObjectURL?goog.global.webkitURL:void 0!==goog.global.createObjectURL?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))||7<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))&&("adlm"==goog.LOCALE.substring(3,7).toLowerCase()||"arab"==goog.LOCALE.substring(3,7).toLowerCase()||"hebr"==goog.LOCALE.substring(3,7).toLowerCase()||"nkoo"==goog.LOCALE.substring(3,7).toLowerCase()||"rohg"==goog.LOCALE.substring(3,7).toLowerCase()||"thaa"==goog.LOCALE.substring(3,7).toLowerCase())||8<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))&&("adlm"==goog.LOCALE.substring(4,8).toLowerCase()||"arab"==goog.LOCALE.substring(4,8).toLowerCase()||"hebr"==goog.LOCALE.substring(4,8).toLowerCase()||"nkoo"==goog.LOCALE.substring(4,8).toLowerCase()||"rohg"==goog.LOCALE.substring(4,8).toLowerCase()||"thaa"==goog.LOCALE.substring(4,8).toLowerCase()),goog.i18n.bidi.Format={LRE:"",RLE:"",PDF:"",LRM:"",RLM:""},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?0<e?goog.i18n.bidi.Dir.LTR:e<0?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z------\ud801\ud804-\ud839\ud83c-\udbff---",goog.i18n.bidi.rtlChars_="--\ud802-\ud803\ud83a-\ud83b--",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]");goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){return t=(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,e.replace(goog.i18n.bidi.bracketGuardTextRe_,t+"$&"+t)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){var n=0,o=0,r=!1;for(e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),t=0;t<e.length;t++){var i=e[t];goog.i18n.bidi.startsWithRtl(i)?(n++,o++):goog.i18n.bidi.isRequiredLtrRe_.test(i)?r=!0:goog.i18n.bidi.hasAnyLtr(i)?o++:goog.i18n.bidi.hasNumeralsRe_.test(i)&&(r=!0)}return 0==o?r?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:n/o>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t))&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(e,t){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(e,t){var n=goog.html.TrustedResourceUrl.unwrap(this),o=(n=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(n))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(n[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",n[2]||"",e)+goog.html.TrustedResourceUrl.stringifyParams_("#",o,t))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(e){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(e){return e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(e,n){var o=goog.string.Const.unwrap(e);if(goog.html.TrustedResourceUrl.BASE_URL_.test(o))return e=o.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(e,t){if(Object.prototype.hasOwnProperty.call(n,t))return(e=n[t])instanceof goog.string.Const?goog.string.Const.unwrap(e):encodeURIComponent(String(e));throw Error('Found marker, "'+t+'", in format string, "'+o+'", but no valid label mapping found in args: '+JSON.stringify(n))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e);throw Error("Invalid TrustedResourceUrl format: "+o)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(e,t,n,o){return goog.html.TrustedResourceUrl.format(e,t).cloneWithParams(n,o)},goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.TrustedResourceUrl.fromConstants=function(e){for(var t="",n=0;n<e.length;n++)t+=goog.string.Const.unwrap(e[n]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){return e=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(e):e,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.TrustedResourceUrl.stringifyParams_=function(e,t,n){if(null!=n){if("string"==typeof n)return n?e+encodeURIComponent(n):"";for(var o in n)for(var r=n[o],r=goog.isArray(r)?r:[r],i=0;i<r.length;i++){var s=r[i];null!=s&&(t=t||e,t+=(t.length>e.length?"&":"")+encodeURIComponent(o)+"="+encodeURIComponent(String(s)))}}return t},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeUrl=function(e,t){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=e===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(e){return e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime))(?:;\w+=(?:\w+|"[\w;=]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(e){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(e)},goog.html.SafeUrl.fromBlob=function(e){return e=goog.html.SAFE_MIME_TYPE_PATTERN_.test(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.DATA_URL_PATTERN_=/^data:([^,]*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(e){var t=(t=(e=e.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_))&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(t[1]);return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t?e:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"tel:")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(e){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(e))||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"fb-messenger://share")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromWhatsAppUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"whatsapp://send")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromSmsUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(e){var t=e.indexOf("#");if(!(t=(e=0<t?e.substring(0,t):e).match(/[?&]body=/gi)))return!0;if(1<t.length)return!1;if(!(e=e.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(e)}catch(e){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(e)},goog.html.SafeUrl.fromSshUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"ssh://")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(e,t,n){return(e=e.exec(t))&&(e=e[1],-1!=(n instanceof goog.string.Const?[goog.string.Const.unwrap(n)]:n.map(function(e){return goog.string.Const.unwrap(e)})).indexOf(e))||(t=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromTrustedResourceUrl=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(e))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(e){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SAFE_URL_PATTERN_.test(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(e,t){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),t&&/^data:/i.test(e)&&(t=goog.html.SafeUrl.fromDataUrl(e)).getTypedStringValue()==e?t:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(e),"%s does not match the safe URL pattern",e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(e,";"),"Last character of style string is not ';': "+e),goog.asserts.assert(goog.string.internal.contains(e,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+e),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(e){return e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(e){var t,n="";for(t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t))throw Error("Name allows only [-_a-zA-Z0-9], got: "+t);var o=e[t];null!=o&&(n+=t+":"+(goog.isArray(o)?goog.array.map(o,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(o))+";")}return n?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(e){if(e instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(e).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(e=e instanceof goog.string.Const?goog.string.Const.unwrap(e):goog.html.SafeStyle.sanitizePropertyValueString_(String(e)),/[{;}]/.test(e))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[e]);return e},goog.html.SafeStyle.sanitizePropertyValueString_=function(e){var t=e.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(t)?goog.html.SafeStyle.COMMENT_RE_.test(e)?(goog.asserts.fail("String value disallows comments, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(e)?goog.html.SafeStyle.hasBalancedSquareBrackets_(e)?goog.html.SafeStyle.sanitizeUrl_(e):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(e){for(var t=!0,n=!0,o=0;o<e.length;o++){var r=e.charAt(o);"'"==r&&n?t=!t:'"'==r&&t&&(n=!n)}return t&&n},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(e){for(var t=!0,n=/^[-_a-zA-Z0-9]$/,o=0;o<e.length;o++){var r=e.charAt(o);if("]"==r){if(t)return!1;t=!0}else if("["==r){if(!t)return!1;t=!1}else if(!t&&!n.test(r))return!1}return t},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_="[-,.\"'%_!# a-zA-Z0-9\\[\\]]",goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(e){return e.replace(goog.html.SafeStyle.URL_RE_,function(e,t,n,o){var r="";return n=n.replace(/^(['"])(.*)\1$/,function(e,t,n){return r=t,n}),e=goog.html.SafeUrl.sanitize(n).getTypedStringValue(),t+r+e+r+o})},goog.html.SafeStyle.concat=function(e){function t(e){goog.isArray(e)?goog.array.forEach(e,t):n+=goog.html.SafeStyle.unwrap(e)}var n="";return goog.array.forEach(arguments,t),n?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(e,t){if(goog.string.internal.contains(e,"<"))throw Error("Selector does not allow '<', got: "+e);var n=e.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(n))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+e);if(goog.html.SafeStyleSheet.hasBalancedBrackets_(n))return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),e=e+"{"+goog.html.SafeStyle.unwrap(t).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e);throw Error("() and [] in selector must be balanced, got: "+e)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(e){for(var t={"(":")","[":"]"},n=[],o=0;o<e.length;o++){var r=e[o];if(t[r])n.push(t[r]);else if(goog.object.contains(t,r)&&n.pop()!=r)return!1}return 0==n.length},goog.html.SafeStyleSheet.concat=function(e){function t(e){goog.isArray(e)?goog.array.forEach(e,t):n+=goog.html.SafeStyleSheet.unwrap(e)}var n="";return goog.array.forEach(arguments,t),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(n)},goog.html.SafeStyleSheet.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(e,"<"),"Forbidden '<' character in style sheet string: "+e),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(e){return e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(e){return goog.html.SafeHtml.unwrapTrustedHTML(e).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(e){return e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(e){var t,n;return e instanceof goog.html.SafeHtml?e:(n=null,(t="object"==typeof e)&&e.implementsGoogI18nBidiDirectionalString&&(n=e.getDirection()),e=t&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(e),n))},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(e,t,n){return goog.html.SafeHtml.verifyTagName(String(e)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(e),t,n)},goog.html.SafeHtml.verifyTagName=function(e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+e+">.":"");if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+e+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(e,t,n,o){e&&goog.html.TrustedResourceUrl.unwrap(e);var r={};return r.src=e||null,r.srcdoc=t&&goog.html.SafeHtml.unwrap(t),e=goog.html.SafeHtml.combineAttributes(r,{sandbox:""},n),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,o)},goog.html.SafeHtml.createSandboxIframe=function(e,t,n,o){var r;if(goog.html.SafeHtml.canUseSandboxIframe())return(r={}).src=e?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)):null,r.srcdoc=t||null,r.sandbox="",e=goog.html.SafeHtml.combineAttributes(r,{},n),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,o);throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"")},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(e,t){return goog.html.TrustedResourceUrl.unwrap(e),e=goog.html.SafeHtml.combineAttributes({src:e},{},t),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e)},goog.html.SafeHtml.createScript=function(e,t){for(var n in t){var o=n.toLowerCase();if("language"==o||"src"==o||"text"==o||"type"==o)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+o+'" attribute':"")}for(n="",e=goog.array.concat(e),o=0;o<e.length;o++)n+=goog.html.SafeScript.unwrap(e[o]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",t,e)},goog.html.SafeHtml.createStyle=function(e,t){t=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},t);var n="";e=goog.array.concat(e);for(var o=0;o<e.length;o++)n+=goog.html.SafeStyleSheet.unwrap(e[o]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",t,e)},goog.html.SafeHtml.createMetaRefresh=function(e,t){return e=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(t||0)+"; url="+e})},goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,n){if(n instanceof goog.string.Const)n=goog.string.Const.unwrap(n);else if("style"==t.toLowerCase()){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");n=goog.html.SafeHtml.getStyleValue_(n)}else{if(/^on/i.test(t))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" requires goog.string.Const value, "'+n+'" given.':"");if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(n instanceof goog.html.TrustedResourceUrl)n=goog.html.TrustedResourceUrl.unwrap(n);else if(n instanceof goog.html.SafeUrl)n=goog.html.SafeUrl.unwrap(n);else{if("string"!=typeof n)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+n+'" given.':"");n=goog.html.SafeUrl.sanitize(n).getTypedStringValue()}}return n.implementsGoogStringTypedString&&(n=n.getTypedStringValue()),goog.asserts.assert("string"==typeof n||"number"==typeof n,"String or number value expected, got "+typeof n+" with value: "+n),t+'="'+goog.string.internal.htmlEscape(String(n))+'"'},goog.html.SafeHtml.getStyleValue_=function(e){if(goog.isObject(e))return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),goog.html.SafeStyle.unwrap(e);throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e:"")},goog.html.SafeHtml.createWithDir=function(e,t,n,o){return(t=goog.html.SafeHtml.create(t,n,o)).dir_=e,t},goog.html.SafeHtml.join=function(e,t){function n(e){goog.isArray(e)?goog.array.forEach(e,n):(e=goog.html.SafeHtml.htmlEscape(e),r.push(goog.html.SafeHtml.unwrap(e)),e=e.getDirection(),o==goog.i18n.bidi.Dir.NEUTRAL?o=e:e!=goog.i18n.bidi.Dir.NEUTRAL&&o!=e&&(o=null))}var o=(e=goog.html.SafeHtml.htmlEscape(e)).getDirection(),r=[];return goog.array.forEach(t,n),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r.join(goog.html.SafeHtml.unwrap(e)),o)},goog.html.SafeHtml.concat=function(e){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(e,t){var n=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return n.dir_=e,n},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,t)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,t){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(e):e,this.dir_=t,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,n){var o=null,r="<"+e+goog.html.SafeHtml.stringifyAttributes(e,t);return null==n?n=[]:goog.isArray(n)||(n=[n]),goog.dom.tags.isVoidTag(e.toLowerCase())?(goog.asserts.assert(!n.length,"Void tag <"+e+"> does not allow content."),r+=">"):(o=goog.html.SafeHtml.concat(n),r+=">"+goog.html.SafeHtml.unwrap(o)+"</"+e+">",o=o.getDirection()),(e=t&&t.dir)&&(o=/^(ltr|rtl|auto)$/i.test(e)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,o)},goog.html.SafeHtml.stringifyAttributes=function(e,t){var n="";if(t)for(var o in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(o))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+o+'".':"");var r=t[o];null!=r&&(n+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,o,r))}return n},goog.html.SafeHtml.combineAttributes=function(e,t,n){var o,r={};for(o in e)goog.asserts.assert(o.toLowerCase()==o,"Must be lower case"),r[o]=e[o];for(o in t)goog.asserts.assert(o.toLowerCase()==o,"Must be lower case"),r[o]=t[o];if(n)for(o in n){var i=o.toLowerCase();if(i in e)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+i+'" attribute, got "'+o+'" with value "'+n[o]+'"':"");i in t&&delete r[i],r[o]=n[o]}return r},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(e,t,n){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,n||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(e,t,n){e.insertAdjacentHTML(t,goog.html.SafeHtml.unwrapTrustedHTML(n))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){var e,t;return!(goog.DEBUG&&"undefined"==typeof document||(e=document.createElement("div"),(t=document.createElement("div")).appendChild(document.createElement("div")),e.appendChild(t),goog.DEBUG&&!e.firstChild)||(t=e.firstChild.firstChild,e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),t.parentElement))}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(e,t){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;e.lastChild;)e.removeChild(e.lastChild);e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setInnerHtml=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var n=e.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[n])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+e.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(e,t)},goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setFormElementAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLFormElement(e).action=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setButtonFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLButtonElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setInputFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLInputElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setStyle=function(e,t){e.style.cssText=goog.html.SafeStyle.unwrap(t)},goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrapTrustedHTML(t))},goog.dom.safe.setAnchorHref=function(e,t){goog.dom.asserts.assertIsHTMLAnchorElement(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setImageSrc=function(e,t){var n;goog.dom.asserts.assertIsHTMLImageElement(e),t instanceof goog.html.SafeUrl||(n=/^data:image\//i.test(t),t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,n)),e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setAudioSrc=function(e,t){var n;goog.dom.asserts.assertIsHTMLAudioElement(e),t instanceof goog.html.SafeUrl||(n=/^data:audio\//i.test(t),t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,n)),e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setVideoSrc=function(e,t){var n;goog.dom.asserts.assertIsHTMLVideoElement(e),t instanceof goog.html.SafeUrl||(n=/^data:video\//i.test(t),t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,n)),e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setEmbedSrc=function(e,t){goog.dom.asserts.assertIsHTMLEmbedElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setFrameSrc=function(e,t){goog.dom.asserts.assertIsHTMLFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrcdoc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setLinkHrefAndRel=function(e,t,n){goog.dom.asserts.assertIsHTMLLinkElement(e),e.rel=n,goog.string.internal.caseInsensitiveContains(n,"stylesheet")?(goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),e.href=goog.html.TrustedResourceUrl.unwrap(t)):e.href=t instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(t):t instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(t):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(t))},goog.dom.safe.setObjectData=function(e,t){goog.dom.asserts.assertIsHTMLObjectElement(e),e.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setScriptSrc=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setScriptContent=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.text=goog.html.SafeScript.unwrapTrustedScript(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setLocationHref=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.assignLocation=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.assign(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.replaceLocation=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.replace(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.openInWindow=function(e,t,n,o,r){return e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),(t||goog.global).open(goog.html.SafeUrl.unwrap(e),n?goog.string.Const.unwrap(n):"",o,r)},goog.dom.safe.parseFromStringHtml=function(e,t){return goog.dom.safe.parseFromString(e,t,"text/html")},goog.dom.safe.parseFromString=function(e,t,n){return e.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(t),n)},goog.dom.safe.createImageFromBlob=function(e){var t;if(/^image\/.*/g.test(e.type))return t=goog.global.URL.createObjectURL(e),(e=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(t)},goog.dom.safe.setImageSrc(e,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),t)),e;throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.")},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:""},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(e,t){for(var n=e.split("%s"),o="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)o+=n.shift()+r.shift();return o+n.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&e<="~"||""<=e&&e<=""},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(e,t,n){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var o=e.toLowerCase().match(n),r=t.toLowerCase().match(n),i=Math.min(o.length,r.length),s=0;s<i;s++){n=o[s];var a=r[s];if(n!=a)return e=parseInt(n,10),!isNaN(e)&&(t=parseInt(a,10),!isNaN(t))&&e-t?e-t:n<a?-1:1}return o.length!=r.length?o.length-r.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(e,t){return e=goog.string.internal.htmlEscape(e,t),e=goog.string.DETECT_DOUBLE_ESCAPING?e.replace(goog.string.E_RE_,"&#101;"):e},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var o={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},r=(t||goog.global.document).createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var n=o[e];return n||("#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(n=String.fromCharCode(t))),n||(goog.dom.safe.setInnerHtml(r,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),e+" ")),n=r.firstChild.nodeValue.slice(0,-1)),o[e]=n)})},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var n=t.length,o=0;o<n;o++){var r=1==n?t:t.charAt(o);if(e.charAt(0)==r&&e.charAt(e.length-1)==r)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,n){return(e=n?goog.string.unescapeEntities(e):e).length>t&&(e=e.substring(0,t-3)+"..."),e=n?goog.string.htmlEscape(e):e},goog.string.truncateMiddle=function(e,t,n,o){var r;return n&&(e=goog.string.unescapeEntities(e)),o&&e.length>t?(r=e.length-(o=t<o?t:o),e=e.substring(0,t-o)+"..."+e.substring(r)):e.length>t&&(o=Math.floor(t/2),r=e.length-o,e=e.substring(0,o+t%2)+"..."+e.substring(r)),e=n?goog.string.htmlEscape(e):e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],n=0;n<e.length;n++){var o=e.charAt(n),r=o.charCodeAt(0);t[n+1]=goog.string.specialEscapeChars_[o]||(31<r&&r<127?o:goog.string.escapeChar(o))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=goog.string.escapeChar(e.charAt(n));return t.join("")},goog.string.escapeChar=function(e){var t,n;return e in goog.string.jsEscapeCache_?goog.string.jsEscapeCache_[e]:e in goog.string.specialEscapeChars_?goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e]:(31<(t=e.charCodeAt(0))&&t<127?n=e:(t<256?(n="\\x",(t<16||256<t)&&(n+="0")):(n="\\u",t<4096&&(n+="0")),n+=t.toString(16).toUpperCase()),goog.string.jsEscapeCache_[e]=n)},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,n){var o=e;return o=0<=t&&t<e.length&&0<n?e.substr(0,t)+e.substr(t+n,e.length-t-n):o},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,"")},goog.string.replaceAll=function(e,t,n){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,n.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,n){return-1==(n=(e=void 0!==n?e.toFixed(n):String(e)).indexOf("."))&&(n=e.length),goog.string.repeat("0",Math.max(0,t-n))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(e){for(var t=0,n=0;n<e.length;++n)t=31*t+e.charCodeAt(n)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){return t="string"==typeof t?goog.string.regExpEscape(t):"\\s",e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),function(e,t,n){return t+n.toUpperCase()})},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return"string"==typeof(e=isFinite(e)?String(e):e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,n){e=e.split(t);for(var o=[];0<n&&e.length;)o.push(e.shift()),n--;return e.length&&o.push(e.join(t)),o},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var n,o=-1,r=0;r<t.length;r++)""!=t[r]&&o<(n=e.lastIndexOf(t[r]))&&(o=n);return-1==o?e:e.slice(o+1)},goog.string.editDistance=function(e,t){var n=[],o=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var r=0;r<t.length+1;r++)n[r]=r;for(r=0;r<e.length;r++){o[0]=r+1;for(var i=0;i<t.length;i++)o[i+1]=Math.min(o[i]+1,n[i+1]+1,n[i]+Number(e[r]!=t[i]));for(i=0;i<n.length;i++)n[i]=o[i]}return o[t.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){if(e=goog.labs.userAgent.util.getUserAgent()){var e=goog.labs.userAgent.util.extractVersionTuples(e),t=goog.labs.userAgent.engine.getEngineTuple_(e);if(t)return"Gecko"==t[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):t[1];if((e=e[0])&&(t=(t=e[2])&&/Trident\/([^\s;]+)/.exec(t)))return t[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var n=e[t];if("Edge"==n[0])return n}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,function(e){return t==e[0]}))&&e[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.isGo2Phone=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?t=(e=(t=/Windows (?:NT|Phone) ([0-9.]+)/).exec(e))?e[1]:"0.0":goog.labs.userAgent.platform.isIos()?t=(e=(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(e))&&e[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(e=(t=/Mac OS X ([0-9_.]+)/).exec(e))?e[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?t=(e=(t=/(?:KaiOS)\/(\S+)/i).exec(e))&&e[1]:goog.labs.userAgent.platform.isAndroid()?t=(e=(t=/Android\s+([^\);]+)(\)|;)/).exec(e))&&e[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(e=(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,n,o){return o=o?o(t):t,Object.prototype.hasOwnProperty.call(e,o)?e[o]:e[o]=n(t)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.ASSUME_GO2PHONE=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.GO2PHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_GO2PHONE:goog.labs.userAgent.platform.isGo2Phone(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e)?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE)return goog.userAgent.getDocumentMode_()}(),goog.dom.BrowserFeature={},goog.dom.BrowserFeature.ASSUME_NO_OFFSCREEN_CANVAS=!1,goog.dom.BrowserFeature.ASSUME_OFFSCREEN_CANVAS=!1,goog.dom.BrowserFeature.detectOffscreenCanvas_=function(e){try{return!!new self.OffscreenCanvas(0,0).getContext(e)}catch(e){}return!1},goog.dom.BrowserFeature.OFFSCREEN_CANVAS_2D=!goog.dom.BrowserFeature.ASSUME_NO_OFFSCREEN_CANVAS&&(goog.dom.BrowserFeature.ASSUME_OFFSCREEN_CANVAS||goog.dom.BrowserFeature.detectOffscreenCanvas_("2d")),goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES=!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE=!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),goog.dom.BrowserFeature.CAN_USE_INNER_TEXT=goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY=goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT=goog.userAgent.IE,goog.dom.BrowserFeature.LEGACY_IE_RANGES=goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9),goog.math={},goog.math.randomInt=function(e){return Math.floor(Math.random()*e)},goog.math.uniformRandom=function(e,t){return e+Math.random()*(t-e)},goog.math.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},goog.math.modulo=function(e,t){return(e%=t)*t<0?e+t:e},goog.math.lerp=function(e,t,n){return e+n*(t-e)},goog.math.nearlyEquals=function(e,t,n){return Math.abs(e-t)<=(n||1e-6)},goog.math.standardAngle=function(e){return goog.math.modulo(e,360)},goog.math.standardAngleInRadians=function(e){return goog.math.modulo(e,2*Math.PI)},goog.math.toRadians=function(e){return e*Math.PI/180},goog.math.toDegrees=function(e){return 180*e/Math.PI},goog.math.angleDx=function(e,t){return t*Math.cos(goog.math.toRadians(e))},goog.math.angleDy=function(e,t){return t*Math.sin(goog.math.toRadians(e))},goog.math.angle=function(e,t,n,o){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(o-t,n-e)))},goog.math.angleDifference=function(e,t){return 180<(e=goog.math.standardAngle(t)-goog.math.standardAngle(e))?e-=360:e<=-180&&(e=360+e),e},goog.math.sign=function(e){return 0<e?1:e<0?-1:e},goog.math.longestCommonSubsequence=function(n,e,t,o){t=t||function(e,t){return e==t},o=o||function(e,t){return n[e]};for(var r=n.length,i=e.length,s=[],a=0;a<r+1;a++)s[a]=[],s[a][0]=0;for(var l=0;l<i+1;l++)s[0][l]=0;for(a=1;a<=r;a++)for(l=1;l<=i;l++)t(n[a-1],e[l-1])?s[a][l]=s[a-1][l-1]+1:s[a][l]=Math.max(s[a-1][l],s[a][l-1]);for(var c=[],a=r,l=i;0<a&&0<l;)t(n[a-1],e[l-1])?(c.unshift(o(a-1,l-1)),a--,l--):s[a-1][l]>s[a][l-1]?a--:l--;return c},goog.math.sum=function(e){return goog.array.reduce(arguments,function(e,t){return e+t},0)},goog.math.average=function(e){return goog.math.sum.apply(null,arguments)/arguments.length},goog.math.sampleVariance=function(e){var t,n=arguments.length;return n<2?0:(t=goog.math.average.apply(null,arguments),goog.math.sum.apply(null,goog.array.map(arguments,function(e){return Math.pow(e-t,2)}))/(n-1))},goog.math.standardDeviation=function(e){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))},goog.math.isInt=function(e){return isFinite(e)&&0==e%1},goog.math.isFiniteNumber=function(e){return isFinite(e)},goog.math.isNegativeZero=function(e){return 0==e&&1/e<0},goog.math.log10Floor=function(e){var t;return 0<e?(t=Math.round(Math.log(e)*Math.LOG10E))-(parseFloat("1e"+t)>e?1:0):0==e?-1/0:NaN},goog.math.safeFloor=function(e,t){return goog.asserts.assert(void 0===t||0<t),Math.floor(e+(t||2e-15))},goog.math.safeCeil=function(e,t){return goog.asserts.assert(void 0===t||0<t),Math.ceil(e-(t||2e-15))},goog.math.Coordinate=function(e,t){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0},goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)},goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}),goog.math.Coordinate.prototype.equals=function(e){return e instanceof goog.math.Coordinate&&goog.math.Coordinate.equals(this,e)},goog.math.Coordinate.equals=function(e,t){return e==t||!(!e||!t)&&e.x==t.x&&e.y==t.y},goog.math.Coordinate.distance=function(e,t){var n=e.x-t.x;return e=e.y-t.y,Math.sqrt(n*n+e*e)},goog.math.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},goog.math.Coordinate.azimuth=function(e){return goog.math.angle(0,0,e.x,e.y)},goog.math.Coordinate.squaredDistance=function(e,t){var n=e.x-t.x;return n*n+(e=e.y-t.y)*e},goog.math.Coordinate.difference=function(e,t){return new goog.math.Coordinate(e.x-t.x,e.y-t.y)},goog.math.Coordinate.sum=function(e,t){return new goog.math.Coordinate(e.x+t.x,e.y+t.y)},goog.math.Coordinate.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},goog.math.Coordinate.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},goog.math.Coordinate.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},goog.math.Coordinate.prototype.translate=function(e,t){return e instanceof goog.math.Coordinate?(this.x+=e.x,this.y+=e.y):(this.x+=Number(e),"number"==typeof t&&(this.y+=t)),this},goog.math.Coordinate.prototype.scale=function(e,t){return this.x*=e,this.y*="number"==typeof t?t:e,this},goog.math.Coordinate.prototype.rotateRadians=function(e,t){t=t||new goog.math.Coordinate(0,0);var n=this.x,o=this.y,r=Math.cos(e);e=Math.sin(e),this.x=(n-t.x)*r-(o-t.y)*e+t.x,this.y=(n-t.x)*e+(o-t.y)*r+t.y},goog.math.Coordinate.prototype.rotateDegrees=function(e,t){this.rotateRadians(goog.math.toRadians(e),t)},goog.math.Size=function(e,t){this.width=e,this.height=t},goog.math.Size.equals=function(e,t){return e==t||!(!e||!t)&&e.width==t.width&&e.height==t.height},goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)},goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"}),goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)},goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)},goog.math.Size.prototype.area=function(){return this.width*this.height},goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)},goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height},goog.math.Size.prototype.isEmpty=function(){return!this.area()},goog.math.Size.prototype.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},goog.math.Size.prototype.fitsInside=function(e){return this.width<=e.width&&this.height<=e.height},goog.math.Size.prototype.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},goog.math.Size.prototype.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this},goog.math.Size.prototype.scale=function(e,t){return this.width*=e,this.height*="number"==typeof t?t:e,this},goog.math.Size.prototype.scaleToCover=function(e){return e=this.aspectRatio()<=e.aspectRatio()?e.width/this.width:e.height/this.height,this.scale(e)},goog.math.Size.prototype.scaleToFit=function(e){return e=this.aspectRatio()>e.aspectRatio()?e.width/this.width:e.height/this.height,this.scale(e)},goog.dom.ASSUME_QUIRKS_MODE=!1,goog.dom.ASSUME_STANDARDS_MODE=!1,goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE,goog.dom.getDomHelper=function(e){return e?new goog.dom.DomHelper(goog.dom.getOwnerDocument(e)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)},goog.dom.getDocument=function(){return document},goog.dom.getElement=function(e){return goog.dom.getElementHelper_(document,e)},goog.dom.getElementHelper_=function(e,t){return"string"==typeof t?e.getElementById(t):t},goog.dom.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(document,e)},goog.dom.getRequiredElementHelper_=function(e,t){return goog.asserts.assertString(t),e=goog.dom.getElementHelper_(e,t),goog.asserts.assertElement(e,"No element found with id: "+t)},goog.dom.$=goog.dom.getElement,goog.dom.getElementsByTagName=function(e,t){return(t||document).getElementsByTagName(String(e))},goog.dom.getElementsByTagNameAndClass=function(e,t,n){return goog.dom.getElementsByTagNameAndClass_(document,e,t,n)},goog.dom.getElementByTagNameAndClass=function(e,t,n){return goog.dom.getElementByTagNameAndClass_(document,e,t,n)},goog.dom.getElementsByClass=function(e,t){var n=t||document;return goog.dom.canUseQuerySelector_(n)?n.querySelectorAll("."+e):goog.dom.getElementsByTagNameAndClass_(document,"*",e,t)},goog.dom.getElementByClass=function(e,t){var n=t||document;return(n.getElementsByClassName?n.getElementsByClassName(e)[0]:goog.dom.getElementByTagNameAndClass_(document,"*",e,t))||null},goog.dom.getRequiredElementByClass=function(e,t){return t=goog.dom.getElementByClass(e,t),goog.asserts.assert(t,"No element found with className: "+e)},goog.dom.canUseQuerySelector_=function(e){return!(!e.querySelectorAll||!e.querySelector)},goog.dom.getElementsByTagNameAndClass_=function(e,t,n,o){if(e=o||e,t=t&&"*"!=t?String(t).toUpperCase():"",goog.dom.canUseQuerySelector_(e)&&(t||n))return e.querySelectorAll(t+(n?"."+n:""));if(n&&e.getElementsByClassName){if(e=e.getElementsByClassName(n),t){o={};for(var r,i=0,s=0;r=e[s];s++)t==r.nodeName&&(o[i++]=r);return o.length=i,o}}else if(e=e.getElementsByTagName(t||"*"),n){for(o={},s=i=0;r=e[s];s++)"function"==typeof(t=r.className).split&&goog.array.contains(t.split(/\s+/),n)&&(o[i++]=r);return o.length=i,o}return e},goog.dom.getElementByTagNameAndClass_=function(e,t,n,o){var r=o||e,i=t&&"*"!=t?String(t).toUpperCase():"";return goog.dom.canUseQuerySelector_(r)&&(i||n)?r.querySelector(i+(n?"."+n:"")):goog.dom.getElementsByTagNameAndClass_(e,t,n,o)[0]||null},goog.dom.$$=goog.dom.getElementsByTagNameAndClass,goog.dom.setProperties=function(n,e){goog.object.forEach(e,function(e,t){e&&"object"==typeof e&&e.implementsGoogStringTypedString&&(e=e.getTypedStringValue()),"style"==t?n.style.cssText=e:"class"==t?n.className=e:"for"==t?n.htmlFor=e:goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(t)?n.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[t],e):goog.string.startsWith(t,"aria-")||goog.string.startsWith(t,"data-")?n.setAttribute(t,e):n[t]=e})},goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},goog.dom.getViewportSize=function(e){return goog.dom.getViewportSize_(e||window)},goog.dom.getViewportSize_=function(e){return e=e.document,e=goog.dom.isCss1CompatMode_(e)?e.documentElement:e.body,new goog.math.Size(e.clientWidth,e.clientHeight)},goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)},goog.dom.getDocumentHeightForWindow=function(e){return goog.dom.getDocumentHeight_(e)},goog.dom.getDocumentHeight_=function(e){var t=0;if(n=e.document){var n,o,t=n.body,r=n.documentElement;if(!r||!t)return 0;e=goog.dom.getViewportSize_(e).height,t=goog.dom.isCss1CompatMode_(n)&&r.scrollHeight?r.scrollHeight!=e?r.scrollHeight:r.offsetHeight:(n=r.scrollHeight,o=r.offsetHeight,r.clientHeight!=o&&(n=t.scrollHeight,o=t.offsetHeight),e<n?o<n?n:o:n<o?n:o)}return t},goog.dom.getPageScroll=function(e){return goog.dom.getDomHelper((e||goog.global||window).document).getDocumentScroll()},goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)},goog.dom.getDocumentScroll_=function(e){var t=goog.dom.getDocumentScrollElement_(e);return e=goog.dom.getWindow_(e),goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&e.pageYOffset!=t.scrollTop?new goog.math.Coordinate(t.scrollLeft,t.scrollTop):new goog.math.Coordinate(e.pageXOffset||t.scrollLeft,e.pageYOffset||t.scrollTop)},goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)},goog.dom.getDocumentScrollElement_=function(e){return e.scrollingElement||(goog.userAgent.WEBKIT||!goog.dom.isCss1CompatMode_(e))&&e.body||e.documentElement},goog.dom.getWindow=function(e){return e?goog.dom.getWindow_(e):window},goog.dom.getWindow_=function(e){return e.parentWindow||e.defaultView},goog.dom.createDom=function(e,t,n){return goog.dom.createDom_(document,arguments)},goog.dom.createDom_=function(e,t){var n,o=String(t[0]),r=t[1];return!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&r&&(r.name||r.type)&&(o=["<",o],r.name&&o.push(' name="',goog.string.htmlEscape(r.name),'"'),r.type&&(o.push(' type="',goog.string.htmlEscape(r.type),'"'),goog.object.extend(n={},r),delete n.type,r=n),o.push(">"),o=o.join("")),o=goog.dom.createElement_(e,o),r&&("string"==typeof r?o.className=r:goog.isArray(r)?o.className=r.join(" "):goog.dom.setProperties(o,r)),2<t.length&&goog.dom.append_(e,o,t,2),o},goog.dom.append_=function(t,n,e,o){function r(e){e&&n.appendChild("string"==typeof e?t.createTextNode(e):e)}for(;o<e.length;o++){var i=e[o];goog.isArrayLike(i)&&!goog.dom.isNodeLike(i)?goog.array.forEach(goog.dom.isNodeList(i)?goog.array.toArray(i):i,r):r(i)}},goog.dom.$dom=goog.dom.createDom,goog.dom.createElement=function(e){return goog.dom.createElement_(document,e)},goog.dom.createElement_=function(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)},goog.dom.createTextNode=function(e){return document.createTextNode(String(e))},goog.dom.createTable=function(e,t,n){return goog.dom.createTable_(document,e,t,!!n)},goog.dom.createTable_=function(e,t,n,o){for(var r=goog.dom.createElement_(e,"TABLE"),i=r.appendChild(goog.dom.createElement_(e,"TBODY")),s=0;s<t;s++){for(var a=goog.dom.createElement_(e,"TR"),l=0;l<n;l++){var c=goog.dom.createElement_(e,"TD");o&&goog.dom.setTextContent(c,goog.string.Unicode.NBSP),a.appendChild(c)}i.appendChild(a)}return r},goog.dom.constHtmlToNode=function(e){var t=goog.array.map(arguments,goog.string.Const.unwrap),t=goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Constant HTML string, that gets turned into a Node later, so it will be automatically balanced."),t.join(""));return goog.dom.safeHtmlToNode(t)},goog.dom.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(document,e)},goog.dom.safeHtmlToNode_=function(e,t){var n=goog.dom.createElement_(e,"DIV");return goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(goog.dom.safe.setInnerHtml(n,goog.html.SafeHtml.concat(goog.html.SafeHtml.BR,t)),n.removeChild(goog.asserts.assert(n.firstChild))):goog.dom.safe.setInnerHtml(n,t),goog.dom.childrenToNode_(e,n)},goog.dom.childrenToNode_=function(e,t){if(1==t.childNodes.length)return t.removeChild(goog.asserts.assert(t.firstChild));for(e=e.createDocumentFragment();t.firstChild;)e.appendChild(t.firstChild);return e},goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)},goog.dom.isCss1CompatMode_=function(e){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==e.compatMode},goog.dom.canHaveChildren=function(e){if(e.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(e.tagName){case"APPLET":case"AREA":case"BASE":case"BR":case"COL":case"COMMAND":case"EMBED":case"FRAME":case"HR":case"IMG":case"INPUT":case"IFRAME":case"ISINDEX":case"KEYGEN":case"LINK":case"NOFRAMES":case"NOSCRIPT":case"META":case"OBJECT":case"PARAM":case"SCRIPT":case"SOURCE":case"STYLE":case"TRACK":case"WBR":return!1}return!0},goog.dom.appendChild=function(e,t){goog.asserts.assert(null!=e&&null!=t,"goog.dom.appendChild expects non-null arguments"),e.appendChild(t)},goog.dom.append=function(e,t){goog.dom.append_(goog.dom.getOwnerDocument(e),e,arguments,1)},goog.dom.removeChildren=function(e){for(var t;t=e.firstChild;)e.removeChild(t)},goog.dom.insertSiblingBefore=function(e,t){goog.asserts.assert(null!=e&&null!=t,"goog.dom.insertSiblingBefore expects non-null arguments"),t.parentNode&&t.parentNode.insertBefore(e,t)},goog.dom.insertSiblingAfter=function(e,t){goog.asserts.assert(null!=e&&null!=t,"goog.dom.insertSiblingAfter expects non-null arguments"),t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)},goog.dom.insertChildAt=function(e,t,n){goog.asserts.assert(null!=e,"goog.dom.insertChildAt expects a non-null parent"),e.insertBefore(t,e.childNodes[n]||null)},goog.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},goog.dom.replaceNode=function(e,t){goog.asserts.assert(null!=e&&null!=t,"goog.dom.replaceNode expects non-null arguments");var n=t.parentNode;n&&n.replaceChild(e,t)},goog.dom.flattenElement=function(e){var t,n=e.parentNode;if(n&&n.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(e.removeNode)return e.removeNode(!1);for(;t=e.firstChild;)n.insertBefore(t,e);return goog.dom.removeNode(e)}},goog.dom.getChildren=function(e){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&null!=e.children?e.children:goog.array.filter(e.childNodes,function(e){return e.nodeType==goog.dom.NodeType.ELEMENT})},goog.dom.getFirstElementChild=function(e){return void 0!==e.firstElementChild?e.firstElementChild:goog.dom.getNextElementNode_(e.firstChild,!0)},goog.dom.getLastElementChild=function(e){return void 0!==e.lastElementChild?e.lastElementChild:goog.dom.getNextElementNode_(e.lastChild,!1)},goog.dom.getNextElementSibling=function(e){return void 0!==e.nextElementSibling?e.nextElementSibling:goog.dom.getNextElementNode_(e.nextSibling,!0)},goog.dom.getPreviousElementSibling=function(e){return void 0!==e.previousElementSibling?e.previousElementSibling:goog.dom.getNextElementNode_(e.previousSibling,!1)},goog.dom.getNextElementNode_=function(e,t){for(;e&&e.nodeType!=goog.dom.NodeType.ELEMENT;)e=t?e.nextSibling:e.previousSibling;return e},goog.dom.getNextNode=function(e){if(!e)return null;if(e.firstChild)return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null},goog.dom.getPreviousNode=function(e){if(!e)return null;if(!e.previousSibling)return e.parentNode;for(e=e.previousSibling;e&&e.lastChild;)e=e.lastChild;return e},goog.dom.isNodeLike=function(e){return goog.isObject(e)&&0<e.nodeType},goog.dom.isElement=function(e){return goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT},goog.dom.isWindow=function(e){return goog.isObject(e)&&e.window==e},goog.dom.getParentElement=function(e){var t;return goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY&&!(goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")&&goog.global.SVGElement&&e instanceof goog.global.SVGElement)&&(t=e.parentElement)||(t=e.parentNode,goog.dom.isElement(t))?t:null},goog.dom.contains=function(e,t){if(!e||!t)return!1;if(e.contains&&t.nodeType==goog.dom.NodeType.ELEMENT)return e==t||e.contains(t);if(void 0!==e.compareDocumentPosition)return e==t||!!(16&e.compareDocumentPosition(t));for(;t&&e!=t;)t=t.parentNode;return t==e},goog.dom.compareNodeOrder=function(e,t){if(e==t)return 0;if(e.compareDocumentPosition)return 2&e.compareDocumentPosition(t)?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(e.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(t.nodeType==goog.dom.NodeType.DOCUMENT)return 1}var n,o,r,i;return"sourceIndex"in e||e.parentNode&&"sourceIndex"in e.parentNode?(n=e.nodeType==goog.dom.NodeType.ELEMENT,o=t.nodeType==goog.dom.NodeType.ELEMENT,n&&o?e.sourceIndex-t.sourceIndex:(r=e.parentNode)==(i=t.parentNode)?goog.dom.compareSiblingOrder_(e,t):!n&&goog.dom.contains(r,t)?-1*goog.dom.compareParentsDescendantNodeIe_(e,t):!o&&goog.dom.contains(i,e)?goog.dom.compareParentsDescendantNodeIe_(t,e):(n?e:r).sourceIndex-(o?t:i).sourceIndex):((n=(o=goog.dom.getOwnerDocument(e)).createRange()).selectNode(e),n.collapse(!0),(e=o.createRange()).selectNode(t),e.collapse(!0),n.compareBoundaryPoints(goog.global.Range.START_TO_END,e))},goog.dom.compareParentsDescendantNodeIe_=function(e,t){var n=e.parentNode;if(n==t)return-1;for(;t.parentNode!=n;)t=t.parentNode;return goog.dom.compareSiblingOrder_(t,e)},goog.dom.compareSiblingOrder_=function(e,t){for(;t=t.previousSibling;)if(t==e)return-1;return 1},goog.dom.findCommonAncestor=function(e){var t=arguments.length;if(!t)return null;if(1==t)return e;for(var n=[],o=1/0,r=0;r<t;r++){for(var i=[],s=arguments[r];s;)i.unshift(s),s=s.parentNode;n.push(i),o=Math.min(o,i.length)}for(i=null,r=0;r<o;r++){for(var s=n[0][r],a=1;a<t;a++)if(s!=n[a][r])return i;i=s}return i},goog.dom.isInDocument=function(e){return 16==(16&e.ownerDocument.compareDocumentPosition(e))},goog.dom.getOwnerDocument=function(e){return goog.asserts.assert(e,"Node cannot be null or undefined."),e.nodeType==goog.dom.NodeType.DOCUMENT?e:e.ownerDocument||e.document},goog.dom.getFrameContentDocument=function(e){return e.contentDocument||e.contentWindow.document},goog.dom.getFrameContentWindow=function(e){try{return e.contentWindow||(e.contentDocument?goog.dom.getWindow(e.contentDocument):null)}catch(e){}return null},goog.dom.setTextContent=function(e,t){if(goog.asserts.assert(null!=e,"goog.dom.setTextContent expects a non-null value for node"),"textContent"in e)e.textContent=t;else if(e.nodeType==goog.dom.NodeType.TEXT)e.data=String(t);else if(e.firstChild&&e.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;e.lastChild!=e.firstChild;)e.removeChild(goog.asserts.assert(e.lastChild));e.firstChild.data=String(t)}else{goog.dom.removeChildren(e);var n=goog.dom.getOwnerDocument(e);e.appendChild(n.createTextNode(String(t)))}},goog.dom.getOuterHtml=function(e){var t;return goog.asserts.assert(null!==e,"goog.dom.getOuterHtml expects a non-null value for element"),"outerHTML"in e?e.outerHTML:(t=goog.dom.getOwnerDocument(e),(t=goog.dom.createElement_(t,"DIV")).appendChild(e.cloneNode(!0)),t.innerHTML)},goog.dom.findNode=function(e,t){var n=[];return goog.dom.findNodes_(e,t,n,!0)?n[0]:void 0},goog.dom.findNodes=function(e,t){var n=[];return goog.dom.findNodes_(e,t,n,!1),n},goog.dom.findNodes_=function(e,t,n,o){if(null!=e)for(e=e.firstChild;e;){if(t(e)&&(n.push(e),o)||goog.dom.findNodes_(e,t,n,o))return!0;e=e.nextSibling}return!1},goog.dom.findElement=function(e,t){for(e=goog.dom.getChildrenReverse_(e);0<e.length;){var n=e.pop();if(t(n))return n;for(n=n.lastElementChild;n;n=n.previousElementSibling)e.push(n)}return null},goog.dom.findElements=function(e,t){var n=[];for(e=goog.dom.getChildrenReverse_(e);0<e.length;){var o=e.pop();for(t(o)&&n.push(o),o=o.lastElementChild;o;o=o.previousElementSibling)e.push(o)}return n},goog.dom.getChildrenReverse_=function(e){if(e.nodeType==goog.dom.NodeType.DOCUMENT)return[e.documentElement];var t=[];for(e=e.lastElementChild;e;e=e.previousElementSibling)t.push(e);return t},goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"},goog.dom.isFocusableTabIndex=function(e){return goog.dom.hasSpecifiedTabIndex_(e)&&goog.dom.isTabIndexFocusable_(e)},goog.dom.setFocusableTabIndex=function(e,t){t?e.tabIndex=0:(e.tabIndex=-1,e.removeAttribute("tabIndex"))},goog.dom.isFocusable=function(e){var t;return(t=goog.dom.nativelySupportsFocus_(e)?!e.disabled&&(!goog.dom.hasSpecifiedTabIndex_(e)||goog.dom.isTabIndexFocusable_(e)):goog.dom.isFocusableTabIndex(e))&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(e):t},goog.dom.hasSpecifiedTabIndex_=function(e){return goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9")?null!=(e=e.getAttributeNode("tabindex"))&&e.specified:e.hasAttribute("tabindex")},goog.dom.isTabIndexFocusable_=function(e){return"number"==typeof(e=e.tabIndex)&&0<=e&&e<32768},goog.dom.nativelySupportsFocus_=function(e){return"A"==e.tagName&&e.hasAttribute("href")||"INPUT"==e.tagName||"TEXTAREA"==e.tagName||"SELECT"==e.tagName||"BUTTON"==e.tagName},goog.dom.hasNonZeroBoundingRect_=function(e){return null!=(e=!goog.isFunction(e.getBoundingClientRect)||goog.userAgent.IE&&null==e.parentElement?{height:e.offsetHeight,width:e.offsetWidth}:e.getBoundingClientRect())&&0<e.height&&0<e.width},goog.dom.getTextContent=function(e){var t;return e=(e=(e=goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&null!==e&&"innerText"in e?goog.string.canonicalizeNewlines(e.innerText):(goog.dom.getTextContent_(e,t=[],!0),t.join(""))).replace(/ \xAD /g," ").replace(/\xAD/g,"")).replace(/\u200B/g,""),e=" "!=(e=goog.dom.BrowserFeature.CAN_USE_INNER_TEXT?e:e.replace(/ +/g," "))?e.replace(/^\s*/,""):e},goog.dom.getRawTextContent=function(e){var t=[];return goog.dom.getTextContent_(e,t,!1),t.join("")},goog.dom.getTextContent_=function(e,t,n){if(!(e.nodeName in goog.dom.TAGS_TO_IGNORE_))if(e.nodeType==goog.dom.NodeType.TEXT)n?t.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(e.nodeValue);else if(e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)t.push(goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName]);else for(e=e.firstChild;e;)goog.dom.getTextContent_(e,t,n),e=e.nextSibling},goog.dom.getNodeTextLength=function(e){return goog.dom.getTextContent(e).length},goog.dom.getNodeTextOffset=function(e,t){t=t||goog.dom.getOwnerDocument(e).body;for(var n=[];e&&e!=t;){for(var o=e;o=o.previousSibling;)n.unshift(goog.dom.getTextContent(o));e=e.parentNode}return goog.string.trimLeft(n.join("")).replace(/ +/g," ").length},goog.dom.getNodeAtOffset=function(e,t,n){e=[e];for(var o=0,r=null;0<e.length&&o<t;)if(!((r=e.pop()).nodeName in goog.dom.TAGS_TO_IGNORE_))if(r.nodeType==goog.dom.NodeType.TEXT){var i=r.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");o+=i.length}else if(r.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)o+=goog.dom.PREDEFINED_TAG_VALUES_[r.nodeName].length;else for(i=r.childNodes.length-1;0<=i;i--)e.push(r.childNodes[i]);return goog.isObject(n)&&(n.remainder=r?r.nodeValue.length+t-o-1:0,n.node=r),r},goog.dom.isNodeList=function(e){if(e&&"number"==typeof e.length){if(goog.isObject(e))return"function"==typeof e.item||"string"==typeof e.item;if(goog.isFunction(e))return"function"==typeof e.item}return!1},goog.dom.getAncestorByTagNameAndClass=function(e,t,n,o){var r;return t||n?(r=t?String(t).toUpperCase():null,goog.dom.getAncestor(e,function(e){return(!r||e.nodeName==r)&&(!n||"string"==typeof e.className&&goog.array.contains(e.className.split(/\s+/),n))},!0,o)):null},goog.dom.getAncestorByClass=function(e,t,n){return goog.dom.getAncestorByTagNameAndClass(e,null,t,n)},goog.dom.getAncestor=function(e,t,n,o){for(e&&!n&&(e=e.parentNode),n=0;e&&(null==o||n<=o);){if(goog.asserts.assert("parentNode"!=e.name),t(e))return e;e=e.parentNode,n++}return null},goog.dom.getActiveElement=function(e){try{var t=e&&e.activeElement;return t&&t.nodeName?t:null}catch(e){return null}},goog.dom.getPixelRatio=function(){var e=goog.dom.getWindow();return void 0!==e.devicePixelRatio?e.devicePixelRatio:e.matchMedia?goog.dom.matchesPixelRatio_(3)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(1)||.75:1},goog.dom.matchesPixelRatio_=function(e){return goog.dom.getWindow().matchMedia("(min-resolution: "+e+"dppx),(min--moz-device-pixel-ratio: "+e+"),(min-resolution: "+96*e+"dpi)").matches?e:0},goog.dom.getCanvasContext2D=function(e){return e.getContext("2d")},goog.dom.DomHelper=function(e){this.document_=e||goog.global.document||document},goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper,goog.dom.DomHelper.prototype.setDocument=function(e){this.document_=e},goog.dom.DomHelper.prototype.getDocument=function(){return this.document_},goog.dom.DomHelper.prototype.getElement=function(e){return goog.dom.getElementHelper_(this.document_,e)},goog.dom.DomHelper.prototype.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(this.document_,e)},goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement,goog.dom.DomHelper.prototype.getElementsByTagName=function(e,t){return(t||this.document_).getElementsByTagName(String(e))},goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(e,t,n){return goog.dom.getElementsByTagNameAndClass_(this.document_,e,t,n)},goog.dom.DomHelper.prototype.getElementByTagNameAndClass=function(e,t,n){return goog.dom.getElementByTagNameAndClass_(this.document_,e,t,n)},goog.dom.DomHelper.prototype.getElementsByClass=function(e,t){return goog.dom.getElementsByClass(e,t||this.document_)},goog.dom.DomHelper.prototype.getElementByClass=function(e,t){return goog.dom.getElementByClass(e,t||this.document_)},goog.dom.DomHelper.prototype.getRequiredElementByClass=function(e,t){return goog.dom.getRequiredElementByClass(e,t||this.document_)},goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass,goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties,goog.dom.DomHelper.prototype.getViewportSize=function(e){return goog.dom.getViewportSize(e||this.getWindow())},goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())},goog.dom.DomHelper.prototype.createDom=function(e,t,n){return goog.dom.createDom_(this.document_,arguments)},goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom,goog.dom.DomHelper.prototype.createElement=function(e){return goog.dom.createElement_(this.document_,e)},goog.dom.DomHelper.prototype.createTextNode=function(e){return this.document_.createTextNode(String(e))},goog.dom.DomHelper.prototype.createTable=function(e,t,n){return goog.dom.createTable_(this.document_,e,t,!!n)},goog.dom.DomHelper.prototype.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(this.document_,e)},goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)},goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)},goog.dom.DomHelper.prototype.getActiveElement=function(e){return goog.dom.getActiveElement(e||this.document_)},goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild,goog.dom.DomHelper.prototype.append=goog.dom.append,goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren,goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren,goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore,goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter,goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt,goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode,goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode,goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement,goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren,goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild,goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild,goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling,goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling,goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode,goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode,goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike,goog.dom.DomHelper.prototype.isElement=goog.dom.isElement,goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow,goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement,goog.dom.DomHelper.prototype.contains=goog.dom.contains,goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder,goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor,goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument,goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument,goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow,goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent,goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml,goog.dom.DomHelper.prototype.findNode=goog.dom.findNode,goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes,goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex,goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex,goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable,goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent,goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength,goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset,goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset,goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList,goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass,goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass,goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor,goog.dom.DomHelper.prototype.getCanvasContext2D=goog.dom.getCanvasContext2D,goog.dom.classlist={},goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST=!1,goog.dom.classlist.getClassName_=function(e){return"string"==typeof e.className?e.className:e.getAttribute&&e.getAttribute("class")||""},goog.dom.classlist.get=function(e){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList:goog.dom.classlist.getClassName_(e).match(/\S+/g)||[]},goog.dom.classlist.set=function(e,t){"string"==typeof e.className?e.className=t:e.setAttribute&&e.setAttribute("class",t)},goog.dom.classlist.contains=function(e,t){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList.contains(t):goog.array.contains(goog.dom.classlist.get(e),t)},goog.dom.classlist.add=function(e,t){var n;goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList.add(t):goog.dom.classlist.contains(e,t)||(n=goog.dom.classlist.getClassName_(e),goog.dom.classlist.set(e,n+(0<n.length?" "+t:t)))},goog.dom.classlist.addAll=function(t,e){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||t.classList)goog.array.forEach(e,function(e){goog.dom.classlist.add(t,e)});else{var n,o={};for(n in goog.array.forEach(goog.dom.classlist.get(t),function(e){o[e]=!0}),goog.array.forEach(e,function(e){o[e]=!0}),e="",o)e+=0<e.length?" "+n:n;goog.dom.classlist.set(t,e)}},goog.dom.classlist.remove=function(e,t){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList.remove(t):goog.dom.classlist.contains(e,t)&&goog.dom.classlist.set(e,goog.array.filter(goog.dom.classlist.get(e),function(e){return e!=t}).join(" "))},goog.dom.classlist.removeAll=function(t,n){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||t.classList?goog.array.forEach(n,function(e){goog.dom.classlist.remove(t,e)}):goog.dom.classlist.set(t,goog.array.filter(goog.dom.classlist.get(t),function(e){return!goog.array.contains(n,e)}).join(" "))},goog.dom.classlist.enable=function(e,t,n){n?goog.dom.classlist.add(e,t):goog.dom.classlist.remove(e,t)},goog.dom.classlist.enableAll=function(e,t,n){(n?goog.dom.classlist.addAll:goog.dom.classlist.removeAll)(e,t)},goog.dom.classlist.swap=function(e,t,n){return!!goog.dom.classlist.contains(e,t)&&(goog.dom.classlist.remove(e,t),goog.dom.classlist.add(e,n),!0)},goog.dom.classlist.toggle=function(e,t){var n=!goog.dom.classlist.contains(e,t);return goog.dom.classlist.enable(e,t,n),n},goog.dom.classlist.addRemove=function(e,t,n){goog.dom.classlist.remove(e,t),goog.dom.classlist.add(e,n)},goog.a11y={},goog.a11y.aria={},goog.a11y.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",TEXTINFO:"textinfo",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"},goog.a11y.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",COLINDEX:"colindex",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",ROWINDEX:"rowindex",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"},goog.a11y.aria.AutoCompleteValues={INLINE:"inline",LIST:"list",BOTH:"both",NONE:"none"},goog.a11y.aria.DropEffectValues={COPY:"copy",MOVE:"move",LINK:"link",EXECUTE:"execute",POPUP:"popup",NONE:"none"},goog.a11y.aria.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"},goog.a11y.aria.OrientationValues={VERTICAL:"vertical",HORIZONTAL:"horizontal"},goog.a11y.aria.RelevantValues={ADDITIONS:"additions",REMOVALS:"removals",TEXT:"text",ALL:"all"},goog.a11y.aria.SortValues={ASCENDING:"ascending",DESCENDING:"descending",NONE:"none",OTHER:"other"},goog.a11y.aria.CheckedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"},goog.a11y.aria.ExpandedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"},goog.a11y.aria.GrabbedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"},goog.a11y.aria.InvalidValues={FALSE:"false",TRUE:"true",GRAMMAR:"grammar",SPELLING:"spelling"},goog.a11y.aria.PressedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"},goog.a11y.aria.SelectedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"},goog.a11y.aria.datatables={},goog.a11y.aria.datatables.getDefaultValuesMap=function(){return goog.a11y.aria.DefaultStateValueMap_||(goog.a11y.aria.DefaultStateValueMap_=goog.object.create(goog.a11y.aria.State.ATOMIC,!1,goog.a11y.aria.State.AUTOCOMPLETE,"none",goog.a11y.aria.State.DROPEFFECT,"none",goog.a11y.aria.State.HASPOPUP,!1,goog.a11y.aria.State.LIVE,"off",goog.a11y.aria.State.MULTILINE,!1,goog.a11y.aria.State.MULTISELECTABLE,!1,goog.a11y.aria.State.ORIENTATION,"vertical",goog.a11y.aria.State.READONLY,!1,goog.a11y.aria.State.RELEVANT,"additions text",goog.a11y.aria.State.REQUIRED,!1,goog.a11y.aria.State.SORT,"none",goog.a11y.aria.State.BUSY,!1,goog.a11y.aria.State.DISABLED,!1,goog.a11y.aria.State.HIDDEN,!1,goog.a11y.aria.State.INVALID,"false")),goog.a11y.aria.DefaultStateValueMap_},goog.a11y.aria.ARIA_PREFIX_="aria-",goog.a11y.aria.ROLE_ATTRIBUTE_="role",goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_=goog.object.createSet("A AREA BUTTON HEAD INPUT LINK MENU META OPTGROUP OPTION PROGRESS STYLE SELECT SOURCE TEXTAREA TITLE TRACK".split(" ")),goog.a11y.aria.CONTAINER_ROLES_=[goog.a11y.aria.Role.COMBOBOX,goog.a11y.aria.Role.GRID,goog.a11y.aria.Role.GROUP,goog.a11y.aria.Role.LISTBOX,goog.a11y.aria.Role.MENU,goog.a11y.aria.Role.MENUBAR,goog.a11y.aria.Role.RADIOGROUP,goog.a11y.aria.Role.ROW,goog.a11y.aria.Role.ROWGROUP,goog.a11y.aria.Role.TAB_LIST,goog.a11y.aria.Role.TEXTBOX,goog.a11y.aria.Role.TOOLBAR,goog.a11y.aria.Role.TREE,goog.a11y.aria.Role.TREEGRID],goog.a11y.aria.setRole=function(e,t){t?(goog.asserts.ENABLE_ASSERTS&&goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.Role,t),"No such ARIA role "+t),e.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_,t)):goog.a11y.aria.removeRole(e)},goog.a11y.aria.getRole=function(e){return e.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)||null},goog.a11y.aria.removeRole=function(e){e.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)},goog.a11y.aria.setState=function(e,t,n){goog.isArray(n)&&(n=n.join(" "));var o=goog.a11y.aria.getAriaAttributeName_(t);""===n||null==n?t in(n=goog.a11y.aria.datatables.getDefaultValuesMap())?e.setAttribute(o,n[t]):e.removeAttribute(o):e.setAttribute(o,n)},goog.a11y.aria.toggleState=function(e,t){var n=goog.a11y.aria.getState(e,t);goog.string.isEmptyOrWhitespace(goog.string.makeSafe(n))||"true"==n||"false"==n?goog.a11y.aria.setState(e,t,"true"==n?"false":"true"):goog.a11y.aria.removeState(e,t)},goog.a11y.aria.removeState=function(e,t){e.removeAttribute(goog.a11y.aria.getAriaAttributeName_(t))},goog.a11y.aria.getState=function(e,t){return null==(e=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t)))||null==e?"":String(e)},goog.a11y.aria.getActiveDescendant=function(e){var t=goog.a11y.aria.getState(e,goog.a11y.aria.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(e).getElementById(t)},goog.a11y.aria.setActiveDescendant=function(e,t){var n="";t&&(n=t.id,goog.asserts.assert(n,"The active element should have an id.")),goog.a11y.aria.setState(e,goog.a11y.aria.State.ACTIVEDESCENDANT,n)},goog.a11y.aria.getLabel=function(e){return goog.a11y.aria.getState(e,goog.a11y.aria.State.LABEL)},goog.a11y.aria.setLabel=function(e,t){goog.a11y.aria.setState(e,goog.a11y.aria.State.LABEL,t)},goog.a11y.aria.assertRoleIsSetInternalUtil=function(e,t){goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_[e.tagName]||(e=goog.a11y.aria.getRole(e),goog.asserts.assert(null!=e,"The element ARIA role cannot be null."),goog.asserts.assert(goog.array.contains(t,e),'Non existing or incorrect role set for element.The role set is "'+e+'". The role should be any of "'+t+'". Check the ARIA specification for more details http://www.w3.org/TR/wai-aria/roles.'))},goog.a11y.aria.getStateBoolean=function(e,t){return e=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t)),goog.asserts.assert("boolean"==typeof e||null==e||"true"==e||"false"==e),null==e||"boolean"==typeof e?e:"true"==e},goog.a11y.aria.getStateNumber=function(e,t){return e=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t)),goog.asserts.assert((null==e||!isNaN(Number(e)))&&"boolean"!=typeof e),null==e?null:Number(e)},goog.a11y.aria.getStateString=function(e,t){return e=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t)),goog.asserts.assert((null==e||"string"==typeof e)&&(""==e||isNaN(Number(e)))&&"true"!=e&&"false"!=e),null==e||""==e?null:e},goog.a11y.aria.getStringArrayStateInternalUtil=function(e,t){return e=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t)),goog.a11y.aria.splitStringOnWhitespace_(e)},goog.a11y.aria.hasState=function(e,t){return e.hasAttribute(goog.a11y.aria.getAriaAttributeName_(t))},goog.a11y.aria.isContainerRole=function(e){return e=goog.a11y.aria.getRole(e),goog.array.contains(goog.a11y.aria.CONTAINER_ROLES_,e)},goog.a11y.aria.splitStringOnWhitespace_=function(e){return e?e.split(/\s+/):[]},goog.a11y.aria.getAriaAttributeName_=function(e){return goog.asserts.ENABLE_ASSERTS&&(goog.asserts.assert(e,"ARIA attribute cannot be empty."),goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.State,e),"No such ARIA attribute "+e)),goog.a11y.aria.ARIA_PREFIX_+e},goog.dom.vendor={},goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":goog.userAgent.OPERA?"O":null},goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":goog.userAgent.OPERA?"-o":null},goog.dom.vendor.getPrefixedPropertyName=function(e,t){var n;return t&&e in t||(n=goog.dom.vendor.getVendorJsPrefix())&&(e=(n=n.toLowerCase())+goog.string.toTitleCase(e),void 0===t||e in t)?e:null},goog.dom.vendor.getPrefixedEventType=function(e){return((goog.dom.vendor.getVendorJsPrefix()||"")+e).toLowerCase()},goog.math.Box=function(e,t,n,o){this.top=e,this.right=t,this.bottom=n,this.left=o},goog.math.Box.boundingBox=function(e){for(var t=new goog.math.Box(e.y,e.x,e.y,e.x),n=1;n<arguments.length;n++)t.expandToIncludeCoordinate(arguments[n]);return t},goog.math.Box.prototype.getWidth=function(){return this.right-this.left},goog.math.Box.prototype.getHeight=function(){return this.bottom-this.top},goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)},goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"}),goog.math.Box.prototype.contains=function(e){return goog.math.Box.contains(this,e)},goog.math.Box.prototype.expand=function(e,t,n,o){return goog.isObject(e)?(this.top-=e.top,this.right+=e.right,this.bottom+=e.bottom,this.left-=e.left):(this.top-=e,this.right+=Number(t),this.bottom+=Number(n),this.left-=Number(o)),this},goog.math.Box.prototype.expandToInclude=function(e){this.left=Math.min(this.left,e.left),this.top=Math.min(this.top,e.top),this.right=Math.max(this.right,e.right),this.bottom=Math.max(this.bottom,e.bottom)},goog.math.Box.prototype.expandToIncludeCoordinate=function(e){this.top=Math.min(this.top,e.y),this.right=Math.max(this.right,e.x),this.bottom=Math.max(this.bottom,e.y),this.left=Math.min(this.left,e.x)},goog.math.Box.equals=function(e,t){return e==t||!(!e||!t)&&e.top==t.top&&e.right==t.right&&e.bottom==t.bottom&&e.left==t.left},goog.math.Box.contains=function(e,t){return!(!e||!t)&&(t instanceof goog.math.Box?t.left>=e.left&&t.right<=e.right&&t.top>=e.top&&t.bottom<=e.bottom:t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom)},goog.math.Box.relativePositionX=function(e,t){return t.x<e.left?t.x-e.left:t.x>e.right?t.x-e.right:0},goog.math.Box.relativePositionY=function(e,t){return t.y<e.top?t.y-e.top:t.y>e.bottom?t.y-e.bottom:0},goog.math.Box.distance=function(e,t){var n=goog.math.Box.relativePositionX(e,t);return e=goog.math.Box.relativePositionY(e,t),Math.sqrt(n*n+e*e)},goog.math.Box.intersects=function(e,t){return e.left<=t.right&&t.left<=e.right&&e.top<=t.bottom&&t.top<=e.bottom},goog.math.Box.intersectsWithPadding=function(e,t,n){return e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},goog.math.Box.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},goog.math.Box.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},goog.math.Box.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this},goog.math.Box.prototype.translate=function(e,t){return e instanceof goog.math.Coordinate?(this.left+=e.x,this.right+=e.x,this.top+=e.y,this.bottom+=e.y):(goog.asserts.assertNumber(e),this.left+=e,this.right+=e,"number"==typeof t&&(this.top+=t,this.bottom+=t)),this},goog.math.Box.prototype.scale=function(e,t){return t="number"==typeof t?t:e,this.left*=e,this.right*=e,this.top*=t,this.bottom*=t,this},goog.math.IRect=function(){},goog.math.Rect=function(e,t,n,o){this.left=e,this.top=t,this.width=n,this.height=o},goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)},goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)},goog.math.Rect.createFromPositionAndSize=function(e,t){return new goog.math.Rect(e.x,e.y,t.width,t.height)},goog.math.Rect.createFromBox=function(e){return new goog.math.Rect(e.left,e.top,e.right-e.left,e.bottom-e.top)},goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"}),goog.math.Rect.equals=function(e,t){return e==t||!(!e||!t)&&e.left==t.left&&e.width==t.width&&e.top==t.top&&e.height==t.height},goog.math.Rect.prototype.intersection=function(e){var t=Math.max(this.left,e.left),n=Math.min(this.left+this.width,e.left+e.width);if(t<=n){var o=Math.max(this.top,e.top);if(o<=(e=Math.min(this.top+this.height,e.top+e.height)))return this.left=t,this.top=o,this.width=n-t,this.height=e-o,!0}return!1},goog.math.Rect.intersection=function(e,t){var n=Math.max(e.left,t.left),o=Math.min(e.left+e.width,t.left+t.width);if(n<=o){var r=Math.max(e.top,t.top);if(r<=(e=Math.min(e.top+e.height,t.top+t.height)))return new goog.math.Rect(n,r,o-n,e-r)}return null},goog.math.Rect.intersects=function(e,t){return e.left<=t.left+t.width&&t.left<=e.left+e.width&&e.top<=t.top+t.height&&t.top<=e.top+e.height},goog.math.Rect.prototype.intersects=function(e){return goog.math.Rect.intersects(this,e)},goog.math.Rect.difference=function(e,t){var n,o,r,i,s,a,l;return(n=goog.math.Rect.intersection(e,t))&&n.height&&n.width?(n=[],o=e.top,r=e.height,i=e.left+e.width,s=e.top+e.height,a=t.left+t.width,l=t.top+t.height,t.top>e.top&&(n.push(new goog.math.Rect(e.left,e.top,e.width,t.top-e.top)),o=t.top,r-=t.top-e.top),l<s&&(n.push(new goog.math.Rect(e.left,l,e.width,s-l)),r=l-o),t.left>e.left&&n.push(new goog.math.Rect(e.left,o,t.left-e.left,r)),a<i&&n.push(new goog.math.Rect(a,o,i-a,r)),n):[e.clone()]},goog.math.Rect.prototype.difference=function(e){return goog.math.Rect.difference(this,e)},goog.math.Rect.prototype.boundingRect=function(e){var t=Math.max(this.left+this.width,e.left+e.width),n=Math.max(this.top+this.height,e.top+e.height);this.left=Math.min(this.left,e.left),this.top=Math.min(this.top,e.top),this.width=t-this.left,this.height=n-this.top},goog.math.Rect.boundingRect=function(e,t){return e&&t?((e=new goog.math.Rect(e.left,e.top,e.width,e.height)).boundingRect(t),e):null},goog.math.Rect.prototype.contains=function(e){return e instanceof goog.math.Coordinate?e.x>=this.left&&e.x<=this.left+this.width&&e.y>=this.top&&e.y<=this.top+this.height:this.left<=e.left&&this.left+this.width>=e.left+e.width&&this.top<=e.top&&this.top+this.height>=e.top+e.height},goog.math.Rect.prototype.squaredDistance=function(e){var t=e.x<this.left?this.left-e.x:Math.max(e.x-(this.left+this.width),0);return t*t+(e=e.y<this.top?this.top-e.y:Math.max(e.y-(this.top+this.height),0))*e},goog.math.Rect.prototype.distance=function(e){return Math.sqrt(this.squaredDistance(e))},goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)},goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)},goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)},goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)},goog.math.Rect.prototype.ceil=function(){return this.left=Math.ceil(this.left),this.top=Math.ceil(this.top),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},goog.math.Rect.prototype.floor=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},goog.math.Rect.prototype.round=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.width=Math.round(this.width),this.height=Math.round(this.height),this},goog.math.Rect.prototype.translate=function(e,t){return e instanceof goog.math.Coordinate?(this.left+=e.x,this.top+=e.y):(this.left+=goog.asserts.assertNumber(e),"number"==typeof t&&(this.top+=t)),this},goog.math.Rect.prototype.scale=function(e,t){return t="number"==typeof t?t:e,this.left*=e,this.width*=e,this.top*=t,this.height*=t,this},goog.style={},goog.style.setStyle=function(e,t,n){if("string"==typeof t)goog.style.setStyle_(e,n,t);else for(var o in t)goog.style.setStyle_(e,t[o],o)},goog.style.setStyle_=function(e,t,n){(n=goog.style.getVendorJsStyleName_(e,n))&&(e.style[n]=t)},goog.style.styleNameCache_={},goog.style.getVendorJsStyleName_=function(e,t){var n,o=goog.style.styleNameCache_[t];return o||(n=goog.string.toCamelCase(t),void 0===e.style[o=n]&&(n=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(n),void 0!==e.style[n])&&(o=n),goog.style.styleNameCache_[t]=o),o},goog.style.getVendorStyleName_=function(e,t){var n=goog.string.toCamelCase(t);return void 0===e.style[n]&&(n=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(n),void 0!==e.style[n])?goog.dom.vendor.getVendorPrefix()+"-"+t:t},goog.style.getStyle=function(e,t){var n=e.style[goog.string.toCamelCase(t)];return void 0!==n?n:e.style[goog.style.getVendorJsStyleName_(e,t)]||""},goog.style.getComputedStyle=function(e,t){var n=goog.dom.getOwnerDocument(e);return n.defaultView&&n.defaultView.getComputedStyle&&(e=n.defaultView.getComputedStyle(e,null))&&(e[t]||e.getPropertyValue(t))||""},goog.style.getCascadedStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:null},goog.style.getStyle_=function(e,t){return goog.style.getComputedStyle(e,t)||goog.style.getCascadedStyle(e,t)||e.style&&e.style[t]},goog.style.getComputedBoxSizing=function(e){return goog.style.getStyle_(e,"boxSizing")||goog.style.getStyle_(e,"MozBoxSizing")||goog.style.getStyle_(e,"WebkitBoxSizing")||null},goog.style.getComputedPosition=function(e){return goog.style.getStyle_(e,"position")},goog.style.getBackgroundColor=function(e){return goog.style.getStyle_(e,"backgroundColor")},goog.style.getComputedOverflowX=function(e){return goog.style.getStyle_(e,"overflowX")},goog.style.getComputedOverflowY=function(e){return goog.style.getStyle_(e,"overflowY")},goog.style.getComputedZIndex=function(e){return goog.style.getStyle_(e,"zIndex")},goog.style.getComputedTextAlign=function(e){return goog.style.getStyle_(e,"textAlign")},goog.style.getComputedCursor=function(e){return goog.style.getStyle_(e,"cursor")},goog.style.getComputedTransform=function(e){var t=goog.style.getVendorStyleName_(e,"transform");return goog.style.getStyle_(e,t)||goog.style.getStyle_(e,"transform")},goog.style.setPosition=function(e,t,n){var o;t=t instanceof goog.math.Coordinate?(o=t.x,t.y):(o=t,n),e.style.left=goog.style.getPixelStyleValue_(o,!1),e.style.top=goog.style.getPixelStyleValue_(t,!1)},goog.style.getPosition=function(e){return new goog.math.Coordinate(e.offsetLeft,e.offsetTop)},goog.style.getClientViewportElement=function(e){return e=e?goog.dom.getOwnerDocument(e):goog.dom.getDocument(),!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||goog.dom.getDomHelper(e).isCss1CompatMode()?e.documentElement:e.body},goog.style.getViewportPageOffset=function(e){var t=e.body;return e=e.documentElement,new goog.math.Coordinate(t.scrollLeft||e.scrollLeft,t.scrollTop||e.scrollTop)},goog.style.getBoundingClientRect_=function(e){try{var t=e.getBoundingClientRect()}catch(e){return{left:0,top:0,right:0,bottom:0}}return goog.userAgent.IE&&e.ownerDocument.body&&(e=e.ownerDocument,t.left-=e.documentElement.clientLeft+e.body.clientLeft,t.top-=e.documentElement.clientTop+e.body.clientTop),t},goog.style.getOffsetParent=function(e){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8))return goog.asserts.assert(e&&"offsetParent"in e),e.offsetParent;var t=goog.dom.getOwnerDocument(e),n=goog.style.getStyle_(e,"position"),o="fixed"==n||"absolute"==n;for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(e.nodeType==goog.dom.NodeType.DOCUMENT_FRAGMENT&&e.host&&(e=e.host),n=goog.style.getStyle_(e,"position"),!(o=o&&"static"==n&&e!=t.documentElement&&e!=t.body)&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight||"fixed"==n||"absolute"==n||"relative"==n))return e;return null},goog.style.getVisibleRectForElement=function(e){for(var t,n,o=new goog.math.Box(0,1/0,1/0,0),r=goog.dom.getDomHelper(e),i=r.getDocument().body,s=r.getDocument().documentElement,a=r.getDocumentScrollElement();e=goog.style.getOffsetParent(e);)goog.userAgent.IE&&0==e.clientWidth||goog.userAgent.WEBKIT&&0==e.clientHeight&&e==i||e==i||e==s||"visible"==goog.style.getStyle_(e,"overflow")||(t=goog.style.getPageOffset(e),n=goog.style.getClientLeftTop(e),t.x+=n.x,t.y+=n.y,o.top=Math.max(o.top,t.y),o.right=Math.min(o.right,t.x+e.clientWidth),o.bottom=Math.min(o.bottom,t.y+e.clientHeight),o.left=Math.max(o.left,t.x));return i=a.scrollLeft,a=a.scrollTop,o.left=Math.max(o.left,i),o.top=Math.max(o.top,a),r=r.getViewportSize(),o.right=Math.min(o.right,i+r.width),o.bottom=Math.min(o.bottom,a+r.height),0<=o.top&&0<=o.left&&o.bottom>o.top&&o.right>o.left?o:null},goog.style.getContainerOffsetToScrollInto=function(e,t,n){var o=t||goog.dom.getDocumentScrollElement(),r=goog.style.getPageOffset(e),i=goog.style.getPageOffset(o),s=goog.style.getBorderBox(o);return o==goog.dom.getDocumentScrollElement()?(t=r.x-o.scrollLeft,r=r.y-o.scrollTop,goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)&&(t+=s.left,r+=s.top)):(t=r.x-i.x-s.left,r=r.y-i.y-s.top),s=goog.style.getSizeWithDisplay_(e),e=o.clientWidth-s.width,s=o.clientHeight-s.height,i=o.scrollLeft,o=o.scrollTop,n?(i+=t-e/2,o+=r-s/2):(i+=Math.min(t,Math.max(t-e,0)),o+=Math.min(r,Math.max(r-s,0))),new goog.math.Coordinate(i,o)},goog.style.scrollIntoContainerView=function(e,t,n){t=t||goog.dom.getDocumentScrollElement(),e=goog.style.getContainerOffsetToScrollInto(e,t,n),t.scrollLeft=e.x,t.scrollTop=e.y},goog.style.getClientLeftTop=function(e){return new goog.math.Coordinate(e.clientLeft,e.clientTop)},goog.style.getPageOffset=function(e){var t=goog.dom.getOwnerDocument(e),n=(goog.asserts.assertObject(e,"Parameter is required"),new goog.math.Coordinate(0,0));return e!=goog.style.getClientViewportElement(t)&&(e=goog.style.getBoundingClientRect_(e),t=goog.dom.getDomHelper(t).getDocumentScroll(),n.x=e.left+t.x,n.y=e.top+t.y),n},goog.style.getPageOffsetLeft=function(e){return goog.style.getPageOffset(e).x},goog.style.getPageOffsetTop=function(e){return goog.style.getPageOffset(e).y},goog.style.getFramedPageOffset=function(e,t){var n=new goog.math.Coordinate(0,0),o=goog.dom.getWindow(goog.dom.getOwnerDocument(e));if(goog.reflect.canAccessProperty(o,"parent"))do{var r=o==t?goog.style.getPageOffset(e):goog.style.getClientPositionForElement_(goog.asserts.assert(e))}while(n.x+=r.x,n.y+=r.y,o&&o!=t&&o!=o.parent&&(e=o.frameElement)&&(o=o.parent));return n},goog.style.translateRectForAnotherFrame=function(e,t,n){var o;t.getDocument()!=n.getDocument()&&(o=t.getDocument().body,n=goog.style.getFramedPageOffset(o,n.getWindow()),n=goog.math.Coordinate.difference(n,goog.style.getPageOffset(o)),!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||t.isCss1CompatMode()||(n=goog.math.Coordinate.difference(n,t.getDocumentScroll())),e.left+=n.x,e.top+=n.y)},goog.style.getRelativePosition=function(e,t){return e=goog.style.getClientPosition(e),t=goog.style.getClientPosition(t),new goog.math.Coordinate(e.x-t.x,e.y-t.y)},goog.style.getClientPositionForElement_=function(e){return e=goog.style.getBoundingClientRect_(e),new goog.math.Coordinate(e.left,e.top)},goog.style.getClientPosition=function(e){return goog.asserts.assert(e),e.nodeType==goog.dom.NodeType.ELEMENT?goog.style.getClientPositionForElement_(e):(e=e.changedTouches?e.changedTouches[0]:e,new goog.math.Coordinate(e.clientX,e.clientY))},goog.style.setPageOffset=function(e,t,n){var o=goog.style.getPageOffset(e);t instanceof goog.math.Coordinate&&(n=t.y,t=t.x),t=goog.asserts.assertNumber(t)-o.x,goog.style.setPosition(e,e.offsetLeft+t,e.offsetTop+(Number(n)-o.y))},goog.style.setSize=function(e,t,n){if(t instanceof goog.math.Size)n=t.height,t=t.width;else if(null==n)throw Error("missing height argument");goog.style.setWidth(e,t),goog.style.setHeight(e,n)},goog.style.getPixelStyleValue_=function(e,t){return e="number"==typeof e?(t?Math.round(e):e)+"px":e},goog.style.setHeight=function(e,t){e.style.height=goog.style.getPixelStyleValue_(t,!0)},goog.style.setWidth=function(e,t){e.style.width=goog.style.getPixelStyleValue_(t,!0)};goog.style.getSize=function(e){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,e)},goog.style.evaluateWithTemporaryDisplay_=function(e,t){var n,o,r,i;return"none"!=goog.style.getStyle_(t,"display")?e(t):(o=(n=t.style).display,r=n.visibility,i=n.position,n.visibility="hidden",n.position="absolute",n.display="inline",e=e(t),n.display=o,n.position=i,n.visibility=r,e)},goog.style.getSizeWithDisplay_=function(e){var t=e.offsetWidth,n=e.offsetHeight,o=goog.userAgent.WEBKIT&&!t&&!n;return(void 0===t||o)&&e.getBoundingClientRect?(e=goog.style.getBoundingClientRect_(e),new goog.math.Size(e.right-e.left,e.bottom-e.top)):new goog.math.Size(t,n)},goog.style.getTransformedSize=function(e){return e.getBoundingClientRect?(e=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,e),new goog.math.Size(e.right-e.left,e.bottom-e.top)):null},goog.style.getBounds=function(e){var t=goog.style.getPageOffset(e);return e=goog.style.getSize(e),new goog.math.Rect(t.x,t.y,e.width,e.height)},goog.style.toCamelCase=function(e){return goog.string.toCamelCase(String(e))},goog.style.toSelectorCase=function(e){return goog.string.toSelectorCase(e)},goog.style.getOpacity=function(e){goog.asserts.assert(e);var t=e.style;return e="","opacity"in t?e=t.opacity:"MozOpacity"in t?e=t.MozOpacity:"filter"in t&&(t=t.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(e=String(t[1]/100)),""==e?e:Number(e)},goog.style.setOpacity=function(e,t){goog.asserts.assert(e),"opacity"in(e=e.style)?e.opacity=t:"MozOpacity"in e?e.MozOpacity=t:"filter"in e&&(e.filter=""===t?"":"alpha(opacity="+100*Number(t)+")")},goog.style.setTransparentBackgroundImage=function(e,t){e=e.style,goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?e.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'", sizingMethod="crop")':(e.backgroundImage="url("+t+")",e.backgroundPosition="top left",e.backgroundRepeat="no-repeat")},goog.style.clearTransparentBackgroundImage=function(e){"filter"in(e=e.style)?e.filter="":e.backgroundImage="none"},goog.style.showElement=function(e,t){goog.style.setElementShown(e,t)},goog.style.setElementShown=function(e,t){e.style.display=t?"":"none"},goog.style.isElementShown=function(e){return"none"!=e.style.display},goog.style.installSafeStyleSheet=function(e,t){var n,o=(t=goog.dom.getDomHelper(t)).getDocument();return goog.userAgent.IE&&o.createStyleSheet?(t=o.createStyleSheet(),goog.style.setSafeStyleSheet(t,e),t):((o=t.getElementsByTagNameAndClass("HEAD")[0])||(n=t.getElementsByTagNameAndClass("BODY")[0],o=t.createDom("HEAD"),n.parentNode.insertBefore(o,n)),n=t.createDom("STYLE"),goog.style.setSafeStyleSheet(n,e),t.appendChild(o,n),n)},goog.style.uninstallStyles=function(e){goog.dom.removeNode(e.ownerNode||e.owningElement||e)},goog.style.setSafeStyleSheet=function(e,t){t=goog.html.SafeStyleSheet.unwrap(t),goog.userAgent.IE&&void 0!==e.cssText?e.cssText=t:e.innerHTML=t},goog.style.setPreWrap=function(e){e=e.style,goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(e.whiteSpace="pre",e.wordWrap="break-word"):e.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"},goog.style.setInlineBlock=function(e){(e=e.style).position="relative",goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(e.zoom="1",e.display="inline"):e.display="inline-block"},goog.style.isRightToLeft=function(e){return"rtl"==goog.style.getStyle_(e,"direction")},goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT||goog.userAgent.EDGE?"WebkitUserSelect":null,goog.style.isUnselectable=function(e){return goog.style.unselectableStyle_?"none"==e.style[goog.style.unselectableStyle_].toLowerCase():!(!goog.userAgent.IE&&!goog.userAgent.OPERA)&&"on"==e.getAttribute("unselectable")},goog.style.setUnselectable=function(e,t,n){n=n?null:e.getElementsByTagName("*");var o,r=goog.style.unselectableStyle_;if(r){if(t=t?"none":"",e.style&&(e.style[r]=t),n){e=0;for(;o=n[e];e++)o.style&&(o.style[r]=t)}}else if((goog.userAgent.IE||goog.userAgent.OPERA)&&(e.setAttribute("unselectable",t=t?"on":""),n))for(e=0;o=n[e];e++)o.setAttribute("unselectable",t)},goog.style.getBorderBoxSize=function(e){return new goog.math.Size(e.offsetWidth,e.offsetHeight)},goog.style.setBorderBoxSize=function(e,t){var n=goog.dom.getOwnerDocument(e),o=goog.dom.getDomHelper(n).isCss1CompatMode();!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||o&&goog.userAgent.isVersionOrHigher("8")?goog.style.setBoxSizingSize_(e,t,"border-box"):(n=e.style,o?(o=goog.style.getPaddingBox(e),e=goog.style.getBorderBox(e),n.pixelWidth=t.width-e.left-o.left-o.right-e.right,n.pixelHeight=t.height-e.top-o.top-o.bottom-e.bottom):(n.pixelWidth=t.width,n.pixelHeight=t.height))},goog.style.getContentBoxSize=function(e){var t=goog.dom.getOwnerDocument(e),n=goog.userAgent.IE&&e.currentStyle;return n&&goog.dom.getDomHelper(t).isCss1CompatMode()&&"auto"!=n.width&&"auto"!=n.height&&!n.boxSizing?(t=goog.style.getIePixelValue_(e,n.width,"width","pixelWidth"),e=goog.style.getIePixelValue_(e,n.height,"height","pixelHeight"),new goog.math.Size(t,e)):(n=goog.style.getBorderBoxSize(e),t=goog.style.getPaddingBox(e),e=goog.style.getBorderBox(e),new goog.math.Size(n.width-e.left-t.left-t.right-e.right,n.height-e.top-t.top-t.bottom-e.bottom))},goog.style.setContentBoxSize=function(e,t){var n=goog.dom.getOwnerDocument(e),o=goog.dom.getDomHelper(n).isCss1CompatMode();!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||o&&goog.userAgent.isVersionOrHigher("8")?goog.style.setBoxSizingSize_(e,t,"content-box"):(n=e.style,o?(n.pixelWidth=t.width,n.pixelHeight=t.height):(o=goog.style.getPaddingBox(e),e=goog.style.getBorderBox(e),n.pixelWidth=t.width+e.left+o.left+o.right+e.right,n.pixelHeight=t.height+e.top+o.top+o.bottom+e.bottom))},goog.style.setBoxSizingSize_=function(e,t,n){e=e.style,goog.userAgent.GECKO?e.MozBoxSizing=n:goog.userAgent.WEBKIT?e.WebkitBoxSizing=n:e.boxSizing=n,e.width=Math.max(t.width,0)+"px",e.height=Math.max(t.height,0)+"px"},goog.style.getIePixelValue_=function(e,t,n,o){var r,i;return/^\d+px?$/.test(t)?parseInt(t,10):(r=e.style[n],i=e.runtimeStyle[n],e.runtimeStyle[n]=e.currentStyle[n],e.style[n]=t,t=e.style[o],e.style[n]=r,e.runtimeStyle[n]=i,+t)},goog.style.getIePixelDistance_=function(e,t){return(t=goog.style.getCascadedStyle(e,t))?goog.style.getIePixelValue_(e,t,"left","pixelLeft"):0},goog.style.getBox_=function(e,t){var n,o,r;return goog.userAgent.IE?(n=goog.style.getIePixelDistance_(e,t+"Left"),o=goog.style.getIePixelDistance_(e,t+"Right"),r=goog.style.getIePixelDistance_(e,t+"Top"),e=goog.style.getIePixelDistance_(e,t+"Bottom"),new goog.math.Box(r,o,e,n)):(n=goog.style.getComputedStyle(e,t+"Left"),o=goog.style.getComputedStyle(e,t+"Right"),r=goog.style.getComputedStyle(e,t+"Top"),e=goog.style.getComputedStyle(e,t+"Bottom"),new goog.math.Box(parseFloat(r),parseFloat(o),parseFloat(e),parseFloat(n)))},goog.style.getPaddingBox=function(e){return goog.style.getBox_(e,"padding")},goog.style.getMarginBox=function(e){return goog.style.getBox_(e,"margin")},goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6},goog.style.getIePixelBorder_=function(e,t){return"none"==goog.style.getCascadedStyle(e,t+"Style")?0:(t=goog.style.getCascadedStyle(e,t+"Width"))in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[t]:goog.style.getIePixelValue_(e,t,"left","pixelLeft")},goog.style.getBorderBox=function(e){var t,n,o;return goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)?(t=goog.style.getIePixelBorder_(e,"borderLeft"),n=goog.style.getIePixelBorder_(e,"borderRight"),o=goog.style.getIePixelBorder_(e,"borderTop"),e=goog.style.getIePixelBorder_(e,"borderBottom"),new goog.math.Box(o,n,e,t)):(t=goog.style.getComputedStyle(e,"borderLeftWidth"),n=goog.style.getComputedStyle(e,"borderRightWidth"),o=goog.style.getComputedStyle(e,"borderTopWidth"),e=goog.style.getComputedStyle(e,"borderBottomWidth"),new goog.math.Box(parseFloat(o),parseFloat(n),parseFloat(e),parseFloat(t)))},goog.style.getFontFamily=function(e){var t=goog.dom.getOwnerDocument(e),n="";if(t.body.createTextRange&&goog.dom.contains(t,e)){(t=t.body.createTextRange()).moveToElementText(e);try{n=t.queryCommandValue("FontName")}catch(e){n=""}}return 1<(e=(n=n||goog.style.getStyle_(e,"fontFamily")).split(",")).length&&(n=e[0]),goog.string.stripQuotes(n,"\"'")},goog.style.lengthUnitRegex_=/[^\d]+$/,goog.style.getLengthUnits=function(e){return(e=e.match(goog.style.lengthUnitRegex_))&&e[0]||null},goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,in:1,mm:1,pc:1,pt:1},goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1},goog.style.getFontSize=function(e){var t=goog.style.getStyle_(e,"fontSize"),n=goog.style.getLengthUnits(t);if(t&&"px"==n)return parseInt(t,10);if(goog.userAgent.IE){if(String(n)in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(e,t,"left","pixelLeft");if(e.parentNode&&e.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&String(n)in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return e=e.parentNode,n=goog.style.getStyle_(e,"fontSize"),goog.style.getIePixelValue_(e,t==n?"1em":t,"left","pixelLeft")}return n=goog.dom.createDom("SPAN",{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"}),goog.dom.appendChild(e,n),t=n.offsetHeight,goog.dom.removeNode(n),t},goog.style.parseStyleAttribute=function(e){var n={};return goog.array.forEach(e.split(/\s*;\s*/),function(e){var t=e.match(/\s*([\w-]+)\s*:(.+)/);t&&(e=t[1],t=goog.string.trim(t[2]),n[goog.string.toCamelCase(e.toLowerCase())]=t)}),n},goog.style.toStyleAttribute=function(e){var n=[];return goog.object.forEach(e,function(e,t){n.push(goog.string.toSelectorCase(t),":",e,";")}),n.join("")},goog.style.setFloat=function(e,t){e.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=t},goog.style.getFloat=function(e){return e.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""},goog.style.getScrollbarWidth=function(e){var t=goog.dom.createElement("DIV");return e&&(t.className=e),t.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px",e=goog.dom.createElement("DIV"),goog.style.setSize(e,"200px","200px"),t.appendChild(e),goog.dom.appendChild(goog.dom.getDocument().body,t),e=t.offsetWidth-t.clientWidth,goog.dom.removeNode(t),e},goog.style.MATRIX_TRANSLATION_REGEX_=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/,goog.style.getCssTranslation=function(e){return(e=(e=goog.style.getComputedTransform(e))&&e.match(goog.style.MATRIX_TRANSLATION_REGEX_))?new goog.math.Coordinate(parseFloat(e[1]),parseFloat(e[2])):new goog.math.Coordinate(0,0)},goog.disposable={},goog.disposable.IDisposable=function(){},goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod,goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod,goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=Error().stack),goog.Disposable.instances_[goog.getUid(this)]=this),this.disposed_=this.disposed_,this.onDisposeCallbacks_=this.onDisposeCallbacks_},goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2},goog.Disposable.MONITORING_MODE=0,goog.Disposable.INCLUDE_STACK_ON_CREATION=!0,goog.Disposable.instances_={},goog.Disposable.getUndisposedObjects=function(){var e,t=[];for(e in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(e)&&t.push(goog.Disposable.instances_[Number(e)]);return t},goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}},goog.Disposable.prototype.disposed_=!1,goog.Disposable.prototype.isDisposed=function(){return this.disposed_},goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed,goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var e=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(e))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&this.onDisposeCallbacks_&&0<this.onDisposeCallbacks_.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete goog.Disposable.instances_[e]}},goog.Disposable.prototype.registerDisposable=function(e){this.addOnDisposeCallback(goog.partial(goog.dispose,e))},goog.Disposable.prototype.addOnDisposeCallback=function(e,t){this.disposed_?void 0!==t?e.call(t):e():(this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(void 0!==t?goog.bind(e,t):e))},goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()},goog.Disposable.isDisposed=function(e){return!(!e||"function"!=typeof e.isDisposed)&&e.isDisposed()},goog.dispose=function(e){e&&"function"==typeof e.dispose&&e.dispose()},goog.disposeAll=function(e){for(var t=0,n=arguments.length;t<n;++t){var o=arguments[t];goog.isArrayLike(o)?goog.disposeAll.apply(null,o):goog.dispose(o)}},goog.debug.entryPointRegistry={},goog.debug.EntryPointMonitor=function(){},goog.debug.entryPointRegistry.refList_=[],goog.debug.entryPointRegistry.monitors_=[],goog.debug.entryPointRegistry.monitorsMayExist_=!1,goog.debug.entryPointRegistry.register=function(e){if(goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=e,goog.debug.entryPointRegistry.monitorsMayExist_)for(var t=goog.debug.entryPointRegistry.monitors_,n=0;n<t.length;n++)e(goog.bind(t[n].wrap,t[n]))},goog.debug.entryPointRegistry.monitorAll=function(e){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var t=goog.bind(e.wrap,e),n=0;n<goog.debug.entryPointRegistry.refList_.length;n++)goog.debug.entryPointRegistry.refList_[n](t);goog.debug.entryPointRegistry.monitors_.push(e)},goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(e){var t=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(e==t[t.length-1],"Only the most recent monitor can be unwrapped."),e=goog.bind(e.unwrap,e);for(var n=0;n<goog.debug.entryPointRegistry.refList_.length;n++)goog.debug.entryPointRegistry.refList_[n](e);t.length--},goog.debug.errorcontext={},goog.debug.errorcontext.addErrorContext=function(e,t,n){e[goog.debug.errorcontext.CONTEXT_KEY_]||(e[goog.debug.errorcontext.CONTEXT_KEY_]={}),e[goog.debug.errorcontext.CONTEXT_KEY_][t]=n},goog.debug.errorcontext.getErrorContext=function(e){return e[goog.debug.errorcontext.CONTEXT_KEY_]||{}},goog.debug.errorcontext.CONTEXT_KEY_="__closure__error__context__984382",goog.debug.LOGGING_ENABLED=goog.DEBUG,goog.debug.FORCE_SLOPPY_STACKS=!1,goog.debug.catchErrors=function(i,e,t){var s=(t=t||goog.global).onerror,a=!!e;goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("535.3")&&(a=!a),t.onerror=function(e,t,n,o,r){return s&&s(e,t,n,o,r),i({message:e,fileName:t,line:n,lineNumber:n,col:o,error:r}),a}},goog.debug.expose=function(e,t){if(void 0===e)return"undefined";if(null==e)return"NULL";var n,o=[];for(n in e)if(t||!goog.isFunction(e[n])){var r=n+" = ";try{r+=e[n]}catch(e){r+="*** "+e+" ***"}o.push(r)}return o.join("\n")},goog.debug.deepExpose=function(e,i){function s(e,t){var n=t+"  ";try{if(void 0===e)a.push("undefined");else if(null===e)a.push("NULL");else if("string"==typeof e)a.push('"'+e.replace(/\n/g,"\n"+t)+'"');else if(goog.isFunction(e))a.push(String(e).replace(/\n/g,"\n"+t));else if(goog.isObject(e)){goog.hasUid(e)||l.push(e);var o=goog.getUid(e);if(c[o])a.push("*** reference loop detected (id="+o+") ***");else{for(var r in c[o]=!0,a.push("{"),e)!i&&goog.isFunction(e[r])||(a.push("\n"),a.push(n),a.push(r+" = "),s(e[r],n));a.push("\n"+t+"}"),delete c[o]}}else a.push(e)}catch(e){a.push("*** "+e+" ***")}}var a=[],l=[],c={};for(s(e,""),e=0;e<l.length;e++)goog.removeUid(l[e]);return a.join("")},goog.debug.exposeArray=function(e){for(var t=[],n=0;n<e.length;n++)goog.isArray(e[n])?t.push(goog.debug.exposeArray(e[n])):t.push(e[n]);return"[ "+t.join(", ")+" ]"},goog.debug.normalizeErrorObject=function(e){var t=goog.getObjectByName("window.location.href");if("string"==typeof(e=null==e?'Unknown Error of type "null/undefined"':e))return{message:e,name:"Unknown error",lineNumber:"Not available",fileName:t,stack:"Not available"};var n=!1;try{var o=e.lineNumber||e.line||"Not available"}catch(e){o="Not available",n=!0}try{var r=e.fileName||e.filename||e.sourceURL||goog.global.$googDebugFname||t}catch(e){r="Not available",n=!0}return!n&&e.lineNumber&&e.fileName&&e.stack&&e.message&&e.name?e:{message:t=null==(t=e.message)?e.constructor&&e.constructor instanceof Function?'Unknown Error of type "'+(e.constructor.name||goog.debug.getFunctionName(e.constructor))+'"':"Unknown Error of unknown type":t,name:e.name||"UnknownError",lineNumber:o,fileName:r,stack:e.stack||"Not available"}},goog.debug.enhanceError=function(e,t){if(e instanceof Error||(e=Error(e),Error.captureStackTrace&&Error.captureStackTrace(e,goog.debug.enhanceError)),e.stack||(e.stack=goog.debug.getStacktrace(goog.debug.enhanceError)),t){for(var n=0;e["message"+n];)++n;e["message"+n]=String(t)}return e},goog.debug.enhanceErrorWithContext=function(e,t){if(e=goog.debug.enhanceError(e),t)for(var n in t)goog.debug.errorcontext.addErrorContext(e,n,t[n]);return e},goog.debug.getStacktraceSimple=function(e){if(!goog.debug.FORCE_SLOPPY_STACKS){var t=goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);if(t)return t}for(var t=[],n=arguments.callee.caller,o=0;n&&(!e||o<e);){t.push(goog.debug.getFunctionName(n)),t.push("()\n");try{n=n.caller}catch(e){t.push("[exception trying to get caller]\n");break}if(++o>=goog.debug.MAX_STACK_DEPTH){t.push("[...long stack...]");break}}return e&&e<=o?t.push("[...reached max depth limit...]"):t.push("[end]"),t.join("")},goog.debug.MAX_STACK_DEPTH=50,goog.debug.getNativeStackTrace_=function(e){var t=Error();if(Error.captureStackTrace)return Error.captureStackTrace(t,e),String(t.stack);try{throw t}catch(e){t=e}return(e=t.stack)?String(e):null},goog.debug.getStacktrace=function(e){var t;return t=(t=goog.debug.FORCE_SLOPPY_STACKS?t:goog.debug.getNativeStackTrace_(e||goog.debug.getStacktrace))||goog.debug.getStacktraceHelper_(e||arguments.callee.caller,[])},goog.debug.getStacktraceHelper_=function(e,t){var n=[];if(goog.array.contains(t,e))n.push("[...circular reference...]");else if(e&&t.length<goog.debug.MAX_STACK_DEPTH){n.push(goog.debug.getFunctionName(e)+"(");for(var o=e.arguments,r=0;o&&r<o.length;r++){0<r&&n.push(", ");var i=o[r];switch(typeof i){case"object":i=i?"object":"null";break;case"string":break;case"number":i=String(i);break;case"boolean":i=i?"true":"false";break;case"function":i=(i=goog.debug.getFunctionName(i))||"[fn]";break;default:i=typeof i}40<i.length&&(i=i.substr(0,40)+"..."),n.push(i)}t.push(e),n.push(")\n");try{n.push(goog.debug.getStacktraceHelper_(e.caller,t))}catch(e){n.push("[exception trying to get caller]\n")}}else n.push(e?"[...long stack...]":"[end]");return n.join("")},goog.debug.getFunctionName=function(e){var t;return goog.debug.fnNameCache_[e]||(e=String(e),goog.debug.fnNameCache_[e])||(t=/function\s+([^\(]+)/m.exec(e),goog.debug.fnNameCache_[e]=t?t[1]:"[Anonymous]"),goog.debug.fnNameCache_[e]},goog.debug.makeWhitespaceVisible=function(e){return e.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")},goog.debug.runtimeType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.debug.fnNameCache_={},goog.debug.freezeInternal_=goog.DEBUG&&Object.freeze||function(e){return e},goog.debug.freeze=function(e){return goog.debug.freezeInternal_(e)},goog.events={},$jscomp.scope.purify=function(e){return{valueOf:e}.valueOf()},goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.maxTouchPoints&&!goog.global.navigator.msMaxTouchPoints),POINTER_EVENTS:"PointerEvent"in goog.global,MSPOINTER_EVENTS:"MSPointerEvent"in goog.global&&!(!goog.global.navigator||!goog.global.navigator.msPointerEnabled),PASSIVE_EVENTS:(0,$jscomp.scope.purify)(function(){if(!goog.global.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{goog.global.addEventListener("test",goog.nullFunction,t),goog.global.removeEventListener("test",goog.nullFunction,t)}catch(e){}return e})},goog.events.EventId=function(e){this.id=e},goog.events.EventId.prototype.toString=function(){return this.id},goog.events.Event=function(e,t){this.type=e instanceof goog.events.EventId?String(e):e,this.currentTarget=this.target=t,this.defaultPrevented=this.propagationStopped_=!1,this.returnValue_=!0},goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0},goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0,this.returnValue_=!1},goog.events.Event.stopPropagation=function(e){e.stopPropagation()},goog.events.Event.preventDefault=function(e){e.preventDefault()},goog.events.getVendorPrefixedName_=function(e){return goog.userAgent.WEBKIT?"webkit"+e:goog.userAgent.OPERA?"o"+e.toLowerCase():e.toLowerCase()},goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",AUXCLICK:"auxclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSECANCEL:"mousecancel",SELECTIONCHANGE:"selectionchange",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:"focusin",FOCUSOUT:"focusout",CHANGE:"change",RESET:"reset",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DEVICECHANGE:"devicechange",DEVICEMOTION:"devicemotion",DEVICEORIENTATION:"deviceorientation",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",CANPLAY:"canplay",CANPLAYTHROUGH:"canplaythrough",DURATIONCHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",LOADEDDATA:"loadeddata",LOADEDMETADATA:"loadedmetadata",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATECHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIMEUPDATE:"timeupdate",VOLUMECHANGE:"volumechange",WAITING:"waiting",SOURCEOPEN:"sourceopen",SOURCEENDED:"sourceended",SOURCECLOSED:"sourceclosed",ABORT:"abort",UPDATE:"update",UPDATESTART:"updatestart",UPDATEEND:"updateend",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",INSTALL:"install",ACTIVATE:"activate",FETCH:"fetch",FOREIGNFETCH:"foreignfetch",MESSAGEERROR:"messageerror",STATECHANGE:"statechange",UPDATEFOUND:"updatefound",CONTROLLERCHANGE:"controllerchange",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXT:"text",TEXTINPUT:goog.userAgent.IE?"textinput":"textInput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",BEFOREINPUT:"beforeinput",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified",BEFOREPRINT:"beforeprint",AFTERPRINT:"afterprint",BEFOREINSTALLPROMPT:"beforeinstallprompt",APPINSTALLED:"appinstalled"},goog.events.getPointerFallbackEventName_=function(e,t,n){return goog.events.BrowserFeature.POINTER_EVENTS?e:goog.events.BrowserFeature.MSPOINTER_EVENTS?t:n},goog.events.PointerFallbackEventType={POINTERDOWN:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERDOWN,goog.events.EventType.MSPOINTERDOWN,goog.events.EventType.MOUSEDOWN),POINTERUP:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERUP,goog.events.EventType.MSPOINTERUP,goog.events.EventType.MOUSEUP),POINTERCANCEL:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERCANCEL,goog.events.EventType.MSPOINTERCANCEL,goog.events.EventType.MOUSECANCEL),POINTERMOVE:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERMOVE,goog.events.EventType.MSPOINTERMOVE,goog.events.EventType.MOUSEMOVE),POINTEROVER:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTEROVER,goog.events.EventType.MSPOINTEROVER,goog.events.EventType.MOUSEOVER),POINTEROUT:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTEROUT,goog.events.EventType.MSPOINTEROUT,goog.events.EventType.MOUSEOUT),POINTERENTER:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERENTER,goog.events.EventType.MSPOINTERENTER,goog.events.EventType.MOUSEENTER),POINTERLEAVE:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERLEAVE,goog.events.EventType.MSPOINTERLEAVE,goog.events.EventType.MOUSELEAVE)},goog.events.PointerTouchFallbackEventType={POINTERDOWN:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERDOWN,goog.events.EventType.MSPOINTERDOWN,goog.events.EventType.TOUCHSTART),POINTERUP:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERUP,goog.events.EventType.MSPOINTERUP,goog.events.EventType.TOUCHEND),POINTERCANCEL:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERCANCEL,goog.events.EventType.MSPOINTERCANCEL,goog.events.EventType.TOUCHCANCEL),POINTERMOVE:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERMOVE,goog.events.EventType.MSPOINTERMOVE,goog.events.EventType.TOUCHMOVE)},goog.events.PointerAsMouseEventType={MOUSEDOWN:goog.events.PointerFallbackEventType.POINTERDOWN,MOUSEUP:goog.events.PointerFallbackEventType.POINTERUP,MOUSECANCEL:goog.events.PointerFallbackEventType.POINTERCANCEL,MOUSEMOVE:goog.events.PointerFallbackEventType.POINTERMOVE,MOUSEOVER:goog.events.PointerFallbackEventType.POINTEROVER,MOUSEOUT:goog.events.PointerFallbackEventType.POINTEROUT,MOUSEENTER:goog.events.PointerFallbackEventType.POINTERENTER,MOUSELEAVE:goog.events.PointerFallbackEventType.POINTERLEAVE},goog.events.MouseAsMouseEventType={MOUSEDOWN:goog.events.EventType.MOUSEDOWN,MOUSEUP:goog.events.EventType.MOUSEUP,MOUSECANCEL:goog.events.EventType.MOUSECANCEL,MOUSEMOVE:goog.events.EventType.MOUSEMOVE,MOUSEOVER:goog.events.EventType.MOUSEOVER,MOUSEOUT:goog.events.EventType.MOUSEOUT,MOUSEENTER:goog.events.EventType.MOUSEENTER,MOUSELEAVE:goog.events.EventType.MOUSELEAVE},goog.events.PointerAsTouchEventType={TOUCHCANCEL:goog.events.PointerTouchFallbackEventType.POINTERCANCEL,TOUCHEND:goog.events.PointerTouchFallbackEventType.POINTERUP,TOUCHMOVE:goog.events.PointerTouchFallbackEventType.POINTERMOVE,TOUCHSTART:goog.events.PointerTouchFallbackEventType.POINTERDOWN},goog.events.USE_LAYER_XY_AS_OFFSET_XY=!1,goog.events.BrowserEvent=function(e,t){goog.events.Event.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.platformModifierKey=!1,this.pointerId=0,this.pointerType="",this.event_=null,e&&this.init(e,t)},goog.inherits(goog.events.BrowserEvent,goog.events.Event),goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2},goog.events.BrowserEvent.PointerType={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"},goog.events.BrowserEvent.IEButtonMap=goog.debug.freeze([1,4,2]),goog.events.BrowserEvent.IE_BUTTON_MAP=goog.events.BrowserEvent.IEButtonMap,goog.events.BrowserEvent.IE_POINTER_TYPE_MAP=goog.debug.freeze({2:goog.events.BrowserEvent.PointerType.TOUCH,3:goog.events.BrowserEvent.PointerType.PEN,4:goog.events.BrowserEvent.PointerType.MOUSE}),goog.events.BrowserEvent.prototype.init=function(e,t){var n=this.type=e.type,o=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.currentTarget=t,(t=e.relatedTarget)?goog.userAgent.GECKO&&!goog.reflect.canAccessProperty(t,"nodeName")&&(t=null):n==goog.events.EventType.MOUSEOVER?t=e.fromElement:n==goog.events.EventType.MOUSEOUT&&(t=e.toElement),this.relatedTarget=t,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(goog.events.USE_LAYER_XY_AS_OFFSET_XY?(this.offsetX=void 0!==e.layerX?e.layerX:e.offsetX,this.offsetY=void 0!==e.layerY?e.layerY:e.offsetY):(this.offsetX=goog.userAgent.WEBKIT||void 0!==e.offsetX?e.offsetX:e.layerX,this.offsetY=goog.userAgent.WEBKIT||void 0!==e.offsetY?e.offsetY:e.layerY),this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.charCode=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.platformModifierKey=goog.userAgent.MAC?e.metaKey:e.ctrlKey,this.pointerId=e.pointerId||0,this.pointerType=goog.events.BrowserEvent.getPointerType_(e),this.state=e.state,(this.event_=e).defaultPrevented&&this.preventDefault()},goog.events.BrowserEvent.prototype.isButton=function(e){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==e:"click"==this.type?e==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IE_BUTTON_MAP[e])},goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)},goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this),this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0},goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var e=this.event_;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}},goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_},goog.events.BrowserEvent.getPointerType_=function(e){return"string"==typeof e.pointerType?e.pointerType:goog.events.BrowserEvent.IE_POINTER_TYPE_MAP[e.pointerType]||""},goog.events.Listenable=function(){},goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1e6*Math.random()|0),goog.events.Listenable.addImplementation=function(e){e.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0},goog.events.Listenable.isImplementedBy=function(e){return!(!e||!e[goog.events.Listenable.IMPLEMENTED_BY_PROP])},goog.events.ListenableKey=function(){},goog.events.ListenableKey.counter_=0,goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_},goog.events.Listener=function(e,t,n,o,r,i){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack),this.listener=e,this.proxy=t,this.src=n,this.type=o,this.capture=!!r,this.handler=i,this.key=goog.events.ListenableKey.reserveKey(),this.removed=this.callOnce=!1},goog.events.Listener.ENABLE_MONITORING=!1,goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0,this.handler=this.src=this.proxy=this.listener=null},goog.events.ListenerMap=function(e){this.src=e,this.listeners={},this.typeCount_=0},goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_},goog.events.ListenerMap.prototype.getListenerCount=function(){var e,t=0;for(e in this.listeners)t+=this.listeners[e].length;return t},goog.events.ListenerMap.prototype.add=function(e,t,n,o,r){var i=e.toString(),s=((e=this.listeners[i])||(e=this.listeners[i]=[],this.typeCount_++),goog.events.ListenerMap.findListenerIndex_(e,t,o,r));return-1<s?(t=e[s],n||(t.callOnce=!1)):((t=new goog.events.Listener(t,null,this.src,i,!!o,r)).callOnce=n,e.push(t)),t},goog.events.ListenerMap.prototype.remove=function(e,t,n,o){var r;return(e=e.toString())in this.listeners&&(r=this.listeners[e],-1<(t=goog.events.ListenerMap.findListenerIndex_(r,t,n,o)))&&(r[t].markAsRemoved(),goog.array.removeAt(r,t),0==r.length&&(delete this.listeners[e],this.typeCount_--),!0)},goog.events.ListenerMap.prototype.removeByKey=function(e){var t,n=e.type;return n in this.listeners&&((t=goog.array.remove(this.listeners[n],e))&&(e.markAsRemoved(),0==this.listeners[n].length)&&(delete this.listeners[n],this.typeCount_--),t)},goog.events.ListenerMap.prototype.removeAll=function(e){e=e&&e.toString();var t,n=0;for(t in this.listeners)if(!e||t==e){for(var o=this.listeners[t],r=0;r<o.length;r++)++n,o[r].markAsRemoved();delete this.listeners[t],this.typeCount_--}return n},goog.events.ListenerMap.prototype.getListeners=function(e,t){var n=[];if(e=this.listeners[e.toString()])for(var o=0;o<e.length;++o){var r=e[o];r.capture==t&&n.push(r)}return n},goog.events.ListenerMap.prototype.getListener=function(e,t,n,o){var r=-1;return-1<(r=(e=this.listeners[e.toString()])?goog.events.ListenerMap.findListenerIndex_(e,t,n,o):r)?e[r]:null},goog.events.ListenerMap.prototype.hasListener=function(e,n){var o=void 0!==e,r=o?e.toString():"",i=void 0!==n;return goog.object.some(this.listeners,function(e,t){for(t=0;t<e.length;++t)if(!(o&&e[t].type!=r||i&&e[t].capture!=n))return!0;return!1})},goog.events.ListenerMap.findListenerIndex_=function(e,t,n,o){for(var r=0;r<e.length;++r){var i=e[r];if(!i.removed&&i.listener==t&&i.capture==!!n&&i.handler==o)return r}return-1},goog.events.LISTENER_MAP_PROP_="closure_lm_"+(1e6*Math.random()|0),goog.events.onString_="on",goog.events.onStringMap_={},goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2},goog.events.CAPTURE_SIMULATION_MODE=2,goog.events.listenerCountEstimate_=0,goog.events.listen=function(e,t,n,o,r){if(o&&o.once)return goog.events.listenOnce(e,t,n,o,r);if(goog.isArray(t)){for(var i=0;i<t.length;i++)goog.events.listen(e,t[i],n,o,r);return null}return n=goog.events.wrapListener(n),goog.events.Listenable.isImplementedBy(e)?(o=goog.isObject(o)?!!o.capture:!!o,e.listen(t,n,o,r)):goog.events.listen_(e,t,n,!1,o,r)},goog.events.listen_=function(e,t,n,o,r,i){if(!t)throw Error("Invalid event type");var s=goog.isObject(r)?!!r.capture:!!r;if(s&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL)return goog.asserts.fail("Can not register capture listener in IE8-."),null;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT)return null}var a=goog.events.getListenerMap_(e);if(a||(e[goog.events.LISTENER_MAP_PROP_]=a=new goog.events.ListenerMap(e)),!(n=a.add(t,n,o,s,i)).proxy){if(o=goog.events.getProxy(),(n.proxy=o).src=e,o.listener=n,e.addEventListener)void 0===(r=goog.events.BrowserFeature.PASSIVE_EVENTS?r:s)&&(r=!1),e.addEventListener(t.toString(),o,r);else if(e.attachEvent)e.attachEvent(goog.events.getOnString_(t.toString()),o);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");goog.asserts.assert("change"===t,"MediaQueryList only has a change event"),e.addListener(o)}goog.events.listenerCountEstimate_++}return n},goog.events.getProxy=function(){var t=goog.events.handleBrowserEvent_,n=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(e){return t.call(n.src,n.listener,e)}:function(e){if(!(e=t.call(n.src,n.listener,e)))return e};return n},goog.events.listenOnce=function(e,t,n,o,r){if(goog.isArray(t)){for(var i=0;i<t.length;i++)goog.events.listenOnce(e,t[i],n,o,r);return null}return n=goog.events.wrapListener(n),goog.events.Listenable.isImplementedBy(e)?(o=goog.isObject(o)?!!o.capture:!!o,e.listenOnce(t,n,o,r)):goog.events.listen_(e,t,n,!0,o,r)},goog.events.listenWithWrapper=function(e,t,n,o,r){t.listen(e,n,o,r)},goog.events.unlisten=function(e,t,n,o,r){if(goog.isArray(t)){for(var i=0;i<t.length;i++)goog.events.unlisten(e,t[i],n,o,r);return null}return o=goog.isObject(o)?!!o.capture:!!o,n=goog.events.wrapListener(n),goog.events.Listenable.isImplementedBy(e)?e.unlisten(t,n,o,r):!!e&&!(!(e=goog.events.getListenerMap_(e))||!(t=e.getListener(t,n,o,r)))&&goog.events.unlistenByKey(t)},goog.events.unlistenByKey=function(e){var t,n,o;return!("number"==typeof e||!e||e.removed)&&(t=e.src,goog.events.Listenable.isImplementedBy(t)?t.unlistenByKey(e):(n=e.type,o=e.proxy,t.removeEventListener?t.removeEventListener(n,o,e.capture):t.detachEvent?t.detachEvent(goog.events.getOnString_(n),o):t.addListener&&t.removeListener&&t.removeListener(o),goog.events.listenerCountEstimate_--,(n=goog.events.getListenerMap_(t))?(n.removeByKey(e),0==n.getTypeCount()&&(n.src=null,t[goog.events.LISTENER_MAP_PROP_]=null)):e.markAsRemoved(),!0))},goog.events.unlistenWithWrapper=function(e,t,n,o,r){t.unlisten(e,n,o,r)},goog.events.removeAll=function(e,t){if(!e)return 0;if(goog.events.Listenable.isImplementedBy(e))return e.removeAllListeners(t);if(!(e=goog.events.getListenerMap_(e)))return 0;var n,o=0;for(n in t=t&&t.toString(),e.listeners)if(!t||n==t)for(var r=e.listeners[n].concat(),i=0;i<r.length;++i)goog.events.unlistenByKey(r[i])&&++o;return o},goog.events.getListeners=function(e,t,n){return goog.events.Listenable.isImplementedBy(e)||(e=e&&goog.events.getListenerMap_(e))?e.getListeners(t,n):[]},goog.events.getListener=function(e,t,n,o,r){return n=goog.events.wrapListener(n),o=!!o,goog.events.Listenable.isImplementedBy(e)||(e=e&&goog.events.getListenerMap_(e))?e.getListener(t,n,o,r):null},goog.events.hasListener=function(e,t,n){return(goog.events.Listenable.isImplementedBy(e)||!!(e=goog.events.getListenerMap_(e)))&&e.hasListener(t,n)},goog.events.expose=function(e){var t,n=[];for(t in e)e[t]&&e[t].id?n.push(t+" = "+e[t]+" ("+e[t].id+")"):n.push(t+" = "+e[t]);return n.join("\n")},goog.events.getOnString_=function(e){return e in goog.events.onStringMap_?goog.events.onStringMap_[e]:goog.events.onStringMap_[e]=goog.events.onString_+e},goog.events.fireListeners=function(e,t,n,o){return goog.events.Listenable.isImplementedBy(e)?e.fireListeners(t,n,o):goog.events.fireListeners_(e,t,n,o)},goog.events.fireListeners_=function(e,t,n,o){var r=!0;if((e=goog.events.getListenerMap_(e))&&(t=e.listeners[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var i=t[e];i&&i.capture==n&&!i.removed&&(i=goog.events.fireListener(i,o),r=r&&!1!==i)}return r},goog.events.fireListener=function(e,t){var n=e.listener,o=e.handler||e.src;return e.callOnce&&goog.events.unlistenByKey(e),n.call(o,t)},goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_},goog.events.dispatchEvent=function(e,t){return goog.asserts.assert(goog.events.Listenable.isImplementedBy(e),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance."),e.dispatchEvent(t)},goog.events.protectBrowserEventEntryPoint=function(e){goog.events.handleBrowserEvent_=e.protectEntryPoint(goog.events.handleBrowserEvent_)},goog.events.handleBrowserEvent_=function(e,t){if(e.removed)return!0;if(goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT)return goog.events.fireListener(e,new goog.events.BrowserEvent(t,this));var n=t||goog.getObjectByName("window.event"),o=(t=new goog.events.BrowserEvent(n,this),!0);if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(n)){goog.events.markIeEvent_(n);for(var n=[],r=t.currentTarget;r;r=r.parentNode)n.push(r);for(e=e.type,r=n.length-1;!t.propagationStopped_&&0<=r;r--){t.currentTarget=n[r];var i=goog.events.fireListeners_(n[r],e,!0,t),o=o&&i}for(r=0;!t.propagationStopped_&&r<n.length;r++)t.currentTarget=n[r],i=goog.events.fireListeners_(n[r],e,!1,t),o=o&&i}}else o=goog.events.fireListener(e,t);return o},goog.events.markIeEvent_=function(e){var t=!1;if(0==e.keyCode)try{return void(e.keyCode=-1)}catch(e){t=!0}!t&&null!=e.returnValue||(e.returnValue=!0)},goog.events.isMarkedIeEvent_=function(e){return e.keyCode<0||null!=e.returnValue},goog.events.uniqueIdCounter_=0,goog.events.getUniqueId=function(e){return e+"_"+goog.events.uniqueIdCounter_++},goog.events.getListenerMap_=function(e){return(e=e[goog.events.LISTENER_MAP_PROP_])instanceof goog.events.ListenerMap?e:null},goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1e9*Math.random()>>>0),goog.events.wrapListener=function(t){return goog.asserts.assert(t,"Listener can not be null."),goog.isFunction(t)?t:(goog.asserts.assert(t.handleEvent,"An object listener must have handleEvent method."),t[goog.events.LISTENER_WRAPPER_PROP_]||(t[goog.events.LISTENER_WRAPPER_PROP_]=function(e){return t.handleEvent(e)}),t[goog.events.LISTENER_WRAPPER_PROP_])},goog.debug.entryPointRegistry.register(function(e){goog.events.handleBrowserEvent_=e(goog.events.handleBrowserEvent_)}),goog.events.EventHandler=function(e){goog.Disposable.call(this),this.handler_=e,this.keys_={}},goog.inherits(goog.events.EventHandler,goog.Disposable),goog.events.EventHandler.typeArray_=[],goog.events.EventHandler.prototype.listen=function(e,t,n,o){return this.listen_(e,t,n,o)},goog.events.EventHandler.prototype.listenWithScope=function(e,t,n,o,r){return this.listen_(e,t,n,o,r)},goog.events.EventHandler.prototype.listen_=function(e,t,n,o,r){goog.isArray(t)||(t&&(goog.events.EventHandler.typeArray_[0]=t.toString()),t=goog.events.EventHandler.typeArray_);for(var i=0;i<t.length;i++){var s=goog.events.listen(e,t[i],n||this.handleEvent,o||!1,r||this.handler_||this);if(!s)break;this.keys_[s.key]=s}return this},goog.events.EventHandler.prototype.listenOnce=function(e,t,n,o){return this.listenOnce_(e,t,n,o)},goog.events.EventHandler.prototype.listenOnceWithScope=function(e,t,n,o,r){return this.listenOnce_(e,t,n,o,r)},goog.events.EventHandler.prototype.listenOnce_=function(e,t,n,o,r){if(goog.isArray(t))for(var i=0;i<t.length;i++)this.listenOnce_(e,t[i],n,o,r);else{if(!(e=goog.events.listenOnce(e,t,n||this.handleEvent,o,r||this.handler_||this)))return this;this.keys_[e.key]=e}return this},goog.events.EventHandler.prototype.listenWithWrapper=function(e,t,n,o){return this.listenWithWrapper_(e,t,n,o)},goog.events.EventHandler.prototype.listenWithWrapperAndScope=function(e,t,n,o,r){return this.listenWithWrapper_(e,t,n,o,r)},goog.events.EventHandler.prototype.listenWithWrapper_=function(e,t,n,o,r){return t.listen(e,n,o,r||this.handler_||this,this),this},goog.events.EventHandler.prototype.getListenerCount=function(){var e,t=0;for(e in this.keys_)Object.prototype.hasOwnProperty.call(this.keys_,e)&&t++;return t},goog.events.EventHandler.prototype.unlisten=function(e,t,n,o,r){if(goog.isArray(t))for(var i=0;i<t.length;i++)this.unlisten(e,t[i],n,o,r);else o=goog.isObject(o)?!!o.capture:!!o,(e=goog.events.getListener(e,t,n||this.handleEvent,o,r||this.handler_||this))&&(goog.events.unlistenByKey(e),delete this.keys_[e.key]);return this},goog.events.EventHandler.prototype.unlistenWithWrapper=function(e,t,n,o,r){return t.unlisten(e,n,o,r||this.handler_||this,this),this},goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,function(e,t){this.keys_.hasOwnProperty(t)&&goog.events.unlistenByKey(e)},this),this.keys_={}},goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this),this.removeAll()},goog.events.EventHandler.prototype.handleEvent=function(e){throw Error("EventHandler.handleEvent not implemented")},goog.events.EventTarget=function(){goog.Disposable.call(this),this.eventTargetListeners_=new goog.events.ListenerMap(this),(this.actualEventTarget_=this).parentEventTarget_=null},goog.inherits(goog.events.EventTarget,goog.Disposable),goog.events.Listenable.addImplementation(goog.events.EventTarget),goog.events.EventTarget.MAX_ANCESTORS_=1e3,goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_},goog.events.EventTarget.prototype.setParentEventTarget=function(e){this.parentEventTarget_=e},goog.events.EventTarget.prototype.addEventListener=function(e,t,n,o){goog.events.listen(this,e,t,n,o)},goog.events.EventTarget.prototype.removeEventListener=function(e,t,n,o){goog.events.unlisten(this,e,t,n,o)},goog.events.EventTarget.prototype.dispatchEvent=function(e){this.assertInitialized_();var t=this.getParentEventTarget();if(t)for(var n=[],o=1;t;t=t.getParentEventTarget())n.push(t),goog.asserts.assert(++o<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop");return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,e,n)},goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this),this.removeAllListeners(),this.parentEventTarget_=null},goog.events.EventTarget.prototype.listen=function(e,t,n,o){return this.assertInitialized_(),this.eventTargetListeners_.add(String(e),t,!1,n,o)},goog.events.EventTarget.prototype.listenOnce=function(e,t,n,o){return this.eventTargetListeners_.add(String(e),t,!0,n,o)},goog.events.EventTarget.prototype.unlisten=function(e,t,n,o){return this.eventTargetListeners_.remove(String(e),t,n,o)},goog.events.EventTarget.prototype.unlistenByKey=function(e){return this.eventTargetListeners_.removeByKey(e)},goog.events.EventTarget.prototype.removeAllListeners=function(e){return this.eventTargetListeners_?this.eventTargetListeners_.removeAll(e):0},goog.events.EventTarget.prototype.fireListeners=function(e,t,n){if(!(e=this.eventTargetListeners_.listeners[String(e)]))return!0;e=e.concat();for(var o=!0,r=0;r<e.length;++r){var i,s,a=e[r];a&&!a.removed&&a.capture==t&&(i=a.listener,s=a.handler||a.src,a.callOnce&&this.unlistenByKey(a),o=!1!==i.call(s,n)&&o)}return o&&0!=n.returnValue_},goog.events.EventTarget.prototype.getListeners=function(e,t){return this.eventTargetListeners_.getListeners(String(e),t)},goog.events.EventTarget.prototype.getListener=function(e,t,n,o){return this.eventTargetListeners_.getListener(String(e),t,n,o)},goog.events.EventTarget.prototype.hasListener=function(e,t){return this.eventTargetListeners_.hasListener(void 0!==e?String(e):void 0,t)},goog.events.EventTarget.prototype.setTargetForTesting=function(e){this.actualEventTarget_=e},goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},goog.events.EventTarget.dispatchEventInternal_=function(e,t,n){var o=t.type||t;if("string"==typeof t?t=new goog.events.Event(t,e):t instanceof goog.events.Event?t.target=t.target||e:(s=t,t=new goog.events.Event(o,e),goog.object.extend(t,s)),s=!0,n)for(var r=n.length-1;!t.propagationStopped_&&0<=r;r--)var i=t.currentTarget=n[r],s=i.fireListeners(o,!0,t)&&s;if(t.propagationStopped_||(s=(i=t.currentTarget=e).fireListeners(o,!0,t)&&s,t.propagationStopped_)||(s=i.fireListeners(o,!1,t)&&s),n)for(r=0;!t.propagationStopped_&&r<n.length;r++)s=(i=t.currentTarget=n[r]).fireListeners(o,!1,t)&&s;return s},goog.ui={},goog.ui.IdGenerator=function(){},goog.addSingletonGetter(goog.ui.IdGenerator),goog.ui.IdGenerator.prototype.nextId_=0,goog.ui.IdGenerator.prototype.idPrefix_="",goog.ui.IdGenerator.prototype.setIdPrefix=function(e){this.idPrefix_=e},goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return this.idPrefix_+":"+(this.nextId_++).toString(36)},goog.ui.Component=function(e){goog.events.EventTarget.call(this),this.dom_=e||goog.dom.getDomHelper(),this.rightToLeft_=goog.ui.Component.defaultRightToLeft_,this.id_=null,this.inDocument_=!1,this.element_=null,this.googUiComponentHandler_=void 0,this.childIndex_=this.children_=this.parent_=this.model_=null,this.pointerEventsEnabled_=this.wasDecorated_=!1},goog.inherits(goog.ui.Component,goog.events.EventTarget),goog.ui.Component.ALLOW_DETACHED_DECORATION=!1,goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance(),goog.ui.Component.DEFAULT_BIDI_DIR=0,goog.ui.Component.defaultRightToLeft_=1!=goog.ui.Component.DEFAULT_BIDI_DIR&&(-1==goog.ui.Component.DEFAULT_BIDI_DIR||null),goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"},goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"},goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64},goog.ui.Component.getStateTransitionEvent=function(e,t){switch(e){case goog.ui.Component.State.DISABLED:return t?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return t?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return t?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return t?goog.ui.Component.EventType.SELECT:goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return t?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return t?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return t?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID)},goog.ui.Component.setDefaultRightToLeft=function(e){goog.ui.Component.defaultRightToLeft_=e},goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())},goog.ui.Component.prototype.setId=function(e){this.parent_&&this.parent_.childIndex_&&(goog.object.remove(this.parent_.childIndex_,this.id_),goog.object.add(this.parent_.childIndex_,e,this)),this.id_=e},goog.ui.Component.prototype.getElement=function(){return this.element_},goog.ui.Component.prototype.getElementStrict=function(){var e=this.element_;return goog.asserts.assert(e,"Can not call getElementStrict before rendering/decorating."),e},goog.ui.Component.prototype.setElementInternal=function(e){this.element_=e},goog.ui.Component.prototype.getElementsByClass=function(e){return this.element_?this.dom_.getElementsByClass(e,this.element_):[]},goog.ui.Component.prototype.getElementByClass=function(e){return this.element_?this.dom_.getElementByClass(e,this.element_):null},goog.ui.Component.prototype.getRequiredElementByClass=function(e){var t=this.getElementByClass(e);return goog.asserts.assert(t,"Expected element in component with class: %s",e),t},goog.ui.Component.prototype.getHandler=function(){return this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this)),goog.asserts.assert(this.googUiComponentHandler_)},goog.ui.Component.prototype.setParent=function(e){if(this==e)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(e&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=e)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=e,goog.ui.Component.superClass_.setParentEventTarget.call(this,e)},goog.ui.Component.prototype.getParent=function(){return this.parent_},goog.ui.Component.prototype.setParentEventTarget=function(e){if(this.parent_&&this.parent_!=e)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,e)},goog.ui.Component.prototype.getDomHelper=function(){return this.dom_},goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_},goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("DIV")},goog.ui.Component.prototype.render=function(e){this.render_(e)},goog.ui.Component.prototype.renderBefore=function(e){this.render_(e.parentNode,e)},goog.ui.Component.prototype.render_=function(e,t){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.element_||this.createDom(),e?e.insertBefore(this.element_,t||null):this.dom_.getDocument().body.appendChild(this.element_),this.parent_&&!this.parent_.isInDocument()||this.enterDocument()},goog.ui.Component.prototype.decorate=function(e){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(!e||!this.canDecorate(e))throw Error(goog.ui.Component.Error.DECORATE_INVALID);this.wasDecorated_=!0;var t=goog.dom.getOwnerDocument(e);this.dom_&&this.dom_.getDocument()==t||(this.dom_=goog.dom.getDomHelper(e)),this.decorateInternal(e),goog.ui.Component.ALLOW_DETACHED_DECORATION&&!goog.dom.contains(t,e)||this.enterDocument()},goog.ui.Component.prototype.canDecorate=function(e){return!0},goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_},goog.ui.Component.prototype.decorateInternal=function(e){this.element_=e},goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0,this.forEachChild(function(e){!e.isInDocument()&&e.getElement()&&e.enterDocument()})},goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(e){e.isInDocument()&&e.exitDocument()}),this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll(),this.inDocument_=!1},goog.ui.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument(),this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_),this.forEachChild(function(e){e.dispose()}),!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_),this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null,goog.ui.Component.superClass_.disposeInternal.call(this)},goog.ui.Component.prototype.makeId=function(e){return this.getId()+"."+e},goog.ui.Component.prototype.makeIds=function(e){var t,n={};for(t in e)n[t]=this.makeId(e[t]);return n},goog.ui.Component.prototype.getModel=function(){return this.model_},goog.ui.Component.prototype.setModel=function(e){this.model_=e},goog.ui.Component.prototype.getFragmentFromId=function(e){return e.substring(this.getId().length+1)},goog.ui.Component.prototype.getElementByFragment=function(e){if(this.inDocument_)return this.dom_.getElement(this.makeId(e));throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT)},goog.ui.Component.prototype.addChild=function(e,t){this.addChildAt(e,this.getChildCount(),t)},goog.ui.Component.prototype.addChildAt=function(e,t,n){if(goog.asserts.assert(!!e,"Provided element must not be null."),e.inDocument_&&(n||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(t<0||t>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);this.childIndex_&&this.children_||(this.childIndex_={},this.children_=[]),e.getParent()==this?(goog.object.set(this.childIndex_,e.getId(),e),goog.array.remove(this.children_,e)):goog.object.add(this.childIndex_,e.getId(),e),e.setParent(this),goog.array.insertAt(this.children_,e,t),e.inDocument_&&this.inDocument_&&e.getParent()==this?(t=(n=this.getContentElement()).childNodes[t]||null)!=e.getElement()&&n.insertBefore(e.getElement(),t):n?(this.element_||this.createDom(),t=this.getChildAt(t+1),e.render_(this.getContentElement(),t?t.element_:null)):this.inDocument_&&!e.inDocument_&&e.element_&&e.element_.parentNode&&e.element_.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&e.enterDocument()},goog.ui.Component.prototype.getContentElement=function(){return this.element_},goog.ui.Component.prototype.isRightToLeft=function(){return null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body)),this.rightToLeft_},goog.ui.Component.prototype.setRightToLeft=function(e){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=e},goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length},goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0},goog.ui.Component.prototype.getChildIds=function(){var t=[];return this.forEachChild(function(e){t.push(e.getId())}),t},goog.ui.Component.prototype.getChild=function(e){return this.childIndex_&&e&&goog.object.get(this.childIndex_,e)||null},goog.ui.Component.prototype.getChildAt=function(e){return this.children_&&this.children_[e]||null},goog.ui.Component.prototype.forEachChild=function(e,t){this.children_&&goog.array.forEach(this.children_,e,t)},goog.ui.Component.prototype.indexOfChild=function(e){return this.children_&&e?goog.array.indexOf(this.children_,e):-1},goog.ui.Component.prototype.removeChild=function(e,t){var n;if(e&&(n="string"==typeof e?e:e.getId(),e=this.getChild(n),n)&&e&&(goog.object.remove(this.childIndex_,n),goog.array.remove(this.children_,e),t&&(e.exitDocument(),e.element_)&&goog.dom.removeNode(e.element_),e.setParent(null)),e)return e;throw Error(goog.ui.Component.Error.NOT_OUR_CHILD)},goog.ui.Component.prototype.removeChildAt=function(e,t){return this.removeChild(this.getChildAt(e),t)},goog.ui.Component.prototype.removeChildren=function(e){for(var t=[];this.hasChildren();)t.push(this.removeChildAt(0,e));return t},goog.ui.Component.prototype.pointerEventsEnabled=function(){return this.pointerEventsEnabled_},goog.ui.Component.prototype.setPointerEventsEnabled=function(e){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.pointerEventsEnabled_=e},goog.ui.ControlRenderer=function(){},goog.addSingletonGetter(goog.ui.ControlRenderer),goog.tagUnsealableClass(goog.ui.ControlRenderer),goog.ui.ControlRenderer.getCustomRenderer=function(e,t){return(e=new e).getCssClass=function(){return t},e},goog.ui.ControlRenderer.CSS_CLASS="goog-control",goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS=[],goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_=goog.object.create(goog.a11y.aria.Role.BUTTON,goog.a11y.aria.State.PRESSED,goog.a11y.aria.Role.CHECKBOX,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.MENU_ITEM,goog.a11y.aria.State.SELECTED,goog.a11y.aria.Role.MENU_ITEM_CHECKBOX,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.MENU_ITEM_RADIO,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.RADIO,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.TAB,goog.a11y.aria.State.SELECTED,goog.a11y.aria.Role.TREEITEM,goog.a11y.aria.State.SELECTED),goog.ui.ControlRenderer.prototype.getAriaRole=function(){},goog.ui.ControlRenderer.prototype.createDom=function(e){return e.getDomHelper().createDom("DIV",this.getClassNames(e).join(" "),e.getContent())},goog.ui.ControlRenderer.prototype.getContentElement=function(e){return e},goog.ui.ControlRenderer.prototype.enableClassName=function(e,t,n){var o;(e=e.getElement?e.getElement():e)&&(o=[t],goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&(o=this.getAppliedCombinedClassNames_(goog.dom.classlist.get(e),t)).push(t),goog.dom.classlist.enableAll(e,o,n))},goog.ui.ControlRenderer.prototype.enableExtraClassName=function(e,t,n){this.enableClassName(e,t,n)},goog.ui.ControlRenderer.prototype.canDecorate=function(e){return!0},goog.ui.ControlRenderer.prototype.decorate=function(e,t){t.id&&e.setId(t.id);var n,o=this.getContentElement(t),r=(o&&o.firstChild?e.setContentInternal(o.firstChild.nextSibling?goog.array.clone(o.childNodes):o.firstChild):e.setContentInternal(null),0),i=this.getCssClass(),s=this.getStructuralCssClass(),a=!1,l=!1,c=!1,u=goog.array.toArray(goog.dom.classlist.get(t));return goog.array.forEach(u,function(e){a||e!=i?l||e!=s?r|=this.getStateFromClass(e):l=!0:(a=!0,s==i&&(l=!0)),this.getStateFromClass(e)==goog.ui.Component.State.DISABLED&&(goog.asserts.assertElement(o),goog.dom.isFocusableTabIndex(o))&&goog.dom.setFocusableTabIndex(o,!1)},this),e.setStateInternal(r),a||(u.push(i),s==i&&(l=!0)),l||u.push(s),(e=e.getExtraClassNames())&&u.push.apply(u,e),goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&0<(n=this.getAppliedCombinedClassNames_(u)).length&&(u.push.apply(u,n),c=!0),a&&l&&!e&&!c||goog.dom.classlist.set(t,u.join(" ")),t},goog.ui.ControlRenderer.prototype.initializeDom=function(e){e.isRightToLeft()&&this.setRightToLeft(e.getElement(),!0),e.isEnabled()&&this.setFocusable(e,e.isVisible())},goog.ui.ControlRenderer.prototype.setAriaRole=function(e,t){(t=t||this.getAriaRole())&&(goog.asserts.assert(e,"The element passed as a first parameter cannot be null."),t!=goog.a11y.aria.getRole(e))&&goog.a11y.aria.setRole(e,t)},goog.ui.ControlRenderer.prototype.setAriaStates=function(e,t){goog.asserts.assert(e),goog.asserts.assert(t);var n=e.getAriaLabel();null!=n&&this.setAriaLabel(t,n),e.isVisible()||goog.a11y.aria.setState(t,goog.a11y.aria.State.HIDDEN,!e.isVisible()),e.isEnabled()||this.updateAriaState(t,goog.ui.Component.State.DISABLED,!e.isEnabled()),e.isSupportedState(goog.ui.Component.State.SELECTED)&&this.updateAriaState(t,goog.ui.Component.State.SELECTED,e.isSelected()),e.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(t,goog.ui.Component.State.CHECKED,e.isChecked()),e.isSupportedState(goog.ui.Component.State.OPENED)&&this.updateAriaState(t,goog.ui.Component.State.OPENED,e.isOpen())},goog.ui.ControlRenderer.prototype.setAriaLabel=function(e,t){goog.a11y.aria.setLabel(e,t)},goog.ui.ControlRenderer.prototype.setAllowTextSelection=function(e,t){goog.style.setUnselectable(e,!t,!goog.userAgent.IE&&!goog.userAgent.OPERA)},goog.ui.ControlRenderer.prototype.setRightToLeft=function(e,t){this.enableClassName(e,this.getStructuralCssClass()+"-rtl",t)},goog.ui.ControlRenderer.prototype.isFocusable=function(e){var t;return!(!e.isSupportedState(goog.ui.Component.State.FOCUSED)||!(t=e.getKeyEventTarget()))&&goog.dom.isFocusableTabIndex(t)},goog.ui.ControlRenderer.prototype.setFocusable=function(e,t){var n;if(e.isSupportedState(goog.ui.Component.State.FOCUSED)&&(n=e.getKeyEventTarget())){if(!t&&e.isFocused()){try{n.blur()}catch(e){}e.isFocused()&&e.handleBlur(null)}goog.dom.isFocusableTabIndex(n)!=t&&goog.dom.setFocusableTabIndex(n,t)}},goog.ui.ControlRenderer.prototype.setVisible=function(e,t){goog.style.setElementShown(e,t),e&&goog.a11y.aria.setState(e,goog.a11y.aria.State.HIDDEN,!t)},goog.ui.ControlRenderer.prototype.setState=function(e,t,n){var o,r=e.getElement();r&&((o=this.getClassForState(t))&&this.enableClassName(e,o,n),this.updateAriaState(r,t,n))},goog.ui.ControlRenderer.prototype.updateAriaState=function(e,t,n){goog.ui.ControlRenderer.ariaAttributeMap_||(goog.ui.ControlRenderer.ariaAttributeMap_=goog.object.create(goog.ui.Component.State.DISABLED,goog.a11y.aria.State.DISABLED,goog.ui.Component.State.SELECTED,goog.a11y.aria.State.SELECTED,goog.ui.Component.State.CHECKED,goog.a11y.aria.State.CHECKED,goog.ui.Component.State.OPENED,goog.a11y.aria.State.EXPANDED)),goog.asserts.assert(e,"The element passed as a first parameter cannot be null."),(t=goog.ui.ControlRenderer.getAriaStateForAriaRole_(e,goog.ui.ControlRenderer.ariaAttributeMap_[t]))&&goog.a11y.aria.setState(e,t,n)},goog.ui.ControlRenderer.getAriaStateForAriaRole_=function(e,t){return(e=goog.a11y.aria.getRole(e))&&(e=goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_[e]||t,goog.ui.ControlRenderer.isAriaState_(t))?e:t},goog.ui.ControlRenderer.isAriaState_=function(e){return e==goog.a11y.aria.State.CHECKED||e==goog.a11y.aria.State.SELECTED},goog.ui.ControlRenderer.prototype.setContent=function(e,t){var n=this.getContentElement(e);n&&(goog.dom.removeChildren(n),t)&&("string"==typeof t?goog.dom.setTextContent(n,t):(e=function(e){var t;e&&(t=goog.dom.getOwnerDocument(n),n.appendChild("string"==typeof e?t.createTextNode(e):e))},goog.isArray(t)?goog.array.forEach(t,e):!goog.isArrayLike(t)||"nodeType"in t?e(t):goog.array.forEach(goog.array.clone(t),e)))},goog.ui.ControlRenderer.prototype.getKeyEventTarget=function(e){return e.getElement()},goog.ui.ControlRenderer.prototype.getCssClass=function(){return goog.ui.ControlRenderer.CSS_CLASS},goog.ui.ControlRenderer.prototype.getIe6ClassCombinations=function(){return[]},goog.ui.ControlRenderer.prototype.getStructuralCssClass=function(){return this.getCssClass()},goog.ui.ControlRenderer.prototype.getClassNames=function(e){var t=this.getCssClass(),n=[t],o=this.getStructuralCssClass();return o!=t&&n.push(o),t=this.getClassNamesForState(e.getState()),n.push.apply(n,t),(e=e.getExtraClassNames())&&n.push.apply(n,e),goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&n.push.apply(n,this.getAppliedCombinedClassNames_(n)),n},goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_=function(t,n){var o=[];return n&&(t=goog.array.concat(t,[n])),goog.array.forEach(this.getIe6ClassCombinations(),function(e){!goog.array.every(e,goog.partial(goog.array.contains,t))||n&&!goog.array.contains(e,n)||o.push(e.join("_"))}),o},goog.ui.ControlRenderer.prototype.getClassNamesForState=function(e){for(var t=[];e;){var n=e&-e;t.push(this.getClassForState(n)),e&=~n}return t},goog.ui.ControlRenderer.prototype.getClassForState=function(e){return this.classByState_||this.createClassByStateMap_(),this.classByState_[e]},goog.ui.ControlRenderer.prototype.getStateFromClass=function(e){return this.stateByClass_||this.createStateByClassMap_(),e=parseInt(this.stateByClass_[e],10),isNaN(e)?0:e},goog.ui.ControlRenderer.prototype.createClassByStateMap_=function(){var e=this.getStructuralCssClass(),t=!goog.string.contains(goog.string.normalizeWhitespace(e)," ");goog.asserts.assert(t,"ControlRenderer has an invalid css class: '"+e+"'"),this.classByState_=goog.object.create(goog.ui.Component.State.DISABLED,e+"-disabled",goog.ui.Component.State.HOVER,e+"-hover",goog.ui.Component.State.ACTIVE,e+"-active",goog.ui.Component.State.SELECTED,e+"-selected",goog.ui.Component.State.CHECKED,e+"-checked",goog.ui.Component.State.FOCUSED,e+"-focused",goog.ui.Component.State.OPENED,e+"-open")},goog.ui.ControlRenderer.prototype.createStateByClassMap_=function(){this.classByState_||this.createClassByStateMap_(),this.stateByClass_=goog.object.transpose(this.classByState_)},goog.ui.MenuSeparatorRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.MenuSeparatorRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer),goog.ui.MenuSeparatorRenderer.CSS_CLASS="goog-menuseparator",goog.ui.MenuSeparatorRenderer.prototype.createDom=function(e){return e.getDomHelper().createDom("DIV",this.getCssClass())},goog.ui.MenuSeparatorRenderer.prototype.decorate=function(e,t){var n;return t.id&&e.setId(t.id),"HR"==t.tagName?(n=t,t=this.createDom(e),goog.dom.insertSiblingBefore(t,n),goog.dom.removeNode(n)):goog.dom.classlist.add(t,this.getCssClass()),t},goog.ui.MenuSeparatorRenderer.prototype.setContent=function(e,t){},goog.ui.MenuSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.MenuSeparatorRenderer.CSS_CLASS},goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,FF_JP_QUOTE:58,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},goog.events.KeyCodes.isTextModifyingKeyEvent=function(e){if(e.altKey&&!e.ctrlKey||e.metaKey||e.keyCode>=goog.events.KeyCodes.F1&&e.keyCode<=goog.events.KeyCodes.F12)return!1;if(goog.events.KeyCodes.isCharacterKey(e.keyCode))return!0;switch(e.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.VK_NONAME:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;default:return e.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||e.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}},goog.events.KeyCodes.firesKeyPressEvent=function(e,t,n,o,r,i){if(goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("525"))return!0;if(goog.userAgent.MAC&&r)return goog.events.KeyCodes.isCharacterKey(e);if(r&&!o)return!1;if(!goog.userAgent.GECKO){var s=(t="number"==typeof t?goog.events.KeyCodes.normalizeKeyCode(t):t)==goog.events.KeyCodes.CTRL||t==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&t==goog.events.KeyCodes.META,a=t==goog.events.KeyCodes.SHIFT&&(o||i);if((!n||goog.userAgent.MAC)&&s||goog.userAgent.MAC&&a)return!1}if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&o&&n)switch(e){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&o&&t==e)return!1;switch(e){case goog.events.KeyCodes.ENTER:return!(goog.userAgent.GECKO&&(i||r||n&&o));case goog.events.KeyCodes.ESC:return!(goog.userAgent.WEBKIT||goog.userAgent.EDGE||goog.userAgent.GECKO)}return(!goog.userAgent.GECKO||!(o||r||i))&&goog.events.KeyCodes.isCharacterKey(e)},goog.events.KeyCodes.isCharacterKey=function(e){if(e>=goog.events.KeyCodes.ZERO&&e<=goog.events.KeyCodes.NINE||e>=goog.events.KeyCodes.NUM_ZERO&&e<=goog.events.KeyCodes.NUM_MULTIPLY||e>=goog.events.KeyCodes.A&&e<=goog.events.KeyCodes.Z||(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&0==e)return!0;switch(e){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.PLUS_SIGN:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.AT_SIGN:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.FF_HASH:case goog.events.KeyCodes.FF_JP_QUOTE:return!0;case goog.events.KeyCodes.FF_DASH:return goog.userAgent.GECKO;default:return!1}},goog.events.KeyCodes.normalizeKeyCode=function(e){return goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(e):goog.userAgent.MAC&&goog.userAgent.WEBKIT?goog.events.KeyCodes.normalizeMacWebKitKeyCode(e):e},goog.events.KeyCodes.normalizeGeckoKeyCode=function(e){switch(e){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.FF_DASH:return goog.events.KeyCodes.DASH;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return e}},goog.events.KeyCodes.normalizeMacWebKitKeyCode=function(e){return e!==goog.events.KeyCodes.MAC_WK_CMD_RIGHT?e:goog.events.KeyCodes.META},goog.events.KeyHandler=function(e,t){goog.events.EventTarget.call(this),e&&this.attach(e,t)},goog.inherits(goog.events.KeyHandler,goog.events.EventTarget),goog.events.KeyHandler.prototype.element_=null,goog.events.KeyHandler.prototype.keyPressKey_=null,goog.events.KeyHandler.prototype.keyDownKey_=null,goog.events.KeyHandler.prototype.keyUpKey_=null,goog.events.KeyHandler.prototype.lastKey_=-1,goog.events.KeyHandler.prototype.keyCode_=-1,goog.events.KeyHandler.prototype.altKey_=!1,goog.events.KeyHandler.EventType={KEY:"key"},goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT},goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT},goog.events.KeyHandler.USES_KEYDOWN_=!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("525"),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO,goog.events.KeyHandler.prototype.handleKeyDown_=function(e){(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!e.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!e.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!e.metaKey)&&this.resetState(),-1==this.lastKey_&&(e.ctrlKey&&e.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:e.altKey&&e.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:e.metaKey&&e.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META)),goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(e.keyCode,this.lastKey_,e.shiftKey,e.ctrlKey,e.altKey,e.metaKey)?this.handleEvent(e):(this.keyCode_=goog.events.KeyCodes.normalizeKeyCode(e.keyCode),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=e.altKey))},goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1},goog.events.KeyHandler.prototype.handleKeyup_=function(e){this.resetState(),this.altKey_=e.altKey},goog.events.KeyHandler.prototype.handleEvent=function(e){var t,n,o=e.getBrowserEvent(),r=o.altKey,i=(goog.userAgent.IE&&e.type==goog.events.EventType.KEYPRESS?n=(t=this.keyCode_)!=goog.events.KeyCodes.ENTER&&t!=goog.events.KeyCodes.ESC?o.keyCode:0:(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&e.type==goog.events.EventType.KEYPRESS?(t=this.keyCode_,n=0<=o.charCode&&o.charCode<63232&&goog.events.KeyCodes.isCharacterKey(t)?o.charCode:0):goog.userAgent.OPERA&&!goog.userAgent.WEBKIT?(t=this.keyCode_,n=goog.events.KeyCodes.isCharacterKey(t)?o.keyCode:0):(n=e.type==goog.events.EventType.KEYPRESS&&(goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(r=this.altKey_),o.keyCode==o.charCode)?o.keyCode<32?(t=o.keyCode,0):(t=this.keyCode_,o.charCode):(t=o.keyCode||this.keyCode_,o.charCode||0),goog.userAgent.MAC&&n==goog.events.KeyCodes.QUESTION_MARK&&t==goog.events.KeyCodes.WIN_KEY&&(t=goog.events.KeyCodes.SLASH)),t=goog.events.KeyCodes.normalizeKeyCode(t));t?63232<=t&&t in goog.events.KeyHandler.safariKey_?i=goog.events.KeyHandler.safariKey_[t]:25==t&&e.shiftKey&&(i=9):o.keyIdentifier&&o.keyIdentifier in goog.events.KeyHandler.keyIdentifier_&&(i=goog.events.KeyHandler.keyIdentifier_[o.keyIdentifier]),goog.userAgent.GECKO&&goog.events.KeyHandler.USES_KEYDOWN_&&e.type==goog.events.EventType.KEYPRESS&&!goog.events.KeyCodes.firesKeyPressEvent(i,this.lastKey_,e.shiftKey,e.ctrlKey,r,e.metaKey)||(e=i==this.lastKey_,this.lastKey_=i,(o=new goog.events.KeyEvent(i,n,e,o)).altKey=r,this.dispatchEvent(o))},goog.events.KeyHandler.prototype.getElement=function(){return this.element_},goog.events.KeyHandler.prototype.attach=function(e,t){this.keyUpKey_&&this.detach(),this.element_=e,this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,t),this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,t,this),this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,t,this)},goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null),this.element_=null,this.keyCode_=this.lastKey_=-1},goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this),this.detach()},goog.events.KeyEvent=function(e,t,n,o){goog.events.BrowserEvent.call(this,o),this.type=goog.events.KeyHandler.EventType.KEY,this.keyCode=e,this.charCode=t,this.repeat=n},goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent),goog.ui.ComponentUtil={},goog.ui.ComponentUtil.getMouseEventType=function(e){return e.pointerEventsEnabled()?goog.events.PointerAsMouseEventType:goog.events.MouseAsMouseEventType},goog.ui.registry={},goog.ui.registry.getDefaultRenderer=function(e){for(var t;e&&(t=goog.getUid(e),!(t=goog.ui.registry.defaultRenderers_[t]));)e=e.superClass_?e.superClass_.constructor:null;return t?goog.isFunction(t.getInstance)?t.getInstance():new t:null},goog.ui.registry.setDefaultRenderer=function(e,t){if(!goog.isFunction(e))throw Error("Invalid component class "+e);if(!goog.isFunction(t))throw Error("Invalid renderer class "+t);e=goog.getUid(e),goog.ui.registry.defaultRenderers_[e]=t},goog.ui.registry.getDecoratorByClassName=function(e){return e in goog.ui.registry.decoratorFunctions_?goog.ui.registry.decoratorFunctions_[e]():null},goog.ui.registry.setDecoratorByClassName=function(e,t){if(!e)throw Error("Invalid class name "+e);if(!goog.isFunction(t))throw Error("Invalid decorator function "+t);goog.ui.registry.decoratorFunctions_[e]=t},goog.ui.registry.getDecorator=function(e){goog.asserts.assert(e);for(var t=goog.dom.classlist.get(e),n=0,o=t.length;n<o;n++)if(e=goog.ui.registry.getDecoratorByClassName(t[n]))return e;return null},goog.ui.registry.reset=function(){goog.ui.registry.defaultRenderers_={},goog.ui.registry.decoratorFunctions_={}},goog.ui.registry.defaultRenderers_={},goog.ui.registry.decoratorFunctions_={},goog.ui.Control=function(e,t,n){goog.ui.Component.call(this,n),this.renderer_=t||goog.ui.registry.getDefaultRenderer(this.constructor),this.setContentInternal(void 0!==e?e:null),this.ariaLabel_=null},goog.inherits(goog.ui.Control,goog.ui.Component),goog.tagUnsealableClass(goog.ui.Control),goog.ui.Control.registerDecorator=goog.ui.registry.setDecoratorByClassName,goog.ui.Control.getDecorator=goog.ui.registry.getDecorator,goog.ui.Control.prototype.content_=null,goog.ui.Control.prototype.state_=0,goog.ui.Control.prototype.supportedStates_=goog.ui.Component.State.DISABLED|goog.ui.Component.State.HOVER|goog.ui.Component.State.ACTIVE|goog.ui.Component.State.FOCUSED,goog.ui.Control.prototype.autoStates_=goog.ui.Component.State.ALL,goog.ui.Control.prototype.statesWithTransitionEvents_=0,goog.ui.Control.prototype.visible_=!0,goog.ui.Control.prototype.extraClassNames_=null,goog.ui.Control.prototype.handleMouseEvents_=!0,goog.ui.Control.prototype.allowTextSelection_=!1,goog.ui.Control.prototype.preferredAriaRole_=null,goog.ui.Control.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_},goog.ui.Control.prototype.setHandleMouseEvents=function(e){this.isInDocument()&&e!=this.handleMouseEvents_&&this.enableMouseEventHandling_(e),this.handleMouseEvents_=e},goog.ui.Control.prototype.getKeyEventTarget=function(){return this.renderer_.getKeyEventTarget(this)},goog.ui.Control.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler)},goog.ui.Control.prototype.getRenderer=function(){return this.renderer_},goog.ui.Control.prototype.setRenderer=function(e){if(this.isInDocument())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.getElement()&&this.setElementInternal(null),this.renderer_=e},goog.ui.Control.prototype.getExtraClassNames=function(){return this.extraClassNames_},goog.ui.Control.prototype.addClassName=function(e){e&&(this.extraClassNames_?goog.array.contains(this.extraClassNames_,e)||this.extraClassNames_.push(e):this.extraClassNames_=[e],this.renderer_.enableExtraClassName(this,e,!0))},goog.ui.Control.prototype.removeClassName=function(e){e&&this.extraClassNames_&&goog.array.remove(this.extraClassNames_,e)&&(0==this.extraClassNames_.length&&(this.extraClassNames_=null),this.renderer_.enableExtraClassName(this,e,!1))},goog.ui.Control.prototype.enableClassName=function(e,t){t?this.addClassName(e):this.removeClassName(e)},goog.ui.Control.prototype.createDom=function(){var e=this.renderer_.createDom(this);this.setElementInternal(e),this.renderer_.setAriaRole(e,this.getPreferredAriaRole()),this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(e,!1),this.isVisible()||this.renderer_.setVisible(e,!1)},goog.ui.Control.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_},goog.ui.Control.prototype.setPreferredAriaRole=function(e){this.preferredAriaRole_=e},goog.ui.Control.prototype.getAriaLabel=function(){return this.ariaLabel_},goog.ui.Control.prototype.setAriaLabel=function(e){this.ariaLabel_=e;var t=this.getElement();t&&this.renderer_.setAriaLabel(t,e)},goog.ui.Control.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())},goog.ui.Control.prototype.canDecorate=function(e){return this.renderer_.canDecorate(e)},goog.ui.Control.prototype.decorateInternal=function(e){e=this.renderer_.decorate(this,e),this.setElementInternal(e),this.renderer_.setAriaRole(e,this.getPreferredAriaRole()),this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(e,!1),this.visible_="none"!=e.style.display},goog.ui.Control.prototype.enterDocument=function(){var e,t;goog.ui.Control.superClass_.enterDocument.call(this),this.renderer_.setAriaStates(this,this.getElementStrict()),this.renderer_.initializeDom(this),this.supportedStates_&~goog.ui.Component.State.DISABLED&&(this.isHandleMouseEvents()&&this.enableMouseEventHandling_(!0),this.isSupportedState(goog.ui.Component.State.FOCUSED))&&((e=this.getKeyEventTarget())&&((t=this.getKeyHandler()).attach(e),this.getHandler().listen(t,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(e,goog.events.EventType.FOCUS,this.handleFocus).listen(e,goog.events.EventType.BLUR,this.handleBlur)))},goog.ui.Control.prototype.enableMouseEventHandling_=function(e){var t=goog.ui.ComponentUtil.getMouseEventType(this),n=this.getHandler(),o=this.getElement();e?(n.listen(o,t.MOUSEDOWN,this.handleMouseDown).listen(o,[t.MOUSEUP,t.MOUSECANCEL],this.handleMouseUp).listen(o,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(o,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.pointerEventsEnabled()&&n.listen(o,goog.events.EventType.GOTPOINTERCAPTURE,this.preventPointerCapture_),this.handleContextMenu!=goog.nullFunction&&n.listen(o,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&(goog.userAgent.isVersionOrHigher(9)||n.listen(o,goog.events.EventType.DBLCLICK,this.handleDblClick),this.ieMouseEventSequenceSimulator_||(this.ieMouseEventSequenceSimulator_=new goog.ui.Control.IeMouseEventSequenceSimulator_(this),this.registerDisposable(this.ieMouseEventSequenceSimulator_)))):(n.unlisten(o,t.MOUSEDOWN,this.handleMouseDown).unlisten(o,[t.MOUSEUP,t.MOUSECANCEL],this.handleMouseUp).unlisten(o,goog.events.EventType.MOUSEOVER,this.handleMouseOver).unlisten(o,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.pointerEventsEnabled()&&n.unlisten(o,goog.events.EventType.GOTPOINTERCAPTURE,this.preventPointerCapture_),this.handleContextMenu!=goog.nullFunction&&n.unlisten(o,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&(goog.userAgent.isVersionOrHigher(9)||n.unlisten(o,goog.events.EventType.DBLCLICK,this.handleDblClick),goog.dispose(this.ieMouseEventSequenceSimulator_),this.ieMouseEventSequenceSimulator_=null))},goog.ui.Control.prototype.exitDocument=function(){goog.ui.Control.superClass_.exitDocument.call(this),this.keyHandler_&&this.keyHandler_.detach(),this.isVisible()&&this.isEnabled()&&this.renderer_.setFocusable(this,!1)},goog.ui.Control.prototype.disposeInternal=function(){goog.ui.Control.superClass_.disposeInternal.call(this),this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_),delete this.renderer_,this.ieMouseEventSequenceSimulator_=this.extraClassNames_=this.content_=null},goog.ui.Control.prototype.getContent=function(){return this.content_},goog.ui.Control.prototype.setContent=function(e){this.renderer_.setContent(this.getElement(),e),this.setContentInternal(e)},goog.ui.Control.prototype.setContentInternal=function(e){this.content_=e},goog.ui.Control.prototype.getCaption=function(){var e=this.getContent();return e?(e="string"==typeof e?e:goog.isArray(e)?goog.array.map(e,goog.dom.getRawTextContent).join(""):goog.dom.getTextContent(e),goog.string.collapseBreakingSpaces(e)):""},goog.ui.Control.prototype.setCaption=function(e){this.setContent(e)},goog.ui.Control.prototype.setRightToLeft=function(e){goog.ui.Control.superClass_.setRightToLeft.call(this,e);var t=this.getElement();t&&this.renderer_.setRightToLeft(t,e)},goog.ui.Control.prototype.isAllowTextSelection=function(){return this.allowTextSelection_},goog.ui.Control.prototype.setAllowTextSelection=function(e){this.allowTextSelection_=e;var t=this.getElement();t&&this.renderer_.setAllowTextSelection(t,e)},goog.ui.Control.prototype.isVisible=function(){return this.visible_},goog.ui.Control.prototype.setVisible=function(e,t){return!!(t||this.visible_!=e&&this.dispatchEvent(e?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE))&&((t=this.getElement())&&this.renderer_.setVisible(t,e),this.isEnabled()&&this.renderer_.setFocusable(this,e),this.visible_=e,!0)},goog.ui.Control.prototype.isEnabled=function(){return!this.hasState(goog.ui.Component.State.DISABLED)},goog.ui.Control.prototype.isParentDisabled_=function(){var e=this.getParent();return!!e&&"function"==typeof e.isEnabled&&!e.isEnabled()},goog.ui.Control.prototype.setEnabled=function(e){!this.isParentDisabled_()&&this.isTransitionAllowed(goog.ui.Component.State.DISABLED,!e)&&(e||(this.setActive(!1),this.setHighlighted(!1)),this.isVisible()&&this.renderer_.setFocusable(this,e),this.setState(goog.ui.Component.State.DISABLED,!e,!0))},goog.ui.Control.prototype.isHighlighted=function(){return this.hasState(goog.ui.Component.State.HOVER)},goog.ui.Control.prototype.setHighlighted=function(e){this.isTransitionAllowed(goog.ui.Component.State.HOVER,e)&&this.setState(goog.ui.Component.State.HOVER,e)},goog.ui.Control.prototype.isActive=function(){return this.hasState(goog.ui.Component.State.ACTIVE)},goog.ui.Control.prototype.setActive=function(e){this.isTransitionAllowed(goog.ui.Component.State.ACTIVE,e)&&this.setState(goog.ui.Component.State.ACTIVE,e)},goog.ui.Control.prototype.isSelected=function(){return this.hasState(goog.ui.Component.State.SELECTED)},goog.ui.Control.prototype.setSelected=function(e){this.isTransitionAllowed(goog.ui.Component.State.SELECTED,e)&&this.setState(goog.ui.Component.State.SELECTED,e)},goog.ui.Control.prototype.isChecked=function(){return this.hasState(goog.ui.Component.State.CHECKED)},goog.ui.Control.prototype.setChecked=function(e){this.isTransitionAllowed(goog.ui.Component.State.CHECKED,e)&&this.setState(goog.ui.Component.State.CHECKED,e)},goog.ui.Control.prototype.isFocused=function(){return this.hasState(goog.ui.Component.State.FOCUSED)},goog.ui.Control.prototype.setFocused=function(e){this.isTransitionAllowed(goog.ui.Component.State.FOCUSED,e)&&this.setState(goog.ui.Component.State.FOCUSED,e)},goog.ui.Control.prototype.isOpen=function(){return this.hasState(goog.ui.Component.State.OPENED)},goog.ui.Control.prototype.setOpen=function(e){this.isTransitionAllowed(goog.ui.Component.State.OPENED,e)&&this.setState(goog.ui.Component.State.OPENED,e)},goog.ui.Control.prototype.getState=function(){return this.state_},goog.ui.Control.prototype.hasState=function(e){return!!(this.state_&e)},goog.ui.Control.prototype.setState=function(e,t,n){n||e!=goog.ui.Component.State.DISABLED?this.isSupportedState(e)&&t!=this.hasState(e)&&(this.renderer_.setState(this,e,t),this.state_=t?this.state_|e:this.state_&~e):this.setEnabled(!t)},goog.ui.Control.prototype.setStateInternal=function(e){this.state_=e},goog.ui.Control.prototype.isSupportedState=function(e){return!!(this.supportedStates_&e)},goog.ui.Control.prototype.setSupportedState=function(e,t){if(this.isInDocument()&&this.hasState(e)&&!t)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);!t&&this.hasState(e)&&this.setState(e,!1),this.supportedStates_=t?this.supportedStates_|e:this.supportedStates_&~e},goog.ui.Control.prototype.isAutoState=function(e){return!!(this.autoStates_&e)&&this.isSupportedState(e)},goog.ui.Control.prototype.setAutoStates=function(e,t){this.autoStates_=t?this.autoStates_|e:this.autoStates_&~e},goog.ui.Control.prototype.isDispatchTransitionEvents=function(e){return!!(this.statesWithTransitionEvents_&e)&&this.isSupportedState(e)},goog.ui.Control.prototype.setDispatchTransitionEvents=function(e,t){this.statesWithTransitionEvents_=t?this.statesWithTransitionEvents_|e:this.statesWithTransitionEvents_&~e},goog.ui.Control.prototype.isTransitionAllowed=function(e,t){return this.isSupportedState(e)&&this.hasState(e)!=t&&(!(this.statesWithTransitionEvents_&e)||this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(e,t)))&&!this.isDisposed()},goog.ui.Control.prototype.handleMouseOver=function(e){!goog.ui.Control.isMouseEventWithinElement_(e,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.ENTER)&&this.isEnabled()&&this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0)},goog.ui.Control.prototype.handleMouseOut=function(e){!goog.ui.Control.isMouseEventWithinElement_(e,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.LEAVE)&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.HOVER))&&this.setHighlighted(!1)},goog.ui.Control.prototype.preventPointerCapture_=function(e){var t=e.target;t.releasePointerCapture&&t.releasePointerCapture(e.pointerId)},goog.ui.Control.prototype.handleContextMenu=goog.nullFunction,goog.ui.Control.isMouseEventWithinElement_=function(e,t){return!!e.relatedTarget&&goog.dom.contains(t,e.relatedTarget)},goog.ui.Control.prototype.handleMouseDown=function(e){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),e.isMouseActionButton())&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!0),this.renderer_)&&this.renderer_.isFocusable(this)&&this.getKeyEventTarget().focus(),!this.isAllowTextSelection()&&e.isMouseActionButton()&&e.preventDefault()},goog.ui.Control.prototype.handleMouseUp=function(e){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),this.isActive())&&this.performActionInternal(e)&&this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1)},goog.ui.Control.prototype.handleDblClick=function(e){this.isEnabled()&&this.performActionInternal(e)},goog.ui.Control.prototype.performActionInternal=function(e){this.isAutoState(goog.ui.Component.State.CHECKED)&&this.setChecked(!this.isChecked()),this.isAutoState(goog.ui.Component.State.SELECTED)&&this.setSelected(!0),this.isAutoState(goog.ui.Component.State.OPENED)&&this.setOpen(!this.isOpen());var t=new goog.events.Event(goog.ui.Component.EventType.ACTION,this);return e&&(t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.platformModifierKey=e.platformModifierKey),this.dispatchEvent(t)},goog.ui.Control.prototype.handleFocus=function(e){this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!0)},goog.ui.Control.prototype.handleBlur=function(e){this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!1)},goog.ui.Control.prototype.handleKeyEvent=function(e){return!!(this.isVisible()&&this.isEnabled()&&this.handleKeyEventInternal(e))&&(e.preventDefault(),e.stopPropagation(),!0)},goog.ui.Control.prototype.handleKeyEventInternal=function(e){return e.keyCode==goog.events.KeyCodes.ENTER&&this.performActionInternal(e)},goog.ui.registry.setDefaultRenderer(goog.ui.Control,goog.ui.ControlRenderer),goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS,function(){return new goog.ui.Control(null)}),goog.ui.Control.IeMouseEventSequenceSimulator_=function(e){goog.Disposable.call(this),this.control_=e,this.clickExpected_=!1,this.handler_=new goog.events.EventHandler(this),this.registerDisposable(this.handler_);var t=this.control_.getElementStrict();e=goog.ui.ComponentUtil.getMouseEventType(e),this.handler_.listen(t,e.MOUSEDOWN,this.handleMouseDown_).listen(t,e.MOUSEUP,this.handleMouseUp_).listen(t,goog.events.EventType.CLICK,this.handleClick_)},goog.inherits(goog.ui.Control.IeMouseEventSequenceSimulator_,goog.Disposable),goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_=!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_=function(){this.clickExpected_=!1},goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_=function(){this.clickExpected_=!0},goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_=function(e,t){var n;return goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_?((n=document.createEvent("MouseEvents")).initMouseEvent(t,e.bubbles,e.cancelable,e.view||null,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,goog.events.BrowserEvent.MouseButton.LEFT,e.relatedTarget||null),n):(e.button=goog.events.BrowserEvent.MouseButton.LEFT,e.type=t,e)},goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_=function(e){var t,n,o,r;this.clickExpected_?this.clickExpected_=!1:(n=(t=e.getBrowserEvent()).button,o=t.type,r=goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(t,goog.events.EventType.MOUSEDOWN),this.control_.handleMouseDown(new goog.events.BrowserEvent(r,e.currentTarget)),r=goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(t,goog.events.EventType.MOUSEUP),this.control_.handleMouseUp(new goog.events.BrowserEvent(r,e.currentTarget)),goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_||(t.button=n,t.type=o))},goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal=function(){this.control_=null,goog.ui.Control.IeMouseEventSequenceSimulator_.superClass_.disposeInternal.call(this)},goog.ui.Separator=function(e,t){goog.ui.Control.call(this,null,e||goog.ui.MenuSeparatorRenderer.getInstance(),t),this.setSupportedState(goog.ui.Component.State.DISABLED,!1),this.setSupportedState(goog.ui.Component.State.HOVER,!1),this.setSupportedState(goog.ui.Component.State.ACTIVE,!1),this.setSupportedState(goog.ui.Component.State.FOCUSED,!1),this.setStateInternal(goog.ui.Component.State.DISABLED)},goog.inherits(goog.ui.Separator,goog.ui.Control),goog.ui.Separator.prototype.enterDocument=function(){goog.ui.Separator.superClass_.enterDocument.call(this);var e=this.getElement();goog.asserts.assert(e,"The DOM element for the separator cannot be null."),goog.a11y.aria.setRole(e,"separator")},goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator}),goog.ui.MenuSeparator=function(e){goog.ui.Separator.call(this,goog.ui.MenuSeparatorRenderer.getInstance(),e)},goog.inherits(goog.ui.MenuSeparator,goog.ui.Separator),goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator}),Blockly.ContextMenu={},Blockly.ContextMenu.currentBlock=null,Blockly.ContextMenu.eventWrapper_=null,Blockly.ContextMenu.show=function(e,t,n){var o;Blockly.WidgetDiv.show(Blockly.ContextMenu,n,null),t.length?(o=Blockly.ContextMenu.populate_(t,n),Blockly.ContextMenu.position_(o,e,n),setTimeout(function(){o.getElement().focus()},1),Blockly.ContextMenu.currentBlock=null):Blockly.ContextMenu.hide()},Blockly.ContextMenu.populate_=function(e,t){var n=new Blockly.Menu;n.setRightToLeft(t);for(var o,r=0;o=e[r];r++){var i=o.separator?new goog.ui.MenuSeparator:new Blockly.MenuItem(o.text);i.setRightToLeft(t),n.addChild(i,!0),i.setEnabled(o.enabled),o.enabled&&i.onAction(function(){Blockly.ContextMenu.hide(),this.callback()},o)}return n},Blockly.ContextMenu.position_=function(e,t,n){var o=Blockly.utils.getViewportBBox(),r=(t={top:t.clientY+o.top,bottom:t.clientY+o.top,left:t.clientX+o.left,right:t.clientX+o.left},Blockly.ContextMenu.createWidget_(e),Blockly.utils.uiMenu.getSize(e));n&&Blockly.utils.uiMenu.adjustBBoxesForRTL(o,t,r),Blockly.WidgetDiv.positionWithAnchor(o,t,r,n),e.getElement().focus()},Blockly.ContextMenu.createWidget_=function(e){e.render(Blockly.WidgetDiv.DIV);var t=e.getElement();Blockly.utils.dom.addClass(t,"blocklyContextMenu"),Blockly.bindEventWithChecks_(t,"contextmenu",null,Blockly.utils.noEvent),e.focus()},Blockly.ContextMenu.hide=function(){Blockly.WidgetDiv.hideIfOwner(Blockly.ContextMenu),Blockly.ContextMenu.currentBlock=null,Blockly.ContextMenu.eventWrapper_&&(Blockly.unbindEvent_(Blockly.ContextMenu.eventWrapper_),Blockly.ContextMenu.eventWrapper_=null)},Blockly.ContextMenu.callbackFactory=function(n,o){return function(){Blockly.Events.disable();try{var e=Blockly.Xml.domToBlock(o,n.workspace),t=n.getRelativeToSurfaceXY();t.x=n.RTL?t.x-Blockly.SNAP_RADIUS:t.x+Blockly.SNAP_RADIUS,t.y+=2*Blockly.SNAP_RADIUS,e.moveBy(t.x,t.y)}finally{Blockly.Events.enable()}Blockly.Events.isEnabled()&&!e.isShadow()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(e)),e.select()}},Blockly.ContextMenu.blockDeleteOption=function(e){var t=e.getDescendants(!1,!0).length,n=e.getNextBlock();return n&&(t-=n.getDescendants(!1,!0).length),{text:1==t?Blockly.Msg.DELETE_BLOCK:Blockly.Msg.DELETE_X_BLOCKS.replace("%1",String(t)),enabled:!e.inDebugWorkspace(),callback:function(){Blockly.Events.setGroup(!0),e.dispose(!0,!0),Blockly.Events.setGroup(!1)}}},Blockly.ContextMenu.blockHelpOption=function(e){return{enabled:!("function"==typeof e.helpUrl?!e.helpUrl():!e.helpUrl),text:Blockly.Msg.HELP,callback:function(){e.showHelp()}}},Blockly.ContextMenu.blockDuplicateOption=function(e){var t=e.isDuplicatable()&&!e.inDebugWorkspace();return{text:Blockly.Msg.DUPLICATE_BLOCK,enabled:t,callback:function(){Blockly.duplicate(e)}}},Blockly.ContextMenu.blockCommentOption=function(e){var t={enabled:!Blockly.utils.userAgent.IE&&!e.inDebugWorkspace()};return e.getCommentIcon()?(t.text=Blockly.Msg.REMOVE_COMMENT,t.callback=function(){e.setCommentText(null)}):(t.text=Blockly.Msg.ADD_COMMENT,t.callback=function(){e.setCommentText(""),e.comment.setVisible(!0)}),t},Blockly.ContextMenu.commentDeleteOption=function(e){return{text:Blockly.Msg.REMOVE_COMMENT,enabled:!e.workspace.options.debugMode,callback:function(){Blockly.Events.setGroup(!0),e.dispose(!0,!0),Blockly.Events.setGroup(!1)}}},Blockly.ContextMenu.commentDuplicateOption=function(e){return{text:Blockly.Msg.DUPLICATE_COMMENT,enabled:!e.workspace.options.debugMode,callback:function(){Blockly.duplicate(e)}}},Blockly.ContextMenu.workspaceCommentOption=function(o,r){var e;if(Blockly.WorkspaceCommentSvg)return(e={enabled:!Blockly.utils.userAgent.IE&&!o.options.debugMode}).text=Blockly.Msg.ADD_COMMENT,e.callback=function(){var e=new Blockly.WorkspaceCommentSvg(o,Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,Blockly.WorkspaceCommentSvg.DEFAULT_SIZE,Blockly.WorkspaceCommentSvg.DEFAULT_SIZE),t=o.getInjectionDiv().getBoundingClientRect(),t=new Blockly.utils.Coordinate(r.clientX-t.left,r.clientY-t.top),n=o.getOriginOffsetInPixels();(t=Blockly.utils.Coordinate.difference(t,n)).scale(1/o.scale),e.moveBy(t.x,t.y),o.rendered&&(e.initSvg(),e.render(),e.select())},e;throw Error("Missing require for Blockly.WorkspaceCommentSvg")},Blockly.RenderedConnection=function(e,t){Blockly.RenderedConnection.superClass_.constructor.call(this,e,t),this.db_=e.workspace.connectionDBList[t],this.dbOpposite_=e.workspace.connectionDBList[Blockly.OPPOSITE_TYPE[t]],this.offsetInBlock_=new Blockly.utils.Coordinate(0,0),this.trackedState_=Blockly.RenderedConnection.TrackedState.WILL_TRACK},Blockly.utils.object.inherits(Blockly.RenderedConnection,Blockly.Connection),Blockly.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},Blockly.RenderedConnection.prototype.dispose=function(){Blockly.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==Blockly.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},Blockly.RenderedConnection.prototype.getSourceBlock=function(){return Blockly.RenderedConnection.superClass_.getSourceBlock.call(this)},Blockly.RenderedConnection.prototype.targetBlock=function(){return Blockly.RenderedConnection.superClass_.targetBlock.call(this)},Blockly.RenderedConnection.prototype.distanceFrom=function(e){var t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)},Blockly.RenderedConnection.prototype.bumpAwayFrom=function(e){if(!this.sourceBlock_.workspace.isDragging()){var t=this.sourceBlock_.getRootBlock();if(!t.isInFlyout){var n=!1;if(!t.isMovable()){if(!(t=e.getSourceBlock().getRootBlock()).isMovable())return;e=this,n=!0}var o=Blockly.selected==t,r=(o||t.addSelect(),e.x+Blockly.SNAP_RADIUS+Math.floor(Math.random()*Blockly.BUMP_RANDOMNESS)-this.x),i=e.y+Blockly.SNAP_RADIUS+Math.floor(Math.random()*Blockly.BUMP_RANDOMNESS)-this.y;n&&(i=-i),t.RTL&&(r=e.x-Blockly.SNAP_RADIUS-Math.floor(Math.random()*Blockly.BUMP_RANDOMNESS)-this.x),t.moveBy(r,i),o||t.removeSelect()}}},Blockly.RenderedConnection.prototype.moveTo=function(e,t){this.trackedState_==Blockly.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,t),this.trackedState_=Blockly.RenderedConnection.TrackedState.TRACKED):this.trackedState_==Blockly.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,t)),this.x=e,this.y=t},Blockly.RenderedConnection.prototype.moveBy=function(e,t){this.moveTo(this.x+e,this.y+t)},Blockly.RenderedConnection.prototype.moveToOffset=function(e){this.moveTo(e.x+this.offsetInBlock_.x,e.y+this.offsetInBlock_.y)},Blockly.RenderedConnection.prototype.setOffsetInBlock=function(e,t){this.offsetInBlock_.x=e,this.offsetInBlock_.y=t},Blockly.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},Blockly.RenderedConnection.prototype.tighten=function(){var e=this.targetConnection.x-this.x,t=this.targetConnection.y-this.y;if(0!=Math.round(e)||0!=Math.round(t)){var n=this.targetBlock(),o=n.getSvgRoot();if(!o)throw Error("block is not rendered.");n.rendered&&(o=Blockly.utils.getRelativeXY(o),n.getSvgRoot().setAttribute("transform","translate("+(o.x-e)+","+(o.y-t)+")"),n.moveConnections(-e,-t))}},Blockly.RenderedConnection.prototype.closest=function(e,t){return this.dbOpposite_.searchForClosest(this,e,t)},Blockly.RenderedConnection.prototype.highlight=function(){var e=(t=this.sourceBlock_.workspace.getRenderer().getConstants()).shapeFor(this),e=this.type==Blockly.INPUT_VALUE||this.type==Blockly.OUTPUT_VALUE?(t=t.TAB_OFFSET_FROM_TOP,Blockly.utils.svgPaths.moveBy(0,-t)+Blockly.utils.svgPaths.lineOnAxis("v",t)+e.pathDown+Blockly.utils.svgPaths.lineOnAxis("v",t)):(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS,Blockly.utils.svgPaths.moveBy(-t,0)+Blockly.utils.svgPaths.lineOnAxis("h",t)+e.pathLeft+Blockly.utils.svgPaths.lineOnAxis("h",t)),t=this.sourceBlock_.getRelativeToSurfaceXY();Blockly.Connection.highlightedPath_=Blockly.utils.dom.createSvgElement("path",{class:"blocklyHighlightedConnectionPath",d:e,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},Blockly.RenderedConnection.prototype.unhighlight=function(){Blockly.utils.dom.removeNode(Blockly.Connection.highlightedPath_),delete Blockly.Connection.highlightedPath_},Blockly.RenderedConnection.prototype.setTracking=function(e){e&&this.trackedState_==Blockly.RenderedConnection.TrackedState.TRACKED||!e&&this.trackedState_==Blockly.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db_.addConnection(this,this.y),this.trackedState_=Blockly.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==Blockly.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=Blockly.RenderedConnection.TrackedState.UNTRACKED))},Blockly.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var e=this.targetBlock().getDescendants(!1),t=0;t<e.length;t++){for(var n=e[t],o=n.getConnections_(!0),r=0;r<o.length;r++)o[r].setTracking(!1);for(n=n.getIcons(),r=0;r<n.length;r++)n[r].setVisible(!1)}},Blockly.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var e=[];if(this.type==Blockly.INPUT_VALUE||this.type==Blockly.NEXT_STATEMENT){var t,n=this.targetBlock();if(n){n.isCollapsed()?(t=[],n.outputConnection&&t.push(n.outputConnection),n.nextConnection&&t.push(n.nextConnection),n.previousConnection&&t.push(n.previousConnection)):t=n.getConnections_(!0);for(var o=0;o<t.length;o++)e.push.apply(e,t[o].startTrackingAll());e.length||(e[0]=n)}}return e},Blockly.RenderedConnection.prototype.isConnectionAllowed=function(e,t){return!(this.distanceFrom(e)>t)&&Blockly.RenderedConnection.superClass_.isConnectionAllowed.call(this,e)},Blockly.RenderedConnection.prototype.onFailedConnect=function(e){this.bumpAwayFrom(e)},Blockly.RenderedConnection.prototype.disconnectInternal_=function(e,t){Blockly.RenderedConnection.superClass_.disconnectInternal_.call(this,e,t),e.rendered&&e.render(),t.rendered&&(t.updateDisabled(),t.render())},Blockly.RenderedConnection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),t=this.getShadowDom();if(e.workspace&&t&&Blockly.Events.recordUndo){if(Blockly.RenderedConnection.superClass_.respawnShadow_.call(this),!(t=this.targetBlock()))throw Error("Couldn't respawn the shadow block that should exist here.");t.initSvg(),t.render(!1),e.rendered&&e.render()}},Blockly.RenderedConnection.prototype.neighbours=function(e){return this.dbOpposite_.getNeighbours(this,e)},Blockly.RenderedConnection.prototype.connect_=function(e){Blockly.RenderedConnection.superClass_.connect_.call(this,e);var t=this.getSourceBlock();e=e.getSourceBlock(),t.rendered&&t.updateDisabled(),e.rendered&&e.updateDisabled(),t.rendered&&e.rendered&&(this.type==Blockly.NEXT_STATEMENT||this.type==Blockly.PREVIOUS_STATEMENT?e:t).render()},Blockly.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.checkType(this.targetConnection)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},Blockly.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},Blockly.Marker.prototype.setDrawer=function(e){this.drawer_=e},Blockly.Marker.prototype.getDrawer=function(){return this.drawer_},Blockly.Marker.prototype.getCurNode=function(){return this.curNode_},Blockly.Marker.prototype.setCurNode=function(e){var t=this.curNode_;this.curNode_=e,this.drawer_&&this.drawer_.draw(t,this.curNode_)},Blockly.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},Blockly.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},Blockly.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},Blockly.Cursor=function(){Blockly.Cursor.superClass_.constructor.call(this),this.type="cursor"},Blockly.utils.object.inherits(Blockly.Cursor,Blockly.Marker),Blockly.Cursor.prototype.next=function(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()==Blockly.ASTNode.types.NEXT||e.getType()==Blockly.ASTNode.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e},Blockly.Cursor.prototype.in=function(){var e=this.getCurNode();return e?((e=(e=e.getType()!=Blockly.ASTNode.types.PREVIOUS&&e.getType()!=Blockly.ASTNode.types.OUTPUT?e:e.next()).in())&&this.setCurNode(e),e):null},Blockly.Cursor.prototype.prev=function(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()==Blockly.ASTNode.types.NEXT||e.getType()==Blockly.ASTNode.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e},Blockly.Cursor.prototype.out=function(){var e=this.getCurNode();return e?((e=(e=e.out())&&e.getType()==Blockly.ASTNode.types.BLOCK?e.prev()||e:e)&&this.setCurNode(e),e):null},Blockly.Cursor.prototype.onBlocklyAction=function(e){if(this.getCurNode()&&this.getCurNode().getType()===Blockly.ASTNode.types.FIELD&&this.getCurNode().getLocation().onBlocklyAction(e))return!0;switch(e.name){case Blockly.navigation.actionNames.PREVIOUS:return this.prev(),!0;case Blockly.navigation.actionNames.OUT:return this.out(),!0;case Blockly.navigation.actionNames.NEXT:return this.next(),!0;case Blockly.navigation.actionNames.IN:return this.in(),!0;default:return!1}},Blockly.BasicCursor=function(){Blockly.BasicCursor.superClass_.constructor.call(this)},Blockly.utils.object.inherits(Blockly.BasicCursor,Blockly.Cursor),Blockly.BasicCursor.prototype.next=function(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null},Blockly.BasicCursor.prototype.in=function(){return this.next()},Blockly.BasicCursor.prototype.prev=function(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null},Blockly.BasicCursor.prototype.out=function(){return this.prev()},Blockly.BasicCursor.prototype.getNextNode_=function(e,t){var n;return e?t(n=e.in()||e.next())?n:n?this.getNextNode_(n,t):t(e=this.findSiblingOrParent_(e.out()))?e:e?this.getNextNode_(e,t):null:null},Blockly.BasicCursor.prototype.getPreviousNode_=function(e,t){var n;return e?t(n=(n=e.prev())?this.getRightMostChild_(n):e.out())?n:n?this.getPreviousNode_(n,t):null:null},Blockly.BasicCursor.prototype.validNode_=function(e){var t=!1;return t=(e=e&&e.getType())!=Blockly.ASTNode.types.OUTPUT&&e!=Blockly.ASTNode.types.INPUT&&e!=Blockly.ASTNode.types.FIELD&&e!=Blockly.ASTNode.types.NEXT&&e!=Blockly.ASTNode.types.PREVIOUS&&e!=Blockly.ASTNode.types.WORKSPACE?t:!0},Blockly.BasicCursor.prototype.findSiblingOrParent_=function(e){return e?e.next()||this.findSiblingOrParent_(e.out()):null},Blockly.BasicCursor.prototype.getRightMostChild_=function(e){if(!e.in())return e;for(e=e.in();e.next();)e=e.next();return this.getRightMostChild_(e)},Blockly.TabNavigateCursor=function(){Blockly.TabNavigateCursor.superClass_.constructor.call(this)},Blockly.utils.object.inherits(Blockly.TabNavigateCursor,Blockly.BasicCursor),Blockly.TabNavigateCursor.prototype.validNode_=function(e){var t=!1,n=e&&e.getType();return t=e&&(e=e.getLocation(),n==Blockly.ASTNode.types.FIELD)&&e&&e.isTabNavigable()&&e.isClickable()?!0:t},Blockly.utils.Rect=function(e,t,n,o){this.top=e,this.bottom=t,this.left=n,this.right=o},Blockly.utils.Rect.prototype.contains=function(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom},Blockly.BlockSvg=function(e,t,n){this.svgGroup_=Blockly.utils.dom.createSvgElement("g",{},null),this.svgGroup_.translate_="",this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),this.rendered=!1,this.workspace=e,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=Blockly.utils.is3dSupported()&&!!e.getBlockDragSurface();var o=this.pathObject.svgPath;o.tooltip=this,Blockly.Tooltip.bindMouseEvents(o),Blockly.BlockSvg.superClass_.constructor.call(this,e,t,n),this.svgGroup_.dataset&&(this.svgGroup_.dataset.id=this.id)},Blockly.utils.object.inherits(Blockly.BlockSvg,Blockly.Block),Blockly.BlockSvg.prototype.height=0,Blockly.BlockSvg.prototype.width=0,Blockly.BlockSvg.prototype.opacity_=1,Blockly.BlockSvg.prototype.dragStartXY_=null,Blockly.BlockSvg.prototype.isGlowingBlock_=!1,Blockly.BlockSvg.prototype.isGlowingStack_=!1,Blockly.BlockSvg.prototype.isHighlightingBlock_=!1,Blockly.BlockSvg.prototype.warningTextDb_=null,Blockly.BlockSvg.INLINE=-1,Blockly.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",Blockly.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var e,t=0;e=this.inputList[t];t++)e.init();for(e=this.getIcons(),t=0;t<e.length;t++)e[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||Blockly.bindEventWithChecks_(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t),!this.workspace.options.readOnly&&this.outputConnection&&this.bindReporterHoverEvents_()},Blockly.BlockSvg.prototype.select=function(){if(this.isMovable())if(this.isShadow()&&this.getParent())this.getParent().select();else if(Blockly.selected!=this){var e=null;if(Blockly.selected){e=Blockly.selected.id,Blockly.Events.disable();try{Blockly.selected.unselect()}finally{Blockly.Events.enable()}}(e=new Blockly.Events.Ui(null,"selected",e,this.id)).workspaceId=this.workspace.id,Blockly.Events.fire(e),(Blockly.selected=this).addSelect()}},Blockly.BlockSvg.prototype.unselect=function(){var e;Blockly.selected==this&&((e=new Blockly.Events.Ui(null,"selected",this.id,null)).workspaceId=this.workspace.id,Blockly.Events.fire(e),Blockly.selected=null,this.removeSelect())},Blockly.BlockSvg.prototype.setHighlightWarning=function(e){this.rendered&&((this.isHighlightingWarningBlock_=e)&&!this.svgPathWarningHighlight_?(e=Blockly.mainWorkspace.options.warningGlowFilterId||"blocklyHighlightWarningFilter",this.svgPathWarningHighlight_=this.svgPath_.cloneNode(!0),this.svgPathWarningHighlight_.setAttribute("fill","none"),this.svgPathWarningHighlight_.setAttribute("filter","url(#"+e+")"),this.getSvgRoot().appendChild(this.svgPathWarningHighlight_)):!this.isHighlightingWarningBlock_&&this.svgPathWarningHighlight_&&(this.getSvgRoot().removeChild(this.svgPathWarningHighlight_),this.svgPathWarningHighlight_=null))},Blockly.BlockSvg.prototype.mutator=null,Blockly.BlockSvg.prototype.comment=null,Blockly.BlockSvg.prototype.commentIcon_=null,Blockly.BlockSvg.prototype.warning=null,Blockly.BlockSvg.prototype.breakpoint=null,Blockly.BlockSvg.prototype.getIcons=function(){var e=[];return this.breakpoint&&e.push(this.breakpoint),this.mutator&&e.push(this.mutator),this.commentIcon_&&e.push(this.commentIcon_),this.warning&&e.push(this.warning),e},Blockly.BlockSvg.prototype.setParent=function(e){var t,n,o=this.parentBlock_;e!=o&&(Blockly.utils.dom.startTextWidthCache(),Blockly.BlockSvg.superClass_.setParent.call(this,e),Blockly.utils.dom.stopTextWidthCache(),t=this.getSvgRoot(),!this.workspace.isClearing)&&t&&(n=this.getRelativeToSurfaceXY(),e?(e.getSvgRoot().appendChild(t),e=this.getRelativeToSurfaceXY(),this.moveConnections(e.x-n.x,e.y-n.y)):o&&(this.workspace.getCanvas().appendChild(t),this.translate(n.x,n.y)),this.applyColour())},Blockly.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,t=0,n=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,o=this.getSvgRoot();if(o)do{var r=Blockly.utils.getRelativeXY(o)}while(e+=r.x,t+=r.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==o&&(e+=(r=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,t+=r.y),(o=o.parentNode)&&o!=this.workspace.getCanvas()&&o!=n);return new Blockly.utils.Coordinate(e,t)},Blockly.BlockSvg.prototype.moveBy=function(e,t){if(this.parentBlock_)throw Error("Block has parent.");var n,o=Blockly.Events.isEnabled(),r=(o&&(n=new Blockly.Events.BlockMove(this)),this.getRelativeToSurfaceXY());this.translate(r.x+e,r.y+t),this.moveConnections(e,t),o&&(n.recordNew(),Blockly.Events.fire(n)),this.workspace.resizeContents()},Blockly.BlockSvg.prototype.translate=function(e,t){this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")},Blockly.BlockSvg.prototype.moveToDragSurface=function(){var e;this.useDragSurface_&&(e=this.getRelativeToSurfaceXY(),this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(e.x,e.y),e=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(e)},Blockly.BlockSvg.prototype.moveTo=function(e){var t=this.getRelativeToSurfaceXY();this.moveBy(e.x-t.x,e.y-t.y)},Blockly.BlockSvg.prototype.moveOffDragSurface=function(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},Blockly.BlockSvg.prototype.moveDuringDrag=function(e){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},Blockly.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},Blockly.BlockSvg.prototype.snapToGrid=function(){var e,t,n,o;!this.workspace||this.workspace.isDragging()||this.getParent()||this.isInFlyout||(n=this.workspace.getGrid())&&n.shouldSnap()&&(e=(o=n.getSpacing())/2,t=this.getRelativeToSurfaceXY(),n=Math.round((t.x-e)/o)*o+e-t.x,o=Math.round((t.y-e)/o)*o+e-t.y,n=Math.round(n),o=Math.round(o),0==n&&0==o||this.moveBy(n,o))},Blockly.BlockSvg.prototype.getBoundingRectangle=function(){var e,t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth(),o=this.RTL?(e=t.x-n.width,t.x):(e=t.x,t.x+n.width);return new Blockly.utils.Rect(t.y,t.y+n.height,e,o)},Blockly.BlockSvg.prototype.markDirty=function(){for(var e,t=0;e=this.inputList[t];t++)e.markDirty()},Blockly.BlockSvg.prototype.setOpacity=function(e){this.opacity_=e,this.rendered&&this.updateColour()},Blockly.BlockSvg.prototype.getOpacity=function(){return this.opacity_},Blockly.BlockSvg.prototype.setCollapsed=function(e){if(this.collapsed_!=e){for(var t,n=[],o=0;t=this.inputList[o];o++)n.push.apply(n,t.setVisible(!e));if(e){for(t=this.getIcons(),o=0;o<t.length;o++)t[o].setVisible(!1);o=this.toString(Blockly.COLLAPSE_CHARS,"",!0);var r,o=this.appendDummyInput("_TEMP_COLLAPSED_INPUT").appendField(o),i=this;for((t=this.workspace.getRenderer().getConstants().EXPAND_IMAGE_DATAURI)&&o.appendField(new Blockly.FieldImage(t,24,24,"",function(){i.setCollapsed(!1)},!1)),o.init(),t=this.getDescendants(!0),(o=this.getNextBlock())&&(o=t.indexOf(o),t.splice(o,t.length-o)),o=1;r=t[o];o++)if(r.warning){this.setWarningText(Blockly.Msg.COLLAPSED_WARNINGS_WARNING,Blockly.BlockSvg.COLLAPSED_WARNING_ID);break}}else this.removeInput("_TEMP_COLLAPSED_INPUT"),this.warning&&(this.warning.setText("",Blockly.BlockSvg.COLLAPSED_WARNING_ID),Object.keys(this.warning.text_).length||this.setWarningText(null));if(Blockly.BlockSvg.superClass_.setCollapsed.call(this,e),n.length||(n[0]=this),this.rendered)for(o=0;r=n[o];o++)r.render()}},Blockly.BlockSvg.prototype.tab=function(e,t){var n=new Blockly.TabNavigateCursor;n.setCurNode(Blockly.ASTNode.createFieldNode(e)),e=n.getCurNode(),n.onBlocklyAction(t?Blockly.navigation.ACTION_NEXT:Blockly.navigation.ACTION_PREVIOUS),(t=n.getCurNode())&&t!==e&&t.getLocation().showEditor()},Blockly.BlockSvg.prototype.onMouseDown_=function(e){var t=this.workspace&&this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)},Blockly.BlockSvg.prototype.showHelp=function(){var e="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;e&&alert(e)},Blockly.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=this,e=[],n=null==t.previousConnection&&null==t.outputConnection;if(!this.isInFlyout){if(this.isDeletable()&&this.isMovable()&&e.push(Blockly.ContextMenu.blockDuplicateOption(t)),this.workspace.options.comments&&!this.collapsed_&&this.isEditable()&&!Blockly.pxtBlocklyUtils.isShadowArgumentReporter(t)&&e.push(Blockly.ContextMenu.blockCommentOption(t)),this.isMovable())if(this.collapsed_)this.workspace.options.collapse&&n&&((n={enabled:!this.inDebugWorkspace()}).text=Blockly.Msg.EXPAND_BLOCK,n.callback=function(){t.setCollapsed(!1)},e.push(n));else{if(this.workspace.options.inline)for(var o=1;o<this.inputList.length;o++)if(this.inputList[o-1].type!=Blockly.NEXT_STATEMENT&&this.inputList[o].type!=Blockly.NEXT_STATEMENT){var o={enabled:!this.inDebugWorkspace()},r=this.getInputsInline();o.text=r?Blockly.Msg.EXTERNAL_INPUTS:Blockly.Msg.INLINE_INPUTS,o.callback=function(){t.setInputsInline(!r)},e.push(o);break}this.workspace.options.collapse&&n&&((n={enabled:!this.inDebugWorkspace()}).text=Blockly.Msg.COLLAPSE_BLOCK,n.callback=function(){t.setCollapsed(!0)},e.push(n))}this.workspace.options.disable&&this.isEditable()&&(n={text:this.isEnabled()?Blockly.Msg.DISABLE_BLOCK:Blockly.Msg.ENABLE_BLOCK,enabled:!this.getInheritedDisabled()&&!this.inDebugWorkspace(),callback:function(){var e=Blockly.Events.getGroup();e||Blockly.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),e||Blockly.Events.setGroup(!1)}},e.push(n)),this.isDeletable()&&e.push(Blockly.ContextMenu.blockDeleteOption(t))}return e.push(Blockly.ContextMenu.blockHelpOption(t)),this.customContextMenu&&this.customContextMenu(e),e},Blockly.BlockSvg.prototype.showContextMenu=function(e){var t;this.parentBlock_&&this.isShadow_&&!Blockly.pxtBlocklyUtils.isShadowArgumentReporter(this)?this.parentBlock_.showContextMenu_(e):(t=this.generateContextMenu())&&t.length&&(Blockly.ContextMenu.show(e,t,this.RTL),Blockly.ContextMenu.currentBlock=this)},Blockly.BlockSvg.prototype.moveConnections=function(e,t){if(this.rendered){for(var n=this.getConnections_(!1),o=0;o<n.length;o++)n[o].moveBy(e,t);for(n=this.getIcons(),o=0;o<n.length;o++)n[o].computeIconLocation();for(o=0;o<this.childBlocks_.length;o++)this.childBlocks_[o].moveConnections(e,t);Blockly.WidgetDiv.repositionForWindowResize(),Blockly.DropDownDiv.repositionForWindowResize()}},Blockly.BlockSvg.prototype.setDragging=function(e){var t;for(e?((t=this.getSvgRoot()).translate_="",t.skew_="",Blockly.draggingConnections=Blockly.draggingConnections.concat(this.getConnections_(!0)),Blockly.utils.dom.addClass(this.svgGroup_,"blocklyDragging")):(Blockly.draggingConnections=[],Blockly.utils.dom.removeClass(this.svgGroup_,"blocklyDragging")),t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)},Blockly.BlockSvg.prototype.setMovable=function(e){Blockly.BlockSvg.superClass_.setMovable.call(this,e),e||this.unselect(),this.pathObject.updateMovable(e)},Blockly.BlockSvg.prototype.setEditable=function(e){Blockly.BlockSvg.superClass_.setEditable.call(this,e),e=this.getIcons();for(var t=0;t<e.length;t++)e[t].updateEditable()},Blockly.BlockSvg.prototype.setShadow=function(e){Blockly.BlockSvg.superClass_.setShadow.call(this,e),this.applyColour()},Blockly.BlockSvg.prototype.setInsertionMarker=function(e,t){this.isInsertionMarker_!=e&&(this.isInsertionMarker_=e)&&(this.setColour(Blockly.Colours.insertionMarker),this.pathObject.updateInsertionMarker(!0))},Blockly.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},Blockly.BlockSvg.prototype.dispose=function(e,t){if(this.workspace){Blockly.Tooltip.hide(),Blockly.utils.dom.startTextWidthCache();var n=this.workspace;if(Blockly.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),Blockly.ContextMenu.currentBlock==this&&Blockly.ContextMenu.hide(),this.workspace.keyboardAccessibilityMode&&Blockly.navigation.moveCursorOnBlockDelete(this),t&&this.rendered&&(this.unplug(e),Blockly.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]);this.warningTextDb_=null}for(t=this.getIcons(),o=0;o<t.length;o++)t[o].dispose();Blockly.BlockSvg.superClass_.dispose.call(this,!!e),Blockly.utils.dom.removeNode(this.svgGroup_),n.resizeContents(),this.svgGroup_=null,Blockly.utils.dom.stopTextWidthCache()}},Blockly.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var e=this.getIcons(),t=0;t<e.length;t++)e[t].applyColour();for(e=0;t=this.inputList[e];e++)for(var n,o=0;n=t.fieldRow[o];o++)n.applyColour()},Blockly.BlockSvg.prototype.updateDisabled=function(){var e=this.getChildren(!1);this.applyColour();for(var t,n=0;t=e[n];n++)t.updateDisabled()},Blockly.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},Blockly.BlockSvg.prototype.enableBreakpoint=function(e){var t=!1;e?this.breakpoint||(this.breakpoint=new Blockly.Breakpoint(this),t=!0,this.breakpoint.enableBreakpoint()):this.breakpoint&&(this.breakpoint.dispose(),t=!0),t&&this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.setCommentText=function(e){if(!Blockly.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=e&&(Blockly.BlockSvg.superClass_.setCommentText.call(this,e),!!this.commentIcon_==(e=null!=e)?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new Blockly.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},Blockly.BlockSvg.prototype.setWarningText=function(e,t){if(!Blockly.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var n=t||"";if(n)this.warningTextDb_[n]&&(clearTimeout(this.warningTextDb_[n]),delete this.warningTextDb_[n]);else for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o];if(this.workspace.isDragging()){var r=this;this.warningTextDb_[n]=setTimeout(function(){r.workspace&&(delete r.warningTextDb_[n],r.setWarningText(e,n))},100)}else{for(this.isInFlyout&&(e=null),t=this.getSurroundParent(),o=null;t;)t.isCollapsed()&&(o=t),t=t.getSurroundParent();o&&e&&o.setWarningText(Blockly.Msg.COLLAPSED_WARNINGS_WARNING,Blockly.BlockSvg.COLLAPSED_WARNING_ID),t=!1,"string"==typeof e?(this.warning||(this.warning=new Blockly.Warning(this),t=!0),this.warning.setText(e,n)):this.warning&&!n?(this.warning.dispose(),t=!0):this.warning&&(t=this.warning.getText(),this.warning.setText("",n),(o=this.warning.getText())||this.warning.dispose(),t=t!=o),t&&this.rendered&&(this.render(),this.bumpNeighbours())}},Blockly.BlockSvg.prototype.setMutator=function(e){this.mutator&&this.mutator!==e&&this.mutator.dispose(),e&&(e.setBlock(this),(this.mutator=e).createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.setDisabled=function(e){console.warn("Deprecated call to Blockly.BlockSvg.prototype.setDisabled, use Blockly.BlockSvg.prototype.setEnabled instead."),this.setEnabled(!e)},Blockly.BlockSvg.prototype.setEnabled=function(e){this.isEnabled()!=e&&(Blockly.BlockSvg.superClass_.setEnabled.call(this,e),this.rendered)&&this.updateDisabled()},Blockly.BlockSvg.prototype.setHighlighted=function(e){this.rendered&&this.pathObject.updateHighlighted(e)},Blockly.BlockSvg.prototype.setHighlightWarning=function(e){this.rendered&&this.pathObject.updateHighlightedWarning(e)},Blockly.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},Blockly.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},Blockly.BlockSvg.prototype.setDeleteStyle=function(e){this.pathObject.updateDraggingDelete(e)},Blockly.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},Blockly.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},Blockly.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},Blockly.BlockSvg.prototype.setColour=function(e,t,n){Blockly.BlockSvg.superClass_.setColour.call(this,e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,t&&(this.style.colourSecondary=t),n&&(this.style.colourTertiary=n),this.applyColour()},Blockly.BlockSvg.prototype.setStyle=function(e){var t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,!t)throw Error("Invalid style name: "+e);this.hat=t.hat,this.pathObject.setStyle(t),this.colour_=t.colourPrimary,this.style=t,this.applyColour()},Blockly.BlockSvg.prototype.bringToFront=function(){var e=this;do{var t=e.getSvgRoot(),n=t.parentNode,o=n.childNodes}while(o[o.length-1]!==t&&n.appendChild(t),e=e.getParent())},Blockly.BlockSvg.prototype.setPreviousStatement=function(e,t){Blockly.BlockSvg.superClass_.setPreviousStatement.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.setNextStatement=function(e,t){Blockly.BlockSvg.superClass_.setNextStatement.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.setOutput=function(e,t){Blockly.BlockSvg.superClass_.setOutput.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.setInputsInline=function(e){Blockly.BlockSvg.superClass_.setInputsInline.call(this,e),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.removeInput=function(e,t){Blockly.BlockSvg.superClass_.removeInput.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.moveNumberedInputBefore=function(e,t){Blockly.BlockSvg.superClass_.moveNumberedInputBefore.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.appendInput_=function(e,t){return e=Blockly.BlockSvg.superClass_.appendInput_.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours()),e},Blockly.BlockSvg.prototype.setConnectionTracking=function(e){var t;if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection&&(this.nextConnection.setTracking(e),t=this.nextConnection.targetBlock())&&t.setConnectionTracking(e),!this.collapsed_)for(t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;n&&(n.setTracking(e),n=n.targetBlock())&&n.setConnectionTracking(e)}},Blockly.BlockSvg.prototype.getConnections_=function(e){var t,n=[];if((e||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),e||!this.collapsed_)){e=0;for(;t=this.inputList[e];e++)t.connection&&n.push(t.connection)}return n},Blockly.BlockSvg.prototype.lastConnectionInStack=function(){return Blockly.BlockSvg.superClass_.lastConnectionInStack.call(this)},Blockly.BlockSvg.prototype.getMatchingConnection=function(e,t){return Blockly.BlockSvg.superClass_.getMatchingConnection.call(this,e,t)},Blockly.BlockSvg.prototype.makeConnection_=function(e){return new Blockly.RenderedConnection(this,e)},Blockly.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var e=this.getRootBlock();if(!e.isInFlyout)for(var t,n=this.getConnections_(!1),o=0;t=n[o];o++){t.isConnected()&&t.isSuperior()&&t.targetBlock().bumpNeighbours();for(var r,i=t.neighbours(Blockly.SNAP_RADIUS),s=0;r=i[s];s++)t.isConnected()&&r.isConnected()||r.getSourceBlock().getRootBlock()!=e&&(t.isSuperior()?r.bumpAwayFrom(t):t.bumpAwayFrom(r))}}},Blockly.BlockSvg.prototype.scheduleSnapAndBump=function(){var e=this,t=Blockly.Events.getGroup();setTimeout(function(){Blockly.Events.setGroup(t),e.snapToGrid(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY/2),setTimeout(function(){Blockly.Events.setGroup(t),e.bumpNeighbours(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)},Blockly.BlockSvg.prototype.bindReporterHoverEvents_=function(){var n=this;Blockly.bindEvent_(this.svgGroup_,"mouseover",null,function(e){var t=n;if(!t.isInFlyout){for(;t.isShadow_&&t.parentBlock_;)t=t.parentBlock_;t.parentBlock_&&t.outputConnection&&(Blockly.utils.dom.addClass(t.pathObject.svgPath,"blocklyReporterHover"),e.stopPropagation())}}),Blockly.bindEvent_(this.svgGroup_,"mouseout",null,function(){n.isInFlyout||Blockly.utils.dom.removeClass(n.pathObject.svgPath,"blocklyReporterHover")})},Blockly.BlockSvg.prototype.positionNearConnection=function(e,t){e.type!=Blockly.NEXT_STATEMENT&&e.type!=Blockly.INPUT_VALUE||this.moveBy(t.x-e.x,t.y-e.y)},Blockly.BlockSvg.prototype.getParent=function(){return Blockly.BlockSvg.superClass_.getParent.call(this)},Blockly.BlockSvg.prototype.getRootBlock=function(){return Blockly.BlockSvg.superClass_.getRootBlock.call(this)},Blockly.BlockSvg.prototype.render=function(e){Blockly.utils.dom.startTextWidthCache(),this.rendered=!0,this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==e&&((e=this.getParent())?e.render(!0):this.workspace.resizeContents()),Blockly.utils.dom.stopTextWidthCache(),e=this.workspace.getCursor(),this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg_&&e.draw()},Blockly.BlockSvg.prototype.updateConnectionLocations_=function(){var e=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(e),this.outputConnection&&this.outputConnection.moveToOffset(e);for(var t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;n&&(n.moveToOffset(e),n.isConnected())&&n.tighten()}this.nextConnection&&(this.nextConnection.moveToOffset(e),this.nextConnection.isConnected())&&this.nextConnection.tighten()},Blockly.BlockSvg.prototype.setCursorSvg=function(e){this.pathObject.setCursorSvg(e)},Blockly.BlockSvg.prototype.setMarkerSvg=function(e){this.pathObject.setMarkerSvg(e)},Blockly.BlockSvg.prototype.getHeightWidth=function(){var e,t=this.height,n=this.width,o=this.getNextBlock();return o&&(o=o.getHeightWidth(),e=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT,t+=o.height-e,n=Math.max(n,o.width)),{height:t,width:n}},Blockly.BlockSvg.prototype.highlightForReplacement=function(e){this.pathObject.updateReplacementHighlight(e)},Blockly.BlockSvg.prototype.highlightShapeForInput=function(e,t){this.pathObject.updateShapeForInputHighlight(e,t)},Blockly.blockRendering.rendererMap_={},Blockly.blockRendering.useDebugger=!1,Blockly.blockRendering.register=function(e,t){if(Blockly.blockRendering.rendererMap_[e])throw Error("Renderer has already been registered.");Blockly.blockRendering.rendererMap_[e]=t},Blockly.blockRendering.unregister=function(e){Blockly.blockRendering.rendererMap_[e]?delete Blockly.blockRendering.rendererMap_[e]:console.warn('No renderer mapping for name "'+e+'" found to unregister')},Blockly.blockRendering.startDebugger=function(){Blockly.blockRendering.useDebugger=!0},Blockly.blockRendering.stopDebugger=function(){Blockly.blockRendering.useDebugger=!1},Blockly.blockRendering.init=function(e){var t;if(Blockly.blockRendering.rendererMap_[e])return Blockly.utils.object.inherits(t=function(e){t.superClass_.constructor.call(this,e)},Blockly.blockRendering.rendererMap_[e]),(e=new t(e)).init(),e;throw Error("Renderer not registered: ",e)},Blockly.ConnectionDB=function(){this.connections_=[]},Blockly.ConnectionDB.prototype.addConnection=function(e,t){t=this.calculateIndexForYPos_(t),this.connections_.splice(t,0,e)},Blockly.ConnectionDB.prototype.findIndexOfConnection_=function(e,t){if(this.connections_.length){var n=this.calculateIndexForYPos_(t);if(!(n>=this.connections_.length)){t=e.y;for(var o=n;0<=o&&this.connections_[o].y==t;){if(this.connections_[o]==e)return o;o--}for(;n<this.connections_.length&&this.connections_[n].y==t;){if(this.connections_[n]==e)return n;n++}}}return-1},Blockly.ConnectionDB.prototype.calculateIndexForYPos_=function(e){if(!this.connections_.length)return 0;for(var t=0,n=this.connections_.length;t<n;){var o=Math.floor((t+n)/2);if(this.connections_[o].y<e)t=o+1;else{if(!(this.connections_[o].y>e)){t=o;break}n=o}}return t},Blockly.ConnectionDB.prototype.removeConnection=function(e,t){if(-1==(e=this.findIndexOfConnection_(e,t)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(e,1)},Blockly.ConnectionDB.prototype.getNeighbours=function(e,o){function t(e){var t=i-r[e].x,n=s-r[e].y;return Math.sqrt(t*t+n*n)<=o&&a.push(r[e]),n<o}var r=this.connections_,i=e.x,s=e.y;e=0;for(var n=l=r.length-2;e<n;)r[n].y<s?e=n:l=n,n=Math.floor((e+l)/2);var a=[],l=e=n;if(r.length){for(;0<=e&&t(e);)e--;for(;++l<r.length&&t(l););}return a},Blockly.ConnectionDB.prototype.isInYRange_=function(e,t,n){return Math.abs(this.connections_[e].y-t)<=n},Blockly.ConnectionDB.prototype.searchForClosest=function(e,t,n){if(!this.connections_.length)return{connection:null,radius:t};var o=e.y,r=e.x,i=(e.x=r+n.x,e.y=o+n.y,this.calculateIndexForYPos_(e.y));n=null;for(var s,a=t,l=i-1;0<=l&&this.isInYRange_(l,e.y,t);)s=this.connections_[l],e.isConnectionAllowed(s,a)&&(a=(n=s).distanceFrom(e)),l--;for(;i<this.connections_.length&&this.isInYRange_(i,e.y,t);)s=this.connections_[i],e.isConnectionAllowed(s,a)&&(a=(n=s).distanceFrom(e)),i++;return e.x=r,e.y=o,{connection:n,radius:a}},Blockly.ConnectionDB.init=function(){var e=[];return e[Blockly.INPUT_VALUE]=new Blockly.ConnectionDB,e[Blockly.OUTPUT_VALUE]=new Blockly.ConnectionDB,e[Blockly.NEXT_STATEMENT]=new Blockly.ConnectionDB,e[Blockly.PREVIOUS_STATEMENT]=new Blockly.ConnectionDB,e},Blockly.TouchGesture=function(e,t){Blockly.TouchGesture.superClass_.constructor.call(this,e,t),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},Blockly.utils.object.inherits(Blockly.TouchGesture,Blockly.Gesture),Blockly.TouchGesture.ZOOM_IN_MULTIPLIER=5,Blockly.TouchGesture.ZOOM_OUT_MULTIPLIER=6,Blockly.TouchGesture.prototype.doStart=function(e){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,Blockly.TouchGesture.superClass_.doStart.call(this,e),!this.isEnding_&&Blockly.Touch.isTouchEvent(e)&&this.handleTouchStart(e)},Blockly.TouchGesture.prototype.bindMouseEvents=function(e){this.onStartWrapper_=Blockly.bindEventWithChecks_(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()},Blockly.TouchGesture.prototype.handleStart=function(e){!this.isDragging()&&Blockly.Touch.isTouchEvent(e)&&(this.handleTouchStart(e),this.isMultiTouch())&&Blockly.longStop_()},Blockly.TouchGesture.prototype.handleMove=function(e){this.isDragging()?Blockly.Touch.shouldHandleEvent(e)&&Blockly.TouchGesture.superClass_.handleMove.call(this,e):this.isMultiTouch()?(Blockly.Touch.isTouchEvent(e)&&this.handleTouchMove(e),Blockly.longStop_()):Blockly.TouchGesture.superClass_.handleMove.call(this,e)},Blockly.TouchGesture.prototype.handleUp=function(e){Blockly.Touch.isTouchEvent(e)&&!this.isDragging()&&this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()?Blockly.Touch.shouldHandleEvent(e)&&Blockly.TouchGesture.superClass_.handleUp.call(this,e):(e.preventDefault(),e.stopPropagation(),this.dispose())},Blockly.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},Blockly.TouchGesture.prototype.dispose=function(){Blockly.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&Blockly.unbindEvent_(this.onStartWrapper_)},Blockly.TouchGesture.prototype.handleTouchStart=function(e){var t=Blockly.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[t]=this.getTouchPoint(e),2==(t=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=Blockly.utils.Coordinate.distance(this.cachedPoints_[t[0]],this.cachedPoints_[t[1]]),this.isMultiTouch_=!0,e.preventDefault())},Blockly.TouchGesture.prototype.handleTouchMove=function(e){var t=Blockly.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[t]=this.getTouchPoint(e),t=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===t.length?this.handlePinch_(e):Blockly.TouchGesture.superClass_.handleMove.call(this,e)},Blockly.TouchGesture.prototype.handlePinch_=function(e){var t,n,o,r=Object.keys(this.cachedPoints_),r=Blockly.utils.Coordinate.distance(this.cachedPoints_[r[0]],this.cachedPoints_[r[1]])/this.startDistance_;0<this.previousScale_&&1/0>this.previousScale_&&(t=0<(t=r-this.previousScale_)?t*Blockly.TouchGesture.ZOOM_IN_MULTIPLIER:t*Blockly.TouchGesture.ZOOM_OUT_MULTIPLIER,n=this.startWorkspace_,o=Blockly.utils.mouseToSvg(e,n.getParentSvg(),n.getInverseScreenCTM()),n.zoom(o.x,o.y,t)),this.previousScale_=r,e.preventDefault()},Blockly.TouchGesture.prototype.handleTouchEnd=function(e){e=Blockly.Touch.getTouchIdentifierFromEvent(e),this.cachedPoints_[e]&&delete this.cachedPoints_[e],Object.keys(this.cachedPoints_).length<2&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},Blockly.TouchGesture.prototype.getTouchPoint=function(e){return this.startWorkspace_?new Blockly.utils.Coordinate(e.pageX||e.changedTouches[0].pageX,e.pageY||e.changedTouches[0].pageY):null},Blockly.MarkerManager=function(e){this.cursorSvg_=this.cursor_=null,this.markers_={},this.workspace_=e},Blockly.MarkerManager.prototype.registerMarker=function(e,t){this.markers_[e]&&this.unregisterMarker(e),t.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,t)),this.setMarkerSvg(t.getDrawer().createDom()),this.markers_[e]=t},Blockly.MarkerManager.prototype.unregisterMarker=function(e){var t=this.markers_[e];if(!t)throw Error("Marker with id "+e+" does not exist. Can only unregistermarkers that exist.");t.dispose(),delete this.markers_[e]},Blockly.MarkerManager.prototype.getCursor=function(){return this.cursor_},Blockly.MarkerManager.prototype.getMarker=function(e){return this.markers_[e]},Blockly.MarkerManager.prototype.setCursor=function(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=e)&&(e=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(e),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},Blockly.MarkerManager.prototype.setCursorSvg=function(e){e?(this.workspace_.getBlockCanvas().appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},Blockly.MarkerManager.prototype.setMarkerSvg=function(e){e?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(e,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(e)):this.markerSvg_=null},Blockly.MarkerManager.prototype.dispose=function(){for(var e,t=Object.keys(this.markers_),n=0;e=t[n];n++)this.unregisterMarker(e);this.markers_=null,this.cursor_.dispose(),this.cursor_=null},Blockly.ThemeManager=function(e,t){this.workspace_=e,this.theme_=t,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},Blockly.ThemeManager.prototype.getTheme=function(){return this.theme_},Blockly.ThemeManager.prototype.setTheme=function(e){if(this.theme_!==e){var t,n=this.theme_;for(this.theme_=e,(e=this.workspace_.getInjectionDiv())&&(n&&Blockly.utils.dom.removeClass(e,n.name+"-theme"),Blockly.utils.dom.addClass(e,this.theme_.name+"-theme")),n=0;e=this.subscribedWorkspaces_[n];n++)e.refreshTheme();for(n=0,e=Object.keys(this.componentDB_);t=e[n];n++)for(var o=0;i=this.componentDB_[t][o];o++){var r=i.element,i=i.propertyName,s=this.theme_&&this.theme_.getComponentStyle(t);r.style[i]=s||""}Blockly.hideChaff()}},Blockly.ThemeManager.prototype.subscribeWorkspace=function(e){this.subscribedWorkspaces_.push(e)},Blockly.ThemeManager.prototype.unsubscribeWorkspace=function(e){if((e=this.subscribedWorkspaces_.indexOf(e))<0)throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(e,1)},Blockly.ThemeManager.prototype.subscribe=function(e,t,n){this.componentDB_[t]||(this.componentDB_[t]=[]),this.componentDB_[t].push({element:e,propertyName:n}),t=this.theme_&&this.theme_.getComponentStyle(t),e.style[n]=t||""},Blockly.ThemeManager.prototype.unsubscribe=function(e){if(e)for(var t,n=Object.keys(this.componentDB_),o=0;t=n[o];o++){for(var r=this.componentDB_[t],i=r.length-1;0<=i;i--)r[i].element===e&&r.splice(i,1);this.componentDB_[t].length||delete this.componentDB_[t]}},Blockly.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},Blockly.WorkspaceAudio=function(e){this.parentWorkspace_=e,this.SOUNDS_=Object.create(null)},Blockly.WorkspaceAudio.prototype.lastSound_=null,Blockly.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},Blockly.WorkspaceAudio.prototype.load=function(e,t){if(e.length){try{var n=new Blockly.utils.global.Audio}catch(e){return}for(var o,r=0;r<e.length;r++){var i=e[r],s=i.match(/\.(\w+)$/);if(s&&n.canPlayType("audio/"+s[1])){o=new Blockly.utils.global.Audio(i);break}}o&&o.play&&(this.SOUNDS_[t]=o)}},Blockly.WorkspaceAudio.prototype.preload=function(){for(var e in this.SOUNDS_){var e=this.SOUNDS_[e],t=(e.volume=.01,e.play());if(void 0!==t?t.then(e.pause).catch(function(){}):e.pause(),Blockly.utils.userAgent.IPAD||Blockly.utils.userAgent.IPHONE)break}},Blockly.WorkspaceAudio.prototype.play=function(e,t){var n=this.SOUNDS_[e];n?(e=new Date,null!=this.lastSound_&&e-this.lastSound_<Blockly.SOUND_LIMIT||(this.lastSound_=e,(n=Blockly.utils.userAgent.IPAD||Blockly.utils.userAgent.ANDROID?n:n.cloneNode()).volume=void 0===t?1:t,n.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(e,t)},Blockly.WorkspaceSvg=function(e,t,n){Blockly.WorkspaceSvg.superClass_.constructor.call(this,e),this.getMetrics=e.getMetrics||Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_,this.setMetrics=e.setMetrics||Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.connectionDBList=Blockly.ConnectionDB.init(),t&&(this.blockDragSurface_=t),n&&(this.workspaceDragSurface_=n),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&Blockly.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new Blockly.WorkspaceAudio(e.parentWorkspace),this.grid_=this.options.gridPattern?new Blockly.Grid(e.gridPattern,e.gridOptions):null,this.markerManager_=new Blockly.MarkerManager(this),Blockly.Variables&&Blockly.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(Blockly.VARIABLE_CATEGORY_NAME,Blockly.Variables.flyoutCategory),Blockly.VariablesDynamic&&Blockly.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME,Blockly.VariablesDynamic.flyoutCategory),e.newFunctions&&Blockly.Functions&&Blockly.Functions.flyoutCategory?this.registerToolboxCategoryCallback(Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Functions.flyoutCategory):Blockly.Procedures&&Blockly.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Procedures.flyoutCategory),this.addChangeListener(Blockly.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Blockly.ThemeManager(this,this.options.theme||Blockly.Themes.Classic),this.renderer_=Blockly.blockRendering.init(this.options.renderer||"geras"),this.cachedParentSvg_=null,this.themeManager_.subscribeWorkspace(this),this.renderer_.getConstants().refreshTheme(this.getTheme()),this.keyboardAccessibilityMode=!1},Blockly.utils.object.inherits(Blockly.WorkspaceSvg,Blockly.Workspace),Blockly.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,Blockly.WorkspaceSvg.prototype.rendered=!0,Blockly.WorkspaceSvg.prototype.isVisible_=!0,Blockly.WorkspaceSvg.prototype.isFlyout=!1,Blockly.WorkspaceSvg.prototype.isMutator=!1,Blockly.WorkspaceSvg.prototype.resizesEnabled_=!0,Blockly.WorkspaceSvg.prototype.scrollX=0,Blockly.WorkspaceSvg.prototype.scrollY=0,Blockly.WorkspaceSvg.prototype.startScrollX=0,Blockly.WorkspaceSvg.prototype.startScrollY=0,Blockly.WorkspaceSvg.prototype.dragDeltaXY_=null,Blockly.WorkspaceSvg.prototype.scale=1,Blockly.WorkspaceSvg.prototype.trashcan=null,Blockly.WorkspaceSvg.prototype.scrollbar=null,Blockly.WorkspaceSvg.prototype.flyout_=null,Blockly.WorkspaceSvg.prototype.toolbox_=null,Blockly.WorkspaceSvg.prototype.currentGesture_=null,Blockly.WorkspaceSvg.prototype.blockDragSurface_=null,Blockly.WorkspaceSvg.prototype.workspaceDragSurface_=null,Blockly.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,Blockly.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,Blockly.WorkspaceSvg.prototype.injectionDiv_=null,Blockly.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,Blockly.WorkspaceSvg.prototype.injectionDiv_=null,Blockly.WorkspaceSvg.prototype.flyoutButtonCallbacks_={},Blockly.WorkspaceSvg.prototype.toolboxCategoryCallbacks_={},Blockly.WorkspaceSvg.prototype.targetWorkspace=null,Blockly.WorkspaceSvg.prototype.inverseScreenCTM_=null,Blockly.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,Blockly.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},Blockly.WorkspaceSvg.prototype.setCursorSvg=function(e){this.markerManager_.setCursorSvg(e)},Blockly.WorkspaceSvg.prototype.setMarkerSvg=function(e){this.markerManager_.setMarkerSvg(e)},Blockly.WorkspaceSvg.prototype.getMarker=function(e){return this.markerManager_?this.markerManager_.getMarker(e):null},Blockly.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},Blockly.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},Blockly.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},Blockly.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},Blockly.WorkspaceSvg.prototype.setTheme=function(e){e=e||Blockly.Themes.Classic,this.themeManager_.setTheme(e)},Blockly.WorkspaceSvg.prototype.refreshTheme=function(){this.getRenderer().getConstants().refreshTheme(this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(e){return void 0!==e.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.updateColourFromTheme();var e=new Blockly.Events.Ui(null,"theme",null,null);e.workspaceId=this.id,Blockly.Events.fire(e)},Blockly.WorkspaceSvg.prototype.updateBlockStyles_=function(e){for(var t,n=0;t=e[n];n++){var o=t.getStyleName();o&&(t.setStyle(o),t.mutator)&&t.mutator.updateBlockStyle()}},Blockly.WorkspaceSvg.prototype.getInverseScreenCTM=function(){var e;return this.inverseScreenCTMDirty_&&(e=this.getParentSvg().getScreenCTM())&&(this.inverseScreenCTM_=e.inverse(),this.inverseScreenCTMDirty_=!1),this.inverseScreenCTM_},Blockly.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},Blockly.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},Blockly.WorkspaceSvg.prototype.getSvgXY=function(e){var t=0,n=0,o=1;(Blockly.utils.dom.containsNode(this.getCanvas(),e)||Blockly.utils.dom.containsNode(this.getBubbleCanvas(),e))&&(o=this.scale);do{var r=Blockly.utils.getRelativeXY(e)}while(e!=this.getCanvas()&&e!=this.getBubbleCanvas()||(o=1),t+=r.x*o,n+=r.y*o,(e=e.parentNode)&&e!=this.getParentSvg());return new Blockly.utils.Coordinate(t,n)},Blockly.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return Blockly.utils.getInjectionDivXY_(this.getCanvas())},Blockly.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var e=this.svgGroup_;e;){if(-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=e;break}e=e.parentNode}return this.injectionDiv_},Blockly.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},Blockly.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(e){this.resizeHandlerWrapper_=e},Blockly.WorkspaceSvg.prototype.createDom=function(e){if(this.svgGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyWorkspace"},null),e&&(this.svgBackground_=Blockly.utils.dom.createSvgElement("rect",{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"==e&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(Blockly.bindEventWithChecks_(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),Blockly.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories){if(!Blockly.Toolbox)throw Error("Missing require for Blockly.Toolbox");this.toolbox_=new Blockly.Toolbox(this)}return this.grid_&&this.grid_.update(this.scale),this.recordDeleteAreas(),this.markerManager_.setCursor(new Blockly.Cursor),this.markerManager_.registerMarker(Blockly.navigation.MARKER_NAME,new Blockly.Marker),(e=this.getRenderer().getConstants()).injectCSS(this.getRenderer().name),e.createDom(this.svgGroup_),this.svgGroup_},Blockly.WorkspaceSvg.prototype.dispose=function(){var e;this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(Blockly.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.getConstants().dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),Blockly.WorkspaceSvg.superClass_.dispose.call(this),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,this.options.parentWorkspace||(e=this.getParentSvg().parentNode)&&Blockly.utils.dom.removeNode(e),this.resizeHandlerWrapper_&&(Blockly.unbindEvent_(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},Blockly.WorkspaceSvg.prototype.newBlock=function(e,t){return e=new Blockly.BlockSvg(this,e,t),this.loadingEventsDisabled||e.onLoadedIntoWorkspace(),e},Blockly.WorkspaceSvg.prototype.addTrashcan=function(){if(!Blockly.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new Blockly.Trashcan(this);var e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_)},Blockly.WorkspaceSvg.prototype.addZoomControls=function(){if(!Blockly.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new Blockly.ZoomControls(this);var e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)},Blockly.WorkspaceSvg.prototype.addFlyout=function(e){var t={parentWorkspace:this,RTL:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,toolboxPosition:this.options.toolboxPosition,renderer:this.options.renderer};if(this.horizontalLayout){if(!Blockly.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout_=new Blockly.HorizontalFlyout(t)}else{if(!Blockly.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout_=new Blockly.VerticalFlyout(t)}return this.flyout_.autoClose=!1,this.flyout_.createDom(e)},Blockly.WorkspaceSvg.prototype.getFlyout=function(e){return this.flyout_||e?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},Blockly.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},Blockly.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDeleteAreas()},Blockly.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},Blockly.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position(),this.trashcan&&this.trashcan.position(),this.zoomControls_&&this.zoomControls_.position(),this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},Blockly.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var e=Blockly.utils.getDocumentScroll();Blockly.utils.Coordinate.equals(this.lastRecordedPageScroll_,e)||(this.lastRecordedPageScroll_=e,this.updateScreenCalculations_())},Blockly.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},Blockly.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},Blockly.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var e=this.svgGroup_;e;){if("svg"==e.tagName){this.cachedParentSvg_=e;break}e=e.parentNode}return this.cachedParentSvg_},Blockly.WorkspaceSvg.prototype.translate=function(e,t){var n;this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_?this.workspaceDragSurface_.translateSurface(e,t):(n="translate("+e+","+t+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",n),this.svgBubbleCanvas_.setAttribute("transform",n)),this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(e,t,this.scale),this.grid_&&this.grid_.moveTo(e,t)},Blockly.WorkspaceSvg.prototype.resetDragSurface=function(){var e;this.useWorkspaceDragSurface_&&(this.isDragSurfaceActive_=!1,e=this.workspaceDragSurface_.getSurfaceTranslation(),this.workspaceDragSurface_.clearAndHide(this.svgGroup_),e="translate("+e.x+","+e.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",e),this.svgBubbleCanvas_.setAttribute("transform",e))},Blockly.WorkspaceSvg.prototype.setupDragSurface=function(){var e,t,n,o;this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_&&(this.isDragSurfaceActive_=!0,e=this.svgBlockCanvas_.previousSibling,t=parseInt(this.getParentSvg().getAttribute("width"),10),n=parseInt(this.getParentSvg().getAttribute("height"),10),o=Blockly.utils.getRelativeXY(this.getCanvas()),this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),e,t,n,this.scale),this.workspaceDragSurface_.translateSurface(o.x,o.y))},Blockly.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},Blockly.WorkspaceSvg.prototype.getWidth=function(){var e=this.getMetrics();return e?e.viewWidth/this.scale:0},Blockly.WorkspaceSvg.prototype.setVisible=function(e){if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&(this.toolbox_.HtmlDiv.style.display=e?"block":"none"),e){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].markDirty();this.render(),this.resize()}else Blockly.hideChaff(!0),Blockly.DropDownDiv.hideWithoutAnimation();this.isVisible_=e},Blockly.WorkspaceSvg.prototype.render=function(){for(var e=this.getAllBlocks(!1),t=e.length-1;0<=t;t--)e[t].render(!1);if(this.currentGesture_)for(e=this.currentGesture_.getInsertionMarkers(),t=0;t<e.length;t++)e[t].render(!1)},Blockly.WorkspaceSvg.prototype.traceOn=function(){console.warn("Deprecated call to traceOn, delete this.")},Blockly.WorkspaceSvg.prototype.highlightBlock=function(e,t){if(void 0===t){for(var n,o=0;n=this.highlightedBlocks_[o];o++)n.setHighlighted(!1);this.highlightedBlocks_.length=0}(n=e?this.getBlockById(e):null)&&((e=void 0===t||t)?-1==this.highlightedBlocks_.indexOf(n)&&this.highlightedBlocks_.push(n):Blockly.utils.arrayRemove(this.highlightedBlocks_,n),n.setHighlighted(e))},Blockly.WorkspaceSvg.prototype.paste=function(e){this.rendered&&(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==e.tagName.toLowerCase()?this.pasteWorkspaceComment_(e):this.pasteBlock_(e))},Blockly.WorkspaceSvg.prototype.pasteBlock_=function(e){Blockly.Events.disable();try{var t,n=Blockly.Xml.domToBlock(e,this),o=this.getMarker(Blockly.navigation.MARKER_NAME).getCurNode();if(this.keyboardAccessibilityMode&&o&&o.isConnection())return t=o.getLocation(),void Blockly.navigation.insertBlock(n,t);var r=parseInt(e.getAttribute("x"),10),i=parseInt(e.getAttribute("y"),10);if(!isNaN(r)&&!isNaN(i)){this.RTL&&(r=-r);do{e=!1;var s,a=this.getAllBlocks(!1);for(o=0;s=a[o];o++){var l=s.getRelativeToSurfaceXY();if(Math.abs(r-l.x)<=1&&Math.abs(i-l.y)<=1){e=!0;break}}if(!e)for(var c,u=n.getConnections_(!1),o=0;c=u[o];o++)if(c.closest(Blockly.SNAP_RADIUS,new Blockly.utils.Coordinate(r,i)).connection){e=!0;break}}while(e&&(r=this.RTL?r-Blockly.SNAP_RADIUS:r+Blockly.SNAP_RADIUS,i+=2*Blockly.SNAP_RADIUS),e);n.moveBy(r,i)}}finally{Blockly.Events.enable()}Blockly.Events.isEnabled()&&!n.isShadow()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(n)),n.select()},Blockly.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(e){Blockly.Events.disable();try{var t=Blockly.WorkspaceCommentSvg.fromXml(e,this),n=parseInt(e.getAttribute("x"),10),o=parseInt(e.getAttribute("y"),10);isNaN(n)||isNaN(o)||(this.RTL&&(n=-n),t.moveBy(n+50,o+50))}finally{Blockly.Events.enable()}Blockly.Events.isEnabled()&&Blockly.WorkspaceComment.fireCreateEvent(t),t.select()},Blockly.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.getFlyout()&&e.toolbox_.refreshSelection()},Blockly.WorkspaceSvg.prototype.renameVariableById=function(e,t){Blockly.WorkspaceSvg.superClass_.renameVariableById.call(this,e,t),this.refreshToolboxSelection()},Blockly.WorkspaceSvg.prototype.deleteVariableById=function(e){Blockly.WorkspaceSvg.superClass_.deleteVariableById.call(this,e),this.refreshToolboxSelection()},Blockly.WorkspaceSvg.prototype.createVariable=function(e,t,n){return e=Blockly.WorkspaceSvg.superClass_.createVariable.call(this,e,t,n),this.refreshToolboxSelection(),e},Blockly.WorkspaceSvg.prototype.recordDeleteAreas=function(){this.deleteAreaTrash_=this.trashcan&&this.svgGroup_.parentNode?this.trashcan.getClientRect():null,this.deleteAreaToolbox_=this.flyout_?this.flyout_.getClientRect():this.toolbox_?this.toolbox_.getClientRect():null},Blockly.WorkspaceSvg.prototype.isDeleteArea=function(e){return this.deleteAreaTrash_&&this.deleteAreaTrash_.contains(e.clientX,e.clientY)?Blockly.DELETE_AREA_TRASH:this.deleteAreaToolbox_&&this.deleteAreaToolbox_.contains(e.clientX,e.clientY)?Blockly.DELETE_AREA_TOOLBOX:Blockly.DELETE_AREA_NONE},Blockly.WorkspaceSvg.prototype.onMouseDown_=function(e){var t=this.getGesture(e);t&&t.handleWsStart(e,this)},Blockly.WorkspaceSvg.prototype.startDrag=function(e,t){(e=Blockly.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,this.dragDeltaXY_=Blockly.utils.Coordinate.difference(t,e)},Blockly.WorkspaceSvg.prototype.moveDrag=function(e){return(e=Blockly.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,Blockly.utils.Coordinate.sum(this.dragDeltaXY_,e)},Blockly.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()};Blockly.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},Blockly.WorkspaceSvg.prototype.isContentBounded=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.controls||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},Blockly.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},Blockly.WorkspaceSvg.prototype.onMouseWheel_=function(e){var t,n,o;Blockly.Gesture.inProgress()?(e.preventDefault(),e.stopPropagation()):(t=this.options.zoomOptions&&this.options.zoomOptions.wheel,n=this.options.moveOptions&&this.options.moveOptions.wheel,(t||n)&&(o=Blockly.utils.getScrollDeltaPixels(e),!t||!e.ctrlKey&&n?(t=this.scrollX-o.x,n=this.scrollY-o.y,e.shiftKey&&!o.x&&(t=this.scrollX-o.y,n=this.scrollY),this.scroll(t,n)):(o=-o.y/50,t=Blockly.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,o)),e.ctrlKey||e.metaKey?(o=-e.deltaY/50,t=Blockly.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,o)):(Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),t=this.scrollX-e.deltaX,n=this.scrollY-e.deltaY,this.startDragMetrics=this.getMetrics(),this.scroll(t,n)),e.preventDefault()))},Blockly.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var e=this.getTopBlocks(!1),t=this.getTopComments(!1);if(!(e=e.concat(t)).length)return new Blockly.utils.Rect(0,0,0,0);for(var t=e[0].getBoundingRectangle(),n=1;n<e.length;n++){var o=e[n].getBoundingRectangle();o.top<t.top&&(t.top=o.top),o.bottom>t.bottom&&(t.bottom=o.bottom),o.left<t.left&&(t.left=o.left),o.right>t.right&&(t.right=o.right)}return t},Blockly.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),Blockly.Events.setGroup(!0);for(var e,t,n=this.getTopBlocks(!0),o=0,r=0;e=n[r];r++)e.isMovable()&&(t=e.getRelativeToSurfaceXY(),e.moveBy(-t.x,o-t.y),e.snapToGrid(),o=e.getRelativeToSurfaceXY().y+e.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT);Blockly.Events.setGroup(!1),this.setResizesEnabled(!0)},Blockly.WorkspaceSvg.prototype.showContextMenu=function(e){function t(){Blockly.Events.setGroup(o);var e=u.shift();e&&(e.workspace?(e.dispose(!1,!0),setTimeout(t,p)):t()),Blockly.Events.setGroup(!1)}if(!this.options.readOnly&&!this.isFlyout){var n=[],r=this.getTopBlocks(!0),o=Blockly.utils.genUid(),i=this;if((g={}).text=Blockly.Msg.UNDO,g.enabled=0<this.undoStack_.length,g.callback=this.undo.bind(this,!1),n.push(g),(g={}).text=Blockly.Msg.REDO,g.enabled=0<this.redoStack_.length,g.callback=this.undo.bind(this,!0),n.push(g),this.options.comments&&n.push(Blockly.ContextMenu.workspaceCommentOption(i,e)),this.isMovable()&&((g={}).text=Blockly.Msg.CLEAN_UP,g.enabled=1<r.length,g.callback=this.cleanUp.bind(this),n.push(g)),this.options.collapse){for(var s=g=!1,a=0;a<r.length;a++)for(var l=r[a];l;)l.isCollapsed()?g=!0:s=!0,l=l.getNextBlock();var c=function(e){for(var t=0,n=0;n<r.length;n++)for(var o=r[n];o;)setTimeout(o.setCollapsed.bind(o,e),t),o=o.getNextBlock(),t+=p};(s={enabled:s&&!this.options.debugMode}).text=Blockly.Msg.COLLAPSE_ALL,s.callback=function(){c(!0)},n.push(s),(g={enabled:g&&!this.options.debugMode}).text=Blockly.Msg.EXPAND_ALL,g.callback=function(){c(!1)},n.push(g)}for(var u=Blockly.WorkspaceSvg.buildDeleteList_(r),d=0,a=0;a<u.length;a++)u[a].isShadow()||d++;var p=10,g={text:1==u.length?Blockly.Msg.DELETE_BLOCK:Blockly.Msg.DELETE_X_BLOCKS.replace("%1",String(u.length)),enabled:0<u.length&&!this.options.debugMode,callback:function(){i.currentGesture_&&i.currentGesture_.cancel(),d<2?t():Blockly.confirm(Blockly.Msg.DELETE_ALL_BLOCKS.replace("%1",u.length),function(e){e&&t()})}};n.push(g),this.configureContextMenu&&this.configureContextMenu(n,e),Blockly.ContextMenu.show(e,n,this.RTL)}},Blockly.WorkspaceSvg.buildDeleteList_=function(e){for(var o=[],t=0;t<e.length;t++)!function e(t){if(t.isDeletable())o=o.concat(t.getDescendants());else{t=t.getChildren();for(var n=0;n<t.length;n++)e(t[n])}}(e[t]);return o},Blockly.WorkspaceSvg.prototype.updateToolbox=function(e){if(e=Blockly.Options.parseToolboxTree(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.getElementsByTagName("category").length){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.renderTree(e)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout_.show(e.childNodes)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},Blockly.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(Blockly.mainWorkspace=this).setBrowserFocus()},Blockly.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(e){try{this.getParentSvg().parentNode.setActive()}catch(e){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},Blockly.WorkspaceSvg.prototype.zoom=function(e,t,n){n=Math.pow(this.options.zoomOptions.scaleSpeed,n);var o,r,i=this.scale*n;this.scale!=i&&(i>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale/this.scale:i<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale/this.scale),o=this.getCanvas().getCTM(),(r=this.getParentSvg().createSVGPoint()).x=e,r.y=t,e=(r=r.matrixTransform(o.inverse())).x,t=r.y,o=o.translate(e*(1-n),t*(1-n)).scale(n),this.scrollX=o.e,this.scrollY=o.f,this.setScale(i),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation())},Blockly.WorkspaceSvg.prototype.zoomCenter=function(e){var t,n=this.getMetrics();n=this.flyout_?(t=n.svgWidth/2,n.svgHeight/2):(t=n.viewWidth/2+n.absoluteLeft,n.viewHeight/2+n.absoluteTop),this.zoom(t,n,e)},Blockly.WorkspaceSvg.prototype.zoomToFit=function(){var e,t,n,o;this.isMovable()?(e=(t=this.getMetrics()).viewWidth,t=t.viewHeight,n=(o=this.getBlocksBoundingBox()).right-o.left,o=o.bottom-o.top,n&&(this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),o+=this.flyout_.getHeight()/this.scale):(e+=this.flyout_.getWidth(),n+=this.flyout_.getWidth()/this.scale)),this.setScale(Math.min(e/n,t/o)),this.scrollCenter())):console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},Blockly.WorkspaceSvg.prototype.beginCanvasTransition=function(){Blockly.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),Blockly.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},Blockly.WorkspaceSvg.prototype.endCanvasTransition=function(){Blockly.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),Blockly.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},Blockly.WorkspaceSvg.prototype.scrollCenter=function(){var e,t,n;this.isMovable()?(t=((e=this.getMetrics()).contentWidth-e.viewWidth)/2,n=(e.contentHeight-e.viewHeight)/2,t=-t-e.contentLeft,n=-n-e.contentTop,this.scroll(t,n)):console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},Blockly.WorkspaceSvg.prototype.centerOnBlock=function(e,t){var n,o,r;this.isMovable()?(e=e?this.getBlockById(e):null)&&(t&&Blockly.utils.dom.addClass(this.svgBlockCanvas_,"blocklyTransitioning"),n=e.getRelativeToSurfaceXY(),o=this.scale,t=(n.x+(this.RTL?-1:1)*e.width/2)*o,e=(n.y+e.height/2)*o,t=-(t-(n=this.getMetrics()).contentLeft-n.viewWidth/2)-n.contentLeft,e=-(e-n.contentTop-n.viewHeight/2)-n.contentTop,Blockly.hideChaff(),this.scroll(t,e),r=this.svgBlockCanvas_,setTimeout(function(){Blockly.utils.dom.removeClass(r,"blocklyTransitioning")},Blockly.Colours.canvasTransitionLength)):console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},Blockly.WorkspaceSvg.prototype.setScale=function(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,Blockly.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDeleteAreas()),this.grid_&&this.grid_.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?(this.scrollbar.hScroll.resizeViewHorizontal(e),this.scrollbar.vScroll.resizeViewVertical(e)):(this.scrollbar.hScroll.resizeContentHorizontal(e),this.scrollbar.vScroll.resizeContentVertical(e)))},Blockly.WorkspaceSvg.prototype.scroll=function(e,t){Blockly.hideChaff(!0);var n=this.getMetrics(),o=n.contentWidth+n.contentLeft-n.viewWidth,r=n.contentHeight+n.contentTop-n.viewHeight;e=Math.min(e,-n.contentLeft),t=Math.min(t,-n.contentTop),e=Math.max(e,-o),t=Math.max(t,-r),this.scrollX=e,this.scrollY=t,this.scrollbar&&(this.scrollbar.hScroll.setHandlePosition(-(e+n.contentLeft)*this.scrollbar.hScroll.ratio_),this.scrollbar.vScroll.setHandlePosition(-(t+n.contentTop)*this.scrollbar.vScroll.ratio_)),e+=n.absoluteLeft,t+=n.absoluteTop,Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),this.translate(e,t)},Blockly.WorkspaceSvg.prototype.updateStackGlowScale_=function(){this.options.stackGlowBlur&&this.options.stackGlowBlur.setAttribute("stdDeviation",Blockly.STACK_GLOW_RADIUS/this.scale),this.options.selectedGlowBlur&&this.options.selectedGlowBlur.setAttribute("stdDeviation",Blockly.STACK_GLOW_RADIUS/this.scale)},Blockly.WorkspaceSvg.getDimensionsPx_=function(e){var t=0,n=0;return e&&(t=e.getWidth(),n=e.getHeight()),{width:t,height:n}},Blockly.WorkspaceSvg.getContentDimensions_=function(e,t){return e.isContentBounded()?Blockly.WorkspaceSvg.getContentDimensionsBounded_(e,t):Blockly.WorkspaceSvg.getContentDimensionsExact_(e)},Blockly.WorkspaceSvg.getContentDimensionsExact_=function(e){var t=e.getBlocksBoundingBox(),n=e.scale,o=(e=t.top*n,t.bottom*n),r=t.left*n;return{top:e,bottom:o,left:r,right:t=t.right*n,width:t-r,height:o-e}},Blockly.WorkspaceSvg.getContentDimensionsBounded_=function(e,t){e=Blockly.WorkspaceSvg.getContentDimensionsExact_(e);var n=t.width,o=n/2,r=(t=t.height)/2,i=Math.min(e.left-o,e.right-n),s=Math.min(e.top-r,e.bottom-t);return{left:i,top:s,height:Math.max(e.bottom+r,e.top+t)-s,width:Math.max(e.right+o,e.left+n)-i}},Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_=function(){var e=Blockly.WorkspaceSvg.getDimensionsPx_(this.toolbox_),t=Blockly.WorkspaceSvg.getDimensionsPx_(this.flyout_),n=Blockly.svgSize(this.getParentSvg()),o={height:n.height,width:n.width},r=(this.toolbox_?this.toolboxPosition==Blockly.TOOLBOX_AT_TOP||this.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM?o.height-=e.height:this.toolboxPosition!=Blockly.TOOLBOX_AT_LEFT&&this.toolboxPosition!=Blockly.TOOLBOX_AT_RIGHT||(o.width-=e.width):this.flyout_&&(this.toolboxPosition==Blockly.TOOLBOX_AT_TOP||this.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM?o.height-=t.height:this.toolboxPosition!=Blockly.TOOLBOX_AT_LEFT&&this.toolboxPosition!=Blockly.TOOLBOX_AT_RIGHT||(o.width-=t.width)),Blockly.WorkspaceSvg.getContentDimensions_(this,o)),i=0,s=(this.toolbox_&&this.toolboxPosition==Blockly.TOOLBOX_AT_LEFT?i=e.width:this.flyout_&&this.toolboxPosition==Blockly.TOOLBOX_AT_LEFT&&(i=t.width),0);return this.toolbox_&&this.toolboxPosition==Blockly.TOOLBOX_AT_TOP?s=e.height:this.flyout_&&this.toolboxPosition==Blockly.TOOLBOX_AT_TOP&&(s=t.height),{contentHeight:r.height,contentWidth:r.width,contentTop:r.top,contentLeft:r.left,viewHeight:o.height,viewWidth:o.width,viewTop:-this.scrollY,viewLeft:-this.scrollX,absoluteTop:s,absoluteLeft:i,svgHeight:n.height,svgWidth:n.width,toolboxWidth:e.width,toolboxHeight:e.height,flyoutWidth:t.width,flyoutHeight:t.height,toolboxPosition:this.toolboxPosition}},Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(e){var t=this.getMetrics();"number"==typeof e.x&&(this.scrollX=-t.contentWidth*e.x-t.contentLeft),"number"==typeof e.y&&(this.scrollY=-t.contentHeight*e.y-t.contentTop),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)},Blockly.WorkspaceSvg.prototype.getBlockById=function(e){return Blockly.WorkspaceSvg.superClass_.getBlockById.call(this,e)},Blockly.WorkspaceSvg.prototype.getTopBlocks=function(e){return Blockly.WorkspaceSvg.superClass_.getTopBlocks.call(this,e)},Blockly.WorkspaceSvg.prototype.setResizesEnabled=function(e){var t=!this.resizesEnabled_&&e;this.resizesEnabled_=e,t&&this.resizeContents()},Blockly.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),Blockly.WorkspaceSvg.superClass_.clear.call(this),this.setResizesEnabled(!0)},Blockly.WorkspaceSvg.prototype.registerButtonCallback=function(e,t){if("function"!=typeof t)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[e]=t},Blockly.WorkspaceSvg.prototype.getButtonCallback=function(e){return(e=this.flyoutButtonCallbacks_[e])||null},Blockly.WorkspaceSvg.prototype.removeButtonCallback=function(e){this.flyoutButtonCallbacks_[e]=null},Blockly.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(e,t){if("function"!=typeof t)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[e]=t},Blockly.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(e){return this.toolboxCategoryCallbacks_[e]||null},Blockly.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(e){this.toolboxCategoryCallbacks_[e]=null},Blockly.WorkspaceSvg.prototype.getGesture=function(e){var t="mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type,n=this.currentGesture_;return n?t&&n.hasStarted()?(console.warn("Tried to start the same gesture twice."),n.cancel(),null):n:t?this.currentGesture_=new Blockly.TouchGesture(e,this):null},Blockly.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},Blockly.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},Blockly.WorkspaceSvg.prototype.startDragWithFakeEvent=function(e,t){Blockly.Touch.clearTouchIdentifier(),Blockly.Touch.checkTouchIdentifier(e),t.workspace.getGesture(e).forceStartBlockDrag(e,t)},Blockly.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},Blockly.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},Blockly.inject=function(e,t){if(Blockly.checkBlockColourConstants(),!(e="string"==typeof e?document.getElementById(e)||document.querySelector(e):e)||!Blockly.utils.dom.containsNode(document,e))throw Error("Error: container is not in current document.");t=new Blockly.Options(t||{});var n=document.createElement("div"),o=(n.className="injectionDiv",n.tabIndex=0,Blockly.utils.aria.setState(n,Blockly.utils.aria.State.LABEL,Blockly.Msg.WORKSPACE_ARIA_LABEL),e.appendChild(n),Blockly.utils.dom.startTextWidthCache(),e=Blockly.createDom_(n,t),new Blockly.BlockDragSurfaceSvg(n)),r=new Blockly.WorkspaceDragSurfaceSvg(n),i=Blockly.createMainWorkspace_(e,t,o,r);return Blockly.user.keyMap.setKeyMap(t.keyMap),Blockly.init_(i),Blockly.mainWorkspace=i,Blockly.svgResize(i),n.addEventListener("focusin",function(){Blockly.mainWorkspace=i}),i},Blockly.createDom_=function(e,t){e.setAttribute("dir","LTR"),Blockly.Component.defaultRightToLeft=t.RTL,Blockly.Css.inject(t.hasCss,t.pathToMedia),e=Blockly.utils.dom.createSvgElement("svg",{xmlns:Blockly.utils.dom.SVG_NS,"xmlns:html":Blockly.utils.dom.HTML_NS,"xmlns:xlink":Blockly.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},e);var n=Blockly.utils.dom.createSvgElement("defs",{},e),o=String(Math.random()).substring(2);return t.gridPattern=Blockly.Grid.createDom(o,t.gridOptions,n),e},Blockly.createMainWorkspace_=function(e,t,n,o){t.parentWorkspace=null;var l=new Blockly.WorkspaceSvg(t,n,o);return l.scale=t.zoomOptions.startScale,e.appendChild(l.createDom("blocklyMainBackground")),Blockly.utils.dom.addClass(l.getInjectionDiv(),(l.options.renderer||"geras")+"-renderer"),Blockly.utils.dom.addClass(l.getInjectionDiv(),l.getTheme().name+"-theme"),!t.hasCategories&&t.languageTree&&(n=l.addFlyout("svg"),Blockly.utils.dom.insertAfter(n,e)),t.hasTrashcan&&l.addTrashcan(),t.zoomOptions&&t.zoomOptions.controls&&l.addZoomControls(),l.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),l.translate(0,0),t.readOnly||l.isMovable()||l.addChangeListener(function(e){if(!l.isDragging()&&!l.isMovable()&&-1!=Blockly.Events.BUMP_EVENTS.indexOf(e.type)){var t,n,o,r=Object.create(null),i=l.getMetrics(),s=l.scale;if(r.RTL=l.RTL,r.viewLeft=i.viewLeft/s,r.viewTop=i.viewTop/s,r.viewRight=(i.viewLeft+i.viewWidth)/s,r.viewBottom=(i.viewTop+i.viewHeight)/s,l.isContentBounded()?(i=l.getBlocksBoundingBox(),r.contentLeft=i.left,r.contentTop=i.top,r.contentRight=i.right,r.contentBottom=i.bottom):(r.contentLeft=i.contentLeft/s,r.contentTop=i.contentTop/s,r.contentRight=(i.contentLeft+i.contentWidth)/s,r.contentBottom=(i.contentTop+i.contentHeight)/s),r.contentTop<r.viewTop||r.contentBottom>r.viewBottom||r.contentLeft<r.viewLeft||r.contentRight>r.viewRight){switch(i=null,e&&(i=Blockly.Events.getGroup(),Blockly.Events.setGroup(e.group)),e.type){case Blockly.Events.BLOCK_CREATE:case Blockly.Events.BLOCK_MOVE:var a=(a=l.getBlockById(e.blockId))&&a.getRootBlock();break;case Blockly.Events.COMMENT_CREATE:case Blockly.Events.COMMENT_MOVE:a=l.getCommentById(e.commentId)}a&&((s=a.getBoundingRectangle()).height=s.bottom-s.top,s.width=s.right-s.left,n=r.viewTop,t=r.viewBottom-s.height,t=Math.max(n,t),n=Blockly.utils.math.clamp(n,s.top,t)-s.top,t=r.viewLeft,o=r.viewRight-s.width,r.RTL?t=Math.min(o,t):o=Math.max(t,o),r=Blockly.utils.math.clamp(t,s.left,o)-s.left,a.moveBy(r,n)),e&&(!e.group&&a&&console.log("WARNING: Moved object in bounds but there was no event group. This may break undo."),null!==i)&&Blockly.Events.setGroup(i)}}}),Blockly.svgResize(l),Blockly.WidgetDiv.createDom(),Blockly.DropDownDiv.createDom(),Blockly.Tooltip.createDom(),l},Blockly.init_=function(e){var t,n=e.options,o=e.getParentSvg();Blockly.bindEventWithChecks_(o.parentNode,"contextmenu",null,function(e){Blockly.utils.isTargetInput(e)||e.preventDefault()}),o=Blockly.bindEventWithChecks_(window,"resize",null,function(){Blockly.utils.resizeTracker(e),Blockly.hideChaffOnResize(!0),Blockly.svgResize(e)}),e.setResizeHandlerWrapper(o),Blockly.inject.bindDocumentEvents_(),n.languageTree&&(o=e.getToolbox(),t=e.getFlyout(!0),o?o.init():t&&(t.init(e),t.show(n.languageTree.childNodes),t.scrollToStart(),n.horizontalLayout?(e.scrollY=t.height_,n.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM&&(e.scrollY*=-1)):(e.scrollX=t.width_,n.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT&&(e.scrollX*=-1)),e.translate(e.scrollX,e.scrollY))),o=Blockly.Scrollbar.scrollbarThickness,n.hasTrashcan&&(o=e.trashcan.init(o)),n.zoomOptions&&n.zoomOptions.controls&&e.zoomControls_.init(o),n.moveOptions&&n.moveOptions.scrollbars?(e.scrollbar=new Blockly.ScrollbarPair(e),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),n.hasSounds&&Blockly.inject.loadSounds_(n.pathToMedia,e)},Blockly.inject.bindDocumentEvents_=function(){Blockly.documentEventsBound_||(Blockly.bindEventWithChecks_(document,"scroll",null,function(){for(var e,t=Blockly.Workspace.getAll(),n=0;e=t[n];n++)e.updateInverseScreenCTM&&e.updateInverseScreenCTM()}),Blockly.bindEventWithChecks_(document,"keydown",null,Blockly.onKeyDown),Blockly.bindEvent_(document,"touchend",null,Blockly.longStop_),Blockly.bindEvent_(document,"touchcancel",null,Blockly.longStop_),Blockly.utils.userAgent.IPAD&&Blockly.bindEventWithChecks_(window,"orientationchange",document,function(){Blockly.svgResize(Blockly.getMainWorkspace())})),Blockly.documentEventsBound_=!0},Blockly.inject.loadSounds_=function(e,t){var n=t.getAudioManager(),o=(n.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),n.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),n.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete"),[]);e=function(){for(;o.length;)Blockly.unbindEvent_(o.pop());n.preload()},o.push(Blockly.bindEventWithChecks_(document,"mousemove",null,e,!0)),o.push(Blockly.bindEventWithChecks_(document,"touchstart",null,e,!0))},Blockly.Names=function(e,t){if(this.variablePrefix_=t||"",this.reservedDict_=Object.create(null),e)for(e=e.split(","),t=0;t<e.length;t++)this.reservedDict_[e[t]]=!0;this.reset()},Blockly.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",Blockly.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},Blockly.Names.prototype.setVariableMap=function(e){this.variableMap_=e},Blockly.Names.prototype.getNameForUserVariable_=function(e){return this.variableMap_?(e=this.variableMap_.getVariableById(e))?e.name:null:(console.log("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the folowing code in your generator's init() function:\nBlockly.YourGeneratorName.variableDB_.setVariableMap(workspace.getVariableMap());"),null)},Blockly.Names.prototype.getName=function(e,t){n=(e=t==Blockly.VARIABLE_CATEGORY_NAME&&(n=this.getNameForUserVariable_(e))?n:e).toLowerCase()+"_"+t;var n,o=t==Blockly.VARIABLE_CATEGORY_NAME||t==Blockly.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";return n in this.db_?o+this.db_[n]:(e=this.getDistinctName(e,t),this.db_[n]=e.substr(o.length),e)},Blockly.Names.prototype.getDistinctName=function(e,t){e=this.safeName_(e);for(var n="";this.dbReverse_[e+n]||e+n in this.reservedDict_;)n=n?n+1:2;return this.dbReverse_[e+=n]=!0,(t==Blockly.VARIABLE_CATEGORY_NAME||t==Blockly.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+e},Blockly.Names.prototype.safeName_=function(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(e[0])&&(e="my_"+e)):e=Blockly.Msg.UNNAMED_KEY||"unnamed",e},Blockly.Names.equals=function(e,t){return e.toLowerCase()==t.toLowerCase()},Blockly.Procedures={},Blockly.Procedures.NAME_TYPE=Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Procedures.DEFAULT_ARG="x",Blockly.Procedures.allProcedures=function(e){e=e.getAllBlocks(!1);for(var t,n=[],o=[],r=0;r<e.length;r++)e[r].getProcedureDef&&(t=e[r].getProcedureDef())&&(t[2]?n:o).push(t);return o.sort(Blockly.Procedures.procTupleComparator_),n.sort(Blockly.Procedures.procTupleComparator_),[o,n]},Blockly.Procedures.procTupleComparator_=function(e,t){return e[0].toLowerCase().localeCompare(t[0].toLowerCase())},Blockly.Procedures.findLegalName=function(e,t){if(!t.isInFlyout)for(e=e||Blockly.Msg.UNNAMED_KEY||"unnamed";!Blockly.Procedures.isLegalName_(e,t.workspace,t);){var n=e.match(/^(.*?)(\d+)$/);e=n?n[1]+(parseInt(n[2],10)+1):e+"2"}return e},Blockly.Procedures.isLegalName_=function(e,t,n){return!Blockly.Procedures.isNameUsed(e,t,n)},Blockly.Procedures.isNameUsed=function(e,t,n){t=t.getAllBlocks(!1);for(var o=0;o<t.length;o++)if(t[o]!=n){var r="";if(t[o].getProcedureDef?r=t[o].getProcedureDef()[0]:t[o].getName&&(r=t[o].getName()),Blockly.Names.equals(r,e))return!0}return!1},Blockly.Procedures.rename=function(e){e=e.trim();var t=Blockly.Procedures.findLegalName(e,this.getSourceBlock()),n=this.getValue();if(!t)return n;if(n!=e&&n!=t){e=this.getSourceBlock().workspace.getAllBlocks(!1);for(var o=0;o<e.length;o++)e[o].renameProcedure&&e[o].renameProcedure(n,t)}return t},Blockly.Procedures.flyoutCategory=function(e){function t(e,t){for(var n=0;n<e.length;n++){var o=e[n][0],r=e[n][1],i=Blockly.utils.xml.createElement("block"),s=(i.setAttribute("type",t),i.setAttribute("gap",16),Blockly.utils.xml.createElement("mutation"));for(s.setAttribute("name",o),i.appendChild(s),o=0;o<r.length;o++){var a=Blockly.utils.xml.createElement("arg");a.setAttribute("name",r[o]),s.appendChild(a)}l.push(i)}}var n,o,l=[];return Blockly.Blocks.procedures_defnoreturn&&((n=Blockly.utils.xml.createElement("block")).setAttribute("type","procedures_defnoreturn"),n.setAttribute("gap",16),(o=Blockly.utils.xml.createElement("field")).setAttribute("name","NAME"),o.appendChild(Blockly.utils.xml.createTextNode(Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),n.appendChild(o),l.push(n)),Blockly.Blocks.procedures_defreturn&&((n=Blockly.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),n.setAttribute("gap",16),(o=Blockly.utils.xml.createElement("field")).setAttribute("name","NAME"),o.appendChild(Blockly.utils.xml.createTextNode(Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),n.appendChild(o),l.push(n)),Blockly.Blocks.procedures_ifreturn&&((n=Blockly.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),n.setAttribute("gap",16),l.push(n)),l.length&&l[l.length-1].setAttribute("gap",24),t((e=Blockly.Procedures.allProcedures(e))[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),l},Blockly.Procedures.updateMutatorFlyout_=function(e){for(var t,n=[],o=e.getBlocksByType("procedures_mutatorarg",!1),r=0;t=o[r];r++)n.push(t.getFieldValue("NAME"));o=Blockly.utils.xml.createElement("xml"),(r=Blockly.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(t=Blockly.utils.xml.createElement("field")).setAttribute("name","NAME"),n=Blockly.Variables.generateUniqueNameFromOptions(Blockly.Procedures.DEFAULT_ARG,n),n=Blockly.utils.xml.createTextNode(n),t.appendChild(n),r.appendChild(t),o.appendChild(r),e.updateToolbox(o)},Blockly.Procedures.mutatorOpenListener=function(e){var t;e.type!=Blockly.Events.UI||"mutatorOpen"!=e.element||!e.newValue||"procedures_defnoreturn"!=(t=(e=Blockly.Workspace.getById(e.workspaceId).getBlockById(e.blockId)).type)&&"procedures_defreturn"!=t||(e=e.mutator.getWorkspace(),Blockly.Procedures.updateMutatorFlyout_(e),e.addChangeListener(Blockly.Procedures.mutatorChangeListener_))},Blockly.Procedures.mutatorChangeListener_=function(e){e.type!=Blockly.Events.BLOCK_CREATE&&e.type!=Blockly.Events.BLOCK_DELETE&&e.type!=Blockly.Events.BLOCK_CHANGE||(e=Blockly.Workspace.getById(e.workspaceId),Blockly.Procedures.updateMutatorFlyout_(e))},Blockly.Procedures.getCallers=function(e,t){var n=[];t=t.getAllBlocks(!1);for(var o,r=0;r<t.length;r++)t[r].getProcedureCall&&(o=t[r].getProcedureCall())&&Blockly.Names.equals(o,e)&&n.push(t[r]);return n},Blockly.Procedures.mutateCallers=function(e){var t,n=Blockly.Events.recordUndo,o=e.getProcedureDef()[0],r=e.mutationToDom(!0);for(e=Blockly.Procedures.getCallers(o,e.workspace),o=0;t=e[o];o++){var i=(i=t.mutationToDom())&&Blockly.Xml.domToText(i),s=(t.domToMutation(r),t.mutationToDom());i!=(s=s&&Blockly.Xml.domToText(s))&&(Blockly.Events.recordUndo=!1,Blockly.Events.fire(new Blockly.Events.BlockChange(t,"mutation",null,i,s)),Blockly.Events.recordUndo=n)}},Blockly.Procedures.getDefinition=function(e,t){t=t.getTopBlocks(!1);for(var n=0;n<t.length;n++)if(t[n].getProcedureDef){var o=t[n].getProcedureDef();if(o&&Blockly.Names.equals(o[0],e))return t[n]}return null},Blockly.Functions={},Blockly.Functions.NAME_TYPE=Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Functions.flyoutCategory=function(e){var t=[];Blockly.Functions.addCreateButton_(e,t),e=Blockly.Functions.getAllFunctionDefinitionBlocks(e);for(var n=0;n<e.length;n++){var o=e[n].getName(),r=e[n].getArguments(),i=Blockly.utils.xml.createElement("block"),s=(i.setAttribute("type","function_call"),i.setAttribute("gap",16),Blockly.utils.xml.createElement("mutation"));for(s.setAttribute("name",o),i.appendChild(s),o=0;o<r.length;o++){var a=Blockly.utils.xml.createElement("arg");a.setAttribute("name",r[o].name),a.setAttribute("type",r[o].type),a.setAttribute("id",r[o].id),s.appendChild(a)}t.push(i)}return t},Blockly.Functions.addCreateButton_=function(e,t){var n=document.createElement("button");n.setAttribute("text",Blockly.Msg.FUNCTION_CREATE_NEW),n.setAttribute("callbackKey","CREATE_FUNCTION"),e.registerButtonCallback("CREATE_FUNCTION",function(){Blockly.Functions.createFunctionCallback_(e)}),t.push(n)},Blockly.Functions.getCallers=function(e,t){var n=[];t=t.getAllBlocks();for(var o=0;o<t.length;o++)t[o].type!=Blockly.FUNCTION_CALL_BLOCK_TYPE&&t[o].type!==Blockly.FUNCTION_CALL_OUTPUT_BLOCK_TYPE||!t[o].getName||t[o].getName()!=e||n.push(t[o]);return n},Blockly.Functions.getDefinition=function(e,t){t=t.getTopBlocks(!1);for(var n=0;n<t.length;n++)if(t[n].type==Blockly.FUNCTION_DEFINITION_BLOCK_TYPE&&t[n].getName&&t[n].getName()==e)return t[n];return null},Blockly.Functions.getAllFunctionDefinitionBlocks=function(e){e=e.getTopBlocks(!1);for(var t=[],n=0;n<e.length;n++)e[n].type===Blockly.FUNCTION_DEFINITION_BLOCK_TYPE&&t.push(e[n]);return t},Blockly.Functions.isCustomType=function(e){return!("boolean"==e||"string"==e||"number"==e)},Blockly.Functions.newFunctionMutation=function(e){return e='<xml><mutation name="'+Blockly.Functions.findLegalName(Blockly.Msg.FUNCTIONS_DEFAULT_FUNCTION_NAME,e)+'" functionid="'+Blockly.utils.genUid()+'"></mutation></xml>',(e=Blockly.Xml.textToDom(e).firstChild).removeAttribute("xmlns"),e},Blockly.Functions.incrementNameSuffix=function(e){var t=e.match(/^(.*?)(\d+)$/);return t?t[1]+(parseInt(t[2],10)+1):e+"2"},Blockly.Functions.findUniqueParamName=function(e,t){for(;!Blockly.Functions.isUniqueParamName(e,t);)e=Blockly.Functions.incrementNameSuffix(e);return e},Blockly.Functions.isUniqueParamName=function(e,t){return!t||-1==t.indexOf(e)},Blockly.Functions.createFunctionCallback_=function(e){Blockly.hideChaff(),Blockly.selected&&Blockly.selected.unselect(),Blockly.Functions.editFunctionExternalHandler(Blockly.Functions.newFunctionMutation(e),Blockly.Functions.createFunctionCallbackFactory_(e))},Blockly.Functions.createFunctionCallbackFactory_=function(o){return function(e){var t,n;e&&(e='<xml><block type="'+Blockly.FUNCTION_DEFINITION_BLOCK_TYPE+'">'+Blockly.Xml.domToText(e)+"</block></xml>",e=Blockly.Xml.textToDom(e),Blockly.Events.setGroup(!0),(e=Blockly.Xml.domToBlock(e.firstChild,o)).updateDisplay_(),o.getMetrics&&(t=o.getMetrics(),n=e.getHeightWidth(),e.moveBy(t.viewLeft+t.viewWidth/2-n.width/2,t.viewTop+t.viewHeight/2-n.height/2),e.scheduleSnapAndBump()),o.centerOnBlock(e.id),Blockly.Events.setGroup(!1))}},Blockly.Functions.editFunctionCallback_=function(e){var t;e.type!=Blockly.FUNCTION_CALL_BLOCK_TYPE&&e.type!=Blockly.FUNCTION_CALL_OUTPUT_BLOCK_TYPE||(t=e.workspace.isFlyout?e.workspace.targetWorkspace:e.workspace,e=Blockly.Functions.getDefinition(e.getName(),t)),Blockly.hideChaff(),Blockly.selected&&Blockly.selected.unselect(),Blockly.Functions.editFunctionExternalHandler(e.mutationToDom(),Blockly.Functions.editFunctionCallbackFactory_(e))},Blockly.Functions.editFunctionCallbackFactory_=function(t){return function(e){e&&(Blockly.Functions.mutateCallersAndDefinition(t.getName(),t.workspace,e),t.updateDisplay_())}},Blockly.Functions.editFunctionExternalHandler=function(e,t){console.warn("External function editor must be overriden: Blockly.Functions.editFunctionExternalHandler",e,t)},Blockly.Functions.makeEditOption=function(e){return{enabled:!e.inDebugWorkspace(),text:Blockly.Msg.FUNCTIONS_EDIT_OPTION,callback:function(){Blockly.Functions.editFunctionCallback_(e)}}},Blockly.Functions.makeCreateCallOption=function(e){var t=e.getField("function_name").getText(),n=goog.dom.createDom("mutation");return n.setAttribute("name",t),(n=goog.dom.createDom("block",null,n)).setAttribute("type","function_call"),{enabled:0<e.workspace.remainingCapacity()&&!e.inDebugWorkspace(),text:Blockly.Msg.FUNCTIONS_CREATE_CALL_OPTION.replace("%1",t),callback:Blockly.ContextMenu.callbackFactory(e,n)}},Blockly.Functions.makeGoToDefinitionOption=function(t){return{enabled:!t.inDebugWorkspace(),text:Blockly.Msg.FUNCTIONS_GO_TO_DEFINITION_OPTION,callback:function(){var e=t.getField("function_name").getText();(e=Blockly.Functions.getDefinition(e,t.workspace))&&t.workspace.centerOnBlock(e.id)}}},Blockly.Functions.getReporterArgumentType=function(e){switch(e){case"Boolean":case"Number":case"String":return e.toLowerCase();default:return e}},Blockly.Functions.namesInUse=function(e,t,n){var o={};return e.getAllVariables().forEach(function(e){o[e.name]=!0}),e.getAllBlocks().forEach(function(e){e==t||n&&e.getFunctionId&&e.getFunctionId()==n||(e.type==Blockly.FUNCTION_DEFINITION_BLOCK_TYPE?o[e.getName()]=!0:"procedures_defreturn"!=e.type&&"procedures_defnoreturn"!=e.type||(o[e.getProcedureDef()[0]]=!0))}),o},Blockly.Functions.idsInUse=function(e){var t=[];return e.getAllBlocks().forEach(function(e){e.type==Blockly.FUNCTION_DEFINITION_BLOCK_TYPE&&t.push(e.getFunctionId())}),t},Blockly.Functions.findLegalName=function(e,t,n){if(!n||!n.isInFlyout)for(t=Blockly.Functions.namesInUse(t,n);t[e];)e=Blockly.Functions.incrementNameSuffix(e);return e},Blockly.Functions.rename=function(e){e=e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"");var t,n=Blockly.Functions.findLegalName(e,this.sourceBlock_.workspace,this.sourceBlock_),o=this.getValue();return e?n?o?(o!=e&&o!=n&&((e=this.sourceBlock_).name_=n,t=e.mutationToDom(),e.name_=o,Blockly.Functions.mutateCallersAndDefinition(o,e.workspace,t)),n):this.sourceBlock_.name_=n:e:o},Blockly.Functions.validateFunctionExternal=function(e,t){var n=e.getAttribute("name");if(!n)return Blockly.alert(Blockly.Msg.FUNCTION_WARNING_EMPTY_NAME),!1;for(var o={},r=0;r<e.childNodes.length;++r){var i=e.childNodes[r].getAttribute("name");if(!i)return Blockly.alert(Blockly.Msg.FUNCTION_WARNING_EMPTY_NAME),!1;if(o[i])return Blockly.alert(Blockly.Msg.FUNCTION_WARNING_DUPLICATE_ARG),!1;o[i]=!0}return o[n]?(Blockly.alert(Blockly.Msg.FUNCTION_WARNING_ARG_NAME_IS_FUNCTION_NAME),!1):(e=e.getAttribute("functionid"),!Blockly.Functions.namesInUse(t,null,e)[n]||(Blockly.alert(Blockly.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",n)),!1))},Blockly.Functions.getArgMap=function(e,t){for(var n={},o=0;o<e.childNodes.length;++o){var r=e.childNodes[o],i=t?r.getAttribute("id"):r.getAttribute("name"),r=t?r.getAttribute("name"):r.getAttribute("id");n[i]=r}return n},Blockly.Functions.mutateCallersAndDefinition=function(e,t,a){var l=Blockly.Functions.getDefinition(e,t);l?((e=Blockly.Functions.getCallers(e,l.workspace)).push(l),Blockly.Events.setGroup(!0),e.forEach(function(e){var o,r,t=e.mutationToDom(),n=t&&Blockly.Xml.domToText(t),i=(e.domToMutation(a),e.mutationToDom()),s=i&&Blockly.Xml.domToText(i);n!=s&&(Blockly.Events.fire(new Blockly.Events.BlockChange(e,"mutation",null,n,s)),e.id==l.id?(o=Blockly.Functions.getArgMap(t),r=Blockly.Functions.getArgMap(i,!0),l.getDescendants().forEach(function(e){var t,n;Blockly.Functions.isFunctionArgumentReporter(e)&&(t=e.getFieldValue("VALUE"),n=o[t],r[n]?r[n]!==t&&e.setFieldValue(r[n],"VALUE"):e.dispose())})):setTimeout(function(){e.bumpNeighbours()},Blockly.BUMP_DELAY))}),Blockly.Events.setGroup(!1)):console.warn("Attempted to change function "+e+", but no definition block was found on the workspace")},Blockly.Functions.isFunctionArgumentReporter=function(e){return"argument_reporter_boolean"==e.type||"argument_reporter_number"==e.type||"argument_reporter_string"==e.type||"argument_reporter_array"==e.type||"argument_reporter_custom"==e.type},Blockly.Functions.createFlyout=function(e,t){var n={disabledPatternId:e.options.disabledPatternId,parentWorkspace:e,RTL:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,toolboxPosition:e.options.toolboxPosition,zoomOptions:e.options.zoomOptions,renderer:e.options.renderer,newFunctions:e.options.newFunctions},o=(n=new(n.horizontalLayout?Blockly.HorizontalFlyout:Blockly.VerticalFlyout)(n)).createDom("svg");return goog.dom.insertSiblingAfter(o,t),n.init(e),n},Blockly.VariableModel=function(e,t,n,o){this.workspace=e,this.name=t,this.type=n||"",this.id_=o||Blockly.utils.genUid(),Blockly.Events.fire(new Blockly.Events.VarCreate(this))},Blockly.VariableModel.prototype.getId=function(){return this.id_},Blockly.VariableModel.compareByName=function(e,t){return(e=e.name.toLowerCase())<(t=t.name.toLowerCase())?-1:e==t?0:1},Blockly.Variables={},Blockly.Variables.NAME_TYPE=Blockly.VARIABLE_CATEGORY_NAME,Blockly.Variables.allUsedVarModels=function(e){var t=e.getAllBlocks(!1).filter(function(e){return!e.disabled});e=Object.create(null);for(var n=0;n<t.length;n++){var o=t[n].getVarModels();if(o)for(var r=0;r<o.length;r++){var i=o[r],s=i.getId();s&&(e[s]=i)}}for(s in t=[],e)t.push(e[s]);return t},Blockly.Variables.allUsedVariables=function(){console.warn("Deprecated call to Blockly.Variables.allUsedVariables. Use Blockly.Variables.allUsedVarModels instead.\nIf this is a major issue please file a bug on GitHub.")},Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},Blockly.Variables.allDeveloperVariables=function(e){e=e.getAllBlocks(!1);for(var t,n=Object.create(null),o=0;t=e[o];o++){var r=t.getDeveloperVariables;if(!r&&t.getDeveloperVars&&(r=t.getDeveloperVars,Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[t.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+t.type+"')"),Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[t.type]=!0)),r)for(t=r(),r=0;r<t.length;r++)n[t[r]]=!0}return Object.keys(n)},Blockly.Variables.flyoutCategory=function(e){var t=[],n=document.createElement("button");return n.setAttribute("text","%{BKY_NEW_VARIABLE}"),n.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback(Blockly.CREATE_VARIABLE_ID,function(e){Blockly.Variables.createVariableButtonHandler(e.getTargetWorkspace())}),t.push(n),e=Blockly.Variables.flyoutCategoryBlocks(e),t.concat(e)},Blockly.Variables.flyoutCategoryBlocks=function(e){var t=[];if(0<(e=e.getVariablesOfType("")).length){var n,o,r=e[e.length-1];if(Blockly.Blocks.variables_set&&((n=Blockly.utils.xml.createElement("block")).setAttribute("type","variables_set"),n.setAttribute("gap",Blockly.Blocks.math_change?8:24),n.appendChild(Blockly.Variables.generateVariableFieldDom(r)),t.push(n)),Blockly.Blocks.math_change&&((n=Blockly.utils.xml.createElement("block")).setAttribute("type","math_change"),n.setAttribute("gap",Blockly.Blocks.variables_get?20:8),n.appendChild(Blockly.Variables.generateVariableFieldDom(r)),r=Blockly.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),n.appendChild(r),t.push(n)),Blockly.Blocks.variables_get){e.sort(Blockly.VariableModel.compareByName),r=0;for(;o=e[r];r++)(n=Blockly.utils.xml.createElement("block")).setAttribute("type","variables_get"),n.setAttribute("gap",8),n.appendChild(Blockly.Variables.generateVariableFieldDom(o)),t.push(n)}}return t},Blockly.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",Blockly.Variables.generateUniqueName=function(e){return Blockly.Variables.generateUniqueNameFromOptions(Blockly.Variables.VAR_LETTER_OPTIONS.charAt(0),e.getAllVariableNames())},Blockly.Variables.generateUniqueNameFromOptions=function(e,t){if(!t.length)return e;for(var n=Blockly.Variables.VAR_LETTER_OPTIONS,o="",r=n.indexOf(e);;){for(var i=!1,s=0;s<t.length;s++)if(t[s].toLowerCase()==e){i=!0;break}if(!i)return e;++r==n.length&&(r=0,o=Number(o)+1),e=n.charAt(r)+o}},Blockly.Variables.createVariableButtonHandler=function(o,r,e){function i(e){Blockly.Variables.promptName(Blockly.Msg.NEW_VARIABLE_TITLE,e,function(e){var t,n;e?(t=Blockly.Variables.nameUsedWithAnyType_(e,o),n=Blockly.Functions.getDefinition(e,o),t||n?(n=n||t.type==s?Blockly.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",t.name):(n=Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",t.name).replace("%2",t.type),Blockly.alert(n,function(){i(e)})):(o.createVariable(e,s),r&&r(e))):r&&r(null)})}var s=e||"";i("")},Blockly.Variables.createVariable=Blockly.Variables.createVariableButtonHandler,Blockly.Variables.renameVariable=function(n,o,r){function i(e){var t=Blockly.Msg.RENAME_VARIABLE_TITLE.replace("%1",o.name);Blockly.Variables.promptName(t,e,function(e){var t;e?(t=Blockly.Variables.nameUsedWithOtherType_(e,o.type,n))?(t=Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",t.name).replace("%2",t.type),Blockly.alert(t,function(){i(e)})):(n.renameVariableById(o.getId(),e),r&&r(e)):r&&r(null)})}i(o.name||"")},Blockly.Variables.promptName=function(e,t,n){Blockly.prompt(e,t,function(e){!e||(e=e.replace(/[\s\xa0]+/g," ").trim())!=Blockly.Msg.RENAME_VARIABLE&&e!=Blockly.Msg.NEW_VARIABLE||(e=null),n(e)})},Blockly.Variables.nameUsedWithOtherType_=function(e,t,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(var o,r=0;o=n[r];r++)if(o.name.toLowerCase()==e&&o.type!=t)return o;return null},Blockly.Variables.nameUsedWithAnyType_=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(var n,o=0;n=t[o];o++)if(n.name.toLowerCase()==e)return n;return null},Blockly.Variables.generateVariableFieldXmlString=function(e){var t=e.type;return'<field name="VAR" id="'+e.getId()+'" variabletype="'+goog.string.htmlEscape(t)+'">'+goog.string.htmlEscape(e.name)+"</field>"},Blockly.Variables.generateVariableFieldDom=function(e){var t=Blockly.utils.xml.createElement("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.type),e=Blockly.utils.xml.createTextNode(e.name),t.appendChild(e),t},Blockly.Variables.getOrCreateVariablePackage=function(e,t,n,o){return Blockly.Variables.getVariable(e,t,n,o)||Blockly.Variables.createVariable_(e,t,n,o)},Blockly.Variables.getVariable=function(e,t,n,o){var r=e.getPotentialVariableMap(),i=null;if((!t||!(i=!(i=e.getVariableById(t))&&r?r.getVariableById(t):i))&&n){if(null==o)throw Error("Tried to look up a variable by name without a type");!(i=e.getVariable(n,o))&&r&&(i=r.getVariable(n,o))}return i},Blockly.Variables.createVariable_=function(e,t,n,o){var r=e.getPotentialVariableMap();return n=n||Blockly.Variables.generateUniqueName(e.isFlyout?e.targetWorkspace:e),(r||e).createVariable(n,o,t)},Blockly.Variables.getAddedVariables=function(e,t){e=e.getAllVariables();var n=[];if(t.length!=e.length)for(var o=0;o<e.length;o++){var r=e[o];-1==t.indexOf(r)&&n.push(r)}return n},Blockly.WidgetDiv={},Blockly.WidgetDiv.owner_=null,Blockly.WidgetDiv.dispose_=null,Blockly.WidgetDiv.rendererClassName_=null,Blockly.WidgetDiv.themeClassName_=null,Blockly.WidgetDiv.createDom=function(){Blockly.WidgetDiv.DIV||(Blockly.WidgetDiv.DIV=document.createElement("div"),Blockly.WidgetDiv.DIV.className="blocklyWidgetDiv",document.body.appendChild(Blockly.WidgetDiv.DIV))},Blockly.WidgetDiv.show=function(e,t,n){Blockly.WidgetDiv.hide(),Blockly.WidgetDiv.owner_=e,Blockly.WidgetDiv.dispose_=n,(e=Blockly.WidgetDiv.DIV).style.direction=t?"rtl":"ltr",e.style.display="block",Blockly.WidgetDiv.rendererClassName_=Blockly.getMainWorkspace().getRenderer().name+"-renderer",Blockly.WidgetDiv.themeClassName_=Blockly.getMainWorkspace().getTheme().name+"-theme",Blockly.utils.dom.addClass(e,Blockly.WidgetDiv.rendererClassName_),Blockly.utils.dom.addClass(e,Blockly.WidgetDiv.themeClassName_)},Blockly.WidgetDiv.repositionForWindowResize=function(){var e;Blockly.WidgetDiv.owner_&&Blockly.WidgetDiv.owner_.getScaledBBox&&Blockly.WidgetDiv.isDisplayed()?(e=Blockly.WidgetDiv.owner_.getScaledBBox(),Blockly.WidgetDiv.DIV.style.left=e.left+"px",Blockly.WidgetDiv.DIV.style.top=e.top+"px"):Blockly.WidgetDiv.hide()},Blockly.WidgetDiv.hide=function(){var e,t=Blockly.WidgetDiv.DIV;Blockly.WidgetDiv.owner_&&(Blockly.WidgetDiv.owner_=null,t.style.display="none",t.style.left="",t.style.top="",Blockly.WidgetDiv.dispose_&&Blockly.WidgetDiv.dispose_(),Blockly.WidgetDiv.dispose_=null,t.innerHTML="",e=Blockly.getMainWorkspace())&&e.markFocused(),Blockly.WidgetDiv.rendererClassName_&&(Blockly.utils.dom.removeClass(t,Blockly.WidgetDiv.rendererClassName_),Blockly.WidgetDiv.rendererClassName_=null),Blockly.WidgetDiv.themeClassName_&&(Blockly.utils.dom.removeClass(t,Blockly.WidgetDiv.themeClassName_),Blockly.WidgetDiv.themeClassName_=null)},Blockly.WidgetDiv.isVisible=function(){return!!Blockly.WidgetDiv.owner_},Blockly.WidgetDiv.isDisplayed=function(){return"none"!=Blockly.WidgetDiv.DIV.style.display},Blockly.WidgetDiv.hideIfOwner=function(e){Blockly.WidgetDiv.owner_==e&&Blockly.WidgetDiv.hide()},Blockly.WidgetDiv.positionInternal_=function(e,t,n){Blockly.WidgetDiv.DIV.style.left=e+"px",Blockly.WidgetDiv.DIV.style.top=t+"px",Blockly.WidgetDiv.DIV.style.height=n+"px"},Blockly.WidgetDiv.positionWithAnchor=function(e,t,n,o){var r=Blockly.WidgetDiv.calculateY_(e,t,n);e=Blockly.WidgetDiv.calculateX_(e,t,n,o),r<0?Blockly.WidgetDiv.positionInternal_(e,0,n.height+r):Blockly.WidgetDiv.positionInternal_(e,r,n.height)},Blockly.WidgetDiv.calculateX_=function(e,t,n,o){return o?(t=Math.max(t.right-n.width,e.left),Math.min(t,e.right-n.width)):(t=Math.min(t.left,e.right-n.width),Math.max(t,e.left))},Blockly.WidgetDiv.calculateY_=function(e,t,n){return t.bottom+n.height>=e.bottom?t.top-n.height:t.bottom},Blockly.VERSION="3.0.34",Blockly.mainWorkspace=null,Blockly.selected=null,Blockly.draggingConnections=[],Blockly.clipboardXml_=null,Blockly.clipboardSource_=null,Blockly.clipboardTypeCounts_=null,Blockly.cache3dSupported_=null,Blockly.svgSize=function(e){return{width:e.cachedWidth_,height:e.cachedHeight_}},Blockly.resizeSvgContents=function(e){e.resizeContents()},Blockly.svgResize=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;var t,n=e.getParentSvg(),o=n.parentNode;o&&(t=o.offsetWidth,o=o.offsetHeight,n.cachedWidth_!=t&&(n.setAttribute("width",t+"px"),n.cachedWidth_=t),n.cachedHeight_!=o&&(n.setAttribute("height",o+"px"),n.cachedHeight_=o),e.resize())},Blockly.onKeyDown=function(e){var t=Blockly.mainWorkspace;if(t&&!(Blockly.utils.isTargetInput(e)||t.rendered&&!t.isVisible()))if(t.options.readOnly)Blockly.navigation.onKeyPress(e);else{var n=!1;if(e.keyCode==Blockly.utils.KeyCodes.ESC)Blockly.hideChaff(),Blockly.navigation.onBlocklyAction(Blockly.navigation.ACTION_EXIT);else{if(Blockly.navigation.onKeyPress(e))return;if(e.keyCode==Blockly.utils.KeyCodes.BACKSPACE||e.keyCode==Blockly.utils.KeyCodes.DELETE){if(e.preventDefault(),Blockly.Gesture.inProgress())return;Blockly.selected&&Blockly.selected.isDeletable()&&(n=!0)}else if(e.altKey||e.ctrlKey||e.metaKey){if(Blockly.Gesture.inProgress())return;Blockly.selected&&Blockly.selected.isDeletable()&&Blockly.selected.isMovable()&&(e.keyCode==Blockly.utils.KeyCodes.C?(Blockly.hideChaff(),Blockly.copy_(Blockly.selected)):e.keyCode!=Blockly.utils.KeyCodes.X||Blockly.selected.workspace.isFlyout||(Blockly.copy_(Blockly.selected),n=!0,Blockly.hideChaff(),Blockly.selected.dispose(!0,!0))),e.keyCode==Blockly.utils.KeyCodes.V?Blockly.clipboardXml_&&((e=Blockly.clipboardSource_).isFlyout&&(e=e.targetWorkspace),Blockly.clipboardTypeCounts_)&&e.isCapacityAvailable(Blockly.clipboardTypeCounts_)&&(Blockly.Events.setGroup(!0),e.paste(Blockly.clipboardXml_),Blockly.Events.setGroup(!1)):e.keyCode==Blockly.utils.KeyCodes.Z&&(Blockly.hideChaff(),t.undo(e.shiftKey))}}n&&!Blockly.selected.workspace.isFlyout&&(Blockly.Events.setGroup(!0),Blockly.hideChaff(),Blockly.selected.dispose(!0,!0),Blockly.Events.setGroup(!1))}},Blockly.copy_=function(e){var t,n;e.isComment?t=e.toXmlWithXY():(t=Blockly.Xml.blockToDom(e,!0),Blockly.Xml.deleteNext(t),n=e.getRelativeToSurfaceXY(),t.setAttribute("x",e.RTL?-n.x:n.x),t.setAttribute("y",n.y)),Blockly.clipboardXml_=t,Blockly.clipboardSource_=e.workspace,Blockly.clipboardTypeCounts_=e.isComment?null:Blockly.utils.getBlockTypeCounts(e,!0)},Blockly.duplicate=function(e){var t=Blockly.clipboardXml_,n=Blockly.clipboardSource_;Blockly.copy_(e),e.workspace.paste(Blockly.clipboardXml_),Blockly.clipboardXml_=t,Blockly.clipboardSource_=n},Blockly.onContextMenu_=function(e){Blockly.utils.isTargetInput(e)||e.preventDefault()},Blockly.hideChaff=function(e){Blockly.hideChaffInternal_(e),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation()},Blockly.hideChaffOnResize=function(e){Blockly.hideChaffInternal_(e),Blockly.WidgetDiv.repositionForWindowResize(),Blockly.DropDownDiv.repositionForWindowResize()},Blockly.hideChaffInternal_=function(e){Blockly.utils.isOnScreenKeyboardResize()||(Blockly.Tooltip.hide(),Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()),e||((e=Blockly.getMainWorkspace()).trashcan&&e.trashcan.flyout&&e.trashcan.flyout.hide(),(e=e.getToolbox())&&e.getFlyout()&&e.getFlyout().autoClose&&e.clearSelection())},Blockly.getMainWorkspace=function(){return Blockly.mainWorkspace},Blockly.alert=function(e,t){alert(e),t&&t()},Blockly.confirm=function(e,t){t(confirm(e))},Blockly.prompt=function(e,t,n,o){n(prompt(e,t,o))},Blockly.jsonInitFactory_=function(e){return function(){this.jsonInit(e)}},Blockly.defineBlocksWithJsonArray=function(e){for(var t=0;t<e.length;t++){var n,o=e[t];o?null==(n=o.type)||""===n?console.warn("Block definition #"+t+" in JSON array is missing a type attribute. Skipping."):(Blockly.Blocks[n]&&console.warn("Block definition #"+t+' in JSON array overwrites prior definition of "'+n+'".'),Blockly.Blocks[n]={init:Blockly.jsonInitFactory_(o)}):console.warn("Block definition #"+t+" in JSON array is "+o+". Skipping.")}},Blockly.bindEventWithChecks_=function(e,t,r,i,s,n){function o(e){var t=!s;e=Blockly.Touch.splitEventByTouches(e);for(var n,o=0;n=e[o];o++)t&&!Blockly.Touch.shouldHandleEvent(n)||(Blockly.Touch.setClientFromTouch(n),r?i.call(r,n):i(n),a=!0)}var a=!1,l=[];if(Blockly.utils.global.PointerEvent&&t in Blockly.Touch.TOUCH_MAP)for(var c,u=0;c=Blockly.Touch.TOUCH_MAP[t][u];u++)e.addEventListener(c,o,!1),l.push([e,c,o]);else if(e.addEventListener(t,o,!1),l.push([e,t,o]),t in Blockly.Touch.TOUCH_MAP)for(var d=function(e){o(e),a&&!n&&e.preventDefault()},u=0;c=Blockly.Touch.TOUCH_MAP[t][u];u++)e.addEventListener(c,d,!1),l.push([e,c,d]);return l},Blockly.bindEvent_=function(e,t,n,o){function r(e){n?o.call(n,e):o(e)}var i=[];if(Blockly.utils.global.PointerEvent&&t in Blockly.Touch.TOUCH_MAP)for(var s,a=0;s=Blockly.Touch.TOUCH_MAP[t][a];a++)e.addEventListener(s,r,!1),i.push([e,s,r]);else if(e.addEventListener(t,r,!1),i.push([e,t,r]),t in Blockly.Touch.TOUCH_MAP)for(var l=function(e){var t;e.changedTouches&&1==e.changedTouches.length&&(t=e.changedTouches[0],e.clientX=t.clientX,e.clientY=t.clientY),r(e),e.preventDefault()},a=0;s=Blockly.Touch.TOUCH_MAP[t][a];a++)e.addEventListener(s,l,!1),i.push([e,s,l]);return i},Blockly.unbindEvent_=function(e){for(;e.length;){var t=e.pop(),n=t[2];t[0].removeEventListener(t[1],n,!1)}return n},Blockly.isNumber=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},Blockly.hueToHex=function(e){return Blockly.utils.colour.hsvToHex(e,Blockly.HSV_SATURATION,255*Blockly.HSV_VALUE)},Blockly.checkBlockColourConstants=function(){Blockly.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),Blockly.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),Blockly.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),Blockly.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),Blockly.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),Blockly.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),Blockly.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),Blockly.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),Blockly.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),Blockly.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),Blockly.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),Blockly.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),Blockly.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),Blockly.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),Blockly.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),Blockly.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},Blockly.checkBlockColourConstant_=function(e,t,n){for(var o="Blockly",r=Blockly,i=0;i<t.length;++i)o+="."+t[i],r=r&&r[t[i]];r&&r!==n&&(e=(void 0===n?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",o).replace("%2",e),console.warn(e))},Blockly.Warning=function(e){Blockly.Warning.superClass_.constructor.call(this,e),this.createIcon(),this.text_={}},Blockly.utils.object.inherits(Blockly.Warning,Blockly.Icon),Blockly.Warning.prototype.collapseHidden=!1,Blockly.Warning.prototype.drawIcon_=function(e){Blockly.utils.dom.createSvgElement("path",{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),Blockly.utils.dom.createSvgElement("path",{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),Blockly.utils.dom.createSvgElement("rect",{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)},Blockly.Warning.textToDom_=function(e){var t=Blockly.utils.dom.createSvgElement("text",{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Blockly.Bubble.BORDER_WIDTH},null);e=e.split("\n");for(var n=0;n<e.length;n++){var o=Blockly.utils.dom.createSvgElement("tspan",{dy:"1em",x:Blockly.Bubble.BORDER_WIDTH},t),r=document.createTextNode(e[n]);o.appendChild(r)}return t},Blockly.Warning.prototype.setVisible=function(e){e!=this.isVisible()&&(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,"warningOpen",!e,e)),e?this.createBubble():this.disposeBubble())},Blockly.Warning.prototype.createBubble=function(){if(this.paragraphElement_=Blockly.Warning.textToDom_(this.getText()),this.bubble_=new Blockly.Bubble(this.block_.workspace,this.paragraphElement_,this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.block_.RTL)for(var e,t=this.paragraphElement_.getBBox().width,n=0;e=this.paragraphElement_.childNodes[n];n++)e.setAttribute("text-anchor","end"),e.setAttribute("x",t+Blockly.Bubble.BORDER_WIDTH);this.applyColour()},Blockly.Warning.prototype.disposeBubble=function(){this.bubble_.dispose(),this.paragraphElement_=this.body_=this.bubble_=null},Blockly.Warning.prototype.bodyFocus_=function(e){this.bubble_.promote()},Blockly.Warning.prototype.setText=function(e,t){this.text_[t]!=e&&(e?this.text_[t]=e:delete this.text_[t],this.isVisible())&&(this.setVisible(!1),this.setVisible(!0))},Blockly.Warning.prototype.getText=function(){var e,t=[];for(e in this.text_)t.push(this.text_[e]);return t.join("\n")},Blockly.Warning.prototype.dispose=function(){this.block_.warning=null,Blockly.Icon.prototype.dispose.call(this)},Blockly.Comment=function(e){Blockly.Comment.superClass_.constructor.call(this,e),this.model_=e.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},Blockly.utils.object.inherits(Blockly.Comment,Blockly.Icon),Blockly.Comment.prototype.drawIcon_=function(e){Blockly.utils.dom.createSvgElement("path",{class:"blocklyIconShape",d:"m 2,2 0,9.2211 3.0026599,0 1.6008929,1.5989 1.8138195,-1.5989 6.6046683,0 0,-9.2211 -13.0220406,0 z",style:"fill: #fff;"},e),Blockly.utils.dom.createSvgElement("rect",{class:"blocklyIconSymbol",x:"4",y:"8",height:"1",width:"6",style:"fill: #575E75;"},e),Blockly.utils.dom.createSvgElement("rect",{class:"blocklyIconSymbol",x:"4",y:"6",height:"1",width:"6",style:"fill: #575E75;"},e),Blockly.utils.dom.createSvgElement("rect",{class:"blocklyIconSymbol",x:"4",y:"4",height:"1",width:"8",style:"fill: #575E75;"},e)},Blockly.Comment.prototype.createEditor_=function(){return this.svgGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyCommentBubble"},null),this.svgGroup_.translate_="",this.createTextEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.createTopBarIcons_(),this.resizeTextarea_(),this.block_.isEditable()&&(Blockly.bindEventWithChecks_(this.deleteIcon_,"mousedown",this,this.deleteMouseDown_),Blockly.bindEventWithChecks_(this.deleteIcon_,"mouseup",this,this.deleteMouseUp_),Blockly.bindEventWithChecks_(this.minimizeArrow_,"mousedown",this,this.minimizeMouseUp_)),this.svgGroup_},Blockly.Comment.prototype.createTextEditor_=function(){this.foreignObject_=Blockly.utils.dom.createSvgElement("foreignObject",{x:Blockly.Bubble.BORDER_WIDTH,y:Blockly.Bubble.BORDER_WIDTH+Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT},null);var e=document.createElementNS(Blockly.utils.dom.HTML_NS,"body"),t=(e.setAttribute("xmlns",Blockly.utils.dom.HTML_NS),e.className="blocklyMinimalBody",this.textarea_=document.createElementNS(Blockly.utils.dom.HTML_NS,"textarea"));return t.className="blocklyCommentTextarea",t.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),t.value=this.model_.text,this.block_.isEditable()||t.setAttribute("readonly",!0),e.appendChild(t),this.foreignObject_.appendChild(e),this.block_.isEditable()&&(this.onMouseUpWrapper_=Blockly.bindEventWithChecks_(t,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=Blockly.bindEventWithChecks_(t,"wheel",this,function(e){e.stopPropagation()}),this.onChangeWrapper_=Blockly.bindEventWithChecks_(t,"change",this,function(e){this.cachedText_!=this.model_.text&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=Blockly.bindEventWithChecks_(t,"input",this,function(e){this.model_.text=t.value}),setTimeout(t.focus.bind(t),0)),this.foreignObject_},Blockly.Comment.prototype.createTopBarIcons_=function(){this.minimizeArrow_=Blockly.utils.dom.createSvgElement("image",{x:Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET,y:Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT/2+Blockly.WorkspaceCommentSvg.BORDER_WIDTH-Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE/2,width:Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE,height:Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE},this.svgGroup_),this.minimizeArrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"comment-arrow-down.svg"),this.deleteIcon_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyCommentDeleteIcon"},this.svgGroup_),Blockly.utils.dom.createSvgElement("rect",{x:"-12.5",y:"1",width:"27.5",height:"27.5",fill:"transparent",class:"blocklyDeleteIconShape"},this.deleteIcon_),Blockly.WorkspaceCommentSvg.drawDeleteIcon(this.deleteIcon_)},Blockly.Comment.prototype.deleteMouseDown_=function(e){e.stopPropagation()},Blockly.Comment.prototype.deleteMouseUp_=function(e){this.block_.setCommentText(null),e.stopPropagation(),Blockly.Touch.clearTouchIdentifier()},Blockly.Comment.prototype.minimizeMouseUp_=function(e){this.block_.comment.setVisible(!1),e.stopPropagation(),Blockly.Touch.clearTouchIdentifier()},Blockly.Comment.prototype.updateEditable=function(){Blockly.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},Blockly.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},Blockly.Comment.prototype.resizeTextarea_=function(){var e=this.model_.size,t=2*Blockly.Bubble.BORDER_WIDTH,n=Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT;this.foreignObject_.setAttribute("width",Math.max(e.width-t,0)),this.foreignObject_.setAttribute("height",Math.max(e.height-t-n,0)),this.textarea_.style.width=e.width-t-4+"px",this.textarea_.style.height=e.height-t-n-4+"px",this.RTL?(this.minimizeArrow_.setAttribute("x",e.width-Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE-Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET),this.minimizeArrow_.setAttribute("transform","translate("+-e.width+", 1)"),this.deleteIcon_.setAttribute("transform","translate("+(-e.width+Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE+Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET)+",0) scale(-1 1)")):this.deleteIcon_.setAttribute("transform","translate("+(e.width-Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE-Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET)+",0)")},Blockly.Comment.prototype.setVisible=function(e){e!=this.isVisible()&&(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,"commentOpen",!e,e)),(this.model_.pinned=e)?this.createBubble_():(this.model_.xy=this.getRelativePosition(),this.disposeBubble_()))},Blockly.Comment.prototype.setRelativePosition=function(e){this.model_.xy=e,this.bubble_&&(this.bubble_.relativeLeft_=e.x,this.bubble_.relativeTop_=e.y,this.bubble_.positionBubble_(),this.bubble_.renderArrow_())},Blockly.Comment.prototype.getRelativePosition=function(){return this.bubble_?new Blockly.utils.Coordinate(this.bubble_.relativeLeft_,this.bubble_.relativeTop_):this.model_.xy},Blockly.Comment.prototype.createBubble_=function(){Blockly.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},Blockly.Comment.prototype.createEditableBubble_=function(){this.bubble_=new Blockly.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour(),this.setRelativePosition(this.model_.xy)},Blockly.Comment.prototype.createNonEditableBubble_=function(){Blockly.Warning.prototype.createBubble.call(this)},Blockly.Comment.prototype.disposeBubble_=function(){this.paragraphElement_?Blockly.Warning.prototype.disposeBubble.call(this):(this.onMouseUpWrapper_&&(Blockly.unbindEvent_(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(Blockly.unbindEvent_(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(Blockly.unbindEvent_(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(Blockly.unbindEvent_(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.foreignObject_=this.textarea_=this.bubble_=null)},Blockly.Comment.prototype.startEdit_=function(e){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},Blockly.Comment.prototype.getBubbleSize=function(){return this.model_.size},Blockly.Comment.prototype.setBubbleSize=function(e,t){this.bubble_?this.bubble_.setBubbleSize(e,t):(this.model_.size.width=e,this.model_.size.height=t)},Blockly.Comment.prototype.getText=function(){return this.model_.text||""},Blockly.Comment.prototype.setText=function(e){this.model_.text!=e&&(this.model_.text=e,this.updateText())},Blockly.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},Blockly.Comment.prototype.dispose=function(){this.block_.comment=null,Blockly.Icon.prototype.dispose.call(this)},Blockly.Css.register(".blocklyCommentTextarea {,background-color: #FAF6BD;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,color: $colour_text;,overflow: hidden;,font-size: 12pt;,line-height: 22px;,}".split(",")),Blockly.FlyoutCursor=function(){Blockly.FlyoutCursor.superClass_.constructor.call(this)},Blockly.utils.object.inherits(Blockly.FlyoutCursor,Blockly.Cursor),Blockly.FlyoutCursor.prototype.onBlocklyAction=function(e){switch(e.name){case Blockly.navigation.actionNames.PREVIOUS:return this.prev(),!0;case Blockly.navigation.actionNames.NEXT:return this.next(),!0;default:return!1}},Blockly.FlyoutCursor.prototype.next=function(){var e=this.getCurNode();return e?((e=e.next())&&this.setCurNode(e),e):null},Blockly.FlyoutCursor.prototype.in=function(){return null},Blockly.FlyoutCursor.prototype.prev=function(){var e=this.getCurNode();return e?((e=e.prev())&&this.setCurNode(e),e):null},Blockly.FlyoutCursor.prototype.out=function(){return null},Blockly.Flyout=function(e){e.getMetrics=this.getMetrics_.bind(this),e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Blockly.WorkspaceSvg(e),this.workspace_.isFlyout=!0,this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH},Blockly.Flyout.prototype.autoClose=!0,Blockly.Flyout.prototype.isVisible_=!1,Blockly.Flyout.prototype.containerVisible_=!0,Blockly.Flyout.prototype.CORNER_RADIUS=8,Blockly.Flyout.prototype.MARGIN=Blockly.Flyout.prototype.CORNER_RADIUS,Blockly.Flyout.prototype.GAP_X=3*Blockly.Flyout.prototype.MARGIN,Blockly.Flyout.prototype.GAP_Y=3*Blockly.Flyout.prototype.MARGIN,Blockly.Flyout.prototype.SCROLLBAR_PADDING=2,Blockly.Flyout.prototype.width_=0,Blockly.Flyout.prototype.height_=0,Blockly.Flyout.prototype.dragAngleRange_=70,Blockly.Flyout.prototype.svgGroup_=null,Blockly.Flyout.prototype.scrollbar_=null,Blockly.Flyout.prototype.targetWorkspace_=null,Blockly.Flyout.prototype.createDom=function(e){return this.svgGroup_=Blockly.utils.dom.createSvgElement(e,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=Blockly.utils.dom.createSvgElement("path",{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.workspace_.getMarkerManager().setCursor(new Blockly.FlyoutCursor),this.svgGroup_},Blockly.Flyout.prototype.init=function(e){this.targetWorkspace_=e,this.workspace_.targetWorkspace=e,this.scrollbar_=new Blockly.Scrollbar(this.workspace_,this.horizontalLayout_,!1,"blocklyFlyoutScrollbar"),this.hide(),Array.prototype.push.apply(this.eventWrappers_,Blockly.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace_.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,Blockly.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace_.getGesture.bind(this.targetWorkspace_),this.workspace_.setVariableMap(this.targetWorkspace_.getVariableMap()),this.workspace_.createPotentialVariableMap()},Blockly.Flyout.prototype.dispose=function(){this.hide(),this.clearOldEventListeners_(),Blockly.unbindEvent_(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace_.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.scrollbar_&&(this.scrollbar_.dispose(),this.scrollbar_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(Blockly.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace_=this.svgBackground_=null},Blockly.Flyout.prototype.getWidth=function(){return this.width_},Blockly.Flyout.prototype.getHeight=function(){return this.height_},Blockly.Flyout.prototype.getWorkspace=function(){return this.workspace_},Blockly.Flyout.prototype.isVisible=function(){return this.isVisible_},Blockly.Flyout.prototype.setVisible=function(e){var t=e!=this.isVisible();this.isVisible_=e,t&&this.updateDisplay_()},Blockly.Flyout.prototype.setContainerVisible=function(e){var t=e!=this.containerVisible_;this.containerVisible_=e,t&&this.updateDisplay_()},Blockly.Flyout.prototype.updateDisplay_=function(){var e=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=e?"block":"none",this.scrollbar_.setContainerVisible(e)},Blockly.Flyout.prototype.positionAt_=function(e,t,n,o){this.svgGroup_.setAttribute("width",e),this.svgGroup_.setAttribute("height",t),"svg"==this.svgGroup_.tagName?Blockly.utils.dom.setCssTransform(this.svgGroup_,"translate("+n+"px,"+o+"px)"):this.svgGroup_.setAttribute("transform","translate("+n+","+o+")"),this.scrollbar_&&(this.scrollbar_.setOrigin(n,o),this.scrollbar_.resize(),this.scrollbar_.setPosition_(this.scrollbar_.position_.x,this.scrollbar_.position_.y))},Blockly.Flyout.prototype.hide=function(){this.isVisible()&&this.setVisible(!1)},Blockly.Flyout.prototype.clearOldEventListeners_=function(){for(var e,t=0;e=this.listeners_[t];t++)Blockly.unbindEvent_(e);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)},Blockly.Flyout.prototype.show=function(e){if(this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldEventListeners_(),this.clearOldBlocks_(),"string"==typeof e){if("function"!=typeof(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(e=e(this.workspace_.targetWorkspace),!Array.isArray(e))throw TypeError("Result of toolbox category callback must be an array.")}this.setVisible(!0);var t=[],n=[];this.permanentlyDisabled_.length=0;for(var o,r=this.horizontalLayout_?this.GAP_X:this.GAP_Y,i=0;o=e[i];i++)if(o.tagName)switch(o.tagName.toUpperCase()){case"BLOCK":var s=Blockly.Xml.domToBlock(o,this.workspace_);s.isEnabled()||this.permanentlyDisabled_.push(s),t.push({type:"block",block:s}),o=parseInt(o.getAttribute("gap"),10),n.push(isNaN(o)?r:o);break;case"SEP":o=parseInt(o.getAttribute("gap"),10),!isNaN(o)&&0<n.length?n[n.length-1]=o:n.push(r);break;case"LABEL":case"BUTTON":if(s="LABEL"==o.tagName.toUpperCase(),!Blockly.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");o=new Blockly.FlyoutButton(this.workspace_,this.targetWorkspace_,o,s),t.push({type:"button",button:o}),n.push(r)}this.layout_(t,n),this.listeners_.push(Blockly.bindEventWithChecks_(this.svgBackground_,"mouseover",this,function(){for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++)e.removeSelect()})),this.horizontalLayout_?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},Blockly.Flyout.prototype.clearOldBlocks_=function(){for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++)e.workspace==this.workspace_&&e.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&Blockly.utils.dom.removeNode(t);for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},Blockly.Flyout.prototype.addBlockListeners_=function(e,t,n){this.listeners_.push(Blockly.bindEventWithChecks_(e,"mousedown",null,this.blockMouseDown_(t))),this.listeners_.push(Blockly.bindEventWithChecks_(n,"mousedown",null,this.blockMouseDown_(t))),this.listeners_.push(Blockly.bindEvent_(e,"mouseenter",t,t.addSelect)),this.listeners_.push(Blockly.bindEvent_(e,"mouseleave",t,t.removeSelect)),this.listeners_.push(Blockly.bindEvent_(n,"mouseenter",t,t.addSelect)),this.listeners_.push(Blockly.bindEvent_(n,"mouseleave",t,t.removeSelect))},Blockly.Flyout.prototype.blockMouseDown_=function(n){var o=this;return function(e){var t=o.targetWorkspace_.getGesture(e);t&&(t.setStartBlock(n),t.handleFlyoutStart(e,o))}},Blockly.Flyout.prototype.onMouseDown_=function(e){var t=this.targetWorkspace_.getGesture(e);t&&t.handleFlyoutStart(e,this)},Blockly.Flyout.prototype.isBlockCreatable_=function(e){return e.isEnabled()},Blockly.Flyout.prototype.createBlock=function(e){var t=null,n=(Blockly.Events.disable(),this.targetWorkspace_.getAllVariables());this.targetWorkspace_.setResizesEnabled(!1);try{t=this.placeNewBlock_(e),Blockly.hideChaff()}finally{Blockly.Events.enable()}if(e=Blockly.Variables.getAddedVariables(this.targetWorkspace_,n),Blockly.Events.isEnabled())for(Blockly.Events.setGroup(!0),Blockly.Events.fire(new Blockly.Events.Create(t)),n=0;n<e.length;n++)Blockly.Events.fire(new Blockly.Events.VarCreate(e[n]));return this.autoClose?this.hide():this.filterForCapacity_(),t},Blockly.Flyout.prototype.initFlyoutButton_=function(e,t,n){var o=e.createDom();e.moveTo(t,n),e.show(),this.listeners_.push(Blockly.bindEventWithChecks_(o,"mousedown",this,this.onMouseDown_)),this.buttons_.push(e)},Blockly.Flyout.prototype.createRect_=function(e,t,n,o,r){return(t=Blockly.utils.dom.createSvgElement("rect",{"fill-opacity":0,x:t,y:n,height:o.height,width:o.width},null)).tooltip=e,Blockly.Tooltip.bindMouseEvents(t),this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot()),e.flyoutRect_=t,this.mats_[r]=t},Blockly.Flyout.prototype.moveRectToBlock_=function(e,t){var n=t.getHeightWidth();e.setAttribute("width",n.width),e.setAttribute("height",n.height),t=t.getRelativeToSurfaceXY(),e.setAttribute("y",t.y),e.setAttribute("x",this.RTL?t.x-n.width:t.x)},Blockly.Flyout.prototype.filterForCapacity_=function(){for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(e))for(var o=this.targetWorkspace_.isCapacityAvailable(Blockly.utils.getBlockTypeCounts(e));e;)e.setEnabled(o),e=e.getNextBlock()},Blockly.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},Blockly.Flyout.prototype.isScrollable=function(){return!!this.scrollbar_&&this.scrollbar_.isVisible()},Blockly.Flyout.prototype.placeNewBlock_=function(e){var n=this.targetWorkspace_;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");"function_call"==e.type&&e.inputList.forEach(function(e){var t;e.connection&&e.connection.targetConnection&&"variables_get"==e.connection.targetBlock().type&&(t=(e=e.connection.targetBlock()).inputList[0].fieldRow[0].getText(),t=Blockly.Variables.getOrCreateVariablePackage(n,null,t,"").getId(),e.setFieldValue(t,"VAR"))});var t,o,r=Blockly.Xml.blockToDom(e,!0);if(n.setResizesEnabled(!1),(r=Blockly.Xml.domToBlock(r,n)).getSvgRoot())return t=n.getOriginOffsetInPixels(),o=this.workspace_.getOriginOffsetInPixels(),(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale),e=Blockly.utils.Coordinate.sum(o,e),(t=Blockly.utils.Coordinate.difference(e,t)).scale(1/n.scale),r.moveBy(t.x,t.y),r;throw Error("block is not rendered.")},Blockly.Flyout.prototype.onBlocklyAction=function(e){return this.workspace_.getCursor().onBlocklyAction(e)},Blockly.HorizontalFlyout=function(e){e.getMetrics=this.getMetrics_.bind(this),e.setMetrics=this.setMetrics_.bind(this),Blockly.HorizontalFlyout.superClass_.constructor.call(this,e),this.horizontalLayout_=!0},Blockly.utils.object.inherits(Blockly.HorizontalFlyout,Blockly.Flyout),Blockly.HorizontalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var e=this.workspace_.getCanvas().getBBox()}catch(t){e={height:0,y:0,width:0,x:0}}var t=this.SCROLLBAR_PADDING,n=this.SCROLLBAR_PADDING,o=(this.toolboxPosition_==Blockly.TOOLBOX_AT_BOTTOM&&(t=0),this.height_);return this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP&&(o-=this.SCROLLBAR_PADDING),{viewHeight:o,viewWidth:this.width_-2*this.SCROLLBAR_PADDING,contentHeight:(e.height+2*this.MARGIN)*this.workspace_.scale,contentWidth:(e.width+2*this.MARGIN)*this.workspace_.scale,viewTop:-this.workspace_.scrollY,viewLeft:-this.workspace_.scrollX,contentTop:0,contentLeft:0,absoluteTop:t,absoluteLeft:n}},Blockly.HorizontalFlyout.prototype.setMetrics_=function(e){var t=this.getMetrics_();t&&("number"==typeof e.x&&(this.workspace_.scrollX=-t.contentWidth*e.x),this.workspace_.translate(this.workspace_.scrollX+t.absoluteLeft,this.workspace_.scrollY+t.absoluteTop))},Blockly.HorizontalFlyout.prototype.position=function(){var e;this.isVisible()&&(e=this.targetWorkspace_.getMetrics())&&(this.width_=e.viewWidth,this.setBackgroundPath_(e.viewWidth-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),this.positionAt_(this.width_,this.height_,0,this.targetWorkspace_.toolboxPosition==this.toolboxPosition_?e.toolboxHeight?this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP?e.toolboxHeight:e.viewHeight-this.height_:this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP?0:e.viewHeight:this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP?0:e.viewHeight+e.absoluteTop-this.height_))},Blockly.HorizontalFlyout.prototype.setBackgroundPath_=function(e,t){var n=this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP,o=["M 0,"+(n?0:this.CORNER_RADIUS)];n?(o.push("h",e+2*this.CORNER_RADIUS),o.push("v",t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",-e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),o.push("h",e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",t),o.push("h",-e-2*this.CORNER_RADIUS)),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))},Blockly.HorizontalFlyout.prototype.scrollToStart=function(){this.scrollbar_.set(this.RTL?1/0:0)},Blockly.HorizontalFlyout.prototype.wheel_=function(e){var t=Blockly.utils.getScrollDeltaPixels(e),n=t.x||t.y;n&&(n=(t=this.getMetrics_()).viewLeft+n,n=Math.min(n,t.contentWidth-t.viewWidth),n=Math.max(n,0),this.scrollbar_.set(n),Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()),e.preventDefault(),e.stopPropagation()},Blockly.HorizontalFlyout.prototype.layout_=function(e,t){this.workspace_.scale=this.targetWorkspace_.scale;var n=this.MARGIN,o=n+this.tabWidth_;this.RTL&&(e=e.reverse());for(var r,i=0;r=e[i];i++)if("block"==r.type){for(var s,a=(r=r.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;r.render(),a=r.getSvgRoot(),l=r.getHeightWidth(),s=r.outputConnection?this.tabWidth_:0,s=this.RTL?o+l.width:o-s,r.moveBy(s,n),s=this.createRect_(r,s,n,l,i),o+=l.width+t[i],this.addBlockListeners_(a,r,s)}else"button"==r.type&&(this.initFlyoutButton_(r.button,o,n),o+=r.button.width+t[i])},Blockly.HorizontalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var t=this.dragAngleRange_;return e<90+t&&90-t<e||-90-t<e&&e<-90+t},Blockly.HorizontalFlyout.prototype.getClientRect=function(){var e,t;return this.svgGroup_?(t=(e=this.svgGroup_.getBoundingClientRect()).top,this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP?new Blockly.utils.Rect(-1e9,t+e.height,-1e9,1e9):new Blockly.utils.Rect(t,1e9,-1e9,1e9)):null},Blockly.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace_.scale;for(var e,t=0,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++)t=Math.max(t,e.getHeightWidth().height);if(t=(t=(t+=1.5*this.MARGIN)*this.workspace_.scale)+Blockly.Scrollbar.scrollbarThickness,this.height_!=t){for(o=0;e=n[o];o++)e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e);this.height_=t,this.position()}},Blockly.VerticalFlyout=function(e){e.getMetrics=this.getMetrics_.bind(this),e.setMetrics=this.setMetrics_.bind(this),Blockly.VerticalFlyout.superClass_.constructor.call(this,e),this.horizontalLayout_=!1},Blockly.utils.object.inherits(Blockly.VerticalFlyout,Blockly.Flyout),Blockly.VerticalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var e=this.workspace_.getCanvas().getBBox()}catch(t){e={height:0,y:0,width:0,x:0}}var t=this.SCROLLBAR_PADDING,n=this.height_-2*this.SCROLLBAR_PADDING,o=this.width_;return this.RTL||(o-=this.SCROLLBAR_PADDING),{viewHeight:n,viewWidth:o,contentHeight:e.height*this.workspace_.scale+2*this.MARGIN,contentWidth:e.width*this.workspace_.scale+2*this.MARGIN,viewTop:-this.workspace_.scrollY+e.y,viewLeft:-this.workspace_.scrollX,contentTop:e.y,contentLeft:e.x,absoluteTop:t,absoluteLeft:0}},Blockly.VerticalFlyout.prototype.setMetrics_=function(e){var t=this.getMetrics_();t&&("number"==typeof e.y&&(this.workspace_.scrollY=-t.contentHeight*e.y),this.workspace_.translate(this.workspace_.scrollX+t.absoluteLeft,this.workspace_.scrollY+t.absoluteTop))},Blockly.VerticalFlyout.prototype.position=function(){var e;this.isVisible()&&(e=this.targetWorkspace_.getMetrics())&&(this.height_=e.viewHeight,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,e.viewHeight-2*this.CORNER_RADIUS),this.positionAt_(this.width_,this.height_,this.targetWorkspace_.toolboxPosition==this.toolboxPosition_?e.toolboxWidth?this.toolboxPosition_==Blockly.TOOLBOX_AT_LEFT?e.toolboxWidth:e.viewWidth-this.width_:this.toolboxPosition_==Blockly.TOOLBOX_AT_LEFT?0:e.viewWidth:this.toolboxPosition_==Blockly.TOOLBOX_AT_LEFT?0:e.viewWidth+e.absoluteLeft-this.width_,0))},Blockly.VerticalFlyout.prototype.setBackgroundPath_=function(e,t){var n=this.toolboxPosition_==Blockly.TOOLBOX_AT_RIGHT,o=e+this.CORNER_RADIUS;(o=["M "+(n?o:0)+",0"]).push("h",n?-e:e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",Math.max(0,t)),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",n?e:-e),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))},Blockly.VerticalFlyout.prototype.scrollToStart=function(){this.scrollbar_.set(0)},Blockly.VerticalFlyout.prototype.wheel_=function(e){var t,n=Blockly.utils.getScrollDeltaPixels(e);n.y&&(n=(t=this.getMetrics_()).viewTop-t.contentTop+n.y,n=Math.min(n,t.contentHeight-t.viewHeight),n=Math.max(n,0),this.scrollbar_.set(n),Blockly.WidgetDiv.hide()),e.preventDefault(),e.stopPropagation()},Blockly.VerticalFlyout.prototype.layout_=function(e,t){this.workspace_.scale=this.targetWorkspace_.scale;for(var n,o=this.MARGIN,r=this.RTL?o:o+this.tabWidth_,i=0;n=e[i];i++)if("block"==n.type){for(var s,a=(n=n.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;n.render(),a=n.getSvgRoot(),l=n.getHeightWidth(),s=n.outputConnection?r-this.tabWidth_:r,n.moveBy(s,o),s=this.createRect_(n,this.RTL?s-l.width:s,o,l,i),this.addBlockListeners_(a,n,s),o+=l.height+t[i]}else"button"==n.type&&(this.initFlyoutButton_(n.button,r,o),o+=n.button.height+t[i])},Blockly.VerticalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var t=this.dragAngleRange_;return e<t&&-t<e||e<-180+t||180-t<e},Blockly.VerticalFlyout.prototype.getClientRect=function(){var e,t;return this.svgGroup_?(t=(e=this.svgGroup_.getBoundingClientRect()).left,this.toolboxPosition_==Blockly.TOOLBOX_AT_LEFT?new Blockly.utils.Rect(-1e9,1e9,-1e9,t+e.width):new Blockly.utils.Rect(-1e9,1e9,t,1e9)):null},Blockly.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace_.scale;for(var e,t,n=0,o=this.workspace_.getTopBlocks(!1),r=0;e=o[r];r++){var i=e.getHeightWidth().width;e.outputConnection&&(i-=this.tabWidth_),n=Math.max(n,i)}for(r=0;e=this.buttons_[r];r++)n=Math.max(n,e.width);if(n=(n=(n+=1.5*this.MARGIN+this.tabWidth_)*this.workspace_.scale)+Blockly.Scrollbar.scrollbarThickness,(r=this.targetWorkspace_.getMetrics())&&(n=Math.min(n,r.viewWidth)),this.width_!=n){for(r=0;e=o[r];r++)this.RTL&&(i=e.getRelativeToSurfaceXY().x,t=n/this.workspace_.scale-this.MARGIN,e.outputConnection||(t-=this.tabWidth_),e.moveBy(t-i,0)),e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e);if(this.RTL)for(r=0;e=this.buttons_[r];r++)o=e.getPosition().y,e.moveTo(n/this.workspace_.scale-e.width-this.MARGIN-this.tabWidth_,o);this.width_=n,this.position()}},Blockly.FlyoutButton=function(e,t,n,o){this.workspace_=e,this.targetWorkspace_=t,this.text_=n.getAttribute("text"),this.position_=new Blockly.utils.Coordinate(0,0),this.isLabel_=o,this.helpButtonIcon_=n.getAttribute("web-help-button")||null,this.callbackKey_=n.getAttribute("callbackKey")||n.getAttribute("callbackkey"),this.cssClass_=n.getAttribute("web-class")||null,this.icon_=n.getAttribute("web-icon")||null,this.iconClass_=n.getAttribute("web-icon-class")||null,this.iconColor_=n.getAttribute("web-icon-color")||null,this.line_=n.getAttribute("web-line")||null,this.lineWidth_=n.getAttribute("web-line-width")||null,this.onMouseUpWrapper_=null},Blockly.FlyoutButton.MARGIN=40,Blockly.FlyoutButton.prototype.width=0,Blockly.FlyoutButton.prototype.height=40,Blockly.FlyoutButton.HELP_IMAGE_URI="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAyNiAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTMiIGN5PSIxMyIgcj0iMTMiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNy45NTIgOS4xODQwMkMxNy45NTIgMTAuMjU2IDE3LjgxNiAxMS4wNzIgMTcuNTQ0IDExLjYzMkMxNy4yODggMTIuMTkyIDE2Ljc1MiAxMi43OTIgMTUuOTM2IDEzLjQzMkMxNS4xMiAxNC4wNzIgMTQuNTc2IDE0LjU4NCAxNC4zMDQgMTQuOTY4QzE0LjA0OCAxNS4zMzYgMTMuOTIgMTUuNzM2IDEzLjkyIDE2LjE2OFYxNi45NkgxMS44MDhDMTEuNDI0IDE2LjQ2NCAxMS4yMzIgMTUuODQgMTEuMjMyIDE1LjA4OEMxMS4yMzIgMTQuNjg4IDExLjM4NCAxNC4yODggMTEuNjg4IDEzLjg4OEMxMS45OTIgMTMuNDg4IDEyLjUzNiAxMi45NjggMTMuMzIgMTIuMzI4QzE0LjEwNCAxMS42NzIgMTQuNjI0IDExLjE2OCAxNC44OCAxMC44MTZDMTUuMTM2IDEwLjQ0OCAxNS4yNjQgOS45NjgwMiAxNS4yNjQgOS4zNzYwMkMxNS4yNjQgOC4yMDgwMiAxNC40MTYgNy42MjQwMiAxMi43MiA3LjYyNDAyQzExLjc2IDcuNjI0MDIgMTAuNzUyIDcuNzM2MDIgOS42OTYgNy45NjAwMkw5LjE0NCA4LjA4MDAyTDkgNi4wODgwMkMxMC40ODggNS41NjAwMiAxMS44NCA1LjI5NjAyIDEzLjA1NiA1LjI5NjAyQzE0LjczNiA1LjI5NjAyIDE1Ljk2OCA1LjYwODAyIDE2Ljc1MiA2LjIzMjAyQzE3LjU1MiA2Ljg0MDAyIDE3Ljk1MiA3LjgyNDAyIDE3Ljk1MiA5LjE4NDAyWk0xMS40IDIyVjE4LjY0SDE0LjE4NFYyMkgxMS40WiIgZmlsbD0iIzU5NUU3NCIvPgo8L3N2Zz4K",Blockly.FlyoutButton.prototype.createDom=function(){var e,t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton",n=(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=Blockly.utils.dom.createSvgElement("g",{class:t},this.workspace_.getCanvas()),this.isLabel_||(e=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),t=Blockly.utils.dom.createSvgElement("rect",{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_),Blockly.utils.dom.createSvgElement("text",{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_)),o=Blockly.utils.replaceMessageReferences(this.text_);return this.workspace_.RTL&&(o+=""),n.textContent=o,this.isLabel_&&(this.svgText_=n,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill")),this.width=Blockly.utils.dom.getTextWidth(n),(this.icon_||this.iconClass_)&&(o=Blockly.utils.dom.createSvgElement("text",{class:this.iconClass_?"blocklyFlyoutLabelIcon "+this.iconClass_:"blocklyFlyoutLabelIcon",x:0,y:0,"text-anchor":"start"},this.svgGroup_),this.icon_&&(o.textContent=this.icon_),this.iconColor_&&o.setAttribute("style","fill: "+this.iconColor_),o.setAttribute("dominant-baseline","central"),o.setAttribute("dy",Blockly.utils.userAgent.EDGE_OR_IE?Blockly.Field.IE_TEXT_OFFSET:"0"),o.setAttribute("x",this.targetWorkspace_.RTL?this.width+Blockly.FlyoutButton.MARGIN:0),o.setAttribute("y",this.height/2),this.width+=Blockly.utils.dom.getTextWidth(o)+Blockly.FlyoutButton.MARGIN),this.helpButtonIcon_&&(this.helpButtonImage_=Blockly.utils.dom.createSvgElement("image",{class:"blocklyFlyoutButton",height:"25px",width:"25px",x:(this.workspace_.RTL?-this.width+Blockly.FlyoutButton.MARGIN+15:this.width+15)+"px",y:"10px"},this.svgGroup_),this.helpButtonImage_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.FlyoutButton.HELP_IMAGE_URI)),this.line_&&((o=Blockly.utils.dom.createSvgElement("line",{class:"blocklyFlyoutLine","stroke-dasharray":this.line_,"text-anchor":"middle"},this.svgGroup_)).setAttribute("x1",0),o.setAttribute("x2",null!=this.lineWidth_?this.lineWidth_:this.width),o.setAttribute("y1",this.height),o.setAttribute("y2",this.height)),this.isLabel_||(this.width+=2*Blockly.FlyoutButton.MARGIN,e.setAttribute("width",this.width),e.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),n.setAttribute("text-anchor","middle"),n.setAttribute("dominant-baseline","central"),n.setAttribute("dy",Blockly.utils.userAgent.EDGE_OR_IE?Blockly.Field.IE_TEXT_OFFSET:"0"),n.setAttribute("x",this.width/2),n.setAttribute("y",this.height/2),this.onMouseUpWrapper_=Blockly.bindEventWithChecks_(this.helpButtonIcon_&&this.callback_?this.helpButtonImage_:this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},Blockly.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},Blockly.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},Blockly.FlyoutButton.prototype.moveTo=function(e,t){this.position_.x=e,this.position_.y=t,this.updateTransform_()},Blockly.FlyoutButton.prototype.getPosition=function(){return this.position_},Blockly.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},Blockly.FlyoutButton.prototype.getText=function(){return this.text_},Blockly.FlyoutButton.prototype.getPosition=function(){return this.position_},Blockly.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&Blockly.unbindEvent_(this.onMouseUpWrapper_),this.svgGroup_&&Blockly.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},Blockly.FlyoutButton.prototype.onMouseUp_=function(e){(e=this.targetWorkspace_.getGesture(e))&&e.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},Blockly.Css.register([".blocklyFlyoutButton {","fill: #F4F4F4;","}",".blocklyFlyoutButtonBackground {","stroke: #fff;","}",".blocklyFlyoutButton .blocklyText {","fill: $colour_text;","}",".blocklyFlyoutButtonShadow {","fill: none;","}",".blocklyFlyoutButton:hover {","fill: #EAEAEA;","cursor: pointer;","}",".blocklyFlyoutLabel {","cursor: default;","}",".blocklyFlyoutLabelBackground {","opacity: 0;","}",".blocklyFlyoutLabelText {",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 14pt;","fill: $colour_text;","font-weight: bold;","}"]),Blockly.Generator=function(e){this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},Blockly.Generator.NAME_TYPE="generated_function",Blockly.Generator.prototype.INFINITE_LOOP_TRAP=null,Blockly.Generator.prototype.STATEMENT_PREFIX=null,Blockly.Generator.prototype.STATEMENT_SUFFIX=null,Blockly.Generator.prototype.INDENT="  ",Blockly.Generator.prototype.COMMENT_WRAP=60,Blockly.Generator.prototype.ORDER_OVERRIDES=[],Blockly.Generator.prototype.workspaceToCode=function(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=Blockly.getMainWorkspace());var t=[];this.init(e),e=e.getTopBlocks(!0);for(var n,o=0;n=e[o];o++){var r=this.blockToCode(n);(r=Array.isArray(r)?r[0]:r)&&(n.outputConnection&&(r=this.scrubNakedValue(r),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,n)+r),this.STATEMENT_SUFFIX)&&!n.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,n)),t.push(r))}return t=t.join("\n"),(t=(t=(t=this.finish(t)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},Blockly.Generator.prototype.prefixLines=function(e,t){return t+e.replace(/(?!\n$)\n/g,"\n"+t)},Blockly.Generator.prototype.allNestedComments=function(e){var t=[];e=e.getDescendants(!0);for(var n=0;n<e.length;n++){var o=e[n].getCommentText();o&&t.push(o)}return t.length&&t.push(""),t.join("\n")},Blockly.Generator.prototype.blockToCode=function(e,t){if(!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());var n=this[e.type];if("function"!=typeof n)throw Error('Language "'+this.name_+'" does not know how to generate  code for block type "'+e.type+'".');if(n=n.call(e,e),Array.isArray(n)){if(e.outputConnection)return[this.scrub_(e,n[0],t),n[1]];throw TypeError("Expecting string from statement block: "+e.type)}if("string"==typeof n)return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(n=this.injectId(this.STATEMENT_PREFIX,e)+n),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(n+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,n,t);if(null===n)return"";throw SyntaxError("Invalid code generated: "+n)},Blockly.Generator.prototype.valueToCode=function(e,t,n){if(isNaN(n))throw TypeError("Expecting valid order from block: "+e.type);if(!(o=e.getInputTargetBlock(t)))return"";if(""===(t=this.blockToCode(o)))return"";if(!Array.isArray(t))throw TypeError("Expecting tuple from value block: "+o.type);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+o.type);if(!e)return"";var o=!1,r=Math.floor(n),i=Math.floor(t);if(r<=i&&(r!=i||0!=r&&99!=r))for(o=!0,r=0;r<this.ORDER_OVERRIDES.length;r++)if(this.ORDER_OVERRIDES[r][0]==n&&this.ORDER_OVERRIDES[r][1]==t){o=!1;break}return e=o?"("+e+")":e},Blockly.Generator.prototype.statementToCode=function(e,t){if(e=e.getInputTargetBlock(t),"string"!=typeof(t=this.blockToCode(e)))throw TypeError("Expecting code from statement block: "+(e&&e.type));return t=t&&this.prefixLines(t,this.INDENT)},Blockly.Generator.prototype.addLoopTrap=function(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e},Blockly.Generator.prototype.injectId=function(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")},Blockly.Generator.prototype.RESERVED_WORDS_="",Blockly.Generator.prototype.addReservedWords=function(e){this.RESERVED_WORDS_+=e+","},Blockly.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Blockly.Generator.prototype.provideFunction_=function(e,t){if(!this.definitions_[e]){var n,o=this.variableDB_.getDistinctName(e,Blockly.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[e]=o,t=t.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);n!=t;)t=(n=t).replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]},Blockly.Generator.prototype.init=function(e){},Blockly.Generator.prototype.scrub_=function(e,t,n){return t},Blockly.Generator.prototype.finish=function(e){return e},Blockly.Generator.prototype.scrubNakedValue=function(e){return e},Blockly.tree={},Blockly.tree.BaseNode=function(e,t){Blockly.Component.call(this),this.config_=t,this.content_=e,this.expanded_=this.selected_=!1,this.toolTip_=null,this.isUserCollapsible_=!0,this.depth_=-1},Blockly.utils.object.inherits(Blockly.tree.BaseNode,Blockly.Component),Blockly.tree.BaseNode.allNodes={},Blockly.tree.BaseNode.prototype.disposeInternal=function(){Blockly.tree.BaseNode.superClass_.disposeInternal.call(this),this.tree&&(this.tree=null),this.setElementInternal(null)},Blockly.tree.BaseNode.prototype.initAccessibility=function(){var e=this.getElement();if(e){var t=this.getLabelElement();if(t&&!t.id&&(t.id=this.getId()+".label"),Blockly.utils.aria.setRole(e,Blockly.utils.aria.Role.TREEITEM),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.SELECTED,!1),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.LEVEL,this.getDepth()),t&&Blockly.utils.aria.setState(e,Blockly.utils.aria.State.LABELLEDBY,t.id),(t=this.getIconElement())&&Blockly.utils.aria.setRole(t,Blockly.utils.aria.Role.PRESENTATION),(t=this.getChildrenElement())&&(Blockly.utils.aria.setRole(t,Blockly.utils.aria.Role.GROUP),t.hasChildNodes()))for(Blockly.utils.aria.setState(e,Blockly.utils.aria.State.EXPANDED,!1),e=this.getChildCount(),t=1;t<=e;t++){var n=this.getChildAt(t-1).getElement();Blockly.utils.aria.setState(n,Blockly.utils.aria.State.SETSIZE,e),Blockly.utils.aria.setState(n,Blockly.utils.aria.State.POSINSET,t)}}},Blockly.tree.BaseNode.prototype.createDom=function(){var e=document.createElement("div");e.appendChild(this.toDom()),this.setElementInternal(e)},Blockly.tree.BaseNode.prototype.enterDocument=function(){Blockly.tree.BaseNode.superClass_.enterDocument.call(this),(Blockly.tree.BaseNode.allNodes[this.getId()]=this).initAccessibility()},Blockly.tree.BaseNode.prototype.exitDocument=function(){Blockly.tree.BaseNode.superClass_.exitDocument.call(this),delete Blockly.tree.BaseNode.allNodes[this.getId()]},Blockly.tree.BaseNode.prototype.addChildAt=function(e,t){var n,o,r=this.getChildAt(t-1),i=this.getChildAt(t);Blockly.tree.BaseNode.superClass_.addChildAt.call(this,e,t),e.previousSibling_=r,e.nextSibling_=i,r?r.nextSibling_=e:this.firstChild_=e,i?i.previousSibling_=e:this.lastChild_=e,(t=this.getTree())&&e.setTreeInternal(t),e.setDepth_(this.getDepth()+1),(t=this.getElement())&&(this.updateExpandIcon(),Blockly.utils.aria.setState(t,Blockly.utils.aria.State.EXPANDED,this.getExpanded()),this.getExpanded())&&(t=this.getChildrenElement(),e.getElement()||e.createDom(),n=e.getElement(),o=i&&i.getElement(),t.insertBefore(n,o),this.isInDocument()&&e.enterDocument(),i||(r?r.updateExpandIcon():(Blockly.utils.style.setElementShown(t,!0),this.setExpanded(this.getExpanded()))))},Blockly.tree.BaseNode.prototype.add=function(e){if(e.getParent())throw Error(Blockly.Component.Error.PARENT_UNABLE_TO_BE_SET);this.addChildAt(e,this.getChildCount())},Blockly.tree.BaseNode.prototype.getTree=function(){return null},Blockly.tree.BaseNode.prototype.getDepth=function(){var e=this.depth_;return e<0&&(e=this.computeDepth_(),this.setDepth_(e)),e},Blockly.tree.BaseNode.prototype.computeDepth_=function(){var e=this.getParent();return e?e.getDepth()+1:0},Blockly.tree.BaseNode.prototype.setDepth_=function(t){var e,n;t!=this.depth_&&(this.depth_=t,(e=this.getRowElement())&&(n=this.getPixelIndent_()+"px",this.isRightToLeft()?e.style.paddingRight=n:e.style.paddingLeft=n),this.forEachChild(function(e){e.setDepth_(t+1)}))},Blockly.tree.BaseNode.prototype.contains=function(e){for(;e;){if(e==this)return!0;e=e.getParent()}return!1},Blockly.tree.BaseNode.prototype.getChildren=function(){var t=[];return this.forEachChild(function(e){t.push(e)}),t},Blockly.tree.BaseNode.prototype.getFirstChild=function(){return this.getChildAt(0)},Blockly.tree.BaseNode.prototype.getLastChild=function(){return this.getChildAt(this.getChildCount()-1)},Blockly.tree.BaseNode.prototype.getPreviousSibling=function(){return this.previousSibling_},Blockly.tree.BaseNode.prototype.getNextSibling=function(){return this.nextSibling_},Blockly.tree.BaseNode.prototype.isLastSibling=function(){return!this.nextSibling_},Blockly.tree.BaseNode.prototype.isSelected=function(){return this.selected_},Blockly.tree.BaseNode.prototype.select=function(){var e=this.getTree();e&&e.setSelectedItem(this)},Blockly.tree.BaseNode.prototype.selectFirst=function(){var e=this.getTree();e&&this.firstChild_&&e.setSelectedItem(this.firstChild_)},Blockly.tree.BaseNode.prototype.setSelectedInternal=function(e){var t;this.selected_!=e&&(this.selected_=e,this.updateRow(),t=this.getElement())&&(Blockly.utils.aria.setState(t,Blockly.utils.aria.State.SELECTED,e),e)&&(e=this.getTree().getElement(),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.ACTIVEDESCENDANT,this.getId()))},Blockly.tree.BaseNode.prototype.getExpanded=function(){return this.expanded_},Blockly.tree.BaseNode.prototype.setExpandedInternal=function(e){this.expanded_=e},Blockly.tree.BaseNode.prototype.setExpanded=function(e){var t,n=e!=this.expanded_,o=(this.expanded_=e,this.getTree()),r=this.getElement();this.hasChildren()?(!e&&o&&this.contains(o.getSelectedItem())&&this.select(),r&&((t=this.getChildrenElement())&&(Blockly.utils.style.setElementShown(t,e),Blockly.utils.aria.setState(r,Blockly.utils.aria.State.EXPANDED,e),e)&&this.isInDocument()&&!t.hasChildNodes()&&(this.forEachChild(function(e){t.appendChild(e.toDom())}),this.forEachChild(function(e){e.enterDocument()})),this.updateExpandIcon())):(t=this.getChildrenElement())&&Blockly.utils.style.setElementShown(t,!1),r&&this.updateIcon_(),n&&(e?this.doNodeExpanded():this.doNodeCollapsed())},Blockly.tree.BaseNode.prototype.doNodeExpanded=function(){},Blockly.tree.BaseNode.prototype.doNodeCollapsed=function(){},Blockly.tree.BaseNode.prototype.toggle=function(){this.setExpanded(!this.getExpanded())},Blockly.tree.BaseNode.prototype.isUserCollapsible=function(){return this.isUserCollapsible_},Blockly.tree.BaseNode.prototype.toDom=function(){var e=this.getExpanded()&&this.hasChildren(),t=document.createElement("div");return t.style.backgroundPosition=this.getBackgroundPosition(),e||(t.style.display="none"),e&&this.forEachChild(function(e){t.appendChild(e.toDom())}),(e=document.createElement("div")).id=this.getId(),e.appendChild(this.getRowDom()),e.appendChild(t),e},Blockly.tree.BaseNode.prototype.getPixelIndent_=function(){return Math.max(0,(this.getDepth()-1)*this.config_.indentWidth)},Blockly.tree.BaseNode.prototype.getRowDom=function(){var e=document.createElement("div");return e.className=this.getRowClassName(),e.style["padding-"+(this.isRightToLeft()?"right":"left")]=this.getPixelIndent_()+"px",e.appendChild(this.getIconDom()),e.appendChild(this.getLabelDom()),e},Blockly.tree.BaseNode.prototype.getRowClassName=function(){var e="";return this.isSelected()&&(e=" "+(this.config_.cssSelectedRow||"")),this.config_.cssTreeRow+e},Blockly.tree.BaseNode.prototype.getLabelDom=function(){var e=document.createElement("span");return e.className=this.config_.cssItemLabel||"",e.textContent=this.getText(),e},Blockly.tree.BaseNode.prototype.getIconDom=function(){var e=document.createElement("span");return e.style.display="inline-block",e.className=this.getCalculatedIconClass(),e},Blockly.tree.BaseNode.prototype.getCalculatedIconClass=function(){throw Error("unimplemented abstract method")},Blockly.tree.BaseNode.prototype.getBackgroundPosition=function(){return(this.isLastSibling()?"-100":(this.getDepth()-1)*this.config_.indentWidth)+"px 0"},Blockly.tree.BaseNode.prototype.getElement=function(){var e=Blockly.tree.BaseNode.superClass_.getElement.call(this);return e||(e=document.getElementById(this.getId()),this.setElementInternal(e)),e},Blockly.tree.BaseNode.prototype.getRowElement=function(){var e=this.getElement();return e?e.firstChild:null},Blockly.tree.BaseNode.prototype.getIconElement=function(){var e=this.getRowElement();return e?e.firstChild:null},Blockly.tree.BaseNode.prototype.getLabelElement=function(){var e=this.getRowElement();return e&&e.lastChild?e.lastChild.previousSibling:null},Blockly.tree.BaseNode.prototype.getChildrenElement=function(){var e=this.getElement();return e?e.lastChild:null},Blockly.tree.BaseNode.prototype.getIconClass=function(){return this.iconClass_},Blockly.tree.BaseNode.prototype.getExpandedIconClass=function(){return this.expandedIconClass_},Blockly.tree.BaseNode.prototype.setText=function(e){this.content_=e},Blockly.tree.BaseNode.prototype.getText=function(){return this.content_},Blockly.tree.BaseNode.prototype.updateRow=function(){var e=this.getRowElement();e&&(e.className=this.getRowClassName())},Blockly.tree.BaseNode.prototype.updateExpandIcon=function(){var e=this.getChildrenElement();e&&(e.style.backgroundPosition=this.getBackgroundPosition())},Blockly.tree.BaseNode.prototype.updateIcon_=function(){this.getIconElement().className=this.getCalculatedIconClass()},Blockly.tree.BaseNode.prototype.onMouseDown=function(e){"expand"==e.target.getAttribute("type")&&this.hasChildren()?this.isUserCollapsible_&&this.toggle():(this.select(),this.updateRow())},Blockly.tree.BaseNode.prototype.onClick_=function(e){e.preventDefault()},Blockly.tree.BaseNode.prototype.onKeyDown=function(e){var t=!0;switch(e.keyCode){case Blockly.utils.KeyCodes.RIGHT:e.altKey||(t=this.selectChild());break;case Blockly.utils.KeyCodes.LEFT:e.altKey||(t=this.selectParent());break;case Blockly.utils.KeyCodes.DOWN:t=this.selectNext();break;case Blockly.utils.KeyCodes.UP:t=this.selectPrevious();break;default:t=!1}return t&&e.preventDefault(),t},Blockly.tree.BaseNode.prototype.selectNext=function(){var e=this.getNextShownNode();return e&&e.select(),!0},Blockly.tree.BaseNode.prototype.selectPrevious=function(){var e=this.getPreviousShownNode();return e&&e.select(),!0},Blockly.tree.BaseNode.prototype.selectParent=function(){var e,t;return this.hasChildren()&&this.getExpanded()&&this.isUserCollapsible_?this.setExpanded(!1):(e=this.getParent(),t=this.getTree(),e&&e!=t&&e.select()),!0},Blockly.tree.BaseNode.prototype.selectChild=function(){return!!this.hasChildren()&&(this.getExpanded()?this.getFirstChild().select():this.setExpanded(!0),!0)},Blockly.tree.BaseNode.prototype.getLastShownDescendant=function(){return this.getExpanded()&&this.hasChildren()?this.getLastChild().getLastShownDescendant():this},Blockly.tree.BaseNode.prototype.getNextShownNode=function(){if(this.hasChildren()&&this.getExpanded())return this.getFirstChild();for(var e,t=this;t!=this.getTree();){if(null!=(e=t.getNextSibling()))return e;t=t.getParent()}return null},Blockly.tree.BaseNode.prototype.getPreviousShownNode=function(){var e,t;return null!=(e=this.getPreviousSibling())?e.getLastShownDescendant():(e=this.getParent())==(t=this.getTree())||this==t?null:e},Blockly.tree.BaseNode.prototype.getConfig=function(){return this.config_},Blockly.tree.BaseNode.prototype.setTreeInternal=function(t){this.tree!=t&&(this.tree=t,this.forEachChild(function(e){e.setTreeInternal(t)}))},Blockly.tree.TreeNode=function(e,t,n){this.toolbox_=e,Blockly.tree.BaseNode.call(this,t,n)},Blockly.utils.object.inherits(Blockly.tree.TreeNode,Blockly.tree.BaseNode),Blockly.tree.TreeNode.prototype.getTree=function(){var e;return this.tree||((e=(e=this.getParent())&&e.getTree())?(this.setTreeInternal(e),e):null)},Blockly.tree.TreeNode.prototype.getCalculatedIconClass=function(){var e=this.getExpanded(),t=this.getExpandedIconClass();if(e&&t)return t;if(t=this.getIconClass(),!e&&t)return t;if(t=this.getConfig(),this.hasChildren()){if(e&&t.cssExpandedFolderIcon)return t.cssTreeIcon+" "+t.cssExpandedFolderIcon;if(!e&&t.cssCollapsedFolderIcon)return t.cssTreeIcon+" "+t.cssCollapsedFolderIcon}else if(t.cssFileIcon)return t.cssTreeIcon+" "+t.cssFileIcon;return""},Blockly.tree.TreeNode.prototype.onClick_=function(e){this.hasChildren()&&this.isUserCollapsible()?(this.toggle(),this.select()):this.isSelected()?this.getTree().setSelectedItem(null):this.select(),this.updateRow()},Blockly.tree.TreeNode.prototype.onMouseDown=function(e){},Blockly.tree.TreeNode.prototype.onKeyDown=function(e){var t,n,o;return this.tree.toolbox_.horizontalLayout_&&(n=Blockly.utils.KeyCodes.DOWN,o=Blockly.utils.KeyCodes.UP,(t={})[Blockly.utils.KeyCodes.RIGHT]=this.isRightToLeft()?o:n,t[Blockly.utils.KeyCodes.LEFT]=this.isRightToLeft()?n:o,t[Blockly.utils.KeyCodes.UP]=Blockly.utils.KeyCodes.LEFT,t[Blockly.utils.KeyCodes.DOWN]=Blockly.utils.KeyCodes.RIGHT,Object.defineProperties(e,{keyCode:{value:t[e.keyCode]||e.keyCode}})),Blockly.tree.TreeNode.superClass_.onKeyDown.call(this,e)},Blockly.tree.TreeNode.prototype.onSizeChanged=function(e){this.onSizeChanged_=e},Blockly.tree.TreeNode.prototype.resizeToolbox_=function(){this.onSizeChanged_&&this.onSizeChanged_.call(this.toolbox_)},Blockly.tree.TreeNode.prototype.doNodeExpanded=Blockly.tree.TreeNode.prototype.resizeToolbox_,Blockly.tree.TreeNode.prototype.doNodeCollapsed=Blockly.tree.TreeNode.prototype.resizeToolbox_,Blockly.tree.TreeControl=function(e,t){this.toolbox_=e,this.onKeydownWrapper_=this.onClickWrapper_=this.onBlurWrapper_=this.onFocusWrapper_=null,Blockly.tree.BaseNode.call(this,"",t),this.setExpandedInternal(!0),this.setSelectedInternal(!0),this.selectedItem_=this},Blockly.utils.object.inherits(Blockly.tree.TreeControl,Blockly.tree.BaseNode),Blockly.tree.TreeControl.prototype.getTree=function(){return this},Blockly.tree.TreeControl.prototype.getToolbox=function(){return this.toolbox_},Blockly.tree.TreeControl.prototype.getDepth=function(){return 0},Blockly.tree.TreeControl.prototype.handleFocus_=function(e){this.focused_=!0,e=this.getElement(),Blockly.utils.dom.addClass(e,"focused"),this.selectedItem_&&this.selectedItem_.select()},Blockly.tree.TreeControl.prototype.handleBlur_=function(e){this.focused_=!1,e=this.getElement(),Blockly.utils.dom.removeClass(e,"focused")},Blockly.tree.TreeControl.prototype.hasFocus=function(){return this.focused_},Blockly.tree.TreeControl.prototype.getExpanded=function(){return!0},Blockly.tree.TreeControl.prototype.setExpanded=function(e){this.setExpandedInternal(e)},Blockly.tree.TreeControl.prototype.getIconElement=function(){var e=this.getRowElement();return e?e.firstChild:null},Blockly.tree.TreeControl.prototype.updateExpandIcon=function(){},Blockly.tree.TreeControl.prototype.getRowClassName=function(){return Blockly.tree.TreeControl.superClass_.getRowClassName.call(this)+" "+this.getConfig().cssHideRoot},Blockly.tree.TreeControl.prototype.getCalculatedIconClass=function(){var e=this.getExpanded(),t=this.getExpandedIconClass();return e&&t||(t=this.getIconClass(),!e&&t)?t:(t=this.getConfig(),e&&t.cssExpandedRootIcon?t.cssTreeIcon+" "+t.cssExpandedRootIcon:"")},Blockly.tree.TreeControl.prototype.setSelectedItem=function(e){var t;e==this.selectedItem_||this.onBeforeSelected_&&!this.onBeforeSelected_.call(this.toolbox_,e)||(t=this.getSelectedItem(),this.selectedItem_&&this.selectedItem_.setSelectedInternal(!1),(this.selectedItem_=e)&&e.setSelectedInternal(!0),this.onAfterSelected_&&this.onAfterSelected_.call(this.toolbox_,t,e))},Blockly.tree.TreeControl.prototype.onBeforeSelected=function(e){this.onBeforeSelected_=e},Blockly.tree.TreeControl.prototype.onAfterSelected=function(e){this.onAfterSelected_=e},Blockly.tree.TreeControl.prototype.getSelectedItem=function(){return this.selectedItem_},Blockly.tree.TreeControl.prototype.initAccessibility=function(){Blockly.tree.TreeControl.superClass_.initAccessibility.call(this);var e=this.getElement();Blockly.utils.aria.setRole(e,Blockly.utils.aria.Role.TREE),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.LABELLEDBY,this.getLabelElement().id)},Blockly.tree.TreeControl.prototype.enterDocument=function(){Blockly.tree.TreeControl.superClass_.enterDocument.call(this);var e=this.getElement();e.className=this.getConfig().cssRoot,e.setAttribute("hideFocus","true"),this.attachEvents_(),this.initAccessibility()},Blockly.tree.TreeControl.prototype.exitDocument=function(){Blockly.tree.TreeControl.superClass_.exitDocument.call(this),this.detachEvents_()},Blockly.tree.TreeControl.prototype.attachEvents_=function(){var e=this.getElement();e.tabIndex=0,this.onFocusWrapper_=Blockly.bindEvent_(e,"focus",this,this.handleFocus_),this.onBlurWrapper_=Blockly.bindEvent_(e,"blur",this,this.handleBlur_),this.onClickWrapper_=Blockly.bindEventWithChecks_(e,"click",this,this.handleMouseEvent_),this.onKeydownWrapper_=Blockly.bindEvent_(e,"keydown",this,this.handleKeyEvent_)},Blockly.tree.TreeControl.prototype.detachEvents_=function(){this.onFocusWrapper_&&(Blockly.unbindEvent_(this.onFocusWrapper_),this.onFocusWrapper_=null),this.onBlurWrapper_&&(Blockly.unbindEvent_(this.onBlurWrapper_),this.onBlurWrapper_=null),this.onClickWrapper_&&(Blockly.unbindEvent_(this.onClickWrapper_),this.onClickWrapper_=null),this.onKeydownWrapper_&&(Blockly.unbindEvent_(this.onKeydownWrapper_),this.onKeydownWrapper_=null)},Blockly.tree.TreeControl.prototype.handleMouseEvent_=function(e){var t=this.getNodeFromEvent_(e);if(t)switch(e.type){case"mousedown":t.onMouseDown(e);break;case"click":t.onClick_(e)}},Blockly.tree.TreeControl.prototype.handleKeyEvent_=function(e){var t;return(t=this.selectedItem_&&this.selectedItem_.onKeyDown(e)||!1)&&(Blockly.utils.style.scrollIntoContainerView(this.selectedItem_.getElement(),this.getElement().parentNode),e.preventDefault()),t},Blockly.tree.TreeControl.prototype.getNodeFromEvent_=function(e){for(var t=e.target;null!=t;){if(e=Blockly.tree.BaseNode.allNodes[t.id])return e;if(t==this.getElement())break;t=t.parentNode}return null},Blockly.tree.TreeControl.prototype.createNode=function(e){return new Blockly.tree.TreeNode(this.toolbox_,e||"",this.getConfig())},Blockly.Toolbox=function(e){this.workspace_=e,this.RTL=e.options.RTL,this.horizontalLayout_=e.options.horizontalLayout,this.toolboxPosition=e.options.toolboxPosition,this.config_={indentWidth:19,cssRoot:"blocklyTreeRoot",cssHideRoot:"blocklyHidden",cssTreeRow:"blocklyTreeRow",cssItemLabel:"blocklyTreeLabel",cssTreeIcon:"blocklyTreeIcon",cssExpandedFolderIcon:"blocklyTreeIconOpen",cssFileIcon:"blocklyTreeIconNone",cssSelectedRow:"blocklyTreeSelected"},this.treeSeparatorConfig_={cssTreeRow:"blocklyTreeSeparator"},this.horizontalLayout_&&(this.config_.cssTreeRow+=e.RTL?" blocklyHorizontalTreeRtl":" blocklyHorizontalTree",this.treeSeparatorConfig_.cssTreeRow="blocklyTreeSeparatorHorizontal "+(e.RTL?"blocklyHorizontalTreeRtl":"blocklyHorizontalTree"),this.config_.cssTreeIcon=""),this.flyout_=null},Blockly.Toolbox.prototype.width=0,Blockly.Toolbox.prototype.height=0,Blockly.Toolbox.prototype.selectedOption_=null,Blockly.Toolbox.prototype.lastCategory_=null,Blockly.Toolbox.prototype.init=function(){var e=this.workspace_,t=this.workspace_.getParentSvg(),n=(this.HtmlDiv=document.createElement("div"),this.HtmlDiv.className="blocklyToolboxDiv blocklyNonSelectable",this.HtmlDiv.setAttribute("dir",e.RTL?"RTL":"LTR"),t.parentNode.insertBefore(this.HtmlDiv,t),e.getThemeManager());if(n.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),n.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),Blockly.bindEventWithChecks_(this.HtmlDiv,"mousedown",this,function(e){Blockly.utils.isRightButton(e)||e.target==this.HtmlDiv?Blockly.hideChaff(!1):Blockly.hideChaff(!0),Blockly.Touch.clearTouchIdentifier()},!1,!0),n={parentWorkspace:e,RTL:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,toolboxPosition:e.options.toolboxPosition,renderer:e.options.renderer},e.horizontalLayout){if(!Blockly.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout_=new Blockly.HorizontalFlyout(n)}else{if(!Blockly.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout_=new Blockly.VerticalFlyout(n)}if(!this.flyout_)throw Error("One of Blockly.VerticalFlyout or Blockly.Horizontal must berequired.");Blockly.utils.dom.insertAfter(this.flyout_.createDom("svg"),t),this.flyout_.init(e),this.config_.cleardotPath=e.options.pathToMedia+"1x1.gif",this.config_.cssCollapsedFolderIcon="blocklyTreeIconClosed"+(e.RTL?"Rtl":"Ltr"),this.renderTree(e.options.languageTree)},Blockly.Toolbox.prototype.renderTree=function(e){this.tree_&&(this.tree_.dispose(),this.lastCategory_=null);var t=new Blockly.tree.TreeControl(this,this.config_),n=((this.tree_=t).setSelectedItem(null),t.onBeforeSelected(this.handleBeforeTreeSelected_),t.onAfterSelected(this.handleAfterTreeSelected_),null);if(e){if(this.tree_.blocks=[],this.hasColours_=!1,n=this.syncTrees_(e,this.tree_,this.workspace_.options.pathToMedia),this.tree_.blocks.length)throw Error("Toolbox cannot have both blocks and categories in the root level.");this.workspace_.resizeContents()}t.render(this.HtmlDiv),n&&t.setSelectedItem(n),this.addColour_(),this.position(),this.horizontalLayout_&&Blockly.utils.aria.setState(this.tree_.getElement(),Blockly.utils.aria.State.ORIENTATION,"horizontal")},Blockly.Toolbox.prototype.handleBeforeTreeSelected_=function(e){var t;return e!=this.tree_&&(this.lastCategory_&&(this.lastCategory_.getRowElement().style.backgroundColor=""),e&&(t=e.hexColour||"#57e",e.getRowElement().style.backgroundColor=t,this.addColour_(e)),!0)},Blockly.Toolbox.prototype.handleAfterTreeSelected_=function(e,t){t&&t.blocks&&t.blocks.length?(this.flyout_.show(t.blocks),this.lastCategory_!=t&&this.flyout_.scrollToStart(),this.workspace_.keyboardAccessibilityMode&&Blockly.navigation.setState(Blockly.navigation.STATE_TOOLBOX)):(this.flyout_.hide(),!this.workspace_.keyboardAccessibilityMode||t instanceof Blockly.Toolbox.TreeSeparator||Blockly.navigation.setState(Blockly.navigation.STATE_WS)),e!=t&&e!=this&&((e=new Blockly.Events.Ui(null,"category",e&&e.getText(),t&&t.getText())).workspaceId=this.workspace_.id,Blockly.Events.fire(e)),t&&(this.lastCategory_=t)},Blockly.Toolbox.prototype.handleNodeSizeChanged_=function(){Blockly.svgResize(this.workspace_)},Blockly.Toolbox.prototype.onBlocklyAction=function(e){var t=this.tree_.getSelectedItem();if(!t)return!1;switch(e.name){case Blockly.navigation.actionNames.PREVIOUS:return t.selectPrevious();case Blockly.navigation.actionNames.OUT:return t.selectParent();case Blockly.navigation.actionNames.NEXT:return t.selectNext();case Blockly.navigation.actionNames.IN:return t.selectChild();default:return!1}},Blockly.Toolbox.prototype.dispose=function(){this.flyout_.dispose(),this.tree_.dispose(),this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),Blockly.utils.dom.removeNode(this.HtmlDiv),this.lastCategory_=null},Blockly.Toolbox.prototype.getWidth=function(){return this.width},Blockly.Toolbox.prototype.getHeight=function(){return this.height},Blockly.Toolbox.prototype.getFlyout=function(){return this.flyout_},Blockly.Toolbox.prototype.setFlyout=function(e){this.flyout_=e},Blockly.Toolbox.prototype.position=function(){var e,t=this.HtmlDiv;t&&(e=Blockly.svgSize(this.workspace_.getParentSvg()),this.horizontalLayout_?(t.style.left="0",t.style.height="auto",t.style.width=e.width+"px",this.height=t.offsetHeight,this.toolboxPosition==Blockly.TOOLBOX_AT_TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT?t.style.right="0":t.style.left="0",t.style.height=e.height+"px",this.width=t.offsetWidth),this.flyout_.position())},Blockly.Toolbox.prototype.syncTrees_=function(e,t,n){for(var o,r=null,i=null,s=0;o=e.childNodes[s];s++)if(o.tagName)switch(o.tagName.toUpperCase()){case"CATEGORY":var i=Blockly.utils.replaceMessageReferences(o.getAttribute("name")),a=this.tree_.createNode(i),l=(a.onSizeChanged(this.handleNodeSizeChanged_),a.blocks=[],t.add(a),o.getAttribute("custom")),c=(l?a.blocks=l:(l=this.syncTrees_(o,a,n))&&(r=l),l=o.getAttribute("categorystyle"),o.getAttribute("colour"));c&&l?(a.hexColour="",console.warn('Toolbox category "'+i+'" can not have both a style and a colour')):l?this.setColourFromStyle_(l,a,i):this.setColour_(c,a,i),"true"==o.getAttribute("expanded")?(a.blocks.length&&(r=a),a.setExpanded(!0)):a.setExpanded(!1),i=o;break;case"SEP":if(i&&"CATEGORY"==i.tagName.toUpperCase()){t.add(new Blockly.Toolbox.TreeSeparator(this.treeSeparatorConfig_));break}case"BLOCK":case"SHADOW":case"LABEL":case"BUTTON":t.blocks.push(o),i=o}return r},Blockly.Toolbox.prototype.setColour_=function(e,t,n){var o;null===(e=Blockly.utils.replaceMessageReferences(e))||""===e?t.hexColour="":(o=Number(e),isNaN(o)?(o=Blockly.utils.colour.parse(e))?(t.hexColour=o,this.hasColours_=!0):(t.hexColour="",console.warn('Toolbox category "'+n+'" has unrecognized colour attribute: '+e)):(t.hexColour=Blockly.hueToHex(o),this.hasColours_=!0))},Blockly.Toolbox.prototype.setColourFromStyle_=function(e,t,n){t.styleName=e;var o=this.workspace_.getTheme();e&&o&&((o=o.categoryStyles[e])&&o.colour?this.setColour_(o.colour,t,n):console.warn('Style "'+e+'" must exist and contain a colour value'))},Blockly.Toolbox.prototype.updateColourFromTheme_=function(e){if(e=e||this.tree_){e=e.getChildren(!1);for(var t,n=0;t=e[n];n++)t.styleName&&(this.setColourFromStyle_(t.styleName,t,""),this.addColour_()),this.updateColourFromTheme_(t)}},Blockly.Toolbox.prototype.updateColourFromTheme=function(){var e=this.tree_;e&&(this.updateColourFromTheme_(e),this.updateSelectedItemColour_(e))},Blockly.Toolbox.prototype.updateSelectedItemColour_=function(e){var t;(e=e.getSelectedItem())&&(t=e.hexColour||"#57e",e.getRowElement().style.backgroundColor=t,this.addColour_(e))},Blockly.Toolbox.prototype.addColour_=function(e){e=(e||this.tree_).getChildren(!1);for(var t,n=0;t=e[n];n++){var o,r=t.getRowElement();r&&(o=this.hasColours_?"8px solid "+(t.hexColour||"#ddd"):"none",this.workspace_.RTL?r.style.borderRight=o:r.style.borderLeft=o),this.addColour_(t)}},Blockly.Toolbox.prototype.clearSelection=function(){this.tree_.setSelectedItem(null)},Blockly.Toolbox.prototype.addStyle=function(e){Blockly.utils.dom.addClass(this.HtmlDiv,e)},Blockly.Toolbox.prototype.removeStyle=function(e){Blockly.utils.dom.removeClass(this.HtmlDiv,e)},Blockly.Toolbox.prototype.getClientRect=function(){var e,t,n,o;return this.HtmlDiv?(t=(e=(o=this.HtmlDiv.getBoundingClientRect()).top)+o.height,o=(n=o.left)+o.width,this.toolboxPosition==Blockly.TOOLBOX_AT_TOP?new Blockly.utils.Rect(-1e7,t,-1e7,1e7):this.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM?new Blockly.utils.Rect(e,1e7,-1e7,1e7):this.toolboxPosition==Blockly.TOOLBOX_AT_LEFT?new Blockly.utils.Rect(-1e7,1e7,-1e7,o):new Blockly.utils.Rect(-1e7,1e7,n,1e7)):null},Blockly.Toolbox.prototype.refreshSelection=function(){var e=this.tree_.getSelectedItem();e&&e.blocks&&this.flyout_.show(e.blocks)},Blockly.Toolbox.prototype.selectFirstCategory=function(){this.tree_.getSelectedItem()||this.tree_.selectFirst()},Blockly.Toolbox.TreeSeparator=function(e){Blockly.tree.TreeNode.call(this,null,"",e)},Blockly.utils.object.inherits(Blockly.Toolbox.TreeSeparator,Blockly.tree.TreeNode),Blockly.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: $colour_toolbox;","color: $colour_toolboxText;","overflow-x: visible;","overflow-y: auto;","position: absolute;","font-family: sans-serif;","user-select: none;","-moz-user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","z-index: 40;","-webkit-tap-highlight-color: transparent;","}",".blocklyTreeRoot {","padding: 4px 0;","}",".blocklyTreeRoot:focus {","outline: none;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",".blocklyHorizontalTree {","float: left;","margin: 1px 5px 8px 0;","}",".blocklyHorizontalTreeRtl {","float: right;","margin: 1px 0 8px 5px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","}",".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: #e4e4e4;","}",".blocklyTreeSeparator {","border-bottom: solid #e5e5e5 1px;","height: 0;","margin: 5px 0;","}",".blocklyTreeSeparatorHorizontal {","border-right: solid #e5e5e5 1px;","width: 0;","padding: 5px 0;","margin: 0 5px;","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","width: 16px;","}",".blocklyTreeIconClosedLtr {","background-position: -32px -1px;","}",".blocklyTreeIconClosedRtl {","background-position: 0 -1px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedLtr {","background-position: -32px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedRtl {","background-position: 0 -17px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeIconNone,",".blocklyTreeSelected>.blocklyTreeIconNone {","background-position: -48px -1px;","}",".blocklyTreeLabel {","cursor: default;","font-family: sans-serif;","font-size: 16px;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),Blockly.Trashcan=function(e){if(this.workspace_=e,this.contents_=[],this.flyout=null,!(this.workspace_.options.maxTrashcanContents<=0)){if(e={scrollbars:!0,parentWorkspace:this.workspace_,RTL:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer},this.workspace_.horizontalLayout){if(e.toolboxPosition=this.workspace_.toolboxPosition==Blockly.TOOLBOX_AT_TOP?Blockly.TOOLBOX_AT_BOTTOM:Blockly.TOOLBOX_AT_TOP,!Blockly.HorizontalFlyout)throw Error("Missing require for Blockly.HorizontalFlyout");this.flyout=new Blockly.HorizontalFlyout(e)}else{if(e.toolboxPosition=this.workspace_.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT?Blockly.TOOLBOX_AT_LEFT:Blockly.TOOLBOX_AT_RIGHT,!Blockly.VerticalFlyout)throw Error("Missing require for Blockly.VerticalFlyout");this.flyout=new Blockly.VerticalFlyout(e)}this.workspace_.addChangeListener(this.onDelete_.bind(this))}},Blockly.Trashcan.prototype.WIDTH_=47,Blockly.Trashcan.prototype.BODY_HEIGHT_=44,Blockly.Trashcan.prototype.LID_HEIGHT_=16,Blockly.Trashcan.prototype.MARGIN_BOTTOM_=20,Blockly.Trashcan.prototype.MARGIN_SIDE_=20,Blockly.Trashcan.prototype.MARGIN_HOTSPOT_=10,Blockly.Trashcan.prototype.SPRITE_LEFT_=0,Blockly.Trashcan.prototype.SPRITE_TOP_=32,Blockly.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE=.1,Blockly.Trashcan.prototype.isOpen=!1,Blockly.Trashcan.prototype.minOpenness_=0,Blockly.Trashcan.prototype.svgGroup_=null,Blockly.Trashcan.prototype.svgLid_=null,Blockly.Trashcan.prototype.lidTask_=0,Blockly.Trashcan.prototype.lidOpen_=0,Blockly.Trashcan.prototype.left_=0,Blockly.Trashcan.prototype.top_=0,Blockly.Trashcan.prototype.createDom=function(){this.svgGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyTrash"},null);var e=String(Math.random()).substring(2),t=Blockly.utils.dom.createSvgElement("clipPath",{id:"blocklyTrashBodyClipPath"+e},this.svgGroup_),n=(Blockly.utils.dom.createSvgElement("rect",{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},t),Blockly.utils.dom.createSvgElement("image",{width:Blockly.SPRITE.width,x:-this.SPRITE_LEFT_,height:Blockly.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+e+")"},this.svgGroup_));return n.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+Blockly.SPRITE.url),t=Blockly.utils.dom.createSvgElement("clipPath",{id:"blocklyTrashLidClipPath"+e},this.svgGroup_),Blockly.utils.dom.createSvgElement("rect",{width:this.WIDTH_,height:this.LID_HEIGHT_},t),this.svgLid_=Blockly.utils.dom.createSvgElement("image",{width:Blockly.SPRITE.width,x:-this.SPRITE_LEFT_,height:Blockly.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup_),this.svgLid_.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+Blockly.SPRITE.url),Blockly.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.click),Blockly.bindEvent_(n,"mouseover",this,this.mouseOver_),Blockly.bindEvent_(n,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},Blockly.Trashcan.prototype.init=function(e){return 0<this.workspace_.options.maxTrashcanContents&&(Blockly.utils.dom.insertAfter(this.flyout.createDom("svg"),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.verticalSpacing_=this.MARGIN_BOTTOM_+e,this.setOpen(!1),this.verticalSpacing_+this.BODY_HEIGHT_+this.LID_HEIGHT_},Blockly.Trashcan.prototype.dispose=function(){this.svgGroup_&&(Blockly.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},Blockly.Trashcan.prototype.position=function(){var e;this.verticalSpacing_&&(e=this.workspace_.getMetrics())&&(this.left_=e.toolboxPosition==Blockly.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?e.viewWidth+e.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-Blockly.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+Blockly.Scrollbar.scrollbarThickness,this.top_=e.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM?this.verticalSpacing_:e.viewHeight+e.absoluteTop-(this.BODY_HEIGHT_+this.LID_HEIGHT_)-this.verticalSpacing_,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))},Blockly.Trashcan.prototype.getClientRect=function(){var e,t;return this.svgGroup_?(e=(t=this.svgGroup_.getBoundingClientRect()).top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,new Blockly.utils.Rect(e,e+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)):null},Blockly.Trashcan.prototype.setOpen=function(e){this.isOpen!=e&&(clearTimeout(this.lidTask_),this.isOpen=e,this.animateLid_())},Blockly.Trashcan.prototype.animateLid_=function(){this.lidOpen_+=this.isOpen?.2:-.2,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(45*this.lidOpen_),this.svgGroup_.style.opacity=.4+.4*this.lidOpen_,this.lidOpen_>this.minOpenness_&&this.lidOpen_<1&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),20))},Blockly.Trashcan.prototype.setLidAngle_=function(e){var t=this.workspace_.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},Blockly.Trashcan.prototype.close=function(){this.setOpen(!1)},Blockly.Trashcan.prototype.click=function(){if(this.contents_.length){for(var e,t=[],n=0;e=this.contents_[n];n++)t[n]=Blockly.Xml.textToDom(e);this.flyout.show(t)}},Blockly.Trashcan.prototype.mouseOver_=function(){this.contents_.length&&this.setOpen(!0)},Blockly.Trashcan.prototype.mouseOut_=function(){this.setOpen(!1)},Blockly.Trashcan.prototype.onDelete_=function(e){if(!(this.workspace_.options.maxTrashcanContents<=0)&&e.type==Blockly.Events.BLOCK_DELETE&&"shadow"!=e.oldXml.tagName.toLowerCase()&&(e=this.cleanBlockXML_(e.oldXml),-1==this.contents_.indexOf(e))){for(this.contents_.unshift(e);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.minOpenness_=this.HAS_BLOCKS_LID_ANGLE,this.setLidAngle_(45*this.minOpenness_)}},Blockly.Trashcan.prototype.cleanBlockXML_=function(e){for(var t=e=e.cloneNode(!0);t;){t.removeAttribute&&(t.removeAttribute("x"),t.removeAttribute("y"),t.removeAttribute("id"),t.removeAttribute("disabled"),"comment"==t.nodeName)&&(t.removeAttribute("h"),t.removeAttribute("w"),t.removeAttribute("pinned"));var n=t.firstChild||t.nextSibling;if(!n)for(n=t.parentNode;n;){if(n.nextSibling){n=n.nextSibling;break}n=n.parentNode}t=n}return Blockly.Xml.domToText(e)},Blockly.VariablesDynamic={},Blockly.VariablesDynamic.onCreateVariableButtonClick_String=function(e){Blockly.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"String")},Blockly.VariablesDynamic.onCreateVariableButtonClick_Number=function(e){Blockly.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Number")},Blockly.VariablesDynamic.onCreateVariableButtonClick_Colour=function(e){Blockly.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Colour")},Blockly.VariablesDynamic.flyoutCategory=function(e){var t=[],n=document.createElement("button");return n.setAttribute("text",Blockly.Msg.NEW_STRING_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(n),(n=document.createElement("button")).setAttribute("text",Blockly.Msg.NEW_NUMBER_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(n),(n=document.createElement("button")).setAttribute("text",Blockly.Msg.NEW_COLOUR_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(n),e.registerButtonCallback("CREATE_VARIABLE_STRING",Blockly.VariablesDynamic.onCreateVariableButtonClick_String),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Blockly.VariablesDynamic.onCreateVariableButtonClick_Number),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",Blockly.VariablesDynamic.onCreateVariableButtonClick_Colour),e=Blockly.VariablesDynamic.flyoutCategoryBlocks(e),t.concat(e)},Blockly.VariablesDynamic.flyoutCategoryBlocks=function(e){var t,n,o,r=[];if(0<(e=e.getAllVariables()).length&&(Blockly.Blocks.variables_set_dynamic&&(t=e[e.length-1],(n=Blockly.utils.xml.createElement("block")).setAttribute("type","variables_set_dynamic"),n.setAttribute("gap",24),n.appendChild(Blockly.Variables.generateVariableFieldDom(t)),r.push(n)),Blockly.Blocks.variables_get_dynamic)){e.sort(Blockly.VariableModel.compareByName),t=0;for(;o=e[t];t++)(n=Blockly.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),n.setAttribute("gap",8),n.appendChild(Blockly.Variables.generateVariableFieldDom(o)),r.push(n)}return r},Blockly.WorkspaceComment=function(e,t,n,o,r,i){this.id=i&&!e.getCommentById(i)?i:Blockly.utils.genUid(),e.addTopComment(this),this.xy_=new Blockly.utils.Coordinate(0,0),this.height_=n,this.width_=o,this.isMinimized_=r,this.workspace=e,this.RTL=e.RTL,this.editable_=this.movable_=this.deletable_=!0,this.content_=t.trim(),this.isComment=!0,Blockly.WorkspaceComment.fireCreateEvent(this)},Blockly.WorkspaceComment.MAX_LABEL_LENGTH=12,Blockly.WorkspaceComment.COMMENT_TEXT_LIMIT=8e3,Blockly.WorkspaceComment.prototype.data=null,Blockly.WorkspaceComment.prototype.dispose=function(){this.workspace&&(Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.CommentDelete(this)),this.workspace.removeTopComment(this),this.workspace=null)},Blockly.WorkspaceComment.prototype.getHeight=function(){return this.height_},Blockly.WorkspaceComment.prototype.setHeight=function(e){this.height_=e},Blockly.WorkspaceComment.prototype.getWidth=function(){return this.width_},Blockly.WorkspaceComment.prototype.setWidth=function(e){this.width_=e},Blockly.WorkspaceComment.prototype.getXY=function(){return new Blockly.utils.Coordinate(this.xy_.x,this.xy_.y)},Blockly.WorkspaceComment.prototype.moveBy=function(e,t){var n=new Blockly.Events.CommentMove(this);this.xy_.translate(e,t),n.recordNew(),Blockly.Events.fire(n)},Blockly.WorkspaceComment.prototype.isDeletable=function(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.WorkspaceComment.prototype.setDeletable=function(e){this.deletable_=e},Blockly.WorkspaceComment.prototype.isMovable=function(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.WorkspaceComment.prototype.setMovable=function(e){this.movable_=e},Blockly.WorkspaceComment.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.WorkspaceComment.prototype.setEditable=function(e){this.editable_=e},Blockly.WorkspaceComment.prototype.getContent=function(){return this.content_},Blockly.WorkspaceComment.prototype.setContent=function(e){this.content_!=e&&(e=e.trim(),Blockly.Events.fire(new Blockly.Events.CommentChange(this,{text:this.content_},{text:e})),this.content_=e)},Blockly.WorkspaceComment.prototype.isMinimized=function(){return this.isMinimized_},Blockly.WorkspaceComment.prototype.getRelativeToSurfaceXY=function(){return this.xy_},Blockly.WorkspaceComment.prototype.toXmlWithXY=function(e){return(e=this.toXml(e)).setAttribute("x",Math.round(this.xy_.x)),e.setAttribute("y",Math.round(this.xy_.y)),e.setAttribute("h",this.height_),e.setAttribute("w",this.width_),e},Blockly.WorkspaceComment.prototype.getLabelText=function(){return this.content_.length>Blockly.WorkspaceComment.MAX_LABEL_LENGTH?this.RTL?""+this.content_.slice(0,Blockly.WorkspaceComment.MAX_LABEL_LENGTH):this.content_.slice(0,Blockly.WorkspaceComment.MAX_LABEL_LENGTH)+"":this.content_},Blockly.WorkspaceComment.prototype.toXml=function(e){var t=Blockly.utils.xml.createElement("comment");return e||(t.id=this.id),t.textContent=this.getContent(),this.isMinimized_&&t.setAttribute("minimized",!0),this.data&&t.setAttribute("data",this.data),t},Blockly.WorkspaceComment.fireCreateEvent=function(e){if(Blockly.Events.isEnabled()){var t=Blockly.Events.getGroup();t||Blockly.Events.setGroup(!0);try{Blockly.Events.fire(new Blockly.Events.CommentCreate(e))}finally{t||Blockly.Events.setGroup(!1)}}},Blockly.WorkspaceComment.fromXml=function(e,t){var n=Blockly.WorkspaceComment.parseAttributes(e);return(t=new Blockly.WorkspaceComment(t,n.content,n.h,n.w,n.minimized,n.id)).data=e.getAttribute("data"),n=parseInt(e.getAttribute("x"),10),e=parseInt(e.getAttribute("y"),10),isNaN(n)||isNaN(e)||t.moveBy(n,e),Blockly.WorkspaceComment.fireCreateEvent(t),t},Blockly.WorkspaceComment.parseAttributes=function(e){var t=e.getAttribute("h"),n=e.getAttribute("w");return{id:e.getAttribute("id"),h:t?parseInt(t,10):100,w:n?parseInt(n,10):100,x:parseInt(e.getAttribute("x"),10),y:parseInt(e.getAttribute("y"),10),minimized:"true"==e.getAttribute("minimized")||!1,content:e.textContent}},Blockly.WorkspaceCommentSvg=function(e,t,n,o,r,i){this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.svgGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyComment"},null),this.svgGroup_.translate_="",this.svgRect_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyCommentRect",x:0,y:0,rx:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,ry:Blockly.WorkspaceCommentSvg.BORDER_WIDTH}),this.svgGroup_.appendChild(this.svgRect_),this.rendered_=!1,this.useDragSurface_=Blockly.utils.is3dSupported()&&!!e.blockDragSurface_,Blockly.WorkspaceCommentSvg.superClass_.constructor.call(this,e,t,n,o,r,i),this.render()},Blockly.utils.object.inherits(Blockly.WorkspaceCommentSvg,Blockly.WorkspaceComment),Blockly.WorkspaceCommentSvg.DEFAULT_SIZE=200,Blockly.WorkspaceCommentSvg.prototype.dispose=function(){this.workspace&&(Blockly.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.CommentDelete(this)),Blockly.utils.dom.removeNode(this.svgGroup_),this.svgRect_=this.svgGroup_=null,this.disposeInternal_(),Blockly.Events.disable(),Blockly.WorkspaceCommentSvg.superClass_.dispose.call(this),Blockly.Events.enable())},Blockly.WorkspaceCommentSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||(Blockly.bindEventWithChecks_(this.svgRectTarget_,"mousedown",this,this.pathMouseDown_),Blockly.bindEventWithChecks_(this.svgHandleTarget_,"mousedown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot())},Blockly.WorkspaceCommentSvg.prototype.pathMouseDown_=function(e){var t=this.workspace.getGesture(e);t&&t.handleBubbleStart(e,this)},Blockly.WorkspaceCommentSvg.prototype.showContextMenu=function(e){var t;this.workspace.options.readOnly||this.workspace.options.debugMode||(t=[],this.isDeletable()&&this.isMovable()&&(t.push(Blockly.ContextMenu.commentDuplicateOption(this)),t.push(Blockly.ContextMenu.commentDeleteOption(this))),Blockly.ContextMenu.show(e,t,this.RTL))},Blockly.WorkspaceCommentSvg.prototype.select=function(){if(Blockly.selected!=this){var e=null;if(Blockly.selected){e=Blockly.selected.id,Blockly.Events.disable();try{Blockly.selected.unselect()}finally{Blockly.Events.enable()}}(e=new Blockly.Events.Ui(null,"selected",e,this.id)).workspaceId=this.workspace.id,Blockly.Events.fire(e),(Blockly.selected=this).addSelect()}},Blockly.WorkspaceCommentSvg.prototype.unselect=function(){var e;Blockly.selected==this&&((e=new Blockly.Events.Ui(null,"selected",this.id,null)).workspaceId=this.workspace.id,Blockly.Events.fire(e),Blockly.selected=null,this.removeSelect(),this.blurFocus())},Blockly.WorkspaceCommentSvg.prototype.addSelect=function(){Blockly.utils.dom.addClass(this.svgGroup_,"blocklySelected"),this.setFocus()},Blockly.WorkspaceCommentSvg.prototype.removeSelect=function(){Blockly.utils.dom.removeClass(this.svgGroup_,"blocklySelected"),this.blurFocus()},Blockly.WorkspaceCommentSvg.prototype.addFocus=function(){Blockly.utils.dom.addClass(this.svgGroup_,"blocklyFocused")},Blockly.WorkspaceCommentSvg.prototype.removeFocus=function(){Blockly.utils.dom.removeClass(this.svgGroup_,"blocklyFocused")},Blockly.WorkspaceCommentSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,t=0,n=this.useDragSurface_?this.workspace.blockDragSurface_.getGroup():null,o=this.getSvgRoot();if(o)do{var r=Blockly.utils.getRelativeXY(o)}while(e+=r.x,t+=r.y,this.useDragSurface_&&this.workspace.blockDragSurface_.getCurrentBlock()==o&&(e+=(r=this.workspace.blockDragSurface_.getSurfaceTranslation()).x,t+=r.y),(o=o.parentNode)&&o!=this.workspace.getBubbleCanvas()&&o!=n);return this.xy_=new Blockly.utils.Coordinate(e,t)},Blockly.WorkspaceCommentSvg.prototype.moveBy=function(e,t){var n=new Blockly.Events.CommentMove(this),o=this.getRelativeToSurfaceXY();this.translate(o.x+e,o.y+t),this.xy_=new Blockly.utils.Coordinate(o.x+e,o.y+t),n.recordNew(),Blockly.Events.fire(n),this.workspace.resizeContents()},Blockly.WorkspaceCommentSvg.prototype.translate=function(e,t){this.xy_=new Blockly.utils.Coordinate(e,t),this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")},Blockly.WorkspaceCommentSvg.prototype.moveToDragSurface=function(){var e;this.useDragSurface_&&(e=this.getRelativeToSurfaceXY(),this.clearTransformAttributes_(),this.workspace.blockDragSurface_.translateSurface(e.x,e.y),this.workspace.blockDragSurface_.setBlocksAndShow(this.getSvgRoot()))},Blockly.WorkspaceCommentSvg.prototype.moveOffDragSurface=function(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.blockDragSurface_.clearAndHide(this.workspace.getCanvas()))},Blockly.WorkspaceCommentSvg.prototype.moveDuringDrag=function(e,t){e?e.translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},Blockly.WorkspaceCommentSvg.prototype.moveTo=function(e,t){this.translate(e,t)},Blockly.WorkspaceCommentSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},Blockly.WorkspaceCommentSvg.prototype.getBubbleSize=function(){if(this.rendered_)return{width:parseInt(this.svgRect_.getAttribute("width")),height:parseInt(this.svgRect_.getAttribute("height"))};this.getHeightWidth()},Blockly.WorkspaceCommentSvg.prototype.getBoundingRectangle=function(){var e,t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth(),o=t.y,r=t.y+n.height;return t=this.RTL?(e=t.x-n.width,t.x):(e=t.x,t.x+n.width),new Blockly.utils.Rect(o,r,e,t)},Blockly.WorkspaceCommentSvg.prototype.updateMovable=function(){this.isMovable()?Blockly.utils.dom.addClass(this.svgGroup_,"blocklyDraggable"):Blockly.utils.dom.removeClass(this.svgGroup_,"blocklyDraggable")},Blockly.WorkspaceCommentSvg.prototype.setMovable=function(e){Blockly.WorkspaceCommentSvg.superClass_.setMovable.call(this,e),this.updateMovable()},Blockly.WorkspaceCommentSvg.prototype.setEditable=function(e){Blockly.WorkspaceCommentSvg.superClass_.setEditable.call(this,e),this.textarea_&&(this.textarea_.readOnly=!e)},Blockly.WorkspaceCommentSvg.prototype.setDragging=function(e){e?((e=this.getSvgRoot()).translate_="",e.skew_="",Blockly.utils.dom.addClass(this.svgGroup_,"blocklyDragging")):Blockly.utils.dom.removeClass(this.svgGroup_,"blocklyDragging")},Blockly.WorkspaceCommentSvg.prototype.getSvgRoot=function(){return this.svgGroup_},Blockly.WorkspaceCommentSvg.prototype.getContent=function(){return this.textarea_?this.textarea_.value:this.content_},Blockly.WorkspaceCommentSvg.prototype.setContent=function(e){Blockly.WorkspaceCommentSvg.superClass_.setContent.call(this,e),this.textarea_&&(this.textarea_.value=e)},Blockly.WorkspaceCommentSvg.prototype.setDeleteStyle=function(e){e?Blockly.utils.dom.addClass(this.svgGroup_,"blocklyDraggingDelete"):Blockly.utils.dom.removeClass(this.svgGroup_,"blocklyDraggingDelete")},Blockly.WorkspaceCommentSvg.prototype.setAutoLayout=function(){},Blockly.WorkspaceCommentSvg.fromXml=function(e,t,n){Blockly.Events.disable();try{var o,r=Blockly.WorkspaceComment.parseAttributes(e),i=new Blockly.WorkspaceCommentSvg(t,r.content,r.h,r.w,r.minimized,r.id);i.data=e.getAttribute("data"),t.rendered&&(i.initSvg(),i.render(!1)),isNaN(r.x)||isNaN(r.y)||(t.RTL?(o=n||t.getWidth(),i.moveBy(o-r.x,r.y)):i.moveBy(r.x,r.y))}finally{Blockly.Events.enable()}return Blockly.WorkspaceComment.fireCreateEvent(i),i},Blockly.WorkspaceCommentSvg.prototype.toXmlWithXY=function(e){this.workspace.RTL&&(t=this.workspace.getWidth()),e=this.toXml(e);var t,n=this.getRelativeToSurfaceXY();return e.setAttribute("x",Math.round(this.workspace.RTL?t-n.x:n.x)),e.setAttribute("y",Math.round(n.y)),e.setAttribute("h",this.getHeight()),e.setAttribute("w",this.getWidth()),e},Blockly.WorkspaceCommentSvg.prototype.getHeightWidth=function(){console.warn("method is overriden by workspace_comment_render_svg.js")},Blockly.Css.register([".blocklyCommentForeignObject {","position: relative;","z-index: 0;","}",".blocklyComment > image {","cursor: pointer","}",".blocklyCommentRect {","fill: #FAF6BD;","stroke: #F9F3A1;","stroke-width: 1px","}",".blocklyCommentTarget {","fill: transparent;","stroke: #F9F3A1;","}",".blocklyCommentTargetFocused {","fill: none;","}",".blocklyCommentText {","fill: #000;","pointer-events: none;","}",".blocklyCommentHandleTarget {","fill: none;","}",".blocklyCommentHandleTargetFocused {","fill: transparent;","}",".blocklyFocused>.blocklyCommentRect {","fill: #FFB900;","stroke: #B9B272;","}",".blocklySelected>.blocklyCommentTarget {","stroke: #FFB900;","stroke-width: 1px;","}",".blocklyCommentForeignObject {","position: relative;","z-index: 0;","}",".blocklyCommentRect {","fill: #FAF6BD;","stroke: #F9F3A1;","stroke-width: 1px","}",".blocklyCommentTarget {","fill: transparent;","stroke: #F9F3A1;","}",".blocklyCommentTargetFocused {","fill: none;","}",".blocklyCommentHandleTarget {","fill: none;","}",".blocklyCommentHandleTargetFocused {","fill: transparent;","}",".blocklyUneditableComment {","fill: $colour_text;","}",".blocklyCommentDeleteIcon {","cursor: pointer;","fill: #000;","display: none","}",".blocklyFocused > .blocklyCommentDeleteIcon, .blocklyCommentBubble > .blocklyCommentDeleteIcon {","display: block","}",".blocklyDeleteIconShape.blocklyDeleteIconHighlighted {","fill: rgba(255, 255, 255, 0.20);","}",".blocklyCommentDeleteIcon {","cursor: pointer;","fill: #000;","display: none","}",".blocklySelected > .blocklyCommentDeleteIcon {","display: block","}"]),Blockly.WorkspaceCommentSvg.render={},Blockly.WorkspaceCommentSvg.BORDER_WIDTH=1,Blockly.WorkspaceCommentSvg.RESIZE_SIZE=12*Blockly.WorkspaceCommentSvg.BORDER_WIDTH,Blockly.WorkspaceCommentSvg.TEXTAREA_OFFSET=12,Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT=32,Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE=16,Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE=12,Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET=6,Blockly.WorkspaceCommentSvg.MINIMIZE_WIDTH=200,Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH=35,Blockly.WorkspaceCommentSvg.UNEDITABLE_LINE_GAP=30,Blockly.WorkspaceCommentSvg.prototype.getHeightWidth=function(){return{width:this.getWidth(),height:this.getHeight()}},Blockly.WorkspaceCommentSvg.prototype.render=function(){if(!this.rendered_){var e=this.getHeightWidth(),t=(!this.isEditable()||Blockly.utils.userAgent.IE?(this.createUneditableText_(),this.svgGroup_.appendChild(this.uneditableTextGroup_)):(this.commentEditor_=this.createEditor_(),this.svgGroup_.appendChild(this.commentEditor_)),this.commentEditor_||this.uneditableTextGroup_);if(this.svgHandleTarget_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyCommentHandleTarget",fill:"transparent",rx:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,ry:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,height:Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT},this.svgGroup_),this.svgRectTarget_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyDraggable blocklyCommentTarget",x:0,y:0,rx:4*Blockly.WorkspaceCommentSvg.BORDER_WIDTH,ry:4*Blockly.WorkspaceCommentSvg.BORDER_WIDTH},this.svgGroup_),this.isEditable()&&!Blockly.utils.userAgent.IE&&this.addResizeDom_(),this.createTopBarIcons_(),this.createTopBarLabel_(),(this.isMinimized()?(this.minimizeArrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"comment-arrow-up.svg"),t.setAttribute("display","none"),this.resizeGroup_):(this.minimizeArrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"comment-arrow-down.svg"),this.topBarLabel_)).setAttribute("display","none"),this.textarea_)this.textarea_.value=this.content_;else for(t=0;t<this.content_.length;t+=Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH){var n=this.content_.substring(t,t+Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH);this.pushUneditableTextLine_(n)}this.isEditable()&&!Blockly.utils.userAgent.IE?this.setSize(e.width,e.height):this.setSize(8*Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH+25,this.uneditableTextLineY-10),this.rendered_=!0,this.resizeGroup_&&(Blockly.bindEventWithChecks_(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_),Blockly.bindEventWithChecks_(this.resizeGroup_,"mouseup",this,this.resizeMouseUp_)),Blockly.bindEventWithChecks_(this.minimizeArrow_,"mousedown",this,this.minimizeArrowMouseDown_),Blockly.bindEventWithChecks_(this.minimizeArrow_,"mouseout",this,this.minimizeArrowMouseOut_),Blockly.bindEventWithChecks_(this.minimizeArrow_,"mouseup",this,this.minimizeArrowMouseUp_),this.isDeletable()&&(Blockly.bindEventWithChecks_(this.deleteIcon_,"mousedown",this,this.deleteMouseDown_),Blockly.bindEventWithChecks_(this.deleteIcon_,"mouseout",this,this.deleteMouseOut_),Blockly.bindEventWithChecks_(this.deleteIcon_,"mouseup",this,this.deleteMouseUp_))}},Blockly.WorkspaceCommentSvg.prototype.createEditor_=function(){this.foreignObject_=Blockly.utils.dom.createSvgElement("foreignObject",{x:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,y:Blockly.WorkspaceCommentSvg.BORDER_WIDTH+Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT,class:"blocklyCommentForeignObject"},null);var e=document.createElementNS(Blockly.utils.dom.HTML_NS,"body"),t=(e.setAttribute("xmlns",Blockly.utils.dom.HTML_NS),e.className="blocklyMinimalBody",document.createElementNS(Blockly.utils.dom.HTML_NS,"textarea"));return t.className="blocklyCommentTextarea",t.setAttribute("dir",this.RTL?"RTL":"LTR"),t.setAttribute("maxlength",Blockly.WorkspaceComment.COMMENT_TEXT_LIMIT),t.readOnly=!this.isEditable(),e.appendChild(t),this.textarea_=t,this.textarea_.style.margin=Blockly.WorkspaceCommentSvg.TEXTAREA_OFFSET+"px",this.foreignObject_.appendChild(e),Blockly.bindEventWithChecks_(t,"wheel",this,function(e){e.stopPropagation()}),Blockly.bindEventWithChecks_(t,"change",this,function(e){this.text_!=t.value&&this.setContent(t.value)}),this.labelText_=this.getLabelText(),this.foreignObject_},Blockly.WorkspaceCommentSvg.prototype.addResizeDom_=function(){this.resizeGroup_=Blockly.utils.dom.createSvgElement("g",{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_);var e=Blockly.WorkspaceCommentSvg.RESIZE_SIZE;Blockly.utils.dom.createSvgElement("polygon",{points:"0,0 0,x x,x x,0".replace(/x/g,e.toString())},this.resizeGroup_),Blockly.utils.dom.createSvgElement("line",{class:"blocklyResizeLine",x1:e/3,y1:e-1,x2:e-1,y2:e/3},this.resizeGroup_),Blockly.utils.dom.createSvgElement("line",{class:"blocklyResizeLine",x1:2*e/3,y1:e-1,x2:e-1,y2:2*e/3},this.resizeGroup_)},Blockly.WorkspaceCommentSvg.prototype.createCommentTopBar_=function(){this.svgHandleTarget_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyDraggable blocklyCommentHandleTarget",fill:"transparent",rx:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,ry:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,height:Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT},this.svgGroup_),this.createTopBarIcons_(),this.createTopBarLabel_()},Blockly.WorkspaceCommentSvg.prototype.createTopBarLabel_=function(){this.topBarLabel_=Blockly.utils.dom.createSvgElement("text",{class:"blocklyCommentText",x:this.width_/2,y:Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT/2+Blockly.WorkspaceCommentSvg.BORDER_WIDTH,"text-anchor":"middle","dominant-baseline":"middle"},this.svgGroup_);var e=document.createTextNode(this.labelText_);this.topBarLabel_.appendChild(e)},Blockly.WorkspaceCommentSvg.prototype.createTopBarIcons_=function(){this.minimizeArrow_=Blockly.utils.dom.createSvgElement("image",{x:Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET,y:Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT/2+Blockly.WorkspaceCommentSvg.BORDER_WIDTH-Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE/2,width:Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE,height:Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE},this.svgGroup_),this.isDeletable()&&(this.deleteIcon_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyCommentDeleteIcon"},this.svgGroup_),Blockly.utils.dom.createSvgElement("rect",{x:"-12.5",y:"1",width:"27.5",height:"27.5",fill:"transparent",class:"blocklyDeleteIconShape"},this.deleteGroup_),Blockly.WorkspaceCommentSvg.drawDeleteIcon(this.deleteIcon_))},Blockly.WorkspaceCommentSvg.drawDeleteIcon=function(e){e=Blockly.utils.dom.createSvgElement("g",{transform:"scale (1.5) translate(-6, 1)"},e),Blockly.utils.dom.createSvgElement("rect",{x:5,y:2,width:"4",height:"2",stroke:"#fff","stroke-width":"1",fill:"transparent"},e),Blockly.utils.dom.createSvgElement("line",{x1:1,y1:4,x2:13,y2:4,stroke:"#fff","stroke-width":"1","stroke-linecap":"round"},e),Blockly.utils.dom.createSvgElement("rect",{x:2,y:4,width:10,height:12,rx:"1",ry:"1",stroke:"#fff","stroke-width":"1",fill:"transparent"},e),Blockly.utils.dom.createSvgElement("line",{x1:5,y1:7,x2:5,y2:13,stroke:"#fff","stroke-width":"1","stroke-linecap":"round"},e),Blockly.utils.dom.createSvgElement("line",{x1:7,y1:7,x2:7,y2:13,stroke:"#fff","stroke-width":"1","stroke-linecap":"round"},e),Blockly.utils.dom.createSvgElement("line",{x1:9,y1:7,x2:9,y2:13,stroke:"#fff","stroke-width":"1","stroke-linecap":"round"},e)},Blockly.WorkspaceCommentSvg.prototype.minimizeArrowMouseDown_=function(e){this.shouldToggleMinimize_=!0,e.stopPropagation()},Blockly.WorkspaceCommentSvg.prototype.minimizeArrowMouseOut_=function(e){this.shouldToggleMinimize_=!1},Blockly.WorkspaceCommentSvg.prototype.minimizeArrowMouseUp_=function(e){this.shouldToggleMinimize_&&(this.shouldToggleMinimize=!1,this.toggleMinimize_()),e.stopPropagation(),Blockly.Touch.clearTouchIdentifier()},Blockly.WorkspaceCommentSvg.prototype.deleteMouseDown_=function(e){this.shouldDelete_=!0,e.stopPropagation()},Blockly.WorkspaceCommentSvg.prototype.deleteMouseOut_=function(e){this.shouldDelete_=!1},Blockly.WorkspaceCommentSvg.prototype.deleteMouseUp_=function(e){this.shouldDelete_&&this.dispose(),e.stopPropagation(),Blockly.Touch.clearTouchIdentifier()},Blockly.WorkspaceCommentSvg.prototype.resizeMouseDown_=function(e){this.resizeStartSize_={width:this.width_,height:this.height_},this.unbindDragEvents_(),this.workspace.setResizesEnabled(!1),Blockly.utils.isRightButton(e)||(this.workspace.startDrag(e,new Blockly.utils.Coordinate(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",this,this.resizeMouseMove_),Blockly.hideChaff()),e.stopPropagation()},Blockly.WorkspaceCommentSvg.prototype.setRenderedMinimizeState_=function(e,t){var n=this.commentEditor_||this.uneditableTextGroup_;e?(this.minimizeArrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"comment-arrow-up.svg"),n.setAttribute("display","none"),this.resizeGroup_&&this.resizeGroup_.setAttribute("display","none"),t&&this.labelText_!=t&&(this.topBarLabel_.textContent=t),this.topBarLabel_.removeAttribute("display")):(this.minimizeArrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"comment-arrow-down.svg"),this.topBarLabel_.setAttribute("display","none"),n.removeAttribute("display"),this.resizeGroup_&&this.resizeGroup_.removeAttribute("display"))},Blockly.WorkspaceCommentSvg.prototype.unbindDragEvents_=function(){this.onMouseUpWrapper_&&(Blockly.unbindEvent_(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(Blockly.unbindEvent_(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)},Blockly.WorkspaceCommentSvg.prototype.resizeMouseUp_=function(){Blockly.Touch.clearTouchIdentifier(),this.unbindDragEvents_();var e=this.resizeStartSize_;this.resizeStartSize_=null,this.width_==e.width&&this.height_==e.height||(Blockly.Events.fire(new Blockly.Events.CommentChange(this,{width:e.width,height:e.height},{width:this.width_,height:this.height_})),this.workspace.setResizesEnabled(!0))},Blockly.WorkspaceCommentSvg.prototype.resizeMouseMove_=function(e){this.autoLayout_=!1,e=this.workspace.moveDrag(e);var t=!1;Blockly.Events.isEnabled()&&(Blockly.Events.disable(),t=!0),this.setSize(this.RTL?-e.x:e.x,e.y),t&&Blockly.Events.enable()},Blockly.WorkspaceCommentSvg.prototype.resizeComment_=function(){var e=2*Blockly.WorkspaceCommentSvg.BORDER_WIDTH,t=Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT,n=2*Blockly.WorkspaceCommentSvg.TEXTAREA_OFFSET,o=this.commentEditor_||this.uneditableBackground_;o.setAttribute("width",this.width_-e),o.setAttribute("height",this.height_-e-t),this.RTL&&o.setAttribute("x",-this.width_),this.textarea_&&(this.textarea_.style.width=this.width_-n+"px",this.textarea_.style.height=this.height_-e-n-t+"px")},Blockly.WorkspaceCommentSvg.prototype.setSize=function(e,t){var n=this.width_,o=this.height_,r=2*Blockly.WorkspaceCommentSvg.BORDER_WIDTH;this.isMinimized_?(e=Blockly.WorkspaceCommentSvg.MINIMIZE_WIDTH,t=Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT):(e=Math.max(e,50+r),t=Math.max(t,20+r+Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT),this.width_=e,this.height_=t,Blockly.Events.fire(new Blockly.Events.CommentChange(this,{width:n,height:o},{width:this.width_,height:this.height_}))),this.svgRect_.setAttribute("width",e),this.svgRect_.setAttribute("height",t),this.svgRectTarget_.setAttribute("width",e),this.svgRectTarget_.setAttribute("height",t),this.svgHandleTarget_.setAttribute("width",e),this.svgHandleTarget_.setAttribute("height",Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT),this.RTL?(this.minimizeArrow_.setAttribute("x",e-Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE-Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET),this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgHandleTarget_.setAttribute("transform","scale(-1 1)"),this.svgHandleTarget_.setAttribute("transform","translate("+-e+", 1)"),this.minimizeArrow_.setAttribute("transform","translate("+-e+", 1)"),this.isDeletable()&&this.deleteIcon_.setAttribute("transform","translate("+(-e+Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE+Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET)+",0) scale(-1 1)")):this.isDeletable()&&this.deleteIcon_.setAttribute("transform","translate("+(e-Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE-Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET)+",0)"),n=Blockly.WorkspaceCommentSvg.RESIZE_SIZE,this.resizeGroup_&&(this.RTL?this.resizeGroup_.setAttribute("transform","translate("+(-e+n)+","+(t-n)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(e-r-n)+","+(t-r-n)+")")),this.isMinimized_&&(this.topBarLabel_.setAttribute("x",e/2),this.topBarLabel_.setAttribute("y",t/2)),this.resizeComment_()},Blockly.WorkspaceComment.prototype.toggleMinimize_=function(){this.setMinimized(!this.isMinimized_)},Blockly.WorkspaceComment.prototype.setMinimized=function(e){this.isMinimized_!=e&&(Blockly.Events.fire(new Blockly.Events.CommentChange(this,{minimized:this.isMinimized_},{minimized:e})),(this.isMinimized_=e)?(this.rendered_&&this.setRenderedMinimizeState_(!0,this.getLabelText()),this.setSize(Blockly.WorkspaceCommentSvg.MINIMIZE_WIDTH,Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT)):(this.rendered_&&this.setRenderedMinimizeState_(!1),this.setContent(this.content_),this.setSize(this.width_,this.height_)))},Blockly.WorkspaceCommentSvg.prototype.disposeInternal_=function(){this.svgHandleTarget_=this.svgRectTarget_=this.svgRect_=this.foreignObject_=this.textarea_=null,this.disposed_=!0},Blockly.WorkspaceCommentSvg.prototype.setFocus=function(){var e=this;this.focused_=!0,setTimeout(function(){e.disposed_||(e.textarea_.focus(),e.addFocus(),Blockly.utils.dom.addClass(e.svgRectTarget_,"blocklyCommentTargetFocused"),Blockly.utils.dom.addClass(e.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)},Blockly.WorkspaceCommentSvg.prototype.blurFocus=function(){var e=this;this.focused_=!1,setTimeout(function(){e.disposed_||(e.textarea_.blur(),e.removeFocus(),Blockly.utils.dom.removeClass(e.svgRectTarget_,"blocklyCommentTargetFocused"),Blockly.utils.dom.removeClass(e.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)},Blockly.WorkspaceCommentSvg.prototype.createUneditableText_=function(){this.uneditableTextGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyUneditableComment"},this.svgGroup_),this.uneditableBackground_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyUneditableMinimalBody",y:Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT.toString()},this.svgGroup_),this.uneditableTextGroup_.appendChild(this.uneditableBackground_),this.uneditableTextLineY=2*Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT},Blockly.WorkspaceCommentSvg.prototype.pushUneditableTextLine_=function(e){var t=Blockly.utils.dom.createSvgElement("text",{x:15,y:this.uneditableTextLineY},this.uneditableTextGroup_);e=document.createTextNode(e),t.appendChild(e),this.uneditableTextLineY+=Blockly.WorkspaceCommentSvg.UNEDITABLE_LINE_GAP},Blockly.ZoomControls=function(e){this.workspace_=e},Blockly.ZoomControls.prototype.WIDTH_=32,Blockly.ZoomControls.prototype.HEIGHT_=110,Blockly.ZoomControls.prototype.MARGIN_BOTTOM_=20,Blockly.ZoomControls.prototype.MARGIN_SIDE_=20,Blockly.ZoomControls.prototype.svgGroup_=null,Blockly.ZoomControls.prototype.left_=0,Blockly.ZoomControls.prototype.top_=0,Blockly.ZoomControls.prototype.createDom=function(){this.svgGroup_=Blockly.utils.dom.createSvgElement("g",{},null);var e=String(Math.random()).substring(2);return this.createZoomOutSvg_(e),this.createZoomInSvg_(e),this.workspace_.isMovable()&&this.createZoomResetSvg_(e),this.svgGroup_},Blockly.ZoomControls.prototype.init=function(e){return this.verticalSpacing_=this.MARGIN_BOTTOM_+e,this.verticalSpacing_+this.HEIGHT_},Blockly.ZoomControls.prototype.dispose=function(){this.svgGroup_&&Blockly.utils.dom.removeNode(this.svgGroup_)},Blockly.ZoomControls.prototype.position=function(){var e;this.verticalSpacing_&&(e=this.workspace_.getMetrics())&&(this.left_=e.toolboxPosition==Blockly.TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?e.viewWidth+e.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-Blockly.Scrollbar.scrollbarThickness:this.MARGIN_SIDE_+Blockly.Scrollbar.scrollbarThickness,e.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM?(this.top_=this.verticalSpacing_,this.zoomInGroup_.setAttribute("transform","translate(0, 34)"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, 77)")):(this.top_=e.viewHeight+e.absoluteTop-this.HEIGHT_-this.verticalSpacing_,this.zoomInGroup_.setAttribute("transform","translate(0, 43)"),this.zoomOutGroup_.setAttribute("transform","translate(0, 77)")),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))},Blockly.ZoomControls.prototype.createZoomOutSvg_=function(e){var t=this.workspace_,n=(this.zoomOutGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyZoom"},this.svgGroup_),Blockly.utils.dom.createSvgElement("clipPath",{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup_));Blockly.utils.dom.createSvgElement("rect",{width:32,height:32},n),(e=Blockly.utils.dom.createSvgElement("image",{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup_)).setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",t.options.pathToMedia+Blockly.SPRITE.url),Blockly.bindEventWithChecks_(e,"mousedown",null,function(e){t.markFocused(),t.zoomCenter(-1),Blockly.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()})},Blockly.ZoomControls.prototype.createZoomInSvg_=function(e){var t=this.workspace_,n=(this.zoomInGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyZoom"},this.svgGroup_),Blockly.utils.dom.createSvgElement("clipPath",{id:"blocklyZoominClipPath"+e},this.zoomInGroup_));Blockly.utils.dom.createSvgElement("rect",{width:32,height:32},n),(e=Blockly.utils.dom.createSvgElement("image",{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup_)).setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",t.options.pathToMedia+Blockly.SPRITE.url),Blockly.bindEventWithChecks_(e,"mousedown",null,function(e){t.markFocused(),t.zoomCenter(1),Blockly.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()})},Blockly.ZoomControls.prototype.createZoomResetSvg_=function(e){var t=this.workspace_,n=(this.zoomResetGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyZoom"},this.svgGroup_),Blockly.utils.dom.createSvgElement("clipPath",{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup_));Blockly.utils.dom.createSvgElement("rect",{width:32,height:32},n),(e=Blockly.utils.dom.createSvgElement("image",{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup_)).setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",t.options.pathToMedia+Blockly.SPRITE.url),Blockly.bindEventWithChecks_(e,"mousedown",null,function(e){t.markFocused(),t.setScale(t.options.zoomOptions.startScale),t.beginCanvasTransition(),t.scrollCenter(),setTimeout(t.endCanvasTransition.bind(t),500),Blockly.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()})},Blockly.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),Blockly.Mutator=function(e){Blockly.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=e},Blockly.utils.object.inherits(Blockly.Mutator,Blockly.Icon),Blockly.Mutator.prototype.workspaceWidth_=0,Blockly.Mutator.prototype.workspaceHeight_=0,Blockly.Mutator.prototype.setBlock=function(e){this.block_=e},Blockly.Mutator.prototype.getWorkspace=function(){return this.workspace_},Blockly.Mutator.prototype.drawIcon_=function(e){Blockly.utils.dom.createSvgElement("rect",{class:"blocklyIconShape",rx:"10",ry:"10",height:"16",width:"16"},e),Blockly.utils.dom.createSvgElement("path",{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),Blockly.utils.dom.createSvgElement("circle",{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)},Blockly.Mutator.prototype.iconClick_=function(e){this.block_.isEditable()&&Blockly.Icon.prototype.iconClick_.call(this,e)},Blockly.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=Blockly.utils.dom.createSvgElement("svg",{x:Blockly.Bubble.BORDER_WIDTH,y:Blockly.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var e,t=Blockly.utils.xml.createElement("xml"),n=0;e=this.quarkNames_[n];n++){var o=Blockly.utils.xml.createElement("block");o.setAttribute("type",e),t.appendChild(o)}else t=null;return t={disable:!1,languageTree:t,parentWorkspace:this.block_.workspace,pathToMedia:this.block_.workspace.options.pathToMedia,RTL:this.block_.RTL,toolboxPosition:this.block_.RTL?Blockly.TOOLBOX_AT_RIGHT:Blockly.TOOLBOX_AT_LEFT,horizontalLayout:!1,getMetrics:this.getFlyoutMetrics_.bind(this),setMetrics:null,renderer:this.block_.workspace.options.renderer},this.workspace_=new Blockly.WorkspaceSvg(t,this.block_.workspace.dragSurface),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(Blockly.Events.disableOrphans),t=this.workspace_.addFlyout("g"),(n=this.workspace_.createDom("blocklyMutatorBackground")).insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},Blockly.Mutator.prototype.updateEditable=function(){Blockly.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&Blockly.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&Blockly.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},Blockly.Mutator.prototype.resizeBubble_=function(){var e=2*Blockly.Bubble.BORDER_WIDTH,t=this.workspace_.getCanvas().getBBox(),n=this.block_.RTL?-t.x:t.width+t.x,t=t.height+3*e,o=this.workspace_.getFlyout();o&&(o=o.getMetrics_(),t=Math.max(t,o.contentHeight+20)),n+=3*e,(Math.abs(this.workspaceWidth_-n)>e||Math.abs(this.workspaceHeight_-t)>e)&&(this.workspaceWidth_=n,this.workspaceHeight_=t,this.bubble_.setBubbleSize(n+e,t+e),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_)),this.block_.RTL&&(e="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",e)),this.workspace_.resize()},Blockly.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDeleteAreas()},Blockly.Mutator.prototype.setVisible=function(e){if(e!=this.isVisible())if(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,"mutatorOpen",!e,e)),e){this.bubble_=new Blockly.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var t=this.workspace_.options.languageTree;e=this.workspace_.getFlyout(),t&&(e.init(this.workspace_),e.show(t.childNodes)),this.rootBlock_=this.block_.decompose(this.workspace_);for(var n,o,r,t=this.rootBlock_.getDescendants(!1),i=0;n=t[i];i++)n.render();this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),e=e?(t=2*e.CORNER_RADIUS,e.getWidth()+t):t=16,this.block_.RTL&&(e=-e),this.rootBlock_.moveBy(e,t),this.block_.saveConnections&&((r=(o=this).block_).saveConnections(this.rootBlock_),this.sourceListener_=function(){r.saveConnections(o.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)),this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},Blockly.Mutator.prototype.workspaceChanged_=function(e){if(e.type!=Blockly.Events.UI&&(e.type!=Blockly.Events.CHANGE||"disabled"!=e.element)){if(!this.workspace_.isDragging()){e=this.workspace_.getTopBlocks(!1);for(var t,n=0;t=e[n];n++){var o=t.getRelativeToSurfaceXY(),r=t.getHeightWidth();o.y+r.height<20&&t.moveBy(0,20-r.height-o.y)}}var i;this.rootBlock_.workspace==this.workspace_&&(Blockly.Events.setGroup(!0),e=(e=(t=this.block_).mutationToDom())&&Blockly.Xml.domToText(e),t.compose(this.rootBlock_),t.initSvg(),t.render(),Blockly.getMainWorkspace().keyboardAccessibilityMode&&Blockly.navigation.moveCursorOnBlockMutation(t),e!=(n=(n=t.mutationToDom())&&Blockly.Xml.domToText(n))&&(Blockly.Events.fire(new Blockly.Events.BlockChange(t,"mutation",null,e,n)),i=Blockly.Events.getGroup(),setTimeout(function(){Blockly.Events.setGroup(i),t.bumpNeighbours(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)),this.workspace_.isDragging()||this.resizeBubble_(),Blockly.Events.setGroup(!1))}},Blockly.Mutator.prototype.getFlyoutMetrics_=function(){return{viewHeight:this.workspaceHeight_,viewWidth:this.workspaceWidth_-this.workspace_.getFlyout().getWidth(),absoluteTop:0,absoluteLeft:this.workspace_.RTL?0:this.workspace_.getFlyout().getWidth()}},Blockly.Mutator.prototype.dispose=function(){this.block_.mutator=null,Blockly.Icon.prototype.dispose.call(this)},Blockly.Mutator.prototype.updateBlockStyle=function(){var e=this.workspace_;if(e&&e.getAllBlocks(!1)){for(var t=e.getAllBlocks(!1),n=0;n<t.length;n++){var o=t[n];o.setStyle(o.getStyleName())}for(e=e.getFlyout().workspace_.getAllBlocks(!1),n=0;n<e.length;n++)(o=e[n]).setStyle(o.getStyleName())}},Blockly.Mutator.reconnect=function(e,t,n){if(!e||!e.getSourceBlock().workspace)return!1;n=t.getInput(n).connection;var o=e.targetBlock();return!(o&&o!=t||n.targetConnection==e||(n.isConnected()&&n.disconnect(),n.connect(e),0))},Blockly.Mutator.findParentWs=function(e){var t,n=null;return e&&e.options&&(t=e.options.parentWorkspace,e.isFlyout?t&&t.options&&(n=t.options.parentWorkspace):t&&(n=t)),n},Blockly.FieldTextInput=function(e,t,n,o){this.spellcheck_=!0,Blockly.FieldTextInput.superClass_.constructor.call(this,e=null==e?"":e,t,o),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.setRestrictor(n),this.addArgType("text")},Blockly.utils.object.inherits(Blockly.FieldTextInput,Blockly.Field),Blockly.FieldTextInput.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return new Blockly.FieldTextInput(t,void 0,e)},Blockly.FieldTextInput.ANIMATION_TIME=.25,Blockly.FieldTextInput.TEXT_MEASURE_PADDING_MAGIC=45,Blockly.FieldTextInput.prototype.htmlInput_=null,Blockly.FieldTextInput.prototype.SERIALIZABLE=!0,Blockly.FieldTextInput.BORDERRADIUS=4,Blockly.FieldTextInput.prototype.CURSOR="text",Blockly.FieldTextInput.prototype.configure_=function(e){Blockly.FieldTextInput.superClass_.configure_.call(this,e),"boolean"==typeof e.spellcheck&&(this.spellcheck_=e.spellcheck)},Blockly.FieldTextInput.prototype.initView=function(){if(this.constants_.FULL_BLOCK_FIELDS){for(var e,t=0,n=0,o=0;e=this.sourceBlock_.inputList[o];o++){for(var r=0;e.fieldRow[r];r++)t++;e.connection&&n++}this.fullBlockClickTarget_=t<=1&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},Blockly.FieldTextInput.prototype.autoCapitalize_=!0,Blockly.FieldTextInput.prototype.onMouseOver_=function(e){this.sourceBlock_.isInFlyout||(e=this.sourceBlock_.workspace.getGesture(e))&&e.isDragging()||this.sourceBlock_.pathObject.svgPath&&Blockly.utils.dom.addClass(this.sourceBlock_.pathObject.svgPath,"blocklyFieldHover")},Blockly.FieldTextInput.prototype.onMouseOut_=function(e){this.sourceBlock_.isInFlyout||(e=this.sourceBlock_.workspace.getGesture(e))&&e.isDragging()||this.sourceBlock_.pathObject.svgPath&&Blockly.utils.dom.removeClass(this.sourceBlock_.pathObject.svgPath,"blocklyFieldHover")},Blockly.FieldTextInput.prototype.dispose=function(){this.mouseOverWrapper_&&(Blockly.unbindEvent_(this.mouseOverWrapper_),this.mouseOverWrapper_=null),this.mouseOutWrapper_&&(Blockly.unbindEvent_(this.mouseOutWrapper_),this.mouseOutWrapper_=null),Blockly.WidgetDiv.hideIfOwner(this),Blockly.FieldTextInput.superClass_.dispose.call(this)},Blockly.FieldTextInput.prototype.doClassValidation_=function(e){return null==e?null:String(e)},Blockly.FieldTextInput.prototype.doValueInvalid_=function(e){this.isBeingEdited_&&(this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_)&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name||null,e,this.value_))},Blockly.FieldTextInput.prototype.doValueUpdate_=function(e){this.isTextValid_=!0,this.value_=e,this.isBeingEdited_||(this.isDirty_=!0)},Blockly.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.constants_.FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.constants_.FIELD_BORDER_RECT_COLOUR))},Blockly.FieldTextInput.prototype.render_=function(){var e;Blockly.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_&&(this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(Blockly.utils.dom.removeClass(e,"blocklyInvalidInput"),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.INVALID,!1)):(Blockly.utils.dom.addClass(e,"blocklyInvalidInput"),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.INVALID,!0)))},Blockly.FieldTextInput.prototype.setSpellcheck=function(e){e!=this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_)&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_)},Blockly.FieldTextInput.prototype.setAutoCapitalize=function(e){this.autoCapitalize_=e},Blockly.FieldTextInput.prototype.setRestrictor=function(e){this.restrictor_=e},Blockly.FieldTextInput.prototype.showEditor_=function(e,t,n,o,r){this.workspace_=this.sourceBlock_.workspace,n=n||!1,!(e=t||!1)&&(Blockly.utils.userAgent.MOBILE||Blockly.utils.userAgent.ANDROID||Blockly.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(e,n,o,r)},Blockly.FieldTextInput.prototype.showPromptEditor_=function(){var t=this;Blockly.prompt(Blockly.Msg.CHANGE_VALUE_TITLE,this.getText(),function(e){t.setValue(e)})},Blockly.FieldTextInput.prototype.showInlineEditor_=function(e,t,n,o){Blockly.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(t,n,o),this.isBeingEdited_=!0,o&&o.call(this),e||(this.focus(),this.htmlInput_.setSelectionRange(0,99999))},Blockly.FieldTextInput.prototype.widgetCreate_=function(e,t,n){t=Blockly.WidgetDiv.DIV,Blockly.utils.dom.addClass(this.getClickTarget_(),"editing"),(n=document.createElement("input")).className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_),e&&n.setAttribute("readonly","true"),this.autoCapitalize_||n.setAttribute("autocapitalize","none"),e=this.workspace_.scale;var o,r=this.constants_.FIELD_TEXT_FONTSIZE*e+"pt";return t.style.fontSize=r,n.style.fontSize=r,r=Blockly.FieldTextInput.BORDERRADIUS*e+"px",this.fullBlockClickTarget_&&(r=((r=this.getScaledBBox()).bottom-r.top)/2+"px",o=(this.sourceBlock_.getParent()?this.sourceBlock_.getParent():this.sourceBlock_).style.colourTertiary,n.style.border=+e+"px solid "+o,t.style.borderRadius=r,t.style.transition="box-shadow 0.25s ease 0s",this.constants_.FIELD_TEXTINPUT_BOX_SHADOW)&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*e+"px"),n.style.borderRadius=r,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},Blockly.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_(),this.htmlInput_.dropDownArrowMouseWrapper_&&Blockly.unbindEvent_(this.htmlInput_.dropDownArrowMouseWrapper_);var e=Blockly.WidgetDiv.DIV.style;e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,Blockly.utils.dom.removeClass(this.getClickTarget_(),"editing")},Blockly.FieldTextInput.prototype.bindInputEvents_=function(e){this.onKeyDownWrapper_=Blockly.bindEventWithChecks_(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Blockly.bindEventWithChecks_(e,"input",this,this.onHtmlInputChange_)},Blockly.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(Blockly.unbindEvent_(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(Blockly.unbindEvent_(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},Blockly.FieldTextInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode==Blockly.utils.KeyCodes.ENTER?(Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()):e.keyCode==Blockly.utils.KeyCodes.ESC?(this.htmlInput_.value=this.htmlInput_.defaultValue,Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()):e.keyCode==Blockly.utils.KeyCodes.TAB&&(Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())},Blockly.FieldTextInput.GECKO_KEYCODE_WHITELIST=[97,99,118,120],Blockly.FieldTextInput.prototype.onHtmlInputChange_=function(e){if("keypress"===e.type&&this.restrictor_){var t,n=!1;if(Blockly.utils.userAgent.GECKO?(t=e.charCode)<32||127==t?n=!0:(e.metaKey||e.ctrlKey)&&(n=-1<Blockly.FieldTextInput.GECKO_KEYCODE_WHITELIST.indexOf(t)):t=e.keyCode,t=String.fromCharCode(t),!n&&!this.restrictor_.test(t)&&e.preventDefault)return void e.preventDefault()}(e=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=e,Blockly.Events.setGroup(!0),e=this.getValueFromEditorText_(e),this.setValue(e),this.forceRerender(),this.resizeEditor_(),Blockly.Events.setGroup(!1)),this.text_=this.htmlInput_.value,this.forceRerender(),Blockly.Events.setGroup(!1),this.resizeEditor_()},Blockly.FieldTextInput.prototype.focus=function(){this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select()},Blockly.FieldTextInput.prototype.setEditorValue_=function(e){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e)},Blockly.FieldTextInput.prototype.resizeEditor_=function(){var e=Blockly.WidgetDiv.DIV,t=this.getScaledBBox();e.style.width=t.right-t.left+"px",e.style.height=t.bottom-t.top+"px",t=new Blockly.utils.Coordinate(this.sourceBlock_.RTL?t.right-e.offsetWidth:t.left,t.top),e.style.left=t.x+"px",e.style.top=t.y+"px"},Blockly.FieldTextInput.prototype.getBorderRadius=function(){return this.sourceBlock_.getOutputShape()==Blockly.OUTPUT_SHAPE_ROUND?Blockly.BlockSvg.NUMBER_FIELD_CORNER_RADIUS:Blockly.BlockSvg.TEXT_FIELD_CORNER_RADIUS},Blockly.FieldTextInput.prototype.maybeSaveEdit_=function(){var e=this.htmlInput_,t=e.value;this.sourceBlock_&&(null===(t=this.callValidator(t))?t=e.defaultValue:this.onFinishEditing_&&this.onFinishEditing_(t)),this.setText(t),this.sourceBlock_.rendered&&this.sourceBlock_.render(),this.sourceBlock_.workspace&&Blockly.Events.fire(new Blockly.Events.Ui(this.sourceBlock_,"saveEdit",void 0,t))},Blockly.FieldTextInput.numberValidator=function(e){return console.warn("Blockly.FieldTextInput.numberValidator is deprecated. Use Blockly.FieldNumber instead."),null===e||(e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,""),e=Number(e||0),isNaN(e))?null:String(e)},Blockly.FieldTextInput.nonnegativeIntegerValidator=function(e){return e=(e=Blockly.FieldTextInput.numberValidator(e))&&String(Math.max(0,Math.floor(e)))},Blockly.FieldTextInput.prototype.isTabNavigable=function(){return!0},Blockly.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},Blockly.FieldTextInput.prototype.getEditorText_=function(e){return String(e)},Blockly.FieldTextInput.prototype.getValueFromEditorText_=function(e){return e},Blockly.fieldRegistry.register("field_input",Blockly.FieldTextInput),Blockly.FieldAngle=function(e,t,n){this.clockwise_=Blockly.FieldAngle.CLOCKWISE,this.offset_=Blockly.FieldAngle.OFFSET,this.wrap_=Blockly.FieldAngle.WRAP,this.round_=Blockly.FieldAngle.ROUND,Blockly.FieldAngle.superClass_.constructor.call(this,e||0,t,n),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=null,this.addArgType("angle")},Blockly.utils.object.inherits(Blockly.FieldAngle,Blockly.FieldTextInput),Blockly.FieldAngle.fromJson=function(e){return new Blockly.FieldAngle(e.angle,void 0,e)},Blockly.FieldAngle.prototype.SERIALIZABLE=!0,Blockly.FieldAngle.ROUND=15,Blockly.FieldAngle.HALF=60,Blockly.FieldAngle.CLOCKWISE=!0,Blockly.FieldAngle.OFFSET=90,Blockly.FieldAngle.WRAP=180,Blockly.FieldAngle.HANDLE_RADIUS=10,Blockly.FieldAngle.ARROW_WIDTH=Blockly.FieldAngle.HANDLE_RADIUS,Blockly.FieldAngle.RADIUS=Blockly.FieldAngle.HALF-Blockly.FieldAngle.HANDLE_RADIUS-1,Blockly.FieldAngle.CENTER_RADIUS=2,Blockly.FieldAngle.ARROW_SVG_DATAURI="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgd2lkdGg9IjhweCIKICAgaGVpZ2h0PSIxMHB4IgogICB2aWV3Qm94PSIwIDAgOCAxMCIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnMiIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMC45MSByMTM3MjUiCiAgIHNvZGlwb2RpOmRvY25hbWU9ImFycm93LnN2ZyI+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhMTYiPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTE3OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI3MTAiCiAgICAgaWQ9Im5hbWVkdmlldzE0IgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIyMy42IgogICAgIGlua3NjYXBlOmN4PSI0IgogICAgIGlua3NjYXBlOmN5PSI1IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMiIgLz4KICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjIgKDM5MDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICA8dGl0bGUKICAgICBpZD0idGl0bGU0Ij5hcnJvdzwvdGl0bGU+CiAgPGRlc2MKICAgICBpZD0iZGVzYzYiPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM4IiAvPgogIDxnCiAgICAgaWQ9IlBhZ2UtMSIKICAgICBzdHJva2U9Im5vbmUiCiAgICAgc3Ryb2tlLXdpZHRoPSIxIgogICAgIGZpbGw9Im5vbmUiCiAgICAgZmlsbC1ydWxlPSJldmVub2RkIgogICAgIHRyYW5zZm9ybT0icm90YXRlKDkwLCA0LCA1KSIKICAgICBzdHlsZT0iZmlsbDojMDAwMDAwIj4KICAgIDxnCiAgICAgICBpZD0iYXJyb3ciCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNC4wMDAwMDAsIC0zLjAwMDAwMCkiCiAgICAgICBmaWxsPSIjNEM5N0ZGIgogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMCI+CiAgICAgIDxwYXRoCiAgICAgICAgIGQ9Ik04LjAxODkxMDgzLDYuNjgyMjMwNTUgTDMuNTA5OTE2MDEsNy40MzM3Mjk2OSBDMy4yNDY3OTEzMSw3LjQ3NzU4MzggMy4wMTg5MTA4Myw3LjczOTQyMTUxIDMuMDE4OTEwODMsOC4wMTU1NjM4OCBDMy4wMTg5MTA4Myw4LjI4MzYzMDI5IDMuMjM4NzQxMzQsOC41NTIyMDIzIDMuNTA5OTE2MDEsOC41OTczOTgwOCBMOC4wMTg5MTA4Myw5LjM0ODg5NzIyIEw4LjAxODkxMDgzLDExLjAxODUzMzcgQzguMDE4OTEwODMsMTEuNTYyNTI3NiA4LjM4MzI2Njg2LDExLjc1MjAwMzIgOC44MzI3MjI3OSwxMS40MjY4ODQ3IEwxMi42NDEwMTc2LDguNjcyMTE1ODcgQzEzLjA5ODE2MzgsOC4zNDE0MzQ1NSAxMy4wOTU3MjIzLDcuODE0NzA1MTggMTIuNjUyNzQxMSw3LjQ4MzIwODA2IEw4LjgyMDk5OTM2LDQuNjE1NzkyNTMgQzguMzc1NTc2NjQsNC4yODI0NjgzOCA4LjAxODkxMDgzLDQuNDYxOTQ5NDggOC4wMTg5MTA4Myw1LjAxMjU5NDAyIEw4LjAxODkxMDgzLDYuNjgyMjMwNTUgWiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC4wMDE2NzMsIDguMDE3MjM3KSByb3RhdGUoLTkwLjAwMDAwMCkgdHJhbnNsYXRlKC04LjAwMTY3MywgLTguMDE3MjM3KSAiCiAgICAgICAgIGlkPSJwYXRoMTIiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDAiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K",Blockly.FieldAngle.prototype.configure_=function(e){switch(Blockly.FieldAngle.superClass_.configure_.call(this,e),e.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var t=e.clockwise;"boolean"==typeof t&&(this.clockwise_=t),null!=(t=e.offset)&&(t=Number(t),isNaN(t)||(this.offset_=t)),null!=(t=e.wrap)&&(t=Number(t),isNaN(t)||(this.wrap_=t)),null!=(e=e.round)&&(e=Number(e),isNaN(e)||(this.round_=e))},Blockly.FieldAngle.prototype.initView=function(){Blockly.FieldAngle.superClass_.initView.call(this),this.symbol_=Blockly.utils.dom.createSvgElement("tspan",{},null),this.symbol_.appendChild(document.createTextNode("")),this.textElement_.appendChild(this.symbol_)},Blockly.FieldAngle.prototype.render_=function(){Blockly.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},Blockly.FieldAngle.prototype.showEditor_=function(e){Blockly.FieldAngle.superClass_.showEditor_.call(this,e,Blockly.utils.userAgent.MOBILE||Blockly.utils.userAgent.ANDROID||Blockly.utils.userAgent.IPAD),e=this.dropdownCreate_(),Blockly.DropDownDiv.getContentDiv().appendChild(e),Blockly.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),Blockly.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},Blockly.FieldAngle.prototype.dropdownCreate_=function(){var e=Blockly.utils.dom.createSvgElement("svg",{xmlns:Blockly.utils.dom.SVG_NS,"xmlns:html":Blockly.utils.dom.HTML_NS,"xmlns:xlink":Blockly.utils.dom.XLINK_NS,version:"1.1",height:2*Blockly.FieldAngle.HALF+"px",width:2*Blockly.FieldAngle.HALF+"px",style:"touch-action: none"},null),t=Blockly.utils.dom.createSvgElement("circle",{cx:Blockly.FieldAngle.HALF,cy:Blockly.FieldAngle.HALF,r:Blockly.FieldAngle.RADIUS,class:"blocklyAngleCircle"},e),n=(this.gauge_=Blockly.utils.dom.createSvgElement("path",{class:"blocklyAngleGauge"},e),this.line_=Blockly.utils.dom.createSvgElement("line",{x1:Blockly.FieldAngle.HALF,y1:Blockly.FieldAngle.HALF,class:"blocklyAngleLine"},e),Math.PI*Blockly.FieldAngle.OFFSET/180);for(Blockly.utils.dom.createSvgElement("line",{x1:Blockly.FieldAngle.HALF,y1:Blockly.FieldAngle.HALF,x2:Blockly.FieldAngle.HALF+Blockly.FieldAngle.RADIUS*Math.cos(n),y2:Blockly.FieldAngle.HALF-Blockly.FieldAngle.RADIUS*Math.sin(n),class:"blocklyAngleLine"},e),n=0;n<360;n+=15)Blockly.utils.dom.createSvgElement("line",{x1:Blockly.FieldAngle.HALF+Blockly.FieldAngle.RADIUS-13,y1:Blockly.FieldAngle.HALF,x2:Blockly.FieldAngle.HALF+Blockly.FieldAngle.RADIUS-7,y2:Blockly.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+n+","+Blockly.FieldAngle.HALF+","+Blockly.FieldAngle.HALF+")"},e);return Blockly.utils.dom.createSvgElement("circle",{cx:Blockly.FieldAngle.HALF,cy:Blockly.FieldAngle.HALF,r:Blockly.FieldAngle.CENTER_RADIUS,class:"blocklyAngleCenterPoint"},e),this.handle_=Blockly.utils.dom.createSvgElement("g",{},e),Blockly.utils.dom.createSvgElement("circle",{cx:0,cy:0,r:Blockly.FieldAngle.HANDLE_RADIUS,class:"blocklyAngleDragHandle"},this.handle_),this.arrowSvg_=Blockly.utils.dom.createSvgElement("image",{width:Blockly.FieldAngle.ARROW_WIDTH,height:Blockly.FieldAngle.ARROW_WIDTH,x:-Blockly.FieldAngle.ARROW_WIDTH/2,y:-Blockly.FieldAngle.ARROW_WIDTH/2},this.handle_),this.arrowSvg_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.FieldAngle.ARROW_SVG_DATAURI),this.clickWrapper_=Blockly.bindEventWithChecks_(e,"click",this,this.hide_),this.clickSurfaceWrapper_=Blockly.bindEventWithChecks_(t,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=Blockly.bindEventWithChecks_(t,"mousemove",this,this.onMouseMove_,!0,!0),e},Blockly.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(Blockly.unbindEvent_(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(Blockly.unbindEvent_(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(Blockly.unbindEvent_(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},Blockly.FieldAngle.prototype.onMouseUp=function(){Blockly.unbindEvent_(this.mouseMoveWrapper_),Blockly.unbindEvent_(this.mouseUpWrapper_)},Blockly.FieldAngle.prototype.onMouseMove_=function(e){var t=this.gauge_.ownerSVGElement.getBoundingClientRect(),n=e.clientX-t.left-Blockly.FieldAngle.HALF;e=e.clientY-t.top-Blockly.FieldAngle.HALF,t=Math.atan(-e/n),isNaN(t)||(t=Blockly.utils.math.toDegrees(t),n<0?t+=180:0<e&&(t+=360),t=this.clockwise_?this.offset_+360-t:360-(this.offset_-t),this.displayMouseOrKeyboardValue_(t))},Blockly.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(e){this.round_&&(e=Math.round(e/this.round_)*this.round_),(e=this.wrapValue_(e))!=this.value_&&this.setEditorValue_(e)},Blockly.FieldAngle.prototype.updateGraph_=function(){var e,t,n,o,r,i,s,a;this.gauge_&&(t=Number(this.getText())+this.offset_,e=Blockly.utils.math.toRadians(t%360),t=["M ",Blockly.FieldAngle.HALF,",",Blockly.FieldAngle.HALF],n=Blockly.FieldAngle.HALF,o=Blockly.FieldAngle.HALF,isNaN(e)||(r=Number(this.clockwise_),i=Blockly.utils.math.toRadians(this.offset_),s=Math.cos(i)*Blockly.FieldAngle.RADIUS,a=Math.sin(i)*-Blockly.FieldAngle.RADIUS,r&&(e=2*i-e),n+=Math.cos(e)*Blockly.FieldAngle.RADIUS,o-=Math.sin(e)*Blockly.FieldAngle.RADIUS,e=Math.abs(Math.floor((e-i)/Math.PI)%2),t.push(" l ",s,",",a," A ",Blockly.FieldAngle.RADIUS,",",Blockly.FieldAngle.RADIUS," 0 ",e=r?1-e:e," ",r," ",n,",",o," z")),this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",n),this.line_.setAttribute("y2",o),this.handle_.setAttribute("transform","translate("+n+","+o+")"))},Blockly.FieldAngle.prototype.onHtmlInputKeyDown_=function(e){var t,n;Blockly.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,e),e.keyCode===Blockly.utils.KeyCodes.LEFT?t=this.sourceBlock_.RTL?1:-1:e.keyCode===Blockly.utils.KeyCodes.RIGHT?t=this.sourceBlock_.RTL?-1:1:e.keyCode===Blockly.utils.KeyCodes.DOWN?t=-1:e.keyCode===Blockly.utils.KeyCodes.UP&&(t=1),t&&(n=this.getValue(),this.displayMouseOrKeyboardValue_(n+t*this.round_),e.preventDefault(),e.stopPropagation())},Blockly.FieldAngle.prototype.doClassValidation_=function(e){return e=Number(e),isNaN(e)||!isFinite(e)?null:this.wrapValue_(e)},Blockly.FieldAngle.prototype.wrapValue_=function(e){return(e%=360)<0&&(e+=360),e>this.wrap_&&(e-=360),e},Blockly.Css.register(".blocklyAngleCenterPoint {,stroke: #fff;,stroke-width: 1;,fill: #fff;,},.blocklyAngleDragHandle {,stroke: #fff;,stroke-width: 5;,stroke-opacity: 0.25;,fill: #fff;,cursor: pointer;,},.blocklyAngleMarks {,stroke: #fff;,stroke-width: 1;,stroke-opacity: 0.5;,},.blocklyAngleGauge {,fill: #fff;,fill-opacity: 0.20;,},.blocklyAngleLine {,stroke: #fff;,stroke-width: 1;,stroke-linecap: round;,pointer-events: none;,}".split(",")),Blockly.fieldRegistry.register("field_angle",Blockly.FieldAngle),Blockly.FieldCheckbox=function(e,t,n){this.checkChar_=null,Blockly.FieldCheckbox.superClass_.constructor.call(this,e=null==e?"FALSE":e,t,n),this.addArgType("checkbox")},Blockly.utils.object.inherits(Blockly.FieldCheckbox,Blockly.Field),Blockly.FieldCheckbox.fromJson=function(e){return new Blockly.FieldCheckbox(e.checked,void 0,e)},Blockly.FieldCheckbox.CHECK_CHAR="",Blockly.FieldCheckbox.prototype.SERIALIZABLE=!0,Blockly.FieldCheckbox.prototype.CURSOR="default",Blockly.FieldCheckbox.prototype.isDirty_=!1,Blockly.FieldCheckbox.prototype.configure_=function(e){Blockly.FieldCheckbox.superClass_.configure_.call(this,e),e.checkCharacter&&(this.checkChar_=e.checkCharacter)},Blockly.FieldCheckbox.prototype.initView=function(){this.size_.width=this.constants_.FIELD_CHECKBOX_DEFAULT_WIDTH,Blockly.FieldCheckbox.superClass_.initView.call(this),this.textElement_.setAttribute("x",this.constants_.FIELD_CHECKBOX_X_OFFSET),this.textElement_.setAttribute("y",this.constants_.FIELD_CHECKBOX_Y_OFFSET),this.textElement_.removeAttribute("dominant-baseline"),Blockly.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textContent_.nodeValue=this.checkChar_||Blockly.FieldCheckbox.CHECK_CHAR,this.textElement_.style.display=this.value_?"block":"none"},Blockly.FieldCheckbox.prototype.setCheckCharacter=function(e){this.checkChar_=e,this.textContent_&&(this.textContent_.nodeValue=e||Blockly.FieldCheckbox.CHECK_CHAR)},Blockly.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},Blockly.FieldCheckbox.prototype.doClassValidation_=function(e){return!0===e||"TRUE"===e?"TRUE":!1===e||"FALSE"===e?"FALSE":null},Blockly.FieldCheckbox.prototype.doValueUpdate_=function(e){this.value_=this.convertValueToBool_(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},Blockly.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},Blockly.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},Blockly.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},Blockly.FieldCheckbox.prototype.convertValueToBool_=function(e){return"string"==typeof e?"TRUE"==e:!!e},Blockly.fieldRegistry.register("field_checkbox",Blockly.FieldCheckbox),Blockly.FieldColour=function(e,t,n){Blockly.FieldColour.superClass_.constructor.call(this,e,t,n),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null,this.addArgType("colour")},Blockly.utils.object.inherits(Blockly.FieldColour,Blockly.Field),Blockly.FieldColour.fromJson=function(e){return new Blockly.FieldColour(e.colour,void 0,e)},Blockly.FieldColour.prototype.SERIALIZABLE=!0,Blockly.FieldColour.prototype.CURSOR="default",Blockly.FieldColour.prototype.isDirty_=!1,Blockly.FieldColour.prototype.colours_=null,Blockly.FieldColour.prototype.titles_=null,Blockly.FieldColour.prototype.columns_=0,Blockly.FieldColour.prototype.configure_=function(e){Blockly.FieldColour.superClass_.configure_.call(this,e),e.colourOptions&&(this.colours_=e.colourOptions,this.titles_=e.colourTitles),e.columns&&(this.columns_=e.columns)},Blockly.FieldColour.prototype.initView=function(){this.size_=new Blockly.utils.Size(this.constants_.FIELD_COLOUR_DEFAULT_WIDTH,this.constants_.FIELD_COLOUR_DEFAULT_HEIGHT),this.constants_.FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},Blockly.FieldColour.prototype.applyColour=function(){this.constants_.FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},Blockly.FieldColour.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:Blockly.utils.colour.parse(e)},Blockly.FieldColour.prototype.doValueUpdate_=function(e){this.value_=e,this.borderRect_?this.borderRect_.style.fill=e:this.sourceBlock_&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",e),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},Blockly.FieldColour.prototype.getText=function(){var e=this.value_;return e=/^#(.)\1(.)\2(.)\3$/.test(e)?"#"+e[1]+e[3]+e[5]:e},Blockly.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),Blockly.FieldColour.TITLES=[],Blockly.FieldColour.COLUMNS=7,Blockly.FieldColour.prototype.setColours=function(e,t){return this.colours_=e,t&&(this.titles_=t),this},Blockly.FieldColour.prototype.setColumns=function(e){return this.columns_=e,this},Blockly.FieldColour.prototype.showEditor_=function(){this.picker_=this.dropdownCreate_(),Blockly.DropDownDiv.getContentDiv().appendChild(this.picker_),Blockly.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},Blockly.FieldColour.prototype.onClick_=function(e){null!==(e=(e=e.target)&&e.label)&&(this.setValue(e),Blockly.DropDownDiv.hideIfOwner(this))},Blockly.FieldColour.prototype.onKeyDown_=function(e){var t=!1;e.keyCode===Blockly.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),t=!0):e.keyCode===Blockly.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),t=!0):e.keyCode===Blockly.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),t=!0):e.keyCode===Blockly.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),t=!0):e.keyCode===Blockly.utils.KeyCodes.ENTER&&((t=this.getHighlighted_())&&null!==(t=t&&t.label)&&this.setValue(t),Blockly.DropDownDiv.hideWithoutAnimation(),t=!0),t&&e.stopPropagation()},Blockly.FieldColour.prototype.onBlocklyAction=function(e){if(this.picker_){if(e===Blockly.navigation.ACTION_PREVIOUS)return this.moveHighlightBy_(0,-1),!0;if(e===Blockly.navigation.ACTION_NEXT)return this.moveHighlightBy_(0,1),!0;if(e===Blockly.navigation.ACTION_OUT)return this.moveHighlightBy_(-1,0),!0;if(e===Blockly.navigation.ACTION_IN)return this.moveHighlightBy_(1,0),!0}return Blockly.FieldColour.superClass_.onBlocklyAction.call(this,e)},Blockly.FieldColour.prototype.moveHighlightBy_=function(e,t){var n=this.colours_||Blockly.FieldColour.COLOURS,o=this.columns_||Blockly.FieldColour.COLUMNS,r=this.highlightedIndex_%o,i=Math.floor(this.highlightedIndex_/o);r+=e,i+=t,e<0?r<0&&0<i?(r=o-1,i--):r<0&&(r=0):0<e?o-1<r&&i<Math.floor(n.length/o)-1?(r=0,i++):o-1<r&&r--:t<0?i<0&&(i=0):0<t&&i>Math.floor(n.length/o)-1&&(i=Math.floor(n.length/o)-1),this.setHighlightedCell_(this.picker_.childNodes[i].childNodes[r],i*o+r)},Blockly.FieldColour.prototype.onMouseMove_=function(e){var t=(e=e.target)&&Number(e.getAttribute("data-index"));null!==t&&t!==this.highlightedIndex_&&this.setHighlightedCell_(e,t)},Blockly.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},Blockly.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var e=this.getHighlighted_();e&&Blockly.utils.dom.removeClass(e,"blocklyColourHighlighted")},Blockly.FieldColour.prototype.getHighlighted_=function(){var e=this.columns_||Blockly.FieldColour.COLUMNS,t=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return t?t.childNodes[this.highlightedIndex_%e]:null},Blockly.FieldColour.prototype.setHighlightedCell_=function(e,t){var n=this.getHighlighted_();n&&Blockly.utils.dom.removeClass(n,"blocklyColourHighlighted"),Blockly.utils.dom.addClass(e,"blocklyColourHighlighted"),this.highlightedIndex_=t,Blockly.utils.aria.setState(this.picker_,Blockly.utils.aria.State.ACTIVEDESCENDANT,e.getAttribute("id"))},Blockly.FieldColour.prototype.dropdownCreate_=function(){var e=this.columns_||Blockly.FieldColour.COLUMNS,t=this.colours_||Blockly.FieldColour.COLOURS,n=this.titles_||Blockly.FieldColour.TITLES,o=this.getValue(),r=document.createElement("table");r.className="blocklyColourTable",r.tabIndex=0,r.dir="ltr",Blockly.utils.aria.setRole(r,Blockly.utils.aria.Role.GRID),Blockly.utils.aria.setState(r,Blockly.utils.aria.State.EXPANDED,!0),Blockly.utils.aria.setState(r,Blockly.utils.aria.State.ROWCOUNT,Math.floor(t.length/e)),Blockly.utils.aria.setState(r,Blockly.utils.aria.State.COLCOUNT,e);for(var i,s=0;s<t.length;s++){0==s%e&&(i=document.createElement("tr"),Blockly.utils.aria.setRole(i,Blockly.utils.aria.Role.ROW),r.appendChild(i));var a=document.createElement("td");i.appendChild(a),a.label=t[s],a.title=n[s]||t[s],a.id=Blockly.utils.IdGenerator.getNextUniqueId(),a.setAttribute("data-index",s),Blockly.utils.aria.setRole(a,Blockly.utils.aria.Role.GRIDCELL),Blockly.utils.aria.setState(a,Blockly.utils.aria.State.LABEL,t[s]),Blockly.utils.aria.setState(a,Blockly.utils.aria.State.SELECTED,t[s]==o),a.style.backgroundColor=t[s],t[s]==o&&(a.className="blocklyColourSelected",this.highlightedIndex_=s)}return this.onClickWrapper_=Blockly.bindEventWithChecks_(r,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(r,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=Blockly.bindEventWithChecks_(r,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=Blockly.bindEventWithChecks_(r,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=Blockly.bindEventWithChecks_(r,"keydown",this,this.onKeyDown_),r},Blockly.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(Blockly.unbindEvent_(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(Blockly.unbindEvent_(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(Blockly.unbindEvent_(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(Blockly.unbindEvent_(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(Blockly.unbindEvent_(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},Blockly.Css.register([".blocklyColourTable {","outline: none;","border-radius: 11px;","border-collapse: separate;","border-spacing: 4px;","}",".blocklyColourTable > tr > td {","height: 22px;","width: 22px;","margin: 0;","border: 0;","text-align: center;","cursor: pointer;","border-radius: 4px;","border: 2px solid rgba(0,0,0,.1);","}",".blocklyColourTable > tr > td:hover {","border: 1px solid #FFF;","box-sizing: border-box;","}",".blocklyColourTable > tr > td.blocklyColourSelected {","border: 1px solid #000;","box-sizing: border-box;","color: #fff;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),Blockly.fieldRegistry.register("field_colour",Blockly.FieldColour),goog.Thenable=function(){},goog.Thenable.prototype.then=function(e,t,n){},goog.Thenable.IMPLEMENTED_BY_PROP="$goog_Thenable",goog.Thenable.addImplementation=function(e){COMPILED?e.prototype[goog.Thenable.IMPLEMENTED_BY_PROP]=!0:e.prototype.$goog_Thenable=!0},goog.Thenable.isImplementedBy=function(e){if(!e)return!1;try{return COMPILED?!!e[goog.Thenable.IMPLEMENTED_BY_PROP]:!!e.$goog_Thenable}catch(e){return!1}},goog.async={},goog.async.FreeList=function(e,t,n){this.limit_=n,this.create_=e,this.reset_=t,this.occupants_=0,this.head_=null},goog.async.FreeList.prototype.get=function(){var e;return 0<this.occupants_?(this.occupants_--,e=this.head_,this.head_=e.next,e.next=null):e=this.create_(),e},goog.async.FreeList.prototype.put=function(e){this.reset_(e),this.occupants_<this.limit_&&(this.occupants_++,e.next=this.head_,this.head_=e)},goog.async.FreeList.prototype.occupants=function(){return this.occupants_},goog.async.WorkQueue=function(){this.workTail_=this.workHead_=null},goog.async.WorkQueue.DEFAULT_MAX_UNUSED=100,goog.async.WorkQueue.freelist_=new goog.async.FreeList(function(){return new goog.async.WorkItem},function(e){e.reset()},goog.async.WorkQueue.DEFAULT_MAX_UNUSED),goog.async.WorkQueue.prototype.add=function(e,t){var n=this.getUnusedItem_();n.set(e,t),this.workTail_?this.workTail_.next=n:(goog.asserts.assert(!this.workHead_),this.workHead_=n),this.workTail_=n},goog.async.WorkQueue.prototype.remove=function(){var e=null;return this.workHead_&&(e=this.workHead_,this.workHead_=this.workHead_.next,this.workHead_||(this.workTail_=null),e.next=null),e},goog.async.WorkQueue.prototype.returnUnused=function(e){goog.async.WorkQueue.freelist_.put(e)},goog.async.WorkQueue.prototype.getUnusedItem_=function(){return goog.async.WorkQueue.freelist_.get()},goog.async.WorkItem=function(){this.next=this.scope=this.fn=null},goog.async.WorkItem.prototype.set=function(e,t){this.fn=e,this.scope=t,this.next=null},goog.async.WorkItem.prototype.reset=function(){this.next=this.scope=this.fn=null},goog.async.throwException=function(e){goog.global.setTimeout(function(){throw e},0)},goog.async.nextTick=function(e,t,n){var o=e;t&&(o=goog.bind(e,t)),o=goog.async.nextTick.wrapCallback_(o),goog.isFunction(goog.global.setImmediate)&&(n||goog.async.nextTick.useSetImmediate_())?goog.global.setImmediate(o):(goog.async.nextTick.setImmediate_||(goog.async.nextTick.setImmediate_=goog.async.nextTick.getSetImmediateEmulator_()),goog.async.nextTick.setImmediate_(o))},goog.async.nextTick.useSetImmediate_=function(){return!(goog.global.Window&&goog.global.Window.prototype&&!goog.labs.userAgent.browser.isEdge()&&goog.global.Window.prototype.setImmediate==goog.global.setImmediate)},goog.async.nextTick.getSetImmediateEmulator_=function(){var t,n,o,e=goog.global.MessageChannel;return void 0===(e=void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!goog.labs.userAgent.engine.isPresto()?function(){(o=goog.dom.createElement("IFRAME")).style.display="none",goog.dom.safe.setIframeSrc(o,goog.html.TrustedResourceUrl.fromConstant(goog.string.Const.EMPTY)),document.documentElement.appendChild(o);var e=o.contentWindow,t=((o=e.document).open(),goog.dom.safe.documentWrite(o,goog.html.SafeHtml.EMPTY),o.close(),"callImmediate"+Math.random()),n="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host,o=goog.bind(function(e){"*"!=n&&e.origin!=n||e.data!=t||this.port1.onmessage()},this);e.addEventListener("message",o,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(t,n)}}}:e)||goog.labs.userAgent.browser.isIE()?"undefined"!=typeof document&&"onreadystatechange"in goog.dom.createElement("SCRIPT")?function(e){var t=goog.dom.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){goog.global.setTimeout(e,0)}:(t=new e,o=n={},t.port1.onmessage=function(){var e;void 0!==n.next&&(e=(n=n.next).cb,n.cb=null,e())},function(e){o.next={cb:e},o=o.next,t.port2.postMessage(0)})},goog.async.nextTick.wrapCallback_=goog.functions.identity,goog.debug.entryPointRegistry.register(function(e){goog.async.nextTick.wrapCallback_=e}),goog.ASSUME_NATIVE_PROMISE=!1,goog.async.run=function(e,t){goog.async.run.schedule_||goog.async.run.initializeRunner_(),goog.async.run.workQueueScheduled_||(goog.async.run.schedule_(),goog.async.run.workQueueScheduled_=!0),goog.async.run.workQueue_.add(e,t)},goog.async.run.initializeRunner_=function(){var e;goog.ASSUME_NATIVE_PROMISE||goog.global.Promise&&goog.global.Promise.resolve?(e=goog.global.Promise.resolve(void 0),goog.async.run.schedule_=function(){e.then(goog.async.run.processWorkQueue)}):goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue)}},goog.async.run.forceNextTick=function(e){goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue),e&&e(goog.async.run.processWorkQueue)}},goog.async.run.workQueueScheduled_=!1,goog.async.run.workQueue_=new goog.async.WorkQueue,goog.DEBUG&&(goog.async.run.resetQueue=function(){goog.async.run.workQueueScheduled_=!1,goog.async.run.workQueue_=new goog.async.WorkQueue});goog.async.run.processWorkQueue=function(){for(var e;e=goog.async.run.workQueue_.remove();){try{e.fn.call(e.scope)}catch(e){goog.async.throwException(e)}goog.async.run.workQueue_.returnUnused(e)}goog.async.run.workQueueScheduled_=!1},goog.promise={},goog.promise.Resolver=function(){},goog.Promise=function(e,t){if(this.state_=goog.Promise.State_.PENDING,this.result_=void 0,this.callbackEntriesTail_=this.callbackEntries_=this.parent_=null,this.executing_=!1,0<goog.Promise.UNHANDLED_REJECTION_DELAY?this.unhandledRejectionId_=0:0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1),goog.Promise.LONG_STACK_TRACES&&(this.stack_=[],this.addStackTrace_(Error("created")),this.currentStep_=0),e!=goog.nullFunction)try{var n=this;e.call(t,function(e){n.resolve_(goog.Promise.State_.FULFILLED,e)},function(e){if(goog.DEBUG&&!(e instanceof goog.Promise.CancellationError))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}n.resolve_(goog.Promise.State_.REJECTED,e)})}catch(e){this.resolve_(goog.Promise.State_.REJECTED,e)}},goog.Promise.LONG_STACK_TRACES=!1,goog.Promise.UNHANDLED_REJECTION_DELAY=0,goog.Promise.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3},goog.Promise.CallbackEntry_=function(){this.next=this.context=this.onRejected=this.onFulfilled=this.child=null,this.always=!1},goog.Promise.CallbackEntry_.prototype.reset=function(){this.context=this.onRejected=this.onFulfilled=this.child=null,this.always=!1},goog.Promise.DEFAULT_MAX_UNUSED=100,goog.Promise.freelist_=new goog.async.FreeList(function(){return new goog.Promise.CallbackEntry_},function(e){e.reset()},goog.Promise.DEFAULT_MAX_UNUSED),goog.Promise.getCallbackEntry_=function(e,t,n){var o=goog.Promise.freelist_.get();return o.onFulfilled=e,o.onRejected=t,o.context=n,o},goog.Promise.returnEntry_=function(e){goog.Promise.freelist_.put(e)},goog.Promise.resolve=function(e){var t;return e instanceof goog.Promise?e:((t=new goog.Promise(goog.nullFunction)).resolve_(goog.Promise.State_.FULFILLED,e),t)},goog.Promise.reject=function(n){return new goog.Promise(function(e,t){t(n)})},goog.Promise.resolveThen_=function(e,t,n){goog.Promise.maybeThen_(e,t,n,null)||goog.async.run(goog.partial(t,e))},goog.Promise.race=function(r){return new goog.Promise(function(e,t){r.length||e(void 0);for(var n,o=0;o<r.length;o++)n=r[o],goog.Promise.resolveThen_(n,e,t)})},goog.Promise.all=function(l){return new goog.Promise(function(n,t){var o=l.length,r=[];if(o)for(var e,i=function(e,t){o--,r[e]=t,0==o&&n(r)},s=function(e){t(e)},a=0;a<l.length;a++)e=l[a],goog.Promise.resolveThen_(e,goog.partial(i,a),s);else n(r)})},goog.Promise.allSettled=function(s){return new goog.Promise(function(o,e){var r=s.length,i=[];if(r){e=function(e,t,n){r--,i[e]=t?{fulfilled:!0,value:n}:{fulfilled:!1,reason:n},0==r&&o(i)};for(var t,n=0;n<s.length;n++)t=s[n],goog.Promise.resolveThen_(t,goog.partial(e,n,!0),goog.partial(e,n,!1))}else o(i)})},goog.Promise.firstFulfilled=function(l){return new goog.Promise(function(t,n){var o=l.length,r=[];if(o)for(var e,i=function(e){t(e)},s=function(e,t){o--,r[e]=t,0==o&&n(r)},a=0;a<l.length;a++)e=l[a],goog.Promise.resolveThen_(e,i,goog.partial(s,a));else t(void 0)})},goog.Promise.withResolver=function(){var n,o,e=new goog.Promise(function(e,t){n=e,o=t});return new goog.Promise.Resolver_(e,n,o)},goog.Promise.prototype.then=function(e,t,n){return null!=e&&goog.asserts.assertFunction(e,"opt_onFulfilled should be a function."),null!=t&&goog.asserts.assertFunction(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then")),this.addChildPromise_(goog.isFunction(e)?e:null,goog.isFunction(t)?t:null,n)},goog.Thenable.addImplementation(goog.Promise),goog.Promise.prototype.thenVoid=function(e,t,n){null!=e&&goog.asserts.assertFunction(e,"opt_onFulfilled should be a function."),null!=t&&goog.asserts.assertFunction(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then")),this.addCallbackEntry_(goog.Promise.getCallbackEntry_(e||goog.nullFunction,t||null,n))},goog.Promise.prototype.thenAlways=function(e,t){return goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenAlways")),(e=goog.Promise.getCallbackEntry_(e,e,t)).always=!0,this.addCallbackEntry_(e),this},goog.Promise.prototype.thenCatch=function(e,t){return goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenCatch")),this.addChildPromise_(null,e,t)},goog.Promise.prototype.cancel=function(e){var t;this.state_==goog.Promise.State_.PENDING&&(t=new goog.Promise.CancellationError(e),goog.async.run(function(){this.cancelInternal_(t)},this))},goog.Promise.prototype.cancelInternal_=function(e){this.state_==goog.Promise.State_.PENDING&&(this.parent_?(this.parent_.cancelChild_(this,e),this.parent_=null):this.resolve_(goog.Promise.State_.REJECTED,e))},goog.Promise.prototype.cancelChild_=function(e,t){if(this.callbackEntries_){for(var n=0,o=null,r=null,i=this.callbackEntries_;i&&(i.always||(n++,!((o=i.child==e?i:o)&&1<n)));i=i.next)o||(r=i);o&&(this.state_==goog.Promise.State_.PENDING&&1==n?this.cancelInternal_(t):(r?this.removeEntryAfter_(r):this.popEntry_(),this.executeCallback_(o,goog.Promise.State_.REJECTED,t)))}},goog.Promise.prototype.addCallbackEntry_=function(e){this.hasEntry_()||this.state_!=goog.Promise.State_.FULFILLED&&this.state_!=goog.Promise.State_.REJECTED||this.scheduleCallbacks_(),this.queueEntry_(e)},goog.Promise.prototype.addChildPromise_=function(r,i,s){var e=goog.Promise.getCallbackEntry_(null,null,null);return e.child=new goog.Promise(function(n,o){e.onFulfilled=r?function(e){try{var t=r.call(s,e);n(t)}catch(e){o(e)}}:n,e.onRejected=i?function(e){try{var t=i.call(s,e);void 0===t&&e instanceof goog.Promise.CancellationError?o(e):n(t)}catch(e){o(e)}}:o}),(e.child.parent_=this).addCallbackEntry_(e),e.child},goog.Promise.prototype.unblockAndFulfill_=function(e){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED),this.state_=goog.Promise.State_.PENDING,this.resolve_(goog.Promise.State_.FULFILLED,e)},goog.Promise.prototype.unblockAndReject_=function(e){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED),this.state_=goog.Promise.State_.PENDING,this.resolve_(goog.Promise.State_.REJECTED,e)},goog.Promise.prototype.resolve_=function(e,t){this.state_==goog.Promise.State_.PENDING&&(this===t&&(e=goog.Promise.State_.REJECTED,t=new TypeError("Promise cannot resolve to itself")),this.state_=goog.Promise.State_.BLOCKED,goog.Promise.maybeThen_(t,this.unblockAndFulfill_,this.unblockAndReject_,this)||(this.result_=t,this.state_=e,this.parent_=null,this.scheduleCallbacks_(),e!=goog.Promise.State_.REJECTED)||t instanceof goog.Promise.CancellationError||goog.Promise.addUnhandledRejection_(this,t))},goog.Promise.maybeThen_=function(e,t,n,o){if(e instanceof goog.Promise)return e.thenVoid(t,n,o),!0;if(goog.Thenable.isImplementedBy(e))return e.then(t,n,o),!0;if(goog.isObject(e))try{var r=e.then;if(goog.isFunction(r))return goog.Promise.tryThen_(e,r,t,n,o),!0}catch(e){return n.call(o,e),!0}return!1},goog.Promise.tryThen_=function(e,t,n,o,r){function i(e){s||(s=!0,o.call(r,e))}var s=!1;try{t.call(e,function(e){s||(s=!0,n.call(r,e))},i)}catch(e){i(e)}},goog.Promise.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,goog.async.run(this.executeCallbacks_,this))},goog.Promise.prototype.hasEntry_=function(){return!!this.callbackEntries_},goog.Promise.prototype.queueEntry_=function(e){goog.asserts.assert(null!=e.onFulfilled),this.callbackEntriesTail_?this.callbackEntriesTail_.next=e:this.callbackEntries_=e,this.callbackEntriesTail_=e},goog.Promise.prototype.popEntry_=function(){var e=null;return this.callbackEntries_&&(e=this.callbackEntries_,this.callbackEntries_=e.next,e.next=null),this.callbackEntries_||(this.callbackEntriesTail_=null),null!=e&&goog.asserts.assert(null!=e.onFulfilled),e},goog.Promise.prototype.removeEntryAfter_=function(e){goog.asserts.assert(this.callbackEntries_),goog.asserts.assert(null!=e),e.next==this.callbackEntriesTail_&&(this.callbackEntriesTail_=e),e.next=e.next.next},goog.Promise.prototype.executeCallbacks_=function(){for(var e;e=this.popEntry_();)goog.Promise.LONG_STACK_TRACES&&this.currentStep_++,this.executeCallback_(e,this.state_,this.result_);this.executing_=!1},goog.Promise.prototype.executeCallback_=function(e,t,n){if(t==goog.Promise.State_.REJECTED&&e.onRejected&&!e.always&&this.removeUnhandledRejection_(),e.child)e.child.parent_=null,goog.Promise.invokeCallback_(e,t,n);else try{e.always?e.onFulfilled.call(e.context):goog.Promise.invokeCallback_(e,t,n)}catch(e){goog.Promise.handleRejection_.call(null,e)}goog.Promise.returnEntry_(e)},goog.Promise.invokeCallback_=function(e,t,n){t==goog.Promise.State_.FULFILLED?e.onFulfilled.call(e.context,n):e.onRejected&&e.onRejected.call(e.context,n)},goog.Promise.prototype.addStackTrace_=function(e){var t;goog.Promise.LONG_STACK_TRACES&&"string"==typeof e.stack&&(t=e.stack.split("\n",4)[3],e=e.message,e+=Array(11-e.length).join(" "),this.stack_.push(e+t))},goog.Promise.prototype.appendLongStack_=function(e){if(goog.Promise.LONG_STACK_TRACES&&e&&"string"==typeof e.stack&&this.stack_.length){for(var t=["Promise trace:"],n=this;n;n=n.parent_){for(var o=this.currentStep_;0<=o;o--)t.push(n.stack_[o]);t.push("Value: ["+(n.state_==goog.Promise.State_.REJECTED?"REJECTED":"FULFILLED")+"] <"+String(n.result_)+">")}e.stack+="\n\n"+t.join("\n")}},goog.Promise.prototype.removeUnhandledRejection_=function(){if(0<goog.Promise.UNHANDLED_REJECTION_DELAY)for(var e=this;e&&e.unhandledRejectionId_;e=e.parent_)goog.global.clearTimeout(e.unhandledRejectionId_),e.unhandledRejectionId_=0;else if(0==goog.Promise.UNHANDLED_REJECTION_DELAY)for(e=this;e&&e.hadUnhandledRejection_;e=e.parent_)e.hadUnhandledRejection_=!1},goog.Promise.addUnhandledRejection_=function(e,t){0<goog.Promise.UNHANDLED_REJECTION_DELAY?e.unhandledRejectionId_=goog.global.setTimeout(function(){e.appendLongStack_(t),goog.Promise.handleRejection_.call(null,t)},goog.Promise.UNHANDLED_REJECTION_DELAY):0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(e.hadUnhandledRejection_=!0,goog.async.run(function(){e.hadUnhandledRejection_&&(e.appendLongStack_(t),goog.Promise.handleRejection_.call(null,t))}))},goog.Promise.handleRejection_=goog.async.throwException,goog.Promise.setUnhandledRejectionHandler=function(e){goog.Promise.handleRejection_=e},goog.Promise.CancellationError=function(e){goog.debug.Error.call(this,e)},goog.inherits(goog.Promise.CancellationError,goog.debug.Error),goog.Promise.CancellationError.prototype.name="cancel",goog.Promise.Resolver_=function(e,t,n){this.promise=e,this.resolve=t,this.reject=n},goog.Timer=function(e,t){goog.events.EventTarget.call(this),this.interval_=e||1,this.timerObject_=t||goog.Timer.defaultTimerObject,this.boundTick_=goog.bind(this.tick_,this),this.last_=goog.now()},goog.inherits(goog.Timer,goog.events.EventTarget),goog.Timer.MAX_TIMEOUT_=2147483647,goog.Timer.INVALID_TIMEOUT_ID_=-1,goog.Timer.prototype.enabled=!1,goog.Timer.defaultTimerObject=goog.global,goog.Timer.intervalScale=.8,goog.Timer.prototype.timer_=null,goog.Timer.prototype.getInterval=function(){return this.interval_},goog.Timer.prototype.setInterval=function(e){this.interval_=e,this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()},goog.Timer.prototype.tick_=function(){var e;this.enabled&&(0<(e=goog.now()-this.last_)&&e<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-e):(this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null),this.dispatchTick(),this.enabled&&(this.stop(),this.start())))},goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)},goog.Timer.prototype.start=function(){this.enabled=!0,this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())},goog.Timer.prototype.stop=function(){this.enabled=!1,this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)},goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this),this.stop(),delete this.timerObject_},goog.Timer.TICK="tick",goog.Timer.callOnce=function(e,t,n){if(goog.isFunction(e))n&&(e=goog.bind(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=goog.bind(e.handleEvent,e)}return Number(t)>goog.Timer.MAX_TIMEOUT_?goog.Timer.INVALID_TIMEOUT_ID_:goog.Timer.defaultTimerObject.setTimeout(e,t||0)},goog.Timer.clear=function(e){goog.Timer.defaultTimerObject.clearTimeout(e)},goog.Timer.promise=function(n,o){var r=null;return new goog.Promise(function(e,t){(r=goog.Timer.callOnce(function(){e(o)},n))==goog.Timer.INVALID_TIMEOUT_ID_&&t(Error("Failed to schedule timer."))}).thenCatch(function(e){throw goog.Timer.clear(r),e})},goog.events.MouseWheelHandler=function(e,t){goog.events.EventTarget.call(this),this.element_=e,e=goog.dom.isElement(this.element_)?this.element_:this.element_?this.element_.body:null,this.isRtl_=!!e&&goog.style.isRightToLeft(e),this.listenKey_=goog.events.listen(this.element_,goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel",this,t)},goog.inherits(goog.events.MouseWheelHandler,goog.events.EventTarget),goog.events.MouseWheelHandler.EventType={MOUSEWHEEL:"mousewheel"},goog.events.MouseWheelHandler.prototype.setMaxDeltaX=function(e){this.maxDeltaX_=e},goog.events.MouseWheelHandler.prototype.setMaxDeltaY=function(e){this.maxDeltaY_=e},goog.events.MouseWheelHandler.prototype.handleEvent=function(e){var t=0,n=0,o=e.getBrowserEvent();"mousewheel"==o.type?(e=goog.events.MouseWheelHandler.smartScale_(-o.wheelDelta,40),n=void 0!==o.wheelDeltaX?(t=goog.events.MouseWheelHandler.smartScale_(-o.wheelDeltaX,40),goog.events.MouseWheelHandler.smartScale_(-o.wheelDeltaY,40)):e):(100<(e=o.detail)?e=3:e<-100&&(e=-3),void 0!==o.axis&&o.axis===o.HORIZONTAL_AXIS?t=e:n=e),"number"==typeof this.maxDeltaX_&&(t=goog.math.clamp(t,-this.maxDeltaX_,this.maxDeltaX_)),"number"==typeof this.maxDeltaY_&&(n=goog.math.clamp(n,-this.maxDeltaY_,this.maxDeltaY_)),this.isRtl_&&(t=-t),t=new goog.events.MouseWheelEvent(e,o,t,n),this.dispatchEvent(t)},goog.events.MouseWheelHandler.smartScale_=function(e,t){return goog.userAgent.WEBKIT&&(goog.userAgent.MAC||goog.userAgent.LINUX)&&0!=e%t?e:e/t},goog.events.MouseWheelHandler.prototype.disposeInternal=function(){goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this),goog.events.unlistenByKey(this.listenKey_),this.listenKey_=null},goog.events.MouseWheelEvent=function(e,t,n,o){goog.events.BrowserEvent.call(this,t),this.type=goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.detail=e,this.deltaX=n,this.deltaY=o},goog.inherits(goog.events.MouseWheelEvent,goog.events.BrowserEvent),goog.fx={},goog.fx.Transition=function(){},goog.fx.Transition.EventType={PLAY:"play",BEGIN:"begin",RESUME:"resume",END:"end",STOP:"stop",FINISH:"finish",PAUSE:"pause"},goog.fx.TransitionBase=function(){goog.events.EventTarget.call(this),this.state_=goog.fx.TransitionBase.State.STOPPED,this.endTime=this.startTime=null},goog.inherits(goog.fx.TransitionBase,goog.events.EventTarget),goog.fx.TransitionBase.State={STOPPED:0,PAUSED:-1,PLAYING:1},goog.fx.TransitionBase.prototype.play=goog.abstractMethod,goog.fx.TransitionBase.prototype.stop=goog.abstractMethod,goog.fx.TransitionBase.prototype.pause=goog.abstractMethod,goog.fx.TransitionBase.prototype.getStateInternal=function(){return this.state_},goog.fx.TransitionBase.prototype.setStatePlaying=function(){this.state_=goog.fx.TransitionBase.State.PLAYING},goog.fx.TransitionBase.prototype.setStatePaused=function(){this.state_=goog.fx.TransitionBase.State.PAUSED},goog.fx.TransitionBase.prototype.setStateStopped=function(){this.state_=goog.fx.TransitionBase.State.STOPPED},goog.fx.TransitionBase.prototype.isPlaying=function(){return this.state_==goog.fx.TransitionBase.State.PLAYING},goog.fx.TransitionBase.prototype.isPaused=function(){return this.state_==goog.fx.TransitionBase.State.PAUSED},goog.fx.TransitionBase.prototype.isStopped=function(){return this.state_==goog.fx.TransitionBase.State.STOPPED},goog.fx.TransitionBase.prototype.onBegin=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.BEGIN)},goog.fx.TransitionBase.prototype.onEnd=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.END)},goog.fx.TransitionBase.prototype.onFinish=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.FINISH)},goog.fx.TransitionBase.prototype.onPause=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PAUSE)},goog.fx.TransitionBase.prototype.onPlay=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PLAY)},goog.fx.TransitionBase.prototype.onResume=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.RESUME)},goog.fx.TransitionBase.prototype.onStop=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.STOP)},goog.fx.TransitionBase.prototype.dispatchAnimationEvent=function(e){this.dispatchEvent(e)},goog.async.AnimationDelay=function(e,t,n){goog.Disposable.call(this),this.id_=null,this.usingListeners_=!1,this.listener_=e,this.handler_=n,this.win_=t||window,this.callback_=goog.bind(this.doAction_,this)},goog.inherits(goog.async.AnimationDelay,goog.Disposable),goog.async.AnimationDelay.TIMEOUT=20,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_="MozBeforePaint",goog.async.AnimationDelay.prototype.start=function(){this.stop(),this.usingListeners_=!1;var e=this.getRaf_(),t=this.getCancelRaf_();e&&!t&&this.win_.mozRequestAnimationFrame?(this.id_=goog.events.listen(this.win_,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,this.callback_),this.win_.mozRequestAnimationFrame(null),this.usingListeners_=!0):this.id_=e&&t?e.call(this.win_,this.callback_):this.win_.setTimeout(goog.functions.lock(this.callback_),goog.async.AnimationDelay.TIMEOUT)},goog.async.AnimationDelay.prototype.startIfNotActive=function(){this.isActive()||this.start()},goog.async.AnimationDelay.prototype.stop=function(){var e,t;this.isActive()&&(e=this.getRaf_(),t=this.getCancelRaf_(),e&&!t&&this.win_.mozRequestAnimationFrame?goog.events.unlistenByKey(this.id_):e&&t?t.call(this.win_,this.id_):this.win_.clearTimeout(this.id_)),this.id_=null},goog.async.AnimationDelay.prototype.fire=function(){this.stop(),this.doAction_()},goog.async.AnimationDelay.prototype.fireIfActive=function(){this.isActive()&&this.fire()},goog.async.AnimationDelay.prototype.isActive=function(){return null!=this.id_},goog.async.AnimationDelay.prototype.doAction_=function(){this.usingListeners_&&this.id_&&goog.events.unlistenByKey(this.id_),this.id_=null,this.listener_.call(this.handler_,goog.now())},goog.async.AnimationDelay.prototype.disposeInternal=function(){this.stop(),goog.async.AnimationDelay.superClass_.disposeInternal.call(this)},goog.async.AnimationDelay.prototype.getRaf_=function(){var e=this.win_;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||null},goog.async.AnimationDelay.prototype.getCancelRaf_=function(){var e=this.win_;return e.cancelAnimationFrame||e.cancelRequestAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||null},goog.async.Delay=function(e,t,n){goog.Disposable.call(this),this.listener_=e,this.interval_=t||0,this.handler_=n,this.callback_=goog.bind(this.doAction_,this)},goog.inherits(goog.async.Delay,goog.Disposable),goog.Delay=goog.async.Delay,goog.async.Delay.prototype.id_=0,goog.async.Delay.prototype.disposeInternal=function(){goog.async.Delay.superClass_.disposeInternal.call(this),this.stop(),delete this.listener_,delete this.handler_},goog.async.Delay.prototype.start=function(e){this.stop(),this.id_=goog.Timer.callOnce(this.callback_,void 0!==e?e:this.interval_)},goog.async.Delay.prototype.startIfNotActive=function(e){this.isActive()||this.start(e)},goog.async.Delay.prototype.stop=function(){this.isActive()&&goog.Timer.clear(this.id_),this.id_=0},goog.async.Delay.prototype.fire=function(){this.stop(),this.doAction_()},goog.async.Delay.prototype.fireIfActive=function(){this.isActive()&&this.fire()},goog.async.Delay.prototype.isActive=function(){return 0!=this.id_},goog.async.Delay.prototype.doAction_=function(){this.id_=0,this.listener_&&this.listener_.call(this.handler_)},goog.fx.anim={},goog.fx.anim.Animated=function(){},goog.fx.anim.TIMEOUT=goog.async.AnimationDelay.TIMEOUT,goog.fx.anim.activeAnimations_={},goog.fx.anim.animationWindow_=null,goog.fx.anim.animationDelay_=null,goog.fx.anim.registerAnimation=function(e){var t=goog.getUid(e);t in goog.fx.anim.activeAnimations_||(goog.fx.anim.activeAnimations_[t]=e),goog.fx.anim.requestAnimationFrame_()},goog.fx.anim.unregisterAnimation=function(e){e=goog.getUid(e),delete goog.fx.anim.activeAnimations_[e],goog.object.isEmpty(goog.fx.anim.activeAnimations_)&&goog.fx.anim.cancelAnimationFrame_()},goog.fx.anim.tearDown=function(){goog.fx.anim.animationWindow_=null,goog.dispose(goog.fx.anim.animationDelay_),goog.fx.anim.animationDelay_=null,goog.fx.anim.activeAnimations_={}},goog.fx.anim.setAnimationWindow=function(e){var t=goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.isActive();goog.dispose(goog.fx.anim.animationDelay_),goog.fx.anim.animationDelay_=null,goog.fx.anim.animationWindow_=e,t&&goog.fx.anim.requestAnimationFrame_()},goog.fx.anim.requestAnimationFrame_=function(){goog.fx.anim.animationDelay_||(goog.fx.anim.animationDelay_=goog.fx.anim.animationWindow_?new goog.async.AnimationDelay(function(e){goog.fx.anim.cycleAnimations_(e)},goog.fx.anim.animationWindow_):new goog.async.Delay(function(){goog.fx.anim.cycleAnimations_(goog.now())},goog.fx.anim.TIMEOUT));var e=goog.fx.anim.animationDelay_;e.isActive()||e.start()},goog.fx.anim.cancelAnimationFrame_=function(){goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.stop()},goog.fx.anim.cycleAnimations_=function(t){goog.object.forEach(goog.fx.anim.activeAnimations_,function(e){e.onAnimationFrame(t)}),goog.object.isEmpty(goog.fx.anim.activeAnimations_)||goog.fx.anim.requestAnimationFrame_()},goog.fx.Animation=function(e,t,n,o){if(goog.fx.TransitionBase.call(this),!goog.isArray(e)||!goog.isArray(t))throw Error("Start and end parameters must be arrays");if(e.length!=t.length)throw Error("Start and end points must be the same length");this.startPoint=e,this.endPoint=t,this.duration=n,this.accel_=o,this.coords=[],this.useRightPositioningForRtl_=!1,this.progress=this.fps_=0,this.lastFrame=null},goog.inherits(goog.fx.Animation,goog.fx.TransitionBase),goog.fx.Animation.prototype.getDuration=function(){return this.duration},goog.fx.Animation.prototype.enableRightPositioningForRtl=function(e){this.useRightPositioningForRtl_=e},goog.fx.Animation.prototype.isRightPositioningForRtlEnabled=function(){return this.useRightPositioningForRtl_},goog.fx.Animation.EventType={PLAY:goog.fx.Transition.EventType.PLAY,BEGIN:goog.fx.Transition.EventType.BEGIN,RESUME:goog.fx.Transition.EventType.RESUME,END:goog.fx.Transition.EventType.END,STOP:goog.fx.Transition.EventType.STOP,FINISH:goog.fx.Transition.EventType.FINISH,PAUSE:goog.fx.Transition.EventType.PAUSE,ANIMATE:"animate",DESTROY:"destroy"},goog.fx.Animation.TIMEOUT=goog.fx.anim.TIMEOUT,goog.fx.Animation.State=goog.fx.TransitionBase.State,goog.fx.Animation.setAnimationWindow=function(e){goog.fx.anim.setAnimationWindow(e)},goog.fx.Animation.prototype.play=function(e){if(e||this.isStopped())this.progress=0,this.coords=this.startPoint;else if(this.isPlaying())return!1;return goog.fx.anim.unregisterAnimation(this),this.startTime=e=goog.now(),this.isPaused()&&(this.startTime-=this.duration*this.progress),this.endTime=this.startTime+this.duration,this.lastFrame=this.startTime,this.progress||this.onBegin(),this.onPlay(),this.isPaused()&&this.onResume(),this.setStatePlaying(),goog.fx.anim.registerAnimation(this),this.cycle(e),!0},goog.fx.Animation.prototype.stop=function(e){goog.fx.anim.unregisterAnimation(this),this.setStateStopped(),e&&(this.progress=1),this.updateCoords_(this.progress),this.onStop(),this.onEnd()},goog.fx.Animation.prototype.pause=function(){this.isPlaying()&&(goog.fx.anim.unregisterAnimation(this),this.setStatePaused(),this.onPause())},goog.fx.Animation.prototype.getProgress=function(){return this.progress},goog.fx.Animation.prototype.setProgress=function(e){this.progress=e,this.isPlaying()&&(this.startTime=goog.now()-this.duration*this.progress,this.endTime=this.startTime+this.duration)},goog.fx.Animation.prototype.disposeInternal=function(){this.isStopped()||this.stop(!1),this.onDestroy(),goog.fx.Animation.superClass_.disposeInternal.call(this)},goog.fx.Animation.prototype.destroy=function(){this.dispose()},goog.fx.Animation.prototype.onAnimationFrame=function(e){this.cycle(e)},goog.fx.Animation.prototype.cycle=function(e){goog.asserts.assertNumber(this.startTime),goog.asserts.assertNumber(this.endTime),goog.asserts.assertNumber(this.lastFrame),e<this.startTime&&(this.endTime=e+this.endTime-this.startTime,this.startTime=e),this.progress=(e-this.startTime)/(this.endTime-this.startTime),1<this.progress&&(this.progress=1),this.fps_=1e3/(e-this.lastFrame),this.lastFrame=e,this.updateCoords_(this.progress),1==this.progress?(this.setStateStopped(),goog.fx.anim.unregisterAnimation(this),this.onFinish(),this.onEnd()):this.isPlaying()&&this.onAnimate()},goog.fx.Animation.prototype.updateCoords_=function(e){goog.isFunction(this.accel_)&&(e=this.accel_(e)),this.coords=Array(this.startPoint.length);for(var t=0;t<this.startPoint.length;t++)this.coords[t]=(this.endPoint[t]-this.startPoint[t])*e+this.startPoint[t]},goog.fx.Animation.prototype.onAnimate=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.ANIMATE)},goog.fx.Animation.prototype.onDestroy=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.DESTROY)},goog.fx.Animation.prototype.dispatchAnimationEvent=function(e){this.dispatchEvent(new goog.fx.AnimationEvent(e,this))},goog.fx.AnimationEvent=function(e,t){goog.events.Event.call(this,e),this.coords=t.coords,this.x=t.coords[0],this.y=t.coords[1],this.z=t.coords[2],this.duration=t.duration,this.progress=t.getProgress(),this.fps=t.fps_,this.state=t.getStateInternal(),this.anim=t},goog.inherits(goog.fx.AnimationEvent,goog.events.Event),goog.fx.AnimationEvent.prototype.coordsAsInts=function(){return goog.array.map(this.coords,Math.round)},goog.fx.AnimationQueue=function(){goog.fx.TransitionBase.call(this),this.queue=[]},goog.inherits(goog.fx.AnimationQueue,goog.fx.TransitionBase),goog.fx.AnimationQueue.prototype.add=function(e){goog.asserts.assert(this.isStopped(),"Not allowed to add animations to a running animation queue."),goog.array.contains(this.queue,e)||(this.queue.push(e),goog.events.listen(e,goog.fx.Transition.EventType.FINISH,this.onAnimationFinish,!1,this))},goog.fx.AnimationQueue.prototype.remove=function(e){goog.asserts.assert(this.isStopped(),"Not allowed to remove animations from a running animation queue."),goog.array.remove(this.queue,e)&&goog.events.unlisten(e,goog.fx.Transition.EventType.FINISH,this.onAnimationFinish,!1,this)},goog.fx.AnimationQueue.prototype.onAnimationFinish=goog.abstractMethod,goog.fx.AnimationQueue.prototype.disposeInternal=function(){goog.array.forEach(this.queue,function(e){e.dispose()}),this.queue.length=0,goog.fx.AnimationQueue.superClass_.disposeInternal.call(this)},goog.fx.AnimationParallelQueue=function(){goog.fx.AnimationQueue.call(this),this.finishedCounter_=0},goog.inherits(goog.fx.AnimationParallelQueue,goog.fx.AnimationQueue),goog.fx.AnimationParallelQueue.prototype.play=function(t){if(0==this.queue.length)return!1;if(t||this.isStopped())this.finishedCounter_=0,this.onBegin();else if(this.isPlaying())return!1;this.onPlay(),this.isPaused()&&this.onResume();var n=this.isPaused()&&!t;return this.startTime=goog.now(),this.endTime=null,this.setStatePlaying(),goog.array.forEach(this.queue,function(e){n&&!e.isPaused()||e.play(t)}),!0},goog.fx.AnimationParallelQueue.prototype.pause=function(){this.isPlaying()&&(goog.array.forEach(this.queue,function(e){e.isPlaying()&&e.pause()}),this.setStatePaused(),this.onPause())},goog.fx.AnimationParallelQueue.prototype.stop=function(t){goog.array.forEach(this.queue,function(e){e.isStopped()||e.stop(t)}),this.setStateStopped(),this.endTime=goog.now(),this.onStop(),this.onEnd()},goog.fx.AnimationParallelQueue.prototype.onAnimationFinish=function(e){this.finishedCounter_++,this.finishedCounter_==this.queue.length&&(this.endTime=goog.now(),this.setStateStopped(),this.onFinish(),this.onEnd())},goog.fx.AnimationSerialQueue=function(){goog.fx.AnimationQueue.call(this),this.current_=0},goog.inherits(goog.fx.AnimationSerialQueue,goog.fx.AnimationQueue),goog.fx.AnimationSerialQueue.prototype.play=function(e){if(0==this.queue.length)return!1;if(e||this.isStopped())this.current_<this.queue.length&&!this.queue[this.current_].isStopped()&&this.queue[this.current_].stop(!1),this.current_=0,this.onBegin();else if(this.isPlaying())return!1;return this.onPlay(),this.isPaused()&&this.onResume(),this.startTime=goog.now(),this.endTime=null,this.setStatePlaying(),this.queue[this.current_].play(e),!0},goog.fx.AnimationSerialQueue.prototype.pause=function(){this.isPlaying()&&(this.queue[this.current_].pause(),this.setStatePaused(),this.onPause())},goog.fx.AnimationSerialQueue.prototype.stop=function(e){if(this.setStateStopped(),this.endTime=goog.now(),e)for(e=this.current_;e<this.queue.length;++e){var t=this.queue[e];t.isStopped()&&t.play(),t.isStopped()||t.stop(!0)}else this.current_<this.queue.length&&this.queue[this.current_].stop(!1);this.onStop(),this.onEnd()},goog.fx.AnimationSerialQueue.prototype.onAnimationFinish=function(e){this.isPlaying()&&(this.current_++,this.current_<this.queue.length?this.queue[this.current_].play():(this.endTime=goog.now(),this.setStateStopped(),this.onFinish(),this.onEnd()))},goog.userAgent.platform={},goog.userAgent.platform.determineVersion_=function(){var e;return goog.userAgent.WINDOWS?(e=(e=/Windows NT ([0-9.]+)/).exec(goog.userAgent.getUserAgentString()))?e[1]:"0":goog.userAgent.MAC?(e=(e=/10[_.][0-9_.]+/).exec(goog.userAgent.getUserAgentString()))?e[0].replace(/_/g,"."):"10":goog.userAgent.ANDROID?(e=(e=/Android\s+([^\);]+)(\)|;)/).exec(goog.userAgent.getUserAgentString()))?e[1]:"":(goog.userAgent.IPHONE||goog.userAgent.IPAD||goog.userAgent.IPOD)&&(e=(e=/(?:iPhone|CPU)\s+OS\s+(\S+)/).exec(goog.userAgent.getUserAgentString()))?e[1].replace(/_/g,"."):""},goog.userAgent.platform.VERSION=goog.userAgent.platform.determineVersion_(),goog.userAgent.platform.isVersion=function(e){return 0<=goog.string.compareVersions(goog.userAgent.platform.VERSION,e)},goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.userAgent.product.determineVersion_=function(){if(goog.userAgent.product.FIREFOX)return goog.userAgent.product.getFirstRegExpGroup_(/Firefox\/([0-9.]+)/);if(goog.userAgent.product.IE||goog.userAgent.product.EDGE||goog.userAgent.product.OPERA)return goog.userAgent.VERSION;if(goog.userAgent.product.CHROME)return goog.labs.userAgent.platform.isIos()?goog.userAgent.product.getFirstRegExpGroup_(/CriOS\/([0-9.]+)/):goog.userAgent.product.getFirstRegExpGroup_(/Chrome\/([0-9.]+)/);if(goog.userAgent.product.SAFARI&&!goog.labs.userAgent.platform.isIos())return goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);if(goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD){var e=goog.userAgent.product.execRegExp_(/Version\/(\S+).*Mobile\/(\S+)/);if(e)return e[1]+"."+e[2]}else if(goog.userAgent.product.ANDROID)return(e=goog.userAgent.product.getFirstRegExpGroup_(/Android\s+([0-9.]+)/))||goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);return""},goog.userAgent.product.getFirstRegExpGroup_=function(e){return(e=goog.userAgent.product.execRegExp_(e))?e[1]:""},goog.userAgent.product.execRegExp_=function(e){return e.exec(goog.userAgent.getUserAgentString())},goog.userAgent.product.VERSION=goog.userAgent.product.determineVersion_(),goog.userAgent.product.isVersion=function(e){return 0<=goog.string.compareVersions(goog.userAgent.product.VERSION,e)},goog.style.bidi={},goog.style.bidi.getScrollLeft=function(e){var t=goog.style.isRightToLeft(e);return t&&goog.style.bidi.usesNegativeScrollLeftInRtl_()?-e.scrollLeft:!t||goog.userAgent.EDGE_OR_IE&&goog.userAgent.isVersionOrHigher("8")||"visible"==goog.style.getComputedOverflowX(e)?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft},goog.style.bidi.getOffsetStart=function(e){var t=e.offsetLeft,n=e.offsetParent;return(n=n||"fixed"!=goog.style.getComputedPosition(e)?n:goog.dom.getOwnerDocument(e).documentElement)&&(goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher(58)?t+=goog.style.getBorderBox(n).left:goog.userAgent.isDocumentModeOrHigher(8)&&!goog.userAgent.isDocumentModeOrHigher(9)&&(t-=goog.style.getBorderBox(n).left),goog.style.isRightToLeft(n))?n.clientWidth-(t+e.offsetWidth):t},goog.style.bidi.setScrollOffset=function(e,t){t=Math.max(t,0),goog.style.isRightToLeft(e)?goog.style.bidi.usesNegativeScrollLeftInRtl_()?e.scrollLeft=-t:goog.userAgent.EDGE_OR_IE&&goog.userAgent.isVersionOrHigher("8")?e.scrollLeft=t:e.scrollLeft=e.scrollWidth-t-e.clientWidth:e.scrollLeft=t},goog.style.bidi.usesNegativeScrollLeftInRtl_=function(){var e=goog.userAgent.product.SAFARI&&goog.userAgent.product.isVersion(10),t=goog.userAgent.IOS&&goog.userAgent.platform.isVersion(10);return goog.userAgent.GECKO||e||t},goog.style.bidi.setPosition=function(e,t,n,o){null!==n&&(e.style.top=n+"px"),o?(e.style.right=t+"px",e.style.left=""):(e.style.left=t+"px",e.style.right="")},goog.fx.Dragger=function(e,t,n){goog.events.EventTarget.call(this),this.target=e,this.handle=t||e,this.limits=n||new goog.math.Rect(NaN,NaN,NaN,NaN),this.document_=goog.dom.getOwnerDocument(e),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.deltaY=this.deltaX=this.startY=this.startX=this.screenY=this.screenX=this.clientY=this.clientX=0,this.enabled_=!0,this.dragging_=!1,this.preventMouseDown_=!0,this.hysteresisDistanceSquared_=0,this.useRightPositioningForRtl_=this.ieDragStartCancellingOn_=!1,goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this),this.useSetCapture_=goog.fx.Dragger.HAS_SET_CAPTURE_},goog.inherits(goog.fx.Dragger,goog.events.EventTarget),goog.tagUnsealableClass(goog.fx.Dragger),goog.fx.Dragger.HAS_SET_CAPTURE_=goog.global.document&&goog.global.document.documentElement&&!!goog.global.document.documentElement.setCapture&&!!goog.global.document.releaseCapture,goog.fx.Dragger.cloneNode=function(e){for(var t=e.cloneNode(!0),n=goog.dom.getElementsByTagName("TEXTAREA",e),o=goog.dom.getElementsByTagName("TEXTAREA",t),r=0;r<n.length;r++)o[r].value=n[r].value;switch(e.tagName){case"TR":return goog.dom.createDom("TABLE",null,goog.dom.createDom("TBODY",null,t));case"TD":case"TH":return goog.dom.createDom("TABLE",null,goog.dom.createDom("TBODY",null,goog.dom.createDom("TR",null,t)));case"TEXTAREA":t.value=e.value;default:return t}},goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"},goog.fx.Dragger.prototype.setAllowSetCapture=function(e){this.useSetCapture_=e&&goog.fx.Dragger.HAS_SET_CAPTURE_},goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(e){this.useRightPositioningForRtl_=e},goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_},goog.fx.Dragger.prototype.setLimits=function(e){this.limits=e||new goog.math.Rect(NaN,NaN,NaN,NaN)},goog.fx.Dragger.prototype.setHysteresis=function(e){this.hysteresisDistanceSquared_=Math.pow(e,2)},goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)},goog.fx.Dragger.prototype.setScrollTarget=function(e){this.scrollTarget_=e},goog.fx.Dragger.prototype.setCancelIeDragStart=function(e){this.ieDragStartCancellingOn_=e},goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_},goog.fx.Dragger.prototype.setEnabled=function(e){this.enabled_=e},goog.fx.Dragger.prototype.setPreventMouseDown=function(e){this.preventMouseDown_=e},goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this),goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this),this.cleanUpAfterDragging_(),this.handle=this.target=null},goog.fx.Dragger.prototype.isRightToLeft_=function(){return void 0===this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.target)),this.rightToLeft_},goog.fx.Dragger.prototype.startDrag=function(e){var t=e.type==goog.events.EventType.MOUSEDOWN;if(!this.enabled_||this.dragging_||t&&!e.isMouseActionButton())this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);else{if(0==this.hysteresisDistanceSquared_){if(!this.fireDragStart_(e))return;this.dragging_=!0}this.preventMouseDown_&&t&&e.preventDefault(),this.setupDragHandlers(),this.clientX=this.startX=e.clientX,this.clientY=this.startY=e.clientY,this.screenX=e.screenX,this.screenY=e.screenY,this.computeInitialPosition(),this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll()}},goog.fx.Dragger.prototype.setupDragHandlers=function(){var e=this.document_,t=e.documentElement,n=!this.useSetCapture_;this.eventHandler_.listen(e,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,{capture:n,passive:!1}),this.eventHandler_.listen(e,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,n),this.useSetCapture_?(t.setCapture(!1),this.eventHandler_.listen(t,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(e),goog.events.EventType.BLUR,this.endDrag),goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(e,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault),this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,n)},goog.fx.Dragger.prototype.fireDragStart_=function(e){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,e.clientX,e.clientY,e))},goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll(),this.useSetCapture_&&this.document_.releaseCapture()},goog.fx.Dragger.prototype.endDrag=function(e,t){var n,o;this.cleanUpAfterDragging_(),this.dragging_?(this.dragging_=!1,n=this.limitX(this.deltaX),o=this.limitY(this.deltaY),this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,e.clientX,e.clientY,e,n,o,t||e.type==goog.events.EventType.TOUCHCANCEL))):this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)},goog.fx.Dragger.prototype.endDragCancel=function(e){this.endDrag(e,!0)},goog.fx.Dragger.prototype.handleMove_=function(e){if(this.enabled_){var t=(this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1)*(e.clientX-this.clientX),n=e.clientY-this.clientY;if(this.clientX=e.clientX,this.clientY=e.clientY,this.screenX=e.screenX,this.screenY=e.screenY,!this.dragging_){var o=this.startX-this.clientX,r=this.startY-this.clientY;if(o*o+r*r>this.hysteresisDistanceSquared_){if(!this.fireDragStart_(e))return void(this.isDisposed()||this.endDrag(e));this.dragging_=!0}}t=(n=this.calculatePosition_(t,n)).x,n=n.y,this.dragging_&&this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,e.clientX,e.clientY,e,t,n))&&(this.doDrag(e,t,n,!1),e.preventDefault())}},goog.fx.Dragger.prototype.calculatePosition_=function(e,t){var n=goog.dom.getDomHelper(this.document_).getDocumentScroll();return e+=n.x-this.pageScroll.x,t+=n.y-this.pageScroll.y,this.pageScroll=n,this.deltaX+=e,this.deltaY+=t,e=this.limitX(this.deltaX),t=this.limitY(this.deltaY),new goog.math.Coordinate(e,t)},goog.fx.Dragger.prototype.onScroll_=function(e){var t=this.calculatePosition_(0,0);e.clientX=this.clientX,e.clientY=this.clientY,this.doDrag(e,t.x,t.y,!0)},goog.fx.Dragger.prototype.doDrag=function(e,t,n,o){this.defaultAction(t,n),this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,e.clientX,e.clientY,e,t,n))},goog.fx.Dragger.prototype.limitX=function(e){var t=this.limits,n=isNaN(t.left)?null:t.left,t=isNaN(t.width)?0:t.width;return Math.min(null!=n?n+t:1/0,Math.max(null!=n?n:-1/0,e))},goog.fx.Dragger.prototype.limitY=function(e){var t=this.limits,n=isNaN(t.top)?null:t.top,t=isNaN(t.height)?0:t.height;return Math.min(null!=n?n+t:1/0,Math.max(null!=n?n:-1/0,e))},goog.fx.Dragger.prototype.computeInitialPosition=function(){this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft,this.deltaY=this.target.offsetTop},goog.fx.Dragger.prototype.defaultAction=function(e,t){this.useRightPositioningForRtl_&&this.isRightToLeft_()?this.target.style.right=e+"px":this.target.style.left=e+"px",this.target.style.top=t+"px"},goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_},goog.fx.DragEvent=function(e,t,n,o,r,i,s,a){goog.events.Event.call(this,e),this.clientX=n,this.clientY=o,this.browserEvent=r,this.left=void 0!==i?i:t.deltaX,this.top=void 0!==s?s:t.deltaY,this.dragger=t,this.dragCanceled=!!a},goog.inherits(goog.fx.DragEvent,goog.events.Event),goog.color={},goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},goog.color.parse=function(e){var t={},n=(e=String(e),goog.color.prependHashIfNecessaryHelper(e));if(goog.color.isValidHexColor_(n))return t.hex=goog.color.normalizeHex(n),t.type="hex",t;if((n=goog.color.isValidRgbColor_(e)).length)return t.hex=goog.color.rgbArrayToHex(n),t.type="rgb",t;if(goog.color.names&&(n=goog.color.names[e.toLowerCase()]))return t.hex=n,t.type="named",t;throw Error(e+" is not a valid color string")},goog.color.isValidColor=function(e){var t=goog.color.prependHashIfNecessaryHelper(e);return!!(goog.color.isValidHexColor_(t)||goog.color.isValidRgbColor_(e).length||goog.color.names&&goog.color.names[e.toLowerCase()])},goog.color.parseRgb=function(e){var t=goog.color.isValidRgbColor_(e);if(t.length)return t;throw Error(e+" is not a valid RGB color")},goog.color.hexToRgbStyle=function(e){return goog.color.rgbStyle_(goog.color.hexToRgb(e))},goog.color.hexTripletRe_=/#(.)(.)(.)/,goog.color.normalizeHex=function(e){if(goog.color.isValidHexColor_(e))return(e=4==e.length?e.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3"):e).toLowerCase();throw Error("'"+e+"' is not a valid hex color")},goog.color.hexToRgb=function(e){return e=goog.color.normalizeHex(e),[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]},goog.color.rgbToHex=function(e,t,n){if(e=Number(e),t=Number(t),n=Number(n),e!=(255&e)||t!=(255&t)||n!=(255&n))throw Error('"('+e+","+t+","+n+'") is not a valid RGB color');return t=e<<16|t<<8|n,e<16?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},goog.color.rgbArrayToHex=function(e){return goog.color.rgbToHex(e[0],e[1],e[2])},goog.color.rgbToHsl=function(e,t,n){e/=255,t/=255,n/=255;var o=Math.max(e,t,n),r=Math.min(e,t,n),i=0,s=0,a=.5*(o+r);return o!=r&&(o==e?i=60*(t-n)/(o-r):o==t?i=60*(n-e)/(o-r)+120:o==n&&(i=60*(e-t)/(o-r)+240),s=0<a&&a<=.5?(o-r)/(2*a):(o-r)/(2-2*a)),[Math.round(i+360)%360,s,a]},goog.color.rgbArrayToHsl=function(e){return goog.color.rgbToHsl(e[0],e[1],e[2])},goog.color.hueToRgb_=function(e,t,n){return n<0?n+=1:1<n&&--n,6*n<1?e+6*(t-e)*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e},goog.color.hslToRgb=function(e,t,n){var o,r;return e/=360,0==t?n=t=e=255*n:(n=255*goog.color.hueToRgb_(r=2*n-(o=n<.5?n*(1+t):n+t-t*n),o,e+1/3),t=255*goog.color.hueToRgb_(r,o,e),e=255*goog.color.hueToRgb_(r,o,e-1/3)),[Math.round(n),Math.round(t),Math.round(e)]},goog.color.hslArrayToRgb=function(e){return goog.color.hslToRgb(e[0],e[1],e[2])},goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i,goog.color.isValidHexColor_=function(e){return goog.color.validHexColorRe_.test(e)},goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,goog.color.isValidRgbColor_=function(e){if(n=e.match(goog.color.rgbColorRe_)){e=Number(n[1]);var t=Number(n[2]),n=Number(n[3]);if(0<=e&&e<=255&&0<=t&&t<=255&&0<=n&&n<=255)return[e,t,n]}return[]},goog.color.prependZeroIfNecessaryHelper=function(e){return 1==e.length?"0"+e:e},goog.color.prependHashIfNecessaryHelper=function(e){return"#"==e.charAt(0)?e:"#"+e},goog.color.rgbStyle_=function(e){return"rgb("+e.join(",")+")"},goog.color.hsvToRgb=function(e,t,n){var o=0,r=0,i=0;if(0==t)i=r=o=n;else{var s=Math.floor(e/60),a=e/60-s,l=(e=n*(1-t),n*(1-t*a));switch(t=n*(1-t*(1-a)),s){case 1:o=l,r=n,i=e;break;case 2:o=e,r=n,i=t;break;case 3:o=e,r=l,i=n;break;case 4:o=t,r=e,i=n;break;case 5:o=n,r=e,i=l;break;case 6:case 0:o=n,r=t,i=e}}return[Math.round(o),Math.round(r),Math.round(i)]},goog.color.rgbToHsv=function(e,t,n){var o,r=Math.max(Math.max(e,t),n),i=Math.min(Math.min(e,t),n);return i==r?i=e=0:(i=(o=r-i)/r,(e=60*(e==r?(t-n)/o:t==r?2+(n-e)/o:4+(e-t)/o))<0&&(e+=360),360<e&&(e-=360)),[e,i,r]},goog.color.rgbArrayToHsv=function(e){return goog.color.rgbToHsv(e[0],e[1],e[2])},goog.color.hsvArrayToRgb=function(e){return goog.color.hsvToRgb(e[0],e[1],e[2])},goog.color.hexToHsl=function(e){return e=goog.color.hexToRgb(e),goog.color.rgbToHsl(e[0],e[1],e[2])},goog.color.hslToHex=function(e,t,n){return goog.color.rgbArrayToHex(goog.color.hslToRgb(e,t,n))},goog.color.hslArrayToHex=function(e){return goog.color.rgbArrayToHex(goog.color.hslToRgb(e[0],e[1],e[2]))},goog.color.hexToHsv=function(e){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(e))},goog.color.hsvToHex=function(e,t,n){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(e,t,n))},goog.color.hsvArrayToHex=function(e){return goog.color.hsvToHex(e[0],e[1],e[2])},goog.color.hslDistance=function(e,t){var n=e[2]<=.5?e[1]*e[2]:e[1]*(1-e[2]),o=t[2]<=.5?t[1]*t[2]:t[1]*(1-t[2]);return(e[2]-t[2])*(e[2]-t[2])+n*n+o*o-2*n*o*Math.cos(2*(e[0]/360-t[0]/360)*Math.PI)},goog.color.blend=function(e,t,n){return n=goog.math.clamp(n,0,1),[Math.round(t[0]+n*(e[0]-t[0])),Math.round(t[1]+n*(e[1]-t[1])),Math.round(t[2]+n*(e[2]-t[2]))]},goog.color.darken=function(e,t){return goog.color.blend([0,0,0],e,t)},goog.color.lighten=function(e,t){return goog.color.blend([255,255,255],e,t)},goog.color.highContrast=function(e,t){for(var n=[],o=0;o<t.length;o++)n.push({color:t[o],diff:goog.color.yiqBrightnessDiff_(t[o],e)+goog.color.colorDiff_(t[o],e)});return n.sort(function(e,t){return t.diff-e.diff}),n[0].color},goog.color.yiqBrightness_=function(e){return Math.round((299*e[0]+587*e[1]+114*e[2])/1e3)},goog.color.yiqBrightnessDiff_=function(e,t){return Math.abs(goog.color.yiqBrightness_(e)-goog.color.yiqBrightness_(t))},goog.color.colorDiff_=function(e,t){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])+Math.abs(e[2]-t[2])},goog.fx.dom={},goog.fx.dom.PredefinedEffect=function(e,t,n,o,r){goog.fx.Animation.call(this,t,n,o,r),this.element=e},goog.inherits(goog.fx.dom.PredefinedEffect,goog.fx.Animation),goog.fx.dom.PredefinedEffect.prototype.updateStyle=goog.nullFunction,goog.fx.dom.PredefinedEffect.prototype.isRightToLeft=function(){return void 0===this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.element)),this.rightToLeft_},goog.fx.dom.PredefinedEffect.prototype.onAnimate=function(){this.updateStyle(),goog.fx.dom.PredefinedEffect.superClass_.onAnimate.call(this)},goog.fx.dom.PredefinedEffect.prototype.onEnd=function(){this.updateStyle(),goog.fx.dom.PredefinedEffect.superClass_.onEnd.call(this)},goog.fx.dom.PredefinedEffect.prototype.onBegin=function(){this.updateStyle(),goog.fx.dom.PredefinedEffect.superClass_.onBegin.call(this)},goog.fx.dom.Slide=function(e,t,n,o,r){if(2!=t.length||2!=n.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r)},goog.inherits(goog.fx.dom.Slide,goog.fx.dom.PredefinedEffect),goog.fx.dom.Slide.prototype.updateStyle=function(){var e=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"right":"left";this.element.style[e]=Math.round(this.coords[0])+"px",this.element.style.top=Math.round(this.coords[1])+"px"},goog.fx.dom.SlideFrom=function(e,t,n,o){goog.fx.dom.Slide.call(this,e,[e.offsetLeft,e.offsetTop],t,n,o)},goog.inherits(goog.fx.dom.SlideFrom,goog.fx.dom.Slide),goog.fx.dom.SlideFrom.prototype.onBegin=function(){this.startPoint=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(this.element):this.element.offsetLeft,this.element.offsetTop],goog.fx.dom.SlideFrom.superClass_.onBegin.call(this)},goog.fx.dom.Swipe=function(e,t,n,o,r){if(2!=t.length||2!=n.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r),this.maxWidth_=Math.max(this.endPoint[0],this.startPoint[0]),this.maxHeight_=Math.max(this.endPoint[1],this.startPoint[1])},goog.inherits(goog.fx.dom.Swipe,goog.fx.dom.PredefinedEffect),goog.fx.dom.Swipe.prototype.updateStyle=function(){var e=this.coords[0],t=this.coords[1],n=(this.clip_(Math.round(e),Math.round(t),this.maxWidth_,this.maxHeight_),this.element.style.width=Math.round(e)+"px",this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"marginRight":"marginLeft");this.element.style[n]=Math.round(e)-this.maxWidth_+"px",this.element.style.marginTop=Math.round(t)-this.maxHeight_+"px"},goog.fx.dom.Swipe.prototype.clip_=function(e,t,n,o){this.element.style.clip="rect("+(o-t)+"px "+n+"px "+o+"px "+(n-e)+"px)"},goog.fx.dom.Scroll=function(e,t,n,o,r){if(2!=t.length||2!=n.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r)},goog.inherits(goog.fx.dom.Scroll,goog.fx.dom.PredefinedEffect),goog.fx.dom.Scroll.prototype.updateStyle=function(){this.isRightPositioningForRtlEnabled()?goog.style.bidi.setScrollOffset(this.element,Math.round(this.coords[0])):this.element.scrollLeft=Math.round(this.coords[0]),this.element.scrollTop=Math.round(this.coords[1])},goog.fx.dom.Resize=function(e,t,n,o,r){if(2!=t.length||2!=n.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r)},goog.inherits(goog.fx.dom.Resize,goog.fx.dom.PredefinedEffect),goog.fx.dom.Resize.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px",this.element.style.height=Math.round(this.coords[1])+"px"},goog.fx.dom.ResizeWidth=function(e,t,n,o,r){goog.fx.dom.PredefinedEffect.call(this,e,[t],[n],o,r)},goog.inherits(goog.fx.dom.ResizeWidth,goog.fx.dom.PredefinedEffect),goog.fx.dom.ResizeWidth.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px"},goog.fx.dom.ResizeHeight=function(e,t,n,o,r){goog.fx.dom.PredefinedEffect.call(this,e,[t],[n],o,r)},goog.inherits(goog.fx.dom.ResizeHeight,goog.fx.dom.PredefinedEffect),goog.fx.dom.ResizeHeight.prototype.updateStyle=function(){this.element.style.height=Math.round(this.coords[0])+"px"},goog.fx.dom.Fade=function(e,t,n,o,r){if(goog.fx.dom.PredefinedEffect.call(this,e,t="number"==typeof t?[t]:t,n="number"==typeof n?[n]:n,o,r),1!=t.length||1!=n.length)throw Error("Start and end points must be 1D");this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_},goog.inherits(goog.fx.dom.Fade,goog.fx.dom.PredefinedEffect),goog.fx.dom.Fade.TOLERANCE_=1/1024,goog.fx.dom.Fade.OPACITY_UNSET_=-1,goog.fx.dom.Fade.prototype.updateStyle=function(){var e=this.coords[0];Math.abs(e-this.lastOpacityUpdate_)>=goog.fx.dom.Fade.TOLERANCE_&&(goog.style.setOpacity(this.element,e),this.lastOpacityUpdate_=e)},goog.fx.dom.Fade.prototype.onBegin=function(){this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_,goog.fx.dom.Fade.superClass_.onBegin.call(this)},goog.fx.dom.Fade.prototype.onEnd=function(){this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_,goog.fx.dom.Fade.superClass_.onEnd.call(this)},goog.fx.dom.Fade.prototype.show=function(){this.element.style.display=""},goog.fx.dom.Fade.prototype.hide=function(){this.element.style.display="none"},goog.fx.dom.FadeOut=function(e,t,n){goog.fx.dom.Fade.call(this,e,1,0,t,n)},goog.inherits(goog.fx.dom.FadeOut,goog.fx.dom.Fade),goog.fx.dom.FadeIn=function(e,t,n){goog.fx.dom.Fade.call(this,e,0,1,t,n)},goog.inherits(goog.fx.dom.FadeIn,goog.fx.dom.Fade),goog.fx.dom.FadeOutAndHide=function(e,t,n){goog.fx.dom.Fade.call(this,e,1,0,t,n)},goog.inherits(goog.fx.dom.FadeOutAndHide,goog.fx.dom.Fade),goog.fx.dom.FadeOutAndHide.prototype.onBegin=function(){this.show(),goog.fx.dom.FadeOutAndHide.superClass_.onBegin.call(this)},goog.fx.dom.FadeOutAndHide.prototype.onEnd=function(){this.hide(),goog.fx.dom.FadeOutAndHide.superClass_.onEnd.call(this)},goog.fx.dom.FadeInAndShow=function(e,t,n){goog.fx.dom.Fade.call(this,e,0,1,t,n)},goog.inherits(goog.fx.dom.FadeInAndShow,goog.fx.dom.Fade),goog.fx.dom.FadeInAndShow.prototype.onBegin=function(){this.show(),goog.fx.dom.FadeInAndShow.superClass_.onBegin.call(this)},goog.fx.dom.BgColorTransform=function(e,t,n,o,r){if(3!=t.length||3!=n.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r)},goog.inherits(goog.fx.dom.BgColorTransform,goog.fx.dom.PredefinedEffect),goog.fx.dom.BgColorTransform.prototype.setColor=function(){for(var e=[],t=0;t<this.coords.length;t++)e[t]=Math.round(this.coords[t]);e="rgb("+e.join(",")+")",this.element.style.backgroundColor=e},goog.fx.dom.BgColorTransform.prototype.updateStyle=function(){this.setColor()},goog.fx.dom.bgColorFadeIn=function(e,t,n,o){function r(){e.style.backgroundColor=i}var i=e.style.backgroundColor||"",s=(s=goog.style.getBackgroundColor(e))&&"transparent"!=s&&"rgba(0, 0, 0, 0)"!=s?goog.color.hexToRgb(goog.color.parse(s).hex):[255,255,255];t=new goog.fx.dom.BgColorTransform(e,t,s,n),(o||goog.events).listen(t,goog.fx.Transition.EventType.END,r),t.play()},goog.fx.dom.ColorTransform=function(e,t,n,o,r){if(3!=t.length||3!=n.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r)},goog.inherits(goog.fx.dom.ColorTransform,goog.fx.dom.PredefinedEffect),goog.fx.dom.ColorTransform.prototype.updateStyle=function(){for(var e=[],t=0;t<this.coords.length;t++)e[t]=Math.round(this.coords[t]);e="rgb("+e.join(",")+")",this.element.style.color=e},goog.ui.RangeModel=function(){goog.events.EventTarget.call(this)},goog.inherits(goog.ui.RangeModel,goog.events.EventTarget),goog.tagUnsealableClass(goog.ui.RangeModel),goog.ui.RangeModel.prototype.value_=0,goog.ui.RangeModel.prototype.minimum_=0,goog.ui.RangeModel.prototype.maximum_=100,goog.ui.RangeModel.prototype.extent_=0,goog.ui.RangeModel.prototype.step_=1,goog.ui.RangeModel.prototype.isChanging_=!1,goog.ui.RangeModel.prototype.mute_=!1,goog.ui.RangeModel.prototype.setMute=function(e){this.mute_=e},goog.ui.RangeModel.prototype.setValue=function(e){e=this.roundToStepWithMin(e),this.value_!=e&&(this.value_=e+this.extent_>this.maximum_?this.maximum_-this.extent_:e<this.minimum_?this.minimum_:e,this.isChanging_||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))},goog.ui.RangeModel.prototype.getValue=function(){return this.roundToStepWithMin(this.value_)},goog.ui.RangeModel.prototype.setExtent=function(e){e=this.roundToStepWithMin(e),this.extent_!=e&&(this.extent_=e<0?0:this.value_+e>this.maximum_?this.maximum_-this.value_:e,this.isChanging_||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))},goog.ui.RangeModel.prototype.getExtent=function(){return this.roundToStep(this.extent_)},goog.ui.RangeModel.prototype.setMinimum=function(e){var t;this.minimum_!=e&&(t=this.isChanging_,this.isChanging_=!0,(this.minimum_=e)+this.extent_>this.maximum_&&(this.extent_=this.maximum_-this.minimum_),e>this.value_&&this.setValue(e),e>this.maximum_&&(this.extent_=0,this.setMaximum(e),this.setValue(e)),(this.isChanging_=t)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))},goog.ui.RangeModel.prototype.getMinimum=function(){return this.roundToStepWithMin(this.minimum_)},goog.ui.RangeModel.prototype.setMaximum=function(e){var t;e=this.roundToStepWithMin(e),this.maximum_!=e&&(t=this.isChanging_,this.isChanging_=!0,(this.maximum_=e)<this.value_+this.extent_&&this.setValue(e-this.extent_),e<this.minimum_&&(this.extent_=0,this.setMinimum(e),this.setValue(this.maximum_)),e<this.minimum_+this.extent_&&(this.extent_=this.maximum_-this.minimum_),(this.isChanging_=t)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))},goog.ui.RangeModel.prototype.getMaximum=function(){return this.roundToStepWithMin(this.maximum_)},goog.ui.RangeModel.prototype.getStep=function(){return this.step_},goog.ui.RangeModel.prototype.setStep=function(e){this.step_!=e&&(this.step_=e,e=this.isChanging_,this.isChanging_=!0,this.setMaximum(this.getMaximum()),this.setExtent(this.getExtent()),this.setValue(this.getValue()),(this.isChanging_=e)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))},goog.ui.RangeModel.prototype.roundToStepWithMin=function(e){return null==this.step_?e:this.minimum_+Math.round((e-this.minimum_)/this.step_)*this.step_},goog.ui.RangeModel.prototype.roundToStep=function(e){return null==this.step_?e:Math.round(e/this.step_)*this.step_},goog.ui.SliderBase=function(e,t){goog.ui.Component.call(this,e),this.additionalAnimations_=null,this.rangeModel=new goog.ui.RangeModel,this.labelFn_=t||goog.functions.NULL,this.focusElementOnSliderDrag_=!0,goog.events.listen(this.rangeModel,goog.ui.Component.EventType.CHANGE,this.handleRangeModelChange,!1,this)},goog.inherits(goog.ui.SliderBase,goog.ui.Component),goog.tagUnsealableClass(goog.ui.SliderBase),goog.ui.SliderBase.EventType={DRAG_VALUE_START:goog.events.getUniqueId("dragvaluestart"),DRAG_VALUE_END:goog.events.getUniqueId("dragvalueend"),DRAG_EXTENT_START:goog.events.getUniqueId("dragextentstart"),DRAG_EXTENT_END:goog.events.getUniqueId("dragextentend"),DRAG_START:goog.events.getUniqueId("dragstart"),DRAG_END:goog.events.getUniqueId("dragend"),ANIMATION_END:goog.events.getUniqueId("animationend")},goog.ui.SliderBase.Orientation={VERTICAL:"vertical",HORIZONTAL:"horizontal"},goog.ui.SliderBase.prototype.orientation_=goog.ui.SliderBase.Orientation.HORIZONTAL,goog.ui.SliderBase.MOUSE_DOWN_INCREMENT_INTERVAL_=200,goog.ui.SliderBase.ANIMATION_INTERVAL_=100,goog.ui.SliderBase.prototype.isAnimating_=!1,goog.ui.SliderBase.prototype.moveToPointEnabled_=!1,goog.ui.SliderBase.prototype.blockIncrement_=10,goog.ui.SliderBase.prototype.minExtent_=0,goog.ui.SliderBase.prototype.isHandleMouseWheel_=!0,goog.ui.SliderBase.prototype.mouseDownTime_=0,goog.ui.SliderBase.prototype.MOUSE_DOWN_DELAY_=1e3,goog.ui.SliderBase.prototype.enabled_=!0,goog.ui.SliderBase.prototype.flipForRtl_=!1,goog.ui.SliderBase.prototype.enableFlipForRtl=function(e){this.flipForRtl_=e},goog.ui.SliderBase.prototype.getCssClass=goog.abstractMethod,goog.ui.SliderBase.prototype.createDom=function(){goog.ui.SliderBase.superClass_.createDom.call(this);var e=this.getDomHelper().createDom("DIV",this.getCssClass(this.orientation_));this.decorateInternal(e)},goog.ui.SliderBase.prototype.createThumbs=goog.abstractMethod,goog.ui.SliderBase.SLIDER_DRAGGING_CSS_CLASS_="goog-slider-dragging",goog.ui.SliderBase.THUMB_DRAGGING_CSS_CLASS_="goog-slider-thumb-dragging",goog.ui.SliderBase.DISABLED_CSS_CLASS_="goog-slider-disabled",goog.ui.SliderBase.prototype.decorateInternal=function(e){goog.ui.SliderBase.superClass_.decorateInternal.call(this,e),goog.asserts.assert(e),goog.dom.classlist.add(e,this.getCssClass(this.orientation_)),this.createThumbs(),this.setAriaRoles()},goog.ui.SliderBase.prototype.enterDocument=function(){goog.ui.SliderBase.superClass_.enterDocument.call(this),this.valueDragger_=new goog.fx.Dragger(this.valueThumb),this.extentDragger_=new goog.fx.Dragger(this.extentThumb),this.valueDragger_.enableRightPositioningForRtl(this.flipForRtl_),this.extentDragger_.enableRightPositioningForRtl(this.flipForRtl_),this.valueDragger_.defaultAction=this.extentDragger_.defaultAction=goog.nullFunction,this.keyHandler_=new goog.events.KeyHandler(this.getElement()),this.enableEventHandlers_(!0),this.getElement().tabIndex=0,this.updateUi_()},goog.ui.SliderBase.prototype.enableEventHandlers_=function(e){e?(this.getHandler().listen(this.valueDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).listen(this.extentDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).listen(this.valueDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).listen(this.extentDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).listen(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.handleKeyDown_).listen(this.getElement(),goog.events.EventType.CLICK,this.handleMouseDownAndClick_).listen(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDownAndClick_),this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(!0)):(this.getHandler().unlisten(this.valueDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).unlisten(this.extentDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).unlisten(this.valueDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).unlisten(this.extentDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).unlisten(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.handleKeyDown_).unlisten(this.getElement(),goog.events.EventType.CLICK,this.handleMouseDownAndClick_).unlisten(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDownAndClick_),this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(!1))},goog.ui.SliderBase.prototype.exitDocument=function(){goog.ui.SliderBase.superClass_.exitDocument.call(this),goog.disposeAll(this.valueDragger_,this.extentDragger_,this.keyHandler_,this.mouseWheelHandler_)},goog.ui.SliderBase.prototype.handleBeforeDrag_=function(e){var t,n=e.dragger==this.valueDragger_?this.valueThumb:this.extentThumb;t=this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?((t=this.getElement().clientHeight-n.offsetHeight)-e.top)/t*(this.getMaximum()-this.getMinimum())+this.getMinimum():(t=this.getElement().clientWidth-n.offsetWidth,e.left/t*(this.getMaximum()-this.getMinimum())+this.getMinimum()),t=e.dragger==this.valueDragger_?Math.min(Math.max(t,this.getMinimum()),this.getValue()+this.getExtent()):Math.min(Math.max(t,this.getValue()),this.getMaximum()),this.setThumbPosition_(n,t)},goog.ui.SliderBase.prototype.handleThumbDragStartEnd_=function(e){var t=e.type==goog.fx.Dragger.EventType.START;goog.dom.classlist.enable(goog.asserts.assertElement(this.getElement()),goog.ui.SliderBase.SLIDER_DRAGGING_CSS_CLASS_,t),goog.dom.classlist.enable(goog.asserts.assertElement(e.target.handle),goog.ui.SliderBase.THUMB_DRAGGING_CSS_CLASS_,t),e=e.dragger==this.valueDragger_,t?(this.dispatchEvent(goog.ui.SliderBase.EventType.DRAG_START),this.dispatchEvent(e?goog.ui.SliderBase.EventType.DRAG_VALUE_START:goog.ui.SliderBase.EventType.DRAG_EXTENT_START)):(this.dispatchEvent(goog.ui.SliderBase.EventType.DRAG_END),this.dispatchEvent(e?goog.ui.SliderBase.EventType.DRAG_VALUE_END:goog.ui.SliderBase.EventType.DRAG_EXTENT_END))},goog.ui.SliderBase.prototype.handleKeyDown_=function(e){var t=!0;switch(e.keyCode){case goog.events.KeyCodes.HOME:this.animatedSetValue(this.getMinimum());break;case goog.events.KeyCodes.END:this.animatedSetValue(this.getMaximum());break;case goog.events.KeyCodes.PAGE_UP:this.moveThumbs(this.getBlockIncrement());break;case goog.events.KeyCodes.PAGE_DOWN:this.moveThumbs(-this.getBlockIncrement());break;case goog.events.KeyCodes.LEFT:var n=this.flipForRtl_&&this.isRightToLeft()?1:-1;this.moveThumbs(e.shiftKey?n*this.getBlockIncrement():n*this.getUnitIncrement());break;case goog.events.KeyCodes.DOWN:this.moveThumbs(e.shiftKey?-this.getBlockIncrement():-this.getUnitIncrement());break;case goog.events.KeyCodes.RIGHT:n=this.flipForRtl_&&this.isRightToLeft()?-1:1,this.moveThumbs(e.shiftKey?n*this.getBlockIncrement():n*this.getUnitIncrement());break;case goog.events.KeyCodes.UP:this.moveThumbs(e.shiftKey?this.getBlockIncrement():this.getUnitIncrement());break;default:t=!1}t&&e.preventDefault()},goog.ui.SliderBase.prototype.handleMouseDownAndClick_=function(e){this.focusElementOnSliderDrag_&&this.getElement().focus&&this.getElement().focus();var t=e.target;goog.dom.contains(this.valueThumb,t)||goog.dom.contains(this.extentThumb,t)||(t=e.type==goog.events.EventType.CLICK)&&goog.now()<this.mouseDownTime_+this.MOUSE_DOWN_DELAY_||(t||(this.mouseDownTime_=goog.now()),this.moveToPointEnabled_?this.animatedSetValue(this.getValueFromMousePosition(e)):this.startBlockIncrementing_(e))},goog.ui.SliderBase.prototype.handleMouseWheel_=function(e){this.moveThumbs((0<e.detail?-1:1)*this.getUnitIncrement()),e.preventDefault()},goog.ui.SliderBase.prototype.startBlockIncrementing_=function(e){this.storeMousePos_(e),this.thumbToMove_=this.getClosestThumb_(this.getValueFromMousePosition(e)),this.incrementing_=this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?this.lastMousePosition_<this.thumbToMove_.offsetTop:this.lastMousePosition_>this.getOffsetStart_(this.thumbToMove_)+this.thumbToMove_.offsetWidth,e=goog.dom.getOwnerDocument(this.getElement()),this.getHandler().listen(e,goog.events.EventType.MOUSEUP,this.stopBlockIncrementing_,!0).listen(this.getElement(),goog.events.EventType.MOUSEMOVE,this.storeMousePos_),this.incTimer_||(this.incTimer_=new goog.Timer(goog.ui.SliderBase.MOUSE_DOWN_INCREMENT_INTERVAL_),this.getHandler().listen(this.incTimer_,goog.Timer.TICK,this.handleTimerTick_)),this.handleTimerTick_(),this.incTimer_.start()},goog.ui.SliderBase.prototype.handleTimerTick_=function(){var e,t,n;this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(t=this.lastMousePosition_,n=this.thumbToMove_.offsetTop,this.incrementing_?t<n&&(e=this.getThumbPosition_(this.thumbToMove_)+this.getBlockIncrement()):t>n+this.thumbToMove_.offsetHeight&&(e=this.getThumbPosition_(this.thumbToMove_)-this.getBlockIncrement())):(t=this.lastMousePosition_,n=this.getOffsetStart_(this.thumbToMove_),this.incrementing_?t>n+this.thumbToMove_.offsetWidth&&(e=this.getThumbPosition_(this.thumbToMove_)+this.getBlockIncrement()):t<n&&(e=this.getThumbPosition_(this.thumbToMove_)-this.getBlockIncrement())),void 0!==e&&this.setThumbPosition_(this.thumbToMove_,e)},goog.ui.SliderBase.prototype.stopBlockIncrementing_=function(){this.incTimer_&&this.incTimer_.stop();var e=goog.dom.getOwnerDocument(this.getElement());this.getHandler().unlisten(e,goog.events.EventType.MOUSEUP,this.stopBlockIncrementing_,!0).unlisten(this.getElement(),goog.events.EventType.MOUSEMOVE,this.storeMousePos_)},goog.ui.SliderBase.prototype.getRelativeMousePos_=function(e){return e=goog.style.getRelativePosition(e,this.getElement()),this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?e.y:this.flipForRtl_&&this.isRightToLeft()?this.getElement().clientWidth-e.x:e.x},goog.ui.SliderBase.prototype.storeMousePos_=function(e){this.lastMousePosition_=this.getRelativeMousePos_(e)},goog.ui.SliderBase.prototype.getValueFromMousePosition=function(e){var t,n,o=this.getMinimum(),r=this.getMaximum();return this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(t=this.valueThumb.offsetHeight,(r-o)*((n=this.getElement().clientHeight-t)-(e=this.getRelativeMousePos_(e)-t/2))/n+o):(t=this.valueThumb.offsetWidth,n=this.getElement().clientWidth-t,(r-o)*(e=this.getRelativeMousePos_(e)-t/2)/n+o)},goog.ui.SliderBase.prototype.getThumbPosition_=function(e){if(e==this.valueThumb)return this.rangeModel.getValue();if(e==this.extentThumb)return this.rangeModel.getValue()+this.rangeModel.getExtent();throw Error("Illegal thumb element. Neither minThumb nor maxThumb")},goog.ui.SliderBase.prototype.isDragging=function(){return this.valueDragger_.isDragging()||this.extentDragger_.isDragging()},goog.ui.SliderBase.prototype.moveThumbs=function(e){Math.abs(e)<this.getStep()&&(e=goog.math.sign(e)*this.getStep());var t=this.getThumbPosition_(this.valueThumb)+e;e=this.getThumbPosition_(this.extentThumb)+e,t=goog.math.clamp(t,this.getMinimum(),this.getMaximum()-this.minExtent_),e=goog.math.clamp(e,this.getMinimum()+this.minExtent_,this.getMaximum()),this.setValueAndExtent(t,e-t)},goog.ui.SliderBase.prototype.setThumbPosition_=function(e,t){var n=this.rangeModel.roundToStepWithMin(t);t=e==this.valueThumb?n:this.rangeModel.getValue(),e=e==this.extentThumb?n:this.rangeModel.getValue()+this.rangeModel.getExtent(),t>=this.getMinimum()&&e>=t+this.minExtent_&&this.getMaximum()>=e&&this.setValueAndExtent(t,e-t)},goog.ui.SliderBase.prototype.setValueAndExtent=function(e,t){this.getMinimum()<=e&&e<=this.getMaximum()-t&&this.minExtent_<=t&&t<=this.getMaximum()-e&&(e!=this.getValue()||t!=this.getExtent())&&(this.rangeModel.setMute(!0),this.rangeModel.setExtent(0),this.rangeModel.setValue(e),this.rangeModel.setExtent(t),this.rangeModel.setMute(!1),this.handleRangeModelChange(null))},goog.ui.SliderBase.prototype.getMinimum=function(){return this.rangeModel.getMinimum()},goog.ui.SliderBase.prototype.setMinimum=function(e){this.rangeModel.setMinimum(e)},goog.ui.SliderBase.prototype.getMaximum=function(){return this.rangeModel.getMaximum()},goog.ui.SliderBase.prototype.setMaximum=function(e){this.rangeModel.setMaximum(e)},goog.ui.SliderBase.prototype.getValueThumb=function(){return this.valueThumb},goog.ui.SliderBase.prototype.getExtentThumb=function(){return this.extentThumb},goog.ui.SliderBase.prototype.getClosestThumb_=function(e){return e<=this.rangeModel.getValue()+this.rangeModel.getExtent()/2?this.valueThumb:this.extentThumb},goog.ui.SliderBase.prototype.handleRangeModelChange=function(e){this.updateUi_(),this.updateAriaStates(),this.dispatchEvent(goog.ui.Component.EventType.CHANGE)},goog.ui.SliderBase.prototype.updateUi_=function(){var e,t,n;this.valueThumb&&!this.isAnimating_&&(e=this.getThumbCoordinateForValue(this.getThumbPosition_(this.valueThumb)),t=this.getThumbCoordinateForValue(this.getThumbPosition_(this.extentThumb)),this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(this.valueThumb.style.top=e.y+"px",this.extentThumb.style.top=t.y+"px",this.rangeHighlight&&(e=this.calculateRangeHighlightPositioning_(t.y,e.y,this.valueThumb.offsetHeight),this.rangeHighlight.style.top=e.offset+"px",this.rangeHighlight.style.height=e.size+"px")):(n=this.flipForRtl_&&this.isRightToLeft()?"right":"left",this.valueThumb.style[n]=e.x+"px",this.extentThumb.style[n]=t.x+"px",this.rangeHighlight&&(e=this.calculateRangeHighlightPositioning_(e.x,t.x,this.valueThumb.offsetWidth),this.rangeHighlight.style[n]=e.offset+"px",this.rangeHighlight.style.width=e.size+"px")))},goog.ui.SliderBase.prototype.calculateRangeHighlightPositioning_=function(e,t,n){var o=Math.ceil(n/2);return{offset:e+o,size:Math.max(t-e+n-2*o,0)}},goog.ui.SliderBase.prototype.getThumbCoordinateForValue=function(e){var t,n,o=new goog.math.Coordinate;return this.valueThumb&&(t=this.getMinimum(),n=this.getMaximum(),e=e==t&&t==n?0:(e-t)/(n-t),this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(t=this.valueThumb.offsetHeight,t=this.getElement().clientHeight-t,e=Math.round(e*t),o.x=this.moveToPointEnabled_?0:this.getOffsetStart_(this.valueThumb),o.y=t-e):(t=this.getElement().clientWidth-this.valueThumb.offsetWidth,o.x=Math.round(e*t),o.y=this.moveToPointEnabled_?0:this.valueThumb.offsetTop)),o},goog.ui.SliderBase.prototype.animatedSetValue=function(e){e=goog.math.clamp(e,this.getMinimum(),this.getMaximum()),this.isAnimating_&&(this.currentAnimation_.stop(!0),this.currentAnimation_.dispose());var t=new goog.fx.AnimationParallelQueue,n=this.getClosestThumb_(e),o=this.getValue(),r=this.getExtent(),i=this.getThumbPosition_(n),s=this.getThumbCoordinateForValue(i),a=this.getStep();Math.abs(e-i)<a&&(e=goog.math.clamp(i+(i<e?a:-a),this.getMinimum(),this.getMaximum())),this.setThumbPosition_(n,e),i=this.getThumbCoordinateForValue(this.getThumbPosition_(n)),a=this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?[this.getOffsetStart_(n),i.y]:[i.x,n.offsetTop],(s=new goog.fx.dom.Slide(n,[s.x,s.y],a,goog.ui.SliderBase.ANIMATION_INTERVAL_)).enableRightPositioningForRtl(this.flipForRtl_),t.add(s),this.rangeHighlight&&this.addRangeHighlightAnimations_(n,o,r,i,t),this.additionalAnimations_&&(e=this.additionalAnimations_.createAnimations(o,e,goog.ui.SliderBase.ANIMATION_INTERVAL_),goog.array.forEach(e,function(e){t.add(e)})),this.currentAnimation_=t,this.getHandler().listen(t,goog.fx.Transition.EventType.END,this.endAnimation_),this.isAnimating_=!0,t.play(!1)},goog.ui.SliderBase.prototype.isAnimating=function(){return this.isAnimating_},goog.ui.SliderBase.prototype.setAdditionalAnimations=function(e){this.additionalAnimations_=e},goog.ui.SliderBase.prototype.addRangeHighlightAnimations_=function(e,t,n,o,r){var i=this.getThumbCoordinateForValue(t),s=this.getThumbCoordinateForValue(t+n);t=i,n=s,e==this.valueThumb?t=o:n=o,e=new(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(e=this.calculateRangeHighlightPositioning_(s.y,i.y,this.valueThumb.offsetHeight),i=this.calculateRangeHighlightPositioning_(n.y,t.y,this.valueThumb.offsetHeight),o=new goog.fx.dom.Slide(this.rangeHighlight,[this.getOffsetStart_(this.rangeHighlight),e.offset],[this.getOffsetStart_(this.rangeHighlight),i.offset],goog.ui.SliderBase.ANIMATION_INTERVAL_),goog.fx.dom.ResizeHeight):(e=this.calculateRangeHighlightPositioning_(i.x,s.x,this.valueThumb.offsetWidth),i=this.calculateRangeHighlightPositioning_(t.x,n.x,this.valueThumb.offsetWidth),o=new goog.fx.dom.Slide(this.rangeHighlight,[e.offset,this.rangeHighlight.offsetTop],[i.offset,this.rangeHighlight.offsetTop],goog.ui.SliderBase.ANIMATION_INTERVAL_),goog.fx.dom.ResizeWidth))(this.rangeHighlight,e.size,i.size,goog.ui.SliderBase.ANIMATION_INTERVAL_),o.enableRightPositioningForRtl(this.flipForRtl_),e.enableRightPositioningForRtl(this.flipForRtl_),r.add(o),r.add(e)},goog.ui.SliderBase.prototype.endAnimation_=function(e){this.isAnimating_=!1,this.dispatchEvent(goog.ui.SliderBase.EventType.ANIMATION_END)},goog.ui.SliderBase.prototype.setOrientation=function(e){var t,n;this.orientation_!=e&&(t=this.getCssClass(this.orientation_),n=this.getCssClass(e),this.orientation_=e,this.getElement())&&(goog.dom.classlist.swap(goog.asserts.assert(this.getElement()),t,n),e=this.flipForRtl_&&this.isRightToLeft()?"right":"left",this.valueThumb.style[e]=this.valueThumb.style.top="",this.extentThumb.style[e]=this.extentThumb.style.top="",this.rangeHighlight&&(this.rangeHighlight.style[e]=this.rangeHighlight.style.top="",this.rangeHighlight.style.width=this.rangeHighlight.style.height=""),this.updateUi_())},goog.ui.SliderBase.prototype.getOrientation=function(){return this.orientation_},goog.ui.SliderBase.prototype.disposeInternal=function(){goog.ui.SliderBase.superClass_.disposeInternal.call(this),this.incTimer_&&this.incTimer_.dispose(),delete this.incTimer_,this.currentAnimation_&&this.currentAnimation_.dispose(),delete this.currentAnimation_,delete this.valueThumb,delete this.extentThumb,this.rangeHighlight&&delete this.rangeHighlight,this.rangeModel.dispose(),delete this.rangeModel,this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_),this.mouseWheelHandler_&&(this.mouseWheelHandler_.dispose(),delete this.mouseWheelHandler_),this.valueDragger_&&(this.valueDragger_.dispose(),delete this.valueDragger_),this.extentDragger_&&(this.extentDragger_.dispose(),delete this.extentDragger_)},goog.ui.SliderBase.prototype.getBlockIncrement=function(){return this.blockIncrement_},goog.ui.SliderBase.prototype.setBlockIncrement=function(e){this.blockIncrement_=e},goog.ui.SliderBase.prototype.setMinExtent=function(e){this.minExtent_=e},goog.ui.SliderBase.prototype.unitIncrement_=1,goog.ui.SliderBase.prototype.getUnitIncrement=function(){return this.unitIncrement_},goog.ui.SliderBase.prototype.setUnitIncrement=function(e){this.unitIncrement_=e},goog.ui.SliderBase.prototype.getStep=function(){return this.rangeModel.getStep()},goog.ui.SliderBase.prototype.setStep=function(e){this.rangeModel.setStep(e)},goog.ui.SliderBase.prototype.getMoveToPointEnabled=function(){return this.moveToPointEnabled_},goog.ui.SliderBase.prototype.setMoveToPointEnabled=function(e){this.moveToPointEnabled_=e},goog.ui.SliderBase.prototype.getValue=function(){return this.rangeModel.getValue()},goog.ui.SliderBase.prototype.setValue=function(e){this.setThumbPosition_(this.valueThumb,e)},goog.ui.SliderBase.prototype.getExtent=function(){return this.rangeModel.getExtent()},goog.ui.SliderBase.prototype.setExtent=function(e){this.setThumbPosition_(this.extentThumb,this.rangeModel.getValue()+e)},goog.ui.SliderBase.prototype.setVisible=function(e){goog.style.setElementShown(this.getElement(),e),e&&this.updateUi_()},goog.ui.SliderBase.prototype.setAriaRoles=function(){var e=this.getElement();goog.asserts.assert(e,"The DOM element for the slider base cannot be null."),goog.a11y.aria.setRole(e,goog.a11y.aria.Role.SLIDER),this.updateAriaStates()},goog.ui.SliderBase.prototype.updateAriaStates=function(){var e=this.getElement();e&&(goog.a11y.aria.setState(e,goog.a11y.aria.State.VALUEMIN,this.getMinimum()),goog.a11y.aria.setState(e,goog.a11y.aria.State.VALUEMAX,this.getMaximum()),goog.a11y.aria.setState(e,goog.a11y.aria.State.VALUENOW,this.getValue()),goog.a11y.aria.setState(e,goog.a11y.aria.State.VALUETEXT,this.getTextValue()||""))},goog.ui.SliderBase.prototype.setHandleMouseWheel=function(e){this.isInDocument()&&e!=this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(e),this.isHandleMouseWheel_=e},goog.ui.SliderBase.prototype.isHandleMouseWheel=function(){return this.isHandleMouseWheel_},goog.ui.SliderBase.prototype.enableMouseWheelHandling_=function(e){e?(this.mouseWheelHandler_||(this.mouseWheelHandler_=new goog.events.MouseWheelHandler(this.getElement())),this.getHandler().listen(this.mouseWheelHandler_,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleMouseWheel_,{passive:!1})):this.getHandler().unlisten(this.mouseWheelHandler_,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleMouseWheel_,{passive:!1})},goog.ui.SliderBase.prototype.setEnabled=function(e){this.enabled_!=e&&this.dispatchEvent(e?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)&&(this.enabled_=e,this.enableEventHandlers_(e),e||this.stopBlockIncrementing_(),goog.dom.classlist.enable(goog.asserts.assert(this.getElement()),goog.ui.SliderBase.DISABLED_CSS_CLASS_,!e))},goog.ui.SliderBase.prototype.isEnabled=function(){return this.enabled_},goog.ui.SliderBase.prototype.getOffsetStart_=function(e){return this.flipForRtl_?goog.style.bidi.getOffsetStart(e):e.offsetLeft},goog.ui.SliderBase.prototype.getTextValue=function(){return this.labelFn_(this.getValue())},goog.ui.SliderBase.prototype.setFocusElementOnSliderDrag=function(e){this.focusElementOnSliderDrag_=e},goog.ui.SliderBase.AnimationFactory=function(){},goog.ui.Slider=function(e,t){goog.ui.SliderBase.call(this,e,t),this.rangeModel.setExtent(0)},goog.inherits(goog.ui.Slider,goog.ui.SliderBase),goog.tagUnsealableClass(goog.ui.Slider),goog.ui.Slider.Orientation=goog.ui.SliderBase.Orientation,goog.ui.Slider.CSS_CLASS_PREFIX="goog-slider",goog.ui.Slider.THUMB_CSS_CLASS=goog.ui.Slider.CSS_CLASS_PREFIX+"-thumb",goog.ui.Slider.prototype.getCssClass=function(e){return e==goog.ui.SliderBase.Orientation.VERTICAL?goog.ui.Slider.CSS_CLASS_PREFIX+"-vertical":goog.ui.Slider.CSS_CLASS_PREFIX+"-horizontal"},goog.ui.Slider.prototype.getThumbCssClass=function(){return goog.ui.Slider.THUMB_CSS_CLASS},goog.ui.Slider.prototype.createThumbs=function(){var e=this.getElement(),t=goog.dom.getElementsByTagNameAndClass(null,this.getThumbCssClass(),e)[0];t||(t=this.createThumb_(),e.appendChild(t)),this.valueThumb=this.extentThumb=t},goog.ui.Slider.prototype.createThumb_=function(){var e=this.getDomHelper().createDom("DIV",this.getThumbCssClass());return goog.a11y.aria.setRole(e,goog.a11y.aria.Role.BUTTON),e},Blockly.FieldColourSlider=function(e,t){Blockly.FieldColourSlider.superClass_.constructor.call(this,e,t),this.addArgType("colour")},Blockly.utils.object.inherits(Blockly.FieldColourSlider,Blockly.Field),Blockly.FieldColourSlider.fromJson=function(e){return new Blockly.FieldColourSlider(e.colour)},Blockly.FieldColourSlider.prototype.init=function(e){Blockly.FieldColourSlider.superClass_.init.call(this,e),this.setValue(this.getValue())},Blockly.FieldColourSlider.prototype.getValue=function(){return this.colour_},Blockly.FieldColourSlider.prototype.setValue=function(e){this.sourceBlock_&&Blockly.Events.isEnabled()&&this.colour_!=e&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.colour_,e)),this.colour_=e,this.sourceBlock_&&this.sourceBlock_.setColour(e,e,this.sourceBlock_.style.colourTertiary),this.updateSliderHandles_(),this.updateDom_()},Blockly.FieldColourSlider.prototype.createColourStops_=function(e){for(var t=[],n=0;n<=360;n+=20)switch(e){case"hue":t.push(Blockly.utils.colour.hsvToHex(n,this.saturation_,this.brightness_));break;case"saturation":t.push(Blockly.utils.colour.hsvToHex(this.hue_,n/360,this.brightness_));break;case"brightness":t.push(Blockly.utils.colour.hsvToHex(this.hue_,this.saturation_,255*n/360));break;default:throw Error("Unknown channel for colour sliders: "+e)}return t},Blockly.FieldColourSlider.prototype.setGradient_=function(e,t){t=this.createColourStops_(t).join(","),goog.style.setStyle(e,"background","-moz-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-webkit-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-o-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-ms-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","linear-gradient(left, "+t+")")},Blockly.FieldColourSlider.prototype.updateDom_=function(){this.hueSlider_&&(this.setGradient_(this.hueSlider_.getElement(),"hue"),this.setGradient_(this.saturationSlider_.getElement(),"saturation"),this.setGradient_(this.brightnessSlider_.getElement(),"brightness"),this.hueReadout_.textContent=Math.floor(100*this.hue_/360).toFixed(0),this.saturationReadout_.textContent=Math.floor(100*this.saturation_).toFixed(0),this.brightnessReadout_.textContent=Math.floor(100*this.brightness_/255).toFixed(0))},Blockly.FieldColourSlider.prototype.updateSliderHandles_=function(){this.hueSlider_&&(this.hueSlider_.setValue(this.hue_),this.saturationSlider_.setValue(this.saturation_),this.brightnessSlider_.setValue(this.brightness_))},Blockly.FieldColourSlider.prototype.getText=function(){var e=this.colour_,t=e.match(/^#(.)\1(.)\2(.)\3$/);return e=t?"#"+t[1]+t[2]+t[3]:e},Blockly.FieldColourSlider.prototype.createLabelDom_=function(e){var t=document.createElement("div"),n=(t.setAttribute("class","blocklyColourPickerLabel"),document.createElement("span")),o=(n.setAttribute("class","blocklyColourPickerReadout"),document.createElement("span"));return o.setAttribute("class","blocklyColourPickerLabelText"),o.textContent=e,t.appendChild(o),t.appendChild(n),[t,n]},Blockly.FieldColourSlider.prototype.sliderCallbackFactory_=function(n){var o=this;return function(e){e=e.target.getValue();var t=Blockly.utils.colour.hexToHsv(o.getValue());switch(n){case"hue":t[0]=o.hue_=e;break;case"saturation":t[1]=o.saturation_=e;break;case"brightness":t[2]=o.brightness_=e}e=Blockly.utils.colour.hsvToHex(t[0],t[1],t[2]),null!==(e=o.sourceBlock_?o.callValidator(e):e)&&o.setValue(e,!0)}},Blockly.FieldColourSlider.prototype.showEditor_=function(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv(),t=Blockly.utils.colour.hexToHsv(this.getValue());this.hue_=t[0],this.saturation_=t[1],this.brightness_=t[2],t=this.createLabelDom_("Hue"),e.appendChild(t[0]),this.hueReadout_=t[1],this.hueSlider_=new goog.ui.Slider,this.hueSlider_.setUnitIncrement(5),this.hueSlider_.setMinimum(0),this.hueSlider_.setMaximum(360),this.hueSlider_.render(e),t=this.createLabelDom_("Saturation"),e.appendChild(t[0]),this.saturationReadout_=t[1],this.saturationSlider_=new goog.ui.Slider,this.saturationSlider_.setUnitIncrement(.01),this.saturationSlider_.setStep(.001),this.saturationSlider_.setMinimum(0),this.saturationSlider_.setMaximum(1),this.saturationSlider_.render(e),t=this.createLabelDom_("Brightness"),e.appendChild(t[0]),this.brightnessReadout_=t[1],this.brightnessSlider_=new goog.ui.Slider,this.brightnessSlider_.setUnitIncrement(2),this.brightnessSlider_.setMinimum(0),this.brightnessSlider_.setMaximum(255),this.brightnessSlider_.render(e),Blockly.FieldColourSlider.hueChangeEventKey_=goog.events.listen(this.hueSlider_,goog.ui.Component.EventType.CHANGE,this.sliderCallbackFactory_("hue")),Blockly.FieldColourSlider.saturationChangeEventKey_=goog.events.listen(this.saturationSlider_,goog.ui.Component.EventType.CHANGE,this.sliderCallbackFactory_("saturation")),Blockly.FieldColourSlider.brightnessChangeEventKey_=goog.events.listen(this.brightnessSlider_,goog.ui.Component.EventType.CHANGE,this.sliderCallbackFactory_("brightness")),Blockly.DropDownDiv.setColour("#ffffff","#dddddd"),Blockly.DropDownDiv.setCategory(this.sourceBlock_.parentBlock_.getCategory()),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_),this.setValue(this.getValue())},Blockly.FieldColourSlider.prototype.dispose=function(){Blockly.FieldColourSlider.hueChangeEventKey_&&goog.events.unlistenByKey(Blockly.FieldColourSlider.hueChangeEventKey_),Blockly.FieldColourSlider.saturationChangeEventKey_&&goog.events.unlistenByKey(Blockly.FieldColourSlider.saturationChangeEventKey_),Blockly.FieldColourSlider.brightnessChangeEventKey_&&goog.events.unlistenByKey(Blockly.FieldColourSlider.brightnessChangeEventKey_),Blockly.Events.setGroup(!1),Blockly.FieldColourSlider.superClass_.dispose.call(this)},Blockly.fieldRegistry.register("field_colour_slider",Blockly.FieldColourSlider),Blockly.MenuSeparator=function(){Blockly.Component.call(this)},Blockly.utils.object.inherits(Blockly.MenuSeparator,Blockly.Component),Blockly.MenuSeparator.prototype.createDom=function(){var e=document.createElement("div");e.id=this.getId(),this.setElementInternal(e),e.className="goog-menuseparator "+(this.isRightToLeft()?"goog-menuseparator-rtl ":""),Blockly.utils.aria.setRole(e,Blockly.utils.aria.Role.SEPARATOR),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.DISABLED,!0)},Blockly.MenuSeparator.prototype.isEnabled=function(){return!1},Blockly.FieldDropdown=function(e,t,n){"function"!=typeof e&&Blockly.FieldDropdown.validateOptions_(e),this.menuGenerator_=e,this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],Blockly.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],t,n),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null,this.addArgType("dropdown")},Blockly.utils.object.inherits(Blockly.FieldDropdown,Blockly.Field),Blockly.FieldDropdown.fromJson=function(e){return new Blockly.FieldDropdown(e.options,void 0,e)},Blockly.FieldDropdown.prototype.EDITABLE=!1,Blockly.FieldDropdown.prototype.SERIALIZABLE=!0,Blockly.FieldDropdown.CHECKMARK_OVERHANG=25,Blockly.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,Blockly.FieldDropdown.IMAGE_Y_OFFSET=5,Blockly.FieldDropdown.IMAGE_Y_PADDING=2*Blockly.FieldDropdown.IMAGE_Y_OFFSET,Blockly.FieldDropdown.prototype.CURSOR="pointer",Blockly.FieldDropdown.prototype.selectedItem=null,Blockly.FieldDropdown.prototype.value_="",Blockly.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=Blockly.utils.dom.createSvgElement("image",{},this.fieldGroup_),this.constants_.FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Blockly.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},Blockly.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.constants_.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.constants_.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},Blockly.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=Blockly.utils.dom.createSvgElement("tspan",{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?Blockly.FieldDropdown.ARROW_CHAR+" ":" "+Blockly.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},Blockly.FieldDropdown.prototype.createSVGArrow_=function(){var e=Blockly.utils.userAgent.IE||Blockly.utils.userAgent.IOS,t=e?this.constants_.FIELD_DROPDOWN_SVG_ARROW_DATAURI:"#"+(this.constants_.dropdownArrowImageId||"blocklyDropdownArrowSvg");this.svgArrow_=Blockly.utils.dom.createSvgElement(e?"image":"use",{height:this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",t)},Blockly.FieldDropdown.prototype.showEditor_=function(e){var t;this.menu_=this.dropdownCreate_(),this.menu_.openingCoords=e&&"number"==typeof e.clientX?new Blockly.utils.Coordinate(e.clientX,e.clientY):null,this.menu_.render(Blockly.DropDownDiv.getContentDiv()),Blockly.utils.dom.addClass(this.menu_.getElement(),"blocklyDropdownMenu"),this.constants_.FIELD_DROPDOWN_COLOURED_DIV&&(e=(this.sourceBlock_.isShadow()?this.sourceBlock_.getParent():this.sourceBlock_).getColour(),t=(this.sourceBlock_.isShadow()?this.sourceBlock_.getParent():this.sourceBlock_).style.colourTertiary,Blockly.DropDownDiv.setColour(e,t)),Blockly.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&Blockly.utils.style.scrollIntoContainerView(this.selectedMenuItem_.getElement(),this.menu_.getElement()),this.applyColour()},Blockly.FieldDropdown.prototype.dropdownCreate_=function(){var e=new Blockly.Menu,t=(e.setRightToLeft(this.sourceBlock_.RTL),e.setRole(Blockly.utils.aria.Role.LISTBOX),this.getOptions(!1));this.selectedMenuItem_=null;for(var n=0;n<t.length;n++){var o,r=t[n][0],i=t[n][1];"SEPARATOR"===i?((r=new Blockly.MenuSeparator).setRightToLeft(this.sourceBlock_.RTL),e.addChild(r,!0),r.getElement().style.borderColor=this.sourceBlock_.style.colourTertiary):("object"==typeof r&&((o=new Image(r.width,r.height)).src=r.src,o.alt=r.alt||"",r=o),(r=new Blockly.MenuItem(r)).setRole(Blockly.utils.aria.Role.OPTION),r.setRightToLeft(this.sourceBlock_.RTL),r.setValue(i),r.setCheckable(!0),e.addChild(r,!0),r.setChecked(i==this.value_),i==this.value_&&(this.selectedMenuItem_=r),r.onAction(this.handleMenuActionEvent_,this))}return Blockly.utils.aria.setState(e.getElement(),Blockly.utils.aria.State.ACTIVEDESCENDANT,this.selectedMenuItem_?this.selectedMenuItem_.getId():""),e},Blockly.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},Blockly.FieldDropdown.prototype.handleMenuActionEvent_=function(e){Blockly.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,e)},Blockly.FieldDropdown.prototype.onItemSelected_=function(e,t){null!==(e=t.getValue())&&(this.setValue(e),this.sourceBlock_.workspace)&&Blockly.Events.fire(new Blockly.Events.Ui(this.sourceBlock_,"itemSelected",void 0,e))},Blockly.FieldDropdown.prototype.trimOptions_=function(){this.suffixField=this.prefixField=null;var e=this.menuGenerator_;if(Array.isArray(e)){for(var t=!1,n=0;n<e.length;n++){var o=e[n][0];"string"==typeof o?e[n][0]=Blockly.utils.replaceMessageReferences(o):(null!=o.alt&&(e[n][0].alt=Blockly.utils.replaceMessageReferences(o.alt)),t=!0)}if(!(t||e.length<2)){for(var r=[],n=0;n<e.length;n++)r.push(e[n][0]);if(n=Blockly.utils.string.shortestStringLength(r),t=Blockly.utils.string.commonWordPrefix(r,n),o=Blockly.utils.string.commonWordSuffix(r,n),(t||o)&&!(n<=t+o)){for(t&&(this.prefixField=r[0].substring(0,t-1)),o&&(this.suffixField=r[0].substr(1-o)),r=[],n=0;n<e.length;n++){var i=e[n][0],s=e[n][1],i=i.substring(t,i.length-o);r[n]=[i,s]}this.menuGenerator_=r}}}},Blockly.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},Blockly.FieldDropdown.prototype.getOptions=function(e){return this.isOptionListDynamic()?(this.generatedOptions_&&e||(this.generatedOptions_=this.menuGenerator_.call(this),Blockly.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},Blockly.FieldDropdown.prototype.doClassValidation_=function(e){for(var t,n=!1,o=this.getOptions(!0),r=0;t=o[r];r++)if(t[1]==e){n=!0;break}return n||this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),e},Blockly.FieldDropdown.prototype.doValueUpdate_=function(e){Blockly.FieldDropdown.superClass_.doValueUpdate_.call(this,e),e=this.getOptions(!0);for(var t,n=0;t=e[n];n++)t[1]==this.value_&&(this.selectedOption_=t)},Blockly.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",this.sourceBlock_.style.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=this.sourceBlock_.style.colourSecondary:this.arrow_.style.fill=this.sourceBlock_.style.colourPrimary)},Blockly.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var e=this.selectedOption_&&this.selectedOption_[0];e&&"object"==typeof e?this.renderSelectedImage_(e):this.renderSelectedText_(),this.borderRect_&&(this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("width",this.size_.width))},Blockly.FieldDropdown.prototype.renderSelectedImage_=function(e){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",e.src),this.imageElement_.setAttribute("height",e.height),this.imageElement_.setAttribute("width",e.width);var t=Number(e.height),n=Number(e.width),o=!!this.borderRect_,r=(this.size_.height=Math.max(o?this.constants_.FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,t+Blockly.FieldDropdown.IMAGE_Y_PADDING),e=this.size_.height/2,o=o?this.constants_.FIELD_BORDER_RECT_X_PADDING:0,this.svgArrow_?this.positionSVGArrow_(n+o,e-this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Blockly.utils.dom.getFastTextWidth(this.arrow_,this.constants_.FIELD_TEXT_FONTSIZE,this.constants_.FIELD_TEXT_FONTWEIGHT,this.constants_.FIELD_TEXT_FONTFAMILY));this.size_.width=n+r+2*o,this.sourceBlock_.RTL?(n=o-1,this.imageElement_.setAttribute("x",o+r),this.textElement_.setAttribute("x",n)):(n=n+r+o+1,this.textElement_.setAttribute("text-anchor","end"),this.textElement_.setAttribute("x",n),this.imageElement_.setAttribute("x",o)),this.imageElement_.setAttribute("y",e-t/2)},Blockly.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),Blockly.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var e=!!this.borderRect_,t=(this.size_.height=Math.max(e?this.constants_.FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.constants_.FIELD_TEXT_HEIGHT),this.size_.height/2),n=Blockly.utils.dom.getFastTextWidth(this.textElement_,this.constants_.FIELD_TEXT_FONTSIZE,this.constants_.FIELD_TEXT_FONTWEIGHT,this.constants_.FIELD_TEXT_FONTFAMILY),e=e?this.constants_.FIELD_BORDER_RECT_X_PADDING:0,o=0;this.svgArrow_&&(o=this.positionSVGArrow_(n+e,t-this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=n+o+2*e,this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-e:e),this.textElement_.setAttribute("y",t),this.constants_.FIELD_TEXT_BASELINE_CENTER||this.textElement_.setAttribute("dy",this.constants_.FIELD_TEXT_BASELINE_Y-this.constants_.FIELD_TEXT_HEIGHT/2+this.constants_.FIELD_TEXT_Y_OFFSET)},Blockly.FieldDropdown.prototype.positionSVGArrow_=function(e,t){var n,o,r;return this.svgArrow_?(n=this.borderRect_?this.constants_.FIELD_BORDER_RECT_X_PADDING:0,o=this.constants_.FIELD_DROPDOWN_SVG_ARROW_PADDING,r=this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE,this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?n:e+o)+","+t+")"),r+o):0},Blockly.FieldDropdown.prototype.getText_=function(){var e;return this.selectedOption_?"object"==typeof(e=this.selectedOption_[0])?e.alt:e:null},Blockly.FieldDropdown.validateOptions_=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var t=!1,n=0;n<e.length;++n){var o=e[n];Array.isArray(o)?"string"!=typeof o[1]?(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option id must be a string. Found "+o[1]+" in: ",o)):o[0]&&"string"!=typeof o[0]&&"string"!=typeof o[0].src&&(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must have a string label or image description. Found"+o[0]+" in: ",o)):(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must be an array. Found: ",o))}if(t)throw TypeError("Found invalid FieldDropdown options.")},Blockly.FieldDropdown.prototype.onBlocklyAction=function(e){if(this.menu_){if(e===Blockly.navigation.ACTION_PREVIOUS)return this.menu_.highlightPrevious(),!0;if(e===Blockly.navigation.ACTION_NEXT)return this.menu_.highlightNext(),!0}return Blockly.FieldDropdown.superClass_.onBlocklyAction.call(this,e)},Blockly.fieldRegistry.register("field_dropdown",Blockly.FieldDropdown),Blockly.FieldIconMenu=function(e){this.icons_=e,Blockly.FieldIconMenu.superClass_.constructor.call(this,e[0].value),this.addArgType("iconmenu")},Blockly.utils.object.inherits(Blockly.FieldIconMenu,Blockly.Field),Blockly.FieldIconMenu.fromJson=function(e){return new Blockly.FieldIconMenu(e.options)},Blockly.FieldIconMenu.DROPDOWN_WIDTH=168,Blockly.FieldIconMenu.savedPrimary_=null,Blockly.FieldIconMenu.prototype.init=function(e){this.arrowX_=18,this.arrowY_=10,e.RTL&&(this.arrowX_=-this.arrowX_-12),this.arrowIcon_=Blockly.utils.dom.createSvgElement("image",{height:"12px",width:"12px",transform:"translate("+this.arrowX_+","+this.arrowY_+")"}),this.arrowIcon_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"dropdown-arrow.svg"),e.getSvgRoot().appendChild(this.arrowIcon_),Blockly.FieldIconMenu.superClass_.init.call(this,e)},Blockly.FieldIconMenu.prototype.CURSOR="default",Blockly.FieldIconMenu.prototype.setValue=function(e){null!==e&&e!==this.value_&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.Change(this.sourceBlock_,"field",this.name,this.value_,e)),this.value_=e,this.setParentFieldImage(this.getSrcForValue(this.value_)))},Blockly.FieldIconMenu.prototype.setParentFieldImage=function(e){if(this.sourceBlock_&&this.sourceBlock_.parentBlock_)for(var t,n=this.sourceBlock_.parentBlock_,o=0;t=n.inputList[o];o++)for(var r,i=0;r=t.fieldRow[i];i++)if(r instanceof Blockly.FieldImage)return void r.setValue(e)},Blockly.FieldIconMenu.prototype.getValue=function(){return this.value_},Blockly.FieldIconMenu.prototype.getSrcForValue=function(e){for(var t,n=0;t=this.icons_[n];n++)if(t.value===e)return t.src},Blockly.FieldIconMenu.prototype.showEditor_=function(){if(!Blockly.DropDownDiv.hideIfOwner(this)){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv();e.setAttribute("role","menu"),e.setAttribute("aria-haspopup","true");for(var t,n,o,r=0;t=this.icons_[r];r++)"placeholder"==t.type?((n=document.createElement("span")).setAttribute("class","blocklyDropDownPlaceholder"),n.style.width=t.width+"px",n.style.height=t.height+"px"):((n=document.createElement("button")).setAttribute("id",":"+r),n.setAttribute("role","menuitem"),n.setAttribute("class","blocklyDropDownButton"),n.title=t.alt,n.style.width=t.width+"px",n.style.height=t.height+"px",o=this.sourceBlock_.getColour(),t.value==this.getValue()&&(o=this.sourceBlock_.getColourTertiary(),n.setAttribute("aria-selected","true")),n.style.backgroundColor=o,n.style.borderColor=this.sourceBlock_.getColourTertiary(),Blockly.bindEvent_(n,"click",this,this.buttonClick_),Blockly.bindEvent_(n,"mouseup",this,this.buttonClick_),Blockly.bindEvent_(n,"mousedown",n,function(e){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),e.preventDefault()}),Blockly.bindEvent_(n,"mouseover",n,function(){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),e.setAttribute("aria-activedescendant",this.id)}),Blockly.bindEvent_(n,"mouseout",n,function(){this.setAttribute("class","blocklyDropDownButton"),e.removeAttribute("aria-activedescendant")}),(o=document.createElement("img")).src=t.src,n.setAttribute("data-value",t.value),o.setAttribute("data-value",t.value),n.appendChild(o)),e.appendChild(n);e.style.width=Blockly.FieldIconMenu.DROPDOWN_WIDTH+"px",Blockly.DropDownDiv.setColour(this.sourceBlock_.getColour(),this.sourceBlock_.getColourTertiary()),Blockly.DropDownDiv.setCategory(this.sourceBlock_.parentBlock_.getCategory()),this.savedPrimary_=this.sourceBlock_.getColour(),this.sourceBlock_.setColour(this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary()),r=this.sourceBlock_.workspace.scale,r=-Blockly.BlockSvg.MIN_BLOCK_Y*r-Blockly.BlockSvg.FIELD_Y_OFFSET*r,Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_,this.onHide_.bind(this),r)||this.arrowIcon_.setAttribute("transform","translate("+(this.arrowX_+Blockly.DropDownDiv.ARROW_SIZE/1.5+1)+","+(this.arrowY_+Blockly.DropDownDiv.ARROW_SIZE/1.5)+") rotate(180)")}},Blockly.FieldIconMenu.prototype.buttonClick_=function(e){e=e.target.getAttribute("data-value"),this.setValue(e),Blockly.DropDownDiv.hide()},Blockly.FieldIconMenu.prototype.onHide_=function(){this.sourceBlock_&&this.sourceBlock_.setColour(this.savedPrimary_,this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary()),Blockly.DropDownDiv.content_.removeAttribute("role"),Blockly.DropDownDiv.content_.removeAttribute("aria-haspopup"),Blockly.DropDownDiv.content_.removeAttribute("aria-activedescendant"),this.arrowIcon_.setAttribute("transform","translate("+this.arrowX_+","+this.arrowY_+")")},Blockly.fieldRegistry.register("field_iconmenu",Blockly.FieldIconMenu),Blockly.FieldLabelSerializable=function(e,t,n){Blockly.FieldLabelSerializable.superClass_.constructor.call(this,e,t,n)},Blockly.utils.object.inherits(Blockly.FieldLabelSerializable,Blockly.FieldLabel),Blockly.FieldLabelSerializable.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return new Blockly.FieldLabelSerializable(t,void 0,e)},Blockly.FieldLabelSerializable.prototype.EDITABLE=!1,Blockly.FieldLabelSerializable.prototype.SERIALIZABLE=!0,Blockly.fieldRegistry.register("field_label_serializable",Blockly.FieldLabelSerializable),Blockly.FieldImage=function(e,t,n,o,r,i,s){if(!e)throw Error("Src value of an image field is required");if(e=Blockly.utils.replaceMessageReferences(e),n=Number(Blockly.utils.replaceMessageReferences(n)),t=Number(Blockly.utils.replaceMessageReferences(t)),isNaN(n)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(n<=0||t<=0)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",Blockly.FieldImage.superClass_.constructor.call(this,e||"",null,s),s||(this.flipRtl_=!!i,this.altText_=Blockly.utils.replaceMessageReferences(o)||""),this.size_=new Blockly.utils.Size(t,n+Blockly.FieldImage.Y_PADDING),this.imageHeight_=n,this.clickHandler_=null,"function"==typeof r&&(this.clickHandler_=r),this.imageElement_=null},Blockly.utils.object.inherits(Blockly.FieldImage,Blockly.Field),Blockly.FieldImage.fromJson=function(e){return new Blockly.FieldImage(e.src,e.width,e.height,void 0,void 0,void 0,e)},Blockly.FieldImage.Y_PADDING=1,Blockly.FieldImage.prototype.EDITABLE=!1,Blockly.FieldImage.prototype.SERIALIZABLE=!1,Blockly.FieldImage.prototype.isDirty_=!1,Blockly.FieldImage.prototype.configure_=function(e){Blockly.FieldImage.superClass_.configure_.call(this,e),this.flipRtl_=!!e.flipRtl,this.altText_=Blockly.utils.replaceMessageReferences(e.alt)||""},Blockly.FieldImage.prototype.initView=function(){this.imageElement_=Blockly.utils.dom.createSvgElement("image",{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},Blockly.FieldImage.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:e},Blockly.FieldImage.prototype.doValueUpdate_=function(e){this.value_=e,this.imageElement_&&this.imageElement_.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},Blockly.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},Blockly.FieldImage.prototype.setAlt=function(e){e!=this.altText_&&(this.altText_=e||"",this.imageElement_)&&this.imageElement_.setAttribute("alt",this.altText_)},Blockly.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},Blockly.FieldImage.prototype.setOnClickHandler=function(e){this.clickHandler_=e},Blockly.FieldImage.prototype.getText_=function(){return this.altText_},Blockly.fieldRegistry.register("field_image",Blockly.FieldImage),Blockly.FieldTextDropdown=function(e,t,n,o){this.menuGenerator_=t,Blockly.FieldDropdown.prototype.trimOptions_.call(this),Blockly.FieldTextDropdown.superClass_.constructor.call(this,e,n,o),this.addArgType("textdropdown")},Blockly.utils.object.inherits(Blockly.FieldTextDropdown,Blockly.FieldTextInput),Blockly.FieldTextDropdown.fromJson=function(e){var t=new Blockly.FieldTextDropdown(e.text,e.options);return"boolean"==typeof e.spellcheck&&t.setSpellcheck(e.spellcheck),t},Blockly.FieldTextDropdown.DROPDOWN_SVG_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiM1NzVFNzUiLz48L3N2Zz4K",Blockly.FieldTextDropdown.prototype.initView=function(){Blockly.FieldTextDropdown.superClass_.initView.call(this),this.createSVGArrow_()},Blockly.FieldTextDropdown.prototype.updateSize_=function(){Blockly.FieldTextDropdown.superClass_.updateSize_.call(this);var e=this.positionSVGArrow_(this.size_.width,this.size_.height/2-this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE/2);this.size_.width+=e},Blockly.FieldTextDropdown.prototype.dispose=function(){this.mouseUpWrapper_&&(Blockly.unbindEvent_(this.mouseUpWrapper_),this.mouseUpWrapper_=null,Blockly.Touch.clearTouchIdentifier()),Blockly.FieldTextDropdown.superClass_.dispose.call(this)},Blockly.FieldTextDropdown.prototype.showEditor_=function(e){Blockly.FieldTextDropdown.superClass_.showEditor_.call(this,e,!1,Blockly.utils.userAgent.MOBILE||Blockly.utils.userAgent.ANDROID||Blockly.utils.userAgent.IPAD,!0,function(){this.dropDownOpen_||this.showDropdown_(),Blockly.Touch.clearTouchIdentifier()})},Blockly.FieldTextDropdown.prototype.isOptionListDynamic=Blockly.FieldDropdown.prototype.isOptionListDynamic,Blockly.FieldTextDropdown.prototype.getOptions=Blockly.FieldDropdown.prototype.getOptions,Blockly.FieldTextDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=Blockly.utils.dom.createSvgElement("image",{height:this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",Blockly.FieldTextDropdown.DROPDOWN_SVG_DATAURI)},Blockly.FieldTextDropdown.prototype.showDropdown_=Blockly.FieldDropdown.prototype.showEditor_,Blockly.FieldTextDropdown.prototype.dropdownCreate_=Blockly.FieldDropdown.prototype.dropdownCreate_,Blockly.FieldTextDropdown.prototype.dropdownDispose_=Blockly.FieldDropdown.prototype.dropdownDispose_,Blockly.FieldTextDropdown.prototype.positionSVGArrow_=Blockly.FieldDropdown.prototype.positionSVGArrow_,Blockly.FieldTextDropdown.prototype.handleMenuActionEvent_=Blockly.FieldDropdown.prototype.handleMenuActionEvent_,Blockly.FieldTextDropdown.prototype.onItemSelected_=function(e,t){null!==(e=t.getValue())&&(this.setValue(e),Blockly.WidgetDiv.hideIfOwner(this))},Blockly.fieldRegistry.register("field_textdropdown",Blockly.FieldTextDropdown),Blockly.FieldMultilineInput=function(e,t,n){Blockly.FieldMultilineInput.superClass_.constructor.call(this,e=null==e?"":e,t,n),this.textGroup_=null},Blockly.utils.object.inherits(Blockly.FieldMultilineInput,Blockly.FieldTextInput),Blockly.FieldMultilineInput.LINE_HEIGHT=20,Blockly.FieldMultilineInput.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return new Blockly.FieldMultilineInput(t,void 0,e)},Blockly.FieldMultilineInput.prototype.toXml=function(e){return e.textContent=this.getValue().replace(/\n/g,"&#10;"),e},Blockly.FieldMultilineInput.prototype.fromXml=function(e){this.setValue(e.textContent.replace(/&#10;/g,"\n"))},Blockly.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyEditableText"},this.fieldGroup_)},Blockly.FieldMultilineInput.prototype.getDisplayText_=function(){if(!(t=this.value_))return Blockly.Field.NBSP;for(var e=t.split("\n"),t="",n=0;n<e.length;n++){var o=e[n];t+=o=(o=o.length>this.maxDisplayLength?o.substring(0,this.maxDisplayLength-4)+"...":o).replace(/\s/g,Blockly.Field.NBSP),n!==e.length-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+=""),t},Blockly.FieldMultilineInput.prototype.render_=function(){for(;e=this.textGroup_.firstChild;)this.textGroup_.removeChild(e);for(var e=this.getDisplayText_().split("\n"),t=0,n=0;n<e.length;n++)Blockly.utils.dom.createSvgElement("text",{class:"blocklyText blocklyMultilineText",x:this.constants_.FIELD_BORDER_RECT_X_PADDING,y:t+this.constants_.FIELD_BORDER_RECT_Y_PADDING,dy:Blockly.FieldMultilineInput.LINE_HEIGHT/2},this.textGroup_).appendChild(document.createTextNode(e[n])),t+=Blockly.FieldMultilineInput.LINE_HEIGHT;this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(Blockly.utils.dom.removeClass(e,"blocklyInvalidInput"),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.INVALID,!1)):(Blockly.utils.dom.addClass(e,"blocklyInvalidInput"),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.INVALID,!0)))},Blockly.FieldMultilineInput.prototype.updateSize_=function(){for(var e=this.textGroup_.childNodes,t=0,n=0,o=0;o<e.length;o++){var r=Blockly.utils.dom.getTextWidth(e[o]);t<r&&(t=r),n+=Blockly.FieldMultilineInput.LINE_HEIGHT}this.borderRect_&&(t+=2*this.constants_.FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",t),this.borderRect_.setAttribute("height",n)),this.size_.width=t,this.size_.height=n},Blockly.FieldMultilineInput.prototype.resizeEditor_=function(){var e=Blockly.WidgetDiv.DIV,t=this.getScaledBBox();e.style.width=t.right-t.left+"px",e.style.height=t.bottom-t.top+"px",t=new Blockly.utils.Coordinate(this.sourceBlock_.RTL?t.right-e.offsetWidth:t.left,t.top),e.style.left=t.x+"px",e.style.top=t.y+"px"},Blockly.FieldMultilineInput.prototype.widgetCreate_=function(){var e=Blockly.WidgetDiv.DIV,t=this.workspace_.scale,n=document.createElement("textarea"),o=(n.className="blocklyHtmlInput blocklyHtmlTextAreaInput",n.setAttribute("spellcheck",this.spellcheck_),this.constants_.FIELD_TEXT_FONTSIZE*t+"pt");return e.style.fontSize=o,n.style.fontSize=o,n.style.borderRadius=Blockly.FieldTextInput.BORDERRADIUS*t+"px",o=this.constants_.FIELD_BORDER_RECT_X_PADDING*t,n.style.paddingLeft=o+"px",n.style.width="calc(100% - "+o+"px)",n.style.lineHeight=Blockly.FieldMultilineInput.LINE_HEIGHT*t+"px",e.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,Blockly.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(n),n},Blockly.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode!==Blockly.utils.KeyCodes.ENTER&&Blockly.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,e)},Blockly.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,}".split(",")),Blockly.fieldRegistry.register("field_multilinetext",Blockly.FieldMultilineInput),Blockly.FieldNumber=function(e,t,n,o,r,i){var s=this.getNumRestrictor(t,n,o);this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,Blockly.FieldNumber.superClass_.constructor.call(this,e||0,r,s,i),i||this.setConstraints(t,n,o),this.addArgType("number")},Blockly.utils.object.inherits(Blockly.FieldNumber,Blockly.FieldTextInput),Blockly.FieldNumber.fromJson=function(e){return new Blockly.FieldNumber(e.value,void 0,void 0,void 0,void 0,e)},Blockly.FieldNumber.prototype.SERIALIZABLE=!0,Blockly.FieldNumber.DROPDOWN_WIDTH=168,Blockly.FieldNumber.NUMPAD_BUTTONS="789456123.0- ".split(""),Blockly.FieldNumber.NUMPAD_DELETE_ICON="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40'%3E%3Cpath d='M28.89,11.45H16.79a2.86,2.86,0,0,0-2,.84L9.09,18a2.85,2.85,0,0,0,0,4l5.69,5.69a2.86,2.86,0,0,0,2,.84h12.1a2.86,2.86,0,0,0,2.86-2.86V14.31A2.86,2.86,0,0,0,28.89,11.45ZM27.15,22.73a1,1,0,0,1,0,1.41,1,1,0,0,1-.71.3,1,1,0,0,1-.71-0.3L23,21.41l-2.73,2.73a1,1,0,0,1-1.41,0,1,1,0,0,1,0-1.41L21.59,20l-2.73-2.73a1,1,0,0,1,0-1.41,1,1,0,0,1,1.41,0L23,18.59l2.73-2.73a1,1,0,1,1,1.42,1.41L24.42,20Z' fill='%23"+Blockly.Colours.numPadText.substr(1)+"'/%3E%3C/svg%3E",Blockly.FieldNumber.activeField_=null,Blockly.FieldNumber.prototype.getNumRestrictor=function(e,t,n){return this.setConstraints(e,t,n),e="[\\d]",this.decimalAllowed_&&(e+="|[\\.]"),this.negativeAllowed_&&(e+="|[-]"),new RegExp(e)},Blockly.FieldNumber.prototype.configure_=function(e){Blockly.FieldNumber.superClass_.configure_.call(this,e),this.setMinInternal_(e.min),this.setMaxInternal_(e.max),this.setPrecisionInternal_(e.precision)},Blockly.FieldNumber.prototype.setConstraints=function(e,t,n){this.decimalAllowed_=null==n||isNaN(n)||0==n||Math.floor(n)!=n,this.negativeAllowed_=null==e||isNaN(e)||e<0,this.setMinInternal_(e),this.setMaxInternal_(t),this.setPrecisionInternal_(n),this.setValue(this.getValue())},Blockly.FieldNumber.prototype.setMin=function(e){this.setMinInternal_(e),this.setValue(this.getValue())},Blockly.FieldNumber.prototype.setMinInternal_=function(e){null==e?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))},Blockly.FieldNumber.prototype.getMin=function(){return this.min_},Blockly.FieldNumber.prototype.setMax=function(e){this.setMaxInternal_(e),this.setValue(this.getValue())},Blockly.FieldNumber.prototype.setMaxInternal_=function(e){null==e?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))},Blockly.FieldNumber.prototype.getMax=function(){return this.max_},Blockly.FieldNumber.prototype.setPrecision=function(e){this.setPrecisionInternal_(e),this.setValue(this.getValue())},Blockly.FieldNumber.prototype.setPrecisionInternal_=function(e){null==e?this.precision_=0:(e=Number(e),isNaN(e)||(this.precision_=e));var t=this.precision_.toString(),n=t.indexOf(".");this.decimalPlaces_=-1==n?e?0:null:t.length-n-1},Blockly.FieldNumber.prototype.getPrecision=function(){return this.precision_},Blockly.FieldNumber.prototype.showEditor_=function(e,t){Blockly.FieldNumber.activeField_=this,t=void 0!==t?t:Blockly.utils.userAgent.MOBILE||Blockly.utils.userAgent.ANDROID||Blockly.utils.userAgent.IPAD,Blockly.FieldNumber.superClass_.showEditor_.call(this,e,t,t),t&&this.showNumPad_()},Blockly.FieldNumber.prototype.showNumPad_=function(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv(),t=(e.setAttribute("role","menu"),e.setAttribute("aria-haspopup","true"),this.addButtons_(e),this.sourceBlock_.parentBlock_?this.sourceBlock_.parentBlock_.getColour():Blockly.Colours.numPadBackground);Blockly.DropDownDiv.setColour(t,this.sourceBlock_.parentBlock_?this.sourceBlock_.parentBlock_.style.colourTertiary:Blockly.Colours.numPadBorder),e.style.width=Blockly.FieldNumber.DROPDOWN_WIDTH+"px",Blockly.DropDownDiv.showPositionedByField(this,this.onHide_.bind(this)),this.htmlInput_.select()},Blockly.FieldNumber.prototype.addButtons_=function(e){for(var t,n=this.sourceBlock_.parentBlock_?this.sourceBlock_.parentBlock_.getColour():Blockly.Colours.numPadBackground,o=(this.sourceBlock_.parentBlock_||this.sourceBlock_).style.colourTertiary,r=Blockly.FieldNumber.NUMPAD_BUTTONS,i=0;t=r[i];i++){var s=document.createElement("button");if(s.setAttribute("role","menuitem"),s.setAttribute("class","blocklyNumPadButton"),s.setAttribute("style","background:"+n+";border: 1px solid "+o+";"),s.title=t,s.innerHTML=t,Blockly.bindEvent_(s,"mousedown",this,this.numPadButtonTouch),"."!=t||this.decimalAllowed_){if("-"==t&&!this.negativeAllowed_)continue;if(" "==t&&!this.negativeAllowed_)continue;" "==t&&this.negativeAllowed_&&s.setAttribute("style","visibility: hidden")}else s.setAttribute("style","visibility: hidden");e.appendChild(s)}(r=document.createElement("button")).setAttribute("role","menuitem"),r.setAttribute("class","blocklyNumPadButton"),r.setAttribute("style","background:"+n+";border: 1px solid "+o+";"),r.title="Delete",(n=document.createElement("img")).src=Blockly.FieldNumber.NUMPAD_DELETE_ICON,r.appendChild(n),Blockly.bindEvent_(r,"mousedown",this,this.numPadEraseButtonTouch),e.appendChild(r)},Blockly.FieldNumber.prototype.numPadButtonTouch=function(e){var t=e.target.innerText,n=this.htmlInput_.value,o=this.htmlInput_.selectionStart,r=this.htmlInput_.selectionEnd,i=n.slice(0,o)+t+n.slice(r);this.updateDisplay_(i=0==r-o?n+t:i),Blockly.Touch.clearTouchIdentifier(),e.preventDefault()},Blockly.FieldNumber.prototype.numPadEraseButtonTouch=function(e){var t=this.htmlInput_.value,n=this.htmlInput_.selectionStart,o=this.htmlInput_.selectionEnd,r=t.slice(0,n)+t.slice(o);0==o-n&&(r=0==o?t.slice(0,t.length-1):t.slice(0,n-1)+t.slice(n)),this.updateDisplay_(r),Blockly.Touch.clearTouchIdentifier(),e.preventDefault()},Blockly.FieldNumber.prototype.updateDisplay_=function(e){this.htmlInput_.value=e,Blockly.FieldNumber.superClass_.resizeEditor_.call(this),this.htmlInput_.setSelectionRange(e.length,e.length),this.htmlInput_.scrollLeft=this.htmlInput_.scrollWidth,this.onHtmlInputChange_({})},Blockly.FieldNumber.prototype.onHide_=function(){Blockly.DropDownDiv.content_.removeAttribute("role"),Blockly.DropDownDiv.content_.removeAttribute("aria-haspopup")},Blockly.FieldNumber.prototype.doClassValidation_=function(e){return null===e||(e=(e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),e=null!=this.decimalPlaces_?Number(e.toFixed(this.decimalPlaces_)):e)},Blockly.FieldNumber.prototype.widgetCreate_=function(e,t,n){return e=Blockly.FieldNumber.superClass_.widgetCreate_.call(this,e,t,n),-1/0<this.min_&&Blockly.utils.aria.setState(e,Blockly.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&Blockly.utils.aria.setState(e,Blockly.utils.aria.State.VALUEMAX,this.max_),e},Blockly.fieldRegistry.register("field_number",Blockly.FieldNumber),Blockly.FieldNumberDropdown=function(e,t,n,o,r,i){this.setConstraints=Blockly.FieldNumber.prototype.setConstraints,this.setMinInternal_=Blockly.FieldNumber.prototype.setMinInternal_,this.setMaxInternal_=Blockly.FieldNumber.prototype.setMaxInternal_,this.setPrecisionInternal_=Blockly.FieldNumber.prototype.setPrecisionInternal_,n=Blockly.FieldNumber.prototype.getNumRestrictor.call(this,n,o,r),Blockly.FieldNumberDropdown.superClass_.constructor.call(this,e,t,i,n),this.addArgType("numberdropdown")},Blockly.utils.object.inherits(Blockly.FieldNumberDropdown,Blockly.FieldTextDropdown),Blockly.FieldNumberDropdown.fromJson=function(e){return new Blockly.FieldNumberDropdown(e.value,e.options,e.min,e.max,e.precision)},Blockly.FieldNumberDropdown.prototype.classValidator=Blockly.FieldNumber.prototype.classValidator,Blockly.fieldRegistry.register("field_numberdropdown",Blockly.FieldNumberDropdown),Blockly.FieldVariable=function(e,t,n,o,r){this.menuGenerator_=Blockly.FieldVariable.dropdownCreate,this.defaultVariableName=e||"",this.size_=new Blockly.utils.Size(0,0),r&&this.configure_(r),t&&this.setValidator(t),r||this.setTypes_(n,o)},Blockly.utils.object.inherits(Blockly.FieldVariable,Blockly.FieldDropdown),Blockly.FieldVariable.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.variable);return new Blockly.FieldVariable(t,void 0,void 0,void 0,e)},Blockly.FieldVariable.prototype.workspace_=null,Blockly.FieldVariable.prototype.SERIALIZABLE=!0,Blockly.FieldVariable.prototype.configure_=function(e){Blockly.FieldVariable.superClass_.configure_.call(this,e),this.setTypes_(e.variableTypes,e.defaultType)},Blockly.FieldVariable.prototype.initModel=function(){var e;this.variable_||(e=Blockly.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_),this.doValueUpdate_(e.getId()))},Blockly.FieldVariable.prototype.shouldAddBorderRect_=function(){return Blockly.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.constants_.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||!("variables_get"==this.sourceBlock_.type||"variables_get_reporter"==this.sourceBlock_.type))},Blockly.FieldVariable.prototype.fromXml=function(e){e.getAttribute("id");var t=e.textContent,n=e.getAttribute("variabletype")||e.getAttribute("variableType")||"",t=Blockly.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,t,n);if(null!=n&&n!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+Blockly.Xml.domToText(e)+".");this.setValue(t.getId())},Blockly.FieldVariable.prototype.toXml=function(e){return this.initModel(),e.id=this.variable_.getId(),e.textContent=this.variable_.name,this.variable_.type&&e.setAttribute("variabletype",this.variable_.type),e},Blockly.FieldVariable.prototype.setSourceBlock=function(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");Blockly.FieldVariable.superClass_.setSourceBlock.call(this,e)},Blockly.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},Blockly.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},Blockly.FieldVariable.prototype.getVariable=function(){return this.variable_},Blockly.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},Blockly.FieldVariable.prototype.doClassValidation_=function(e){var t;return null===e?null:(t=Blockly.Variables.getVariable(this.sourceBlock_.workspace,e))?(t=t.type,this.typeIsAllowed_(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)},Blockly.FieldVariable.prototype.doValueUpdate_=function(e){this.variable_=Blockly.Variables.getVariable(this.sourceBlock_.workspace,e),Blockly.FieldVariable.superClass_.doValueUpdate_.call(this,e)},Blockly.FieldVariable.prototype.typeIsAllowed_=function(e){var t=this.getVariableTypes_();if(!t)return!0;for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1},Blockly.FieldVariable.prototype.getVariableTypes_=function(){var e=this.variableTypes;if(null===e&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e},Blockly.FieldVariable.prototype.setTypes_=function(e,t){if(t=t||"",null==e)e=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var n=!1,o=0;o<e.length;o++)e[o]==t&&(n=!0);if(!n)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}this.defaultType_=t,this.variableTypes=e},Blockly.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var e=this.getText(),t=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var n=this.getVariableTypes_(),o=0;o<n.length;o++)var r=this.sourceBlock_.workspace.getVariablesOfType(n[o]),t=t.concat(r);for(t.sort(Blockly.VariableModel.compareByName),n=[],o=0;o<t.length;o++)n[o]=[t[o].name,t[o].getId()];return Blockly.Msg.NEW_VARIABLE_TYPE_DROPDOWN&&this.variable_.type?(n.push([Blockly.Msg.NEW_VARIABLE_TYPE_DROPDOWN.replace("%1",this.variable_.type),Blockly.CREATE_VARIABLE_ID]),n.push([void 0,"SEPARATOR"])):Blockly.Msg.NEW_VARIABLE_DROPDOWN&&(n.push([Blockly.Msg.NEW_VARIABLE_DROPDOWN,Blockly.CREATE_VARIABLE_ID]),n.push([void 0,"SEPARATOR"])),n.push([Blockly.Msg.RENAME_VARIABLE,Blockly.RENAME_VARIABLE_ID]),Blockly.Msg.DELETE_VARIABLE&&n.push([Blockly.Msg.DELETE_VARIABLE.replace("%1",e),Blockly.DELETE_VARIABLE_ID]),n},Blockly.FieldVariable.prototype.onItemSelected_=function(e,t){if(e=t.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(e==Blockly.RENAME_VARIABLE_ID)return void Blockly.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(e==Blockly.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());var n,o,r;if(e==Blockly.CREATE_VARIABLE_ID)return o=(n=this).sourceBlock_.workspace,r=o.getVariableById(this.getValue()).type,void Blockly.Variables.createVariableButtonHandler(o,function(e){e=o.getVariable(e,r),n.setValue(e.getId())},r)}this.setValue(e)},Blockly.FieldVariable.prototype.referencesVariables=function(){return!0},Blockly.fieldRegistry.register("field_variable",Blockly.FieldVariable),Blockly.FieldVerticalSeparator=function(){Blockly.FieldVerticalSeparator.superClass_.constructor.call(this)},Blockly.utils.object.inherits(Blockly.FieldVerticalSeparator,Blockly.Field),Blockly.FieldVerticalSeparator.fromJson=function(e){return new Blockly.FieldVerticalSeparator},Blockly.FieldVerticalSeparator.prototype.EDITABLE=!1,Blockly.FieldVerticalSeparator.prototype.initView=function(){var e=this.constants_.ICON_SEPARATOR_HEIGHT;this.lineElement_=Blockly.utils.dom.createSvgElement("line",{stroke:this.sourceBlock_.style.colourSecondary,"stroke-linecap":"round",x1:0,y1:0,x2:0,y2:e},this.fieldGroup_),this.size_=new Blockly.utils.Size(1,e),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_)},Blockly.FieldVerticalSeparator.prototype.setLineHeight=function(e){this.lineElement_.setAttribute("y2",e)},Blockly.FieldVerticalSeparator.prototype.dispose=function(){Blockly.utils.dom.removeNode(this.fieldGroup_),this.lineElement_=this.fieldGroup_=null},Blockly.FieldVerticalSeparator.prototype.getValue=function(){return null},Blockly.FieldVerticalSeparator.prototype.setValue=function(e){},Blockly.FieldVerticalSeparator.prototype.setText=function(e){},Blockly.FieldVerticalSeparator.prototype.render_=function(){},Blockly.FieldVerticalSeparator.prototype.updateWidth=function(){},Blockly.fieldRegistry.register("field_vertical_separator",Blockly.FieldVerticalSeparator),Blockly.FieldSlider=function(e,t,n,o,r,i,s){Blockly.FieldSlider.superClass_.constructor.call(this,e,null,null,null,s),this.setConstraints(t,n,o),this.step_=parseFloat(r)||void 0,this.labelText_=i},Blockly.utils.object.inherits(Blockly.FieldSlider,Blockly.FieldNumber),Blockly.FieldSlider.prototype.min_=null,Blockly.FieldSlider.prototype.max_=null,Blockly.FieldSlider.prototype.step_=null,Blockly.FieldSlider.prototype.precision_=null,Blockly.FieldSlider.prototype.labelText_=null,Blockly.FieldSlider.fromJson=function(e){return new Blockly.FieldSlider(e.value,e.min,e.max,e.precision,e.step,e.labelText)},Blockly.FieldSlider.prototype.setOptions=function(e,t,n,o){this.setConstraints(e,t,o),this.step_=parseFloat(n)||void 0,e=this.getNumRestrictor(this.min_,this.max_,this.precision_),this.setRestrictor(e)},Blockly.FieldSlider.prototype.setLabel=function(e){null!=e&&(this.labelText_=e)},Blockly.FieldSlider.prototype.setColor=function(e){null!=e&&(this.sliderColor_=e)},Blockly.FieldSlider.prototype.init=function(){Blockly.FieldTextInput.superClass_.init.call(this),this.setValue(this.getValue()),this.sourceBlock_.isEditable()&&(this.mouseOverWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseover",this,this.onMouseOver_),this.mouseOutWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseout",this,this.onMouseOut_))},Blockly.FieldSlider.prototype.showEditor_=function(e){Blockly.FieldSlider.superClass_.showEditor_.call(this,e),1/0!=this.max_&&-1/0!=this.min_&&(this.showSlider_(),this.setValue(this.getValue()))},Blockly.FieldSlider.prototype.showSlider_=function(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv();e.setAttribute("role","menu"),e.setAttribute("aria-haspopup","true"),this.addSlider_(e),Blockly.DropDownDiv.setColour("#ffffff","#dddddd"),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_),this.slider_&&this.slider_.setVisible(!0)},Blockly.FieldSlider.prototype.addSlider_=function(e){this.labelText_&&(t=this.createLabelDom_(this.labelText_),e.appendChild(t[0]),this.readout_=t[1]),this.slider_=new goog.ui.Slider,this.slider_.setMinimum(this.min_),this.slider_.setMaximum(this.max_),this.slider_.setMoveToPointEnabled(!this.step_),this.step_&&this.slider_.setBlockIncrement(this.step_),this.slider_.setRightToLeft(this.sourceBlock_.RTL),t=parseFloat(this.getValue()),t=isNaN(t)?0:t,this.slider_.setValue(t),this.slider_.render(e);var t,n=this;Blockly.FieldSlider.changeEventKey_=goog.events.listen(this.slider_,goog.ui.Component.EventType.CHANGE,function(e){var t;e=e.target.getValue()||0,null!==(e=n.sourceBlock_?n.callValidator(e):e)&&(n.setValue(e),t=n.htmlInput_)&&(t.value=e,t.focus())}),Blockly.FieldSlider.focusEventKey_=goog.events.listen(this.slider_.getElement(),goog.ui.Component.EventType.FOCUS,function(){n.htmlInput_.focus()})},Blockly.FieldSlider.prototype.createLabelDom_=function(e){var t=document.createElement("div"),n=(t.setAttribute("class","blocklyFieldSliderLabel"),document.createElement("span")),o=(n.setAttribute("class","blocklyFieldSliderReadout"),document.createElement("span"));return o.setAttribute("class","blocklyFieldSliderLabelText"),o.innerHTML=e,t.appendChild(o),t.appendChild(n),[t,n]},Blockly.FieldSlider.prototype.setValue=function(e){Blockly.FieldSlider.superClass_.setValue.call(this,e),this.updateSliderHandles_(),this.updateDom_()},Blockly.FieldSlider.prototype.updateDom_=function(){this.slider_&&this.readout_&&(this.setBackground_(this.slider_.getElement()),this.setReadout_(this.readout_,this.getValue()))},Blockly.FieldSlider.prototype.setBackground_=function(e){this.sliderColor_?goog.style.setStyle(e,"background",this.sliderColor_):this.sourceBlock_.isShadow()&&this.sourceBlock_.parentBlock_&&goog.style.setStyle(e,"background",this.sourceBlock_.parentBlock_.getColourTertiary())},Blockly.FieldSlider.prototype.setReadout_=function(e,t){e.innerHTML=t},Blockly.FieldSlider.prototype.updateSliderHandles_=function(){this.slider_&&this.slider_.setValue(parseFloat(this.getValue()))},Blockly.FieldSlider.prototype.onHtmlInputChange_=function(e){Blockly.FieldSlider.superClass_.onHtmlInputChange_.call(this,e),this.slider_&&this.slider_.setValue(parseFloat(this.getValue()))},Blockly.FieldSlider.prototype.dispose=function(){Blockly.FieldSlider.changeEventKey_&&goog.events.unlistenByKey(Blockly.FieldSlider.changeEventKey_),Blockly.FieldSlider.focusEventKey_&&goog.events.unlistenByKey(Blockly.FieldSlider.focusEventKey_),Blockly.Events.setGroup(!1),Blockly.FieldSlider.superClass_.dispose.call(this)},Blockly.fieldRegistry.register("field_slider",Blockly.FieldSlider),Blockly.FieldString=function(e,t,n){Blockly.FieldString.superClass_.constructor.call(this,e,t),this.setRestrictor(n),this.addArgType("text")},Blockly.utils.object.inherits(Blockly.FieldString,Blockly.FieldTextInput),Blockly.FieldString.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text),t=new Blockly.FieldString(t,e.class);return"boolean"==typeof e.spellcheck&&t.setSpellcheck(e.spellcheck),t},Blockly.FieldString.quotePadding=0,Blockly.FieldString.prototype.initView=function(){this.quoteSize_=16,this.quoteWidth_=8,this.quoteRightX_=this.quoteLeftX_=0,this.quoteY_=10,this.quoteLeft_&&this.quoteLeft_.parentNode.removeChild(this.quoteLeft_),this.quoteLeft_=Blockly.utils.dom.createSvgElement("text",{"font-size":this.quoteSize_+"px",class:"field-text-quote"},this.fieldGroup_),Blockly.FieldString.superClass_.initView.call(this),this.quoteRight_&&this.quoteRight_.parentNode.removeChild(this.quoteRight_),this.quoteRight_=Blockly.utils.dom.createSvgElement("text",{"font-size":this.quoteSize_+"px",class:"field-text-quote"},this.fieldGroup_),this.quoteLeft_.appendChild(document.createTextNode('"')),this.quoteRight_.appendChild(document.createTextNode('"')),this.mouseOverWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseover",this,this.onMouseOver_),this.mouseOutWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseout",this,this.onMouseOut_)},Blockly.FieldString.prototype.updateSize_=function(){Blockly.FieldString.superClass_.updateSize_.call(this);var e=this.value_?this.size_.width:1,t=this.positionLeft(e+3);this.textElement_.setAttribute("x",t),t+=this.positionRight(t+e+3),this.size_.width=e+t},Blockly.FieldString.prototype.positionLeft=function(e){return this.quoteLeft_?(this.quoteLeftX_=this.sourceBlock_.RTL?e+this.quoteWidth_+2*Blockly.FieldString.quotePadding:0,e=this.quoteWidth_+Blockly.FieldString.quotePadding,this.quoteLeft_.setAttribute("transform","translate("+this.quoteLeftX_+","+this.quoteY_+")"),e):0},Blockly.FieldString.prototype.positionRight=function(e){return this.quoteRight_?(this.quoteRightX_=this.sourceBlock_.RTL?Blockly.FieldString.quotePadding:e+Blockly.FieldString.quotePadding,e=this.quoteWidth_+Blockly.FieldString.quotePadding,this.quoteRight_.setAttribute("transform","translate("+this.quoteRightX_+","+this.quoteY_+")"),e):0},Blockly.fieldRegistry.register("field_string",Blockly.FieldString),Blockly.FieldArgumentEditor=function(e,t,n){Blockly.FieldArgumentEditor.superClass_.constructor.call(this,e,t,n)},Blockly.utils.object.inherits(Blockly.FieldArgumentEditor,Blockly.FieldTextInput),Blockly.FieldArgumentEditor.REMOVE_ARG_URI="data:image/svg+xml;charset=UTF-8,%3c?xml version='1.0' encoding='UTF-8' standalone='no'?%3e%3csvg width='20px' height='20px' viewBox='0 0 20 20' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3c!-- Generator: Sketch 48.1 (47250) - http://www.bohemiancoding.com/sketch --%3e%3ctitle%3edelete-argument v2%3c/title%3e%3cdesc%3eCreated with Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e%3cg id='delete-argument-v2' stroke='%23FF661A'%3e%3cg id='Group' transform='translate(3.000000, 2.500000)'%3e%3cpath d='M1,3 L13,3 L11.8900496,14.0995037 C11.8389294,14.6107055 11.4087639,15 10.8950124,15 L3.10498756,15 C2.59123611,15 2.16107055,14.6107055 2.10995037,14.0995037 L1,3 Z' id='Rectangle' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3c/path%3e%3cpath d='M7,11 L7,6' id='Line' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3c/path%3e%3cpath d='M9.5,11 L9.5,6' id='Line-Copy' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3c/path%3e%3cpath d='M4.5,11 L4.5,6' id='Line-Copy-2' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3c/path%3e%3crect id='Rectangle-2' fill='%23FF661A' x='0' y='2.5' width='14' height='1' rx='0.5'%3e%3c/rect%3e%3cpath d='M6,0 L8,0 C8.55228475,-1.01453063e-16 9,0.44771525 9,1 L9,3 L5,3 L5,1 C5,0.44771525 5.44771525,1.01453063e-16 6,0 Z' id='Rectangle-3' stroke-width='1.5'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Blockly.FieldArgumentEditor.prototype.showEditor_=function(){Blockly.FieldArgumentEditor.superClass_.showEditor_.call(this);var e,t=Blockly.WidgetDiv.DIV,n=(t.className+=" argumentEditorInput",document.createElement("img"));n.setAttribute("class","argumentEditorRemoveIcon"),n.setAttribute("src",Blockly.FieldArgumentEditor.REMOVE_ARG_URI),this.removeButtonMouseWrapper_=Blockly.bindEvent_(n,"mousedown",this,this.removeCallback_),t.appendChild(n),this.sourceBlock_&&this.sourceBlock_.typeName_&&(n=Blockly.PXTBlockly.FunctionUtils.getArgumentIcon(this.sourceBlock_.typeName_))&&(n+=" icon argumentEditorTypeIcon",(e=document.createElement("i")).className=n,t.appendChild(e))},Blockly.FieldArgumentEditor.prototype.removeCallback_=function(){this.sourceBlock_&&this.sourceBlock_.removeFieldCallback?this.sourceBlock_.removeFieldCallback(this):console.warn("Expected a source block with removeFieldCallback")},Blockly.FieldArgumentEditor.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text),t=new Blockly.FieldArgumentEditor(t,e.class);return"boolean"==typeof e.spellcheck&&t.setSpellcheck(e.spellcheck),t},Blockly.fieldRegistry.register("field_argument_editor",Blockly.FieldArgumentEditor),Blockly.utils.svgPaths={},Blockly.utils.svgPaths.point=function(e,t){return" "+e+","+t+" "},Blockly.utils.svgPaths.curve=function(e,t){return" "+e+t.join("")},Blockly.utils.svgPaths.moveTo=function(e,t){return" M "+e+","+t+" "},Blockly.utils.svgPaths.moveBy=function(e,t){return" m "+e+","+t+" "},Blockly.utils.svgPaths.lineTo=function(e,t){return" l "+e+","+t+" "},Blockly.utils.svgPaths.line=function(e){return" l"+e.join("")},Blockly.utils.svgPaths.lineOnAxis=function(e,t){return" "+e+" "+t+" "},Blockly.utils.svgPaths.arc=function(e,t,n,o){return e+" "+n+" "+n+" "+t+o},Blockly.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Blockly.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_HEIGHT=16,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_Y=Blockly.utils.userAgent.GECKO?12:13.09,this.FIELD_TEXT_Y_OFFSET=0,this.FIELD_TEXT_BASELINE_CENTER=!Blockly.utils.userAgent.IE&&!Blockly.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.FIELD_CHECKBOX_Y_OFFSET=14,this.FIELD_CHECKBOX_DEFAULT_WIDTH=15,this.randomIdentifier_=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.SHAPES={PUZZLE:1,NOTCH:2}},Blockly.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},Blockly.blockRendering.ConstantProvider.prototype.refreshTheme=function(e){for(var t in this.blockStyles={},e=e.blockStyles)this.blockStyles[t]=this.validatedBlockStyle_(e[t])},Blockly.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(e){var t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}},Blockly.blockRendering.ConstantProvider.prototype.getBlockStyle=function(e){return this.blockStyles[e||""]||this.createBlockStyle_("#000000")},Blockly.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(e){return this.validatedBlockStyle_({colourPrimary:e})},Blockly.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(e){var t={};return e&&Blockly.utils.object.mixin(t,e),e=Blockly.utils.parseBlockColour(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?Blockly.utils.parseBlockColour(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?Blockly.utils.parseBlockColour(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t},Blockly.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(e){return Blockly.utils.colour.blend("#fff",e,.6)||e},Blockly.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(e){return Blockly.utils.colour.blend("#fff",e,.3)||e},Blockly.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&Blockly.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&Blockly.utils.dom.removeNode(this.disabledPattern_)},Blockly.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH;return{height:e,width:t,path:Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(t,e/4),Blockly.utils.svgPaths.point(2*-t,e/2),Blockly.utils.svgPaths.point(t,e/4)])}},Blockly.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH;return{height:e,width:t,path:Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(30,-e),Blockly.utils.svgPaths.point(70,-e),Blockly.utils.svgPaths.point(t,0)])}},Blockly.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function e(e){var t=-(e=e?-1:1),n=2.5+(i=a/2),o=.5+i,r=Blockly.utils.svgPaths.point(-s,e*i),i=Blockly.utils.svgPaths.point(s,e*i);return Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(0,e*n),Blockly.utils.svgPaths.point(-s,t*o),r])+Blockly.utils.svgPaths.curve("s",[Blockly.utils.svgPaths.point(s,2.5*t),i])}var s=this.TAB_WIDTH,a=this.TAB_HEIGHT,t=e(!0),n=e(!1);return{type:this.SHAPES.PUZZLE,width:s,height:a,pathDown:n,pathUp:t}},Blockly.blockRendering.ConstantProvider.prototype.makeNotch=function(){function e(e){return Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(e*o,n),Blockly.utils.svgPaths.point(3*e,0),Blockly.utils.svgPaths.point(e*o,-n)])}var t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=(t-3)/2,r=e(1),i=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:n,pathLeft:r,pathRight:i}},Blockly.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:Blockly.utils.svgPaths.arc("a","0 0,0",e,Blockly.utils.svgPaths.point(-e,e)),pathBottom:Blockly.utils.svgPaths.arc("a","0 0,0",e,Blockly.utils.svgPaths.point(e,e))}},Blockly.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var e=this.CORNER_RADIUS,t=Blockly.utils.svgPaths.moveBy(0,e)+Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point(e,-e)),n=Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point(e,e)),o=Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point(-e,-e));return{topLeft:t,topRight:n,bottomRight:Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point(-e,e)),bottomLeft:o,rightHeight:e}},Blockly.blockRendering.ConstantProvider.prototype.shapeFor=function(e){switch(e.type){case Blockly.INPUT_VALUE:case Blockly.OUTPUT_VALUE:return this.PUZZLE_TAB;case Blockly.PREVIOUS_STATEMENT:case Blockly.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},Blockly.blockRendering.ConstantProvider.prototype.createDom=function(e){e=Blockly.utils.dom.createSvgElement("defs",{},e);var t=Blockly.utils.dom.createSvgElement("filter",{id:"blocklyEmbossFilter"+this.randomIdentifier_},e),n=(Blockly.utils.dom.createSvgElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:1,result:"blur"},t),Blockly.utils.dom.createSvgElement("feSpecularLighting",{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},t));Blockly.utils.dom.createSvgElement("fePointLight",{x:-5e3,y:-1e4,z:2e4},n),Blockly.utils.dom.createSvgElement("feComposite",{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},t),Blockly.utils.dom.createSvgElement("feComposite",{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},t),this.embossFilterId=t.id,this.embossFilter_=t,e=Blockly.utils.dom.createSvgElement("pattern",{id:"blocklyDisabledPattern"+this.randomIdentifier_,patternUnits:"userSpaceOnUse",width:10,height:10},e),Blockly.utils.dom.createSvgElement("rect",{width:10,height:10,fill:"#aaa"},e),Blockly.utils.dom.createSvgElement("path",{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern_=e},Blockly.blockRendering.ConstantProvider.prototype.injectCSS=function(e){var t,n=this.getCSS_(e);e="blockly-renderer-style-"+e,document.getElementById(e)||(t=n.join("\n"),(n=document.createElement("style")).id=e,e=document.createTextNode(t),n.appendChild(e),document.head.insertBefore(n,document.head.firstChild))},Blockly.blockRendering.ConstantProvider.prototype.getCSS_=function(e){return[(e="."+e+"-renderer")+" .blocklyText {","cursor: default;","fill: #fff;","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-size: "+this.FIELD_TEXT_FONTSIZE+"pt;","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",e+" .blocklyNonEditableText>rect,",e+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",e+" .blocklyNonEditableText>text,",e+" .blocklyEditableText>text {","fill: #000;","}",e+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",e+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",e+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",e+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",e+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",e+" .blocklyReplaceable .blocklyPathLight,",e+" .blocklyReplaceable .blocklyPathDark {","display: none;","}"]},Blockly.blockRendering.MarkerSvg=function(e,t,n){this.workspace_=e,this.marker_=n,this.parent_=null,this.constants_=t,this.currentMarkerSvg=null,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=n.colour||e},Blockly.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",Blockly.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",Blockly.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,Blockly.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},Blockly.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},Blockly.blockRendering.MarkerSvg.prototype.createDom=function(){var e=this.isCursor()?Blockly.blockRendering.MarkerSvg.CURSOR_CLASS:Blockly.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=Blockly.utils.dom.createSvgElement("g",{class:e},null),this.createDomInternal_(),this.svgGroup_},Blockly.blockRendering.MarkerSvg.prototype.setParent_=function(e){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent_=e},Blockly.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(e){var t,n,o,r,i;e&&(t=e.width,o=(n=e.height)*Blockly.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,r=this.constants_.CURSOR_BLOCK_PADDING,e.previousConnection?(i=this.constants_.shapeFor(e.previousConnection),this.positionPrevious_(t,r,o,i)):e.outputConnection?(i=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(t,n,i)):this.positionBlock_(t,r,o),this.setParent_(e),this.showCurrent_())},Blockly.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(e){var t=e.getWsCoordinate();e=t.x,t=t.y,this.workspace_.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,t,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},Blockly.blockRendering.MarkerSvg.prototype.showWithField_=function(e){var t=(e=e.getLocation()).getSize().width,n=e.getSize().height;this.positionRect_(0,0,t,n),this.setParent_(e),this.showCurrent_()},Blockly.blockRendering.MarkerSvg.prototype.showWithInput_=function(e){var t=(e=e.getLocation()).getSourceBlock();this.positionInput_(e),this.setParent_(t),this.showCurrent_()},Blockly.blockRendering.MarkerSvg.prototype.showWithNext_=function(e){e=(n=e.getLocation()).getSourceBlock();var t=0,n=n.getOffsetInBlock().y,o=e.getHeightWidth().width;this.workspace_.RTL&&(t=-o),this.positionLine_(t,n,o),this.setParent_(e),this.showCurrent_()},Blockly.blockRendering.MarkerSvg.prototype.showWithStack_=function(e){var t=(n=(e=e.getLocation()).getHeightWidth()).width+this.constants_.CURSOR_STACK_PADDING,n=n.height+this.constants_.CURSOR_STACK_PADDING,o=-this.constants_.CURSOR_STACK_PADDING/2,r=-this.constants_.CURSOR_STACK_PADDING/2,i=o;this.workspace_.RTL&&(i=-(t+o)),this.positionRect_(i,r,t,n),this.setParent_(e),this.showCurrent_()},Blockly.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},Blockly.blockRendering.MarkerSvg.prototype.positionBlock_=function(e,t,n){e=Blockly.utils.svgPaths.moveBy(-t,n)+Blockly.utils.svgPaths.lineOnAxis("V",-t)+Blockly.utils.svgPaths.lineOnAxis("H",e+2*t)+Blockly.utils.svgPaths.lineOnAxis("V",n),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},Blockly.blockRendering.MarkerSvg.prototype.positionInput_=function(e){var t=e.getOffsetInBlock().x,n=e.getOffsetInBlock().y;e=Blockly.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+t+","+n+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},Blockly.blockRendering.MarkerSvg.prototype.positionLine_=function(e,t,n){this.markerSvgLine_.setAttribute("x",e),this.markerSvgLine_.setAttribute("y",t),this.markerSvgLine_.setAttribute("width",n),this.currentMarkerSvg=this.markerSvgLine_},Blockly.blockRendering.MarkerSvg.prototype.positionOutput_=function(e,t,n){e=Blockly.utils.svgPaths.moveBy(e,0)+Blockly.utils.svgPaths.lineOnAxis("h",-(e-n.width))+Blockly.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+n.pathDown+Blockly.utils.svgPaths.lineOnAxis("V",t)+Blockly.utils.svgPaths.lineOnAxis("H",e),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},Blockly.blockRendering.MarkerSvg.prototype.positionPrevious_=function(e,t,n,o){e=Blockly.utils.svgPaths.moveBy(-t,n)+Blockly.utils.svgPaths.lineOnAxis("V",-t)+Blockly.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+o.pathLeft+Blockly.utils.svgPaths.lineOnAxis("H",e+2*t)+Blockly.utils.svgPaths.lineOnAxis("V",n),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},Blockly.blockRendering.MarkerSvg.prototype.positionRect_=function(e,t,n,o){this.markerSvgRect_.setAttribute("x",e),this.markerSvgRect_.setAttribute("y",t),this.markerSvgRect_.setAttribute("width",n),this.markerSvgRect_.setAttribute("height",o),this.currentMarkerSvg=this.markerSvgRect_},Blockly.blockRendering.MarkerSvg.prototype.flipRtl_=function(e){e.setAttribute("transform","scale(-1 1)")},Blockly.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},Blockly.blockRendering.MarkerSvg.prototype.draw=function(e,t){t?(this.showAtLocation_(t),this.firemarkerEvent_(e,t),void 0!==(e=this.currentMarkerSvg.childNodes[0])&&e.beginElement&&e.beginElement()):this.hide()},Blockly.blockRendering.MarkerSvg.prototype.showAtLocation_=function(e){e.getType()==Blockly.ASTNode.types.BLOCK?(e=e.getLocation(),this.showWithBlockPrevOutput_(e)):e.getType()==Blockly.ASTNode.types.OUTPUT?(e=e.getLocation().getSourceBlock(),this.showWithBlockPrevOutput_(e)):e.getLocation().type==Blockly.INPUT_VALUE?this.showWithInput_(e):e.getLocation().type==Blockly.NEXT_STATEMENT?this.showWithNext_(e):e.getType()==Blockly.ASTNode.types.PREVIOUS?(e=e.getLocation().getSourceBlock(),this.showWithBlockPrevOutput_(e)):e.getType()==Blockly.ASTNode.types.FIELD?this.showWithField_(e):e.getType()==Blockly.ASTNode.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()==Blockly.ASTNode.types.STACK&&this.showWithStack_(e)},Blockly.blockRendering.MarkerSvg.prototype.firemarkerEvent_=function(e,t){var n=t.getSourceBlock(),o=this.isCursor()?"cursorMove":"markerMove";e=new Blockly.Events.Ui(n,o,e,t),t.getType()==Blockly.ASTNode.types.WORKSPACE&&(e.workspaceId=t.getLocation().id),Blockly.Events.fire(e)},Blockly.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},Blockly.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){var e;return this.markerSvg_=Blockly.utils.dom.createSvgElement("g",{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=Blockly.utils.dom.createSvgElement("rect",{fill:this.colour_,width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none",stroke:this.colour_},this.markerSvg_),this.markerInput_=Blockly.utils.dom.createSvgElement("path",{transform:"",style:"display: none",fill:this.colour_},this.markerSvg_),this.markerBlock_=Blockly.utils.dom.createSvgElement("path",{transform:"",style:"display: none",fill:"none",stroke:this.colour_,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()&&(e=this.getBlinkProperties_(),Blockly.utils.dom.createSvgElement("animate",this.getBlinkProperties_(),this.markerSvgLine_),Blockly.utils.dom.createSvgElement("animate",e,this.markerInput_),e.attributeName="stroke",Blockly.utils.dom.createSvgElement("animate",e,this.markerBlock_)),this.markerSvg_},Blockly.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&Blockly.utils.dom.removeNode(this.svgGroup_)},Blockly.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},Blockly.blockRendering.Types.LEFT_CORNER=Blockly.blockRendering.Types.LEFT_SQUARE_CORNER|Blockly.blockRendering.Types.LEFT_ROUND_CORNER,Blockly.blockRendering.Types.RIGHT_CORNER=Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER|Blockly.blockRendering.Types.RIGHT_ROUND_CORNER,Blockly.blockRendering.Types.nextTypeValue_=16777216,Blockly.blockRendering.Types.getType=function(e){return Blockly.blockRendering.Types.hasOwnProperty(e)||(Blockly.blockRendering.Types[e]=Blockly.blockRendering.Types.nextTypeValue_,Blockly.blockRendering.Types.nextTypeValue_<<=1),Blockly.blockRendering.Types[e]},Blockly.blockRendering.Types.isField=function(e){return e.type&Blockly.blockRendering.Types.FIELD},Blockly.blockRendering.Types.isHat=function(e){return e.type&Blockly.blockRendering.Types.HAT},Blockly.blockRendering.Types.isIcon=function(e){return e.type&Blockly.blockRendering.Types.ICON},Blockly.blockRendering.Types.isSpacer=function(e){return e.type&Blockly.blockRendering.Types.SPACER},Blockly.blockRendering.Types.isInRowSpacer=function(e){return e.type&Blockly.blockRendering.Types.IN_ROW_SPACER},Blockly.blockRendering.Types.isInput=function(e){return e.type&Blockly.blockRendering.Types.INPUT},Blockly.blockRendering.Types.isExternalInput=function(e){return e.type&Blockly.blockRendering.Types.EXTERNAL_VALUE_INPUT},Blockly.blockRendering.Types.isInlineInput=function(e){return e.type&Blockly.blockRendering.Types.INLINE_INPUT},Blockly.blockRendering.Types.isStatementInput=function(e){return e.type&Blockly.blockRendering.Types.STATEMENT_INPUT},Blockly.blockRendering.Types.isPreviousConnection=function(e){return e.type&Blockly.blockRendering.Types.PREVIOUS_CONNECTION},Blockly.blockRendering.Types.isNextConnection=function(e){return e.type&Blockly.blockRendering.Types.NEXT_CONNECTION},Blockly.blockRendering.Types.isPreviousOrNextConnection=function(e){return e.type&(Blockly.blockRendering.Types.PREVIOUS_CONNECTION|Blockly.blockRendering.Types.NEXT_CONNECTION)},Blockly.blockRendering.Types.isLeftRoundedCorner=function(e){return e.type&Blockly.blockRendering.Types.LEFT_ROUND_CORNER},Blockly.blockRendering.Types.isRightRoundedCorner=function(e){return e.type&Blockly.blockRendering.Types.RIGHT_ROUND_CORNER},Blockly.blockRendering.Types.isLeftSquareCorner=function(e){return e.type&Blockly.blockRendering.Types.LEFT_SQUARE_CORNER},Blockly.blockRendering.Types.isRightSquareCorner=function(e){return e.type&Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER},Blockly.blockRendering.Types.isCorner=function(e){return e.type&Blockly.blockRendering.Types.CORNER},Blockly.blockRendering.Types.isJaggedEdge=function(e){return e.type&Blockly.blockRendering.Types.JAGGED_EDGE},Blockly.blockRendering.Types.isRow=function(e){return e.type&Blockly.blockRendering.Types.ROW};let iface;Blockly.blockRendering.Types.isBetweenRowSpacer=function(e){return e.type&Blockly.blockRendering.Types.BETWEEN_ROW_SPACER},Blockly.blockRendering.Types.isTopRow=function(e){return e.type&Blockly.blockRendering.Types.TOP_ROW},Blockly.blockRendering.Types.isBottomRow=function(e){return e.type&Blockly.blockRendering.Types.BOTTOM_ROW},Blockly.blockRendering.Types.isTopOrBottomRow=function(e){return e.type&(Blockly.blockRendering.Types.TOP_ROW|Blockly.blockRendering.Types.BOTTOM_ROW)},Blockly.blockRendering.Types.isInputRow=function(e){return e.type&Blockly.blockRendering.Types.INPUT_ROW},Blockly.blockRendering.Measurable=function(e){this.height=this.width=0,this.type=Blockly.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},Blockly.blockRendering.Connection=function(e,t){Blockly.blockRendering.Connection.superClass_.constructor.call(this,e),this.connectionModel=t,this.shape=this.constants_.shapeFor(t),this.isDynamicShape=!!this.shape.isDynamic,this.type|=Blockly.blockRendering.Types.CONNECTION},Blockly.utils.object.inherits(Blockly.blockRendering.Connection,Blockly.blockRendering.Measurable),Blockly.blockRendering.OutputConnection=function(e,t){Blockly.blockRendering.OutputConnection.superClass_.constructor.call(this,e,t),this.type|=Blockly.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},Blockly.utils.object.inherits(Blockly.blockRendering.OutputConnection,Blockly.blockRendering.Connection),Blockly.blockRendering.PreviousConnection=function(e,t){Blockly.blockRendering.PreviousConnection.superClass_.constructor.call(this,e,t),this.type|=Blockly.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},Blockly.utils.object.inherits(Blockly.blockRendering.PreviousConnection,Blockly.blockRendering.Connection),Blockly.blockRendering.NextConnection=function(e,t){Blockly.blockRendering.NextConnection.superClass_.constructor.call(this,e,t),this.type|=Blockly.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},Blockly.utils.object.inherits(Blockly.blockRendering.NextConnection,Blockly.blockRendering.Connection),Blockly.blockRendering.InputConnection=function(e,t){Blockly.blockRendering.InputConnection.superClass_.constructor.call(this,e,t.connection),this.type|=Blockly.blockRendering.Types.INPUT,this.input=t,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},Blockly.utils.object.inherits(Blockly.blockRendering.InputConnection,Blockly.blockRendering.Connection),Blockly.blockRendering.InlineInput=function(e,t){Blockly.blockRendering.InlineInput.superClass_.constructor.call(this,e,t),this.type|=Blockly.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},Blockly.utils.object.inherits(Blockly.blockRendering.InlineInput,Blockly.blockRendering.InputConnection),Blockly.blockRendering.StatementInput=function(e,t){Blockly.blockRendering.StatementInput.superClass_.constructor.call(this,e,t),this.type|=Blockly.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},Blockly.utils.object.inherits(Blockly.blockRendering.StatementInput,Blockly.blockRendering.InputConnection),Blockly.blockRendering.ExternalValueInput=function(e,t){Blockly.blockRendering.ExternalValueInput.superClass_.constructor.call(this,e,t),this.type|=Blockly.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},Blockly.utils.object.inherits(Blockly.blockRendering.ExternalValueInput,Blockly.blockRendering.InputConnection),Blockly.blockRendering.Icon=function(e,t){Blockly.blockRendering.Icon.superClass_.constructor.call(this,e),this.icon=t,this.isVisible=t.isVisible(),this.type|=Blockly.blockRendering.Types.ICON,e=t.getCorrectedSize(),this.height=e.height,this.width=e.width},Blockly.utils.object.inherits(Blockly.blockRendering.Icon,Blockly.blockRendering.Measurable),Blockly.blockRendering.JaggedEdge=function(e){Blockly.blockRendering.JaggedEdge.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},Blockly.utils.object.inherits(Blockly.blockRendering.JaggedEdge,Blockly.blockRendering.Measurable),Blockly.blockRendering.Field=function(e,t,n){Blockly.blockRendering.Field.superClass_.constructor.call(this,e),this.field=t,this.isEditable=t.isCurrentlyEditable(),this.flipRtl=t.getFlipRtl(),this.type|=Blockly.blockRendering.Types.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width,this.parentInput=n},Blockly.utils.object.inherits(Blockly.blockRendering.Field,Blockly.blockRendering.Measurable),Blockly.blockRendering.Hat=function(e){Blockly.blockRendering.Hat.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},Blockly.utils.object.inherits(Blockly.blockRendering.Hat,Blockly.blockRendering.Measurable),Blockly.blockRendering.SquareCorner=function(e,t){Blockly.blockRendering.SquareCorner.superClass_.constructor.call(this,e),this.type=(t&&"left"!=t?Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER:Blockly.blockRendering.Types.LEFT_SQUARE_CORNER)|Blockly.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},Blockly.utils.object.inherits(Blockly.blockRendering.SquareCorner,Blockly.blockRendering.Measurable),Blockly.blockRendering.RoundCorner=function(e,t){Blockly.blockRendering.RoundCorner.superClass_.constructor.call(this,e),this.type=(t&&"left"!=t?Blockly.blockRendering.Types.RIGHT_ROUND_CORNER:Blockly.blockRendering.Types.LEFT_ROUND_CORNER)|Blockly.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},Blockly.utils.object.inherits(Blockly.blockRendering.RoundCorner,Blockly.blockRendering.Measurable),Blockly.blockRendering.InRowSpacer=function(e,t){Blockly.blockRendering.InRowSpacer.superClass_.constructor.call(this,e),this.type=this.type|Blockly.blockRendering.Types.SPACER|Blockly.blockRendering.Types.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},Blockly.utils.object.inherits(Blockly.blockRendering.InRowSpacer,Blockly.blockRendering.Measurable),Blockly.blockRendering.Row=function(e){this.type=Blockly.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.isCollapsedStack=this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},Blockly.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},Blockly.blockRendering.Row.prototype.getLastInput=function(){for(var e,t=this.elements.length-1;e=this.elements[t];t--)if(Blockly.blockRendering.Types.isInput(e))return e;return null},Blockly.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},Blockly.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},Blockly.blockRendering.Row.prototype.getFirstSpacer=function(){for(var e,t=0;e=this.elements[t];t++)if(Blockly.blockRendering.Types.isSpacer(e))return e;return null},Blockly.blockRendering.Row.prototype.getLastSpacer=function(){for(var e,t=this.elements.length-1;e=this.elements[t];t--)if(Blockly.blockRendering.Types.isSpacer(e))return e;return null},Blockly.blockRendering.TopRow=function(e){Blockly.blockRendering.TopRow.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},Blockly.utils.object.inherits(Blockly.blockRendering.TopRow,Blockly.blockRendering.Row),Blockly.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(e){var t=(void 0!==e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,n=e.getPreviousBlock();return!!e.outputConnection||t||!!n&&n.getNextBlock()==e},Blockly.blockRendering.TopRow.prototype.hasRightSquareCorner=function(e){return!0},Blockly.blockRendering.TopRow.prototype.measure=function(){for(var e,t=0,n=0,o=0,r=0;e=this.elements[r];r++)n+=e.width,Blockly.blockRendering.Types.isSpacer(e)||(Blockly.blockRendering.Types.isHat(e)?o=Math.max(o,e.ascenderHeight):t=Math.max(t,e.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},Blockly.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},Blockly.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},Blockly.blockRendering.BottomRow=function(e){Blockly.blockRendering.BottomRow.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},Blockly.utils.object.inherits(Blockly.blockRendering.BottomRow,Blockly.blockRendering.Row),Blockly.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection||!!e.getNextBlock()},Blockly.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(e){return!0},Blockly.blockRendering.BottomRow.prototype.measure=function(){for(var e,t=0,n=0,o=0,r=0;e=this.elements[r];r++)n+=e.width,Blockly.blockRendering.Types.isSpacer(e)||(Blockly.blockRendering.Types.isNextConnection(e)?o=Math.max(o,e.height):t=Math.max(t,e.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},Blockly.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},Blockly.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},Blockly.blockRendering.SpacerRow=function(e,t,n){Blockly.blockRendering.SpacerRow.superClass_.constructor.call(this,e),this.type=this.type|Blockly.blockRendering.Types.SPACER|Blockly.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=n,this.height=t,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new Blockly.blockRendering.InRowSpacer(this.constants_,n)]},Blockly.utils.object.inherits(Blockly.blockRendering.SpacerRow,Blockly.blockRendering.Row),Blockly.blockRendering.SpacerRow.prototype.measure=function(){},Blockly.blockRendering.InputRow=function(e){Blockly.blockRendering.InputRow.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},Blockly.utils.object.inherits(Blockly.blockRendering.InputRow,Blockly.blockRendering.Row),Blockly.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var e,t=0,n=0;e=this.elements[n];n++)this.width+=e.width,Blockly.blockRendering.Types.isInput(e)&&(Blockly.blockRendering.Types.isStatementInput(e)?t+=e.connectedBlockWidth:Blockly.blockRendering.Types.isExternalInput(e)&&0!=e.connectedBlockWidth&&(t+=e.connectedBlockWidth-e.connectionWidth)),Blockly.blockRendering.Types.isSpacer(e)||(this.height=Math.max(this.height,e.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},Blockly.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},Blockly.blockRendering.RenderInfo=function(e,t){this.block_=t,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new Blockly.blockRendering.OutputConnection(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRowNum_=1,this.hiddenIcons=[],this.topRow=new Blockly.blockRendering.TopRow(this.constants_),this.bottomRow=new Blockly.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},Blockly.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},Blockly.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},Blockly.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var e=new Blockly.blockRendering.InputRow(this.constants_),t=this.block_.getIcons();if(t.length)for(var n,o=0;n=t[o];o++){var r=new Blockly.blockRendering.Icon(this.constants_,n);(this.isCollapsed&&n.collapseHidden?this.hiddenIcons:e.elements).push(r)}for(n=null,o=0;t=this.block_.inputList[o];o++)if(t.isVisible()){for(this.shouldStartNewRow_(t,n)&&(this.rows.push(e),e=new Blockly.blockRendering.InputRow(this.constants_),this.inputRowNum_++),n=0;r=t.fieldRow[n];n++)e.elements.push(new Blockly.blockRendering.Field(this.constants_,r,t));this.addInput_(t,e),n=t}this.isCollapsed&&(this.block_.inputList.find(function(e){return e.type==Blockly.NEXT_STATEMENT})?e=this.addCollapsedRow_(e):(e.hasJaggedEdge=!0,e.elements.push(new Blockly.blockRendering.JaggedEdge(this.constants_)))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)},Blockly.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var e=!!this.block_.previousConnection,t=(void 0!==this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;this.topRow.hasLeftSquareCorner(this.block_)?this.topRow.elements.push(new Blockly.blockRendering.SquareCorner(this.constants_)):this.topRow.elements.push(new Blockly.blockRendering.RoundCorner(this.constants_)),t?(e=new Blockly.blockRendering.Hat(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Blockly.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type==Blockly.NEXT_STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,this.topRow.hasRightSquareCorner(this.block_)?this.topRow.elements.push(new Blockly.blockRendering.SquareCorner(this.constants_,"right")):this.topRow.elements.push(new Blockly.blockRendering.RoundCorner(this.constants_,"right"))},Blockly.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&(this.block_.inputList[this.block_.inputList.length-1].type==Blockly.NEXT_STATEMENT||this.rows[this.rows.length-1].isCollapsedStack)?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Blockly.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new Blockly.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Blockly.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Blockly.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new Blockly.blockRendering.RoundCorner(this.constants_,"right"))},Blockly.blockRendering.RenderInfo.prototype.addInput_=function(e,t){this.isInline&&e.type==Blockly.INPUT_VALUE?(t.elements.push(new Blockly.blockRendering.InlineInput(this.constants_,e)),t.hasInlineInput=!0):e.type==Blockly.NEXT_STATEMENT?(t.elements.push(new Blockly.blockRendering.StatementInput(this.constants_,e)),t.hasStatement=!0):e.type==Blockly.INPUT_VALUE?(t.elements.push(new Blockly.blockRendering.ExternalValueInput(this.constants_,e)),t.hasExternalInput=!0):e.type==Blockly.DUMMY_INPUT&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),null==t.align&&(t.align=e.align)},Blockly.blockRendering.RenderInfo.prototype.addCollapsedRow_=function(e){},Blockly.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(e,t){return!(!t||e.type!=Blockly.NEXT_STATEMENT&&t.type!=Blockly.NEXT_STATEMENT&&(e.type!=Blockly.INPUT_VALUE&&e.type!=Blockly.DUMMY_INPUT||this.isInline))},Blockly.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var e,t=0;e=this.rows[t];t++){var n=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(var o=0;o<n.length-1;o++){e.elements.push(n[o]);var r=this.getInRowSpacing_(n[o],n[o+1]);e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,r))}e.elements.push(n[n.length-1]),e.endsWithElemSpacer()&&e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(n[n.length-1],null)))}}},Blockly.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(e,t){if(!e&&t&&Blockly.blockRendering.Types.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&Blockly.blockRendering.Types.isInput(e)&&!t){if(Blockly.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(Blockly.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}return e&&Blockly.blockRendering.Types.isLeftSquareCorner(e)&&t&&(Blockly.blockRendering.Types.isPreviousConnection(t)||Blockly.blockRendering.Types.isNextConnection(t))?t.notchOffset:e&&Blockly.blockRendering.Types.isLeftRoundedCorner(e)&&t&&(Blockly.blockRendering.Types.isPreviousConnection(t)||Blockly.blockRendering.Types.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},Blockly.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var e,t,n=0,o=0,r=0,i=0;e=this.rows[i];i++)e.measure(),o=Math.max(o,e.width),e.hasStatement&&(t=e.getLastInput(),n=Math.max(n,e.width-t.width)),r=Math.max(r,e.widthWithConnectedBlocks);for(this.statementEdge=n,this.width=o,i=0;e=this.rows[i];i++)e.hasStatement&&(e.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(o,r),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},Blockly.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var e,t,n=0;e=this.rows[n];n++)e.hasStatement?this.alignStatementRow_(e):(t=e.width,0<(t=this.getDesiredRowWidth_(e)-t)&&this.addAlignmentPadding_(e,t))},Blockly.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.width-this.startX},Blockly.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(e,t){var n=e.getFirstSpacer(),o=e.getLastSpacer();(e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align==Blockly.ALIGN_LEFT?o.width+=t:e.align==Blockly.ALIGN_CENTRE?(n.width+=t/2,o.width+=t/2):e.align==Blockly.ALIGN_RIGHT?n.width+=t:o.width+=t,e.width+=t},Blockly.blockRendering.RenderInfo.prototype.alignStatementRow_=function(e){var t,n=e.getLastInput(),o=e.width-n.width;0<(o=this.statementEdge-o)&&this.addAlignmentPadding_(e,o),o=e.width,t=this.getDesiredRowWidth_(e),n.width+=t-o,n.height=Math.max(n.height,e.height),e.width+=t-o,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)},Blockly.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var e=this.rows;this.rows=[];for(var t=0;t<e.length;t++)this.rows.push(e[t]),t!=e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))},Blockly.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(e,t){var n=this.getSpacerRowHeight_(e,t),o=this.getSpacerRowWidth_(e,t),n=new Blockly.blockRendering.SpacerRow(this.constants_,n,o);return e.hasStatement&&(n.followsStatement=!0),t.hasStatement&&(n.precedesStatement=!0),n},Blockly.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(e,t){return this.width-this.startX},Blockly.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(e,t){return this.constants_.MEDIUM_PADDING},Blockly.blockRendering.RenderInfo.prototype.getElemCenterline_=function(e,t){return Blockly.blockRendering.Types.isSpacer(t)?e.yPos+t.height/2:Blockly.blockRendering.Types.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,Blockly.blockRendering.Types.isNextConnection(t)?e+t.height/2:e-t.height/2):Blockly.blockRendering.Types.isTopRow(e)?Blockly.blockRendering.Types.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2},Blockly.blockRendering.RenderInfo.prototype.recordElemPositions_=function(e){for(var t,n=e.xPos,o=0;t=e.elements[o];o++)Blockly.blockRendering.Types.isSpacer(t)&&(t.height=e.height),t.xPos=n,t.centerline=this.getElemCenterline_(e,t),n+=t.width},Blockly.blockRendering.RenderInfo.prototype.finalize_=function(){for(var e,t=0,n=0,o=0;e=this.rows[o];o++)e.yPos=n,e.xPos=this.startX,n+=e.height,t=Math.max(t,e.widthWithConnectedBlocks),this.recordElemPositions_(e);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=Math.max(this.widthWithChildren,t+this.startX),this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},Blockly.blockRendering.Drawer=function(e,t){this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=t.getRenderer().getConstants()},Blockly.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),Blockly.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},Blockly.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},Blockly.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var e,t=0;e=this.info_.hiddenIcons[t];t++)e.icon.iconGroup_.setAttribute("display","none")},Blockly.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var e=1;e<this.info_.rows.length-1;e++){var t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.isCollapsedStack?this.drawCollapsedStack_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()},Blockly.blockRendering.Drawer.prototype.drawTop_=function(){var e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=Blockly.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var n,o=0;n=t[o];o++)Blockly.blockRendering.Types.isLeftRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:Blockly.blockRendering.Types.isRightRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:Blockly.blockRendering.Types.isPreviousConnection(n)?this.outlinePath_+=n.shape.pathLeft:Blockly.blockRendering.Types.isHat(n)?this.outlinePath_+=this.constants_.START_HAT.path:Blockly.blockRendering.Types.isSpacer(n)&&(this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("h",n.width));this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("v",e.height)},Blockly.blockRendering.Drawer.prototype.drawJaggedEdge_=function(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+Blockly.utils.svgPaths.lineOnAxis("v",e.height-this.constants_.JAGGED_TEETH.height)},Blockly.blockRendering.Drawer.prototype.drawValueInput_=function(e){var t=e.getLastInput(),n=(this.positionExternalValueConnection_(e),"function"==typeof t.shape.pathDown?t.shape.pathDown(t.height):t.shape.pathDown);this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+n+Blockly.utils.svgPaths.lineOnAxis("v",e.height-t.connectionHeight)},Blockly.blockRendering.Drawer.prototype.drawStatementInput_=function(e){var t=(n=e.getLastInput()).xPos+n.notchOffset+n.shape.width,n=n.shape.pathRight+Blockly.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,o=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("H",t)+n+Blockly.utils.svgPaths.lineOnAxis("v",o)+this.constants_.INSIDE_CORNERS.pathBottom+Blockly.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},Blockly.blockRendering.Drawer.prototype.drawCollapsedStack_=function(e){},Blockly.blockRendering.Drawer.prototype.drawRightSideRow_=function(e){this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},Blockly.blockRendering.Drawer.prototype.drawBottom_=function(){var e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();for(var n,o=0,r="",i=t.length-1;n=t[i];i--)Blockly.blockRendering.Types.isNextConnection(n)?r+=n.shape.pathRight:Blockly.blockRendering.Types.isLeftSquareCorner(n)?r+=Blockly.utils.svgPaths.lineOnAxis("H",e.xPos):Blockly.blockRendering.Types.isLeftRoundedCorner(n)?r+=this.constants_.OUTSIDE_CORNERS.bottomLeft:Blockly.blockRendering.Types.isRightRoundedCorner(n)?(r+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):Blockly.blockRendering.Types.isSpacer(n)&&(r+=Blockly.utils.svgPaths.lineOnAxis("h",-1*n.width));this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",e.baseline-o),this.outlinePath_+=r},Blockly.blockRendering.Drawer.prototype.drawLeft_=function(){var e,t=this.info_.outputConnection;this.positionOutputConnection_(),t&&(e=t.connectionOffsetY+t.height,t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",e)+t),this.outlinePath_+="z"},Blockly.blockRendering.Drawer.prototype.drawInternals_=function(){for(var e,t=0;e=this.info_.rows[t];t++)for(var n,o=0;n=e.elements[o];o++)Blockly.blockRendering.Types.isInlineInput(n)?this.drawInlineInput_(n):(Blockly.blockRendering.Types.isIcon(n)||Blockly.blockRendering.Types.isField(n))&&this.layoutField_(n)},Blockly.blockRendering.Drawer.prototype.layoutField_=function(e){Blockly.blockRendering.Types.isField(e)?t=e.field.getSvgRoot():Blockly.blockRendering.Types.isIcon(e)&&(t=e.icon.iconGroup_);var t,n=e.centerline-e.height/2,o=e.xPos,r="";this.info_.RTL&&(o=-(o+e.width),e.flipRtl)&&(o+=e.width,r="scale(-1 1)"),Blockly.blockRendering.Types.isIcon(e)?(t.setAttribute("display","block"),t.setAttribute("transform","translate("+o+","+n+")"),e.icon.computeIconLocation()):t.setAttribute("transform","translate("+o+","+n+")"+r),this.info_.isInsertionMarker&&t.setAttribute("display","none")},Blockly.blockRendering.Drawer.prototype.drawInlineInput_=function(e){var t=e.width,n=e.height,o=e.connectionOffsetY,r=e.connectionHeight+o;this.inlinePath_+=Blockly.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-n/2)+Blockly.utils.svgPaths.lineOnAxis("v",o)+e.shape.pathDown+Blockly.utils.svgPaths.lineOnAxis("v",n-r)+Blockly.utils.svgPaths.lineOnAxis("h",t-e.connectionWidth)+Blockly.utils.svgPaths.lineOnAxis("v",-n)+"z",this.positionInlineInputConnection_(e)},Blockly.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(e){var t,n=e.centerline-e.height/2;e.connectionModel&&(t=e.xPos+e.connectionWidth+e.connectionOffsetX,this.info_.RTL&&(t*=-1),e.connectionModel.setOffsetInBlock(t,n+e.connectionOffsetY))},Blockly.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(e){var t,n=e.getLastInput();n.connectionModel&&(t=e.xPos+e.statementEdge+n.notchOffset,this.info_.RTL&&(t*=-1),n.connectionModel.setOffsetInBlock(t,e.yPos))},Blockly.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(e){var t,n=e.getLastInput();n.connectionModel&&(t=e.xPos+e.width,this.info_.RTL&&(t*=-1),n.connectionModel.setOffsetInBlock(t,e.yPos))},Blockly.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var e,t=this.info_.topRow;t.connection&&(e=t.xPos+t.notchOffset,t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-e:e,0))},Blockly.blockRendering.Drawer.prototype.positionNextConnection_=function(){var e,t,n=this.info_.bottomRow;n.connection&&(t=(e=n.connection).xPos,e.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,n.baseline))},Blockly.blockRendering.Drawer.prototype.positionOutputConnection_=function(){var e;this.info_.outputConnection&&(e=this.info_.startX+this.info_.outputConnection.connectionOffsetX,this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY))},Blockly.blockRendering.PathObject=function(e,t,n){this.constants_=n,this.svgRoot=e,this.svgPath=Blockly.utils.dom.createSvgElement("path",{class:"blocklyPath"},this.svgRoot),this.style=t,this.markerSvg_=this.cursorSvg_=null},Blockly.blockRendering.PathObject.prototype.setPath=function(e){this.svgPath.setAttribute("d",e)},Blockly.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},Blockly.blockRendering.PathObject.prototype.setCursorSvg=function(e){e?(this.svgRoot.appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},Blockly.blockRendering.PathObject.prototype.setMarkerSvg=function(e){e?(this.cursorSvg_?this.svgRoot.insertBefore(e,this.cursorSvg_):this.svgRoot.appendChild(e),this.markerSvg_=e):this.markerSvg_=null},Blockly.blockRendering.PathObject.prototype.applyColour=function(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())},Blockly.blockRendering.PathObject.prototype.setStyle=function(e){this.style=e},Blockly.blockRendering.PathObject.prototype.setClass_=function(e,t){t?Blockly.utils.dom.addClass(this.svgRoot,e):Blockly.utils.dom.removeClass(this.svgRoot,e)},Blockly.blockRendering.PathObject.prototype.updateHighlighted=function(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants_.embossFilterId+")"):this.svgPath.setAttribute("filter","none")},Blockly.blockRendering.PathObject.prototype.updateShadow_=function(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},Blockly.blockRendering.PathObject.prototype.updateDisabled_=function(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants_.disabledPatternId+")")},Blockly.blockRendering.PathObject.prototype.updateSelected=function(e){this.setClass_("blocklySelected",e)},Blockly.blockRendering.PathObject.prototype.updateDraggingDelete=function(e){this.setClass_("blocklyDraggingDelete",e)},Blockly.blockRendering.PathObject.prototype.updateInsertionMarker=function(e){this.setClass_("blocklyInsertionMarker",e)},Blockly.blockRendering.PathObject.prototype.updateMovable=function(e){this.setClass_("blocklyDraggable",e)},Blockly.blockRendering.PathObject.prototype.updateReplacementHighlight=function(e){this.setClass_("blocklyReplaceable",e)},Blockly.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(e,t){},Blockly.blockRendering.Renderer=function(e){this.name=e,this.constants_=null},Blockly.blockRendering.Renderer.prototype.init=function(){this.constants_=this.makeConstants_(),this.constants_.init()},Blockly.blockRendering.Renderer.prototype.makeConstants_=function(){return new Blockly.blockRendering.ConstantProvider},Blockly.blockRendering.Renderer.prototype.makeRenderInfo_=function(e){return new Blockly.blockRendering.RenderInfo(this,e)},Blockly.blockRendering.Renderer.prototype.makeDrawer_=function(e,t){return new Blockly.blockRendering.Drawer(e,t)},Blockly.blockRendering.Renderer.prototype.makeDebugger_=function(){if(Blockly.blockRendering.Debug)return new Blockly.blockRendering.Debug;throw Error("Missing require for Blockly.blockRendering.Debug")},Blockly.blockRendering.Renderer.prototype.makeMarkerDrawer=function(e,t){return new Blockly.blockRendering.MarkerSvg(e,this.getConstants(),t)},Blockly.blockRendering.Renderer.prototype.makePathObject=function(e,t){return new Blockly.blockRendering.PathObject(e,t,this.constants_)},Blockly.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},Blockly.blockRendering.Renderer.prototype.shouldHighlightConnection=function(e){return!0},Blockly.blockRendering.Renderer.prototype.shouldInsertDraggedBlock=function(e,t){return!t.isConnected()||!!Blockly.Connection.lastConnectionInRow(e,t.targetConnection.getSourceBlock())},Blockly.blockRendering.Renderer.prototype.render=function(e){Blockly.blockRendering.useDebugger&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());var t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()},Blockly.geras={},Blockly.geras.ConstantProvider=function(){Blockly.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30},Blockly.utils.object.inherits(Blockly.geras.ConstantProvider,Blockly.blockRendering.ConstantProvider),Blockly.geras.Highlighter=function(e){this.info_=e,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},Blockly.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},Blockly.geras.Highlighter.prototype.drawTopCorner=function(e){this.steps_+=Blockly.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var t,n=0;t=e.elements[n];n++)Blockly.blockRendering.Types.isLeftSquareCorner(t)?this.steps_+=this.highlightConstants_.START_POINT:Blockly.blockRendering.Types.isLeftRoundedCorner(t)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):Blockly.blockRendering.Types.isPreviousConnection(t)?this.steps_+=this.notchPaths_.pathLeft:Blockly.blockRendering.Types.isHat(t)?this.steps_+=this.startPaths_.path(this.RTL_):Blockly.blockRendering.Types.isSpacer(t)&&0!=t.width&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_));this.steps_+=Blockly.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.highlightOffset_)},Blockly.geras.Highlighter.prototype.drawJaggedEdge_=function(e){this.info_.RTL&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis("H",e.width-this.highlightOffset_),this.steps_+=this.jaggedTeethPaths_.pathLeft,this.steps_+=Blockly.utils.svgPaths.lineOnAxis("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},Blockly.geras.Highlighter.prototype.drawValueInput=function(e){var t,n=e.getLastInput();this.RTL_?(t=e.height-n.connectionHeight,this.steps_+=Blockly.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+Blockly.utils.svgPaths.lineOnAxis("v",t)):this.steps_+=Blockly.utils.svgPaths.moveTo(n.xPos+n.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},Blockly.geras.Highlighter.prototype.drawStatementInput=function(e){var t,n=e.getLastInput();this.RTL_?(t=e.height-2*this.insideCornerPaths_.height,this.steps_+=Blockly.utils.svgPaths.moveTo(n.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+Blockly.utils.svgPaths.lineOnAxis("v",t)+this.insideCornerPaths_.pathBottom(this.RTL_)+Blockly.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)):this.steps_+=Blockly.utils.svgPaths.moveTo(n.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Blockly.utils.svgPaths.lineTo(e.width-n.xPos-this.insideCornerPaths_.width,0)},Blockly.geras.Highlighter.prototype.drawRightSideRow=function(e){var t=e.xPos+e.width-this.highlightOffset_;e.followsStatement&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis("H",t)),this.RTL_&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis("H",t),e.height>this.highlightOffset_)&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis("V",e.yPos+e.height-this.highlightOffset_))},Blockly.geras.Highlighter.prototype.drawBottomRow=function(e){var t;this.RTL_?this.steps_+=Blockly.utils.svgPaths.lineOnAxis("V",e.baseline-this.highlightOffset_):(t=this.info_.bottomRow.elements[0],Blockly.blockRendering.Types.isLeftSquareCorner(t)?this.steps_+=Blockly.utils.svgPaths.moveTo(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):Blockly.blockRendering.Types.isLeftRoundedCorner(t)&&(this.steps_+=Blockly.utils.svgPaths.moveTo(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft()))},Blockly.geras.Highlighter.prototype.drawLeft=function(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=Blockly.utils.svgPaths.moveTo(this.info_.startX,e):(this.steps_+=Blockly.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=Blockly.utils.svgPaths.lineOnAxis("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,Blockly.blockRendering.Types.isLeftRoundedCorner(e.elements[0])?this.steps_+=Blockly.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=Blockly.utils.svgPaths.lineOnAxis("V",e.capline+this.highlightOffset_))},Blockly.geras.Highlighter.prototype.drawInlineInput=function(e){var t=this.highlightOffset_,n=e.xPos+e.connectionWidth,o=e.centerline-e.height/2,r=e.width-e.connectionWidth,i=o+t;this.RTL_?(o=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=Blockly.utils.svgPaths.moveTo(n-t,i)+Blockly.utils.svgPaths.lineOnAxis("v",o)+this.puzzleTabPaths_.pathDown(this.RTL_)+Blockly.utils.svgPaths.lineOnAxis("v",e)+Blockly.utils.svgPaths.lineOnAxis("h",r)):this.inlineSteps_+=Blockly.utils.svgPaths.moveTo(e.xPos+e.width+t,i)+Blockly.utils.svgPaths.lineOnAxis("v",e.height)+Blockly.utils.svgPaths.lineOnAxis("h",-r)+Blockly.utils.svgPaths.moveTo(n,o+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},Blockly.geras.InlineInput=function(e,t){Blockly.geras.InlineInput.superClass_.constructor.call(this,e,t),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},Blockly.utils.object.inherits(Blockly.geras.InlineInput,Blockly.blockRendering.InlineInput),Blockly.geras.StatementInput=function(e,t){Blockly.geras.StatementInput.superClass_.constructor.call(this,e,t),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},Blockly.utils.object.inherits(Blockly.geras.StatementInput,Blockly.blockRendering.StatementInput),Blockly.geras.RenderInfo=function(e,t){Blockly.geras.RenderInfo.superClass_.constructor.call(this,e,t)},Blockly.utils.object.inherits(Blockly.geras.RenderInfo,Blockly.blockRendering.RenderInfo),Blockly.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},Blockly.geras.RenderInfo.prototype.populateBottomRow_=function(){Blockly.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==Blockly.NEXT_STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},Blockly.geras.RenderInfo.prototype.addInput_=function(e,t){this.isInline&&e.type==Blockly.INPUT_VALUE?(t.elements.push(new Blockly.geras.InlineInput(this.constants_,e)),t.hasInlineInput=!0):e.type==Blockly.NEXT_STATEMENT?(t.elements.push(new Blockly.geras.StatementInput(this.constants_,e)),t.hasStatement=!0):e.type==Blockly.INPUT_VALUE?(t.elements.push(new Blockly.blockRendering.ExternalValueInput(this.constants_,e)),t.hasExternalInput=!0):e.type==Blockly.DUMMY_INPUT&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||null!=t.align||(t.align=e.align)},Blockly.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var e,t=!1,n=0;e=this.rows[n];n++)e.hasExternalInput&&(t=!0);for(n=0;e=this.rows[n];n++){var o=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var r=0;r<o.length-1;r++){e.elements.push(o[r]);var i=this.getInRowSpacing_(o[r],o[r+1]);e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,i))}e.elements.push(o[o.length-1]),e.endsWithElemSpacer()&&(i=this.getInRowSpacing_(o[o.length-1],null),t&&e.hasDummyInput&&(i+=this.constants_.TAB_WIDTH),e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,i)))}}},Blockly.geras.RenderInfo.prototype.getInRowSpacing_=function(e,t){if(!e)return t&&Blockly.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&Blockly.blockRendering.Types.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&Blockly.blockRendering.Types.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Blockly.blockRendering.Types.isInput(e)&&(!t||Blockly.blockRendering.Types.isStatementInput(t)))return Blockly.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:Blockly.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:Blockly.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:Blockly.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:Blockly.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:Blockly.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isInput(e)&&!t){if(Blockly.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(Blockly.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!Blockly.blockRendering.Types.isInput(e)&&t&&Blockly.blockRendering.Types.isInput(t)){if(e.isEditable){if(Blockly.blockRendering.Types.isInlineInput(t)||Blockly.blockRendering.Types.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(Blockly.blockRendering.Types.isInlineInput(t)||Blockly.blockRendering.Types.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(Blockly.blockRendering.Types.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Blockly.blockRendering.Types.isIcon(e)&&t&&!Blockly.blockRendering.Types.isInput(t))return this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isInlineInput(e)&&t&&!Blockly.blockRendering.Types.isInput(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isLeftSquareCorner(e)&&t){if(Blockly.blockRendering.Types.isHat(t))return this.constants_.NO_PADDING;if(Blockly.blockRendering.Types.isPreviousConnection(t))return t.notchOffset;if(Blockly.blockRendering.Types.isNextConnection(t))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,t.notchOffset+e}if(Blockly.blockRendering.Types.isLeftRoundedCorner(e)&&t){if(Blockly.blockRendering.Types.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(Blockly.blockRendering.Types.isNextConnection(t))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,t.notchOffset-this.constants_.CORNER_RADIUS+e}return!Blockly.blockRendering.Types.isInput(e)&&t&&!Blockly.blockRendering.Types.isInput(t)&&e.isEditable==t.isEditable||t&&Blockly.blockRendering.Types.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},Blockly.geras.RenderInfo.prototype.getSpacerRowHeight_=function(e,t){return Blockly.blockRendering.Types.isTopRow(e)&&Blockly.blockRendering.Types.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Blockly.blockRendering.Types.isTopRow(e)||Blockly.blockRendering.Types.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},Blockly.geras.RenderInfo.prototype.getElemCenterline_=function(e,t){var n;return Blockly.blockRendering.Types.isSpacer(t)?e.yPos+t.height/2:Blockly.blockRendering.Types.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,Blockly.blockRendering.Types.isNextConnection(t)?e+t.height/2:e-t.height/2):Blockly.blockRendering.Types.isTopRow(e)?Blockly.blockRendering.Types.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:(n=e.yPos,Blockly.blockRendering.Types.isField(t)||Blockly.blockRendering.Types.isIcon(t)?(n+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(n+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):n=Blockly.blockRendering.Types.isInlineInput(t)?n+t.height/2:n+e.height/2,n)},Blockly.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var e,t=0,n=null,o=this.rows.length-1;e=this.rows[o];o--)e.nextRightEdge=t,Blockly.blockRendering.Types.isInputRow(e)&&(e.hasStatement&&this.alignStatementRow_(e),n&&n.hasStatement&&e.width<n.width?e.nextRightEdge=n.width:t=e.width,n=e);for(o=t=0;e=this.rows[o];o++)e.hasStatement?t=this.getDesiredRowWidth_(e):Blockly.blockRendering.Types.isSpacer(e)?e.width=Math.max(t,e.nextRightEdge):(0<(t=Math.max(t,e.nextRightEdge)-e.width)&&this.addAlignmentPadding_(e,t),t=e.width)}else Blockly.geras.RenderInfo.superClass_.alignRowElements_.call(this)},Blockly.geras.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:Blockly.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},Blockly.geras.RenderInfo.prototype.finalize_=function(){for(var e,t=0,n=0,o=0;e=this.rows[o];o++){e.yPos=n,e.xPos=this.startX,n+=e.height;var t=Math.max(t,e.widthWithConnectedBlocks),r=n-this.topRow.ascenderHeight;e==this.bottomRow&&r<this.constants_.MIN_BLOCK_HEIGHT&&(r=this.constants_.MIN_BLOCK_HEIGHT-r,this.bottomRow.height+=r,n+=r),this.recordElemPositions_(e)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},Blockly.geras.Drawer=function(e,t){Blockly.geras.Drawer.superClass_.constructor.call(this,e,t),this.highlighter_=new Blockly.geras.Highlighter(t)},Blockly.utils.object.inherits(Blockly.geras.Drawer,Blockly.blockRendering.Drawer),Blockly.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var e=this.block_.pathObject;e.setPath(this.outlinePath_+"\n"+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),Blockly.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},Blockly.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),Blockly.geras.Drawer.superClass_.drawTop_.call(this)},Blockly.geras.Drawer.prototype.drawJaggedEdge_=function(e){this.highlighter_.drawJaggedEdge_(e),Blockly.geras.Drawer.superClass_.drawJaggedEdge_.call(this,e)},Blockly.geras.Drawer.prototype.drawValueInput_=function(e){this.highlighter_.drawValueInput(e),Blockly.geras.Drawer.superClass_.drawValueInput_.call(this,e)},Blockly.geras.Drawer.prototype.drawStatementInput_=function(e){this.highlighter_.drawStatementInput(e),Blockly.geras.Drawer.superClass_.drawStatementInput_.call(this,e)},Blockly.geras.Drawer.prototype.drawRightSideRow_=function(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("H",e.xPos+e.width)+Blockly.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},Blockly.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),Blockly.geras.Drawer.superClass_.drawBottom_.call(this)},Blockly.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),Blockly.geras.Drawer.superClass_.drawLeft_.call(this)},Blockly.geras.Drawer.prototype.drawInlineInput_=function(e){this.highlighter_.drawInlineInput(e),Blockly.geras.Drawer.superClass_.drawInlineInput_.call(this,e)},Blockly.geras.Drawer.prototype.positionInlineInputConnection_=function(e){var t,n=e.centerline-e.height/2;e.connectionModel&&(t=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET,this.info_.RTL&&(t*=-1),e.connectionModel.setOffsetInBlock(t,n+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET))},Blockly.geras.Drawer.prototype.positionStatementInputConnection_=function(e){var t,n=e.getLastInput();n.connectionModel&&(t=e.xPos+e.statementEdge+n.notchOffset,t=this.info_.RTL?-1*t:t+this.constants_.DARK_PATH_OFFSET,n.connectionModel.setOffsetInBlock(t,e.yPos+this.constants_.DARK_PATH_OFFSET))},Blockly.geras.Drawer.prototype.positionExternalValueConnection_=function(e){var t,n=e.getLastInput();n.connectionModel&&(t=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET,this.info_.RTL&&(t*=-1),n.connectionModel.setOffsetInBlock(t,e.yPos))},Blockly.geras.Drawer.prototype.positionNextConnection_=function(){var e,t,n=this.info_.bottomRow;n.connection&&(t=(e=n.connection).xPos,e.connectionModel.setOffsetInBlock((this.info_.RTL?-t:t)+this.constants_.DARK_PATH_OFFSET/2,n.baseline+this.constants_.DARK_PATH_OFFSET))},Blockly.geras.HighlightConstantProvider=function(e){this.constantProvider=e,this.OFFSET=.5,this.START_POINT=Blockly.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET),this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},Blockly.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e+t)-t,o=Blockly.utils.svgPaths.moveBy(n,n)+Blockly.utils.svgPaths.arc("a","0 0,0",e,Blockly.utils.svgPaths.point(-n-t,e-n)),r=Blockly.utils.svgPaths.arc("a","0 0,0",e+t,Blockly.utils.svgPaths.point(e+t,e+t)),i=Blockly.utils.svgPaths.moveBy(n,-n)+Blockly.utils.svgPaths.arc("a","0 0,0",e+t,Blockly.utils.svgPaths.point(e-n,n+t));return{width:e+t,height:e,pathTop:function(e){return e?o:""},pathBottom:function(e){return e?r:i}}},Blockly.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e-t)+t,o=Blockly.utils.svgPaths.moveBy(n,n)+Blockly.utils.svgPaths.arc("a","0 0,1",e-t,Blockly.utils.svgPaths.point(e-n,-n+t)),r=Blockly.utils.svgPaths.moveBy(t,e)+Blockly.utils.svgPaths.arc("a","0 0,1",e-t,Blockly.utils.svgPaths.point(e,-e+t)),i=-n,s=Blockly.utils.svgPaths.moveBy(n,i)+Blockly.utils.svgPaths.arc("a","0 0,1",e-t,Blockly.utils.svgPaths.point(-n+t,-i-e));return{height:e,topLeft:function(e){return e?o:r},bottomLeft:function(){return s}}},Blockly.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,n=Blockly.utils.svgPaths.moveBy(-2,3.4-t)+Blockly.utils.svgPaths.lineTo(-.45*e,-2.1),o=Blockly.utils.svgPaths.lineOnAxis("v",2.5)+Blockly.utils.svgPaths.moveBy(.97*-e,2.5)+Blockly.utils.svgPaths.curve("q",[Blockly.utils.svgPaths.point(.05*-e,10),Blockly.utils.svgPaths.point(.3*e,9.5)])+Blockly.utils.svgPaths.moveBy(.67*e,-1.9)+Blockly.utils.svgPaths.lineOnAxis("v",2.5),r=Blockly.utils.svgPaths.lineOnAxis("v",-1.5)+Blockly.utils.svgPaths.moveBy(-.92*e,-.5)+Blockly.utils.svgPaths.curve("q",[Blockly.utils.svgPaths.point(-.19*e,-5.5),Blockly.utils.svgPaths.point(0,-11)])+Blockly.utils.svgPaths.moveBy(.92*e,1),i=Blockly.utils.svgPaths.moveBy(-5,t-.7)+Blockly.utils.svgPaths.lineTo(.46*e,-2.1);return{width:e,height:t,pathUp:function(e){return e?n:r},pathDown:function(e){return e?o:i}}},Blockly.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:Blockly.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},Blockly.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:Blockly.utils.svgPaths.lineTo(5.1,2.6)+Blockly.utils.svgPaths.moveBy(-10.2,6.8)+Blockly.utils.svgPaths.lineTo(5.1,2.6)}},Blockly.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var e=this.constantProvider.START_HAT.height,t=Blockly.utils.svgPaths.moveBy(25,-8.7)+Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(29.7,-6.2),Blockly.utils.svgPaths.point(57.2,-.5),Blockly.utils.svgPaths.point(75,8.7)]),n=Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(17.8,-9.2),Blockly.utils.svgPaths.point(45.3,-14.9),Blockly.utils.svgPaths.point(75,-8.7)])+Blockly.utils.svgPaths.moveTo(100.5,e+.5);return{path:function(e){return e?t:n}}},Blockly.geras.PathObject=function(e,t,n){this.constants_=n,this.svgRoot=e,this.svgPathDark=Blockly.utils.dom.createSvgElement("path",{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=Blockly.utils.dom.createSvgElement("path",{class:"blocklyPath"},this.svgRoot),this.svgPathLight=Blockly.utils.dom.createSvgElement("path",{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=t},Blockly.utils.object.inherits(Blockly.geras.PathObject,Blockly.blockRendering.PathObject),Blockly.geras.PathObject.prototype.setPath=function(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)},Blockly.geras.PathObject.prototype.setHighlightPath=function(e){this.svgPathLight.setAttribute("d",e)},Blockly.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},Blockly.geras.PathObject.prototype.applyColour=function(e){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),Blockly.geras.PathObject.superClass_.applyColour.call(this,e),this.svgPath.setAttribute("stroke","none")},Blockly.geras.PathObject.prototype.setStyle=function(e){this.style=e,this.colourDark=Blockly.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},Blockly.geras.PathObject.prototype.updateHighlighted=function(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants_.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},Blockly.geras.PathObject.prototype.updateShadow_=function(e){e&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},Blockly.geras.PathObject.prototype.updateDisabled_=function(e){Blockly.geras.PathObject.superClass_.updateDisabled_.call(this,e),e&&this.svgPath.setAttribute("stroke","none")},Blockly.geras.Renderer=function(e){Blockly.geras.Renderer.superClass_.constructor.call(this,e),this.highlightConstants_=null},Blockly.utils.object.inherits(Blockly.geras.Renderer,Blockly.blockRendering.Renderer),Blockly.geras.Renderer.prototype.init=function(){Blockly.geras.Renderer.superClass_.init.call(this),this.highlightConstants_=this.makeHighlightConstants_()},Blockly.geras.Renderer.prototype.makeConstants_=function(){return new Blockly.geras.ConstantProvider},Blockly.geras.Renderer.prototype.makeRenderInfo_=function(e){return new Blockly.geras.RenderInfo(this,e)},Blockly.geras.Renderer.prototype.makeDrawer_=function(e,t){return new Blockly.geras.Drawer(e,t)},Blockly.geras.Renderer.prototype.makePathObject=function(e,t){return new Blockly.geras.PathObject(e,t,this.getConstants())},Blockly.geras.Renderer.prototype.makeHighlightConstants_=function(){return new Blockly.geras.HighlightConstantProvider(this.getConstants())},Blockly.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},Blockly.blockRendering.register("geras",Blockly.geras.Renderer),Blockly.zelos={},Blockly.zelos.ConstantProvider=function(){Blockly.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=+this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.GRID_UNIT,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.GRID_UNIT,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:+this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_TEXT_BASELINE_Y=this.FIELD_TEXT_HEIGHT=13.1,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=+this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_TEXT_Y_OFFSET=Blockly.utils.userAgent.CHROME?-.45:0,this.FIELD_COLOUR_FULL_BLOCK=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.FIELD_CHECKBOX_Y_OFFSET=22,this.FIELD_CHECKBOX_DEFAULT_WIDTH=6*this.GRID_UNIT,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},Blockly.utils.object.inherits(Blockly.zelos.ConstantProvider,Blockly.blockRendering.ConstantProvider),Blockly.zelos.ConstantProvider.prototype.init=function(){Blockly.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET+=this.INSIDE_CORNERS.rightWidth},Blockly.zelos.ConstantProvider.prototype.dispose=function(){Blockly.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&Blockly.utils.dom.removeNode(this.selectedGlowFilter_)},Blockly.zelos.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH;return{height:e,width:t,path:Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(25,-e),Blockly.utils.svgPaths.point(71,-e),Blockly.utils.svgPaths.point(t,0)])}},Blockly.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(e,t,n){var o=e/2;return Blockly.utils.svgPaths.lineTo(-(n=n?-1:1)*o,e=(t?-1:1)*e/2)+Blockly.utils.svgPaths.lineTo(n*o,e)}return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(e){return e/2},height:function(e){return e},connectionOffsetY:function(e){return e/2},connectionOffsetX:function(e){return-e},pathDown:function(e){return t(e,!1,!1)},pathUp:function(e){return t(e,!0,!1)},pathRightDown:function(e){return t(e,!1,!0)},pathRightUp:function(e){return t(e,!1,!0)}}},Blockly.zelos.ConstantProvider.prototype.makeRounded=function(){function t(e,t,n){return Blockly.utils.svgPaths.arc("a","0 0 "+(t||n?1:0),e/=2,Blockly.utils.svgPaths.point(0,(t?-1:1)*e*2))}return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(e){return e/2},height:function(e){return e},connectionOffsetY:function(e){return e/2},connectionOffsetX:function(e){return-e},pathDown:function(e){return t(e,!1,!1)},pathUp:function(e){return t(e,!0,!1)},pathRightDown:function(e){return t(e,!1,!0)},pathRightUp:function(e){return t(e,!1,!0)}}},Blockly.zelos.ConstantProvider.prototype.makeSquared=function(){function t(e,t,n){return e-=2*o,Blockly.utils.svgPaths.arc("a","0 0,1",o,Blockly.utils.svgPaths.point((t?-1:1)*o,(t?-1:1)*o))+Blockly.utils.svgPaths.lineOnAxis("v",(n?1:-1)*e)+Blockly.utils.svgPaths.arc("a","0 0,1",o,Blockly.utils.svgPaths.point((t?1:-1)*o,(t?-1:1)*o))}var o=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(e){return o},height:function(e){return e},connectionOffsetY:function(e){return e/2},connectionOffsetX:function(e){return-e},pathDown:function(e){return t(e,!1,!1)},pathUp:function(e){return t(e,!0,!1)},pathRightDown:function(e){return t(e,!1,!0)},pathRightUp:function(e){return t(e,!1,!0)}}},Blockly.zelos.ConstantProvider.prototype.shapeFor=function(e){var t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case Blockly.INPUT_VALUE:case Blockly.OUTPUT_VALUE:if(null!=(e=e.getSourceBlock().getOutputShape()))switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&-1!=t.indexOf("Boolean")?this.HEXAGONAL:(t&&-1!=t.indexOf("Number")||t&&t.indexOf("String"),this.ROUNDED);case Blockly.PREVIOUS_STATEMENT:case Blockly.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},Blockly.zelos.ConstantProvider.prototype.makeNotch=function(){function e(e){return Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(e*r/2,0),Blockly.utils.svgPaths.point(e*r*3/4,s/2),Blockly.utils.svgPaths.point(e*r,s)])+Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(e*r,i)])+Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(e*r/4,s/2),Blockly.utils.svgPaths.point(e*r/2,s),Blockly.utils.svgPaths.point(e*r,s)])+Blockly.utils.svgPaths.lineOnAxis("h",e*o)+Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(e*r/2,0),Blockly.utils.svgPaths.point(e*r*3/4,-s/2),Blockly.utils.svgPaths.point(e*r,-s)])+Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(e*r,-i)])+Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(e*r/4,-s/2),Blockly.utils.svgPaths.point(e*r/2,-s),Blockly.utils.svgPaths.point(e*r,-s)])}var t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=t/3,r=o/3,i=n/2,s=i/2,a=e(1),l=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:n,pathLeft:a,pathRight:l}},Blockly.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS,t=Blockly.utils.svgPaths.arc("a","0 0,0",e,Blockly.utils.svgPaths.point(-e,e)),n=Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point(-e,e));return{width:e,height:e,pathTop:t,pathBottom:Blockly.utils.svgPaths.arc("a","0 0,0",e,Blockly.utils.svgPaths.point(e,e)),rightWidth:e,rightHeight:e,pathTopRight:n,pathBottomRight:Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point(e,e))}},Blockly.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(e){return Blockly.utils.colour.blend("#000",e,.15)||e},Blockly.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(e){return Blockly.utils.colour.blend("#000",e,.25)||e},Blockly.zelos.ConstantProvider.prototype.createDom=function(e){Blockly.zelos.ConstantProvider.superClass_.createDom.call(this,e),e=Blockly.utils.dom.createSvgElement("defs",{},e);var t=Blockly.utils.dom.createSvgElement("filter",{id:"blocklySelectedGlowFilter"+this.randomIdentifier_,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),n=(Blockly.utils.dom.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.Colours.selectedGlowSize},t),Blockly.utils.dom.createSvgElement("feComponentTransfer",{result:"outBlur"},t));Blockly.utils.dom.createSvgElement("feFuncA",{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),Blockly.utils.dom.createSvgElement("feFlood",{"flood-color":Blockly.Colours.selectedGlow,"flood-opacity":1,result:"outColor"},t),Blockly.utils.dom.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter_=t,e=Blockly.utils.dom.createSvgElement("filter",{id:"blocklyReplacementGlowFilter"+this.randomIdentifier_,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),Blockly.utils.dom.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:2},e),t=Blockly.utils.dom.createSvgElement("feComponentTransfer",{result:"outBlur"},e),Blockly.utils.dom.createSvgElement("feFuncA",{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),Blockly.utils.dom.createSvgElement("feFlood",{"flood-color":"#fff200","flood-opacity":1,result:"outColor"},e),Blockly.utils.dom.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),Blockly.utils.dom.createSvgElement("feComposite",{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter_=e},Blockly.zelos.ConstantProvider.prototype.getCSS_=function(e){return[(e="."+e+"-renderer")+" .blocklyText {","cursor: default;","fill: #fff;","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-size: "+this.FIELD_TEXT_FONTSIZE+"pt;","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",e+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",e+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",e+" .blocklyNonEditableText>text,",e+" .blocklyEditableText>text,",e+" .blocklyNonEditableText>g>text,",e+" .blocklyEditableText>g>text {","fill: #575E75;","}",e+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect ,",e+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",e+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",e+" .blocklyDropdownText {","fill: #fff !important;","}",e+".blocklyWidgetDiv .goog-menuitem,",e+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",e+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",e+" .blocklyHighlightedConnectionPath {","stroke: #fff200;","}",e+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier_+")","}"]},Blockly.zelos.TopRow=function(e){Blockly.zelos.TopRow.superClass_.constructor.call(this,e)},Blockly.utils.object.inherits(Blockly.zelos.TopRow,Blockly.blockRendering.TopRow),Blockly.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},Blockly.zelos.TopRow.prototype.hasLeftSquareCorner=function(e){var t=(void 0!==e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t},Blockly.zelos.TopRow.prototype.hasRightSquareCorner=function(e){return!!e.outputConnection},Blockly.zelos.BottomRow=function(e){Blockly.zelos.BottomRow.superClass_.constructor.call(this,e)},Blockly.utils.object.inherits(Blockly.zelos.BottomRow,Blockly.blockRendering.BottomRow),Blockly.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},Blockly.zelos.BottomRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection},Blockly.zelos.BottomRow.prototype.hasRightSquareCorner=function(e){return!!e.outputConnection},Blockly.zelos.RightConnectionShape=function(e){Blockly.zelos.RightConnectionShape.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},Blockly.utils.object.inherits(Blockly.zelos.RightConnectionShape,Blockly.blockRendering.Measurable),Blockly.zelos.StatementInput=function(e,t){if(Blockly.zelos.StatementInput.superClass_.constructor.call(this,e,t),this.connectedBlock){for(e=this.connectedBlock;e.getNextBlock();)e=e.getNextBlock();e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}},Blockly.utils.object.inherits(Blockly.zelos.StatementInput,Blockly.blockRendering.StatementInput),Blockly.zelos.RenderInfo=function(e,t){Blockly.zelos.RenderInfo.superClass_.constructor.call(this,e,t),this.topRow=new Blockly.zelos.TopRow(this.constants_),this.bottomRow=new Blockly.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.rightSide=this.outputConnection?new Blockly.zelos.RightConnectionShape(this.constants_):null},Blockly.utils.object.inherits(Blockly.zelos.RenderInfo,Blockly.blockRendering.RenderInfo),Blockly.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},Blockly.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},Blockly.zelos.RenderInfo.prototype.shouldStartNewRow_=function(e,t){return!!t&&(e.type==Blockly.NEXT_STATEMENT||t.type==Blockly.NEXT_STATEMENT||(e.type==Blockly.INPUT_VALUE||e.type==Blockly.DUMMY_INPUT)&&(!this.isInline||this.isMultiRow))},Blockly.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):Blockly.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},Blockly.zelos.RenderInfo.prototype.getInRowSpacing_=function(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape?!e&&t&&Blockly.blockRendering.Types.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&Blockly.blockRendering.Types.isLeftRoundedCorner(e)&&t&&(Blockly.blockRendering.Types.isPreviousConnection(t)||Blockly.blockRendering.Types.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&Blockly.blockRendering.Types.isLeftSquareCorner(e)&&t&&Blockly.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},Blockly.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(e,t){var n,o;return Blockly.blockRendering.Types.isTopRow(e)&&Blockly.blockRendering.Types.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:(n=Blockly.blockRendering.Types.isInputRow(e)&&e.hasStatement,(o=Blockly.blockRendering.Types.isInputRow(t)&&t.hasStatement)||n?(e=Math.max(this.constants_.MEDIUM_PADDING,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0)),o&&n?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):Blockly.blockRendering.Types.isTopRow(e)?e.hasPreviousConnection||this.outputConnection?this.constants_.NO_PADDING:this.constants_.SMALL_PADDING:Blockly.blockRendering.Types.isBottomRow(t)?this.outputConnection?this.constants_.NO_PADDING:this.constants_.SMALL_PADDING:this.constants_.MEDIUM_PADDING)},Blockly.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(e,t){var n=this.width-this.startX;return Blockly.blockRendering.Types.isInputRow(e)&&e.hasStatement||Blockly.blockRendering.Types.isInputRow(t)&&t.hasStatement?Math.max(n,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):n},Blockly.zelos.RenderInfo.prototype.getElemCenterline_=function(e,t){return e.hasStatement&&!Blockly.blockRendering.Types.isSpacer(t)?e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2:Blockly.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,e,t)},Blockly.zelos.RenderInfo.prototype.addInput_=function(e,t){e.type==Blockly.DUMMY_INPUT&&t.hasDummyInput&&t.align==Blockly.ALIGN_LEFT&&e.align==Blockly.ALIGN_RIGHT&&(t.rightAlignedDummyInput=e),this.isInline&&e.type==Blockly.INPUT_VALUE?(t.elements.push(new Blockly.blockRendering.InlineInput(this.constants_,e)),t.hasInlineInput=!0):e.type==Blockly.NEXT_STATEMENT?(t.elements.push(new Blockly.zelos.StatementInput(this.constants_,e)),t.hasStatement=!0):e.type==Blockly.INPUT_VALUE?(t.elements.push(new Blockly.blockRendering.ExternalValueInput(this.constants_,e)),t.hasExternalInput=!0):e.type==Blockly.DUMMY_INPUT&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),null==t.align&&(t.align=e.align)},Blockly.zelos.RenderInfo.prototype.addAlignmentPadding_=function(e,t){if(e.rightAlignedDummyInput){for(var n,o,r=0;(o=e.elements[r])&&(Blockly.blockRendering.Types.isSpacer(o)&&(n=o),!Blockly.blockRendering.Types.isField(o)||o.parentInput!=e.rightAlignedDummyInput);r++);if(n)return n.width+=t,void(e.width+=t)}Blockly.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,e,t)},Blockly.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,t=e,n=2;n<this.rows.length-1;n+=2){var o=this.rows[n-1],r=this.rows[n],i=this.rows[n+1];if(o=2==n?!!this.topRow.hasPreviousConnection:!!o.followsStatement,i=n+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!i.precedesStatement,Blockly.blockRendering.Types.isInputRow(r)&&r.hasStatement)r.measure(),t=r.width-r.getLastInput().width+e;else if(o&&(2==n||i)&&Blockly.blockRendering.Types.isInputRow(r)&&!r.hasStatement)for(var s,i=r.xPos,o=null,a=0;s=r.elements[a];a++)!((o=Blockly.blockRendering.Types.isSpacer(s)?s:o)&&(Blockly.blockRendering.Types.isField(s)||Blockly.blockRendering.Types.isInput(s))&&i<t)||Blockly.blockRendering.Types.isField(s)&&(s.field instanceof Blockly.FieldLabel||s.field instanceof Blockly.FieldImage)||(o.width+=t-i),i+=s.width}},Blockly.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var e,t=0,n=0;e=this.rows[n];n++)e.yPos=t,t+=e.height;this.height=t,n=this.outputConnection.shape.height(t),t=this.outputConnection.shape.width(t),this.outputConnection.height=n,this.outputConnection.width=t,this.outputConnection.startX=t,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(n),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(t),this.rightSide.height=n,this.rightSide.width=t,this.rightSide.centerline=n/2,this.rightSide.xPos=this.width+t,this.startX=t,this.width+=2*t,this.widthWithChildren+=2*t}},Blockly.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection){for(var e,t,n,o,r=0,i=0;e=this.rows[i];i++)Blockly.blockRendering.Types.isInputRow(e)&&(r=e.elements[e.elements.length-2],t=this.getNegativeSpacing_(e.elements[1]),n=this.getNegativeSpacing_(r),o=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width,this.width-(r=t+n)<o&&(t=(r=this.width-o)/2,n=r/2),e.elements.unshift(new Blockly.blockRendering.InRowSpacer(this.constants_,-t)),e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,-n)));if(r)for(this.width-=r,this.widthWithChildren-=r,this.rightSide.xPos-=r,i=0;e=this.rows[i];i++)(Blockly.blockRendering.Types.isTopRow(e)||Blockly.blockRendering.Types.isBottomRow(e))&&(e.elements[1].width-=r),e.width-=r,e.widthWithConnectedBlocks-=r}},Blockly.zelos.RenderInfo.prototype.getNegativeSpacing_=function(e){var t,n,o;return e?(t=this.outputConnection.width,n=this.outputConnection.shape.type,o=this.constants_,this.isMultiRow&&1<this.inputRowNum_?n!==o.SHAPES.ROUND?0:t-(n=this.height/2)*(1-Math.sin(Math.acos((n-this.constants_.SMALL_PADDING)/n))):Blockly.blockRendering.Types.isInlineInput(e)?(e=e.connectedBlock?e.connectedBlock.pathObject.outputShapeType:e.shape.type,n==o.SHAPES.HEXAGONAL&&n!=e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[n][e]):Blockly.blockRendering.Types.isField(e)?n==o.SHAPES.ROUND&&e.field instanceof Blockly.FieldTextInput?t-2.75*o.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[n][0]:Blockly.blockRendering.Types.isIcon(e)?this.constants_.SMALL_PADDING:0):0},Blockly.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var e=2;e<this.rows.length-1;e+=2){var t=this.rows[e-1],n=this.rows[e],o=this.rows[e+1],r=2==e,i=e+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!o.precedesStatement;if(r?this.topRow.hasPreviousConnection:t.followsStatement){var s=3==n.elements.length&&(n.elements[1].field instanceof Blockly.FieldLabel||n.elements[1].field instanceof Blockly.FieldImage);if(!r&&s)t.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.SMALL_PADDING,n.height-=this.constants_.MEDIUM_PADDING;else if(r||i){if(i){for(r=!1,i=0;s=n.elements[i];i++)if(Blockly.blockRendering.Types.isInlineInput(s)&&s.connectedBlock&&!s.connectedBlock.isShadow()&&40<=s.connectedBlock.getHeightWidth().height){r=!0;break}r&&(t.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.SMALL_PADDING)}}else t.height+=this.constants_.SMALL_PADDING}}},Blockly.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),Blockly.zelos.RenderInfo.superClass_.finalize_.call(this)},Blockly.zelos.Drawer=function(e,t){Blockly.zelos.Drawer.superClass_.constructor.call(this,e,t)},Blockly.utils.object.inherits(Blockly.zelos.Drawer,Blockly.blockRendering.Drawer),Blockly.zelos.Drawer.prototype.draw=function(){var e=this.block_.pathObject;e.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&e.flipRTL(),Blockly.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()},Blockly.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):Blockly.zelos.Drawer.superClass_.drawOutline_.call(this)},Blockly.zelos.Drawer.prototype.drawRightSideRow_=function(e){var t;e.height<=0||(e.precedesStatement||e.followsStatement?(t=this.constants_.INSIDE_CORNERS.rightHeight,t=e.height-(e.precedesStatement?t:0),this.outlinePath_+=(e.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<t?Blockly.utils.svgPaths.lineOnAxis("V",e.yPos+t):"")+(e.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")):this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",e.yPos+e.height))},Blockly.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},Blockly.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},Blockly.zelos.Drawer.prototype.drawFlatTop_=function(){var e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Blockly.utils.svgPaths.moveBy(e.xPos,this.info_.startY),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("h",e.width)},Blockly.zelos.Drawer.prototype.drawFlatBottom_=function(){var e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",e.baseline),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("h",-e.width)},Blockly.zelos.Drawer.prototype.drawInlineInput_=function(e){this.positionInlineInputConnection_(e);var t,n=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(t=e.width-2*e.connectionWidth,e=Blockly.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-e.height/2)+Blockly.utils.svgPaths.lineOnAxis("h",t)+e.shape.pathRightDown(e.height)+Blockly.utils.svgPaths.lineOnAxis("h",-t)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(n,e))},Blockly.zelos.Drawer.prototype.drawStatementInput_=function(e){var t=(r=e.getLastInput()).xPos+r.notchOffset+r.shape.width,n=r.shape.pathRight+Blockly.utils.svgPaths.lineOnAxis("h",-(r.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,o=e.height-2*this.constants_.INSIDE_CORNERS.height,r=this.constants_.INSIDE_CORNERS.pathBottom+Blockly.utils.svgPaths.lineOnAxis("h",r.notchOffset-this.constants_.INSIDE_CORNERS.width)+(r.connectedBottomNextConnection?"":r.shape.pathLeft);this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("H",t)+n+Blockly.utils.svgPaths.lineOnAxis("v",o)+r+Blockly.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},Blockly.zelos.PathObject=function(e,t,n){Blockly.zelos.PathObject.superClass_.constructor.call(this,e,t,n),this.constants_=n,this.svgPathSelected_=null,this.outlines_={},this.outputShapeType=this.remainingOutlines_=null},Blockly.utils.object.inherits(Blockly.zelos.PathObject,Blockly.blockRendering.PathObject),Blockly.zelos.PathObject.prototype.setPath=function(e){Blockly.zelos.PathObject.superClass_.setPath.call(this,e),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",e)},Blockly.zelos.PathObject.prototype.applyColour=function(e){Blockly.zelos.PathObject.superClass_.applyColour.call(this,e),e.isShadow()&&e.getParent()&&this.svgPath.setAttribute("stroke",e.getParent().style.colourTertiary),e=0;for(var t,n=Object.keys(this.outlines_);t=n[e];e++)this.outlines_[t].setAttribute("fill",this.style.colourTertiary)},Blockly.zelos.PathObject.prototype.flipRTL=function(){Blockly.zelos.PathObject.superClass_.flipRTL.call(this);for(var e,t=0,n=Object.keys(this.outlines_);e=n[t];t++)this.outlines_[e].setAttribute("transform","scale(-1 1)")},Blockly.zelos.PathObject.prototype.updateSelected=function(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants_.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},Blockly.zelos.PathObject.prototype.updateReplacementHighlight=function(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants_.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},Blockly.zelos.PathObject.prototype.updateShapeForInputHighlight=function(e,t){e=e.getParentInput().name,(e=this.getOutlinePath_(e))&&(t?e.setAttribute("filter","url(#"+this.constants_.replacementGlowFilterId+")"):e.removeAttribute("filter"))},Blockly.zelos.PathObject.prototype.beginDrawing=function(){this.remainingOutlines_={};for(var e,t=0,n=Object.keys(this.outlines_);e=n[t];t++)this.remainingOutlines_[e]=1},Blockly.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var e,t=0,n=Object.keys(this.remainingOutlines_);e=n[t];t++)this.removeOutlinePath_(e);this.remainingOutlines_=null},Blockly.zelos.PathObject.prototype.setOutlinePath=function(e,t){(e=this.getOutlinePath_(e)).setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)},Blockly.zelos.PathObject.prototype.getOutlinePath_=function(e){return this.outlines_[e]||(this.outlines_[e]=Blockly.utils.dom.createSvgElement("path",{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[e],this.outlines_[e]},Blockly.zelos.PathObject.prototype.removeOutlinePath_=function(e){this.outlines_[e].parentNode.removeChild(this.outlines_[e]),delete this.outlines_[e]},Blockly.zelos.MarkerSvg=function(e,t,n){Blockly.zelos.MarkerSvg.superClass_.constructor.call(this,e,t,n)},Blockly.utils.object.inherits(Blockly.zelos.MarkerSvg,Blockly.blockRendering.MarkerSvg),Blockly.zelos.MarkerSvg.prototype.showWithInput_=function(e){var t=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle_(e.x,e.y+this.constants_.CURSOR_RADIUS),this.setParent_(t),this.showCurrent_()},Blockly.zelos.MarkerSvg.prototype.showWithBlock_=function(e){var t=(e=e.getLocation()).getHeightWidth();this.positionRect_(0,0,t.width,t.height),this.setParent_(e),this.showCurrent_()},Blockly.zelos.MarkerSvg.prototype.positionCircle_=function(e,t){this.markerCircle_.setAttribute("cx",e),this.markerCircle_.setAttribute("cy",t),this.currentMarkerSvg=this.markerCircle_},Blockly.zelos.MarkerSvg.prototype.showAtLocation_=function(e){var t=!1;e.getType()==Blockly.ASTNode.types.OUTPUT?(this.showWithInput_(e),t=!0):e.getType()==Blockly.ASTNode.types.BLOCK&&(this.showWithBlock_(e),t=!0),t||Blockly.zelos.MarkerSvg.superClass_.showAtLocation_.call(this,e)},Blockly.zelos.MarkerSvg.prototype.hide=function(){Blockly.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},Blockly.zelos.MarkerSvg.prototype.createDomInternal_=function(){var e;return Blockly.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=Blockly.utils.dom.createSvgElement("circle",{r:this.constants_.CURSOR_RADIUS,style:"display: none",fill:this.colour_,stroke:this.colour_,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()&&(e=this.getBlinkProperties_(),Blockly.utils.dom.createSvgElement("animate",e,this.markerCircle_)),this.markerSvg_},Blockly.zelos.Renderer=function(e){Blockly.zelos.Renderer.superClass_.constructor.call(this,e)},Blockly.utils.object.inherits(Blockly.zelos.Renderer,Blockly.blockRendering.Renderer),Blockly.zelos.Renderer.prototype.makeConstants_=function(){return new Blockly.zelos.ConstantProvider},Blockly.zelos.Renderer.prototype.makeRenderInfo_=function(e){return new Blockly.zelos.RenderInfo(this,e)},Blockly.zelos.Renderer.prototype.makeDrawer_=function(e,t){return new Blockly.zelos.Drawer(e,t)},Blockly.zelos.Renderer.prototype.makeMarkerDrawer=function(e,t){return new Blockly.zelos.MarkerSvg(e,this.getConstants(),t)},Blockly.zelos.Renderer.prototype.makePathObject=function(e,t){return new Blockly.zelos.PathObject(e,t,this.getConstants())},Blockly.zelos.Renderer.prototype.shouldHighlightConnection=function(e){return e.type!=Blockly.INPUT_VALUE&&e.type!==Blockly.OUTPUT_VALUE},Blockly.zelos.Renderer.prototype.shouldInsertDraggedBlock=function(e,t){return!1},Blockly.blockRendering.register("zelos",Blockly.zelos.Renderer),Blockly.pxt={},Blockly.pxt.ConstantProvider=function(){Blockly.pxt.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_FONTFAMILY='"Monaco", "Menlo", "Ubuntu Mono", "Consolas", "source-code-pro", monospace',this.FIELD_TEXT_FONTWEIGHT="600",this.ICON_SEPARATOR_HEIGHT=8*this.GRID_UNIT,this.ELLIPSES_RADIUS=6,this.ELLIPSES_SPACING=8,this.COLLAPSE_IMAGE_DATAURI="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg enable-background='new 0 0 24 24' version='1.1' viewBox='0 0 24 24' xml:space='preserve' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23CF8B17;%7D .st1%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Ctitle%3Erepeat%3C/title%3E%3Ccircle cx='12' cy='12' r='10.503' fill='none' stroke='%23fff' stroke-linecap='square' stroke-linejoin='round' stroke-width='2'/%3E%3Cg transform='matrix(.0086269 0 0 -.0086269 4.8224 17.354)'%3E%3Cpath d='m1611 367.42q0 53-37 90l-651 651q-38 38-91 38-54 0-90-38l-651-651q-38-36-38-90 0-53 38-91l74-75q39-37 91-37 53 0 90 37l486 486 486-486q37-37 90-37 52 0 91 37l75 75q37 39 37 91z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E%0A",this.EXPAND_IMAGE_DATAURI="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg enable-background='new 0 0 24 24' version='1.1' viewBox='0 0 24 24' xml:space='preserve' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23CF8B17;%7D .st1%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Ctitle%3Erepeat%3C/title%3E%3Ccircle cx='12' cy='12' r='10.503' fill='none' stroke='%23fff' stroke-linecap='square' stroke-linejoin='round' stroke-width='2'/%3E%3Cg transform='matrix(.0086269 0 0 -.0086269 4.8224 17.654)'%3E%3Cpath d='m1611 832q0-53-37-90l-651-651q-38-38-91-38-54 0-90 38l-651 651q-38 36-38 90 0 53 38 91l74 75q39 37 91 37 53 0 90-37l486-486 486 486q37 37 90 37 52 0 91-37l75-75q37-39 37-91z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E%0A",this.highlightedGlowFilterId="",this.highlightedGlowFilter_=null,this.warningGlowFilterId="",this.warningGlowFilter_=null,this.dropdownArrowImageId=""},Blockly.utils.object.inherits(Blockly.pxt.ConstantProvider,Blockly.zelos.ConstantProvider),Blockly.pxt.ConstantProvider.prototype.init=function(){Blockly.pxt.ConstantProvider.superClass_.init.call(this),this.ELLIPSES=this.makeEllipses()},Blockly.pxt.ConstantProvider.prototype.createDom=function(e){Blockly.pxt.ConstantProvider.superClass_.createDom.call(this,e),e=Blockly.utils.dom.createSvgElement("defs",{},e);var t=Blockly.utils.dom.createSvgElement("filter",{id:"blocklyHighlightGlowFilter"+this.randomIdentifier_,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),n=(Blockly.utils.dom.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.Colours.highlightGlowSize},t),Blockly.utils.dom.createSvgElement("feComponentTransfer",{result:"outBlur"},t));Blockly.utils.dom.createSvgElement("feFuncA",{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),Blockly.utils.dom.createSvgElement("feFlood",{"flood-color":Blockly.Colours.highlightGlow,"flood-opacity":Blockly.Colours.highlightGlowOpacity,result:"outColor"},t),Blockly.utils.dom.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.highlightedGlowFilterId=t.id,this.highlightedGlowFilter_=t,t=Blockly.utils.dom.createSvgElement("filter",{id:"blocklyHighlightWarningFilter"+this.randomIdentifier_,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),Blockly.utils.dom.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.Colours.warningGlowSize},t),n=Blockly.utils.dom.createSvgElement("feComponentTransfer",{result:"outBlur"},t),Blockly.utils.dom.createSvgElement("feFuncA",{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),Blockly.utils.dom.createSvgElement("feFlood",{"flood-color":Blockly.Colours.warningGlow,"flood-opacity":Blockly.Colours.warningGlowOpacity,result:"outColor"},t),Blockly.utils.dom.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.warningGlowFilterId=t.id,this.warningGlowFilter_=t,t=this.FIELD_DROPDOWN_SVG_ARROW_SIZE,(e=Blockly.utils.dom.createSvgElement("image",{id:"blocklyDropdownArrowSvg"+this.randomIdentifier_,height:t+"px",width:t+"px"},e)).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.FIELD_DROPDOWN_SVG_ARROW_DATAURI),this.dropdownArrowImageId=e.id},Blockly.pxt.ConstantProvider.prototype.makeEllipses=function(){for(var e=this.ELLIPSES_RADIUS,t=this.ELLIPSES_SPACING,n="",o=0;o<3;o++)n+=Blockly.utils.svgPaths.moveBy(t,0)+Blockly.utils.svgPaths.arc("a","180 1,1",e,Blockly.utils.svgPaths.point(2*e,0));for(o=0;o<3;o++)n+=Blockly.utils.svgPaths.arc("a","180 1,1",e,Blockly.utils.svgPaths.point(2*-e,0))+Blockly.utils.svgPaths.moveBy(-t,0);return n},Blockly.pxt.ConstantProvider.prototype.getCSS_=function(e){var t="."+e+"-renderer";return Blockly.pxt.ConstantProvider.superClass_.getCSS_.call(this,e).concat([t+" .blocklyConnectionIndicator, "+t+" .blocklyInputConnectionIndicator {","fill: #ff0000;","fill-opacity: 0.9;","stroke: #ffff00;","stroke-width: 3px;","}",t+" .blocklyConnectionIndicator {","display: none;","}",t+" .blocklyBlockDragSurface > g > .blocklyDraggable > .blocklyConnectionIndicator {","display: block;","}",t+" .blocklyConnectionLine {","stroke: #ffff00;","stroke-width: 4px;","}",t+" .blocklyConnectionLine.hidden {","display: none;","}"])},Blockly.pxt.PathObject=function(e,t,n){Blockly.pxt.PathObject.superClass_.constructor.call(this,e,t,n),this.svgOutputConnectionIndicator_=this.svgPathHighlightedWarning_=this.svgPathHighlighted_=null,Blockly.utils.dom.addClass(this.svgPath,"blocklyBlockBackground")},Blockly.utils.object.inherits(Blockly.pxt.PathObject,Blockly.zelos.PathObject),Blockly.pxt.PathObject.prototype.setPath=function(e){Blockly.pxt.PathObject.superClass_.setPath.call(this,e),this.svgPathHighlighted_&&this.svgPathHighlighted_.setAttribute("d",e),this.svgPathHighlightedWarning_&&this.svgPathHighlightedWarning_.setAttribute("d",e)},Blockly.pxt.PathObject.prototype.applyColour=function(e){var t;Blockly.pxt.PathObject.superClass_.applyColour.call(this,e),e.isShadow()&&e.getParent()&&(e=e.getParent().style.colourTertiary,t=Blockly.utils.colour.hexToRgb(e),Blockly.utils.colour.luminance(t)<.15)&&this.svgPath.setAttribute("stroke",Blockly.utils.colour.lighten(e,.3))},Blockly.pxt.PathObject.prototype.updateHighlighted=function(e){this.setClass_("blocklyHighlighted",e),e?this.svgPathHighlighted_||(this.svgPathHighlighted_=this.svgPath.cloneNode(!0),this.svgPathHighlighted_.setAttribute("fill","none"),this.svgPathHighlighted_.setAttribute("filter","url(#"+this.constants_.highlightedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathHighlighted_)):this.svgPathHighlighted_&&(this.svgRoot.removeChild(this.svgPathHighlighted_),this.svgPathHighlighted_=null)},Blockly.pxt.PathObject.prototype.updateHighlightedWarning=function(e){this.setClass_("blocklyHighlightedWarning",e),e?this.svgPathHighlightedWarning_||(this.svgPathHighlightedWarning_=this.svgPath.cloneNode(!0),this.svgPathHighlightedWarning_.setAttribute("fill","none"),this.svgPathHighlightedWarning_.setAttribute("filter","url(#"+this.constants_.warningGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathHighlightedWarning_)):this.svgPathHighlightedWarning_&&(this.svgRoot.removeChild(this.svgPathHighlightedWarning_),this.svgPathHighlightedWarning_=null)},Blockly.pxt.PathObject.prototype.updateSelected=function(e){Blockly.pxt.PathObject.superClass_.updateSelected.call(this,e),e&&this.svgOutputConnectionIndicator_&&(this.svgRoot.removeChild(this.svgOutputConnectionIndicator_),this.svgRoot.appendChild(this.svgOutputConnectionIndicator_))},Blockly.pxt.PathObject.prototype.positionConnectionIndicator=function(e,t){this.svgOutputConnectionIndicator_||(this.svgOutputConnectionIndicator_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyConnectionIndicator"}),this.svgRoot.appendChild(this.svgOutputConnectionIndicator_),Blockly.utils.dom.createSvgElement("circle",{r:Blockly.CONNECTION_INDICATOR_RADIUS},this.svgOutputConnectionIndicator_)),this.svgOutputConnectionIndicator_.setAttribute("transform","translate("+e+","+t+")")},Blockly.pxt.Drawer=function(e,t){Blockly.pxt.Drawer.superClass_.constructor.call(this,e,t)},Blockly.utils.object.inherits(Blockly.pxt.Drawer,Blockly.zelos.Drawer),Blockly.pxt.Drawer.prototype.drawCollapsedStack_=function(e){var t=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.constants_.INSIDE_CORNERS.width,n=this.constants_.STATEMENT_INPUT_PADDING_LEFT+2*this.constants_.INSIDE_CORNERS.width+Blockly.utils.svgPaths.lineOnAxis("h",-this.constants_.INSIDE_CORNERS.width)+this.constants_.INSIDE_CORNERS.pathTop,o=e.height-2*this.constants_.INSIDE_CORNERS.height,r=this.constants_.INSIDE_CORNERS.pathBottom+Blockly.utils.svgPaths.lineOnAxis("h",this.constants_.INSIDE_CORNERS.width),i=this.constants_.ELLIPSES;this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.bottomRight+Blockly.utils.svgPaths.lineOnAxis("H",t)+n+Blockly.utils.svgPaths.lineOnAxis("v",o/2)+i+Blockly.utils.svgPaths.lineOnAxis("v",o/2)+r+Blockly.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.constants_.OUTSIDE_CORNERS.rightHeight)+this.constants_.OUTSIDE_CORNERS.topRight},Blockly.pxt.Drawer.prototype.drawLeft_=function(){var e;Blockly.pxt.Drawer.superClass_.drawLeft_.call(this),this.info_.rows.find(function(e){return e.isCollapsedStack})&&(e=this.info_.startY,Blockly.blockRendering.Types.isLeftRoundedCorner(this.info_.topRow.elements[0])&&(e+=this.constants_.OUTSIDE_CORNERS.rightHeight),this.outlinePath_=this.outlinePath_.slice(0,-1),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",e))},Blockly.pxt.Drawer.prototype.drawLeftDynamicConnection_=function(){Blockly.pxt.Drawer.superClass_.drawLeftDynamicConnection_.call(this),this.block_.pathObject.positionConnectionIndicator(this.block_.outputConnection.getOffsetInBlock().x,this.block_.outputConnection.getOffsetInBlock().y)},Blockly.pxt.CollapsedInputRow=function(e){Blockly.pxt.CollapsedInputRow.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.INPUT_ROW},Blockly.utils.object.inherits(Blockly.pxt.CollapsedInputRow,Blockly.blockRendering.Row),Blockly.pxt.CollapsedInputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT},Blockly.pxt.RenderInfo=function(e,t){Blockly.pxt.RenderInfo.superClass_.constructor.call(this,e,t)},Blockly.utils.object.inherits(Blockly.pxt.RenderInfo,Blockly.zelos.RenderInfo),Blockly.pxt.RenderInfo.prototype.addCollapsedRow_=function(e){return this.rows.push(e),e=new Blockly.pxt.CollapsedInputRow(this.constants_),this.inputRowNum_++,e.isCollapsedStack=!0,e.hasDummyInput=!0,e},Blockly.pxt.Renderer=function(e){Blockly.zelos.Renderer.superClass_.constructor.call(this,e)},Blockly.utils.object.inherits(Blockly.pxt.Renderer,Blockly.zelos.Renderer),Blockly.pxt.Renderer.prototype.makePathObject=function(e,t){return new Blockly.pxt.PathObject(e,t,this.getConstants())},Blockly.pxt.Renderer.prototype.makeRenderInfo_=function(e){return new Blockly.pxt.RenderInfo(this,e)},Blockly.pxt.Renderer.prototype.makeDrawer_=function(e,t){return new Blockly.pxt.Drawer(e,t)},Blockly.pxt.Renderer.prototype.makeConstants_=function(){return new Blockly.pxt.ConstantProvider},Blockly.blockRendering.register("pxt",Blockly.pxt.Renderer),Blockly.Themes.Dark={},Blockly.Themes.Dark.defaultBlockStyles={colour_blocks:{colourPrimary:"#a5745b",colourSecondary:"#dbc7bd",colourTertiary:"#845d49"},list_blocks:{colourPrimary:"#745ba5",colourSecondary:"#c7bddb",colourTertiary:"#5d4984"},logic_blocks:{colourPrimary:"#5b80a5",colourSecondary:"#bdccdb",colourTertiary:"#496684"},loop_blocks:{colourPrimary:"#5ba55b",colourSecondary:"#bddbbd",colourTertiary:"#498449"},math_blocks:{colourPrimary:"#5b67a5",colourSecondary:"#bdc2db",colourTertiary:"#495284"},procedure_blocks:{colourPrimary:"#995ba5",colourSecondary:"#d6bddb",colourTertiary:"#7a4984"},text_blocks:{colourPrimary:"#5ba58c",colourSecondary:"#bddbd1",colourTertiary:"#498470"},variable_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a"},variable_dynamic_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a"},hat_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a",hat:"cap"}},Blockly.Themes.Dark.categoryStyles={colour_category:{colour:"#a5745b"},list_category:{colour:"#745ba5"},logic_category:{colour:"#5b80a5"},loop_category:{colour:"#5ba55b"},math_category:{colour:"#5b67a5"},procedure_category:{colour:"#995ba5"},text_category:{colour:"#5ba58c"},variable_category:{colour:"#a55b99"},variable_dynamic_category:{colour:"#a55b99"}},Blockly.Themes.Dark=new Blockly.Theme("dark",Blockly.Themes.Dark.defaultBlockStyles,Blockly.Themes.Dark.categoryStyles),Blockly.Themes.Dark.setComponentStyle("workspaceBackgroundColour","#1e1e1e"),Blockly.Themes.Dark.setComponentStyle("toolboxBackgroundColour","#333"),Blockly.Themes.Dark.setComponentStyle("toolboxForegroundColour","#fff"),Blockly.Themes.Dark.setComponentStyle("flyoutBackgroundColour","#252526"),Blockly.Themes.Dark.setComponentStyle("flyoutForegroundColour","#ccc"),Blockly.Themes.Dark.setComponentStyle("flyoutOpacity",1),Blockly.Themes.Dark.setComponentStyle("scrollbarColour","#797979"),Blockly.Themes.Dark.setComponentStyle("scrollbarOpacity",.4),Blockly.Css.register([".dark-theme .blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: #2a2d2e;","}",".dark-theme.blocklyWidgetDiv .goog-menu, ",".dark-theme.blocklyDropDownDiv {","background-color: #3c3c3c;","}",".dark-theme.blocklyDropDownDiv {","border-color: #565656;","}",".dark-theme.blocklyWidgetDiv .goog-menuitem-content, ",".dark-theme.blocklyDropDownDiv .goog-menuitem-content {","color: #f0f0f0;","}",".dark-theme.blocklyWidgetDiv .goog-menuitem-disabled"," .goog-menuitem-content,",".dark-theme.blocklyDropDownDiv .goog-menuitem-disabled"," .goog-menuitem-content {","color: #8a8a8a !important;","}"]),Blockly.Themes.Deuteranopia={},Blockly.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},Blockly.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},Blockly.Themes.Deuteranopia=new Blockly.Theme("deuteranopia",Blockly.Themes.Deuteranopia.defaultBlockStyles,Blockly.Themes.Deuteranopia.categoryStyles),Blockly.Themes.HighContrast={},Blockly.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},Blockly.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},Blockly.Themes.HighContrast=new Blockly.Theme("highcontrast",Blockly.Themes.HighContrast.defaultBlockStyles,Blockly.Themes.HighContrast.categoryStyles),Blockly.Themes.Tritanopia={},Blockly.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},Blockly.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},Blockly.Themes.Tritanopia=new Blockly.Theme("tritanopia",Blockly.Themes.Tritanopia.defaultBlockStyles,Blockly.Themes.Tritanopia.categoryStyles),Blockly.requires={},Blockly.Blocks.colour={},Blockly.constants={},Blockly.Constants={},Blockly.Constants.Colour={},Blockly.Constants.Colour.HUE=20,Blockly.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"field_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"LEFT"},{type:"input_value",name:"GREEN",check:"Number",align:"LEFT"},{type:"input_value",name:"BLUE",check:"Number",align:"LEFT"}],output:"Colour",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"LEFT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"LEFT"},{type:"input_value",name:"RATIO",check:"Number",align:"LEFT"}],output:"Colour",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),Blockly.PXTBlockly={},Blockly.PXTBlockly.Extensions={},Blockly.PXTBlockly.Extensions.INLINE_SVGS=function(){this.ADD_IMAGE_DATAURI="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4KCjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0icmVwZWF0IgogICB4PSIwcHgiCiAgIHk9IjBweCIKICAgdmlld0JveD0iMCAwIDI0IDI0IgogICBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNCAyNDsiCiAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IgogICBzb2RpcG9kaTpkb2NuYW1lPSJhZGQuc3ZnIj48bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGExNSI+PHJkZjpSREY+PGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPjxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PjxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz48ZGM6dGl0bGU+cmVwZWF0PC9kYzp0aXRsZT48L2NjOldvcms+PC9yZGY6UkRGPjwvbWV0YWRhdGE+PGRlZnMKICAgICBpZD0iZGVmczEzIiAvPjxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZjQ4MjEiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTY4MCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI5NjkiCiAgICAgaWQ9Im5hbWVkdmlldzExIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIxOS42NjY2NjciCiAgICAgaW5rc2NhcGU6Y3g9IjEyLjkxNTI1NCIKICAgICBpbmtzY2FwZTpjeT0iMTYuMDY3Nzk2IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0icmVwZWF0IiAvPjxzdHlsZQogICAgIHR5cGU9InRleHQvY3NzIgogICAgIGlkPSJzdHlsZTMiPgoJLnN0MHtmaWxsOiNDRjhCMTc7fQoJLnN0MXtmaWxsOiNGRkZGRkY7fQo8L3N0eWxlPjx0aXRsZQogICAgIGlkPSJ0aXRsZTUiPnJlcGVhdDwvdGl0bGU+PHJlY3QKICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MC4wNzg0MzEzNyIKICAgICBpZD0icmVjdDQxNDMiCiAgICAgd2lkdGg9IjQuMDUwMDAwMiIKICAgICBoZWlnaHQ9IjEyLjM5NzA1IgogICAgIHg9IjkuOTc1MDAwNCIKICAgICB5PSItMTguMTk4NTI2IgogICAgIHJ4PSIwLjgxIgogICAgIHJ5PSIwLjgxIgogICAgIHRyYW5zZm9ybT0ic2NhbGUoMSwtMSkiIC8+PHJlY3QKICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MC4wNzg0MzEzNyIKICAgICBpZD0icmVjdDQxNDMtMSIKICAgICB3aWR0aD0iNC4wNTAwMDAyIgogICAgIGhlaWdodD0iMTIuMzk3MTE5IgogICAgIHg9IjkuOTc1MDAwNCIKICAgICB5PSI1LjgwMTQ0MDciCiAgICAgcng9IjAuODEiCiAgICAgcnk9IjAuODEiCiAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMCwxLDEsMCwwLDApIiAvPjxjaXJjbGUKICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICBpZD0icGF0aDQxMzYiCiAgICAgY3g9IjEyIgogICAgIGN5PSIxMiIKICAgICByPSIxMC41MDMxOTEiIC8+PC9zdmc+",this.REMOVE_IMAGE_DATAURI="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4KCjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0icmVwZWF0IgogICB4PSIwcHgiCiAgIHk9IjBweCIKICAgdmlld0JveD0iMCAwIDI0IDI0IgogICBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNCAyNDsiCiAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IgogICBzb2RpcG9kaTpkb2NuYW1lPSJyZW1vdmUuc3ZnIj48bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGExNSI+PHJkZjpSREY+PGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPjxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PjxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz48ZGM6dGl0bGU+cmVwZWF0PC9kYzp0aXRsZT48L2NjOldvcms+PC9yZGY6UkRGPjwvbWV0YWRhdGE+PGRlZnMKICAgICBpZD0iZGVmczEzIiAvPjxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZjFhZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTY4MCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI5NTAiCiAgICAgaWQ9Im5hbWVkdmlldzExIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIxOS42NjY2NjciCiAgICAgaW5rc2NhcGU6Y3g9IjAuMDUwODQ3NTIxIgogICAgIGlua3NjYXBlOmN5PSI5Ljk2NjEwMTciCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJyZXBlYXQiIC8+PHN0eWxlCiAgICAgdHlwZT0idGV4dC9jc3MiCiAgICAgaWQ9InN0eWxlMyI+Cgkuc3Qwe2ZpbGw6I0NGOEIxNzt9Cgkuc3Qxe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+PHRpdGxlCiAgICAgaWQ9InRpdGxlNSI+cmVwZWF0PC90aXRsZT48cmVjdAogICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1saW5lY2FwOnNxdWFyZTtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MDtzdHJva2Utb3BhY2l0eTowLjA3ODQzMTM3IgogICAgIGlkPSJyZWN0NDE0My0xIgogICAgIHdpZHRoPSI0LjA1MDAwMDIiCiAgICAgaGVpZ2h0PSIxMi4zOTcxMTkiCiAgICAgeD0iOS45NzUwMDA0IgogICAgIHk9IjUuODAxNDQwNyIKICAgICByeD0iMC44MSIKICAgICByeT0iMC44MSIKICAgICB0cmFuc2Zvcm09Im1hdHJpeCgwLDEsMSwwLDAsMCkiIC8+PGNpcmNsZQogICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnNxdWFyZTtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MDtzdHJva2Utb3BhY2l0eToxIgogICAgIGlkPSJwYXRoNDEzNiIKICAgICBjeD0iMTIiCiAgICAgY3k9IjEyIgogICAgIHI9IjEwLjUwMzE5MSIgLz48L3N2Zz4="},Blockly.PXTBlockly.Extensions.FUNCTION_CONTEXTMENU_EDIT={customContextMenu:function(e){e.push(Blockly.Functions.makeGoToDefinitionOption(this))}},Blockly.PXTBlockly.Extensions.OUTPUT_NUMBER=function(){this.setInputsInline(!0),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setOutput(!0,"Number")},Blockly.PXTBlockly.Extensions.OUTPUT_STRING=function(){this.setInputsInline(!0),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setOutput(!0,"String")},Blockly.PXTBlockly.Extensions.OUTPUT_BOOLEAN=function(){this.setInputsInline(!0),this.setOutputShape(Blockly.OUTPUT_SHAPE_HEXAGONAL),this.setOutput(!0,"Boolean")},Blockly.PXTBlockly.Extensions.OUTPUT_ARRAY=function(){this.setInputsInline(!0),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setOutput(!0,"Array")},Blockly.PXTBlockly.Extensions.registerAll=function(){Blockly.Extensions.register("inline-svgs",this.INLINE_SVGS),Blockly.Extensions.registerMixin("function_contextmenu_edit",Blockly.PXTBlockly.Extensions.FUNCTION_CONTEXTMENU_EDIT),Blockly.Extensions.register("output_number",Blockly.PXTBlockly.Extensions.OUTPUT_NUMBER),Blockly.Extensions.register("output_string",Blockly.PXTBlockly.Extensions.OUTPUT_STRING),Blockly.Extensions.register("output_boolean",Blockly.PXTBlockly.Extensions.OUTPUT_BOOLEAN),Blockly.Extensions.register("output_array",Blockly.PXTBlockly.Extensions.OUTPUT_ARRAY)},Blockly.PXTBlockly.Extensions.registerAll(),Blockly.Blocks.lists={},Blockly.Constants.Lists={},Blockly.Constants.Lists.HUE=260,Blockly.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Blockly.Blocks.lists_create_with={init:function(){Blockly.Extensions.apply("inline-svgs",this,!1),this.setHelpUrl(Blockly.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.horizontalAfter_=this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setInputsInline(!0),this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),this.horizontalAfter_&&e.setAttribute("horizontalafter",this.horizontalAfter_),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),(e=e.getAttribute("horizontalafter"))&&(this.horizontalAfter_=parseInt(e,10)),this.updateShape_()},storeConnections_:function(){this.valueConnections_=[];for(var e=0;e<this.itemCount_;e++)this.valueConnections_.push(this.getInput("ADD"+e).connection.targetConnection)},restoreConnections_:function(){for(var e=0;e<this.itemCount_;e++)Blockly.Mutator.reconnect(this.valueConnections_[e],this,"ADD"+e)},addItem_:function(){function e(e,t){var n=[];if(e&&e.children)for(var o=0;o<e.children.length;o++){var r=e.children[o];r.tagName===t&&n.push(r)}return n}function t(e,t,n){var o;t&&n&&((o=Blockly.utils.xml.createElement("value")).setAttribute("name",t),o.appendChild(r("shadow",n)),e.appendChild(o))}function r(e,t){return(e=Blockly.utils.xml.createElement(e)).setAttribute("type",t),e.setAttribute("id",Blockly.utils.genUid()),e}if(this.storeConnections_(),this.update_(function(){this.itemCount_++}),this.restoreConnections_(),1<this.itemCount_){var n=this.getInput("ADD0");if(n&&n.connection.targetConnection){var o=this.getInput("ADD"+(this.itemCount_-1)),i=(l=n.connection.getShadowDom())&&l.getAttribute("type");if(i){for(var s=r("shadow",i),a=e(l,"value"),l=0;l<a.length;l++){var c=a[l],u=c.getAttribute("name"),d=e(c,"shadow")[0];t(s,u,d=d&&d.getAttribute("type"))}o.connection.setShadowDom(s)}if((l=(n=(l=n.connection.targetConnection)&&l.getSourceBlock())&&n.type)&&l!==i){if(i=r("block",l),n&&n.inputList)for(l=0;l<n.inputList.length;l++)d=(d=(c=n.inputList[l]).connection&&c.connection.getShadowDom())&&d.getAttribute("type"),t(i,c.name,d);i=Blockly.Xml.domToBlock(i,this.workspace),o.connection.connect(i.outputConnection)}else o.connection.respawnShadow_()}}},removeItem_:function(){this.storeConnections_(),this.update_(function(){this.itemCount_--}),this.restoreConnections_()},update_:function(e){Blockly.Events.setGroup(!0);var t=this,n=(n=t.mutationToDom())&&Blockly.Xml.domToText(n),o=t.rendered,r=(t.rendered=!1,e&&e.call(this),this.updateShape_(),t.rendered=o,t.initSvg(),Blockly.Events.getGroup());n!=(e=(e=t.mutationToDom())&&Blockly.Xml.domToText(e))&&(Blockly.Events.fire(new Blockly.Events.BlockChange(t,"mutation",null,n,e)),setTimeout(function(){Blockly.Events.setGroup(r),t.bumpNeighbours(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)),t.rendered&&t.render(),Blockly.Events.setGroup(!1)},updateShape_:function(){for(var e=this,t=function(){e.removeItem_()},n=(this.itemCount_?(this.getInput("EMPTY")&&this.removeInput("EMPTY"),this.getInput("TITLE")||this.appendDummyInput("TITLE").appendField(Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH)):(this.getInput("TITLE")&&this.removeInput("TITLE"),this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(Blockly.Msg.LISTS_CREATE_EMPTY_TITLE)),0),n=0;n<this.itemCount_;n++)this.getInput("ADD"+n)||this.appendValueInput("ADD"+n);for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++;this.getInput("BUTTONS")&&this.removeInput("BUTTONS"),n=this.appendDummyInput("BUTTONS"),0<this.itemCount_&&n.appendField(new Blockly.FieldImage(this.REMOVE_IMAGE_DATAURI,24,24,"*",t,!1)),n.appendField(new Blockly.FieldImage(this.ADD_IMAGE_DATAURI,24,24,"*",function(){e.addItem_()},!1)),t=this.itemCount_<=this.horizontalAfter_,this.setInputsInline(t),this.setOutputShape(t?Blockly.OUTPUT_SHAPE_ROUND:Blockly.OUTPUT_SHAPE_SQUARE)}},Blockly.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},Blockly.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},Blockly.Blocks.lists_indexOf={init:function(){var e=[[Blockly.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[Blockly.Msg.LISTS_INDEX_OF_LAST,"LAST"]],t=(this.setHelpUrl(Blockly.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.appendValueInput("VALUE").setCheck("Array").appendField(Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new Blockly.FieldDropdown(e),"END"),this.setInputsInline(!0),this);this.setTooltip(function(){return Blockly.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",t.workspace.options.oneBasedIndex?"0":"-1")})}},Blockly.Blocks.lists_getIndex={init:function(){var e=[[Blockly.Msg.LISTS_GET_INDEX_GET,"GET"],[Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[Blockly.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]],o=(this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.Msg.LISTS_GET_INDEX_LAST,"LAST"],[Blockly.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(Blockly.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),e=new Blockly.FieldDropdown(e,function(e){e="REMOVE"==e,this.getSourceBlock().updateStatement_(e)}),this.appendValueInput("VALUE").setCheck("Array").appendField(Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),Blockly.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this);this.setTooltip(function(){var e=o.getFieldValue("MODE"),t=o.getFieldValue("WHERE"),n="";switch(e+" "+t){case"GET FROM_START":case"GET FROM_END":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return"FROM_START"!=t&&"FROM_END"!=t||(n+="  "+("FROM_START"==t?Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP:Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),n})},mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation"),t=(e.setAttribute("statement",!this.outputConnection),this.getInput("AT").type==Blockly.INPUT_VALUE);return e.setAttribute("at",t),e},domToMutation:function(e){var t="true"==e.getAttribute("statement");this.updateStatement_(t),e="false"!=e.getAttribute("at"),this.updateAt_(e)},updateStatement_:function(e){e!=!this.outputConnection&&(this.unplug(!0,!0),e?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(o){this.removeInput("AT"),this.removeInput("ORDINAL",!0),o?(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var e=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(e){var t,n="FROM_START"==e||"FROM_END"==e;if(n!=o)return(t=this.getSourceBlock()).updateAt_(n),t.setFieldValue(e,"WHERE"),null});this.getInput("AT").appendField(e,"WHERE"),Blockly.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},Blockly.Blocks.lists_setIndex={init:function(){var e=[[Blockly.Msg.LISTS_SET_INDEX_SET,"SET"],[Blockly.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]],o=(this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.Msg.LISTS_GET_INDEX_LAST,"LAST"],[Blockly.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(Blockly.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new Blockly.FieldDropdown(e),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(Blockly.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this);this.setTooltip(function(){var e=o.getFieldValue("MODE"),t=o.getFieldValue("WHERE"),n="";switch(e+" "+t){case"SET FROM_START":case"SET FROM_END":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!=t&&"FROM_END"!=t||(n+="  "+Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),n})},mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation"),t=this.getInput("AT").type==Blockly.INPUT_VALUE;return e.setAttribute("at",t),e},domToMutation:function(e){e="false"!=e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(o){this.removeInput("AT"),this.removeInput("ORDINAL",!0),o?(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var e=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(e){var t,n="FROM_START"==e||"FROM_END"==e;if(n!=o)return(t=this.getSourceBlock()).updateAt_(n),t.setFieldValue(e,"WHERE"),null});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(e,"WHERE")}},Blockly.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(Blockly.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),Blockly.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation"),t=this.getInput("AT1").type==Blockly.INPUT_VALUE;return e.setAttribute("at1",t),t=this.getInput("AT2").type==Blockly.INPUT_VALUE,e.setAttribute("at2",t),e},domToMutation:function(e){var t="true"==e.getAttribute("at1");e="true"==e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(o,r){this.removeInput("AT"+o),this.removeInput("ORDINAL"+o,!0),r?(this.appendValueInput("AT"+o).setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+o).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+o);var e=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+o],function(e){var t,n="FROM_START"==e||"FROM_END"==e;if(n!=r)return(t=this.getSourceBlock()).updateAt_(o,n),t.setFieldValue(e,"WHERE"+o),null});this.getInput("AT"+o).appendField(e,"WHERE"+o),1==o&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1"))&&this.moveInputBefore("ORDINAL1","AT2"),Blockly.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},Blockly.Blocks.lists_sort={init:function(){this.jsonInit({message0:Blockly.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[Blockly.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[Blockly.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[Blockly.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[Blockly.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"list_blocks",tooltip:Blockly.Msg.LISTS_SORT_TOOLTIP,helpUrl:Blockly.Msg.LISTS_SORT_HELPURL})}},Blockly.Blocks.lists_split={init:function(){var t=this,e=new Blockly.FieldDropdown([[Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(e){t.updateType_(e)});this.setHelpUrl(Blockly.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(e,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip(function(){var e=t.getFieldValue("MODE");if("SPLIT"==e)return Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==e)return Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+e)})},updateType_:function(e){var t,n;this.getFieldValue("MODE")!=e&&((t=this.getInput("INPUT").connection).setShadowDom(null),n=t.targetBlock())&&(t.disconnect(),n.isShadow()?n.dispose():this.bumpNeighbours()),"SPLIT"==e?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation");return e.setAttribute("mode",this.getFieldValue("MODE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("mode"))}},Blockly.Blocks.logic={},Blockly.Constants.Logic={},Blockly.Constants.Logic.HUE=210,Blockly.Blocks.controls_if={init:function(){Blockly.Extensions.apply("inline-svgs",this,!1),this.elseCount_=this.elseifCount_=0,this.setHelpUrl(Blockly.Msg.CONTROLS_IF_HELPURL),this.appendValueInput("IF0").setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_IF),this.appendDummyInput("THEN0").appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN),this.appendStatementInput("DO0"),this.setOutputShape(Blockly.OUTPUT_SHAPE_HEXAGONAL),this.updateShape_(),this.setInputsInline(!0),this.setColour(Blockly.Msg.LOGIC_HUE),this.setPreviousStatement(!0),this.setNextStatement(!0),Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION.call(this)},mutationToDom:function(){var e;return this.elseifCount_||this.elseCount_?(e=Blockly.utils.xml.createElement("mutation"),this.elseifCount_&&e.setAttribute("elseif",this.elseifCount_),this.elseCount_&&e.setAttribute("else",1),e):null},domToMutation:function(e){e&&(this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(e.getAttribute("else"),10)||0,this.rebuildShape_())},storeConnections_:function(e){e=e||0,this.valueConnections_=[null],this.statementConnections_=[null],this.elseStatementConnection_=null;for(var t=1;t<=this.elseifCount_;t++)e!=t&&(this.valueConnections_.push(this.getInput("IF"+t).connection.targetConnection),this.statementConnections_.push(this.getInput("DO"+t).connection.targetConnection));this.getInput("ELSE")&&(this.elseStatementConnection_=this.getInput("ELSE").connection.targetConnection)},restoreConnections_:function(){for(var e=1;e<=this.elseifCount_;e++)Blockly.Mutator.reconnect(this.valueConnections_[e],this,"IF"+e),Blockly.Mutator.reconnect(this.statementConnections_[e],this,"DO"+e);this.getInput("ELSE")&&Blockly.Mutator.reconnect(this.elseStatementConnection_,this,"ELSE")},addElse_:function(){this.storeConnections_(),this.update_(function(){this.elseCount_++}),this.restoreConnections_()},removeElse_:function(){this.storeConnections_(),this.update_(function(){this.elseCount_--}),this.restoreConnections_()},addElseIf_:function(){this.storeConnections_(),this.update_(function(){this.elseifCount_++}),this.restoreConnections_()},removeElseIf_:function(e){this.storeConnections_(e),this.update_(function(){this.elseifCount_--}),this.restoreConnections_()},update_:function(e){Blockly.Events.setGroup(!0);var t=this,n=(n=t.mutationToDom())&&Blockly.Xml.domToText(n),o=t.rendered,r=(t.rendered=!1,e&&e.call(this),this.updateShape_(),t.rendered=o,t.initSvg(),Blockly.Events.getGroup());n!=(e=(e=t.mutationToDom())&&Blockly.Xml.domToText(e))&&(Blockly.Events.fire(new Blockly.Events.BlockChange(t,"mutation",null,n,e)),setTimeout(function(){Blockly.Events.setGroup(r),t.bumpNeighbours(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)),t.rendered&&t.render(),Blockly.Events.setGroup(!1)},updateShape_:function(){var t=this;this.getInput("ELSE")&&(this.removeInput("ELSE"),this.removeInput("ELSETITLE"),this.removeInput("ELSEBUTTONS"));for(var e=1;this.getInput("IF"+e);)this.removeInput("IF"+e),this.removeInput("IFTITLE"+e),this.removeInput("IFBUTTONS"+e),this.removeInput("DO"+e),e++;for(e=1;e<=this.elseifCount_;e++){var n=function(e){return function(){t.removeElseIf_(e)}}(e);this.appendValueInput("IF"+e).setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendDummyInput("IFTITLE"+e).appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN),this.appendDummyInput("IFBUTTONS"+e).appendField(new Blockly.FieldImage(this.REMOVE_IMAGE_DATAURI,24,24,"*",n,!1)).setAlign(Blockly.ALIGN_RIGHT),this.appendStatementInput("DO"+e)}this.elseCount_&&(this.appendDummyInput("ELSETITLE").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE),this.appendDummyInput("ELSEBUTTONS").setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldImage(this.REMOVE_IMAGE_DATAURI,24,24,"*",t.removeElse_.bind(t),!1)),this.appendStatementInput("ELSE")),this.getInput("ADDBUTTON")&&this.removeInput("ADDBUTTON"),e=function(){0==t.elseCount_?t.addElse_():(t.elseifCount_||(t.elseifCount_=0),t.addElseIf_())},(t=this).appendDummyInput("ADDBUTTON").appendField(new Blockly.FieldImage(this.ADD_IMAGE_DATAURI,24,24,"*",e,!1))},rebuildShape_:function(){var e=[null],t=[null],n=null;this.getInput("ELSE")&&(n=this.getInput("ELSE").connection.targetConnection);for(var o=1;this.getInput("IF"+o);){var r=this.getInput("IF"+o),i=this.getInput("DO"+o);e.push(r.connection.targetConnection),t.push(i.connection.targetConnection),o++}this.updateShape_(),this.reconnectChildBlocks_(e,t,n)},reconnectChildBlocks_:function(e,t,n){for(var o=1;o<=this.elseifCount_;o++)Blockly.Mutator.reconnect(e[o],this,"IF"+o),Blockly.Mutator.reconnect(t[o],this,"DO"+o);Blockly.Mutator.reconnect(n,this,"ELSE")}},Blockly.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1 %{BKY_CONTROLS_IF_MSG_THEN}",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE}",message3:"%1",args3:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),Blockly.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Blockly.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},Blockly.Extensions.register("logic_op_tooltip",Blockly.Extensions.buildTooltipForDropdown("OP",Blockly.Constants.Logic.TOOLTIPS_BY_OP)),Blockly.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){var e;return this.elseifCount_||this.elseCount_?(e=Blockly.utils.xml.createElement("mutation"),this.elseifCount_&&e.setAttribute("elseif",this.elseifCount_),this.elseCount_&&e.setAttribute("else",1),e):null},domToMutation:function(e){this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(e.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(e){var t=e.newBlock("controls_if_if");t.initSvg();for(var n=t.nextConnection,o=1;o<=this.elseifCount_;o++){var r=e.newBlock("controls_if_elseif");r.initSvg(),n.connect(r.previousConnection),n=r.nextConnection}return this.elseCount_&&((e=e.newBlock("controls_if_else")).initSvg(),n.connect(e.previousConnection)),t},compose:function(e){e=e.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var t=[null],n=[null],o=null;e;){switch(e.type){case"controls_if_elseif":this.elseifCount_++,t.push(e.valueConnection_),n.push(e.statementConnection_);break;case"controls_if_else":this.elseCount_++,o=e.statementConnection_;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.nextConnection&&e.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(t,n,o)},saveConnections:function(e){e=e.nextConnection.targetBlock();for(var t=1;e;){switch(e.type){case"controls_if_elseif":var n=this.getInput("IF"+t),o=this.getInput("DO"+t);e.valueConnection_=n&&n.connection.targetConnection,e.statementConnection_=o&&o.connection.targetConnection,t++;break;case"controls_if_else":o=this.getInput("ELSE"),e.statementConnection_=o&&o.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.nextConnection&&e.nextConnection.targetBlock()}},rebuildShape_:function(){var e=[null],t=[null],n=null;this.getInput("ELSE")&&(n=this.getInput("ELSE").connection.targetConnection);for(var o=1;this.getInput("IF"+o);){var r=this.getInput("IF"+o),i=this.getInput("DO"+o);e.push(r.connection.targetConnection),t.push(i.connection.targetConnection),o++}this.updateShape_(),this.reconnectChildBlocks_(e,t,n)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var e=1;this.getInput("IF"+e);)this.removeInput("IF"+e),this.removeInput("DO"+e),e++;for(e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+e).appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(e,t,n){for(var o=1;o<=this.elseifCount_;o++)Blockly.Mutator.reconnect(e[o],this,"IF"+o),Blockly.Mutator.reconnect(t[o],this,"DO"+o);Blockly.Mutator.reconnect(n,this,"ELSE")}},Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?Blockly.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?Blockly.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?Blockly.Msg.CONTROLS_IF_TOOLTIP_4:"":Blockly.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},Blockly.Extensions.register("controls_if_tooltip",Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(e){this.prevBlocks_||(this.prevBlocks_=[null,null]);var t=this.getInputTargetBlock("A"),n=this.getInputTargetBlock("B");t&&n&&!t.outputConnection.checkType(n.outputConnection)&&(Blockly.Events.setGroup(e.group),(e=this.prevBlocks_[0])!==t&&(t.unplug(),!e||e.isDisposed()||e.isShadow()||this.getInput("A").connection.connect(e.outputConnection)),(t=this.prevBlocks_[1])!==n&&(n.unplug(),!t||t.isDisposed()||t.isShadow()||this.getInput("B").connection.connect(t.outputConnection)),this.bumpNeighbours(),Blockly.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},Blockly.Extensions.register("logic_compare",Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION),Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(e){var t=this.getInputTargetBlock("THEN"),n=this.getInputTargetBlock("ELSE"),o=this.outputConnection.targetConnection;if((t||n)&&o)for(var r=0;r<2;r++){var i=1==r?t:n;i&&!i.outputConnection.checkType(o)&&(Blockly.Events.setGroup(e.group),(o===this.prevParentConnection_?(this.unplug(),o.getSourceBlock()):(i.unplug(),i)).bumpNeighbours(),Blockly.Events.setGroup(!1))}this.prevParentConnection_=o}},Blockly.Extensions.registerMixin("logic_ternary",Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),Blockly.Blocks.loops={},Blockly.Constants.Loops={},Blockly.Constants.Loops.HUE=120,Blockly.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"input_value",name:"VAR",check:"Variable"},{type:"input_value",name:"FROM",check:"Number",align:"LEFT"},{type:"input_value",name:"TO",check:"Number",align:"LEFT"},{type:"input_value",name:"BY",check:"Number",align:"LEFT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"input_value",name:"VAR",check:"Variable"},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},Blockly.Extensions.register("controls_whileUntil_tooltip",Blockly.Extensions.buildTooltipForDropdown("MODE",Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},Blockly.Extensions.register("controls_flow_tooltip",Blockly.Extensions.buildTooltipForDropdown("FLOW",Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(e){var t,n,o;this.isInFlyout||(n=(t=this.getField("VAR").getVariable()).name,this.isCollapsed())||null==n||((o={enabled:!this.inDebugWorkspace()}).text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",n),t=Blockly.Variables.generateVariableFieldDom(t),(n=Blockly.utils.xml.createElement("block")).setAttribute("type","variables_get"),n.appendChild(t),o.callback=Blockly.ContextMenu.callbackFactory(this,n),e.push(o))}},Blockly.Extensions.registerMixin("contextMenu_newGetVariableBlock",Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),Blockly.Extensions.register("controls_for_tooltip",Blockly.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),Blockly.Extensions.register("controls_forEach_tooltip",Blockly.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(e){do{if(-1!=Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(e.type))return e}while(e=e.getSurroundParent());return null},onchange:function(e){this.workspace.isDragging&&!this.workspace.isDragging()&&(Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this)?(this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1)))}},Blockly.Extensions.registerMixin("controls_flow_in_loop_check",Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),Blockly.Blocks.math={},Blockly.Constants.Math={},Blockly.Constants.Math.HUE=230,Blockly.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"field_blocks",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_integer",message0:"%1",args0:[{type:"field_number",name:"NUM",precision:1}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"field_blocks",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_whole_number",message0:"%1",args0:[{type:"field_number",name:"NUM",min:0,precision:1}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"field_blocks",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_positive_number",message0:"%1",args0:[{type:"field_number",name:"NUM",min:0}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"field_blocks",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_number_minmax",message0:"%1",args0:[{type:"field_slider",name:"SLIDER",value:0,step:1,labelText:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"field_blocks",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",mutator:"math_number_minmax_mutator",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),Blockly.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},Blockly.Extensions.register("math_op_tooltip",Blockly.Extensions.buildTooltipForDropdown("OP",Blockly.Constants.Math.TOOLTIPS_BY_OP)),Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation"),t="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return e.setAttribute("divisor_input",t),e},domToMutation:function(e){e="true"==e.getAttribute("divisor_input"),this.updateShape_(e)},updateShape_:function(e){var t=this.getInput("DIVISOR");e?t||this.appendValueInput("DIVISOR").setCheck("Number"):t&&this.removeInput("DIVISOR")}},Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(e){e="DIVISIBLE_BY"==e,this.getSourceBlock().updateShape_(e)})},Blockly.Extensions.registerMutator("math_is_divisibleby_mutator",Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),Blockly.Extensions.register("math_change_tooltip",Blockly.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(e){"MODE"==e?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation");return e.setAttribute("op",this.getFieldValue("OP")),e},domToMutation:function(e){this.updateType_(e.getAttribute("op"))}},Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(e){this.updateType_(e)}.bind(this))},Blockly.Extensions.registerMutator("math_modes_of_list_mutator",Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN,Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),Blockly.Constants.Math.MATH_NUMBER_MINMAX_MIXIN={mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation");return null!=this.inputList[0].fieldRow[0].min_&&e.setAttribute("min",this.inputList[0].fieldRow[0].min_),null!=this.inputList[0].fieldRow[0].max_&&e.setAttribute("max",this.inputList[0].fieldRow[0].max_),null!=this.inputList[0].fieldRow[0].labelText_&&e.setAttribute("label",this.inputList[0].fieldRow[0].labelText_),null!=this.inputList[0].fieldRow[0].step_&&e.setAttribute("step",this.inputList[0].fieldRow[0].step_),null!=this.inputList[0].fieldRow[0].sliderColor_&&e.setAttribute("color",this.inputList[0].fieldRow[0].sliderColor_),null!=this.inputList[0].fieldRow[0].precision_&&e.setAttribute("precision",this.inputList[0].fieldRow[0].precision_),e},domToMutation:function(e){var t=e.getAttribute("min"),n=e.getAttribute("max"),o=e.getAttribute("step"),r=e.getAttribute("label"),i=e.getAttribute("color");e=e.getAttribute("precision"),this.inputList[0].fieldRow[0].setLabel(r),this.inputList[0].fieldRow[0].setOptions(t,n,o,e),this.inputList[0].fieldRow[0].setColor(i)}},Blockly.Extensions.registerMutator("math_number_minmax_mutator",Blockly.Constants.Math.MATH_NUMBER_MINMAX_MIXIN),Blockly.Blocks.procedures={},Blockly.Blocks.procedures_defnoreturn={init:function(){var e=new Blockly.FieldTextInput("",Blockly.Procedures.rename);e.setSpellcheck(!1),this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){var e="";this.arguments_.length&&(e=Blockly.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),Blockly.Events.disable();try{this.setFieldValue(e,"PARAMS")}finally{Blockly.Events.enable()}},mutationToDom:function(e){var t=Blockly.utils.xml.createElement("mutation");e&&t.setAttribute("name",this.getFieldValue("NAME"));for(var n=0;n<this.argumentVarModels_.length;n++){var o=Blockly.utils.xml.createElement("arg"),r=this.argumentVarModels_[n];o.setAttribute("name",r.name),o.setAttribute("varid",r.getId()),e&&this.paramIds_&&o.setAttribute("paramId",this.paramIds_[n]),t.appendChild(o)}return this.hasStatements_||t.setAttribute("statements","false"),t},domToMutation:function(e){this.arguments_=[],this.argumentVarModels_=[];for(var t,n,o=0;n=e.childNodes[o];o++)"arg"==n.nodeName.toLowerCase()&&(t=n.getAttribute("name"),n=n.getAttribute("varid")||n.getAttribute("varId"),this.arguments_.push(t),null!=(n=Blockly.Variables.getOrCreateVariablePackage(this.workspace,n,t,""))?this.argumentVarModels_.push(n):console.log("Failed to create a variable with name "+t+", ignoring."));this.updateParams_(),Blockly.Procedures.mutateCallers(this),this.setStatements_("false"!==e.getAttribute("statements"))},decompose:function(e){var t=Blockly.utils.xml.createElement("block"),n=(t.setAttribute("type","procedures_mutatorcontainer"),Blockly.utils.xml.createElement("statement"));n.setAttribute("name","STACK"),t.appendChild(n);for(var o=0;o<this.arguments_.length;o++){var r=Blockly.utils.xml.createElement("block"),i=(r.setAttribute("type","procedures_mutatorarg"),Blockly.utils.xml.createElement("field")),s=(i.setAttribute("name","NAME"),Blockly.utils.xml.createTextNode(this.arguments_[o]));i.appendChild(s),r.appendChild(i),i=Blockly.utils.xml.createElement("next"),r.appendChild(i),n.appendChild(r),n=i}return e=Blockly.Xml.domToBlock(t,e),"procedures_defreturn"==this.type?e.setFieldValue(this.hasStatements_,"STATEMENTS"):e.removeInput("STATEMENT_INPUT"),Blockly.Procedures.mutateCallers(this),e},compose:function(e){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var t=e.getInputTargetBlock("STACK");t;){var n=t.getFieldValue("NAME");this.arguments_.push(n),n=this.workspace.getVariable(n,""),this.argumentVarModels_.push(n),this.paramIds_.push(t.id),t=t.nextConnection&&t.nextConnection.targetBlock()}this.updateParams_(),Blockly.Procedures.mutateCallers(this),null!==(e=e.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(e="TRUE"==e)&&(e?(this.setStatements_(!0),Blockly.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(e=this.getInput("STACK").connection,(this.statementConnection_=e.targetConnection)&&((e=e.targetBlock()).unplug(),e.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(e,t){var n=this.workspace.getVariableById(e);if(""==n.type){n=n.name,t=this.workspace.getVariableById(t);for(var o=!1,r=0;r<this.argumentVarModels_.length;r++)this.argumentVarModels_[r].getId()==e&&(this.arguments_[r]=t.name,this.argumentVarModels_[r]=t,o=!0);o&&(this.displayRenamedVar_(n,t.name),Blockly.Procedures.mutateCallers(this))}},updateVarName:function(e){for(var t,n=e.name,o=!1,r=0;r<this.argumentVarModels_.length;r++)this.argumentVarModels_[r].getId()==e.getId()&&(t=this.arguments_[r],this.arguments_[r]=n,o=!0);o&&(this.displayRenamedVar_(t,n),Blockly.Procedures.mutateCallers(this))},displayRenamedVar_:function(e,t){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var n,o=this.mutator.workspace_.getAllBlocks(!1),r=0;n=o[r];r++)"procedures_mutatorarg"==n.type&&Blockly.Names.equals(e,n.getFieldValue("NAME"))&&n.setFieldValue(t,"NAME")},customContextMenu:function(e){if(!this.isInFlyout){var t={enabled:!this.options.debugMode},n=this.getFieldValue("NAME"),o=(t.text=Blockly.Msg.PROCEDURES_CREATE_DO.replace("%1",n),Blockly.utils.xml.createElement("mutation"));for(o.setAttribute("name",n),n=0;n<this.arguments_.length;n++){var r=Blockly.utils.xml.createElement("arg");r.setAttribute("name",this.arguments_[n]),o.appendChild(r)}if((n=Blockly.utils.xml.createElement("block")).setAttribute("type",this.callType_),n.appendChild(o),t.callback=Blockly.ContextMenu.callbackFactory(this,n),e.push(t),!this.isCollapsed())for(n=0;n<this.argumentVarModels_.length;n++)t={enabled:!this.inDebugWorkspace()},o=this.argumentVarModels_[n],t.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",o.name),o=Blockly.Variables.generateVariableFieldDom(o),(r=Blockly.utils.xml.createElement("block")).setAttribute("type","variables_get"),r.appendChild(o),t.callback=Blockly.ContextMenu.callbackFactory(this,r),e.push(t)}},callType_:"procedures_callnoreturn"},Blockly.Blocks.procedures_defreturn={init:function(){var e=new Blockly.FieldTextInput("",Blockly.Procedures.rename);e.setSpellcheck(!1),this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},Blockly.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},Blockly.Blocks.procedures_mutatorarg={init:function(){var e=new Blockly.FieldTextInput(Blockly.Procedures.DEFAULT_ARG,this.validator_);e.oldShowEditorFn_=e.showEditor_,e.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,e.onFinishEditing_=this.deleteIntermediateVars_,e.createdVariables_=[],e.onFinishEditing_("x")},validator_:function(e){var t=this.getSourceBlock(),n=Blockly.Mutator.findParentWs(t.workspace);if(!(e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var o=(t.workspace.targetWorkspace||t.workspace).getAllBlocks(!1),r=0;r<o.length;r++)if(o[r].id!=this.getSourceBlock().id&&o[r].getFieldValue("NAME")==e)return null;return t.isInFlyout||((t=n.getVariable(e,""))&&t.name!=e&&n.renameVariableById(t.getId(),e),t)||(t=n.createVariable(e,""))&&this.createdVariables_&&this.createdVariables_.push(t),e},deleteIntermediateVars_:function(e){var t=Blockly.Mutator.findParentWs(this.getSourceBlock().workspace);if(t)for(var n=0;n<this.createdVariables_.length;n++){var o=this.createdVariables_[n];o.name!=e&&t.deleteVariableById(o.getId())}}},Blockly.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField(this.id,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,t){Blockly.Names.equals(e,this.getProcedureCall())&&(this.setFieldValue(t,"NAME"),this.setTooltip((this.outputConnection?Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP:Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",t)))},setProcedureParameters_:function(e,t){var n=Blockly.Procedures.getDefinition(this.getProcedureCall(),this.workspace),o=n&&n.mutator&&n.mutator.isVisible();if(o||(this.quarkConnections_={},this.quarkIds_=null),t)if(e.join("\n")==this.arguments_.join("\n"))this.quarkIds_=t;else{if(t.length!=e.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),n=this.rendered,this.rendered=!1;for(var r=0;r<this.arguments_.length;r++){var i=this.getInput("ARG"+r);i&&(i=i.connection.targetConnection,this.quarkConnections_[this.quarkIds_[r]]=i,o)&&i&&-1==t.indexOf(this.quarkIds_[r])&&(i.disconnect(),i.getSourceBlock().bumpNeighbours())}for(this.arguments_=[].concat(e),this.argumentVarModels_=[],r=0;r<this.arguments_.length;r++)e=Blockly.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[r],""),this.argumentVarModels_.push(e);if(this.updateShape_(),this.quarkIds_=t)for(r=0;r<this.arguments_.length;r++)(t=this.quarkIds_[r])in this.quarkConnections_&&(i=this.quarkConnections_[t],Blockly.Mutator.reconnect(i,this,"ARG"+r)||delete this.quarkConnections_[t]);(this.rendered=n)&&this.render()}},updateShape_:function(){for(var e=0;e<this.arguments_.length;e++){var t=this.getField("ARGNAME"+e);if(t){Blockly.Events.disable();try{t.setValue(this.arguments_[e])}finally{Blockly.Events.enable()}}else t=new Blockly.FieldLabel(this.arguments_[e]),this.appendValueInput("ARG"+e).setAlign(Blockly.ALIGN_RIGHT).appendField(t,"ARGNAME"+e).init()}for(;this.getInput("ARG"+e);)this.removeInput("ARG"+e),e++;(e=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(e.appendField(Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),e.init()):this.getField("WITH")&&e.removeField("WITH"))},mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation");e.setAttribute("name",this.getProcedureCall());for(var t=0;t<this.arguments_.length;t++){var n=Blockly.utils.xml.createElement("arg");n.setAttribute("name",this.arguments_[t]),e.appendChild(n)}return e},domToMutation:function(e){var t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t);for(var n,t=[],o=[],r=0;n=e.childNodes[r];r++)"arg"==n.nodeName.toLowerCase()&&(t.push(n.getAttribute("name")),o.push(n.getAttribute("paramId")));this.setProcedureParameters_(t,o)},getVarModels:function(){return this.argumentVarModels_},onchange:function(e){var t,n,o;this.workspace&&!this.workspace.isFlyout&&e.recordUndo&&(e.type==Blockly.Events.BLOCK_CREATE&&-1!=e.ids.indexOf(this.id)?(t=this.getProcedureCall(),(t=!(t=Blockly.Procedures.getDefinition(t,this.workspace))||t.type==this.defType_&&JSON.stringify(t.arguments_)==JSON.stringify(this.arguments_)?t:null)||(Blockly.Events.setGroup(e.group),e=Blockly.utils.xml.createElement("xml"),(t=Blockly.utils.xml.createElement("block")).setAttribute("type",this.defType_),o=(n=this.getRelativeToSurfaceXY()).y+2*Blockly.SNAP_RADIUS,t.setAttribute("x",n.x+Blockly.SNAP_RADIUS*(this.RTL?-1:1)),t.setAttribute("y",o),n=this.mutationToDom(),t.appendChild(n),(n=Blockly.utils.xml.createElement("field")).setAttribute("name","NAME"),n.appendChild(Blockly.utils.xml.createTextNode(this.getProcedureCall())),t.appendChild(n),e.appendChild(t),Blockly.Xml.domToWorkspace(e,this.workspace),Blockly.Events.setGroup(!1))):e.type==Blockly.Events.BLOCK_DELETE?(t=this.getProcedureCall(),(t=Blockly.Procedures.getDefinition(t,this.workspace))||(Blockly.Events.setGroup(e.group),this.dispose(!0),Blockly.Events.setGroup(!1))):e.type==Blockly.Events.CHANGE&&"disabled"==e.element&&(t=this.getProcedureCall(),t=Blockly.Procedures.getDefinition(t,this.workspace))&&t.id==e.blockId&&((t=Blockly.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),Blockly.Events.setGroup(e.group),e.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),Blockly.Events.setGroup(t)))},customContextMenu:function(e){var t,n,o;this.workspace.isMovable()&&((t={enabled:!0}).text=Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF,n=this.getProcedureCall(),o=this.workspace,t.callback=function(){var e=Blockly.Procedures.getDefinition(n,o);e&&(o.centerOnBlock(e.id),e.select())},e.push(t))},defType_:"procedures_defnoreturn"},Blockly.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:Blockly.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:Blockly.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:Blockly.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:Blockly.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:Blockly.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_callnoreturn.domToMutation,getVarModels:Blockly.Blocks.procedures_callnoreturn.getVarModels,onchange:Blockly.Blocks.procedures_callnoreturn.onchange,customContextMenu:Blockly.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},Blockly.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(Blockly.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation");return e.setAttribute("value",Number(this.hasReturnValue_)),e},domToMutation:function(e){this.hasReturnValue_=1==e.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(e){if(this.workspace.isDragging&&!this.workspace.isDragging()){e=!1;var t=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(t.type)){e=!0;break}}while(t=t.getSurroundParent());e?("procedures_defnoreturn"==t.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=t.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(Blockly.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},Blockly.PXTBlockly.FunctionUtils={},Blockly.PXTBlockly.FunctionUtils.argumentIcons={},Blockly.PXTBlockly.FunctionUtils.argumentDefaultNames={},Blockly.PXTBlockly.FunctionUtils.getArgumentIcon=function(e){return Blockly.PXTBlockly.FunctionUtils.argumentIcons&&Blockly.PXTBlockly.FunctionUtils.argumentIcons[e]||void 0},Blockly.PXTBlockly.FunctionUtils.getArgumentDefaultName=function(e){return Blockly.PXTBlockly.FunctionUtils.argumentDefaultNames&&Blockly.PXTBlockly.FunctionUtils.argumentDefaultNames[e]||Blockly.Msg.FUNCTIONS_DEFAULT_CUSTOM_ARG_NAME},Blockly.PXTBlockly.FunctionUtils.mutationToDom=function(){this.ensureIds_();var n=Blockly.utils.xml.createElement("mutation");return n.setAttribute("name",this.name_),n.setAttribute("functionid",this.functionId_),this.arguments_.forEach(function(e){var t=Blockly.utils.xml.createElement("arg");t.setAttribute("name",e.name),t.setAttribute("id",e.id),t.setAttribute("type",e.type),n.appendChild(t)}),n},Blockly.PXTBlockly.FunctionUtils.domToMutation=function(e){for(var t=[],n=0;n<e.childNodes.length;++n){var o=e.childNodes[n];"arg"==o.nodeName.toLowerCase()&&t.push({id:o.getAttribute("id"),name:o.getAttribute("name"),type:o.getAttribute("type")})}this.arguments_=t,this.name_=e.getAttribute("name"),e=e.getAttribute("functionid"),Blockly.Functions.idsInUse(this.workspace).indexOf(e)<0&&(this.functionId_=e),this.ensureIds_(),e=this.getHeightWidth?this.getHeightWidth():null,this.type!==Blockly.FUNCTION_DEFINITION_BLOCK_TYPE||e&&!e.height&&!e.width?this.updateDisplay_():!this.getFieldValue("function_name")&&this.name_&&this.setFieldValue(this.name_,"function_name")},Blockly.PXTBlockly.FunctionUtils.ensureIds_=function(){switch(this.type){case Blockly.FUNCTION_DEFINITION_BLOCK_TYPE:this.functionId_&&"null"!=this.functionId_||(this.functionId_=Blockly.utils.genUid());for(var e=0;e<this.arguments_.length;++e)this.arguments_[e].id||(this.arguments_[e].id=Blockly.utils.genUid());break;case Blockly.FUNCTION_CALL_OUTPUT_BLOCK_TYPE:case Blockly.FUNCTION_CALL_BLOCK_TYPE:if(e=Blockly.Functions.getDefinition(this.name_,this.workspace)){this.functionId_=e.getFunctionId();for(var t=e.getArguments(),e=0;e<this.arguments_.length;++e)for(var n=0;n<t.length;++n)if(t[n].name==this.arguments_[e].name){this.arguments_[e].id=t[n].id;break}}}},Blockly.PXTBlockly.FunctionUtils.getName=function(){return this.name_},Blockly.PXTBlockly.FunctionUtils.getFunctionId=function(){return this.functionId_},Blockly.PXTBlockly.FunctionUtils.getArguments=function(){return this.arguments_},Blockly.PXTBlockly.FunctionUtils.setStatements_=function(e){this.hasStatements_!==e&&(e?this.appendStatementInput("STACK"):this.removeInput("STACK",!0),this.hasStatements_=e)},Blockly.PXTBlockly.FunctionUtils.updateDisplay_=function(){var e=this.rendered,t=(this.rendered=!1,this.disconnectOldBlocks_());this.removeValueInputs_(),this.createAllInputs_(t),this.deleteShadows_(t),(this.rendered=e)&&!this.isInsertionMarker()&&this.initSvg&&(this.initSvg(),this.render())},Blockly.PXTBlockly.FunctionUtils.disconnectOldBlocks_=function(){for(var e,t,n,o={},r=0;e=this.inputList[r];r++)"STACK"!==e.name&&e.connection&&(t=e.connection.targetBlock(),n={shadow:e.connection.getShadowDom(),block:t},o[e.name]=n,e.connection.setShadowDom(null),t)&&e.connection.disconnect();return o},Blockly.PXTBlockly.FunctionUtils.removeValueInputs_=function(){for(var e,t=[],n=0;e=this.inputList[n];n++)e.type==Blockly.INPUT_VALUE?e.dispose():t.push(e);this.inputList=t},Blockly.PXTBlockly.FunctionUtils.createAllInputs_=function(n){var t=!1,o=!1,r=!1;if(this.inputList.forEach(function(e){"function_title"==e.name?t=!0:"function_name"==e.name?o=!0:"function_collapse"==e.name&&(r=!0)}),!t){var e="";switch(this.type){case Blockly.FUNCTION_CALL_OUTPUT_BLOCK_TYPE:case Blockly.FUNCTION_CALL_BLOCK_TYPE:e=Blockly.Msg.FUNCTIONS_CALL_TITLE;break;case Blockly.FUNCTION_DEFINITION_BLOCK_TYPE:case Blockly.FUNCTION_DECLARATION_BLOCK_TYPE:e=Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE}this.appendDummyInput("function_title").appendField(e,"function_title")}o?this.updateFunctionLabel_(this.getName()):this.addFunctionLabel_(this.getName());var i=this;this.arguments_.forEach(function(e){var t=i.appendValueInput(e.id);Blockly.Functions.isCustomType(e.type)?t.setCheck(e.type):t.setCheck(e.type.charAt(0).toUpperCase()+e.type.slice(1)),i.isInsertionMarker()||i.populateArgument_(e,n,t)}),r&&this.moveInputBefore("function_collapse",null),this.hasStatements_&&this.moveInputBefore("STACK",null)},Blockly.PXTBlockly.FunctionUtils.deleteShadows_=function(e){if(e)for(var t in e){var n=e[t];(n=n&&n.block)&&n.isShadow()&&(n.dispose(),delete e[t])}},Blockly.PXTBlockly.FunctionUtils.updateLabelEditor_=function(e){Blockly.Events.disable(),this.getField("function_name").setValue(e),Blockly.Events.enable()},Blockly.PXTBlockly.FunctionUtils.updateLabelField_=function(e){this.getField("function_name").setValue(e)},Blockly.PXTBlockly.FunctionUtils.addLabelEditor_=function(e){(e=this.type===Blockly.FUNCTION_DEFINITION_BLOCK_TYPE?new Blockly.FieldTextInput(e||"",Blockly.Functions.rename):new Blockly.FieldTextInput(e||"")).setSpellcheck(!1),e.setAutoCapitalize(!1),this.appendDummyInput("function_name").appendField(e,"function_name")},Blockly.PXTBlockly.FunctionUtils.addLabelField_=function(e){this.appendDummyInput("function_name").appendField(new Blockly.FieldLabel(e,"functionNameText"),"function_name")},Blockly.PXTBlockly.FunctionUtils.getShadowBlockInfoFromType_=function(e,t){switch(e){case"boolean":var n="logic_boolean",o="BOOL";e="TRUE";break;case"number":n="math_number",o="NUM",e="1";break;case"string":n="text",o="TEXT",e="abc";break;case"Array":n="variables_get",o="VAR",e=Blockly.Variables.getOrCreateVariablePackage(t,null,"list","").getId();break;default:n="variables_get",o="VAR",e=Blockly.Variables.getOrCreateVariablePackage(t,null,Blockly.PXTBlockly.FunctionUtils.getArgumentDefaultName(e),"").getId()}return[n,o,e]},Blockly.PXTBlockly.FunctionUtils.buildShadowDom_=function(e){var t=Blockly.utils.xml.createElement("shadow"),n=Blockly.PXTBlockly.FunctionUtils.getShadowBlockInfoFromType_(e,this.workspace),o=(e=n[1],n[2]);return t.setAttribute("type",n[0]),(n=goog.dom.createDom("field",null,o)).setAttribute("name",e),t.appendChild(n),t},Blockly.PXTBlockly.FunctionUtils.attachShadow_=function(e,t){t=(o=Blockly.PXTBlockly.FunctionUtils.getShadowBlockInfoFromType_(t,this.workspace))[0];var n=o[1],o=o[2],r=(Blockly.Events.disable(),null);try{(r=this.workspace.newBlock(t)).setFieldValue(o,n),r.setShadow(!0),!this.isInsertionMarker()&&r.initSvg&&(r.initSvg(),r.render(!1))}finally{Blockly.Events.enable()}r&&r.outputConnection.connect(e.connection)},Blockly.PXTBlockly.FunctionUtils.createArgumentReporter_=function(e){switch(e.type){case"boolean":var t="argument_reporter_boolean";break;case"number":t="argument_reporter_number";break;case"string":t="argument_reporter_string";break;case"Array":t="argument_reporter_array";break;default:t="argument_reporter_custom"}Blockly.Events.disable();try{var n="argument_reporter_custom"==t?Blockly.PXTBlockly.FunctionUtils.createCustomArgumentReporter(e.type,this.workspace):this.workspace.newBlock(t);n.setShadow(!0),n.setFieldValue(e.name,"VALUE"),!this.isInsertionMarker()&&n.initSvg&&(n.initSvg(),n.render(!1))}finally{Blockly.Events.enable()}return n},Blockly.PXTBlockly.FunctionUtils.createCollapseIcon_=function(){var e,t=this;t.workspace&&t.workspace.getRenderer&&(e=t.workspace.getRenderer().getConstants().COLLAPSE_IMAGE_DATAURI)&&t.appendDummyInput("function_collapse").appendField(new Blockly.FieldImage(e,24,24,"",function(){t.setCollapsed(!0)},!1))},Blockly.PXTBlockly.FunctionUtils.populateArgumentOnCaller_=function(e,t,n){var o=null,r=null;t&&e.id in t&&(o=(r=t[e.id]).block,r=r.shadow),t&&o?(t[n.name]=null,o.outputConnection.connect(n.connection),e=r||this.buildShadowDom_(e.type),n.connection.setShadowDom(e)):this.attachShadow_(n,e.type)},Blockly.PXTBlockly.FunctionUtils.populateArgumentOnDefinition_=function(e,t,n){var o=null;t&&e.id in t&&(o=t[e.id].block),t&&o?(o.setFieldValue(e.name,"VALUE"),t[n.name]=null):o=this.createArgumentReporter_(e),n.connection.connect(o.outputConnection)},Blockly.PXTBlockly.FunctionUtils.populateArgumentOnDeclaration_=function(e,t,n){e=this.createArgumentEditor_(e.type,e.name),n.connection.connect(e.outputConnection)},Blockly.PXTBlockly.FunctionUtils.createArgumentEditor_=function(e,t){Blockly.Events.disable();try{var n="";switch(e){case"boolean":n="argument_editor_boolean";break;case"number":n="argument_editor_number";break;case"string":n="argument_editor_string";break;case"Array":n="argument_editor_array";break;default:n="argument_editor_custom"}var o="argument_editor_custom"==n?Blockly.PXTBlockly.FunctionUtils.createCustomArgumentEditor(e,this.workspace):this.workspace.newBlock(n);o.setFieldValue(t,"TEXT"),o.setShadow(!0),!this.isInsertionMarker()&&o.initSvg&&(o.initSvg(),o.render(!1))}finally{Blockly.Events.enable()}return o},Blockly.PXTBlockly.FunctionUtils.updateDeclarationMutation_=function(){this.arguments_=[];for(var e=1;e<this.inputList.length;e++){var t=this.inputList[e];switch(t.type){case Blockly.NEXT_STATEMENT:break;case Blockly.DUMMY_INPUT:this.name_=t.fieldRow[0].getValue()||t.fieldRow[0].getText();break;case Blockly.INPUT_VALUE:var n=t.connection.targetBlock();this.arguments_.push({id:t.name,name:n.getFieldValue("TEXT"),type:n.getTypeName()});break;default:console.warn("Unexpected input type on a function mutator root: "+t.type)}}},Blockly.PXTBlockly.FunctionUtils.focusLastEditor_=function(){var e;0<this.inputList.length&&((e=this.inputList[this.inputList.length-2]).type==Blockly.DUMMY_INPUT?(this.workspace.centerOnBlock(this.id),e.fieldRow[0].showEditor_()):e.type==Blockly.INPUT_VALUE&&((e=e.connection.targetBlock()).workspace.centerOnBlock(e.id),e.getField("TEXT").showEditor_()))},Blockly.PXTBlockly.FunctionUtils.addParam_=function(e,t){Blockly.WidgetDiv.hide(!0),t=Blockly.Functions.findUniqueParamName(t,this.arguments_.map(function(e){return e.name})),this.arguments_.push({id:Blockly.utils.genUid(),name:t,type:e}),this.updateDisplay_(),this.focusLastEditor_()},Blockly.PXTBlockly.FunctionUtils.addBooleanExternal=function(){this.addParam_("boolean",Blockly.Msg.FUNCTIONS_DEFAULT_BOOLEAN_ARG_NAME)},Blockly.PXTBlockly.FunctionUtils.addStringExternal=function(){this.addParam_("string",Blockly.Msg.FUNCTIONS_DEFAULT_STRING_ARG_NAME)},Blockly.PXTBlockly.FunctionUtils.addNumberExternal=function(){this.addParam_("number",Blockly.Msg.FUNCTIONS_DEFAULT_NUMBER_ARG_NAME)},Blockly.PXTBlockly.FunctionUtils.addArrayExternal=function(){this.addParam_("Array",Blockly.Msg.FUNCTIONS_DEFAULT_ARRAY_ARG_NAME)},Blockly.PXTBlockly.FunctionUtils.addCustomExternal=function(e){this.addParam_(e,Blockly.PXTBlockly.FunctionUtils.getArgumentDefaultName(e))},Blockly.PXTBlockly.FunctionUtils.removeFieldCallback=function(e){for(var t=null,n=0;n<this.inputList.length&&!t;n++){var o=this.inputList[n];if(o.connection){var r=o.connection.targetBlock();r&&r.getField(e.name)===e&&(t=o.name)}else for(r=0;r<o.fieldRow.length;r++)o.fieldRow[r]==e&&(t=o.name)}t&&(Blockly.WidgetDiv.hide(!0),this.removeInput(t),this.updateFunctionSignature(),this.updateDisplay_())},Blockly.PXTBlockly.FunctionUtils.removeArgumentCallback_=function(e){this.parentBlock_&&this.parentBlock_.removeFieldCallback&&this.parentBlock_.removeFieldCallback(e)},Blockly.PXTBlockly.FunctionUtils.onCallerChange=function(e){var t,n,o;this.workspace&&!this.workspace.isFlyout&&(e.type==Blockly.Events.BLOCK_CREATE&&-1!=e.ids.indexOf(this.id)?(t=this.getName(),(t=Blockly.Functions.getDefinition(t,this.workspace))?(e=t.getArguments().slice(),n=this.arguments_.slice(),JSON.stringify(n)!==JSON.stringify(e)&&Blockly.Functions.mutateCallersAndDefinition(t.getName(),this.workspace,t.mutationToDom()),this.functionId_=t.functionId_):(Blockly.Events.setGroup(e.group),t=Blockly.utils.xml.createElement("xml"),(e=Blockly.utils.xml.createElement("block")).setAttribute("type",Blockly.FUNCTION_DEFINITION_BLOCK_TYPE),o=(n=this.getRelativeToSurfaceXY()).y+2*Blockly.SNAP_RADIUS,e.setAttribute("x",n.x+Blockly.SNAP_RADIUS*(this.RTL?-1:1)),e.setAttribute("y",o),n=this.mutationToDom(),e.appendChild(n),t.appendChild(e),Blockly.Xml.domToWorkspace(t,this.workspace),Blockly.Events.setGroup(!1))):e.type!=Blockly.Events.BLOCK_DELETE||(t=this.getName(),t=Blockly.Functions.getDefinition(t,this.workspace))||(Blockly.Events.setGroup(e.group),this.dispose(!0,!1),Blockly.Events.setGroup(!1)))},Blockly.Blocks.function_declaration={init:function(){this.jsonInit({style:{hat:"cap"}}),this.name_="",this.arguments_=[],this.functionId_="",this.createAllInputs_(),this.setColour(Blockly.Msg.PROCEDURES_HUE),this.setStatements_(!0),this.setDeletable(!1),this.setMovable(!1),this.contextMenu=!1,this.setInputsInline(!0),this.statementConnection_=null},mutationToDom:Blockly.PXTBlockly.FunctionUtils.mutationToDom,domToMutation:Blockly.PXTBlockly.FunctionUtils.domToMutation,getName:Blockly.PXTBlockly.FunctionUtils.getName,getFunctionId:Blockly.PXTBlockly.FunctionUtils.getFunctionId,getArguments:Blockly.PXTBlockly.FunctionUtils.getArguments,removeValueInputs_:Blockly.PXTBlockly.FunctionUtils.removeValueInputs_,disconnectOldBlocks_:Blockly.PXTBlockly.FunctionUtils.disconnectOldBlocks_,deleteShadows_:Blockly.PXTBlockly.FunctionUtils.deleteShadows_,createAllInputs_:Blockly.PXTBlockly.FunctionUtils.createAllInputs_,updateDisplay_:Blockly.PXTBlockly.FunctionUtils.updateDisplay_,setStatements_:Blockly.PXTBlockly.FunctionUtils.setStatements_,ensureIds_:Blockly.PXTBlockly.FunctionUtils.ensureIds_,populateArgument_:Blockly.PXTBlockly.FunctionUtils.populateArgumentOnDeclaration_,addFunctionLabel_:Blockly.PXTBlockly.FunctionUtils.addLabelEditor_,updateFunctionLabel_:Blockly.PXTBlockly.FunctionUtils.updateLabelEditor_,createArgumentEditor_:Blockly.PXTBlockly.FunctionUtils.createArgumentEditor_,focusLastEditor_:Blockly.PXTBlockly.FunctionUtils.focusLastEditor_,removeFieldCallback:Blockly.PXTBlockly.FunctionUtils.removeFieldCallback,addParam_:Blockly.PXTBlockly.FunctionUtils.addParam_,addBooleanExternal:Blockly.PXTBlockly.FunctionUtils.addBooleanExternal,addStringExternal:Blockly.PXTBlockly.FunctionUtils.addStringExternal,addNumberExternal:Blockly.PXTBlockly.FunctionUtils.addNumberExternal,addArrayExternal:Blockly.PXTBlockly.FunctionUtils.addArrayExternal,addCustomExternal:Blockly.PXTBlockly.FunctionUtils.addCustomExternal,updateFunctionSignature:Blockly.PXTBlockly.FunctionUtils.updateDeclarationMutation_},Blockly.Blocks.function_definition={init:function(){this.jsonInit({style:{hat:"cap"}}),this.name_="",this.arguments_=[],this.functionId_="",this.createAllInputs_(),this.setColour(Blockly.Msg.PROCEDURES_HUE),this.setTooltip(Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.setStatements_(!0),this.createCollapseIcon_(),this.setInputsInline(!0),this.statementConnection_=null},customContextMenu:function(e){this.inDebugWorkspace()||(e.push(Blockly.Functions.makeEditOption(this)),e.push(Blockly.Functions.makeCreateCallOption(this)))},mutationToDom:Blockly.PXTBlockly.FunctionUtils.mutationToDom,domToMutation:Blockly.PXTBlockly.FunctionUtils.domToMutation,getName:Blockly.PXTBlockly.FunctionUtils.getName,getFunctionId:Blockly.PXTBlockly.FunctionUtils.getFunctionId,getArguments:Blockly.PXTBlockly.FunctionUtils.getArguments,removeValueInputs_:Blockly.PXTBlockly.FunctionUtils.removeValueInputs_,disconnectOldBlocks_:Blockly.PXTBlockly.FunctionUtils.disconnectOldBlocks_,deleteShadows_:Blockly.PXTBlockly.FunctionUtils.deleteShadows_,createAllInputs_:Blockly.PXTBlockly.FunctionUtils.createAllInputs_,updateDisplay_:Blockly.PXTBlockly.FunctionUtils.updateDisplay_,setStatements_:Blockly.PXTBlockly.FunctionUtils.setStatements_,ensureIds_:Blockly.PXTBlockly.FunctionUtils.ensureIds_,populateArgument_:Blockly.PXTBlockly.FunctionUtils.populateArgumentOnDefinition_,addFunctionLabel_:Blockly.PXTBlockly.FunctionUtils.addLabelEditor_,updateFunctionLabel_:Blockly.PXTBlockly.FunctionUtils.updateLabelEditor_,createArgumentReporter_:Blockly.PXTBlockly.FunctionUtils.createArgumentReporter_,createCollapseIcon_:Blockly.PXTBlockly.FunctionUtils.createCollapseIcon_},Blockly.Blocks.function_call={init:function(){this.jsonInit({extensions:["function_contextmenu_edit"]}),this.name_="",this.arguments_=[],this.functionId_="",this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(Blockly.Msg.PROCEDURES_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.setTooltip(Blockly.Msg.FUNCTION_CALL_TOOLTIP),this.setInputsInline(!0)},mutationToDom:Blockly.PXTBlockly.FunctionUtils.mutationToDom,domToMutation:Blockly.PXTBlockly.FunctionUtils.domToMutation,getName:Blockly.PXTBlockly.FunctionUtils.getName,getFunctionId:Blockly.PXTBlockly.FunctionUtils.getFunctionId,getArguments:Blockly.PXTBlockly.FunctionUtils.getArguments,removeValueInputs_:Blockly.PXTBlockly.FunctionUtils.removeValueInputs_,disconnectOldBlocks_:Blockly.PXTBlockly.FunctionUtils.disconnectOldBlocks_,deleteShadows_:Blockly.PXTBlockly.FunctionUtils.deleteShadows_,createAllInputs_:Blockly.PXTBlockly.FunctionUtils.createAllInputs_,updateDisplay_:Blockly.PXTBlockly.FunctionUtils.updateDisplay_,setStatements_:Blockly.PXTBlockly.FunctionUtils.setStatements_,ensureIds_:Blockly.PXTBlockly.FunctionUtils.ensureIds_,populateArgument_:Blockly.PXTBlockly.FunctionUtils.populateArgumentOnCaller_,addFunctionLabel_:Blockly.PXTBlockly.FunctionUtils.addLabelField_,updateFunctionLabel_:Blockly.PXTBlockly.FunctionUtils.updateLabelField_,attachShadow_:Blockly.PXTBlockly.FunctionUtils.attachShadow_,buildShadowDom_:Blockly.PXTBlockly.FunctionUtils.buildShadowDom_,onchange:Blockly.PXTBlockly.FunctionUtils.onCallerChange},Blockly.Blocks.function_call_output={init:function(){this.jsonInit({extensions:["function_contextmenu_edit"]}),this.name_="",this.arguments_=[],this.functionId_="",this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0,null),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setColour(Blockly.Msg.PROCEDURES_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.setTooltip(Blockly.Msg.FUNCTION_CALL_TOOLTIP),this.setInputsInline(!0)},mutationToDom:Blockly.PXTBlockly.FunctionUtils.mutationToDom,domToMutation:Blockly.PXTBlockly.FunctionUtils.domToMutation,getName:Blockly.PXTBlockly.FunctionUtils.getName,getFunctionId:Blockly.PXTBlockly.FunctionUtils.getFunctionId,getArguments:Blockly.PXTBlockly.FunctionUtils.getArguments,removeValueInputs_:Blockly.PXTBlockly.FunctionUtils.removeValueInputs_,disconnectOldBlocks_:Blockly.PXTBlockly.FunctionUtils.disconnectOldBlocks_,deleteShadows_:Blockly.PXTBlockly.FunctionUtils.deleteShadows_,createAllInputs_:Blockly.PXTBlockly.FunctionUtils.createAllInputs_,updateDisplay_:Blockly.PXTBlockly.FunctionUtils.updateDisplay_,setStatements_:Blockly.PXTBlockly.FunctionUtils.setStatements_,ensureIds_:Blockly.PXTBlockly.FunctionUtils.ensureIds_,populateArgument_:Blockly.PXTBlockly.FunctionUtils.populateArgumentOnCaller_,addFunctionLabel_:Blockly.PXTBlockly.FunctionUtils.addLabelField_,updateFunctionLabel_:Blockly.PXTBlockly.FunctionUtils.updateLabelField_,attachShadow_:Blockly.PXTBlockly.FunctionUtils.attachShadow_,buildShadowDom_:Blockly.PXTBlockly.FunctionUtils.buildShadowDom_,onchange:Blockly.PXTBlockly.FunctionUtils.onCallerChange},Blockly.PXTBlockly.FunctionUtils.getTypeName=function(){return this.typeName_},Blockly.PXTBlockly.FunctionUtils.argumentMutationToDom=function(){var e=Blockly.utils.xml.createElement("mutation");return e.setAttribute("typename",this.typeName_),e},Blockly.PXTBlockly.FunctionUtils.argumentDomToMutation=function(e){this.typeName_=e.getAttribute("typename"),this.setOutput(!0,this.typeName_)},Blockly.PXTBlockly.FunctionUtils.createCustomArgumentBlock=function(e,t,n){return e=Blockly.Xml.textToDom('<xml><block type="'+e+'"><mutation typename="'+t+'"></mutation></block></xml>'),Blockly.Xml.domToBlock(e.firstChild,n)},Blockly.PXTBlockly.FunctionUtils.createCustomArgumentEditor=function(e,t){return Blockly.PXTBlockly.FunctionUtils.createCustomArgumentBlock("argument_editor_custom",e,t)},Blockly.PXTBlockly.FunctionUtils.createCustomArgumentReporter=function(e,t){return Blockly.PXTBlockly.FunctionUtils.createCustomArgumentBlock("argument_reporter_custom",e,t)},Blockly.Blocks.argument_editor_boolean={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_argument_editor",name:"TEXT",text:"bool"}],colour:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField,extensions:["output_boolean"]}),this.typeName_="boolean"},getTypeName:Blockly.PXTBlockly.FunctionUtils.getTypeName,removeFieldCallback:Blockly.PXTBlockly.FunctionUtils.removeArgumentCallback_},Blockly.Blocks.argument_editor_string={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_argument_editor",name:"TEXT",text:"text"}],colour:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField,extensions:["output_string"]}),this.typeName_="string"},getTypeName:Blockly.PXTBlockly.FunctionUtils.getTypeName,removeFieldCallback:Blockly.PXTBlockly.FunctionUtils.removeArgumentCallback_},Blockly.Blocks.argument_editor_number={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_argument_editor",name:"TEXT",text:"num"}],colour:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField,extensions:["output_number"]}),this.typeName_="number"},getTypeName:Blockly.PXTBlockly.FunctionUtils.getTypeName,removeFieldCallback:Blockly.PXTBlockly.FunctionUtils.removeArgumentCallback_},Blockly.Blocks.argument_editor_array={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_argument_editor",name:"TEXT",text:"list"}],colour:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField,extensions:["output_array"]}),this.typeName_="Array"},getTypeName:Blockly.PXTBlockly.FunctionUtils.getTypeName,removeFieldCallback:Blockly.PXTBlockly.FunctionUtils.removeArgumentCallback_},Blockly.Blocks.argument_editor_custom={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_argument_editor",name:"TEXT",text:"arg"}],colour:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField,outputShape:Blockly.OUTPUT_SHAPE_ROUND}),this.typeName_="any"},getTypeName:Blockly.PXTBlockly.FunctionUtils.getTypeName,removeFieldCallback:Blockly.PXTBlockly.FunctionUtils.removeArgumentCallback_,mutationToDom:Blockly.PXTBlockly.FunctionUtils.argumentMutationToDom,domToMutation:Blockly.PXTBlockly.FunctionUtils.argumentDomToMutation},Blockly.Blocks.argument_reporter_boolean={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_label_hover",name:"VALUE",text:""}],colour:Blockly.Msg.REPORTERS_HUE,extensions:["output_boolean"]}),this.typeName_="boolean"},getTypeName:Blockly.PXTBlockly.FunctionUtils.getTypeName},Blockly.Blocks.argument_reporter_number={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_label_hover",name:"VALUE",text:""}],colour:Blockly.Msg.REPORTERS_HUE,extensions:["output_number"]}),this.typeName_="number"},getTypeName:Blockly.PXTBlockly.FunctionUtils.getTypeName},Blockly.Blocks.argument_reporter_string={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_label_hover",name:"VALUE",text:""}],colour:Blockly.Msg.REPORTERS_HUE,extensions:["output_string"]}),this.typeName_="string"},getTypeName:Blockly.PXTBlockly.FunctionUtils.getTypeName},Blockly.Blocks.argument_reporter_array={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_label_hover",name:"VALUE",text:""}],colour:Blockly.Msg.REPORTERS_HUE,extensions:["output_array"]}),this.typeName_="Array"},getTypeName:Blockly.PXTBlockly.FunctionUtils.getTypeName},Blockly.Blocks.argument_reporter_custom={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_label_hover",name:"VALUE",text:""}],colour:Blockly.Msg.REPORTERS_HUE,inputsInline:!0,outputShape:Blockly.OUTPUT_SHAPE_ROUND,output:null}),this.typeName_=""},getTypeName:Blockly.PXTBlockly.FunctionUtils.getTypeName,mutationToDom:Blockly.PXTBlockly.FunctionUtils.argumentMutationToDom,domToMutation:Blockly.PXTBlockly.FunctionUtils.argumentDomToMutation},Blockly.Blocks.texts={},Blockly.Constants.Text={},Blockly.Constants.Text.HUE=160,Blockly.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_string",name:"TEXT",text:""}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"field_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:""},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),Blockly.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation"),t=this.getInput("AT1").type==Blockly.INPUT_VALUE;return e.setAttribute("at1",t),t=this.getInput("AT2").type==Blockly.INPUT_VALUE,e.setAttribute("at2",t),e},domToMutation:function(e){var t="true"==e.getAttribute("at1");e="true"==e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(o,r){this.removeInput("AT"+o),this.removeInput("ORDINAL"+o,!0),r?(this.appendValueInput("AT"+o).setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+o).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+o),2==o&&Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL));var e=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+o],function(e){var t,n="FROM_START"==e||"FROM_END"==e;if(n!=r)return(t=this.getSourceBlock()).updateAt_(o,n),t.setFieldValue(e,"WHERE"+o),null});this.getInput("AT"+o).appendField(e,"WHERE"+o),1==o&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1"))&&this.moveInputBefore("ORDINAL1","AT2")}},Blockly.Blocks.text_changeCase={init:function(){var e=[[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new Blockly.FieldDropdown(e),"CASE"),this.setOutput(!0,"String"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP)}},Blockly.Blocks.text_trim={init:function(){var e=[[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new Blockly.FieldDropdown(e),"MODE"),this.setOutput(!0,"String"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP)}},Blockly.Blocks.text_print={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:Blockly.Msg.TEXT_PRINT_TOOLTIP,helpUrl:Blockly.Msg.TEXT_PRINT_HELPURL})}},Blockly.Blocks.text_prompt_ext={init:function(){var e=[[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],t=(this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),this),e=new Blockly.FieldDropdown(e,function(e){t.updateType_(e)});this.appendValueInput("TEXT").appendField(e,"TYPE"),this.setOutput(!0,"String"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip(function(){return"TEXT"==t.getFieldValue("TYPE")?Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT:Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(e){this.outputConnection.setCheck("NUMBER"==e?"Number":"String")},mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation");return e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("type"))}},Blockly.Blocks.text_prompt={init:function(){this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);var e=[[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],t=this;this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),e=new Blockly.FieldDropdown(e,function(e){t.updateType_(e)}),this.appendDummyInput().appendField(e,"TYPE").appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip(function(){return"TEXT"==t.getFieldValue("TYPE")?Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT:Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:Blockly.Blocks.text_prompt_ext.updateType_,mutationToDom:Blockly.Blocks.text_prompt_ext.mutationToDom,domToMutation:Blockly.Blocks.text_prompt_ext.domToMutation},Blockly.Blocks.text_count={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0,style:"text_blocks",tooltip:Blockly.Msg.TEXT_COUNT_TOOLTIP,helpUrl:Blockly.Msg.TEXT_COUNT_HELPURL})}},Blockly.Blocks.text_replace={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0,style:"text_blocks",tooltip:Blockly.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:Blockly.Msg.TEXT_REPLACE_HELPURL})}},Blockly.Blocks.text_reverse={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0,style:"text_blocks",tooltip:Blockly.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:Blockly.Msg.TEXT_REVERSE_HELPURL})}},Blockly.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(e){for(var t,n=0;t=this.inputList[n];n++)for(var o,r=0;o=t.fieldRow[r];r++)if(e==o.name)return t.insertFieldAt(r,this.newQuote_(!0)),void t.insertFieldAt(r+2,this.newQuote_(!1));console.warn('field named "'+e+'" not found in '+this.toDevString())},newQuote_:function(e){return e=this.RTL?!e:e,new Blockly.FieldImage(e?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,e?"":"")}},Blockly.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},saveConnections:function(e){e=e.getInputTargetBlock("STACK");for(var t=0;e;){var n=this.getInput("ADD"+t);e.valueConnection_=n&&n.connection.targetConnection,t++,e=e.nextConnection&&e.nextConnection.targetBlock()}},storeValueConnections_:function(){this.valueConnections_=[];for(var e=0;e<this.itemCount_;e++)this.valueConnections_.push(this.getInput("ADD"+e).connection.targetConnection)},restoreValueConnections_:function(){for(var e=0;e<this.itemCount_;e++)Blockly.Mutator.reconnect(this.valueConnections_[e],this,"ADD"+e)},addItem_:function(){var e,t,n;this.storeValueConnections_(),this.update_(function(){this.itemCount_++}),this.restoreValueConnections_(),1<this.itemCount_&&(e=this.getInput("ADD0"))&&e.connection.targetConnection&&(t=this.getInput("ADD"+(this.itemCount_-1)),n=e.connection.getShadowDom())&&(e=Blockly.utils.xml.createElement("shadow"),n=n.getAttribute("type"),e.setAttribute("type",n),e)&&(e.setAttribute("id",Blockly.utils.genUid()),t.connection.setShadowDom(e),t.connection.respawnShadow_())},removeItem_:function(){this.storeValueConnections_(),this.update_(function(){this.itemCount_--}),this.restoreValueConnections_()},update_:function(e){Blockly.Events.setGroup(!0);var t=this,n=(n=t.mutationToDom())&&Blockly.Xml.domToText(n),o=t.rendered,r=(t.rendered=!1,e&&e.call(this),this.updateShape_(),t.rendered=o,t.initSvg(),Blockly.Events.getGroup());n!=(e=(e=t.mutationToDom())&&Blockly.Xml.domToText(e))&&(Blockly.Events.fire(new Blockly.Events.BlockChange(t,"mutation",null,n,e)),setTimeout(function(){Blockly.Events.setGroup(r),t.bumpNeighbours(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)),t.rendered&&t.render(),Blockly.Events.setGroup(!1)},updateShape_:function(){var e=this,t=function(){e.removeItem_()};this.getInput("EMPTY")&&this.removeInput("EMPTY"),this.getInput("TITLE")||this.appendDummyInput("TITLE").appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH);for(var n=0;n<this.itemCount_;n++)this.getInput("ADD"+n)||this.appendValueInput("ADD"+n).setAlign(Blockly.ALIGN_LEFT);for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++;this.getInput("BUTTONS")&&this.removeInput("BUTTONS"),n=this.appendDummyInput("BUTTONS"),1<this.itemCount_&&n.appendField(new Blockly.FieldImage(this.REMOVE_IMAGE_DATAURI,24,24,"*",t,!1)),n.appendField(new Blockly.FieldImage(this.ADD_IMAGE_DATAURI,24,24,"*",function(){e.addItem_()},!1)),t=this.itemCount_<=4,this.setInputsInline(t),this.setOutputShape(t?Blockly.OUTPUT_SHAPE_ROUND:Blockly.OUTPUT_SHAPE_SQUARE)}},Blockly.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN),Blockly.Extensions.apply("inline-svgs",this,!1),this.itemCount_=2,this.updateShape_()},Blockly.Extensions.register("text_append_tooltip",Blockly.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var e=this;this.setTooltip(function(){return Blockly.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",e.workspace.options.oneBasedIndex?"0":"-1")})},Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var e=Blockly.utils.xml.createElement("mutation");return e.setAttribute("at",!!this.isAt_),e},domToMutation:function(e){e="false"!=e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(e){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),e&&(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX)&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX),Blockly.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_CHARAT_TAIL)),this.isAt_=e}},Blockly.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(e){(e="FROM_START"==e||"FROM_END"==e)!=this.isAt_&&this.getSourceBlock().updateAt_(e)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var e=n.getFieldValue("WHERE"),t=Blockly.Msg.TEXT_CHARAT_TOOLTIP;return"FROM_START"!=e&&"FROM_END"!=e||!(e="FROM_START"==e?Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP:Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP)||(t+="  "+e.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),t})},Blockly.Extensions.register("text_indexOf_tooltip",Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),Blockly.Extensions.register("text_quotes",Blockly.Constants.Text.TEXT_QUOTES_EXTENSION),Blockly.Extensions.registerMutator("text_join_mutator",Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,Blockly.Constants.Text.TEXT_JOIN_EXTENSION),Blockly.Extensions.registerMutator("text_charAt_mutator",Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,Blockly.Constants.Text.TEXT_CHARAT_EXTENSION),Blockly.Blocks.variables={},Blockly.Constants.Variables={},Blockly.Constants.Variables.HUE=330,Blockly.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_get_reporter",message0:"%1",args0:[{type:"field_variable_getter",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,colour:"%{BKY_VARIABLES_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableReporter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(e){var t,n,o,r;this.isCollapsed()||(this.isInFlyout?"variables_get"!=this.type&&"variables_get_reporter"!=this.type||(t={text:Blockly.Msg.RENAME_VARIABLE,enabled:!this.inDebugWorkspace(),callback:Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},r=this.getField("VAR").getText(),o={text:Blockly.Msg.DELETE_VARIABLE.replace("%1",r),enabled:!this.inDebugWorkspace(),callback:Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},e.unshift(t),e.unshift(o)):(n="variables_get"==this.type||"variables_get_reporter"==this.type?(t="variables_set",Blockly.Msg.VARIABLES_GET_CREATE_SET):(t="variables_get",Blockly.Msg.VARIABLES_SET_CREATE_GET),o={enabled:0<this.workspace.remainingCapacity()&&!this.inDebugWorkspace()},r=this.getField("VAR").getText(),o.text=n.replace("%1",r),(n=Blockly.utils.xml.createElement("field")).setAttribute("name","VAR"),n.appendChild(Blockly.utils.xml.createTextNode(r)),(r=Blockly.utils.xml.createElement("block")).setAttribute("type",t),r.appendChild(n),o.callback=Blockly.ContextMenu.callbackFactory(this,r),e.push(o)))}},Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_REPORTER_MIXIN={customContextMenu:function(e){if(!this.isCollapsed()){var t={text:Blockly.Msg.RENAME_VARIABLE,enabled:!this.inDebugWorkspace(),callback:Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)};if(e.unshift(t),!this.isInFlyout){0<(t=this.workspace.getVariablesOfType("")).length&&e.unshift({separator:!0});for(var n=t.length-1;0<=n;n--){var o={enabled:!this.inDebugWorkspace()};o.text=t[n].name,o.callback=Blockly.Constants.Variables.VARIABLE_OPTION_CALLBACK_FACTORY(this,o.text,t[n].getId()),e.unshift(o)}}}}},Blockly.Constants.Variables.VARIABLE_OPTION_CALLBACK_FACTORY=function(t,e,n){return function(){var e=t.getField("VAR");e||console.log("Tried to get a variable field on the wrong type of block."),e.setValue(n)}},Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var e=n.workspace,t=n.getField("VAR").getVariable();Blockly.Variables.renameVariable(e,t)}},Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var e=n.workspace,t=n.getField("VAR").getVariable();e.deleteVariableById(t.getId()),e.refreshToolboxSelection()}},Blockly.Extensions.registerMixin("contextMenu_variableSetterGetter",Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),Blockly.Extensions.registerMixin("contextMenu_variableReporter",Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_REPORTER_MIXIN),Blockly.Constants.VariablesDynamic={},Blockly.Constants.VariablesDynamic.HUE=310,Blockly.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),Blockly.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(e){var t,n,o,r,i;this.inDebugWorkspace()&&(this.isInFlyout?"variables_get_dynamic"!=this.type&&"variables_get_reporter_dynamic"!=this.type||(n={text:Blockly.Msg.RENAME_VARIABLE,enabled:!this.inDebugWorkspace(),callback:Blockly.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},i=this.getField("VAR").getText(),r={text:Blockly.Msg.DELETE_VARIABLE.replace("%1",i),enabled:!this.inDebugWorkspace(),callback:Blockly.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},e.unshift(n),e.unshift(r)):(n=this.getFieldValue("VAR"),t=this.workspace.getVariableById(n).type,o="variables_get_dynamic"==this.type?(n="variables_set_dynamic",Blockly.Msg.VARIABLES_GET_CREATE_SET):(n="variables_get_dynamic",Blockly.Msg.VARIABLES_SET_CREATE_GET),r={enabled:0<this.workspace.remainingCapacity()},i=this.getField("VAR").getText(),r.text=o.replace("%1",i),(o=Blockly.utils.xml.createElement("field")).setAttribute("name","VAR"),o.setAttribute("variabletype",t),o.appendChild(Blockly.utils.xml.createTextNode(i)),(i=Blockly.utils.xml.createElement("block")).setAttribute("type",n),i.appendChild(o),r.callback=Blockly.ContextMenu.callbackFactory(this,i),e.push(r)))},onchange:function(e){e=this.getFieldValue("VAR"),e=Blockly.Variables.getVariable(this.workspace,e),("variables_get_dynamic"==this.type?this.outputConnection:this.getInput("VALUE").connection).setCheck(e.type)}},Blockly.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var e=n.workspace,t=n.getField("VAR").getVariable();Blockly.Variables.renameVariable(e,t)}},Blockly.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var e=n.workspace,t=n.getField("VAR").getVariable();e.deleteVariableById(t.getId()),e.refreshToolboxSelection()}},Blockly.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",Blockly.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),Blockly.Msg.ADD_COMMENT="Add Comment",Blockly.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",Blockly.Msg.CHANGE_VALUE_TITLE="Change value:",Blockly.Msg.CLEAN_UP="Clean up Blocks",Blockly.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",Blockly.Msg.COLLAPSE_ALL="Collapse Blocks",Blockly.Msg.COLLAPSE_BLOCK="Collapse Block",Blockly.Msg.COLOUR_BLEND_COLOUR1="colour 1",Blockly.Msg.COLOUR_BLEND_COLOUR2="colour 2",Blockly.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",Blockly.Msg.COLOUR_BLEND_RATIO="ratio",Blockly.Msg.COLOUR_BLEND_TITLE="blend",Blockly.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",Blockly.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",Blockly.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",Blockly.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",Blockly.Msg.COLOUR_RANDOM_TITLE="random colour",Blockly.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",Blockly.Msg.COLOUR_RGB_BLUE="blue",Blockly.Msg.COLOUR_RGB_GREEN="green",Blockly.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",Blockly.Msg.COLOUR_RGB_RED="red",Blockly.Msg.COLOUR_RGB_TITLE="colour with",Blockly.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",Blockly.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",Blockly.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",Blockly.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",Blockly.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",Blockly.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",Blockly.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",Blockly.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",Blockly.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",Blockly.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",Blockly.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",Blockly.Msg.CONTROLS_IF_MSG_ELSE="else",Blockly.Msg.CONTROLS_IF_MSG_ELSEIF="else if",Blockly.Msg.CONTROLS_IF_MSG_IF="if",Blockly.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",Blockly.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",Blockly.Msg.CONTROLS_REPEAT_INPUT_DO="do",Blockly.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",Blockly.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",Blockly.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",Blockly.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",Blockly.Msg.DELETE_BLOCK="Delete Block",Blockly.Msg.DELETE_VARIABLE="Delete the '%1' variable",Blockly.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",Blockly.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",Blockly.Msg.DISABLE_BLOCK="Disable Block",Blockly.Msg.DUPLICATE_BLOCK="Duplicate",Blockly.Msg.DUPLICATE_COMMENT="Duplicate Comment",Blockly.Msg.ENABLE_BLOCK="Enable Block",Blockly.Msg.EXPAND_ALL="Expand Blocks",Blockly.Msg.EXPAND_BLOCK="Expand Block",Blockly.Msg.EXTERNAL_INPUTS="External Inputs",Blockly.Msg.FUNCTIONS_CALL_TITLE="call",Blockly.Msg.FUNCTIONS_DEFAULT_BOOLEAN_ARG_NAME="bool",Blockly.Msg.FUNCTIONS_DEFAULT_CUSTOM_ARG_NAME="arg",Blockly.Msg.FUNCTIONS_DEFAULT_FUNCTION_NAME="do_something",Blockly.Msg.FUNCTIONS_DEFAULT_NUMBER_ARG_NAME="num",Blockly.Msg.FUNCTIONS_DEFAULT_STRING_ARG_NAME="text",Blockly.Msg.FUNCTIONS_EDIT_OPTION="Edit",Blockly.Msg.FUNCTIONS_GO_TO_DEFINITION_OPTION="Go to definition",Blockly.Msg.FUNCTION_CALL_TOOLTIP="Call a function that was previously defined.",Blockly.Msg.FUNCTION_CREATE_NEW="Create a Function",Blockly.Msg.FUNCTION_WARNING_ARG_NAME_IS_FUNCTION_NAME="Argument names must not be the same as the function name.",Blockly.Msg.FUNCTION_WARNING_DUPLICATE_ARG="Functions cannot use the same argument name more than once.",Blockly.Msg.FUNCTION_WARNING_EMPTY_NAME="Function and argument names cannot be empty.",Blockly.Msg.HELP="Help",Blockly.Msg.INLINE_INPUTS="Inline Inputs",Blockly.Msg.IOS_CANCEL="Cancel",Blockly.Msg.IOS_ERROR="Error",Blockly.Msg.IOS_OK="OK",Blockly.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",Blockly.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",Blockly.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",Blockly.Msg.IOS_PROCEDURES_INPUTS="INPUTS",Blockly.Msg.IOS_VARIABLES_ADD_BUTTON="Add",Blockly.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",Blockly.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",Blockly.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",Blockly.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",Blockly.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",Blockly.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",Blockly.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",Blockly.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",Blockly.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",Blockly.Msg.LISTS_GET_INDEX_FIRST="first",Blockly.Msg.LISTS_GET_INDEX_FROM_END="# from end",Blockly.Msg.LISTS_GET_INDEX_FROM_START="#",Blockly.Msg.LISTS_GET_INDEX_GET="get",Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",Blockly.Msg.LISTS_GET_INDEX_LAST="last",Blockly.Msg.LISTS_GET_INDEX_RANDOM="random",Blockly.Msg.LISTS_GET_INDEX_REMOVE="remove",Blockly.Msg.LISTS_GET_INDEX_TAIL="",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",Blockly.Msg.LISTS_GET_SUBLIST_END_LAST="to last",Blockly.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",Blockly.Msg.LISTS_GET_SUBLIST_TAIL="",Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",Blockly.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",Blockly.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",Blockly.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",Blockly.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",Blockly.Msg.LISTS_INLIST="in list",Blockly.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",Blockly.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",Blockly.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",Blockly.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",Blockly.Msg.LISTS_LENGTH_TITLE="length of %1",Blockly.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",Blockly.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",Blockly.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",Blockly.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",Blockly.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",Blockly.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",Blockly.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",Blockly.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",Blockly.Msg.LISTS_SET_INDEX_INPUT_TO="as",Blockly.Msg.LISTS_SET_INDEX_INSERT="insert at",Blockly.Msg.LISTS_SET_INDEX_SET="set",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",Blockly.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",Blockly.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",Blockly.Msg.LISTS_SORT_ORDER_DESCENDING="descending",Blockly.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",Blockly.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",Blockly.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",Blockly.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",Blockly.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",Blockly.Msg.LOGIC_BOOLEAN_FALSE="false",Blockly.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",Blockly.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",Blockly.Msg.LOGIC_BOOLEAN_TRUE="true",Blockly.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",Blockly.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",Blockly.Msg.LOGIC_NEGATE_TITLE="not %1",Blockly.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",Blockly.Msg.LOGIC_NULL="null",Blockly.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",Blockly.Msg.LOGIC_NULL_TOOLTIP="Returns null.",Blockly.Msg.LOGIC_OPERATION_AND="and",Blockly.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",Blockly.Msg.LOGIC_OPERATION_OR="or",Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",Blockly.Msg.LOGIC_TERNARY_CONDITION="test",Blockly.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",Blockly.Msg.LOGIC_TERNARY_IF_FALSE="if false",Blockly.Msg.LOGIC_TERNARY_IF_TRUE="if true",Blockly.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",Blockly.Msg.MATH_ADDITION_SYMBOL="+",Blockly.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",Blockly.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",Blockly.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",Blockly.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",Blockly.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",Blockly.Msg.MATH_CHANGE_TITLE="change %1 by %2",Blockly.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",Blockly.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",Blockly.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",Blockly.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",Blockly.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",Blockly.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",Blockly.Msg.MATH_DIVISION_SYMBOL="",Blockly.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",Blockly.Msg.MATH_IS_EVEN="is even",Blockly.Msg.MATH_IS_NEGATIVE="is negative",Blockly.Msg.MATH_IS_ODD="is odd",Blockly.Msg.MATH_IS_POSITIVE="is positive",Blockly.Msg.MATH_IS_PRIME="is prime",Blockly.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",Blockly.Msg.MATH_IS_WHOLE="is whole",Blockly.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",Blockly.Msg.MATH_MODULO_TITLE="remainder of %1  %2",Blockly.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",Blockly.Msg.MATH_MULTIPLICATION_SYMBOL="",Blockly.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",Blockly.Msg.MATH_NUMBER_TOOLTIP="A number.",Blockly.Msg.MATH_ONLIST_HELPURL="",Blockly.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",Blockly.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",Blockly.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",Blockly.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",Blockly.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.";Blockly.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",Blockly.Msg.MATH_POWER_SYMBOL="^",Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",Blockly.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",Blockly.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",Blockly.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",Blockly.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",Blockly.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",Blockly.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",Blockly.Msg.MATH_ROUND_OPERATOR_ROUND="round",Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",Blockly.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",Blockly.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",Blockly.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",Blockly.Msg.MATH_SINGLE_OP_ROOT="square root",Blockly.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",Blockly.Msg.MATH_SUBTRACTION_SYMBOL="-",Blockly.Msg.MATH_TRIG_ACOS="acos",Blockly.Msg.MATH_TRIG_ASIN="asin",Blockly.Msg.MATH_TRIG_ATAN="atan",Blockly.Msg.MATH_TRIG_COS="cos",Blockly.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",Blockly.Msg.MATH_TRIG_SIN="sin",Blockly.Msg.MATH_TRIG_TAN="tan",Blockly.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",Blockly.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",Blockly.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",Blockly.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",Blockly.Msg.NEW_NUMBER_VARIABLE="Create number variable...",Blockly.Msg.NEW_STRING_VARIABLE="Create string variable...",Blockly.Msg.NEW_VARIABLE="Create variable...",Blockly.Msg.NEW_VARIABLE_TITLE="New variable name:",Blockly.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",Blockly.Msg.ORDINAL_NUMBER_SUFFIX="",Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",Blockly.Msg.PROCEDURES_BEFORE_PARAMS="with:",Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",Blockly.Msg.PROCEDURES_CREATE_DO="Create '%1'",Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",Blockly.Msg.PROCEDURES_DEFNORETURN_DO="",Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE="to",Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_DEFRETURN_RETURN="return",Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",Blockly.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",Blockly.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",Blockly.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",Blockly.Msg.REDO="Redo",Blockly.Msg.REMOVE_COMMENT="Remove Comment",Blockly.Msg.RENAME_VARIABLE="Rename variable...",Blockly.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",Blockly.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",Blockly.Msg.TEXT_APPEND_TITLE="to %1 append text %2",Blockly.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",Blockly.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",Blockly.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",Blockly.Msg.TEXT_CHARAT_FIRST="get first letter",Blockly.Msg.TEXT_CHARAT_FROM_END="get letter # from end",Blockly.Msg.TEXT_CHARAT_FROM_START="get letter #",Blockly.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",Blockly.Msg.TEXT_CHARAT_LAST="get last letter",Blockly.Msg.TEXT_CHARAT_RANDOM="get random letter",Blockly.Msg.TEXT_CHARAT_TAIL="",Blockly.Msg.TEXT_CHARAT_TITLE="in text %1 %2",Blockly.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",Blockly.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",Blockly.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",Blockly.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",Blockly.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",Blockly.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",Blockly.Msg.TEXT_GET_SUBSTRING_TAIL="",Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",Blockly.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",Blockly.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",Blockly.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",Blockly.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",Blockly.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",Blockly.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",Blockly.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",Blockly.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",Blockly.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",Blockly.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",Blockly.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",Blockly.Msg.TEXT_LENGTH_TITLE="length of %1",Blockly.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",Blockly.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",Blockly.Msg.TEXT_PRINT_TITLE="print %1",Blockly.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",Blockly.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",Blockly.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",Blockly.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",Blockly.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",Blockly.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",Blockly.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",Blockly.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",Blockly.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",Blockly.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",Blockly.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",Blockly.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",Blockly.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",Blockly.Msg.TODAY="Today",Blockly.Msg.UNDO="Undo",Blockly.Msg.UNNAMED_KEY="unnamed",Blockly.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",Blockly.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",Blockly.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",Blockly.Msg.VARIABLES_SET="set %1 to %2",Blockly.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",Blockly.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",Blockly.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",Blockly.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",Blockly.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",Blockly.Msg.CONTROLS_FOREACH_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_FOR_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=Blockly.Msg.CONTROLS_IF_MSG_ELSEIF,Blockly.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=Blockly.Msg.CONTROLS_IF_MSG_ELSE,Blockly.Msg.CONTROLS_IF_IF_TITLE_IF=Blockly.Msg.CONTROLS_IF_MSG_IF,Blockly.Msg.CONTROLS_IF_MSG_THEN=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.LISTS_GET_INDEX_HELPURL=Blockly.Msg.LISTS_INDEX_OF_HELPURL,Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.MATH_CHANGE_TITLE_ITEM=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT=Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT,Blockly.Msg.PROCEDURES_DEFRETURN_DO=Blockly.Msg.PROCEDURES_DEFNORETURN_DO,Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE=Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,Blockly.Msg.PROCEDURES_DEFRETURN_TITLE=Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE,Blockly.Msg.TEXT_APPEND_VARIABLE=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.MATH_HUE="230",Blockly.Msg.LOOPS_HUE="120",Blockly.Msg.LISTS_HUE="260",Blockly.Msg.LOGIC_HUE="210",Blockly.Msg.VARIABLES_HUE="330",Blockly.Msg.VARIABLES_DYNAMIC_HUE="310",Blockly.Msg.TEXTS_HUE="160",Blockly.Msg.PROCEDURES_HUE="290",Blockly.Msg.COLOUR_HUE="20",Blockly.Msg.VARIABLES_DEFAULT_NAME="item",function(I){{var D=I.blocks||(I.blocks={}),e;function r(e,t){return I.worker.getWorker(I.webConfig.workerjs).opAsync(e,t)}D.workerOpAsync=r;let i={};function N(e,t){e.push.apply(e,t)}function E(e){if(!e)throw new Error("Assertion failure")}class n{constructor(e,t,n,o,r){this.link=e,this.type=t,this.parentType=n,this.childType=o,this.isArrayType=r}}let A;function S(e){return e.link?S(e.link):e}function h(e,t){var n=S(e),o=S(t);if(E(null==n.link&&null==o.link),n!=o){if(n.childType&&o.childType){const e=n.childType;n.childType=null,h(e,o.childType)}else n.childType&&!o.childType&&(o.childType=n.childType);if(n.parentType&&o.parentType){const e=n.parentType;n.parentType=null,h(e,o.parentType)}else!n.parentType||o.parentType||o.type||(o.parentType=n.parentType);var r=function(e,t){if(null==e||"Array"===e&&k(t))return t;if(null==t||"Array"===t&&k(e))return e;if(e==t)return e;throw new Error("cannot mix "+e+" with "+t)}(n.type,o.type);e.link=o,n.link=o,n.isArrayType=o.isArrayType,e.type=null,t.type=r}}function y(e,t=!1){return new n(null,e,null,null,t)}D.Point=n,(e=A=D.BlockDeclarationType||(D.BlockDeclarationType={}))[e.None=0]="None",e[e.Argument=1]="Argument",e[e.Assigned=2]="Assigned",e[e.Implicit=3]="Implicit";const z=y("number"),X=y("boolean"),$=y("string"),c=y("void");function _(e){if(!e)return y(e);switch(e.toLowerCase()){case"number":return z;case"boolean":return X;case"string":return $;case"void":return c;default:return y(e)}}function w(t,n){if(E(null!=n),"placeholder"==n.type||n.type===pxtc.TS_OUTPUT_TYPE)return n.p||(n.p=y(null)),S(n.p);if("variables_get"==n.type)return S(M(t,n,n.getField("VAR").getText()).type);if("function_call_output"==n.type)return Y(t,n.getField("function_name").getText());if(!n.outputConnection)return _(c.type);const o=n.outputConnection.check_&&n.outputConnection.check_.length?n.outputConnection.check_[0]:"T";if("Array"===o){if(1<n.outputConnection.check_.length)return _(n.outputConnection.check_[1]);let e;if("lists_create_with"==n.type){if(n.inputList&&n.inputList.length)for(const i of n.inputList)if(i.connection&&i.connection.targetBlock()){var r=S(w(t,i.connection.targetBlock()));if(r){if(r.parentType)return r.parentType;b(e=r.type?_(r.type+"[]"):y(null),r);break}}}else"argument_reporter_array"==n.type&&(e=e||_("any[]"));return e&&(e.isArrayType=!0),e||y(null,!0)}if("T"!==o)return _(o);{const o=t.stdCallTable[n.type],s="lists_index_get"===n.type;if(s||o&&o.comp.thisParameter){var e=s?n.inputList.find(e=>"LIST"===e.name):n.inputList.find(e=>e.name===o.comp.thisParameter.definitionName);if(e.connection&&e.connection.targetBlock()){const n=w(t,e.connection.targetBlock());if(n.childType)return n.childType;const o=k(n.type)&&"Array"!==n.type?y(n.type.substr(0,n.type.length-2)):y(null);return b(n,o),o}}return y(null)}}function Y(n,o){if(!n.userFunctionReturnValues[o]){var r=Blockly.Functions.getDefinition(o,n.workspace);let t=y("void");if(pe(r,!0))t=y("any");else{var e=[];for(const I of r.getDescendants(!1))"function_return"===I.type&&(m(n,I,"RETURN_VALUE"),e.push(w(n,R(I,"RETURN_VALUE"))));if(e.length)try{const I=y(null);for(const n of e)h(I,n);t=I}catch(e){n.diagnostics.push({blockId:r.id,message:I.Util.lf("Function '{0}' has an invalid return type",o)}),t=y("any")}}n.userFunctionReturnValues[o]=t}return n.userFunctionReturnValues[o]}function k(e){return e&&(-1!==e.indexOf("[]")||"Array"==e)}function m(e,t,n,o){var r=t.getInputTargetBlock(n);r?r.type!==pxtc.TS_OUTPUT_TYPE||r.p||(r.p=y(null)):(i[t.id]||(i[t.id]={}),i[t.id][n]||(i[t.id][n]=(r=e,n=t,{type:"placeholder",p:y(o||null),workspace:r.workspace,parentBlock_:n})))}function O(e){return"pxt_controls_for"==e.type||"pxt_controls_for_of"==e.type?R(e,"VAR"):e}function R(e,t){return e.getInputTargetBlock(t)||i[e.id]&&i[e.id][t]}function q(){i={}}function f(e,t,n,o){m(e,t,n);try{h(w(e,R(t,n)),o)}catch(e){}}function J(e,d){function p(e){return e.name?e.connection&&e.connection.check_&&e.connection.check_.length?e.connection.check_[0]:"T":void 0}function g(e,t){let n=e.inputList.filter(e=>"T"===p(e));if(n.length){const p=R(e,n[0].name);if(p){const n=w(d,p),o=n.type?_(w(d,p).type+"[]"):_(null);return b(o,n),f(d,e,t,o),1}}}e&&e.filter(e=>e.isEnabled()).forEach(r=>{try{switch(r.type){case"math_op2":f(d,r,"x",_(z.type)),f(d,r,"y",_(z.type));break;case"math_op3":f(d,r,"x",_(z.type));break;case"math_arithmetic":case"logic_compare":switch(r.getFieldValue("OP")){case"ADD":case"MINUS":case"MULTIPLY":case"DIVIDE":case"LT":case"LTE":case"GT":case"GTE":case"POWER":f(d,r,"A",_(z.type)),f(d,r,"B",_(z.type));break;case"AND":case"OR":m(d,r,"A",X.type),m(d,r,"B",X.type);break;case"EQ":case"NEQ":m(d,r,"A"),m(d,r,"B");var e=w(d,R(r,"A")),t=w(d,R(r,"B"));try{h(e,t)}catch(r){}}break;case"logic_operation":m(d,r,"A",X.type),m(d,r,"B",X.type);break;case"logic_negate":m(d,r,"BOOL",X.type);break;case"controls_if":for(let e=0;e<=r.elseifCount_;++e)m(d,r,"IF"+e,X.type);break;case"pxt_controls_for":case"controls_simple_for":f(d,r,"TO",_(z.type));break;case"pxt_controls_for_of":case"controls_for_of":b(w(d,R(r,"LIST")),M(d,r,O(r).getField("VAR").getText()).type);break;case"variables_set":case"variables_change":var n=M(d,r,r.getField("VAR").getText()).type,o=(m(d,r,"VALUE"),R(r,"VALUE"));if(o){s=d;var i=null!=(l=null==(l=(a=o).outputConnection)?void 0:l.check_)&&l.length&&"Array"!==a.outputConnection.check_[0]&&"T"!==a.outputConnection.check_[0]?a.outputConnection.check_.map(e=>_(e)):[w(s,a)];const c=S(n);if(c.type&&i.slice(1).some(e=>e.type===c.type))n.link=S(i[0]);else try{h(n,i[0])}catch(r){}}break;case"controls_repeat_ext":f(d,r,"TIMES",_(z.type));break;case"device_while":m(d,r,"COND",X.type);break;case"lists_index_get":f(d,r,"LIST",_("Array")),f(d,r,"INDEX",_(z.type)),b(w(d,R(r,"LIST")),w(d,r));break;case"lists_index_set":f(d,r,"LIST",_("Array")),m(d,r,"VALUE"),g(r,"LIST"),f(d,r,"INDEX",_(z.type));break;case"function_definition":Y(d,r.getField("function_name").getText());break;case"function_call":case"function_call_output":r.getArguments().forEach(e=>{f(d,r,e.id,_(e.type))});break;case pxtc.TS_RETURN_STATEMENT_TYPE:m(d,r,"RETURN_VALUE");break;case pxtc.PAUSE_UNTIL_TYPE:f(d,r,"PREDICATE",X);break;default:if(r.type in d.stdCallTable){const u=d.stdCallTable[r.type];"ENUM_GET"!==u.attrs.shim&&"KIND_GET"!==u.attrs.shim&&K(u,G(r)).forEach((t,e)=>{e=u.isExtensionMethod&&0===e;if(t.definitionName&&!r.getFieldValue(t.definitionName)){var n=r.inputList.find(e=>e.name==t.definitionName);if(n&&n.connection&&n.connection.check_&&(!e||"Array"!==p(n)||!g(r,t.definitionName)))for(let e=0;e<n.connection.check_.length;e++)try{var o=n.connection.check_[e];f(d,r,t.definitionName,_(o));break}catch(e){}}})}}}catch(e){const p=e.block||r;p.setWarningText(e+""),d.errors.push(p)}var s,a,l}),d.allVariables.forEach(e=>{null==P(e.type).type&&h(e.type,_(e.type.isArrayType?"number[]":z.type))})}function b(e,t){e=S(e),t=S(t);e.childType?h(e.childType,t):e.type||(e.childType=t),t.parentType?h(t.parentType,e):t.type||(t.parentType=e),k(e.type)&&(e.isArrayType=!0)}function P(e,t=[]){var n=S(e);if(-1===t.indexOf(n)&&(t.push(n),!n.type||"Array"===n.type)){if(n.parentType){const e=P(n.parentType,t);if(e.type&&"Array"!==e.type)return k(e.type)?n.type=e.type.substr(0,e.type.length-2):n.type=e.type,n}if(n.childType){const e=P(n.childType,t);if(e.type)n.type=e.type+"[]"}}return n}function Q(e){var t=e.getFieldValue("math_number_minmax"===e.type?"SLIDER":"NUM"),t=parseFloat(t),n=t;if(!isFinite(n)||isNaN(n))throw n=lf("Number entered is either too large or too small"),e=e,(n=new Error(n)).block=e,n;return t}let T={ADD:"+",MINUS:"-",MULTIPLY:"*",DIVIDE:"/",LT:"<",LTE:"<=",GT:">",GTE:">=",AND:"&&",OR:"||",EQ:"==",NEQ:"!=",POWER:"**"};function Z(t,n,o,e){var r=F(n.getField("function_name").getText(),t,!0),i=!n.getInputsInline(),s=n.getArguments().map(e=>({actualName:e.name,definitionName:e.id})).map(e=>U(t,n,e,o)),r=D.H.stdCall(r,s,i);return e?D.mkStmt(r):r}function ee(e){e=e.getContent();return D.Helpers.mkMultiComment(e.trim())}function C(e){if(null==e.type&&(h(e,_(z.type)),e=S(e)),k(e.type)||e.isArrayType)return D.mkText("[]");switch(e.type){case"boolean":return D.H.mkBooleanLiteral(!1);case"number":return D.H.mkNumberLiteral(0);case"string":return D.H.mkStringLiteral("");default:return D.mkText("null")}}function L(t,n,o){let r;if(E(null!=n),t.stats[n.type]=(t.stats[n.type]||0)+1,ie(n,o),"placeholder"!=n.type&&n.isEnabled&&n.isEnabled())switch(n.type){case"math_number":case"math_integer":case"math_whole_number":case"math_number_minmax":r=D.H.mkNumberLiteral(Q(n));break;case"math_op2":r=(f=t,k=o,b=(y=n).getFieldValue("op"),v=L(f,R(y,"x"),k),f=L(f,R(y,"y"),k),D.H.mathCall(b,[v,f]));break;case"math_op3":r=function(e){e=L(t,R(n,"x"),e);return D.H.mathCall("abs",[e])}(o);break;case"math_arithmetic":case"logic_compare":case"logic_operation":r=function(e,t,n){var o=t.getFieldValue("OP"),r=R(t,"A"),t=R(t,"B"),t=[L(e,r,n),L(e,t,n)],n=w(e,r).type;if(n==$.type){if("EQ"==o)return D.H.mkSimpleCall("==",t);if("NEQ"==o)return D.H.mkSimpleCall("!=",t)}else if(n==X.type)return D.H.mkSimpleCall(T[o],t);return E(o in T),D.H.mkSimpleCall(T[o],t)}(t,n,o);break;case"math_modulo":r=(y=t,k=o,v=R(b=n,"DIVIDEND"),b=R(b,"DIVISOR"),v=[L(y,v,k),L(y,b,k)],D.H.mkSimpleCall("%",v));break;case"logic_boolean":r=D.H.mkBooleanLiteral("TRUE"==n.getFieldValue("BOOL"));break;case"logic_negate":r=function(e){e=L(t,R(n,"BOOL"),e);return D.mkPrefix("!",[D.H.mkParenthesizedExpression(e)])}(o);break;case"variables_get":r=(f=t,m=(_=n).getField("VAR").getText(),(f=M(f,_,m))?(f.firstReference||(f.firstReference=_),E(null!=f&&null!=f.type),D.mkText(f.escapedName)):D.mkText(m));break;case"text":r=D.H.mkStringLiteral(n.getFieldValue("TEXT"));break;case"text_join":r=function(e,t,n){let o,r=0;for(;;){var i=R(t,"ADD"+r);if(r++,!i){if(r<t.inputList.length)continue;break}var s=L(e,i,n);o=o?D.H.mkSimpleCall("+",[o,s]):0===i.type.indexOf("text")?s:D.H.mkSimpleCall("+",[D.H.mkStringLiteral(""),s])}return o||D.H.mkStringLiteral("")}(t,n,o);break;case"lists_create_with":r=(g=t,h=o,m=(_=n).inputList.map(e=>e.connection&&e.connection.targetBlock()?L(g,e.connection.targetBlock(),h):void 0).filter(e=>!!e),D.H.mkArrayLiteral(m,!_.getInputsInline()));break;case"lists_index_get":r=(d=o,p=L(c=t,R(u=n,"LIST"),d),c=L(c,R(u,"INDEX"),d),D.mkGroup([p,D.mkText("["),c,D.mkText("]")]));break;case"lists_index_set":r=(u=t,d=o,c=R(p=n,"LIST"),a=L(u,c,d),l=L(u,R(p,"INDEX"),d),u=L(u,R(p,"VALUE"),d),p=D.mkGroup([a,D.mkText("["),l,D.mkText("] = "),u]),"lists_create_with"===c.type?B(p):p);break;case"math_js_op":case"math_js_round":r=(a=t,l=o,i=(e=n).getFieldValue("OP"),s=[L(a,R(e,"ARG0"),l)],e.getInput("ARG1")&&s.push(L(a,R(e,"ARG1"),l)),D.H.mathCall(i,s));break;case pxtc.TS_OUTPUT_TYPE:r=D.mkText(n.getFieldValue("EXPRESSION").trim());break;case"argument_reporter_boolean":case"argument_reporter_number":case"argument_reporter_string":case"argument_reporter_array":case"argument_reporter_custom":r=function(e){e=F(n.getFieldValue("VALUE"),e);return D.mkText(e)}(t);break;case"function_call_output":r=Z(t,n,o,!1);break;default:e=t.stdCallTable[n.type];r=e?e.imageLiteral?oe(0,n,e.imageLiteral,e.imageLiteralColumns,e.imageLiteralRows,e.namespace,e.f,K(e,G(n)).map(e=>U(t,n,e,o))):ne(t,n,e,o):(I.reportError("blocks","unable to compile expression",{details:n.type}),C(w(t,n)))}else if("Array"===S(w(t,n)).type){let e="lists_index_get"===n.parentBlock_.type;if(!e){const D=t.stdCallTable[n.parentBlock_.type];e=D&&D.isExpression}const o=D.mkText("[0]");r=e?o:B(o)}else r=C(w(t,n));var e,i,s,a,l,c,u,d,p,g,h,_,m,f,y,k,b,v;return r.id=n.id,r}function M(e,t,n){return function e(t,n){return n&&n.declaredVars[t]?n.declaredVars[t]:n&&n.parent?e(t,n.parent):null}(n,e.idToScope[t.id])}function F(e,t,n=!1){if(!e)return"_";if(n){if(t.renames.oldToNewFunctions[e])return t.renames.oldToNewFunctions[e]}else if(t.renames.oldToNew[e])return t.renames.oldToNew[e];let o=ts.pxtc.escapeIdentifier(e);if(t.renames.takenNames[o]){let e=2;for(;t.renames.takenNames[o+e];)e++;o+=e}return n?(t.renames.oldToNewFunctions[e]=o,t.renames.takenNames[o]=!0):t.renames.oldToNew[e]=o,o}function te(t,n,o){var r=t.stdCallTable[n.type];{if(r.imageLiteral)return D.mkStmt(oe(0,n,r.imageLiteral,r.imageLiteralColumns,r.imageLiteralRows,r.namespace,r.f,K(r,G(n)).map(e=>U(t,n,e,o))));if(r.hasHandler){var i=t,s=n,a=r,l=K(r,G(n)).filter(e=>!!e.definitionName),c=r.namespace,u=o,d,p,g,h,l=l.map(e=>U(i,s,e,u)),_=R(s,"HANDLER"),_=H(i,_);I.appTarget.compile&&I.appTarget.compile.emptyEventHandlerComments&&0===_.children.length&&_.children.unshift(D.mkStmt(D.mkText("// "+pxtc.HANDLER_COMMENT)));let e;return v(s)&&s.mutation.getMutationType()===D.MutatorTypes.ObjectDestructuringMutator?e=s.mutation.compileMutation(i,u):a.comp.handlerArgs.length&&(p=i,g=ae(d=s,a).map(e=>M(p,d,e[0]).escapedName),e=D.mkText(`function (${g.join(", ")})`)),[g,c,l,_,a,h=!1]=[c,a.f,l,_,e,a.isExtensionMethod],_.noFinalNewline=!0,a=a?D.mkGroup([a,_]):D.mkGroup([D.mkText("function ()"),_]),h?D.mkStmt(D.H.extensionCall(c,l.concat([a]),!1)):g?D.mkStmt(D.H.namespaceCall(g,c,l.concat([a]),!1)):D.mkStmt(D.H.mkCall(c,l.concat([a]),!1))}return D.mkStmt(ne(t,n,r,o))}}function U(e,t,n,o,r=!1){var i=t.getFieldValue(n.definitionName);if(null!=i){const o=t.getField(n.definitionName);if(o instanceof pxtblockly.FieldTextInput)return D.H.mkStringLiteral(i);if(o instanceof pxtblockly.FieldTilemap&&!o.isGreyBlock){const t=I.react.getTilemapProject(),n=o.getValue();if(n.startsWith("tilemap`"))return D.mkText(n);if(e.options.emitTilemapLiterals)try{const e=I.sprite.decodeTilemap(n,"typescript",t);if(e){const[I]=t.createNewTilemapFromData(e);return D.mkText(`tilemap\`${I}\``)}}catch(e){}}const r=e.blocksInfo.apis.byQName[n.type];if(r&&r.attributes.emitAsConstant)for(const I of Object.keys(e.blocksInfo.apis.byQName)){const t=e.blocksInfo.apis.byQName[I];if(t&&t.attributes&&t.attributes.enumIdentity===i)return D.mkText(I)}var s=D.mkText(i);return s.canIndentInside="string"==typeof i&&0<=i.indexOf("\n"),s}{m(e,t,n.definitionName);const I=R(t,n.definitionName);return r&&"lists_create_with"===I.type?B(L(e,I,o)):n.shadowOptions&&n.shadowOptions.toString&&w(e,I)!==$?D.H.mkSimpleCall("+",[D.H.mkStringLiteral(""),D.H.mkParenthesizedExpression(L(e,I,o))]):L(e,I,o)}}function ne(n,o,r,i){let t;if(v(o)&&o.mutation.getMutationType()===D.MutatorTypes.RestParameterMutator)t=o.mutation.compileMutation(n,i).children;else{if("ENUM_GET"===r.attrs.shim){const n=r.attrs.enumName,i=o.getFieldValue("MEMBER").replace(/^\d+/,"");return D.H.mkPropertyAccess(i,D.mkText(n))}if("KIND_GET"===r.attrs.shim){const i=n.kinds.filter(e=>e.blockId===r.attrs.blockId)[0];return D.H.mkPropertyAccess(o.getFieldValue("MEMBER"),D.mkText(i.name))}t=K(r,G(o)).map((e,t)=>U(n,o,e,i,r.isExtensionMethod&&0===t&&!r.isExpression))}let e=r.namespace,s=r.f;if(r.attrs.blockAliasFor){const D=n.blocksInfo.apis.byQName[r.attrs.blockAliasFor];D&&(s=D.name,e=D.namespace)}var a=!o.getInputsInline();if(r.isIdentity)return t[0];if(r.property)return D.H.mkPropertyAccess(s,t[0]);if("@get@"==s)return D.H.mkPropertyAccess(t[1].op.replace(/.*\./,""),t[0]);if("@set@"==s)return D.H.mkAssign(D.H.mkPropertyAccess(t[1].op.replace(/.*\./,"").replace(/@set/,""),t[0]),t[2]);if("@change@"==s)return D.H.mkSimpleCall("+=",[D.H.mkPropertyAccess(t[1].op.replace(/.*\./,"").replace(/@set/,""),t[0]),t[2]]);if(r.isExtensionMethod){if(r.attrs.defaultInstance){let e;(e=v(o)&&o.mutation.getMutationType()===D.MutatorTypes.DefaultInstanceMutator?o.mutation.compileMutation(n,i):e)?t.unshift(e):t.unshift(D.mkText(r.attrs.defaultInstance))}return D.H.extensionCall(s,t,a)}return e?D.H.namespaceCall(e,s,t,a):D.H.stdCall(s,t,a)}function v(e){return e.mutation}function oe(e,t,n,o,r,i,s,a){a=void 0===a?[]:a;let l="\n",c=(r=r||5,o=(o||5)*n,t.getFieldValue("LEDS"));c=c.replace(/[ `\n]+/g,"");for(let t=0;t<r;++t){for(let e=0;e<o;++e)0<e&&(l+=" "),l+="#"===c[t*o+e]?"#":".";l+="\n"}n=D.H.mkStringLiteral(l);return n.canIndentInside=!0,D.H.namespaceCall(i,s,[n].concat(a),!1)}function x(e,t){let n;var o,r,i,s,a,l,c,u,d,p,g,h,_,m,f,y,k,b,v,T,E=[];switch(e.stats[t.type]=(e.stats[t.type]||0)+1,ie(t,E),t.type){case"controls_if":n=function(r,i,s){var e,a=[];for(let o=0;o<=i.elseifCount_;++o){let e=L(r,R(i,"IF"+o),s),t=H(r,R(i,"DO"+o)),n=D.mkText("if (");0<o&&((n=D.mkText("else if (")).glueToBlock=D.GlueMode.WithSpace),N(a,[n,e,D.mkText(")"),t])}return i.elseCount_&&((e=D.mkText("else")).glueToBlock=D.GlueMode.WithSpace,N(a,[e,H(r,R(i,"ELSE"))])),a}(e,t,E);break;case"pxt_controls_for":case"controls_for":case"controls_simple_for":n=(_=e,f=E,y=R(m=t,"TO"),k=R(m,"DO"),b=R(m,"BY"),v=R(m,"FROM"),T=!b||b.type.match(/^math_number/)&&1==Q(b),m=M(_,m,O(m).getField("VAR").getText()),[D.mkText("for (let "+m.escapedName+" = "),v?L(_,v,f):D.mkText("0"),D.mkText("; "),D.mkInfix(D.mkText(m.escapedName),"<=",L(_,y,f)),D.mkText("; "),T?D.mkText(m.escapedName+"++"):D.mkInfix(D.mkText(m.escapedName),"+=",L(_,b,f)),D.mkText(")"),H(_,k)]);break;case"pxt_controls_for_of":case"controls_for_of":n=(v=e,y=E,m=R(T=t,"LIST"),b=R(T,"DO"),T=M(v,T,O(T).getField("VAR").getText()),[D.mkText("for (let "+T.escapedName+" of "),L(v,m,y),D.mkText(")"),H(v,b)]);break;case"variables_set":n=[function(t,e,n){let o=R(e,"VALUE"),r=M(t,e,e.getField("VAR").getText()),i=t.idToScope[e.id].declaredVars[r.name]===r&&!r.firstReference&&!r.alreadyDeclared,s=(i&&j(e,e=>{"variables_get"===e.type&&M(t,e,e.getField("VAR").getText())===r&&(i=!1)},!0),L(t,o,n)),a=r.escapedName+" = ";if(r.isAssigned=!0,i){r.alreadyDeclared=A.Assigned;const D=P(r.type);if(a=`let ${r.escapedName} = `,D){const e=P(w(t,o));D.type!==e.type&&(a=`let ${r.escapedName}: ${D.type} = `)}}else r.firstReference||(r.firstReference=e);return D.mkStmt(D.mkText(a),s)}(e,t,E)];break;case"variables_change":n=[(f=e,_=E,h=R(k=t,"VALUE"),k=M(f,k,k.getField("VAR").getText()),f=L(f,h,_),h=D.mkText(k.escapedName),D.mkStmt(D.mkInfix(h,"+=",f)))];break;case"controls_repeat_ext":n=function(t,n,e){let o=L(t,R(n,"TIMES"),e),r=H(t,R(n,"DO")),i="index";for(let e=2;M(t,n,i);e++)i="index"+e;return[D.mkText("for (let "+i+" = 0; "),D.mkInfix(D.mkText(i),"<",o),D.mkText("; "+i+"++)"),r]}(e,t,E);break;case"device_while":n=function(e,t,n){n=L(e,R(t,"COND"),n),e=H(e,R(t,"DO"));return[D.mkText("while ("),n,D.mkText(")"),e]}(e,t,E);break;case"procedures_defnoreturn":n=(h=e,g=F((p=t).getFieldValue("NAME"),h,!0),p=R(p,"STACK"),[D.mkText("function "+g+"() "),H(h,p)]);break;case"function_definition":n=(c=e,p=F((g=t).getField("function_name").getText(),c,!0),u=R(g,"STACK"),d=g.getArguments().map(e=>"Array"==e.type?F(e.name,c)+": any[]":F(e.name,c)+": "+e.type),g=pe(g,!1),[D.mkText(`function ${p} (${d.join(", ")})`+(g?": any":"")),H(c,u)]);break;case"procedures_callnoreturn":n=[(d=e,u=F((u=t).getFieldValue("NAME"),d,!0),D.mkStmt(D.mkText(u+"()")))];break;case"function_call":n=[Z(e,t,E,!0)];break;case pxtc.TS_RETURN_STATEMENT_TYPE:n=[(s=e,l=E,(a=R(a=t,"RETURN_VALUE"))&&"placeholder"!=a.type?D.mkStmt(D.mkText("return "),L(s,a,l)):D.mkStmt(D.mkText("return")))];break;case ts.pxtc.ON_START_TYPE:n=(s=H(e,R(t,"HANDLER")),I.appTarget.compile&&I.appTarget.compile.onStartText&&s&&s.children&&s.children.unshift(D.mkStmt(D.mkText(`// ${pxtc.ON_START_COMMENT}
`))),s.children);break;case pxtc.TS_STATEMENT_TYPE:n=t.getLines().map(e=>D.mkText(e+"\n"));break;case pxtc.PAUSE_UNTIL_TYPE:n=(a=e,l=t,o=E,r=I.appTarget.runtime&&I.appTarget.runtime.pauseUntilBlock,I.Util.assert(!!r,"target has block enabled"),i=r.namespace,r=r.callName||"pauseUntil",a=U(a,l,{definitionName:"PREDICATE",actualName:"PREDICATE"},o),l=[D.mkGroup([D.mkText("() => "),a])],i?[D.mkStmt(D.H.namespaceCall(i,r,l,!1))]:[D.mkStmt(D.H.mkCall(r,l,!1,!1))]);break;case pxtc.TS_DEBUGGER_TYPE:n="1"==t.getFieldValue("ON_OFF")?[D.mkText("debugger;\n")]:[];break;case pxtc.TS_BREAK_TYPE:n=[D.mkText("break;\n")];break;case pxtc.TS_CONTINUE_TYPE:n=[D.mkText("continue;\n")];break;default:n=e.stdCallTable[t.type]?[te(e,t,E)]:[D.mkStmt(L(e,t,E))]}var S=n[n.length-1];if(S&&!S.id&&(S.id=t.id),E.length){var C=E,x=n,B=[];for(const x of C)for(const C of x.split("\n"))B.push(D.mkText("// "+C)),B.push(D.mkNewLine());for(const C of B.reverse())x.unshift(C)}return n.forEach(e=>{!(e.type===D.NT.Block||e.type===D.NT.Prefix&&I.Util.startsWith(e.op,"//"))||t.type==pxtc.ON_START_TYPE&&e.id||(e.id=t.id)}),n}function H(t,e){let n=[],o=e;for(;e;)e.isEnabled()&&N(n,x(t,e)),e=e.getNextBlock();return o&&t.blockDeclarations[o.id]&&t.blockDeclarations[o.id].filter(e=>!e.alreadyDeclared).forEach(e=>{n.unshift(se(e,t.blocksInfo)),e.alreadyDeclared=A.Implicit}),D.mkBlock(n)}function B(e){var t=D.mkStmt(D.mkText(";"));return t.glueToBlock=D.GlueMode.NoSpace,D.mkGroup([t,e])}function o(e,t,n={}){let o={workspace:e,options:n,stdCallTable:{},userFunctionReturnValues:{},diagnostics:[],errors:[],renames:{oldToNew:{},takenNames:{},oldToNewFunctions:{}},stats:{},enums:[],kinds:[],idToScope:{},blockDeclarations:{},allVariables:[],blocksInfo:null};return(o.blocksInfo=t)&&(Object.keys(t.apis.byQName).forEach(e=>{e=t.apis.byQName[e];!e.pkg||6!==e.kind&&3!==e.kind&&5!==e.kind&&4!==e.kind||(o.renames.takenNames[e.qName]=!0)}),t.enumsByName&&Object.keys(t.enumsByName).forEach(e=>o.enums.push(t.enumsByName[e])),t.kindsByName&&Object.keys(t.kindsByName).forEach(e=>o.kinds.push(t.kindsByName[e])),t.blocks.forEach(e=>{var t,n;o.stdCallTable[e.attributes.blockId]?I.reportError("blocks","function already defined",{details:e.attributes.blockId,qualifiedName:e.qName,packageName:e.pkg}):(o.renames.takenNames[e.namespace]=!0,n=!!(t=I.blocks.compileInfo(e)).thisParameter,o.stdCallTable[e.attributes.blockId]={namespace:e.namespace,f:e.name,comp:t,attrs:e.attributes,isExtensionMethod:n,isExpression:e.retType&&"void"!==e.retType,imageLiteral:e.attributes.imageLiteral,imageLiteralColumns:e.attributes.imageLiteralColumns,imageLiteralRows:e.attributes.imageLiteralRows,hasHandler:I.blocks.hasHandler(e),property:!e.parameters,isIdentity:"TD_ID"==e.attributes.shim})}),e.getTopBlocks(!1).filter(de).forEach(e=>{F("procedures_defnoreturn"===e.type?e.getFieldValue("NAME"):e.getField("function_name").getText(),o,!0)})),o}function re(e,t){var n;return e.type===ts.pxtc.ON_START_TYPE?0:(n=t.stdCallTable[e.type],t=V(0,e),e=1+ts.pxtc.Util.codalHash16(t),n&&n.attrs.afterOnStart?e:-e)}function s(o,n,r){try{let e=n.getAllBlocks(),t=(I.react.getTilemapProject&&I.react.getTilemapProject().removeInactiveBlockAssets(e.map(e=>e.id)),n.getTopBlocks(!0));t=t.sort((e,t)=>re(e,o)-re(t,o));{var i=o;var s=e;var a=t;s.forEach(e=>e.setEnabled(!0));const f={};function l(e,t){f[e]?W(t,!1):(W(t,!0),f[e]=t)}a.forEach(t=>{var e=i.stdCallTable[t.type];if(t.type==ts.pxtc.ON_START_TYPE)l(ts.pxtc.ON_START_TYPE,t);else if(!(de(t)||e&&e.attrs.blockAllowMultiple&&!e.attrs.handlerStatement))if(e&&e.hasHandler&&!e.attrs.handlerStatement)l(e.attrs.blockHandlerKey||V(0,t),t);else{let e=t;for(;e;)W(t,!1),e=e.getNextBlock()}})}e=e.filter(e=>e.isEnabled()),t=t.filter(e=>e.isEnabled());{var c=t;var u=o;let n,r=1;function d(e,t,o){if(o.idToScope[e.id]=t,"variables_get"===e.type){const o=p(e.getField("VAR").getText(),t);t.referencedVars.push(o.id)}else if("variables_set"===e.type||"variables_change"===e.type){const o=p(e.getField("VAR").getText(),t);t.assignedVars.push(o.id),t.referencedVars.push(o.id)}else if(e.type===pxtc.TS_STATEMENT_TYPE){const o=e.declaredVariables;o&&o.split(",").forEach(e=>{p(e,t).alreadyDeclared=A.Argument})}if(e.inputList.some(e=>e.type===Blockly.NEXT_STATEMENT)){const p=function(e,t){switch(e.type){case"pxt_controls_for":case"controls_simple_for":return[[O(e).getField("VAR").getText(),z]];case"pxt_controls_for_of":case"controls_for_of":return[[O(e).getField("VAR").getText(),y(null)]]}if(v(e)){const t=e.mutation.getDeclaredVariables();if(t)return Object.keys(t).map(e=>[e,y(t[e])])}t=t.stdCallTable[e.type];return t&&t.comp.handlerArgs.length?ae(e,t):[]}(e,o).map(e=>({name:e[0],type:e[1],id:r++}));let n=t;p.length&&(n={parent:t,firstStatement:e,declaredVars:{},referencedVars:[],assignedVars:[],children:[]},p.forEach(e=>{e.alreadyDeclared=A.Assigned,n.declaredVars[e.name]=e}),o.idToScope[e.id]=n),t!==n&&t.children.push(n),j(e,e=>{d(e,n,o)}),e.inputList.filter(e=>e.type===Blockly.NEXT_STATEMENT).forEach(e=>{var t;e.connection&&e.connection.targetBlock()&&(e=e.connection.targetBlock(),t={parent:n,firstStatement:e,declaredVars:{},referencedVars:[],assignedVars:[],children:[]},n.children.push(t),d(e,t,o))})}else j(e,e=>{d(e,t,o)});e.nextConnection&&e.nextConnection.targetBlock()&&d(e.nextConnection.targetBlock(),t,o)}function p(e,t){return t.declaredVars[e]||(t.parent?p(e,t.parent):(t.declaredVars[e]={name:e,type:y(null),id:r++},t.declaredVars[e]))}c.forEach(e=>{e.type===ts.pxtc.ON_START_TYPE&&(e=e.getInputTargetBlock("HANDLER"))&&d(e,n={firstStatement:e,declaredVars:{},referencedVars:[],children:[],assignedVars:[]},u)}),n=n||{firstStatement:null,declaredVars:{},referencedVars:[],children:[],assignedVars:[]},c.forEach(e=>{e.type!==ts.pxtc.ON_START_TYPE&&d(e,n,u)}),Object.keys(n.declaredVars).forEach(e=>{var t=n.declaredVars[e];delete n.declaredVars[e],(function e(t,n){let o;if(-1!==t.referencedVars.indexOf(n))return t;for(const r of t.children)if(le(r,n)){if(ce(r,n))return t;if(o)return t;o=r}return o?e(o,n):void 0}(n,t.id)||n).declaredVars[e]=t}),function t(n,o){const e=Object.keys(n.declaredVars);if(e.length){const r=e.map(e=>n.declaredVars[e]);n.firstStatement&&(o.blockDeclarations[n.firstStatement.id]=r.concat(o.blockDeclarations[n.firstStatement.id]||[])),r.forEach(e=>o.allVariables.push(e))}n.children.forEach(e=>t(e,o))}(n,u),function t(o,r){for(const r of Object.keys(o.declaredVars)){const i=o.declaredVars[r];i.escapedName||(i.escapedName=e(r))}function e(t){if(!t)return"_";let n=ts.pxtc.escapeIdentifier(t);if(r.renames.takenNames[n]||i(n,o,t)){let e=2;for(;r.renames.takenNames[n+e]||i(n+e,o,t);)e++;n+=e}return n}function i(e,t,n){if(t){for(const i of Object.keys(t.declaredVars)){const o=t.declaredVars[i];if((n!==o.name||o.name!==o.escapedName)&&o.escapedName===e)return!0}return i(e,t.parent,n)}return!1}o.children.forEach(e=>t(e,r))}(n,u),n}J(e,o);const h=[],_=function(t,n){if(!t.length||t.some(e=>!e.rendered))return{orphans:n,idToComments:{}};var o=t.map(e=>{var t=e.getBoundingRectangle(),n=e.getHeightWidth();return{id:e.id,x:t.left,y:t.top,width:n.width,height:n.height}}),r={orphans:[],idToComments:{}};for(const t of n){const n=t.getBoundingRectangle(),i=t.getHeightWidth(),s=n.left,a=n.top;let e;for(const t of o)(ue(s,a,i.width,i.height,t)||!e&&ue(s-20,a-20,i.width+40,i.height+40,t))&&(e=t);(e?(r.idToComments[e.id]||(r.idToComments[e.id]=[]),r.idToComments[e.id]):r.orphans).push(t)}return r}(t,n.getTopComments(!0)),m=(_.orphans.forEach(e=>N(h,ee(e).children)),t.forEach(e=>{_.idToComments[e.id]&&_.idToComments[e.id].forEach(e=>{N(h,ee(e).children)}),e.type==ts.pxtc.ON_START_TYPE?N(h,x(o,e)):(e=D.mkBlock(x(o,e))).type==D.NT.Block?N(h,e.children):h.push(e)}),[]);o.enums.forEach(i=>{var e=n.getVariablesOfType(i.name);if(e&&e.length){const n=e.map(e=>{var t=/^(\d+)([^0-9].*)$/.exec(e.name);return t?[t[2],parseInt(t[1])]:[e.name,-1]}),s=(n.sort((e,t)=>e[1]-t[1]),[]);let r=-1;n.forEach(([e,t],n)=>{let o;if(i.isBitMask){const i=Math.log2(t);0<=i&&Math.floor(i)===i&&(o=D.H.mkAssign(D.mkText(e),D.H.mkSimpleCall("<<",[D.H.mkNumberLiteral(1),D.H.mkNumberLiteral(i)])))}else if(i.isHash){const i=ts.pxtc.Util.codalHash16(e.toLowerCase());o=D.H.mkAssign(D.mkText(e),D.H.mkNumberLiteral(i))}o=o||(t===r+1?D.mkText(e):D.H.mkAssign(D.mkText(e),D.H.mkNumberLiteral(t))),s.push(o),r=t});e=D.mkCommaSep(s,!0);e.glueToBlock=D.GlueMode.NoSpace,m.push(D.mkGroup([D.mkText("enum "+i.name),D.mkBlock([e])]))}}),o.kinds.forEach(t=>{var e=n.getVariablesOfType("KIND_"+t.name);if(e&&e.length){const n=e.map(e=>e.name).filter(e=>-1===t.initialMembers.indexOf(e));n.length&&m.push(D.mkGroup([D.mkText("namespace "+t.name),D.mkBlock(n.map(e=>D.mkStmt(D.mkText(`export const ${e} = ${t.name}.${t.createFunctionName}()`))))]))}});var g=o.allVariables.filter(e=>!e.alreadyDeclared).map(e=>se(e,r));return o.allVariables.filter(e=>e.alreadyDeclared===A.Implicit&&!e.isAssigned).forEach(e=>{var t=P(e.type);"string"===t.type||"number"===t.type||"boolean"===t.type||k(t.type)||o.diagnostics.push({blockId:e.firstReference&&e.firstReference.id,message:lf("Variable '{0}' is never assigned",e.name)})}),[m.concat(g.concat(h)),o.diagnostics]}catch(e){var t=e.block;if(!t)throw e;t.setWarningText(e+""),o.errors.push(t)}finally{q()}return[null,null]}function V(e,t){return t.type==ts.pxtc.ON_START_TYPE?JSON.stringify({name:ts.pxtc.ON_START_TYPE}):t.type==ts.pxtc.FUNCTION_DEFINITION_TYPE?JSON.stringify({type:"function",name:t.getFieldValue("function_name")}):JSON.stringify(function e(t){const n=[],o=[];for(const r of t.inputList){for(const t of r.fieldRow)t.name&&n.push(t.getText());r.type===Blockly.INPUT_VALUE&&(r.connection.targetBlock()?o.push(e(r.connection.targetBlock())):o.push(null))}return{type:t.type,fields:n,inputs:o}}(t)).replace(/"id"\s*:\s*"[^"]+"/g,"")}function W(e,t){e.setEnabled(t);var n=e.getDescendants(!1);for(const e of n)e.setEnabled(t)}function a(e,t,n){let o=D.flattenNode(t);return r("format",{format:{input:o.output,pos:1}}).then(()=>({source:o.output,sourceMap:o.sourceMap,stats:e.stats,diagnostics:n||[]}))}function ie(e,t){e.comment&&("string"==typeof e.comment?t.push(e.comment):t.push(e.comment.getText()))}function se(e,t){var n=P(e.type);let o,r="";if("null"==(o="Array"===n.type?D.mkText("[]"):C(n)).op||"[]"==o.op){let e=n.type;"Array"!==e&&"null[]"!==e||(e="number[]");n=t.apis.byQName[e];n&&n.attributes.autoCreate?o=D.mkText(n.attributes.autoCreate+"()"):r=": "+e}return D.mkStmt(D.mkText("let "+e.escapedName+r+" = "),o)}function G(e){if(e.mutationToDom){var t=e.mutationToDom();if(t.hasAttribute("_expanded")){const e=parseInt(t.getAttribute("_expanded"));return isNaN(e)?0:Math.max(e,0)}}return 0}function K({comp:e},t){const n=[];return e.thisParameter&&n.push(e.thisParameter),e.parameters.forEach(e=>{e.isOptional&&0<t?(n.push(e),--t):e.isOptional||n.push(e)}),n}function ae(t,n){var o=[];if(n.attrs.draggableParameters)for(let e=0;e<n.comp.handlerArgs.length;e++){var r=n.comp.handlerArgs[e],i=R(t,"HANDLER_DRAG_PARAM_"+r.name),i="reporter"===n.attrs.draggableParameters?i&&i.getFieldValue("VALUE"):i&&i.getField("VAR").getText();if(null===i)break;o.push([i,y(r.type)])}else for(let e=0;e<n.comp.handlerArgs.length;e++){var s=n.comp.handlerArgs[e],a=t.getField("HANDLER_"+s.name),a=a&&a.getText();if(null===a)break;o.push([a,y(s.type)])}return o}function le(e,t){if(-1!==e.referencedVars.indexOf(t))return!0;for(const n of e.children)if(le(n,t))return!0;return!1}function ce(e,t){if(-1!==e.assignedVars.indexOf(t))return!0;for(const n of e.children)if(ce(n,t))return!0;return!1}function j(e,t,n=!1){e.inputList.filter(e=>e.type===Blockly.INPUT_VALUE).forEach(e=>{e.connection&&e.connection.targetBlock()&&(t(e.connection.targetBlock()),n)&&j(e.connection.targetBlock(),t,n)})}function ue(e,t,n,o,r){e=i(e,r.x,r.x+r.width)||i(r.x,e,e+n),n=i(t,r.y,r.y+r.height)||i(r.y,t,t+o);return e&&n;function i(e,t,n){return t<=e&&e<=n}}function de(e){return"procedures_defnoreturn"===e.type||"function_definition"===e.type}function l(e){return e.getField("function_name").getText()}function pe(e,n){const o=l(e),r={};return function e(t){t=n?t.getDescendants(!1).filter(e=>"function_return"==e.type).map(e=>R(e,"RETURN_VALUE")).filter(e=>e&&"function_call_output"===e.type):t.getDescendants(!1).filter(e=>"function_call_output"==e.type);for(const n of t){const t=l(n);if(t===o)return!0;if(!r[t]&&(r[t]=!0,e(Blockly.Functions.getDefinition(t,n.workspace))))return!0}return!1}(e)}D.compileExpression=L,D.escapeVarName=F,D.mkEnv=o,D.compileBlockAsync=function(e,t){var n=e.workspace,t=o(n,t),n=(J(n&&n.getAllBlocks(),t),x(t,e));return q(),a(t,n)},D.callKey=V,D.findBlockIdByPosition=function(o,r){if(r){let t,n;for(let e=0;e<o.length;++e){var i=o[e];i.startPos<=r.start&&i.endPos>=r.start+r.length&&(!t||n>i.endPos-i.startPos)&&(t=i,n=i.endPos-i.startPos)}return t?t.id:void 0}},D.findBlockIdByLine=function(o,r){if(r){let t,n;for(let e=0;e<o.length;++e){var i=o[e];i.startLine<=r.start&&i.endLine>r.start+r.length&&(!t||n>i.endLine-i.startLine)&&(t=i,n=i.endLine-i.startLine)}return t?t.id:void 0}},D.compileAsync=function(e,t,n={}){var n=o(e,t,n),[e,t]=s(n,e,t);return a(n,e,t)}}}(pxt=pxt||{}),function(r){{var e=r.blocks||(r.blocks={});let o={};function t(e,t,n){null==o[e]&&(o[e]={field:t,validator:n})}e.initFieldEditors=function(){t("text",pxtblockly.FieldTextInput),t("note",pxtblockly.FieldNote),t("gridpicker",pxtblockly.FieldGridPicker),t("textdropdown",pxtblockly.FieldTextDropdown),t("numberdropdown",pxtblockly.FieldNumberDropdown),t("imagedropdown",pxtblockly.FieldImageDropdown),t("colorwheel",pxtblockly.FieldColorWheel),t("toggle",pxtblockly.FieldToggle),t("toggleonoff",pxtblockly.FieldToggleOnOff),t("toggleyesno",pxtblockly.FieldToggleYesNo),t("toggleupdown",pxtblockly.FieldToggleUpDown),t("toggledownup",pxtblockly.FieldToggleDownUp),t("togglehighlow",pxtblockly.FieldToggleHighLow),t("togglewinlose",pxtblockly.FieldToggleWinLose),t("colornumber",pxtblockly.FieldColorNumber),t("images",pxtblockly.FieldImages),t("sprite",pxtblockly.FieldSpriteEditor),t("animation",pxtblockly.FieldAnimationEditor),t("tilemap",pxtblockly.FieldTilemap),t("tileset",pxtblockly.FieldTileset),t("speed",pxtblockly.FieldSpeed),t("turnratio",pxtblockly.FieldTurnRatio),t("protractor",pxtblockly.FieldProtractor),t("position",pxtblockly.FieldPosition),t("melody",pxtblockly.FieldCustomMelody)},e.registerFieldEditor=t,e.createFieldEditor=function(e,t,n){if(null==o[e])return console.error(`Field editor ${e} not registered`),null;r.Util.assert(null==(n=n||{}).lightMode,"lightMode is a reserved parameter for custom fields"),n.lightMode=r.options.light;e=o[e];return new e.field(t,n,e.validator)}}}(pxt=pxt||{}),function(C){{var x=C.blocks||(C.blocks={});x.needsDecompiledDiff=function(e,t){if(!e||!t)return!1;const n={};if(e.replace(/id="([^"]+)"/g,(e,t)=>(n[t]=!0,"")),!Object.keys(n).length)return!1;let o=0,r=0;return t.replace(/id="([^"]+)"/g,(e,t)=>(o++,n[t]&&r++,"")),0<o&&0==r},x.diffXml=function(e,t,n){return r(C.blocks.loadWorkspaceXml(e,!0),C.blocks.loadWorkspaceXml(t,!0),n)};const I="#d0d0d0";function r(e,n,o){try{Blockly.Events.disable();{var r=e;var i=n;var s=o;C.tickEvent("blocks.diff",{started:1}),s=s||{};const m=B();if(!r)return{ws:void 0,message:lf("All blocks are new."),added:0,deleted:0,modified:1};if(!i)return{ws:void 0,message:lf("The current blocks seem corrupted."),added:0,deleted:0,modified:1};const f=C.Util.toDictionary(r.getTopBlocks(!1),e=>A(e,!0));i.getTopBlocks(!1).forEach(e=>{var t=A(e,!0),n=r.getBlockById(e.id)||f[t];n&&t==A(n,!0)&&(m("fast unmodified top ",e.id),e.dispose(!1),n.dispose(!1))});var a=r.getAllBlocks().filter(e=>e.isEnabled()),l=r.getTopBlocks(!1).filter(e=>e.isEnabled()),c=i.getAllBlocks().filter(e=>e.isEnabled());if(m("blocks",c.map(e=>e.toDevString())),m(c),0==a.length&&0==c.length)return C.tickEvent("blocks.diff",{moves:1}),{ws:void 0,message:lf("Some blocks were moved or changed."),added:0,deleted:0,modified:1};const y=l.filter(e=>!i.getBlockById(e.id)),k=a.filter(e=>!i.getBlockById(e.id)),b=c.filter(e=>!r.getBlockById(e.id)),v=C.blocks.initRenderingWorkspace(),T=C.blocks.saveWorkspaceXml(i,!0),E=(C.blocks.domToWorkspaceNoEvents(Blockly.Xml.textToDom(T),v),v.getAllBlocks().filter(e=>!e.isEnabled()).forEach(e=>{m("disabled ",e.toDevString()),e.dispose(!1)}),C.Util.toDictionary(v.getAllBlocks(),e=>e.id)),S=(m("todo blocks",E),_("start"),s.hideDeletedTopBlocks||(y.forEach(e=>{m("deleted top "+e.toDevString()),h(e);e=p(e);h(e),e.setDisabled(!0)}),_("deleted top")),b.map(e=>v.getBlockById(e.id)).filter(e=>!!e).forEach(e=>{m("added "+e.toDevString()),h(e)}),_("added"),{});if(!s.hideDeletedBlocks){const C=k.filter(e=>!(E[e.id]||d(e)||e.outputConnection&&e.outputConnection.isConnected()));C.forEach(e=>{var t=p(e);S[e.id]=t.id,m(`deleted block ${e.toDevString()}->`+t.toDevString())}),C.forEach(e=>{{var t=e;m(`stitching ${t.toDevString()}->`+S[t.id]);const n=v.getBlockById(S[t.id]),o=(n.setDisabled(!0),u(n),h(n),t.getPreviousBlock());if(o){const r=v.getBlockById(S[o.id])||v.getBlockById(o.id);if(m(`previous ${t.id}->${n.toDevString()}: `+r.toDevString()),r)if(r.nextConnection)n.previousConnection.connect(r.nextConnection);else{const t=r.inputList.slice().reverse().find(e=>e.connection&&e.connection.type==Blockly.NEXT_STATEMENT);t&&n.previousConnection.connect(t.connection)}}const r=t.getNextBlock();if(r){const o=v.getBlockById(S[r.id])||v.getBlockById(r.id);o&&(m(`next ${t.id}->${n.toDevString()}: `+o.toDevString()),n.nextConnection.connect(o.previousConnection))}}})}let t=0;if(C.Util.values(E).filter(e=>{var t,n,o=r.getBlockById(e.id);return!!o&&!((t=e.getPreviousBlock())&&!E[t.id]||(e=e.getNextBlock())&&!E[e.id]||!(n=o.getPreviousBlock())&&!t||!!n==!!t&&n.id==t.id&&(!(n=o.getNextBlock())&&!e||!!n==!!e&&n.id==e.id))}).forEach(e=>{m("moved "+e.toDevString()),delete E[e.id],u(e),t++}),_("moved"),C.Util.values(E).filter(e=>{var t,n,o=r.getBlockById(e.id);return!!o&&(t=A(o),n=A(e),t!=n)&&(m("old "+o.toDevString(),t),m("new "+e.toDevString(),n),!0)}).forEach(e=>{m("changed "+e.toDevString()),delete E[e.id],u(e),t++}),_("changed"),v.getTopBlocks(!1).forEach(e=>{e.getDescendants(!1).find(e=>d(e))||(m("unmodified top "+e.toDevString()),delete E[e.id],e.dispose(!1))}),_("cleaned"),C.Util.values(E).filter(e=>!!v.getBlockById(e.id)).forEach(e=>{!function t(e){e.setColour(I),g(e),s.statementsOnly&&(e.inputList||[]).map(e=>e.type==Blockly.INPUT_VALUE&&e.connection&&e.connection.targetBlock()).filter(e=>!!e).forEach(e=>t(e))}(e)}),_("unmodified"),!v.getAllBlocks().length)return C.tickEvent("blocks.diff",{missed:1}),{ws:v,message:lf("Some blocks were changed."),deleted:k.length,added:b.length,modified:t};v.resize(),Blockly.svgResize(v);l=C.blocks.renderWorkspace(s.renderOptions||{emPixels:20,layout:x.BlockLayout.Flow,aspectRatio:.5,useViewWidth:!0}),a={ws:v,svg:l,deleted:k.length,added:b.length,modified:t};return C.tickEvent("blocks.diff",{deleted:a.deleted,added:a.added,modified:a.modified}),a;function u(e){e.__pxt_used=!0}function d(e){return!!e.__pxt_used}function p(e){e=Blockly.Xml.blockToDom(e,!1),e=Blockly.Xml.domToBlock(e,v);return e.nextConnection&&e.nextConnection.targetConnection&&e.nextConnection.disconnect(),e.previousConnection&&e.previousConnection.targetConnection&&e.previousConnection.disconnect(),e}function g(t){t.rendered=!1,t.inputList.forEach(e=>e.fieldRow.forEach(e=>{e.init(),e.borderRect_&&(e.borderRect_.setAttribute("fill",t.getColour()),e.borderRect_.setAttribute("stroke",t.getColourTertiary()))}))}function h(e){e.getDescendants(!1).forEach(e=>{delete E[e.id],u(e)})}function _(e){m(e+":",C.Util.values(E).map(e=>e.toDevString()))}return}}catch(e){return C.reportException(e),{ws:void 0,message:lf("Oops, we could not diff those blocks."),error:e,deleted:0,added:0,modified:0}}finally{Blockly.Events.enable()}}function B(){return C.options.debug||window&&/diffdbg=1/.test(window.location.href)?console.log:e=>{}}function A(e,t){e=Blockly.Xml.blockToDom(e,!0);return n(e),function e(t,n){if(t){n(t);for(const o of C.Util.toArray(t.children))e(o,n)}}(e,e=>{n(e),t||"next"!=e.localName&&"statement"!=e.localName&&"shadow"!=e.localName||e.remove()}),Blockly.Xml.domToText(e)}function n(e){e.removeAttribute("id"),e.removeAttribute("x"),e.removeAttribute("y"),e.removeAttribute("deletable"),e.removeAttribute("editable"),e.removeAttribute("movable")}x.mergeXml=function(e,t,n){return e==t?n:n==t?e:void 0},x.decompiledDiffAsync=function(e,i,t,s,n={}){const a=B(),o=i.outfiles[C.MAIN_BLOCKS];let l=s.outfiles[C.MAIN_BLOCKS];a(o),a(l);e=C.diff.compute(e,t,{ignoreWhitespace:!0,full:!0});a(e);const c={};let u=0,d=0;e.forEach((e,t)=>{e[0];const n=e.substr(2);let o=n.length;switch(r){case"-":u+=o+1;break;case"+":d+=o+1;break;default:const t=/^\s+/.exec(n);if(t){const C=t[0].length;u+=C,d+=C,o-=C}const r=C.blocks.findBlockIdByPosition(s.blockSourceMap,{start:d,length:o});if(r&&!c[r]){const t=C.blocks.findBlockIdByPosition(i.blockSourceMap,{start:u,length:o});t&&(a(e),a(`id ${u}:${n.length}>${t} ==> ${d}:${n.length}>`+r),c[r]=t,l=l.replace(r,t))}u+=o+1,d+=o+1}});t=C.blocks.loadWorkspaceXml(o,!0),e=C.blocks.loadWorkspaceXml(l,!0);return n.statementsOnly=!0,r(t,e,n)}}}(pxt=pxt||{}),function(l){function c(t,n){var o=[];for(let e=0;e<t.childNodes.length;e++){var r=t.childNodes.item(e);r.tagName===n&&o.push(r)}return o}function u(e,t){return d(e,"block","type",t).concat(d(e,"shadow","type",t))}function d(e,t,n,o){return l.Util.toArray(e.getElementsByTagName(t)).filter(e=>e.getAttribute(n)===o)}function p(e,t,n,o){e=d(e,t,n,o);return e.length?e[0]:void 0}var g;(g=l.blocks||(l.blocks={})).domToWorkspaceNoEvents=function(e,t){l.tickEvent("blocks.domtow");let n=[];try{Blockly.Events.disable(),n=Blockly.Xml.domToWorkspace(e,t),(o=t).getAllBlocks().filter(e=>!!e.comment&&e.comment instanceof Blockly.Comment).forEach(e=>{var t=e.comment.getText();/@highlight/.test(t)&&(t=t.replace(/@highlight/g,"").trim(),e.setCommentText(t||null),o.highlightBlock(e.id))})}catch(e){l.reportException(e)}finally{Blockly.Events.enable()}var o;return n},g.clearWithoutEvents=function(e){if(l.tickEvent("blocks.clear"),e)try{Blockly.Events.disable(),e.clear(),e.clearUndo()}finally{Blockly.Events.enable()}},g.saveWorkspaceXml=function(e,t){e=Blockly.Xml.workspaceToDom(e,!t);return Blockly.Xml.domToText(e)},g.saveBlocksXml=function(e,t){return e.getTopBlocks(!1).map(e=>Blockly.Xml.domToText(Blockly.Xml.blockToDom(e,!t)))},g.getDirectChildren=c,g.getBlocksWithType=u,g.getChildrenWithAttr=d,g.getFirstChildWithAttr=p,g.loadBlocksXml=function(e,t){var n,t=Blockly.Xml.textToDom(t),t=Blockly.Xml.domToBlock(t,e);e.getMetrics&&(e=e.getMetrics(),n=t.getHeightWidth(),t.moveBy(e.viewLeft+e.viewWidth/2-n.width/2,e.viewTop+e.viewHeight/2-n.height/2))},g.loadWorkspaceXml=function(e,t=!1){var n=new Blockly.Workspace;try{const t=Blockly.Xml.textToDom(e);return l.blocks.domToWorkspaceNoEvents(t,n),n}catch(e){return t||l.reportException(e),null}},g.importXml=function(e,t,n,r=!1){try{l.blocks.initializeAndInject(n);const r=(new DOMParser).parseFromString(t,"application/xml"),s=l.patching.computePatches(e);s&&(s.filter(e=>"blockId"==e.type).forEach(n=>Object.keys(n.map).forEach(t=>{u(r,t).forEach(e=>{e.setAttribute("type",n.map[t]),l.debug(`patched block ${t} -> `+n.map[t])})})),s.filter(e=>"blockValue"==e.type).forEach(o=>Object.keys(o.map).forEach(t=>{var e=t.split("."),n=e[0];e[1],u(r,n).reduce((e,t)=>e.concat(c(t,"value")),[]).forEach(e=>{e.setAttribute("name",o.map[t]),l.debug(`patched block value ${t} -> `+o.map[t])})})),s.filter(e=>"userenum"==e.type).forEach(n=>Object.keys(n.map).forEach(t=>{d(r,"variable","type",t).forEach(e=>{e.setAttribute("type",n.map[t]),l.debug(`patched enum variable type ${t} -> `+n.map[t])})})));for(const l of c(r.children.item(0),"shadow")){const g=r.createElement("block");l.getAttributeNames().forEach(e=>g.setAttribute(e,l.getAttribute(e)));for(let e=0;e<l.childNodes.length;e++)g.appendChild(l.childNodes.item(e));l.replaceWith(g)}const a={};Object.keys(n.apis.byQName).forEach(e=>{e=n.apis.byQName[e];7==e.kind&&(a[e.namespace+"."+(e.attributes.blockImportId||e.attributes.block||e.attributes.blockId||e.name)]=e.namespace+"."+e.name)});var o=r.getElementsByTagName("block");for(let e=0;e<o.length;++e)!function(r,i,s){var e=s.getAttribute("type"),t=Blockly.Blocks[e];if((e=g.blockSymbol(e))&&t){let o=g.compileInfo(e);null!=(t=e.parameters)&&t.forEach((e,t)=>{var n=r.apis.byQName[e.type];n&&6==n.kind&&(e=p(s,"field","name",o.actualNameToParam[e.name].definitionName))&&(n=i[n.name+"."+e.textContent])&&(e.textContent=n)})}}(n,a,o[e]);return function(t,e){var n=u(t,ts.pxtc.ON_START_TYPE);let o=n.length?n[0]:void 0;if(o)return o.removeAttribute("deletable");var r=[],i=e.blocksById;let s,a=t.firstElementChild;for(;a;){const u=a.nextElementSibling,e=a.getAttribute("type");if(!a.getAttribute("disabled")&&!a.getElementsByTagName("statement").length&&(l.blocks.buildinBlockStatements[e]||i[e]&&"void"==i[e].retType&&!g.hasArrowFunction(i[e]))){if(s){const l=t.ownerDocument.createElement("next");l.appendChild(a),s.appendChild(l)}else(s=t.ownerDocument.createElement("statement")).setAttribute("name","HANDLER"),o||((o=t.ownerDocument.createElement("block")).setAttribute("type",ts.pxtc.ON_START_TYPE),r.push(o)),o.appendChild(s),s.appendChild(a);a.removeAttribute("x"),a.removeAttribute("y"),s=a}a=u}r.forEach(e=>t.appendChild(e))}(r.documentElement,n),i=r.documentElement,l.U.toArray(i.querySelectorAll("block[type=procedures_defnoreturn]")).forEach(e=>{e.setAttribute("type","function_definition"),e.querySelector("field[name=NAME]").setAttribute("name","function_name")}),l.U.toArray(i.querySelectorAll("block[type=procedures_callnoreturn]")).forEach(e=>{e.setAttribute("type","function_call"),e.querySelector("field[name=NAME]").setAttribute("name","function_name")}),l.blocks.extensionBlocklyPatch&&l.blocks.extensionBlocklyPatch(e,r.documentElement),(new XMLSerializer).serializeToString(r)}catch(e){return r||l.reportException(e),t}var i}}(pxt=pxt||{}),function(f){var g;{var e=(g=f.blocks||(f.blocks={})).layout||(g.layout={});function t(e,t,n){let o;n&&(o={target:f.appTarget.id,versions:f.appTarget.versions,xml:f.blocks.saveBlocksXml(e).map(e=>f.Util.htmlEscape(e))});const r=0|t||4;return i(e,r).then(e=>e?f.BrowserUtils.encodeToPngAsync(e.xml,{width:e.width,height:e.height,pixelDensity:r,text:n?JSON.stringify(o,null,2):null}):Promise.resolve(void 0)).catch(e=>{f.reportException(e)})}e.patchBlocksFromOldWorkspace=function(e,t,n){n=f.blocks.loadWorkspaceXml(n,!0);{var i=e,s=t,a=n;let o,r;s.getTopBlocks(!1).filter(e=>e.isEnabled()).forEach(e=>{var t=e.xy_;t&&0!=t.x&&0!=t.y&&(o||(o=f.blocks.mkEnv(s,i),r={},a.getTopBlocks(!1).forEach(e=>{var t=f.blocks.callKey(o,e),n=r[t]||[];n.push(e),r[t]=n})),e=f.blocks.callKey(o,e),e=(r[e]||[]).shift())&&(e.xy_=t.clone())})}{e=n;const o=Blockly.Xml.workspaceToDom(t,!0),r=Blockly.Xml.workspaceToDom(e,!0);return f.Util.toArray(o.childNodes).filter(e=>e.nodeType==Node.ELEMENT_NODE&&"block"==e.localName&&"true"==e.getAttribute("disabled")).forEach(e=>r.appendChild(r.ownerDocument.importNode(e,!0))),Blockly.Xml.domToText(r)}},e.splitSvg=function(d,e,p=18){var t=e.getTopComments(!0),n=e.getTopBlocks(!0);if(t.length+n.length<2)return d;const g=document.createElement("div");function r(e,t,n,o,r,i){const s=d.cloneNode(!0),a=s.querySelector("g.blocklyWorkspace > g."+e),l=s.querySelector("g.blocklyWorkspace > g."+t),c=f.Util.toArray(a.querySelectorAll(`g.blocklyWorkspace > g.${e} > `+(i?"."+i:"g[transform]"))),u=c.splice(n,1)[0];u?(c.filter(e=>e!=u).forEach(e=>{e.parentNode.removeChild(e)}),a.removeAttribute("transform"),l.parentNode.removeChild(l),u.setAttribute("transform",`translate(${r.x}, ${r.y})`),t=o.width/p+"em",e=o.height/p+"em",s.setAttribute("viewBox",`0 0 ${o.width} `+o.height),s.style.width=t,s.style.height=e,s.setAttribute("width",t),s.setAttribute("height",e),g.appendChild(s)):f.log("missing block, did block failed to load?")}return g.className="blocks-svg-list "+e.getInjectionDiv().className,t.forEach((e,t)=>r("blocklyBubbleCanvas","blocklyBlockCanvas",t,e.getHeightWidth(),{x:0,y:0},"blocklyComment")),n.forEach((e,t)=>{var n=e.getHeightWidth(),o={x:0,y:0};e.getStartHat()&&(n.height+=p,o.y+=p),r("blocklyBlockCanvas","blocklyBubbleCanvas",t,n,o)}),g},e.verticalAlign=function(e,n){let o=0;e.getTopComments(!0).forEach(e=>{e.moveBy(0,o),o=(o+=e.getHeightWidth().height)+n}),e.getTopBlocks(!0).forEach((e,t)=>{e.getStartHat()&&(o+=n),e.moveBy(0,o),o=(o+=e.getHeightWidth().height)+n})},e.setCollapsedAll=function(e,t){e.getTopBlocks(!1).filter(e=>e.isEnabled()).forEach(e=>e.setCollapsed(t))},e.flow=function(e,t){if(t){if(t.useViewWidth){const t=e.getMetrics();if(t.viewHeight>t.viewWidth)return o(e.getTopComments(!0),e.getTopBlocks(!0),void 0,t.viewWidth),void e.scroll(20,20)}o(e.getTopComments(!0),e.getTopBlocks(!0),t.ratio)}else o(e.getTopComments(!0),e.getTopBlocks(!0));e.scroll(20,20)},e.screenshotEnabled=function(){return!f.BrowserUtils.isIE()&&!f.BrowserUtils.isUwpEdge()},e.screenshotAsync=t,e.toPngAsync=t;const b="http://www.w3.org/1999/xlink",l=12e7;function i(e,t){if(!e)return Promise.resolve(void 0);var n=e.getBlocksBoundingBox(),e=e.getParentSvg().cloneNode(!0);s(e);let o=n.right-n.left,r=n.bottom-n.top,i=1;t=o*r*Math.pow(t,2);return t>l&&(i=Math.sqrt(l/t)),a(e,n.left,n.top,o,r,i)}function y(e){return n((new XMLSerializer).serializeToString(e))}function n(e){return e.replace(new RegExp("&nbsp;","g"),"&#160;")}function s(e){f.BrowserUtils.removeClass(e,"blocklySvg"),f.BrowserUtils.addClass(e,"blocklyPreview pxt-renderer"),f.U.toArray(e.querySelectorAll(".blocklyMainBackground,.blocklyScrollbarBackground")).forEach(e=>{e&&e.parentNode.removeChild(e)}),f.U.toArray(e.querySelectorAll(".blocklyConnectionIndicator,.blocklyInputConnectionIndicator")).forEach(e=>{e&&e.parentNode.removeChild(e)}),e.removeAttribute("width"),e.removeAttribute("height"),f.U.toArray(e.querySelectorAll(".blocklyBlockCanvas,.blocklyBubbleCanvas")).forEach(e=>e.removeAttribute("transform"));const n=new DOMParser;return f.U.toArray(e.querySelectorAll(".blocklyCommentTextarea")).forEach(e=>{var t=n.parseFromString("<!doctype html><body>"+f.docs.html2Quote(e.value),"text/html");e.textContent=t.body.textContent}),e}function a(e,t,n,o,r,i){if(!e.childNodes[0])return Promise.resolve(void 0);e.removeAttribute("width"),e.removeAttribute("height"),e.removeAttribute("transform");let s=Math.round(o*(i||1)),a=Math.round(r*(i||1));const l=y(e).replace(/^\s*<svg[^>]+>/i,"").replace(/<\/svg>\s*$/i,""),c=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="${b}" width="${s}" height="${a}" viewBox="${t} ${n} ${o} ${r}" class="pxt-renderer">${l}</svg>`,u=(new DOMParser).parseFromString(c,"image/svg+xml"),d=u.createElementNS("http://www.w3.org/1999/xhtml","style"),p=f.Util.isUserLanguageRtl(),g=document.getElementById(`style-${p?"rtl":""}blockly.css`).href,h=f.Util.toArray(document.head.getElementsByTagName("link")).filter(e=>f.Util.endsWith(e.getAttribute("href"),"semantic.css"))[0].href;return Promise.all([f.BrowserUtils.loadAjaxAsync(g),f.BrowserUtils.loadAjaxAsync(h)]).then(e=>{var t,n=f.Util.toArray(document.head.querySelectorAll("style")).filter(e=>/\.blocklySvg/.test(e.innerText))[0];e.unshift((null==(t=document.getElementById("blockly-common-style"))?void 0:t.innerText)||""),e.unshift((null==(t=document.getElementById("blockly-renderer-style-pxt"))?void 0:t.innerText)||"");const o=(n?n.innerText:"")+"\n\n"+e.map(e=>e+"\n\n");return d.appendChild(u.createCDATASection(o)),u.documentElement.insertBefore(d,u.documentElement.firstElementChild),function(e){_=_||{};e=e.getElementsByTagName("image"),e=f.Util.toArray(e).filter(e=>{e=e.getAttributeNS(b,"href");return e&&!/^data:/.test(e)}).map(e=>e).map(t=>{const i=t.getAttributeNS(b,"href");let s=_[i];return(s?Promise.resolve(_[i]):f.BrowserUtils.loadImageAsync(t.getAttributeNS(b,"href")).then(e=>{var t=document.createElement("canvas"),n=t.getContext("2d"),o=e.width,r=e.height;return t.width=o,t.height=r,n.drawImage(e,0,0,o,r,0,0,t.width,t.height),_[i]=s=t.toDataURL("image/png"),s}).catch(e=>(f.debug("svg render: failed to load "+i),""))).then(e=>{t.setAttributeNS(b,"href",e)})});return Promise.all(e).then(()=>{})}(u).then(()=>{return e=u,m=m||{},f.BrowserUtils.isEdge()?(e=e.getElementsByTagName("image"),e=f.Util.toArray(e).filter(e=>/^data:image\/svg\+xml/.test(e.getAttributeNS(b,"href"))).map(e=>e).map(t=>{const n=t.getAttributeNS(b,"href"),e=parseInt(t.getAttribute("width").replace(/[^0-9]/g,"")),o=parseInt(t.getAttribute("height").replace(/[^0-9]/g,""));var r=m[n];return(r?Promise.resolve(r):f.BrowserUtils.encodeToPngAsync(n,{width:e,height:o,pixelDensity:2})).then(e=>{m[n]=e,t.setAttributeNS(b,"href",e)})}),Promise.all(e).then(()=>{})):Promise.resolve();var e}).then(()=>({width:s,height:a,svg:y(u).replace('<style xmlns="http://www.w3.org/1999/xhtml">',"<style>"),xml:k(u),css:o}))})}function k(e){e=(new XMLSerializer).serializeToString(e);return"data:image/svg+xml;base64,"+ts.pxtc.encodeBase64(unescape(encodeURIComponent(e)))}let _,m;function o(o,t,r=1.62,e){const i=[],s={};let a;o.forEach(e=>{var t=e.data;null!=t&&(s[t]=e)}),t.sort((e,t)=>e.isEnabled()===t.isEnabled()?e.type===t.type?0:"function_definition"===e.type?1:"function_definition"===t.type?-1:e.type.localeCompare(t.type):e.isEnabled()?-1:1),t.forEach(e=>{var t=g.getBlockData(e).commentRefs;if(t.length){const g=[];for(let e=0;e<t.length;e++){const n=s[t[e]];n&&(g.push(h(n)),delete s[t[e]])}if(g.length)return void i.push({value:e,width:-1,height:-1,children:g})}const n=h(e);!a&&e.isEnabled()&&e.type===pxtc.ON_START_TYPE?a=n:i.push(n)}),a&&i.unshift(a),Object.keys(s).sort((e,t)=>e.length===t.length?t<e?-1:1:e.length>t.length?-1:1).forEach(e=>{s[e]&&i.push(h(s[e]))}),o.forEach(e=>{null==e.data&&i.push(h(e))});let n,l=0;for(let e=0;e<i.length;e++){const g=i[e];if(g.children){const o=g.value.getHeightWidth();g.x=0,g.y=0;let t=o.width+13,n=0;for(let e=0;e<g.children.length;e++){const r=g.children[e];r.x=t,r.y=n,n+=r.height+13,g.width=Math.max(g.width,t+r.width)}g.height=Math.max(n-13,o.height)}l+=(g.height+13)*(g.width+13)}n=20<e?e-20:Math.sqrt(l)*r;let c=20,u=20,d=0;for(let e=0;e<i.length;e++){const g=i[e];if(g.children){p(g,c+g.x,u+g.y);for(let e=0;e<g.children.length;e++){const t=g.children[e];p(t,c+t.x,u+t.y)}}else p(g,c,u);c+=g.width+45,d=Math.max(d,u+g.height+45),c>n&&(c=20,u=d)}function p(e,t,n){var o=e.value.getBoundingRectangle();e.value.moveBy(t-o.left,n-o.top)}}function h(e){var t=e.getHeightWidth();return{value:e,height:t.height,width:t.width}}e.toSvgAsync=i,e.serializeNode=y,e.serializeSvgString=n,e.cleanUpBlocklySvg=s,e.blocklyToSvgAsync=a,e.documentToSvg=k}}(pxt=pxt||{}),function(te){{var ne=te.blocks||(te.blocks={});const f={string:{field:"TEXT",block:"text",defaultValue:""},number:{field:"NUM",block:"math_number",defaultValue:"0"},boolean:{field:"BOOL",block:"logic_boolean",defaultValue:"false"},Array:{field:"VAR",block:"variables_get",defaultValue:"list"}};function d(e){e=/^(?:Array<(.+)>)|(?:(.+)\[\])|(?:\[.+\])$/.exec(e);return e?e[1]||e[2]:void 0}ne.optionalDummyInputPrefix="0_optional_dummy",ne.optionalInputWithFieldPrefix="0_optional_field",ne.isArrayType=d,ne.isTupleType=function(e){e=/^\[(.+)\]$/.exec(e);return e?e[1].split(/,\s*/):void 0};const y=/^(string|number|boolean)$/;let t,Z;function s(){return t||(t={},Object.keys(Blockly.Blocks).forEach(e=>t[e]={block:Blockly.Blocks[e]})),t}ne.builtinBlocks=s,ne.buildinBlockStatements={controls_if:!0,controls_for:!0,pxt_controls_for:!0,controls_simple_for:!0,controls_repeat_ext:!0,pxt_controls_for_of:!0,controls_for_of:!0,variables_set:!0,variables_change:!0,device_while:!0};let i={};function n(n,o,r,i){if(i=i||o.defaultValue,!(r=r||o.shadowBlockId)&&o.range&&(r="math_number_minmax"),i=i&&'"'==i.slice(0,1)?JSON.parse(i):i,"number"==o.type&&"value"==r){const n=document.createElement("field");return n.setAttribute("name",o.definitionName),n.appendChild(document.createTextNode("0")),n}var e="variables_get"==r,t="text"==r,s=document.createElement("value"),a=(s.setAttribute("name",o.definitionName),d(o.type)),l=document.createElement(e||a?"block":"shadow"),c=(s.appendChild(l),f[a||o.type]);if(l.setAttribute("type",r||(a?"lists_create_with":c&&c.block||o.type)),l.setAttribute("colour",Blockly.Colours.textField),a){if(c&&!r){let e;switch(a){case"number":e=["0","1"];break;case"string":e=["a","b","c"];break;case"boolean":e=["FALSE","FALSE","FALSE"]}return p(l,c.block,c.field,e),s}if(r&&i)return p(l,i),s}if(!c||r&&c.block!==r&&"math_number_minmax"!==r){if(i){const f=document.createElement("field");if(f.textContent=i,e)f.setAttribute("name","VAR"),l.appendChild(f);else if(t)f.setAttribute("name","TEXT"),l.appendChild(f);else if(r){const o=n.blocksById[r];if(o&&o.attributes._def&&o.attributes._def.parameters.length){const n=o.attributes._def.parameters[0];f.setAttribute("name",n.name),l.appendChild(f)}}else f.setAttribute("name",o.definitionName),l.appendChild(f)}}else{const n=document.createElement("field");let e,t;switch(l.appendChild(n),r){case"variables_get":e="VAR";break;case"math_number_minmax":e="SLIDER";break;default:e=c.field}n.setAttribute("name",e),t="boolean"==o.type?document.createTextNode((i||c.defaultValue).toUpperCase()):document.createTextNode(i||c.defaultValue),n.appendChild(t)}let u;return o.range&&((u=document.createElement("mutation")).setAttribute("min",o.range.min.toString()),u.setAttribute("max",o.range.max.toString()),u.setAttribute("label",o.actualName.charAt(0).toUpperCase()+o.actualName.slice(1)),o.fieldOptions)&&(o.fieldOptions.step&&u.setAttribute("step",o.fieldOptions.step),o.fieldOptions.color&&u.setAttribute("color",o.fieldOptions.color),o.fieldOptions.precision)&&u.setAttribute("precision",o.fieldOptions.precision),o.fieldOptions&&(u=u||document.createElement("mutation")).setAttribute("customfield",JSON.stringify(o.fieldOptions)),u&&l.appendChild(u),s}function p(t,n,o,r){const i=r?r.length:2,e=document.createElement("mutation");e.setAttribute("items",""+i),e.setAttribute("horizontalafter",""+i),t.appendChild(e);for(let e=0;e<i;e++){const i=document.createElement("value");i.setAttribute("name","ADD"+e);var s=document.createElement("shadow");if(s.setAttribute("type",n),o){const t=document.createElement("field");t.setAttribute("name",o),r&&t.appendChild(document.createTextNode(r[e])),s.appendChild(t)}i.appendChild(s),t.appendChild(i)}}function oe(e,t,n,o){e=r(e,te.toolbox.convertColor(t),n,o);return e.setAttribute("web-class","blocklyFlyoutHeading"),e}function r(e,t,n,o){var r=Blockly.utils.xml.createElement("label");return r.setAttribute("text",e),t&&r.setAttribute("web-icon-color",te.toolbox.convertColor(t)),n&&(1===n.length?(r.setAttribute("web-icon",n),o&&r.setAttribute("web-icon-class",o)):r.setAttribute("web-icon-class","blocklyFlyoutIcon"+e)),r}function u(t,i,e){let s=document.createElement("block");if(s.setAttribute("type",i.attributes.blockId),i.attributes.blockGap?s.setAttribute("gap",i.attributes.blockGap):te.appTarget.appTheme&&te.appTarget.appTheme.defaultBlockGap&&s.setAttribute("gap",te.appTarget.appTheme.defaultBlockGap.toString()),e.thisParameter){const te=e.thisParameter;s.appendChild(n(t,te,te.shadowBlockId||"variables_get",te.defaultValue||te.definitionName))}return i.parameters&&(e.parameters.filter(e=>!e.isOptional&&(y.test(e.type)||y.test(d(e.type))||e.shadowBlockId||e.defaultValue)).forEach(e=>{s.appendChild(n(t,e))}),i.attributes.draggableParameters?e.handlerArgs.forEach(e=>{var t="reporter"===i.attributes.draggableParameters,n=document.createElement("value"),o=(n.setAttribute("name","HANDLER_DRAG_PARAM_"+e.name),t?te.blocks.reporterTypeForArgType(e.type):"variables_get_reporter"),r=document.createElement("shadow");if(r.setAttribute("type",o),t&&"argument_reporter_custom"===o){const te=document.createElement("mutation");te.setAttribute("typename",e.type),r.appendChild(te)}o=document.createElement("field");o.setAttribute("name",t?"VALUE":"VAR"),o.textContent=te.Util.htmlEscape(e.name),r.appendChild(o),n.appendChild(r),s.appendChild(n)}):e.handlerArgs.forEach(e=>{var t=document.createElement("field");t.setAttribute("name","HANDLER_"+e.name),t.textContent=e.name,s.appendChild(t)})),s}function o(r){return Z=r,Blockly.pxtBlocklyUtils.whitelistDraggableBlockTypes(r.blocks.filter(e=>e.attributes.duplicateShadowOnDrag).map(e=>e.attributes.blockId)),r.blocks.map(e=>{var n=ne.compileInfo(e),o=u(r,e,n);if(e.attributes.blockBuiltin){te.Util.assert(!!s()[e.attributes.blockId]);const ne=s()[e.attributes.blockId];ne.symbol=e,ne.block.codeCard=g(e,o)}else{var a=r;var l=e;var c=n;n=o;let t=l.attributes.blockId;s()[t]?te.reportError("blocks","trying to override builtin block",{details:t}):(o=JSON.stringify(l),i[t]&&i[t].hash==o||(Blockly.Blocks[l.attributes.blockId]?console.error("duplicate block definition: "+t):(o={hash:o,fn:l,block:{codeCard:g(l,n),init:function(){{var i=this,v=a,T=l,E=c;const r=(T.attributes.blockNamespace||T.namespace).split(".")[0],S=1==T.kind||2==T.kind,s=v.apis.byQName[r],C=T.attributes.blockNamespace&&s&&s.attributes.color||T.attributes.color||s&&s.attributes.color||te.toolbox.getNamespaceColor(r)||255;if(T.attributes.help){const te=T.attributes.help.replace(/^\//,"");/^github:/.test(te)?i.setHelpUrl(te):"none"!==te&&i.setHelpUrl("/reference/"+te)}else T.pkg&&!te.appTarget.bundledpkgs[T.pkg]&&((n=T.qName.toLowerCase().split("."))[0]==T.pkg&&n.shift(),i.setHelpUrl(`/pkg/${T.pkg}#`+encodeURIComponent(n.join("-"))));i.setColour(C);let e=Blockly.OUTPUT_SHAPE_ROUND,t=("boolean"==T.retType&&(e=Blockly.OUTPUT_SHAPE_HEXAGONAL),i.setOutputShape(e),T.attributes.undeletable&&i.setDeletable(!1),o(T.attributes._def),!1);if(T.attributes.mutate)ne.addMutation(i,T,T.attributes.mutate);else if(T.attributes.defaultInstance)ne.addMutation(i,T,ne.MutatorTypes.DefaultInstanceMutator);else if(T.attributes._expandedDef&&"disabled"!==T.attributes.expandableArgumentMode){const te="toggle"===T.attributes.expandableArgumentMode;ne.initExpandableBlock(v,i,T.attributes._expandedDef,E,te,()=>o(T.attributes._expandedDef,!0))}else if(E.handlerArgs.length)if(t=!0,T.attributes.optionalVariableArgs)ne.initVariableArgsBlock(i,E.handlerArgs);else if(T.attributes.draggableParameters)E.handlerArgs.filter(e=>!e.inBlockDef).forEach(e=>{var t=i.appendValueInput("HANDLER_DRAG_PARAM_"+e.name);"reporter"==T.attributes.draggableParameters?t.setCheck(B(e.type,v)):t.setCheck("Variable")});else{let t=i.appendDummyInput();E.handlerArgs.filter(e=>!e.inBlockDef).forEach(e=>{t.appendField(new Blockly.FieldVariable(e.name),"HANDLER_"+e.name)})}if(ne.appendMutation(i,{mutationToDom:t=>(i.inputList.forEach(e=>{e.fieldRow.forEach(e=>{e.isFieldCustom_&&e.saveOptions&&(e=e.saveOptions())&&t.setAttribute("customfield",JSON.stringify(e))})}),t),domToMutation:n=>{i.inputList.forEach(e=>{e.fieldRow.forEach(e=>{var t;e.isFieldCustom_&&e.restoreOptions&&(t=JSON.parse(n.getAttribute("customfield")))&&e.restoreOptions(t)})})}}),T.attributes.imageLiteral){const te=(T.attributes.imageLiteralColumns||5)*T.attributes.imageLiteral,ne=T.attributes.imageLiteralRows||5,v=T.attributes.imageLiteralScale;i.appendDummyInput().appendField(new pxtblockly.FieldMatrix("",{columns:te,rows:ne,scale:v}),"LEDS")}"external"===T.attributes.inlineInputMode?i.setInputsInline(!1):"inline"===T.attributes.inlineInputMode?i.setInputsInline(!0):i.setInputsInline(!T.parameters||T.parameters.length<4&&!T.attributes.imageLiteral),(null!=(n=T.parameters)&&n.find(e=>pxtc.parameterTypeIsArrowFunction(e))||t)&&(i.appendStatementInput("HANDLER").setCheck(null),i.setInputsInline(!0)),re(i,T.retType,v);var n=h(T);function o(o,n=!1){let r=0,k=!n&&!!E.thisParameter;const e=function(){const e=[];let t=[];return o.parts.forEach(e=>{switch(e.kind){case"break":n();break;case"param":t.push(e),n();break;case"image":case"label":t.push(e)}}),n(),e;function n(){t.length&&(e.push(t),t=[])}}(),b=new te.ImageConverter;"ENUM_GET"!==T.attributes.shim&&"KIND_GET"!==T.attributes.shim||!(1<E.parameters.length||E.thisParameter)?(e.forEach(e=>{const _=[];let m,f,t,y=!1;if(e.forEach(e=>{if("param"!==e.kind){const ne="image"===(n=e).kind?(t=n.uri,(o=x[t])?new Blockly.FieldImage(o,40,40,"",null,te.Util.isUserLanguageRtl()):void te.log("missing jres icon "+t)):(o=function(e){if(" "===e)return"";if(1<e.length){var t=" "==e.charAt(0),n=" "==e.charAt(e.length-1);if(t||n)return e.substring(t?1:0,n?e.length-1:e.length)}return e}(n.text))?n.cssClass?new Blockly.FieldLabel(o,n.cssClass):n.style.length?new pxtblockly.FieldStyledLabel(o,{bold:-1!==n.style.indexOf("bold"),italics:-1!==n.style.indexOf("italics"),blocksInfo:void 0}):new Blockly.FieldLabel(o,void 0):void 0;ne&&_.push({field:ne})}else if("ENUM_GET"===T.attributes.shim)te.U.assert(!!T.attributes.enumName,"Trying to create an ENUM_GET block without a valid enum name"),_.push({name:"MEMBER",field:new pxtblockly.FieldUserEnum(v.enumsByName[T.attributes.enumName])});else if("KIND_GET"===T.attributes.shim)_.push({name:"MEMBER",field:new pxtblockly.FieldKind(v.kindsByName[T.attributes.kindNamespace||T.attributes.blockNamespace||T.namespace])});else{let o=function(n,e,t=!1){if(n.ref){const t="this"===n.name?e.thisParameter:e.actualNameToParam[n.name];if(!t){let t;if(e.handlerArgs.forEach(e=>{e.name===n.name&&(t=e)}),t)return t}return t}return t?e.thisParameter:e.definitionNameToParam[n.name]}(e,E,k);if(k=!1,o)if(o.definitionName){var t=te.U.lookup(v.apis.byQName,o.type),n=(y=!0,o.definitionName),r=o.actualName,i=t&&6==t.kind,s=t&&!!t.attributes.fixedInstances&&!o.shadowBlockId,a=!!T.attributes.constantShim,l="@combined@"==o.type,c=o.fieldEditor,u=n.charAt(0).toUpperCase()+n.slice(1),d=o.type;if(i||s||a||l){let e;0==(e=i?(g=v.apis,h=o.type,te.Util.values(g.byQName).filter(e=>e.namespace===h&&!e.attributes.blockHidden)):s?I(v.apis,t.qName):l?T.combinedProperties.map(e=>te.U.lookup(v.apis.byQName,e)):(a=v.apis,p=T.qName,te.Util.values(a.byQName).filter(e=>e.attributes.blockIdentity===p))).length&&console.error(`no instances of ${t.qName} found`);const E=e.map(e=>{let t=e.attributes.block||e.attributes.blockId||e.name,n=e.attributes.blockCombine;return e.attributes.jresURL&&!e.attributes.iconURL&&te.U.startsWith(e.attributes.jresURL,"data:image/x-mkcd-f")&&(e.attributes.iconURL=b.convert(e.attributes.jresURL)),n&&(t=t.replace(/@set/,"")),[e.attributes.iconURL||e.attributes.blockImage?{src:e.attributes.iconURL||te.Util.pathJoin(te.webConfig.commitCdnUrl,`blocks/${e.namespace.toLowerCase()}/${e.name.toLowerCase()}.png`),alt:t,width:36,height:36,value:e.name}:t,e.namespace+"."+e.name]});if(o.defaultValue){let n=-1;if(E.some((e,t)=>e[1]===o.defaultValue&&(n=t,!0)),-1<n){const ne=E.splice(n,1)[0];E.unshift(ne)}}if(c){i=T.attributes.paramDefl[r]||"";const g={data:E,colour:C,label:u,type:d,blocksInfo:v};te.Util.jsonMergeFrom(g,T.attributes.paramFieldEditorOptions&&T.attributes.paramFieldEditorOptions[r]||{}),_.push(A(ne.createFieldEditor(c,i,g),n))}else _.push(A(new Blockly.FieldDropdown(E),n))}else if(c){const e=T.attributes.paramDefl[o.actualName]||"",E={colour:C,label:u,type:d,blocksInfo:v};te.Util.jsonMergeFrom(E,T.attributes.paramFieldEditorOptions&&T.attributes.paramFieldEditorOptions[o.actualName]||{}),_.push(A(ne.createFieldEditor(c,e,E),o.definitionName))}else m=n,S&&"this"===e.name?f=o.type:"number"==o.type&&o.shadowBlockId&&"value"==o.shadowBlockId?(m=void 0,_.push(A(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),n))):f="string"==o.type&&o.shadowOptions&&o.shadowOptions.toString?null:B(o.type,v)}else m="HANDLER_DRAG_PARAM_"+o.name,f="reporter"===T.attributes.draggableParameters?B(o.type,v):"Variable";else console.error("block "+T.attributes.blockId+": unknown parameter "+e.name+(e.ref?` (${e.ref})`:""))}var p,n,t,o,g,h}),m)(t=i.appendValueInput(m)).setAlign(Blockly.ALIGN_LEFT);else if(n){const te=y?ne.optionalInputWithFieldPrefix:ne.optionalDummyInputPrefix;t=i.appendDummyInput(te+r++)}else t=i.appendDummyInput();f&&t.setCheck(f),_.forEach(e=>t.appendField(e.field,e.name))}),b.logTime()):console.warn(`Enum blocks may only have 1 parameter but ${T.attributes.blockId} has `+E.parameters.length)}i.setPreviousStatement(!(n&&!T.attributes.handlerStatement)&&"void"==T.retType),i.setNextStatement(!(n&&!T.attributes.handlerStatement)&&"void"==T.retType),i.setTooltip(/^__/.test(T.namespace)?"":T.attributes.jsDoc)}}}},te.Util.isTranslationMode()&&te.blocks.promptTranslateBlock&&(o.block.customContextMenu=e=>{l.attributes.translationId&&e.push({enabled:!0,text:lf("Translate this block"),callback:function(){te.blocks.promptTranslateBlock(t,[l.attributes.translationId])}})}),i[t]=o,Blockly.Blocks[t]=o.block)))}return e})}function c(e){return e.outerHTML.replace(/^<\?[^>]*>/,"")}function g(e,t){return{name:e.namespace+"."+e.name,shortName:e.name,description:e.attributes.jsDoc,url:e.attributes.help?"reference/"+e.attributes.help.replace(/^\//,""):void 0,blocksXml:`<xml xmlns="http://www.w3.org/1999/xhtml">${c(t)}</xml>`}}function h(e){return!(null==(e=e.parameters)||!e.some(e=>pxtc.parameterTypeIsArrowFunction(e)))}ne.blockSymbol=function(e){e=i[e];return e?e.fn:void 0},ne.createShadowValue=n,ne.createFlyoutHeadingLabel=oe,ne.createFlyoutGroupLabel=function(e,t,n,o){e=r(e,void 0,t);return e.setAttribute("web-class","blocklyFlyoutGroup"),e.setAttribute("web-line","1.5"),n&&e.setAttribute("web-line-width",n),o&&(e.setAttribute("web-help-button","true"),e.setAttribute("callbackKey",o)),e},ne.createFlyoutButton=function(e,t){var n=Blockly.utils.xml.createElement("button");return n.setAttribute("text",t),n.setAttribute("callbackKey",e),n},ne.createToolboxBlock=u,ne.injectBlocks=o,ne.hasArrowFunction=h,ne.cleanBlocks=function(){te.debug("removing all custom blocks");for(const te in i)e=i[te].fn,delete Blockly.Blocks[e.attributes.blockId],delete i[e.attributes.blockId];var e},ne.initializeAndInject=function(e){a(),o(e)};let ee=!(ne.initialize=function(e){a();{x={};const n=e.apis.jres;n&&Object.keys(n).forEach(e=>{var t=n[e];t&&t.icon&&(x[e]=t.icon)})}});function a(){if(!ee){ee=!0,goog.provide("Blockly.Blocks.device"),goog.require("Blockly.Blocks"),Blockly.FieldCheckbox.CHECK_CHAR="",Blockly.Constants.ADD_START_HATS=!!te.appTarget.appTheme.blockHats,ne.initFieldEditors();{const u=Blockly.Msg;u.DUPLICATE_BLOCK=lf("{id:block}Duplicate"),u.DUPLICATE_COMMENT=lf("Duplicate Comment"),u.REMOVE_COMMENT=lf("Remove Comment"),u.ADD_COMMENT=lf("Add Comment"),u.EXTERNAL_INPUTS=lf("External Inputs"),u.INLINE_INPUTS=lf("Inline Inputs"),u.EXPAND_BLOCK=lf("Expand Block"),u.COLLAPSE_BLOCK=lf("Collapse Block"),u.ENABLE_BLOCK=lf("Enable Block"),u.DISABLE_BLOCK=lf("Disable Block"),u.DELETE_BLOCK=lf("Delete Block"),u.DELETE_X_BLOCKS=lf("Delete Blocks"),u.DELETE_ALL_BLOCKS=lf("Delete All Blocks"),u.HELP=lf("Help"),Blockly.BlockSvg.prototype.showHelp=function(){var e=goog.isFunction(this.helpUrl)?this.helpUrl():this.helpUrl;e&&(te.blocks.openHelpUrl||window.open)(e)},Blockly.WorkspaceSvg.prototype.configureContextMenu=function(i,s){if(!this.options.readOnly&&!this.isFlyout){i.length=0;let e=this.getTopBlocks(!0),t=Blockly.utils.genUid(),n=this.getTopComments();var a=!(this.options.debugMode||this.options.readOnly);if(this.options.comments&&!te.BrowserUtils.isIE()){const te=Blockly.ContextMenu.workspaceCommentOption(this,s);te.enabled=te.enabled&&a,i.push(te)}let o=Blockly.WorkspaceSvg.buildDeleteList_(e),r=0;for(let e=0;e<o.length;e++)o[e].isShadow()||r++;const c=10;s={text:1==r?u.DELETE_BLOCK:u.DELETE_ALL_BLOCKS,enabled:0<r&&a,callback:()=>{te.tickEvent("blocks.context.delete",void 0,{interactiveConsent:!0}),r<2?l():Blockly.confirm(lf("Delete all {0} blocks?",r),e=>{e&&l()})}},s=(i.push(s),{text:lf("Format Code"),enabled:a,callback:()=>{te.tickEvent("blocks.context.format",void 0,{interactiveConsent:!0}),te.blocks.layout.flow(this,{useViewWidth:!0})}});if(i.push(s),te.appTarget.appTheme.blocksCollapsing){const ne={text:lf("Collapse Blocks"),enabled:e.length&&e.find(e=>e.isEnabled()&&!e.isCollapsed())&&a,callback:()=>{te.tickEvent("blocks.context.collapse",void 0,{interactiveConsent:!0}),te.blocks.layout.setCollapsedAll(this,!0)}},u=(i.push(ne),{text:lf("Expand Blocks"),enabled:e.length&&e.find(e=>e.isEnabled()&&e.isCollapsed())&&a,callback:()=>{te.tickEvent("blocks.context.expand",void 0,{interactiveConsent:!0}),te.blocks.layout.setCollapsedAll(this,!1)}});i.push(u)}if(te.blocks.layout.screenshotEnabled()){const ne={text:lf("Snapshot"),enabled:0<e.length||0<n.length,callback:()=>{var e;te.tickEvent("blocks.context.screenshot",void 0,{interactiveConsent:!0}),te.blocks.layout.screenshotAsync(this,null,null==(e=te.appTarget.appTheme)?void 0:e.embedBlocksInSnapshot).then(e=>{te.BrowserUtils.isSafari()&&(e=e.replace(/^data:image\/[^;]/,"data:application/octet-stream")),te.BrowserUtils.browserDownloadDataUri(e,`${te.appTarget.nickname||te.appTarget.id}-${lf("screenshot")}.png`)})}};i.push(ne)}function l(){Blockly.Events.setGroup(t);var e=o.shift();e&&(e.workspace?(e.dispose(!1,!0),setTimeout(l,c)):l()),Blockly.Events.setGroup(!1)}ne.onShowContextMenu&&ne.onShowContextMenu(this,i)}},Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN.onchange=function(){}}{const r=te.blocks.getBlockDefinition(ts.pxtc.ON_START_TYPE);if(Blockly.Blocks[ts.pxtc.ON_START_TYPE]={init:function(){this.jsonInit({message0:r.block.message0,args0:[{type:"input_dummy"},{type:"input_statement",name:"HANDLER"}],colour:(te.appTarget.runtime?te.appTarget.runtime.onStartColor:"")||te.toolbox.getNamespaceColor("loops")}),ae(this,ts.pxtc.ON_START_TYPE,r.name,r.tooltip,r.url,String((te.appTarget.runtime?te.appTarget.runtime.onStartColor:"")||te.toolbox.getNamespaceColor("loops")),void 0,void 0,!!te.appTarget.runtime&&te.appTarget.runtime.onStartUnDeletable)}},Blockly.Blocks[pxtc.TS_STATEMENT_TYPE]={init:function(){let t,o,r=this;r.setColour("#717171"),r.setPreviousStatement(!0),r.setNextStatement(!0),r.setInputsInline(!1),r.domToMutation=t=>{const n=parseInt(t.getAttribute("numlines"));r.declaredVariables=t.getAttribute("declaredvars"),o=[];for(let e=0;e<n;e++){const n=t.getAttribute("line"+e);o.push(n)}r.setPythonEnabled(!1)},r.mutationToDom=()=>{let n=document.createElement("mutation");return o&&(o.forEach((e,t)=>n.setAttribute("line"+t,e)),n.setAttribute("numlines",o.length.toString())),r.declaredVariables&&n.setAttribute("declaredvars",this.declaredVariables),n},r.setPythonEnabled=e=>{if(t!==e){for(;r.inputList.length;)r.removeInput(r.inputList[0].name);(t=e)?(r.appendDummyInput().appendField(te.Util.lf("<python code>"),"LINE0"),r.setTooltip(lf("A Python statement that could not be converted to blocks"))):(o.forEach((e,t)=>{r.appendDummyInput().appendField(e,"LINE"+t)}),r.setTooltip(lf("A JavaScript statement that could not be converted to blocks")))}},r.getLines=()=>o,r.setEditable(!1),ae(this,pxtc.TS_STATEMENT_TYPE,lf("JavaScript statement"),lf("A JavaScript statement that could not be converted to blocks"),"/blocks/javascript-blocks","#717171")}},Blockly.Blocks[pxtc.TS_OUTPUT_TYPE]={init:function(){let t=this;t.setColour("#717171"),t.setPreviousStatement(!1),t.setNextStatement(!1),t.setOutput(!0),t.setEditable(!1),t.appendDummyInput().appendField(new pxtblockly.FieldTsExpression(""),"EXPRESSION"),t.setPythonEnabled=e=>{t.getField("EXPRESSION").setPythonEnabled(e),e?t.setTooltip(lf("A Python expression that could not be converted to blocks")):t.setTooltip(lf("A JavaScript expression that could not be converted to blocks"))},ae(t,pxtc.TS_OUTPUT_TYPE,lf("JavaScript expression"),lf("A JavaScript expression that could not be converted to blocks"),"/blocks/javascript-blocks","#717171")}},te.appTarget.runtime&&te.appTarget.runtime.pauseUntilBlock){const r=te.appTarget.runtime.pauseUntilBlock,i=te.blocks.getBlockDefinition(ts.pxtc.PAUSE_UNTIL_TYPE);Blockly.Blocks[pxtc.PAUSE_UNTIL_TYPE]={init:function(){var e=r.color||te.toolbox.getNamespaceColor("loops");this.jsonInit({message0:i.block.message0,args0:[{type:"input_value",name:"PREDICATE",check:"Boolean"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:e}),ae(this,ts.pxtc.PAUSE_UNTIL_TYPE,i.name,i.tooltip,i.url,e,void 0,void 0,!1)}}}const i="pxt_controls_for_of",s=te.blocks.getBlockDefinition(i),a=(Blockly.Blocks[i]={init:function(){this.jsonInit({message0:s.block.message0,args0:[{type:"input_value",name:"VAR",variable:s.block.variable,check:"Variable"},{type:"input_value",name:"LIST",check:["Array","String"]}],previousStatement:null,nextStatement:null,colour:te.toolbox.blockColors.loops,inputsInline:!0}),this.appendStatementInput("DO").appendField(s.block.appendField);let e=this;ae(this,i,s.name,function(){return te.U.rlf(s.tooltip,e.getInputTargetBlock("VAR")?e.getInputTargetBlock("VAR").getField("VAR").getText():"")},s.url,String(te.toolbox.getNamespaceColor("loops")))}},"controls_for_of"),l=te.blocks.getBlockDefinition(a),c=(Blockly.Blocks[a]={init:function(){this.jsonInit({message0:l.block.message0,args0:[{type:"field_variable",name:"VAR",variable:l.block.variable},{type:"input_value",name:"LIST",check:"Array"}],previousStatement:null,nextStatement:null,colour:te.toolbox.blockColors.loops,inputsInline:!0}),this.appendStatementInput("DO").appendField(l.block.appendField);let e=this;ae(this,a,l.name,function(){return te.U.rlf(l.tooltip,e.getField("VAR").getText())},l.url,String(te.toolbox.getNamespaceColor("loops")))}},"lists_index_get"),L=te.blocks.getBlockDefinition(c),d=(Blockly.Blocks.lists_index_get={init:function(){this.jsonInit({message0:L.block.message0,args0:[{type:"input_value",name:"LIST",check:"Array"},{type:"input_value",name:"INDEX",check:"Number"}],colour:te.toolbox.blockColors.arrays,outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0}),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0),ie(this,c)}},"lists_index_set"),M=te.blocks.getBlockDefinition(d);Blockly.Blocks[d]={init:function(){this.jsonInit({message0:M.block.message0,args0:[{type:"input_value",name:"LIST",check:"Array"},{type:"input_value",name:"INDEX",check:"Number"},{type:"input_value",name:"VALUE",check:null}],previousStatement:null,nextStatement:null,colour:te.toolbox.blockColors.arrays,inputsInline:!0}),ie(this,d)}}}{const p="math_op2",g=te.blocks.getBlockDefinition(p),F=g.tooltip,h=(Blockly.Blocks[p]={init:function(){this.jsonInit({message0:lf("%1 of %2 and %3"),args0:[{type:"field_dropdown",name:"op",options:[[lf("{id:op}min"),"min"],[lf("{id:op}max"),"max"]]},{type:"input_value",name:"x",check:"Number"},{type:"input_value",name:"y",check:"Number"}],inputsInline:!0,output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:te.toolbox.getNamespaceColor("math")}),ae(this,p,g.name,function(e){return F[e.getFieldValue("op")]},g.url,te.toolbox.getNamespaceColor(g.category))}},"math_op3"),U=te.blocks.getBlockDefinition(h),_=(Blockly.Blocks[h]={init:function(){this.jsonInit({message0:U.block.message0,args0:[{type:"input_value",name:"x",check:"Number"}],inputsInline:!0,output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:te.toolbox.getNamespaceColor("math")}),ie(this,h)}},["math_number","math_integer","math_whole_number","math_number_minmax"].forEach(e=>{var t=te.blocks.getBlockDefinition(e);le(e,t.name,t.tooltip,t.url,Blockly.Colours.textField,Blockly.Colours.textField,Blockly.Colours.textField)}),Blockly.Msg),m="math_arithmetic",f=te.blocks.getBlockDefinition(m),H=f.tooltip;_.MATH_ADDITION_SYMBOL=f.block.MATH_ADDITION_SYMBOL,_.MATH_SUBTRACTION_SYMBOL=f.block.MATH_SUBTRACTION_SYMBOL,_.MATH_MULTIPLICATION_SYMBOL=f.block.MATH_MULTIPLICATION_SYMBOL,_.MATH_DIVISION_SYMBOL=f.block.MATH_DIVISION_SYMBOL,_.MATH_POWER_SYMBOL=f.block.MATH_POWER_SYMBOL,le(m,f.name,function(e){return H[e.getFieldValue("OP")]},f.url,te.toolbox.getNamespaceColor(f.category));var t="math_modulo",n=te.blocks.getBlockDefinition(t);_.MATH_MODULO_TITLE=n.block.MATH_MODULO_TITLE,se(t),ne.initMathOpBlock(),ne.initMathRoundBlock()}{Blockly.FieldVariable.prototype.getVariableTypes_=()=>[""];let e=lf("{id:var}item");Blockly.Variables.flyoutCategory=function(e){let t=[];te.appTarget.appTheme.hideFlyoutHeadings||(n=oe(lf("Variables"),te.toolbox.getNamespaceColor("variables"),te.toolbox.getNamespaceIcon("variables")),t.push(n));var n=document.createElement("button"),n=(n.setAttribute("text",lf("Make a Variable...")),n.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(e){Blockly.Variables.createVariable(e.getTargetWorkspace())}),t.push(n),Blockly.Variables.flyoutCategoryBlocks(e));return t=t.concat(n)},Blockly.Variables.flyoutCategoryBlocks=function(e){var t=e.getVariablesOfType(""),n=[];if(0<t.length){var o,r,i,s,e=t[t.length-1];t.sort(Blockly.VariableModel.compareByName);for(let e=0;e<t.length;e++){var a=t[e];Blockly.Blocks.variables_get&&(a='<xml><block type="variables_get" gap="8">'+Blockly.Variables.generateVariableFieldXmlString(a)+"</block></xml>",a=Blockly.Xml.textToDom(a).firstChild,n.push(a))}n[n.length-1].setAttribute("gap","24"),Blockly.Blocks.variables_set&&(s='<xml><block type="variables_set" gap="'+(Blockly.Blocks.variables_change?8:24)+'">'+Blockly.Variables.generateVariableFieldXmlString(e)+"</block></xml>",s=Blockly.Xml.textToDom(s).firstChild,(i=goog.dom.createDom("value")).setAttribute("name","VALUE"),(o=goog.dom.createDom("shadow")).setAttribute("type","math_number"),i.appendChild(o),(r=goog.dom.createDom("field")).setAttribute("name","NUM"),r.appendChild(document.createTextNode("0")),o.appendChild(r),s.appendChild(i),n.push(s)),Blockly.Blocks.variables_change&&(o='<xml><block type="variables_change" gap="'+(Blockly.Blocks.variables_get?20:8)+'">'+Blockly.Variables.generateVariableFieldXmlString(e)+'<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block></xml>',r=Blockly.Xml.textToDom(o).firstChild,(i=goog.dom.createDom("value")).setAttribute("name","VALUE"),(s=goog.dom.createDom("shadow")).setAttribute("type","math_number"),i.appendChild(s),(e=goog.dom.createDom("field")).setAttribute("name","NUM"),e.appendChild(document.createTextNode("1")),s.appendChild(e),r.appendChild(i),n.push(r))}return n};var n=Blockly.Msg,t="variables_get",o=te.blocks.getBlockDefinition(t),o=(n.VARIABLES_GET_CREATE_SET=o.block.VARIABLES_GET_CREATE_SET,se(t),se("variables_get_reporter"),n.RENAME_VARIABLE=lf("Rename variable..."),n.DELETE_VARIABLE=lf('Delete the "%1" variable'),n.DELETE_VARIABLE_CONFIRMATION=lf('Delete %1 uses of the "%2" variable?'),n.NEW_VARIABLE_DROPDOWN=lf("New variable..."),"variables_set"),t=te.blocks.getBlockDefinition(o);n.VARIABLES_SET=t.block.VARIABLES_SET,n.VARIABLES_DEFAULT_NAME=e,n.VARIABLES_SET_CREATE_GET=lf("Create 'get %1'"),se(o);const y="variables_change",V=te.blocks.getBlockDefinition(y);Blockly.Blocks[y]={init:function(){this.jsonInit({message0:V.block.message0,args0:[{type:"field_variable",name:"VAR",variable:e},{type:"input_value",name:"VALUE",check:"Number"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:te.toolbox.getNamespaceColor("variables")}),ie(this,y)},customContextMenu:function(e){var t,n;this.inDebugWorkspace()||(t={enabled:0<this.workspace.remainingCapacity()},n=this.getField("VAR").getText(),t.text=lf("Create 'get {0}'",n),(n=goog.dom.createDom("field",null,n)).setAttribute("name","VAR"),(n=goog.dom.createDom("block",null,n)).setAttribute("type","variables_get"),t.callback=Blockly.ContextMenu.callbackFactory(this,n),e.push(t))}},n.NEW_VARIABLE_TITLE=lf("New variable name:"),n.RENAME_VARIABLE_TITLE=lf("Rename all '%1' variables to:")}{(t=Blockly.Msg).FUNCTION_CREATE_NEW=lf("Make a Function..."),t.FUNCTION_WARNING_DUPLICATE_ARG=lf("Functions cannot use the same argument name more than once."),t.FUNCTION_WARNING_ARG_NAME_IS_FUNCTION_NAME=lf("Argument names must not be the same as the function name."),t.FUNCTION_WARNING_EMPTY_NAME=lf("Function and argument names cannot be empty."),t.FUNCTIONS_DEFAULT_FUNCTION_NAME=lf("doSomething"),t.FUNCTIONS_DEFAULT_BOOLEAN_ARG_NAME=lf("bool"),t.FUNCTIONS_DEFAULT_STRING_ARG_NAME=lf("text"),t.FUNCTIONS_DEFAULT_NUMBER_ARG_NAME=lf("num"),t.FUNCTIONS_DEFAULT_CUSTOM_ARG_NAME=lf("arg"),t.PROCEDURES_HUE=te.toolbox.getNamespaceColor("functions"),t.REPORTERS_HUE=te.toolbox.getNamespaceColor("variables"),o="procedures_defnoreturn",n=te.blocks.getBlockDefinition(o),t.PROCEDURES_DEFNORETURN_TITLE=n.block.PROCEDURES_DEFNORETURN_TITLE,t.PROCEDURE_ALREADY_EXISTS=n.block.PROCEDURE_ALREADY_EXISTS,Blockly.Blocks.procedures_defnoreturn.init=function(){var e=new Blockly.FieldTextInput("",Blockly.Procedures.rename);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.setColour(te.toolbox.getNamespaceColor("functions")),this.arguments_=[],this.argumentVarModels_=[],this.setStartHat(!0),this.setStatements_(!0),this.statementConnection_=null},se(o);const k="procedures_callnoreturn",W=te.blocks.getBlockDefinition(k),b=(t.PROCEDURES_CALLRETURN_TOOLTIP=n.tooltip.toString(),Blockly.Blocks.procedures_callnoreturn={init:function(){var e=new pxtblockly.FieldProcedure("");this.appendDummyInput("TOPROW").appendField(W.block.PROCEDURES_CALLNORETURN_TITLE).appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(te.toolbox.getNamespaceColor("functions")),this.arguments_=[],this.quarkConnections_={},this.quarkIds_=null},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,t){Blockly.Names.equals(e,this.getProcedureCall())&&this.setFieldValue(t,"NAME")},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&!this.isInsertionMarker())if(n.type==Blockly.Events.CREATE&&-1!=n.ids.indexOf(this.id)){let e=this.getProcedureCall(),t=Blockly.Procedures.getDefinition(e,this.workspace);var o,r,i;(t=!t||t.type==this.defType_&&JSON.stringify(t.arguments_)==JSON.stringify(this.arguments_)?t:null)||(Blockly.Events.setGroup(n.group),o=Blockly.utils.xml.createElement("xml"),(r=Blockly.utils.xml.createElement("block")).setAttribute("type",this.defType_),i=(s=this.getRelativeToSurfaceXY()).x+Blockly.SNAP_RADIUS*(this.RTL?-1:1),s=s.y+2*Blockly.SNAP_RADIUS,r.setAttribute("x",i),r.setAttribute("y",s),(i=Blockly.utils.xml.createElement("field")).setAttribute("name","NAME"),i.appendChild(document.createTextNode(this.getProcedureCall())),r.appendChild(i),o.appendChild(r),te.blocks.domToWorkspaceNoEvents(o,this.workspace),Blockly.Events.setGroup(!1))}else{var s;n.type==Blockly.Events.DELETE&&(s=this.getProcedureCall(),Blockly.Procedures.getDefinition(s,this.workspace)||(Blockly.Events.setGroup(n.group),this.dispose(!0,!1),Blockly.Events.setGroup(!1)))}},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("name",this.getProcedureCall()),e},domToMutation:function(e){e=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),e)},customContextMenu:function(e){var t={enabled:!0};t.text=Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF;let n=this.getProcedureCall(),o=this.workspace;t.callback=function(){var e=Blockly.Procedures.getDefinition(n,o);e&&e.select()},e.push(t)},defType_:"procedures_defnoreturn"},se(k),"function_definition"),G=te.blocks.getBlockDefinition(b),v=(t.FUNCTIONS_EDIT_OPTION=G.block.FUNCTIONS_EDIT_OPTION,se(b),o="function_call",n=te.blocks.getBlockDefinition(o),t.FUNCTIONS_CALL_TITLE=n.block.FUNCTIONS_CALL_TITLE,t.FUNCTIONS_GO_TO_DEFINITION_OPTION=n.block.FUNCTIONS_GO_TO_DEFINITION_OPTION,se(o),se("function_call_output"),"function_return"),K=(Blockly.Blocks[v]={init:function(){ne.initReturnStatement(this)},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout){const t=e.type===Blockly.Events.BLOCK_CREATE&&-1!=e.ids.indexOf(this.id),n=e.type===Blockly.Events.END_DRAG&&-1!=e.allNestedIds.indexOf(this.id);if(t||n){const t=this.getRootBlock();t.type!==v&&null==t.previousConnection&&t.type!==b&&(Blockly.Events.setGroup(e.group),this.previousConnection.disconnect(),Blockly.Events.setGroup(!1))}}}},se(v),Blockly.Procedures.flyoutCategory=function(l){let t=[];te.appTarget.appTheme.hideFlyoutHeadings||(e=oe(lf("Functions"),te.toolbox.getNamespaceColor("functions"),te.toolbox.getNamespaceIcon("functions"),"blocklyFlyoutIconfunctions"),t.push(e));const n=lf("Make a Function..."),o=lf("New function name:");var e=Blockly.utils.xml.createElement("button");e.setAttribute("text",n),e.setAttribute("callbackKey","CREATE_FUNCTION");l.registerButtonCallback("CREATE_FUNCTION",function(e){let t=e=>{Blockly.prompt(o,e,function(o){if(te.tickEvent("blocks.makeafunction"),o=o&&(o=o.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""))==n?null:o)if(l.getVariable(o))Blockly.alert(Blockly.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",o.toLowerCase()),function(){t(o)});else if(Blockly.Procedures.isLegalName_(o,l)){var r=o;let e=l.getTopBlocks(!0)[0],t=10,n=10;e&&(i=e.getRelativeToSurfaceXY(),t=i.x+Blockly.SNAP_RADIUS*(e.RTL?-1:1),n=i.y+2*Blockly.SNAP_RADIUS);var i=Blockly.utils.xml.createElement("xml"),s=Blockly.utils.xml.createElement("block"),a=(s.setAttribute("type","procedures_defnoreturn"),s.setAttribute("x",String(t)),s.setAttribute("y",String(n)),Blockly.utils.xml.createElement("field")),r=(a.setAttribute("name","NAME"),a.appendChild(document.createTextNode(r)),s.appendChild(a),i.appendChild(s),te.blocks.domToWorkspaceNoEvents(i,l));Blockly.hideChaff(),(a=l.getBlockById(r[0])).select(),l.centerOnBlock(a.id)}else Blockly.alert(Blockly.Msg.PROCEDURE_ALREADY_EXISTS.replace("%1",o.toLowerCase()),function(){t(o)})})};t("doSomething")}),t.push(e);var r=Blockly.Procedures.allProcedures(l)[0],i="procedures_callnoreturn";for(let e=0;e<r.length;e++){var s=r[e][0],a=(r[e][1],Blockly.utils.xml.createElement("block")),s=(a.setAttribute("type",i),a.setAttribute("gap","16"),a.setAttribute("colour",te.toolbox.getNamespaceColor("functions")),goog.dom.createDom("field",null,s));s.setAttribute("name","NAME"),a.appendChild(s),t.push(a)}return t},Blockly.Functions.flyoutCategory),j=(Blockly.Functions.flyoutCategory=e=>{const t=K(e);1<t.length&&(o=ce(),t.splice(1,0,o));var n=Blockly.Functions.getAllFunctionDefinitionBlocks(e).filter(e=>e.getDescendants(!1).some(e=>"function_return"===e.type&&e.getInputTargetBlock("RETURN_VALUE"))).map(e=>e.getField("function_name").getText()),o=oe(lf("Functions"),te.toolbox.getNamespaceColor("functions"),te.toolbox.getNamespaceIcon("functions"),"blocklyFlyoutIconfunctions"),r=(t.unshift(o),[]);for(const te of t)if(r.push(te),"function_call"===te.getAttribute("type")){const e=te.children.item(0);if(e){const t=e.getAttribute("name");if(n.some(e=>e===t)){const e=te.cloneNode(!0);e.setAttribute("type","function_call_output"),r.push(e)}}}return r},{number:te.blocks.defaultIconForArgType("number"),boolean:te.blocks.defaultIconForArgType("boolean"),string:te.blocks.defaultIconForArgType("string"),Array:te.blocks.defaultIconForArgType("Array")}),z={},T=te.appTarget.runtime&&te.appTarget.runtime.functionsOptions,X=(T&&T.extraFunctionEditorTypes&&T.extraFunctionEditorTypes.forEach(e=>{j[e.typeName]=e.icon||te.blocks.defaultIconForArgType(),e.defaultName&&(z[e.typeName]=e.defaultName)}),Blockly.PXTBlockly.FunctionUtils.argumentIcons=j,Blockly.PXTBlockly.FunctionUtils.argumentDefaultNames=z,Blockly.Blocks.argument_reporter_custom&&(Blockly.Blocks.argument_reporter_custom.domToMutation=function(e){e=e.getAttribute("typename");this.typeName_=e,re(this,e,Z)}),Blockly.Functions.makeCreateCallOption);Blockly.Msg.FUNCTIONS_CREATE_CALL_OPTION="",Blockly.Functions.makeCreateCallOption=function(e){var t=X(e),e=e.getField("function_name").getText();return t.text=te.Util.lf("Create 'call {0}'",e),t}}{const E=Blockly.Msg,$="lists_create_with",S=te.blocks.getBlockDefinition($);E.LISTS_CREATE_EMPTY_TITLE=S.block.LISTS_CREATE_EMPTY_TITLE,E.LISTS_CREATE_WITH_INPUT_WITH=S.block.LISTS_CREATE_WITH_INPUT_WITH,E.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD=S.block.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD,E.LISTS_CREATE_WITH_ITEM_TITLE=S.block.LISTS_CREATE_WITH_ITEM_TITLE,se($),t="lists_length",n=te.blocks.getBlockDefinition(t),E.LISTS_LENGTH_TITLE=n.block.LISTS_LENGTH_TITLE,Blockly.Blocks[t].init=function(){this.jsonInit({message0:E.LISTS_LENGTH_TITLE,args0:[{type:"input_value",name:"VALUE",check:["Array"]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND})},se(t)}{o=Blockly.Msg,n="controls_repeat_ext",t=te.blocks.getBlockDefinition(n),o.CONTROLS_REPEAT_TITLE=t.block.CONTROLS_REPEAT_TITLE,o.CONTROLS_REPEAT_INPUT_DO=t.block.CONTROLS_REPEAT_INPUT_DO,se(n);const C="device_while",Y=te.blocks.getBlockDefinition(C),x=(Blockly.Blocks[C]={init:function(){this.jsonInit({message0:Y.block.message0,args0:[{type:"input_value",name:"COND",check:"Boolean"}],previousStatement:null,nextStatement:null,colour:te.toolbox.getNamespaceColor("loops")}),this.appendStatementInput("DO").appendField(Y.block.appendField),ie(this,C)}},"pxt_controls_for"),B=te.blocks.getBlockDefinition(x),A=(Blockly.Blocks[x]={init:function(){this.jsonInit({message0:B.block.message0,args0:[{type:"input_value",name:"VAR",variable:B.block.variable,check:"Variable"},{type:"input_value",name:"TO",check:"Number"}],previousStatement:null,nextStatement:null,colour:te.toolbox.getNamespaceColor("loops"),inputsInline:!0}),this.appendStatementInput("DO").appendField(B.block.appendField);let e=this;ae(this,x,B.name,function(){return te.U.rlf(B.tooltip,e.getInputTargetBlock("VAR")?e.getInputTargetBlock("VAR").getField("VAR").getText():"")},B.url,String(te.toolbox.getNamespaceColor("loops")))},getVars:function(){return[this.getField("VAR").getText()]},renameVar:function(e,t){var n=this.getField("VAR");Blockly.Names.equals(e,n.getText())&&n.setValue(t)}},"controls_simple_for"),I=te.blocks.getBlockDefinition(A),D=(Blockly.Blocks[A]={init:function(){this.jsonInit({message0:I.block.message0,args0:[{type:"field_variable",name:"VAR",variable:I.block.variable},{type:"input_value",name:"TO",check:"Number"}],previousStatement:null,nextStatement:null,colour:te.toolbox.getNamespaceColor("loops"),inputsInline:!0}),this.appendStatementInput("DO").appendField(I.block.appendField);let e=this;ae(this,A,I.name,function(){return te.U.rlf(I.tooltip,e.getField("VAR").getText())},I.url,String(te.toolbox.getNamespaceColor("loops")))},getVars:function(){return[this.getField("VAR").getText()]},renameVar:function(e,t){var n=this.getField("VAR");Blockly.Names.equals(e,n.getText())&&n.setValue(t)},customContextMenu:function(e){var t,n;this.isCollapsed()||this.inDebugWorkspace()||(t={enabled:!0},n=this.getField("VAR").getText(),t.text=lf("Create 'get {0}'",n),(n=goog.dom.createDom("field",null,n)).setAttribute("name","VAR"),(n=goog.dom.createDom("block",null,n)).setAttribute("type","variables_get"),t.callback=Blockly.ContextMenu.callbackFactory(this,n),e.push(t))}},te.blocks.getBlockDefinition(ts.pxtc.TS_BREAK_TYPE)),N=(Blockly.Blocks[pxtc.TS_BREAK_TYPE]={init:function(){var e=te.toolbox.getNamespaceColor("loops");this.jsonInit({message0:D.block.message0,inputsInline:!0,previousStatement:null,nextStatement:null,colour:e}),ae(this,ts.pxtc.TS_BREAK_TYPE,D.name,D.tooltip,D.url,e,void 0,void 0,!1)}},te.blocks.getBlockDefinition(ts.pxtc.TS_CONTINUE_TYPE));Blockly.Blocks[pxtc.TS_CONTINUE_TYPE]={init:function(){var e=te.toolbox.getNamespaceColor("loops");this.jsonInit({message0:N.block.message0,inputsInline:!0,previousStatement:null,nextStatement:null,colour:e}),ae(this,ts.pxtc.TS_CONTINUE_TYPE,N.name,N.tooltip,N.url,e,void 0,void 0,!1)}},Blockly.Blocks[pxtc.COLLAPSED_BLOCK]={init:function(){this.jsonInit({message0:"...",inputsInline:!0,previousStatement:null,nextStatement:null,colour:"#cccccc"}),ae(this,ts.pxtc.COLLAPSED_BLOCK,"...",lf("a few blocks"),void 0,"#cccccc",void 0,void 0,!1)}}}o=Blockly.Msg,t="controls_if",n=te.blocks.getBlockDefinition(t),e=n.tooltip,o.CONTROLS_IF_MSG_IF=n.block.CONTROLS_IF_MSG_IF,o.CONTROLS_IF_MSG_THEN=n.block.CONTROLS_IF_MSG_THEN,o.CONTROLS_IF_MSG_ELSE=n.block.CONTROLS_IF_MSG_ELSE,o.CONTROLS_IF_MSG_ELSEIF=n.block.CONTROLS_IF_MSG_ELSEIF,o.CONTROLS_IF_TOOLTIP_1=e.CONTROLS_IF_TOOLTIP_1,o.CONTROLS_IF_TOOLTIP_2=e.CONTROLS_IF_TOOLTIP_2,o.CONTROLS_IF_TOOLTIP_3=e.CONTROLS_IF_TOOLTIP_3,o.CONTROLS_IF_TOOLTIP_4=e.CONTROLS_IF_TOOLTIP_4,se(t),n="logic_compare",e=te.blocks.getBlockDefinition(n).tooltip,o.LOGIC_COMPARE_TOOLTIP_EQ=e.LOGIC_COMPARE_TOOLTIP_EQ,o.LOGIC_COMPARE_TOOLTIP_NEQ=e.LOGIC_COMPARE_TOOLTIP_NEQ,o.LOGIC_COMPARE_TOOLTIP_LT=e.LOGIC_COMPARE_TOOLTIP_LT,o.LOGIC_COMPARE_TOOLTIP_LTE=e.LOGIC_COMPARE_TOOLTIP_LTE,o.LOGIC_COMPARE_TOOLTIP_GT=e.LOGIC_COMPARE_TOOLTIP_GT,o.LOGIC_COMPARE_TOOLTIP_GTE=e.LOGIC_COMPARE_TOOLTIP_GTE,se(n),t="logic_operation",e=te.blocks.getBlockDefinition(t),n=e.tooltip,o.LOGIC_OPERATION_AND=e.block.LOGIC_OPERATION_AND,o.LOGIC_OPERATION_OR=e.block.LOGIC_OPERATION_OR,o.LOGIC_OPERATION_TOOLTIP_AND=n.LOGIC_OPERATION_TOOLTIP_AND,o.LOGIC_OPERATION_TOOLTIP_OR=n.LOGIC_OPERATION_TOOLTIP_OR,se(t),e="logic_negate",n=te.blocks.getBlockDefinition(e),o.LOGIC_NEGATE_TITLE=n.block.LOGIC_NEGATE_TITLE,se(e),t="logic_boolean",n=te.blocks.getBlockDefinition(t),o.LOGIC_BOOLEAN_TRUE=n.block.LOGIC_BOOLEAN_TRUE,o.LOGIC_BOOLEAN_FALSE=n.block.LOGIC_BOOLEAN_FALSE,se(t);{le("text",(e=te.blocks.getBlockDefinition("text")).name,e.tooltip,e.url,Blockly.Colours.textField,Blockly.Colours.textField,Blockly.Colours.textField);const w=Blockly.Msg,O="text_length",q=te.blocks.getBlockDefinition(O);w.TEXT_LENGTH_TITLE=q.block.TEXT_LENGTH_TITLE,Blockly.Blocks[O].init=function(){this.jsonInit({message0:w.TEXT_LENGTH_TITLE,args0:[{type:"input_value",name:"VALUE",check:["String"]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND})},se(O),e=te.blocks.getBlockDefinition("text_join"),w.TEXT_JOIN_TITLE_CREATEWITH=e.block.TEXT_JOIN_TITLE_CREATEWITH,se("text_join")}{const R=(e,t)=>Math.abs(t-(e.left+e.width/2)),P=Blockly.BlockDragger.prototype.dragBlock,J=(Blockly.BlockDragger.prototype.dragBlock=function(e,t){var n=document.getElementsByClassName("blocklyToolboxDiv")[0],o=document.getElementsByClassName("blocklyTreeRoot")[0]||document.getElementsByClassName("blocklyFlyout")[0],r=document.getElementById("blocklyTrashIcon");if(o&&r){const P=R(o.getBoundingClientRect(),e.clientX);if(P<200){const R=P/200;r.style.opacity=""+(1-R),r.style.display="block",n&&(o.style.opacity=""+R,P<50)&&te.BrowserUtils.addClass(n,"blocklyToolboxDeleting")}else r.style.display="none",o.style.opacity="1",n&&te.BrowserUtils.removeClass(n,"blocklyToolboxDeleting")}return P.call(this,e,t)},Blockly.BlockDragger.prototype.endBlockDrag);Blockly.BlockDragger.prototype.endBlockDrag=function(e,t){J.call(this,e,t);var e=document.getElementsByClassName("blocklyToolboxDiv")[0],t=document.getElementsByClassName("blocklyTreeRoot")[0]||document.getElementsByClassName("blocklyFlyout")[0],n=document.getElementById("blocklyTrashIcon");n&&t&&(n.style.display="none",t.style.opacity="1",e)&&te.BrowserUtils.removeClass(e,"blocklyToolboxDeleting")}}Blockly.Blocks[pxtc.TS_DEBUGGER_TYPE]={init:function(){this.setColour(te.toolbox.getNamespaceColor("debug")),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!1),this.appendDummyInput("ON_OFF").appendField(new Blockly.FieldLabel(lf("breakpoint"),void 0),"DEBUGGER").appendField(new pxtblockly.FieldBreakpoint("1",{type:"number"}),"ON_OFF"),ae(this,pxtc.TS_DEBUGGER_TYPE,lf("Debugger statement"),lf("A debugger statement invokes any available debugging functionality"),"/javascript/debugger",te.toolbox.getNamespaceColor("debug"))}},Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="";{const Q=e=>{if(e.disabled)return lf("This block is disabled and will not run. Attach this block to an event to enable it.");let t=e.tooltip;for(;goog.isFunction(t);)t=t(e);return t};Blockly.Tooltip.show_=function(){const i=Blockly.Tooltip;if(i.poisonedElement_=i.element_,Blockly.Tooltip.DIV){if(goog.dom.removeChildren(Blockly.Tooltip.DIV),i.element_.codeCard){var e=te.docs.codeCard.render({header:Q(i.element_)});Blockly.Tooltip.DIV.appendChild(e)}else{var e=Q(i.element_),t=(e=Blockly.utils._string.wrap(e,Blockly.Tooltip.LIMIT)).split("\n");for(let e=0;e<t.length;e++){var n=document.createElement("div");n.appendChild(document.createTextNode(t[e])),Blockly.Tooltip.DIV.appendChild(n)}}o()}function o(){var e=i.element_.RTL,t=goog.dom.getViewportSize(),n=Blockly.Tooltip.DIV;n.style.direction=e?"rtl":"ltr",n.style.display="block",Blockly.Tooltip.visible=!0;let o=i.lastX_,r=(e?o-=Blockly.Tooltip.OFFSET_X+n.offsetWidth:o+=Blockly.Tooltip.OFFSET_X,i.lastY_+Blockly.Tooltip.OFFSET_Y);r+n.offsetHeight>t.height+window.scrollY&&(r-=n.offsetHeight+2*Blockly.Tooltip.OFFSET_Y),e?o=Math.max(Blockly.Tooltip.MARGINS-window.scrollX,o):o+n.offsetWidth>t.width+window.scrollX-2*Blockly.Tooltip.MARGINS&&(o=t.width-n.offsetWidth-2*Blockly.Tooltip.MARGINS),n.style.top=r+"px",n.style.left=o+"px"}}}Blockly.Block.prototype.setEnabled=function(e){var t;this.disabled==e&&(t=Blockly.Events.recordUndo,Blockly.Events.recordUndo=!1,Blockly.Events.fire(new Blockly.Events.BlockChange(this,"disabled",null,this.disabled,!e)),Blockly.Events.recordUndo=t,this.disabled=!e)}}var e}function B(e,t){var n=e.split(/\s*\|\s*/),o=[];for(const e of n)switch(e){case"number":o.push("Number");break;case"string":o.push("String");break;case"boolean":o.push("Boolean");break;case"T":case"any":return null;case"void":return;default:if(d(e)){if(1<n.length)return null;o.push("Array")}var r=t.apis.byQName[e];r&&r.extendsTypes&&0<r.extendsTypes.length?o.push(...r.extendsTypes):o.push(e)}return o}function re(e,t,n){t=B(t,n);!t&&null!==t||e.setOutput(!0,t)}function ie(e,t){var n=te.blocks.getBlockDefinition(t);ae(e,t,n.name,n.tooltip,n.url,te.toolbox.getNamespaceColor(n.category))}function se(e){var t=te.blocks.getBlockDefinition(e);le(e,t.name,t.tooltip,t.url,te.toolbox.getNamespaceColor(t.category))}function ae(n,o,e,t,r,i,s,a,l){!t||"string"!=typeof t&&"function"!=typeof t||n.setTooltip(t),r&&n.setHelpUrl(r),i&&n.setColour(i,s,a),l&&n.setDeletable(!1);i=document.getElementById("blocklyToolboxDefinition"),s=i?ne.getFirstChildWithAttr(i,"block","type",o):void 0;n.codeCard={header:e,name:e,software:1,description:goog.isFunction(t)?t(n):t,blocksXml:s?'<xml xmlns="http://www.w3.org/1999/xhtml">'+(c(s)||`<block type="${o}"></block>`)+"</xml>":void 0,url:r},te.Util.isTranslationMode()&&te.blocks.promptTranslateBlock&&(n.customContextMenu=e=>{const t=te.blocks.getBlockDefinition(n.type);t&&t.translationIds&&e.push({enabled:!0,text:lf("Translate this block"),callback:function(){te.blocks.promptTranslateBlock(o,t.translationIds)}})})}function le(e,t,n,o,r,i,s){let a=Blockly.Blocks[e],l=a.init;l&&(a.init=function(){l.call(this),ae(this,e,t,n,o,r,i,s)})}function l(e,t,n,o){o=document.createElement(o?"shadow":"block"),o.setAttribute("type",te.Util.htmlEscape(e)),e=document.createElement("field");return e.setAttribute("name",te.Util.htmlEscape(t)),e.textContent=te.Util.htmlEscape(n),o.appendChild(e),o}function ce(){var e=document.createElement("block"),t=(e.setAttribute("type","function_return"),document.createElement("value")),n=(t.setAttribute("name","RETURN_VALUE"),e.appendChild(t),l("math_number","NUM","0",!0));return t.appendChild(n),e}ne.installHelpResources=le,ne.onShowContextMenu=void 0,ne.mkPredicateBlock=function(e){var t=document.createElement("block"),e=(t.setAttribute("type",e),document.createElement("value")),n=(e.setAttribute("name","PREDICATE"),t.appendChild(e),l("logic_boolean","BOOL","TRUE",!0));return e.appendChild(n),t},ne.mkFieldBlock=l,ne.mkReturnStatementBlock=ce;let x={};function A(e,t){return{field:e,name:t}}function I(t,n){return te.Util.values(t.byQName).filter(e=>{return 4===e.kind&&e.attributes.fixedInstance&&((e=e.retType)==n||!(!(e=t.byQName[e])||!e.extendsTypes)&&0<=e.extendsTypes.indexOf(n))})}function _(e){return e.data?/^(?:\d+;?)+$/.test(e.data)?{commentRefs:e.data.split(";"),fieldData:{}}:JSON.parse(e.data):{commentRefs:[],fieldData:{}}}function m(e,t){e.data=JSON.stringify(t)}ne.getFixedInstanceDropdownValues=I,ne.generateIcons=function(e){const t=new te.ImageConverter;e.forEach(e=>{e.attributes.jresURL&&!e.attributes.iconURL&&te.U.startsWith(e.attributes.jresURL,"data:image/x-mkcd-f")&&(e.attributes.iconURL=t.convert(e.attributes.jresURL))})},ne.setVarFieldValue=function(e,t,n){var o=e.getField(t),r=e.workspace.getAllVariables();let i=!1;if(r&&r.length)for(let e=0;e<r.length;e++){const t=r[e];t.name===n&&(o.setValue(t.getId()),i=!0)}if(!i){o.initModel();const e=o.getVariable();e.name=n,o.setValue(e.getId())}},ne.getBlockData=_,ne.setBlockData=m,ne.setBlockDataForField=function(e,t,n){var o=_(e);o.fieldData[t]=n,m(e,o)},ne.getBlockDataForField=function(e,t){return _(e).fieldData[t]}}}(pxt=pxt||{}),function(o){{var i=o.blocks||(o.blocks={}),e;let r;(e=r=i.MutatorTypes||(i.MutatorTypes={})).ObjectDestructuringMutator="objectdestructuring",e.RestParameterMutator="restparameter",e.DefaultInstanceMutator="defaultinstance",i.addMutation=function(e,t,n){let o;switch(n){case r.ObjectDestructuringMutator:if(!t.parameters||t.parameters.length<1)console.error("Destructuring mutations require at least one parameter");else{let e=!1;for(const r of t.parameters)if(-1!==r.type.indexOf("=>")){if(!r.properties||0===r.properties.length)return void console.error("Destructuring mutations only supported for functions with an event parameter that has multiple properties");e=!0}if(!e)return void console.error("Destructuring mutations must have an event parameter")}o=new a(e,t);break;case r.RestParameterMutator:o=new l(e,t);break;case r.DefaultInstanceMutator:o=new c(e,t);break;default:return void console.warn("Ignoring unknown mutation type: "+n)}e.mutationToDom=o.mutationToDom.bind(o),e.domToMutation=o.domToMutation.bind(o),e.compose=o.compose.bind(o),e.decompose=o.decompose.bind(o),e.mutation=o},i.mutateToolboxBlock=function(e,t,n){var o=document.createElement("mutation");switch(t){case r.ObjectDestructuringMutator:o.setAttribute(a.propertiesAttributeName,n);break;case r.RestParameterMutator:o.setAttribute(l.countAttributeName,n);break;case r.DefaultInstanceMutator:o.setAttribute(c.attributeName,n);default:return void console.warn("Ignoring unknown mutation type: "+t)}e.appendChild(o)};class s{constructor(e,t){this.info=t,this.block=e,this.topBlockType=this.block.type+"_mutator";t=this.getSubBlockNames(),this.initializeMutatorTopBlock(),this.initializeMutatorSubBlocks(t),e=t.map(e=>e.type);this.block.setMutator(new Blockly.Mutator(e))}compose(e){e=e.getDescendants(!1).map(e=>({type:e.type,name:e.inputList[0].name}));e.shift(),this.updateBlock(e)}decompose(n){var e=n.newBlock(this.topBlockType);e.initSvg();for(const o of e.inputList)if(o.name===s.mutatorStatmentInput){let t=o.connection;this.getVisibleBlockTypes().forEach(e=>{e=n.newBlock(e);e.initSvg(),t.connect(e.previousConnection),t=e.nextConnection});break}return e}compileMutation(e,t){}getDeclaredVariables(){}isDeclaredByMutation(e){return!1}initializeMutatorSubBlock(e,t,n){e.appendDummyInput(t).appendField(t),e.setColour(n),e.setNextStatement(!0),e.setPreviousStatement(!0)}initializeMutatorTopBlock(){const e=this.info.attributes.mutateText,t=this.block.getColour();Blockly.Blocks[this.topBlockType]=Blockly.Blocks[this.topBlockType]||{init:function(){this.appendDummyInput().appendField(e),this.setColour(t),this.appendStatementInput(s.mutatorStatmentInput)}}}initializeMutatorSubBlocks(e){const t=this.block.getColour(),n=this.initializeMutatorSubBlock.bind(this);e.forEach(e=>{Blockly.Blocks[e.type]=Blockly.Blocks[e.type]||{init:function(){n(this,e.name,t)}}})}}s.mutatorStatmentInput="PROPERTIES",s.mutatedVariableInputName="properties";class a extends s{constructor(e,t){super(e,t),this.currentlyVisible=[],this.parameterRenames={},this.prefix=this.info.attributes.mutatePrefix,this.block.appendDummyInput(s.mutatedVariableInputName),this.block.appendStatementInput("HANDLER").setCheck("null")}getMutationType(){return r.ObjectDestructuringMutator}compileMutation(o,e){var t;if(this.info.attributes.mutatePropertyEnum||this.parameters.length)return t=`function ({ ${this.parameters.map(e=>{var t=this.block.getField(e),t=t&&t.getText(),n=i.escapeVarName(e,o);return t!==e?(this.parameterRenames[e]=t,e+": "+i.escapeVarName(t,o)):n}).join(", ")} })`,this.info.attributes.mutatePropertyEnum?i.mkText(` [${this.parameters.map(e=>this.info.attributes.mutatePropertyEnum+"."+e).join(", ")}],`+t):i.mkText(t)}getDeclaredVariables(){const t={};return this.parameters.forEach(e=>{t[this.getVarFieldValue(e)]=this.parameterTypes[e]}),t}isDeclaredByMutation(t){return this.parameters.some(e=>this.getVarFieldValue(e)===t)}mutationToDom(){var e=document.createElement("mutation"),t=this.parameters.map(e=>{var t=this.getVarFieldValue(e);return t!==e&&(this.parameterRenames[e]=o.Util.htmlEscape(t)),o.Util.htmlEscape(e)}).join(",");e.setAttribute(a.propertiesAttributeName,t);for(const o in this.parameterRenames)o===this.parameterRenames[o]&&delete this.parameterRenames[o];return e.setAttribute(a.renameAttributeName,JSON.stringify(this.parameterRenames)),e}domToMutation(e){var t=e.getAttribute(a.propertiesAttributeName);if(t){const n=t.split(","),o=[];if(void 0===this.paramIndex&&(this.paramIndex=this.getParameterIndex()),n.forEach(e=>{const t=e.split(":");this.info.parameters[this.paramIndex].properties.some(e=>e.name===t[0])&&o.push({property:t[0],newName:t[1]})}),this.parameterRenames=void 0,e.hasAttribute(a.renameAttributeName))try{this.parameterRenames=JSON.parse(e.getAttribute(a.renameAttributeName))}catch(e){console.warn("Ignoring invalid rename map in saved block mutation")}this.parameterRenames=this.parameterRenames||{},this.parameters=[],o.forEach(e=>{this.parameters.push(e.property),e.newName&&e.newName!==e.property&&(this.parameterRenames[e.property]=e.newName)}),this.updateVisibleProperties(),o.filter(e=>!!e.newName).forEach(e=>this.setVarFieldValue(e.property,e.newName))}}getVarFieldValue(e){e=this.block.getField(e);return e&&e.getText()}setVarFieldValue(e,t){this.block.getField(e),this.block.getField(e)&&i.setVarFieldValue(this.block,e,t)}updateBlock(e){this.parameters=[],e.forEach(e=>{-1===this.parameters.indexOf(e.name)&&this.parameters.push(e.name)}),this.updateVisibleProperties()}getSubBlockNames(){return this.parameters=[],this.parameterTypes={},void 0===this.paramIndex&&(this.paramIndex=this.getParameterIndex()),this.info.parameters[this.paramIndex].properties.map(e=>(this.parameterTypes[e.name]=e.type,{type:this.propertyId(e.name),name:e.name}))}getVisibleBlockTypes(){return this.currentlyVisible.map(e=>this.propertyId(e))}updateVisibleProperties(){if(!o.Util.listsEqual(this.currentlyVisible,this.parameters)){const n=this.block.inputList.find(e=>e.name===s.mutatedVariableInputName);this.prefix&&0===this.currentlyVisible.length&&n.appendField(this.prefix,a.prefixLabel),this.currentlyVisible.forEach(e=>{var t;-1===this.parameters.indexOf(e)&&((t=this.getVarFieldValue(e))!==e&&(this.parameterRenames[e]=t),n.removeField(e))}),this.parameters.forEach(e=>{var t;-1===this.currentlyVisible.indexOf(e)&&(t=this.parameterRenames[e]||e,n.appendField(new Blockly.FieldVariable(t),e))}),this.prefix&&0===this.parameters.length&&n.removeField(a.prefixLabel),this.currentlyVisible=this.parameters}}propertyId(e){return this.block.type+"_"+e}getParameterIndex(){for(let e=0;e<this.info.parameters.length;e++)if(-1!==this.info.parameters[e].type.indexOf("=>"))return e}}a.propertiesAttributeName="callbackproperties",a.renameAttributeName="renamemap",a.prefixLabel="0prefix_label_";class l extends s{constructor(){super(...arguments),this.count=0}getMutationType(){return r.RestParameterMutator}compileMutation(t,n){const o=[];return this.forEachInput(e=>o.push(i.compileExpression(t,e,n))),i.mkGroup(o)}mutationToDom(){var e=document.createElement("mutation");return e.setAttribute(l.countAttributeName,this.count.toString()),e}domToMutation(e){var t=e.getAttribute(l.countAttributeName);if(t){try{this.count=parseInt(t)}catch(e){return}for(let e=0;e<this.count;e++)this.addNumberField(!1,e)}}updateBlock(e){if(e){var t=Math.abs(this.count-e.length);if(this.count<e.length)for(let e=0;e<t;e++)this.addNumberField(!0,this.count);else if(this.count>e.length)for(let e=0;e<t;e++)this.removeNumberField()}}getSubBlockNames(){return[{name:"Value",type:l.entryTypeName}]}getVisibleBlockTypes(){const e=[];return this.forEachInput(()=>e.push(l.entryTypeName)),e}addNumberField(e,t){t=this.block.appendValueInput(l.valueInputPrefix+t).setCheck("Number");if(e){const e=this.block.workspace.newBlock("math_number");e.initSvg(),e.setShadow(!0),t.connection.connect(e.outputConnection),this.block.workspace.render(),this.count++}}removeNumberField(){0<this.count&&this.block.removeInput(l.valueInputPrefix+(this.count-1)),this.count--}forEachInput(t){for(let e=0;e<this.count;e++)t(this.block.getInputTargetBlock(l.valueInputPrefix+e),e)}}l.countAttributeName="count",l.entryTypeName="entry",l.valueInputPrefix="value_input_";class c extends s{constructor(){super(...arguments),this.showing=!1}getMutationType(){return r.DefaultInstanceMutator}compileMutation(e,t){if(this.showing){var n=this.block.getInputTargetBlock(c.instanceInputName);if(n)return i.compileExpression(e,n,t)}}mutationToDom(){var e=document.createElement("mutation");return e.setAttribute(c.attributeName,this.showing?"true":"false"),e}domToMutation(e){e=e.getAttribute(c.attributeName);e?this.updateShape("true"===e):this.updateShape(!1)}updateBlock(e){this.updateShape(!(!e||!e.length))}getSubBlockNames(){return[{name:"Instance",type:c.instanceSubBlockType}]}getVisibleBlockTypes(){var e=[];return this.showing&&e.push(c.instanceSubBlockType),e}updateShape(e){this.showing!==e&&(e&&!this.block.getInputTargetBlock(c.instanceInputName)?this.block.appendValueInput(c.instanceInputName):this.block.removeInput(c.instanceInputName),this.showing=e)}}c.attributeName="showing",c.instanceInputName="__instance__",c.instanceSubBlockType="instance"}}(pxt=pxt||{}),function(s){{var e=s.blocks||(s.blocks={}),t;let r,o,i;function a(){return r||((o=document.createElement("div")).style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="1px",o.style.height="1px",document.body.appendChild(o),r=Blockly.inject(o,{move:{scrollbars:!1},readOnly:!0,sounds:!1,media:s.webConfig.commitCdnUrl+"blockly/media/",rtl:s.Util.isUserLanguageRtl(),renderer:"pxt"})),s.blocks.clearWithoutEvents(r),r}function l(){r&&r.dispose(),r=void 0}function c(e={emPixels:18,layout:i.Align}){switch(e.splitSvg?i.Align:e.layout||i.Flow){case i.Align:s.blocks.layout.verticalAlign(r,e.emPixels||18);break;case i.Flow:s.blocks.layout.flow(r,{ratio:e.aspectRatio,useViewWidth:e.useViewWidth});break;case i.Clean:r.cleanUp_&&r.cleanUp_()}let t=r.getMetrics();var n=o.querySelectorAll("svg")[0].cloneNode(!0);return s.blocks.layout.cleanUpBlocklySvg(n),s.U.toArray(n.querySelectorAll(".blocklyBlockCanvas,.blocklyBubbleCanvas")).forEach(e=>e.setAttribute("transform",`translate(${-t.contentLeft}, ${-t.contentTop}) scale(1)`)),n.setAttribute("viewBox",`0 0 ${t.contentWidth} `+t.contentHeight),e.emPixels&&(n.style.width=t.contentWidth/e.emPixels+"em",n.style.height=t.contentHeight/e.emPixels+"em"),e.splitSvg?s.blocks.layout.splitSvg(n,r,e.emPixels):n}(t=i=e.BlockLayout||(e.BlockLayout={}))[t.None=0]="None",t[t.Align=1]="Align",t[t.Clean=3]="Clean",t[t.Flow=4]="Flow",e.initRenderingWorkspace=a,e.cleanRenderingWorkspace=l,e.renderWorkspace=c,e.render=function(e,t={emPixels:18,layout:i.Align}){a();try{var n=e||'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',o=Blockly.Xml.textToDom(n);return s.blocks.domToWorkspaceNoEvents(o,r),c(t)}catch(e){s.reportException(e)}finally{l()}},e.blocksMetrics=function(e){e=e.getTopBlocks(!1);if(!e.length)return{width:0,height:0};let t;return e.forEach(e=>{e=e.getBoundingRectangle();t?(t.l=Math.min(t.l,e.left),t.r=Math.max(t.r,e.right),t.t=Math.min(t.t,e.top),t.b=Math.min(t.b,e.bottom)):t={l:e.left,r:e.right,t:e.top,b:e.bottom}}),{width:t.r-t.l,height:t.b-t.t}}}}(pxt=pxt||{}),function(e){function n(e,t){let n=[];for(const r in e.children){var o=e.children[r];if("block"===o.tagName)if(t){const e=o.getAttribute("type");e&&e===t&&n.push(o)}else n.push(o);else{const e=i(o);e&&(n=n.concat(e))}}return n}function i(e,t){e=n(e,t);return e.length?e[0]:null}(e=e.blocks||(e.blocks={})).findRootBlocks=n,e.findRootBlock=i}(pxt=pxt||{}),function(c){var e;((e=c.docs||(c.docs={})).codeCard||(e.codeCard={})).render=function(e,t={}){const n=e.url?/^[^:]+:\/\//.test(e.url)?e.url:"/"+e.url.replace(/^\.?\/?/,""):e.youTubeId?"https://youtu.be/"+e.youTubeId:void 0,o=!!n,r=(e,t,n="div",o="")=>{n=document.createElement(n);return t&&(n.className=t),e&&e.appendChild(n),o&&n.appendChild(document.createTextNode(o+"")),n};var i=r(null,"ui "+(e.style||"card")+" "+(e.color||"")+(o?" link":""),o?"a":"div");if(i.setAttribute("role","option"),i.setAttribute("aria-selected","true"),o){const c=i;c.href=n,/^https?:\/\//.test(n)&&(c.target="_blank")}!t.hideHeader&&e.header&&(s=r(i,"ui content "+(e.responsive?" tall desktop only":"")),e.header)&&r(s,"description","span",e.header);var s=(t.shortName?e.shortName:"")||e.name,a=r(i,"ui image"+(e.responsive?" tall landscape only":""));if(e.label&&((t=document.createElement("label")).className=`ui ${e.labelClass||"orange right ribbon"} label`,t.textContent=e.label,a.appendChild(t)),e.blocksXml){const t=c.blocks.render(e.blocksXml);t?((l=r(a,"")).setAttribute("style","width:100%; min-height:10em"),l.appendChild(t)):(console.error("failed to render blocks"),c.debug(e.blocksXml))}if(e.typeScript&&((t=document.createElement("pre")).appendChild(document.createTextNode(e.typeScript)),a.appendChild(t)),(e.imageUrl||e.youTubeId&&`https://img.youtube.com/vi/${e.youTubeId}/0.jpg`)&&((l=document.createElement("div")).className="ui imagewrapper",(t=document.createElement("div")).className="ui cardimage",t.style.backgroundImage=`url("${e.imageUrl}")`,t.title=s,t.setAttribute("role","presentation"),l.appendChild(t),a.appendChild(l)),"file"==e.cardType&&(t=r(i,"ui fileimage"),a.appendChild(t)),s||e.description){var l=r(i,"ui content");if(s&&(i.setAttribute("aria-label",s),r(l,"header","div",s)),e.description){const t=r(l,"ui description"),n=e.description.split(".")[0]+".";t.appendChild(document.createTextNode(n))}}return e.time&&(a=r(i,"meta"),e.time)&&r(a,"date","span").appendChild(document.createTextNode(c.Util.timeSince(e.time))),e.extracontent&&r(i,"extra content","div").appendChild(document.createTextNode(e.extracontent)),i}}(pxt=pxt||{}),function(E){{var S=E.blocks||(E.blocks={});function n(e,t){const n=e,o=n.mutationToDom,r=n.domToMutation;n.mutationToDom=()=>{var e=o?o():document.createElement("mutation");return t.mutationToDom(e)},n.domToMutation=e=>{r&&r(e),t.domToMutation(e)}}S.appendMutation=n,S.initVariableArgsBlock=function(r,i){let s=0,a=0,l=r.appendDummyInput(),o=()=>{if(s!==a){if(s>a){var t=s-a;for(let e=0;e<t;e++){var n=i[a+e];l.insertFieldAt(l.fieldRow.length-1,new pxtblockly.FieldArgumentVariable(n.name),"HANDLER_"+n.name);const s=r;null!=s&&s.initSvg&&s.initSvg()}}else{var o=a-s;for(let e=0;e<o;e++){const r=i[a-e-1];l.removeField("HANDLER_"+r.name)}}s>=i.length?l.removeField("_HANDLER_ADD"):a>=i.length&&e(),a=s}};function e(){l.appendField(new Blockly.FieldImage(r.ADD_IMAGE_DATAURI,24,24,lf("Add argument"),()=>{s=Math.min(s+1,i.length),o()},!1),"_HANDLER_ADD")}Blockly.Extensions.apply("inline-svgs",r,!1),e(),n(r,{mutationToDom:t=>{t.setAttribute("numArgs",s.toString());for(let e=0;e<s;e++){const s=r.getField("HANDLER_"+i[e].name);var n=s&&s.getText();t.setAttribute("arg"+e,n)}return t},domToMutation:t=>{var e=parseInt(t.getAttribute("numargs"));s=Math.min(isNaN(e)?0:e,i.length),o();for(let e=0;e<s;e++){const s=t.getAttribute("arg"+e),n="HANDLER_"+i[e].name;r.getField(n)&&S.setVarFieldValue(r,n,s)}}})},S.initExpandableBlock=function(r,i,s,a,e,t){const l="0_add_button",c="0_rem_button",u="_expanded",d="_input_init",p=s.parameters.map(e=>e.name),g=s.parameters.length,h=e?g:1,_=new o(i);function m(e,n=!1,t=!1){e=v(e);if(t||n||e!==_.getNumber(u)){_.setValue(u,e);var o=e;if(_.getBoolean(d)||!(0<o)||(b(),i.rendered)){let t=0;for(let e=0;e<i.inputList.length;e++){const n=i.inputList[e];if(E.Util.startsWith(n.name,S.optionalDummyInputPrefix))T(n,t<o||o===g);else if(E.Util.startsWith(n.name,S.optionalInputWithFieldPrefix)||-1!==p.indexOf(n.name)){const E=t<o;if(T(n,E),E&&n.connection&&!n.connection.isConnected()&&!i.isInsertionMarker()){const E=a.definitionNameToParam[s.parameters[t].name];let e=S.createShadowValue(r,E);"value"===e.tagName.toLowerCase()&&(e=e.firstElementChild),Blockly.Events.disable();try{const E=Blockly.Xml.domToBlock(e,i.workspace);E&&n.connection.connect(E.outputConnection)}catch(e){}Blockly.Events.enable()}++t}}y(),n||i.render()}}}function f(e,t,n,o){i.appendDummyInput(e).appendField(new Blockly.FieldImage(t,24,24,n,()=>m(o),!1))}function y(){var e=_.getNumber(u),t=e!==g,e=0!==e,n=!!i.getInput(c),o=!!i.getInput(l);t||i.removeInput(l,!0),e||i.removeInput(c,!0),e&&!n&&f(c,i.REMOVE_IMAGE_DATAURI,lf("Hide optional arguments"),-1*h),t&&(o&&i.inputList.findIndex(e=>e.name===l)!==i.inputList.length-1?(i.removeInput(l,!0),k()):o||k())}function k(){f(l,i.ADD_IMAGE_DATAURI,lf("Reveal optional arguments"),h)}function b(){_.setValue(d,!0),t(),y()}function v(e){return Math.min(Math.max(_.getNumber(u)+e,0),g)}function T(e,t){i.rendered&&e.setVisible(t).forEach(e=>{e.render()})}_.setEventsEnabled(!1),_.setValue(u,0),_.setValue(d,!1),_.setEventsEnabled(!0),Blockly.Extensions.apply("inline-svgs",i,!1),k(),n(i,{mutationToDom:e=>(e.setAttribute(u,_.getString(u)),e.setAttribute(d,_.getString(d)),e),domToMutation:e=>{if(_.setEventsEnabled(!1),e.hasAttribute(d)&&"true"==e.getAttribute(d)&&!_.getBoolean(d)&&(_.setValue(d,!0),b()),e.hasAttribute(u)){var t=parseInt(e.getAttribute(u));if(!isNaN(t)){const e=t-(_.getNumber(u)||0);_.getBoolean(d)?i.rendered||i.isInsertionMarker()?m(e,!0,i.isInsertionMarker()):_.setValue(u,v(e)):m(e,!0)}}_.setEventsEnabled(!0)}}),setTimeout(()=>{i.rendered&&!i.workspace.isDragging()&&m(0,void 0,!0)},1)},S.initReturnStatement=function(o){const t=E.blocks.getBlockDefinition("function_return"),n="0_add_button",r="0_rem_button";Blockly.Extensions.apply("inline-svgs",o,!1);let i,s=!0;function a(){var e=o.getInput("RETURN_VALUE");if(s){if(!e){for(;o.getInput("");)o.removeInput("");o.jsonInit({message0:t.block.message_with_value,args0:[{type:"input_value",name:"RETURN_VALUE",check:null}],previousStatement:null,colour:E.toolbox.getNamespaceColor("functions")})}if(o.getInput(n)&&o.removeInput(n),o.getInput(r)||u(r,o.REMOVE_IMAGE_DATAURI,lf("Remove return value")),i){const E=o.workspace.getBlockById(i);E&&E.outputConnection&&!E.outputConnection.targetBlock()&&o.getInput("RETURN_VALUE").connection.connect(E.outputConnection),i=void 0}}else{if(e){const n=e.connection.targetBlock();n&&(n.isShadow()&&n.setShadow(!1),e.connection.disconnect(),i=n.id),o.removeInput("RETURN_VALUE"),o.jsonInit({message0:t.block.message_no_value,args0:[],previousStatement:null,colour:E.toolbox.getNamespaceColor("functions")})}o.getInput(r)&&o.removeInput(r),o.getInput(n)||u(n,o.ADD_IMAGE_DATAURI,lf("Add return value"))}o.setInputsInline(!0)}function l(){return Blockly.Xml.domToText(o.mutationToDom())}function c(e,t){e!==t&&Blockly.Events.fire(new Blockly.Events.BlockChange(o,"mutation",null,e,t))}function u(e,t,n){o.appendDummyInput(e).appendField(new Blockly.FieldImage(t,24,24,n,()=>{var e=l(),t=(s=!s,l());c(e,t),a(),c(t,l())},!1))}a(),o.domToMutation=e=>{e.hasAttribute("last_connected_id")&&(i=e.getAttribute("last_connected_id")),s="true"!==e.getAttribute("no_return_value"),a()},o.mutationToDom=()=>{var e,t,n=document.createElement("mutation");return e=n,t=!!o.getInput("RETURN_VALUE"),e.setAttribute("no_return_value",t?"false":"true"),i&&n.setAttribute("last_connected_id",i),n}};class o{constructor(e,t){this.block=e,this.fireEvents=!0,this.state=t||{}}setValue(e,t){if(this.fireEvents&&this.block.mutationToDom){const r=this.block.mutationToDom(),i=(this.state[e]=t.toString(),this.block.mutationToDom());Object.keys(this.state).forEach(e=>{r.getAttribute(e)!==this.state[e]&&i.setAttribute(e,this.state[e])});var n=Blockly.Xml.domToText(r),o=Blockly.Xml.domToText(i);n!=o&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.block,"mutation",null,n,o))}else this.state[e]=t.toString()}getNumber(e){return parseInt(this.state[e])}getBoolean(e){return"false"!=this.state[e]}getString(e){return this.state[e]}setEventsEnabled(e){this.fireEvents=e}}}}(pxt=pxt||{}),function(i){{var s=i.blocks||(i.blocks={});const a=i.blocks.MATH_FUNCTIONS.unary.concat(i.blocks.MATH_FUNCTIONS.binary).concat(i.blocks.MATH_FUNCTIONS.infix);let o;s.initMathOpBlock=function(){const e="math_js_op",t=i.blocks.getBlockDefinition(e);function n(e,t){e=e.appendValueInput("ARG"+(t?1:0));e.setCheck("Number"),t&&(e.connection.setShadowDom((o||((o=document.createElement("shadow")).setAttribute("type","math_number"),(t=document.createElement("field")).setAttribute("name","NUM"),t.textContent="0",o.appendChild(t)),o)),e.connection.respawnShadow_())}function r(e,t){var n=!!e.getInput("ARG1");t?(n&&e.moveInputBefore("op_dropdown","ARG1"),e.moveInputBefore("ARG0","op_dropdown")):(n&&e.moveInputBefore("ARG0","ARG1"),e.moveInputBefore("op_dropdown","ARG0"))}Blockly.Blocks[e]={init:function(){const o=this;o.setPreviousStatement(!1),o.setNextStatement(!1),o.setOutput(!0,"Number"),o.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),o.setInputsInline(!0),o.appendDummyInput("op_dropdown").appendField(new Blockly.FieldDropdown(a.map(e=>[t.block[e],e]),e=>{return t=o,e=e,-1===i.blocks.MATH_FUNCTIONS.unary.indexOf(e)?t.getInput("ARG1")||n(t,!0):t.removeInput("ARG1",!0),void r(t,-1!==i.blocks.MATH_FUNCTIONS.infix.indexOf(e));var t}),"OP"),n(o,!1),s.appendMutation(o,{mutationToDom:e=>{let t;for(let e=0;e<o.inputList.length;e++){var n=o.inputList[e];if("op_dropdown"===n.name){t=!1;break}if("ARG0"===n.name){t=!0;break}}return e.setAttribute("op-type",(o.getInput("ARG1")?t?"infix":"binary":"unary").toString()),e},domToMutation:e=>{e.hasAttribute("op-type")&&("unary"!=(e=e.getAttribute("op-type"))&&n(o,!0),r(o,"infix"===e))}})}},s.installHelpResources(e,t.name,function(e){return t.tooltip[e.getFieldValue("OP")]},t.url,i.toolbox.getNamespaceColor(t.category))}}}(pxt=pxt||{}),function(n){{var o=n.blocks||(n.blocks={});const r=n.blocks.ROUNDING_FUNCTIONS;o.initMathRoundBlock=function(){const e="math_js_round",t=n.blocks.getBlockDefinition(e);Blockly.Blocks[e]={init:function(){var e=this;this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0,"Number"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setInputsInline(!0),this.appendDummyInput("round_dropdown").appendField(new Blockly.FieldDropdown(r.map(e=>[t.block[e],e]),e=>{}),"OP"),e.appendValueInput("ARG0").setCheck("Number")}},o.installHelpResources(e,t.name,function(e){return t.tooltip[e.getFieldValue("OP")]},t.url,n.toolbox.getNamespaceColor(t.category))}}}(pxt=pxt||{}),function(e){class t extends Blockly.Field{constructor(e,t,n){super(e,n),this.SERIALIZABLE=!0,this.options=t,e&&!this.valueText&&(this.valueText=e)}init(){this.isInitialized()||(this.fieldGroup_=Blockly.utils.dom.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),this.onInit(),this.updateEditable(),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.render_(),this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_))}dispose(){this.onDispose()}getValue(){return this.valueText}doValueUpdate_(e){null!==e&&(this.valueText=this.loaded?this.onValueChanged(e):e)}getDisplayText_(){return this.valueText}onLoadedIntoWorkspace(){this.loaded||(this.loaded=!0,this.valueText=this.onValueChanged(this.valueText))}isInitialized(){return!!this.fieldGroup_}getBlockData(){return pxt.blocks.getBlockDataForField(this.sourceBlock_,this.name)}setBlockData(e){pxt.blocks.setBlockDataForField(this.sourceBlock_,this.name,e)}}e.FieldBase=t}(pxtblockly=pxtblockly||{}),function(n){var o=pxt.svgUtil;class e extends n.FieldBase{constructor(e,t,n){super(e,t,n),this.pendingEdit=!1,this.isEmpty=!1,this.assetChangeListener=()=>{var e;this.pendingEdit||((e=this.getBlockData())&&(this.asset=pxt.react.getTilemapProject().lookupAsset(this.getAssetType(),e)),this.redrawPreview())},this.lightMode=t.lightMode,this.params=this.parseFieldOptions(t),this.blocksInfo=t.blocksInfo}onInit(){this.redrawPreview()}onValueChanged(e){return this.parseValueText(e),this.redrawPreview(),this.getValueText()}showEditor_(){if(!this.isGreyBlock){var t=Object.assign({},this.params);let e;switch(t.blocksInfo=this.blocksInfo,this.asset.type){case"tile":case"image":e="image-editor",t.temporaryAssets=n.getTemporaryAssets(this.sourceBlock_.workspace,"image");break;case"animation":e="animation-editor",t.temporaryAssets=n.getTemporaryAssets(this.sourceBlock_.workspace,"image").concat(n.getTemporaryAssets(this.sourceBlock_.workspace,"animation"));break;case"tilemap":e="tilemap-editor";const s=pxt.react.getTilemapProject();pxt.sprite.addMissingTilemapTilesAndReferences(s,this.asset)}const s=pxt.react.getFieldEditorView(e,this.asset,t);this.undoRedoState&&s.restorePersistentData(this.undoRedoState),pxt.react.getTilemapProject().pushUndo(),s.onHide(()=>{var t,n=s.getResult(),o=pxt.react.getTilemapProject();if(n){var r=this.getValue();if(!pxt.assetEquals(this.asset,n)){var i=a(this.asset)?null:this.asset.id;let e=a(n)?null:n.id;i||e!==this.sourceBlock_.id||(n.id=o.generateNewID(n.type),e=n.id),this.pendingEdit=!0,null!=(t=n.meta)&&t.displayName&&this.disposeOfTemporaryAsset(),this.asset=n;n=o.revision();if(this.onEditorClose(this.asset),this.updateAssetListener(),this.updateAssetMeta(),this.redrawPreview(),this.undoRedoState=s.getPersistentData(),this.sourceBlock_&&Blockly.Events.isEnabled()){const t=new l(this.sourceBlock_,"field",this.name,r,this.getValue(),n,o.revision());i!==e&&(t.oldAssetId=i,t.newAssetId=e),Blockly.Events.fire(t)}this.pendingEdit=!1}}}),s.show()}}render_(){this.isGreyBlock&&!this.textElement_&&this.createTextElement_(),super.render_(),this.isGreyBlock||(this.size_.height=42,this.size_.width=50)}getDisplayText_(){var e=pxt.Util.htmlUnescape(this.valueText);return e.substr(0,e.indexOf("("))+"(...)"}updateEditable(){var e;this.isGreyBlock&&this.fieldGroup_?(e=this.fieldGroup_,Blockly.utils.dom.removeClass(e,"blocklyNonEditableText"),Blockly.utils.dom.removeClass(e,"blocklyEditableText"),e.style.cursor=""):super.updateEditable()}getValue(){return this.isGreyBlock?pxt.Util.htmlUnescape(this.valueText):this.getValueText()}onDispose(){var e;null!=(e=this.sourceBlock_)&&e.workspace&&!this.sourceBlock_.workspace.rendered&&this.disposeOfTemporaryAsset(),pxt.react.getTilemapProject().removeChangeListener(this.getAssetType(),this.assetChangeListener)}disposeOfTemporaryAsset(){this.isTemporaryAsset()&&(pxt.react.getTilemapProject().removeAsset(this.asset),this.setBlockData(null),this.asset=void 0)}clearTemporaryAssetData(){this.isTemporaryAsset()&&this.setBlockData(null)}isTemporaryAsset(){return a(this.asset)}getAsset(){return this.asset}updateAsset(e){this.asset=e,this.setValue(this.getValue())}onEditorClose(e){}redrawPreview(){if(this.fieldGroup_)if(pxsim.U.clear(this.fieldGroup_),this.isGreyBlock)this.createTextElement_(),this.render_(),this.updateEditable();else{var t=(new o.Rect).at(5,1).size(40,40).setClass("blocklySpriteField").stroke("#898989",1).corner(4);if(this.fieldGroup_.appendChild(t.el),this.asset){let e;switch(this.asset.type){case"image":case"tile":e=n.bitmapToImageURI(pxt.sprite.Bitmap.fromData(this.asset.bitmap),32,this.lightMode);break;case"animation":e=n.bitmapToImageURI(pxt.sprite.Bitmap.fromData(this.asset.frames[0]),32,this.lightMode);break;case"tilemap":e=n.tilemapToImageURI(this.asset.data,32,this.lightMode)}t=(new o.Image).src(e).at(9,5).size(32,32);this.fieldGroup_.appendChild(t.el)}}}parseValueText(e){var t,n;e=pxt.Util.htmlUnescape(e),this.sourceBlock_&&!this.sourceBlock_.isInFlyout&&(t=pxt.react.getTilemapProject(),n=this.getBlockData(),!(n=t.lookupAsset(this.getAssetType(),n))||e&&this.isEmpty?(this.setBlockData(null),this.asset&&this.sourceBlock_&&this.asset.meta.blockIDs&&(this.asset.meta.blockIDs=this.asset.meta.blockIDs.filter(e=>e!==this.sourceBlock_.id),this.isTemporaryAsset()||t.updateAsset(this.asset)),this.isEmpty=!e,this.asset=this.createNewAsset(e)):this.asset=n,this.updateAssetMeta(),this.updateAssetListener())}parseFieldOptions(e){var t={initWidth:16,initHeight:16,disableResize:!1,lightMode:!1};return e&&(e.disableResize&&(t.disableResize="true"===e.disableResize.toLowerCase()||"1"===e.disableResize),t.initWidth=n(e.initWidth,t.initWidth),t.initHeight=n(e.initHeight,t.initHeight),t.lightMode=e.lightMode),t;function n(e,t){e=parseInt(e);return isNaN(e)?t:e}}updateAssetMeta(){var e;this.asset&&(this.asset.meta||(this.asset.meta={}),this.asset.meta.blockIDs||(this.asset.meta.blockIDs=[]),this.sourceBlock_&&(-1===this.asset.meta.blockIDs.indexOf(this.sourceBlock_.id)&&((e=this.asset.meta.blockIDs).length&&this.isTemporaryAsset()&&e.some(e=>this.sourceBlock_.workspace.getBlockById(e))&&(this.asset=pxt.cloneAsset(this.asset),this.asset.meta.blockIDs=[]),this.asset.meta.blockIDs.push(this.sourceBlock_.id)),this.setBlockData(this.asset.id)),this.isTemporaryAsset()?this.asset.meta.temporaryInfo={blockId:this.sourceBlock_.id,fieldName:this.name}:pxt.react.getTilemapProject().updateAsset(this.asset))}updateAssetListener(){pxt.react.getTilemapProject().removeChangeListener(this.getAssetType(),this.assetChangeListener),this.asset&&!this.isTemporaryAsset()&&pxt.react.getTilemapProject().addChangeListener(this.asset,this.assetChangeListener)}}function a(e){return e&&!e.meta.displayName}n.FieldAssetEditor=e;class l extends Blockly.Events.BlockChange{constructor(e,t,n,o,r,i,s){super(e,t,n,o,r),this.oldRevision=i,this.newRevision=s,this.fieldName=n}isNull(){return this.oldRevision===this.newRevision&&super.isNull()}run(e){if(this.newAssetId||this.oldAssetId){const t=this.getEventWorkspace_().getBlockById(this.blockId);e?pxt.blocks.setBlockDataForField(t,this.fieldName,this.newAssetId):pxt.blocks.setBlockDataForField(t,this.fieldName,this.oldAssetId)}e?pxt.react.getTilemapProject().redo():pxt.react.getTilemapProject().undo(),super.run(e);const t=this.getEventWorkspace_(),n=new l(t.getBlockById(this.blockId),"tilemap-revision","revision",null,pxt.react.getTilemapProject().revision(),0,0);n.recordUndo=!1,Blockly.Events.fire(n)}}n.BlocklyTilemapChange=l}(pxtblockly=pxtblockly||{}),function(t){var n=pxt.svgUtil;class e extends t.FieldAssetEditor{constructor(){super(...arguments),this.onMouseEnter=()=>{if(!this.animateRef&&this.asset){var t=this.getParentInterval()||this.asset.interval;let e=0;this.animateRef=setInterval(()=>{this.preview&&this.frames[e]&&this.preview.src(this.frames[e]),e=(e+1)%this.frames.length},50<t?t:50)}},this.onMouseLeave=()=>{this.animateRef&&clearInterval(this.animateRef),this.animateRef=void 0,this.preview&&this.frames[0]&&this.preview.src(this.frames[0])}}init(){this.fieldGroup_||(super.init(),this.sourceBlock_.getSvgRoot().addEventListener("mouseenter",this.onMouseEnter),this.sourceBlock_.getSvgRoot().addEventListener("mouseleave",this.onMouseLeave))}showEditor_(){this.asset&&(this.asset.interval=this.getParentInterval()||this.asset.interval),super.showEditor_()}render_(){super.render_(),this.size_.height=42,this.size_.width=80}getAssetType(){return"animation"}createNewAsset(e){var t=pxt.react.getTilemapProject();if(e){var n=pxt.lookupProjectAssetByTSReference(e,t);if(n)return n;n=-1===(n=e).indexOf("[")?null:(n=n.replace(/[\[\]]/gm,"")).split(",").map(e=>pxt.sprite.imageLiteralToBitmap(e).data()).filter(e=>e.height&&e.width);if(n&&n.length)return{internalID:-1,id:this.sourceBlock_.id,type:"animation",frames:n,interval:this.getParentInterval(),meta:{}};n=t.lookupAssetByName("animation",e.trim());if(n)return n}return{internalID:-1,id:this.sourceBlock_.id,type:"animation",frames:[new pxt.sprite.Bitmap(this.params.initWidth,this.params.initHeight).data()],interval:500,meta:{}}}onEditorClose(e){this.setParentInterval(e.interval)}getValueText(){return this.asset?this.isTemporaryAsset()?"["+this.asset.frames.map(e=>pxt.sprite.bitmapToImageLiteral(pxt.sprite.Bitmap.fromData(e),"typescript")).join(",")+"]":pxt.getTSReferenceForAsset(this.asset):"[]"}redrawPreview(){var e;this.fieldGroup_&&(pxsim.U.clear(this.fieldGroup_),e=(new n.Rect).at(35,1).size(40,40).corner(4).setClass("blocklyAnimationField"),this.fieldGroup_.appendChild(e.el),e=new n.Text("").at(5,26).fill(this.sourceBlock_.getColourSecondary()).setClass("semanticIcon"),this.fieldGroup_.appendChild(e.el),this.asset)&&(this.frames=this.asset.frames.map(e=>t.bitmapToImageURI(pxt.sprite.Bitmap.fromData(e),32,this.lightMode)),this.preview=(new n.Image).src(this.frames[0]).at(39,5).size(32,32),this.fieldGroup_.appendChild(this.preview.el))}getParentIntervalBlock(){const e=this.sourceBlock_;if(e.parentBlock_){var t=e.parentBlock_;for(const e of t.inputList)if("frameInterval"===e.name)return e.connection.targetBlock()}}setParentInterval(e){var t,n=this.getParentIntervalBlock();n&&(t=o(n))&&n.setFieldValue(String(e),t)}getParentInterval(){var e=this.getParentIntervalBlock();if(e){var t=o(e);if(t)return Number(e.getFieldValue(t))}return 100}parseFieldOptions(e){return n={initWidth:16,initHeight:16,disableResize:!1,lightMode:!1},(e=e)&&(n.lightMode=e.lightMode,e.filter&&(n.filter=e.filter),n.initWidth=t(e.initWidth,n.initWidth),n.initHeight=t(e.initHeight,n.initHeight)),n;function t(e,t){e=parseInt(e);return isNaN(e)?t:e}var n}}function o(e){return"math_number_minmax"===e.type?"SLIDER":"math_number"===(t=e.type)||"math_integer"===t||"math_whole_number"===t?"NUM":"timePicker"===e.type?"ms":null;var t}t.FieldAnimationEditor=e}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldVariable{constructor(e){super(e),this.menuGenerator_=this.dropdownCreate}dropdownCreate(){return Blockly.FieldVariable.dropdownCreate.call(this).filter(e=>e[1]!=Blockly.DELETE_VARIABLE_ID)}}e.FieldArgumentVariable=t}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldNumber{constructor(e,t,n){super(e,void 0,void 0,void 0,n),this.isFieldCustom_=!0,this.CURSOR="pointer",this.params=t,this.setValue(e),this.addArgType("toggle"),this.type_=t.type}init(){var e,t;this.fieldGroup_||(this.fieldGroup_=Blockly.utils.dom.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),null!==this.getArgTypes()&&(this.sourceBlock_.isShadow()?this.sourceBlock_.svgGroup_:this.fieldGroup_).setAttribute("data-argument-type",this.getArgTypes()),e=this.getSize(),this.checkElement_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyToggle "+(this.state_?"blocklyToggleOnBreakpoint":"blocklyToggleOffBreakpoint"),transform:`translate(8, ${e.height/2})`},this.fieldGroup_),this.toggleThumb_=Blockly.utils.dom.createSvgElement("polygon",{class:"blocklyToggleRect",points:"50,5 100,5 125,30 125,80 100,105 50,105 25,80 25,30"},this.checkElement_),t=this.sourceBlock_.RTL?-e.width/2:e.width/2,this.textElement_=Blockly.utils.dom.createSvgElement("text",{class:"blocklyText",x:t,dy:"0.6ex",y:e.height/2},this.fieldGroup_),this.updateEditable(),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.switchToggle(this.state_),this.setValue(this.getValue()),this.render_(),this.size_.width=0,this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_))}updateSize_(){this.size_.width=30}getValue(){return this.toVal(this.state_)}setValue(e){e=this.fromVal(e);this.state_!==e&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.state_,e)),this.state_=e,this.switchToggle(this.state_))}switchToggle(e){this.checkElement_&&(this.updateSize_(),e?(pxt.BrowserUtils.addClass(this.checkElement_,"blocklyToggleOnBreakpoint"),pxt.BrowserUtils.removeClass(this.checkElement_,"blocklyToggleOffBreakpoint")):(pxt.BrowserUtils.removeClass(this.checkElement_,"blocklyToggleOnBreakpoint"),pxt.BrowserUtils.addClass(this.checkElement_,"blocklyToggleOffBreakpoint")),this.checkElement_.setAttribute("transform","translate(-7, -1) scale(0.3)"))}updateDisplay_(e){super.updateDisplay_(e),this.textElement_&&pxt.BrowserUtils.addClass(this.textElement_,"blocklyToggleText")}render_(){this.visible_&&this.textElement_&&(goog.dom.removeChildren(this.textElement_),this.updateSize_())}showEditor_(){var e=!this.state_;null!==e&&this.setValue(this.toVal(e))}toVal(e){return"number"==this.type_?String(e?"1":"0"):String(e?"true":"false")}fromVal(e){return"string"==typeof e?"1"==e||"TRUE"==e.toUpperCase():!!e}}e.FieldBreakpoint=t}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldSlider{constructor(e,t,n){super(String(e),"0","255","1","10","Color",n),this.isFieldCustom_=!0,this.params=t,this.params.min&&(this.min_=parseFloat(this.params.min)),this.params.max&&(this.max_=parseFloat(this.params.max)),this.params.label&&(this.labelText_=this.params.label),this.params.channel&&(this.channel_=this.params.channel)}setBackground_(e){var t=this.createColourStops_().join(",");goog.style.setStyle(e,"background","-moz-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-webkit-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-o-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-ms-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","linear-gradient(left, "+t+")"),this.params.sliderWidth&&goog.style.setStyle(e,"width",this.params.sliderWidth+"px")}setReadout_(e,t){var t=this.colorWheel(parseInt(t),this.channel_),n=document.createElement("span");n.className="blocklyColorReadout",n.style.backgroundColor=""+t,pxsim.U.clear(e),e.appendChild(n)}createColourStops_(){var t=[];for(let e=0;e<=255;e+=20)t.push(this.colorWheel(e,this.channel_));return t}colorWheel(e,t){return"hsvfast"==t?this.hsvFast(e,255,255):(e=255-e)<85?this.hex(3*e,255,255-3*e):e<170?this.hex(255,255-3*(e-=85),3*e):this.hex(255-3*(e-=170),3*e,255)}hsvFast(e,t,n){let o=e%255>>0;o<0&&(o+=255);let r,i,s,a=n*(255-t)/255>>0,l=n-a,c=(o=192*o/255>>0)/64>>0,u=o%64>>0,d=(u*l/63.75>>0)+a,p=((63-u)*l/63.75>>0)+a;return s=c?1==c?(r=a,i=p,d):(r=d,i=a,p):(r=p,i=d,a),this.hex(r,i,s)}hex(e,t,n){return"#"+this.componentToHex(255&e)+this.componentToHex(255&t)+this.componentToHex(255&n)}componentToHex(e){e=e.toString(16);return 1==e.length?"0"+e:e}}e.FieldColorWheel=t}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldColour{constructor(e,t,n){if(super(e,n),this.isFieldCustom_=!0,this.valueMode_="rgb",t.colours)this.setColours(JSON.parse(t.colours));else if(pxt.appTarget.runtime&&pxt.appTarget.runtime.palette){let e,t=pxt.Util.clone(pxt.appTarget.runtime.palette);t[0]="#dedede",pxt.appTarget.runtime.paletteNames&&((e=pxt.Util.clone(pxt.appTarget.runtime.paletteNames))[0]=lf("transparent")),this.setColours(t,e)}this.setValue(this.getColours_()[0]),t.columns&&this.setColumns(parseInt(t.columns)),t.className&&(this.className_=t.className),t.valueMode&&(this.valueMode_=t.valueMode)}applyColour(){var e;this.borderRect_?this.borderRect_.style.fill=this.value_:this.sourceBlock_&&(null!=(e=null==(e=null==(e=this.sourceBlock_)?void 0:e.pathObject)?void 0:e.svgPath)&&e.setAttribute("fill",this.value_),null!=(e=null==(e=null==(e=this.sourceBlock_)?void 0:e.pathObject)?void 0:e.svgPath))&&e.setAttribute("stroke","#fff")}doClassValidation_(e){return"string"!=typeof e?null:n(e,this.getColours_())}getValue(t){if(!t)switch(this.valueMode_){case"hex":return`"${this.value_}"`;case"rgb":return-1<this.value_.indexOf("#")?"0x"+this.value_.replace(/^#/,""):this.value_;case"index":if(!this.value_)return"-1";const t=this.getColours_();for(let e=0;e<t.length;e++)if(this.value_.toUpperCase()===t[e].toUpperCase())return e+""}return this.value_}doValueUpdate_(e){this.value_=n(e,this.getColours_()),this.applyColour()}showEditor_(){super.showEditor_(),this.className_&&this.picker_&&pxt.BrowserUtils.addClass(this.picker_,this.className_)}getColours_(){return this.colours_}}function n(n,e){if(n){var t=/Colors\.([a-zA-Z]+)/.exec(n),o=/(0x|#)([0-9a-fA-F]+)/.exec(n);if(t)switch(t[1].toLocaleLowerCase()){case"red":return"#FF0000";case"orange":return"#FF7F00";case"yellow":return"#FFFF00";case"green":return"#00FF00";case"blue":return"#0000FF";case"indigo":return"#4B0082";case"violet":return"#8A2BE2";case"purple":return"#A033E5";case"pink":return"#FF007F";case"white":return"#FFFFFF";case"black":return"#000000";default:return n}else if(o){const n=o[2];if(3===n.length){let t="#";for(let e=0;e<n.length;e++){var r=n.charAt(e);t+=r+r}return t}if(6===n.length)return"#"+n}if(e)return t=parseInt(n),isNaN(t)||null==e[t]?e[0]:e[t]}return n}e.FieldColorNumber=t}(pxtblockly=pxtblockly||{}),function(r){class d extends Blockly.FieldDropdown{constructor(e,t,n){super(t.data),this.isFieldCustom_=!0,this.buttonClick_=function(e){e=e.target.getAttribute("data-value");null!==e&&(this.setValue(e),this.closeModal_)&&(this.close(),this.closeModal_=!1)},this.buttonClickAndClose_=function(e){this.closeModal_=!0,this.buttonClick_(e)},this.columns_=parseInt(t.columns)||4,this.maxRows_=parseInt(t.maxRows)||0,this.width_=parseInt(t.width)||200,this.backgroundColour_=r.parseColour(t.colour),this.borderColour_=pxt.toolbox.fadeColor(this.backgroundColour_,.4,!1);var o={xOffset:parseInt(t.tooltipsXOffset)||15,yOffset:parseInt(t.tooltipsYOffset)||-10};this.tooltipConfig_=o,this.hasSearchBar_=!!t.hasSearchBar||!1,this.hideRect_=!!t.hideRect||!1}dispose(){super.dispose(),this.disposeTooltip(),this.disposeIntersectionObserver()}createTooltip_(){this.gridTooltip_||(this.gridTooltip_=document.createElement("div"),this.gridTooltip_.className="goog-tooltip blocklyGridPickerTooltip",this.gridTooltip_.style.position="absolute",this.gridTooltip_.style.display="none",this.gridTooltip_.style.visibility="hidden",document.body.appendChild(this.gridTooltip_))}populateTableContainer(t,n,e){pxsim.U.removeChildren(n),0==t.length&&(this.firstItem_=void 0);for(let e=0;e<t.length/this.columns_;e++){var o=this.populateRow(e,t,n);n.appendChild(o)}}populateRow(o,r,i){const s=this.columns_,a=document.createElement("div");a.className="blocklyGridPickerRow";for(let n=s*o;n<Math.min(s*o+s,r.length);n++){let e=r[n][0];const s=r[n][1],c=document.createElement("div");c.className="goog-menuitem goog-option",c.setAttribute("id",":"+n),c.setAttribute("role","menuitem"),c.style.userSelect="none",c.title=e.alt||e,c.setAttribute("data-value",s);var l=document.createElement("div");l.setAttribute("class","goog-menuitem-content"),l.title=e.alt||e,l.setAttribute("data-value",s);const u="object"==typeof e;let t=this.backgroundColour_;if(s==this.getValue()&&(c.setAttribute("aria-selected","true"),pxt.BrowserUtils.addClass(c,"goog-option-selected"),t=this.sourceBlock_.getColourTertiary(),this.selectedItemDom=c,u)&&!this.shouldShowTooltips()&&this.updateSelectedBar_(e,s),c.style.backgroundColor=t,c.style.borderColor=this.borderColour_,u){const r=new Image(e.width,e.height);r.setAttribute("draggable","false"),"IntersectionObserver"in window?(r.src=d.DEFAULT_IMG,r.setAttribute("data-src",e.src),this.observer.observe(r)):r.src=e.src,r.alt=e.alt||"",r.setAttribute("data-value",s),l.appendChild(r)}else l.textContent=e;if(this.shouldShowTooltips()){Blockly.bindEvent_(c,"click",this,this.buttonClickAndClose_);const o=this.sourceBlock_.RTL?-this.tooltipConfig_.xOffset:this.tooltipConfig_.xOffset,d=this.tooltipConfig_.yOffset;Blockly.bindEvent_(c,"mousemove",this,e=>{if(u){this.gridTooltip_.style.top=e.clientY+d+"px",this.gridTooltip_.style.left=e.clientX+o+"px";const i=document.elementFromPoint(e.clientX,e.clientY),t=i.title||i.alt;this.gridTooltip_.textContent=t,this.gridTooltip_.style.visibility=t?"visible":"hidden",this.gridTooltip_.style.display=t?"":"none"}pxt.BrowserUtils.addClass(c,"goog-menuitem-highlight"),i.setAttribute("aria-activedescendant",c.id)}),Blockly.bindEvent_(c,"mouseout",this,e=>{u&&(this.gridTooltip_.style.visibility="hidden",this.gridTooltip_.style.display="none"),pxt.BrowserUtils.removeClass(c,"goog-menuitem-highlight"),i.removeAttribute("aria-activedescendant")})}else u?(this.selectedBar_.style.display="",Blockly.bindEvent_(c,"click",this,t=>{if(this.closeModal_)this.buttonClick_(t);else{const t=i.getElementsByClassName("goog-menuitem-highlight");for(let e=0;e<t.length;e++)pxt.BrowserUtils.removeClass(t[e],"goog-menuitem-highlight");pxt.BrowserUtils.addClass(c,"goog-menuitem-highlight"),this.updateSelectedBar_(e,s)}})):(Blockly.bindEvent_(c,"click",this,this.buttonClickAndClose_),Blockly.bindEvent_(c,"mouseup",this,this.buttonClickAndClose_));c.appendChild(l),a.appendChild(c),0==n&&(this.firstItem_=c)}return a}shouldShowRect_(){return!this.hideRect_&&!this.sourceBlock_.isShadow()}doClassValidation_(e){return e}close(){this.disposeTooltip(),Blockly.WidgetDiv.hideIfOwner(this),Blockly.Events.setGroup(!1)}getFirstItem(){return this.firstItem_}highlightFirstItem(e){var n=e.childNodes;if(n.length&&n[0].childNodes){for(let t=0;t<n.length;++t){var o=n[t].childNodes.length;for(let e=0;e<o;++e){var r=n[t].childNodes[e];pxt.BrowserUtils.removeClass(r,"goog-menuitem-highlight"),pxt.BrowserUtils.removeClass(r,"goog-option-selected")}}n[0].childNodes[0].className+=" goog-menuitem-highlight"}}highlightAndScrollSelected(e,t){this.selectedItemDom&&goog.style.scrollIntoContainerView(this.selectedItemDom,t,!0)}showEditor_(){Blockly.WidgetDiv.show(this,this.sourceBlock_.RTL,()=>{this.onClose_()}),this.setupIntersectionObserver_(),this.createTooltip_();var e=document.createElement("div");this.positionMenu_(e)}positionMenu_(t){var e=Blockly.utils.getViewportBBox(),n=this.getAnchorDimensions_(),{paddingContainer:o,scrollContainer:r}=this.createWidget_(t),o={width:o.offsetWidth,height:o.offsetHeight},i=goog.dom.getViewportSize();this.width_>i.width&&(this.width_=i.width),t.style.width=this.width_+"px";let s=0;if(this.hasSearchBar_&&(s+=50),this.selectedBar_&&(s+=50),this.maxRows_){let e=t.children[0].offsetHeight*(this.maxRows_+.3);i.height<e+s&&(e=i.height-s),o.height>e&&(r.style.overflowY="auto",goog.style.setHeight(r,e),o.height=e)}o.height+=s,this.sourceBlock_.RTL&&Blockly.utils.uiMenu.adjustBBoxesForRTL(e,n,o),Blockly.WidgetDiv.positionWithAnchor(e,n,o,this.sourceBlock_.RTL),this.highlightAndScrollSelected(t,r)}shouldShowTooltips(){return!pxt.BrowserUtils.isMobile()}getAnchorDimensions_(){var e=this.getScaledBBox();return this.sourceBlock_.RTL?e.right+=Blockly.FieldDropdown.CHECKMARK_OVERHANG:e.left-=Blockly.FieldDropdown.CHECKMARK_OVERHANG,e}createWidget_(e){const t=Blockly.WidgetDiv.DIV,n=this.getOptions();e.setAttribute("role","menu"),e.setAttribute("aria-haspopup","true");var o=document.createElement("div"),r=document.createElement("div");if(r.style.border="solid 1px "+this.borderColour_,e.style.backgroundColor=this.backgroundColour_,o.style.backgroundColor=this.backgroundColour_,r.style.backgroundColor=this.backgroundColour_,e.className="blocklyGridPickerMenu",o.className="blocklyGridPickerScroller",r.className="blocklyGridPickerPadder",r.appendChild(o),o.appendChild(e),t.appendChild(r),this.hasSearchBar_){const t=this.createSearchBar_(e,o,n);r.insertBefore(t,r.childNodes[0])}return this.shouldShowTooltips()||(this.selectedBar_=this.createSelectedBar_(),r.appendChild(this.selectedBar_)),this.populateTableContainer(n,e,o),{paddingContainer:r,scrollContainer:o}}createSearchBar_(o,r,i){var e=document.createElement("div"),t=(e.setAttribute("class","ui fluid icon input"),document.createElement("i"));t.setAttribute("class","search icon");const s=document.createElement("input");return s.setAttribute("type","search"),s.setAttribute("id","search-bar"),s.setAttribute("class","blocklyGridPickerSearchBar"),s.setAttribute("placeholder",pxt.Util.lf("Search")),s.addEventListener("click",()=>{s.focus(),s.setSelectionRange(0,s.value.length)}),s.addEventListener("keyup",pxt.Util.debounce(()=>{let e=s.value,n=new RegExp(e,"i"),t=i.filter(e=>{var t=e[0].alt,e=e[1];return t?n.test(t):n.test(e)});this.populateTableContainer.bind(this)(t,o,r),e?this.highlightFirstItem(o):this.highlightAndScrollSelected(o,r),this.gridTooltip_.style.visibility="hidden",this.gridTooltip_.style.display="none"},300,!1)),s.addEventListener("keyup",e=>{if(13==e.which){const e=o.childNodes[0];if(e){const o=e.childNodes[0];o&&(this.closeModal_=!0,o.click())}}}),e.appendChild(s),e.appendChild(t),e}createSelectedBar_(){var e=document.createElement("div"),t=(e.setAttribute("class","blocklyGridPickerSelectedBar"),e.style.display="none",document.createElement("div")),n=document.createElement("div"),n=(n.className="blocklyGridPickerSelectedImage",t.appendChild(n),this.selectedImg_=document.createElement("img"),this.selectedImg_.setAttribute("width","30px"),this.selectedImg_.setAttribute("height","30px"),this.selectedImg_.setAttribute("draggable","false"),this.selectedImg_.style.display="none",this.selectedImg_.src=d.DEFAULT_IMG,n.appendChild(this.selectedImg_),this.selectedBarText_=document.createElement("span"),this.selectedBarText_.className="blocklyGridPickerTooltip",t.appendChild(this.selectedBarText_),document.createElement("div")),o=document.createElement("div"),r=(o.className="ui buttons mini",n.appendChild(o),document.createElement("button")),i=(r.className="ui button icon green",document.createElement("i")),i=(i.className="icon check",r.appendChild(i),Blockly.bindEvent_(r,"click",this,()=>{this.setValue(this.selectedBarValue_),this.close()}),document.createElement("button")),s=(i.className="ui button icon red",document.createElement("i"));return s.className="icon cancel",i.appendChild(s),Blockly.bindEvent_(i,"click",this,()=>{this.close()}),o.appendChild(r),o.appendChild(i),e.appendChild(t),e.appendChild(n),e}updateSelectedBar_(e,t){e.src&&(this.selectedImg_.src=e.src,this.selectedImg_.style.display=""),this.selectedImg_.alt=e.alt||e,this.selectedBarText_.textContent=e.alt||e,this.selectedBarValue_=t}setupIntersectionObserver_(){"IntersectionObserver"in window&&(this.disposeIntersectionObserver(),this.observer=new IntersectionObserver(e=>{e.forEach(e=>{var t;0<e.intersectionRatio&&(this.observer.unobserve(e.target),e=e.target,t=e.getAttribute("data-src"))&&(e.src=t,e.removeAttribute("data-src"))})},{rootMargin:"20px 0px",threshold:.01}))}disposeIntersectionObserver(){this.observer&&(this.observer=null)}disposeTooltip(){this.gridTooltip_&&(pxsim.U.remove(this.gridTooltip_),this.gridTooltip_=null)}onClose_(){this.disposeTooltip()}}d.DEFAULT_IMG="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",r.FieldGridPicker=d}(pxtblockly=pxtblockly||{}),function(o){class e extends Blockly.FieldDropdown{constructor(e,t,n){super(t.data),this.isFieldCustom_=!0,this.buttonClick_=function(e){e=e.target.getAttribute("data-value");e&&(this.setValue(e),Blockly.DropDownDiv.hide())},this.columns_=parseInt(t.columns),this.maxRows_=parseInt(t.maxRows)||0,this.width_=parseInt(t.width)||300,this.backgroundColour_=o.parseColour(t.colour),this.borderColour_=pxt.toolbox.fadeColor(this.backgroundColour_,.4,!1)}showEditor_(){if(!Blockly.DropDownDiv.hideIfOwner(this)){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();let e=Blockly.DropDownDiv.getContentDiv(),o=document.createElement("div");o.setAttribute("role","menu"),o.setAttribute("aria-haspopup","true");var t=this.getOptions();let r=0;for(let n=0;n<t.length;n++){var i=t[n][0],s=t[n][1];if("placeholder"==i.type){var a=document.createElement("span");a.setAttribute("class","blocklyDropDownPlaceholder"),a.style.width=i.width+"px",a.style.height=i.height+"px",o.appendChild(a)}else{a=document.createElement("button");a.setAttribute("id",":"+n),a.setAttribute("role","menuitem"),a.setAttribute("class","blocklyDropDownButton"),a.title=i.alt;let e=i.height,t=(this.columns_?(e=this.width_/this.columns_-8,a.style.width=e+"px",a.style.height=e+"px"):(a.style.width=i.width+"px",a.style.height=i.height+"px"),e>r&&(r=e),this.backgroundColour_);s==this.getValue()&&(t=this.sourceBlock_.getColourTertiary(),a.setAttribute("aria-selected","true")),a.style.backgroundColor=t,a.style.borderColor=this.borderColour_,Blockly.bindEvent_(a,"click",this,this.buttonClick_),Blockly.bindEvent_(a,"mouseover",a,function(){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),o.setAttribute("aria-activedescendant",this.id)}),Blockly.bindEvent_(a,"mouseout",a,function(){this.setAttribute("class","blocklyDropDownButton"),o.removeAttribute("aria-activedescendant")});var l=document.createElement("img");l.src=i.src,a.setAttribute("data-value",s),l.setAttribute("data-value",s),a.appendChild(l),o.appendChild(a)}}o.style.width=this.width_+"px",e.appendChild(o),this.maxRows_&&(e.style.maxHeight=(this.maxRows_+.4)*(r+8)+"px"),pxt.BrowserUtils.isFirefox()&&(e.style.paddingRight="20px"),Blockly.DropDownDiv.setColour(this.backgroundColour_,this.borderColour_),Blockly.DropDownDiv.showPositionedByField(this,this.onHide_.bind(this));var n=this.sourceBlock_;this.savedPrimary_=null==n?void 0:n.getColour(),null!=n&&n.isShadow()?n.setColour(n.getColourTertiary()):this.borderRect_&&this.borderRect_.setAttribute("fill",n.getColourTertiary())}}onHide_(){var e=Blockly.DropDownDiv.getContentDiv(),e=(e.removeAttribute("role"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-activedescendant"),e.style.width="",e.style.paddingRight="",e.style.maxHeight="",this.sourceBlock_);null!=e&&e.isShadow()?this.sourceBlock_.setColour(this.savedPrimary_):this.borderRect_&&this.borderRect_.setAttribute("fill",this.savedPrimary_)}}o.FieldImageDropdown=e}(pxtblockly=pxtblockly||{}),function(e){class t extends e.FieldImageDropdown{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0,this.shouldSort_=t.sort,this.addLabel_=!!t.addLabel}showEditor_(){if(!Blockly.DropDownDiv.hideIfOwner(this)){let n=this.sourceBlock_,e=(Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent(),Blockly.DropDownDiv.getContentDiv()),o=document.createElement("div");o.setAttribute("role","menu"),o.setAttribute("aria-haspopup","true");var r=this.getOptions();this.shouldSort_&&r.sort();for(let t=0;t<r.length;t++){var i=r[t][0],s=r[t][1];if("placeholder"==i.type){var a=document.createElement("span");a.setAttribute("class","blocklyDropDownPlaceholder"),a.style.width=i.width+"px",a.style.height=i.height+"px",o.appendChild(a)}else{a=document.createElement("button");a.setAttribute("id",":"+t),a.setAttribute("role","menuitem"),a.setAttribute("class","blocklyDropDownButton"),a.title=i.alt,this.columns_?a.style.width=this.width_/this.columns_-8+"px":(a.style.width=i.width+"px",a.style.height=i.height+"px");let e=n.getColour();s==this.getValue()&&(e=n.getColourTertiary(),a.setAttribute("aria-selected","true")),a.style.backgroundColor=e,a.style.borderColor=n.getColourTertiary(),Blockly.bindEvent_(a,"click",this,this.buttonClick_),Blockly.bindEvent_(a,"mouseover",a,function(){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),o.setAttribute("aria-activedescendant",this.id)}),Blockly.bindEvent_(a,"mouseout",a,function(){this.setAttribute("class","blocklyDropDownButton"),o.removeAttribute("aria-activedescendant")});var l=document.createElement("img");if(l.src=i.src,a.setAttribute("data-value",s),l.setAttribute("data-value",s),a.appendChild(l),this.addLabel_){const e=this.createTextNode_(i.alt);e.setAttribute("data-value",s),a.appendChild(e)}o.appendChild(a)}}o.style.width=this.width_+"px",e.appendChild(o),Blockly.DropDownDiv.setColour(n.getColour(),n.getColourTertiary()),Blockly.DropDownDiv.showPositionedByField(this,this.onHideCallback.bind(this)),this.savedPrimary_=null==n?void 0:n.getColour(),null!=n&&n.isShadow()?n.setColour(n.style.colourTertiary):this.borderRect_&&this.borderRect_.setAttribute("fill",n.style.colourTertiary)}}onHideCallback(){var e=this.sourceBlock_;null!=e&&e.isShadow()?e.setColour(this.savedPrimary_):this.borderRect_&&this.borderRect_.setAttribute("fill",this.savedPrimary_)}createTextNode_(e){var t=document.createElement("span");return t.setAttribute("class","blocklyDropdownTextLabel"),t.textContent=e,t}}e.FieldImages=t}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldDropdown{constructor(e){var n;super((n=e,function(){const t=[];return this.sourceBlock_&&this.sourceBlock_.workspace?this.sourceBlock_.workspace.getVariablesOfType(o(n.name)).forEach(e=>{t.push([e.name,e.name])}):n.initialMembers.forEach(e=>t.push([e,e])),t.push([lf("Add a new {0}...",n.memberName),"CREATE"]),t})),this.opts=e}initView(){super.initView(),this.initVariables()}onItemSelected_(e,t){"CREATE"===t.getValue()?function r(i,s,a,l){Blockly.prompt(a,null,n=>{if(n){let t=!1;if(pxtc.isIdentifierStart(n.charCodeAt(0),2)){t=!0;for(let e=1;e<n.length;e++)pxtc.isIdentifierPart(n.charCodeAt(e),2)||(t=!1)}if(t)if(pxt.blocks.isReservedWord(n))Blockly.alert(lf("'{0}' is a reserved word and cannot be used.",n),()=>r(i,s,a,l));else{const o=c(i,s.name);for(let e=0;e<o.length;e++)if(o[e]===n)return void Blockly.alert(lf("A {0} named '{1}' already exists.",s.memberName,n),()=>r(i,s,a,l));n===s.createFunctionName&&Blockly.alert(lf("'{0}' is a reserved name.",s.createFunctionName),()=>r(i,s,a,l)),l(u(i,s,n))}else Blockly.alert(lf("Names must start with a letter and can only contain letters, numbers, '$', and '_'."),()=>r(i,s,a,l))}},{placeholder:s.promptHint})}(this.sourceBlock_.workspace,this.opts,lf("New {0}:",this.opts.memberName),e=>e&&this.setValue(e)):super.onItemSelected_(e,t)}doClassValidation_(t){var e;return null!=(e=this.opts)&&e.initialMembers&&!this.opts.initialMembers.find(e=>e==t)&&this.getOptions(),super.doClassValidation_(t)}initVariables(){if(this.sourceBlock_&&this.sourceBlock_.workspace){const t=this.sourceBlock_.workspace,n=c(t,this.opts.name);this.opts.initialMembers.forEach(e=>{-1===n.indexOf(e)&&u(t,this.opts,e)}),"CREATE"===this.getValue()&&this.opts.initialMembers.length&&this.setValue(this.opts.initialMembers[0])}}}function c(e,t){e=e.getVariablesOfType(o(t));return e&&e.length?e.map(e=>e.name):[]}function u(e,t,n){return Blockly.Variables.getOrCreateVariablePackage(e,null,n,o(t.name)),n}function o(e){return"KIND_"+e}e.FieldKind=t}(pxtblockly=pxtblockly||{});const rowRegex=/^.*[\.#].*$/;!function(e){e[e.None=0]="None",e[e.Number=1]="Number",e[e.Letter=2]="Letter"}(LabelMode=LabelMode||{}),function(e){class s extends Blockly.Field{constructor(e,t,n){super(e,n),this.isFieldCustom_=!0,this.SERIALIZABLE=!0,this.onColor="#FFFFFF",this.scale=1,this.matrixWidth=5,this.matrixHeight=5,this.yAxisLabel=LabelMode.None,this.xAxisLabel=LabelMode.None,this.cellState=[],this.cells=[],this.dontHandleMouseEvent_=e=>{e.stopPropagation(),e.preventDefault()},this.clearLedDragHandler=e=>{const t=this.sourceBlock_.getSvgRoot();pxsim.pointerEvents.down.forEach(e=>t.removeEventListener(e,this.dontHandleMouseEvent_)),t.removeEventListener(pxsim.pointerEvents.move,this.dontHandleMouseEvent_),document.removeEventListener(pxsim.pointerEvents.up,this.clearLedDragHandler),document.removeEventListener(pxsim.pointerEvents.leave,this.clearLedDragHandler),Blockly.Touch.clearTouchIdentifier(),this.elt.removeEventListener(pxsim.pointerEvents.move,this.handleRootMouseMoveListener),e.stopPropagation(),e.preventDefault()},this.toggleRect=(e,t)=>{this.cellState[e][t]=this.currentDragState_,this.updateValue()},this.handleRootMouseMoveListener=e=>{let t,n;n=(e.changedTouches&&1==e.changedTouches.length?(t=e.changedTouches[0].clientX,e.changedTouches[0]):(t=e.clientX,e)).clientY;var o,e=document.elementFromPoint(t,n);e&&(o=e.getAttribute("data-x"),e=e.getAttribute("data-y"),null!=o)&&null!=e&&this.toggleRect(parseInt(o),parseInt(e))},this.params=t,void 0!==this.params.rows&&(e=parseInt(this.params.rows),isNaN(e)||(this.matrixHeight=e)),void 0!==this.params.columns&&(n=parseInt(this.params.columns),isNaN(n)||(this.matrixWidth=n)),void 0!==this.params.onColor&&(this.onColor=this.params.onColor),void 0!==this.params.offColor&&(this.offColor=this.params.offColor),void 0!==this.params.scale?this.scale=Math.max(.6,Math.min(2,Number(this.params.scale))):15<Math.max(this.matrixWidth,this.matrixHeight)?this.scale=.85:10<Math.max(this.matrixWidth,this.matrixHeight)&&(this.scale=.9)}showEditor_(){}initMatrix(){if(!this.sourceBlock_.isInsertionMarker()){this.elt=pxsim.svg.parseString('<svg xmlns="http://www.w3.org/2000/svg" id="field-matrix" />');for(let t=0;t<this.matrixWidth;t++){this.cellState.push([]),this.cells.push([]);for(let e=0;e<this.matrixHeight;e++)this.cellState[t].push(!1)}this.restoreStateFromString();for(let t=0;t<this.matrixWidth;t++)for(let e=0;e<this.matrixHeight;e++)this.createCell(t,e);if(this.updateValue(),this.xAxisLabel!==LabelMode.None){var e=this.scale*this.matrixHeight*(s.CELL_WIDTH+s.CELL_VERTICAL_MARGIN)+2*s.CELL_VERTICAL_MARGIN+s.BOTTOM_MARGIN,t=pxsim.svg.child(this.elt,"g",{transform:`translate(0 ${e})`});for(let e=0;e<this.matrixWidth;e++){var n=this.getYAxisWidth()+this.scale*e*(s.CELL_WIDTH+s.CELL_HORIZONTAL_MARGIN)+s.CELL_WIDTH/2+s.CELL_HORIZONTAL_MARGIN/2;pxsim.svg.child(t,"text",{x:n,class:"blocklyText"}).textContent=this.getLabel(e,this.xAxisLabel)}}if(this.yAxisLabel!==LabelMode.None){var o=pxsim.svg.child(this.elt,"g",{});for(let e=0;e<this.matrixHeight;e++){var r=this.scale*e*(s.CELL_WIDTH+s.CELL_VERTICAL_MARGIN)+s.CELL_WIDTH/2+2*s.CELL_VERTICAL_MARGIN;pxsim.svg.child(o,"text",{x:0,y:r,class:"blocklyText"}).textContent=this.getLabel(e,this.yAxisLabel)}}this.fieldGroup_.replaceChild(this.elt,this.fieldGroup_.firstChild)}}getLabel(e,t){return t!==LabelMode.Letter?(e+1).toString():String.fromCharCode(e+65)}createCell(n,o){const e=this.scale*n*(s.CELL_WIDTH+s.CELL_HORIZONTAL_MARGIN)+s.CELL_HORIZONTAL_MARGIN+this.getYAxisWidth(),t=this.scale*o*(s.CELL_WIDTH+s.CELL_VERTICAL_MARGIN)+s.CELL_VERTICAL_MARGIN,r=pxsim.svg.child(this.elt,"g",{transform:`translate(${e} ${t})`}),i=pxsim.svg.child(r,"rect",{class:"blocklyLed"+(this.cellState[n][o]?"On":"Off"),cursor:"pointer",width:this.scale*s.CELL_WIDTH,height:this.scale*s.CELL_WIDTH,fill:this.getColor(n,o),"data-x":n,"data-y":o,rx:Math.max(2,this.scale*s.CELL_CORNER_RADIUS)});this.cells[n][o]=i,this.sourceBlock_.workspace.isFlyout||pxsim.pointerEvents.down.forEach(e=>i.addEventListener(e,e=>{const t=this.sourceBlock_.getSvgRoot();this.currentDragState_=!this.cellState[n][o],Blockly.hideChaff(),this.sourceBlock_.select(),this.toggleRect(n,o),pxsim.pointerEvents.down.forEach(e=>t.addEventListener(e,this.dontHandleMouseEvent_)),t.addEventListener(pxsim.pointerEvents.move,this.dontHandleMouseEvent_),document.addEventListener(pxsim.pointerEvents.up,this.clearLedDragHandler),document.addEventListener(pxsim.pointerEvents.leave,this.clearLedDragHandler),this.elt.addEventListener(pxsim.pointerEvents.move,this.handleRootMouseMoveListener),e.stopPropagation(),e.preventDefault()},!1))}getColor(e,t){return this.cellState[e][t]?this.onColor:this.offColor||s.DEFAULT_OFF_COLOR}getOpacity(e,t){return this.cellState[e][t]?"1.0":"0.2"}updateCell(e,t){var n=this.cells[e][t];n.setAttribute("fill",this.getColor(e,t)),n.setAttribute("fill-opacity",this.getOpacity(e,t)),n.setAttribute("class","blocklyLed"+(this.cellState[e][t]?"On":"Off"))}setValue(e,t=!0){if(super.setValue(String(e)),this.elt){t&&this.restoreStateFromString();for(let t=0;t<this.matrixWidth;t++)for(let e=0;e<this.matrixHeight;e++)this.updateCell(t,e)}}render_(){this.visible_?(this.elt||this.initMatrix(),this.size_.height=this.scale*Number(this.matrixHeight)*(s.CELL_WIDTH+s.CELL_VERTICAL_MARGIN)+2*s.CELL_VERTICAL_MARGIN+s.BOTTOM_MARGIN+this.getXAxisHeight(),this.size_.width=this.scale*Number(this.matrixWidth)*(s.CELL_WIDTH+s.CELL_HORIZONTAL_MARGIN)+this.getYAxisWidth()):this.size_.width=0}getValue(){e=this.value_;var e,t=(t=(e=(e||"").trim()).charAt(0))===e.charAt(e.length-1)&&-1!==n.indexOf(t)?e.substr(1,e.length-2).trim():e;return`\`
${s.TAB}${t}
${s.TAB}\``}restoreStateFromString(){var o,e=this.value_;if(e){var r=e.split("\n").filter(e=>rowRegex.test(e));for(let n=0;n<r.length&&n<this.matrixHeight;n++){let t=0;var i=r[n];for(let e=0;e<i.length&&t<this.matrixWidth;e++)"."===(o=i[e])||"_"===o||"0"===o?(this.cellState[t][n]=!1,t++):"#"!==(o=i[e])&&"*"!==o&&"1"!==o||(this.cellState[t][n]=!0,t++)}}}updateValue(){let n="";for(let t=0;t<this.matrixHeight;t++){for(let e=0;e<this.matrixWidth;e++)n+=(this.cellState[e][t]?"#":".")+" ";n+="\n"+s.TAB}this.setValue(n,!1)}getYAxisWidth(){return this.yAxisLabel===LabelMode.None?0:s.Y_AXIS_WIDTH}getXAxisHeight(){return this.xAxisLabel===LabelMode.None?0:s.X_AXIS_HEIGHT}}s.CELL_WIDTH=25,s.CELL_HORIZONTAL_MARGIN=7,s.CELL_VERTICAL_MARGIN=5,s.CELL_CORNER_RADIUS=5,s.BOTTOM_MARGIN=9,s.Y_AXIS_WIDTH=9,s.X_AXIS_HEIGHT=10,s.TAB="        ",s.DEFAULT_OFF_COLOR="#000000",e.FieldMatrix=s;const n=["'",'"',"`"]}(pxtblockly=pxtblockly||{}),function(o){var r=pxt.svgUtil;o.HEADER_HEIGHT=50,o.TOTAL_WIDTH=300;class s extends Blockly.Field{constructor(e,t,n){super(e,n),this.isFieldCustom_=!0,this.SERIALIZABLE=!0,this.soundingKeys=0,this.numRow=8,this.numCol=8,this.tempo=120,this.isPlaying=!1,this.timeouts=[],this.params=t,this.createMelodyIfDoesntExist()}init(){super.init(),this.onInit()}showEditor_(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent(),Blockly.DropDownDiv.setColour(this.getDropdownBackgroundColour(),this.getDropdownBorderColour());let e=Blockly.DropDownDiv.getContentDiv();pxt.BrowserUtils.addClass(e,"melody-content-div"),pxt.BrowserUtils.addClass(e.parentElement,"melody-editor-dropdown"),this.gallery=new pxtmelody.MelodyGallery,this.renderEditor(e),this.prevString=this.getValue(),Blockly.Events.fire(new Blockly.Events.Ui(this.sourceBlock_,"melody-editor",!1,!0)),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_,()=>{this.onEditorClose(),pxt.BrowserUtils.removeClass(e,"melody-content-div"),pxt.BrowserUtils.removeClass(e.parentElement,"melody-editor-dropdown"),Blockly.Events.fire(new Blockly.Events.Ui(this.sourceBlock_,"melody-editor",!0,!1))})}getValue(){return this.stringRep=this.getTypeScriptValue(),this.stringRep}doValueUpdate_(e){null==e||""==e||'""'==e||this.stringRep&&this.stringRep===e||(this.stringRep=e,this.parseTypeScriptValue(e),super.doValueUpdate_(this.getValue()))}getText_(){return this.invalidString?pxt.Util.lf("Invalid Input"):this.getValue()}onInit(){this.render_(),this.createMelodyIfDoesntExist(),this.invalidString||(this.fieldGroup_||(this.fieldGroup_=Blockly.utils.dom.createSvgElement("g",{},null)),this.visible_||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.updateFieldLabel())}render_(){super.render_(),this.invalidString||(this.size_.width=s.MUSIC_ICON_WIDTH+(s.COLOR_BLOCK_WIDTH+s.COLOR_BLOCK_SPACING)*this.numCol),this.sourceBlock_.setColour("#ffffff")}renderEditor(e){var t=this.getDropdownBackgroundColour(),n=this.getDropdownBorderColour();this.topDiv=document.createElement("div"),pxt.BrowserUtils.addClass(this.topDiv,"melody-top-bar-div"),this.root=new r.SVG(this.topDiv).id("melody-editor-header-controls"),this.toggle=new i(this.root,{leftText:lf("Editor"),rightText:lf("Gallery"),baseColor:t}),this.toggle.onStateChange(e=>{e?this.hideGallery():this.showGallery()}),this.toggle.layout(),this.toggle.translate((o.TOTAL_WIDTH-this.toggle.width())/2,0),e.appendChild(this.topDiv),e.appendChild(this.gallery.getElement()),this.editorDiv=document.createElement("div"),pxt.BrowserUtils.addClass(this.editorDiv,"melody-editor-div"),this.editorDiv.style.setProperty("background-color",n),this.gridDiv=this.createGridDisplay(),this.editorDiv.appendChild(this.gridDiv),this.bottomDiv=document.createElement("div"),pxt.BrowserUtils.addClass(this.bottomDiv,"melody-bottom-bar-div"),this.doneButton=document.createElement("button"),pxt.BrowserUtils.addClass(this.doneButton,"melody-confirm-button"),this.doneButton.innerText=lf("Done"),this.doneButton.addEventListener("click",()=>this.onDone()),this.doneButton.style.setProperty("background-color",t),this.playButton=document.createElement("button"),this.playButton.id="melody-play-button",this.playButton.addEventListener("click",()=>this.togglePlay()),this.playIcon=document.createElement("i"),this.playIcon.id="melody-play-icon",pxt.BrowserUtils.addClass(this.playIcon,"play icon"),this.playButton.appendChild(this.playIcon),this.tempoInput=document.createElement("input"),pxt.BrowserUtils.addClass(this.tempoInput,"ui input"),this.tempoInput.type="number",this.tempoInput.title=lf("tempo"),this.tempoInput.id="melody-tempo-input",this.tempoInput.addEventListener("input",()=>this.setTempo(+this.tempoInput.value)),this.syncTempoField(!0),this.bottomDiv.appendChild(this.tempoInput),this.bottomDiv.appendChild(this.playButton),this.bottomDiv.appendChild(this.doneButton),this.editorDiv.appendChild(this.bottomDiv),e.appendChild(this.editorDiv)}onEditorClose(){this.stopMelody(),this.gallery&&this.gallery.stopMelody(),this.clearDomReferences(),this.sourceBlock_&&Blockly.Events.isEnabled()&&this.getValue()!==this.prevString&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.prevString,this.getValue())),this.prevString=void 0}onDone(){Blockly.DropDownDiv.hideIfOwner(this),this.onEditorClose()}clearDomReferences(){this.topDiv=null,this.editorDiv=null,this.gridDiv=null,this.bottomDiv=null,this.doneButton=null,this.playButton=null,this.playIcon=null,this.tempoInput=null,this.elt=null,this.cells=null,this.toggle=null,this.root=null,this.gallery.clearDomReferences()}getTypeScriptValue(){return this.invalidString||(this.melody?'"'+this.melody.getStringRepresentation()+'"':"")}parseTypeScriptValue(e){var t=e;try{e=(e=e.slice(1,-1)).trim(),this.createMelodyIfDoesntExist();var n,o=e.split(" ");o.forEach(e=>{if(!this.isValidNote(e))throw new Error(lf("Invalid note '{0}'. Notes can be C D E F G A B C5",e))}),this.melody.resetMelody();for(let e=0;e<o.length;e++)"-"!=o[e]&&(n=pxtmelody.noteToRow(o[e]),this.melody.updateMelody(n,e));this.updateFieldLabel()}catch(e){pxt.log(e),this.invalidString=t}}isValidNote(e){switch(e){case"C":case"D":case"E":case"F":case"G":case"A":case"B":case"C5":case"-":return!0}return!1}getPreviewWidth(){return this.updateSize_(),this.size_.width}getPreviewHeight(){return this.constants_.FIELD_BORDER_RECT_HEIGHT}getDropdownBackgroundColour(){return this.sourceBlock_.parentBlock_?this.sourceBlock_.parentBlock_.getColour():"#3D3D3D"}getDropdownBorderColour(){return this.sourceBlock_.parentBlock_?this.sourceBlock_.parentBlock_.getColourTertiary():"#2A2A2A"}updateFieldLabel(){if(this.fieldGroup_){pxsim.U.clear(this.fieldGroup_);var e=a("").appendClass("melody-editor-field-icon").at(6,15),t=(this.fieldGroup_.appendChild(e.el),this.melody.getStringRepresentation().trim().split(" "));for(let e=0;e<t.length;e++){var n=pxtmelody.getColorClass(pxtmelody.noteToRow(t[e])),o=(new r.Rect).at((s.COLOR_BLOCK_WIDTH+s.COLOR_BLOCK_SPACING)*e+s.COLOR_BLOCK_X,s.COLOR_BLOCK_Y).size(s.COLOR_BLOCK_WIDTH,s.COLOR_BLOCK_HEIGHT).stroke("#898989",1).corners(3,2);pxt.BrowserUtils.addClass(o.el,n),this.fieldGroup_.appendChild(o.el)}}}setTempo(e){(isNaN(e)||e<=0)&&this.tempoInput?this.tempoInput.value=this.tempo+"":this.tempo!=e&&(this.tempo=e,this.melody&&this.melody.setTempo(this.tempo),this.tempoInput&&(this.tempoInput.value=this.tempo+""),this.syncTempoField(!1))}syncTempoField(e){const t=this.sourceBlock_;if(t.parentBlock_){var n=t.parentBlock_;for(const t of n.inputList)if("tempo"===t.name){var o=t.connection.targetBlock();o&&(e?o.getFieldValue("SLIDER")?(this.tempoInput.value=o.getFieldValue("SLIDER"),this.tempo=+this.tempoInput.value):this.tempoInput.value=this.tempo+"":("math_number_minmax"===o.type?o.setFieldValue(this.tempoInput.value,"SLIDER"):o.setFieldValue(this.tempoInput.value,"NUM"),this.tempoInput.focus()));break}}}getDuration(){return 6e4/this.tempo}createMelodyIfDoesntExist(){return!this.melody&&(this.melody=new pxtmelody.MelodyArray,!0)}onNoteSelect(e,t){this.invalidString=null,this.melody.updateMelody(e,t),this.melody.getValue(e,t)&&!this.isPlaying&&this.playNote(e,t),this.updateGrid(),this.updateFieldLabel()}updateGrid(){for(let t=0;t<this.numRow;t++){var n=pxtmelody.getColorClass(t);for(let e=0;e<this.numCol;e++){var o=this.cells[t][e];this.melody.getValue(t,e)?(pxt.BrowserUtils.removeClass(o,"melody-default"),pxt.BrowserUtils.addClass(o,n)):(pxt.BrowserUtils.addClass(o,"melody-default"),pxt.BrowserUtils.removeClass(o,n))}}}playNote(e,t){let n=++this.soundingKeys;this.isPlaying?(this.timeouts.push(setTimeout(()=>{this.playToneCore(e)},t*this.getDuration())),this.timeouts.push(setTimeout(()=>{pxt.AudioContextManager.stop()},(t+1)*this.getDuration()))):(this.playToneCore(e),this.timeouts.push(setTimeout(()=>{this.soundingKeys==n&&pxt.AudioContextManager.stop()},this.getDuration())))}queueToneForColumn(t,e,n){const o=setTimeout(()=>{++this.soundingKeys,pxt.AudioContextManager.stop();for(let e=0;e<this.numRow;e++)this.melody.getValue(e,t)&&this.playToneCore(e);this.highlightColumn(t,!0),this.timeouts=this.timeouts.filter(e=>e!==o)},e),r=setTimeout(()=>{this.timeouts=this.timeouts.filter(e=>e!==r),this.highlightColumn(t,!1)},e+n);this.timeouts.push(o),this.timeouts.push(r)}playToneCore(e){let t=0;switch(e){case 0:t=523;break;case 1:t=494;break;case 2:t=440;break;case 3:t=392;break;case 4:t=349;break;case 5:t=330;break;case 6:t=294;break;case 7:t=262}pxt.AudioContextManager.tone(t)}highlightColumn(t,n){this.cells.map(e=>e[t]).forEach(e=>{n?pxt.BrowserUtils.addClass(e,"playing"):pxt.BrowserUtils.removeClass(e,"playing")})}createGridDisplay(){s.VIEWBOX_WIDTH=(s.CELL_WIDTH+s.CELL_VERTICAL_MARGIN)*this.numCol+s.CELL_VERTICAL_MARGIN,pxt.BrowserUtils.isEdge()&&(s.VIEWBOX_WIDTH+=37),s.VIEWBOX_HEIGHT=(s.CELL_WIDTH+s.CELL_HORIZONTAL_MARGIN)*this.numRow+s.CELL_HORIZONTAL_MARGIN,this.elt=pxsim.svg.parseString(`<svg xmlns="http://www.w3.org/2000/svg" class="melody-grid-div" viewBox="0 0 ${s.VIEWBOX_WIDTH} ${s.VIEWBOX_HEIGHT}"/>`),this.cells=[];for(let e=0;e<this.numRow;e++)this.cells.push([]);for(let t=0;t<this.numRow;t++)for(let e=0;e<this.numCol;e++)this.createCell(t,e);return this.elt}createCell(t,n){const e=t*(s.CELL_WIDTH+s.CELL_HORIZONTAL_MARGIN)+s.CELL_HORIZONTAL_MARGIN,o=n*(s.CELL_WIDTH+s.CELL_VERTICAL_MARGIN)+s.CELL_VERTICAL_MARGIN,r=pxsim.svg.child(this.elt,"g",{transform:`translate(${o} ${e})`}),i=pxsim.svg.child(r,"rect",{cursor:"pointer",width:s.CELL_WIDTH,height:s.CELL_WIDTH,stroke:"white","data-x":t,"data-y":n,rx:s.CELL_CORNER_RADIUS});this.melody.getValue(t,n)?pxt.BrowserUtils.addClass(i,pxtmelody.getColorClass(t)):pxt.BrowserUtils.addClass(i,"melody-default"),this.sourceBlock_.workspace.isFlyout||(pxsim.pointerEvents.down.forEach(e=>i.addEventListener(e,e=>{this.onNoteSelect(t,n),e.stopPropagation(),e.preventDefault()},!1)),this.cells[t][n]=i)}togglePlay(){this.isPlaying?this.stopMelody():(this.isPlaying=!0,this.playMelody()),this.updatePlayButton()}updatePlayButton(){this.isPlaying?(pxt.BrowserUtils.removeClass(this.playIcon,"play icon"),pxt.BrowserUtils.addClass(this.playIcon,"stop icon")):(pxt.BrowserUtils.removeClass(this.playIcon,"stop icon"),pxt.BrowserUtils.addClass(this.playIcon,"play icon"))}playMelody(){if(this.isPlaying){for(let e=0;e<this.numCol;e++)this.queueToneForColumn(e,e*this.getDuration(),this.getDuration());this.timeouts.push(setTimeout(()=>this.playMelody(),this.numCol*this.getDuration()))}else this.stopMelody()}stopMelody(){if(this.isPlaying){for(;this.timeouts.length;)clearTimeout(this.timeouts.shift());pxt.AudioContextManager.stop(),this.isPlaying=!1,this.cells.forEach(e=>e.forEach(e=>pxt.BrowserUtils.removeClass(e,"playing")))}}showGallery(){this.stopMelody(),this.updatePlayButton(),this.gallery.show(e=>{e&&(this.melody.parseNotes(e),this.gallery.hide(),this.toggle.toggle(),this.updateFieldLabel(),this.updateGrid())})}hideGallery(){this.gallery.hide()}}s.CELL_WIDTH=25,s.CELL_HORIZONTAL_MARGIN=7,s.CELL_VERTICAL_MARGIN=5,s.CELL_CORNER_RADIUS=5,s.COLOR_BLOCK_WIDTH=10,s.COLOR_BLOCK_HEIGHT=20,s.COLOR_BLOCK_X=20,s.COLOR_BLOCK_Y=5,s.COLOR_BLOCK_SPACING=2,s.MUSIC_ICON_WIDTH=20,o.FieldCustomMelody=s;class i{constructor(e,t){this.props=((t=t).baseColor||(t.baseColor="#e95153"),t.backgroundColor||(t.backgroundColor="rgba(52,73,94,.2)"),t.borderColor||(t.borderColor="rgba(52,73,94,.4)"),t.selectedTextColor||(t.selectedTextColor=t.baseColor),t.unselectedTextColor||(t.unselectedTextColor="hsla(0,0%,100%,.9)"),t.switchColor||(t.switchColor="#ffffff"),t),this.root=e.group(),this.buildDom(),this.isLeft=!0}buildDom(){this.root.style().content("\n            .toggle-left {\n                transform: translateX(0px);\n                animation: mvleft 0.2s 0s ease;\n            }\n\n            .toggle-right {\n                transform: translateX(100px);\n                animation: mvright 0.2s 0s ease;\n            }\n\n            @keyframes mvright {\n                0% {\n                    transform: translateX(0px);\n                }\n                100% {\n                    transform: translateX(100px);\n                }\n            }\n\n            @keyframes mvleft {\n                0% {\n                    transform: translateX(100px);\n                }\n                100% {\n                    transform: translateX(0px);\n                }\n            }\n            "),this.root.def().create("clipPath","sprite-editor-toggle-border").clipPathUnits(!0).draw("rect").at(0,0).corners(.02,.1).size(1,1),this.root.draw("rect").size(200,40).fill(this.props.baseColor).stroke(this.props.borderColor,4).corners(4,4).clipPath("url(#sprite-editor-toggle-border)"),this.root.draw("rect").at(2,2).size(196,36).fill(this.props.backgroundColor).corners(4,4),this.switch=this.root.draw("rect").at(2,2).size(98,36).fill(this.props.switchColor).corners(4,4),this.leftElement=this.root.group(),this.leftText=a(this.props.leftText).appendClass("sprite-editor-text").fill(this.props.selectedTextColor),this.leftElement.appendChild(this.leftText),this.rightElement=this.root.group(),this.rightText=a(this.props.rightText).appendClass("sprite-editor-text").fill(this.props.unselectedTextColor),this.rightElement.appendChild(this.rightText),this.root.onClick(()=>this.toggle())}toggle(e=!1){this.isLeft?(this.switch.removeClass("toggle-left"),this.switch.appendClass("toggle-right"),this.leftText.fill(this.props.unselectedTextColor),this.rightText.fill(this.props.selectedTextColor)):(this.switch.removeClass("toggle-right"),this.switch.appendClass("toggle-left"),this.leftText.fill(this.props.selectedTextColor),this.rightText.fill(this.props.unselectedTextColor)),this.isLeft=!this.isLeft,!e&&this.changeHandler&&this.changeHandler(this.isLeft)}onStateChange(e){this.changeHandler=e}layout(){this.leftText.moveTo(51,20),this.rightText.moveTo(149,20)}translate(e,t){this.root.translate(e,t)}height(){return 40}width(){return 200}}function a(e){return new r.Text(e).anchor("middle").setAttribute("dominant-baseline","middle").setAttribute("dy",pxt.BrowserUtils.isIE()||pxt.BrowserUtils.isEdge()?"0.3em":"0.1em")}}(pxtblockly=pxtblockly||{}),function(o){let n;var e;(e=n=n||{})[e.C=262]="C",e[e.CSharp=277]="CSharp",e[e.D=294]="D",e[e.Eb=311]="Eb",e[e.E=330]="E",e[e.F=349]="F",e[e.FSharp=370]="FSharp",e[e.G=392]="G",e[e.GSharp=415]="GSharp",e[e.A=440]="A",e[e.Bb=466]="Bb",e[e.B=494]="B",e[e.C3=131]="C3",e[e.CSharp3=139]="CSharp3",e[e.D3=147]="D3",e[e.Eb3=156]="Eb3",e[e.E3=165]="E3",e[e.F3=175]="F3",e[e.FSharp3=185]="FSharp3",e[e.G3=196]="G3",e[e.GSharp3=208]="GSharp3",e[e.A3=220]="A3",e[e.Bb3=233]="Bb3",e[e.B3=247]="B3",e[e.C4=262]="C4",e[e.CSharp4=277]="CSharp4",e[e.D4=294]="D4",e[e.Eb4=311]="Eb4",e[e.E4=330]="E4",e[e.F4=349]="F4",e[e.FSharp4=370]="FSharp4",e[e.G4=392]="G4",e[e.GSharp4=415]="GSharp4",e[e.A4=440]="A4",e[e.Bb4=466]="Bb4",e[e.B4=494]="B4",e[e.C5=523]="C5",e[e.CSharp5=555]="CSharp5",e[e.D5=587]="D5",e[e.Eb5=622]="Eb5",e[e.E5=659]="E5",e[e.F5=698]="F5",e[e.FSharp5=740]="FSharp5",e[e.G5=784]="G5",e[e.GSharp5=831]="GSharp5",e[e.A5=880]="A5",e[e.Bb5=932]="Bb5",e[e.B5=988]="B5",e[e.C6=1047]="C6",e[e.CSharp6=1109]="CSharp6",e[e.D6=1175]="D6",e[e.Eb6=1245]="Eb6",e[e.E6=1319]="E6",e[e.F6=1397]="F6",e[e.FSharp6=1480]="FSharp6",e[e.G6=1568]="G6",e[e.GSharp6=1568]="GSharp6",e[e.A6=1760]="A6",e[e.Bb6=1865]="Bb6",e[e.B6=1976]="B6",e[e.C7=2093]="C7";class c extends Blockly.FieldNumber{constructor(e,t,n){super(null,0,null,null,n),this.isFieldCustom_=!0,this.SERIALIZABLE=!0,this.isTextValid_=!0,this.nKeys_=36,this.minNote_=28,this.maxNote_=63,this.eps=2,this.setSpellcheck(!1),this.prepareNotes(),this.isExpanded=!1,this.currentPage=0,this.totalPlayCount=0,t.editorColour&&(this.primaryColour=o.parseColour(t.editorColour),this.borderColour=Blockly.utils.colour.darken(this.primaryColour,.2));n=parseInt(t.eps),!Number.isNaN(n)&&0<=n&&(this.eps=n),n=parseInt(t.minNote)||this.minNote_,t=parseInt(t.maxNote)||this.maxNote_;28<=n&&t<=75&&n<t&&(this.minNote_=n,this.maxNote_=t,this.nKeys_=this.maxNote_-this.minNote_+1),this.setValue(e)}doClassValidation_(e){var t=/^Note\.(.+)$/.exec(e),t=t&&1<t.length?t[1]:null;return null===(e=n[t]||String(parseFloat(e||"0")))||(t=parseFloat(e||"0"),isNaN(t))||t<0?null:(e=Math.floor(t)!=t,""+t.toFixed(e?2:0))}getValue(){return this.value_+""}doValueUpdate_(e){isNaN(Number(e))||Number(e)<0||(this.sourceBlock_&&Blockly.Events.isEnabled()&&this.value_!=e&&Blockly.Events.fire(new Blockly.Events.Change(this.sourceBlock_,"field",this.name,this.value_,e)),this.value_=e,this.refreshText())}getText(){if(this.isExpanded)return""+this.value_;{var t=+this.value_;for(let e=0;e<this.nKeys_;e++)if(Math.abs(this.getKeyFreq(e)-t)<this.eps)return this.getKeyName(e);let e=t.toString();return isNaN(t)||(e+=" Hz"),e}}refreshText(){this.forceRerender()}onHtmlInputChange_(e){super.onHtmlInputChange_(e),Blockly.DropDownDiv.hideWithoutAnimation(),this.htmlInput_.focus()}onFinishEditing_(e){this.refreshText()}onHide(){this.isExpanded=!1,this.refreshText()}showEditor_(e){this.isExpanded=!0,this.updateColor(),Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();const n=pxt.BrowserUtils.isMobile()||pxt.BrowserUtils.isIOS(),o=(c.superClass_.showEditor_.call(this,e,n,n),this.refreshText(),Blockly.Events.setGroup(!0),this.piano=[],this.currentSelectedKey=void 0,this.nKeys_-this.nKeys_/c.notesPerOctave*c.blackKeysPerOctave),r=c.notesPerOctave-c.blackKeysPerOctave;let t=c.keyWidth*o,i=c.keyHeight+c.labelHeight;var s=window.innerWidth<t,a=(s&&(t=r*c.keyWidth,i=c.keyHeight+c.labelHeight+c.prevNextHeight),u("blocklyPianoDiv",`width: ${t}px;
                height: ${i}px;`));Blockly.DropDownDiv.getContentDiv().appendChild(a),this.noteLabel=u("blocklyNoteLabel",`top: ${c.keyHeight}px;
                width: ${t}px;
                background-color: ${this.primaryColour};
                border-color: ${this.primaryColour};`),a.appendChild(this.noteLabel),this.noteLabel.textContent="-";let l=0;for(let t=0;t<this.nKeys_;t++){const n=Math.floor(t/c.notesPerOctave);let e=this.getPosition(t);s&&t>=c.notesPerOctave&&(e-=r*n*c.keyWidth);const o=this.getKeyDiv(t,e);this.piano.push(o),a.appendChild(o),Math.abs(this.getKeyFreq(t)-Number(this.getValue()))<this.eps&&(pxt.BrowserUtils.addClass(o,"selected"),this.currentSelectedKey=o,l=n)}s&&(this.setPage(l),a.appendChild(this.getNextPrevDiv(!0,t)),a.appendChild(this.getNextPrevDiv(!1,t))),Blockly.DropDownDiv.setColour(this.primaryColour,this.borderColour),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_,()=>this.onHide())}playKey(e,t){const n=++this.totalPlayCount;this.currentSelectedKey!==e&&(this.currentSelectedKey&&pxt.BrowserUtils.removeClass(this.currentSelectedKey,"selected"),pxt.BrowserUtils.addClass(e,"selected"),this.setValue(t)),this.currentSelectedKey=e,this.htmlInput_.value=this.getText(),pxt.AudioContextManager.tone(t),setTimeout(()=>{this.totalPlayCount==n&&pxt.AudioContextManager.stop()},300)}dispose(){Blockly.DropDownDiv.hideIfOwner(this),super.dispose()}updateColor(){var e;this.sourceBlock_.parentBlock_&&(this.sourceBlock_.isShadow()||1===(e=this.sourceBlock_).inputList.length&&1===e.inputList[0].fieldRow.length)?(e=this.sourceBlock_.parentBlock_,this.primaryColour=e.getColour(),this.borderColour=e.getColourTertiary()):(this.primaryColour="#3D3D3D",this.borderColour="#2A2A2A")}setPage(e){const t=this.nKeys_/c.notesPerOctave;e=Math.max(Math.min(e,t-1),0),this.noteLabel.textContent="Octave #"+(e+1);var n=e*c.notesPerOctave;for(let e=0;e<this.piano.length;++e){const t=e>=n&&e<n+c.notesPerOctave;this.piano[e].style.display=t?"block":"none"}this.currentPage=e}getNextPrevDiv(t,e){const n=t?0:e/2,o=u("blocklyNotePrevNext",`top: ${c.keyHeight+c.labelHeight}px;
                left: ${n}px;
                width: ${Math.ceil(e/2)}px;
                ${t?"border-left-color":"border-right-color"}: ${this.primaryColour};
                background-color: ${this.primaryColour};
                border-bottom-color: ${this.primaryColour};`);return pxt.BrowserUtils.pointerEvents.down.forEach(e=>{Blockly.bindEventWithChecks_(o,e,this,()=>this.setPage(t?this.currentPage-1:this.currentPage+1),!0)}),o.textContent=t?"<":">",o}getKeyDiv(t,e){const n=u("blocklyNote "+(this.isWhite(t)?"":"black"),`width: ${this.getKeyWidth(t)}px;
                height: ${this.getKeyHeight(t)}px;
                left: ${e}px;
                border-color: ${this.primaryColour};`);return pxt.BrowserUtils.pointerEvents.down.forEach(e=>{Blockly.bindEventWithChecks_(n,e,this,()=>this.playKey(n,this.getKeyFreq(t)),!0)}),Blockly.bindEventWithChecks_(n,"mouseover",this,()=>this.noteLabel.textContent=this.getKeyName(t),!0),n}isWhite(e){switch(e%12){case 1:case 3:case 6:case 8:case 10:return!1;default:return!0}}getKeyWidth(e){return this.isWhite(e)?c.keyWidth:c.keyWidth/2}getKeyHeight(e){return this.isWhite(e)?c.keyHeight:c.keyHeight/2}getKeyFreq(e){return this.getKeyNoteData(e).freq}getKeyName(e){e=this.getKeyNoteData(e);let t=e.prefixedName;return this.nKeys_<=c.notesPerOctave?t=e.name:28<=this.minNote_&&this.maxNote_<=63&&(t=e.altPrefixedName||t),t}getKeyNoteData(e){return c.Notes[e+this.minNote_]}getPosition(e){var t=(e-Math.floor((e+1)/c.notesPerOctave*c.blackKeysPerOctave))*c.keyWidth;return this.isWhite(e)?t:t-c.keyWidth/4}prepareNotes(){c.Notes||(c.Notes={28:{name:lf("{id:note}C"),prefixedName:lf("Low C"),freq:131},29:{name:lf("C#"),prefixedName:lf("Low C#"),freq:139},30:{name:lf("{id:note}D"),prefixedName:lf("Low D"),freq:147},31:{name:lf("D#"),prefixedName:lf("Low D#"),freq:156},32:{name:lf("{id:note}E"),prefixedName:lf("Low E"),freq:165},33:{name:lf("{id:note}F"),prefixedName:lf("Low F"),freq:175},34:{name:lf("F#"),prefixedName:lf("Low F#"),freq:185},35:{name:lf("{id:note}G"),prefixedName:lf("Low G"),freq:196},36:{name:lf("G#"),prefixedName:lf("Low G#"),freq:208},37:{name:lf("{id:note}A"),prefixedName:lf("Low A"),freq:220},38:{name:lf("A#"),prefixedName:lf("Low A#"),freq:233},39:{name:lf("{id:note}B"),prefixedName:lf("Low B"),freq:247},40:{name:lf("{id:note}C"),prefixedName:lf("Middle C"),freq:262},41:{name:lf("C#"),prefixedName:lf("Middle C#"),freq:277},42:{name:lf("{id:note}D"),prefixedName:lf("Middle D"),freq:294},43:{name:lf("D#"),prefixedName:lf("Middle D#"),freq:311},44:{name:lf("{id:note}E"),prefixedName:lf("Middle E"),freq:330},45:{name:lf("{id:note}F"),prefixedName:lf("Middle F"),freq:349},46:{name:lf("F#"),prefixedName:lf("Middle F#"),freq:370},47:{name:lf("{id:note}G"),prefixedName:lf("Middle G"),freq:392},48:{name:lf("G#"),prefixedName:lf("Middle G#"),freq:415},49:{name:lf("{id:note}A"),prefixedName:lf("Middle A"),freq:440},50:{name:lf("A#"),prefixedName:lf("Middle A#"),freq:466},51:{name:lf("{id:note}B"),prefixedName:lf("Middle B"),freq:494},52:{name:lf("{id:note}C"),prefixedName:lf("Tenor C"),altPrefixedName:lf("High C"),freq:523},53:{name:lf("C#"),prefixedName:lf("Tenor C#"),altPrefixedName:lf("High C#"),freq:554},54:{name:lf("{id:note}D"),prefixedName:lf("Tenor D"),altPrefixedName:lf("High D"),freq:587},55:{name:lf("D#"),prefixedName:lf("Tenor D#"),altPrefixedName:lf("High D#"),freq:622},56:{name:lf("{id:note}E"),prefixedName:lf("Tenor E"),altPrefixedName:lf("High E"),freq:659},57:{name:lf("{id:note}F"),prefixedName:lf("Tenor F"),altPrefixedName:lf("High F"),freq:698},58:{name:lf("F#"),prefixedName:lf("Tenor F#"),altPrefixedName:lf("High F#"),freq:740},59:{name:lf("{id:note}G"),prefixedName:lf("Tenor G"),altPrefixedName:lf("High G"),freq:784},60:{name:lf("G#"),prefixedName:lf("Tenor G#"),altPrefixedName:lf("High G#"),freq:831},61:{name:lf("{id:note}A"),prefixedName:lf("Tenor A"),altPrefixedName:lf("High A"),freq:880},62:{name:lf("A#"),prefixedName:lf("Tenor A#"),altPrefixedName:lf("High A#"),freq:932},63:{name:lf("{id:note}B"),prefixedName:lf("Tenor B"),altPrefixedName:lf("High B"),freq:988},64:{name:lf("{id:note}C"),prefixedName:lf("High C"),freq:1046},65:{name:lf("C#"),prefixedName:lf("High C#"),freq:1109},66:{name:lf("{id:note}D"),prefixedName:lf("High D"),freq:1175},67:{name:lf("D#"),prefixedName:lf("High D#"),freq:1245},68:{name:lf("{id:note}E"),prefixedName:lf("High E"),freq:1319},69:{name:lf("{id:note}F"),prefixedName:lf("High F"),freq:1397},70:{name:lf("F#"),prefixedName:lf("High F#"),freq:1478},71:{name:lf("{id:note}G"),prefixedName:lf("High G"),freq:1568},72:{name:lf("G#"),prefixedName:lf("High G#"),freq:1661},73:{name:lf("{id:note}A"),prefixedName:lf("High A"),freq:1760},74:{name:lf("A#"),prefixedName:lf("High A#"),freq:1865},75:{name:lf("{id:note}B"),prefixedName:lf("High B"),freq:1976}})}}function u(e,t){var n=document.createElement("div");return pxt.BrowserUtils.addClass(n,e),n.setAttribute("style",t.replace(/\s+/g," ")),n}c.keyWidth=22,c.keyHeight=90,c.labelHeight=24,c.prevNextHeight=20,c.notesPerOctave=12,c.blackKeysPerOctave=5,o.FieldNote=c}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldNumberDropdown{constructor(e,t,n){super(e,t.data,t.min,t.max,t.precision,n),this.isFieldCustom_=!0}getOptions(){let e;return e=this.menuGenerator_?JSON.parse(this.menuGenerator_).map(e=>"object"==typeof e?e:[String(e),String(e)]):e}}e.FieldNumberDropdown=t}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldSlider{constructor(e,t,n){super(e,"0","100","1","100","Value",n),this.isFieldCustom_=!0,this.params=t,this.params.screenHeight||(this.params.screenHeight=120),this.params.screenWidth||(this.params.screenWidth=160),this.params.xInputName||(this.params.xInputName="x"),this.params.yInputName||(this.params.yInputName="y"),this.params.min&&(this.min_=parseInt(this.params.min)),this.params.max&&(this.max_=parseInt(this.params.max))}showEditor_(e){this.getFieldByName(this.params.xInputName)===this&&(this.max_=this.params.screenWidth,this.labelText_=this.params.xInputName),this.getFieldByName(this.params.yInputName)===this&&(this.max_=this.params.screenHeight,this.labelText_=this.params.yInputName),super.showEditor_(e),this.renderScreenPicker()}doValueUpdate_(e){super.doValueUpdate_(e),this.resetCrosshair&&this.resetCrosshair()}renderScreenPicker(){let e=Blockly.DropDownDiv.getContentDiv();this.selectorDiv_=document.createElement("div"),this.selectorDiv_.className="blocklyCanvasOverlayOuter",e.appendChild(this.selectorDiv_);const o=document.createElement("div"),r=(o.className="blocklyCanvasOverlayDiv",this.selectorDiv_.appendChild(o),document.createElement("div")),i=(r.className="cross-x",o.appendChild(r),document.createElement("div")),s=(i.className="cross-y",o.appendChild(i),document.createElement("div")),a=(s.className="label",o.appendChild(s),1.5*this.params.screenWidth),l=1.5*this.params.screenHeight;o.style.height=l+"px",o.style.width=a+"px";var t=e.getElementsByClassName("goog-slider-horizontal")[0];if(t){t.style.width=a+"px";const e=parseFloat(this.getValue());!isNaN(e)&&e>this.getMin()&&(this.setValue(e-1+""),this.setValue(e+""))}const c=(e,t)=>{e=Math.round(Math.max(0,Math.min(a,e))),t=Math.round(Math.max(0,Math.min(l,t))),r.style.top=t+"px",i.style.left=e+"px",e=Math.round(Math.max(0,Math.min(this.params.screenWidth,e/a*this.params.screenWidth))),t=Math.round(Math.max(0,Math.min(this.params.screenHeight,t/l*this.params.screenHeight))),isNaN(e)?s.textContent=this.params.yInputName+"="+t:isNaN(t)?s.textContent=this.params.xInputName+"="+e:s.textContent=`${this.params.xInputName}=${e} ${this.params.yInputName}=`+t;var n=s.getBoundingClientRect();e>this.params.screenWidth/2?s.style.left=e*(a/this.params.screenWidth)-n.width-8+"px":s.style.left=e*(a/this.params.screenWidth)+4+"px",t>this.params.screenHeight/2?s.style.top=t*(l/this.params.screenHeight)-n.height-6+"px":s.style.top=t*(l/this.params.screenHeight)+"px"};this.resetCrosshair=()=>{var{currentX:e,currentY:t}=this.getXY();c(e/this.params.screenWidth*a,t/this.params.screenHeight*l)},this.resetCrosshair(),Blockly.bindEvent_(this.selectorDiv_,"mousemove",this,e=>{var t=o.getBoundingClientRect(),n=e.clientX-t.left,e=e.clientY-t.top;c(n,e)}),Blockly.bindEvent_(this.selectorDiv_,"mouseleave",this,this.resetCrosshair),Blockly.bindEvent_(this.selectorDiv_,"click",this,e=>{var t=o.getBoundingClientRect(),n=e.clientX-t.left,e=e.clientY-t.top,t=Math.round(n/a*this.params.screenWidth),n=Math.round(e/l*this.params.screenHeight);this.close(),this.setXY(t,n)})}resizeHandler(){this.close()}setXY(e,t){var n=this.getFieldByName(this.params.xInputName),n=(n&&"number"==typeof n.getValue()&&n.setValue(String(e)),this.getFieldByName(this.params.yInputName));n&&"number"==typeof n.getValue()&&n.setValue(String(t))}getFieldByName(t){var n=this.sourceBlock_.parentBlock_;if(n)for(let e=0;e<n.inputList.length;e++){var o=n.inputList[e];if(o.name===t)return this.getTargetField(o)}}getXY(){let e,t;var n=this.getFieldByName(this.params.xInputName),n=(n&&(e=n.getValue()),this.getFieldByName(this.params.yInputName));return n&&(t=n.getValue()),{currentX:parseInt(e),currentY:parseInt(t)}}getTargetField(e){var e=e.connection.targetBlock();return(e=e&&e.inputList[0])?e.fieldRow[0]:null}widgetDispose_(){Blockly.FieldNumber.superClass_.widgetDispose_.call(this),this.close(!0)}close(e){e||(Blockly.WidgetDiv.hideIfOwner(this),Blockly.DropDownDiv.hideIfOwner(this)),window.removeEventListener("resize",this.resizeHandler),this.resetCrosshair=void 0,this.selectorDiv_&&(goog.dom.removeNode(this.selectorDiv_),this.selectorDiv_=void 0)}}e.FieldPosition=t}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldDropdown{constructor(e,t){super([["Temp","Temp"]],t),this.setValue(e||"")}getOptions(){return this.dropdownCreate()}init(){this.fieldGroup_||super.init.call(this)}setSourceBlock(e){goog.asserts.assert(!e.isShadow(),"Procedure fields are not allowed to exist on shadow blocks."),super.setSourceBlock.call(this,e)}dropdownCreate(){var t=[];if(this.sourceBlock_&&this.sourceBlock_.workspace){var n,o=this.sourceBlock_.workspace.getAllBlocks();for(let e=0;e<o.length;e++)o[e].getProcedureDef&&(n=o[e].getProcedureDef(),t.push(n[0]))}var e=this.getValue(),r=(e&&-1==t.indexOf(e)&&t.push(e),t.sort(goog.string.caseInsensitiveCompare),t.length||t.push("Temp"),[]);for(let e=0;e<t.length;e++)r[e]=[t[e],t[e]];return r}onItemSelected(e,t){let n=t.getValue();null!==(n=this.sourceBlock_?this.callValidator(n):n)&&this.setValue(n)}}e.FieldProcedure=t}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldSlider{constructor(e,t,n){super(String(e),"0","180","1","15",lf("Angle"),n),this.isFieldCustom_=!0,this.params=t}createLabelDom_(e){var t=document.createElement("div"),n=(this.circleSVG=document.createElementNS("http://www.w3.org/2000/svg","svg"),pxsim.svg.hydrate(this.circleSVG,{viewBox:"0 0 200 100",width:"170"}),t.appendChild(this.circleSVG),pxsim.svg.child(this.circleSVG,"circle",{"stroke-dasharray":"565.48","stroke-dashoffset":"0",cx:100,cy:100,r:"90",style:"fill:transparent; transition: stroke-dashoffset 0.1s linear;",stroke:"#a8aaa8","stroke-width":"1rem"}),this.circleBar=pxsim.svg.child(this.circleSVG,"circle",{"stroke-dasharray":"565.48","stroke-dashoffset":"0",cx:100,cy:100,r:"90",style:"fill:transparent; transition: stroke-dashoffset 0.1s linear;",stroke:"#f12a21","stroke-width":"1rem"}),this.reporter=pxsim.svg.child(this.circleSVG,"text",{x:100,y:80,"text-anchor":"middle","dominant-baseline":"middle",style:"font-size: 50px",class:"sim-text inverted number"}),document.createElement("span"));return n.setAttribute("class","blocklyFieldSliderReadout"),[t,n]}setReadout_(e,t){this.updateAngle(parseFloat(t)),this.reporter.textContent=t+""}updateAngle(e){e=(180-(e=Math.max(0,Math.min(180,e))))/180*Math.PI*90;this.circleBar.setAttribute("stroke-dashoffset",""+e)}}e.FieldProtractor=t}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldSlider{constructor(e,t,n){super(String(e),"-100","100","1","10","Speed",n),this.isFieldCustom_=!0,this.params=t,this.params.min&&(this.min_=parseFloat(this.params.min)),this.params.max&&(this.max_=parseFloat(this.params.max)),this.params.label&&(this.labelText_=this.params.label),this.params.format||(this.params.format="{0}%")}createLabelDom_(e){var t=document.createElement("div"),n=(this.speedSVG=document.createElementNS("http://www.w3.org/2000/svg","svg"),pxsim.svg.hydrate(this.speedSVG,{viewBox:"0 0 200 100",width:"170"}),t.appendChild(this.speedSVG),pxsim.svg.child(this.speedSVG,"circle",{"stroke-dasharray":"565.48","stroke-dashoffset":"0",cx:100,cy:100,r:"90",style:"fill:transparent; transition: stroke-dashoffset 0.1s linear;",stroke:"#a8aaa8","stroke-width":"1rem"}),this.circleBar=pxsim.svg.child(this.speedSVG,"circle",{"stroke-dasharray":"565.48","stroke-dashoffset":"0",cx:100,cy:100,r:"90",style:"fill:transparent; transition: stroke-dashoffset 0.1s linear;",stroke:"#f12a21","stroke-width":"1rem"}),this.reporter=pxsim.svg.child(this.speedSVG,"text",{x:100,y:80,"text-anchor":"middle","dominant-baseline":"middle",style:`font-size: ${Math.max(14,50-5*(this.params.format.length-4))}px`,class:"sim-text inverted number"}),document.createElement("span"));return n.setAttribute("class","blocklyFieldSliderReadout"),[t,n]}setReadout_(e,t){this.updateSpeed(parseFloat(t)),this.reporter.textContent=ts.pxtc.U.rlf(this.params.format,t)}updateSpeed(e){var t=this.sign(e),t=(e=Math.abs(e)/100*50+50,(100-(e=-1==t?50-e:e))/100*(180*Math.PI));this.circleBar.setAttribute("stroke-dashoffset",""+t)}sign(e){return e?e<0?-1:1:0}}e.FieldSpeed=t}(pxtblockly=pxtblockly||{}),function(e){class t extends e.FieldAssetEditor{getAssetType(){return"image"}createNewAsset(e){var t=pxt.react.getTilemapProject();if(e){const n=pxt.lookupProjectAssetByTSReference(e,t);if(n)return n}if(this.getBlockData())return t.lookupAsset("image",this.getBlockData());const n=e?pxt.sprite.imageLiteralToBitmap(e):new pxt.sprite.Bitmap(this.params.initWidth,this.params.initHeight);if(n)return t=n.data(),{internalID:-1,id:this.sourceBlock_.id,type:"image",jresData:pxt.sprite.base64EncodeBitmap(t),meta:{},bitmap:t};this.isGreyBlock=!0,this.valueText=e}getValueText(){return this.asset&&!this.isTemporaryAsset()?pxt.getTSReferenceForAsset(this.asset):pxt.sprite.bitmapToImageLiteral(this.asset&&pxt.sprite.Bitmap.fromData(this.asset.bitmap),"typescript")}parseFieldOptions(e){{const o={initColor:1,initWidth:16,initHeight:16,disableResize:!1,lightMode:!1};if(e){if(o.lightMode=e.lightMode,e.sizes){const t=e.sizes.split(";"),r=[];for(let e=0;e<t.length;e++){const o=t[e].split(",");if(2===o.length){let e=parseInt(o[0]),t=parseInt(o[1]);var n;isNaN(e)||isNaN(t)||(n=pxt.appTarget.runtime&&pxt.appTarget.runtime.screenSize,e<0&&n&&(e=n.width),t<0&&n&&(t=n.height),r.push([e,t]))}}0<r.length&&(o.initWidth=r[0][0],o.initHeight=r[0][1])}e.filter&&(o.filter=e.filter),e.disableResize&&(o.disableResize="true"===e.disableResize.toLowerCase()||"1"===e.disableResize),o.initColor=t(e.initColor,o.initColor),o.initWidth=t(e.initWidth,o.initWidth),o.initHeight=t(e.initHeight,o.initHeight)}return o;function t(e,t){e=parseInt(e);return isNaN(e)?t:e}}}}e.FieldSpriteEditor=t}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldLabel{constructor(e,t,n){super(e,function(){if(t){if(t.bold&&t.italics)return"blocklyBoldItalicizedText";if(t.bold)return"blocklyBoldText";if(t.italics)return"blocklyItalicizedText"}}()),this.isFieldCustom_=!0}}e.FieldStyledLabel=t}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldTextDropdown{constructor(e,t,n){super(e,t.values,n),this.isFieldCustom_=!0}}e.FieldTextDropdown=t}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldTextInput{constructor(e,t,n){super(e,n),this.isFieldCustom_=!0}}e.FieldTextInput=t}(pxtblockly=pxtblockly||{}),function(e){class t extends e.FieldAssetEditor{getInitText(){return this.initText}getTileset(){var e;return null==(e=this.asset)?void 0:e.data.tileset}getAssetType(){return"tilemap"}createNewAsset(e=""){e=e&&e.replace(/&#96;/g,"`");const t=pxt.react.getTilemapProject(),n=pxt.lookupProjectAssetByTSReference(e,t);if(n)return n;var o=pxt.sprite.decodeTilemap(e,"typescript",t)||t.blankTilemap(this.params.tileWidth,this.params.initWidth,this.params.initHeight);let r;if(o&&o.tilemap&&o.tilemap.width&&o.tilemap.height&&o.layers&&o.layers.width===o.tilemap.width&&o.layers.height===o.tilemap.height&&o.tileset){this.initText=e,this.isGreyBlock=!1;const[n]=t.createNewTilemapFromData(o);r=t.getTilemap(n)}else e.trim()&&(this.isGreyBlock=!0,this.valueText=e);return r}onEditorClose(e){pxt.sprite.updateTilemapReferencesFromResult(pxt.react.getTilemapProject(),e)}getValueText(){return this.isGreyBlock?pxt.Util.htmlUnescape(this.valueText):this.asset?pxt.getTSReferenceForAsset(this.asset):this.getInitText()}parseFieldOptions(e){var t={initWidth:16,initHeight:16,disableResize:!1,tileWidth:16,lightMode:!1};if(e){if(t.lightMode=e.lightMode,e.filter&&(t.filter=e.filter),e.tileWidth)if("number"==typeof e.tileWidth)switch(e.tileWidth){case 8:t.tileWidth=8;break;case 16:t.tileWidth=16;break;case 32:t.tileWidth=32}else switch(e.tileWidth.trim().toLowerCase()){case"8":case"eight":t.tileWidth=8;break;case"16":case"sixteen":t.tileWidth=16;break;case"32":case"thirtytwo":t.tileWidth=32}t.initWidth=n(e.initWidth,t.initWidth),t.initHeight=n(e.initHeight,t.initHeight)}return t;function n(e,t){e=parseInt(e);return isNaN(e)?t:e}}}e.FieldTilemap=t}(pxtblockly=pxtblockly||{}),function(i){class s extends i.FieldImages{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0,this.menuGenerator_=()=>{var e;return null!=(e=this.sourceBlock_)&&e.workspace&&i.needsTilemapUpgrade(null==(e=this.sourceBlock_)?void 0:e.workspace)?[o()]:s.getReferencedTiles(this.sourceBlock_.workspace)},this.assetChangeListener=()=>{this.doValueUpdate_(this.getValue()),this.forceRerender()},this.blocksInfo=t.blocksInfo}static getReferencedTiles(e){var t=pxt.react.getTilemapProject();if(t.revision()!==s.cachedRevision||e.id!=s.cachedWorkspaceId){s.cachedRevision=t.revision(),s.cachedWorkspaceId=e.id;var o=i.getAllReferencedTiles(e);for(const i of[16,8,32]){const r=t.getProjectTiles(i,16===i);if(r)for(const i of r.tiles)o.find(e=>e.id===i.id)||o.push(i)}let n={};o.sort((e,t)=>e.id===t.id?0:e.bitmap.width!==t.bitmap.width?e.bitmap.width-t.bitmap.width:e.isProjectTile!==t.isProjectTile?e.isProjectTile?-1:1:(n[e.id]||(n[e.id]=l(e.id)))-(n[t.id]||(n[t.id]=l(t.id))));s.referencedTiles=o.map(e=>{return[{src:l((t=e).id)<=2?a(t.bitmap.width):i.bitmapToImageURI(pxt.sprite.Bitmap.fromData(t.bitmap),32,!1),width:32,height:32,alt:c(e)},e.id,e];var t})}return s.referencedTiles}init(){super.init(),this.sourceBlock_&&this.sourceBlock_.isInFlyout&&this.setValue(this.getOptions()[0][1])}getValue(){var e;return this.selectedOption_?(e=this.selectedOption_[2],e=pxt.react.getTilemapProject().lookupAsset(e.type,e.id),pxt.getTSReferenceForAsset(e)):"string"==typeof(e=super.getValue())&&-1===e.indexOf(".")&&-1===e.indexOf("`")?`img\`${e}\``:e}getText(){var e=this.getValue();return"string"==typeof e&&-1!==e.indexOf("`")?e:super.getText()}render_(){var e;this.value_&&this.selectedOption_&&this.selectedOption_[1]!==this.value_&&(e=pxt.react.getTilemapProject().resolveTile(this.value_),s.cachedRevision=-1,e)&&(this.selectedOption_=[{src:i.bitmapToImageURI(pxt.sprite.Bitmap.fromData(e.bitmap),32,!1),width:32,height:32,alt:c(e)},this.value_,e]),super.render_()}doValueUpdate_(e){super.doValueUpdate_(e);var t=this.getOptions(!0);if(e){var n=pxt.parseAssetTSReference(e);e=(e=n?n.name:e).trim();for(const o of t)if(e===o[2].id||e===o[2].meta.displayName||e===pxt.getShortIDForAsset(o[2]))return this.selectedOption_=o,this.value_=this.getValue(),void this.updateAssetListener();this.selectedOption_=null,this.updateAssetListener()}}getOptions(e){return"function"!=typeof this.menuGenerator_?(this.transparent=o(),[this.transparent]):this.menuGenerator_.call(this)}dispose(){super.dispose(),pxt.react.getTilemapProject().removeChangeListener("tile",this.assetChangeListener)}updateAssetListener(){var e=pxt.react.getTilemapProject();e.removeChangeListener("tile",this.assetChangeListener),this.selectedOption_&&e.addChangeListener(this.selectedOption_[2],this.assetChangeListener)}}function o(){var e=pxt.react.getTilemapProject().getTransparency(16);return[{src:a(16),width:32,height:32,alt:pxt.U.lf("transparency")},e.id,e]}function a(n){var e=document.createElement("canvas"),o=e.getContext("2d");e.width=n,e.height=n,o.fillStyle="#aeaeae",o.fillRect(0,0,n,n),o.fillStyle="#dedede";for(let t=0;t<n;t+=4)for(let e=0;e<n;e+=4)t+e>>2&1&&o.fillRect(t,e,4,4);return e.toDataURL()}function l(e){switch(e){case"myTiles.transparency16":return 1;case"myTiles.transparency8":case"myTiles.transparency32":return 2;default:if(e.startsWith("myTiles.tile")){var t=parseInt(e.slice(12));if(!Number.isNaN(t))return t+2}return 9999999999}}function c(e){return e.meta.displayName||pxt.getShortIDForAsset(e)}i.FieldTileset=s}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldNumber{constructor(e,t,n){super(e,void 0,void 0,void 0,n),this.isFieldCustom_=!0,this.CURSOR="pointer",this.params=t,this.setValue(e),this.addArgType("toggle"),this.type_=t.type}init(){if(!this.fieldGroup_){this.fieldGroup_=Blockly.utils.dom.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),null!==this.getArgTypes()&&(this.sourceBlock_.isShadow()?this.sourceBlock_.svgGroup_:this.fieldGroup_).setAttribute("data-argument-type",this.getArgTypes()),!this.sourceBlock_.isShadow()&&this.sourceBlock_.inputList&&1<this.sourceBlock_.inputList.length&&(this.borderRect_=Blockly.utils.dom.createSvgElement("rect",{rx:Blockly.BlockSvg.CORNER_RADIUS,ry:Blockly.BlockSvg.CORNER_RADIUS,x:0,y:0,width:this.size_.width,height:this.size_.height,fill:this.sourceBlock_.getColour(),stroke:this.sourceBlock_.getColourTertiary()},null),this.fieldGroup_.insertBefore(this.borderRect_,this.textElement_));var e=this.getSize();switch(this.checkElement_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyToggle "+(this.state_?"blocklyToggleOn":"blocklyToggleOff"),transform:`translate(8, ${e.height/2})`},this.fieldGroup_),this.getOutputShape()){case Blockly.OUTPUT_SHAPE_HEXAGONAL:this.toggleThumb_=Blockly.utils.dom.createSvgElement("polygon",{class:"blocklyToggleRect",points:"-7,-14 -21,0 -7,14 7,14 21,0 7,-14",cursor:"pointer"},this.checkElement_);break;case Blockly.OUTPUT_SHAPE_ROUND:this.toggleThumb_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyToggleCircle",x:-6,y:-14,height:28,width:28,rx:14,ry:14,cursor:"pointer"},this.checkElement_);break;case Blockly.OUTPUT_SHAPE_SQUARE:this.toggleThumb_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyToggleRect",x:-6,y:-14,height:28,width:28,rx:3,ry:3,cursor:"pointer"},this.checkElement_)}var t=this.sourceBlock_.RTL?-e.width/2:e.width/2,t=(this.textElement_=Blockly.utils.dom.createSvgElement("text",{class:"blocklyText",x:t,dy:"0.6ex",y:e.height/2},this.fieldGroup_),this.updateEditable(),this.sourceBlock_.getSvgRoot());t.appendChild(this.fieldGroup_),t.querySelector(".blocklyBlockBackground").setAttribute("fill",this.sourceBlock_.getColourTertiary()),this.switchToggle(this.state_),this.setValue(this.getValue()),this.render_(),this.size_.width=0,this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)}}getDisplayText_(){return this.state_?this.getTrueText():this.getFalseText()}getTrueText(){return lf("True")}getFalseText(){return lf("False")}updateSize_(){switch(this.getOutputShape()){case Blockly.OUTPUT_SHAPE_ROUND:this.size_.width=2*this.getInnerWidth()-7;break;case Blockly.OUTPUT_SHAPE_HEXAGONAL:this.size_.width=2*this.getInnerWidth()+8-Math.floor(this.getInnerWidth()/2);break;case Blockly.OUTPUT_SHAPE_SQUARE:this.size_.width=9+2*this.getInnerWidth()}}getInnerWidth(){return 10*this.getMaxLength()}getMaxLength(){return Math.max(this.getTrueText().length,this.getFalseText().length)}getOutputShape(){return this.sourceBlock_.isShadow()?this.sourceBlock_.getOutputShape():Blockly.OUTPUT_SHAPE_SQUARE}doClassValidation_(e){return"boolean"==typeof this.fromVal(e)?e:"false"}applyColour(){var e=this.sourceBlock_.getColourTertiary();this.borderRect_?this.borderRect_.setAttribute("stroke",e):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",e)}getValue(){return this.toVal(this.state_)}doValueUpdate_(e){e=this.fromVal(e);this.state_!==e&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.state_,e)),this.state_=e,this.switchToggle(this.state_),this.isDirty_=!0)}switchToggle(r){if(this.checkElement_){this.updateSize_();var i=this.getSize(),s=this.getInnerWidth(),a=(r?(pxt.BrowserUtils.addClass(this.checkElement_,"blocklyToggleOn"),pxt.BrowserUtils.removeClass(this.checkElement_,"blocklyToggleOff")):(pxt.BrowserUtils.removeClass(this.checkElement_,"blocklyToggleOn"),pxt.BrowserUtils.addClass(this.checkElement_,"blocklyToggleOff")),this.getOutputShape());let e=0,t=0,n=0,o=0;switch(a){case Blockly.OUTPUT_SHAPE_HEXAGONAL:e=s;var l=(t=e/2)/2,l=(n=-t+l,o=-l),c=t;this.toggleThumb_.setAttribute("points",l+`,-14 ${l-14},0 ${l},14 ${c},14 ${c+14},0 ${c},-14`);break;case Blockly.OUTPUT_SHAPE_ROUND:case Blockly.OUTPUT_SHAPE_SQUARE:e=5+s,t=e/2,this.toggleThumb_.setAttribute("width",""+e),this.toggleThumb_.setAttribute("x","-"+t),n=o=a==Blockly.OUTPUT_SHAPE_SQUARE?2:-6}this.checkElement_.setAttribute("transform",`translate(${r?o+s+t:t+n}, ${i.height/2})`)}}render_(){var e;this.visible_&&this.textElement_&&(goog.dom.removeChildren(this.textElement_),e=document.createTextNode(this.getDisplayText_()),this.textElement_.appendChild(e),pxt.BrowserUtils.addClass(this.textElement_,"blocklyToggleText"),this.updateSize_(),e=this.size_.width,e=(this.state_?e+e/8:e/2)-e/2,this.textElement_.setAttribute("x",""+e)),this.borderRect_&&(this.borderRect_.setAttribute("width",""+this.size_.width),this.borderRect_.setAttribute("height",""+this.size_.height))}showEditor_(){var e=!this.state_;null!==e&&this.setValue(this.toVal(e))}toVal(e){return"number"==this.type_?String(e?"1":"0"):String(e?"true":"false")}fromVal(e){return"string"==typeof e?"1"==e||"TRUE"==e.toUpperCase():!!e}}e.FieldToggle=t}(pxtblockly=pxtblockly||{}),function(e){class t extends e.FieldToggle{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0}getTrueText(){return lf("HIGH")}getFalseText(){return lf("LOW")}}e.FieldToggleHighLow=t}(pxtblockly=pxtblockly||{}),function(e){class t extends e.FieldToggle{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0}getTrueText(){return lf("ON")}getFalseText(){return lf("OFF")}}e.FieldToggleOnOff=t}(pxtblockly=pxtblockly||{}),function(e){class t extends e.FieldToggle{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0}getTrueText(){return lf("UP")}getFalseText(){return lf("DOWN")}}e.FieldToggleUpDown=t;class n extends e.FieldToggle{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0}getTrueText(){return lf("DOWN")}getFalseText(){return lf("UP")}}e.FieldToggleDownUp=n}(pxtblockly=pxtblockly||{}),function(e){class t extends e.FieldToggle{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0}getTrueText(){return lf("WIN")}getFalseText(){return lf("LOSE")}}e.FieldToggleWinLose=t}(pxtblockly=pxtblockly||{}),function(e){class t extends e.FieldToggle{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0}getTrueText(){return lf("Yes")}getFalseText(){return lf("No")}}e.FieldToggleYesNo=t}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldTextInput{constructor(){super(...arguments),this.isFieldCustom_=!0,this.pythonMode=!1}updateEditable(){var e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(pxt.BrowserUtils.addClass(e,"blocklyEditableText"),pxt.BrowserUtils.removeClass(e,"blocklyGreyExpressionBlockText"),this.fieldGroup_.style.cursor=this.CURSOR):(pxt.BrowserUtils.addClass(e,"blocklyGreyExpressionBlockText"),pxt.BrowserUtils.removeClass(e,"blocklyEditableText"),this.fieldGroup_.style.cursor=""))}setPythonEnabled(e){e!==this.pythonMode&&(this.pythonMode=e,this.forceRerender())}getText(){return this.pythonMode?pxt.Util.lf("<python code>"):this.getValue()}applyColour(){this.sourceBlock_&&this.constants_.FULL_BLOCK_FIELDS&&this.borderRect_&&this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary)}}e.FieldTsExpression=t}(pxtblockly=pxtblockly||{}),function(e){class u extends Blockly.FieldSlider{constructor(e,t,n){super(String(e),"-200","200","1","10","TurnRatio",n),this.isFieldCustom_=!0,this.params=t,this.sliderColor_="#a8aaa8"}createLabelDom_(e){var t=document.createElement("div"),n=Blockly.utils.dom.createSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",height:u.HALF+u.HANDLE_RADIUS+10+"px",width:2*u.HALF+"px"},t),o=Blockly.utils.dom.createSvgElement("defs",{},n),o=Blockly.utils.dom.createSvgElement("marker",{id:"head",orient:"auto",markerWidth:"2",markerHeight:"4",refX:"0.1",refY:"1.5"},o),o=(Blockly.utils.dom.createSvgElement("path",{d:"M0,0 V3 L1.5,1.5 Z",fill:"#f12a21"},o),this.reporter_=pxsim.svg.child(n,"text",{x:u.HALF,y:96,"text-anchor":"middle","dominant-baseline":"middle",style:"font-size: 50px",class:"sim-text inverted number"}),this.path_=Blockly.utils.dom.createSvgElement("path",{x1:u.HALF,y1:u.HALF,"marker-end":"url(#head)",style:"fill: none; stroke: #f12a21; stroke-width: 10"},n),this.updateGraph_(),document.createElement("span"));return o.setAttribute("class","blocklyFieldSliderReadout"),[t,o]}updateGraph_(){if(this.path_){var t=goog.math.clamp(this.getValue()||0,-200,200),n=t/100,o=Math.max(-1,Math.min(1,n)),r=Math.max(o)*Math.PI/2,i=u.RADIUS-6;let e=u.HALF;var s=u.HALF-22,n=(1<Math.abs(n)&&(e-=(n-(0<n?1:-1))*i/2),.2+.5*Math.abs(o)),o=i*n,a=i*Math.sin(Math.PI/2-r),l=i*Math.cos(Math.PI/2-r),c=a-i*n*Math.cos(2*r),o=`M ${e} ${s} C ${e} ${s-o} ${e+(l-i*n*Math.sin(2*r))} ${s-c} ${e+l} `+(s-a);this.path_.setAttribute("d",o),this.reporter_.textContent=""+t}}setReadout_(e,t){this.updateGraph_()}}u.HALF=80,u.HANDLE_RADIUS=30,u.RADIUS=u.HALF-u.HANDLE_RADIUS-1,e.FieldTurnRatio=u}(pxtblockly=pxtblockly||{}),function(e){class t extends Blockly.FieldDropdown{constructor(e){var t;super((t=e,function(){const n=[];return this.sourceBlock_&&this.sourceBlock_.workspace?this.sourceBlock_.workspace.getVariablesOfType(t.name).forEach(e=>{var t=e.name.replace(/^\d+/,"");n.push([t,e.name])}):t.initialMembers.forEach(e=>n.push([e,e])),n.push([lf("Add a new {0}...",t.memberName),"CREATE"]),n})),this.opts=e}init(){super.init(),this.initVariables()}onItemSelected_(e,t){"CREATE"===t.getValue()?function i(s,a,l,c){Blockly.prompt(l,null,n=>{if(n){let t=!1;if(pxtc.isIdentifierStart(n.charCodeAt(0),2)){t=!0;for(let e=1;e<n.length;e++)pxtc.isIdentifierPart(n.charCodeAt(e),2)||(t=!1)}if(t){const o=u(s,a.name);for(let e=0;e<o.length;e++){const[d,r]=o[e];if(d===n)return void Blockly.alert(lf("A {0} named '{1}' already exists.",a.memberName,n),()=>i(s,a,l,c))}c(d(s,a,n))}else Blockly.alert(lf("Names must start with a letter and can only contain letters, numbers, '$', and '_'."),()=>i(s,a,l,c))}},{placeholder:a.promptHint})}(this.sourceBlock_.workspace,this.opts,lf("New {0}:",this.opts.memberName),e=>e&&this.setValue(e)):super.onItemSelected_(e,t)}doClassValidation_(t){var e;return null!=(e=this.opts)&&e.initialMembers&&!this.opts.initialMembers.find(e=>e==t)&&this.getOptions(),super.doClassValidation_(t)}initVariables(){if(this.sourceBlock_&&this.sourceBlock_.workspace){const n=this.sourceBlock_.workspace,o=u(n,this.opts.name);var e;this.opts.initialMembers.forEach(t=>{o.some(([e])=>e===t)||d(n,this.opts,t)}),"CREATE"===this.getValue()&&(e=function(e,t,n){var o=e.getVariablesOfType(t);if(o&&o.length)for(let e=0;e<o.length;e++){const[t]=r(o[e]);if(t===n)return o[e].name}}(n,this.opts.name,this.opts.initialMembers[0]))&&this.setValue(e)}}}function r(e){var t=/^(\d+)([^0-9].*)$/.exec(e.name);return t?[t[2],parseInt(t[1])]:[e.name,-1]}function u(e,t){e=e.getVariablesOfType(t);return e&&e.length?e.map(r):[]}function o(t,e){var n=t.map(([,e])=>e);if(e.isBitMask){for(let e=0;e<n.length;e++){var o=1<<e;if(n.indexOf(o)<0)return o}return 1<<n.length}if(e.isHash)return 0;{const t=e.firstValue||0;for(let e=0;e<n.length;e++)if(n.indexOf(t+e)<0)return t+e;return t+n.length}}function d(e,t,n){n=o(u(e,t.name),t)+n;return Blockly.Variables.getOrCreateVariablePackage(e,null,n,t.name),n}e.FieldUserEnum=t,e.getNextValue=o}(pxtblockly=pxtblockly||{}),function(n){var e;function s(e,t){for(const n of e.getVariablesOfType(pxt.sprite.BLOCKLY_TILESET_TYPE))if(parseInt(n.name.substr(0,n.name.indexOf(";")))===t.projectId){e.deleteVariableById(n.getId());break}}function a(e){return o(e,e=>e instanceof n.FieldTilemap&&!e.isGreyBlock)}function l(e){return o(e,e=>e instanceof n.FieldTileset)}function o(e,o){const r=[];return e.getTopBlocks(!1).forEach(e=>function e(t){for(const n of t.inputList){for(const e of n.fieldRow)o(e)&&r.push({block:t,field:e.name,ref:e});n.connection&&n.connection.targetBlock()&&e(n.connection.targetBlock())}t.nextConnection&&t.nextConnection.targetBlock()&&e(t.nextConnection.targetBlock())}(e)),r}(e=n.svg||(n.svg={})).hasClass=function(e,t){return pxt.BrowserUtils.containsClass(e,t)},e.addClass=function(e,t){pxt.BrowserUtils.addClass(e,t)},e.removeClass=function(e,t){pxt.BrowserUtils.removeClass(e,t)},n.parseColour=function(e){var t=Number(e);return isNaN(t)?goog.isString(e)&&e.match(/^#[0-9a-fA-F]{6}$/)?e:"#000":Blockly.hueToRgb(t)},n.bitmapToImageURI=function(n,e,o){var r=pxt.appTarget.runtime.palette.slice(1),t=document.createElement("canvas"),i=(t.width=e,t.height=e,Math.min(e/n.width,e/n.height)),s=Math.max(Math.floor(e*(1-n.width/n.height)/2),0),a=Math.max(Math.floor(e*(1-n.height/n.width)/2),0);let l;o?((l=t.getContext("2d",{alpha:!1})).fillStyle="#dedede",l.fillRect(0,0,e,e)):l=t.getContext("2d");for(let t=0;t<n.width;t++)for(let e=0;e<n.height;e++){var c=n.get(t,e);c?(l.fillStyle=r[c-1],l.fillRect(s+t*i,a+e*i,i,i)):o&&(l.fillStyle="#dedede",l.fillRect(s+t*i,a+e*i,i,i))}return t.toDataURL()},n.tilemapToImageURI=function(n,o,r){var i=pxt.appTarget.runtime.palette.slice(),e=document.createElement("canvas"),s=(e.width=o,e.height=o,Math.min(o/n.tilemap.width,o/n.tilemap.height)),a=Math.max(Math.floor(o*(1-n.tilemap.width/n.tilemap.height)/2),0),l=Math.max(Math.floor(o*(1-n.tilemap.height/n.tilemap.width)/2),0);let c;r?((c=e.getContext("2d",{alpha:!1})).fillStyle="#dedede",c.fillRect(0,0,o,o)):c=e.getContext("2d");var u=[];for(let t=0;t<n.tilemap.width;t++)for(let e=0;e<n.tilemap.height;e++){var d=n.tilemap.get(t,e);if(d){if(!u[d]){const o=n.tileset.tiles[d];u[d]=o?pxt.sprite.computeAverageColor(pxt.sprite.Bitmap.fromData(o.bitmap),i):"#dedede"}c.fillStyle=u[d],c.fillRect(a+t*s,l+e*s,s,s)}else r&&(c.fillStyle="#dedede",c.fillRect(a+t*s,l+e*s,s,s))}return e.toDataURL()},n.getAllBlocksWithTilemaps=a,n.getAllBlocksWithTilesets=l,n.needsTilemapUpgrade=function(e){return!!e.getVariablesOfType(pxt.sprite.BLOCKLY_TILESET_TYPE).map(e=>pxt.sprite.legacy.blocklyVariableToTile(e.name)).length},n.upgradeTilemapsInWorkspace=function(e,o){var t=e.getVariablesOfType(pxt.sprite.BLOCKLY_TILESET_TYPE).map(e=>pxt.sprite.legacy.blocklyVariableToTile(e.name));if(t.length)try{Blockly.Events.disable();let n=[];for(const a of t)a.qualifiedName?n[a.projectId]=o.resolveTile(a.qualifiedName):a.data&&(n[a.projectId]=o.createNewTile(a.data,"myTiles.tile"+a.projectId)),s(e,a);var r=a(e);for(const e of r){const s=pxt.sprite.legacy.decodeTilemap(e.ref.getInitText(),"typescript"),a=[],l=new pxt.sprite.TilemapData(s.tilemap,{tileWidth:s.tileset.tileWidth,tiles:s.tileset.tiles.map((e,t)=>null!=e.projectId?n[e.projectId]:(a[t]||(a[t]=o.resolveTile(e.qualifiedName)),a[t]))},s.layers);e.ref.setValue(pxt.sprite.encodeTilemap(l,"typescript"))}var i=l(e);for(const e of i)e.ref.doValueUpdate_(e.ref.getValue()),e.ref.isDirty_&&e.ref.forceRerender()}finally{Blockly.Events.enable()}},n.getAllReferencedTiles=function(e,t){var n;let o={};var r=a(e),i=pxt.react.getTilemapProject();for(const e of r)if(e.block.id!==t)for(const t of(null==(n=e.ref.getTileset())?void 0:n.tiles)||[])o[t.id]=i.lookupAsset("tile",t.id);for(const e of i.getAssets("tilemap"))for(const t of e.data.tileset.tiles)o[t.id]=i.lookupAsset("tile",t.id);r=l(e);for(const e of r){const t=e.ref.getValue(),n=/^\s*assets\s*\.\s*tile\s*`([^`]*)`\s*$/.exec(t);if(n){const e=i.lookupAssetByName("tile",n[1]);e&&!o[e.id]&&(o[e.id]=e)}else o[t]||(o[t]=i.resolveTile(t))}return Object.keys(o).map(e=>o[e]).filter(e=>!!e)},n.getTemporaryAssets=function(e,t){switch(t){case"image":return o(e,e=>e instanceof n.FieldSpriteEditor&&e.isTemporaryAsset()).map(e=>e.ref.getAsset());case"animation":return o(e,e=>e instanceof n.FieldAnimationEditor&&e.isTemporaryAsset()).map(e=>e.ref.getAsset());default:return[]}}}(pxtblockly=pxtblockly||{}),function(r){{var i=r.editor||(r.editor={}),s;let e,t,n,o;(s=e=i.SimState||(i.SimState={}))[s.Stopped=0]="Stopped",s[s.Pending=1]="Pending",s[s.Starting=2]="Starting",s[s.Running=3]="Running",i.isBlocks=function(e){return r.U.endsWith(e.name,".blocks")},(s=t=i.ErrorListState||(i.ErrorListState={})).HeaderOnly="errorListHeader",s.Expanded="errorListExpanded",(s=n=i.FilterState||(i.FilterState={}))[s.Hidden=0]="Hidden",s[s.Visible=1]="Visible",s[s.Disabled=2]="Disabled",i.initExtensionsAsync=e=>Promise.resolve({}),i.initFieldExtensionsAsync=e=>Promise.resolve({}),i.HELP_IMAGE_URI="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAyNiAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTMiIGN5PSIxMyIgcj0iMTMiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNy45NTIgOS4xODQwMkMxNy45NTIgMTAuMjU2IDE3LjgxNiAxMS4wNzIgMTcuNTQ0IDExLjYzMkMxNy4yODggMTIuMTkyIDE2Ljc1MiAxMi43OTIgMTUuOTM2IDEzLjQzMkMxNS4xMiAxNC4wNzIgMTQuNTc2IDE0LjU4NCAxNC4zMDQgMTQuOTY4QzE0LjA0OCAxNS4zMzYgMTMuOTIgMTUuNzM2IDEzLjkyIDE2LjE2OFYxNi45NkgxMS44MDhDMTEuNDI0IDE2LjQ2NCAxMS4yMzIgMTUuODQgMTEuMjMyIDE1LjA4OEMxMS4yMzIgMTQuNjg4IDExLjM4NCAxNC4yODggMTEuNjg4IDEzLjg4OEMxMS45OTIgMTMuNDg4IDEyLjUzNiAxMi45NjggMTMuMzIgMTIuMzI4QzE0LjEwNCAxMS42NzIgMTQuNjI0IDExLjE2OCAxNC44OCAxMC44MTZDMTUuMTM2IDEwLjQ0OCAxNS4yNjQgOS45NjgwMiAxNS4yNjQgOS4zNzYwMkMxNS4yNjQgOC4yMDgwMiAxNC40MTYgNy42MjQwMiAxMi43MiA3LjYyNDAyQzExLjc2IDcuNjI0MDIgMTAuNzUyIDcuNzM2MDIgOS42OTYgNy45NjAwMkw5LjE0NCA4LjA4MDAyTDkgNi4wODgwMkMxMC40ODggNS41NjAwMiAxMS44NCA1LjI5NjAyIDEzLjA1NiA1LjI5NjAyQzE0LjczNiA1LjI5NjAyIDE1Ljk2OCA1LjYwODAyIDE2Ljc1MiA2LjIzMjAyQzE3LjU1MiA2Ljg0MDAyIDE3Ljk1MiA3LjgyNDAyIDE3Ljk1MiA5LjE4NDAyWk0xMS40IDIyVjE4LjY0SDE0LjE4NFYyMkgxMS40WiIgZmlsbD0iIzU5NUU3NCIvPgo8L3N2Zz4K",i.initEditorExtensionsAsync=function(){if(!o&&(o=Promise.resolve(),r.appTarget)&&r.appTarget.appTheme&&r.appTarget.appTheme.extendFieldEditors){const e={};o=o.then(()=>r.BrowserUtils.loadBlocklyAsync()).then(()=>r.BrowserUtils.loadScriptAsync("fieldeditors.js")).then(()=>r.editor.initFieldExtensionsAsync(e)).then(e=>{e.fieldEditors&&e.fieldEditors.forEach(e=>{r.blocks.registerFieldEditor(e.selector,e.editor,e.validator)})})}return o}}}(pxt=pxt||{}),function(s){{var e=s.editor||(s.editor={});const l={};function a(e,t,n,o){e.response&&window.parent.postMessage({type:e.type,id:e.id,resp:t,success:n,error:o},"*")}function i(o){return new Promise((e,t)=>{var n=s.Util.clone(o);n.id=ts.pxtc.Util.guidGen(),o.response&&(l[n.id]={resolve:e,reject:t}),window.parent.postMessage(n,"*"),o.response||e(void 0)})}e.bindEditorMessages=function(n){const t=(s.appTarget.appTheme.allowParentController||s.shell.isControllerMode())&&s.BrowserUtils.isIFrame(),o=s.appTarget.appTheme.allowPackageExtensions,i=s.appTarget.appTheme.allowSimulatorTelemetry;(t||o||i)&&window.addEventListener("message",e=>{const r=e.data;if(!r||!/^pxt(host|editor|pkgext|sim)$/.test(r.type))return!1;if("pxtpkgext"===r.type&&o)n().then(e=>{e.handleExtensionRequest(r)});else if("pxtsim"===r.type&&i){const n=r;"event"===n.action&&(n.category||n.message?s.reportError(n.category,n.message,n.data):s.tickEvent(n.tick,n.data))}else if(t){let t,e=Promise.resolve();if("pxthost"==r.type){const n=l[r.id];n?e=e.then(()=>n.resolve(r)):s.debug("pxthost: unknown request "+r.id)}else"pxteditor"==r.type&&(e=e.then(()=>n().then(n=>{const o=r;switch(s.debug("pxteditor: "+o.action),o.action.toLowerCase()){case"switchjavascript":return Promise.resolve().then(()=>n.openJavaScript());case"switchpython":return Promise.resolve().then(()=>n.openPython());case"switchblocks":return Promise.resolve().then(()=>n.openBlocks());case"startsimulator":return Promise.resolve().then(()=>n.startSimulator());case"restartsimulator":return Promise.resolve().then(()=>n.restartSimulator());case"hidesimulator":return Promise.resolve().then(()=>n.collapseSimulator());case"showsimulator":return Promise.resolve().then(()=>n.expandSimulator());case"closeflyout":return Promise.resolve().then(()=>n.closeFlyout());case"unloadproject":return Promise.resolve().then(()=>n.unloadProjectAsync());case"saveproject":return n.saveProjectAsync();case"redo":return Promise.resolve().then(()=>{var e=n.editor;e&&e.hasRedo()&&e.redo()});case"undo":return Promise.resolve().then(()=>{var e=n.editor;e&&e.hasUndo()&&e.undo()});case"setscale":{const s=r;return Promise.resolve().then(()=>n.editor.setScale(s.scale))}case"stopsimulator":{const s=r;return Promise.resolve().then(()=>n.stopSimulator(s.unload))}case"newproject":{const s=r;return Promise.resolve().then(()=>n.newProject(s.options))}case"importproject":{const s=r;return Promise.resolve().then(()=>n.importProjectAsync(s.project,{filters:s.filters,searchBar:s.searchBar}))}case"openheader":{const s=r;return n.openProjectByHeaderIdAsync(s.headerId)}case"startactivity":{const o=r;let e,t=o.path;return/^([jt]s|py|blocks?):/i.test(t)&&(e=/^py:/i.test(t)?s.PYTHON_PROJECT_NAME:/^[jt]s:/i.test(t)?s.JAVASCRIPT_PROJECT_NAME:s.BLOCKS_PROJECT_NAME,t=t.substr(t.indexOf(":")+1)),Promise.resolve().then(()=>n.startActivity({activity:o.activityType,path:t,title:o.title,editor:e,previousProjectHeaderId:o.previousProjectHeaderId,carryoverPreviousCode:o.carryoverPreviousCode}))}case"importtutorial":{const s=r;return Promise.resolve().then(()=>n.importTutorialAsync(s.markdown))}case"proxytosim":{const s=r;return Promise.resolve().then(()=>n.proxySimulatorMessage(s.content))}case"renderblocks":{const s=r;return Promise.resolve().then(()=>n.renderBlocksAsync(s)).then(e=>e.xml.then(e=>{t=e.xml}))}case"renderpython":{const s=r;return Promise.resolve().then(()=>n.renderPythonAsync(s)).then(e=>{t=e.python})}case"toggletrace":{const s=r;return Promise.resolve().then(()=>n.toggleTrace(s.intervalSpeed))}case"settracestate":{const s=r;return Promise.resolve().then(()=>n.setTrace(s.enabled,s.intervalSpeed))}case"setsimulatorfullscreen":{const s=r;return Promise.resolve().then(()=>n.setSimulatorFullScreen(s.enabled))}case"togglehighcontrast":return Promise.resolve().then(()=>n.toggleHighContrast());case"togglegreenscreen":return Promise.resolve().then(()=>n.toggleGreenScreen());case"print":return Promise.resolve().then(()=>n.printCode());case"pair":return n.pairAsync();case"info":return Promise.resolve().then(()=>{t={versions:s.appTarget.versions,locale:ts.pxtc.Util.userLanguage(),availableLocales:s.appTarget.appTheme.availableLocales}});case"shareproject":{const s=r;return n.anonymousPublishHeaderByIdAsync(s.headerId).then(e=>{t=e})}case"savelocalprojectstocloud":{const s=r;return n.saveLocalProjectsToCloudAsync(s.headerIds).then(e=>{t={headerIdMap:e}})}case"requestprojectcloudstatus":{const s=r;return n.requestProjectCloudStatus(s.headerIds)}case"convertcloudprojectstolocal":{const s=r;return n.convertCloudProjectsToLocal(s.userId)}case"setlanguagerestriction":{const s=r;if("no-blocks"===s.restriction)throw console.warn("no-blocks language restriction is not supported"),new Error("no-blocks language restriction is not supported");return n.setLanguageRestrictionAsync(s.restriction)}}return Promise.resolve()})));e.then(()=>a(r,t,!0,void 0),e=>a(r,t,!1,e))}return!0},!1)},e.enableControllerAnalytics=function(){if(s.appTarget.appTheme.allowParentController&&s.BrowserUtils.isIFrame()){const n=s.tickEvent,o=(s.tickEvent=function(e,t){n&&n(e,t),i({type:"pxthost",action:"event",tick:e,response:!1,data:t})},s.reportException),r=(s.reportException=function(e,t){o&&o(e,t);try{i({type:"pxthost",action:"event",tick:"error",message:e.message,response:!1,data:t})}catch(e){}},s.reportError);s.reportError=function(e,t,n){r&&r(e,t,n),i({type:"pxthost",action:"event",tick:"error",category:e,message:t,data:n})}}},e.shouldPostHostMessages=function(){return s.appTarget.appTheme.allowParentController&&s.BrowserUtils.isIFrame()},e.postHostMessageAsync=i}}(pxt=pxt||{}),function(r){function n(e){return"experiments-"+("object"==typeof e?e.id:e)}function o(){const n=r.savedAppTheme(),o={},e=i();return e.forEach(e=>{var t=s(e);n[e.id]=!!t,t&&(o[e.id]=t?1:0)}),e.length&&Object.keys(o).length&&(r.tickEvent("experiments.loaded",o),r.reloadAppTargetVariant()),r.appTarget.appTheme}function i(){const t=r.appTarget.appTheme.experiments;return t?[{id:"print",name:lf("Print Code"),description:lf("Print the code from the current project"),feedbackUrl:"https://github.com/microsoft/pxt/issues/4740"},{id:"greenScreen",name:lf("Green screen"),description:lf("Display a webcam video stream or a green background behind the code."),feedbackUrl:"https://github.com/microsoft/pxt/issues/4738"},{id:"allowPackageExtensions",name:lf("Editor Extensions"),description:lf("Allow Extensions to add buttons in the editor."),feedbackUrl:"https://github.com/microsoft/pxt/issues/4741"},{id:"instructions",name:lf("Wiring Instructions"),description:lf("Generate step-by-step assembly instructions for breadboard wiring."),feedbackUrl:"https://github.com/microsoft/pxt/issues/4739"},{id:"debugger",name:lf("Debugger"),description:lf("Step through code and inspect variables in the debugger"),feedbackUrl:"https://github.com/microsoft/pxt/issues/4729"},{id:"bluetoothUartConsole",name:"Bluetooth Console",description:lf("Receives UART message through Web Bluetooth"),feedbackUrl:"https://github.com/microsoft/pxt/issues/4796"},{id:"bluetoothPartialFlashing",name:"Bluetooth Download",description:lf("Download code via Web Bluetooth"),feedbackUrl:"https://github.com/microsoft/pxt/issues/4807"},{id:"simScreenshot",name:lf("Simulator Screenshots"),description:lf("Download screenshots of the simulator"),feedbackUrl:"https://github.com/microsoft/pxt/issues/5232"},{id:"python",name:lf("Static Python"),description:lf("Use Static Python to code your device"),feedbackUrl:"https://github.com/microsoft/pxt/issues/5390"},{id:"simGif",name:lf("Simulator Gifs"),description:lf("Download gifs of the simulator"),feedbackUrl:"https://github.com/microsoft/pxt/issues/5297"},{id:"qrCode",name:lf("Shared QR Code"),description:lf("Generate a QR Code form the shared project url"),feedbackUrl:"https://github.com/microsoft/pxt/issues/5456"},{id:"importExtensionFiles",name:lf("Import Extension Files"),description:lf("Import Extensions from compiled project files")},{id:"debugExtensionCode",name:lf("Debug Extension Code"),description:lf("Use the JavaScript debugger to debug extension code")},{id:"snippetBuilder",name:lf("Snippet Builder"),description:lf("Try out the new snippet dialogs.")},{id:"experimentalHw",name:lf("Experimental Hardware"),description:lf("Enable support for hardware marked 'experimental' in the hardware seletion dialog")},{id:"checkForHwVariantWebUSB",name:lf("Detect Hardware with WebUSB"),description:lf("When compiling, use WebUSB to detect hardware configuration.")},{id:"githubEditor",name:lf("GitHub editor"),description:lf("Review, commit and push to GitHub."),feedbackUrl:"https://github.com/microsoft/pxt/issues/6419",enableOnline:!0},{id:"githubCompiledJs",name:lf("GitHub Pages JavaScript"),description:lf("Commit compiled javascript when creating a release"),enableOnline:!0},{id:"blocksCollapsing",name:lf("Collapse blocks"),description:lf("Collapse and expand functions or event blocks")},{id:"tutorialBlocksDiff",name:lf("Tutorial Block Diffs"),description:lf("Automatially render blocks diff in tutorials")},{id:"openProjectNewTab",name:lf("Open in New Tab"),description:lf("Open an editor in a new tab.")},{id:"openProjectNewDependentTab",name:lf("Open in New Connected Tab"),description:lf("Open connected editors in different browser tabs.")},{id:"accessibleBlocks",name:lf("Accessible Blocks"),description:lf("Use the WASD keys to move and modify blocks."),feedbackUrl:"https://github.com/microsoft/pxt/issues/6850"},{id:"errorList",name:lf("Error List"),description:lf("Show an error list panel for JavaScript and Python.")},{id:"blocksErrorList",name:lf("Blocks Error List"),description:lf("Show an error list panel for Blocks")}].filter(e=>-1<t.indexOf(e.id)&&!(r.BrowserUtils.isPxtElectron()&&e.enableOnline)):[]}function s(e){return!!r.storage.getLocal(n(e))}function t(e,t){t!=s(e)&&(t?r.storage.setLocal(n(e),"1"):r.storage.removeLocal(n(e)),o())}var e;(e=(e=r.editor||(r.editor={})).experiments||(e.experiments={})).syncTheme=o,e.all=i,e.clear=function(){i().forEach(e=>r.storage.removeLocal(n(e))),o()},e.someEnabled=function(){return i().some(e=>s(e))},e.isEnabled=s,e.toggle=function(e){t(e,!s(e))},e.state=function(){const t={};return i().forEach(e=>t[e.id]=s(e)),JSON.stringify(t)},e.setState=t}(pxt=pxt||{}),function(i){function s(e){var t=i.appTarget.appTheme.invertedMonaco,n=!(!i.appTarget.appTheme.monacoFieldEditors||!i.appTarget.appTheme.monacoFieldEditors.length),o=i.BrowserUtils.isAndroid(),e=monaco.editor.create(e,{model:null,ariaLabel:i.Util.lf("JavaScript editor"),fontFamily:"'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', 'monospace'",scrollBeyondLastLine:!0,language:"typescript",mouseWheelZoom:!1,wordBasedSuggestions:!0,lineNumbersMinChars:3,formatOnPaste:!0,folding:n,glyphMargin:n||i.appTarget.appTheme.debugger,minimap:{enabled:!1},fixedOverflowWidgets:!0,autoIndent:"full",useTabStops:!0,dragAndDrop:!0,matchBrackets:"always",occurrencesHighlight:!1,quickSuggestionsDelay:200,theme:t?"vs-dark":"vs",renderIndentGuides:!0,accessibilityHelpUrl:"",quickSuggestions:{other:!o,comments:!o,strings:!o},acceptSuggestionOnCommitCharacter:!o,acceptSuggestionOnEnter:o?"off":"on",accessibilitySupport:o?"off":"on"});return e.layout(),e}var e;(e=i.vs||(i.vs={})).syncModels=function(t,r,i,e){if(!e){let e=monaco.languages.typescript.typescriptDefaults.getExtraLibs(),o={};t.sortedDeps().forEach(n=>{n.getFiles().forEach(e=>{var t=n.id+"/"+e;/\.(ts)$/.test(e)&&t!=i&&(monaco.languages.typescript.typescriptDefaults.getExtraLibs()[t]||(e=n.readFile(e)||"\n",r[t]=monaco.languages.typescript.typescriptDefaults.addExtraLib(e,t)),o[t]="1")})}),Object.keys(e).filter(e=>/\.(ts)$/.test(e)&&!o[e]).forEach(e=>{r[e].dispose()})}},e.initMonacoAsync=function(r){return new Promise((n,e)=>{if("object"==typeof window.monaco)n(s(r));else{let t=window.MonacoPaths,e=()=>{var e=window.require;e.config({paths:t}),e(["vs/editor/editor.main"],()=>{monaco.languages.register({id:"asm",extensions:[".asm"]}),monaco.languages.setMonarchTokensProvider("asm",{tokenPostfix:"",keywords:["movs","mov","adds","add","adcs","adr","subs","sbcs","sub","rsbs","muls","cmp","cmn","ands","eors","orrs","bics","mvns","tst","lsls","lsrs","asrs","rors","ldr","ldrh","ldrb","ldrsh","ldrsb","ldm","str","strh","strb","stm","push","pop","cbz","cbnz","b","bl","bx","blx","sxth","sxtb","uxth","uxtb","rev","rev16","revsh","svc","cpsid","cpsie","setend","bkpt","nop","sev","wfe","wfi","yield","beq","bne","bcs","bhs","bcc","blo","bmi","bpl","bvs","bvc","bhi","bls","bge","blt","bgt","ble","bal","r0","r1","r2","r3","r4","r5","r6","r7","r8","r9","r10","r11","r12","r13","r14","r15","pc","sp","lr"],typeKeywords:[".startaddr",".hex",".short",".space",".section",".string",".byte"],operators:[],symbols:/[:\*]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/(\.)?[a-z_$\.][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/@\s*[a-zA-Z_\$][\w\$]*/,{token:"annotation"}],[/(#|(0[xX]))?[0-9a-fA-F]+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/;.*$/,"comment"]]}}),monaco.languages.typescript&&(monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0,noSemanticValidation:!0}),monaco.languages.typescript.typescriptDefaults.setWorkerOptions({customWorkerPath:i.webConfig.typeScriptWorkerJs}),monaco.languages.typescript.typescriptDefaults.setCompilerOptions({allowUnreachableCode:!0,noImplicitAny:!0,allowJs:!1,allowUnusedLabels:!0,target:monaco.languages.typescript.ScriptTarget.ES5,outDir:"built",rootDir:".",noLib:!0,mouseWheelZoom:!1})),n(s(r))})};var o;window.require?e():((o=document.createElement("script")).type="text/javascript",o.src=t["vs/loader"],o.addEventListener("load",e),document.body.appendChild(o))}})},e.createEditor=s}(pxt=pxt||{}),function(n){(n.workspace||(n.workspace={})).freshHeader=function(e,t){return{target:n.appTarget.id,targetVersion:n.appTarget.versions.target,name:e,meta:{},editor:n.JAVASCRIPT_PROJECT_NAME,pubId:"",pubCurrent:!1,_rev:null,id:n.U.guidGen(),recentUse:t,modificationTime:t,cloudUserId:null,cloudCurrent:!1,cloudVersion:null,cloudLastSyncTime:0,isDeleted:!1}}}(pxt=pxt||{}),function(e){{e=e.editor||(e.editor={});const n={};e.registerMonacoFieldEditor=function(e,t){n[e]=t},e.getMonacoFieldEditor=function(e){return n[e]}}}(pxt=pxt||{}),function(o){(o.editor||(o.editor={})).MonacoReactFieldEditor=class{getId(){return"image-editor"}showEditorAsync(e,t,n){return this.fileType=e,this.editrange=t,this.host=n,this.initAsync().then(()=>{var e=this.textToValue(n.getText(t));return e?(this.fv=o.react.getFieldEditorView(this.getFieldEditorId(),e,this.getOptions()),this.fv.onHide(()=>{this.onClosed()}),this.fv.show(),new Promise((e,t)=>{this.resolver=e,this.rejecter=t})):Promise.resolve(null)})}onClosed(){this.resolver&&(this.resolver({range:this.editrange,replacement:this.resultToText(this.fv.getResult())}),this.editrange=void 0,this.resolver=void 0,this.rejecter=void 0)}dispose(){this.onClosed()}initAsync(){return Promise.resolve()}textToValue(e){return null}resultToText(e){return e+""}getFieldEditorId(){return""}getOptions(){return null}}}(pxt=pxt||{}),function(i){{var e=i.editor||(i.editor={}),t="image-editor";class n extends e.MonacoReactFieldEditor{textToValue(e){this.isPython=-1===e.indexOf("`");var t=i.parseAssetTSReference(e);if(t){const{type:e,name:n}=t,o=n.trim(),r=i.react.getTilemapProject();this.isAsset=!0;t=r.lookupAssetByName("image",o);if(t)return t;{const e=r.createNewImage();return o&&!r.isNameTaken("image",o)&&i.validateAssetName(o)&&(e.meta.displayName=o),e}}return{type:"image",id:"",internalID:0,bitmap:i.sprite.imageLiteralToBitmap(e).data(),meta:{},jresData:""}}resultToText(e){var t;if(null!=(t=e.meta)&&t.displayName){const t=i.react.getTilemapProject();return e=this.isAsset||t.lookupAsset(e.type,e.id)?t.updateAsset(e):t.createNewProjectImage(e.bitmap,e.meta.displayName),this.isAsset=!0,i.getTSReferenceForAsset(e,this.isPython)}return i.sprite.bitmapToImageLiteral(i.sprite.Bitmap.fromData(e.bitmap),this.isPython?"python":"typescript")}getFieldEditorId(){return"image-editor"}getOptions(){return{initWidth:16,initHeight:16,blocksInfo:this.host.blocksInfo()}}}e.MonacoSpriteEditor=n,e.spriteEditorDefinition={id:t,foldMatches:!0,glyphCssClass:"sprite-editor-glyph sprite-focus-hover",heightInPixels:510,matcher:{searchString:'(?:img|assets\\s*\\.\\s*image)\\s*(?:`|\\(\\s*""")(?:(?:[^(){}:\\[\\]"\';?/,+\\-=*&|^%!`~]|\\n)*)\\s*(?:`|"""\\s*\\))',isRegex:!0,matchCase:!0,matchWholeWord:!1},proto:n},e.registerMonacoFieldEditor(t,e.spriteEditorDefinition)}}(pxt=pxt||{}),function(r){{var e=r.editor||(r.editor={}),t="tilemap-editor";class n extends e.MonacoReactFieldEditor{textToValue(e){var e=this.readTilemap(e),t=r.react.getTilemapProject();return r.sprite.addMissingTilemapTilesAndReferences(t,e),e}readTilemap(t){var n=r.react.getTilemapProject();if(/^\s*tiles\s*\./.test(t)&&(this.isTilemapLiteral=!1,t)){try{return{type:"tilemap",id:"",internalID:0,meta:{},data:r.sprite.decodeTilemap(t,"typescript",n)}}catch(e){}return null}this.isTilemapLiteral=!0;var t=/^\s*(tilemap(?:8|16|32)?)\s*(?:`([^`]*)`)|(?:\(\s*"""([^"]*)"""\s*\))\s*$/.exec(t),e=(t[2]||t[3]||"").trim();let o;if(this.tilemapLiteral=t[1],e&&(t=ts.pxtc.escapeIdentifier(e),o=n.getTilemap(t)),!o){let e=16;"tilemap8"===this.tilemapLiteral?e=8:"tilemap32"===this.tilemapLiteral&&(e=32);const[t]=n.createNewTilemap(void 0,e,16,16);o=n.getTilemap(t),t}return o}resultToText(e){var t=r.react.getTilemapProject();return t.pushUndo(),r.sprite.updateTilemapReferencesFromResult(t,e),this.isTilemapLiteral?(t.updateAsset(e),r.getTSReferenceForAsset(e,"python"===this.fileType)):r.sprite.encodeTilemap(e.data,"typescript"===this.fileType?"typescript":"python")}getFieldEditorId(){return"tilemap-editor"}getOptions(){return{initWidth:16,initHeight:16,blocksInfo:this.host.blocksInfo()}}getCreateTilemapRange(){var t=this.editrange.getStartPosition();let e,n=this.editrange.getEndPosition(),o=1;for(;;){e=new monaco.Range(n.lineNumber,n.column,n.lineNumber+1,0);var r=this.host.getText(e);for(let e=0;e<r.length;e++)if("("===r.charAt(e))o++;else if(")"===r.charAt(e)&&0===--o){const o=new monaco.Position(n.lineNumber,n.column+e+2);return monaco.Range.fromPositions(t,o)}if((n=e.getEndPosition()).lineNumber>t.lineNumber+20)return null}}}e.MonacoTilemapEditor=n,e.tilemapEditorDefinition={id:t,foldMatches:!0,alwaysBuildOnClose:!0,glyphCssClass:"sprite-focus-hover ms-Icon ms-Icon--Nav2DMapView",heightInPixels:510,weight:5,matcher:{searchString:'(?:tilemap(?:8|16|32)?\\s*(?:`|\\(""")(?:[ a-zA-Z0-9_]|\\n)*\\s*(?:`|"""\\)))|(?:tiles\\s*\\.\\s*createTilemap\\s*\\([^\\)]+\\))',isRegex:!0,matchCase:!0,matchWholeWord:!1},proto:n},e.registerMonacoFieldEditor(t,e.tilemapEditorDefinition)}}(pxt=pxt||{}),function(e){{e=e.accessibility||(e.accessibility={});let t;e.makeFocusable=function(e){e.setAttribute("focusable","true"),e.setAttribute("tabindex","0")},e.enableKeyboardInteraction=function(e,t,n){t&&e.addEventListener("keydown",e=>{e="number"==typeof e.which?e.which:e.keyCode;32!==e&&13!==e||t()}),n&&e.addEventListener("keyup",e=>{e="number"==typeof e.which?e.which:e.keyCode;32!==e&&13!==e||n()})},e.setAria=function(e,t,n){t&&!e.hasAttribute("role")&&e.setAttribute("role",t),n&&!e.hasAttribute("aria-label")&&e.setAttribute("aria-label",n)},e.setLiveContent=function(e){t||((t=document.createElement("div")).setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-hidden","false"),t.setAttribute("style","position: absolute !important;display: block;visibility: visible;overflow: hidden;width: 1px;height: 1px;margin: -1px;border: 0;padding: 0;clip: rect(0 0 0 0);"),document.body.appendChild(t)),t.textContent!==e&&(t.textContent=e)}}}(pxsim=pxsim||{}),function(h){const u="blue",d="orange",r=e=>0<e.reduce((e,t)=>e+(t?1:0),0);function _(e,t){var n,o,r={};for(n in e)r[n]=e[n];for(o in t)r[o]=t[o];return r}function c(e){h.U.assert(!!e,"Invalid pin: "+e);e=/^(\w+)\.\s*(?:[a-z]*)?([A-Z][A-Z\d_]+)$/.exec(e);return e?e[2]:void 0}function p(e){return"-Z"===e.orientation&&"male"===e.style}h.readPin=c;class t{constructor(e){this.availablePowerPins={top:{fiveVolt:h.mkRange(26,51).map(e=>({type:"breadboard",row:"+",col:""+e})),threeVolt:h.mkRange(26,51).map(e=>({type:"breadboard",row:"+",col:""+e})),ground:h.mkRange(26,51).map(e=>({type:"breadboard",row:"-",col:""+e}))},bottom:{fiveVolt:h.mkRange(1,26).map(e=>({type:"breadboard",row:"+",col:""+e})),threeVolt:h.mkRange(1,26).map(e=>({type:"breadboard",row:"+",col:""+e})),ground:h.mkRange(1,26).map(e=>({type:"breadboard",row:"-",col:""+e}))}},this.opts=e}allocPartIRs(i,s,d){let a=[];const l=(o,e,r,t)=>{var i=[];for(let n=0;n<o.numberOfPins;n++){let e,t=o.pinDefinitions[n];if("string"==typeof t.target)e=t.target;else{var s=t.target.pinInstantiationIdx;if(!r||void 0===r[s])return void console.log(`error: parts no pin found for PinInstantiationIdx: ${s}. (Is the part missing an ArgumentRole or "trackArgs=" annotations?)`);e=r[s]}var s=o.visual.pinLocations[n],a=d.yOffset+s.y,l=Math.round(a/o.visual.pinDistance),a=a-l*o.visual.pinDistance,c=d.xOffset+s.x,u=Math.round(c/o.visual.pinDistance),l={partRelativeRowIdx:l,partRelativeColIdx:u,xOffset:c-u*o.visual.pinDistance,yOffset:a};i.push({def:t,loc:s,target:e,bbFit:l})}return{name:e,def:o,pins:i,partParams:t||{},bbFit:d}},e=i.instantiations||[];return i.instantiation&&e.push(i.instantiation),e.forEach(e=>{if("singleton"===e.kind)a.push(l(i,s));else if("function"===e.kind){let r=e,t=r.fullyQualifiedName.split(","),n={};t.forEach(e=>{this.opts.fnArgs[e]&&this.opts.fnArgs[e].forEach(e=>{n[e]=1})});e=Object.keys(n);e&&e.length?e.forEach(e=>{e=e.split(",");if(e.length!=r.argumentRoles.length)console.log(`error: parts mismatch between number of arguments at callsite (function name: ${t}) vs number of argument roles in part definition (part: ${s}).`);else{let n=[],o={};e.forEach((e,t)=>{var t=r.argumentRoles[t];void 0!==t.partParameter&&(o[t.partParameter]=e),void 0!==t.pinInstantiationIdx&&(t=t.pinInstantiationIdx,e=c(e),n[t]=e)}),a.push(l(i,s,n,o))}}):console.log("error: parts failed to read pin(s) from callsite for: "+t)}}),a.filter(e=>!!e)}computePartDimensions(e,t){let n=e.visual.pinLocations,o=e.pinDefinitions,r=e.numberOfPins;h.U.assert(n.length===r,`Mismatch between "numberOfPins" and length of "visual.pinLocations" for "${t}"`),h.U.assert(o.length===r,`Mismatch between "numberOfPins" and length of "pinDefinitions" for "${t}"`),h.U.assert(0<r,`Part "${t}" has no pins`);let i,s,a,l,c=n.map((e,t)=>{return n={idx:t},e=e,t=o[t],_(_(n,e),t);var n}).filter(e=>"-Z"===e.orientation),u=0<c.length,d=e.visual.pinDistance;var p,g;return u?(t=c[0],p=Math.ceil(t.x/d),g=Math.ceil(t.y/d),i=p*d-t.x,s=g*d-t.y,a=Math.ceil((i+e.visual.width)/d)+1,l=Math.ceil((s+e.visual.height)/d)+1):(a=Math.ceil(e.visual.width/d),l=Math.ceil(e.visual.height/d),i=a*d-e.visual.width,s=l*d-e.visual.height),{xOffset:i,yOffset:s,rowCount:l,colCount:a}}allocColumns(e){var t=e.length,n=h.visuals.BREADBOARD_MID_COLS-e.map(e=>e.colCount).reduce((e,t)=>e+t,0);n<=0&&console.log("Not enough breadboard space!");let o=Math.floor(n/(t-1+2)),r=n-o*(t-1),i=Math.floor(r/2),s=(Math.ceil(r/2),1+i);return e.map(e=>{var t=s;return s+=e.colCount+o,t})}placeParts(e){const o=h.visuals.BREADBOARD_MID_ROWS+2;let r=this.allocColumns(e.map(e=>e.bbFit)),i=e.map(e=>{let t=o-e.bbFit.rowCount,n=Math.floor(t/2);return n=(n=4<n?4:n)<1?1:n});return e.map((e,t)=>{var n=i[t];return _({startColumnIdx:r[t],startRowIdx:n},e)})}nextColor(){return(!this.availableWireColors||this.availableWireColors.length<=0)&&(this.availableWireColors=h.visuals.GPIO_WIRE_COLORS.map(e=>e)),this.availableWireColors.pop()}allocWireIRs(l){let c=[],e=l.pins.map((e,t)=>{let n,o,r=e.target,i=l.startColumnIdx+e.bbFit.partRelativeColIdx,s=h.visuals.getColumnName(i),a=l.startRowIdx+e.bbFit.partRelativeRowIdx;return 7<=a&&(a-=2),n=p(e.def)?{type:"breadboard",row:a<5?"j":"a",col:s,style:e.def.style}:{type:"breadboard",row:h.visuals.getRowName(a),col:s,xOffset:e.bbFit.xOffset/l.def.visual.pinDistance,yOffset:e.bbFit.yOffset/l.def.visual.pinDistance,style:e.def.style},o="ground"===r?u:"threeVolt"===r?"red":"fiveVolt"===r?d:"number"==typeof e.def.colorGroup?c[e.def.colorGroup]||(c[e.def.colorGroup]=this.nextColor()):this.nextColor(),{start:n,end:r,color:o,pinIdx:t}});return _(l,{wires:e})}allocLocation(n,o){if("ground"===n||"threeVolt"===n||"fiveVolt"==n){if("ground"===n&&this.powerUsage.singleGround)return{type:"dalboard",pin:this.getBoardGroundPin()};if("threeVolt"===n&&this.powerUsage.singleThreeVolt)return{type:"dalboard",pin:this.getBoardThreeVoltPin()};if("fiveVolt"===n&&this.powerUsage.singleFiveVolt)return{type:"dalboard",pin:this.getBoardFiveVoltPin()};h.U.assert(!!o.referenceBBPin);var o=this.opts.getBBCoord(o.referenceBBPin),r=[this.availablePowerPins.top.ground[0]||this.availablePowerPins.top.threeVolt[0],this.availablePowerPins.bottom.ground[0]||this.availablePowerPins.bottom.threeVolt[0]].map(e=>this.opts.getBBCoord(e));r[0]&&r[1]||console.debug(`No more available "${n}" locations!`);let e,t=0==h.visuals.findClosestCoordIdx(o,r);t?"ground"===n?e=this.availablePowerPins.top.ground:"threeVolt"===n?e=this.availablePowerPins.top.threeVolt:"fiveVolt"===n&&(e=this.availablePowerPins.top.fiveVolt):"ground"===n?e=this.availablePowerPins.bottom.ground:"threeVolt"===n?e=this.availablePowerPins.bottom.threeVolt:"fiveVolt"===n&&(e=this.availablePowerPins.bottom.fiveVolt);r=e.map(e=>this.opts.getBBCoord(e)),o=h.visuals.findClosestCoordIdx(o,r),r=e[o];return(t?(this.availablePowerPins.top.ground.splice(o,1),this.availablePowerPins.top):(this.availablePowerPins.bottom.ground.splice(o,1),this.availablePowerPins.bottom)).threeVolt.splice(o,1),r}if("breadboard"===n.type)return n;if("MOSI"===n||"MISO"===n||"SCK"===n)return this.opts.boardDef.spiPins||console.debug("No SPI pin mappings found!"),{type:"dalboard",pin:this.opts.boardDef.spiPins[n]};if("SDA"===n||"SCL"===n)return this.opts.boardDef.i2cPins||console.debug("No I2C pin mappings found!"),{type:"dalboard",pin:this.opts.boardDef.i2cPins[n]};h.U.assert("string"==typeof n,"Unknown location type: "+n);o=this.opts.boardDef.gpioPinMap[n]||n;return o?{type:"dalboard",pin:o}:void console.debug("unknown pin location for "+n)}getBoardGroundPin(){var e=this.opts.boardDef.groundPins&&this.opts.boardDef.groundPins[0]||null;return e||console.debug("No available ground pin on board!"),e}getBoardThreeVoltPin(){var e=this.opts.boardDef.threeVoltPins&&this.opts.boardDef.threeVoltPins[0]||null;return e||console.debug("No available 3.3V pin on board!"),e}getBoardFiveVoltPin(){var e=this.opts.boardDef.fiveVoltPins&&this.opts.boardDef.fiveVoltPins[0]||null;return e||console.debug("No available 5V pin on board!"),e}allocPowerWires(e){var t=this.getBoardGroundPin(),n=this.getBoardThreeVoltPin(),o=this.getBoardFiveVoltPin();let r,i,s=(i=this.opts.boardDef.attachPowerOnRight?(r={type:"breadboard",row:"-",col:"50"},{type:"breadboard",row:"-",col:"25"}):(r={type:"breadboard",row:"-",col:"26"},{type:"breadboard",row:"-",col:"1"}),[]),a=[],l=[];e.bottomGround&&e.topGround&&s.push({start:this.allocLocation("ground",{referenceBBPin:r}),end:this.allocLocation("ground",{referenceBBPin:i}),color:u}),e.topGround?s.push({start:this.allocLocation("ground",{referenceBBPin:r}),end:{type:"dalboard",pin:t},color:u}):e.bottomGround&&s.push({start:this.allocLocation("ground",{referenceBBPin:i}),end:{type:"dalboard",pin:t},color:u}),e.bottomThreeVolt&&e.bottomGround?a.push({start:this.allocLocation("threeVolt",{referenceBBPin:r}),end:this.allocLocation("threeVolt",{referenceBBPin:i}),color:"red"}):e.bottomFiveVolt&&e.bottomGround&&l.push({start:this.allocLocation("fiveVolt",{referenceBBPin:r}),end:this.allocLocation("fiveVolt",{referenceBBPin:i}),color:d}),e.topThreeVolt?a.push({start:this.allocLocation("threeVolt",{referenceBBPin:r}),end:{type:"dalboard",pin:n},color:"red"}):e.bottomThreeVolt&&a.push({start:this.allocLocation("threeVolt",{referenceBBPin:i}),end:{type:"dalboard",pin:n},color:d}),e.topFiveVolt&&!e.topThreeVolt?l.push({start:this.allocLocation("fiveVolt",{referenceBBPin:r}),end:{type:"dalboard",pin:o},color:"red"}):e.bottomFiveVolt&&!e.bottomThreeVolt&&l.push({start:this.allocLocation("fiveVolt",{referenceBBPin:i}),end:{type:"dalboard",pin:o},color:d});t=[];0<s.length&&t.push({wireIndices:s.map((e,t)=>t)});let c=s.length;return 0<a.length&&t.push({wireIndices:a.map((e,t)=>t+c)}),0<l.length&&t.push({wireIndices:a.map((e,t)=>t+c+a.length)}),{wires:s.concat(a).concat(l),assembly:t}}allocWire(e){const n=[e.start,e.end],o=n.map(e=>"ground"===e||"threeVolt"===e||"fiveVolt"===e);let r=n.map((e,t)=>o[t]?void 0:this.allocLocation(e,{}));if((r=r.map((e,t)=>{return e||(e=r[1-t],this.allocLocation(n[t],{referenceBBPin:e}))}))[0]&&r[1])return{start:r[0],end:r[1],color:e.color}}allocPart(o){var e=o.pins.filter(e=>p(e.def)).map(e=>{let t=o.startRowIdx+e.bbFit.partRelativeRowIdx;7<=t&&(t-=2);var n=h.visuals.getRowName(t),e=o.startColumnIdx+e.bbFit.partRelativeColIdx;return{type:"breadboard",row:n,col:h.visuals.getColumnName(e)}});return{name:o.name,visual:o.def.visual,bbFit:o.bbFit,startColumnIdx:o.startColumnIdx,startRowIdx:o.startRowIdx,breadboardConnections:e,params:o.partParams,simulationBehavior:o.def.simulationBehavior}}allocAll(){var e=this.opts.partsList.map(e=>({name:e,def:this.opts.partDefs[e]})).filter(e=>!!e.def);if(0<e.length){let n=e.map(e=>this.computePartDimensions(e.def,e.name)),o=[];e.forEach((e,t)=>{t=n[t],e=this.allocPartIRs(e.def,e.name,t);o=o.concat(e)});var e=this.placeParts(o).map(e=>this.allocWireIRs(e)),t=e.map(e=>e.wires).reduce((e,t)=>e.concat(t),[]).map(e=>{return e=[e.start,e.end],t=e.map(e=>"ground"===e),n=e.map(e=>"threeVolt"===e),o=e.map(e=>"fiveVolt"===e),e=e.map(t=>{{let e=!1;return"string"!=typeof t&&"breadboard"===t.type&&(t=t.row,e=0<=["a","b","c","d","e"].indexOf(t)),e}}),t=r(t),n=r(n),o=r(o),e=r(e),{topGround:t&&!e,topThreeVolt:n&&!e,topFiveVolt:o&&!e,bottomGround:t&&e,bottomThreeVolt:n&&e,bottomFiveVolt:o&&e,singleGround:t,singleThreeVolt:n,singleFiveVolt:o};var t,n,o}),t=(this.powerUsage=((t=t.reduce((e,t)=>({topGround:e.topGround||t.topGround,topThreeVolt:e.topThreeVolt||t.topThreeVolt,topFiveVolt:e.topFiveVolt||t.topFiveVolt,bottomGround:e.bottomGround||t.bottomGround,bottomThreeVolt:e.bottomThreeVolt||t.bottomThreeVolt,bottomFiveVolt:e.bottomFiveVolt||t.bottomFiveVolt,singleGround:t.singleGround?null===e.singleGround:e.singleGround,singleThreeVolt:t.singleThreeVolt?null===e.singleThreeVolt:e.singleThreeVolt,singleFiveVolt:t.singleFiveVolt?null===e.singleFiveVolt:e.singleFiveVolt}),{topGround:!1,topThreeVolt:!1,topFiveVolt:!1,bottomGround:!1,bottomThreeVolt:!1,bottomFiveVolt:!1,singleGround:null,singleThreeVolt:null,singleFiveVolt:null})).singleGround&&(t.topGround=t.bottomGround=!1),t.singleThreeVolt&&(t.topThreeVolt=t.bottomThreeVolt=!1),t.singleFiveVolt&&(t.topFiveVolt=t.bottomFiveVolt=!1),t),this.allocPowerWires(this.powerUsage)),e=e.map((e,t)=>{var n=this.allocPart(e),o=e.wires.map(e=>this.allocWire(e));if(!o.some(e=>!e)){const r=[];return e.wires.forEach((e,t)=>{r[e.pinIdx]=t}),{part:n,wires:o,assembly:e.def.assembly.map(e=>({part:e.part,wireIndices:(e.pinIndices||[]).map(e=>r[e])}))}}}).filter(e=>!!e),t=[t].concat(e).filter(e=>e.assembly&&e.assembly.length),e=!t.some(e=>e.part&&e.part.breadboardConnections&&0<e.part.breadboardConnections.length||e.wires&&e.wires.some(e=>"breadboard"==e.end.type&&"croc"!=e.end.style||"breadboard"==e.start.type&&"croc"!=e.start.style));return{partsAndWires:t,wires:[],parts:[],hideBreadboard:e}}return{partsAndWires:[],wires:[],parts:[]}}}h.allocateDefinitions=function(e){return new t(e).allocAll()}}(pxsim=pxsim||{}),function(e){{var i=e.protocol||(e.protocol={});class t{constructor(e){this.seq=0,this.type=e}}i.Message=t,i.Response=class extends t{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};class n extends t{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}}i.Event=n,i.Source=class{constructor(e,t,n=0,o,r){this.name=e,this.path=t,this.sourceReference=n,o&&(this.origin=o),r&&(this.adapterData=r)}},i.Scope=class{constructor(e,t,n=!1){this.name=e,this.variablesReference=t,this.expensive=n}},i.StackFrame=class{constructor(e,t,n,o=0,r=0){this.id=e,this.source=n,this.line=o,this.column=r,this.name=t}},i.Thread=class{constructor(e,t){this.id=e,this.name=t||"Thread #"+e}},i.Variable=class{constructor(e,t,n=0,o,r){this.name=e,this.value=t,this.variablesReference=n,"number"==typeof r&&(this.namedVariables=r),"number"==typeof o&&(this.indexedVariables=o)}},i.Breakpoint=class{constructor(e,t,n,o){this.verified=e;"number"==typeof t&&(this.line=t),"number"==typeof n&&(this.column=n),o&&(this.source=o)}},i.Module=class{constructor(e,t){this.id=e,this.name=t}},i.CompletionItem=class{constructor(e,t,n=0){this.label=e,this.start=t,this.length=n}},i.StoppedEvent=class extends n{constructor(e,t,n=null){super("stopped"),this.body={reason:e,threadId:t},n&&(this.body.text=n)}},i.ContinuedEvent=class extends n{constructor(e,t){super("continued"),this.body={threadId:e},"boolean"==typeof t&&(this.body.allThreadsContinued=t)}},i.InitializedEvent=class extends n{constructor(){super("initialized")}},i.TerminatedEvent=class extends n{constructor(e){super("terminated"),"boolean"==typeof e&&(this.body={restart:e})}},i.OutputEvent=class extends n{constructor(e,t="console",n){super("output"),this.body={category:t,output:e},void 0!==n&&(this.body.data=n)}},i.ThreadEvent=class extends n{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}},i.BreakpointEvent=class extends n{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}},i.ModuleEvent=class extends n{constructor(e,t){super("module"),this.body={reason:e,module:t}}};class o{constructor(){this._pendingRequests={}}start(e){this._sequence=1,this.host=e,this.host.onData(e=>{var t;"request"===e.type?this.dispatchRequest(e):"response"===e.type&&(t=this._pendingRequests[(e=e).seq])&&(delete this._pendingRequests[e.seq],t(e))})}stop(){this.host&&this.host.close()}sendEvent(e){this.send("event",e)}sendResponse(e){0<e.seq?console.error("attempt to send more than one response for command "+e.command):this.send("response",e)}sendRequest(t,e,n,o){const r={command:t};if(e&&0<Object.keys(e).length&&(r.arguments=e),this.send("request",r),o){this._pendingRequests[r.seq]=o;const t=setTimeout(()=>{clearTimeout(t);var e=this._pendingRequests[r.seq];e&&(delete this._pendingRequests[r.seq],e(new i.Response(r,"timeout")))},n)}}send(e,t){if(t.type=e,t.seq=this._sequence++,this.host){const e=JSON.stringify(t);this.host.send(e)}}dispatchRequest(e){}}class s extends(i.ProtocolServer=o){constructor(){super(...arguments),this._debuggerLinesStartAt1=!1,this._debuggerColumnsStartAt1=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0}shutdown(){}dispatchRequest(e){var t=new i.Response(e);try{if("initialize"===e.command){var n=e.arguments;if("boolean"==typeof n.linesStartAt1&&(this._clientLinesStartAt1=n.linesStartAt1),"boolean"==typeof n.columnsStartAt1&&(this._clientColumnsStartAt1=n.columnsStartAt1),"path"!==n.pathFormat)this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null);else{const e=t;e.body={},this.initializeRequest(e,n)}}else"launch"===e.command?this.launchRequest(t,e.arguments):"attach"===e.command?this.attachRequest(t,e.arguments):"disconnect"===e.command?this.disconnectRequest(t,e.arguments):"setBreakpoints"===e.command?this.setBreakPointsRequest(t,e.arguments):"setFunctionBreakpoints"===e.command?this.setFunctionBreakPointsRequest(t,e.arguments):"setExceptionBreakpoints"===e.command?this.setExceptionBreakPointsRequest(t,e.arguments):"configurationDone"===e.command?this.configurationDoneRequest(t,e.arguments):"continue"===e.command?this.continueRequest(t,e.arguments):"next"===e.command?this.nextRequest(t,e.arguments):"stepIn"===e.command?this.stepInRequest(t,e.arguments):"stepOut"===e.command?this.stepOutRequest(t,e.arguments):"stepBack"===e.command?this.stepBackRequest(t,e.arguments):"restartFrame"===e.command?this.restartFrameRequest(t,e.arguments):"goto"===e.command?this.gotoRequest(t,e.arguments):"pause"===e.command?this.pauseRequest(t,e.arguments):"stackTrace"===e.command?this.stackTraceRequest(t,e.arguments):"scopes"===e.command?this.scopesRequest(t,e.arguments):"variables"===e.command?this.variablesRequest(t,e.arguments):"setVariable"===e.command?this.setVariableRequest(t,e.arguments):"source"===e.command?this.sourceRequest(t,e.arguments):"threads"===e.command?this.threadsRequest(t):"evaluate"===e.command?this.evaluateRequest(t,e.arguments):"stepInTargets"===e.command?this.stepInTargetsRequest(t,e.arguments):"gotoTargets"===e.command?this.gotoTargetsRequest(t,e.arguments):"completions"===e.command?this.completionsRequest(t,e.arguments):this.customRequest(e.command,t,e.arguments)}catch(e){this.sendErrorResponse(t,1104,"{_stack}",{_exception:e.message,_stack:e.stack})}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,this.sendResponse(e)}disconnectRequest(e,t){this.sendResponse(e),this.shutdown()}launchRequest(e,t){this.sendResponse(e)}attachRequest(e,t){this.sendResponse(e)}setBreakPointsRequest(e,t){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t){this.sendResponse(e)}configurationDoneRequest(e,t){this.sendResponse(e)}continueRequest(e,t){this.sendResponse(e)}nextRequest(e,t){this.sendResponse(e)}stepInRequest(e,t){this.sendResponse(e)}stepOutRequest(e,t){this.sendResponse(e)}stepBackRequest(e,t){this.sendResponse(e)}restartFrameRequest(e,t){this.sendResponse(e)}gotoRequest(e,t){this.sendResponse(e)}pauseRequest(e,t){this.sendResponse(e)}sourceRequest(e,t){this.sendResponse(e)}threadsRequest(e){this.sendResponse(e)}stackTraceRequest(e,t){this.sendResponse(e)}scopesRequest(e,t){this.sendResponse(e)}variablesRequest(e,t){this.sendResponse(e)}setVariableRequest(e,t){this.sendResponse(e)}evaluateRequest(e,t){this.sendResponse(e)}stepInTargetsRequest(e,t){this.sendResponse(e)}gotoTargetsRequest(e,t){this.sendResponse(e)}completionsRequest(e,t){this.sendResponse(e)}customRequest(e,t,n){this.sendErrorResponse(t,1014,"unrecognized request",null)}sendErrorResponse(e,t,n,o){let r;"number"==typeof t?(r={id:t,format:n},o&&(r.variables=o),r.showUser=!0):r=t,e.success=!1,s.formatPII(r.format,!0,r.variables),e.body||(e.body={}),e.body.error=r,this.sendResponse(e)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!=this._debuggerPathsAreURIs?this._clientPathsAreURIs?s.uri2path(e):s.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!=this._clientPathsAreURIs?this._debuggerPathsAreURIs?s.uri2path(e):s.path2uri(e):e}static path2uri(e){let t=e.replace(/\\/g,"/");return"/"!==t[0]&&(t="/"+t),encodeURI("file://"+t)}static uri2path(e){return e}static formatPII(e,n,o){return e.replace(s._formatPIIRegexp,function(e,t){return!(n&&0<t.length&&"_"!==t[0])&&o[t]&&o.hasOwnProperty(t)?o[t]:e})}}s._formatPIIRegexp=/{([^}]+)}/g,i.DebugSession=s}}(pxsim=pxsim||{}),function(e){function a(e){e=e.replace(/\\/g,"/");const t=[];return e.split("/").forEach(e=>{".."===e&&t.length?t.pop():e&&"."!==e&&t.push(e)}),t}(e=e.util||(e.util={})).injectPolyphils=function(){String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return void 0!==e&&null!=e&&this.substring(t=!t||t<0?0:+t,t+e.length)===e}}),Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{writable:!0,enumerable:!0,value:function(e){if(null==this)throw new TypeError("this is null or not defined");let t=Object(this),n=t.length>>>0,o=arguments[1],r=o>>0,i=r<0?Math.max(n+r,0):Math.min(r,n),s=arguments[2],a=void 0===s?n:s>>0,l=a<0?Math.max(n+a,0):Math.min(a,n);for(;i<l;)t[i]=e,i++;return t}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{writable:!0,enumerable:!0,value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this);const n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");var o=arguments[1];let r=0;for(;r<n;){const n=t[r];if(e.call(o,n,r,t))return n;r++}}}),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice,writable:!0,enumerable:!0}),Uint16Array.prototype.slice||Object.defineProperty(Uint16Array.prototype,"slice",{value:Array.prototype.slice,writable:!0,enumerable:!0}),Uint32Array.prototype.slice||Object.defineProperty(Uint32Array.prototype,"slice",{value:Array.prototype.slice,writable:!0,enumerable:!0}),Uint8Array.prototype.fill||Object.defineProperty(Uint8Array.prototype,"fill",{value:Array.prototype.fill,writable:!0,enumerable:!0}),Uint16Array.prototype.fill||Object.defineProperty(Uint16Array.prototype,"fill",{value:Array.prototype.fill,writable:!0,enumerable:!0}),Uint32Array.prototype.fill||Object.defineProperty(Uint32Array.prototype,"fill",{value:Array.prototype.fill,writable:!0,enumerable:!0}),Uint8Array.prototype.some||Object.defineProperty(Uint8Array.prototype,"some",{value:Array.prototype.some,writable:!0,enumerable:!0}),Uint16Array.prototype.some||Object.defineProperty(Uint16Array.prototype,"some",{value:Array.prototype.some,writable:!0,enumerable:!0}),Uint32Array.prototype.some||Object.defineProperty(Uint32Array.prototype,"some",{value:Array.prototype.some,writable:!0,enumerable:!0}),Uint8Array.prototype.reverse||Object.defineProperty(Uint8Array.prototype,"reverse",{value:Array.prototype.reverse,writable:!0,enumerable:!0}),Uint16Array.prototype.reverse||Object.defineProperty(Uint16Array.prototype,"reverse",{value:Array.prototype.reverse,writable:!0,enumerable:!0}),Uint32Array.prototype.reverse||Object.defineProperty(Uint32Array.prototype,"reverse",{value:Array.prototype.reverse,writable:!0,enumerable:!0}),Math.imul||(Math.imul=function(e,t){var n=65535&e,o=65535&t;return n*o+((e>>>16&65535)*o+n*(t>>>16&65535)<<16>>>0)|0}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");var n=Object(e);for(let e=1;e<arguments.length;e++){var o=arguments[e];if(null!=o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])}return n},writable:!0,configurable:!0}),Promise.prototype.finally||(Promise.prototype.finally=Promise.prototype.finally||{finally(t){const n=e=>Promise.resolve(t()).then(e);return this.then(e=>n(()=>e),e=>n(()=>Promise.reject(e)))}}.finally)},e.Lazy=class{constructor(e){this._func=e,this._evaluated=!1}get value(){return this._evaluated||(this._value=this._func(),this._evaluated=!0),this._value}},e.getNormalizedParts=a,e.normalizePath=function(e){return a(e).join("/")},e.relativePath=function(e,t){var n=a(e),o=a(t);let r=0;for(;n[r]===o[r]&&++r!==n.length&&r!==o.length;);var i=n.slice(r),s=o.slice(r);for(let e=0;e<i.length;e++)s.unshift("..");return s.join("/")},e.pathJoin=function(...e){let t="";return e.forEach(e=>{e.replace(/\\/g,"/"),e.lastIndexOf("/")===e.length-1&&(e=e.slice(0,e.length-1)),t+="/"+e}),t},e.toArray=function(t){if(Array.isArray(t))return t;var n=[];for(let e=0;e<t.length;++e)n.push(t[e]);return n}}(pxsim=pxsim||{}),function(s){function c(e,t){switch(typeof e){case"string":case"number":case"boolean":return e;case"function":return{text:"(function)",type:"function"};case"undefined":return null;case"object":var n,o;return e?e instanceof s.RefObject?(t&&(t[e.id]=e),o=(n=s.RefObject.toDebugString(e)).startsWith("[")?"array":n,{id:e.id,preview:n,hasFields:null!==e.fields||n.startsWith("["),type:o}):e._width&&e._height?{text:e._width+"x"+e._height,type:"image"}:{text:"(object)",type:"object"}:null;default:throw new Error}}function a(e,n,t,o){{var r=e,i;e=t;const l={};for(i of Object.keys(r))/^__/.test(i)||!/___\d+$/.test(i)||o&&-1===o.indexOf(i)||(l[i]=c(r[i],n));if(r.fields&&e)for(var s of e)s=s.substring(s.lastIndexOf(".")+1),l[s]=c(function(e,t){let n={pc:0,arg0:t,fn:e,parent:{}};for(;n.fn;)n=n.fn(n);return n.retval}(r.vtable.iface[s],r),n);if(r.fields)for(var a of Object.keys(r.fields).filter(e=>!e.startsWith("_")))l[a]=c(r.fields[a],n);else Array.isArray(r.data)&&r.data.forEach((e,t)=>{l[t]=c(e,n)});return l}}s.getWarningMessage=function(e){let t={type:"debugger",subtype:"warning",breakpointIds:[],message:e},n=s.runtime.currFrame;for(;null!=n;)t.breakpointIds.push(n.lastBrkId),n=n.parent;return t},s.BreakpointMap=class{constructor(e){this.fileMap={},this.idMap={},e.forEach(e=>{var[t,n]=e;this.fileMap[n.source.path]||(this.fileMap[n.source.path]=[]),this.fileMap[n.source.path].push(e),this.idMap[t]=n});for(const e in this.fileMap){var t=this.fileMap[e];this.fileMap[e]=t.sort(([,e],[,t])=>e.line===t.line?t.endLine===e.endLine?e.column-t.column:t.endLine-e.endLine:e.line-t.line)}}getById(e){return this.idMap[e]}verifyBreakpoint(e,t){var n=this.fileMap[e];let o;if(n)for(const[e,r]of n)r.line<=t.line&&r.endLine>=t.line&&(o=[e,r]);return o?(o[1].verified=!0,o):[-1,{verified:!1}]}},s.dumpHeap=a,s.injectEnvironmentGlobals=function(e,t){var n=s.runtime.environmentGlobals;if(Object.keys(n).length){const o=e.environmentGlobals={};Object.keys(n).forEach(e=>o[e]=c(s.runtime.environmentGlobals[e],t))}},s.getBreakpointMsg=function(e,t,n){for(var o={},r={type:"debugger",subtype:"breakpoint",breakpointId:t,globals:a(s.runtime.globals,o,void 0,n),stackframes:[]};null!=e;){var i=function(n,o){var e=n.fn?n.fn.info:null;if(e){var t={thisParam:c(n.argL,o),params:[]};if(e.argumentNames){const a=e.argumentNames;t.params=a.map((e,t)=>({name:e,value:c(n["arg"+t],o)}))}return{locals:a(n,o),funcInfo:e,breakpointId:n.lastBrkId,callLocationId:n.callLocIdx,arguments:t}}}(e,o);i&&r.stackframes.push(i),e=e.parent}return{msg:r,heap:o}};class t extends s.protocol.DebugSession{constructor(e){super(),this.driver=new s.SimulatorDriver(e,{onDebuggerBreakpoint:e=>this.onDebuggerBreakpoint(e),onDebuggerWarning:e=>this.onDebuggerWarning(e),onDebuggerResume:()=>this.onDebuggerResume(),onStateChanged:e=>this.onStateChanged(e)})}runCode(e,t,n,o,r){this.breakpoints=o,this.projectDir&&this.fixBreakpoints(),this.sendEvent(new s.protocol.InitializedEvent),this.driver.run(e,{parts:t,fnArgs:n,boardDefinition:r})}stopSimulator(e=!1){this.driver.stop(e)}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsConfigurationDoneRequest=!0,this.sendResponse(e)}disconnectRequest(e,t){this.sendResponse(e),this.shutdown()}launchRequest(e,t){this.projectDir||(this.projectDir=s.util.normalizePath(t.projectDir),this.breakpoints&&this.fixBreakpoints()),this.sendResponse(e)}setBreakPointsRequest(n,o){n.body={breakpoints:[]};const r=[];o.breakpoints.forEach(e=>{var t;this.breakpoints?([e,t]=this.breakpoints.verifyBreakpoint(s.util.relativePath(this.projectDir,o.source.path),e),n.body.breakpoints.push(t),t.verified&&r.push(e)):n.body.breakpoints.push({verified:!1})}),this.driver.setBreakpoints(r),this.sendResponse(n)}continueRequest(e,t){this.driver.resume(s.SimulatorDebuggerCommand.Resume),this.sendResponse(e)}nextRequest(e,t){this.driver.resume(s.SimulatorDebuggerCommand.StepOver),this.sendResponse(e)}stepInRequest(e,t){this.driver.resume(s.SimulatorDebuggerCommand.StepInto),this.sendResponse(e)}stepOutRequest(e,t){this.driver.resume(s.SimulatorDebuggerCommand.StepOut),this.sendResponse(e)}pauseRequest(e,t){this.driver.resume(s.SimulatorDebuggerCommand.Pause),this.sendResponse(e)}threadsRequest(e){e.body={threads:[{id:t.THREAD_ID,name:"main"}]},this.sendResponse(e)}stackTraceRequest(e,t){if(this.lastBreak){const t=this.state.getFrames();e.body={stackFrames:t}}this.sendResponse(e)}scopesRequest(e,t){this.state&&(e.body={scopes:this.state.getScopes(t.frameId)}),this.sendResponse(e)}variablesRequest(e,t){this.state&&(e.body={variables:this.state.getVariables(t.variablesReference)}),this.sendResponse(e)}onDebuggerBreakpoint(e){this.lastBreak=e,this.state=new n(this.lastBreak,this.breakpoints,this.projectDir),e.exceptionMessage?(e=e.exceptionMessage.replace(/___\d+/g,""),this.sendEvent(new s.protocol.StoppedEvent("exception",t.THREAD_ID,e))):this.sendEvent(new s.protocol.StoppedEvent("breakpoint",t.THREAD_ID))}onDebuggerWarning(e){}onDebuggerResume(){this.sendEvent(new s.protocol.ContinuedEvent(t.THREAD_ID,!0))}onStateChanged(e){switch(e){case s.SimulatorState.Paused:break;case s.SimulatorState.Running:this.sendEvent(new s.protocol.ContinuedEvent(t.THREAD_ID,!0));break;case s.SimulatorState.Stopped:this.sendEvent(new s.protocol.TerminatedEvent)}}fixBreakpoints(){for(const t in this.breakpoints.idMap){var e=this.breakpoints.idMap[t];e.source.path=s.util.pathJoin(this.projectDir,e.source.path),e.line=this.convertDebuggerLineToClient(e.line),e.endLine=this.convertDebuggerLineToClient(e.endLine),e.column=this.convertDebuggerColumnToClient(e.column),e.endColumn=this.convertDebuggerColumnToClient(e.endColumn)}}}t.THREAD_ID=1,s.SimDebugSession=t;class n{constructor(e,t,n){this._message=e,this._map=t,this._dir=n,this._currentId=1,this._frames={},this._vars={};e=this.nextId();this._vars[e]=this.getVariableValues(this._message.globals),this._globalScope={name:"Globals",variablesReference:e,expensive:!1}}getFrames(){return this._message.stackframes.map((e,t)=>{var n=this._map.getById(e.breakpointId);if(n)return{id:(this._frames[e.breakpointId]=e).breakpointId,name:e.funcInfo?e.funcInfo.functionName:0===t?"main":"anonymous",line:n.line,column:n.column,endLine:n.endLine,endColumn:n.endLine,source:n.source}}).filter(e=>!!e)}getScopes(e){var t=this._frames[e];if(t){const e=this.nextId();return this._vars[e]=this.getVariableValues(t.locals),[{name:"Locals",variablesReference:e,expensive:!1},this._globalScope]}return[this._globalScope]}getVariables(e){e=this._vars[e];return e&&e.value||[]}getVariableValues(i){return new s.util.Lazy(()=>{var n=[];for(const r in i){var o=i[r];let e,t=0;null===o?e="null":void 0===o?e="undefined":"object"==typeof o?(e="(object)",t=this.nextId(),this._vars[t]=this.getVariableValues(o)):e=o.toString();o=r.substr(0,r.lastIndexOf("___"));n.push({name:o,value:e,variablesReference:t})}return n})}nextId(){return this._currentId++}}}(pxsim=pxsim||{}),function(s){function a(e=0){function t(){try{window.print()}catch(e){}}e?setTimeout(t,e):t()}function l(e,t){o({type:"pxtsim",action:"event",tick:e,data:t})}function o(e){"undefined"!=typeof window&&window.parent&&window.parent!==window&&window.parent.postMessage(e,"*")}function n(){setInterval(()=>{s.Runtime.postMessage({type:"simulator",command:"reload"})},3e3)}s.print=a;{var r=s.Embed||(s.Embed={});function c(e){e.origin;var t,n=e.data||{},e=n.type;if(e)switch(e){case"run":d(n);break;case"instructions":s.instructions.renderInstructions(n);break;case"stop":u();break;case"mute":p(n.mute);break;case"stopsound":s.AudioContextManager.stopAll();break;case"print":a();break;case"recorder":var o=n;if(i)switch(o.action){case"start":i.startRecording(o.width);break;case"stop":i.stopRecording()}break;case"screenshot":s.Runtime.postScreenshotAsync(n);break;case"custom":s.handleCustomMessage&&s.handleCustomMessage(n);break;case"pxteditor":break;case"debugger":i&&i.handleDebuggerMsg(n);break;case"simulator":var r=n;switch(r.command){case"focus":l("simulator.focus",{timestamp:r.timestamp});break;case"blur":l("simulator.blur",{timestamp:r.timestamp})}default:t=n,i&&!i.dead&&i.board.receiveMessage(t)}}let i;function u(){i&&(i.kill(),i.board)&&i.board.kill()}function d(e){u(),e.mute&&p(e.mute),e.localizedStrings&&s.localization.setLocalizedStrings(e.localizedStrings);const t=new s.Runtime(e);(i=t).board.initAsync(e).then(()=>{t===i&&t.run(e=>{s.dumpLivePointers(),s.Runtime.postMessage({type:"toplevelcodefinished"})})})}function p(e){s.AudioContextManager.mute(e)}r.start=function(){if(window.addEventListener("message",c,!1),r.frameid=window.location.hash.slice(1),"serviceWorker"in navigator&&-1!==window.location.href.indexOf("---simulator")&&!s.U.isLocalHost()){const s=window.location.pathname,t=s.substring(1,s.indexOf("---"));navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("message",e=>{e=e.data;e&&"serviceworker"===e.type&&"activated"===e.state&&e.ref===t&&n()});var e=window.location.href.replace(/---simulator.*$/,"---simserviceworker");navigator.serviceWorker.register(e).then(function(e){console.log("Simulator ServiceWorker registration successful with scope: ",e.scope)},function(e){console.log("Simulator ServiceWorker registration failed: ",e)})}s.Runtime.postMessage({type:"ready",frameid:r.frameid})},r.stop=u,r.run=d}s.tickEvent=l,s.reportError=function(e,t,n){o({type:"pxtsim",action:"event",tick:"error",category:e,message:t,data:n})},s.reload=n}(pxsim=pxsim||{}),pxsim.util.injectPolyphils(),"undefined"!=typeof window&&window.addEventListener("load",function(e){pxsim.Embed.start()}),function(v){{var e=v.instructions||(v.instructions={});const l=e=>e+"x",[n,o]=[816*.95,1056*.95],r=n-86.4,i=o-86.4,[s,c]=[1,1],u=r/c-48*c,d=`
            .instr-panel {
                margin: 20px;
                padding: 24px;
                border-width: 4px;
                border-color: gray;
                border-style: solid;
                border-radius: 20px;
                display: inline-block;
                width: ${u}px;
                height: ${i/s-48*s}px;
                position: relative;
                overflow: hidden;
                page-break-inside: avoid;
            }
            .board-svg {
                margin: 0 auto;
                display: block;
                position: absolute;
                bottom: 24px;
                left: ${(u-465)/2+24}px;
            }
            .panel-num-outer {
                position: absolute;
                left: -4px;
                top: -4px;
                width: 120px;
                height: 120px;
                border-width: 4px;
                border-style: solid;
                border-color: gray;
                border-radius: 20px 0 20px 0;
            }
            .panel-num {
                margin: 10px 0;
                text-align: center;
                font-size: 80px;
            }
            .cmp-div {
                display: inline-block;
            }
            .reqs-div {
                margin-left: 144px;
                margin-top: 5px;
            }
            .partslist-wire,
            .partslist-cmp {
                margin: 10px;
            }
            .partslist-wire {
                display: inline-block;
            }
            `;function a(e,t){let n=document.createElementNS("http://www.w3.org/2000/svg","svg"),o={l:0,t:0,w:0,h:0},r=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=(n.appendChild(r),r.appendChild(e.el),{viewBox:`${e.x} ${e.y} ${e.w} `+e.h,preserveAspectRatio:"xMidYMid"});o.w=e.w,o.h=e.h;var s,a,l,c,e=e=>{o.h*=e,o.w*=e,i.width=o.w,i.height=o.h},e=(t.cmpScale&&e(t.cmpScale),t.cmpWidth&&t.cmpWidth<o.w?e(t.cmpWidth/o.w):t.cmpHeight&&t.cmpHeight<o.h&&e(t.cmpHeight/o.h),v.svg.hydrate(r,i),o.l),u=o.t,d=o.w,p=o.h,g=e=>{var t;e<o.l&&(t=o.l-e,o.l=e,o.w+=t)},h=e=>{var t=o.l+o.w;t<e&&(e=e-t,o.w+=e)},_=e=>{var t;e<o.t&&(t=o.t-e,o.t=e,o.h+=t)},m=e=>{var t=o.t+o.h;t<e&&(e=e-t,o.h+=e)},[f,y]=[-.3,.3],k=[1.4,1],b=(t&&t.top&&(c=(b=t.topSize)/k[0],[a,s]=[e+d/2,u-3-(l=b/k[1])/2],b=v.visuals.mkTxt(a,s,b,0,t.top,f,y),v.U.addClass(b,"cmp-lbl"),n.appendChild(b),b=c*t.top.length,_(s-l/2),g(a-b/2),h(a+b/2)),t&&t.bot&&(s=(c=t.botSize)/k[0],[a,b]=[e+d/2,u+p+3+(l=c/k[1])/2],c=v.visuals.mkTxt(a,b,c,0,t.bot,f,y),v.U.addClass(c,"cmp-lbl"),n.appendChild(c),c=s*t.bot.length,m(b+l/2),g(a-c/2),h(a+c/2)),t&&t.right&&(b=(s=t.rightSize)/k[1],[a,c]=[e+d+5+(l=s/k[0]*t.right.length)/2,u+p/2],d=v.visuals.mkTxt(a,c,s,0,t.right,f,y),v.U.addClass(d,"cmp-lbl"),n.appendChild(d),_(c-b/2),h(a+l/2),m(c+b/2)),t&&t.left&&(d=(s=t.leftSize)/k[1],[a,l]=[e-5-(h=s/k[0]*t.left.length)/2,u+p/2],c=v.visuals.mkTxt(a,l,s,0,t.left,f,y),v.U.addClass(c,"cmp-lbl"),n.appendChild(c),_(l-d/2),g(a-h/2),m(l+d/2)),{viewBox:`${o.l} ${o.t} ${o.w} `+o.h,width:1.7*o.w,height:1.7*o.h,preserveAspectRatio:"xMidYMid"}),e=(v.svg.hydrate(n,b),document.createElement("div"));return e.appendChild(n),e}function p(e,t){let n,o=v.runtime.board;return a(n="wire"==e?v.visuals.mkWirePart([0,0],t.wireClr||"red",t.crocClips):"string"==typeof(e=e).builtIn?(0,o.builtinPartVisuals[e.builtIn])([0,0]):v.visuals.mkGenericPartSVG(e),t)}function g(e,t,n=!1){t={state:v.runtime.board,boardDef:e.boardDef,forceBreadboardLayout:!0,forceBreadboardRender:e.allAlloc.requiresBreadboard,partDefs:e.cmpDefs,maxWidth:t+"px",fnArgs:e.fnArgs,wireframe:n,partsList:[]},e=new v.visuals.BoardHost(v.visuals.mkBoardView({visual:t.boardDef.visual,boardDef:t.boardDef,wireframe:t.wireframe}),t),n=e.getView();return v.U.addClass(n,"board-svg"),e}function h(){var e=document.createElement("div");return v.U.addClass(e,"instr-panel"),e}function t(t,e){e.boardDef.pinStyles||(e.boardDef.pinStyles={}),e.configData&&v.setConfigData(e.configData.cfg,e.configData.cfgKey);var n,o={type:"run",code:"",boardDefinition:e.boardDef,partDefinitions:e.partDefinitions},o=(v.runtime=new v.Runtime(o),v.runtime.board=null,v.initCurrentRuntime(o),document.createElement("style")),o=(o.textContent+=d,document.head.appendChild(o),e.partDefinitions),r=new v.visuals.Breadboard({}),i=function(e){let t=v.allocateDefinitions(e),r=[],i=[],s=1,n=(t.partsAndWires.forEach(e=>{let n=e.part,o=e.wires;e.assembly.forEach((e,t)=>{e.part&&n&&(i[s+t]=[n]),e.wireIndices&&0<e.wireIndices.length&&o&&(r[s+t]=e.wireIndices.map(e=>o[e]))}),s+=e.assembly.length}),s-1),o=t.partsAndWires.map(e=>e.part).filter(e=>!!e),a=t.partsAndWires.map(e=>e.wires||[]).reduce((e,t)=>e.concat(t),[]),l={},c=[];return a.forEach(e=>{l[e.color]||(l[e.color]=[],c.push(e.color)),l[e.color].push(e)}),{boardDef:e.boardDef,cmpDefs:e.partDefs,fnArgs:e.fnArgs,allAlloc:t,stepToWires:r,stepToCmps:i,allWires:a,allCmps:o,lastStep:n,colorToWires:l,allWireColors:c}}({boardDef:e.boardDef,partDefs:o,partsList:e.parts,fnArgs:e.fnArgs,getBBCoord:r.getCoord.bind(r)}),o=(i.allAlloc.requiresBreadboard=!0,o=i,r=document.getElementById("front-panel"),(n=g(o,400,!1)).addAll(o.allAlloc),r.appendChild(n.getView()),function(o){let r=h();var e=a((e=o.boardDef,v.visuals.mkBoardView({visual:e.visual,boardDef:e}).getView()),{left:l(1),leftSize:30,cmpScale:.17}),e=(r.appendChild(e),a(new v.visuals.Breadboard({}).getSVGAndSize(),{left:l(1),leftSize:30,cmpScale:.25}));return r.appendChild(e),o.allCmps.forEach(e=>{let t=1;"buttonpair"===e.visual.builtIn&&(t=2);e=p(e.visual,{left:l(t),leftSize:30,cmpScale:.3});v.U.addClass(e,"partslist-cmp"),r.appendChild(e)}),o.allWireColors.forEach(e=>{var t=o.colorToWires[e].length,n=o.boardDef.pinStyles[e]||"female",t=p("wire",{left:l(t),leftSize:20,wireClr:e,cmpScale:.23,crocClips:"croc"==n});v.U.addClass(t,"partslist-wire"),r.appendChild(t)}),r}(i));t.appendChild(o);for(let e=0;e<=i.lastStep;e++){var s=function(e,n){var t=h(),o=g(n,465,!0),r=o,i=e,s=n,a=r.getView();0<i&&v.U.addClass(a,"grayed");for(let n=0;n<=i;n++){var l=s.stepToCmps[n],l=(l&&l.forEach(e=>{var t=r.addPart(e);n===i&&(e.breadboardConnections.forEach(e=>r.highlightBreadboardPin(e)),v.U.addClass(t.element,"notgrayed"))}),s.stepToWires[n]);l&&l.forEach(e=>{var t=r.addWire(e);t&&n===i&&("breadboard"==e.start.type?r.highlightBreadboardPin(e.start):r.highlightBoardPin(e.start.pin),"breadboard"==e.end.type?r.highlightBreadboardPin(e.end):r.highlightBoardPin(e.end.pin),r.highlightWire(t))})}t.appendChild(o.getView()),a=document.createElement("div"),v.U.addClass(a,"panel-num-outer"),v.U.addClass(a,"noselect"),t.appendChild(a),o=document.createElement("div"),v.U.addClass(o,"panel-num"),o.textContent=e+1+"",a.appendChild(o);let c=document.createElement("div"),u=(v.U.addClass(c,"reqs-div"),t.appendChild(c),n.stepToWires[e]||[]),d=e=>{var t,n;return"breadboard"===e.type?({row:t,col:n}=e,`(${t},${n})`):e.pin};return u.forEach(e=>{let t=!1;"dalboard"==e.end.type&&(t="croc"==n.boardDef.pinStyles[e.end.pin]);e=p("wire",{top:d(e.end),topSize:10,bot:d(e.start),botSize:10,wireClr:e.color,cmpHeight:40,crocClips:t});v.U.addClass(e,"cmp-div"),c.appendChild(e)}),(n.stepToCmps[e]||[]).forEach(i=>{("buttonpair"===i.visual.builtIn?[i.breadboardConnections[0],i.breadboardConnections[2]]:[i.breadboardConnections[0]]).forEach((e,t)=>{let n;var o;n=e?({row:e,col:o}=e,`(${e},${o})`):"";let r=1.5;"buttonpair"===i.visual.builtIn&&(r*=.5);e=p(i.visual,{top:n,topSize:10,cmpHeight:50,cmpScale:r});v.U.addClass(e,"cmp-div"),c.appendChild(e)})}),t}(e,i);t.appendChild(s)}e.print&&v.print(2e3)}e.renderParts=t,e.renderInstructions=function(e){document.getElementById("proj-title").innerText=e.options.name||"",t(document.body,e.options)}}}(pxsim=pxsim||{}),function(d){function o(e,t="sim: check failed"){if(!e)throw new Error(t)}d.quiet=!1,d.check=o,d.title="";let e,t,n,r,i,s={},a={};d.getConfig=function(e){return a.hasOwnProperty(e+"")?a[e+""]:null},d.getConfigKey=function(e){return s.hasOwnProperty(e)?s[e]:null},d.getAllConfigKeys=function(){return Object.keys(s)},d.setConfigKey=function(e,t){s[e]=t},d.setConfig=function(e,t){a[e]=t},d.setConfigData=function(e,t){a=e,s=t},d.getConfigData=function(){return{cfg:a,cfgKey:s}},d.setTitle=function(e){d.title=e};class l{constructor(){d.runtime?this.id=d.runtime.registerLiveObject(this):this.id=0}destroy(){}scan(e){throw d.U.userError("scan not implemented")}gcKey(){throw d.U.userError("gcKey not implemented")}gcSize(){throw d.U.userError("gcSize not implemented")}gcIsStatic(){return!1}print(){d.runtime&&d.runtime.refCountingDebug&&console.log("RefObject id:"+this.id)}toDebugString(){return"(object)"}static toAny(e){return e&&e.toAny?e.toAny():e}static toDebugString(e){return null===e?"null":void 0===e?"undefined;":e.vtable&&e.vtable.name?e.vtable.name:e.toDebugString?e.toDebugString():"string"==typeof e?JSON.stringify(e):e.toString()}}d.RefObject=l;class c{constructor(e,t,n){this.func=e,this.caps=t,this.args=n}}d.FnWrapper=c;class u extends l{constructor(){super(...arguments),this.fields={}}scan(e){for(var t of Object.keys(this.fields))e(t,this.fields[t])}gcKey(){return this.vtable.name}gcSize(){return this.vtable.numFields+1}destroy(){this.fields=null,this.vtable=null}print(){d.runtime&&d.runtime.refCountingDebug&&console.log(`RefRecord id:${this.id} (${this.vtable.name})`)}}d.RefRecord=u;class p extends l{constructor(){super(...arguments),this.fields=[]}scan(t){for(let e=0;e<this.fields.length;++e)t("_cap"+e,this.fields[e])}gcKey(){return d.functionName(this.func)}gcSize(){return this.fields.length+3}isRef(e){return o(0<=e&&e<this.fields.length),e<this.len}ldclo(e){return o(0<=(e>>=2)&&e<this.fields.length),this.fields[e]}destroy(){this.fields=null,this.func=null}print(){d.runtime&&d.runtime.refCountingDebug&&console.log(`RefAction id:${this.id} len:`+this.fields.length)}}d.RefAction=p;{var g=e=d.pxtcore||(d.pxtcore={});g.seedAddRandom=function(e){},g.mkAction=function(t,e){var n=new p;n.len=t,n.func=e;for(let e=0;e<t;++e)n.fields.push(null);return n},g.runAction=function(e,t){d.getResume()(e instanceof p?new c(e.func,e.fields,t):new c(e,null,t))};let u={};g.dumpPerfCounters=function(){if(d.runtime&&d.runtime.perfCounters){let e="calls,us,name\n";for(var t of d.runtime.perfCounters){t.lastFew.sort();const d=t.lastFew[t.lastFew.length>>1];e+=`${t.numstops},${t.value},${t.name},${d}\n`}{var o=e;let n="";const a=(e,t)=>{n+=e.length>=t?e:("              "+e).slice(-t)},l=e=>a(""+Math.round(e),6),c=(e,t)=>{a(Math.round(t)+"",8),n+=" /",l(e),n+=" =",l(t/e)};for(var r of o.split(/\n/))if(r&&/^\d/.test(r)){const o=r.split(/,/);let e=u[o[2]];e||(u[o[2]]=e={stops:0,us:0,meds:[]}),r=o[2],n+=25<=r.length?r:(r+"                         ").slice(0,25);var r=parseInt(o[0]),i=parseInt(o[1]),s=(c(r,i),n+=" |",c(r-e.stops,i-e.us),n+=" ~",parseInt(o[3])),s=(l(s),10<e.meds.length&&e.meds.shift(),e.meds.push(s),e.meds.slice()),s=(s.sort((e,t)=>e-t),s[s.length>>1]);n+=" ~~",l(s),e.stops=r,e.us=i,n+="\n"}console.log(n)}}}}class h extends l{constructor(){super(...arguments),this.v=void 0}scan(e){e("*",this.v)}gcKey(){return"LOC"}gcSize(){return 2}destroy(){}print(){d.runtime&&d.runtime.refCountingDebug&&console.log(`RefRefLocal id:${this.id} v:`+this.v)}}d.RefRefLocal=h;class _ extends l{constructor(){super(...arguments),this.vtable=d.mkMapVTable(),this.data=[]}scan(e){for(var t of this.data)e(t.key,t.val)}gcKey(){return"{...}"}gcSize(){return 2*this.data.length+4}findIdx(t){t+="";for(let e=0;e<this.data.length;++e)if(this.data[e].key==t)return e;return-1}destroy(){super.destroy();for(let e=0;e<this.data.length;++e)this.data[e].val=0;this.data=[]}print(){d.runtime&&d.runtime.refCountingDebug&&console.log(`RefMap id:${this.id} size:`+this.data.length)}toAny(){const t={};return this.data.forEach(e=>{t[e.key]=l.toAny(e.val)}),t}}function m(){d.runtime&&d.runtime.dumpLivePointers()}var f;function y(e,t){return t+="",e instanceof u?e.fields[t]:(t=e.findIdx(t))<0?void 0:e.data[t].val}function k(e,t,n){var o;t+="",e instanceof u?e.fields[t]=n:(o=e.findIdx(t))<0?e.data.push({key:t,val:n}):e.data[o].val=n}d.RefMap=_,d.dumpLivePointers=m,(g=t=d.numops||(d.numops={})).toString=function(e){return null===e?"null":void 0===e?"undefined":e.toString()},g.toBoolDecr=function(e){return!!e},g.toBool=function(e){return!!e},(g=n=d.langsupp||(d.langsupp={})).toInt=function(e){return 0|e},g.toFloat=function(e){return e},g.ignore=function(e){return e},(g=e=d.pxtcore||(d.pxtcore={})).ptrOfLiteral=function(e){return e},g.debugMemLeaks=function(){m()},g.templateHash=function(){return 0},g.programHash=function(){return 0},g.programName=function(){return d.title},g.programSize=function(){return 0},g.afterProgramPage=function(){return 0},g.getConfig=function(e,t){e=d.getConfig(e);return null==e?t:e},g.toInt=function(e){return e>>0},g.toUInt=function(e){return e>>>0},g.toDouble=function(e){return e},g.toFloat=function(e){return e},g.fromInt=function(e){return e},g.fromUInt=function(e){return e},g.fromDouble=function(e){return e},g.fromFloat=function(e){return e},g.fromBool=function(e){return!!e},(f=r=d.pxtrt||(d.pxtrt={})).toInt8=function(e){return(255&e)<<24>>24},f.toInt16=function(e){return(65535&e)<<16>>16},f.toInt32=function(e){return 0|e},f.toUInt32=function(e){return e>>>0},f.toUInt8=function(e){return 255&e},f.toUInt16=function(e){return 65535&e},f.nullFix=function(e){return null==e||!1===e?0:!0===e?1:e},f.nullCheck=function(e){null==e&&d.U.userError("Dereferencing null/undefined value.")},f.panic=function(e){d.U.userError("PANIC! Code "+e)},f.stringToBool=function(e){return e?1:0},f.ptrToBool=function(e){return e?1:0},f.emptyToNull=function(e){return""==e?0:e},f.ldlocRef=function(e){return e.v},f.stlocRef=function(e,t){e.v=t},f.mklocRef=function(){return new h},f.stclo=function(e,t,n){return o(0<=t&&t<e.fields.length),o(null===e.fields[t]),e.fields[t]=n,e},f.runtimeWarning=function(e){d.Runtime.postMessage(d.getWarningMessage(e))},f.mkMap=function(){return new _},f.mapGet=function(e,t){return y(e,f.mapKeyNames[t])},f.mapSet=function(e,t,n){return k(e,f.mapKeyNames[t],n)},f.mapGetByString=y,f.mapDeleteByString=function(e,t){e instanceof _||f.panic(923);t=e.findIdx(t);return 0<=t&&e.data.splice(t,1),!0},f.mapSetGeneric=k,f.mapGetGeneric=y,f.mapSetByString=k,f.keysOf=function(e){var t=new d.RefCollection;if(e instanceof _)for(var n of e.data)t.push(n.key);return t},(g=e=d.pxtcore||(d.pxtcore={})).mkClassInstance=function(e){o(!!e.methods);var t=new u;return t.vtable=e,t},g.switch_eq=function(e,t){return e==t},g.typeOf=function(e){return typeof e},(g=i=d.thread||(d.thread={})).panic=r.panic,g.pause=function(e){let t=d.getResume();d.runtime.schedule(()=>{t()},e)},g.runInBackground=function(e){d.runtime.runFiberAsync(e)},g.forever=function(t){r.nullCheck(t),function e(){d.runtime.runFiberAsync(t).then(()=>d.U.delay(20)).then(e)}()}}(pxsim=pxsim||{}),function(i){class t extends i.RefObject{constructor(){super(),this.data=[]}scan(t){for(let e=0;e<this.data.length;++e)t("["+e+"]",this.data[e])}gcKey(){return"[...]"}gcSize(){return this.data.length+2}toArray(){return this.data.slice(0)}toAny(){return this.data.map(e=>i.RefObject.toAny(e))}toDebugString(){let t="[";for(let e=0;e<this.data.length;++e){0<e&&(t+=",");var n=i.RefObject.toDebugString(this.data[e]);if(100<t.length+n.length){0==e&&(t+=n.substr(0,100)),t+="...";break}t+=n}return t+="]"}destroy(){var t=this.data;for(let e=0;e<t.length;++e)t[e]=0;this.data=[]}isValidIndex(e){return 0<=e&&e<this.data.length}push(e){this.data.push(e)}pop(){return this.data.pop()}getLength(){return this.data.length}setLength(e){this.data.length=e}getAt(e){return this.data[e]}setAt(e,t){this.data[e]=t}insertAt(e,t){this.data.splice(e,0,t)}removeAt(e){return this.data.splice(e,1)[0]}indexOf(e,t){return this.data.indexOf(e,t)}print(){}}let e,n,o,r,s,a,l,c;var u;function d(e){return e<<16>>16}function p(e,t){return i.pxtrt.nullFix(e)==i.pxtrt.nullFix(t)}function g(e,t){if(i.pxtrt.nullCheck(e),e.isValidIndex(t))return e.removeAt(t)}function h(e,t,n){return i.pxtrt.nullCheck(e),e.indexOf(t,n)}i.RefCollection=t,(m=e=i.Array_||(i.Array_={})).mk=function(){return new t},m.isArray=function(e){return e instanceof t},m.length=function(e){return i.pxtrt.nullCheck(e),e.getLength()},m.setLength=function(e,t){i.pxtrt.nullCheck(e),e.setLength(t)},m.push=function(e,t){i.pxtrt.nullCheck(e),e.push(t)},m.pop=function(e,t){return i.pxtrt.nullCheck(e),e.pop()},m.getAt=function(e,t){return i.pxtrt.nullCheck(e),e.getAt(t)},m.removeAt=g,m.insertAt=function(e,t,n){i.pxtrt.nullCheck(e),e.insertAt(t,n)},m.setAt=function(e,t,n){i.pxtrt.nullCheck(e),e.setAt(t,n)},m.indexOf=h,m.removeElement=function(e,t){i.pxtrt.nullCheck(e);t=h(e,t,0);return 0<=t?(g(e,t),1):0},(m=n=i.Math_||(i.Math_={})).imul=Math.imul||function(e,t){var n=65535&e,o=65535&t;return n*o+((e>>>16&65535)*o+n*(t>>>16&65535)<<16>>>0)|0},m.idiv=function(e,t){return(0|e)/(0|t)|0},m.round=function(e){return Math.round(e)},m.roundWithPrecision=function(e,t){if((t|=0)<=0)return Math.round(e);if(0==e)return 0;let n=0;for(;0==n&&t<21;){var o=Math.pow(10,t++);n=Math.round(e*o+Number.EPSILON)/o}return n},m.ceil=function(e){return Math.ceil(e)},m.floor=function(e){return Math.floor(e)},m.sqrt=function(e){return Math.sqrt(e)},m.pow=function(e,t){return Math.pow(e,t)},m.clz32=function(e){return Math.clz32(e)},m.log=function(e){return Math.log(e)},m.log10=function(e){return Math.log10(e)},m.log2=function(e){return Math.log2(e)},m.exp=function(e){return Math.exp(e)},m.sin=function(e){return Math.sin(e)},m.sinh=function(e){return Math.sinh(e)},m.cos=function(e){return Math.cos(e)},m.cosh=function(e){return Math.cosh(e)},m.tan=function(e){return Math.tan(e)},m.tanh=function(e){return Math.tanh(e)},m.asin=function(e){return Math.asin(e)},m.asinh=function(e){return Math.asinh(e)},m.acos=function(e){return Math.acos(e)},m.acosh=function(e){return Math.acosh(e)},m.atan=function(e){return Math.atan(e)},m.atanh=function(e){return Math.atanh(e)},m.atan2=function(e,t){return Math.atan2(e,t)},m.trunc=function(e){return 0<e?Math.floor(e):Math.ceil(e)},m.random=function(){return Math.random()},m.randomRange=function(e,t){var n;return e==t?e:(t<e&&(n=e,e=t,t=n),Math.floor(e)==e&&Math.floor(t)==t?e+Math.floor(Math.random()*(t-e+1)):e+Math.random()*(t-e))},(m=o=i.Number_||(i.Number_={})).lt=function(e,t){return e<t},m.le=function(e,t){return e<=t},m.neq=function(e,t){return!p(e,t)},m.eq=p,m.eqDecr=function(e,t){return i.pxtrt.nullFix(e)==i.pxtrt.nullFix(t)},m.gt=function(e,t){return t<e},m.ge=function(e,t){return t<=e},m.div=function(e,t){return 0|Math.floor(e/t)},m.mod=function(e,t){return e%t},m.bnot=function(e){return~e},m.toString=function(e){return e+""},(m=r=i.thumb||(i.thumb={})).adds=function(e,t){return e+t|0},m.subs=function(e,t){return e-t|0},m.divs=function(e,t){return 0|Math.floor(e/t)},m.muls=function(e,t){return n.imul(e,t)},m.ands=function(e,t){return e&t},m.orrs=function(e,t){return e|t},m.eors=function(e,t){return e^t},m.lsls=function(e,t){return e<<t},m.lsrs=function(e,t){return e>>>t},m.asrs=function(e,t){return e>>t},m.bnot=function(e){return~e},m.ignore=function(e){return e},(m=s=i.avr||(i.avr={})).adds=function(e,t){return d(e+t)},m.subs=function(e,t){return d(e-t)},m.divs=function(e,t){return d(Math.floor(e/t))},m.muls=function(e,t){return d(n.imul(e,t))},m.ands=function(e,t){return d(e&t)},m.orrs=function(e,t){return d(e|t)},m.eors=function(e,t){return d(e^t)},m.lsls=function(e,t){return d(e<<t)},m.lsrs=function(e,t){return(65535&e)>>>t},m.asrs=function(e,t){return d(e>>t)},m.bnot=function(e){return~e},m.ignore=function(e){return e},(m=a=i.String_||(i.String_={})).stringConv=function(e){const t=i.getResume();e instanceof i.RefRecord&&e.vtable.toStringMethod?i.runtime.runFiberAsync(e.vtable.toStringMethod,e).then(()=>{t(i.runtime.currFrame.retval+"")}):t(e+"")},m.mkEmpty=function(){return""},m.fromCharCode=function(e){return String.fromCharCode(e)},m.toNumber=function(e){return parseFloat(e)},m.concat=function(e,t){return e+t},m.substring=function(e,t,n){return i.pxtrt.nullCheck(e),e.slice(t,t+n)},m.equals=function(e,t){return e==t},m.compare=function(e,t){return e==t?0:e<t?-1:1},m.compareDecr=function(e,t){return e==t?0:e<t?-1:1},m.length=function(e){return e.length},m.substr=function(e,t,n){return e.substr(t,n)},m.charAt=function(e,t){return e.charAt(t)},m.charCodeAt=function(e,t){return i.pxtrt.nullCheck(e),n=e,o=t,i.pxtrt.nullCheck(n),0<=o&&o<n.length?e.charCodeAt(t):0;var n,o},m.indexOf=function(e,t,n){return i.pxtrt.nullCheck(e),null==t?-1:e.indexOf(t,n)},m.lastIndexOf=function(e,t,n){return i.pxtrt.nullCheck(e),null==t?-1:e.lastIndexOf(t,n)},m.includes=function(e,t,n){return i.pxtrt.nullCheck(e),null!=t&&e.includes(t,n)},(m=l=i.Boolean_||(i.Boolean_={})).toString=function(e){return e?"true":"false"},m.bang=function(e){return!e};class _ extends i.RefObject{constructor(e){super(),this.data=e,this.isStatic=!1}scan(e){}gcKey(){return"Buffer"}gcSize(){return 2+(this.data.length+3>>2)}gcIsStatic(){return this.isStatic}print(){}toDebugString(){return c.toHex(this)}}i.RefBuffer=_;{var m=c=i.BufferMethods||(i.BufferMethods={});let r;function f(e){let t=function(){switch(e){case r.Int8LE:return-1;case r.UInt8LE:return 1;case r.Int16LE:return-2;case r.UInt16LE:return 2;case r.Int32LE:return-4;case r.UInt32LE:return 4;case r.Int8BE:return-10;case r.UInt8BE:return 10;case r.Int16BE:return-20;case r.UInt16BE:return 20;case r.Int32BE:return-40;case r.UInt32BE:return 40;case r.Float32LE:return 4;case r.Float32BE:return 40;case r.Float64LE:return 8;case r.Float64BE:return 80;default:throw i.U.userError("bad format")}}(),n=!1,o=(t<0&&(n=!0,t=-t),!1);return 10<=t&&(o=!0,t/=10),{size:t,signed:n,swap:o,isFloat:e>=r.Float32LE}}function y(e){return new _(new Uint8Array(e))}function k(e,t){return i.pxtrt.nullCheck(e),0<=t&&t<e.data.length}function b(e,t){return k(e,t)?e.data[t]:0}function v(e){e.isStatic&&i.U.userError("Writing to read only buffer.")}function T(e,t,n){k(e,t)&&(v(e),e.data[t]=n)}function E(e,t,n=0,o=-1){n<0||n>e.data.length||(o<0&&(o=e.data.length),o=Math.min(o,e.data.length-n),v(e),e.data.fill(t,n,n+o))}function S(t,n,o,r,i){if(o.buffer===t.buffer)S(t,n,o.slice(r,r+i),0,i);else for(let e=0;e<i;++e)t[n+e]=o[r+e]}(u=r=m.NumberFormat||(m.NumberFormat={}))[u.Int8LE=1]="Int8LE",u[u.UInt8LE=2]="UInt8LE",u[u.Int16LE=3]="Int16LE",u[u.UInt16LE=4]="UInt16LE",u[u.Int32LE=5]="Int32LE",u[u.Int8BE=6]="Int8BE",u[u.UInt8BE=7]="UInt8BE",u[u.Int16BE=8]="Int16BE",u[u.UInt16BE=9]="UInt16BE",u[u.Int32BE=10]="Int32BE",u[u.UInt32LE=11]="UInt32LE",u[u.UInt32BE=12]="UInt32BE",u[u.Float32LE=13]="Float32LE",u[u.Float64LE=14]="Float64LE",u[u.Float32BE=15]="Float32BE",u[u.Float64BE=16]="Float64BE",m.getNumber=function(t,e,n){var o=f(e);if(o.isFloat)return e=t.data.buffer.slice(n,n+o.size),o.swap&&new Uint8Array(e).reverse(),new(4==o.size?Float32Array:Float64Array)(e)[0];let r=0;for(let e=0;e<o.size;++e){r<<=8;var i=o.swap?n+e:n+o.size-e-1;r|=t.data[i]}return o.signed?(e=32-8*o.size,r=r<<e>>e):r>>>=0,r},m.setNumber=function(t,e,n,o){var r=f(e);if(r.isFloat){var i=new Uint8Array(r.size);4==r.size?new Float32Array(i.buffer)[0]=o:new Float64Array(i.buffer)[0]=o,r.swap&&i.reverse();for(let e=0;e<r.size;++e)t.data[n+e]=i[e]}else for(let e=0;e<r.size;++e){var s=r.swap?n+r.size-e-1:n+e;t.data[s]=255&o,o>>=8}},m.createBuffer=y,m.createBufferFromHex=function(t){var n=y(t.length>>1);for(let e=0;e<t.length;e+=2)n.data[e>>1]=parseInt(t.slice(e,e+2),16);return n.isStatic=!0,n},m.isReadOnly=function(e){return e.isStatic},m.getBytes=function(e){return e.data},m.getUint8=b,m.getByte=b,m.setUint8=function(e,t,n){T(e,t,n)},m.setByte=T,m.length=function(e){return e.data.length},m.fill=E,m.slice=function(e,t,n){return t=Math.min(e.data.length,t),n<0&&(n=e.data.length),n=Math.min(n,e.data.length-t),new _(e.data.slice(t,t+n))},m.toHex=function(t){var n="0123456789abcdef";let o="";for(let e=0;e<t.data.length;++e)o=(o+=n[t.data[e]>>4])+n[15&t.data[e]];return o},m.toString=function(e){return i.U.fromUTF8Array(e.data)};const C=-2147483648;m.shift=function(e,t,n,o){o<0&&(o=e.data.length-n),n<0||n+o>e.data.length||n+o<n||0==o||0==t||t==C||0!=o&&0!=t&&t!=C&&(t<=-o||o<=t?E(e,0):(v(e),t<0?(S(e.data,n+(t=-t),e.data,n,o-t),e.data.fill(0,n,n+t)):(S(e.data,n,e.data,n+t,o-=t),e.data.fill(0,n+o,n+o+t))))},m.rotate=function(i,s,a,l){if(l<0&&(l=i.data.length-a),!(a<0||a+l>i.data.length||a+l<a||0==l||0==s||s==C)){v(i),s<0&&(s+=l<<8),(s%=l)<0&&(s+=l);let e=i.data,t=s,n=0,o=t,r=l;for(;n!=o;){var c=e[n+a];e[n+++a]=e[o+a],e[o+++a]=c,o==r?o=t:n==t&&(t=o)}}},m.write=function(e,t,n,o=0,r=-1){r<0&&(r=n.data.length),o<0||t<0||t>e.data.length||(r=Math.min(n.data.length-o,e.data.length-t))<0||(v(e),S(e.data,t,n.data,o,r))}}}(pxsim=pxsim||{}),function(t){(t.control||(t.control={})).createBufferFromUTF8=function(e){return new t.RefBuffer(t.U.toUTF8Array(e))}}(pxsim=pxsim||{}),function(e){{e=e.localization||(e.localization={});let o={};function r(e,o){return 0==o.length?e:e.replace(/\{([0-9]+)(\:[^\}]+)?\}/g,function(e,t,n){let r=o[parseInt(t)],i="",s=/^:f(\d*)\.(\d+)/.exec(n);if(s){let e=parseInt(s[2]),t=parseInt(s[1])||0,n=/^0/.test(s[1])?"0":" ",o=r.toFixed(e);if(0<t&&0<e&&(t+=e+1),0<t)for(;o.length<t;)o=n+o;i=o}else i=":x"==n?"0x"+r.toString(16):void 0===r?"(undef)":null===r?"(null)":r.toString?r.toString():r+"";return":a"==n?/^\s*[euioah]/.test(i.toLowerCase())?i="an "+i:/^\s*[bcdfgjklmnpqrstvwxz]/.test(i.toLowerCase())&&(i="a "+i):":s"==n?i=1==r?"":"s":":q"==n?i=a(i):":jq"==n?i=l(i):":uri"==n?i=encodeURIComponent(i).replace(/'/g,"%27").replace(/"/g,"%22"):":url"==n?i=encodeURI(i).replace(/'/g,"%27").replace(/"/g,"%22"):":%"==n&&(i=(100*r).toFixed(1).toString()+"%"),i})}function a(e){return e&&e.replace(/([^\w .!?\-$])/g,e=>"&#"+e.charCodeAt(0)+";")}function l(e){return e.replace(/[^\w .!?\-$]/g,e=>{e=e.charCodeAt(0).toString(16);return"\\u"+"0000".substr(0,4-e.length)+e})}e.setLocalizedStrings=function(e){o=e||{}},e.lf=function(e,...t){let n=o[e]||e;return r(n=n.replace(/^\{(id|loc):[^\}]+\}/g,""),t)},e.fmt_va=r,e.htmlEscape=a,e.jsStringQuote=l}}(pxsim=pxsim||{}),function(pxsim){const MIN_MESSAGE_WAIT_MS=200;let tracePauseMs=0,U,pxtcore;!function(e){function t(e){return e.split(/\s+/).filter(e=>!!e)}function n(e){for(;e.firstChild;)e.removeChild(e.firstChild)}let o;e.containsClass=function(n,e){return t(e).every(e=>{return e=e,(t=n).classList?t.classList.contains(e):!((t.className+"").split(/\s+/).indexOf(e)<0);var t})},e.addClass=function(n,e){t(e).forEach(e=>{var t;e=e,(t=n).classList?t.classList.add(e):(t.className+"").split(/\s+/).indexOf(e)<0&&(t.className.baseVal+=" "+e)})},e.removeClass=function(n,e){t(e).forEach(e=>{var t;t=e,(e=n).classList?e.classList.remove(t):e.className.baseVal=(e.className+"").split(/\s+/).filter(e=>e!=t).join(" ")})},e.remove=function(e){e.parentElement.removeChild(e)},e.removeChildren=n,e.clear=function(e){n(e)},e.assert=function(e,t="Assertion failed"){if(!e)throw new Error(t)},e.repeatMap=function(t,n){t=t||0;var o=[];for(let e=0;e<t;++e)o.push(n(e));return o},e.userError=function(e){e=new Error(e);throw e.isUserError=!0,e},e.now=function(){return Date.now()},e.perfNowUs=function(){return 1e3*(o=o||("undefined"!=typeof performance?performance.now.bind(performance)||performance.moznow.bind(performance)||performance.msNow.bind(performance)||performance.webkitNow.bind(performance)||performance.oNow.bind(performance):Date.now))()};const r=Promise.resolve();async function i(t,n,o){let r=0;const i=[],s=[];for(let e=0;e<t;e++){const t=(async()=>{for(;r<n.length;){var e=r++,t=n[e];s[e]=await o(t)}})();i.push(t)}try{await Promise.all(i)}catch(t){throw r=n.length,t}return s}function s(){return"undefined"!=typeof window&&!!window.pxtElectron}function a(){return"undefined"!=typeof window&&!!window.ipcRenderer}function l(){return s()||a()}function c(){try{return"undefined"!=typeof window&&/^http:\/\/(localhost|127\.0\.0\.1):\d+\//.test(window.location.href)&&!/nolocalhost=1/.test(window.location.href)}catch(e){return!1}}e.nextTick=function(e){r.then(e)},e.delay=async function(t,e){e=await e;return await new Promise(e=>setTimeout(()=>e(),t)),e},e.promiseMapAll=function(e,t){return Promise.all(e.map(e=>t(e)))},e.promiseMapAllSeries=function(e,t){return i(1,e,t)},e.promisePoolAsync=i,e.promiseTimeout=async function(n,e,o){let r,i;var t=new Promise((e,t)=>{i=e,r=setTimeout(()=>{i=void 0,clearTimeout(r),t(o||`Promise timed out after ${n}ms`)},n)});return Promise.race([e,t]).then(e=>(i&&(clearTimeout(r),i()),e))},e.stringToUint8Array=function(t){var n=t.length,o=new Uint8Array(n);for(let e=0;e<n;++e)o[e]=255&t.charCodeAt(e);return o},e.uint8ArrayToString=function(t){let n=t.length,o="";for(let e=0;e<n;++e)o+=String.fromCharCode(t[e]);return o},e.fromUTF8=function(t){if(!t)return"";let n="";for(let e=0;e<t.length;++e){var o=255&t.charCodeAt(e);n+=37==o||127<o?"%"+o.toString(16):t.charAt(e)}return decodeURIComponent(n)},e.toUTF8=function(n,o){let r="";if(n)for(let t=0;t<n.length;++t){let e=n.charCodeAt(t);var i;e<=127?r+=n.charAt(t):e<=2047?r+=String.fromCharCode(192|e>>6,128|63&e):(!o&&55296<=e&&e<=56319&&(i=n.charCodeAt(++t),isNaN(i)||(e=65536+(e-55296<<10)+(i-56320))),r+=e<=65535?String.fromCharCode(224|e>>12,128|e>>6&63,128|63&e):String.fromCharCode(240|e>>18,128|e>>12&63,128|e>>6&63,128|63&e))}return r},e.toUTF8Array=function(e){return(new TextEncoder).encode(e)},e.fromUTF8Array=function(e){return(new TextDecoder).decode(e)},e.isPxtElectron=s,e.isIpcRenderer=a,e.isElectron=l,e.isLocalHost=c,e.isLocalHostDev=function(){return c()&&!l()},e.unique=function(e,n){let o=[],r={};return e.forEach(e=>{var t=n(e);r.hasOwnProperty(t)||(r[t]=null,o.push(e))}),o}}(U=pxsim.U||(pxsim.U={}));class BreakLoopException{}function getResume(){return pxsim.runtime.getResume()}pxsim.BreakLoopException=BreakLoopException,function(e){function t(e){var t=pxsim.runtime.currTryFrame(),n=(t||U.userError("unhandled exception: "+e),t.handlerFrame);throw(pxsim.runtime.currFrame=n).pc=t.handlerPC,n.tryFrame=t.parent,n.thrownValue=e,n.hasThrownValue=!0,new BreakLoopException}e.beginTry=function(e){pxsim.runtime.currFrame.tryFrame={parent:pxsim.runtime.currTryFrame(),handlerPC:e,handlerFrame:pxsim.runtime.currFrame}},e.endTry=function(){var e=pxsim.runtime.currFrame;e.tryFrame=e.tryFrame.parent},e.throwValue=t,e.getThrownValue=function(){var e=pxsim.runtime.currFrame;return U.assert(e.hasThrownValue),e.hasThrownValue=!1,e.thrownValue},e.endFinally=function(){var e=pxsim.runtime.currFrame;e.hasThrownValue&&(e.hasThrownValue=!1,t(e.thrownValue))}}(pxtcore=pxsim.pxtcore||(pxsim.pxtcore={})),pxsim.getResume=getResume;const SERIAL_BUFFER_LENGTH=16;class BaseBoard{constructor(){this.messageListeners=[],this.serialOutBuffer="",this.messages=[],this.lastSerialTime=0,this.debouncedPostAll=()=>{var e=Date.now();e-this.lastSerialTime>MIN_MESSAGE_WAIT_MS?(clearTimeout(this.serialTimeout),this.messages.length&&(Runtime.postMessage({type:"bulkserial",data:this.messages,id:pxsim.runtime.id,sim:!0}),this.messages=[],this.lastSerialTime=e)):this.serialTimeout=setTimeout(this.debouncedPostAll,50)},this.id=pxsim.Embed.frameid||"b"+Math.round(2147483647*Math.random()),this.bus=new pxsim.EventBus(pxsim.runtime,this)}updateView(){}receiveMessage(e){pxsim.runtime&&!pxsim.runtime.dead&&this.dispatchMessage(e)}dispatchMessage(e){for(const t of this.messageListeners)t(e)}addMessageListener(e){this.messageListeners.push(e)}get storedState(){return this.runOptions?(this.runOptions.storedState||(this.runOptions.storedState={}),this.runOptions.storedState):{}}initAsync(e){return this.runOptions=e,Promise.resolve()}setStoredState(e,t){null==t?delete this.storedState[e]:this.storedState[e]=t,Runtime.postMessage({type:"simulator",command:"setstate",stateKey:e,stateValue:t})}onDebuggerResume(){}screenshotAsync(e){return Promise.resolve(void 0)}kill(){}writeSerial(e){this.serialOutBuffer+=e,(/\n/.test(this.serialOutBuffer)||this.serialOutBuffer.length>SERIAL_BUFFER_LENGTH)&&(this.messages.push({time:Date.now(),data:this.serialOutBuffer}),this.debouncedPostAll(),this.serialOutBuffer="")}}pxsim.BaseBoard=BaseBoard;class CoreBoard extends BaseBoard{constructor(){super(),this.updateSubscribers=[],this.updateView=()=>{this.updateSubscribers.forEach(e=>e())},this.builtinParts={},this.builtinVisuals={},this.builtinPartVisuals={}}kill(){super.kill(),pxsim.AudioContextManager.stopAll()}}pxsim.CoreBoard=CoreBoard;class BareBoard extends BaseBoard{}function initBareRuntime(){pxsim.runtime.board=new BareBoard;var e=pxsim;e.basic={pause:pxsim.thread.pause,showNumber:e=>{var t=getResume();console.log("SHOW NUMBER:",e),U.nextTick(t)}},e.serial={writeString:e=>pxsim.runtime.board.writeSerial(e)},e.pins={createBuffer:pxsim.BufferMethods.createBuffer},e.control={inBackground:pxsim.thread.runInBackground,createBuffer:pxsim.BufferMethods.createBuffer,dmesg:e=>console.log("DMESG: "+e),deviceDalVersion:()=>"sim",__log:(e,t)=>console.log("LOG: "+t.trim())}}let LogType;pxsim.initBareRuntime=initBareRuntime,function(e){e[e.UserSet=0]="UserSet",e[e.BackAdd=1]="BackAdd",e[e.BackRemove=2]="BackRemove"}(LogType=LogType||{});class EventQueue{constructor(e,t){this.runtime=e,this.valueToArgs=t,this.max=5,this.events=[],this.awaiters=[],this._handlers=[],this._addRemoveLog=[]}push(e,t){if(0<this.awaiters.length)if(t){const e=this.awaiters.shift();e&&e()}else{const e=this.awaiters.slice();this.awaiters=[],e.forEach(e=>e())}return 0==this.handlers.length||this.events.length>this.max||(this.events.push(e),this.lock)?Promise.resolve():this.poke()}poke(){this.lock=!0;var e=this.events;return this.events=[],U.promiseMapAllSeries(e,t=>U.promiseMapAllSeries(this.handlers,e=>this.runtime.runFiberAsync(e,...this.valueToArgs?this.valueToArgs(t):[t]))).then(()=>0<this.events.length?this.poke():(this.lock=!1,this._addRemoveLog.forEach(e=>{e.log===LogType.BackAdd?this.addHandler(e.act):e.log===LogType.BackRemove?this.removeHandler(e.act):this.setHandler(e.act)}),this._addRemoveLog=[],Promise.resolve()))}get handlers(){return this._handlers}setHandler(e){this.lock?this._addRemoveLog.push({act:e,log:LogType.UserSet}):this._handlers=[e]}addHandler(e){this.lock?this._addRemoveLog.push({act:e,log:LogType.BackAdd}):-1==this._handlers.indexOf(e)&&this._handlers.push(e)}removeHandler(e){this.lock?this._addRemoveLog.push({act:e,log:LogType.BackRemove}):-1!=(e=this._handlers.indexOf(e))&&this._handlers.splice(e,1)}addAwaiter(e){this.awaiters.push(e)}}function bind(e){const o=e.arg0,r=e.fn;return e=>{let t=0;for(;e.hasOwnProperty("arg"+t);)t++;var n=e;for(let e=t;0<e;e--)n["arg"+e]=n["arg"+(e-1)];return e.arg0=o,r(e)}}function _leave(e,t){return e.parent.retval=t,e.parent}function syntheticRefAction(t){return pxtcore.mkAction(0,e=>_leave(e,t(e)))}pxsim.EventQueue=EventQueue,pxsim.initCurrentRuntime=void 0,pxsim.handleCustomMessage=void 0,pxsim.syntheticRefAction=syntheticRefAction;class TimeoutScheduled{constructor(e,t,n,o){this.id=e,this.fn=t,this.totalRuntime=n,this.timestampCall=o}}pxsim.TimeoutScheduled=TimeoutScheduled;class PausedTimeout{constructor(e,t){this.fn=e,this.timeRemaining=t}}function mkVTable(e){return{name:e.name,numFields:e.numFields,classNo:e.classNo,methods:e.methods,iface:e.iface,lastSubtypeNo:e.lastSubtypeNo,toStringMethod:e.toStringMethod,maxBgInstances:e.maxBgInstances}}pxsim.PausedTimeout=PausedTimeout,pxsim.mkVTable=mkVTable;let mapVTable=null;function mkMapVTable(){return mapVTable=mapVTable||mkVTable({name:"_Map",numFields:0,classNo:0,lastSubtypeNo:0,methods:null})}function functionName(e){e=e.info;return e?`${e.functionName} (${e.fileName}:${e.line+1}:${e.column+1})`:"()"}pxsim.mkMapVTable=mkMapVTable,pxsim.functionName=functionName;class Runtime{constructor(msg){this.numGlobals=1e3,this.dead=!1,this.running=!1,this.idleTimer=void 0,this.recording=!1,this.recordingTimer=0,this.recordingLastImageData=void 0,this.recordingWidth=void 0,this.startTime=0,this.startTimeUs=0,this.pausedTime=0,this.lastPauseTimestamp=0,this.globals={},this.environmentGlobals={},this.otherFrames=[],this.loopLock=null,this.loopLockWaitList=[],this.heapSnapshots=[],this.timeoutsScheduled=[],this.timeoutsPausedOnBreakpoint=[],this.pausedOnBreakpoint=!1,this.traceDisabled=!1,this.perfOffset=0,this.perfElapsed=0,this.perfStack=0,this.refCountingDebug=!1,this.refObjId=1,this.numDisplayUpdates=0,U.assert(!!pxsim.initCurrentRuntime),this.id=msg.id,this.refCountingDebug=!!msg.refCountingDebug;let threadId=0,breakpoints=null,currResume,dbgHeap,dbgResume,breakFrame=null,lastYield=Date.now(),userGlobals,__this=this;this.traceDisabled=!!msg.traceDisabled;const evalIface={runtime:this,oops:oops,doNothing:doNothing,pxsim:pxsim,globals:this.globals,setupYield:setupYield,maybeYield:maybeYield,setupDebugger:setupDebugger,isBreakFrame:isBreakFrame,breakpoint:breakpoint,trace:trace,checkStack:checkStack,leave:_leave,checkResumeConsumed:checkResumeConsumed,setupResume:setupResume,setupLambda:setupLambda,checkSubtype:checkSubtype,failedCast:failedCast,buildResume:buildResume,mkVTable:mkVTable,bind:bind,leaveAccessor:leaveAccessor};function oops(e){throw new Error("sim error: "+e)}function doNothing(e){return e.pc=-1,_leave(e,e.parent.retval)}function flushLoopLock(){for(;0<__this.loopLockWaitList.length&&!__this.loopLock;)__this.loopLockWaitList.shift()()}let yieldReset=()=>{};function setupYield(e){yieldReset=e}function loopForSchedule(e){const t=new Object,n=e.pc;return __this.loopLock=t,__this.otherFrames.push(e),()=>{__this.dead||(U.assert(e.pc==n),U.assert(__this.loopLock===t),__this.loopLock=null,loop(e),flushLoopLock())}}function maybeYield(e,t,n){if(__this.pausedOnBreakpoint)return!1;__this.cleanScheduledExpired(),yieldReset();var o=Date.now();return 20<=o-lastYield&&(lastYield=o,e.pc=t,e.r0=n,setTimeout(loopForSchedule(e),5),!0)}function setupDebugger(e,t){return(breakpoints=new Uint8Array(e))[0]=msg.breakOnStart?1:0,userGlobals=t,breakpoints}function isBreakFrame(t){if(!breakFrame)return!0;for(let e=breakFrame;e;e=e.parent)if(e==t)return!0;return!1}function breakpoint(t,n,e,o){let r={};__this.loopLock=r,U.assert(!dbgResume),U.assert(!dbgHeap),t.pc=n,t.r0=o;var{msg:o,heap:e}=pxsim.getBreakpointMsg(t,e,userGlobals);return dbgHeap=e,pxsim.injectEnvironmentGlobals(o,e),Runtime.postMessage(o),breakpoints[0]=0,breakFrame=null,__this.pauseScheduled(),dbgResume=e=>{if(dbgResume=null,dbgHeap=null,__this.dead)return null;switch(__this.resumeAllPausedScheduled(),__this.board.onDebuggerResume(),pxsim.runtime=__this,U.assert(t.pc==n),breakpoints[0]=0,breakFrame=null,e.subtype){case"resume":break;case"stepover":breakpoints[0]=1,breakFrame=t;break;case"stepinto":breakpoints[0]=1;break;case"stepout":breakpoints[0]=1,breakFrame=t.parent||t}U.assert(__this.loopLock==r),__this.loopLock=null,__this.otherFrames.push(t),loop(t),flushLoopLock()},null}function trace(e,t,n,o){if(setupResume(t,n),"<main>"===o.functionName||"main.ts"===o.fileName){if(!pxsim.runtime.traceDisabled){const n=pxsim.getBreakpointMsg(t,e,userGlobals)["msg"];n.subtype="trace",Runtime.postMessage(n)}pxsim.thread.pause(tracePauseMs||1)}else pxsim.thread.pause(0);checkResumeConsumed()}function handleDebuggerMsg(t){switch(t.subtype){case"config":var n=t;if(n.setBreakpoints&&breakpoints){breakpoints.fill(0);for(var o of n.setBreakpoints)breakpoints[o]=1}break;case"traceConfig":tracePauseMs=t.interval;break;case"pause":breakpoints[0]=1,breakFrame=null;break;case"resume":case"stepover":case"stepinto":case"stepout":dbgResume&&dbgResume(t);break;case"variables":n=t;let e;if(dbgHeap){const t=dbgHeap[n.variablesReference];void 0!==t&&(e=pxsim.dumpHeap(t,dbgHeap,n.fields))}Runtime.postMessage({type:"debugger",subtype:"variables",req_seq:t.seq,variables:e})}}function removeFrame(t){var n=__this.otherFrames;for(let e=n.length-1;0<=e;--e)if(n[e]===t)return n.splice(e,1);U.userError("frame cannot be removed!")}function loop(t){if(__this.dead)console.log("Runtime terminated");else{U.assert(!__this.loopLock),__this.perfStartRuntime(),removeFrame(t);try{for(pxsim.runtime=__this;t;)__this.currFrame=t,__this.currFrame.overwrittenPC=!1,t=t.fn(t),__this.maybeUpdateDisplay(),__this.currFrame.overwrittenPC&&(t=__this.currFrame);__this.perfStopRuntime()}catch(e){var n,o;e instanceof BreakLoopException?U.nextTick(loopForSchedule(__this.currFrame)):(__this.perfStopRuntime(),__this.errorHandler?__this.errorHandler(e):(console.error("Simulator crashed, no error handler",e.stack),{msg:n,heap:o}=pxsim.getBreakpointMsg(t,t.lastBrkId,userGlobals),pxsim.injectEnvironmentGlobals(n,o),n.exceptionMessage=e.message,n.exceptionStack=e.stack,Runtime.postMessage(n),__this.postError&&__this.postError(e)))}}}function checkStack(e){100<e&&U.userError("Stack overflow")}function actionCall(e){return e.depth=e.parent.depth+1,checkStack(e.depth),e.pc=0,e}function setupTop(e){e=setupTopCore(e);return setupResume(e,0),e}function setupTopCore(e){let t={parent:null,pc:0,depth:0,threadId:++threadId,fn:()=>(e&&e(t.retval),null)};return t}function topCall(e,t){U.assert(!!__this.board),U.assert(!__this.running),__this.setRunning(!0);t={parent:setupTopCore(t),fn:e,depth:0,pc:0};__this.otherFrames=[t],loop(actionCall(t))}function checkResumeConsumed(){currResume&&oops("getResume() not called")}function setupResume(e,t){currResume=buildResume(e,t)}function leaveAccessor(t,n){if(t.stage2Call){var o={pc:0,fn:null,depth:t.depth,parent:t.parent};let e=1;for(;t.hasOwnProperty("arg"+e);)o["arg"+(e-1)]=t["arg"+e],e++;return setupLambda(o,n),o}return t.parent.retval=n,t.parent}function setupLambda(e,t,n){if(n){const t=e;for(let e=1;e<n;++e)t["arg"+(e-1)]=t["arg"+e];delete t["arg"+(n-1)]}t instanceof pxsim.RefAction?(e.fn=t.func,e.caps=t.fields):"function"==typeof t?e.fn=t:oops("calling non-function")}function checkSubtype(e,t){return!!e&&(t===(e=e.vtable)||e&&t.classNo<=e.classNo&&e.classNo<=t.lastSubtypeNo)}function failedCast(e){pxsim.control&&pxsim.control.dmesgValue&&pxsim.control.dmesgValue(e),oops("failed cast on "+e)}function buildResume(r,t){currResume&&oops("already has resume"),r.pc=t;let n=Date.now(),i=(__this.otherFrames.push(r),o=>{if(!__this.dead){if(!__this.loopLock){pxsim.runtime=__this;var e=Date.now();if(3<e-n&&(lastYield=e),U.assert(r.pc==t),o instanceof pxsim.FnWrapper){let e=o,t={parent:r,fn:e.func,lambdaArgs:e.args,pc:0,caps:e.caps,depth:r.depth+1},n={};return __this.loopLock=n,removeFrame(r),__this.otherFrames.push(t),U.nextTick(()=>{U.assert(__this.loopLock===n),__this.loopLock=null,loop(actionCall(t)),flushLoopLock()})}return r.retval=o,loop(r)}__this.loopLockWaitList.push(()=>i(o))}});return i}const entryPoint=msg.code&&eval(msg.code)(evalIface);this.run=e=>topCall(entryPoint,e),this.getResume=()=>{currResume||oops("noresume");var e=currResume;return currResume=null,e},this.setupTop=setupTop,this.handleDebuggerMsg=handleDebuggerMsg,this.entry=entryPoint,this.overwriteResume=e=>{currResume=null,0<=e&&(this.currFrame.pc=e),this.currFrame.overwrittenPC=!0},pxsim.runtime=this,pxsim.initCurrentRuntime(msg)}registerLiveObject(e){return this.refObjId++}runningTime(){return U.now()-this.startTime-this.pausedTime}runningTimeUs(){return 4294967295&U.perfNowUs()-this.startTimeUs>>0}runFiberAsync(n,o,r,i){return new Promise((e,t)=>U.nextTick(()=>{(pxsim.runtime=this).setupTop(e),pxtcore.runAction(n,[o,r,i])}))}currTryFrame(){for(let e=this.currFrame;e;e=e.parent)if(e.tryFrame)return e.tryFrame;return null}traceObjects(){const i={};for(;2<this.heapSnapshots.length;)this.heapSnapshots.shift();const t={count:0,size:0,name:"TOTAL"},n={TOTAL:t};function s(e,t,n=null){if(t instanceof pxsim.RefObject)if(!t.gcIsStatic()){var o=i[t.id];if(o)return n&&o.pointers.push([n,e]);const r={obj:t,path:null,pointers:[[n,e]]};i[t.id]=r,t.scan((e,t)=>{t instanceof pxsim.RefObject&&!i[t.id]&&s(e,t,r)})}}this.heapSnapshots.push({visited:i,statsByType:n});for(var e of Object.keys(this.globals))s(e.replace(/___\d+$/,""),this.globals[e]);const o=this.otherFrames.slice();this.currFrame&&o.indexOf(this.currFrame)<0&&o.unshift(this.currFrame);for(const i of this.getThreads()){const t="Thread-"+this.rootFrame(i).threadId;for(let e=i;e;e=e.parent){const i=t+"."+functionName(e.fn);for(var r of Object.keys(e))if(/^(r0|arg\d+|.*___\d+)/.test(r)){const o=e[r];o instanceof pxsim.RefObject&&s(i+"."+(r=r.replace(/___.*/,"")),o)}if(e.caps)for(var a of e.caps)s(i+".cap",a)}}const l=Object.keys(i).map(e=>i[e]),c=(l.sort((e,t)=>t.obj.gcSize()-e.obj.gcSize()),t=>{if(null==t.path){let e="";t.path="(cycle)";for(var[n,o]of t.pointers){if(null==n)return void(t.path=o);c(n);n=n.path+"."+o;(!e||e.length>n.length)&&(e=n)}t.path=e}});l.forEach(c);var u=[t];for(const i of l){const s=i.obj.gcSize(),o=i.obj.gcKey(),l=(n.hasOwnProperty(o)||u.push(n[o]={count:0,size:0,name:o}),n[o]);l.size+=s,l.count++,t.size+=s,t.count++}u.sort((e,t)=>e.size-t.size);let d="";const p=e=>("        "+e.toString()).slice(-7);for(const i of u)d+=p(4*i.size)+p(i.count)+" "+i.name+"\n";var g=e=>p(4*e.obj.gcSize())+" "+e.obj.gcKey()+" "+e.path,h=l.slice(0,20).map(g).join("\n");let _="";if(3<=this.heapSnapshots.length){const i=this.heapSnapshots[this.heapSnapshots.length-3].visited,t=this.heapSnapshots[this.heapSnapshots.length-2].visited,s=e=>e instanceof pxsim.RefRecord&&!!(e.vtable&&e.vtable.maxBgInstances&&n[e.gcKey()].count<=e.vtable.maxBgInstances);_=l.filter(e=>!i[e.obj.id]&&t[e.obj.id]).filter(e=>!s(e.obj)).map(g).join("\n")}return"Threads:\n"+this.threadInfo()+"\n\nSummary:\n"+d+"\n\nLarge Objects:\n"+h+"\n\nNew Objects:\n"+_}getThreads(){var e=this.otherFrames.slice();return this.currFrame&&e.indexOf(this.currFrame)<0&&e.unshift(this.currFrame),e}rootFrame(e){let t=e;for(;t.parent;)t=t.parent;return t}threadInfo(){var e;let t="";for(e of this.getThreads()){t+=`Thread ${this.rootFrame(e).threadId}:
`;for(var n of pxsim.getBreakpointMsg(e,e.lastBrkId).msg.stackframes){n=n.funcInfo;t+=`   at ${n.functionName} (${n.fileName}:${n.line+1}:${n.column+1})
`}t+="\n"}return t}static postMessage(e){e&&("undefined"!=typeof window&&window.parent&&window.parent.postMessage&&window.parent.postMessage(e,"*"),Runtime.messagePosted)&&Runtime.messagePosted(e)}static postScreenshotAsync(t){var e=pxsim.runtime&&pxsim.runtime.board;return(e?e.screenshotAsync().catch(e=>{console.debug("screenshot failed")}):Promise.resolve(void 0)).then(e=>Runtime.postMessage({type:"screenshot",data:e,delay:t&&t.delay}))}static requestToggleRecording(){var e=pxsim.runtime;e&&Runtime.postMessage({type:"recorder",action:e.recording?"stop":"start"})}restart(){this.kill(),setTimeout(()=>pxsim.Runtime.postMessage({type:"simulator",command:"restart"}),500)}kill(){this.dead=!0,this.stopRecording(),this.stopIdle(),this.setRunning(!1)}updateDisplay(){this.board.updateView(),this.postFrame()}startRecording(e){!this.recording&&this.running&&(this.recording=!0,this.recordingTimer=setInterval(()=>this.postFrame(),66),this.recordingLastImageData=void 0,this.recordingWidth=e)}stopRecording(){this.recording&&(this.recordingTimer&&clearInterval(this.recordingTimer),this.recording=!1,this.recordingTimer=0,this.recordingLastImageData=void 0,this.recordingWidth=void 0)}postFrame(){if(this.recording&&this.running){let r=pxsim.U.now();this.board.screenshotAsync(this.recordingWidth).then(t=>{if(this.recordingLastImageData&&t&&this.recordingLastImageData.data.byteLength==t.data.byteLength){const r=this.recordingLastImageData.data,n=t.data,o=r.byteLength;let e=0;for(e=0;e<o&&r[e]==n[e];++e);if(e==o)return}this.recordingLastImageData=t,Runtime.postMessage({type:"screenshot",data:t,time:r})})}}queueDisplayUpdate(){this.numDisplayUpdates++}maybeUpdateDisplay(){this.numDisplayUpdates&&(this.numDisplayUpdates=0,this.updateDisplay())}setRunning(e){this.running!=e&&(this.running=e,this.running?(this.startTime=U.now(),this.startTimeUs=U.perfNowUs(),Runtime.postMessage({type:"status",frameid:pxsim.Embed.frameid,runtimeid:this.id,state:"running"})):(this.stopRecording(),this.stopIdle(),Runtime.postMessage({type:"status",frameid:pxsim.Embed.frameid,runtimeid:this.id,state:"killed"})),this.stateChanged)&&this.stateChanged()}dumpLivePointers(){}setupPerfCounters(e){e&&e.length&&(this.perfCounters=e.map(e=>new PerfCounter(e)))}perfStartRuntime(){0!==this.perfOffset?this.perfStack++:this.perfOffset=U.perfNowUs()-this.perfElapsed}perfStopRuntime(){this.perfStack?this.perfStack--:(this.perfElapsed=this.perfNow(),this.perfOffset=0)}perfNow(){return 0===this.perfOffset&&U.userError("bad time now"),U.perfNowUs()-this.perfOffset|0}startPerfCounter(e){this.perfCounters&&((e=this.perfCounters[e]).start&&U.userError("startPerf"),e.start=this.perfNow())}stopPerfCounter(t){if(this.perfCounters){var t=this.perfCounters[t],n=(t.start||U.userError("stopPerf"),this.perfNow()-t.start);t.start=0,t.value+=n,t.numstops++;let e=t.lastFewPtr++;e>=t.lastFew.length&&(e=0,t.lastFewPtr=1),t.lastFew[e]=n}}startIdle(){void 0===this.idleTimer&&(this.idleTimer=setInterval(()=>{var e;this.running&&!this.pausedOnBreakpoint&&(e=this.board.bus)&&e.queueIdle()},20))}stopIdle(){void 0!==this.idleTimer&&(clearInterval(this.idleTimer),this.idleTimer=void 0)}schedule(t,e){if(e<=0&&(e=0),this.pausedOnBreakpoint)return this.timeoutsPausedOnBreakpoint.push(new PausedTimeout(t,e)),-1;const n=U.now(),o=new TimeoutScheduled(-1,t,e,n);return o.id=setTimeout(()=>{var e=this.timeoutsScheduled.indexOf(o);0<=e&&this.timeoutsScheduled.splice(e,1),t()},e),this.timeoutsScheduled.push(o),o.id}pauseScheduled(){this.pausedOnBreakpoint=!0,this.timeoutsScheduled.forEach(e=>{clearTimeout(e.id);let t=U.now()-e.timestampCall,n=e.totalRuntime-t;n<=0&&(n=1),this.timeoutsPausedOnBreakpoint.push(new PausedTimeout(e.fn,n))}),this.lastPauseTimestamp=U.now(),this.timeoutsScheduled=[]}resumeAllPausedScheduled(){this.pausedOnBreakpoint=!1,this.timeoutsPausedOnBreakpoint.forEach(e=>{this.schedule(e.fn,e.timeRemaining)}),this.lastPauseTimestamp&&(this.pausedTime+=U.now()-this.lastPauseTimestamp,this.lastPauseTimestamp=0),this.timeoutsPausedOnBreakpoint=[]}cleanScheduledExpired(){let n=U.now();this.timeoutsScheduled=this.timeoutsScheduled.filter(e=>{var t=n-e.timestampCall;return e.totalRuntime>t})}}pxsim.Runtime=Runtime;class PerfCounter{constructor(e){this.name=e,this.start=0,this.numstops=0,this.value=0,this.lastFew=new Uint32Array(32),this.lastFewPtr=0}}pxsim.PerfCounter=PerfCounter}(pxsim=pxsim||{}),function(l){let r,o;var e;(e=r=l.SimulatorState||(l.SimulatorState={}))[e.Unloaded=0]="Unloaded",e[e.Stopped=1]="Stopped",e[e.Pending=2]="Pending",e[e.Starting=3]="Starting",e[e.Running=4]="Running",e[e.Paused=5]="Paused",e[e.Suspended=6]="Suspended",(e=o=l.SimulatorDebuggerCommand||(l.SimulatorDebuggerCommand={}))[e.StepInto=0]="StepInto",e[e.StepOver=1]="StepOver",e[e.StepOut=2]="StepOut",e[e.Resume=3]="Resume",e[e.Pause=4]="Pause";const i="pxtdriver";l.SimulatorDriver=class{constructor(e,t={}){this.container=e,this.options=t,this.themes=["blue","red","green","yellow"],this.runId="",this.nextFrameId=0,this.frameCounter=0,this.traceInterval=0,this.breakpointsSet=!1,this._runOptions={},this.state=r.Unloaded,this._allowedOrigins=[],this.frameCleanupTimeout=void 0,this.debuggerSeq=1,this.debuggerResolvers={},this._allowedOrigins.push(window.location.origin),t.parentOrigin&&this._allowedOrigins.push(t.parentOrigin),this._allowedOrigins.push(this.getSimUrl().origin);const n=null==t?void 0:t.messageSimulators;n&&Object.keys(n).map(e=>n[e]).forEach(e=>{this._allowedOrigins.push(new URL(e.url).origin),e.localHostUrl&&this._allowedOrigins.push(new URL(e.localHostUrl).origin)}),this._allowedOrigins=l.U.unique(this._allowedOrigins,e=>e)}isDebug(){return this._runOptions&&!!this._runOptions.debug}isTracing(){return this._runOptions&&!!this._runOptions.trace}hasParts(){return this._runOptions&&this._runOptions.parts&&!!this._runOptions.parts.length}setDirty(){this.state==l.SimulatorState.Running&&this.suspend()}setPending(){this.setState(r.Pending)}focus(){var e=this.simFrames()[0];e&&e.focus()}registerDependentEditor(e){e&&(this._dependentEditors||(this._dependentEditors=[]),this._dependentEditors.push(e))}dependentEditors(){return this._dependentEditors&&(this._dependentEditors=this._dependentEditors.filter(e=>!!e.parent),this._dependentEditors.length||(this._dependentEditors=void 0)),this._dependentEditors}setStarting(){this.setState(r.Starting)}setHwDebugger(e){e?(this.hwdbg=e,this.setState(r.Running),this.container.style.opacity="0.3"):(delete this.container.style.opacity,this.hwdbg=null,this.setState(r.Running),this.stop())}handleHwDebuggerMsg(e){this.hwdbg&&this.handleMessage(e)}setThemes(e){l.U.assert(e&&0<e.length),this.themes=e}startRecording(e){this.simFrames()[0]&&this.postMessage({type:"recorder",action:"start",source:i,width:e})}stopRecording(){this.postMessage({type:"recorder",source:i,action:"stop"})}setFrameState(e){var t=e.nextElementSibling,n=t.nextElementSibling;switch(this.state){case r.Pending:case r.Starting:t.style.display="",t.className="",n.style.display="";break;case r.Stopped:case r.Suspended:l.U.addClass(e,this.state==r.Stopped||this._runOptions&&this._runOptions.autoRun?this.stoppedClass:this.invalidatedClass),this._runOptions&&this._runOptions.autoRun?t.style.display="none":(t.style.display="",t.className="videoplay xicon icon"),n.style.display="none",this.scheduleFrameCleanup();break;default:l.U.removeClass(e,this.stoppedClass),l.U.removeClass(e,this.invalidatedClass),t.style.display="none",n.style.display="none"}}setState(e){this.state!=e&&(this.state=e,this.freeze(this.state==r.Paused),this.simFrames().forEach(e=>this.setFrameState(e)),this.options.onStateChanged)&&this.options.onStateChanged(this.state)}freeze(e){const n="pause-overlay";e?l.util.toArray(this.container.querySelectorAll("div.simframe")).forEach(e=>{var t;e.querySelector("div."+n)||((t=document.createElement("div")).className=n,t.onclick=e=>(e.preventDefault(),!1),e.appendChild(t))}):l.util.toArray(this.container.querySelectorAll("div.simframe div."+n)).forEach(e=>e.parentElement.removeChild(e))}simFrames(e=!1){var t=l.util.toArray(this.container.getElementsByTagName("iframe")),n=this.loanedIFrame();return n&&!e&&t.unshift(n),t}getSimUrl(){var t=this.options.simUrl||(window.pxtConfig||{}).simUrl||location.origin+"/sim/simulator.html";try{return new URL(t)}catch(e){return new URL(t,location.origin)}}postMessage(n,o,r){var e;if(this.hwdbg)this.hwdbg.postMessage(n);else{var i=this.dependentEditors();let t=this.simFrames();r&&(t=t.filter(e=>e.id===r));const a=n;if(o&&null!=a&&a.broadcast){const r=!(null==(e=this._currentRuntime)||!e.single),a=window.parent&&window.parent!==window.window?window.parent:window.opener;if(this.options.nestedEditorSim&&a){if(o!==a){const l=this.options.parentOrigin||window.location.origin;a.postMessage(n,l)}}else if(i)i.forEach(e=>{o!==e&&e.postMessage(n,window.location.origin)});else if(!r){const o="messagepacket"===n.type&&n.channel,r=o&&this.options.messageSimulators&&this.options.messageSimulators[o];if(r){i=t.find(e=>e.dataset.messagechannel===o);if(i)i.dataset.runid!=this.runId&&this.startFrame(i);else{const e=(l.U.isLocalHost()&&/localhostmessagesims=1/i.test(window.location.href)&&r.localHostUrl||r.url).replace("$PARENT_ORIGIN$",encodeURIComponent(this.options.parentOrigin||""));var s=this.createFrame(e);this.container.appendChild(s),(i=s.firstElementChild).dataset.messagechannel=o,l.U.addClass(s,"simmsg"),l.U.addClass(s,"simmsg"+o),r.permanent&&(i.dataset.permanent="true"),this.startFrame(i),t=this.simFrames()}}else{const l=t.filter(e=>!e.dataset.messagechannel);l.length<2?(this.container.appendChild(this.createFrame()),t=this.simFrames()):l[1].dataset.runid!=this.runId&&this.startFrame(l[1])}}}for(let e=0;e<t.length;++e){const r=t[e];if((!o||r.contentWindow!=o)&&r.contentWindow&&(this.postMessageCore(r,n),"recorder"==n.type)&&"start"==n.action)break}}}postMessageCore(e,t){var n,o,r;if(e.contentWindow.postMessage(t,e.dataset.origin),l.U.isLocalHostDev()&&null!=(n=null==(n=pxt)?void 0:n.appTarget)&&n.id)try{e.contentWindow.postMessage(t,`https://trg-${null==(r=null==(o=pxt)?void 0:o.appTarget)?void 0:r.id}.userpxt.io/---simulator`)}catch(e){}}createFrame(e){var t=document.createElement("div");t.className="simframe ui embed";const n=document.createElement("iframe");n.id="sim-frame-"+this.nextId(),n.title=l.localization.lf("Simulator"),n.allowFullscreen=!0,n.setAttribute("allow","autoplay"),n.setAttribute("sandbox","allow-same-origin allow-scripts"),n.className="no-select";var e=(e||this.getSimUrl())+"#"+n.id,e=(n.src=e,n.frameBorder="0",n.dataset.runid=this.runId,n.dataset.origin=new URL(e).origin||"*",t.appendChild(n),document.createElement("i")),o=(e.className="videoplay xicon icon",e.style.display="none",e.onclick=e=>(e.preventDefault(),this.state!=r.Running&&this.state!=r.Starting&&(this.options.restart?this.options.restart():this.start()),n.focus(),!1),t.appendChild(e),document.createElement("div"));return o.className="ui active loader",e.style.display="none",t.appendChild(o),this._runOptions&&this.applyAspectRatioToFrame(n),t}preload(e){this.simFrames().length||(this.container.appendChild(this.createFrame()),this.applyAspectRatio(e),this.setStarting())}stop(e=!1,t=!1){this.clearDebugger(),this.postMessage({type:"stop",source:i}),this.setState(t?r.Starting:r.Stopped),e&&this.unload()}suspend(){this.postMessage({type:"stop",source:i}),this.setState(r.Suspended)}unload(){this.cancelFrameCleanup(),l.U.removeChildren(this.container),this.setState(r.Unloaded),this._runOptions=void 0,this._currentRuntime=void 0,this.runId=void 0}mute(e){this._currentRuntime&&(this._currentRuntime.mute=e),this.postMessage({type:"mute",source:i,mute:e})}stopSound(){this.postMessage({type:"stopsound",source:i})}isLoanedSimulator(e){return!!this.loanedSimulator&&this.loanedIFrame()==e}loanSimulator(){return this.loanedSimulator||(this.loanedSimulator=this.container.firstElementChild||this.createFrame(),this.loanedSimulator.parentNode&&this.container.removeChild(this.loanedSimulator)),this.loanedSimulator}unloanSimulator(){this.loanedSimulator&&(this.loanedSimulator.parentNode&&this.loanedSimulator.parentNode.removeChild(this.loanedSimulator),this.container.insertBefore(this.loanedSimulator,this.container.firstElementChild),delete this.loanedSimulator)}loanedIFrame(){return this.loanedSimulator&&this.loanedSimulator.parentNode&&this.loanedSimulator.querySelector("iframe")}cancelFrameCleanup(){this.frameCleanupTimeout&&(clearTimeout(this.frameCleanupTimeout),this.frameCleanupTimeout=void 0)}scheduleFrameCleanup(){this.cancelFrameCleanup(),this.frameCleanupTimeout=setTimeout(()=>{this.frameCleanupTimeout=void 0,this.cleanupFrames()},5e3)}applyAspectRatio(t){(t||this._runOptions)&&this.simFrames().forEach(e=>this.applyAspectRatioToFrame(e,t))}applyAspectRatioToFrame(e,t){var n;let o=t;if(void 0===o){const t=parseFloat(e.dataset.aspectratio);isNaN(t)||(o=t)}if(void 0===o){const t=e.dataset.messagechannel;if(t){const e=null==(n=null==(n=null==(n=this.options)?void 0:n.messageSimulators)?void 0:n[t])?void 0:n.aspectRatio;e&&(o=e)}}void 0===o&&(o=(null==(t=this._runOptions)?void 0:t.aspectRatio)||1.22),e.parentElement.style.paddingBottom=100/o+"%"}cleanupFrames(){var e=this.simFrames(!0);e.shift(),e.filter(e=>!e.dataset.permanent).forEach(e=>{this.state!=r.Stopped&&e.dataset.runid==this.runId||(this.options.removeElement?this.options.removeElement(e.parentElement):e.parentElement.remove())})}hide(t){var e;this.suspend(),this.options.removeElement&&((e=this.simFrames()).forEach(e=>{this.options.removeElement(e.parentElement,t)}),0==e.length)&&t&&t()}unhide(){this.options.unhideElement&&this.simFrames().forEach(e=>{this.options.unhideElement(e.parentElement)})}run(e,t={}){this._runOptions=t,this.runId=this.nextId(),this._currentRuntime={type:"run",source:i,boardDefinition:t.boardDefinition,parts:t.parts,builtinParts:t.builtinParts,fnArgs:t.fnArgs,code:e,partDefinitions:t.partDefinitions,mute:t.mute,highContrast:t.highContrast,light:t.light,cdnUrl:t.cdnUrl,localizedStrings:t.localizedStrings,refCountingDebug:t.refCountingDebug,version:t.version,clickTrigger:t.clickTrigger,breakOnStart:t.breakOnStart,storedState:t.storedState,ipc:t.ipc,single:t.single,dependencies:t.dependencies},this.start()}restart(){this.stop(),this.cleanupFrames(),this.start()}areBreakpointsSet(){return this.breakpointsSet}start(){if(this.clearDebugger(),this.addEventListeners(),this.applyAspectRatio(),this.scheduleFrameCleanup(),this._currentRuntime){this.breakpointsSet=!1;let e=this.simFrames()[0];var t;e?this.startFrame(e):(t=this.createFrame(),this.container.appendChild(t),e=t.firstElementChild),this.debuggingFrame=e.id,this.setState(r.Running),this.setTraceInterval(this.traceInterval)}}startFrame(e){var t;return!(!this._currentRuntime||!e.contentWindow||((t=JSON.parse(JSON.stringify(this._currentRuntime))).frameCounter=++this.frameCounter,t.options={theme:this.themes[this.nextFrameId++%this.themes.length]},t.id=t.options.theme+"-"+this.nextId(),e.dataset.runid=this.runId,e.dataset.runtimeid=t.id,e.id!==this.debuggingFrame&&(t.traceDisabled=!0,t.breakOnStart=!1),this.postMessageCore(e,t),this.traceInterval&&this.setTraceInterval(this.traceInterval),this.applyAspectRatioToFrame(e),this.setFrameState(e),0))}handleMessage(e,t){switch(e.type||""){case"ready":{const r=e.frameid,t=document.getElementById(r);t&&(this.startFrame(t),this.options.revealElement)&&this.options.revealElement(t),this.options.onSimulatorReady&&this.options.onSimulatorReady();break}case"status":{const t=e.frameid,n=document.getElementById(t);if(n){const t=e;if(t.runtimeid==n.dataset.runtimeid)switch(t.state){case"running":this.setState(r.Running);break;case"killed":this.setState(r.Stopped)}}break}case"simulator":this.handleSimulatorCommand(e);break;case"serial":case"pxteditor":case"screenshot":case"custom":case"recorder":case"addextensions":break;case"aspectratio":{const r=e,t=r.frameid,o=document.getElementById(t);o&&(o.dataset.aspectratio=r.value+"",this.applyAspectRatioToFrame(o));break}case"debugger":this.handleDebuggerMessage(e);break;case"toplevelcodefinished":this.options.onTopLevelCodeEnd&&this.options.onTopLevelCodeEnd();break;default:this.postMessage(e,t)}}addEventListeners(){this.listener||(this.listener=e=>{this.hwdbg||!l.U.isLocalHost()&&this._allowedOrigins.indexOf(e.origin)<0||this.handleMessage(e.data,e.source)},window.addEventListener("message",this.listener,!1))}removeEventListeners(){this.listener&&(window.removeEventListener("message",this.listener,!1),this.listener=void 0)}resume(e){let t;switch(e){case o.Resume:t="resume",this.setState(r.Running);break;case o.StepInto:t="stepinto",this.setState(r.Running);break;case o.StepOut:t="stepout",this.setState(r.Running);break;case o.StepOver:t="stepover",this.setState(r.Running);break;case o.Pause:t="pause";break;default:return void console.debug("unknown command")}this.postMessage({type:"debugger",subtype:t,source:i})}setBreakpoints(e){this.breakpointsSet=!0,this.postDebuggerMessage("config",{setBreakpoints:e},void 0,this.debuggingFrame)}setTraceInterval(e){this.traceInterval=e,this.postDebuggerMessage("traceConfig",{interval:e})}variablesAsync(e,t){return this.postDebuggerMessageAsync("variables",{variablesReference:e,fields:t},this.debuggingFrame).then(e=>e,e=>{})}handleSimulatorCommand(e){this.options.onSimulatorCommand&&this.options.onSimulatorCommand(e)}clearDebugger(){const t=new Error("Debugging cancelled");Object.keys(this.debuggerResolvers).forEach(e=>{e=this.debuggerResolvers[e].reject;e(t)}),this.debuggerResolvers={},this.debuggerSeq++}handleDebuggerMessage(e){if("trace"!==e.subtype&&console.log("DBG-MSG",e.subtype,e),e.seq){const r=this.debuggerResolvers[e.seq]["resolve"];r&&r(e)}switch(e.subtype){case"warning":this.options.onDebuggerWarning&&this.options.onDebuggerWarning(e);break;case"breakpoint":var t=e;if(this.state==r.Running){t.exceptionMessage?this.suspend():(this.setState(r.Paused),1<this.simFrames(!0).length&&this.resume(o.Pause)),this.options.onDebuggerBreakpoint&&this.options.onDebuggerBreakpoint(t);let e=t.exceptionMessage+"\n";for(var n of t.stackframes){n=n.funcInfo;e+=`   at ${n.functionName} (${n.fileName}:${n.line+1}:${n.column+1})
`}t.exceptionMessage&&console.error(e)}else console.error("debugger: trying to pause from "+this.state);break;case"trace":{const o=e;this.state==r.Running&&this.options.onTraceMessage&&this.options.onTraceMessage(o);break}default:t=e.req_seq;if(t){const r=this.debuggerResolvers[t]["resolve"];r&&(delete this.debuggerResolvers[t],r(e))}}}postDebuggerMessageAsync(o,r={},i){return new Promise((e,t)=>{var n=this.debuggerSeq++;this.debuggerResolvers[n.toString()]={resolve:e,reject:t},this.postDebuggerMessage(o,r,n,i)})}postDebuggerMessage(e,t={},n,o){t=JSON.parse(JSON.stringify(t));t.type="debugger",t.subtype=e,t.source=i,n&&(t.seq=n),this.postMessage(t,void 0,o)}nextId(){return this.nextFrameId+++(Math.random()+""+Math.random()).replace(/[^\d]/,"")}get stoppedClass(){return this.options&&this.options.stoppedClass||"grayscale"}get invalidatedClass(){return this.options&&this.options.invalidatedClass||"sepia"}}}(pxsim=pxsim||{}),function(x){function e(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator&&0<navigator.maxTouchPoints)}function t(){return"undefined"!=typeof window&&!!window.PointerEvent}x.mkRange=function(e,t){for(var n=[];e<t;e++)n.push(e);return n},x.EventBus=class{constructor(e,t,n){this.runtime=e,this.board=t,this.valueToArgs=n,this.queues={},this.backgroundHandlerFlag=!1,this.nextNotifyEvent=1024,this.schedulerID=15,this.idleEventID=2,this.board.addMessageListener(this.handleMessage.bind(this))}handleMessage(e){"eventbus"===e.type&&this.queue(e.id,e.eventid,e.value)}setBackgroundHandlerFlag(){this.backgroundHandlerFlag=!0}setNotify(e,t){this.notifyID=e,this.notifyOneID=t}setIdle(e,t){this.schedulerID=e,this.idleEventID=t}start(e,t,n,o=!1){n=(n?"back":"fore")+":"+e+":"+t;return!this.queues[n]&&o&&(this.queues[n]=new x.EventQueue(this.runtime,this.valueToArgs)),this.queues[n]}listen(e,t,n){e==this.schedulerID&&t==this.idleEventID&&this.runtime.startIdle();e=this.start(e,t,this.backgroundHandlerFlag,!0);this.backgroundHandlerFlag?e.addHandler(n):e.setHandler(n),this.backgroundHandlerFlag=!1}removeBackgroundHandler(t){Object.keys(this.queues).forEach(e=>{e.startsWith("back:")&&this.queues[e].removeHandler(t)})}getQueues(e,t,n){var o=[this.start(0,0,n)];return 0==e&&0==t||(t&&o.push(this.start(0,t,n)),e&&o.push(this.start(e,0,n)),e&&t&&o.push(this.start(e,t,n))),o}queue(e,t,n=null){if(!x.runtime.pausedOnBreakpoint){const o=this.notifyID&&this.notifyOneID&&e==this.notifyOneID;o&&(e=this.notifyID);e=this.getQueues(e,t,!0).concat(this.getQueues(e,t,!1));this.lastEventValue=t,this.lastEventTimestampUs=x.U.perfNowUs(),x.U.promiseMapAllSeries(e,e=>e?e.push(n,o):Promise.resolve())}}queueIdle(){this.schedulerID&&this.idleEventID&&this.queue(this.schedulerID,this.idleEventID)}wait(e,t,n){this.start(e,t,!1,!0).addAwaiter(n)}getLastEventValue(){return this.lastEventValue}getLastEventTime(){return 4294967295&this.lastEventTimestampUs-x.runtime.startTimeUs}},x.AnimationQueue=class{constructor(n){this.runtime=n,this.queue=[],this.process=()=>{var e,t=this.queue[0];t&&!this.runtime.dead&&(n=this.runtime,e=t.frame(),n.queueDisplayUpdate(),n.maybeUpdateDisplay(),!1===e?(this.queue.shift(),this.queue[0]&&(this.queue[0].setTimeoutHandle=setTimeout(this.process,this.queue[0].interval)),t.whenDone(!1)):t.setTimeoutHandle=setTimeout(this.process,t.interval))}}cancelAll(){var e,t=this.queue;this.queue=[];for(e of t)e.whenDone(!0),e.setTimeoutHandle&&clearTimeout(e.setTimeoutHandle)}cancelCurrent(){var e=this.queue[0];e&&(this.queue.shift(),e.whenDone(!0),e.setTimeoutHandle)&&clearTimeout(e.setTimeoutHandle)}enqueue(e){e.whenDone||(e.whenDone=()=>{}),this.queue.push(e),1==this.queue.length&&this.process()}executeAsync(n){return x.U.assert(!n.whenDone),new Promise((e,t)=>{n.whenDone=e,this.enqueue(n)})}};{var n=x.AudioContextManager||(x.AudioContextManager={});let k,o,r,i,s=0,b=!1;function B(){return k=k||function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)try{return new window.AudioContext}catch(e){}}()}function a(){g(0),s=0,i&&i.pause()}function l(){a(),u()}function c(e,t){e.gain.value&&e.gain.setTargetAtTime(0,B().currentTime,.015),setTimeout(()=>{e.disconnect(),t&&t.disconnect()},450)}n.mute=function(e){b=e,l();var t=B();!e&&t&&"suspended"===t.state&&t.resume()},n.stopAll=l,n.stop=function(){if(a(),r){try{c(r,o)}catch(e){}r=void 0,o=void 0}},n.frequency=function(){return s};const A=[null,"triangle","sawtooth","sine"];let v,T,E=[],S=[];const I=[];class D{mute(){this.gain?c(this.gain,this.generator):this.generator&&(this.generator.stop(),this.generator.disconnect()),this.gain=null,this.generator=null}remove(){var e=I.indexOf(this);0<=e&&I.splice(e,1),this.mute()}}let C=1;function u(){for(C++;I.length;)I[0].remove()}function d(l){const c=C;let u=B(),d=0,p=new D,g=-1,h=-1,_=0;5<I.length&&I[0].remove(),I.push(p);const m=(e,t)=>e/1024/4*(t?.5:1),f=()=>{p.mute(),_=0,g=-1,h=-1},y=()=>{if(d>=l.data.length||!l.data[d])return x.U.delay(_).then(f);var e=l.data[d],t=x.BufferMethods.getNumber(l,x.BufferMethods.NumberFormat.UInt16LE,d+2),n=x.BufferMethods.getNumber(l,x.BufferMethods.NumberFormat.UInt16LE,d+4),o=x.BufferMethods.getNumber(l,x.BufferMethods.NumberFormat.UInt16LE,d+6),r=x.BufferMethods.getNumber(l,x.BufferMethods.NumberFormat.UInt16LE,d+8),i=x.BufferMethods.getNumber(l,x.BufferMethods.NumberFormat.UInt16LE,d+10),s=11<=e&&e<=15,a=4==e||16<=e&&e<=18,o=m(o,s),r=m(r,s);if(!u||c!=C)return x.U.delay(n);if(g!=e||h!=t||t!=i){if(p.generator)return x.U.delay(_).then(()=>(f(),y()));if(p.generator=b?null:function(e,t){let n,o=A[e];if(o)(r=B().createOscillator()).type=o,r.frequency.value=t;else{if(4==e)n=function(){if(!T){var n=(T=B().createBuffer(1,131072,B().sampleRate)).getChannelData(0);let t=251771520;for(let e=0;e<131072;e+=4)32768&(t=(t=(t^=t<<13)^t>>17)^t<<5)?(n[e]=1,n[e+1]=1,n[e+2]=-1,n[e+3]=-1):(n[e]=0,n[e+1]=0,n[e+2]=0,n[e+3]=0)}return T}();else if(5==e)n=function(){if(!v){var n=(v=B().createBuffer(1,1e5,B().sampleRate)).getChannelData(0);let t=251771520;for(let e=0;e<1e5;e++)t=(t=(t^=t<<13)^t>>17)^t<<5,n[e]=(1023&t)/512-1}return v}();else if(11<=e&&e<=15)n=function(t){if(!S[t]){var e=B().createBuffer(1,1024,B().sampleRate),n=e.getChannelData(0);for(let e=0;e<1024;e++)n[e]=e<t/100*1024?1:-1;S[t]=e}return S[t]}(10*(e-10));else{if(!(16<=e&&e<=18))return null;n=function(t){if(!E[t]){var e=B().createBuffer(1,1024,B().sampleRate),n=e.getChannelData(0),o=[770763591,3356908179],r=[15,31,63];for(let e=0;e<1024;e+=4){var i=e/4;0!=(o[(i&=r[t-4])>>5]&1<<(31&i))?(n[e]=1,n[e+1]=1,n[e+2]=-1,n[e+3]=-1):(n[e]=0,n[e+1]=0,n[e+2]=0,n[e+3]=0)}E[t]=e}return E[t]}(e-16+4)}var r=B().createBufferSource();r.buffer=n,r.loop=!0,4==e||16<=e&&e<=18?r.playbackRate.value=t/(B().sampleRate/4):5!=e&&(r.playbackRate.value=t/(B().sampleRate/1024))}return r}(e,t),!p.generator)return x.U.delay(n);if(g=e,h=t,p.gain=u.createGain(),p.gain.gain.value=0,p.gain.gain.setTargetAtTime(o,k.currentTime,.015),i!=t)if(null!=p.generator.frequency)p.generator.frequency.linearRampToValueAtTime(i,u.currentTime+(_+n)/1e3);else if(null!=p.generator.playbackRate){const x=a?4:1024;p.generator.playbackRate.linearRampToValueAtTime(i/(B().sampleRate/x),u.currentTime+(_+n)/1e3)}p.generator.connect(p.gain),p.gain.connect(u.destination),p.generator.start()}d+=12,p.gain.gain.setValueAtTime(o,u.currentTime+_/1e3),_+=n;s=0!==r&&50<n?(_-50)/1e3:(_-10)/1e3;return p.gain.gain.linearRampToValueAtTime(r,u.currentTime+s),y()};return y().then(()=>p.remove())}function p(e,t){if(!(e<0)){s=e;var n=B();if(n){t=Math.max(0,Math.min(1,t));try{o||(o=n.createOscillator(),(r=n.createGain()).gain.value=0,o.type="triangle",o.connect(r),r.connect(n.destination),o.start(0)),g(t)}catch(e){return o=void 0,void(r=void 0)}o.frequency.value=e,g(t)}}}function g(e){null!=r&&r.gain&&r.gain.setTargetAtTime(b?0:e,k.currentTime,.015)}n.muteAllChannels=u,n.queuePlayInstructions=function(e,t){const n=C;x.U.delay(e).then(()=>n!=C?Promise.resolve():d(t))},n.playInstructionsAsync=d,n.tone=p,n.setCurrentToneGain=g,n.playBufferAsync=function(o){return o?new Promise(e=>{function t(){e&&e(),e=void 0}var n="data:audio/wav;base64,"+window.btoa(function(t){let n=t.length,o="";for(let e=0;e<n;++e)o+=String.fromCharCode(t[e]);return o}(o.data));i=new Audio(n),b&&(i.volume=0),i.onended=()=>t(),i.onpause=()=>t(),i.onerror=()=>t(),i.play()}):Promise.resolve()},n.playPCMBufferStreamAsync=function(u,d,e=.3,p){return new Promise(r=>{let i=[],s=B().currentTime,a=!1;function l(){const e=p&&p();for(;!a&&i.length<3&&!e;){const e=u();if(!e||!e.length){a=!0;break}o=n=t=void 0;var t=e,n=B().createBuffer(1,t.length,d);if(n.copyToChannel)n.copyToChannel(t,0);else{const d=n.getChannelData(0);for(let e=0;e<t.length;e++)d[e]=t[e]}var o=B().createBufferSource();i.push(o),o.connect(c.gain),o.buffer=n,o.addEventListener("ended",()=>{i.shift().disconnect(),l()}),o.start(s),s+=n.duration}a&&0===i.length&&(c.remove(),r&&r(),r=void 0)}const c=new D;c.gain=B().createGain(),c.gain.gain.value=0,b||c.gain.gain.setValueAtTime(e,B().currentTime),c.gain.connect(B().destination),5<I.length&&I[0].remove(),I.push(c),l()})},n.sendMidiMessage=function(e){var t,n,o,e=e.data;e.length&&(t=e[0]>>4,n=15&e[0],o=e[1]||0,o=440*Math.pow(2,(o-69)/12),e=e[2]||0,8==t||9==t&&0==e?a():9==t&&(p(o,1),9==n)&&setTimeout(()=>a(),500))}}x.isTouchEnabled=e,x.hasPointerEvents=t,x.pointerEvents=t()?{up:"pointerup",down:["pointerdown"],move:"pointermove",enter:"pointerenter",leave:"pointerleave"}:e()?{up:"mouseup",down:["mousedown","touchstart"],move:"touchmove",enter:"touchenter",leave:"touchend"}:{up:"mouseup",down:["mousedown"],move:"mousemove",enter:"mouseenter",leave:"mouseleave"}}(pxsim=pxsim||{}),function(E){function r(t,n){return e=>e*(n/t)}function n(e,t){var n=e[0]-t[0],e=e[1]-t[1];return n*n+e*e}var t;(t=E.visuals||(E.visuals={})).translateEl=function(e,t){E.svg.hydrate(e,{transform:`translate(${t[0]} ${t[1]})`})},t.composeSVG=function(e){var[t,n]=[e.el1,e.el2];E.U.assert(0==t.x&&0==t.y&&0==n.x&&0==n.y,"el1 and el2 x,y offsets not supported");let o=(e,t,n)=>E.svg.hydrate(e,{x:t,y:n}),r=(e,t,n)=>E.svg.hydrate(e,{width:t+"px",height:n+"px"}),i=e.scaleUnit2,s=e.scaleUnit2/e.scaleUnit1,a=t.w*s,l=t.h*s;r(t.el,a,l);var c=+n.w,u=+n.h;r(n.el,c,u);let[d,p,g,h]=e.margin,_=e.middleMargin,m=Math.max(a,c),f=p+(m-a)/2,y=d,k=(o(t.el,f,y),p+(m-c)/2),b=y+l+_;o(n.el,k,b);var v,c=[y,y+l,b,b+u],u=E.svg.elt("svg",{version:"1.0",viewBox:`0 0 ${p+m+h} `+(d+l+_+u+g),class:"sim-bb"}),T=(v=u,T=e.maxWidth,e=e.maxHeight,T&&E.svg.hydrate(v,{width:T}),e&&E.svg.hydrate(v,{height:e}),o(u,0,0),E.svg.child(u,"g"));return u.appendChild(t.el),u.appendChild(n.el),{under:T,over:E.svg.child(u,"g"),host:u,edges:c,scaleUnit:i,toHostCoord1:e=>{var[e,t]=e;return[e*s+f,t*s+y]},toHostCoord2:e=>{var[e,t]=e;return[+e+k,+t+b]}}},t.mkScaleFn=r,t.mkImageSVG=function(e){var t=r(e.imageUnitDist,e.targetUnitDist),n=t(e.width),t=t(e.height),o=E.svg.elt("image",{width:n,height:t});return o.setAttributeNS("http://www.w3.org/1999/xlink","href",""+e.image),{el:o,w:n,h:t,x:0,y:0}},t.findDistSqrd=n,t.findClosestCoordIdx=function(t,e){return e.map(e=>n(t,e)).reduce((e,t,n,o)=>t<o[e]?n:e,0)},t.mkTxt=function(e,t,n,o,r,i,s){var a=E.svg.elt("text"),i=(i=i||-.33333)*n*r.length;return E.svg.hydrate(a,{style:`font-size:${n}px;`,transform:`translate(${e} ${t}) rotate(${o}) translate(${i} ${(s=s||.3)*n})`}),E.U.addClass(a,"noselect"),a.textContent=r,a},t.GPIO_WIRE_COLORS=["pink","orange","yellow","green","purple"],t.WIRE_COLOR_MAP={black:"#514f4d",white:"#fcfdfc",gray:"#acabab",purple:"#a772a1",blue:"#01a6e8",green:"#3cce73",yellow:"#ece600",orange:"#fdb262",red:"#f44f43",brown:"#c89764",pink:"#ff80fa"},t.mapWireColor=function(e){return t.WIRE_COLOR_MAP[e]||e},t.PIN_DIST=15,t.rgbToHsl=function(e){let t,n,o,[r,i,s]=e,[a,l,c]=[r/255,i/255,s/255],u=Math.min(a,l,c),d=Math.max(a,l,c),p=d-u,g=d+u;return o=g/2*100,n=0==p?t=0:(d===a?t=(l-c)/p%6*60:d===l?t=60*((c-a)/p+2):d===c&&(t=60*((a-l)/p+4)),50<o?p/(2-g)*100:p/g*100),[Math.floor(t),Math.floor(n),Math.floor(o)]}}(pxsim=pxsim||{}),function(a){var o,e;function r(e,t,n){e={class:e,d:t},n&&(e.title=n),t=o.elt("path");return o.hydrate(t,e),t}function i(e,t=!1){var n=o.elt("linearGradient");return o.hydrate(n,{id:e,x1:"0%",y1:"0%",x2:t?"100%":"0%",y2:t?"0%":"100%"}),o.child(n,"stop",{offset:"0%"}),o.child(n,"stop",{offset:"100%"}),o.child(n,"stop",{offset:"100%"}),o.child(n,"stop",{offset:"100%"}),n}function n(e){var t=o.elt("title");return t.textContent=e,t}(e=o=a.svg||(a.svg={})).parseString=function(e){return(new DOMParser).parseFromString(e,"image/svg+xml").getElementsByTagName("svg").item(0)},e.toDataUri=function(e){return"data:image/svg+xml,"+encodeURI(e)},e.cursorPoint=function(e,t,n){return e.x=null!=n.clientX?n.clientX:n.pageX,e.y=null!=n.clientY?n.clientY:n.pageY,e.matrixTransform(t.getScreenCTM().inverse())},e.rotateElement=function(e,t,n,o){e.setAttribute("transform",`translate(${t},${n}) rotate(${o+90}) translate(${-t},${-n})`)},e.hydrate=function(e,t){for(var n in t)"title"==n?o.title(e,t[n]):e.setAttributeNS(null,n,t[n])},e.elt=function(e,t){e=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&o.hydrate(e,t),e},e.child=function(e,t,n){t=o.elt(t,n);return e.appendChild(t),t},e.mkPath=r,e.path=function(e,t,n,o){t=r(t,n,o);return e.appendChild(t),t},e.fill=function(e,t){e.style.fill=t},e.filter=function(e,t){e.style.filter=t},e.fills=function(e,t){e.forEach(e=>e.style.fill=t)},e.isTouchEnabled=function(){return"undefined"!=typeof window&&("ontouchstart"in window||0<navigator.maxTouchPoints)},e.onClick=function(t,n){let o=!1;a.pointerEvents.down.forEach(e=>t.addEventListener(e,e=>o=!0,!1)),t.addEventListener(a.pointerEvents.up,e=>!o||(o=!1,n(e),e.preventDefault(),!1),!1)},e.buttonEvents=function(t,n,o,r,i){let s=!1;a.pointerEvents.down.forEach(e=>t.addEventListener(e,e=>(s=!0,o&&o(e),!0),!1)),t.addEventListener(a.pointerEvents.move,e=>!s||(n&&n(e),e.preventDefault(),!1),!1),t.addEventListener(a.pointerEvents.up,e=>{s=!1,r&&r(e)},!1),t.addEventListener(a.pointerEvents.leave,e=>{s=!1,r&&r(e)},!1),t.addEventListener("keydown",e=>{s=!1,i&&i(e)})},e.mkLinearGradient=i,e.linearGradient=function(e,t,n=!1){t=i(t,n);return e.appendChild(t),t},e.setGradientColors=function(e,t,n){e&&(e.childNodes[0].style.stopColor=t,e.childNodes[1].style.stopColor=t,e.childNodes[2].style.stopColor=n,e.childNodes[3].style.stopColor=n)},e.setGradientValue=function(e,t){e.childNodes[1].getAttribute("offset")!=t&&(e.childNodes[1].setAttribute("offset",t),e.childNodes[2].setAttribute("offset",t))},e.animate=function(e,t){a.U.addClass(e,t);t=e.parentElement;t&&(t.removeChild(e),t.appendChild(e))},e.mkTitle=n,e.title=function(e,t){t=n(t);return e.appendChild(t),t},e.toHtmlColor=function(e){return`rgba(${e>>16&255}, ${e>>8&255}, ${255&e}, ${e>>24&1})`}}(pxsim=pxsim||{}),function(e){class t{constructor(e){this.id=e}}e.Button=t,e.ButtonPairState=class{constructor(e){this.props=e,this.usesButtonAB=!1,this.aBtn=new t(this.props.ID_BUTTON_A),this.bBtn=new t(this.props.ID_BUTTON_B),this.abBtn=new t(this.props.ID_BUTTON_AB),this.abBtn.virtual=!0}}}(pxsim=pxsim||{}),(pxsim||(pxsim={})).CompassState=class{constructor(){this.usesHeading=!1,this.heading=90}},(pxsim||(pxsim={})).FileSystemState=class{constructor(){this.files={}}append(e,t){this.files[e]=(this.files[e]||"")+t}remove(e){delete this.files[e]}},(pxsim||(pxsim={})).LightSensorState=class{constructor(){this.usesLightLevel=!1,this.lightLevel=128}},function(l){var c;(c=l.visuals||(l.visuals={})).mkBoardView=e=>{var t=e.visual;return new c.GenericBoardSvg({visualDef:t,boardDef:e.boardDef,wireframe:e.wireframe})},c.BoardHost=class{constructor(e,t){this.parts=[],this.boardView=e,(this.opts=t).boardDef.pinStyles||(t.boardDef.pinStyles={}),this.state=t.state;let n=t.partsList,o=0<n.length||t.forceBreadboardLayout;if(o){this.breadboard=new c.Breadboard({wireframe:t.wireframe});const e=t.boardDef.marginWhenBreadboarding||[0,0,40,0],i=c.composeSVG({el1:this.boardView.getView(),scaleUnit1:this.boardView.getPinDist(),el2:this.breadboard.getSVGAndSize(),scaleUnit2:this.breadboard.getPinDist(),margin:[e[0],e[1],20,e[3]],middleMargin:e[2],maxWidth:t.maxWidth,maxHeight:t.maxHeight}),s=i.under,a=i.over;this.view=i.host;var r=i.edges,r=(this.fromMBCoord=i.toHostCoord1,this.fromBBCoord=i.toHostCoord2,this.partGroup=a,this.partOverGroup=l.svg.child(this.view,"g"),this.style=l.svg.child(this.view,"style",{}),this.defs=l.svg.child(this.view,"defs",{}),this.wireFactory=new c.WireFactory(s,a,r,this.style,this.getLocCoord.bind(this),this.getPinStyle.bind(this)),l.allocateDefinitions({boardDef:t.boardDef,partDefs:t.partDefs,fnArgs:t.fnArgs,getBBCoord:this.breadboard.getCoord.bind(this.breadboard),partsList:n}));(r.partsAndWires.length||t.forceBreadboardLayout)&&(this.addAll(r),r.requiresBreadboard||t.forceBreadboardRender)?r.hideBreadboard&&this.breadboard&&this.breadboard.hide():o=!1}if(!o){delete this.breadboard,delete this.wireFactory,delete this.partOverGroup,delete this.partGroup,delete this.style,delete this.defs,delete this.fromBBCoord,delete this.fromMBCoord;const c=this.boardView.getView().el;this.view=c,this.partGroup=l.svg.child(this.view,"g"),this.partOverGroup=l.svg.child(this.view,"g"),t.maxWidth&&l.svg.hydrate(this.view,{width:t.maxWidth}),t.maxHeight&&l.svg.hydrate(this.view,{height:t.maxHeight})}this.state.updateSubscribers.push(()=>this.updateState())}highlightBoardPin(e){this.boardView.highlightPin(e)}highlightBreadboardPin(e){this.breadboard.highlightLoc(e)}highlightWire(e){e.wires.forEach(e=>{l.U.addClass(e,"highlight"),e.style.visibility="visible"}),l.U.addClass(e.endG,"highlight")}getView(){return this.view}screenshotAsync(r){var e=this.view.cloneNode(!0);e.setAttribute("width",this.view.width.baseVal.value+""),e.setAttribute("height",this.view.height.baseVal.value+"");const t=(new XMLSerializer).serializeToString(e),i="data:image/svg+xml,"+encodeURIComponent(t.replace(/\s+/g," ").replace(/"/g,"'"));return new Promise((n,e)=>{const o=document.createElement("img");o.onload=()=>{var e=document.createElement("canvas"),t=(e.width=o.width,e.height=o.height,0<r?(e.width=r,e.height=o.height*r/o.width|0):e.width<200?(e.width*=2,e.height*=2):480<e.width&&(e.width/=2,e.height/=2),e.getContext("2d"));t.drawImage(o,0,0,e.width,e.height),n(t.getImageData(0,0,e.width,e.height))},o.onerror=e=>{console.log(e),n(void 0)},o.src=i})}updateState(){this.parts.forEach(e=>e.updateState())}getBBCoord(e){e=this.breadboard.getCoord(e);return this.fromBBCoord(e)}getPinCoord(e){var t=this.boardView.getCoord(e);if(t)return this.fromMBCoord(t);console.error("Unable to find coord for pin: "+e)}getLocCoord(e){let t;return(t="breadboard"===e.type?this.getBBCoord(e):(e=e.pin,this.getPinCoord(e)))||console.debug("Unknown location: "+name),t}getPinStyle(e){return"breadboard"!=e.type&&this.opts.boardDef.pinStyles[e.pin]||"female"}addPart(e){let t=null;e.simulationBehavior?(n=e.simulationBehavior,o=this.state.builtinVisuals[n],n=this.state.builtinParts[n],(t=o()).init(this.state.bus,n,this.view,e.params)):(o=e.visual,t=new c.GenericPart(o)),this.parts.push(t),this.partGroup.appendChild(t.element),t.overElement&&this.partOverGroup.appendChild(t.overElement),t.defs&&t.defs.forEach(e=>this.defs.appendChild(e)),this.style.textContent+=t.style||"";var n=e.startColumnIdx,o=e.startRowIdx,o={type:"breadboard",row:c.getRowName(o),col:c.getColumnName(n),xOffset:e.bbFit.xOffset/e.visual.pinDistance,yOffset:e.bbFit.yOffset/e.visual.pinDistance},n=this.getBBCoord(o),o=(t.moveToCoord(n),`sim-${e.name}-cmp`);return l.U.addClass(t.element,o),l.U.addClass(t.element,"sim-cmp"),t.updateTheme(),t.updateState(),t}addWire(e){return this.wireFactory.addWire(e.start,e.end,e.color)}addAll(o){o.partsAndWires.forEach(e=>{var t=e.wires,n=t&&t.every(e=>this.wireFactory.checkWire(e.start,e.end)),e=(n&&t.forEach(e=>o.wires.push(this.addWire(e))),e.part);!e||t&&!n||o.parts.push(this.addPart(e))}),o.requiresBreadboard=!!o.wires.length||!!o.parts.length}}}(pxsim=pxsim||{}),function(T){{var E=T.visuals||(T.visuals={});E.BREADBOARD_MID_ROWS=10,E.BREADBOARD_MID_COLS=30;const D=[4,4],e=E.BREADBOARD_MID_ROWS+D.length,N=[4,9,14,19],t=25+N.length,w=15*(E.BREADBOARD_MID_COLS+3),O=15*(e+4+5.5),R=O*(2/3),P=.16666666666666669*O,n=15*(E.BREADBOARD_MID_COLS-1),L=(w-n)/2,M=P+(R-15*(e-1))/2,F=15*(t-1),U=(w-F)/2,H=(P-15)/2,V=U,W=H+P+R,G="abcdefghij".split("").reverse();function S(e){return""+(e+1)}function C(e){return G[e]}function x(a){let l=a.xOffset||0,t=a.yOffset||0,c=[],u=T.svg.elt("g"),d=a.colStartIdx||0,n=a.rowStartIdx||0,p=e=>e?e.slice(0,e.length):[],g=(e,t)=>{let n,o=0;for(;0<=(n=e.indexOf(t));)e.splice(n,1),o+=1;return o},h=0,_=p(a.rowIdxsWithGap);for(let e=0;e<a.rowCount;e++){let o=0,r=p(a.colIdxsWithGap),i=t+e*a.pinDist+h*a.pinDist,s=e+n;for(let n=0;n<a.colCount;n++){let t=l+n*a.pinDist+o*a.pinDist,e=n+d;const h=e=>(T.svg.hydrate(e.el,"circle"==e.el.tagName?{cx:t,cy:i}:{x:t-.5*e.w,y:i-.5*e.h}),u.appendChild(e.el),e.el);var m=h(a.mkPin()),f=h(a.mkHoverPin()),y=a.getRowName(s),k=a.getColName(e),b=a.getGroupName?a.getGroupName(s,e):null,m={el:m,hoverEl:f,cx:t,cy:i,row:y,col:k,group:b};c.push(m),o+=g(r,e)}h+=g(_,s)}return{g:u,allPins:c}}function B(){var e=T.svg.elt("rect");return T.svg.hydrate(e,{class:"sim-bb-pin",rx:2,ry:2,width:6,height:6}),{el:e,w:6,h:6,x:0,y:0}}function A(){var e=T.svg.elt("rect");return T.svg.hydrate(e,{class:"sim-bb-pin-hover",rx:2,ry:2,width:6*1.3,height:6*1.3}),{el:e,w:6*1.3,h:6*1.3,x:0,y:0}}function I(e,t,n,o,r,i,s){let a=E.mkTxt(e,t,n,o,r),l=(T.U.addClass(a,"sim-bb-label"),s&&s.forEach(e=>T.U.addClass(a,e)),E.mkTxt(e,t,1.3*n,o,r));return T.U.addClass(l,"sim-bb-label-hover"),s&&s.forEach(e=>T.U.addClass(l,e)),{el:a,hoverEl:l,txt:r,group:i}}E.getColumnName=S,E.getRowName=C,E.mkGrid=x,E.Breadboard=class{constructor(e){this.allPins=[],this.allLabels=[],this.allPowerBars=[],this.rowColToPin={},this.rowColToLbls={},this.buildDom(),e.wireframe&&T.U.addClass(this.bb,"sim-bb-outline")}hide(){this.bb.style.display="none"}updateLocation(e,t){T.svg.hydrate(this.bb,{x:e+"px",y:t+"px"})}getPin(e,t){e=this.rowColToPin[e];return e&&e[t]||null}getCoord(e){var{row:e,col:t,xOffset:n,yOffset:o}=e,e=this.getPin(e,t);return e?[e.cx+15*(n||0),e.cy+15*(o||0)]:null}getPinDist(){return 15}buildDom(){this.bb=T.svg.elt("svg",{version:"1.0",viewBox:`0 0 ${w} `+O,class:"sim-bb",width:w+"px",height:O+"px"}),this.styleEl=T.svg.child(this.bb,"style",{}),this.styleEl.textContent+='\n        /* bread board */\n        .sim-bb-background {\n            fill:#E0E0E0;\n        }\n        .sim-bb-pin {\n            fill:#999;\n        }\n        .sim-bb-pin-hover {\n            visibility: hidden;\n            pointer-events: all;\n            stroke-width: 7.5px;\n            stroke: transparent;\n            fill: #777;\n        }\n        .sim-bb-pin-hover:hover {\n            visibility: visible;\n            fill:#444;\n        }\n        .sim-bb-group-wire {\n            stroke: #999;\n            stroke-width: 3.75px;\n            visibility: hidden;\n        }\n        .sim-bb-pin-group {\n            pointer-events: all;\n        }\n        .sim-bb-label,\n        .sim-bb-label-hover {\n            font-family:"Lucida Console", Monaco, monospace;\n            fill:#555;\n            pointer-events: all;\n            stroke-width: 0;\n            cursor: default;\n        }\n        .sim-bb-label-hover {\n            visibility: hidden;\n            fill:#000;\n            font-weight: bold;\n        }\n        .sim-bb-bar {\n            stroke-width: 0;\n        }\n        .sim-bb-blue {\n            fill:#1AA5D7;\n            stroke:#1AA5D7\n        }\n        .sim-bb-red {\n            fill:#DD4BA0;\n            stroke:#DD4BA0;\n        }\n        .sim-bb-pin-group:hover .sim-bb-pin-hover,\n        .sim-bb-pin-group:hover .sim-bb-group-wire,\n        .sim-bb-pin-group:hover .sim-bb-label-hover {\n            visibility: visible;\n        }\n        .sim-bb-pin-group:hover .sim-bb-label {\n            visibility: hidden;\n        }\n        /* outline mode */\n        .sim-bb-outline .sim-bb-background {\n            stroke-width: 2.142857142857143px;\n            fill: #FFF;\n            stroke: #000;\n        }\n        .sim-bb-outline .sim-bb-mid-channel {\n            fill: #FFF;\n            stroke: #888;\n            stroke-width: 2px;\n        }\n        /* grayed out */\n        .grayed .sim-bb-background {\n            stroke-width: 3px;\n        }\n        .grayed .sim-bb-red,\n        .grayed .sim-bb-blue {\n            fill: #BBB;\n        }\n        .grayed .sim-bb-bar {\n            fill: #FFF;\n        }\n        .grayed .sim-bb-pin {\n            fill: #000;\n            stroke: #FFF;\n            stroke-width: 3px;\n        }\n        .grayed .sim-bb-label {\n            fill: none;\n        }\n        .grayed .sim-bb-background {\n            stroke-width: 7.5px;\n            stroke: #555;\n        }\n        .grayed .sim-bb-group-wire {\n            stroke: #DDD;\n        }\n        .grayed .sim-bb-channel {\n            visibility: hidden;\n        }\n        /* highlighted */\n        .sim-bb-label.highlight {\n            visibility: hidden;\n        }\n        .sim-bb-label-hover.highlight {\n            visibility: visible;\n        }\n        .sim-bb-blue.highlight {\n            fill:#1AA5D7;\n        }\n        .sim-bb-red.highlight {\n            fill:#DD4BA0;\n        }\n        .sim-bb-bar.highlight {\n            stroke-width: 0px;\n        }\n        ',this.defs=T.svg.child(this.bb,"defs",{}),T.svg.child(this.bb,"rect",{class:"sim-bb-background",width:w,height:O,rx:4.5,ry:4.5});let o="sim-bb-channel-grad",e=T.svg.elt("linearGradient");T.svg.hydrate(e,{id:o,x1:"0%",y1:"0%",x2:"0%",y2:"100%"}),this.defs.appendChild(e),T.svg.child(e,"stop",{offset:"0%",style:"stop-color: #AAA;"}),T.svg.child(e,"stop",{offset:"20%",style:"stop-color: #CCC;"}),T.svg.child(e,"stop",{offset:"80%",style:"stop-color: #CCC;"}),T.svg.child(e,"stop",{offset:"100%",style:"stop-color: #AAA;"});var t=(e,t,n)=>{n=T.svg.child(this.bb,"rect",{class:"sim-bb-channel "+(n||""),y:e-t/2,width:w,height:t});return n.setAttribute("fill",`url(#${o})`),n};t(P+R/2,15,"sim-bb-mid-channel"),t(P,.75,"sim-bb-sml-channel"),t(P+R,.75,"sim-bb-sml-channel");const n=(e,t)=>(e<E.BREADBOARD_MID_ROWS/2?"b":"t")+S(t),r=e=>0===e?"-":"+",i=(e,t)=>{t=t<25?"b":"t";return r(e)+t};var t=x({xOffset:L,yOffset:M,rowCount:E.BREADBOARD_MID_ROWS,colCount:E.BREADBOARD_MID_COLS,pinDist:15,mkPin:B,mkHoverPin:A,getRowName:C,getColName:S,getGroupName:n,rowIdxsWithGap:D}),t=(t.g,this.allPins=this.allPins.concat(t.allPins),x({xOffset:V,yOffset:W,rowCount:2,colCount:25,pinDist:15,mkPin:B,mkHoverPin:A,getRowName:r,getColName:S,getGroupName:i,colIdxsWithGap:N})),t=(t.g,this.allPins=this.allPins.concat(t.allPins),x({xOffset:U,yOffset:H,rowCount:2,colCount:25,colStartIdx:25,pinDist:15,mkPin:B,mkHoverPin:A,getRowName:r,getColName:S,getGroupName:i,colIdxsWithGap:N.map(e=>e+25)})),s=(t.g,this.allPins=this.allPins.concat(t.allPins),this.allPins.forEach(e=>{var{el:e,row:t,col:n,hoverEl:o}=e,t=`(${t},${n})`;T.svg.hydrate(e,{title:t}),T.svg.hydrate(o,{title:t})}),this.allPins.forEach(e=>{let t=this.rowColToPin[e.row];(t=t||(this.rowColToPin[e.row]={}))[e.col]=e}),(e,t,n,o,r,i)=>{var[e,t]=this.getCoord({type:"breadboard",row:e,col:t});return I(e+n,t+o,10.5,-90,r,i)});for(let e=0;e<E.BREADBOARD_MID_COLS;e++){var a=S(e),l=s(G[0],a,0,-15,a,n(0,e)),l=(this.allLabels.push(l),E.BREADBOARD_MID_ROWS-1),a=s(C(l),a,0,15,a,n(l,e));this.allLabels.push(a)}for(let e=0;e<E.BREADBOARD_MID_ROWS;e++){var c=C(e),u=s(c,"1",-15,0,c),u=(this.allLabels.push(u),s(c,S(E.BREADBOARD_MID_COLS-1),15,0,c));this.allLabels.push(u)}let d=[I(13.05,P+R+12,30,-90,"-",i(0,0),["sim-bb-blue"]),I(12,P+R+P-12,25.5,-90,"+",i(1,0),["sim-bb-red"]),I(w-12+1.05,P+R+12,30,-90,"-",i(0,24),["sim-bb-blue"]),I(w-12,P+R+P-12,25.5,-90,"+",i(1,24),["sim-bb-red"])],p=(this.allLabels=this.allLabels.concat(d),[I(13.05,12,30,-90,"-",i(0,25),["sim-bb-blue"]),I(12,P-12,25.5,-90,"+",i(1,25),["sim-bb-red"]),I(w-12+1.05,12,30,-90,"-",i(0,49),["sim-bb-blue"]),I(w-12,P-12,25.5,-90,"+",i(1,49),["sim-bb-red"])]),g=(this.allLabels=this.allLabels.concat(p),{});this.allLabels.forEach(e=>{var t=e["txt"];(g[t]=g[t]||[]).push(e)}),this.allPins.forEach(t=>{let{row:e,col:n}=t,o=this.rowColToLbls[e]||(this.rowColToLbls[e]={}),r=o[n]||(o[n]=[]);"-"===t.row||"+"===t.row?Number(n)<=25?d.filter(e=>e.group==t.group).forEach(e=>r.push(e)):p.filter(e=>e.group==t.group).forEach(e=>r.push(e)):(g[e].forEach(e=>r.push(e)),g[n].forEach(e=>r.push(e)))});const h=22.5+F,_=(h-F)/2,m=(e,t,n,o)=>{var r=T.svg.elt("rect");return T.svg.hydrate(r,{class:"sim-bb-bar "+o,x:e,y:t-1.5,width:h,height:3}),{el:r,group:n}};t=[m(V-_,W-9,i(0,49),"sim-bb-blue"),m(V-_,15+W+9,i(1,49),"sim-bb-red"),m(U-_,H-9,i(0,0),"sim-bb-blue"),m(U-_,15+H+9,i(1,0),"sim-bb-red")];this.allPowerBars=this.allPowerBars.concat(t),this.allPowerBars.forEach(e=>this.bb.appendChild(e.el));let f=this.allPins.map(e=>e.group).filter((e,t,n)=>n.indexOf(e)==t),y=f.map(e=>T.svg.elt("g")),k=(y.forEach(e=>T.U.addClass(e,"sim-bb-pin-group")),y.forEach((e,t)=>T.U.addClass(e,"group-"+f[t])),{}),b=(f.forEach((e,t)=>k[e]=y[t]),{}),v=(this.allPins.forEach((e,t)=>{var n=e.group;(b[n]||(b[n]=[])).push(e)}),f.forEach(e=>{var t=b[e],[t,n]=[t.map(e=>e.cx),t.map(e=>e.cy)],o=e=>e.reduce((e,t)=>e<t?e:t),r=e=>e.reduce((e,t)=>t<e?e:t),[t,o,r,n]=[o(t),r(t),o(n),r(n)],i=T.svg.elt("rect"),o=Math.max(o-t,1e-4),n=Math.max(n-r,1e-4);T.svg.hydrate(i,{x:t,y:r,width:o,height:n}),T.U.addClass(i,"sim-bb-group-wire"),k[e].appendChild(i)}),this.allPins.forEach(e=>{var t=k[e.group];t.appendChild(e.el),t.appendChild(e.hoverEl)}),T.svg.elt("g"));T.svg.hydrate(v,{class:"sim-bb-group-misc"}),y.push(v),this.allLabels.forEach(e=>{var t;(e.group?((t=k[e.group]).appendChild(e.el),t):(v.appendChild(e.el),v)).appendChild(e.hoverEl)}),y.forEach(e=>this.bb.appendChild(e))}getSVGAndSize(){return{el:this.bb,y:0,x:0,w:w,h:O}}highlightLoc(e){var{row:e,col:t}=e,{}=this.rowColToPin[e][t];this.rowColToLbls[e][t].forEach(e=>{T.U.addClass(e.el,"highlight"),T.U.addClass(e.hoverEl,"highlight")})}}}}(pxsim=pxsim||{}),function(h){{var _=h.visuals||(h.visuals={});_.BOARD_SYTLE=`
        .noselect {
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none;   /* Chrome/Safari/Opera */
            -khtml-user-select: none;    /* Konqueror */
            -moz-user-select: none;      /* Firefox */
            -ms-user-select: none;       /* Internet Explorer/Microsoft Edge */
            user-select: none;           /* Non-prefixed version, currently
                                            not supported by any browser */
        }

        .sim-board-pin {
            fill:#999;
            stroke:#000;
            stroke-width:${_.PIN_DIST/3}px;
        }
        .sim-board-pin-lbl {
            fill: #333;
        }
        .gray-cover {
            fill:#FFF;
            opacity: 0.3;
            stroke-width:0;
            visibility: hidden;
        }
        .sim-board-pin-hover {
            visibility: hidden;
            pointer-events: all;
            stroke-width:${_.PIN_DIST/6}px;
        }
        .sim-board-pin-hover:hover {
            visibility: visible;
        }
        .sim-board-pin-lbl {
            visibility: hidden;
        }
        .sim-board-outline .sim-board-pin-lbl {
            visibility: visible;
        }
        .sim-board-pin-lbl {
            fill: #555;
        }
        .sim-board-pin-lbl-hover {
            fill: red;
        }
        .sim-board-outline .sim-board-pin-lbl-hover {
            fill: black;
        }
        .sim-board-pin-lbl,
        .sim-board-pin-lbl-hover {
            font-family:"Lucida Console", Monaco, monospace;
            pointer-events: all;
            stroke-width: 0;
        }
        .sim-board-pin-lbl-hover {
            visibility: hidden;
        }
        .sim-board-outline .sim-board-pin-hover:hover + .sim-board-pin-lbl,
        .sim-board-pin-lbl.highlight {
            visibility: hidden;
        }
        .sim-board-outline .sim-board-pin-hover:hover + * + .sim-board-pin-lbl-hover,
        .sim-board-pin-lbl-hover.highlight {
            visibility: visible;
        }
        /* Graying out */
        .grayed .sim-board-pin-lbl:not(.highlight) {
            fill: #AAA;
        }
        .grayed .sim-board-pin:not(.highlight) {
            fill:#BBB;
            stroke:#777;
        }
        .grayed .gray-cover {
            visibility: inherit;
        }
        .grayed .sim-cmp:not(.notgrayed) {
            opacity: 0.3;
        }
        /* Highlighting */
        .sim-board-pin-lbl.highlight {
            fill: #000;
            font-weight: bold;
        }
        .sim-board-pin.highlight {
            fill:#999;
            stroke:#000;
        }
        `;const m=.7*_.PIN_DIST,f=1.5*m,y=.66666*_.PIN_DIST,k=.66666*_.PIN_DIST+_.PIN_DIST/3;let g=0;_.GenericBoardSvg=class{constructor(e){this.props=e,this.allPins=[],this.allLabels=[],this.pinNmToLbl={},this.pinNmToPin={},this.id=g++;let i=e.visualDef,t=e.wireframe&&i.outlineImage?i.outlineImage:i.image,n=_.mkImageSVG({image:t,width:i.width,height:i.height,imageUnitDist:i.pinDist,targetUnitDist:_.PIN_DIST}),s=_.mkScaleFn(i.pinDist,_.PIN_DIST);this.width=n.w,this.height=n.h;var o=n.el;this.element=h.svg.elt("svg"),h.svg.hydrate(this.element,{version:"1.0",viewBox:`0 0 ${this.width} `+this.height,class:"sim sim-board-id-"+this.id,x:"0px",y:"0px"}),e.wireframe&&h.U.addClass(this.element,"sim-board-outline"),this.style=h.svg.child(this.element,"style",{}),this.style.textContent+=_.BOARD_SYTLE,this.defs=h.svg.child(this.element,"defs",{}),this.g=h.svg.elt("g"),this.element.appendChild(this.g),this.g.appendChild(o),this.background=o,h.svg.hydrate(o,{class:"sim-board"});const a=()=>{var e=h.svg.elt("circle"),t=y;return h.svg.hydrate(e,{class:"sim-board-pin",r:t/2}),{el:e,w:t,h:t,x:0,y:0}},l=()=>{var e=h.svg.elt("circle"),t=k;return h.svg.hydrate(e,{class:"sim-board-pin-hover",r:t/2}),{el:e,w:t,h:t,x:0,y:0}},c=()=>{var e=h.svg.elt("rect"),t=y;return h.svg.hydrate(e,{class:"sim-board-pin",width:t,height:t}),{el:e,w:t,h:t,x:0,y:0}},u=()=>{var e=h.svg.elt("rect"),t=k;return h.svg.hydrate(e,{class:"sim-board-pin-hover",width:t,height:t}),{el:e,w:t,h:t,x:0,y:0}};let r=i.pinBlocks.map((t,e)=>{var n=s(t.x)+_.PIN_DIST/2,o=s(t.y)+_.PIN_DIST/2,r=t.labels.length,n=_.mkGrid({xOffset:n,yOffset:o,rowCount:1,colCount:r,pinDist:_.PIN_DIST,mkPin:i.useCrocClips?a:c,mkHoverPin:i.useCrocClips?l:u,getRowName:()=>""+(e+1),getColName:e=>t.labels[e],getGroupName:()=>t.labels.join(" ")});return n.allPins,n.g,h.U.addClass(n.g,"sim-board-pin-group"),n}),d=[];r.forEach((e,n)=>e.allPins.forEach((e,t)=>{this.allPins.push(e),d.push(i.pinBlocks[n])})),this.allPins.forEach(e=>{var t=e.col;h.svg.hydrate(e.el,{title:t}),h.svg.hydrate(e.hoverEl,{title:t})}),this.allPins.forEach(e=>{this.pinNmToPin[e.col]=e});const p=(e,t,n,o,r)=>{let i,s;return i="below"===r?(s=e,t+12+.25*n*o.length):(s=e,t-11-.32*n*o.length),_.mkTxt(s,i,n,-90,o)};this.allLabels=this.allPins.map((e,t)=>{var n,o,r,t=d[t];return n=e.cx,o=e.cy,e=e.col,t=t.labelPosition||"above",r=p(n,o,m,e,t),h.U.addClass(r,"sim-board-pin-lbl"),n=p(n,o,f,e,t),h.U.addClass(n,"sim-board-pin-lbl-hover"),{el:r,hoverEl:n,txt:e}}),this.allPins.forEach((e,t)=>{t=this.allLabels[t];this.pinNmToLbl[e.col]=t}),this.allPins.forEach((e,t)=>{t=this.allLabels[t];this.g.appendChild(e.el),this.g.appendChild(e.hoverEl),this.g.appendChild(t.el),this.g.appendChild(t.hoverEl)})}findPin(e){let t=this.pinNmToPin[e];return t=!t&&this.props.boardDef.gpioPinMap&&(e=this.props.boardDef.gpioPinMap[e])?this.pinNmToPin[e]:t}findPinLabel(e){let t=this.pinNmToLbl[e];return t=!t&&this.props.boardDef.gpioPinMap&&(e=this.props.boardDef.gpioPinMap[e])?this.pinNmToLbl[e]:t}getCoord(e){e=this.findPin(e);return e?[e.cx,e.cy]:null}mkGrayCover(e,t,n,o){var r=h.svg.elt("rect");return h.svg.hydrate(r,{x:e,y:t,width:n,height:o,class:"gray-cover"}),r}getView(){return{el:this.element,w:this.width,h:this.height,x:0,y:0}}getPinDist(){return _.PIN_DIST}highlightPin(e){var t=this.findPinLabel(e),e=this.findPin(e);t&&e&&(h.U.addClass(t.el,"highlight"),h.U.addClass(t.hoverEl,"highlight"),h.U.addClass(e.el,"highlight"),h.U.addClass(e.hoverEl,"highlight"))}}}}(pxsim=pxsim||{}),function(t){function n(e){return o.mkImageSVG({image:e.image,width:e.width,height:e.height,imageUnitDist:e.pinDistance,targetUnitDist:o.PIN_DIST})}var o;(o=t.visuals||(t.visuals={})).mkGenericPartSVG=n,o.GenericPart=class{constructor(e){this.style="",this.defs=[];e=n(e).el;this.element=t.svg.elt("g"),this.element.appendChild(e)}moveToCoord(e){o.translateEl(this.element,e)}init(e,t,n){}updateState(){}updateTheme(){}}}(pxsim=pxsim||{}),function(y){{var k=y.visuals||(y.visuals={}),e;const a=k.PIN_DIST/2.5;function o(e){return e.replace(/\#/g,"-").replace(/\(/g,"-").replace(/\)/g,"-").replace(/\,/g,"-").replace(/\./g,"-").replace(/\s/g,"")}function b(e,t,n,o){var r=e=>e[0]+", "+e[1],[i,s]=e,[a,l]=t,c=l-s,e=y.svg.mkPath("sim-bb-wire",`M${r(e)} C${r([i,s+c*n])} ${r([a,l-c*n])} `+r(t));return y.U.addClass(e,"wire-stroke-"+o),e}function v(e,t,n){var o=e=>e[0]+", "+e[1],e=y.svg.mkPath("sim-bb-wire",`M${o(e)} L`+o(t));return y.U.addClass(e,"wire-stroke-"+n),e}function r(e,t){var n=k.PIN_DIST/4,o=y.svg.elt("circle"),r=e[0],e=e[1],i=a/2+n/2;return y.svg.hydrate(o,{cx:r,cy:e,r:i,class:"sim-bb-wire-end"}),y.U.addClass(o,"wire-fill-"+t),o.style["stroke-width"]=n+"px",o}function s(e,t){var n=.24*k.PIN_DIST,o=10*n,r=2*n,i=6*n,s=k.PIN_DIST/4,[e,a]=e,t=t?-1:1,l=y.svg.elt("g"),c=y.svg.elt("rect"),u=e-r/2,d=a-o/2,p=(y.svg.hydrate(c,{x:u,y:d,width:r,height:o,rx:.5,ry:.5,class:"sim-bb-wire-end"}),c.style["stroke-width"]=s+"px",y.svg.elt("rect")),a=a+t*(o/2+i/2)-i/2;return y.svg.hydrate(p,{x:e-n/2,y:a,width:n,height:i,class:"sim-bb-wire-bare-end"}),p.style.fill="#bbb",l.appendChild(p),l.appendChild(c),{el:l,x:u-s,y:Math.min(d,a),w:r+2*s,h:o+i}}function f(e,t){var n=.24*k.PIN_DIST,o=4*n,r=10*n,i=3.5*n,n=3.5*n,s=k.PIN_DIST/4,[e,a]=e,l=t?-1:1,c=y.svg.elt("g"),u=y.svg.elt("polygon"),d=e-o/2,p=a-r/2,g=t?.15:.3,h=t?.7:1-.7,t=t?.3:.15,g=(y.svg.hydrate(u,{points:[[d+o*g,p],[d+o*(1-g),p],[d+o,p+r*h],[d+o*(1-t),p+r],[d+o*t,p+r],[d,p+r*h]].map(e=>e[0]+","+e[1]).join(" ")}),y.svg.hydrate(u,{rx:.5,ry:.5,class:"sim-bb-wire-end"}),u.style["stroke-width"]=s+"px",y.svg.elt("rect")),t=i,h=a+l*(r/2+t/2)-t/2;return y.svg.hydrate(g,{x:e-n/2,y:h,width:n,height:t,class:"sim-bb-wire-bare-end"}),c.appendChild(g),c.appendChild(u),{el:c,x:d-s,y:Math.min(p,h),w:o+2*s,h:r+t}}k.WIRES_CSS=`
        .sim-bb-wire {
            fill:none;
            stroke-linecap: round;
            stroke-width:${a}px;
            pointer-events: none;
        }
        .sim-bb-wire-end {
            stroke:#333;
            fill:#333;
        }
        .sim-bb-wire-bare-end {
            fill: #ccc;
        }
        .sim-bb-wire-hover {
            stroke-width: ${a}px;
            visibility: hidden;
            stroke-dasharray: ${k.PIN_DIST/10},${k.PIN_DIST/1.5};
            /*stroke-opacity: 0.4;*/
        }
        .grayed .sim-bb-wire-ends-g:not(.highlight) .sim-bb-wire-end {
            stroke: #777;
            fill: #777;
        }
        .grayed .sim-bb-wire:not(.highlight) {
            stroke: #CCC;
        }
        .sim-bb-wire-ends-g:hover .sim-bb-wire-end {
            stroke: red;
            fill: red;
        }
        .sim-bb-wire-ends-g:hover .sim-bb-wire-bare-end {
            stroke: #FFF;
            fill: #FFF;
        }
        `,(e=k.WireEndStyle||(k.WireEndStyle={}))[e.BBJumper=0]="BBJumper",e[e.OpenJumper=1]="OpenJumper",e[e.Croc=2]="Croc",k.mkWirePart=function(e,t,n=!1){var o=y.svg.elt("g"),[e,r]=e,a=[e-15,r-50],l=[e+15,r+50],r=(t=k.mapWireColor(t),e=(n?f:s)(a,!0),function(e){var t=e=>e[0]+", "+e[1],[n,o]=a,[r,i]=l,s=i-o,s=y.svg.mkPath("sim-bb-wire",`M${t(a)} C${t([n,o+.8*s])} ${t([r,i-.8*s])} `+t(l));return s.style.stroke=e,{el:s,x:Math.min(n,r),y:Math.min(o,i),w:Math.abs(n-r),h:Math.abs(o-i)}}(t)),n=s(l,!1),t=(o.appendChild(r.el),o.appendChild(e.el),o.appendChild(n.el),Math.min(e.x,n.x)),r=Math.max(e.x+e.w,n.x+n.w),i=Math.min(e.y,n.y);return{el:o,x:t,y:i,w:r-t,h:Math.max(e.y+e.h,n.y+n.h)-i}},k.WireFactory=class{constructor(e,t,n,o,r,i){this.nextWireId=0,this.styleEl=o,this.styleEl.textContent+=k.WIRES_CSS,this.underboard=e,this.overboard=t,this.boardEdges=n,this.getLocCoord=r,this.getPinStyle=i}indexOfMin(t){let n=0,o=t[0];for(let e=1;e<t.length;e++)t[e]<o&&(o=t[e],n=e);return n}closestEdgeIdx(t){var e=this.boardEdges.map(e=>Math.abs(t[1]-e));return this.indexOfMin(e)}closestEdge(e){return this.boardEdges[this.closestEdgeIdx(e)]}drawWire(a,l,e){var c=[],u=y.svg.child(this.overboard,"g",{class:"sim-bb-wire-group"}),d=e=>{var t=k.PIN_DIST/2,n=this.closestEdge(e),n=n-e[1]<0?n-t:n+t;return[e[0],n]},p=this.nextWireId++,g=o(e),t=r(a,g),n=r(l,g),h=y.svg.child(u,"g",{class:"sim-bb-wire-ends-g"}),_=(h.appendChild(t),h.appendChild(n),this.closestEdgeIdx(a)),m=this.closestEdgeIdx(l);if(_==m){var f=v(a,l,g);u.appendChild(f),c.push(f)}else{let e,t,n=d(a),o=d(l),r=v(a,n,g),i=v(l,o,g),s=(t=1!=_&&2!=_||1!=m&&2!=m?(e=v(n,o,g),v(n,o,g)):(e=b(n,o,.7,g),b(n,o,.7,g)),y.U.addClass(t,"sim-bb-wire-hover"),u.appendChild(r),c.push(r),u.appendChild(i),c.push(i),this.underboard.appendChild(e),c.push(e),u.appendChild(t),c.push(t),"sim-bb-wire-id-"+p);f=e=>y.U.addClass(e,s);f(h),f(t),this.styleEl.textContent+=`
                    .${s}:hover ~ .${s}.sim-bb-wire-hover {
                        visibility: visible;
                    }`}d=`
                .wire-stroke-${g} {
                    stroke: ${k.mapWireColor(e)};
                }
                .wire-fill-${g} {
                    fill: ${k.mapWireColor(e)};
                }
                `;return this.styleEl.textContent+=d,{endG:h,end1:t,end2:n,wires:c}}drawWireWithCrocs(i,s,e,a=!1){var l=[],c=y.svg.child(this.overboard,"g",{class:"sim-bb-wire-group"}),u=e=>{var t=k.PIN_DIST/2,n=this.closestEdge(e),n=n-e[1]<0?n-t:n+t;return[e[0],n]},d=this.nextWireId++,p=o(e),t=r(i,p),g=s,[n,h]=s;[n,h]=s=[n,h+40];var _=[n,h+-17],n=(a?function(){var e=.24*k.PIN_DIST,t=4*e,n=1.2*e,o=10*e,r=k.PIN_DIST/4,[i,s]=_,a=y.svg.elt("g"),l=y.svg.elt("rect"),c=i-n/2,u=s+10-t/2,d=(y.svg.hydrate(l,{x:c,y:u,width:n,height:t,rx:.5,ry:.5,class:"sim-bb-wire-end"}),l.style["stroke-width"]=r+"px",y.svg.elt("rect")),s=s+10+-1*(t/2+o/2)-o/2;return y.svg.hydrate(d,{x:i-e/2,y:s,width:e,height:o,class:"sim-bb-wire-bare-end"}),d.style.fill="#bbb",a.appendChild(d),a.appendChild(l),{el:a,x:c-r,y:Math.min(u,s),w:n+2*r,h:t+o}}():f(_,!0)).el,h=y.svg.child(c,"g",{class:"sim-bb-wire-ends-g"}),m=(h.appendChild(t),this.closestEdgeIdx(i)),g=this.closestEdgeIdx(g);if(m==g){a=v(i,s,p);c.appendChild(a),l.push(a)}else{let e,t,n=u(i),o=v(i,n,p),r=(t=1!=m&&2!=m||1!=g&&2!=g?(e=v(n,s,p),v(n,s,p)):(e=b(n,s,.7,p),b(n,s,.7,p)),y.U.addClass(t,"sim-bb-wire-hover"),c.appendChild(o),l.push(o),this.underboard.appendChild(e),l.push(e),"sim-bb-wire-id-"+d);const a=e=>y.U.addClass(e,r);a(h),a(t),this.styleEl.textContent+=`
                    .${r}:hover ~ .${r}.sim-bb-wire-hover {
                        visibility: visible;
                    }`}h.appendChild(n);a=`
                .wire-stroke-${p} {
                    stroke: ${k.mapWireColor(e)};
                }
                .wire-fill-${p} {
                    fill: ${k.mapWireColor(e)};
                }
                `;return this.styleEl.textContent+=a,{endG:h,end1:t,end2:n,wires:l}}checkWire(e,t){e=this.getLocCoord(e),t=this.getLocCoord(t);return!!e&&!!t}addWire(e,t,n){var o,r=this.getLocCoord(e),i=this.getLocCoord(t);if(r&&i)return o=this.getPinStyle(t),"dalboard"==t.type&&"croc"==o?this.drawWireWithCrocs(r,i,n):this.drawWire(r,i,n);console.debug(`unable to allocate wire for ${e} or `+t)}}}}(pxsim=pxsim||{}),function(n){{var e=n.runner||(n.runner={});e.startDebuggerAsync=function(e){new t(e).start()};class t{constructor(e){this.container=e,this.pkgLoaded=!1,this.intervalRunning=!1}start(){this.initializeWebsocket(),this.intervalRunning||(this.intervalRunning=!0,this.intervalId=setInterval(()=>{if(!this.ws)try{this.initializeWebsocket()}catch(e){console.warn(`Connection to server failed, retrying in ${t.RETRY_MS} ms`)}},t.RETRY_MS)),this.session=new pxsim.SimDebugSession(this.container),this.session.start(this)}initializeWebsocket(){n.BrowserUtils.isLocalHost()&&n.Cloud.localToken&&(n.debug("initializing debug pipe"),this.ws=new WebSocket("ws://localhost:3234/"+n.Cloud.localToken+"/simdebug"),this.ws.onopen=e=>{n.debug("debug: socket opened")},this.ws.onclose=e=>{n.debug("debug: socket closed"),this.closeListener&&this.closeListener(),this.session.stopSimulator(),this.ws=void 0},this.ws.onerror=e=>{n.debug("debug: socket closed due to error"),this.errorListener&&this.errorListener(e.type),this.session.stopSimulator(),this.ws=void 0},this.ws.onmessage=e=>{let t;try{t=JSON.parse(e.data)}catch(e){n.debug("debug: could not parse message")}t&&("runner"===t.type?this.handleRunnerMessage(t):("request"===t.type&&"launch"===t.command&&this.sendRunnerMessage("configure",{projectDir:t.arguments.projectDir}),this.dataListener(t)))})}send(e){this.ws.send(e)}onData(e){this.dataListener=e}onError(e){this.errorListener=e}onClose(e){this.closeListener=e}close(){this.session&&this.session.stopSimulator(!0),this.intervalRunning&&(clearInterval(this.intervalId),this.intervalId=void 0),this.ws&&this.ws.close()}handleRunnerMessage(e){switch(e.subtype){case"ready":this.sendRunnerMessage("ready");break;case"runcode":this.runCode(e)}}runCode(e){const t=[];e.breakpoints.forEach(e=>{t.push([e.id,{verified:!0,line:e.line,column:e.column,endLine:e.endLine,endColumn:e.endColumn,source:{path:e.fileName}}])}),this.session.runCode(e.code,e.usedParts,e.usedArguments,new pxsim.BreakpointMap(t),n.appTarget.simulator.boardDefinition)}sendRunnerMessage(e,t={}){t.subtype=e,t.type="runner",this.send(JSON.stringify(t))}}t.RETRY_MS=2500,e.DebugRunner=t}}(pxt=pxt||{}),function(m){{var e=m.runner||(m.runner={});function l(){return{blocksAspectRatio:window.innerHeight<window.innerWidth?1.62:1/1.62,snippetClass:"lang-blocks",signatureClass:"lang-sig",blocksClass:"lang-block",blocksXmlClass:"lang-blocksxml",diffBlocksXmlClass:"lang-diffblocksxml",diffClass:"lang-diff",diffStaticPythonClass:"lang-diffspy",diffBlocksClass:"lang-diffblocks",staticPythonClass:"lang-spy",simulatorClass:"lang-sim",linksClass:"lang-cards",namespacesClass:"lang-namespaces",apisClass:"lang-apis",codeCardClass:"lang-codecard",packageClass:"lang-package",jresClass:"lang-jres",assetJSONClass:"lang-assetsjson",projectClass:"lang-project",snippetReplaceParent:!0,simulator:!0,showEdit:!0,hex:!0,tutorial:!1,showJavaScript:!1,hexName:m.appTarget.id}}function c(e){"undefined"!=typeof hljs&&(e.hasClass("highlight")?hljs.highlightBlock(e[0]):e.find("code.highlight").each(function(e,t){hljs.highlightBlock(t)}),d(e))}function d(e){e.find("span.hljs-comment:contains(@highlight)").each((e,t)=>{try{{var o=t;const i=$(o),s=document.createElement("span");s.className="highlight-line";let n=o.nextSibling;if(n&&n.nodeType==Node.TEXT_NODE){let e=n.textContent,t=e.indexOf("\n");if(!(t<0)){for(n.textContent=e.substring(0,t+1),$(document.createTextNode(e.substring(t+1).replace(/^\s+/,""))).insertAfter($(n)),n=n.nextSibling;n;){var r=n.nextSibling;if(n.nodeType==Node.TEXT_NODE){const i=(e=n.textContent).indexOf("\n");if(!(i<0)){s.appendChild(document.createTextNode(e.substring(0,i))),n.textContent=e.substring(i+1);break}}s.appendChild(n),n=r}$(s).insertAfter(i),i.remove()}}return}}catch(e){m.reportException(e)}})}function f(e,t){e.append($('<div class="ui content js"><div class="subheading"><i class="ui icon xicon js"></i>JavaScript</div></div>').append(t)),c(t)}function y(e,t){e.append($('<div class="ui content py"><div class="subheading"><i class="ui icon xicon python"></i>Python</div></div>').append(t)),c(t)}function k(e,t){var n=$('<a class="item" role="button" tabindex="0"><i role="presentation" aria-hidden="true"></i><span class="ui desktop only"></span></a>');return n.attr("aria-label",e),n.attr("title",e),n.find("i").attr("class",t),n.find("span").text(e),n.keypress(e=>{var t="number"==typeof e.which?e.which:e.keyCode;13!==t&&32!==t||(e.preventDefault(),e.currentTarget.click())}),n}function p(r,e,i,t,n,o,s={}){let a=$('<div class="ui bottom attached tabular icon small compact menu hideprint"> <div class="right icon menu"></div></div>'),l=$('<div class="ui top attached segment codewidget"></div>'),c=a.find(".right.menu");var u=m.appTarget.appTheme||{};if(s.showEdit&&!u.hideDocsEdit&&o){const e=k(lf("Edit"),"edit icon"),{package:i,compileBlocks:_,compilePython:f}=o,y=i.host();if(n&&_?(i.setPreferredEditor(m.BLOCKS_PROJECT_NAME),y.writeFile(i,m.MAIN_BLOCKS,_.outfiles[m.MAIN_BLOCKS])):t&&f?(i.setPreferredEditor(m.PYTHON_PROJECT_NAME),y.writeFile(i,m.MAIN_PY,_.outfiles[m.MAIN_PY])):i.setPreferredEditor(m.JAVASCRIPT_PROJECT_NAME),r.assetJSON)for(const m of Object.keys(r.assetJSON))i.config.files.indexOf(m)<0&&i.config.files.push(m),y.writeFile(i,m,r.assetJSON[m]);const s=i.compressToFileAsync();e.click(()=>{m.tickEvent("docs.btn",{button:"edit"}),s.then(e=>{window.open((r.pxtUrl||m.appTarget.appTheme.homeUrl||"").replace(/\/$/,"")+"/#project:"+ts.pxtc.encodeBase64(m.Util.uint8ArrayToString(e)),"pxt")})}),c.append(e)}r.showJavaScript||!n&&!t?(l.append(i),d(),g()):n?(l.append(n),p(),g()):t&&(l.append(t),d(),p()),s.run&&!u.hideDocsSimulator&&(o=k(lf("Run"),"play icon").click(()=>{if(m.tickEvent("docs.btn",{button:"sim"}),l.find(".sim")[0])l.find(".sim").remove(),h(l);else{let e="81.97%";m.appTarget.simulator&&(e=100/m.appTarget.simulator.aspectRatio+"%");var t=r.package?"&deps="+encodeURIComponent(r.package):"",t=T(r)+"#nofooter=1"+t,n=r.assetJSON?`data-assets="${encodeURIComponent(JSON.stringify(r.assetJSON))}"`:"",o=encodeURIComponent(i.text()),t=$(`<div class="ui card sim"><div class="ui content"><div style="position:relative;height:0;padding-bottom:${e};overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="${t}" data-code="${o}" ${n} allowfullscreen="allowfullscreen" sandbox="allow-popups allow-forms allow-scripts allow-same-origin" frameborder="0"></iframe></div></div></div>`);l.append(t),h(t)}}),c.append(o)),s.hexname&&s.hex&&(u=k(lf("Download"),"download icon").click(()=>{m.tickEvent("docs.btn",{button:"hex"}),m.BrowserUtils.browserDownloadBinText(s.hex,s.hexname,{contentType:m.appTarget.compile.hexMimeType})}),c.append(u));o=$("<div class=codesnippet></div>");function d(){var e;n&&(e=k(lf("Blocks"),"icon xicon blocks").click(()=>{var e,t;m.tickEvent("docs.btn",{button:"blocks"}),l.find(".blocks")[0]?(l.find(".blocks").remove(),h(l)):(e=i?i.parent():l,t=n,e.append($('<div class="ui content blocks"/>').append(t)),h(n))}),c.append(e))}function p(){var e;i&&(s.showJs?f(l,i):(e=k("JavaScript","icon xicon js").click(()=>{m.tickEvent("docs.btn",{button:"js"}),l.find(".js")[0]?(l.find(".js").remove(),h(l)):(f(n?n.parent():l,i),h(i))}),c.append(e)))}function g(){var e;t&&(s.showPy?y(l,t):(e=k("Python","icon xicon python").click(()=>{m.tickEvent("docs.btn",{button:"py"}),l.find(".py")[0]?(l.find(".py").remove(),h(l)):(y(n?n.parent():l,t),h(t))}),c.append(e)))}function h(e){null!=(e=e[0])&&e.scrollIntoView({behavior:"smooth",block:"center"})}c.children().length&&o.append(a),o.append(l),e.replaceWith(o)}e.defaultClientRenderOptions=l;let t,s=[];function g(e,t,n){var o;return e&&(o=$("."+e).first())[0]?(n.emPixels||(n.emPixels=18),n.layout||(n.layout=m.blocks.BlockLayout.Align),n.splitSvg=!0,s.push({el:o,source:o.text(),options:n,render:t}),o.addClass("lang-shadow"),o.removeClass(e),g(e,t,n)):Promise.resolve()}function h(e){return e&&e.kind==ts.SyntaxKind.ExpressionStatement&&e.expression&&e.expression.kind==ts.SyntaxKind.CallExpression?(e=e.expression,pxtc.pxtInfo(e).callInfo):null}function _(e){return t=t||m.runner.decompileSnippetAsync("",e)}function a(e,t){var n,o,r;t&&(n=/^\/(v\d+)/.exec(t.url),o=/^\/(v\d+)/.exec(window.location.pathname),r=/#doc/i.test(window.location.href),t.url&&!n&&o&&!r&&(t.url=`/${o[1]}/`+t.url),e.append(m.docs.codeCard.render(t,{hideHeader:!0,shortName:!0})))}function b(e,t,n){var o=t.attributes,r=!o.blockHidden&&Blockly.Blocks[o.blockId];if(null!=r&&r.codeCard){const t=m.U.clone(r.codeCard);n&&(t.style=n),a(e,t)}else a(e,{name:t.qName,description:o.jsDoc,url:o.help||void 0,style:n})}function v(e,t,i,s){return g(t,(e,o)=>{var t=o.compileProgram;if(t){const n=t.getSourceFile(m.MAIN_TS).statements.slice(0),r=$("<div />").addClass("ui cards");r.attr("role","listbox"),n.forEach(n=>{const e=n.kind,t=h(n);if(t&&o.apiInfo&&o.apiInfo.byQName[t.qName]){const m=o.apiInfo.byQName[t.qName],n=m.attributes,e=Blockly.Blocks[n.blockId];if(s){const s=m,t=o.compileBlocks.blocksInfo.apis.byQName[s.namespace];a(r,{name:t.attributes.blockNamespace||t.name,url:t.attributes.help||"reference/"+(t.attributes.blockNamespace||t.name).toLowerCase(),description:t.attributes.jsDoc,blocksXml:e&&e.codeCard?e.codeCard.blocksXml:n.blockId?`<xml xmlns="http://www.w3.org/1999/xhtml"><block type="${n.blockId}"></block></xml>`:void 0})}else b(r,m)}else switch(e){case ts.SyntaxKind.ExpressionStatement:{const o=n;switch(o.expression.kind){case ts.SyntaxKind.TrueKeyword:case ts.SyntaxKind.FalseKeyword:a(r,{name:"Boolean",url:"blocks/logic/boolean",description:lf("True or false values"),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="logic_boolean"><field name="BOOL">TRUE</field></block></xml>'});break;default:m.debug("card expr kind: "+o.expression.kind)}break}case ts.SyntaxKind.IfStatement:a(r,{name:s?"Logic":"if",url:"blocks/logic"+(s?"":"/if"),description:lf(s?"Logic operators and constants":"Conditional statement"),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="controls_if"></block></xml>'});break;case ts.SyntaxKind.WhileStatement:a(r,{name:s?"Loops":"while",url:"blocks/loops"+(s?"":"/while"),description:lf(s?"Loops and repetition":"Repeat code while a condition is true."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="device_while"></block></xml>'});break;case ts.SyntaxKind.ForOfStatement:a(r,{name:s?"Loops":"for of",url:"blocks/loops"+(s?"":"/for-of"),description:lf(s?"Loops and repetition":"Repeat code for each item in a list."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="controls_for_of"></block></xml>'});break;case ts.SyntaxKind.BreakStatement:a(r,{name:s?"Loops":"break",url:"blocks/loops"+(s?"":"/break"),description:lf(s?"Loops and repetition":"Break out of the current loop."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="break_keyword"></block></xml>'});break;case ts.SyntaxKind.ContinueStatement:a(r,{name:s?"Loops":"continue",url:"blocks/loops"+(s?"":"/continue"),description:lf(s?"Loops and repetition":"Skip iteration and continue the current loop."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="continue_keyboard"></block></xml>'});break;case ts.SyntaxKind.ForStatement:{let e=n,t=!0;3==e.condition.getChildCount()&&(t=!("0"==e.condition.getChildAt(0).getText()||e.condition.getChildAt(1).kind==ts.SyntaxKind.LessThanToken)),a(r,t?{name:s?"Loops":"for",url:"blocks/loops"+(s?"":"/for"),description:lf(s?"Loops and repetition":"Repeat code for a given number of times using an index."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="controls_simple_for"></block></xml>'}:{name:s?"Loops":"repeat",url:"blocks/loops"+(s?"":"/repeat"),description:lf(s?"Loops and repetition":"Repeat code for a given number of times."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="controls_repeat_ext"></block></xml>'});break}case ts.SyntaxKind.VariableStatement:a(r,{name:s?"Variables":"variable declaration",url:"blocks/variables"+(s?"":"/assign"),description:lf(s?"Variables":"Assign a value to a named variable."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="variables_set"></block></xml>'});break;default:m.debug("card kind: "+e)}}),(e=i?e.parent():e).replaceWith(r)}},{package:e.package,aspectRatio:e.blocksAspectRatio,assets:e.assetJSON})}function T(e){return e.pxtUrl?e.pxtUrl+"/--run":m.webConfig&&m.webConfig.runUrl?m.webConfig.runUrl:"/--run"}function E(r){const i={showEdit:!!r.showEdit,run:!!r.simulator};$("code.lang-python").each((e,t)=>{var n,o;n=t,"undefined"!=typeof hljs&&($(n).text($(n).text().replace(/^\s*\r?\n/,"")),hljs.highlightBlock(n),d($(n))),o=m.U.clone(i),p(r,$(n).parent(),$(n),void 0,void 0,void 0,o),$(t).removeClass("lang-python")})}e.renderAsync=function(u){m.analytics.enable(),(u=u||l()).pxtUrl&&(u.pxtUrl=u.pxtUrl.replace(/\/$/,"")),u.showEdit&&(u.showEdit=!m.BrowserUtils.isIFrame()),(r=u).packageClass&&($("."+r.packageClass).each((e,t)=>{let n=$(t),o=n.text().split("\n").map(e=>e.replace(/\s*/g,"")).filter(e=>!!e).join(",");r.package=r.package?r.package+","+o:o,(n=r.snippetReplaceParent?n.parent():n).remove()}),$(".lang-config").each((e,t)=>{let n=$(t);(n=r.snippetReplaceParent?n.parent():n).remove()}));{var t=u;let o,r;t.jresClass&&$("."+t.jresClass).each((e,t)=>{var n=$(t);r=n.text(),t.parentElement.remove()}),t.assetJSONClass&&$("."+t.assetJSONClass).each((e,t)=>{var n=$(t);o=n.text(),t.parentElement.remove()}),t.assetJSON=function(e,t){if(e||t){var n=m.tutorial.parseAssetJson(e)||{};if(t){const e=JSON.parse(t);n[m.TILEMAP_JRES]=JSON.stringify(e),n[m.TILEMAP_CODE]=m.emitTilemapsFromJRes(e)}return n}}(o,r)}s=[];{t=u;let e=$("code.lang-ghost");(e=t.snippetReplaceParent?e.parent():e).remove()}(a=u).simulatorClass&&$("."+a.simulatorClass).each((e,t)=>{let n=$(t),o="81.97%";m.appTarget.simulator&&(o=100/m.appTarget.simulator.aspectRatio+"%");var t=$(`<div class="ui card"><div class="ui content">
                    <div style="position:relative;height:0;padding-bottom:${o};overflow:hidden;">
                    <iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" allowfullscreen="allowfullscreen" frameborder="0" sandbox="allow-popups allow-forms allow-scripts allow-same-origin"></iframe>
                    </div>
                    </div></div>`),r=a.package?"&deps="+encodeURIComponent(a.package):"",r=T(a)+"#nofooter=1"+r,i=encodeURIComponent(n.text().trim()),s=t.find("iframe");s.attr("src",r),s.attr("data-code",i),a.assetJSON&&s.attr("data-assets",JSON.stringify(a.assetJSON)),(n=a.snippetReplaceParent?n.parent():n).replaceWith(t)});{var o=u;const i={showEdit:!!o.showEdit,run:!!o.simulator};function n(e,t){"undefined"!=typeof hljs&&($(e).text($(e).text().replace(/^\s*\r?\n/,"")),hljs.highlightBlock(e),d($(e)));var n=m.U.clone(i);t&&(n.run=!1,n.showEdit=!1),p(o,$(e).parent(),$(e),void 0,void 0,void 0,n)}$("code.lang-typescript").each((e,t)=>{n(t,!1),$(t).removeClass("lang-typescript")}),$("code.lang-typescript-ignore").each((e,t)=>{$(t).removeClass("lang-typescript-ignore"),$(t).addClass("lang-typescript"),n(t,!0),$(t).removeClass("lang-typescript")}),$("code.lang-typescript-invalid").each((e,t)=>{$(t).removeClass("lang-typescript-invalid"),$(t).addClass("lang-typescript"),n(t,!0),$(t).removeClass("lang-typescript"),$(t).parent("div").addClass("invalid"),$(t).parent("div").prepend($("<i>",{class:"icon ban"})),$(t).addClass("invalid")}),$("code.lang-typescript-valid").each((e,t)=>{$(t).removeClass("lang-typescript-valid"),$(t).addClass("lang-typescript"),n(t,!0),$(t).removeClass("lang-typescript"),$(t).parent("div").addClass("valid"),$(t).parent("div").prepend($("<i>",{class:"icon check"})),$(t).addClass("valid")})}return E(u),Promise.resolve().then(()=>function e(t,n){if(!t)return Promise.resolve();let o=$("."+t).first();if(!o[0])return Promise.resolve();o.removeClass(t);var r=m.gallery.parseCodeCardsHtml(o[0]);return r||o.append($("<div/>").addClass("ui segment warning").text("invalid codecard format")),function(e,t,s){if(t&&0!=t.length)if(0==t.length){var n=m.docs.codeCard.render(t[0],s);e.replaceWith(n)}else{let i=document.createElement("div");i.className="ui cards",i.setAttribute("role","listbox"),t.forEach(t=>{const n=/^\/(v\d+)/.exec(t.url),e=/^\/(v\d+)/.exec(window.location.pathname),o=/#doc/i.test(window.location.href),r=(t.url&&!n&&e&&!o&&(t.url="/"+e[1]+t.url),m.docs.codeCard.render(t,s));if(i.appendChild(r),"package"==t.cardType){const n=m.github.parseRepoId((t.url||"").replace(/^\/pkg\//,""));n&&m.packagesConfigAsync().then(e=>{switch(m.github.repoStatus(n,e)){case m.github.GitRepoStatus.Banned:r.remove();break;case m.github.GitRepoStatus.Approved:t.imageUrl=m.github.mkRepoIconUrl(n),i.insertBefore(m.docs.codeCard.render(t,s),r),r.remove()}}).catch(e=>{m.reportException(e),m.debug("failed to load repo "+t.url)})}}),e.replaceWith(i)}return Promise.resolve()}(o=n.snippetReplaceParent?o.parent():o,r,{hideHeader:!0}).then(()=>m.U.delay(1,e(t,n)))}(u.codeCardClass,u)).then(()=>{return e=u,"core"==m.appTarget.id?Promise.resolve():_(e).then(e=>{let n={};const o=e.compileBlocks.blocksInfo;o.blocks.forEach(e=>{var t=(e.attributes.blockNamespace||e.namespace).split(".")[0];if(!n[t]){const e=o.apis.byQName[t];e&&e.attributes.color&&(n[t]=e.attributes.color)}});let r="";return Object.keys(n).forEach(e=>{var t=n[e]||"#dddddd";r+=`
                        span.docs.${e.toLowerCase()} {
                            background-color: ${t} !important;
                            border-color: ${m.toolbox.fadeColor(t,.1,!1)} !important;
                        }
                    `}),r}).then(n=>(Object.keys(m.toolbox.blockColors).forEach(e=>{var t=m.toolbox.getNamespaceColor(e);n+=`
                        span.docs.${e.toLowerCase()} {
                            background-color: ${t} !important;
                            border-color: ${m.toolbox.fadeColor(t,.1,!1)} !important;
                        }
                    `}),n)).then(e=>{var t=document.createElement("style");t.id="namespaceColors",t.type="text/css",(document.head||document.getElementsByTagName("head")[0]).appendChild(t),t.appendChild(document.createTextNode(e))});var e}).then(()=>{{var s=u;(s=m.Util.clone(s)).emPixels=18,s.snippetMode=!0;const a=$(":not(pre) > code");let i=0;return function e(){if(i>=a.length)return Promise.resolve();const o=$(a[i++]),t=o.text(),n=/^(\|+)([^\|]+)\|+$/.exec(t);if(n){const s=/^(([^\:\.]*?)[\:\.])?(.*)$/.exec(n[2]),a=s[2]?s[2].trim().toLowerCase():"",i=1==n[1].length?"docs inlinebutton "+a:"docs inlineblock "+a,t=s[3].trim();return o.replaceWith($(`<span class="${i}"/>`).text(m.U.rlf(t))),e()}var r=/^\[(.+)\]$/.exec(t);return r?(r=r[1],m.runner.decompileSnippetAsync(r,s).then(t=>{if(t.blocksSvg){let e=$('<span class="block"/>').append(t.blocksSvg);var n=h(t.compileProgram.getSourceFile(m.MAIN_TS).statements[0]);if(n&&t.apiInfo){const m=t.apiInfo.byQName[n.qName];m&&m.attributes.help&&(e=$('<a class="ui link"/>').attr("href","/reference/"+m.attributes.help).append(e))}o.replaceWith(e)}return m.U.delay(1,e())})):e()}()}}).then(()=>v(u,u.linksClass,u.snippetReplaceParent,!1)).then(()=>v(u,u.namespacesClass,u.snippetReplaceParent,!0)).then(()=>{{var e=u,a=u.snippetReplaceParent,t=e.apisClass;if(!t)return Promise.resolve();const n=$("."+t);return n.length?_(e).then(e=>{const t=e.compileBlocks.blocksInfo,s=m.Util.values(t.apis.byQName).filter(e=>!(e.attributes.hidden||e.attributes.deprecated||e.attributes.blockAliasFor||!e.attributes.jsDoc||!e.attributes.block||/^__/.test(e.name)));n.each((e,t)=>{let n=$(t);const o=m.Util.toDictionary(n.text().split("\n"),e=>e),r=s.filter(e=>!!o[e.attributes.blockNamespace||e.namespace]);if(r.length){r.sort((e,t)=>{var n=!e.attributes.blockHidden&&Blockly.Blocks[e.attributes.blockId],o=!t.attributes.blockHidden&&Blockly.Blocks[t.attributes.blockId];return!!n!=!!o?(o?1:0)-(n?1:0):e.name.localeCompare(t.name)});const i=$("<div />").addClass("ui divided items");i.attr("role","listbox"),r.forEach(e=>b(i,e,"item")),(n=a?n.parent():n).replaceWith(i)}})}):Promise.resolve()}}).then(()=>{return g((s=u).signatureClass,(e,t)=>{var n=t.compileProgram;if(n){n=h(n.getSourceFile(m.MAIN_TS).statements[0]);if(n&&t.apiInfo){n=t.apiInfo.byQName[n.qName];if(n){var o=Blockly.Blocks[n.attributes.blockId],o=(null==(o=null==o?void 0:o.codeCard)?void 0:o.blocksXml)||void 0,o=o?m.blocks.render(o):null!=(o=t.compileBlocks)&&o.success?t.blocksSvg:void 0,o=o?$(o):void 0,r=ts.pxtc.service.displayStringForSymbol(n,!1,t.apiInfo).split("\n")[1]+";",r=$('<code class="lang-typescript highlight"/>').text(r),i=(null==(i=null==(i=m.appTarget)?void 0:i.appTheme)?void 0:i.python)&&ts.pxtc.service.displayStringForSymbol(n,!0,t.apiInfo).split("\n")[1],i=i&&$('<code class="lang-python highlight"/>').text(i);if(s.snippetReplaceParent&&(e=e.parent()),m.Util.isTranslationMode()){const m=$('<div class="ui segment" />');m.append($('<div class="ui header"><i class="ui xicon globe"></i></div>')),n.attributes.translationId&&m.append($('<div class="ui message">').text(n.attributes.translationId)),n.attributes.jsDoc&&m.append($('<div class="ui message">').text(n.attributes.jsDoc)),m.insertAfter(e)}p(s,e,r,i,o,t,{showJs:!0,showPy:!0,hideGutter:!0})}}}},{package:s.package,snippetMode:!0,aspectRatio:s.blocksAspectRatio,assets:s.assetJSON});var s}).then(()=>{{var l=u;if(l.tutorial)return g(l.snippetClass,(e,t)=>{t=t.blocksSvg,l.snippetReplaceParent&&(e=e.parent()),t=$('<div class="ui segment codewidget"/>').append(t);e.replaceWith(t)},{package:l.package,snippetMode:!1,aspectRatio:l.blocksAspectRatio,assets:l.assetJSON});let a=0;return g(l.snippetClass,(e,t)=>{var n=t.compileBlocks&&t.compileBlocks.success?$(t.blocksSvg):void 0,o=t.compilePython&&t.compilePython.success&&t.compilePython.outfiles[m.MAIN_PY],r=$('<code class="lang-typescript highlight"/>').text(e.text().trim()),o=o?$('<code class="lang-python highlight"/>').text(o.trim()):void 0,i=(l.snippetReplaceParent&&(e=e.parent()),t.compileJS&&t.compileJS.success),i=l.hex&&i&&t.compileJS.outfiles[pxtc.BINARY_HEX]?t.compileJS.outfiles[pxtc.BINARY_HEX]:void 0,s=`${m.appTarget.nickname||m.appTarget.id}-${l.hexName||""}-${a++}.hex`;p(l,e,r,o,n,t,{showEdit:l.showEdit,run:l.simulator,hexname:s,hex:i})},{package:l.package,aspectRatio:l.blocksAspectRatio,assets:l.assetJSON})}}).then(()=>{return g((n=u).blocksClass,(e,t)=>{t=t.blocksSvg,n.snippetReplaceParent&&(e=e.parent()),t=$('<div class="ui segment codewidget"/>').append(t);e.replaceWith(t)},{package:n.package,snippetMode:!0,aspectRatio:n.blocksAspectRatio,assets:n.assetJSON});var n}).then(()=>{return(n=u).blocksXmlClass?function t(n,o,r){let i=$("."+n).first();return i[0]?(r.emPixels||(r.emPixels=18),r.splitSvg=!0,m.runner.compileBlocksAsync(i.text(),r).then(e=>{try{o(i,e)}catch(e){m.reportException(e),i.append($("<div/>").addClass("ui segment warning").text(e.message))}return i.removeClass(n),m.U.delay(1,t(n,o,r))})):Promise.resolve()}(n.blocksXmlClass,(e,t)=>{t=t.blocksSvg,n.snippetReplaceParent&&(e=e.parent()),t=$('<div class="ui segment codewidget"/>').append(t);e.replaceWith(t)},{package:n.package,snippetMode:!0,aspectRatio:n.blocksAspectRatio,assets:n.assetJSON}):Promise.resolve();var n}).then(()=>{return(n=u).diffBlocksXmlClass?function t(n,o,r){let i=$("."+n).first();if(!i[0])return Promise.resolve();r.emPixels||(r.emPixels=18),r.splitSvg=!0;const e=i.text().split(/-{10,}/),s=e[0],a=e[1];return m.runner.compileBlocksAsync("",r).then(e=>{i.removeClass(n);try{const t=m.blocks.diffXml(s,a);t?(e.blocksSvg=t.svg,o(i,e)):i.text("no changes")}catch(e){m.reportException(e),i.append($("<div/>").addClass("ui segment warning").text(e.message))}return m.U.delay(1,t(n,o,r))})}(n.diffBlocksXmlClass,(e,t)=>{t=t.blocksSvg,n.snippetReplaceParent&&(e=e.parent()),t=$('<div class="ui segment codewidget"/>').append(t);e.replaceWith(t)},{package:n.package,snippetMode:!0,aspectRatio:n.blocksAspectRatio,assets:n.assetJSON}):Promise.resolve();var n}).then(()=>{return(c=u).diffBlocksClass?function r(i){let s=$("."+i).first();if(!s[0])return Promise.resolve();const{fileA:a,fileB:l}=m.diff.split(s.text(),{removeTrailingSemiColumns:!0});return m.U.promiseMapAllSeries([a,l],e=>m.runner.decompileSnippetAsync(e,{generateSourceMap:!0})).then(t=>{try{const r=m.blocks.decompiledDiffAsync(a,t[0].compileBlocks,l,t[1].compileBlocks,{hideDeletedTopBlocks:!0,hideDeletedBlocks:!0}),i=m.diff.render(a,l,{hideLineNumbers:!0,hideMarkerLine:!0,hideMarker:!0,hideRemoved:!0,update:!0,ignoreWhitespace:!0});let e;var[n,o]=t.map(e=>e.compilePython&&e.compilePython.outfiles&&e.compilePython.outfiles[m.MAIN_PY]);n&&o&&(e=m.diff.render(n,o,{hideLineNumbers:!0,hideMarkerLine:!0,hideMarker:!0,hideRemoved:!0,update:!0,ignoreWhitespace:!0})),p(c,s.parent(),$(i),e&&$(e),$(r.svg),void 0,{showEdit:!1,run:!1,hexname:void 0,hex:void 0})}catch(e){m.reportException(e),s.append($("<div/>").addClass("ui segment warning").text(e.message))}return m.U.delay(1,r(i))})}(c.diffBlocksClass):Promise.resolve();var c}).then(()=>{return(s=u).diffClass?function e(t){let n=$("."+t).first();if(!n[0])return Promise.resolve();var{fileA:o,fileB:r}=m.diff.split(n.text());try{const e=m.diff.render(o,r,{hideLineNumbers:!0,hideMarkerLine:!0,hideMarker:!0,hideRemoved:!0,update:!0,ignoreWhitespace:!0});s.snippetReplaceParent&&(n=n.parent());var i=$('<div class="ui segment codewidget"/>').append(e);n.removeClass(t),n.replaceWith(i)}catch(e){m.reportException(e),n.append($("<div/>").addClass("ui segment warning").text(e.message))}return m.U.delay(1,e(t))}(s.diffClass):Promise.resolve();var s}).then(()=>{{var r=u;const i={showEdit:!!r.showEdit,run:!!r.simulator};return g(r.staticPythonClass,(e,t)=>{var n,o=t.compilePython;o&&o.success&&(o=(n=e.clone().removeClass("lang-shadow").addClass("highlight")).clone().addClass("lang-python").text(o.outfiles[m.MAIN_PY]),n.addClass("lang-typescript"),c(o),p(r,e.parent(),n,o,void 0,t,i))},{package:r.package,snippetMode:!0,assets:r.assetJSON})}}).then(()=>{return(i=u).projectClass?function e(){let t=$("."+i.projectClass).first(),n=t[0];if(!n)return Promise.resolve();t.removeClass(i.projectClass);var o,r=m.Cloud.parseScriptId(n.innerText);return r?(i.snippetReplaceParent&&(n=n.parentElement,o=document.createElement("div"),n.parentElement.insertBefore(o,n),n.parentElement.removeChild(n),n=o),m.runner.renderProjectAsync(n,r).then(()=>e())):e()}():Promise.resolve();var i}).then(()=>{{const i={};return function e(){var t=s.shift();if(!t)return Promise.resolve();const{el:n,options:o,render:r}=t;return m.runner.decompileSnippetAsync(n.text(),o).then(e=>{var t=e.compileJS&&e.compileJS.diagnostics&&e.compileJS.diagnostics.filter(e=>e.category==pxtc.DiagnosticCategory.Error);t&&t.length&&t.forEach(e=>m.reportError("docs.decompile",""+e.messageText,{code:e.code+""})),e.blocksSvg.querySelectorAll("defs *").forEach(e=>{i[e.id]?e.remove():i[e.id]=!0}),r(n,e)},e=>{m.reportException(e),n.append($("<div/>").addClass("ui segment warning").text(e.message))}).finally(()=>(n.removeClass("lang-shadow"),e()))}().then(()=>{Blockly.Workspace.getAll().forEach(e=>e.dispose()),m.blocks.cleanRenderingWorkspace()})}});var a,r}}}(pxt=pxt||{}),function(g){{var h=g.runner||(g.runner={}),e;class C{constructor(e,t){this.ksPkg=e,this.topPkg=t,this.files={}}getKsPkg(){return this.ksPkg}getPkgId(){return(this.ksPkg||this).id}isTopLevel(){return this.ksPkg&&0==this.ksPkg.level}setFiles(e){this.files=e}getAllFiles(){return g.Util.mapMap(this.files,(e,t)=>t)}}class x{constructor(){this.githubPackageCache={}}readFile(e,t){e=c(e);return g.U.lookup(e.files,t)}writeFile(e,t,n){c(e).files[t]=n}getHexInfoAsync(e){return g.hexloader.getHexInfoAsync(this,e)}cacheStoreAsync(e,t){return Promise.resolve()}cacheGetAsync(e){return Promise.resolve(null)}patchDependencies(e,t,n){if(n){var o=g.github.parseRepoId(n);if(o)for(const t of Object.keys(e.dependencies)){var r=e.dependencies[t],r=g.github.parseRepoId(r);if(r&&o.fullName==r.fullName)return g.semver.strcmp(o.tag,r.tag)<0&&(e.dependencies[t]=n),!0}}return!1}downloadPackageAsync(n,t){let o,r=n.verProtocol(),i=("github"==r&&(o=this.githubPackageCache[n._verspec]),c(n));return(o?Promise.resolve(o):n.commonDownloadAsync()).then(e=>{if(e)return"github"!=r||o||(this.githubPackageCache[n._verspec]=g.Util.clone(e)),i.setFiles(e),Promise.resolve();if("empty"==r){if(0==Object.keys(i.files).length&&i.setFiles(u()),t&&t.length){const o=c(n).files,r=JSON.parse(o[g.CONFIG_NAME]);t.forEach(e=>{s(r,e)}),o[g.CONFIG_NAME]=g.Package.stringifyConfig(r)}return Promise.resolve()}if("docs"!=r)return"invalid"==r?(g.log("skipping invalid pkg "+n.id),Promise.resolve()):Promise.reject(`Cannot download ${n.version()}; unknown protocol`);{let e=u(),t=JSON.parse(e[g.CONFIG_NAME]);return n.verArgument().split(",").forEach(e=>{s(t,e)}),t.yotta||(t.yotta={}),t.yotta.ignoreConflicts=!0,e[g.CONFIG_NAME]=g.Package.stringifyConfig(t),i.setFiles(e),Promise.resolve()}})}}let p,a,l;function s(e,t){var n=/^([a-zA-Z0-9_-]+)(=(.+))?$/.exec(t);if(n){if(n[3]&&this&&this.patchDependencies(e,n[1],n[3]))return;e.dependencies[n[1]]=n[3]||"*"}else console.warn("unknown package syntax "+t)}function c(e){var t=e._editorPkg;if(t)return t;let n=null;e!=h.mainPkg&&(n=c(h.mainPkg));t=new C(e,n);return e==h.mainPkg&&(t.topPkg=t),e._editorPkg=t}function u(){var e=g.appTarget.tsprj,t=g.U.clone(e.files);return t[g.CONFIG_NAME]=g.Package.stringifyConfig(e.config),t[g.MAIN_BLOCKS]="",t}function d(e){console.error(e)}function _(e,n,t){var o=e?/\w+:\w+/.test(e)?e:"pub:"+e:"empty:tsprj";let r,i,s;return a&&a._verspec==o?(h.mainPkg=a,r=h.mainPkg.host(),i=Promise.resolve(),s=Promise.resolve()):(r=h.mainPkg.host(),h.mainPkg=new g.MainPackage(r),h.mainPkg._verspec=e?/\w+:\w+/.test(e)?e:"pub:"+e:"empty:tsprj",i=r.downloadPackageAsync(h.mainPkg,t),s=h.mainPkg.installAllAsync(),a=h.mainPkg),i.then(()=>r.readFile(h.mainPkg,g.CONFIG_NAME)).then(e=>e?s.then(()=>{var e,t;n&&((e=c(h.mainPkg)).files[g.MAIN_TS]=n,(t=JSON.parse(e.files[g.CONFIG_NAME])).name=window.location.href.split("/").pop().split(/[?#]/)[0],e.files[g.CONFIG_NAME]=g.Package.stringifyConfig(t),h.mainPkg.config.name=t.name,-1==h.mainPkg.config.files.indexOf(g.MAIN_BLOCKS))&&h.mainPkg.config.files.push(g.MAIN_BLOCKS)}).catch(e=>{d(lf("Cannot load extension: {0}",e.message))}):Promise.resolve())}function m(e){var t=h.mainPkg.getTargetOptions();return t.isNative=!!e,t.hasHex=!!e,h.mainPkg.getCompileOptionsAsync(t)}function n(e,t){return m(e).then(e=>{t&&t(e);e=pxtc.compile(e);return e.diagnostics&&0<e.diagnostics.length&&e.diagnostics.forEach(e=>{console.error(e.messageText)}),e})}async function f(o){var e;await _(o.id,o.code,o.dependencies);let r=!1;const i=g.appTarget.versions.target;let t=await n(!1,e=>{var t;if(o.assets){const h=JSON.parse(o.assets);for(const o of Object.keys(h)){const r=h[o];if(e.fileSystem[o]=r,e.sourceFiles.indexOf(o)<0&&e.sourceFiles.push(o),/\.jres$/.test(o)){const h=JSON.parse(r);e.jres=g.inflateJRes(h,e.jres)}}}if(o.code&&(e.fileSystem[g.MAIN_TS]=o.code),e.target.preferredEditor===g.PYTHON_PROJECT_NAME){e.target.preferredEditor=g.JAVASCRIPT_PROJECT_NAME,e.ast=!0;const h=S(pxtc.compile(e).ast,e);e.apisInfo=h,e.target.preferredEditor=g.PYTHON_PROJECT_NAME}var n=null==(t=h.mainPkg.config.targetVersions)?void 0:t.target;if(n&&i&&g.semver.cmp(g.semver.parse(n),g.semver.parse(i))<0)for(const h of Object.keys(e.fileSystem))!g.Util.startsWith(h,"pxt_modules")&&g.Util.endsWith(h,".ts")&&(r=!0,e.fileSystem[h]=g.patching.patchJavaScript(n,e.fileSystem[h]))});return 0<(null==(e=t.diagnostics)?void 0:e.length)&&r&&(g.log("Compile with upgrade rules failed, trying again with original code"),t=await n(!1,e=>{o.code&&(e.fileSystem[g.MAIN_TS]=o.code)})),t.diagnostics&&0<t.diagnostics.length&&console.error("Diagnostics",t.diagnostics),pxtc.buildSimJsInfo(t)}function y(e){let t={};try{var n=window.localStorage.getItem(e);n&&(t=JSON.parse(n))}catch(e){}return t}function k(e,t){if(h.editorLanguageMode=e,t==g.Util.localeInfo())return Promise.resolve();{const h=/^live-/;return h.test(t)&&g.Util.enableLiveLocalizationUpdates(),g.Util.updateLocalizationAsync({targetId:g.appTarget.id,baseUrl:g.webConfig.commitCdnUrl,code:t.replace(h,""),pxtBranch:g.appTarget.versions.pxtCrowdinBranch,targetBranch:g.appTarget.versions.targetCrowdinBranch})}}function b(e){var t=e.data;if(t)switch(t.type){case"fileloaded":var n=t,o=n.name;k(/\.ts$/i.test(o)?l.TypeScript:l.Blocks,n.locale);break;case"popout":o=/((\/v[0-9+])\/)?[^\/]*#(doc|md):([^&?:]+)/i.exec(window.location.href);if(o){const e=g.webConfig.docsUrl||"/--docs";n=o[2]||"",o="doc"==o[3]?g.webConfig.isStatic?`/docs${o[4]}.html`:""+o[4]:e+"?md="+o[4];window.parent&&window.parent.postMessage({type:"opendoc",url:g.BrowserUtils.urlJoin(n,o)},"*")}break;case"localtoken":t&&t.localToken&&(g.Cloud.localToken=t.localToken,i.forEach(e=>e()),i=[])}}function v(t,n){return g.Cloud.privateGetTextAsync(n+"/text").then(e=>JSON.parse(e)).then(e=>T(t,e,n))}function T(e,t,n=null,o=!1){const r=JSON.parse(t[g.CONFIG_NAME])||{};let i=`# ${r.name} ${r.version||""}

`;const s="README.md";t[s]&&(i+=t[s].replace(/^#+/,"$0#")+"\n"),r.files.filter(e=>e!=g.CONFIG_NAME&&e!=s).filter(e=>h.editorLanguageMode==l.Blocks==/\.blocks?$/.test(e)).forEach(e=>{/^main\.(ts|blocks)$/.test(e)||(i+=`
## ${e}
`),/\.ts$/.test(e)?i+=`\`\`\`typescript
${t[e]}
\`\`\`
`:/\.blocks?$/.test(e)?i+=`\`\`\`blocksxml
${t[e]}
\`\`\`
`:i+=`\`\`\`${e.substr(e.indexOf("."))}
${t[e]}
\`\`\`
`});var a=r&&r.dependencies&&Object.keys(r.dependencies).filter(e=>e!=g.appTarget.corepkg);if(a&&a.length&&(i+=`
## ${lf("Extensions")} #extensions

${a.map(e=>`* ${e}, `+r.dependencies[e]).join("\n")}

\`\`\`package
${a.map(e=>e+"="+r.dependencies[e]).join("\n")}
\`\`\`
`),n){let e=(g.appTarget.appTheme.shareUrl||"https://makecode.com/")+n;o&&(e="`"+e+"`"),i+=`
${e}

`}return console.debug("print md: "+i),E(e,i,{print:!0})}function E(e,t,n={}){var t=g.docs.renderMarkdown({template:'\n<aside id=button class=box>\n   <a class="ui primary button" href="@ARGS@">@BODY@</a>\n</aside>\n\n<aside id=vimeo>\n<div class="ui two column stackable grid container">\n<div class="column">\n    <div class="ui embed mdvid" data-source="vimeo" data-id="@ARGS@" data-placeholder="/thumbnail/1024/vimeo/@ARGS@" data-icon="video play">\n    </div>\n</div></div>\n</aside>\n\n<aside id=youtube>\n<div class="ui two column stackable grid container">\n<div class="column">\n    <div class="ui embed mdvid" data-source="youtube" data-id="@ARGS@" data-placeholder="https://img.youtube.com/vi/@ARGS@/0.jpg">\n    </div>\n</div></div>\n</aside>\n\n<aside id=section>\n    \x3c!-- section @ARGS@ --\x3e\n</aside>\n\n<aside id=hide class=box>\n    <div style=\'display:none\'>\n        @BODY@\n    </div>\n</aside>\n\n<aside id=avatar class=box>\n    <div class=\'avatar @ARGS@\'>\n        <div class=\'avatar-image\'></div>\n        <div class=\'ui compact message\'>\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n<aside id=hint class=box>\n    <div class="ui info message">\n        <div class="content">\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n<aside id=codecard class=box>\n    <pre><code class="lang-codecard">@BODY@</code></pre>\n</aside>\n\n<aside id=tutorialhint class=box>\n    <div class="ui hint message">\n        <div class="content">\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n<aside id=reminder class=box>\n    <div class="ui warning message">\n        <div class="content">\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n<aside id=alert class=box>\n    <div class="ui negative message">\n        <div class="content">\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n<aside id=tip class=box>\n    <div class="ui positive message">\n        <div class="content">\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n\x3c!-- wrapped around ordinary content --\x3e\n<aside id=main-container class=box>\n    <div class="ui text">\n        @BODY@\n    </div>\n</aside>\n\n\x3c!-- used for \'column\' box - they are collected and wrapped in \'column-container\' --\x3e\n<aside id=column class=aside>\n    <div class=\'column\'>\n        @BODY@\n    </div>\n</aside>\n<aside id=column-container class=box>\n    <div class="ui three column stackable grid text">\n        @BODY@\n    </div>\n</aside>\n@breadcrumb@\n@body@',markdown:t,theme:g.appTarget.appTheme}),o=n.blocksAspectRatio||window.innerHeight<window.innerWidth?1.62:1/1.62,t=($(e).html(t),$(e).find("a").attr("target","_blank"),g.runner.defaultClientRenderOptions());return t.tutorial=!!n.tutorial,t.blocksAspectRatio=o||t.blocksAspectRatio,t.showJavaScript=h.editorLanguageMode==l.TypeScript,n.print&&(t.showEdit=!1,t.simulator=!1),g.runner.renderAsync(t).then(()=>{$(e).find('a[href^="/"]').removeAttr("target").each((e,t)=>{$(t).attr("href","#doc:"+$(t).attr("href").replace(/^\//,""))}),$(e).find(".ui.embed").embed()})}g.react.getTilemapProject||(g.react.getTilemapProject=()=>(p||(p=new g.TilemapProject).loadPackage(h.mainPkg),p)),h.initFooter=function(r,e){if(r){let e=g.appTarget.appTheme,t=$("body"),n=$(r),o=$("<a/>").attr("href",e.homeUrl).attr("target","_blank");n.append(o),e.organizationLogo?o.append($("<img/>").attr("src",g.Util.toDataUri(e.organizationLogo))):o.append(lf("powered by {0}",e.title)),t.mouseenter(e=>n.fadeOut()),t.mouseleave(e=>n.fadeIn())}},h.showError=d,h.generateHexFileAsync=function(t){return _(t.id).then(()=>n(!0,e=>{t.code&&(e.fileSystem[g.MAIN_TS]=t.code)})).then(e=>(e.diagnostics&&0<e.diagnostics.length&&console.error("Diagnostics",e.diagnostics),e.outfiles[pxtc.BINARY_HEX]))},h.generateVMFileAsync=function(t){return g.setHwVariant("vm"),_(t.id).then(()=>n(!0,e=>{t.code&&(e.fileSystem[g.MAIN_TS]=t.code)})).then(e=>(console.log(e),e))},h.simulateAsync=async function(e,r){var t;const n=r.builtJsInfo||await f(r),{js:i,fnArgs:o,parts:s,usedBuiltinParts:a}=n;if(!i)return void console.error("Program failed to compile");var l={onSimulatorCommand:e=>{if("restart"===e.command&&(p.storedState=y(r.id),c.run(i,p)),"setstate"==e.command&&e.stateKey&&e.stateValue){var t=r.id,n=e.stateKey,e=e.stateValue,o=y(t);if(t){e?o[n]=e:delete o[n];try{window.localStorage.setItem(t,JSON.stringify(o))}catch(t){}}}}};l.messageSimulators=null==(t=null==(t=g.appTarget)?void 0:t.simulator)?void 0:t.messageSimulators;let c=new pxsim.SimulatorDriver(e,l),u=g.appTarget.simulator.boardDefinition,d=y(r.id),p={boardDefinition:u,parts:s,builtinParts:a,fnArgs:o,cdnUrl:g.webConfig.commitCdnUrl,localizedStrings:g.Util.getLocalizedStrings(),highContrast:r.highContrast,storedState:d,light:r.light,single:r.single};return g.appTarget.simulator&&!r.fullScreen&&(p.aspectRatio=s.length&&g.appTarget.simulator.partsAspectRatio?g.appTarget.simulator.partsAspectRatio:g.appTarget.simulator.aspectRatio),c.run(i,p),n},h.buildSimJsInfo=f,(e=l=h.LanguageMode||(h.LanguageMode={}))[e.Blocks=0]="Blocks",e[e.TypeScript=1]="TypeScript",h.editorLanguageMode=l.Blocks,h.setEditorContextAsync=k,h.startRenderServer=function(){g.tickEvent("renderer.ready");const t=[];let n;g.editor.initEditorExtensionsAsync().then(()=>{window.addEventListener("message",function(e){e=e.data;"renderblocks"==e.type&&(t.push(e),function e(){if(!n){const r=t.shift();if(r){const i=r.options||{},s=(i.splitSvg=!1,g.tickEvent("renderer.job"),/^\s*<xml/.test(r.code));n=(async()=>{await g.BrowserUtils.loadBlocklyAsync();var e=(n=(s?await g.runner.compileBlocksAsync(r.code,i):await h.decompileSnippetAsync(r.code,r.options)).blocksSvg).viewBox.baseVal.width,t=n.viewBox.baseVal.height,n=n?await g.blocks.layout.blocklyToSvgAsync(n,0,0,e,t):void 0;let o;try{o=n?await g.BrowserUtils.encodeToPngAsync(n.xml,{width:e,height:t}):void 0}catch(e){console.warn(e)}window.parent.postMessage({source:"makecode",type:"renderblocks",id:r.id,width:null==n?void 0:n.width,height:null==n?void 0:n.height,svg:null==n?void 0:n.svg,uri:o||(null==n?void 0:n.xml),css:null==n?void 0:n.css},"*")})().catch(e=>{window.parent.postMessage({source:"makecode",type:"renderblocks",id:r.id,error:e.message},"*")}).finally(()=>{n=void 0,e()})}}}())},!1),window.parent.postMessage({source:"makecode",type:"renderready",versions:g.appTarget.versions},"*")})},h.startDocsServer=function(e,a,t){g.tickEvent("docrenderer.ready");const n=[];function o(i,s){g.debug("rendering "+i),t&&$(t).hide(),$(a).hide(),$(e).show(),g.U.delay(100).then(()=>{switch(i){case"print":var e=window.localStorage.printjob;return delete window.localStorage.printjob,T(a,JSON.parse(e),void 0,!0).then(()=>pxsim.print(1e3));case"project":return T(a,JSON.parse(s)).then(()=>pxsim.print(1e3));case"projectid":return v(a,JSON.parse(s)).then(()=>pxsim.print(1e3));case"doc":return n=a,r=(r=s).replace(/^\//,""),g.Cloud.markdownAsync(r).then(e=>E(n,e,{path:r}));case"book":{var o=a;var t=s;t=t.replace(/^\//,""),g.tickEvent("book",{id:t}),g.log("rendering book from "+t);let n;return $("#loading").find(".loader").addClass("text").text(lf("Compiling your book (this may take a minute)")),g.U.delay(100).then(()=>g.Cloud.markdownAsync(t)).then(e=>{n=g.docs.buildTOC(e),g.log("TOC: "+JSON.stringify(n,null,2));const t=[];return g.docs.visitTOC(n,e=>{/^\//.test(e.path)&&!/^\/pkg\//.test(e.path)&&t.push(e)}),g.U.promisePoolAsync(4,t,async t=>{try{var e=await g.Cloud.markdownAsync(t.path);t.markdown=e}catch(e){t.markdown=`_${t.path} failed to load._`}})}).then(e=>{let t=n[0].name;return g.docs.visitTOC(n,e=>{e.markdown&&(t+="\n\n"+e.markdown)}),E(o,t)});return}default:return E(a,s)}var n,r}).catch(e=>{$(a).html(`
                    <img style="height:4em;" src="${g.appTarget.appTheme.docsLogo}" />
                    <h1>${lf("Oops")}</h1>
                    <h3>${lf("We could not load the documentation, please check your internet connection.")}</h3>
                    <button class="ui button primary" id="tryagain">${lf("Try Again")}</button>`),$(a).find("#tryagain").click(()=>{o(i,s)}),window.parent&&window.parent.postMessage({type:"docfailed",docType:i,src:s},"*")}).finally(()=>{$(e).hide(),t&&$(t).show(),$(a).show()}).then(()=>{})}function r(e,t){t?(pxsim.U.addClass(e,"disabled"),e.setAttribute("aria-disabled","true")):(pxsim.U.removeClass(e,"disabled"),e.setAttribute("aria-disabled","false"))}function i(){let e=/^#(doc|md|tutorial|book|project|projectid|print):([^&?:]+)(:([^&?:]+):([^&?:]+))?/i.exec(window.location.hash);e&&(t&&(n.push(window.location.hash),10<n.length&&n.shift(),1<n.length)&&r(t,!1),(e[4]?k(/^blocks$/.test(e[4])?l.Blocks:l.TypeScript,e[5]):Promise.resolve()).then(()=>o(e[1],decodeURIComponent(e[2]))))}t&&(t.addEventListener("click",()=>{t&&(1<n.length&&(n.pop(),window.location.hash=n.pop()),n.length<=1)&&r(t,!0)}),r(t,!0)),g.editor.initEditorExtensionsAsync().then(()=>{window.addEventListener("message",b,!1),window.addEventListener("hashchange",()=>{i()},!1),parent.postMessage({type:"sidedocready"},"*"),setTimeout(()=>i(),1)})},h.renderProjectAsync=v,h.renderProjectFilesAsync=T;let o,r;function S(e,t){r=r||{};var n=Object.keys(t.fileSystem).sort().join(";");return r[n]||(r[n]=pxtc.getApiInfo(e,t.jres)),r[n]}h.renderMarkdownAsync=E,h.decompileSnippetAsync=function(t,l){const{assets:c,forceCompilation:n,snippetMode:u,generateSourceMap:d}=l||{};return _(l&&l.packageId?"pub:"+l.packageId:l&&l.package?"docs:"+l.package:null,t).then(()=>m(!!g.appTarget.compile&&g.appTarget.compile.hasHex)).then(e=>{if(t&&(e.fileSystem[g.MAIN_TS]=t),e.ast=!0,c)for(const g of Object.keys(c))e.sourceFiles.indexOf(g)<0&&e.sourceFiles.push(g),e.fileSystem[g]=c[g];let r,i,s,a=(i=n?(r=pxtc.compile(e))&&r.ast:pxtc.getTSProgram(e,o),o=i,g.appTarget.appTheme.python&&(s=ts.pxtc.transpile.tsToPy(i,g.MAIN_TS)),S(i,e));return ts.pxtc.localizeApisAsync(a,h.mainPkg).then(()=>{var e=pxtc.getBlocksInfo(a),t=(g.blocks.initializeAndInject(e),null==c?void 0:c[g.TILEMAP_JRES]),n=null==c?void 0:c[g.IMAGES_JRES],e=((t||n)&&((p=new g.TilemapProject).loadPackage(h.mainPkg),t&&p.loadTilemapJRes(JSON.parse(t),!0),n)&&p.loadAssetsJRes(JSON.parse(n)),pxtc.decompiler.decompileToBlocks(e,i.getSourceFile(g.MAIN_TS),{snippetMode:u,generateSourceMap:d}));if(e.diagnostics&&0<e.diagnostics.length&&e.diagnostics.forEach(e=>console.error(e.messageText)),!e.success)return{package:h.mainPkg,compileProgram:i,compileJS:r,compileBlocks:e,apiInfo:a};g.debug(e.outfiles[g.MAIN_BLOCKS]);var o=g.blocks.render(e.outfiles[g.MAIN_BLOCKS],l);return(t||n)&&(p=null),{package:h.mainPkg,compileProgram:i,compileJS:r,compileBlocks:e,compilePython:s,apiInfo:a,blocksSvg:o}})})},h.compileBlocksAsync=function(r,i){const s=(i||{})["assets"];return _(i&&i.packageId?"pub:"+i.packageId:i&&i.package?"docs:"+i.package:null,"").then(()=>m(!!g.appTarget.compile&&g.appTarget.compile.hasHex)).then(e=>{if(e.ast=!0,s)for(const g of Object.keys(s))e.sourceFiles.indexOf(g)<0&&e.sourceFiles.push(g),e.fileSystem[g]=s[g];const o=S(pxtc.compile(e).ast,e);return ts.pxtc.localizeApisAsync(o,h.mainPkg).then(()=>{var e=pxtc.getBlocksInfo(o),e=(g.blocks.initializeAndInject(e),null==s?void 0:s[g.TILEMAP_JRES]),t=null==s?void 0:s[g.IMAGES_JRES],n=((e||t)&&((p=new g.TilemapProject).loadPackage(h.mainPkg),e&&p.loadTilemapJRes(JSON.parse(e),!0),t)&&p.loadAssetsJRes(JSON.parse(t)),g.blocks.render(r,i));return(e||t)&&(p=null),{package:h.mainPkg,blocksSvg:n,apiInfo:o}})})};let i=[];h.initCallbacks=[],h.init=function(){!function(){g.setAppTarget(window.pxtTargetBundle),g.Util.assert(!!g.appTarget);var e=window.location.href;let t,n=!1;if(/[&?]translate=1/.test(e)&&!g.BrowserUtils.isIE())t=ts.pxtc.Util.TRANSLATION_LOCALE,n=!0,g.Util.enableLiveLocalizationUpdates();else{const h=/PXT_LANG=(.*?)(?:;|$)/.exec(document.cookie),x=/(live)?(force)?lang=([a-z]{2,}(-[A-Z]+)?)/i.exec(e),o=(t=x?x[3]:h&&h[1]||g.appTarget.appTheme.defaultLocale||navigator.userLanguage||navigator.language,g.appTarget.appTheme.defaultLocale),r=null==t?void 0:t.toLocaleLowerCase(),i=g.BrowserUtils.isLocalHostDev()&&(!r||(o?o.toLocaleLowerCase()===r:"en"===r||"en-us"===r));(!(g.BrowserUtils.isPxtElectron()||i||g.appTarget.appTheme.disableLiveTranslations)||null!=x&&x[1])&&g.Util.enableLiveLocalizationUpdates(),n=!!x&&!!x[2]}const o=g.appTarget.versions,r=($&&$.fn&&$.fn.embed&&$.fn.embed.settings&&$.fn.embed.settings.sources&&$.fn.embed.settings.sources.youtube&&($.fn.embed.settings.sources.youtube.url="//www.youtube.com/embed/{id}?rel=0"),g.webConfig);return g.Util.updateLocalizationAsync({targetId:g.appTarget.id,baseUrl:r.commitCdnUrl,code:t,pxtBranch:o?o.pxtCrowdinBranch:"",targetBranch:o?o.targetCrowdinBranch:"",force:n}).then(()=>{h.mainPkg=new g.MainPackage(new x)})}().then(()=>{for(let e=0;e<h.initCallbacks.length;++e)h.initCallbacks[e]()})},(e=window.ksRunnerWhenLoaded)&&e()}}(pxt=pxt||{});