"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FieldMotors=void 0;class FieldMotors extends pxtblockly.FieldImages{constructor(t,e,o){super(t,e,o),this.isFieldCustom_=!0,this.buttonClick_=function(t){t=t.target.getAttribute("data-value");this.setValue(t),Blockly.DropDownDiv.hide()},this.columns_=parseInt(e.columns)||4,this.width_=parseInt(e.width)||400,this.addLabel_=!0,this.renderSelectedImage_=Blockly.FieldDropdown.prototype.renderSelectedText_,this.updateSize_=Blockly.Field.prototype.updateSize_}showEditor_(){if(!Blockly.DropDownDiv.hideIfOwner(this)){var i=this.sourceBlock_,t=(Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent(),Blockly.DropDownDiv.getContentDiv());let o=document.createElement("div");o.setAttribute("role","menu"),o.setAttribute("aria-haspopup","true");var l=this.getOptions();for(let e=0;e<l.length;e++){var r=l[e][0],s=l[e][1];if("placeholder"==r.type){var d=document.createElement("span");d.setAttribute("class","blocklyDropDownPlaceholder"),d.style.width=r.width+"px",d.style.height=r.height+"px",o.appendChild(d)}else{d=document.createElement("button");d.setAttribute("id",":"+e),d.setAttribute("role","menuitem"),d.setAttribute("class","blocklyDropDownButton"),d.title=r.alt,this.columns_?d.style.width=this.width_/this.columns_-8+"px":(d.style.width=r.width+"px",d.style.height=r.height+"px");let t=i.getColour();s==this.getValue()&&(t=i.getColourTertiary(),d.setAttribute("aria-selected","true")),d.style.backgroundColor=t,d.style.borderColor=i.getColourTertiary(),Blockly.bindEvent_(d,"click",this,this.buttonClick_),Blockly.bindEvent_(d,"mouseover",d,function(){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),o.setAttribute("aria-activedescendant",this.id)}),Blockly.bindEvent_(d,"mouseout",d,function(){this.setAttribute("class","blocklyDropDownButton"),o.removeAttribute("aria-activedescendant")});var n=document.createElement("img");n.src=r.src,d.setAttribute("data-value",s),n.setAttribute("data-value",s),d.appendChild(n),this.addLabel_&&((n=this.createTextNode_(r.alt)).setAttribute("data-value",s),n.style.whiteSpace="inherit",n.style.width="auto",n.style.padding="0 10px",d.appendChild(n)),o.appendChild(d)}}o.style.width=this.width_+"px",t.appendChild(o),Blockly.DropDownDiv.setColour(i.getColour(),i.getColourTertiary()),Blockly.DropDownDiv.showPositionedByField(this,this.onHideCallback.bind(this)),this.savedPrimary_=null==i?void 0:i.getColour(),null!=i&&i.isShadow()?i.setColour(i.style.colourTertiary):this.borderRect_&&this.borderRect_.setAttribute("fill",i.style.colourTertiary)}}trimOptions_(){}}exports.FieldMotors=FieldMotors;